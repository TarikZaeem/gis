// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ./_rollupPluginBabelHelpers ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../core/has ../core/maybe".split(" "),function(t,K,q,y,b,g,A,D,h,C,v){function n(S,V){if(!0===V.useAsync||!0===S.isAsync)return k(S,V);if(C("esri-csp-restrictions"))return function(X){return g.executeScript(S,X)};try{return y.compileScript(S,V)}catch(X){if("esri.arcade.arcadeuncompilableerror"===
X.declaredRootClass)return function(Z){return g.executeScript(S,Z)};throw X;}}function k(S,V){if(null===U)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.AsyncNotEnabled,null);if(C("esri-csp-restrictions"))return function(X){return U.executeScript(S,X)};try{return y.compileScript(S,V,!0)}catch(X){if("esri.arcade.arcadeuncompilableerror"===X.declaredRootClass)return function(Z){return U.executeScript(S,Z)};throw X;}}function d(S){g.extend(S);y.extend(S,"sync");null===U?p.push(S):(y.extend(S,
"async"),U.extend(S))}function c(S,V=[]){return D.parseScript(S,V)}function x(S,V,X=[]){S=D.parseScript(S,X);return e(S,V)}function e(S,V){if(!0===V.useAsync||!0===S.isAsync){if(null===U)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.AsyncNotEnabled,null);return U.executeScript(S,V)}return g.executeScript(S,V)}function r(S,V){return h.referencesMember(S,V)}function z(S,V){return h.referencesFunction(S,V)}function B(S,V=!1){void 0===V&&(V=!1);return h.findFieldLiterals(S)}function a(S){return h.findExpectedFieldLiterals(S)}
function l(S,V=[]){void 0===S.usesGeometry&&h.findScriptDependencies(S,V);return!0===S.usesGeometry}function m(){return u?u:u=E()}function E(){return f.apply(this,arguments)}function f(){f=q._asyncToGenerator(function*(){const [S,V]=yield Promise.all([new Promise((X,Z)=>t(["../geometry/geometryEngine"],X,Z)),new Promise((X,Z)=>t(["../arcade/functions/geomsync"],X,Z))]);ia=!0;V.setGeometryEngine(S);return!0});return f.apply(this,arguments)}function H(){return null!==N?N:N=ha()}function ha(){return aa.apply(this,
arguments)}function aa(){aa=q._asyncToGenerator(function*(){yield y.enableAsyncSupport();U=yield new Promise((S,V)=>t(["../arcade/arcadeAsyncRuntime"],S,V));for(const S of p)U.extend(S),y.extend(S,"async");p=null;return!0});return aa.apply(this,arguments)}function ea(){return ca}function sa(){return U?!0:!1}function Ha(){return ia}function ua(){return M?M:M=xa()}function xa(){return ka.apply(this,arguments)}function ka(){ka=q._asyncToGenerator(function*(){yield H();const [S,V,X,Z,ma]=yield Promise.all([new Promise((pa,
ta)=>t(["../arcade/featureSetUtils"],pa,ta)),new Promise((pa,ta)=>t(["../arcade/functions/featuresetbase"],pa,ta)),new Promise((pa,ta)=>t(["../arcade/functions/featuresetgeom"],pa,ta)),new Promise((pa,ta)=>t(["../arcade/functions/featuresetstats"],pa,ta)),new Promise((pa,ta)=>t(["../arcade/functions/featuresetstring"],pa,ta))]);T=S;U.extend([V,X,Z,ma]);y.extend([V,X,Z,ma],"async");return ca=!0});return ka.apply(this,arguments)}function W(S,V=[]){void 0===S.usesFeatureSet&&h.findScriptDependencies(S,
V);return!0===S.usesFeatureSet}function la(S,V=[]){void 0===S.isAsync&&h.findScriptDependencies(S,V);return!0===S.isAsync}function oa(S,V){return ra.apply(this,arguments)}function ra(){ra=q._asyncToGenerator(function*(S,V,X=[],Z=!1,ma=null){return ya(new Set,S,V,X,Z,ma)});return ra.apply(this,arguments)}function ya(S,V,X){return I.apply(this,arguments)}function I(){I=q._asyncToGenerator(function*(S,V,X,Z=[],ma=!1,pa=null){V="string"===typeof V?c(V):V;const ta=[];if(V&&(!1===ia&&(l(V)||ma)&&ta.push(m()),
!1===sa()&&(!0===V.isAsync||X)&&ta.push(H()),!1===ca)){var za;if(!(za=W(V)))a:{if(Z)for(const Da of Z)if(r(V,Da)){za=!0;break a}za=!1}za&&ta.push(ua())}ta.length&&(yield Promise.all(ta));yield L(S,V,pa,X,ma);return!0});return I.apply(this,arguments)}function G(S,V=[]){void 0===S.usesModules&&h.findScriptDependencies(S,V);return!0===S.usesModules}function L(S,V){return F.apply(this,arguments)}function F(){F=q._asyncToGenerator(function*(S,V,X=null,Z=!1,ma=!1){var pa=h.findModuleImports(V);null===X&&
0<pa.length&&(X=b.ArcadeModuleResolver.getDefault());V.loadedModules={};for(const ta of pa){v.assertIsSome(X);pa=X.normalizeModuleUri(ta.source);if(S.has(pa.uri))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.CircularModules,null);S.add(pa.uri);const za=yield X.fetchModule(pa);yield ya(S,za,Z,[],ma,X);S.delete(pa.uri);za.isAsync&&(V.isAsync=!0);za.usesFeatureSet&&(V.usesFeatureSet=!0);za.usesGeometry&&(V.usesGeometry=!0);V.loadedModules[ta.libname]={uri:pa.uri,script:za}}});return F.apply(this,
arguments)}function P(S){if(l(S))return!0;S=h.findFunctionCalls(S);let V=!1;for(let X=0;X<S.length;X++)if(Q.includes(S[X])){V=!0;break}return V}function O(){return T}const Q="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" ");let ca=!1,ia=!1,U=null,p=[],u=null,N=null,M=null,T=null;const fa=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:ya,compileScript:n,enableAsyncSupport:H,enableAsyncSupportImpl:ha,enableFeatureSetSupport:ua,
enableFeatureSetSupportImpl:xa,enableGeometrySupport:m,enableGeometrySupportImpl:E,executeScript:e,extend:d,extractExpectedFieldLiterals:a,extractFieldLiterals:B,featureSetUtils:O,isAsyncEnabled:sa,isFeatureSetSupportEnabled:ea,isGeometryEnabled:Ha,loadDependentModules:L,loadScriptDependencies:oa,parseAndExecuteScript:x,parseScript:c,referencesFunction:z,referencesMember:r,scriptIsAsync:la,scriptTouchesGeometry:P,scriptUsesFeatureSet:W,scriptUsesGeometryEngine:l,scriptUsesModules:G},Symbol.toStringTag,
{value:"Module"}));K._loadScriptDependenciesImpl=ya;K.arcade=fa;K.compileScript=n;K.enableAsyncSupport=H;K.enableAsyncSupportImpl=ha;K.enableFeatureSetSupport=ua;K.enableFeatureSetSupportImpl=xa;K.enableGeometrySupport=m;K.enableGeometrySupportImpl=E;K.executeScript=e;K.extend=d;K.extractExpectedFieldLiterals=a;K.extractFieldLiterals=B;K.featureSetUtils=O;K.isAsyncEnabled=sa;K.isFeatureSetSupportEnabled=ea;K.isGeometryEnabled=Ha;K.loadDependentModules=L;K.loadScriptDependencies=oa;K.parseAndExecuteScript=
x;K.parseScript=c;K.referencesFunction=z;K.referencesMember=r;K.scriptIsAsync=la;K.scriptTouchesGeometry=P;K.scriptUsesFeatureSet=W;K.scriptUsesGeometryEngine=l;K.scriptUsesModules=G})},"esri/arcade/arcadeCompiler":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ./Dictionary ./Feature ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d,c,x,e,r,z,B,a){function l(p,u,N){try{return N(p,null,u.arguments)}catch(M){throw M;}}function m(p,u){try{switch(u.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return sa(p,u);case "VariableDeclaration":var N=[];for(var M=0;M<u.declarations.length;M++)N.push(m(p,u.declarations[M]));return N.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return aa(p,u);case "FunctionDeclaration":{const ja=
u.id.name.toLowerCase();ea(ja);var T="",fa=!1;void 0!==p.globalScope[ja]?T=ja:void 0!==p.globalScope._SymbolsMap[ja]?T=p.globalScope._SymbolsMap[ja]:p.undeclaredGlobalsInFunctions.has(ja)?(T=p.undeclaredGlobalsInFunctions.get(ja).manglename,p.globalScope._SymbolsMap[ja]=T,p.mangleMap[ja]=T,p.undeclaredGlobalsInFunctions.delete(ja),fa=!0):(T=xa(p),p.globalScope._SymbolsMap[ja]=T,p.mangleMap[ja]=T);M={isAsync:p.isAsync,console:p.console,exports:p.exports,undeclaredGlobalsInFunctions:p.undeclaredGlobalsInFunctions,
customfunctions:p.customfunctions,moduleFactory:p.moduleFactory,moduleFactoryMap:p.moduleFactoryMap,libraryResolver:p.libraryResolver,lrucache:p.lrucache,interceptor:p.interceptor,services:p.services,symbols:p.symbols,mangleMap:p.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:p.depthCounter,globalScope:p.globalScope};var S="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var V=0;V<u.params.length;V++){const Ea=u.params[V].name.toLowerCase();ea(Ea);const Fa=xa(p);M.localScope._SymbolsMap[Ea]=Fa;M.mangleMap[Ea]=Fa;S+="lscope['"+Fa+"']\x3darguments["+V.toString()+"];\n"}!0===p.isAsync?(S=S+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(aa(M,u.body)+"\n return lastStatement; "),S=S+"});  }, runtimeCtx),"+(u.params.length+")")):S+=aa(M,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")";S+="\n lastStatement \x3d lc.voidOperation; \n";
N=fa?"gscope[lang.setAssig('"+T+"', runtimeCtx)]\x3d"+S:"gscope['"+T+"']\x3d"+S}return N;case "ImportDeclaration":{const ja=u.specifiers[0].local.name.toLowerCase();ea(ja);const Ea=p.libraryResolver?.loadLibrary(ja),Fa=xa(p);void 0===p.moduleFactory[Ea.uri]&&(p.moduleFactory[Ea.uri]=G(Ea.syntax,{interceptor:p.interceptor,services:p.services,moduleFactory:p.moduleFactory,lrucache:p.lrucache,timeReference:p.timeReference??null,libraryResolver:p.libraryResolver,customfunctions:p.customfunctions,vars:{}},
p.isAsync));p.moduleFactoryMap[Fa]=Ea.uri;u="";u=p.isAsync?"(yield lang.loadModule('"+Fa+"', runtimeCtx) ); ":"lang.loadModule('"+Fa+"', runtimeCtx); ";void 0!==p.globalScope[ja]?T="gscope['"+ja+"']\x3d"+u:void 0!==p.globalScope._SymbolsMap[ja]?T="gscope['"+p.globalScope._SymbolsMap[ja]+"']\x3d"+u:(N="",p.undeclaredGlobalsInFunctions.has(ja)?(N=p.undeclaredGlobalsInFunctions.get(ja).manglename,p.undeclaredGlobalsInFunctions.delete(ja)):N=xa(p),p.globalScope._SymbolsMap[ja]=N,p.mangleMap[ja]=N,T="gscope[lang.setAssig('"+
N+"', runtimeCtx)]\x3d"+u)}return T;case "ExportNamedDeclaration":const Da=m(p,u.declaration);if("FunctionDeclaration"===u.declaration.type)p.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const ja of u.declaration.declarations)p.exports[ja.id.name.toLowerCase()]="variable";return Da;case "ReturnStatement":var X=null===u.argument?"return lc.voidOperation":"return "+m(p,u.argument);return X;case "IfStatement":return ha(p,u);case "ExpressionStatement":var Z=
"AssignmentExpression"===u.expression.type?"lastStatement \x3d lc.voidOperation; "+m(p,u.expression)+"; \n ":"lastStatement \x3d "+m(p,u.expression)+"; ";return Z;case "AssignmentExpression":return f(p,u);case "UpdateExpression":return E(p,u);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{N=[];M=0;for(const ja of u.quasis)N.push(ja.value?JSON.stringify(ja.value.cooked):JSON.stringify("")),!1===ja.tail&&(N.push(u.expressions[M]?"lang.castString(lang.aCheck("+
m(p,u.expressions[M])+", 'TemplateLiteral'))":""),M++);fa="(["+N.join(",")+"]).join('')"}catch(ja){throw ja;}return fa;case "TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case "ForStatement":N="lastStatement \x3d lc.voidOperation; \n";null!==u.init&&(N+=m(p,u.init)+"; ");const Ja=ka(p),Ka=ka(p);N+="var "+Ja+" \x3d true; \n do { ";null!==u.update&&(N+=" if ("+Ja+"\x3d\x3d\x3dfalse) {\n "+m(p,u.update)+"  \n}\n "+Ja+"\x3dfalse; \n");null!==u.test&&(N+="var "+Ka+" \x3d "+m(p,u.test)+
"; ",N+="if ("+Ka+"\x3d\x3d\x3dfalse) { break; } else if ("+Ka+"!\x3d\x3dtrue) { lang.error('"+a.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");N+=m(p,u.body);null!==u.update&&(N+="\n "+m(p,u.update));return N+("\n"+Ja+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":V=ka(p);const Y=ka(p),va=ka(p);let na="var "+V+" \x3d "+m(p,u.right)+";\n";"VariableDeclaration"===u.left.type&&(na+=m(p,u.left));let Aa="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:
u.left.name;Aa=Aa.toLowerCase();ea(Aa);N="";null!==p.localScope&&(void 0!==p.localScope[Aa]?N="lscope['"+Aa+"']":void 0!==p.localScope._SymbolsMap[Aa]&&(N="lscope['"+p.localScope._SymbolsMap[Aa]+"']"));M="";if(""===N)if(void 0!==p.globalScope[Aa])N="gscope['"+Aa+"']";else if(void 0!==p.globalScope._SymbolsMap[Aa])N="gscope['"+p.globalScope._SymbolsMap[Aa]+"']";else if(null!==p.localScope)if(p.undeclaredGlobalsInFunctions.has(Aa))N="gscope['"+p.undeclaredGlobalsInFunctions.get(Aa).manglename+"']",
M=p.undeclaredGlobalsInFunctions.get(Aa).manglename;else{const ja={manglename:xa(p),node:u.left};p.undeclaredGlobalsInFunctions.set(Aa,ja);N="gscope['"+ja.manglename+"']";M=ja.manglename}M&&(na+="lang.chkAssig('"+M+"',runtimeCtx); \n");na=na+("if ("+V+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(V+") || lc.isString("+V+")) {var ")+(Y+"\x3d"+V+".length; \nfor(var ")+(va+"\x3d0; "+va+"\x3c"+Y+"; "+va+"++) {\n");na+=N+"\x3d"+va+";\n";na+=m(p,u.body);na+="\n}\n";
na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (lc.isImmutableArray("+V+")) {";na=na+("var "+Y+"\x3d"+V+".length(); \nfor(var ")+(va+"\x3d0; "+va+"\x3c"+Y+"; "+va+"++) {\n");na+=N+"\x3d"+va+";\n";na+=m(p,u.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (( "+V+" instanceof lang.Dictionary) || ( "+V+" instanceof lang.Feature)) {";na=na+("var "+Y+"\x3d"+V+".keys(); \nfor(var ")+(va+"\x3d0; "+va+"\x3c"+Y+".length; "+va+"++) {\n");na+=
N+"\x3d"+Y+"["+va+"];\n";na+=m(p,u.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";p.isAsync&&(na+="else if (lc.isFeatureSet("+V+")) {",na=na+("var "+Y+"\x3d"+V+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(va+"\x3dlang. graphicToFeature( yield "+Y+".next(),"+V+", runtimeCtx); "+va+"!\x3dnull; "+va+"\x3dlang. graphicToFeature( yield "+Y+".next(),"+V+", runtimeCtx)) {\n")+(N+"\x3d"+va+";\n"),na+=m(p,u.body),na+="\n}\n",na+=" lastStatement \x3d lc.voidOperation; \n",
na+=" \n}\n");return na+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":N="lastStatement \x3d lc.voidOperation; \n";const Ia=ka(p);return N+=`\n  var ${Ia} = true;\n    do {\n      ${Ia} = ${m(p,u.test)};\n      if (${Ia}==false) {\n        break;\n      }\n      if (${Ia}!==true) {\n        lang.error('${a.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${m(p,u.body)}\n    }\n    while (${Ia} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return Ha(p,
u);case "MemberExpression":try{let ja;!0===u.computed?ja=m(p,u.property):(ja="'"+u.property.name+"'",ea(u.property.name));var ma="lang.member("+m(p,u.object)+","+ja+")"}catch(ja){throw ja;}return ma;case "Literal":return null===u.value||void 0===u.value?"null":JSON.stringify(u.value);case "CallExpression":return ua(p,u);case "UnaryExpression":try{var pa="lang.unary("+m(p,u.argument)+",'"+u.operator+"')"}catch(ja){throw ja;}return pa;case "BinaryExpression":try{var ta="lang.binary("+m(p,u.left)+","+
m(p,u.right)+",'"+u.operator+"')"}catch(ja){throw ja;}return ta;case "LogicalExpression":try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,u);if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,u);if("\x26\x26"===u.operator||"||"===u.operator)var za="(lang.logicalCheck("+m(p,
u.left)+") "+u.operator+" lang.logicalCheck("+m(p,u.right)+"))";else throw new a.ArcadeCompilationError(null,a.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ja){throw ja;}return za;case "ArrayExpression":try{N=[];for(M=0;M<u.elements.length;M++)"Literal"===u.elements[M].type?N.push(m(p,u.elements[M])):N.push("lang.aCheck("+m(p,u.elements[M])+",'ArrayExpression')");S="["+N.join(",")+"]"}catch(ja){throw ja;}return S;case "ObjectExpression":N="lang.dictionary([";for(M=0;M<u.properties.length;M++){const ja=
u.properties[M];ea(ja.key.name);const Ea="Identifier"===ja.key.type?"'"+ja.key.name+"'":m(p,ja.key),Fa=m(p,ja.value);0<M&&(N+=",");N+="lang.strCheck("+Ea+",'ObjectExpression'),lang.aCheck("+Fa+", 'ObjectExpression')"}return N+"])";case "Property":throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.NeverReach,u);case "Array":throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.NeverReach,u);default:throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.Unrecognised,u);}}catch(Da){throw Da;
}}function E(p,u){let N=null;var M="";if("MemberExpression"===u.argument.type)return N=m(p,u.argument.object),!0===u.argument.computed?M=m(p,u.argument.property):(M="'"+u.argument.property.name+"'",ea(u.argument.property.name)),"lang.memberupdate("+N+","+M+",'"+u.operator+"',"+u.prefix+")";N=u.argument.name.toLowerCase();ea(N);if(null!==p.localScope){if(void 0!==p.localScope[N])return"lang.update(lscope, '"+N+"','"+u.operator+"',"+u.prefix+")";if(void 0!==p.localScope._SymbolsMap[N])return"lang.update(lscope, '"+
p.localScope._SymbolsMap[N]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==p.globalScope[N])return"lang.update(gscope, '"+N+"','"+u.operator+"',"+u.prefix+")";if(void 0!==p.globalScope._SymbolsMap[N])return"lang.update(gscope, '"+p.globalScope._SymbolsMap[N]+"','"+u.operator+"',"+u.prefix+")";if(null!==p.localScope){if(p.undeclaredGlobalsInFunctions.has(N))return"lang.update(gscope,lang.chkAssig( '"+p.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")";M=
{manglename:xa(p),node:u.argument};p.undeclaredGlobalsInFunctions.set(N,M);return"lang.update(gscope, lang.chkAssig('"+M.manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")"}throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.InvalidIdentifier,u);}function f(p,u){const N=m(p,u.right);let M=null;var T="";if("MemberExpression"===u.left.type)return M=m(p,u.left.object),!0===u.left.computed?T=m(p,u.left.property):(T="'"+u.left.property.name+"'",ea(u.left.property.name)),"lang.assignmember("+
M+","+T+",'"+u.operator+"',"+N+")";M=u.left.name.toLowerCase();ea(M);if(null!==p.localScope){if(void 0!==p.localScope[M])return"lscope['"+M+"']\x3dlang.assign("+N+",'"+u.operator+"', lscope['"+M+"'])";if(void 0!==p.localScope._SymbolsMap[M])return"lscope['"+p.localScope._SymbolsMap[M]+"']\x3dlang.assign("+N+",'"+u.operator+"', lscope['"+p.localScope._SymbolsMap[M]+"'])"}if(void 0!==p.globalScope[M])return"gscope['"+M+"']\x3dlang.assign("+N+",'"+u.operator+"', gscope['"+M+"'])";if(void 0!==p.globalScope._SymbolsMap[M])return"gscope['"+
p.globalScope._SymbolsMap[M]+"']\x3dlang.assign("+N+",'"+u.operator+"', gscope['"+p.globalScope._SymbolsMap[M]+"'])";if(null!==p.localScope){if(p.undeclaredGlobalsInFunctions.has(M))return"gscope[lang.chkAssig('"+p.undeclaredGlobalsInFunctions.get(M).manglename+"',runtimeCtx)]\x3dlang.assign("+N+",'"+u.operator+"', gscope['"+p.undeclaredGlobalsInFunctions.get(M).manglename+"'])";T={manglename:xa(p),node:u.argument};p.undeclaredGlobalsInFunctions.set(M,T);return"gscope[lang.chkAssig('"+T.manglename+
"',runtimeCtx)]\x3dlang.assign("+N+",'"+u.operator+"', gscope['"+T.manglename+"'])"}throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.InvalidIdentifier,u);}function H(p,u){return"BlockStatement"===u.type?m(p,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?m(p,u)+"; ":"UpdateExpression"===u.type?"lastStatement \x3d "+m(p,u)+"; ":"ExpressionStatement"===u.type?m(p,u):"ObjectExpression"===u.type?"lastStatement \x3d "+m(p,u)+"; ":m(p,u)+"; "}function ha(p,
u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.BooleanConditionRequired,u);return`if (lang.mustBoolean(${m(p,u.test)}, runtimeCtx) === true) {\n    ${H(p,u.consequent)}\n  } `+(null!==u.alternate?"IfStatement"===u.alternate.type?" else "+ha(p,u.alternate):` else {\n      ${H(p,u.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function aa(p,u){let N="";for(let M=0;M<u.body.length;M++)"EmptyStatement"!==
u.body[M].type&&(N="ReturnStatement"===u.body[M].type?N+(m(p,u.body[M])+"; \n"):"BreakStatement"===u.body[M].type?N+(m(p,u.body[M])+"; \n"):"ContinueStatement"===u.body[M].type?N+(m(p,u.body[M])+"; \n"):"UpdateExpression"===u.body[M].type?N+("lastStatement \x3d "+m(p,u.body[M])+"; \n"):"ObjectExpression"===u.body[M].type?N+("lastStatement \x3d "+m(p,u.body[M])+"; \n"):N+(m(p,u.body[M])+" \n"));return N}function ea(p){if("iif"===p)throw new a.ArcadeUncompilableError;if("decode"===p)throw new a.ArcadeUncompilableError;
if("when"===p)throw new a.ArcadeUncompilableError;}function sa(p,u){let N=null===u.init?null:m(p,u.init);N===g.voidOperation&&(N=null);u=u.id.name.toLowerCase();ea(u);if(null!==p.localScope){if(void 0!==p.localScope[u])return"lscope['"+u+"']\x3d"+N+"; ";if(void 0!==p.localScope._SymbolsMap[u])return"lscope['"+p.localScope._SymbolsMap[u]+"']\x3d"+N+"; ";var M=xa(p);p.localScope._SymbolsMap[u]=M;p.mangleMap[u]=M;return"lscope['"+M+"']\x3d"+N+"; "}if(void 0!==p.globalScope[u])return"gscope['"+u+"']\x3d"+
N+"; ";if(void 0!==p.globalScope._SymbolsMap[u])return"gscope['"+p.globalScope._SymbolsMap[u]+"']\x3d"+N+"; ";if(p.undeclaredGlobalsInFunctions.has(u))return M=p.undeclaredGlobalsInFunctions.get(u).manglename,p.globalScope._SymbolsMap[u]=M,p.mangleMap[u]=M,p.undeclaredGlobalsInFunctions.delete(u),"gscope[lang.setAssig('"+M+"', runtimeCtx)]\x3d"+N+"; ";M=xa(p);p.globalScope._SymbolsMap[u]=M;p.mangleMap[u]=M;return"gscope['"+M+"']\x3d"+N+"; "}function Ha(p,u){try{const N=u.name.toLowerCase();ea(N);
if(null!==p.localScope){if(void 0!==p.localScope[N])return"lscope['"+N+"']";if(void 0!==p.localScope._SymbolsMap[N])return"lscope['"+p.localScope._SymbolsMap[N]+"']"}if(void 0!==p.globalScope[N])return"gscope['"+N+"']";if(void 0!==p.globalScope._SymbolsMap[N])return"gscope['"+p.globalScope._SymbolsMap[N]+"']";if(null!==p.localScope){if(p.undeclaredGlobalsInFunctions.has(N))return"gscope[lang.chkAssig('"+p.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx)]";const M={manglename:xa(p),node:u.argument};
p.undeclaredGlobalsInFunctions.set(N,M);return"gscope[lang.chkAssig('"+M.manglename+"',runtimeCtx)]"}throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.InvalidIdentifier,u);}catch(N){throw N;}}function ua(p,u){try{if("MemberExpression"===u.callee.type){if(!0===u.callee.computed)var N=m(p,u.callee.property);else N="'"+u.callee.property.name+"'",ea(u.callee.property.name);var M="[";for(var T=0;T<u.arguments.length;T++)0<T&&(M+=", "),M+=m(p,u.arguments[T]);M+="]";return p.isAsync?"(yield lang.callModuleFunction("+
m(p,u.callee.object)+","+M+","+N+",runtimeCtx))":"lang.callModuleFunction("+m(p,u.callee.object)+","+M+","+N+",runtimeCtx)"}if("Identifier"!==u.callee.type)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.FuncionNotFound,u);const X=u.callee.name.toLowerCase();if("iif"===X){try{if(3!==u.arguments.length)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.WrongNumberOfParameters,u);const Z=ka(p);var fa=`${p.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${Z} = ${m(p,u.arguments[0])};\n       \n        if (${Z} === true) {\n          return  ${m(p,u.arguments[1])};\n        }\n        else if (${Z} === false) {\n          return ${m(p,u.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${p.isAsync?"})}()))":"}()"}`}catch(Z){throw Z;}return fa}if("when"===X){try{if(3>u.arguments.length)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.WrongNumberOfParameters,
u);if(0===u.arguments.length%2)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.WrongNumberOfParameters,u);const Z=ka(p);T="var ";for(var S=0;S<u.arguments.length-1;S+=2)T+=`${Z} = lang.mustBoolean(${m(p,u.arguments[S])}, runtimeCtx);\n      if (${Z} === true ) {\n        return ${m(p,u.arguments[S+1])} \n      }\n`;M=`${p.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${T}\n        return ${m(p,u.arguments[u.arguments.length-
1])}\n        ${p.isAsync?"})}()))":"}()"}`}catch(Z){throw Z;}return M}if("decode"===X){try{if(2>u.arguments.length)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.WrongNumberOfParameters,u);if(2===u.arguments.length)T=`(${m(p,u.arguments[1])})`;else{if(0===(u.arguments.length-1)%2)throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.WrongNumberOfParameters,u);S=ka(p);var V=ka(p);M="var ";for(N=1;N<u.arguments.length-1;N+=2)M+=`${V} = ${m(p,u.arguments[N])};\n      if (lang.binary(${V}, ${S}, "==") === true ) {\n        return ${m(p,
u.arguments[N+1])} \n      }\n`;T=`${p.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${S} = ${m(p,u.arguments[0])};\n        ${M}\n        return ${m(p,u.arguments[u.arguments.length-1])}\n        ${p.isAsync?"})}()))":"}()"}`}}catch(Z){throw Z;}return T}M="";null!==p.localScope&&(void 0!==p.localScope[X]?M="lscope['"+X+"']":void 0!==p.localScope._SymbolsMap[X]&&(M="lscope['"+p.localScope._SymbolsMap[X]+"']"));if(""===M)if(void 0!==
p.globalScope[X])M="gscope['"+X+"']";else if(void 0!==p.globalScope._SymbolsMap[X])M="gscope['"+p.globalScope._SymbolsMap[X]+"']";else if(null!==p.localScope)if(p.undeclaredGlobalsInFunctions.has(X))M="gscope[lang.chkAssig('"+p.undeclaredGlobalsInFunctions.get(X).manglename+"',runtimeCtx)]";else{const Z={manglename:xa(p),node:u.argument};p.undeclaredGlobalsInFunctions.set(X,Z);M="gscope[lang.chkAssig('"+Z.manglename+"',runtimeCtx)]"}if(""!==M){T="[";for(S=0;S<u.arguments.length;S++)0<S&&(T+=", "),
T+=m(p,u.arguments[S]);T+="]";return p.isAsync?"(yield lang.callfunc("+M+","+T+",runtimeCtx) )":"lang.callfunc("+M+","+T+",runtimeCtx)"}throw new a.ArcadeCompilationError(p,a.ExecutionErrorCodes.FuncionNotFound,u);}catch(X){throw X;}}function xa(p){p.symbols.symbolCounter++;return"_T"+p.symbols.symbolCounter.toString()}function ka(p){p.symbols.symbolCounter++;return"_Tvar"+p.symbols.symbolCounter.toString()}function W(p,u,N){const M={};p||(p={});N||(N={});M._SymbolsMap={};M.textformatting=1;M.infinity=
1;M.pi=1;for(const T in u)M[T]=1;for(const T in N)M[T]=1;for(const T in p)M[T]=1;return M}function la(p,u,N,M){N=N?new Q:new O;p||(p={});u||(u={});const T=new y({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});T.immutable=!1;N._SymbolsMap={textformatting:1,infinity:1,pi:1};N.textformatting=T;N.infinity=Number.POSITIVE_INFINITY;N.pi=Math.PI;for(const fa in u)N[fa]=u[fa],N._SymbolsMap[fa]=1;for(const fa in p)N._SymbolsMap[fa]=1,N[fa]=p[fa]&&"esri.Graphic"===
p[fa].declaredClass?b.createFromGraphic(p[fa],M??null):p[fa];return N}function oa(p,u){const N={mode:u,compiled:!0,functions:{},signatures:[],standardFunction:l,standardFunctionAsync:l,evaluateIdentifier:ra};for(let M=0;M<p.length;M++)p[M].registerFunctions(N);if("sync"===u){for(const M in N.functions)F[M]=new B.NativeFunction(N.functions[M]),O.prototype[M]=F[M];for(p=0;p<N.signatures.length;p++)A.addFunctionDeclaration(N.signatures[p],"sync")}else{for(const M in N.functions)P[M]=new B.NativeFunction(N.functions[M]),
Q.prototype[M]=P[M];for(p=0;p<N.signatures.length;p++)A.addFunctionDeclaration(N.signatures[p],"async")}}function ra(p,u){u=u.name;if("_SymbolsMap"===u)throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.InvalidIdentifier,null);if(0<p.localStack.length){if("_t"!==u.substr(0,2).toLowerCase()&&void 0!==p.localStack[p.localStack.length-1][u])return p.localStack[p.localStack.length-1][u];const N=p.mangleMap[u];if(void 0!==N&&void 0!==p.localStack[p.localStack.length-1][N])return p.localStack[p.localStack.length-
1][N]}if("_t"!==u.substr(0,2).toLowerCase()&&void 0!==p.globalScope[u]||1===p.globalScope._SymbolsMap[u])return p.globalScope[u];u=p.mangleMap[u];if(void 0!==u)return p.globalScope[u]}function ya(p){console.log(p)}function I(){I=q._asyncToGenerator(function*(){const p=yield new Promise((u,N)=>t(["./functions/geomasync"],u,N));oa([p],"async");return!0});return I.apply(this,arguments)}function G(p,u,N=!1){u={isAsync:N,moduleFactory:u.moduleFactory,moduleFactoryMap:{},libraryResolver:new r.ArcadeModuleLoader(null,
p.loadedModules),globalScope:W(u.vars,N?P:F,u.customfunctions),customfunctions:u.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:ya,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};p=m(u,p);""===p&&(p="lc.voidOperation; ");const M=u.moduleFactory,T=u.moduleFactoryMap,fa=u.exports,S={};for(var V in fa)S[V]=void 0!==u.mangleMap[V]?u.mangleMap[V]:
V;V={lc:g.lc,lang:ia,mangles:u.mangleMap,prepareModule(X){return new U(X)},prepare(X,Z){let ma=X.spatialReference;if(null===ma||void 0===ma)ma=new e({wkid:102100});const pa=la(X.vars,X.customfunctions,Z,X.timeReference);return{localStack:[],isAsync:Z,exports:fa,exportmangle:S,gdefs:{},moduleFactory:M,moduleFactoryMap:T,moduleSingletons:X.moduleSingletons,mangleMap:this.mangles,spatialReference:ma,globalScope:pa,abortSignal:void 0===X.abortSignal||null===X.abortSignal?{aborted:!1}:X.abortSignal,localScope:null,
services:X.services,console:X.console?X.console:ya,lrucache:X.lrucache,timeReference:X.timeReference??null,interceptor:X.interceptor,symbols:{symbolCounter:0},depthCounter:X.depthCounter}}};return(new Function("context","spatialReference",N?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
p+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+p+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(V)}let L=function(p){function u(M,T){var fa=p.call(this)||this;fa.paramCount=T;fa.fn=M;return fa}
q._inheritsLoose(u,p);var N=u.prototype;N.createFunction=function(M){return(...T)=>{if(T.length!==this.paramCount)throw new a.ArcadeExecutionError(M,a.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...T)}};N.call=function(M,T){return this.fn(...T.arguments)};N.marshalledCall=function(M,T,fa,S){return S(M,T,(V,X,Z)=>{Z=Z.map(ma=>!g.isFunctionParameter(ma)||ma instanceof B.ScopeMarshalledFunction?ma:B.wrapModuleScopedResponse(ma,M,S));V=this.call(fa,{arguments:Z});return c.isPromiseLike(V)?
V.then(ma=>B.wrapModuleScopedResponse(ma,fa,S)):V})};return u}(B.ArcadeFunction);const F={};h.registerFunctions(F,l);d.registerFunctions(F,l);n.registerFunctions(F,l);C.registerFunctions(F,l);k.registerFunctions(F,l);F.iif=function(p,u){try{return l(p,u,(N,M,T)=>{throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.Unrecognised,u);})}catch(N){throw N;}};F.decode=function(p,u){try{return l(p,u,(N,M,T)=>{throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.Unrecognised,u);})}catch(N){throw N;
}};F.when=function(p,u){try{return l(p,u,(N,M,T)=>{throw new a.ArcadeExecutionError(p,a.ExecutionErrorCodes.Unrecognised,u);})}catch(N){throw N;}};const P={};for(const p in F)P[p]=new B.NativeFunction(F[p]);v.registerFunctions(F,l);for(const p in F)F[p]=new B.NativeFunction(F[p]);const O=function(){};O.prototype=F;const Q=function(){};Q.prototype=P;h={fixSpatialReference:g.fixSpatialReference,parseArguments:function(p,u){const N=[];for(let M=0;M<u.arguments.length;M++)N.push(m(p,u.arguments[M]));
return N},standardFunction:l};oa([D.ArrayFunctions],"sync");oa([D.ArrayFunctions],"async");let ca=0;const ia={error(p){throw new a.ArcadeExecutionError(null,p,null);},__awaiter(p,u,N,M){return new Promise((T,fa)=>{function S(Z){try{X(M.next(Z))}catch(ma){fa(ma)}}function V(Z){try{X(M["throw"](Z))}catch(ma){fa(ma)}}function X(Z){Z.done?T(Z.value):Z.value&&Z.value.then?Z.value.then(S,V):(ca++,0===ca%100?setTimeout(()=>{ca=0;S(Z.value)},0):S(Z.value))}X((M=M.apply(p,u||[])).next())})},functionDepthchecker(p,
u){return function(){u.depthCounter.depth++;u.localStack.push([]);if(64<u.depthCounter.depth)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.MaximumCallDepth,null);const N=p.apply(this,arguments);if(c.isPromiseLike(N))return N.then(M=>{u.depthCounter.depth--;--u.localStack.length;return M});u.depthCounter.depth--;--u.localStack.length;return N}},chkAssig(p,u){if(void 0===u.gdefs[p])throw new a.ArcadeExecutionError(u,a.ExecutionErrorCodes.InvalidIdentifier,null);return p},mustBoolean(p,
u){if(!0===p||!1===p)return p;throw new a.ArcadeExecutionError(u,a.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(p,u){u.gdefs[p]=1;return p},castString(p){return g.toString(p)},aCheck(p,u){if(g.isFunctionParameter(p)){if("ArrayExpression"===u)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===u)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,
null);}return p===g.voidOperation?null:p},Dictionary:y,Feature:b,UserDefinedCompiledFunction:L,dictionary(p){const u={},N=new Map;for(let M=0;M<p.length;M+=2){if(g.isFunctionParameter(p[M+1]))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===g.isString(p[M]))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyMustBeString,null);let T=p[M].toString();const fa=T.toLowerCase();N.has(fa)?T=N.get(fa):N.set(fa,T);u[T]=p[M+1]===g.voidOperation?null:
p[M+1]}p=new y(u);p.immutable=!1;return p},strCheck(p){if(!1===g.isString(p))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyMustBeString,null);return p},unary(p,u){if(g.isBoolean(p)){if("!"===u)return!p;if("-"===u)return-1*g.toNumber(p);if("+"===u)return 1*g.toNumber(p);if("~"===u)return~g.toNumber(p);throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===u)return-1*g.toNumber(p);if("+"===u)return 1*g.toNumber(p);if("~"===u)return~g.toNumber(p);
throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(p){if(!1===g.isBoolean(p))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.LogicExpressionOrAnd,null);return p},logical(p,u,N){if(g.isBoolean(p)&&g.isBoolean(u))switch(N){case "||":return p||u;case "\x26\x26":return p&&u}throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(p,u,N){switch(N){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(p),
g.toNumber(u),N);case "\x3d\x3d":return g.equalityTest(p,u);case "\x3d":return g.equalityTest(p,u);case "!\x3d":return!g.equalityTest(p,u);case "\x3c":return g.greaterThanLessThan(p,u,N);case "\x3e":return g.greaterThanLessThan(p,u,N);case "\x3c\x3d":return g.greaterThanLessThan(p,u,N);case "\x3e\x3d":return g.greaterThanLessThan(p,u,N);case "+":return g.isString(p)||g.isString(u)?g.toString(p)+g.toString(u):g.toNumber(p)+g.toNumber(u);case "-":return g.toNumber(p)-g.toNumber(u);case "*":return g.toNumber(p)*
g.toNumber(u);case "/":return g.toNumber(p)/g.toNumber(u);case "%":return g.toNumber(p)%g.toNumber(u);default:throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(p,u,N){switch(u){case "\x3d":return p===g.voidOperation?null:p;case "/\x3d":return g.toNumber(N)/g.toNumber(p);case "*\x3d":return g.toNumber(N)*g.toNumber(p);case "-\x3d":return g.toNumber(N)-g.toNumber(p);case "+\x3d":return g.isString(N)||g.isString(p)?g.toString(N)+g.toString(p):g.toNumber(N)+
g.toNumber(p);case "%\x3d":return g.toNumber(N)%g.toNumber(p);default:throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.UnsupportedOperator,null);}},update(p,u,N,M){const T=g.toNumber(p[u]);p[u]="++"===N?T+1:T-1;return!1===M?T:"++"===N?T+1:T-1},graphicToFeature(p,u,N){return null===p?null:b.createFromGraphicLikeObject(p.geometry,p.attributes,u,N.timeReference)},memberupdate(p,u,N,M){let T;if(g.isArray(p))if(g.isNumber(u)){0>u&&(u=p.length+u);if(0>u||u>=p.length)throw new a.ArcadeExecutionError(null,
a.ExecutionErrorCodes.OutOfBounds,null);T=g.toNumber(p[u]);p[u]="++"===N?T+1:T-1}else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(p instanceof y){if(!1===g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===p.hasField(u))T=g.toNumber(p.field(u)),p.setField(u,"++"===N?T+1:T-1);else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FieldNotFound,null,{key:u});}else if(g.isFeature(p)){if(!1===
g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===p.hasField(u))T=g.toNumber(p.field(u)),p.setField(u,"++"===N?T+1:T-1);else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FieldNotFound,null);}else{if(g.isImmutableArray(p))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.Immutable,null);if(p instanceof U){if(!1===g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ModuleAccessorMustBeString,
null);if(!0===p.hasGlobal(u))T=g.toNumber(p.global(u)),p.setGlobal(u,"++"===N?T+1:T-1);else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===M?T:"++"===N?T+1:T-1},assignmember(p,u,N,M){if(g.isArray(p))if(g.isNumber(u)){0>u&&(u=p.length+u);if(0>u||u>p.length)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.OutOfBounds,null);if(u===p.length&&"\x3d"!==
N)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.OutOfBounds,null);p[u]=this.assign(M,N,p[u])}else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(p instanceof y){if(!1===g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===p.hasField(u))p.setField(u,this.assign(M,N,p.field(u)));else{if("\x3d"!==N)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FieldNotFound,null);
p.setField(u,this.assign(M,N,null))}}else if(g.isFeature(p)){if(!1===g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===p.hasField(u))p.setField(u,this.assign(M,N,p.field(u)));else{if("\x3d"!==N)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FieldNotFound,null);p.setField(u,this.assign(M,N,null))}}else{if(g.isImmutableArray(p))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.Immutable,null);if(p instanceof U){if(!1===
g.isString(u))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(p.hasGlobal(u))p.setGlobal(u,this.assign(M,N,p.global(u)));else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidIdentifier,null);}},member(p,u){if(null===p)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.MemberOfNull,null);if(p instanceof y||g.isFeature(p)){if(g.isString(u))return p.field(u);
throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(p instanceof x){if(g.isString(u))return C.geometryMember(p,u,null,null);throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isArray(p)){if(g.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=p.length+u);if(u>=p.length||0>u)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.OutOfBounds,null);return p[u]}throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidMemberAccessKey,
null);}if(g.isString(p)){if(g.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=p.length+u);if(u>=p.length||0>u)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.OutOfBounds,null);return p[u]}throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isImmutableArray(p)){if(g.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=p.length()+u);if(u>=p.length()||0>u)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.OutOfBounds,null);return p.get(u)}throw new a.ArcadeExecutionError(null,
a.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(p instanceof U&&g.isString(u))return p.global(u);throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(p,u,N){return p.call(N,{arguments:u,preparsed:!0})},loadModule(p,u){p=u.moduleFactoryMap[p];if(u.moduleSingletons[p])return u.moduleSingletons[p];const N=u.moduleFactory[p]({vars:{},moduleSingletons:u.moduleSingletons,depthCounter:u.depthCounter,console:u.console,abortSignal:u.abortSignal,isAsync:u.isAsync,
services:u.services,lrucache:u.lrucache,timeReference:u.timeReference?u.timeReference:null,interceptor:u.interceptor},u.spatialReference);return u.moduleSingletons[p]=N},callModuleFunction(p,u,N,M){if(!(p instanceof U))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FuncionNotFound,null);p=p.global(N);if(!1===g.isFunctionParameter(p))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.CallNonFunction,null);return p.call(M,{preparsed:!0,arguments:u})}};let U=function(p){function u(M){var T=
p.call(this,null)||this;T.moduleContext=M;return T}q._inheritsLoose(u,p);var N=u.prototype;N.hasGlobal=function(M){void 0===this.moduleContext.exports[M]&&(M=M.toLowerCase());return void 0!==this.moduleContext.exports[M]?!0:!1};N.setGlobal=function(M,T){const fa=this.moduleContext.globalScope;M=M.toLowerCase();if(g.isFunctionParameter(T))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);fa[this.moduleContext.exportmangle[M]]=T};N.global=function(M){const T=this.moduleContext.globalScope;
M=M.toLowerCase();const fa=T[this.moduleContext.exportmangle[M]];if(void 0===fa)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidIdentifier,null);if(g.isFunctionParameter(fa)&&!(fa instanceof B.ScopeMarshalledFunction)){const S=new B.ScopeMarshalledFunction;S.fn=fa;S.parameterEvaluator=l;S.context=this.moduleContext;return T[this.moduleContext.exportmangle[M]]=S}return fa};return u}(z.ArcadeModule);K.UserDefinedCompiledFunction=L;K.compileScript=function(p,u,N=!1){null===u&&(u={vars:{},
customfunctions:{}});var M=null;p.usesModules&&(M=new r.ArcadeModuleLoader(null,p.loadedModules));M={isAsync:N,globalScope:W(u.vars,N?P:F,u.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:u.customfunctions,libraryResolver:M,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:ya,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};p=m(M,p);""===p&&
(p="lc.voidOperation; ");0<M.undeclaredGlobalsInFunctions.size&&M.undeclaredGlobalsInFunctions.forEach(Z=>{throw new a.ArcadeCompilationError(u,a.ExecutionErrorCodes.InvalidIdentifier,Z.node);});const T=M.moduleFactory,fa=M.moduleFactoryMap,S=M.exports,V={};for(var X in S)V[X]=void 0!==M.mangleMap[X]?M.mangleMap[X]:X;X={lc:g.lc,lang:ia,mangles:M.mangleMap,postProcess(Z){Z instanceof g.ReturnResult&&(Z=Z.value);Z instanceof g.ImplicitResult&&(Z=Z.value);Z===g.voidOperation&&(Z=null);if(Z===g.breakResult)throw new a.ArcadeExecutionError(null,
a.ExecutionErrorCodes.IllegalResult,null);if(Z===g.continueResult)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.IllegalResult,null);if(g.isFunctionParameter(Z))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.IllegalResult,null);return Z},prepare(Z,ma){let pa=Z.spatialReference;if(null===pa||void 0===pa)pa=e.WebMercator;const ta=la(Z.vars,Z.customfunctions,ma,Z.timeReference);return{localStack:[],isAsync:ma,moduleFactory:T,moduleFactoryMap:fa,mangleMap:this.mangles,moduleSingletons:{},
exports:S,gdefs:{},exportmangle:V,spatialReference:pa,globalScope:ta,abortSignal:void 0===Z.abortSignal||null===Z.abortSignal?{aborted:!1}:Z.abortSignal,localScope:null,services:Z.services,console:Z.console?Z.console:ya,lrucache:Z.lrucache,timeReference:Z.timeReference??null,interceptor:Z.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",N?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
p+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+p+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(X)};K.enableAsyncSupport=function(){return I.apply(this,arguments)};K.executeScript=function(p,u){return p(u)};K.extend=oa;K.functionHelper=
h;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("../chunks/_rollupPluginBabelHelpers ./ArcadeDate ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(t,K,q,y,b,g){function A(h,C,v=!1){if(null===h||void 0===h)return null;if(b.isNumber(h))return b.toNumber(h);if(b.isBoolean(h))return b.toBoolean(h);if(b.isString(h))return b.toString(h);if(b.isDate(h))return b.toDate(h,C);if(b.isArray(h)){var n=
[];for(var k of h)n.push(A(k,C,v));return n}k=new D;k.immutable=!1;for(n of Object.keys(h)){const d=h[n];void 0!==d&&k.setField(n,A(d,C,v))}k.immutable=v;return k}let D=function(){function h(v){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=v instanceof h?v.attributes:void 0===v?{}:null===v?{}:v}var C=h.prototype;C.field=function(v){const n=v.toLowerCase(),k=this.attributes[v];if(void 0!==k)return k;for(const d in this.attributes)if(d.toLowerCase()===
n)return this.attributes[d];throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.FieldNotFound,null,{key:v});};C.setField=function(v,n){if(this.immutable)throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.Immutable,null);if(b.isFunctionParameter(n))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.NoFunctionInDictionary,null);const k=v.toLowerCase();n instanceof Date&&(n=K.ArcadeDate.dateJSToArcadeDate(n));if(void 0===this.attributes[v])for(const d in this.attributes)if(d.toLowerCase()===
k){this.attributes[d]=n;return}this.attributes[v]=n};C.hasField=function(v){const n=v.toLowerCase();if(void 0!==this.attributes[v])return!0;for(const k in this.attributes)if(k.toLowerCase()===n)return!0;return!1};C.keys=function(){let v=[];for(const n in this.attributes)v.push(n);return v=v.sort()};C.castToText=function(v=!1){let n="";for(const k in this.attributes){""!==n&&(n+=",");const d=this.attributes[k];null==d?n+=JSON.stringify(k)+":null":b.isBoolean(d)||b.isNumber(d)||b.isString(d)?n+=JSON.stringify(k)+
":"+JSON.stringify(d):d instanceof g?n+=JSON.stringify(k)+":"+b.toStringExplicit(d):d instanceof y?n+=JSON.stringify(k)+":"+b.toStringExplicit(d,null,v):d instanceof Array?n+=JSON.stringify(k)+":"+b.toStringExplicit(d,null,v):d instanceof K.ArcadeDate?n=v?n+(JSON.stringify(k)+":"+JSON.stringify(d.getTime())):n+(JSON.stringify(k)+":"+d.stringify()):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(n+=JSON.stringify(k)+":"+d.castToText(v))}return"{"+n+"}"};h.convertObjectToArcadeDictionary=function(v,
n,k=!0){const d=new h;d.immutable=!1;for(const c in v){const x=v[c];void 0!==x&&d.setField(c.toString(),A(x,n))}d.immutable=k;return d};h.convertJsonToArcade=function(v,n,k=!1){return A(v,n,k)};C.castAsJson=function(v=null){const n={};for(let k in this.attributes){const d=this.attributes[k];void 0!==d&&(v?.keyTranslate&&(k=v.keyTranslate(k)),n[k]=b.castAsJson(d,v))}return n};C.castDictionaryValueAsJsonAsync=function(){var v=t._asyncToGenerator(function*(n,k,d,c=null,x){d=yield b.castAsJsonAsync(d,
c,x);return n[k]=d});return function(n,k,d){return v.apply(this,arguments)}}();C.castAsJsonAsync=function(){var v=t._asyncToGenerator(function*(n=null,k=null){const d={},c=[];for(let x in this.attributes){const e=this.attributes[x];k?.keyTranslate&&(x=k.keyTranslate(x));void 0!==e&&(b.isSimpleType(e)||e instanceof g||e instanceof K.ArcadeDate?d[x]=b.castAsJson(e,k):c.push(this.castDictionaryValueAsJsonAsync(d,x,e,n,k)))}0<c.length&&(yield Promise.all(c));return d});return function(){return v.apply(this,
arguments)}}();return h}();return D})},"esri/arcade/ArcadeDate":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./executionError","../chunks/datetime"],function(t,K,q,y){function b(C){if(C instanceof y.Zone)return C;if("system"===C.toLowerCase())return"system";if("utc"===C.toLowerCase())return"utc";if("unknown"===C.toLowerCase())return g.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(C)){const v=y.FixedOffsetZone.parseSpecifier("UTC"+(C.startsWith("+")||C.startsWith("-")?
"":"+")+C);if(v)return v}C=y.IANAZone.create(C);if(!C.isValid)throw new D(t.ArcadeDateErrorCodes.TimeZoneNotRecognised);return C}let g=function(){};g.instance=new y.IANAZone("Etc/UTC");t.ArcadeDateErrorCodes=void 0;(t.ArcadeDateErrorCodes||(t.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const A={[t.ArcadeDateErrorCodes.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let D=function(C){function v(n,k){n=C.call(this,q.doSubstitutions(A[n],k))||this;n.declaredRootClass=
"esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(n),v);return n}K._inheritsLoose(v,C);return v}(K._wrapNativeSuper(Error)),h=function(){function C(n){this._date=n;this.declaredRootClass="esri.arcade.arcadedate"}C.fromParts=function(n=0,k=1,d=1,c=0,x=0,e=0,r=0,z){if(isNaN(n)||isNaN(k)||isNaN(d)||isNaN(c)||isNaN(x)||isNaN(e)||isNaN(r))return null;let B=0;var a=y.DateTime.local(n,k).daysInMonth;1>d&&(B=d-1,d=1);d>a&&(B=d-a,d=a);a=0;12<k?(a=
k-12,k=12):1>k&&(a=k-1,k=1);let l=0;59<x?(l=x-59,x=59):0>x&&(l=x,x=0);let m=0;59<e?(m=e-59,e=59):0>e&&(m=e,e=0);let E=0;999<r?(E=r-999,r=999):0>r&&(E=r,r=0);n=y.DateTime.fromObject({day:d,year:n,month:k,hour:c,minute:x,second:e,millisecond:r},{zone:b(z)});0!==a&&(n=n.plus({months:a}));0!==B&&(n=n.plus({days:B}));0!==l&&(n=n.plus({minutes:l}));0!==m&&(n=n.plus({seconds:m}));0!==E&&(n=n.plus({milliseconds:E}));return new C(n)};C.arcadeDateAndZoneToArcadeDate=function(n,k){const d=b(k);return n.isUnknownTimeZone||
d===g.instance?C.fromParts(n.year,n.monthJS+1,n.day,n.hour,n.minute,n.second,n.millisecond,d):new C(n._date.setZone(k))};C.dateJSToArcadeDate=function(n){return new C(y.DateTime.fromJSDate(n,{zone:"system"}))};C.dateJSAndZoneToArcadeDate=function(n,k="system"){return new C(y.DateTime.fromJSDate(n,{zone:k}))};C.unknownEpochToArcadeDate=function(n){return new C(y.DateTime.fromMillis(n,{zone:g.instance}))};C.unknownDateJSToArcadeDate=function(n){return new C(y.DateTime.fromMillis(n.getTime(),{zone:g.instance}))};
C.epochToArcadeDate=function(n,k="system"){return new C(y.DateTime.fromMillis(n,{zone:k}))};C.dateTimeToArcadeDate=function(n){return new C(n)};var v=C.prototype;v.changeTimeZone=function(n){n=b(n);return C.dateTimeToArcadeDate(this._date.setZone(n))};C.dateTimeAndZoneToArcadeDate=function(n,k){k=b(k);return n.zone===g.instance||k===g.instance?C.fromParts(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond,k):new C(n.setZone(k))};C.nowToArcadeDate=function(n){return new C(y.DateTime.fromJSDate(new Date,
{zone:n}))};C.nowUTCToArcadeDate=function(){return new C(y.DateTime.utc())};v.equals=function(n){return this.isSystem&&n.isSystem?this.toNumber()===n.toNumber():this.isUnknownTimeZone!==n.isUnknownTimeZone?!1:this._date.equals(n._date)};v.stringify=function(){return JSON.stringify(this.toJSDate())};v.plus=function(n){return new C(this._date.plus(n))};v.diff=function(n,k="milliseconds"){return this._date.diff(n._date,k)[k]};v.toISOString=function(n){return n?this._date.toISO({suppressMilliseconds:!0,
includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};v.toFormat=function(n,k){return this._date.toFormat(n,k)};v.toJSDate=function(){return this._date.toJSDate()};v.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};v.toDateTime=function(){return this._date};v.toNumber=function(){return this._date.toMillis()};v.getTime=function(){return this._date.toMillis()};v.toUTC=function(){return new C(this._date.toUTC())};
v.toLocal=function(){return new C(this._date.toLocal())};v.toString=function(){return this.toISOString(!0)};K._createClass(C,[{key:"isSystem",get:function(){return"system"===this.timeZone||this.timeZone===C.systemTimeZoneCanonicalName}},{key:"isUnknownTimeZone",get:function(){return this._date.zone===g.instance}},{key:"isValid",get:function(){return this._date.isValid}},{key:"hour",get:function(){return this._date.hour}},{key:"second",get:function(){return this._date.second}},{key:"day",get:function(){return this._date.day}},
{key:"dayOfWeekISO",get:function(){return this._date.weekday}},{key:"dayOfWeekJS",get:function(){let n=this._date.weekday;6<n&&(n=0);return n}},{key:"millisecond",get:function(){return this._date.millisecond}},{key:"monthISO",get:function(){return this._date.month}},{key:"weekISO",get:function(){return this._date.weekNumber}},{key:"yearISO",get:function(){return this._date.weekYear}},{key:"monthJS",get:function(){return this._date.month-1}},{key:"year",get:function(){return this._date.year}},{key:"minute",
get:function(){return this._date.minute}},{key:"zone",get:function(){return this._date.zone}},{key:"timeZoneOffset",get:function(){return this.isUnknownTimeZone?0:this._date.offset}},{key:"timeZone",get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const n=this.zone;return"fixed"===n.type?0===n.fixed?"utc":n.formatOffset(0,"short"):n.name}}],[{key:"systemTimeZoneCanonicalName",get:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}}]);return C}();t.ArcadeDate=h;t.ArcadeDateError=D;t.ArcadeDateErrorMessages=A;t.UnknownTimeZone=g;t.createDateTimeZone=b;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(t,K){function q(k){return k&&k.loc?`Line : ${k.loc.start?.line}, ${k.loc.start?.column}: `:""}function y(k,d){try{if(!d)return k;for(const c in d){let x=d[c];x||(x="");k=k.replace("{"+c+"}",d[c])}}catch(c){}return k}
t.ExecutionErrorCodes=void 0;(function(k){k.AsyncNotEnabled="AsyncNotEnabled";k.ModulesNotSupported="ModulesNotSupported";k.CircularModules="CircularModules";k.NeverReach="NeverReach";k.UnsupportedHashType="UnsupportedHashType";k.InvalidParameter="InvalidParameter";k.UnexpectedToken="UnexpectedToken";k.Unrecognised="Unrecognised";k.UnrecognisedType="UnrecognisedType";k.MaximumCallDepth="MaximumCallDepth";k.BooleanConditionRequired="BooleanConditionRequired";k.TypeNotAllowedInFeature="TypeNotAllowedInFeature";
k.KeyMustBeString="KeyMustBeString";k.WrongNumberOfParameters="WrongNumberOfParameters";k.CallNonFunction="CallNonFunction";k.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";k.NoFunctionInDictionary="NoFunctionInDictionary";k.NoFunctionInArray="NoFunctionInArray";k.AssignModuleFunction="AssignModuleFunction";k.LogicExpressionOrAnd="LogicExpressionOrAnd";k.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";k.FuncionNotFound="FunctionNotFound";k.InvalidMemberAccessKey="InvalidMemberAccessKey";
k.UnsupportedUnaryOperator="UnsupportUnaryOperator";k.InvalidIdentifier="InvalidIdentifier";k.MemberOfNull="MemberOfNull";k.UnsupportedOperator="UnsupportedOperator";k.Cancelled="Cancelled";k.ModuleAccessorMustBeString="ModuleAccessorMustBeString";k.ModuleExportNotFound="ModuleExportNotFound";k.Immutable="Immutable";k.OutOfBounds="OutOfBounds";k.IllegalResult="IllegalResult";k.FieldNotFound="FieldNotFound";k.PortalRequired="PortalRequired";k.LogicError="LogicError";k.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";
k.KeyAccessorMustBeString="KeyAccessorMustBeString";k.WrongSpatialReference="WrongSpatialReference"})(t.ExecutionErrorCodes||(t.ExecutionErrorCodes={}));const b={[t.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[t.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[t.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[t.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[t.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",
[t.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[t.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[t.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[t.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[t.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[t.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[t.ExecutionErrorCodes.Cancelled]:"Execution cancelled",
[t.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[t.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[t.ExecutionErrorCodes.PortalRequired]:"Portal is required",[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[t.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[t.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[t.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[t.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[t.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[t.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[t.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[t.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[t.ExecutionErrorCodes.Immutable]:"Object is immutable",
[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[t.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[t.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[t.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[t.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[t.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[t.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[t.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",
[t.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[t.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[t.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[t.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[t.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[t.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};
let g=function(k){function d(...c){return k.call(this,...c)||this}K._inheritsLoose(d,k);return d}(K._wrapNativeSuper(Error)),A=function(k){function d(c,x){c=k.call(this,q(x)+c.message,{cause:c})||this;c.loc=null;Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),d);x&&x.loc&&(c.loc=x.loc);return c}K._inheritsLoose(d,k);return d}(g),D=function(k){function d(c,x,e,r){c=k.call(this,"Execution error - "+q(e)+y(b[x],r))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadeexecutionerror";
Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),d);e&&e.loc&&(c.loc=e.loc);return c}K._inheritsLoose(d,k);return d}(K._wrapNativeSuper(Error)),h=function(k){function d(c,x,e,r){c=k.call(this,"Compilation error - "+q(e)+y(b[x],r))||this;c.loc=null;c.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),d);e&&e.loc&&(c.loc=e.loc);return c}K._inheritsLoose(d,k);return d}(K._wrapNativeSuper(Error)),
C=function(k){function d(){var c=k.call(this,"Uncompilable code structures")||this;c.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),d);return c}K._inheritsLoose(d,k);return d}(K._wrapNativeSuper(Error));t.ModuleErrorCodes=void 0;(function(k){k.UnrecognisedUri="UnrecognisedUri";k.UnsupportedUriProtocol="UnsupportedUriProtocol"})(t.ModuleErrorCodes||(t.ModuleErrorCodes={}));const v={[t.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[t.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let n=function(k){function d(c,x){c=k.call(this,y(v[c],x))||this;c.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(K._assertThisInitialized(c),d);return c}K._inheritsLoose(d,k);return d}(K._wrapNativeSuper(Error));t.ArcadeCompilationError=h;t.ArcadeExecutionError=D;t.ArcadeUncompilableError=C;t.ErrorWithCause=g;t.ExecutionErrorMessages=b;t.LocatableArcadeExecutionError=A;t.ModuleError=
n;t.ModuleErrorMessages=v;t.doSubstitutions=y;t.ensureArcadeExecutionError=function(k,d,c){return"esri.arcade.arcadeexecutionerror"===c.declaredRootClass||"esri.arcade.arcadecompilationerror"===c.declaredRootClass?null===c.loc&&d&&d.loc?new A(c,{cause:c}):c:d&&d.loc?new A(c,{cause:c}):c};t.parsingValidationMessage=function(k,d,c){return"Parsing error - "+q(k)+y(b[d],c)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function t(q=
[]){this._elements=q}var K=t.prototype;K.length=function(){return this._elements.length};K.get=function(q){return this._elements[q]};K.toArray=function(){const q=[];for(let y=0;y<this.length();y++)q.push(this.get(y));return q};return t}()})},"esri/chunks/languageUtils":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared ../arcade/ArcadeModule ../arcade/executionError".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d,c,x,e,r,z,B,a){function l(w,J,R){return""===J||null===J||void 0===J||J===R||J===R?w:w=w.split(J).join(R)}function m(w){return w instanceof q.ArcadeFunction}function E(w){return w instanceof B.ArcadeModule}function f(w){return aa(w)||sa(w)||oa(w)||ea(w)||null===w||w===Ba||"number"===typeof w?!0:!1}function H(w,J){return void 0===w?J:w}function ha(w){return null==w?"":ua(w)||la(w)?"Array":oa(w)?"Date":aa(w)?"String":ea(w)?"Boolean":sa(w)?"Number":"esri.arcade.Attachment"===
w?.declaredClass?"Attachment":"esri.arcade.Portal"===w?.declaredClass?"Portal":"esri.arcade.Dictionary"===w?.declaredClass?"Dictionary":w instanceof B.ArcadeModule?"Module":xa(w)?"Feature":w instanceof v?"Point":w instanceof n?"Polygon":w instanceof k?"Polyline":w instanceof C?"Multipoint":w instanceof D?"Extent":m(w)?"Function":ka(w)?"FeatureSet":W(w)?"FeatureSetCollection":w===Ba?"":"number"===typeof w&&isNaN(w)?"Number":"Unrecognised Type"}function aa(w){return"string"===typeof w||w instanceof
String}function ea(w){return"boolean"===typeof w}function sa(w){return"number"===typeof w}function Ha(w){return"number"===typeof w&&isFinite(w)&&Math.floor(w)===w}function ua(w){return w instanceof Array}function xa(w){return"esri.arcade.Feature"===w?.arcadeDeclaredClass?!0:!1}function ka(w){return"esri.arcade.featureset.support.FeatureSet"===w?.declaredRootClass}function W(w){return"esri.arcade.featureSetCollection"===w?.declaredRootClass}function la(w){return w instanceof y}function oa(w){return w instanceof
A.ArcadeDate}function ra(w){return null!=w&&"object"===typeof w}function ya(w){return w instanceof Date}function I(w,J,R,ba,da){if(w.length<J||w.length>R)throw new a.ArcadeExecutionError(ba,a.ExecutionErrorCodes.WrongNumberOfParameters,da);}function G(w){return 0>w?-Math.round(-w):Math.round(w)}function L(){let w=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,J=>{const R=(w+16*Math.random())%16|0;w=Math.floor(w/16);return("x"===J?R:R&3|8).toString(16)})}function F(w,J){if(!isNaN(w)){if(void 0===
J||null===J||""===J)return w.toString();J=l(J,"\u2030","");J=l(J,"\u00a4","");return x.format(w,{pattern:J})}return w.toString()}function P(w,J){return void 0===J||null===J||""===J?w.toISOString(!0):w.toFormat(O(J),{locale:r.getLocale(),numberingSystem:"latn"})}function O(w){w=w.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let J="";const R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
for(const ba of w.match(R)||[])switch(ba){case "D":J+="d";break;case "DD":J+="dd";break;case "DDD":J+="o";break;case "d":J+="c";break;case "ddd":J+="ccc";break;case "dddd":J+="cccc";break;case "M":J+="L";break;case "MM":J+="LL";break;case "MMM":J+="LLL";break;case "MMMM":J+="LLLL";break;case "YY":J+="yy";break;case "Y":case "YYYY":J+="yyyy";break;case "Q":J+="q";break;case "Z":J+="ZZ";break;case "ZZ":J+="ZZZ";break;case "S":J+="'S'";break;case "SS":J+="'SS'";break;case "SSS":J+="u";break;case "A":case "a":J+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":J+=ba;break;default:J=2<=ba.length&&"["===ba.slice(0,1)&&"]"===ba.slice(-1)?J+`'${ba.slice(1,-1)}'`:J+`'${ba}'`}return J}function Q(w,J,R){switch(R){case "\x3e":return w>J;case "\x3c":return w<J;case "\x3e\x3d":return w>=J;case "\x3c\x3d":return w<=J}return!1}function ca(w,J,R){if(null===w){if(null===J||J===Ba)return Q(null,null,R);if(sa(J))return Q(0,J,R);if(aa(J)||ea(J))return Q(0,M(J),R);if(oa(J))return Q(0,
J.toNumber(),R)}if(w===Ba){if(null===J||J===Ba)return Q(null,null,R);if(sa(J))return Q(0,J,R);if(aa(J)||ea(J))return Q(0,M(J),R);if(oa(J))return Q(0,J.toNumber(),R)}else if(sa(w)){if(sa(J))return Q(w,J,R);if(ea(J))return Q(w,M(J),R);if(null===J||J===Ba)return Q(w,0,R);if(aa(J))return Q(w,M(J),R);if(oa(J))return Q(w,J.toNumber(),R)}else if(aa(w)){if(aa(J))return Q(U(w),U(J),R);if(oa(J))return Q(M(w),J.toNumber(),R);if(sa(J))return Q(M(w),J,R);if(null===J||J===Ba)return Q(M(w),0,R);if(ea(J))return Q(M(w),
M(J),R)}else if(oa(w)){if(oa(J))return Q(w.toNumber(),J.toNumber(),R);if(null===J||J===Ba)return Q(w.toNumber(),0,R);if(sa(J))return Q(w.toNumber(),J,R);if(ea(J)||aa(J))return Q(w.toNumber(),M(J),R)}else if(ea(w)){if(ea(J))return Q(w,J,R);if(sa(J))return Q(M(w),M(J),R);if(oa(J))return Q(M(w),J.toNumber(),R);if(null===J||J===Ba)return Q(M(w),0,R);if(aa(J))return Q(M(w),M(J),R)}return!ia(w,J)||"\x3c\x3d"!==R&&"\x3e\x3d"!==R?!1:!0}function ia(w,J){if(w===J||null===w&&J===Ba||null===J&&w===Ba)return!0;
if(oa(w)&&oa(J))return w.equals(J);if(w instanceof b||w instanceof g)return w.equalityTest(J);if(w instanceof v&&J instanceof v){const R=w.cache._arcadeCacheId,ba=J.cache._arcadeCacheId;if(void 0!==R&&null!==R)return R===ba}return ra(w)&&ra(J)&&(w._arcadeCacheId===J._arcadeCacheId&&void 0!==w._arcadeCacheId&&null!==w._arcadeCacheId||w._underlyingGraphic===J._underlyingGraphic&&void 0!==w._underlyingGraphic&&null!==w._underlyingGraphic)?!0:!1}function U(w,J){if(aa(w))return w;if(null===w)return"";
if(sa(w))return F(w,J);if(ea(w))return w.toString();if(oa(w))return P(w,J);if(w instanceof h)return JSON.stringify(w.toJSON());if(ua(w)){J=[];for(var R=0;R<w.length;R++)J[R]=N(w[R]);return"["+J.join(",")+"]"}if(w instanceof y){J=[];for(R=0;R<w.length();R++)J[R]=N(w.get(R));return"["+J.join(",")+"]"}return null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText():m(w)?"object, Function":w===Ba?"":E(w)?"object, Module":""}function p(w){const J=[];if(!ua(w))return null;if(w instanceof y){for(var R=
0;R<w.length();R++)J[R]=M(w.get(R));return J}for(R=0;R<w.length;R++)J[R]=M(w[R]);return J}function u(w,J,R=!1){if(aa(w))return w;if(null===w)return"";if(sa(w))return F(w,J);if(ea(w))return w.toString();if(oa(w))return P(w,J);if(w instanceof h)return w instanceof D?'{"xmin":'+w.xmin.toString()+',"ymin":'+w.ymin.toString()+","+(w.hasZ?'"zmin":'+w.zmin.toString()+",":"")+(w.hasM?'"mmin":'+w.mmin.toString()+",":"")+'"xmax":'+w.xmax.toString()+',"ymax":'+w.ymax.toString()+","+(w.hasZ?'"zmax":'+w.zmax.toString()+
",":"")+(w.hasM?'"mmax":'+w.mmax.toString()+",":"")+'"spatialReference":'+ta(w.spatialReference)+"}":ta(w.toJSON(),(da,qa)=>da.key===qa.key?0:"spatialReference"===da.key?1:"spatialReference"===qa.key||da.key<qa.key?-1:da.key>qa.key?1:0);if(ua(w)){J=[];for(var ba=0;ba<w.length;ba++)J[ba]=N(w[ba],R);return"["+J.join(",")+"]"}if(w instanceof y){J=[];for(ba=0;ba<w.length();ba++)J[ba]=N(w.get(ba),R);return"["+J.join(",")+"]"}return null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText(R):m(w)?
"object, Function":w===Ba?"":E(w)?"object, Module":""}function N(w,J=!1){return null===w?"null":ea(w)||sa(w)||aa(w)?JSON.stringify(w):w instanceof h||w instanceof y||w instanceof Array?u(w,null,J):oa(w)?J?JSON.stringify(w.getTime()):JSON.stringify(P(w,"")):null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText(J):"null"}function M(w,J){return sa(w)?w:null===w||""===w?0:oa(w)?NaN:ea(w)?w?1:0:ua(w)||""===w||void 0===w?NaN:void 0!==J&&aa(w)?(J=l(J,"\u2030",""),J=l(J,"\u00a4",""),x.parse(w,
{pattern:J})):w===Ba?0:Number(w)}function T(w,J){if(oa(w))return w;if(aa(w)){a:{const ba=/ (\d\d)/;var R=A.createDateTimeZone(J);R=d.DateTime.fromISO(w,{zone:R});if(R.isValid)J=R;else{if(ba.test(w)&&(w=w.replace(ba,"T$1"),R=d.DateTime.fromISO(w,{zone:J}),R.isValid)){J=R;break a}J=null}}if(J)return A.ArcadeDate.dateTimeToArcadeDate(J)}return null}function fa(w){return ea(w)?w:aa(w)?(w=w.toLowerCase(),"true"===w?!0:!1):sa(w)?0===w||isNaN(w)?!1:!0:!1}function S(w,J){if(c.isNone(w))return null;if(null===
w.spatialReference||void 0===w.spatialReference)w.spatialReference=J;return w}function V(w){if(null===w)return null;if(w instanceof v)return"NaN"===w.x||null===w.x||isNaN(w.x)?null:w;if(w instanceof n){if(0===w.rings.length)return null;for(const J of w.rings)if(0<J.length)return w;return null}if(w instanceof k){if(0===w.paths.length)return null;for(const J of w.paths)if(0<J.length)return w;return null}return w instanceof C?0===w.points.length?null:w:w instanceof D?"NaN"===w.xmin||null===w.xmin||isNaN(w.xmin)?
null:w:null}function X(w,J){if(!w||!w.domain)return J;let R=null;if("string"===w.field.type||"esriFieldTypeString"===w.field.type)J=U(J);else{if(null===J||void 0===J)return null;if(""===J)return J;J=M(J)}for(let ba=0;ba<w.domain.codedValues.length;ba++){const da=w.domain.codedValues[ba];da.code===J&&(R=da)}return null===R?J:R.name}function Z(w,J){if(!w||!w.domain)return J;let R=null;J=U(J);for(let ba=0;ba<w.domain.codedValues.length;ba++){const da=w.domain.codedValues[ba];da.name===J&&(R=da)}return null===
R?J:R.code}function ma(w,J,R=null,ba=null){if(!J||!J.fields)return null;let da=null;for(let Ga=0;Ga<J.fields.length;Ga++){const Ca=J.fields[Ga];Ca.name.toLowerCase()===w.toString().toLowerCase()&&(da=Ca)}if(null===da)throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.FieldNotFound,null,{key:w});let qa,wa;null===ba&&R&&J.typeIdField&&(ba=R.hasField(J.typeIdField)?R.field(J.typeIdField):null);null!==ba&&void 0!==ba&&J.types.some(Ga=>Ga.id===ba?((qa=Ga.domains&&Ga.domains[da.name])&&"inherited"===
qa.type&&(qa=pa(da.name,J),wa=!0),!0):!1);wa||qa||(qa=pa(w,J));return{field:da,domain:qa}}function pa(w,J){let R;J.fields.some(ba=>{ba.name.toLowerCase()===w.toLowerCase()&&(R=ba.domain);return!!R});return R}function ta(w,J){J||(J={});"function"===typeof J&&(J={cmp:J});const R="boolean"===typeof J.cycles?J.cycles:!1,ba=J.cmp&&function(qa){return function(wa){return function(Ga,Ca){return qa({key:Ga,value:wa[Ga]},{key:Ca,value:wa[Ca]})}}}(J.cmp),da=[];return function Ga(wa){wa&&wa.toJSON&&"function"===
typeof wa.toJSON&&(wa=wa.toJSON());if(void 0!==wa){if("number"===typeof wa)return isFinite(wa)?""+wa:"null";if("object"!==typeof wa)return JSON.stringify(wa);var Ca;if(Array.isArray(wa)){var La="[";for(Ca=0;Ca<wa.length;Ca++)Ca&&(La+=","),La+=Ga(wa[Ca])||"null";return La+"]"}if(null===wa)return"null";if(da.includes(wa)){if(R)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ab=da.push(wa)-1,Qa=Object.keys(wa).sort(ba&&ba(wa));La="";for(Ca=0;Ca<Qa.length;Ca++){const Ra=
Qa[Ca],Sa=Ga(wa[Ra]);Sa&&(La&&(La+=","),La+=JSON.stringify(Ra)+":"+Sa)}da.splice(ab,1);return"{"+La+"}"}}(w)}function za(w){if(null===w)return null;const J=[];for(const R of w)R&&R.arcadeDeclaredClass&&"esri.arcade.Feature"===R.arcadeDeclaredClass?J.push(R.geometry()):J.push(R);return J}function Da(w,J){if(J instanceof v)w.push(J.hasZ?J.hasM?[J.x,J.y,J.z,J.m]:[J.x,J.y,J.z]:[J.x,J.y]);else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidParameter,null);}function Ja(w,J){if(ua(w)||
la(w)){let R=!1,ba=!1,da=[];if(ua(w)){for(const qa of w)Da(da,qa);0<da.length&&(J=w[0].spatialReference,R=w[0].hasZ,ba=w[0].hasM)}else if(w instanceof g)da=w._elements,0<da.length&&(R=w._hasZ,ba=w._hasM,J=w.get(0).spatialReference);else if(la(w)){for(const qa of w.toArray())Da(da,qa);0<da.length&&(J=w.get(0).spatialReference,R=!0===w.get(0).hasZ,ba=!0===w.get(0).hasM)}else throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.InvalidParameter,null);if(0===da.length)return null;e.isClockwise(da,
ba,R)||(da=da.slice(0).reverse());return new n({rings:[da],spatialReference:J,hasZ:R,hasM:ba})}return w}function Ka(w,J){if(ua(w)||la(w)){let R=!1,ba=!1,da=[];if(ua(w)){for(const qa of w)Da(da,qa);0<da.length&&(J=w[0].spatialReference,R=!0===w[0].hasZ,ba=!0===w[0].hasM)}else if(w instanceof g)da=w._elements,0<da.length&&(R=w._hasZ,ba=w._hasM,J=w.get(0).spatialReference);else if(la(w)){for(const qa of w.toArray())Da(da,qa);0<da.length&&(J=w.get(0).spatialReference,R=!0===w.get(0).hasZ,ba=!0===w.get(0).hasM)}return 0===
da.length?null:new k({paths:[da],spatialReference:J,hasZ:R,hasM:ba})}return w}function Y(w,J){if(ua(w)||la(w)){let R=!1,ba=!1,da=[];if(ua(w)){for(const qa of w)Da(da,qa);0<da.length&&(J=w[0].spatialReference,R=!0===w[0].hasZ,ba=!0===w[0].hasM)}else if(w instanceof g)da=w._elements,0<da.length&&(R=w._hasZ,ba=w._hasM,J=w.get(0).spatialReference);else if(la(w)){for(const qa of w.toArray())Da(da,qa);0<da.length&&(J=w.get(0).spatialReference,R=!0===w.get(0).hasZ,ba=!0===w.get(0).hasM)}return 0===da.length?
null:new C({points:da,spatialReference:J,hasZ:R,hasM:ba})}return w}function va(w,J=!1){const R=[];if(null===w)return R;if(!0===ua(w)){for(var ba=0;ba<w.length;ba++){var da=U(w[ba]);""===da&&!0!==J||R.push(da)}return R}if(w instanceof y){for(ba=0;ba<w.length();ba++)da=U(w.get(ba)),""===da&&!0!==J||R.push(da);return R}return f(w)?(w=U(w),""===w&&!0!==J||R.push(w),R):[]}function na(w){Oa++;return 0===Oa%100?(Oa=0,new Promise(J=>{setTimeout(()=>{J(w)},0)})):w}function Aa(w,J,R){switch(R){case "\x26":return w&
J;case "|":return w|J;case "^":return w^J;case "\x3c\x3c":return w<<J;case "\x3e\x3e":return w>>J;case "\x3e\x3e\x3e":return w>>>J}}function Ia(w,J=null){if(null!=w){if(ea(w)||sa(w)||aa(w))return w;if(w instanceof h)return!0===J?.keepGeometryType?w:w.toJSON();if(w instanceof y)return w.toArray().map(R=>Ia(R,J));if(w instanceof Array)return w.map(R=>Ia(R,J));if(ya(w))return w;if(oa(w))return w.toJSDate();if(null!==w&&"object"===typeof w&&void 0!==w.castAsJson)return w.castAsJson(J)}return null}function ja(w,
J,R,ba,da){return Ea.apply(this,arguments)}function Ea(){Ea=K._asyncToGenerator(function*(w,J,R,ba,da){w=yield Fa(w,J,R);da[ba]=w});return Ea.apply(this,arguments)}function Fa(w){return Pa.apply(this,arguments)}function Pa(){Pa=K._asyncToGenerator(function*(w,J=null,R=null){w instanceof y&&(w=w.toArray());if(null!=w){if(f(w)||w instanceof h||ya(w)||oa(w))return Ia(w,R);if(w instanceof Array){const ba=[],da=[];for(const qa of w)null===qa||f(qa)||qa instanceof h||ya(qa)||oa(qa)?da.push(Ia(qa,R)):(da.push(null),
ba.push(ja(qa,J,R,da.length-1,da)));0<ba.length&&(yield Promise.all(ba));return da}if(null!==w&&"object"===typeof w&&void 0!==w.castAsJsonAsync)return w.castAsJsonAsync(J,R)}return null});return Pa.apply(this,arguments)}function Ta(w,J,R){const ba=w.fullSchema();return null!==ba&&ba.fields?ma(J,ba,w,R):null}function Ua(w){w=w.fullSchema();return null!==w&&w.fields?w.typeIdField?{subtypeField:w.typeIdField,subtypes:w.types?w.types.map(J=>({name:J.name,code:J.id})):[]}:null:null}function Va(w,J,R,ba){const da=
w.fullSchema();if(null===da||!da.fields)return null;ba=ma(J,da,w,ba);if(void 0===R)try{R=w.field(J)}catch(qa){return null}return X(ba,R)}function Wa(w,J,R,ba){const da=w.fullSchema();if(null===da||!da.fields)return null;if(void 0===R){try{R=w.field(J)}catch(qa){return null}return R}w=ma(J,da,w,ba);return Z(w,R)}function Xa(w){return w?.timeReference?.timeZone?w?.timeReference?.timeZone:"system"}function Ya(w){w=w.fullSchema();if(null===w||!w.fields)return null;const J=[];for(const R of w.fields)J.push(z.esriFieldToJson(R));
return{objectIdField:w.objectIdField,globalIdField:w.globalIdField,geometryType:void 0===z.layerGeometryEsriRestConstants[w.geometryType]?"":z.layerGeometryEsriRestConstants[w.geometryType],fields:J,datesInUnknownTimezone:!0===w.datesInUnknownTimezone,preferredTimeReference:w.preferredTimeReference||null,editFieldsInfo:w.editFieldsInfo||null,timeInfo:w.timeInfo||null,dateFieldsTimeReference:w.dateFieldsTimeReference||null}}let Ma=function(w){this.value=w},Na=function(w){this.value=w};const Ba={type:"VOID"},
Za={type:"BREAK"},$a={type:"CONTINUE"};let Oa=0;const bb=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:Na,ImplicitResultE:Na,ReturnResult:Ma,ReturnResultE:Ma,absRound:G,autoCastArrayOfPointsToMultiPoint:Y,autoCastArrayOfPointsToPolygon:Ja,autoCastArrayOfPointsToPolyline:Ka,autoCastFeatureToGeometry:za,binaryOperator:Aa,breakResult:Za,castAsJson:Ia,castAsJsonAsync:Fa,continueResult:$a,defaultTimeZone:Xa,defaultUndefined:H,equalityTest:ia,featureDomainCodeLookup:Wa,featureDomainValueLookup:Va,
featureFullDomain:Ta,featureSchema:Ya,featureSubtypes:Ua,fixNullGeometry:V,fixSpatialReference:S,formatDate:P,formatNumber:F,generateUUID:L,getDomain:ma,getDomainCode:Z,getDomainValue:X,getType:ha,greaterThanLessThan:ca,isArray:ua,isBoolean:ea,isDate:oa,isFeature:xa,isFeatureSet:ka,isFeatureSetCollection:W,isFunctionParameter:m,isImmutableArray:la,isInteger:Ha,isJsDate:ya,isModule:E,isNumber:sa,isObject:ra,isSimpleType:f,isString:aa,multiReplace:l,pcCheck:I,stableStringify:ta,standardiseDateFormat:O,
tick:na,toBoolean:fa,toDate:T,toNumber:M,toNumberArray:p,toString:U,toStringArray:va,toStringExplicit:u,voidOperation:Ba},Symbol.toStringTag,{value:"Module"}));t.ImplicitResult=Na;t.ImplicitResultE=Na;t.ReturnResult=Ma;t.ReturnResultE=Ma;t.absRound=G;t.autoCastArrayOfPointsToMultiPoint=Y;t.autoCastArrayOfPointsToPolygon=Ja;t.autoCastArrayOfPointsToPolyline=Ka;t.autoCastFeatureToGeometry=za;t.binaryOperator=Aa;t.breakResult=Za;t.castAsJson=Ia;t.castAsJsonAsync=Fa;t.continueResult=$a;t.defaultTimeZone=
Xa;t.defaultUndefined=H;t.equalityTest=ia;t.featureDomainCodeLookup=Wa;t.featureDomainValueLookup=Va;t.featureFullDomain=Ta;t.featureSchema=Ya;t.featureSubtypes=Ua;t.fixNullGeometry=V;t.fixSpatialReference=S;t.formatDate=P;t.formatNumber=F;t.generateUUID=L;t.getDomain=ma;t.getDomainCode=Z;t.getDomainValue=X;t.getType=ha;t.greaterThanLessThan=ca;t.isArray=ua;t.isBoolean=ea;t.isDate=oa;t.isFeature=xa;t.isFeatureSet=ka;t.isFeatureSetCollection=W;t.isFunctionParameter=m;t.isImmutableArray=la;t.isInteger=
Ha;t.isJsDate=ya;t.isModule=E;t.isNumber=sa;t.isObject=ra;t.isSimpleType=f;t.isString=aa;t.lc=bb;t.multiReplace=l;t.pcCheck=I;t.stableStringify=ta;t.standardiseDateFormat=O;t.tick=na;t.toBoolean=fa;t.toDate=T;t.toNumber=M;t.toNumberArray=p;t.toString=U;t.toStringArray=va;t.toStringExplicit=u;t.voidOperation=Ba})},"esri/arcade/FunctionWrapper":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/promiseUtils"],function(t,K,q){function y(D,h,C){if(D instanceof b&&!(D instanceof
A)){const v=new A;v.fn=D;v.parameterEvaluator=C;v.context=h;return v}return D}let b=function(){},g=function(D){function h(v){var n=D.call(this)||this;n.fn=v;return n}K._inheritsLoose(h,D);var C=h.prototype;C.createFunction=function(v){return(...n)=>this.fn(v,{preparsed:!0,arguments:n})};C.call=function(v,n){return this.fn(v,n)};C.marshalledCall=function(v,n,k,d){return d(v,n,(c,x,e)=>{e=e.map(r=>r instanceof b&&!(r instanceof A)?y(r,v,d):r);c=this.call(k,{args:e});return q.isPromiseLike(c)?c.then(r=>
y(r,k,d)):c})};return h}(b),A=function(D){function h(){var v=D.apply(this,arguments)||this;v.fn=null;v.context=null;return v}K._inheritsLoose(h,D);var C=h.prototype;C.createFunction=function(v){return this.fn.createFunction(this.context)};C.call=function(v,n){return this.fn.marshalledCall(v,n,this.context,this.parameterEvaluator)};C.marshalledCall=function(v,n,k){return this.fn.marshalledCall(v,n,this.context,this.parameterEvaluator)};return h}(b);t.ArcadeFunction=b;t.NativeFunction=g;t.ScopeMarshalledFunction=
A;t.wrapModuleScopedResponse=y;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(t,K,q){return function(y){function b(A,D,h,C,v){A=y.call(this,A)||this;A._lazyPath=[];A._hasZ=!1;A._hasM=!1;A._hasZ=h;A._hasM=C;A._spRef=D;A._cacheId=v;return A}t._inheritsLoose(b,y);var g=b.prototype;g.get=function(A){if(void 0===this._lazyPath[A]){const D=this._elements[A];
if(void 0===D)return;this._lazyPath[A]=new q(D,this._spRef,this._hasZ,this._hasM,this._cacheId,A)}return this._lazyPath[A]};g.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof b?!1:A.getUniqueHash()===this.getUniqueHash()};g.getUniqueHash=function(){return this._cacheId.toString()};return b}(K)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(t,K,q){return function(y){function b(A,D,
h,C,v,n){A=y.call(this,A)||this;A._lazyPt=[];A._hasZ=!1;A._hasM=!1;A._spRef=D;A._hasZ=h;A._hasM=C;A._cacheId=v;A._partId=n;return A}t._inheritsLoose(b,y);var g=b.prototype;g.get=function(A){if(void 0===this._lazyPt[A]){const D=this._elements[A];if(void 0===D)return;const h=this._hasZ,C=this._hasM;let v=null;v=h&&!C?new q(D[0],D[1],D[2],void 0,this._spRef):C&&!h?new q(D[0],D[1],void 0,D[2],this._spRef):h&&C?new q(D[0],D[1],D[2],D[3],this._spRef):new q(D[0],D[1],this._spRef);v.cache._arcadeCacheId=
this._cacheId.toString()+"-"+this._partId.toString()+"-"+A.toString();this._lazyPt[A]=v}return this._lazyPt[A]};g.equalityTest=function(A){return A===this?!0:null===A||!1===A instanceof b?!1:A.getUniqueHash()===this.getUniqueHash()};g.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return b}(K)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(t,K,q){function y(v=q.getLocale()){v=v.toLowerCase();let n=v in D;if(!n){const x=
v.split("-");1<x.length&&x[0]in D&&(v=x[0],n=!0);n||(v="en")}const [k,d,c="#,##0.###"]=D[v];return{decimal:k,group:d,pattern:c}}function b(v){v=v||{};var n=y(v.locale);const k=v.pattern||n.pattern,d=n.group,c=n.decimal;let x=1;if(k.includes("%"))x/=100;else if(k.includes("\u2030"))x/=1E3;else if(k.includes("\u00a4"))throw Error("currency notation not supported");n=k.split(";");1===n.length&&n.push("-"+n[0]);return{regexp:C(n,e=>{e="(?:"+K.escapeRegExpString(e,".")+")";return e.replace(h,r=>{const z=
{signed:!1,separator:v.strict?d:[d,""],fractional:v.fractional,decimal:c,exponent:!1};r=r.split(".");let B=v.places;1===r.length&&1!==x&&(r[1]="###");1===r.length||0===B?z.fractional=!1:(void 0===B&&(B=v.pattern?r[1].lastIndexOf("0")+1:Infinity),B&&null==v.fractional&&(z.fractional=!0),!v.places&&B<r[1].length&&(B+=","+r[1].length),z.places=B);r=r[0].split(",");1<r.length&&(z.groupSize=r.pop().length,1<r.length&&(z.groupSize2=r.pop().length));return"("+g(z)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),
group:d,decimal:c,factor:x}}function g(v){v=v||{};"places"in v||(v.places=Infinity);"string"!==typeof v.decimal&&(v.decimal=".");"fractional"in v&&!/^0/.test(String(v.places))||(v.fractional=[!0,!1]);"exponent"in v||(v.exponent=[!0,!1]);"eSigned"in v||(v.eSigned=[!0,!1]);var n=A(v);const k=C(v.fractional,c=>{let x="";c&&0!==v.places&&(x="\\"+v.decimal,x=Infinity===v.places?"(?:"+x+"\\d+)?":x+("\\d{"+v.places+"}"));return x},!0),d=C(v.exponent,c=>c?"([eE]"+A({signed:v.eSigned})+")":"");n+=k;k&&(n=
"(?:(?:"+n+")|(?:"+k+"))");return n+d}function A(v){v=v||{};"signed"in v||(v.signed=[!0,!1]);"separator"in v?"groupSize"in v||(v.groupSize=3):v.separator="";const n=C(v.signed,d=>d?"[-+]":"",!0),k=C(v.separator,d=>{if(!d)return"(?:\\d+)";d=K.escapeRegExpString(d);" "===d?d="\\s":"\u00a0"===d&&(d="\\s\\xa0");const c=v.groupSize,x=v.groupSize2;return x?(d="(?:0|[1-9]\\d{0,"+(x-1)+"}(?:["+d+"]\\d{"+x+"})*["+d+"]\\d{"+c+"})",0<c-x?"(?:"+d+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":d):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+
d+"]\\d{"+c+"})*)"},!0);return n+k}const D={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],
mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},h=/[#0,]*[#0](?:\.0*#*)?/,C=(v,n,k)=>{if(!(v instanceof Array))return n(v);const d=[];for(let c=0;c<v.length;c++)d.push(n(v[c]));v=d.join("|");return"("+(k?"?:":"")+v+")"};t._parseInfo=b;t.format=function(v,n){n={...n};var k=y(n.locale);n.customs=
k;k=n.pattern||k.pattern;if(isNaN(v)||Infinity===Math.abs(v))return null;var d=v;var c=n||{};var x=c.customs.group,e=c.customs.decimal;k=k.split(";");v=k[0];n=k[0>d?1:0]||"-"+v;if(n.includes("%"))d*=100;else if(n.includes("\u2030"))d*=1E3;else{if(n.includes("\u00a4"))throw Error("currency notation not supported");if(n.includes("E"))throw Error("exponential notation not supported");}k=h;var r=v.match(k);if(!r)throw Error("unable to find a number expression in pattern: "+n);!1===c.fractional&&(c.places=
0);v=n.replace;r=r[0];c=c={decimal:e,group:x,places:c.places,round:c.round};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);e=r.split(".");var z="string"===typeof c.places&&c.places.indexOf(",");r=c.places;z?r=c.places.substring(z+1):0<=r||(r=(e[1]||[]).length);0>c.round||(d=Number(d.toFixed(Number(r))));x=String(Math.abs(d)).split(".");d=x[1]||"";e[1]||c.places?(z&&(c.places=c.places.substring(0,z)),z=void 0!==c.places?c.places:e[1]&&e[1].lastIndexOf("0")+1,z>d.length&&(x[1]=d.padEnd(Number(z),
"0")),r<d.length&&(x[1]=d.substr(0,Number(r)))):x[1]&&x.pop();d=e[0].replace(",","");r=d.indexOf("0");-1!==r&&(r=d.length-r,r>x[0].length&&(x[0]=x[0].padStart(r,"0")),d.includes("#")||(x[0]=x[0].substr(x[0].length-r)));d=e[0].lastIndexOf(",");let B;if(-1!==d){var a=e[0].length-d-1;e=e[0].substr(0,d);d=e.lastIndexOf(",");-1!==d&&(B=e.length-d-1)}e=[];for(d=x[0];d;)r=d.length-a,e.push(0<r?d.substr(r):d),d=0<r?d.slice(0,r):"",B&&(a=B,B=void 0);x[0]=e.reverse().join(c.group||",");a=x.join(c.decimal||
".");return v.call(n,k,a)};t.getCustoms=y;t.parse=function(v,n){n=b(n);v=(new RegExp("^"+n.regexp+"$")).exec(v);if(!v)return NaN;let k=v[1];if(!v[1]){if(!v[2])return NaN;k=v[2];n.factor*=-1}k=k.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,".");return Number(k)*n.factor};t.regexp=function(v){return b(v).regexp};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../ArcadeDate","../../../geometry/Extent",
"../../../layers/support/Field"],function(t,K,q,y){function b(A){return A instanceof Date}function g(A){return A instanceof K.ArcadeDate}t.FeatureServiceDatabaseType=void 0;(function(A){A[A.Standardised=0]="Standardised";A[A.StandardisedNoInterval=1]="StandardisedNoInterval";A[A.SqlServer=2]="SqlServer";A[A.Oracle=3]="Oracle";A[A.Postgres=4]="Postgres";A[A.PGDB=5]="PGDB";A[A.FILEGDB=6]="FILEGDB";A[A.NotEvaluated=7]="NotEvaluated"})(t.FeatureServiceDatabaseType||(t.FeatureServiceDatabaseType={}));
t.IdState=void 0;(function(A){A[A.InFeatureSet=0]="InFeatureSet";A[A.NotInFeatureSet=1]="NotInFeatureSet";A[A.Unknown=2]="Unknown"})(t.IdState||(t.IdState={}));t.callback=function(A,D){return function(){try{A.apply(null,arguments)}catch(h){D.reject(h)}}};t.cloneAttributes=function(A){const D={};for(const h in A)D[h]=A[h];return D};t.cloneField=function(A){return y.fromJSON(A.toJSON())};t.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A||"number"===typeof A)return A;
switch(A.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};t.convertSquareUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;switch(A.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};t.defaultMaxRecords=1E3;t.equalityTest=function(A,D){return A===
D?!0:(b(A)||g(A))&&(b(D)||g(D))?A.getTime()===D.getTime():!1};t.errback=function(A){return function(D){A.reject(D)}};t.esriFieldToJson=function(A){return A.toJSON?A.toJSON():A};t.extractServiceUrl=function(A){if(void 0===A)return"";A=A.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");A=A.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return A=A.split("?")[0]};t.isArcadeDate=g;t.isArray=function(A){return A instanceof Array};t.isBoolean=function(A){return"boolean"===typeof A};t.isDate=b;t.isNumber=
function(A){return"number"===typeof A};t.isString=function(A){return"string"===typeof A||A instanceof String};t.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",
xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",
esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};t.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};t.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",
multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};t.sameGeomType=function(A,D){return A===D||"point"===A&&"esriGeometryPoint"===D||"polyline"===A&&"esriGeometryPolyline"===D||"polygon"===A&&"esriGeometryPolygon"===D||"extent"===A&&"esriGeometryEnvelope"===
D||"multipoint"===A&&"esriGeometryMultipoint"===D||"point"===D&&"esriGeometryPoint"===A||"polyline"===D&&"esriGeometryPolyline"===A||"polygon"===D&&"esriGeometryPolygon"===A||"extent"===D&&"esriGeometryEnvelope"===A||"multipoint"===D&&"esriGeometryMultipoint"===A?!0:!1};t.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new q({xmin:A.x,ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});
case "extent":return A}return null};t.stableStringify=function(A,D){D||(D={});"function"===typeof D&&(D={cmp:D});const h="boolean"===typeof D.cycles?D.cycles:!1,C=D.cmp&&function(n){return function(k){return function(d,c){return n({key:d,value:k[d]},{key:c,value:k[c]})}}}(D.cmp),v=[];return function d(k){k&&k.toJSON&&"function"===typeof k.toJSON&&(k=k.toJSON());if(void 0!==k){if("number"===typeof k)return isFinite(k)?""+k:"null";if("object"!==typeof k)return JSON.stringify(k);var c;if(Array.isArray(k)){var x=
"[";for(c=0;c<k.length;c++)c&&(x+=","),x+=d(k[c])||"null";return x+"]"}if(null===k)return"null";if(v.includes(k)){if(h)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var e=v.push(k)-1,r=Object.keys(k).sort(C&&C(k));x="";for(c=0;c<r.length;c++){const z=r[c],B=d(k[z]);B&&(x&&(x+=","),x+=JSON.stringify(z)+":"+B)}v.splice(e,1);return"{"+x+"}"}}(A)};t.toEsriGeometryType=function(A){switch(A){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";
case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports"],function(t){t.ArcadeModule=function(K){this.source=K};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("../chunks/_rollupPluginBabelHelpers ./Dictionary ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe ./ArcadeDate ./executionError ./arcadeTimeUtils".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n){return function(){function k(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}k.createFromGraphic=function(c,x){const e=new k;e.contextTimeReference=x??null;e._geometry=h.isSome(c.geometry)?c.geometry:null;e.attributes=void 0===c.attributes?{}:null===
c.attributes?{}:c.attributes;c._sourceLayer?(e._layer=c._sourceLayer,e._datesfixed=!1):c._layer?(e._layer=c._layer,e._datesfixed=!1):c.layer&&"fields"in c.layer?(e._layer=c.layer,e._datesfixed=!1):c.sourceLayer&&"fields"in c.sourceLayer&&(e._layer=c.sourceLayer,e._datesfixed=!1);e._layer&&!1===e._datesfixed&&(e.dateTimeReferenceFieldIndex=void 0!==e._layer.dateTimeReferenceFieldIndex?e._layer.dateTimeReferenceFieldIndex:n.DateTimeReferenceFieldIndex.createFromLayer(e._layer));return e};k.createFromArcadeFeature=
function(c){const x=new k;x._datesfixed=c._datesfixed;x.attributes=c.attributes;x._geometry=c._geometry;x._optimizedGeomDefinition=c._optimizedGeomDefinition;c._layer&&(x._layer=c._layer);x.dateTimeReferenceFieldIndex=c.dateTimeReferenceFieldIndex;x.contextTimeReference=c.contextTimeReference;return x};k.createFromOptimisedFeature=function(c,x,e){const r=new k;r._geometry=c.geometry?{geometry:c.geometry}:null;r._optimizedGeomDefinition=e;r.attributes=c.attributes||{};r._layer=x;r._datesfixed=!1;return r};
k.createFromArcadeDictionary=function(c){const x=new k;x.attributes=c.field("attributes");null!==x.attributes?x.attributes instanceof K?(x.attributes=x.attributes.attributes,null===x.attributes&&(x.attributes={})):x.attributes={}:x.attributes={};x._geometry=c.field("geometry");null!==x._geometry&&(x._geometry instanceof K?x._geometry=k.parseGeometryFromDictionary(x._geometry):x._geometry instanceof b||(x._geometry=null));return x};k.createFromGraphicLikeObject=function(c,x,e=null,r){const z=new k;
z.contextTimeReference=r??null;null===x&&(x={});z.attributes=x;z._geometry=h.isSome(c)?c:null;z._layer=e;z._layer&&(z._datesfixed=!1,z.dateTimeReferenceFieldIndex=void 0!==z._layer.dateTimeReferenceFieldIndex?z._layer.dateTimeReferenceFieldIndex:n.DateTimeReferenceFieldIndex.createFromLayer(z._layer));return z};var d=k.prototype;d.repurposeFromGraphicLikeObject=function(c,x,e=null){null===x&&(x={});this.attributes=x;this._geometry=c?c:null;this._datesfixed=(this._layer=e)?!1:!0};d.fieldSourceTimeZone=
function(c){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(c)??""};d.castToText=function(c=!1){let x="";!1===this._datesfixed&&this._fixDates();for(const e in this.attributes){""!==x&&(x+=",");const r=this.attributes[e];null==r?x+=JSON.stringify(e)+":null":y.isBoolean(r)||y.isNumber(r)||y.isString(r)?x+=JSON.stringify(e)+":"+JSON.stringify(r):r instanceof b?x+=JSON.stringify(e)+":"+y.toStringExplicit(r):r instanceof q?x+=JSON.stringify(e)+":"+y.toStringExplicit(r,null,c):r instanceof Array?
x+=JSON.stringify(e)+":"+y.toStringExplicit(r,null,c):r instanceof C.ArcadeDate?x=c?x+(JSON.stringify(e)+":"+JSON.stringify(r.getTime())):x+(JSON.stringify(e)+":"+r.stringify()):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(x+=JSON.stringify(e)+":"+r.castToText(c))}return'{"geometry":'+(null===this.geometry()?"null":y.toStringExplicit(this.geometry()))+',"attributes":{'+x+"}}"};d._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{var c=[],x=this._layer.fields;for(let e=0;e<x.length;e++){const r=x[e],z=r.type;"date"!==z&&"esriFieldTypeDate"!==z||c.push(r.name)}this._datefields=c;0<c.length&&this._fixDateFields(c)}this._datesfixed=!0};d.isUnknownDateTimeField=function(c){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(c)};d._fixDateFields=function(c){this.attributes={...this.attributes};const x=this.contextTimeReference?.timeZone??"system";for(let r=0;r<c.length;r++){let z=this.attributes[c[r]];if(null!==
z)if(void 0===z)for(const B in this.attributes){if(B.toLowerCase()===c[r].toLowerCase()){z=this.attributes[B];if(null!==z){var e=this.isUnknownDateTimeField(B);y.isDate(z)?this.attributes[B]=z:this.attributes[B]=z instanceof Date?e?C.ArcadeDate.unknownDateJSToArcadeDate(z):C.ArcadeDate.dateJSAndZoneToArcadeDate(z,x):e?C.ArcadeDate.unknownEpochToArcadeDate(z):C.ArcadeDate.epochToArcadeDate(z,x)}break}}else e=this.isUnknownDateTimeField(c[r]),y.isDate(z)?this.attributes[c[r]]=z:this.attributes[c[r]]=
z instanceof Date?e?C.ArcadeDate.unknownDateJSToArcadeDate(z):C.ArcadeDate.dateJSAndZoneToArcadeDate(z,x):e?C.ArcadeDate.unknownEpochToArcadeDate(z):C.ArcadeDate.epochToArcadeDate(z,x)}};d.geometry=function(){if(null===this._geometry||this._geometry instanceof b)return this._geometry;this._optimizedGeomDefinition?(this._geometry=h.unwrap(A.fromJSON(D.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=h.unwrap(A.fromJSON(this._geometry));return this._geometry};d.field=function(c){!1===this._datesfixed&&this._fixDates();var x=this.attributes[c];if(void 0!==x)return x;x=c.toLowerCase();for(const e in this.attributes)if(e.toLowerCase()===x)return this.attributes[e];if(this._hasFieldDefinition(x))return null;throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.FieldNotFound,null,{key:c});};d._hasFieldDefinition=
function(c){if(null===this._layer)return!1;for(let x=0;x<this._layer.fields.length;x++)if(this._layer.fields[x].name.toLowerCase()===c)return!0;return!1};d.setField=function(c,x){if(this.immutable)throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.Immutable,null);x instanceof Date&&(x=this.isUnknownDateTimeField(c)?C.ArcadeDate.unknownDateJSToArcadeDate(x):C.ArcadeDate.dateJSToArcadeDate(x));if(!1===y.isSimpleType(x))throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.TypeNotAllowedInFeature,
null);const e=c.toLowerCase();if(void 0===this.attributes[c])for(const r in this.attributes)if(r.toLowerCase()===e){this.attributes[r]=x;return}this.attributes[c]=x};d.hasField=function(c){const x=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(const e in this.attributes)if(e.toLowerCase()===x)return!0;return this._hasFieldDefinition(x)?!0:!1};d.keys=function(){let c=[];const x={};for(var e in this.attributes)c.push(e),x[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){const r=
this._layer.fields[e];1!==x[r.name.toLowerCase()]&&c.push(r.name)}return c=c.sort()};k.parseGeometryFromDictionary=function(c){c=k._convertDictionaryToJson(c,!0);void 0!==c.hasm&&(c.hasM=c.hasm,delete c.hasm);void 0!==c.hasz&&(c.hasZ=c.hasz,delete c.hasz);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=this._fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasZ));void 0!==c.paths&&(c.paths=this._fixPathArrays(c.paths,!0===c.hasZ,!0===
c.hasM));void 0!==c.points&&(c.points=this._fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return A.fromJSON(c)};k._fixPathArrays=function(c,x,e){const r=[];if(c instanceof Array)for(var z=0;z<c.length;z++)r.push(this._fixPointArrays(c[z],x,e));else if(c instanceof q)for(z=0;z<c.length();z++)r.push(this._fixPointArrays(c.get(z),x,e));return r};k._fixPointArrays=function(c,x,e){const r=[];if(c instanceof Array)for(var z=0;z<c.length;z++){var B=c[z];B instanceof g?x&&e?r.push([B.x,B.y,B.z,B.m]):
x?r.push([B.x,B.y,B.z]):e?r.push([B.x,B.y,B.m]):r.push([B.x,B.y]):B instanceof q?r.push(B.toArray()):r.push(B)}else if(c instanceof q)for(z=0;z<c.length();z++)B=c.get(z),B instanceof g?x&&e?r.push([B.x,B.y,B.z,B.m]):x?r.push([B.x,B.y,B.z]):e?r.push([B.x,B.y,B.m]):r.push([B.x,B.y]):B instanceof q?r.push(B.toArray()):r.push(B);return r};k._convertDictionaryToJson=function(c,x=!1){const e={};for(const r in c.attributes){let z=c.attributes[r];z instanceof K&&(z=k._convertDictionaryToJson(z));x?e[r.toLowerCase()]=
z:e[r]=z}return e};k.parseAttributesFromDictionary=function(c){const x={};for(const e in c.attributes){const r=c.attributes[e];if(y.isSimpleType(r))x[e]=r;else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidParameter,null);}return x};k.fromJson=function(c,x){let e=null;null!==c.geometry&&void 0!==c.geometry&&(e=A.fromJSON(c.geometry));const r={};if(null!==c.attributes&&void 0!==c.attributes)for(const z in c.attributes){const B=c.attributes[z];if(null===B)r[z]=B;else if(y.isString(B)||
y.isNumber(B)||y.isBoolean(B)||y.isDate(B))r[z]=B;else throw new v.ArcadeExecutionError(null,v.ExecutionErrorCodes.InvalidParameter,null);}return k.createFromGraphicLikeObject(e,r,null,x??null)};d.fullSchema=function(){return this._layer};d.gdbVersion=function(){if(null===this._layer)return"";const c=this._layer.gdbVersion;return void 0===c?"":""===c&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":c};d.castAsJson=function(c){const x={attributes:{},geometry:!0===c?.keepGeometryType?
this.geometry():this.geometry()?.toJSON()??null};for(const e in this.attributes){const r=this.attributes[e];void 0!==r&&(x.attributes[e]=y.castAsJson(r,c))}return x};d.castAsJsonAsync=function(){var c=t._asyncToGenerator(function*(x,e){return this.castAsJson(e)});return function(){return c.apply(this,arguments)}}();t._createClass(k,[{key:"layerPreferredTimeZone",get:function(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}}]);return k}()})},"esri/arcade/arcadeTimeUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeDate ../layers/support/FieldsIndex ../time/TimeReference ../chunks/datetime ../time/timeReferenceUtils".split(" "),
function(t,K,q,y,b,g,A){function D(C){return C?.timeZoneIANA?C?.timeZoneIANA:C?.timeZone?A.convertLegacyTimeZone(C,""):""}let h=function(){function C(){this.dateTimeReferenceMetaData=null;this._fieldTimeZoneIndex={};this._ianaLayerDateFields=this._ianaEditFields=this._ianaTimeInfo=this._ianaPreferred=this._fieldIndex=null}C.create=function(n,k){const d=new C;d.dateTimeReferenceMetaData=k;d._fieldIndex=n instanceof y?n:new y(n);return d};C.createFromLayer=function(n){if(!n)return null;if(!n.fieldsIndex)return!n.declaredClass&&
n.fields?C.create(n.fields,n):null;const k=new C;k._fieldIndex=n.fieldsIndex;k.dateTimeReferenceMetaData={timeInfo:n?.timeInfo?.toJSON()??null,editFieldsInfo:n?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:n?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:n?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===n?.datesInUnknownTimezone};return k};var v=C.prototype;v.fieldTimeZone=function(n){n=this._fieldIndex?.get(n);if(!n||"date"!==n.type&&"esriFieldTypeDate"!==
n.type)return null;var k=this._fieldTimeZoneIndex[n.name];if(void 0!==k)return k;k=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},
{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(var d of k)if(d.field===n.name)return d=this.convertToIANA(d.timeReference,d.isunknown),
this._fieldTimeZoneIndex[n.name]=d;d=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[n.name]=d};v.convertToIANA=function(n,k){return k?"unknown":D(n)};K._createClass(C,[{key:"layerPreferredTimeZone",get:function(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";return this._ianaPreferred=this.convertToIANA(this.dateTimeReferenceMetaData?.preferredTimeReference,
!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerTimeInfoTimeZone",get:function(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";return this._ianaTimeInfo=this.convertToIANA(this.dateTimeReferenceMetaData?.timeInfo?.timeReference,!1)}},{key:"layerEditFieldsTimeZone",get:function(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";return this._ianaEditFields=this.convertToIANA(this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,
this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}},{key:"layerDateFieldsTimeZone",get:function(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";return this._ianaLayerDateFields=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone)}}]);return C}();t.DateTimeReferenceFieldIndex=h;t.convertTimeReference=function(C){if(!C)return null;C instanceof b&&(C=D(C.toJSON()));
if(C instanceof g.Zone)return C;if("unknown"===C.toLowerCase())return q.UnknownTimeZone.instance;if("system"===C.toLowerCase())return g.SystemZone.instance;if("utc"===C.toLowerCase())return g.FixedOffsetZone.utcInstance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(C)){const v=g.FixedOffsetZone.parseSpecifier("UTC"+(C.startsWith("+")||C.startsWith("-")?"":"+")+C);if(v)return v}C=g.IANAZone.create(C);if(!C.isValid)throw new q.ArcadeDateError(q.ArcadeDateErrorCodes.TimeZoneNotRecognised);return C};t.convertToIANA=
D;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(t){function K(d){return"string"===typeof d||d instanceof String}function q(d,c){if(d)for(const x of d)y(x,c)}function y(d,c){if(d&&!1!==c(d))switch(d.type){case "ImportDeclaration":q(d.specifiers,c);y(d.source,c);break;case "ExportNamedDeclaration":y(d.declaration,c);break;case "ArrayExpression":q(d.elements,c);break;case "AssignmentExpression":case "BinaryExpression":y(d.left,
c);y(d.right,c);break;case "BlockStatement":q(d.body,c);break;case "Program":q(d.body,c);break;case "CallExpression":y(d.callee,c);q(d.arguments,c);break;case "ExpressionStatement":y(d.expression,c);break;case "ForInStatement":y(d.left,c);y(d.right,c);y(d.body,c);break;case "ForStatement":y(d.init,c);y(d.test,c);y(d.update,c);y(d.body,c);break;case "WhileStatement":y(d.test,c);y(d.body,c);break;case "FunctionDeclaration":y(d.id,c);q(d.params,c);y(d.body,c);break;case "IfStatement":y(d.test,c);y(d.consequent,
c);y(d.alternate,c);break;case "LogicalExpression":y(d.left,c);y(d.right,c);break;case "MemberExpression":y(d.object,c);y(d.property,c);break;case "ObjectExpression":q(d.properties,c);break;case "Property":y(d.key,c);y(d.value,c);break;case "ReturnStatement":y(d.argument,c);break;case "UnaryExpression":y(d.argument,c);break;case "UpdateExpression":y(d.argument,c);break;case "VariableDeclaration":q(d.declarations,c);break;case "VariableDeclarator":y(d.id,c);y(d.init,c);break;case "TemplateLiteral":q(d.expressions,
c),q(d.quasis,c)}}function b(d,c){let x=!1;const e=c.toLowerCase();y(d,r=>{if(x)return!1;"Identifier"===r.type&&r.name&&r.name.toLowerCase()===e&&(x=!0);return!0});return x}function g(d){const c=[];y(d,x=>{"ImportDeclaration"===x.type&&x.source&&x.source.value&&c.push({libname:x.specifiers[0].local.name.toLowerCase(),source:x.source.value});return!0});return c}function A(d){const c=[];y(d,x=>{"CallExpression"===x.type&&"Identifier"===x.callee.type&&c.push(x.callee.name.toLowerCase());return!0});return c}
const D={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,
max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,
max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,
max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},
min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,
max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,
max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,
max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},h={functionDefinitions:new Map,constantDefinitions:new Map},C={functionDefinitions:new Map,constantDefinitions:new Map};for(var v of["pi","infinity"])C.constantDefinitions.set(v,{type:"constant"}),h.constantDefinitions.set(v,{type:"constant"});C.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},
{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});h.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const d in D)v=D[d],C.functionDefinitions.set(d,
{overloads:[{type:"function",parametersInfo:{min:v.min,max:v.max}}]}),h.functionDefinitions.set(d,{overloads:[{type:"function",parametersInfo:{min:v.min,max:v.max}}]});const n="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),k="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
t.addFunctionDeclaration=function(d,c){c="sync"===c?h:C;c.functionDefinitions.has(d.name.toLowerCase())?c.functionDefinitions.get(d.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:d.min,max:d.max}}):c.functionDefinitions.set(d.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:d.min,max:d.max}}]})};t.extractFunctionDeclaration=function(d,c){const x=[];if(void 0!==c.params&&null!==c.params)for(let e=0;e<c.params.length;e++)x.push("any");return{name:d,return:"any",
params:x}};t.findExpectedFieldLiterals=function(d){const c=[];y(d,x=>{if("CallExpression"===x.type){if("Identifier"===x.callee.type&&"expects"===x.callee.name.toLowerCase()){var e="";for(let r=0;r<(x.arguments||[]).length;r++)0===r?"Identifier"===x.arguments[r].type&&(e=x.arguments[r].name.toLowerCase()):e&&"Literal"===x.arguments[r].type&&K(x.arguments[r].value)&&c.push(e+"."+x.arguments[r].value.toLowerCase());return!1}if("Identifier"===x.callee.type&&["domainname","domaincode","domain","haskey"].includes(x.callee.name.toLowerCase())&&
2<=x.arguments.length)return e="","Identifier"===x.arguments[0].type&&(e=x.arguments[0].name.toLowerCase()),e&&"Literal"===x.arguments[1].type&&K(x.arguments[1].value)&&c.push(e+"."+x.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==x.type||"Identifier"!==x.object.type)return!0;!1===x.computed&&x.object&&x.object.name&&x.property&&"Identifier"===x.property.type&&x.property.name?c.push(x.object.name.toLowerCase()+"."+x.property.name.toLowerCase()):x.object&&x.object.name&&x.property&&"Literal"===
x.property.type&&"string"===typeof x.property.value&&c.push(x.object.name.toLowerCase()+"."+x.property.value?.toString().toLowerCase());return!1});return c};t.findFieldLiterals=function(d){const c=[];y(d,x=>{if("MemberExpression"!==x.type||"Identifier"!==x.object.type)return!0;!1===x.computed&&x.object&&x.object.name&&x.property&&"Identifier"===x.property.type&&x.property.name?c.push(x.object.name.toLowerCase()+"."+x.property.name.toLowerCase()):x.object&&x.object.name&&x.property&&"Literal"===x.property.type&&
"string"===typeof x.property.value&&c.push(x.object.name.toLowerCase()+"."+x.property.value?.toString().toLowerCase());return!1});return c};t.findFunctionCalls=A;t.findModuleImports=g;t.findScriptDependencies=function(d,c=[]){let x=null;if(void 0===d.usesFeatureSet){null===x&&(x=A(d));d.usesFeatureSet=!1;for(let e=0;e<x.length;e++)n.includes(x[e])&&(d.usesFeatureSet=!0,d.isAsync=!0);if(!1===d.usesFeatureSet&&c&&0<c.length)for(const e of c)if(b(d,e)){d.usesFeatureSet=!0;d.isAsync=!0;break}}void 0===
d.usesModules&&(d.usesModules=!1,0<g(d).length&&(d.usesModules=!0));if(void 0===d.usesGeometry)for(d.usesGeometry=!1,null===x&&(x=A(d)),c=0;c<x.length;c++)k.includes(x[c])&&(d.usesGeometry=!0)};t.fullArcadeApiAsync=C;t.fullArcadeApiSync=h;t.referencesFunction=function(d,c){let x=!1;const e=c.toLowerCase();y(d,r=>x?!1:"CallExpression"===r.type&&"Identifier"===r.callee.type&&r.callee.name&&r.callee.name.toLowerCase()===e?(x=!0,!1):!0);return x};t.referencesMember=b;t.scriptUsesFeatureSet=function(d){d=
A(d);for(let c=0;c<d.length;c++)if(n.includes(d[c]))return!0;return!1};t.walk=y;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/array":function(){define("exports ./_rollupPluginBabelHelpers ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(t,K,q,y,b,g){function A(h){function C(e,r,z){if(e instanceof y)return e.toArray();if(b.isArray(e))return e;throw new q.ArcadeExecutionError(r,q.ExecutionErrorCodes.InvalidParameter,
z);}function v(e,r){var z=e.length,B=Math.floor(z/2);if(0===z)return[];if(1===z)return[e[0]];var a=v(e.slice(0,B),r);e=v(e.slice(B,z),r);for(z=[];0<a.length||0<e.length;)0<a.length&&0<e.length?(B=r(a[0],e[0]),isNaN(B)&&(B=0),0>=B?(z.push(a[0]),a=a.slice(1)):(z.push(e[0]),e=e.slice(1))):0<a.length?(z.push(a[0]),a=a.slice(1)):0<e.length&&(z.push(e[0]),e=e.slice(1));return z}function n(e,r){return k.apply(this,arguments)}function k(){k=K._asyncToGenerator(function*(e,r){const z=e.length,B=Math.floor(z/
2);if(0===z)return[];if(1===z)return[e[0]];e=[yield n(e.slice(0,B),r),yield n(e.slice(B,z),r)];return d(e[0],e[1],r,[])});return k.apply(this,arguments)}function d(e,r,z,B){return c.apply(this,arguments)}function c(){c=K._asyncToGenerator(function*(e,r,z,B){if(0<e.length||0<r.length){if(0<e.length&&0<r.length){let a=yield z(e[0],r[0]);isNaN(a)&&(a=1);0>=a?(B.push(e[0]),e=e.slice(1)):(B.push(r[0]),r=r.slice(1));return d(e,r,z,B)}if(0<e.length)return B.push(e[0]),e=e.slice(1),d(e,r,z,B);if(0<r.length)return B.push(r[0]),
r=r.slice(1),d(e,r,z,B)}else return B});return c.apply(this,arguments)}function x(e,r,z,B){b.pcCheck(z,1,2,e,r);let a=z[0];b.isImmutableArray(a)&&(a=a.toArray());if(!1===b.isArray(a))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);if(1<z.length){if(!1===b.isFunctionParameter(z[1]))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);var l=a;const m=z[1].createFunction(e);return B?n(l,m):l=v(l,(E,f)=>m(E,f))}e=a;if(0===e.length)return[];z={};for(B=
0;B<e.length;B++)r=b.getType(e[B]),""!==r&&(z[r]=!0);if(!0===z.Array||!0===z.Dictionary||!0===z.Feature||!0===z.Point||!0===z.Polygon||!0===z.Polyline||!0===z.Multipoint||!0===z.Extent||!0===z.Function)return e.slice(0);B=0;r="";for(l in z)B++,r=l;return e=1<B||"String"===r?v(e,(m,E)=>{if(null===m||void 0===m||m===b.voidOperation)return null===E||void 0===E||E===b.voidOperation?0:1;if(null===E||void 0===E||E===b.voidOperation)return-1;m=b.toString(m);E=b.toString(E);return m<E?-1:m===E?0:1}):"Number"===
r?v(e,(m,E)=>m-E):"Boolean"===r?v(e,(m,E)=>m===E?0:E?-1:1):"Date"===r?v(e,(m,E)=>E-m):e.slice(0)}h.functions.array=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,2,e,r);z=b.toNumber(a[0]);if(isNaN(z)||!1===b.isInteger(z))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);a=b.defaultUndefined(a[1],null);z=Array(z);z.fill(a);return z})};h.functions.front=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,1,e,r);if(b.isImmutableArray(a[0])){if(0>=
a[0].length())throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);return a[0].get(0)}if(b.isArray(a[0])){if(0>=a[0].length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);return a[0][0]}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.back=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,1,e,r);if(b.isImmutableArray(a[0])){if(0>=a[0].length())throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,
r);return a[0].get(a[0].length()-1)}if(b.isArray(a[0])){if(0>=a[0].length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);return a[0][a[0].length-1]}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.push=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,2,e,r);if(b.isArray(a[0]))return a[0][a[0].length]=a[1],a[0].length;throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.pop=
function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,1,e,r);if(b.isArray(a[0])){if(0>=a[0].length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);z=a[0][a[0].length-1];--a[0].length;return z}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.erase=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);if(b.isArray(a[0])){z=b.toNumber(a[1]);if(isNaN(z)||!1===b.isInteger(z))throw new q.ArcadeExecutionError(e,
q.ExecutionErrorCodes.InvalidParameter,r);a=a[0];if(0>=a.length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);0>z&&(z=a.length+z);if(0>z)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);if(z>=a.length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);a.splice(z,1);return b.voidOperation}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.insert=function(e,r){return h.standardFunction(e,
r,(z,B,a)=>{b.pcCheck(a,3,3,e,r);if(b.isArray(a[0])){z=b.toNumber(a[1]);if(isNaN(z)||!1===b.isInteger(z))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);B=a[2];a=a[0];if(z>a.length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);if(0>z&&z<-1*a.length)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.OutOfBounds,r);if(z===a.length)return a[z]=B,b.voidOperation;a.splice(z,0,B);return b.voidOperation}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,
r);})};h.functions.resize=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,3,e,r);if(b.isArray(a[0])){B=b.toNumber(a[1]);if(isNaN(B)||!1===b.isInteger(B))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);if(0>B)throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);z=b.defaultUndefined(a[2],null);a=a[0];if(a.length>=B)return a.length=B,b.voidOperation;const l=a.length;a.length=B;for(B=l;B<a.length;B++)a[B]=z;return b.voidOperation}throw new q.ArcadeExecutionError(e,
q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.includes=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);if(b.isArray(a[0])){const l=a[1];return-1<a[0].findIndex(m=>b.equalityTest(m,l))?!0:!1}if(b.isImmutableArray(a[0])){const l=a[1];return-1<a[0].toArray().findIndex(m=>b.equalityTest(m,l))?!0:!1}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.slice=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,
3,e,r);if(b.isArray(a[0])){z=b.toNumber(b.defaultUndefined(a[1],0));B=b.toNumber(b.defaultUndefined(a[2],a[0].length));if(isNaN(z)||!1===b.isInteger(z))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);if(isNaN(B)||!1===b.isInteger(B))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);return a[0].slice(z,B)}if(b.isImmutableArray(a[0])){z=a[0];B=b.toNumber(b.defaultUndefined(a[1],0));a=b.toNumber(b.defaultUndefined(a[2],z.length()));if(isNaN(B)||
!1===b.isInteger(B))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);if(isNaN(a)||!1===b.isInteger(a))throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);return z.toArray().slice(B,a)}throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.splice=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{z=[];for(B=0;B<a.length;B++)b.isArray(a[B])?z.push(...a[B]):b.isImmutableArray(a[B])?z.push(...a[B].toArray()):
z.push(a[B]);return z})};h.functions.top=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);if(b.isArray(a[0]))return b.toNumber(a[1])>=a[0].length?a[0].slice(0):a[0].slice(0,b.toNumber(a[1]));if(b.isImmutableArray(a[0]))return b.toNumber(a[1])>=a[0].length()?a[0].slice(0):a[0].slice(0,b.toNumber(a[1]));throw new q.ArcadeExecutionError(e,q.ExecutionErrorCodes.InvalidParameter,r);})};h.functions.first=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,1,1,e,r);
return b.isArray(a[0])?0===a[0].length?null:a[0][0]:b.isImmutableArray(a[0])?0===a[0].length()?null:a[0].get(0):null})};"sync"===h.mode&&(h.functions.sort=function(e,r){return h.standardFunction(e,r,(z,B,a)=>x(e,r,a,!1))},h.functions.any=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);z=a[1].createFunction(e);a=C(a[0],e,r);for(const l of a)if(a=z(l),b.isBoolean(a)&&!0===a)return!0;return!1})},h.functions.all=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,
2,2,e,r);z=a[1].createFunction(e);a=C(a[0],e,r);for(const l of a)if(!0!==z(l))return!1;return!0})},h.functions.none=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);z=a[1].createFunction(e);a=C(a[0],e,r);for(const l of a)if(!0===z(l))return!1;return!0})},h.functions.reduce=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,3,e,r);const l=a[1].createFunction(e);z=C(a[0],e,r);return 2===a.length?0===z.length?null:z.reduce((m,E)=>{m=l(m,E);return m=void 0!==
m&&m!==b.voidOperation?m:null}):z.reduce((m,E)=>{m=l(m,E);return m=void 0!==m&&m!==b.voidOperation?m:null},a[2])})},h.functions.map=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);z=a[1].createFunction(e);B=C(a[0],e,r);a=[];for(const l of B)B=z(l),void 0!==B&&B!==b.voidOperation?a.push(B):a.push(null);return a})},h.functions.filter=function(e,r){return h.standardFunction(e,r,(z,B,a)=>{b.pcCheck(a,2,2,e,r);z=a[1].createFunction(e);a=C(a[0],e,r);B=[];for(const l of a)!0===
z(l)&&B.push(l);return B})});"async"===h.mode&&(h.functions.sort=function(e,r){return h.standardFunctionAsync(e,r,(z,B,a)=>x(e,r,a,!0))},h.functions.any=function(e,r){return h.standardFunctionAsync(e,r,function(){var z=K._asyncToGenerator(function*(B,a,l){b.pcCheck(l,2,2,e,r);B=l[1].createFunction(e);l=C(l[0],e,r);for(const m of l)if(l=yield B(m),a=null,a=g.isPromiseLike(a)?yield l:l,b.isBoolean(a)&&!0===a)return!0;return!1});return function(B,a,l){return z.apply(this,arguments)}}())},h.functions.all=
function(e,r){return h.standardFunctionAsync(e,r,function(){var z=K._asyncToGenerator(function*(B,a,l){b.pcCheck(l,2,2,e,r);B=l[1].createFunction(e);l=C(l[0],e,r);for(const m of l)if(l=yield B(m),a=null,a=g.isPromiseLike(a)?yield l:l,!0!==a)return!1;return!0});return function(B,a,l){return z.apply(this,arguments)}}())},h.functions.none=function(e,r){return h.standardFunctionAsync(e,r,function(){var z=K._asyncToGenerator(function*(B,a,l){b.pcCheck(l,2,2,e,r);B=l[1].createFunction(e);l=C(l[0],e,r);
for(const m of l)if(l=yield B(m),a=null,a=g.isPromiseLike(a)?yield l:l,!0===a)return!1;return!0});return function(B,a,l){return z.apply(this,arguments)}}())},h.functions.filter=function(e,r){return h.standardFunctionAsync(e,r,function(){var z=K._asyncToGenerator(function*(B,a,l){b.pcCheck(l,2,2,e,r);B=l[1].createFunction(e);a=C(l[0],e,r);l=[];for(const m of a){a=yield B(m);let E=null;E=g.isPromiseLike(E)?yield a:a;!0===E&&l.push(m)}return l});return function(B,a,l){return z.apply(this,arguments)}}())},
h.functions.reduce=function(e,r){return h.standardFunctionAsync(e,r,(z,B,a)=>{b.pcCheck(a,2,3,e,r);const l=a[1].createFunction(e);z=C(a[0],e,r);B=null;if(2<a.length)a=b.defaultUndefined(a[2],null),B=z.reduce(function(){var m=K._asyncToGenerator(function*(E,f){E=yield E;if(void 0===E||E===b.voidOperation)E=null;return l(E,f)});return function(E,f){return m.apply(this,arguments)}}(),Promise.resolve(a));else{if(0===z.length)return null;B=z.reduce(function(){var m=K._asyncToGenerator(function*(E,f,H){if(1>=
H)return l(E,f);E=yield E;if(void 0===E||E===b.voidOperation)E=null;return l(E,f)});return function(E,f,H){return m.apply(this,arguments)}}())}return B.then(m=>void 0!==m&&m!==b.voidOperation?m:null)})},h.functions.map=function(e,r){return h.standardFunctionAsync(e,r,function(){var z=K._asyncToGenerator(function*(B,a,l){b.pcCheck(l,2,2,e,r);B=l[1].createFunction(e);a=C(l[0],e,r);l=[];for(const m of a){a=yield B(m);let E=null;E=g.isPromiseLike(E)?yield a:a;void 0!==E&&E!==b.voidOperation?l.push(E):
l.push(null)}return l});return function(B,a,l){return z.apply(this,arguments)}}())})}const D=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:A},Symbol.toStringTag,{value:"Module"}));t.ArrayFunctions=D;t.registerFunctions=A})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../../chunks/languageUtils ../executionError ../../intl/locale ../../chunks/datetime".split(" "),function(t,K,q,y,b,g){function A(v){return null===v?v:!1===v.isValid?null:v}function D(v,
n){return""===v||"default"===v.toLowerCase().trim()?q.defaultTimeZone(n):v}const h=[0,31,59,90,120,151,181,212,243,273,304,334],C=[0,31,60,91,121,152,182,213,244,274,305,335];t.registerFunctions=function(v,n){v.today=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,0,0,k,d);c=new Date;c.setHours(0,0,0,0);return K.ArcadeDate.dateJSAndZoneToArcadeDate(c,q.defaultTimeZone(k))})};v.changetimezone=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,2,2,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));if(null===
c)return null;e=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,D(q.toString(e[1]),k));return!1===e.isValid?null:e})};v.timezone=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,2,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));if(null===c)return null;c=c.timeZone;return"system"===c?K.ArcadeDate.systemTimeZoneCanonicalName:c})};v.timezoneoffset=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?null:c.timeZoneOffset})};v.now=function(k,d){return n(k,
d,(c,x,e)=>{q.pcCheck(e,0,0,k,d);c=K.ArcadeDate.nowToArcadeDate(q.defaultTimeZone(k));return!1===c.isValid?null:c})};v.timestamp=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,0,0,k,d);c=K.ArcadeDate.nowUTCToArcadeDate();return!1===c.isValid?null:c})};v.toutc=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?null:c.toUTC()})};v.tolocal=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===
c?null:c.toLocal()})};v.day=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.day})};v.month=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.monthJS})};v.year=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.year})};v.hour=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],
q.defaultTimeZone(k));return null===c?NaN:c.hour})};v.second=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.second})};v.millisecond=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.millisecond})};v.minute=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.minute})};v.week=function(k,d){return n(k,
d,(c,x,e)=>{q.pcCheck(e,1,2,k,d);x=q.toDate(e[0],q.defaultTimeZone(k));if(null===x)return NaN;e=q.toNumber(q.defaultUndefined(e[1],0));if(0>e||6<e)throw new y.ArcadeExecutionError(k,y.ExecutionErrorCodes.InvalidParameter,d);c=x.dayOfWeekJS;var r=x.year;x=x.day+(0!==r%4||0===r%100&&0!==r%400?h:C)[x.monthJS]-1;r=Math.floor(x/7);return c-e+(0>c-e?7:0)<x-7*r?r+1:r})};v.weekday=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.dayOfWeekJS})};
v.isoweekday=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.dayOfWeekISO})};v.isomonth=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.monthISO})};v.isoweek=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));return null===c?NaN:c.weekISO})};v.isoyear=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,1,1,k,d);c=q.toDate(e[0],
q.defaultTimeZone(k));return null===c?NaN:c.yearISO})};v.date=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,0,8,k,d);if(3===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),0,0,0,0,q.defaultTimeZone(k)));if(4===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),q.toNumber(e[3]),0,0,0,q.defaultTimeZone(k)));if(5===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),q.toNumber(e[3]),
q.toNumber(e[4]),0,0,q.defaultTimeZone(k)));if(6===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),q.toNumber(e[3]),q.toNumber(e[4]),q.toNumber(e[5]),0,q.defaultTimeZone(k)));if(7===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),q.toNumber(e[3]),q.toNumber(e[4]),q.toNumber(e[5]),q.toNumber(e[6]),q.defaultTimeZone(k)));if(8===e.length)return A(K.ArcadeDate.fromParts(q.toNumber(e[0]),q.toNumber(e[1])+1,q.toNumber(e[2]),
q.toNumber(e[3]),q.toNumber(e[4]),q.toNumber(e[5]),q.toNumber(e[6]),D(q.toString(e[7]),k)));if(2===e.length){c=q.toString(e[1]);if(""===c)return null;c=q.standardiseDateFormat(c);e="X"===c?g.DateTime.fromSeconds(q.toNumber(e[0])):"x"===c?g.DateTime.fromMillis(q.toNumber(e[0])):g.DateTime.fromFormat(q.toString(e[0]),c,{locale:b.getLocale(),numberingSystem:"latn"});return e.isValid?K.ArcadeDate.dateTimeToArcadeDate(e):null}if(1===e.length){if(q.isString(e[0])){if(""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(e[0]))return q.toDate(e[0]+"-01-01",q.defaultTimeZone(k))}c=q.toNumber(e[0]);return!1===isNaN(c)?(e=g.DateTime.fromMillis(c),e.isValid?K.ArcadeDate.dateTimeAndZoneToArcadeDate(e,q.defaultTimeZone(k)):null):q.toDate(e[0],q.defaultTimeZone(k))}return 0===e.length?K.ArcadeDate.nowToArcadeDate(q.defaultTimeZone(k)):null})};v.datediff=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,2,4,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));x=q.toDate(e[1],q.defaultTimeZone(k));
if(null===c||null===x)return NaN;let r=q.defaultUndefined(e[3],"");""!==r&&null!==r?(r=q.toString(r),c=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,r),x=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(x,r)):c.timeZone!==x.timeZone&&(c.isUnknownTimeZone?c=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(c,x.timeZone):x=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(x,c.timeZone));switch(q.toString(e[2]).toLowerCase()){case "days":case "day":case "d":return c.diff(x,"days");case "months":case "month":return c.diff(x,
"months");case "minutes":case "minute":case "m":return"M"===e[2]?c.diff(x,"months"):c.diff(x,"minutes");case "seconds":case "second":case "s":return c.diff(x,"seconds");case "milliseconds":case "millisecond":case "ms":return c.diff(x);case "hours":case "hour":case "h":return c.diff(x,"hours");case "years":case "year":case "y":return c.diff(x,"years");default:return c.diff(x)}})};v.dateadd=function(k,d){return n(k,d,(c,x,e)=>{q.pcCheck(e,2,3,k,d);c=q.toDate(e[0],q.defaultTimeZone(k));if(null===c)return null;
x=q.toNumber(e[1]);if(isNaN(x))return c;let r="milliseconds";switch(q.toString(e[2]).toLowerCase()){case "days":case "day":case "d":r="days";x=q.absRound(x);break;case "months":case "month":r="months";x=q.absRound(x);break;case "minutes":case "minute":case "m":r="M"===e[2]?"months":"minutes";break;case "seconds":case "second":case "s":r="seconds";break;case "milliseconds":case "millisecond":case "ms":r="milliseconds";break;case "hours":case "hour":case "h":r="hours";break;case "years":case "year":case "y":r=
"years"}return c.plus({[r]:x})})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../Feature ../ImmutablePointArray ../../chunks/languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../executionError ../ImmutablePathArray ../../geometry/support/coordsUtils".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d,c,x){function e(B){return B&&"esri.arcade.Feature"===B.arcadeDeclaredClass}function r(B,a,l,m,E=1){a=a.toLowerCase();switch(a){case "hasz":return B=B.hasZ,void 0===B?!1:B;case "hasm":return B=B.hasM,void 0===B?!1:B;case "spatialreference":return a=B.spatialReference._arcadeCacheId,void 0===a&&(l=!0,Object.freeze&&Object.isFrozen(B.spatialReference)&&(l=!1),l&&(z++,a=B.spatialReference._arcadeCacheId=z)),B=new K({wkt:B.spatialReference.wkt,wkid:B.spatialReference.wkid}),
void 0!==a&&(B._arcadeCacheId="SPREF"+a.toString()),B}switch(B.type){case "extent":switch(a){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return B=B[a],void 0!==B?B:null;case "type":return"Extent"}break;case "polygon":switch(a){case "rings":return a=B.cache._arcadeCacheId,void 0===a&&(z++,a=z,B.cache._arcadeCacheId=a),new c(B.rings,B.spatialReference,!0===B.hasZ,!0===B.hasM,a);case "type":return"Polygon"}break;case "point":switch(a){case "x":case "y":case "z":case "m":return void 0!==
B[a]?B[a]:null;case "type":return"Point"}break;case "polyline":switch(a){case "paths":return a=B.cache._arcadeCacheId,void 0===a&&(z++,a=z,B.cache._arcadeCacheId=a),new c(B.paths,B.spatialReference,!0===B.hasZ,!0===B.hasM,a);case "type":return"Polyline"}break;case "multipoint":switch(a){case "points":return a=B.cache._arcadeCacheId,void 0===a&&(z++,a=z,B.cache._arcadeCacheId=a),new y(B.points,B.spatialReference,!0===B.hasZ,!0===B.hasM,a,1);case "type":return"Multipoint"}}if(1===E)throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.InvalidIdentifier,m);return 2===E?{keystate:"notfound"}:null}let z=0;t.geometryMember=r;t.registerFunctions=function(B,a){B.ringisclockwise=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=[];let ha=f=!1;if(null===H[0])return!1;if(b.isArray(H[0])){for(const aa of H[0])if(aa instanceof h)E.push(aa.hasZ?aa.hasM?[aa.x,aa.y,aa.z,aa.m]:[aa.x,aa.y,aa.z]:[aa.x,aa.y]);else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);0<E.length&&(f=H[0][0].hasZ,
ha=H[0][0].hasM)}else if(H[0]instanceof y)E=H[0]._elements,0<E.length&&(f=H[0]._hasZ,ha=H[0]._hasM);else if(b.isImmutableArray(H[0])){for(const aa of H[0].toArray())if(aa instanceof h)E.push(aa.hasZ?aa.hasM?[aa.x,aa.y,aa.z,aa.m]:[aa.x,aa.y,aa.z]:[aa.x,aa.y]);else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);0<E.length&&(f=H[0].get(0).hasZ,ha=H[0].get(0).hasM)}else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);return 3>E.length?!1:x.isClockwise(E,
ha,f)})};B.polygon=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=null;if(H[0]instanceof K){if(E=b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference),!1===E instanceof C)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);}else E=H[0]instanceof C?k.fromJSON(H[0].toJSON()):b.fixSpatialReference(new C(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.polyline=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=null;if(H[0]instanceof K){if(E=b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference),!1===E instanceof v)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);}else E=H[0]instanceof v?k.fromJSON(H[0].toJSON()):b.fixSpatialReference(new v(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.point=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=null;if(H[0]instanceof K){if(E=b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference),!1===E instanceof h)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);}else E=H[0]instanceof h?k.fromJSON(H[0].toJSON()):b.fixSpatialReference(new h(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.multipoint=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=null;if(H[0]instanceof K){if(E=b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference),!1===E instanceof D)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);}else E=H[0]instanceof D?k.fromJSON(H[0].toJSON()):b.fixSpatialReference(new D(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.extent=function(l,m){return a(l,m,(E,f,H)=>{H=b.autoCastFeatureToGeometry(H);b.pcCheck(H,1,1,l,m);E=null;H[0]instanceof K?E=b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference):H[0]instanceof h?(E={xmin:H[0].x,ymin:H[0].y,xmax:H[0].x,ymax:H[0].y,spatialReference:H[0].spatialReference.toJSON()},H=H[0],H.hasZ?(E.zmin=H.z,E.zmax=H.z):H.hasM&&(E.mmin=H.m,E.mmax=H.m),E=k.fromJSON(E)):E=H[0]instanceof
C?k.fromJSON(H[0].extent?.toJSON()):H[0]instanceof v?k.fromJSON(H[0].extent?.toJSON()):H[0]instanceof D?k.fromJSON(H[0].extent?.toJSON()):H[0]instanceof g?k.fromJSON(H[0].toJSON()):b.fixSpatialReference(new g(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.geometry=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,1,1,l,m);E=null;if(null===
H[0])return null;E=e(H[0])?b.fixSpatialReference(H[0].geometry(),l.spatialReference):H[0]instanceof K?b.fixSpatialReference(q.parseGeometryFromDictionary(H[0]),l.spatialReference):b.fixSpatialReference(k.fromJSON(JSON.parse(H[0])),l.spatialReference);if(null!==E&&!1===E.spatialReference.equals(l.spatialReference))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.WrongSpatialReference,m);return b.fixNullGeometry(E)})};B.setgeometry=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,2,2,l,m);if(e(H[0])){if(!0===
H[0].immutable)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.Immutable,m);if(H[1]instanceof A||null===H[1])H[0]._geometry=H[1];else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);}else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);return b.voidOperation})};B.feature=function(l,m){return a(l,m,(E,f,H)=>{if(0===H.length)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,m);E=null;if(1===H.length)if(b.isString(H[0]))E=
q.fromJson(JSON.parse(H[0]),l.timeReference);else if(e(H[0]))E=q.createFromArcadeFeature(H[0]);else if(H[0]instanceof A)E=q.createFromGraphicLikeObject(H[0],null,null,l.timeReference);else if(H[0]instanceof K)E=H[0].hasField("geometry")?H[0].field("geometry"):null,H=H[0].hasField("attributes")?H[0].field("attributes"):null,null!==E&&E instanceof K&&(E=q.parseGeometryFromDictionary(E)),null!==H&&(H=q.parseAttributesFromDictionary(H)),E=q.createFromGraphicLikeObject(E,H,null,l.timeReference);else throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.InvalidParameter,m);else if(2===H.length){f=E=null;if(null!==H[0])if(H[0]instanceof A)E=H[0];else if(E instanceof K)E=q.parseGeometryFromDictionary(H[0]);else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);if(null!==H[1])if(H[1]instanceof K)f=q.parseAttributesFromDictionary(H[1]);else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);E=q.createFromGraphicLikeObject(E,f,null,l.timeReference)}else{E=null;f={};if(null!==H[0])if(H[0]instanceof
A)E=H[0];else if(E instanceof K)E=q.parseGeometryFromDictionary(H[0]);else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);for(let ha=1;ha<H.length;ha+=2){const aa=b.toString(H[ha]),ea=H[ha+1];if(null===ea||void 0===ea||b.isString(ea)||isNaN(ea)||b.isDate(ea)||b.isNumber(ea)||b.isBoolean(ea)){if(b.isFunctionParameter(ea)||!1===b.isSimpleType(ea))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);f[aa]=ea===b.voidOperation?null:ea}else throw new d.ArcadeExecutionError(l,
d.ExecutionErrorCodes.InvalidParameter,m);}E=q.createFromGraphicLikeObject(E,f,null,l.timeReference)}E._geometry=b.fixSpatialReference(E.geometry(),l.spatialReference);E.immutable=!1;return E})};B.dictionary=function(l,m){return a(l,m,(E,f,H)=>{if(0===H.length)return H=new K,H.immutable=!1,H;if(1===H.length&&b.isString(H[0]))try{var ha=JSON.parse(H[0]),aa=K.convertObjectToArcadeDictionary(ha,b.defaultTimeZone(l),!1);aa.immutable=!1;return aa}catch(ea){throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,
m);}if(0!==H.length%2)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,m);E={};for(f=0;f<H.length;f+=2)if(ha=b.toString(H[f]),aa=H[f+1],null===aa||void 0===aa||b.isString(aa)||isNaN(aa)||b.isDate(aa)||b.isNumber(aa)||b.isBoolean(aa)||b.isArray(aa)||b.isImmutableArray(aa)){if(b.isFunctionParameter(aa))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);E[ha]=aa===b.voidOperation?null:aa}else throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,
m);H=new K(E);H.immutable=!1;return H})};B.haskey=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,2,2,l,m);E=b.toString(H[1]);if(e(H[0])||H[0]instanceof K)return H[0].hasField(E);if(H[0]instanceof A)return(H=r(H[0],E,null,null,2))&&"notfound"===H.keystate?!1:!0;throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);})};B.hasvalue=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,2,2,l,m);if(null===H[0]||null===H[1])return!1;E=b.toString(H[1]);return b.isFeature(H[0])||H[0]instanceof
K?H[0].hasField(E)&&null!==H[0].field(E)?!0:!1:H[0]instanceof A?null===r(H[0],E,null,null,0)?!1:!0:!1})};B.indexof=function(l,m){return a(l,m,(E,f,H)=>{b.pcCheck(H,2,2,l,m);E=H[1];if(b.isArray(H[0])){for(f=0;f<H[0].length;f++)if(b.equalityTest(E,H[0][f]))return f;return-1}if(b.isImmutableArray(H[0])){f=H[0].length();for(let ha=0;ha<f;ha++)if(b.equalityTest(E,H[0].get(ha)))return ha;return-1}throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);})};B.angle=function(l,m){return a(l,
m,(E,f,H)=>{H=b.autoCastFeatureToGeometry(H);b.pcCheck(H,2,3,l,m);if(!(H[0]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);if(!(H[1]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);if(2<H.length&&!(H[2]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);return 2===H.length?n.angle2D(H[0],H[1]):n.angleBetween2D(H[0],H[1],H[2])})};B.bearing=function(l,m){return a(l,m,(E,f,H)=>
{H=b.autoCastFeatureToGeometry(H);b.pcCheck(H,2,3,l,m);if(!(H[0]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);if(!(H[1]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);if(2<H.length&&!(H[2]instanceof h))throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidParameter,m);return 2===H.length?n.bearing2D(H[0],H[1]):n.bearingBetween2D(H[0],H[1],H[2])})};B.isselfintersecting=function(l,m){return a(l,m,(E,f,
H)=>{H=b.autoCastFeatureToGeometry(H);b.pcCheck(H,1,1,l,m);E=H[0];if(E instanceof C)return E.isSelfIntersecting;if(E instanceof v)return E=E.paths,n.pathsSelfIntersecting(E);if(E instanceof D)for(f=E.points,H=0;H<f.length;H++)for(let ha=0;ha<f.length;ha++)if(ha!==H){let aa=!0;for(let ea=0;ea<f[H].length;ea++)if(f[H][ea]!==f[ha][ea]){aa=!1;break}if(!0===aa)return!0}return b.isArray(E)||b.isImmutableArray(E)?(E=b.autoCastArrayOfPointsToPolyline(E,l.spatialReference),null!==E&&(E=E.paths),n.pathsSelfIntersecting(E)):
!1})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../geometry/Point","../../geometry/support/intersectsBase"],function(t,K,q){function y(n,k,d){const c={x:0,y:0};k&&(c.z=0);d&&(c.m=0);let x=0;var e=n[0];for(let l=0;l<n.length;l++){const m=n[l];a:if(m.length!==e.length)var r=!1;else{for(r=0;r<m.length;r++)if(m[r]!==e[r]){r=!1;break a}r=!0}if(!1===r){r=b(e,m,k);var z=m,B=k,a=d;const E={x:(e[0]+z[0])/2,y:(e[1]+z[1])/
2};B&&(E.z=(e[2]+z[2])/2);B&&a?E.m=(e[3]+z[3])/2:a&&(E.m=(e[2]+z[2])/2);e=E;e.x*=r;e.y*=r;c.x+=e.x;c.y+=e.y;k&&(e.z*=r,c.z+=e.z);d&&(e.m*=r,c.m+=e.m);x+=r;e=m}}0<x?(c.x/=x,c.y/=x,k&&(c.z/=x),d&&(c.m/=x)):(c.x=n[0][0],c.y=n[0][1],k&&(c.z=n[0][2]),d&&k?c.m=n[0][3]:d&&(c.m=n[0][2]));return c}function b(n,k,d){const c=k[0]-n[0];n=k[1]-n[1];return d?(k=k[2]-k[2],Math.sqrt(c*c+n*n+k*k)):Math.sqrt(c*c+n*n)}function g(n,k,d=0){for(;n<d;)n+=k;for(d+=k;n>=d;)n-=k;return n}function A(n,k){return Math.atan2(k.y-
n.y,k.x-n.x)}function D(n,k,d){var c=n.x-k.x;n=n.y-k.y;var x=d.x-k.x;k=d.y-k.y;return Math.atan2(c*k-x*n,c*x+n*k)}const h=[];for(const n of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const k=n[0];for(let d=1;d<n.length;d++)h[n[d]]=k}const C=[];C[9002]=.3048;C[9003]=.3048006096012192;C[9095]=.3048007491;const v=[0,0];t.angle2D=function(n,k){return g(A(n,k),2*Math.PI)*(180/Math.PI)};t.angleBetween2D=function(n,k,d){return g(D(n,k,d),2*Math.PI)*(180/Math.PI)};
t.angleBetweenRad=D;t.angleRad=A;t.bearing2D=function(n,k){return g(Math.PI/2-A(n,k),2*Math.PI)*(180/Math.PI)};t.bearingBetween2D=function(n,k,d){return g(-1*D(n,k,d),2*Math.PI)*(180/Math.PI)};t.centroidMultiPoint=function(n){if(0===n.points.length)return null;var k=0;let d=0,c=0,x=0;for(let e=0;e<n.points.length;e++){const r=n.getPoint(e);!0===r.hasZ&&(c+=r.z);!0===r.hasM&&(x+=r.m);k+=r.x;d+=r.y;x+=r.m}k={x:k/n.points.length,y:d/n.points.length,spatialReference:null};k.spatialReference=n.spatialReference.toJSON();
!0===n.hasZ&&(k.z=c/n.points.length);!0===n.hasM&&(k.m=x/n.points.length);return new K(k)};t.centroidPolyline=function(n){const k={x:0,y:0,spatialReference:n.spatialReference.toJSON()},d={x:0,y:0,spatialReference:n.spatialReference.toJSON()};let c=0,x=0;for(let z=0;z<n.paths.length;z++)if(0!==n.paths[z].length){a:{var e=n.paths[z];var r=!0===n.hasZ;if(1>=e.length){e=0;break a}let B=0;for(let a=1;a<e.length;a++)B+=b(e[a-1],e[a],r);e=B}0===e?(e=y(n.paths[z],!0===n.hasZ,!0===n.hasM),k.x+=e.x,k.y+=e.y,
!0===n.hasZ&&(k.z+=e.z),!0===n.hasM&&(k.m+=e.m),++c):(r=y(n.paths[z],!0===n.hasZ,!0===n.hasM),d.x+=r.x*e,d.y+=r.y*e,!0===n.hasZ&&(d.z+=r.z*e),!0===n.hasM&&(d.m+=r.m*e),x+=e)}return 0<x?(d.x/=x,d.y/=x,!0===n.hasZ&&(d.z/=x),!0===n.hasM&&(d.m/=x),new K(d)):0<c?(k.x/=c,k.y/=c,!0===n.hasZ&&(d.z/=c),!0===n.hasM&&(k.m/=c),new K(k)):null};t.getMetersPerVerticalUnitForSR=function(n){return n.vcsWkid&&void 0!==h[n.vcsWkid]?C[h[n.vcsWkid]]:n.latestVcsWkid&&void 0!==h[n.latestVcsWkid]?C[h[n.latestVcsWkid]]:1};
t.pathsSelfIntersecting=function(n){for(let B=0;B<n.length;B++){const a=n[B];for(var k=0;k<a.length-1;k++){var d=a[k],c=a[k+1];for(var x=B+1;x<n.length;x++)for(var e=0;e<n[x].length-1;e++){var r=n[x][e],z=n[x][e+1];if(q.segmentIntersects(d,c,r,z,v)&&!(v[0]===d[0]&&v[1]===d[1]||v[0]===r[0]&&v[1]===r[1]||v[0]===c[0]&&v[1]===c[1]||v[0]===z[0]&&v[1]===z[1]))return!0}}k=a.length;if(!(3>k))for(d=0;d<=k-2;d++)for(c=a[d],x=a[d+1],e=d+2;e<=k-2;e++)if(r=a[e],z=a[e+1],q.segmentIntersects(c,x,r,z,v)&&!(v[0]===
c[0]&&v[1]===c[1]||v[0]===r[0]&&v[1]===r[1]||v[0]===x[0]&&v[1]===x[1]||v[0]===z[0]&&v[1]===z[1]))return!0}return!1};t.segmentLength3d=function(n,k,d){return Math.sqrt((n[0]-k[0])**2+(n[1]-k[1])**2+(void 0!==n[2]&&void 0!==k[2]?(n[2]*d-k[2]*d)**2:0))};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../kernel ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils ../executionError ../../core/unitUtils".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d){function c(r){return 0===K.version.indexOf("4.")?C.fromExtent(r):new C({spatialReference:r.spatialReference,rings:[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]})}function x(r,z){if("polygon"!==r.type&&"polyline"!==r.type&&"extent"!==r.type)return 0;var B=1;if(r.spatialReference.vcsWkid||r.spatialReference.latestVcsWkid){B=b.getMetersPerVerticalUnitForSR(r.spatialReference);var a=d.getMetersPerUnitForSR(r.spatialReference);
B/=a}a=0;if("polyline"===r.type)for(var l of r.paths)for(var m=1;m<l.length;m++)a+=b.segmentLength3d(l[m],l[m-1],B);else if("polygon"===r.type)for(m of r.rings){for(l=1;l<m.length;l++)a+=b.segmentLength3d(m[l],m[l-1],B);if(m[0][0]!==m[m.length-1][0]||m[0][1]!==m[m.length-1][1]||void 0!==m[0][2]&&m[0][2]!==m[m.length-1][2])a+=b.segmentLength3d(m[0],m[m.length-1],B)}else"extent"===r.type&&(a+=2*b.segmentLength3d([r.xmin,r.ymin,0],[r.xmax,r.ymin,0],B),a+=2*b.segmentLength3d([r.xmin,r.ymin,0],[r.xmin,
r.ymax,0],B),a=2*a+4*Math.abs(y.defaultUndefined(r.zmax,0)*B-y.defaultUndefined(r.zmin,0)*B));r=new v({hasZ:!1,hasM:!1,spatialReference:r.spatialReference,paths:[[0,0],[0,a]]});return e.planarLength(r,z)}let e=null;t.registerFunctions=function(r,z){function B(a,l,m){y.pcCheck(m,2,2,a,l);if(!(m[0]instanceof A&&m[1]instanceof A||m[0]instanceof A&&null===m[1]||m[1]instanceof A&&null===m[0]||null===m[0]&&null===m[1]))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);}r.disjoint=
function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!0:e.disjoint(f[0],f[1])})};r.intersects=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!1:e.intersects(f[0],f[1])})};r.touches=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!1:e.touches(f[0],f[1])})};r.crosses=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);
B(a,l,f);return null===f[0]||null===f[1]?!1:e.crosses(f[0],f[1])})};r.within=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!1:e.within(f[0],f[1])})};r.contains=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!1:e.contains(f[0],f[1])})};r.overlaps=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?!1:e.overlaps(f[0],
f[1])})};r.equals=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,2,2,a,l);return f[0]===f[1]?!0:f[0]instanceof A&&f[1]instanceof A?e.equals(f[0],f[1]):y.isDate(f[0])&&y.isDate(f[1])?f[0].equals(f[1]):!1})};r.relate=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,3,3,a,l);if(f[0]instanceof A&&f[1]instanceof A)return e.relate(f[0],f[1],y.toString(f[2]));if(f[0]instanceof A&&null===f[1]||f[1]instanceof A&&null===f[0]||null===f[0]&&null===f[1])return!1;throw new k.ArcadeExecutionError(a,
k.ExecutionErrorCodes.InvalidParameter,l);})};r.intersection=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===f[0]||null===f[1]?null:e.intersect(f[0],f[1])})};r.union=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);m=[];if(0===f.length)throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.WrongNumberOfParameters,l);if(1===f.length)if(y.isArray(f[0]))for(f=y.autoCastFeatureToGeometry(f[0]),E=0;E<f.length;E++){if(null!==f[E]){if(!(f[E]instanceof
A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m.push(f[E])}}else if(y.isImmutableArray(f[0]))for(f=y.autoCastFeatureToGeometry(f[0].toArray()),E=0;E<f.length;E++){if(null!==f[E]){if(!(f[E]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m.push(f[E])}}else{if(f[0]instanceof A)return y.fixSpatialReference(q.cloneGeometry(f[0]),a.spatialReference);if(null===f[0])return null;throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,
l);}else for(E=0;E<f.length;E++)if(null!==f[E]){if(!(f[E]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m.push(f[E])}return 0===m.length?null:e.union(m)})};r.difference=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null!==f[0]&&null===f[1]?q.cloneGeometry(f[0]):null===f[0]?null:e.difference(f[0],f[1])})};r.symmetricdifference=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);B(a,l,f);return null===
f[0]&&null===f[1]?null:null===f[0]?q.cloneGeometry(f[1]):null===f[1]?q.cloneGeometry(f[0]):e.symmetricDifference(f[0],f[1])})};r.clip=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,2,a,l);if(!(f[1]instanceof g)&&null!==f[1])throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return null===f[1]?null:e.clip(f[0],
f[1])})};r.cut=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,2,a,l);if(!(f[1]instanceof v)&&null!==f[1])throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(null===f[0])return[];if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return null===f[1]?[q.cloneGeometry(f[0])]:e.cut(f[0],f[1])})};r.area=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,1,2,a,l);f=y.autoCastFeatureToGeometry(f);
if(null===f[0])return 0;if(y.isArray(f[0])||y.isImmutableArray(f[0]))return m=y.autoCastArrayOfPointsToPolygon(f[0],a.spatialReference),null===m?0:e.planarArea(m,q.convertSquareUnitsToCode(y.defaultUndefined(f[1],-1)));if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.planarArea(f[0],q.convertSquareUnitsToCode(y.defaultUndefined(f[1],-1)))})};r.areageodetic=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,1,2,a,l);f=y.autoCastFeatureToGeometry(f);
if(null===f[0])return 0;if(y.isArray(f[0])||y.isImmutableArray(f[0]))return m=y.autoCastArrayOfPointsToPolygon(f[0],a.spatialReference),null===m?0:e.geodesicArea(m,q.convertSquareUnitsToCode(y.defaultUndefined(f[1],-1)));if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.geodesicArea(f[0],q.convertSquareUnitsToCode(y.defaultUndefined(f[1],-1)))})};r.length=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,1,2,a,l);f=y.autoCastFeatureToGeometry(f);
if(null===f[0])return 0;if(y.isArray(f[0])||y.isImmutableArray(f[0]))return m=y.autoCastArrayOfPointsToPolyline(f[0],a.spatialReference),null===m?0:e.planarLength(m,q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1)));if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.planarLength(f[0],q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1)))})};r.length3d=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,1,2,a,l);f=y.autoCastFeatureToGeometry(f);
if(null===f[0])return 0;if(y.isArray(f[0])||y.isImmutableArray(f[0]))return m=y.autoCastArrayOfPointsToPolyline(f[0],a.spatialReference),null===m?0:!0===m.hasZ?x(m,q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1))):e.planarLength(m,q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1)));if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return!0===f[0].hasZ?x(f[0],q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1))):e.planarLength(f[0],q.convertLinearUnitsToCode(y.defaultUndefined(f[1],
-1)))})};r.lengthgeodetic=function(a,l){return z(a,l,(m,E,f)=>{y.pcCheck(f,1,2,a,l);f=y.autoCastFeatureToGeometry(f);if(null===f[0])return 0;if(y.isArray(f[0])||y.isImmutableArray(f[0]))return m=y.autoCastArrayOfPointsToPolyline(f[0],a.spatialReference),null===m?0:e.geodesicLength(m,q.convertLinearUnitsToCode(y.defaultUndefined(f[1],-1)));if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.geodesicLength(f[0],q.convertLinearUnitsToCode(y.defaultUndefined(f[1],
-1)))})};r.distance=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);m=f[0];if(y.isArray(f[0])||y.isImmutableArray(f[0]))m=y.autoCastArrayOfPointsToMultiPoint(f[0],a.spatialReference);E=f[1];if(y.isArray(f[1])||y.isImmutableArray(f[1]))E=y.autoCastArrayOfPointsToMultiPoint(f[1],a.spatialReference);if(!(m instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(!(E instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,
l);return e.distance(m,E,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1)))})};r.distancegeodetic=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);m=f[0];E=f[1];if(!(m instanceof h))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(!(E instanceof h))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);const H=new v({paths:[],spatialReference:m.spatialReference});H.addPath([m,E]);return e.geodesicLength(H,
q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1)))})};r.densify=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(0>=m)throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return f[0]instanceof
C||f[0]instanceof v?e.densify(f[0],m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1))):f[0]instanceof g?e.densify(c(f[0]),m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1))):f[0]})};r.densifygeodetic=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,
l);if(0>=m)throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return f[0]instanceof C||f[0]instanceof v?e.geodesicDensify(f[0],m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1))):f[0]instanceof g?e.geodesicDensify(c(f[0]),m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1))):f[0]})};r.generalize=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,4,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,
k.ExecutionErrorCodes.InvalidParameter,l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.generalize(f[0],m,y.toBoolean(y.defaultUndefined(f[2],!0)),q.convertLinearUnitsToCode(y.defaultUndefined(f[3],-1)))})};r.buffer=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,
l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return 0===m?q.cloneGeometry(f[0]):e.buffer(f[0],m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1)))})};r.buffergeodetic=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,3,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,
k.ExecutionErrorCodes.InvalidParameter,l);return 0===m?q.cloneGeometry(f[0]):e.geodesicBuffer(f[0],m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1)))})};r.offset=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,2,6,a,l);if(null===f[0])return null;if(!(f[0]instanceof C||f[0]instanceof v))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m=y.toNumber(f[1]);if(isNaN(m))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,
l);E=y.toNumber(y.defaultUndefined(f[4],10));if(isNaN(E))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);const H=y.toNumber(y.defaultUndefined(f[5],0));if(isNaN(H))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.offset(f[0],m,q.convertLinearUnitsToCode(y.defaultUndefined(f[2],-1)),y.toString(y.defaultUndefined(f[3],"round")).toLowerCase(),E,H)})};r.rotate=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,
2,3,a,l);m=f[0];if(null===m)return null;if(!(m instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);m instanceof g&&(m=C.fromExtent(m));E=y.toNumber(f[1]);if(isNaN(E))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);f=y.defaultUndefined(f[2],null);if(null===f)return e.rotate(m,E);if(f instanceof h)return e.rotate(m,E,f);throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);})};r.centroid=function(a,l){return z(a,
l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,1,1,a,l);if(null===f[0])return null;m=f[0];if(y.isArray(f[0])||y.isImmutableArray(f[0]))m=y.autoCastArrayOfPointsToMultiPoint(f[0],a.spatialReference);if(null===m)return null;if(!(m instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return m instanceof h?y.fixSpatialReference(q.cloneGeometry(f[0]),a.spatialReference):m instanceof C?m.centroid:m instanceof v?b.centroidPolyline(m):m instanceof D?b.centroidMultiPoint(m):
m instanceof g?m.center:null})};r.multiparttosinglepart=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,1,1,a,l);E=[];if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);if(f[0]instanceof h||f[0]instanceof g)return[y.fixSpatialReference(q.cloneGeometry(f[0]),a.spatialReference)];m=e.simplify(f[0]);if(m instanceof C){f=[];E=[];for(var H=0;H<m.rings.length;H++)if(m.isClockwise(m.rings[H])){const ha=
n.fromJSON({rings:[m.rings[H]],hasZ:!0===m.hasZ,hasM:!0===m.hasM,spatialReference:m.spatialReference.toJSON()});f.push(ha)}else E.push({ring:m.rings[H],pt:m.getPoint(H,0)});for(m=0;m<E.length;m++)for(H=0;H<f.length;H++)if(f[H].contains(E[m].pt)){f[H].addRing(E[m].ring);break}return f}if(m instanceof v){f=[];for(E=0;E<m.paths.length;E++)H=n.fromJSON({paths:[m.paths[E]],hasZ:!0===m.hasZ,hasM:!0===m.hasM,spatialReference:m.spatialReference.toJSON()}),f.push(H);return f}if(f[0]instanceof D){m=y.fixSpatialReference(q.cloneGeometry(f[0]),
a.spatialReference);for(f=0;f<m.points.length;f++)E.push(m.getPoint(f));return E}return null})};r.issimple=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,1,1,a,l);if(null===f[0])return!0;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.isSimple(f[0])})};r.simplify=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,1,1,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,
k.ExecutionErrorCodes.InvalidParameter,l);return e.simplify(f[0])})};r.convexhull=function(a,l){return z(a,l,(m,E,f)=>{f=y.autoCastFeatureToGeometry(f);y.pcCheck(f,1,1,a,l);if(null===f[0])return null;if(!(f[0]instanceof A))throw new k.ArcadeExecutionError(a,k.ExecutionErrorCodes.InvalidParameter,l);return e.convexHull(f[0])})}};t.setGeometryEngine=function(r){e=r};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],
function(t,K){t.cloneGeometry=function(q){if(null==q)return null;const y=q.clone();void 0!==q.cache._geVersion&&(y.cache._geVersion=q.cache._geVersion);return y};t.convertLinearUnitsToCode=function(q){if(null==q)return null;if("number"===typeof q)return q;q=q.toLowerCase();q=q.replace(/\s/g,"");q=q.replace(/-/g,"");switch(q){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};t.convertSquareUnitsToCode=function(q){if(null==q)return null;if("number"===typeof q)return q;q=q.toLowerCase();q=q.replace(/\s/g,"");q=q.replace(/-/g,"");switch(q){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;
case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
t.sameGeomType=function(q,y){return q===y||"point"===q&&"esriGeometryPoint"===y||"polyline"===q&&"esriGeometryPolyline"===y||"polygon"===q&&"esriGeometryPolygon"===y||"extent"===q&&"esriGeometryEnvelope"===y||"multipoint"===q&&"esriGeometryMultipoint"===y||"point"===y&&"esriGeometryPoint"===q||"polyline"===y&&"esriGeometryPolyline"===q||"polygon"===y&&"esriGeometryPolygon"===q||"extent"===y&&"esriGeometryEnvelope"===q||"multipoint"===y&&"esriGeometryMultipoint"===q?!0:!1};t.shapeExtent=function(q){if(null==
q)return null;switch(q.type){case "polygon":case "multipoint":case "polyline":return q.extent;case "point":return new K({xmin:q.x,ymin:q.y,xmax:q.x,ymax:q.y,spatialReference:q.spatialReference});case "extent":return q}return null};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(t,K,q){function y(b,g,A){if("undefined"===typeof A||0===+A)return Math[b](g);g=+g;A=+A;if(isNaN(g)||
"number"!==typeof A||0!==A%1)return NaN;g=g.toString().split("e");g=Math[b](+(g[0]+"e"+(g[1]?+g[1]-A:-A)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+A:A))}t.registerFunctions=function(b,g){function A(D,h,C){D=K.toNumber(D);return isNaN(D)?D:isNaN(h)||isNaN(C)||h>C?NaN:D<h?h:D>C?C:D}b.number=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,2,D,h);C=n[0];return K.isNumber(C)?C:null===C?0:K.isDate(C)?C.toNumber():K.isBoolean(C)?Number(C):K.isArray(C)?NaN:""===C||void 0===C?Number(C):K.isString(C)?
void 0!==n[1]?(n=K.multiReplace(n[1],"\u2030",""),n=K.multiReplace(n,"\u00a4",""),q.parse(C,{pattern:n})):Number(C.trim()):Number(C)})};b.abs=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.abs(K.toNumber(n[0]))})};b.acos=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.acos(K.toNumber(n[0]))})};b.asin=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.asin(K.toNumber(n[0]))})};b.atan=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,
1,D,h);return Math.atan(K.toNumber(n[0]))})};b.atan2=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,2,2,D,h);return Math.atan2(K.toNumber(n[0]),K.toNumber(n[1]))})};b.ceil=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,2,D,h);return 2===n.length?(C=K.toNumber(n[1]),isNaN(C)&&(C=0),y("ceil",K.toNumber(n[0]),-1*C)):Math.ceil(K.toNumber(n[0]))})};b.round=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,2,D,h);return 2===n.length?(C=K.toNumber(n[1]),isNaN(C)&&(C=0),y("round",K.toNumber(n[0]),
-1*C)):Math.round(K.toNumber(n[0]))})};b.floor=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,2,D,h);return 2===n.length?(C=K.toNumber(n[1]),isNaN(C)&&(C=0),y("floor",K.toNumber(n[0]),-1*C)):Math.floor(K.toNumber(n[0]))})};b.cos=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.cos(K.toNumber(n[0]))})};b.isnan=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return"number"===typeof n[0]&&isNaN(n[0])})};b.exp=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);
return Math.exp(K.toNumber(n[0]))})};b.log=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.log(K.toNumber(n[0]))})};b.pow=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,2,2,D,h);return K.toNumber(n[0])**K.toNumber(n[1])})};b.random=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,0,0,D,h);return Math.random()})};b.sin=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.sin(K.toNumber(n[0]))})};b.sqrt=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,
h);return Math.sqrt(K.toNumber(n[0]))})};b.tan=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return Math.tan(K.toNumber(n[0]))})};b.defaultvalue=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,2,2,D,h);return null===n[0]||""===n[0]||void 0===n[0]?n[1]:n[0]})};b.isempty=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return null===n[0]||""===n[0]||void 0===n[0]?!0:!1})};b["boolean"]=function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,1,1,D,h);return K.toBoolean(n[0])})};b.constrain=
function(D,h){return g(D,h,(C,v,n)=>{K.pcCheck(n,3,3,D,h);C=K.toNumber(n[1]);v=K.toNumber(n[2]);if(K.isArray(n[0])){var k=[];for(var d of n[0])k.push(A(d,C,v));return k}if(K.isImmutableArray(n[0])){d=[];for(k=0;k<n[0].length();k++)d.push(A(n[0].get(k),C,v));return d}return A(n[0],C,v)})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(t,K,q,y){function b(g,
A,D,h){if(1===h.length){if(q.isArray(h[0]))return y.calculateStat(g,h[0],-1);if(q.isImmutableArray(h[0]))return y.calculateStat(g,h[0].toArray(),-1)}return y.calculateStat(g,h,-1)}t.registerFunctions=function(g,A){g.stdev=function(D,h){return A(D,h,(C,v,n)=>b("stdev",C,v,n))};g.variance=function(D,h){return A(D,h,(C,v,n)=>b("variance",C,v,n))};g.average=function(D,h){return A(D,h,(C,v,n)=>b("mean",C,v,n))};g.mean=function(D,h){return A(D,h,(C,v,n)=>b("mean",C,v,n))};g.sum=function(D,h){return A(D,
h,(C,v,n)=>b("sum",C,v,n))};g.min=function(D,h){return A(D,h,(C,v,n)=>b("min",C,v,n))};g.max=function(D,h){return A(D,h,(C,v,n)=>b("max",C,v,n))};g.distinct=function(D,h){return A(D,h,(C,v,n)=>b("distinct",C,v,n))};g.count=function(D,h){return A(D,h,(C,v,n)=>{q.pcCheck(n,1,1,D,h);if(q.isArray(n[0])||q.isString(n[0]))return n[0].length;if(q.isImmutableArray(n[0]))return n[0].length();throw new K.ArcadeExecutionError(D,K.ExecutionErrorCodes.InvalidParameter,h);})}};Object.defineProperty(t,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(t,K){function q(b){let g=0;for(let A=0;A<b.length;A++)g+=b[A];return g/b.length}function y(b){const g=q(b);let A=0;for(let D=0;D<b.length;D++)A+=(g-b[D])**2;return A/b.length}t.calculateStat=function(b,g,A=1E3){switch(b.toLowerCase()){case "distinct":a:{b=[];const D={},h=[];for(let C=0;C<g.length;C++){if(void 0!==g[C]&&null!==g[C]&&g[C]!==K.voidOperation){const v=g[C];if(K.isNumber(v)||
K.isString(v))void 0===D[v]&&(b.push(v),D[v]=1);else{let n=!1;for(let k=0;k<h.length;k++)!0===K.equalityTest(h[k],v)&&(n=!0);!1===n&&(h.push(v),b.push(v))}}if(b.length>=A&&-1!==A){g=b;break a}}g=b}return g;case "avg":case "mean":return q(K.toNumberArray(g));case "min":return Math.min.apply(Math,K.toNumberArray(g));case "sum":g=K.toNumberArray(g);A=0;for(b=0;b<g.length;b++)A+=g[b];return A;case "max":return Math.max.apply(Math,K.toNumberArray(g));case "stdev":case "stddev":return Math.sqrt(y(K.toNumberArray(g)));
case "var":case "variance":return y(K.toNumberArray(g));case "count":return g.length}return 0};t.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../core/urlUtils".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d,c,x){function e(z,B){if(!z||!B)return z===B;if(z.x===B.x&&z.y===B.y){if(z.hasZ){if(z.z!==B.z)return!1}else if(B.hasZ)return!1;if(z.hasM){if(z.m!==B.m)return!1}else if(B.hasM)return!1;return!0}return!1}function r(z,B,a){if(null===z)B.updateUint8Array([0,139]);else if(g.isArray(z)){B.updateUint8Array([61]);if(a.map.has(z))z=a.map.get(z),B.updateIntArray([z^61237541]);else{a.map.set(z,a.currentLength++);for(var l of z)r(l,B,a);a.map.delete(z);a.currentLength--}B.updateUint8Array([199])}else if(g.isImmutableArray(z)){B.updateUint8Array([61]);
if(a.map.has(z))z=a.map.get(z),B.updateIntArray([z^61237541]);else{a.map.set(z,a.currentLength++);for(var m of z.toArray())r(m,B,a);a.map.delete(z);a.currentLength--}B.updateUint8Array([199])}else if(g.isDate(z))B.updateIntArray([z.toNumber()]),B.updateUint8Array([241]);else if(g.isString(z))B.updateIntArray([z.length]),B.updateWithString(z),B.updateUint8Array([41]);else if(g.isBoolean(z))B.updateUint8Array([!0===z?1:0,113]);else if(g.isNumber(z))B.updateFloatArray([z]),B.updateUint8Array([173]);
else{if(z instanceof q)throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);if(z instanceof K)throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);if(z instanceof y){B.updateUint8Array([223]);if(a.map.has(z))z=a.map.get(z),B.updateIntArray([z^61237541]);else{a.map.set(z,a.currentLength++);for(var E of z.keys())B.updateIntArray([E.length]),B.updateWithString(E),B.updateUint8Array([251]),l=z.field(E),r(l,B,a),B.updateUint8Array([239]);
a.map.delete(z);a.currentLength--}B.updateUint8Array([73])}else{if(g.isFeature(z))throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);if(z instanceof n)B.updateIntArray([3833836621]),B.updateIntArray([0]),B.updateFloatArray([z.x]),B.updateIntArray([1]),B.updateFloatArray([z.y]),z.hasZ&&(B.updateIntArray([2]),B.updateFloatArray([z.z])),z.hasM&&(B.updateIntArray([3]),B.updateFloatArray([z.m])),B.updateIntArray([3765347959]),r(z.spatialReference.wkid,B,a);else if(z instanceof
k){B.updateIntArray([1266616829]);for(E=0;E<z.rings.length;E++){m=z.rings[E];l=[];var f=null;let H=null;for(let ha=0;ha<m.length;ha++){const aa=z.getPoint(E,ha);if(0===ha)f=aa;else if(e(H,aa))continue;H=aa;ha===m.length-1&&e(f,aa)||l.push(aa)}B.updateIntArray([1397116793,l.length]);for(m=0;m<l.length;m++)f=l[m],B.updateIntArray([3962308117,m]),r(f,B,a),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([3878477243]);r(z.spatialReference.wkid,B,a)}else if(z instanceof d){B.updateIntArray([4106883559]);
for(E=0;E<z.paths.length;E++){l=z.paths[E];B.updateIntArray([1397116793,l.length]);for(m=0;m<l.length;m++)B.updateIntArray([3962308117,m]),r(z.getPoint(E,m),B,a),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([2568784753]);r(z.spatialReference.wkid,B,a)}else if(z instanceof v){B.updateIntArray([588535921,z.points.length]);for(E=0;E<z.points.length;E++)l=z.getPoint(E),B.updateIntArray([E]),r(l,B,a);B.updateIntArray([1700171621]);r(z.spatialReference.wkid,B,a)}else if(z instanceof
C)B.updateIntArray([3483648373]),B.updateIntArray([0]),B.updateFloatArray([z.xmax]),B.updateIntArray([1]),B.updateFloatArray([z.xmin]),B.updateIntArray([2]),B.updateFloatArray([z.ymax]),B.updateIntArray([3]),B.updateFloatArray([z.ymin]),z.hasZ&&(B.updateIntArray([4]),B.updateFloatArray([z.zmax]),B.updateIntArray([5]),B.updateFloatArray([z.zmin])),z.hasM&&(B.updateIntArray([6]),B.updateFloatArray([z.mmax]),B.updateIntArray([7]),B.updateFloatArray([z.mmin])),B.updateIntArray([3622027469]),r(z.spatialReference.wkid,
B,a);else if(z instanceof c)B.updateIntArray([14]),void 0!==z.wkid&&null!==z.wkid&&B.updateIntArray([z.wkid]),z.wkt&&B.updateWithString(z.wkt);else{if(g.isFunctionParameter(z))throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);if(g.isFeatureSet(z))throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);g.isFeatureSetCollection(z);throw new b.ArcadeExecutionError(a.context,b.ExecutionErrorCodes.UnsupportedHashType,a.node);
}}}}t.registerFunctions=function(z,B){z.portal=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);return new K(g.toString(f[0]))})};z.typeof=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);m=g.getType(f[0]);if("Unrecognised Type"===m)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.UnrecognisedType,l);return m})};z.trim=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);return g.toString(f[0]).trim()})};z.tohex=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,
l);m=g.toNumber(f[0]);return isNaN(m)?m:m.toString(16)})};z.upper=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);return g.toString(f[0]).toUpperCase()})};z.proper=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,2,a,l);m=1;2===f.length&&"firstword"===g.toString(f[1]).toLowerCase()&&(m=2);E=/\s/;f=g.toString(f[0]);let H="",ha=!0;for(let aa=0;aa<f.length;aa++){let ea=f[aa];E.test(ea)?1===m&&(ha=!0):ea.toUpperCase()!==ea.toLowerCase()&&(ha?(ea=ea.toUpperCase(),ha=!1):ea=ea.toLowerCase());
H+=ea}return H})};z.lower=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);return g.toString(f[0]).toLowerCase()})};z.guid=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,0,1,a,l);if(0<f.length)switch(g.toString(f[0]).toLowerCase()){case "digits":return g.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return g.generateUUID();case "digits-hyphen-parentheses":return"("+g.generateUUID()+")"}return"{"+g.generateUUID()+"}"})};z.standardizeguid=
function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,2,a,l);m=g.toString(f[0]);if(""===m||null===m)return"";m=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(m);if(!m)return"";m=m.groups;m=m.partA+"-"+m.partB+"-"+m.partC+"-"+m.partD+"-"+m.partE;switch(g.toString(f[1]).toLowerCase()){case "digits":return m.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m;
case "digits-hyphen-parentheses":return"("+m+")"}return"{"+m+"}"})};z.console=function(a,l){return B(a,l,(m,E,f)=>{0!==f.length&&(1===f.length?a.console(g.toString(f[0])):a.console(g.toString(f)));return g.voidOperation})};z.mid=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,3,a,l);m=g.toNumber(f[1]);if(isNaN(m))return"";0>m&&(m=0);if(2===f.length)return g.toString(f[0]).substr(m);E=g.toNumber(f[2]);if(isNaN(E))return"";0>E&&(E=0);return g.toString(f[0]).substr(m,E)})};z.find=function(a,l){return B(a,
l,(m,E,f)=>{g.pcCheck(f,2,3,a,l);m=0;if(2<f.length){m=g.toNumber(g.defaultUndefined(f[2],0));if(isNaN(m))return-1;0>m&&(m=0)}return g.toString(f[1]).indexOf(g.toString(f[0]),m)})};z.left=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,2,a,l);m=g.toNumber(f[1]);if(isNaN(m))return"";0>m&&(m=0);return g.toString(f[0]).substr(0,m)})};z.right=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,2,a,l);m=g.toNumber(f[1]);if(isNaN(m))return"";0>m&&(m=0);return g.toString(f[0]).substr(-1*m,m)})};z.split=
function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,4,a,l);m=g.toNumber(g.defaultUndefined(f[2],-1));E=g.toBoolean(g.defaultUndefined(f[3],!1));-1===m||null===m||!0===E?f=g.toString(f[0]).split(g.toString(f[1])):(isNaN(m)&&(m=-1),-1>m&&(m=-1),f=g.toString(f[0]).split(g.toString(f[1]),m));if(!1===E)return f;E=[];for(let H=0;H<f.length&&!(-1!==m&&E.length>=m);H++)""!==f[H]&&void 0!==f[H]&&E.push(f[H]);return E})};z.text=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,2,a,l);return g.toStringExplicit(f[0],
f[1])})};z.concatenate=function(a,l){return B(a,l,(m,E,f)=>{m=[];if(1>f.length)return"";if(g.isArray(f[0])){E=g.defaultUndefined(f[2],"");for(var H=0;H<f[0].length;H++)m[H]=g.toStringExplicit(f[0][H],E);return 1<f.length?m.join(f[1]):m.join("")}if(g.isImmutableArray(f[0])){E=g.defaultUndefined(f[2],"");for(H=0;H<f[0].length();H++)m[H]=g.toStringExplicit(f[0].get(H),E);return 1<f.length?m.join(f[1]):m.join("")}for(E=0;E<f.length;E++)m[E]=g.toStringExplicit(f[E]);return m.join("")})};z.reverse=function(a,
l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(g.isArray(f[0]))return m=f[0].slice(0),m.reverse(),m;if(g.isImmutableArray(f[0]))return m=f[0].toArray().slice(0),m.reverse(),m;throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.replace=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,3,4,a,l);m=g.toString(f[0]);E=g.toString(f[1]);const H=g.toString(f[2]);return(4===f.length?g.toBoolean(f[3]):1)?g.multiReplace(m,E,H):m.replace(E,H)})};z.schema=function(a,l){return B(a,
l,(m,E,f)=>{if(g.isFeature(f[0]))return(m=g.featureSchema(f[0]))?y.convertObjectToArcadeDictionary(m,g.defaultTimeZone(a)):null;throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.subtypes=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(g.isFeature(f[0]))return(m=g.featureSubtypes(f[0]))?y.convertObjectToArcadeDictionary(m,g.defaultTimeZone(a)):null;throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.subtypecode=function(a,
l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(g.isFeature(f[0])){m=g.featureSubtypes(f[0]);if(!m)return null;if(m.subtypeField&&f[0].hasField(m.subtypeField)){f=f[0].field(m.subtypeField);for(const H of m.subtypes)if(H.code===f)return H.code}return null}throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.subtypename=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(g.isFeature(f[0])){m=g.featureSubtypes(f[0]);if(!m)return"";if(m.subtypeField&&f[0].hasField(m.subtypeField)){f=
f[0].field(m.subtypeField);for(const H of m.subtypes)if(H.code===f)return H.name}return""}throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.gdbversion=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(g.isFeature(f[0]))return f[0].gdbVersion();throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.domain=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,3,a,l);if(g.isFeature(f[0]))return(m=g.featureFullDomain(f[0],g.toString(f[1]),
void 0===f[2]?void 0:g.toNumber(f[2])))&&m.domain?"coded-value"===m.domain.type||"codedValue"===m.domain.type?y.convertObjectToArcadeDictionary({type:"codedValue",name:m.domain.name,dataType:A.layerFieldEsriConstants[m.field.type],codedValues:m.domain.codedValues.map(H=>({name:H.name,code:H.code}))},g.defaultTimeZone(a)):y.convertObjectToArcadeDictionary({type:"range",name:m.domain.name,dataType:A.layerFieldEsriConstants[m.field.type],min:m.domain.min,max:m.domain.max},g.defaultTimeZone(a)):null;
throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.domainname=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,4,a,l);if(g.isFeature(f[0]))return g.featureDomainValueLookup(f[0],g.toString(f[1]),f[2],void 0===f[3]?void 0:g.toNumber(f[3]));throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.domaincode=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,2,4,a,l);if(g.isFeature(f[0]))return g.featureDomainCodeLookup(f[0],g.toString(f[1]),
f[2],void 0===f[3]?void 0:g.toNumber(f[3]));throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);})};z.urlencode=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(null===f[0])return"";if(f[0]instanceof y){m="";for(const H of f[0].keys())E=f[0].field(H),""!==m&&(m+="\x26"),m=null===E?m+(encodeURIComponent(H)+"\x3d"):m+(encodeURIComponent(H)+"\x3d"+encodeURIComponent(E));return m}return encodeURIComponent(g.toString(f[0]))})};z.hash=function(a,l){return B(a,l,(m,E,
f)=>{g.pcCheck(f,1,1,a,l);m=new h.XXH(0);r(f[0],m,{context:a,node:l,map:new Map,currentLength:0});return m.digest()})};z.convertdirection=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,3,3,a,l);return D.convertDirection(f[0],f[1],f[2])})};z.fromjson=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,1,a,l);if(!1===g.isString(f[0]))throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.InvalidParameter,l);return y.convertJsonToArcade(JSON.parse(g.toString(f[0])),g.defaultTimeZone(a))})};z.expects=
function(a,l){return B(a,l,(m,E,f)=>{if(1>f.length)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.WrongNumberOfParameters,l);return g.voidOperation})};z.tocharcode=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,1,2,a,l);m=g.toNumber(g.defaultUndefined(f[1],0));E=g.toString(f[0]);if(0===E.length&&1===f.length)return null;if(E.length<=m||0>m)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.OutOfBounds,l);return E.charCodeAt(m)})};z.tocodepoint=function(a,l){return B(a,l,(m,E,f)=>
{g.pcCheck(f,1,2,a,l);m=g.toNumber(g.defaultUndefined(f[1],0));E=g.toString(f[0]);if(0===E.length&&1===f.length)return null;if(E.length<=m||0>m)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.OutOfBounds,l);return E.codePointAt(m)})};z.fromcharcode=function(a,l){return B(a,l,(m,E,f)=>{if(1>f.length)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.WrongNumberOfParameters,l);m=f.map(H=>Math.trunc(g.toNumber(H))).filter(H=>0<=H&&65535>=H);return 0===m.length?null:String.fromCharCode.apply(null,
m)})};z.fromcodepoint=function(a,l){return B(a,l,(m,E,f)=>{if(1>f.length)throw new b.ArcadeExecutionError(a,b.ExecutionErrorCodes.WrongNumberOfParameters,l);let H;try{H=f.map(ha=>Math.trunc(g.toNumber(ha))).filter(ha=>1114111>=ha&&ha>>>0===ha)}catch(ha){return null}return 0===H.length?null:String.fromCodePoint.apply(null,H)})};z.getuser=function(a,l){return B(a,l,(m,E,f)=>{g.pcCheck(f,0,2,a,l);m=g.defaultUndefined(f[1],"");m=!0===m||!1===m?"":g.toString(m);if(null!==m&&""!==m)return null;if(0===f.length||
f[0]instanceof K){E=null;a.services&&a.services.portal&&(E=a.services.portal);if(0<f.length&&(f=f[0].field("url"),f=f?x.hasSamePortal(f,E?.restUrl||""):!1,!f)||!E)return null;if(""===m&&(f="loaded"===E.loadStatus&&E.user&&E.user.sourceJSON?E.user.sourceJSON:null,f)){f=JSON.parse(JSON.stringify(f));for(const H of["lastLogin","created","modified"])void 0!==f[H]&&null!==f[H]&&(f[H]=new Date(f[H]));return y.convertObjectToArcadeDictionary(f,g.defaultTimeZone(a))}return null}throw new b.ArcadeExecutionError(a,
b.ExecutionErrorCodes.InvalidParameter,l);})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["../chunks/_rollupPluginBabelHelpers","./Dictionary"],function(t,K){return function(q){function y(b){var g=q.call(this)||this;g.declaredClass="esri.arcade.Portal";g.immutable=!1;g.setField("url",b);g.immutable=!0;return g}t._inheritsLoose(y,q);return y}(K)})},"esri/arcade/Attachment":function(){define(["../chunks/_rollupPluginBabelHelpers","./Dictionary"],
function(t,K){return function(q){function y(b,g,A,D,h,C){var v=q.call(this)||this;v.attachmentUrl=h;v.declaredClass="esri.arcade.Attachment";v.immutable=!1;v.setField("id",b);v.setField("name",g);v.setField("contenttype",A);v.setField("size",D);v.setField("exifinfo",C);v.immutable=!0;return v}t._inheritsLoose(y,q);return y}(K)})},"esri/arcade/functions/convertdirection":function(){define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../../core/maybe"],function(t,K,q,
y,b){function g(F){if(!1===y.isString(F))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.InvalidParameter,null);return F}function A(F,P){P=10**P;return Math.round(F*P)/P}function D(F){const P=parseFloat(F.toString().replace(Math.trunc(F).toString(),"0"))*Math.sign(F);return 0>F?{fraction:P,integer:Math.ceil(F)}:{fraction:P,integer:Math.floor(F)}}function h(F,P){switch(F){case ka.north:return"SHORT"===P?"N":"North";case ka.east:return"SHORT"===P?"E":"East";case ka.south:return"SHORT"===
P?"S":"South";case ka.west:return"SHORT"===P?"W":"West"}}function C(F,P,O){for(;F.length<O;)F=P+F;return F}function v(F,P){return F-Math.floor(F/P)*P}function n(F){switch(F){case W.truncated_degrees:case W.decimal_degrees:return 360;case W.radians:return Ha;case W.gradians:return 400;case W.seconds:return 1296E3;case W.fractional_degree_minutes:return 60;case W.fractional_minute_seconds:return 60;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});
}}function k(F){switch(F.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return la.north_azimuth;case "POLAR":return la.polar;case "QUADRANT":return la.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return la.south_azimuth}throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function d(F){switch(F.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return W.decimal_degrees;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return W.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return W.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return W.gradians}throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function c(F,P,O){let Q=null;switch(P){case W.decimal_degrees:Q=ea(F,3600);break;case W.seconds:Q=F;break;
case W.gradians:Q=ea(F,3240);break;case W.radians:Q=ea(F,ua);break;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(O){case W.decimal_degrees:return sa(Q,3600);case W.seconds:return Q;case W.gradians:return sa(Q,3240);case W.radians:return Q/ua;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function x(F){b.assertIsSome(F);switch(F){case W.decimal_degrees:case W.truncated_degrees:case W.degrees_minutes_seconds:return W.decimal_degrees;
case W.gradians:return W.gradians;case W.fractional_degree_minutes:return W.fractional_degree_minutes;case W.radians:return W.radians;case W.seconds:case W.fractional_minute_seconds:return W.seconds}}function e(F){switch(y.toNumber(F)){case 1:return{first:ka.north,second:ka.east};case 2:return{first:ka.south,second:ka.east};case 3:return{first:ka.south,second:ka.west};case 4:return{first:ka.north,second:ka.west}}return null}function r(F){switch(F.toUpperCase().trim()){case "N":case "NORTH":return ka.north;
case "E":case "EAST":return ka.east;case "S":case "SOUTH":return ka.south;case "W":case "WEST":return ka.west}return null}function z(F){F=parseFloat(F);if(y.isNumber(F)){if(isNaN(F))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});return F}throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function B(F,P,O){const Q=O===la.quadrant;let ca=null;var ia=null;let U=0;var p=0;p=0;if(Q){if(2>
F.length)throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});p=1;(ia=e(y.toString(F[F.length-1])))?(ca=ia.first,ia=ia.second):(U=1,ca=r(y.toString(F[0])),ia=r(y.toString(F[F.length-1])));if(null===ca||null===ia)throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(P){case W.decimal_degrees:case W.radians:case W.gradians:if(0===F.length)break;return Q?I.createFromAngleMeridianAndDirection(G.createFromAngleAndUnits(z(F[U]),
x(P)),ca,ia):I.createFromAngleAndDirection(G.createFromAngleAndUnits(z(F[U]),x(P)),O);case W.degrees_minutes_seconds:p=F.length-p-U;if(3===p)return F=G.createFromDegreesMinutesSeconds(z(F[U]),z(F[U+1]),z(F[U+2])),Q?I.createFromAngleMeridianAndDirection(F,ca,ia):I.createFromAngleAndDirection(F,O);if(1===p)return F=z(F[U]),F=ra.numberToDms(F),F=G.createFromDegreesMinutesSeconds(F.m_degrees,F.m_minutes,F.m_seconds),Q?I.createFromAngleMeridianAndDirection(F,ca,ia):I.createFromAngleAndDirection(F,O)}throw new q.ArcadeExecutionError(null,
q.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function a(F){const P=[" ","-","/","'",'"',"\\","^","\u00b0",xa,"\t","\r","\n","*"];let O="";for(let Q=0;Q<F.length;Q++){const ca=F.charAt(Q);O=P.includes(ca)?O+"RRSPLITRRSPLITRR":O+ca}return O.split("RRSPLITRRSPLITRR").filter(Q=>""!==Q)}function l(F,P,O){const Q={padding:0,rounding:0,newpos:P};let ca=!1;for(;P<F.length;){const ia=F[P];if(ia===O)ca?Q.rounding++:Q.padding++,P++;else if("."===ia)ca=!0,P++;else break}Q.newpos=P-1;
return Q}const m=F=>(P,O,Q)=>{Q=Q||14;return+F(P,O).toFixed(Q)},E=(F,P)=>F+P,f=(F,P)=>F-P,H=(F,P)=>F*P,ha=(F,P)=>F/P,aa=(F,P,O)=>m(E)(F,P,O),ea=(F,P,O)=>m(H)(F,P,O),sa=(F,P,O)=>m(ha)(F,P,O),Ha=2*Math.PI,ua=648E3/Math.PI,xa=String.fromCharCode(7501);var ka;(function(F){F[F.north=0]="north";F[F.east=1]="east";F[F.south=2]="south";F[F.west=3]="west"})(ka||(ka={}));var W;(function(F){F[F.decimal_degrees=1]="decimal_degrees";F[F.seconds=2]="seconds";F[F.degrees_minutes_seconds=3]="degrees_minutes_seconds";
F[F.radians=4]="radians";F[F.gradians=5]="gradians";F[F.truncated_degrees=6]="truncated_degrees";F[F.fractional_degree_minutes=7]="fractional_degree_minutes";F[F.fractional_minute_seconds=8]="fractional_minute_seconds"})(W||(W={}));var la;(function(F){F[F.north_azimuth=1]="north_azimuth";F[F.polar=2]="polar";F[F.quadrant=3]="quadrant";F[F.south_azimuth=4]="south_azimuth"})(la||(la={}));var oa;(function(F){F[F.meridian=0]="meridian";F[F.direction=1]="direction"})(oa||(oa={}));let ra=function(){function F(O,
Q,ca){this.m_degrees=O;this.m_minutes=Q;this.m_seconds=ca}var P=F.prototype;P.getField=function(O){switch(O){case W.decimal_degrees:case W.truncated_degrees:return this.m_degrees;case W.fractional_degree_minutes:return this.m_minutes;case W.seconds:case W.fractional_minute_seconds:return this.m_seconds;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};F.secondsToDMS=function(O){const Q=D(O).fraction;O=D(O).integer;const ca=Math.floor(O/
3600);O-=3600*ca;const ia=Math.floor(O/60);return new F(ca,ia,O-60*ia+Q)};F.numberToDms=function(O){var Q=D(O).fraction;O=D(O).integer;const ca=ea(D(100*Q).fraction,100);Q=D(100*Q).integer;return new F(O,Q,ca)};P.format=function(O,Q){Q=A(this.m_seconds,Q);let ca=this.m_minutes,ia=this.m_degrees;if(O===W.seconds||O===W.fractional_minute_seconds)60<=Q&&(Q-=60,++ca),60<=ca&&(ca=0,++ia),360<=ia&&(ia=0);else if(O===W.fractional_degree_minutes)Q=0,ca=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ia=
this.m_degrees,60<=ca&&(ca=0,++ia),360<=ia&&(ia=0);else if(O===W.decimal_degrees||O===W.truncated_degrees)O=sa(this.m_seconds,3600),Q=sa(this.m_minutes,60),ia=Math.round(this.m_degrees+Q+O),Q=ca=0;return new F(ia,ca,Q)};F.dmsToSeconds=function(O,Q,ca){return 3600*O+60*Q+ca};return F}(),ya=function(){function F(P,O,Q){this.meridian=P;this.angle=O;this.direction=Q}F.prototype.fetchAzimuth=function(P){return P===oa.meridian?this.meridian:this.direction};return F}(),I=function(){function F(O){this._angle=
O}F.createFromAngleAndDirection=function(O,Q){return new F(new G(F._convertDirectionFormat(O.extractAngularUnits(W.seconds),Q,la.north_azimuth)))};var P=F.prototype;P.getAngle=function(O){const Q=this._angle.extractAngularUnits(W.seconds);switch(O){case la.north_azimuth:case la.south_azimuth:case la.polar:return new G(F._convertDirectionFormat(Q,la.north_azimuth,O));case la.quadrant:return O=F.secondsNorthAzimuthToQuadrant(Q),new G(O.angle)}};P.getMeridian=function(O){const Q=this._angle.extractAngularUnits(W.seconds);
switch(O){case la.north_azimuth:return ka.north;case la.south_azimuth:return ka.south;case la.polar:return ka.east;case la.quadrant:return F.secondsNorthAzimuthToQuadrant(Q).meridian}};P.getDirection=function(O){const Q=this._angle.extractAngularUnits(W.seconds);switch(O){case la.north_azimuth:return ka.east;case la.south_azimuth:return ka.west;case la.polar:return ka.north;case la.quadrant:return F.secondsNorthAzimuthToQuadrant(Q).direction}};F.secondsNorthAzimuthToQuadrant=function(O){const Q=324E3>=
O||972E3<=O?ka.north:ka.south;return new ya(Q,Q===ka.north?Math.min(1296E3-O,O):Math.abs(O-648E3),648E3<O?ka.west:ka.east)};F.createFromAngleMeridianAndDirection=function(O,Q,ca){return new F(new G(F.secondsQuadrantToNorthAzimuth(O.extractAngularUnits(W.seconds),Q,ca)))};F.secondsQuadrantToNorthAzimuth=function(O,Q,ca){return Q===ka.north?ca===ka.east?O:1296E3-O:ca===ka.east?648E3-O:648E3+O};F._convertDirectionFormat=function(O,Q,ca){let ia=0;switch(Q){case la.north_azimuth:ia=O;break;case la.polar:ia=
324E3-O;break;case la.quadrant:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case la.south_azimuth:ia=O+648E3}O=0;switch(ca){case la.north_azimuth:O=ia;break;case la.polar:O=324E3-ia;break;case la.quadrant:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case la.south_azimuth:O=ia-648E3}O%=1296E3;return 0>O?1296E3+O:O};return F}(),G=function(){function F(P){this._seconds=P}
F.createFromAngleAndUnits=function(P,O){return new F(c(P,O,W.seconds))};F.prototype.extractAngularUnits=function(P){return c(this._seconds,W.seconds,x(P))};F.createFromDegreesMinutesSeconds=function(P,O,Q){return new F(aa(aa(ea(P,3600),ea(O,60)),Q))};return F}(),L=function(){function F(O,Q,ca,ia){this.view=O;this.angle=Q;this.merdian=ca;this.direction=ia;this._formattedDms=this._dms=null}F.createFromStringAndBearing=function(O,Q,ca){return new F(O,Q.getAngle(ca),Q.getMeridian(ca),Q.getDirection(ca))};
var P=F.prototype;P.fetchAngle=function(){return this.angle};P.fetchMeridian=function(){return this.merdian};P.fetchDirection=function(){return this.direction};P.fetchView=function(){return this.view};P.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};P.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};P._calculateDms=function(){var O=null;let Q=W.truncated_degrees,ca=0;for(O=0;O<this.view.length;O++){const ia=this.view[O];
switch(ia){case "m":O=l(this.view,O,ia);Q=Q===W.truncated_degrees?W.fractional_degree_minutes:Q;O=O.newpos;continue;case "s":O=l(this.view,O,ia),Q=W.fractional_minute_seconds,ca=ca<O.rounding?O.rounding:ca,O=O.newpos}}this._dms=ra.secondsToDMS(this.angle.extractAngularUnits(W.seconds));this._formattedDms=ra.secondsToDMS(this.angle.extractAngularUnits(W.seconds)).format(Q,ca)};return F}();t.convertDirection=function(F,P,O){if(!(P instanceof K))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.InvalidParameter,
null);if(!1===P.hasField("directionType"))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===P.hasField("angleType"))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var Q=k(g(P.field("directiontype")));P=d(g(P.field("angletype")));if(y.isNumber(F)){F=y.toNumber(F);if(Q===la.quadrant)throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});
P===W.degrees_minutes_seconds?(F=ra.numberToDms(F),Q=I.createFromAngleAndDirection(G.createFromDegreesMinutesSeconds(F.m_degrees,F.m_minutes,F.m_seconds),Q)):Q=I.createFromAngleAndDirection(G.createFromAngleAndUnits(F,x(P)),Q)}else if(y.isString(F))Q=B(a(F),P,Q);else if(y.isArray(F))Q=B(F,P,Q);else if(y.isImmutableArray(F))Q=B(F.toArray(),P,Q);else throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(O instanceof K))throw new q.ArcadeExecutionError(null,
q.ExecutionErrorCodes.InvalidParameter,null);if(!1===O.hasField("directionType"))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===O.hasField("outputType"))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});F=k(g(O.field("directiontype")));P=O.hasField("angleType")?d(g(O.field("angletype"))):null;var ca=g(O.field("outputType")).toUpperCase().trim();if(!F||!ca)throw new q.ArcadeExecutionError(null,
q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(P||"TEXT"===ca&&O.hasField("format")))throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(ca){case "VALUE":if(F===la.quadrant||P===W.degrees_minutes_seconds)return O=Q.getAngle(F),F===la.quadrant&&P===W.degrees_minutes_seconds?(O=ra.secondsToDMS(O.extractAngularUnits(W.seconds)),Q=[h(Q.getMeridian(F),"SHORT"),O.m_degrees,O.m_minutes,O.m_seconds,h(Q.getDirection(F),"SHORT")]):
P===W.degrees_minutes_seconds?(Q=ra.secondsToDMS(O.extractAngularUnits(W.seconds)),Q=[Q.m_degrees,Q.m_minutes,Q.m_seconds]):Q=F===la.quadrant?[h(Q.getMeridian(F),"SHORT"),O.extractAngularUnits(P),h(Q.getDirection(F),"SHORT")]:[O.extractAngularUnits(P)],Q;if((O=x(P))&&P!==W.degrees_minutes_seconds)Q=Q.getAngle(F).extractAngularUnits(O);else throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return Q;case "TEXT":ca="";O.hasField("format")&&(ca=y.toString(O.field("format")));
if(null===ca||""===ca){O="";switch(P){case W.decimal_degrees:O=F===la.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case W.degrees_minutes_seconds:O=F===la.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case W.radians:O="R.RR";break;case W.gradians:O="GGG.GG"+xa;break;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}F===la.quadrant&&(O="p "+O+" b");ca=O}O=ca;var ia="",U=null,p=null;P=L.createFromStringAndBearing(O,Q,F);ca=
{D:W.decimal_degrees,d:W.truncated_degrees,m:W.fractional_degree_minutes,s:W.fractional_minute_seconds,R:W.radians,G:W.gradians};for(p=0;p<O.length;p++){var u=O[p];switch(u){case "[":U=O;u={escaped:"",newpos:p};for(p++;p<U.length;){var N=U[p];p++;if("]"===N)break;u.escaped+=N}u.newpos=p-1;U=u;ia+=U.escaped;p=U.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":U=l(O,p,u);p=Q.getAngle(F);a:{u=ca[u];N=U.padding;var M=U.rounding,T=P;let fa=null;switch(u){case W.decimal_degrees:case W.radians:case W.gradians:fa=
v(A(p.extractAngularUnits(u),M),n(u));p=C(fa.toFixed(M),"0",N+M+(0<M?1:0));break a;case W.truncated_degrees:case W.fractional_degree_minutes:fa=v(T.fetchFormattedDms().getField(u),n(u));p=C(fa.toFixed(M),"0",N+M+(0<M?1:0));break a;case W.fractional_minute_seconds:fa=v(A(T.fetchDms().getField(u),M),n(u));p=C(fa.toFixed(M),"0",N+M+(0<M?1:0));break a;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}ia+=p;p=U.newpos;continue;case "P":case "p":ia+=
h(P.fetchMeridian(),"p"===u?"SHORT":"LONG");continue;case "B":case "b":ia+=h(P.fetchDirection(),"b"===u?"SHORT":"LONG");continue;default:ia+=u}}return ia;default:throw new q.ArcadeExecutionError(null,q.ExecutionErrorCodes.InvalidParameter,null);}};t.preciseAdd=aa;t.preciseDivide=sa;t.preciseMinus=(F,P,O)=>m(f)(F,P,O);t.preciseMultiply=ea;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports"],function(t){function K(y){const b=[];for(let g=
0,A=y.length;g<A;g++){let D=y.charCodeAt(g);128>D?b.push(D):2048>D?b.push(192|D>>6,128|D&63):55296>D||57344<=D?b.push(224|D>>12,128|D>>6&63,128|D&63):(g++,D=65536+((D&1023)<<10|y.charCodeAt(g)&1023),b.push(240|D>>18,128|D>>12&63,128|D>>6&63,128|D&63))}return new Uint8Array(b)}let q=function(){function y(g){this._seed=g;this._totallen=0;this._bufs=[];this.init()}var b=y.prototype;b.init=function(){this._bufs=[];this._totallen=0;return this};b.updateFloatArray=function(g){const A=[];for(const D of g)isNaN(D)?
A.push("NaN"):Infinity===D?A.push("Infinity"):-Infinity===D?A.push("-Infinity"):0===D?A.push("0"):A.push(D.toString(16));this.update(K(A.join("")))};b.updateIntArray=function(g){g=Int32Array.from(g);this.update(new Uint8Array(g.buffer))};b.updateUint8Array=function(g){this.update(Uint8Array.from(g))};b.updateWithString=function(g){return this.update(K(g))};b.update=function(g){this._bufs.push(g);this._totallen+=g.length;return this};b.digest=function(){const g=new Uint8Array(this._totallen);let A=
0;for(const D of this._bufs)g.set(D,A),A+=D.length;this.init();return this._xxHash32(g,this._seed)};b._xxHash32=function(g,A=0){var D=A+374761393&4294967295;let h=0;if(16<=g.length){D=[A+2654435761+2246822519&4294967295,A+2246822519&4294967295,A+0&4294967295,A-2654435761&4294967295];A=g.length-16;var C=0;for(h=0;(h&4294967280)<=A;h+=4){var v=h;v=D[C]+(2246822519*(g[v+0]+(g[v+1]<<8))+(2246822519*(g[v+2]+(g[v+3]<<8))<<16))&4294967295;v=v<<13|v>>>19;D[C]=2654435761*(v&65535)+(2654435761*(v>>>16)<<16)&
4294967295;C=C+1&3}D=(D[0]<<1|D[0]>>>31)+(D[1]<<7|D[1]>>>25)+(D[2]<<12|D[2]>>>20)+(D[3]<<18|D[3]>>>14)&4294967295}D=D+g.length&4294967295;for(A=g.length-4;h<=A;h+=4)C=h,D=D+(3266489917*(g[C+0]+(g[C+1]<<8))+(3266489917*(g[C+2]+(g[C+3]<<8))<<16))&4294967295,D=D<<17|D>>>15,D=668265263*(D&65535)+(668265263*(D>>>16)<<16)&4294967295;for(;h<g.length;++h)D+=374761393*g[h],D=D<<11|D>>>21,D=2654435761*(D&65535)+(2654435761*(D>>>16)<<16)&4294967295;D^=D>>>15;D=(2246822519*(D&65535)&4294967295)+(2246822519*(D>>>
16)<<16);D^=D>>>13;D=(3266489917*(D&65535)&4294967295)+(3266489917*(D>>>16)<<16);D^=D>>>16;return 0>D?D+4294967296:D};return y}();t.XXH=q;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports"],function(t){let K=function(){function q(y,b){this._moduleSingletons=y;this._syntaxModules=b}q.prototype.loadLibrary=function(y){return null==this._syntaxModules?null:(y=this._syntaxModules[y.toLowerCase()])?{syntax:y.script,uri:y.uri}:null};
return q}();t.ArcadeModuleLoader=K;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../request ../portal/Portal ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(t,K,q,y,b,g,A){let D=function(){function h(v){this.portalUri=v}var C=h.prototype;C.normalizeModuleUri=function(v){const n=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var k=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;
const d=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,c=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var x=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(v.startsWith("portal+")){let z=v.substring(7);var e="",r=z;let B=!1;for(const a of[k,c,d])if(k=a.exec(z),null!==k){e=k.groups;r=e.itemid;e=e.portalurl;B=!0;break}if(!1===B)if(n.test(z))r=z,e=this.portalUri;else throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol,
{uri:v});r.includes("/")&&(r=r.split("/")[0]);r.includes("?")&&(r=r.split("?")[0]);v="current";x=x.exec(r);null!==x&&(v=x.groups,r=v.itemid,v=v.versionstring);z=(new y({url:e})).restUrl+"/content/items/"+r+"/resources/"+v+".arc";return{url:z,scheme:"portal",uri:"PO:"+z}}if(v.startsWith("mock")){if("mock"===v)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};r=v.replace("mock:",
"");if(void 0!==h.mocks[r])return{url:"",scheme:"mock",data:h.mocks[r],uri:v}}throw new A.ModuleError(A.ModuleErrorCodes.UnrecognisedUri,{uri:v});};C.fetchModule=function(){var v=K._asyncToGenerator(function*(n){var k=h.cachedModules.getFromCache(n.uri);if(k)return k;k=this.fetchSource(n);h.cachedModules.addToCache(n.uri,k);let d=null;try{d=yield k}catch(c){throw h.cachedModules.removeFromCache(n.uri),c;}return d});return function(n){return v.apply(this,arguments)}}();C.fetchSource=function(){var v=
K._asyncToGenerator(function*(n){if("portal"===n.scheme){const k=yield q(n.url,{responseType:"text",query:{}});if(k.data)return b.parseScript(k.data,[])}if("mock"===n.scheme)return b.parseScript(n.data??"",[]);throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol);});return function(n){return v.apply(this,arguments)}}();h.create=function(v){return new h(v)};h.getDefault=function(){return this._default??(h._default=h._moduleResolverFactory())};K._createClass(h,null,[{key:"moduleResolverClass",
set:function(v){this._moduleResolverFactory=v;this._default=null}}]);return h}();D.mocks={};D.cachedModules=new g(30);D._default=null;D._moduleResolverFactory=()=>{const h=y.getDefault();return new D(h.url)};t.ArcadeModuleResolver=D;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(t,K,q,y){t.parseScript=function(b,g=[]){b=q.parse(b);if(null===b.body||void 0===b.body)throw new y.ParsingError({index:0,
line:0,column:0,data:null,description:"",code:y.ParsingErrorCodes.InvalidExpression});if(0===b.body.length)throw new y.ParsingError({index:0,line:0,column:0,data:null,description:"",code:y.ParsingErrorCodes.InvalidExpression});if(0===b.body.length)throw new y.ParsingError({index:0,line:0,column:0,data:null,description:"",code:y.ParsingErrorCodes.InvalidExpression});b.loadedModules={};K.findScriptDependencies(b,g);return b};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/arcade-parser":function(){define(["exports",
"./parser","./tokenizer","./types"],function(t,K,q,y){t.AssignmentOperators=y.AssignmentOperators;t.BinaryOperators=y.BinaryOperators;Object.defineProperty(t,"Keywords",{enumerable:!0,get:()=>y.Keywords});t.LogicalOperators=y.LogicalOperators;t.OperatorPrecedence=y.OperatorPrecedence;t.ParsingError=y.ParsingError;Object.defineProperty(t,"ParsingErrorCodes",{enumerable:!0,get:()=>y.ParsingErrorCodes});t.ParsingErrorMessages=y.ParsingErrorMessages;Object.defineProperty(t,"Syntax",{enumerable:!0,get:()=>
y.Syntax});t.TokenNames=y.TokenNames;Object.defineProperty(t,"TokenType",{enumerable:!0,get:()=>y.TokenType});t.UnaryOperators=y.UnaryOperators;t.UpdateOperators=y.UpdateOperators;t.isArrayExpression=y.isArrayExpression;t.isAssignmentExpression=y.isAssignmentExpression;t.isBinaryExpression=y.isBinaryExpression;t.isBlockComment=y.isBlockComment;t.isBlockStatement=y.isBlockStatement;t.isBreakStatement=y.isBreakStatement;t.isCallExpression=y.isCallExpression;t.isContinueStatement=y.isContinueStatement;
t.isEmptyStatement=y.isEmptyStatement;t.isExpression=y.isExpression;t.isExpressionStatement=y.isExpressionStatement;t.isForInStatement=y.isForInStatement;t.isForStatement=y.isForStatement;t.isFunctionDeclaration=y.isFunctionDeclaration;t.isIdentifier=y.isIdentifier;t.isIfStatement=y.isIfStatement;t.isLiteral=y.isLiteral;t.isLogicalExpression=y.isLogicalExpression;t.isMemberExpression=y.isMemberExpression;t.isObjectExpression=y.isObjectExpression;t.isProgram=y.isProgram;t.isProperty=y.isProperty;t.isReturnStatement=
y.isReturnStatement;t.isStatement=y.isStatement;t.isTemplateElement=y.isTemplateElement;t.isTemplateLiteral=y.isTemplateLiteral;t.isUnaryExpression=y.isUnaryExpression;t.isUpdateExpression=y.isUpdateExpression;t.isVariableDeclaration=y.isVariableDeclaration;t.isVariableDeclarator=y.isVariableDeclarator;t.parse=function(b,g,A){return(new K.Parser(b,g,A)).parseScript()};t.tokenize=function(b,g,A){b=new q.Tokenizer(b,g);g=[];let D=void 0;try{let h;for(;h=b.getNextToken();)A&&(h=A(h)),g.push(h)}catch(h){b.errorHandler.tolerate(h)}b.errorHandler.tolerant&&
(D=b.errors());return{tokens:g,errors:D}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define(["exports","./comment-handler","./error-handler","./scanner","./types"],function(t,K,q,y,b){function g(n,k=0){let d=n.start-n.lineStart,c=n.lineNumber;0>d&&(d+=k,c--);return{index:n.start,line:c,column:d}}function A(n){return[{index:n.range[0],...n.loc.start},{index:n.range[1],...n.loc.end}]}function D(n){return b.OperatorPrecedence[n]??0}var h;(function(n){n[n.None=
0]="None";n[n.Function=1]="Function";n[n.IfClause=2]="IfClause";n[n.ForLoop=4]="ForLoop";n[n.WhileLoop=8]="WhileLoop"})(h||(h={}));var C;(function(n){n[n.AsObject=0]="AsObject";n[n.Automatic=1]="Automatic"})(C||(C={}));let v=function(){function n(d,c={},x){this.delegate=x;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof c.tokens&&c.tokens,comments:"boolean"===typeof c.comments&&c.comments,tolerant:"boolean"===typeof c.tolerant&&c.tolerant};this.options.comments&&(this.commentHandler=
new K.CommentHandler);this.errorHandler=new q.ErrorHandler(this.options.tolerant);this.scanner=new y.Scanner(d,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:h.None,curlyParsingType:C.AsObject};this.rawToken={type:b.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker=
{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}var k=n.prototype;k.throwIfInvalidType=function(d,c,{validTypes:x,invalidTypes:e}){x?.some(r=>d.type===r)||e?.some(r=>d.type===r)&&this.throwError(b.ParsingErrorCodes.InvalidExpression,c)};k.throwError=function(d,c,x=this.endMarker){const {index:e,line:r,column:z}=c;this.errorHandler.throwError({code:d,index:e,line:r,column:z+1,len:x.index-e-1})};k.tolerateError=function(d,c){throw Error("######################################### !!!");
};k.unexpectedTokenError=function(d={}){const {rawToken:c}=d;let {code:x,data:e}=d;if(c){if(!x)switch(c.type){case b.TokenType.EOF:x=b.ParsingErrorCodes.UnexpectedEndOfScript;break;case b.TokenType.Identifier:x=b.ParsingErrorCodes.UnexpectedIdentifier;break;case b.TokenType.NumericLiteral:x=b.ParsingErrorCodes.UnexpectedNumber;break;case b.TokenType.StringLiteral:x=b.ParsingErrorCodes.UnexpectedString;break;case b.TokenType.Template:x=b.ParsingErrorCodes.UnexpectedTemplate}d=c.value.toString()}else d=
"ILLEGAL";x=x??b.ParsingErrorCodes.UnexpectedToken;e||(e={value:d});d=q.formatErrorDescription(x,e);if(c)return new b.ParsingError({code:x,index:c.start,line:c.lineNumber,column:c.start-c.lineStart+1,len:c.end-c.start-1,data:e,description:d});const {index:r,line:z}=this.endMarker;return new b.ParsingError({code:x,index:r,line:z,column:this.endMarker.column+1,data:e,description:d})};k.throwUnexpectedToken=function(d={}){d.rawToken=d.rawToken??this.rawToken;throw this.unexpectedTokenError(d);};k.collectComments=
function(d){const {commentHandler:c}=this;c&&d.length&&d.forEach(x=>{x={type:x.multiLine?b.Syntax.BlockComment:b.Syntax.LineComment,value:this.getSourceValue(x),range:x.range,loc:x.loc};c.collectComment(x)})};k.peekAhead=function(d){const c=this.scanner.saveState();d=d.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});this.scanner.restoreState(c);return d};k.getSourceValue=function(d){return this.scanner.source.slice(d.start,d.end)};k.convertToToken=function(d){return{type:b.TokenNames[d.type],
value:this.getSourceValue(d),range:[d.start,d.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};k.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;const d=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&
(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=d.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==b.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))};k.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};k.getItemLocation=
function(d){return{range:[d.index,this.endMarker.index],loc:{start:{line:d.line,column:d.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};k.finalize=function(d){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(d),this.delegate?.(d);return d};k.expectPunctuator=function(d){const c=this.rawToken;this.matchPunctuator(d)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:c,code:b.ParsingErrorCodes.PunctuatorExpected,data:{value:d}})};k.expectKeyword=
function(d){this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===d?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.expectContextualKeyword=function(d){this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value.toLowerCase()===d?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};k.matchKeyword=function(d){return this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===d};k.matchContextualKeyword=
function(d){return this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value===d};k.matchPunctuator=function(d){return this.rawToken.type===b.TokenType.Punctuator&&this.rawToken.value===d};k.getMatchingPunctuator=function(d){"string"===typeof d&&(d=d.split(""));if(this.rawToken.type===b.TokenType.Punctuator&&d?.length)return d.find(this.matchPunctuator,this)};k.isolateCoverGrammar=function(d){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;d=d.call(this);this.context.isAssignmentTarget=
c;return d};k.inheritCoverGrammar=function(d){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;d=d.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&c;return d};k.withBlockContext=function(d,c){const x=this.context.blockContext;this.context.blockContext|=d;d=this.context.curlyParsingType;this.context.curlyParsingType=C.Automatic;c=c.call(this);this.context.blockContext=x;this.context.curlyParsingType=d;return c};k.consumeSemicolon=function(){this.matchPunctuator(";")?
this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===b.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};k.parsePrimaryExpression=function(){const d=this.captureStartMarker(),c=this.rawToken;switch(c.type){case b.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,
name:c.value,...this.getItemLocation(d)});case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:c.value,raw:this.getSourceValue(c),isString:"string"===typeof c.value,...this.getItemLocation(d)});case b.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:c.value.toLowerCase()===b.Keywords.True,raw:this.getSourceValue(c),
isString:!1,...this.getItemLocation(d)});case b.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:null,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(d)});case b.TokenType.Template:return this.parseTemplateLiteral();case b.TokenType.Punctuator:switch(c.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);
default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case b.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.parseArrayInitializer=function(){const d=this.captureStartMarker();this.expectPunctuator("[");const c=[];for(;!this.matchPunctuator("]");){const x=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(b.ParsingErrorCodes.InvalidExpression,
x)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:b.Syntax.ArrayExpression,elements:c,...this.getItemLocation(d)})};k.parseObjectPropertyKey=function(){const d=this.captureStartMarker(),c=this.rawToken;switch(c.type){case b.TokenType.StringLiteral:return this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(d)});
case b.TokenType.Identifier:case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,name:c.value,...this.getItemLocation(d)});default:this.throwError(b.ParsingErrorCodes.KeyMustBeString,d)}};k.parseObjectProperty=function(){const d=this.rawToken,c=this.captureStartMarker(),x=this.parseObjectPropertyKey();let e=!1,r=null;this.matchPunctuator(":")?(this.readNextRawToken(),r=this.inheritCoverGrammar(this.parseAssignmentExpression)):
d.type===b.TokenType.Identifier?(e=!0,r=this.finalize({type:b.Syntax.Identifier,name:d.value,...this.getItemLocation(c)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:b.Syntax.Property,kind:"init",key:x,value:r,shorthand:e,...this.getItemLocation(c)})};k.parseObjectExpression=function(){const d=this.captureStartMarker();this.expectPunctuator("{");const c=[];for(;!this.matchPunctuator("}");)c.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");
this.expectPunctuator("}");return this.finalize({type:b.Syntax.ObjectExpression,properties:c,...this.getItemLocation(d)})};k.parseTemplateElement=function(d=!1){var c=this.rawToken;c.type!==b.TokenType.Template&&this.throwUnexpectedToken({rawToken:c});d&&!c.head&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidTemplateHead,rawToken:c});d=this.captureStartMarker();this.readNextRawToken();const {value:x,cooked:e,tail:r}=c;c=this.finalize({type:b.Syntax.TemplateElement,value:{raw:x,cooked:e},
tail:r,...this.getItemLocation(d)});c.loc.start.column++;c.loc.end.column-=r?1:2;return c};k.parseTemplateLiteral=function(){const d=this.captureStartMarker(),c=[],x=[];let e=this.parseTemplateElement(!0);for(x.push(e);!e.tail;)c.push(this.parseExpression()),e=this.parseTemplateElement(),x.push(e);return this.finalize({type:b.Syntax.TemplateLiteral,quasis:x,expressions:c,...this.getItemLocation(d)})};k.parseGroupExpression=function(){this.expectPunctuator("(");const d=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.expectPunctuator(")");return d};k.parseArguments=function(){this.expectPunctuator("(");const d=[];if(!this.matchPunctuator(")"))for(;;){const c=this.isolateCoverGrammar(this.parseAssignmentExpression);d.push(c);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return d};k.parseMemberName=function(){const d=this.rawToken,c=this.captureStartMarker();this.readNextRawToken();d.type!==b.TokenType.NullLiteral&&d.type!==b.TokenType.Identifier&&
d.type!==b.TokenType.Keyword&&d.type!==b.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:d});return this.finalize({type:b.Syntax.Identifier,name:d.value,...this.getItemLocation(c)})};k.parseLeftHandSideExpression=function(){const d=this.captureStartMarker();let c=this.inheritCoverGrammar(this.parsePrimaryExpression);const x=this.captureStartMarker();for(var e;e=this.getMatchingPunctuator("([.");)switch(e){case "(":this.context.isAssignmentTarget=!1;c.type!==b.Syntax.Identifier&&c.type!==
b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.IdentiferExpected,d,x);e=this.parseArguments();c=this.finalize({type:b.Syntax.CallExpression,callee:c,arguments:e,...this.getItemLocation(d)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");e=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");c=this.finalize({type:b.Syntax.MemberExpression,computed:!0,object:c,property:e,...this.getItemLocation(d)});continue;case ".":this.context.isAssignmentTarget=
!0,this.expectPunctuator("."),e=this.parseMemberName(),c=this.finalize({type:b.Syntax.MemberExpression,computed:!1,object:c,property:e,...this.getItemLocation(d)})}return c};k.parseUpdateExpression=function(){const d=this.captureStartMarker();let c=this.getMatchingPunctuator(b.UpdateOperators);if(c){this.readNextRawToken();var x=this.captureStartMarker(),e=this.inheritCoverGrammar(this.parseUnaryExpression);e.type!==b.Syntax.Identifier&&e.type!==b.Syntax.MemberExpression&&e.type!==b.Syntax.CallExpression&&
this.throwError(b.ParsingErrorCodes.InvalidExpression,x);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,d);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,operator:c,argument:e,prefix:!0,...this.getItemLocation(d)})}x=this.captureStartMarker();e=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const r=this.captureStartMarker();if(this.hasLineTerminator)return e;c=this.getMatchingPunctuator(b.UpdateOperators);
if(!c)return e;e.type!==b.Syntax.Identifier&&e.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,x,r);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,d);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,operator:c,argument:e,prefix:!1,...this.getItemLocation(d)})};k.parseUnaryExpression=function(){const d=this.getMatchingPunctuator(b.UnaryOperators);
if(d){const c=this.captureStartMarker();this.readNextRawToken();const x=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UnaryExpression,operator:d,argument:x,prefix:!0,...this.getItemLocation(c)})}return this.parseUpdateExpression()};k.parseBinaryExpression=function(){var d=this.rawToken,c=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==b.TokenType.Punctuator)return c;var x=this.rawToken.value,e=
D(x);if(0===e)return c;this.readNextRawToken();this.context.isAssignmentTarget=!1;d=[d,this.rawToken];var r=this.inheritCoverGrammar(this.parseUnaryExpression);x=[c,x,r];for(var z=[e];this.rawToken.type===b.TokenType.Punctuator&&0<(e=D(this.rawToken.value));){for(;2<x.length&&e<=z[z.length-1];){r=x.pop();const a=x.pop();z.pop();c=x.pop();d.pop();var B=d[d.length-1];B=g(B,B.lineStart);x.push(this.finalize(this.createBinaryOrLogicalExpression(B,a,c,r)))}x.push(this.rawToken.value);z.push(e);d.push(this.rawToken);
this.readNextRawToken();x.push(this.inheritCoverGrammar(this.parseUnaryExpression))}e=x.length-1;c=x[e];for(z=d.pop();1<e;){r=d.pop();if(!r)break;z=g(r,z?.lineStart);c=this.finalize(this.createBinaryOrLogicalExpression(z,x[e-1],x[e-2],c));e-=2;z=r}return c};k.createBinaryOrLogicalExpression=function(d,c,x,e){const r=b.LogicalOperators.includes(c)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;if(r===b.Syntax.BinaryExpression)return{type:r,operator:c,left:x,right:e,...this.getItemLocation(d)};
x.type!==b.Syntax.AssignmentExpression&&x.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...A(x));e.type!==b.Syntax.AssignmentExpression&&e.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...A(x));return{type:r,operator:c,left:x,right:e,...this.getItemLocation(d)}};k.parseAssignmentExpression=function(){const d=this.captureStartMarker(),c=this.inheritCoverGrammar(this.parseBinaryExpression);var x=this.captureStartMarker();
const e=this.getMatchingPunctuator(b.AssignmentOperators);if(!e)return c;c.type!==b.Syntax.Identifier&&c.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,d,x);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,d);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();x=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:b.Syntax.AssignmentExpression,
left:c,operator:e,right:x,...this.getItemLocation(d)})};k.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};k.parseStatements=function(d){const c=[];for(;this.rawToken.type!==b.TokenType.EOF&&!this.matchPunctuator(d);){const x=this.parseStatementListItem();b.isEmptyStatement(x)||c.push(x)}return c};k.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(b.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(b.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(b.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};k.parseBlock=function(){const d=this.captureStartMarker();this.expectPunctuator("{");const c=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:b.Syntax.BlockStatement,body:c,...this.getItemLocation(d)})};k.parseObjectStatement=function(){const d=this.captureStartMarker(),c=this.parseObjectExpression();return this.finalize({type:b.Syntax.ExpressionStatement,
expression:c,...this.getItemLocation(d)})};k.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===C.AsObject||this.peekAhead(d=>{let c=d();if(c.type!==b.TokenType.Identifier&&c.type!==b.TokenType.StringLiteral)return!1;c=d();return c.type!==b.TokenType.Punctuator||":"!==c.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};k.parseIdentifier=function(){const d=this.rawToken;if(d.type!==b.TokenType.Identifier)return null;const c=this.captureStartMarker();this.readNextRawToken();
return this.finalize({type:b.Syntax.Identifier,name:d.value,...this.getItemLocation(c)})};k.parseVariableDeclarator=function(){const d=this.captureStartMarker(),c=this.parseIdentifier();c||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});let x=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();const e=this.rawToken;try{x=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(r){this.throwUnexpectedToken({rawToken:e,code:b.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:b.Syntax.VariableDeclarator,
id:c,init:x,...this.getItemLocation(d)})};k.parseVariableDeclarationList=function(){const d=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),d.push(this.parseVariableDeclarator());return d};k.parseVariableDeclaration=function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Var);const c=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:b.Syntax.VariableDeclaration,declarations:c,kind:"var",...this.getItemLocation(d)})};
k.parseEmptyStatement=function(){const d=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:b.Syntax.EmptyStatement,...this.getItemLocation(d)})};k.parseExpressionStatement=function(){const d=this.captureStartMarker(),c=this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ExpressionStatement,expression:c,...this.getItemLocation(d)})};k.parseIfClause=function(){return this.withBlockContext(h.IfClause,this.parseStatement)};k.parseIfStatement=
function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.If);this.expectPunctuator("(");var c=this.captureStartMarker();const x=this.parseExpression();var e=this.captureStartMarker();this.expectPunctuator(")");x.type!==b.Syntax.AssignmentExpression&&x.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,c,e);c=this.parseIfClause();e=null;this.matchKeyword(b.Keywords.Else)&&(this.readNextRawToken(),e=this.parseIfClause());return this.finalize({type:b.Syntax.IfStatement,
test:x,consequent:c,alternate:e,...this.getItemLocation(d)})};k.parseWhileStatement=function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.While);this.expectPunctuator("(");var c=this.captureStartMarker();const x=this.parseExpression(),e=this.captureStartMarker();this.expectPunctuator(")");x.type!==b.Syntax.AssignmentExpression&&x.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,c,e);c=this.withBlockContext(h.WhileLoop,this.parseStatement);
return this.finalize({type:b.Syntax.WhileStatement,test:x,body:c,...this.getItemLocation(d)})};k.parseForStatement=function(){let d=null,c=null,x=null,e=null,r=null;const z=this.captureStartMarker();this.expectKeyword(b.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(b.Keywords.Var)){var B=this.captureStartMarker();this.readNextRawToken();var a=this.parseVariableDeclarationList();1===a.length&&this.matchKeyword(b.Keywords.In)?
(a[0].init&&this.throwError(b.ParsingErrorCodes.ForInOfLoopInitializer,B),e=this.finalize({type:b.Syntax.VariableDeclaration,declarations:a,kind:"var",...this.getItemLocation(B)}),this.readNextRawToken(),r=this.parseExpression()):(this.matchKeyword(b.Keywords.In)&&this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,B),d=this.finalize({type:b.Syntax.VariableDeclaration,declarations:a,kind:"var",...this.getItemLocation(B)}),this.expectPunctuator(";"))}else B=this.context.isAssignmentTarget,
a=this.captureStartMarker(),d=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(b.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,a),d.type!==b.Syntax.Identifier&&this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,a),this.readNextRawToken(),e=d,r=this.parseExpression(),d=null):(this.context.isAssignmentTarget=B,this.expectPunctuator(";"));e||(this.matchPunctuator(";")||(c=this.isolateCoverGrammar(this.parseExpression)),
this.expectPunctuator(";"),this.matchPunctuator(")")||(x=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");B=this.withBlockContext(h.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return e&&r?this.finalize({type:b.Syntax.ForInStatement,left:e,right:r,body:B,...this.getItemLocation(z)}):this.finalize({type:b.Syntax.ForStatement,init:d,test:c,update:x,body:B,...this.getItemLocation(z)})};k.parseContinueStatement=function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Continue);
this.consumeSemicolon();return this.finalize({type:b.Syntax.ContinueStatement,...this.getItemLocation(d)})};k.parseBreakStatement=function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Break);this.consumeSemicolon();return this.finalize({type:b.Syntax.BreakStatement,...this.getItemLocation(d)})};k.parseReturnStatement=function(){const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Return);const c=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||
this.rawToken.type===b.TokenType.EOF)&&this.rawToken.type!==b.TokenType.StringLiteral&&this.rawToken.type!==b.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ReturnStatement,argument:c,...this.getItemLocation(d)})};k.parseStatement=function(){switch(this.rawToken.type){case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:case b.TokenType.Template:case b.TokenType.Identifier:return this.parseExpressionStatement();
case b.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case b.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case b.Keywords.Break:return this.parseBreakStatement();case b.Keywords.Continue:return this.parseContinueStatement();case b.Keywords.For:return this.parseForStatement();case b.Keywords.Function:return this.parseFunctionDeclaration();
case b.Keywords.If:return this.parseIfStatement();case b.Keywords.Return:return this.parseReturnStatement();case b.Keywords.Var:return this.parseVariableDeclaration();case b.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};k.parseFormalParameters=function(){const d=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==b.TokenType.EOF;){const c=this.parseIdentifier();
c||this.throwUnexpectedToken({rawToken:this.rawToken,code:b.ParsingErrorCodes.IdentiferExpected});d.push(c);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return d};k.parseFunctionDeclaration=function(){(this.context.blockContext&h.Function)===h.Function&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&h.WhileLoop)!==h.WhileLoop&&(this.context.blockContext&h.IfClause)!==
h.IfClause||this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideBlock});const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Function);const c=this.parseIdentifier();c||this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidFunctionIdentifier});const x=this.parseFormalParameters(),e=this.context.blockContext;this.context.blockContext|=h.Function;const r=this.parseBlock();this.context.blockContext=e;return this.finalize({type:b.Syntax.FunctionDeclaration,id:c,params:x,
body:r,...this.getItemLocation(d)})};k.parseScript=function(){var d=this.captureStartMarker();const c=this.parseStatements();d=this.finalize({type:b.Syntax.Program,body:c,...this.getItemLocation(d)});this.options.tokens&&(d.tokens=this.tokens);this.options.tolerant&&(d.errors=this.errorHandler.errors);return d};k.parseExportDeclaration=function(){this.context.blockContext!==h.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleExportRootOnly});let d=null;const c=this.captureStartMarker();
this.expectKeyword(b.Keywords.Export);this.matchKeyword(b.Keywords.Var)?d=this.parseVariableDeclaration():this.matchKeyword("function")?d=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidExpression});return this.finalize({type:b.Syntax.ExportNamedDeclaration,declaration:d,specifiers:[],source:null,...this.getItemLocation(c)})};k.parseModuleSpecifier=function(){const d=this.captureStartMarker(),c=this.rawToken;if(c.type===b.TokenType.StringLiteral)return this.readNextRawToken(),
this.finalize({type:b.Syntax.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(d)});this.throwError(b.ParsingErrorCodes.InvalidModuleUri,d)};k.parseDefaultSpecifier=function(){const d=this.captureStartMarker(),c=this.parseIdentifier();c||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:b.Syntax.ImportDefaultSpecifier,local:c,...this.getItemLocation(d)})};k.parseImportDeclaration=function(){this.context.blockContext!==
h.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleImportRootOnly});const d=this.captureStartMarker();this.expectKeyword(b.Keywords.Import);const c=this.parseDefaultSpecifier();this.expectContextualKeyword(b.Keywords.From);const x=this.parseModuleSpecifier();return this.finalize({type:b.Syntax.ImportDeclaration,specifiers:[c],source:x,...this.getItemLocation(d)})};return n}();t.Parser=v;t.binaryOperatorPrecedence=D;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/comment-handler":function(){define(["exports",
"./types"],function(t,K){function q(b,g){return g?g.loc.end.line===b.loc.start.line&&g.loc.end.column<=b.loc.start.column:!1}let y=function(){function b(){this.comments=[];this._nodeStack=[];this._newComments=[]}var g=b.prototype;g.insertInnerComments=function(A){if(K.isBlockStatement(A)&&0===A.body.length){var D=[];for(let h=this._newComments.length-1;0<=h;--h){const C=this._newComments[h];A.range[1]>=C.range[0]&&(D.unshift(C),this._newComments.splice(h,1))}D.length&&(A.innerComments=D)}};g.attachTrailingComments=
function(A){if(A){var D=this._nodeStack[this._nodeStack.length-1];if(K.isBlockStatement(A)&&D.range[0]>=A.range[0]&&D.range[1]<=A.range[1])for(var h=this._newComments.length-1;0<=h;--h){var C=this._newComments[h];C.range[0]>=A.range[0]&&C.range[1]<=A.range[1]&&(D.trailingComments=[...(D.trailingComments??[]),C],this._newComments.splice(h,1))}h=[];if(0<this._newComments.length)for(C=this._newComments.length-1;0<=C;--C){const v=this._newComments[C];q(v,D)?(D.trailingComments=[...(D.trailingComments??
[]),v],this._newComments.splice(C,1)):q(v,A)&&(h.unshift(v),this._newComments.splice(C,1))}D?.trailingComments&&q(D.trailingComments[0],A)&&(h=[...h,...D.trailingComments],delete D.trailingComments);0<h.length&&(A.trailingComments=h)}};g.attachLeadingComments=function(A){if(A){for(var D;0<this._nodeStack.length;){var h=this._nodeStack[this._nodeStack.length-1];if(A.range[0]<=h.range[0])D=h,this._nodeStack.pop();else break}h=[];var C=[];if(D){var v=D.leadingComments?.length??0;for(--v;0<=v;--v){const n=
D.leadingComments[v];A.range[0]>=n.range[1]?(h.unshift(n),D.leadingComments.splice(v,1)):K.isVariableDeclarator(A)&&!K.isBlockComment(n)&&(C.unshift(n),D.leadingComments.splice(v,1))}0===D.leadingComments?.length&&delete D.leadingComments;h.length&&(A.leadingComments=h);C.length&&(A.trailingComments=[...C,...(A.trailingComments??[])])}else{for(D=this._newComments.length-1;0<=D;--D)C=this._newComments[D],A.range[0]>=C.range[0]&&(h.unshift(C),this._newComments.splice(D,1));h.length&&(A.leadingComments=
h)}}};g.attachComments=function(A){if(K.isProgram(A)&&0<A.body.length){const D=this._nodeStack[this._nodeStack.length-1];D?(D.trailingComments=[...(D.trailingComments??[]),...this._newComments],this._newComments.length=0,this._nodeStack.pop()):(A.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(A),this.attachLeadingComments(A),this.insertInnerComments(A),this._nodeStack.push(A)};g.collectComment=function(A){this.comments.push(A);this._newComments.push(A)};
return b}();t.CommentHandler=y;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(t,K){t.Keywords=void 0;(function(b){b.Break="break";b.Continue="continue";b.Else="else";b.False="false";b.For="for";b.From="from";b.Function="function";b.If="if";b.Import="import";b.Export="export";b.In="in";b.Null="null";b.Return="return";b.True="true";b.Var="var";b.While="while"})(t.Keywords||(t.Keywords=
{}));t.Syntax=void 0;(function(b){b.AssignmentExpression="AssignmentExpression";b.ArrayExpression="ArrayExpression";b.BlockComment="BlockComment";b.BlockStatement="BlockStatement";b.BinaryExpression="BinaryExpression";b.BreakStatement="BreakStatement";b.CallExpression="CallExpression";b.ContinueStatement="ContinueStatement";b.EmptyStatement="EmptyStatement";b.ExpressionStatement="ExpressionStatement";b.ExportNamedDeclaration="ExportNamedDeclaration";b.ExportSpecifier="ExportSpecifier";b.ForStatement=
"ForStatement";b.ForInStatement="ForInStatement";b.FunctionDeclaration="FunctionDeclaration";b.Identifier="Identifier";b.IfStatement="IfStatement";b.ImportDeclaration="ImportDeclaration";b.ImportDefaultSpecifier="ImportDefaultSpecifier";b.LineComment="LineComment";b.Literal="Literal";b.LogicalExpression="LogicalExpression";b.MemberExpression="MemberExpression";b.ObjectExpression="ObjectExpression";b.Program="Program";b.Property="Property";b.ReturnStatement="ReturnStatement";b.TemplateElement="TemplateElement";
b.TemplateLiteral="TemplateLiteral";b.UnaryExpression="UnaryExpression";b.UpdateExpression="UpdateExpression";b.VariableDeclaration="VariableDeclaration";b.VariableDeclarator="VariableDeclarator";b.WhileStatement="WhileStatement"})(t.Syntax||(t.Syntax={}));t.TokenType=void 0;(function(b){b[b.Unknown=0]="Unknown";b[b.BooleanLiteral=1]="BooleanLiteral";b[b.EOF=2]="EOF";b[b.Identifier=3]="Identifier";b[b.Keyword=4]="Keyword";b[b.NullLiteral=5]="NullLiteral";b[b.NumericLiteral=6]="NumericLiteral";b[b.Punctuator=
7]="Punctuator";b[b.StringLiteral=8]="StringLiteral";b[b.Template=10]="Template"})(t.TokenType||(t.TokenType={}));t.ParsingErrorCodes=void 0;(function(b){b.InvalidModuleUri="InvalidModuleUri";b.ForInOfLoopInitializer="ForInOfLoopInitializer";b.IdentiferExpected="IdentiferExpected";b.InvalidEscapedReservedWord="InvalidEscapedReservedWord";b.InvalidExpression="InvalidExpression";b.InvalidFunctionIdentifier="InvalidFunctionIdentifier";b.InvalidHexEscapeSequence="InvalidHexEscapeSequence";b.InvalidLeftHandSideInAssignment=
"InvalidLeftHandSideInAssignment";b.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";b.InvalidTemplateHead="InvalidTemplateHead";b.InvalidVariableAssignment="InvalidVariableAssignment";b.KeyMustBeString="KeyMustBeString";b.NoFunctionInsideBlock="NoFunctionInsideBlock";b.NoFunctionInsideFunction="NoFunctionInsideFunction";b.ModuleExportRootOnly="ModuleExportRootOnly";b.ModuleImportRootOnly="ModuleImportRootOnly";b.PunctuatorExpected="PunctuatorExpected";b.TemplateOctalLiteral="TemplateOctalLiteral";
b.UnexpectedBoolean="UnexpectedBoolean";b.UnexpectedEndOfScript="UnexpectedEndOfScript";b.UnexpectedIdentifier="UnexpectedIdentifier";b.UnexpectedKeyword="UnexpectedKeyword";b.UnexpectedNull="UnexpectedNull";b.UnexpectedNumber="UnexpectedNumber";b.UnexpectedPunctuator="UnexpectedPunctuator";b.UnexpectedString="UnexpectedString";b.UnexpectedTemplate="UnexpectedTemplate";b.UnexpectedToken="UnexpectedToken"})(t.ParsingErrorCodes||(t.ParsingErrorCodes={}));const q={[t.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",
[t.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[t.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",[t.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[t.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",[t.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[t.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",
[t.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[t.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[t.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[t.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",[t.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[t.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",
[t.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[t.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[t.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[t.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[t.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[t.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",
[t.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[t.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[t.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",[t.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",[t.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[t.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[t.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[t.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",
[t.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};let y=function(b){function g({code:A,index:D,line:h,column:C,len:v=0,description:n,data:k}){var d=b.call(this,`${n??A}`)||this;d.declaredRootClass="esri.arcade.lib.parsingerror";d.name="ParsingError";d.code=A;d.index=D;d.line=h;d.column=C;d.len=v;d.data=k;d.description=n;d.range={start:{line:h,column:C-1},end:{line:h,column:C+v}};Error.captureStackTrace?.(K._assertThisInitialized(d),g);return d}K._inheritsLoose(g,b);return g}(K._wrapNativeSuper(Error));
t.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");t.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");t.LogicalOperators=["||","\x26\x26"];t.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};t.ParsingError=y;t.ParsingErrorMessages=q;t.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");
t.UnaryOperators=["-","+","!","~"];t.UpdateOperators=["++","--"];t.isArrayExpression=function(b){return b?.type===t.Syntax.ArrayExpression};t.isAssignmentExpression=function(b){return b?.type===t.Syntax.AssignmentExpression};t.isBinaryExpression=function(b){return b?.type===t.Syntax.BinaryExpression};t.isBlockComment=function(b){return b?.type===t.Syntax.BlockComment};t.isBlockStatement=function(b){return b?.type===t.Syntax.BlockStatement};t.isBreakStatement=function(b){return b?.type===t.Syntax.BreakStatement};
t.isCallExpression=function(b){return b?.type===t.Syntax.CallExpression};t.isContinueStatement=function(b){return b?.type===t.Syntax.ContinueStatement};t.isEmptyStatement=function(b){return b?.type===t.Syntax.EmptyStatement};t.isExpression=function(b){switch(b?.type){case t.Syntax.ArrayExpression:case t.Syntax.AssignmentExpression:case t.Syntax.BinaryExpression:case t.Syntax.CallExpression:case t.Syntax.Identifier:case t.Syntax.Literal:case t.Syntax.LogicalExpression:case t.Syntax.MemberExpression:case t.Syntax.ObjectExpression:case t.Syntax.TemplateLiteral:case t.Syntax.UpdateExpression:case t.Syntax.UnaryExpression:return!0;
default:return!1}};t.isExpressionStatement=function(b){return b?.type===t.Syntax.ExpressionStatement};t.isForInStatement=function(b){return b?.type===t.Syntax.ForInStatement};t.isForStatement=function(b){return b?.type===t.Syntax.ForStatement};t.isFunctionDeclaration=function(b){return b?.type===t.Syntax.FunctionDeclaration};t.isIdentifier=function(b){return b?.type===t.Syntax.Identifier};t.isIfStatement=function(b){return b?.type===t.Syntax.IfStatement};t.isLiteral=function(b){return b?.type===t.Syntax.Literal};
t.isLogicalExpression=function(b){return b?.type===t.Syntax.LogicalExpression};t.isMemberExpression=function(b){return b?.type===t.Syntax.MemberExpression};t.isObjectExpression=function(b){return b?.type===t.Syntax.ObjectExpression};t.isProgram=function(b){return b?.type===t.Syntax.Program};t.isProperty=function(b){return b?.type===t.Syntax.Property};t.isReturnStatement=function(b){return b?.type===t.Syntax.ReturnStatement};t.isStatement=function(b){switch(b?.type){case t.Syntax.BlockStatement:case t.Syntax.BreakStatement:case t.Syntax.ContinueStatement:case t.Syntax.EmptyStatement:case t.Syntax.ExpressionStatement:case t.Syntax.ForInStatement:case t.Syntax.ForStatement:case t.Syntax.FunctionDeclaration:case t.Syntax.IfStatement:case t.Syntax.ReturnStatement:case t.Syntax.VariableDeclaration:return!0;
default:return!1}};t.isTemplateElement=function(b){return b?.type===t.Syntax.TemplateElement};t.isTemplateLiteral=function(b){return b?.type===t.Syntax.TemplateLiteral};t.isUnaryExpression=function(b){return b?.type===t.Syntax.UnaryExpression};t.isUpdateExpression=function(b){return b?.type===t.Syntax.UpdateExpression};t.isVariableDeclaration=function(b){return b?.type===t.Syntax.VariableDeclaration};t.isVariableDeclarator=function(b){return b?.type===t.Syntax.VariableDeclarator};Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/error-handler":function(){define(["exports","./types"],function(t,K){function q(b,g){b=K.ParsingErrorMessages[b];return g?b.replace(/\${(.*?)}/g,(A,D)=>g[D]?.toString()??""):b}let y=function(){function b(A=!1){this.tolerant=A;this.errors=[]}var g=b.prototype;g.recordError=function(A){this.errors.push(A)};g.tolerate=function(A){if(this.tolerant)this.recordError(A);else throw A;};g.throwError=function(A){A.description=A.description??q(A.code,
A.data);throw new K.ParsingError(A);};g.tolerateError=function(A){A.description=A.description??q(A.code,A.data);A=new K.ParsingError(A);if(this.tolerant)this.recordError(A);else throw A;};return b}();t.ErrorHandler=y;t.formatErrorDescription=q;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","./assert","./character","./types"],function(t,K,q,y){const b=[[],[],[]];y.UpdateOperators.forEach(A=>b[A.length-1].push(A));y.UnaryOperators.forEach(A=>
b[A.length-1].push(A));y.LogicalOperators.forEach(A=>b[A.length-1].push(A));y.AssignmentOperators.forEach(A=>b[A.length-1].push(A));y.BinaryOperators.forEach(A=>b[A.length-1].push(A));let g=function(){function A(h,C){this.source=h;this.errorHandler=C;this._length=h.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}var D=A.prototype;D.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};D.restoreState=
function(h){this.index=h.index;this.lineNumber=h.lineNumber;this.lineStart=h.lineStart;this.curlyStack=h.curlyStack};D.eof=function(){return this.index>=this._length};D.throwUnexpectedToken=function(h=y.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:h,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};D.tolerateUnexpectedToken=function(h=y.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:h,index:this.index,line:this.lineNumber,
column:this.index-this.lineStart+1})};D.skipSingleLineComment=function(h){const C=[],v=this.index-h,n={start:{line:this.lineNumber,column:this.index-this.lineStart-h},end:{line:0,column:0}};for(;!this.eof();){const k=this.source.charCodeAt(this.index);++this.index;if(q.Character.isLineTerminator(k))return n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart-1},C.push({multiLine:!1,start:v+h,end:this.index-1,range:[v,this.index-1],loc:n})),13===k&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,C}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},C.push({multiLine:!1,start:v+h,end:this.index,range:[v,this.index],loc:n}));return C};D.skipMultiLineComment=function(){const h=[],C=this.index-2,v={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const n=this.source.charCodeAt(this.index);if(q.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+
1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===n&&47===this.source.charCodeAt(this.index+1))return this.index+=2,v&&(v.end={line:this.lineNumber,column:this.index-this.lineStart},h.push({multiLine:!0,start:C+2,end:this.index-2,range:[C,this.index],loc:v})),h;++this.index}}v&&(v.end={line:this.lineNumber,column:this.index-this.lineStart},h.push({multiLine:!0,start:C+2,end:this.index,range:[C,this.index],loc:v}));this.tolerateUnexpectedToken();return h};D.scanComments=
function(){let h=[];for(;!this.eof();){var C=this.source.charCodeAt(this.index);if(q.Character.isWhiteSpace(C))++this.index;else if(q.Character.isLineTerminator(C))++this.index,13===C&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===C)if(C=this.source.charCodeAt(this.index+1),47===C)this.index+=2,C=this.skipSingleLineComment(2),h=[...h,...C];else if(42===C)this.index+=2,C=this.skipMultiLineComment(),h=[...h,...C];else break;else break}return h};
D.isKeyword=function(h){h=h.toLowerCase();switch(h.length){case 2:return h===y.Keywords.If||h===y.Keywords.In;case 3:return h===y.Keywords.Var||h===y.Keywords.For;case 4:return h===y.Keywords.Else;case 5:return h===y.Keywords.Break||h===y.Keywords.While;case 6:return h===y.Keywords.Return||h===y.Keywords.Import||h===y.Keywords.Export;case 8:return h===y.Keywords.Function||h===y.Keywords.Continue;default:return!1}};D.codePointAt=function(h){let C=this.source.charCodeAt(h);55296<=C&&56319>=C&&(h=this.source.charCodeAt(h+
1),56320<=h&&57343>=h&&(C=1024*(C-55296)+h-56320+65536));return C};D.scanHexEscape=function(h){h="u"===h?4:2;let C=0;for(let v=0;v<h;++v)if(!this.eof()&&q.Character.isHexDigit(this.source.charCodeAt(this.index)))C=16*C+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(C)};D.scanUnicodeCodePointEscape=function(){let h=this.source[this.index],C=0;for("}"===h&&this.throwUnexpectedToken();!this.eof();){h=this.source[this.index++];if(!q.Character.isHexDigit(h.charCodeAt(0)))break;
C=16*C+"0123456789abcdef".indexOf(h.toLowerCase())}(1114111<C||"}"!==h)&&this.throwUnexpectedToken();return q.Character.fromCodePoint(C)};D.getIdentifier=function(){const h=this.index++;for(;!this.eof();){const C=this.source.charCodeAt(this.index);if(92===C||55296<=C&&57343>C)return this.index=h,this.getComplexIdentifier();if(q.Character.isIdentifierPart(C))++this.index;else break}return this.source.slice(h,this.index)};D.getComplexIdentifier=function(){let h=this.codePointAt(this.index),C=q.Character.fromCodePoint(h);
this.index+=C.length;let v;92===h&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,v=this.scanUnicodeCodePointEscape()):(v=this.scanHexEscape("u"),null!==v&&"\\"!==v&&q.Character.isIdentifierStart(v.charCodeAt(0))||this.throwUnexpectedToken()),C=v);for(;!this.eof();){h=this.codePointAt(this.index);if(!q.Character.isIdentifierPart(h))break;v=q.Character.fromCodePoint(h);C+=v;this.index+=v.length;92===h&&(C=C.substring(0,
C.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,v=this.scanUnicodeCodePointEscape()):(v=this.scanHexEscape("u"),null!==v&&"\\"!==v&&q.Character.isIdentifierPart(v.charCodeAt(0))||this.throwUnexpectedToken()),C+=v)}return C};D.octalToDecimal=function(h){let C="0"!==h,v="01234567".indexOf(h);!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(C=!0,v=8*v+"01234567".indexOf(this.source[this.index++]),
"0123".includes(h)&&!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=8*v+"01234567".indexOf(this.source[this.index++])));return{code:v,octal:C}};D.scanIdentifier=function(){let h;const C=this.index,v=92===this.source.charCodeAt(C)?this.getComplexIdentifier():this.getIdentifier();h=1===v.length?y.TokenType.Identifier:this.isKeyword(v)?y.TokenType.Keyword:v.toLowerCase()===y.Keywords.Null?y.TokenType.NullLiteral:v.toLowerCase()===y.Keywords.True||v.toLowerCase()===y.Keywords.False?
y.TokenType.BooleanLiteral:y.TokenType.Identifier;if(h!==y.TokenType.Identifier&&C+v.length!==this.index){const n=this.index;this.index=C;this.tolerateUnexpectedToken(y.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=n}return{type:h,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}};D.scanPunctuator=function(){const h=this.index;let C=this.source[this.index];switch(C){case "(":case "{":"{"===C&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let v=b.length;0<v;v--)if(C=this.source.substring(this.index,this.index+v),b[v-1].includes(C)){this.index+=v;break}}this.index===h&&this.throwUnexpectedToken();return{type:y.TokenType.Punctuator,value:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};D.scanHexLiteral=function(h){let C="";for(;!this.eof()&&q.Character.isHexDigit(this.source.charCodeAt(this.index));)C+=
this.source[this.index++];0===C.length&&this.throwUnexpectedToken();q.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:y.TokenType.NumericLiteral,value:parseInt("0x"+C,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};D.scanBinaryLiteral=function(h){let C="";for(;!this.eof();){var v=this.source[this.index];if("0"!==v&&"1"!==v)break;C+=this.source[this.index++]}0===C.length&&this.throwUnexpectedToken();this.eof()||
(v=this.source.charCodeAt(this.index),(q.Character.isIdentifierStart(v)||q.Character.isDecimalDigit(v))&&this.throwUnexpectedToken());return{type:y.TokenType.NumericLiteral,value:parseInt(C,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};D.scanOctalLiteral=function(h,C){let v="",n=!1;q.Character.isOctalDigit(h.charCodeAt(0))?(n=!0,v="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&q.Character.isOctalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];
n||0!==v.length||this.throwUnexpectedToken();(q.Character.isIdentifierStart(this.source.charCodeAt(this.index))||q.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:y.TokenType.NumericLiteral,value:parseInt(v,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:C,end:this.index}};D.scanNumericLiteral=function(){const h=this.index;let C=this.source[h];K.assert(q.Character.isDecimalDigit(C.charCodeAt(0))||"."===C,"Numeric literal must start with a decimal digit or a decimal point");
let v="";if("."!==C){v=this.source[this.index++];C=this.source[this.index];if("0"===v){if("x"===C||"X"===C)return++this.index,this.scanHexLiteral(h);if("b"===C||"B"===C)return++this.index,this.scanBinaryLiteral(h);if("o"===C||"O"===C)return this.scanOctalLiteral(C,h)}for(;q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];C=this.source[this.index]}if("."===C){for(v+=this.source[this.index++];q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=
this.source[this.index++];C=this.source[this.index]}if("e"===C||"E"===C){v+=this.source[this.index++];C=this.source[this.index];if("+"===C||"-"===C)v+=this.source[this.index++];if(q.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;q.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];else this.throwUnexpectedToken()}q.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:y.TokenType.NumericLiteral,
value:parseFloat(v),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};D.scanStringLiteral=function(){const h=this.index;let C=this.source[h];K.assert("'"===C||'"'===C,"String literal must starts with a quote");++this.index;let v="";for(;!this.eof();){var n=this.source[this.index++];if(n===C){C="";break}if("\\"===n)if((n=this.source[this.index++])&&q.Character.isLineTerminator(n.charCodeAt(0)))++this.lineNumber,"\r"===n&&"\n"===this.source[this.index]&&++this.index,this.lineStart=
this.index;else switch(n){case "u":"{"===this.source[this.index]?(++this.index,v+=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape(n),null===n&&this.throwUnexpectedToken(),v+=n);break;case "x":n=this.scanHexEscape(n);null===n&&this.throwUnexpectedToken(y.ParsingErrorCodes.InvalidHexEscapeSequence);v+=n;break;case "n":v+="\n";break;case "r":v+="\r";break;case "t":v+="\t";break;case "b":v+="\b";break;case "f":v+="\f";break;case "v":v+="\v";break;case "8":case "9":v+=n;this.tolerateUnexpectedToken();
break;default:n&&q.Character.isOctalDigit(n.charCodeAt(0))?(n=this.octalToDecimal(n),v+=String.fromCharCode(n.code)):v+=n}else if(q.Character.isLineTerminator(n.charCodeAt(0)))break;else v+=n}""!==C&&(this.index=h,this.throwUnexpectedToken());return{type:y.TokenType.StringLiteral,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};D.scanTemplate=function(){let h="",C=!1;const v=this.index,n="`"===this.source[v];let k=!1,d=2;for(++this.index;!this.eof();){var c=this.source[this.index++];
if("`"===c){d=1;C=k=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;C=!0;break}h+=c}else if("\\"===c)if(c=this.source[this.index++],q.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "u":if("{"===this.source[this.index])++this.index,h+=this.scanUnicodeCodePointEscape();else{const x=
this.index,e=this.scanHexEscape(c);null!==e?h+=e:(this.index=x,h+=c)}break;case "x":c=this.scanHexEscape(c);null===c&&this.throwUnexpectedToken(y.ParsingErrorCodes.InvalidHexEscapeSequence);h+=c;break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\v";break;default:"0"===c?(q.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(y.ParsingErrorCodes.TemplateOctalLiteral),h+="\x00"):q.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(y.ParsingErrorCodes.TemplateOctalLiteral):
h+=c}else q.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,h+="\n"):h+=c}C||this.throwUnexpectedToken();n||this.curlyStack.pop();return{type:y.TokenType.Template,value:this.source.slice(v+1,this.index-d),cooked:h,head:n,tail:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}};D.lex=function(){if(this.eof())return{type:y.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,
start:this.index,end:this.index};const h=this.source.charCodeAt(this.index);return q.Character.isIdentifierStart(h)?this.scanIdentifier():40===h||41===h||59===h?this.scanPunctuator():39===h||34===h?this.scanStringLiteral():46===h?q.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():q.Character.isDecimalDigit(h)?this.scanNumericLiteral():96===h||125===h&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=h&&57343>
h&&q.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return A}();t.Scanner=g;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(t){t.assert=function(K,q){if(!K)throw Error("ASSERT: "+q);};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(t){var K=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
q=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const y={fromCodePoint(b){return 65536>b?String.fromCharCode(b):String.fromCharCode(55296+(b-65536>>10))+String.fromCharCode(56320+(b-65536&1023))},isWhiteSpace(b){return 32===b||9===b||11===b||12===b||160===b||5760<=b&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(b)},isLineTerminator(b){return 10===b||13===b||8232===b||8233===b},isIdentifierStart(b){return 36===b||95===b||65<=b&&90>=b||97<=b&&122>=b||92===b||128<=b&&K.test(y.fromCodePoint(b))},isIdentifierPart(b){return 36===
b||95===b||65<=b&&90>=b||97<=b&&122>=b||48<=b&&57>=b||92===b||128<=b&&q.test(y.fromCodePoint(b))},isDecimalDigit(b){return 48<=b&&57>=b},isHexDigit(b){return 48<=b&&57>=b||65<=b&&70>=b||97<=b&&102>=b},isOctalDigit(b){return 48<=b&&55>=b}};t.Character=y;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","./error-handler","./scanner","./types"],function(t,K,q,y){let b=function(){function g(D,h){this.errorHandler=new K.ErrorHandler;
this.errorHandler.tolerant=h?"boolean"===typeof h.tolerant&&h.tolerant:!1;this.scanner=new q.Scanner(D,this.errorHandler);this.trackComments=h?"boolean"===typeof h.comment&&h.comment:!1;this.buffer=[]}var A=g.prototype;A.errors=function(){return this.errorHandler.errors};A.getNextToken=function(){if(0===this.buffer.length){var D=this.scanner.scanComments();this.trackComments&&D&&D.forEach(h=>{const C=this.scanner.source.slice(h.start,h.end);this.buffer.push({type:h.multiLine?y.Syntax.BlockComment:
y.Syntax.LineComment,value:C,range:h.range,loc:h.loc})});if(!this.scanner.eof()){D={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const h=this.scanner.lex(),C={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};D={type:y.TokenNames[h.type],value:this.scanner.source.slice(h.start,h.end),range:[h.start,h.end],loc:{start:D,end:C}};this.buffer.push(D)}}return this.buffer.shift()};return g}();t.Tokenizer=b;Object.defineProperty(t,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(function(){let t=function(){function q(b){const g=this;g._keys=[];g._values=[];g.length=0;b&&b.forEach(A=>{g.set(A[0],A[1])})}var y=q.prototype;y.entries=function(){return[].slice.call(this.keys().map((b,g)=>[b,this._values[g]]))};y.keys=function(){return[].slice.call(this._keys)};y.values=function(){return[].slice.call(this._values)};y.has=function(b){return this._keys.includes(b)};y.get=function(b){b=this._keys.indexOf(b);
return-1<b?this._values[b]:null};y.deepGet=function(b){if(!b||!b.length)return null;const g=(A,D)=>null==A?null:D.length?g(A instanceof q?A.get(D[0]):A[D[0]],D.slice(1)):A;return g(this.get(b[0]),b.slice(1))};y.set=function(b,g){const A=this._keys.indexOf(b);-1<A?this._values[A]=g:(this._keys.push(b),this._values.push(g),this.length=this._values.length);return this};y.sortedSet=function(b,g,A,D){var h=this._keys.length;A=A||0;D=void 0!==D?D:h-1;if(0===h)return this._keys.push(b),this._values.push(g),
this;if(b===this._keys[A])return this._values.splice(A,0,g),this;if(b===this._keys[D])return this._values.splice(D,0,g),this;if(b>this._keys[D])return this._keys.splice(D+1,0,b),this._values.splice(D+1,0,g),this;if(b<this._keys[A])return this._values.splice(A,0,g),this._keys.splice(A,0,b),this;if(A>=D)return this;h=A+Math.floor((D-A)/2);return b<this._keys[h]?this.sortedSet(b,g,A,h-1):b>this._keys[h]?this.sortedSet(b,g,h+1,D):this};y.size=function(){return this.length};y.clear=function(){this._keys.length=
this.length=this._values.length=0;return this};y.delete=function(b){b=this._keys.indexOf(b);return-1<b?(this._keys.splice(b,1),this._values.splice(b,1),this.length=this._keys.length,!0):!1};y.forEach=function(b){this._keys.forEach((g,A)=>{b(this._values[A],g,A)})};y.map=function(b){return this.keys().map((g,A)=>b(this._values[A],g,A))};y.filter=function(b){const g=this;g._keys.forEach((A,D)=>{!1===b(g._values[D],A,D)&&g.delete(A)});return this};y.clone=function(){return new q(this.entries())};return q}(),
K=function(){function q(b=20){this._maxEntries=b;this._values=new t}var y=q.prototype;y.delete=function(b){this._values.has(b)&&this._values.delete(b)};y.get=function(b){let g=null;this._values.has(b)&&(g=this._values.get(b),this._values.delete(b),this._values.set(b,g));return g};y.put=function(b,g){if(this._values.size()>=this._maxEntries){const A=this._values.keys()[0];this._values.delete(A)}this._values.set(b,g)};return q}();return function(){function q(b=20){this._maxEntries=b;this._cache=new K(this._maxEntries)}
var y=q.prototype;y.clear=function(){this._cache=new K(this._maxEntries)};y.addToCache=function(b,g){this._cache.put(b,g)};y.removeFromCache=function(b){this._cache.delete(b)};y.getFromCache=function(b){return this._cache.get(b)};return q}()})},"esri/arcade/arcadeRuntime":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(t,K,q,y,b,g,A,D,h,C,v,n,k,d,c,x,e,r,z){function B(I,G){const L=[];for(let F=0;F<G.arguments.length;F++)L.push(l(I,G.arguments[F]));return L}function a(I,G,L){try{return!0===G.preparsed?L(I,null,G.arguments):L(I,G,B(I,G))}catch(F){throw F;}}function l(I,G){try{switch(G?.type){case "EmptyStatement":return h.voidOperation;case "VariableDeclarator":let ma=null===G.init?null:l(I,G.init);ma===h.voidOperation&&(ma=null);if("Identifier"!==G.id.type)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,
G);const pa=G.id.name.toLowerCase();null!=I.localScope?I.localScope[pa]={value:ma,valueset:!0,node:G.init}:I.globalScope[pa]={value:ma,valueset:!0,node:G.init};return h.voidOperation;case "VariableDeclaration":for(var L=0;L<G.declarations.length;L++)l(I,G.declarations[L]);return h.voidOperation;case "ImportDeclaration":const ta=G.specifiers[0].local.name.toLowerCase(),za=I.libraryResolver.loadLibrary(ta);L=null;I.libraryResolver._moduleSingletons?.has(za.uri)?L=I.libraryResolver._moduleSingletons.get(za.uri):
(L=new oa(za),L.loadModule(I),I.libraryResolver._moduleSingletons?.set(za.uri,L));I.globalScope[ta]={value:L,valueset:!0,node:G};return h.voidOperation;case "ExportNamedDeclaration":l(I,G.declaration);if("FunctionDeclaration"===G.declaration.type)I.exports[G.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===G.declaration.type)for(const Y of G.declaration.declarations)I.exports[Y.id.name.toLowerCase()]="variable";return h.voidOperation;case "BlockStatement":case "Program":a:{let Y=
h.voidOperation;for(L=0;L<G.body.length;L++)if(Y=l(I,G.body[L]),Y instanceof h.ReturnResult||Y===h.breakResult||Y===h.continueResult){var F=Y;break a}F=Y}return F;case "FunctionDeclaration":const Da=G.id.name.toLowerCase();I.globalScope[Da]={valueset:!0,node:null,value:new la(G,I)};return h.voidOperation;case "ReturnStatement":if(null===G.argument)var P=new h.ReturnResult(h.voidOperation);else{var O=l(I,G.argument);P=new h.ReturnResult(O)}return P;case "IfStatement":{const Y=l(I,G.test);if(!0===Y)var Q=
l(I,G.consequent);else if(!1===Y)Q=null!==G.alternate?l(I,G.alternate):h.voidOperation;else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,G);}return Q;case "ExpressionStatement":if("AssignmentExpression"===G.expression.type||"UpdateExpression"===G.expression.type)var ca=l(I,G.expression);else if("CallExpression"===G.expression.type){const Y=l(I,G.expression);ca=Y===h.voidOperation?h.voidOperation:new h.ImplicitResult(Y)}else{var ia=l(I,G.expression);ca=ia===h.voidOperation?
h.voidOperation:new h.ImplicitResult(ia)}return ca;case "AssignmentExpression":L=null;var U="";if("MemberExpression"===G.left.type){L=l(I,G.left.object);if(!0===G.left.computed)U=l(I,G.left.property);else if("Identifier"===G.left.property.type)U=G.left.property.name;else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);const Y=l(I,G.right);if(h.isArray(L))if(h.isNumber(U)){0>U&&(U=L.length+U);if(0>U||U>L.length)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,
G);if(U===L.length&&"\x3d"!==G.operator)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,G);L[U]=E(Y,G.operator,L[U],G,I)}else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(L instanceof b){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===L.hasField(U))L.setField(U,E(Y,G.operator,L.field(U),G,I));else{if("\x3d"!==G.operator)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FieldNotFound,
G,{key:U});L.setField(U,E(Y,G.operator,null,G,I))}}else if(h.isFeature(L)){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===L.hasField(U))L.setField(U,E(Y,G.operator,L.field(U),G,I));else{if("\x3d"!==G.operator)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FieldNotFound,G,{key:U});L.setField(U,E(Y,G.operator,null,G,I))}}else{if(h.isImmutableArray(L))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.Immutable,G);if(L instanceof
oa){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===L.hasGlobal(U))L.setGlobal(U,E(Y,G.operator,L.global(U),G,I));else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);}var p=h.voidOperation}else{L=G.left.name.toLowerCase();var u=l(I,G.right);if(null!=I.localScope&&void 0!==I.localScope[L])I.localScope[L]={value:E(u,
G.operator,I.localScope[L].value,G,I),valueset:!0,node:G.right},p=h.voidOperation;else if(void 0!==I.globalScope[L])I.globalScope[L]={value:E(u,G.operator,I.globalScope[L].value,G,I),valueset:!0,node:G.right},p=h.voidOperation;else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);}return p;case "UpdateExpression":{let Y;L=null;U="";if("MemberExpression"===G.argument.type){L=l(I,G.argument.object);!0===G.argument.computed?U=l(I,G.argument.property):"Identifier"===G.argument.property.type&&
(U=G.argument.property.name);if(h.isArray(L))if(h.isNumber(U)){0>U&&(U=L.length+U);if(0>U||U>=L.length)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,G);Y=h.toNumber(L[U]);L[U]="++"===G.operator?Y+1:Y-1}else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(L instanceof b){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===L.hasField(U))Y=h.toNumber(L.field(U)),L.setField(U,
"++"===G.operator?Y+1:Y-1);else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FieldNotFound,G);}else if(h.isFeature(L)){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===L.hasField(U))Y=h.toNumber(L.field(U)),L.setField(U,"++"===G.operator?Y+1:Y-1);else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FieldNotFound,G);}else{if(h.isImmutableArray(L))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.Immutable,
G);if(L instanceof oa){if(!1===h.isString(U))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===L.hasGlobal(U))Y=h.toNumber(L.global(U)),L.setGlobal(U,"++"===G.operator?Y+1:Y-1);else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidParameter,G);}var N=!1===G.prefix?Y:"++"===G.operator?Y+1:Y-1}else{L="Identifier"===G.argument.type?G.argument.name.toLowerCase():
"";if(!L)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);if(null!=I.localScope&&void 0!==I.localScope[L])Y=h.toNumber(I.localScope[L].value),I.localScope[L]={value:"++"===G.operator?Y+1:Y-1,valueset:!0,node:G},N=!1===G.prefix?Y:"++"===G.operator?Y+1:Y-1;else if(void 0!==I.globalScope[L])Y=h.toNumber(I.globalScope[L].value),I.globalScope[L]={value:"++"===G.operator?Y+1:Y-1,valueset:!0,node:G},N=!1===G.prefix?Y:"++"===G.operator?Y+1:Y-1;else throw new g.ArcadeExecutionError(I,
g.ExecutionErrorCodes.InvalidIdentifier,G);}}return N;case "BreakStatement":return h.breakResult;case "ContinueStatement":return h.continueResult;case "TemplateElement":return G.value?G.value.cooked:"";case "TemplateLiteral":u="";N=0;for(const Y of G.quasis)if(u+=Y.value?Y.value.cooked:"",!1===Y.tail){if(G.expressions[N]){var M=h;U=M.toString;var T=l(I,G.expressions[N]),fa=I;p=G;if(h.isFunctionParameter(T))throw new g.ArcadeExecutionError(fa,g.ExecutionErrorCodes.NoFunctionInTemplateLiteral,p);L=
U.call(M,T)}else L="";u+=L;N++}return u;case "ForStatement":null!==G.init&&l(I,G.init);fa={testResult:!0,lastAction:h.voidOperation};do b:{L=I;U=G;T=fa;if(null!==U.test){T.testResult=l(L,U.test);if(!1===T.testResult)break b;if(!0!==T.testResult)throw new g.ArcadeExecutionError(L,g.ExecutionErrorCodes.BooleanConditionRequired,U);}T.lastAction=l(L,U.body);T.lastAction===h.breakResult?T.testResult=!1:T.lastAction instanceof h.ReturnResult?T.testResult=!1:null!==U.update&&l(L,U.update)}while(!0===fa.testResult);
M=fa.lastAction instanceof h.ReturnResult?fa.lastAction:h.voidOperation;return M;case "ForInStatement":return m(I,G);case "WhileStatement":L=!0;var S=h.voidOperation;L=l(I,G.test);if(!1===L)var V=h.voidOperation;else{if(!0!==L)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,G);for(;!0===L;){S=l(I,G.body);if(S===h.breakResult)break;if(S instanceof h.ReturnResult)break;L=l(I,G.test);if(!0!==L&&!1!==L)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,
G);}V=S instanceof h.ReturnResult?S:h.voidOperation}return V;case "Identifier":return ea(I,G);case "MemberExpression":return f(I,G);case "Literal":return G.value;case "CallExpression":a:try{if("MemberExpression"===G.callee.type){const Y=l(I,G.callee.object);if(!(Y instanceof oa))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FuncionNotFound,G);const va=!1===G.callee.computed?G.callee.property.name:l(I,G.callee.property);if(!Y.hasGlobal(va))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FuncionNotFound,
G);const na=Y.global(va);if(!h.isFunctionParameter(na))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.CallNonFunction,G);var X=na.call(I,G)}else{if("Identifier"!==G.callee.type)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FuncionNotFound,G);if(null!=I.localScope&&void 0!==I.localScope[G.callee.name.toLowerCase()]){const Y=I.localScope[G.callee.name.toLowerCase()];if(h.isFunctionParameter(Y.value)){X=Y.value.call(I,G);break a}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.CallNonFunction,
G);}if(void 0!==I.globalScope[G.callee.name.toLowerCase()]){const Y=I.globalScope[G.callee.name.toLowerCase()];if(h.isFunctionParameter(Y.value)){X=Y.value.call(I,G);break a}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.CallNonFunction,G);}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.FuncionNotFound,G);}}catch(Y){throw Y;}return X;case "UnaryExpression":return H(I,G);case "BinaryExpression":return ha(I,G);case "LogicalExpression":return aa(I,G);case "ArrayExpression":try{L=
[];for(U=0;U<G.elements.length;U++){const Y=l(I,G.elements[U]);if(h.isFunctionParameter(Y))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.NoFunctionInArray,G);Y===h.voidOperation?L.push(null):L.push(Y)}var Z=L}catch(Y){throw Y;}return Z;case "ObjectExpression":L={};const Ja=new Map;for(U=0;U<G.properties.length;U++){const Y=l(I,G.properties[U]);if(h.isFunctionParameter(Y.value))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.NoFunctionInDictionary,G);if(!1===h.isString(Y.key))throw new g.ArcadeExecutionError(I,
g.ExecutionErrorCodes.KeyMustBeString,G);let va=Y.key.toString();const na=va.toLowerCase();Ja.has(na)?va=Ja.get(na):Ja.set(na,va);L[va]=Y.value===h.voidOperation?null:Y.value}const Ka=new b(L);Ka.immutable=!1;return Ka;case "Property":return{key:"Identifier"===G.key.type?G.key.name:l(I,G.key),value:l(I,G.value)};default:throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.Unrecognised,G);}}catch(ma){throw g.ensureArcadeExecutionError(I,G,ma);}}function m(I,G){var L=l(I,G.right);"VariableDeclaration"===
G.left.type&&l(I,G.left);let F=null;var P="";if("VariableDeclaration"===G.left.type){var O=G.left.declarations[0].id;"Identifier"===O.type&&(P=O.name)}else"Identifier"===G.left.type&&(P=G.left.name);if(!P)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);P=P.toLowerCase();null!=I.localScope&&void 0!==I.localScope[P]&&(F=I.localScope[P]);null===F&&void 0!==I.globalScope[P]&&(F=I.globalScope[P]);if(null===F)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,
G);if(h.isArray(L)||h.isString(L)){L=L.length;for(P=0;P<L;P++){F.value=P;O=l(I,G.body);if(O===h.breakResult)break;if(O instanceof h.ReturnResult)return O}return h.voidOperation}if(h.isImmutableArray(L)){for(P=0;P<L.length();P++){F.value=P;O=l(I,G.body);if(O===h.breakResult)break;if(O instanceof h.ReturnResult)return O}return h.voidOperation}if(L instanceof b||h.isFeature(L))for(L=L.keys(),P=0;P<L.length;P++){F.value=L[P];O=l(I,G.body);if(O===h.breakResult)break;if(O instanceof h.ReturnResult)return O}else return h.voidOperation}
function E(I,G,L,F,P){switch(G){case "\x3d":return I===h.voidOperation?null:I;case "/\x3d":return h.toNumber(L)/h.toNumber(I);case "*\x3d":return h.toNumber(L)*h.toNumber(I);case "-\x3d":return h.toNumber(L)-h.toNumber(I);case "+\x3d":return h.isString(L)||h.isString(I)?h.toString(L)+h.toString(I):h.toNumber(L)+h.toNumber(I);case "%\x3d":return h.toNumber(L)%h.toNumber(I);default:throw new g.ArcadeExecutionError(P,g.ExecutionErrorCodes.UnsupportedOperator,F);}}function f(I,G){try{const L=l(I,G.object);
if(null===L)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.MemberOfNull,G);if(!1===G.computed){if("Identifier"===G.property.type){if(L instanceof b||h.isFeature(L))return L.field(G.property.name);if(L instanceof r)return k.geometryMember(L,G.property.name,G,I);if(L instanceof oa){if(!L.hasGlobal(G.property.name))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);return L.global(G.property.name)}}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}let F=l(I,G.property);if(L instanceof b||h.isFeature(L)){if(h.isString(F))return L.field(F);throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(L instanceof oa){if(h.isString(F))return L.global(F);throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(L instanceof r){if(h.isString(F))return k.geometryMember(L,F,G,I);throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(h.isArray(L)){if(h.isNumber(F)&&
isFinite(F)&&Math.floor(F)===F){0>F&&(F=L.length+F);if(F>=L.length||0>F)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,G);return L[F]}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(h.isString(L)){if(h.isNumber(F)&&isFinite(F)&&Math.floor(F)===F){0>F&&(F=L.length+F);if(F>=L.length||0>F)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,G);return L[F]}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}if(h.isImmutableArray(L)&&h.isNumber(F)&&isFinite(F)&&Math.floor(F)===F){0>F&&(F=L.length()+F);if(F>=L.length()||0>F)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.OutOfBounds,G);return L.get(F)}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidMemberAccessKey,G);}catch(L){throw L;}}function H(I,G){try{const L=l(I,G.argument);if(h.isBoolean(L)){if("!"===G.operator)return!L;if("-"===G.operator)return-1*h.toNumber(L);if("+"===G.operator)return 1*h.toNumber(L);if("~"===G.operator)return~h.toNumber(L);
throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}if("~"===G.operator)return~h.toNumber(L);if("-"===G.operator)return-1*h.toNumber(L);if("+"===G.operator)return 1*h.toNumber(L);throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}catch(L){throw L;}}function ha(I,G){try{const L=[l(I,G.left),l(I,G.right)],F=L[0],P=L[1];switch(G.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return h.binaryOperator(h.toNumber(F),
h.toNumber(P),G.operator);case "\x3d\x3d":return h.equalityTest(F,P);case "!\x3d":return!h.equalityTest(F,P);case "\x3c":return h.greaterThanLessThan(F,P,G.operator);case "\x3e":return h.greaterThanLessThan(F,P,G.operator);case "\x3c\x3d":return h.greaterThanLessThan(F,P,G.operator);case "\x3e\x3d":return h.greaterThanLessThan(F,P,G.operator);case "+":return h.isString(F)||h.isString(P)?h.toString(F)+h.toString(P):h.toNumber(F)+h.toNumber(P);case "-":return h.toNumber(F)-h.toNumber(P);case "*":return h.toNumber(F)*
h.toNumber(P);case "/":return h.toNumber(F)/h.toNumber(P);case "%":return h.toNumber(F)%h.toNumber(P);default:throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.UnsupportedOperator,G);}}catch(L){throw L;}}function aa(I,G){try{const L=l(I,G.left);if(h.isBoolean(L))switch(G.operator){case "||":if(!0===L)return L;const F=l(I,G.right);if(h.isBoolean(F))return F;throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.LogicExpressionOrAnd,G);case "\x26\x26":if(!1===L)return L;const P=l(I,G.right);
if(h.isBoolean(P))return P;throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.LogicExpressionOrAnd,G);default:throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.LogicExpressionOrAnd,G);}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,G);}catch(L){throw L;}}function ea(I,G){let L;try{const F=G.name.toLowerCase();if(null!=I.localScope&&void 0!==I.localScope[F]){L=I.localScope[F];if(!0===L.valueset)return L.value;L.value=l(I,L.node);L.valueset=!0;return L.value}if(void 0!==
I.globalScope[F]){L=I.globalScope[F];if(!0===L.valueset)return L.value;L.value=l(I,L.node);L.valueset=!0;return L.value}throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.InvalidIdentifier,G);}catch(F){throw F;}}function sa(I,G,L,F){try{const P=l(I,G.arguments[L]);if(h.equalityTest(P,F))return l(I,G.arguments[L+1]);const O=G.arguments.length-L;return 1===O?l(I,G.arguments[L]):2===O?null:3===O?l(I,G.arguments[L+2]):sa(I,G,L+2,F)}catch(P){throw P;}}function Ha(I,G,L,F){try{if(!0===F)return l(I,
G.arguments[L+1]);if(3===G.arguments.length-L)return l(I,G.arguments[L+2]);const P=l(I,G.arguments[L+2]);if(!1===h.isBoolean(P))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,G.arguments[L+2]);return Ha(I,G,L+2,P)}catch(P){throw P;}}function ua(I,G,L,F){try{const P=I.body;if(L.length!==I.params.length)throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.WrongNumberOfParameters,F);if(null!=G.localScope)for(let Q=0;Q<L.length;Q++)G.localScope[I.params[Q].name.toLowerCase()]=
{value:L[Q],valueset:!0,node:null};const O=l(G,P);if(O instanceof h.ReturnResult)return O.value;if(O===h.breakResult)throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.UnexpectedToken,F);if(O===h.continueResult)throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.UnexpectedToken,F);return O instanceof h.ImplicitResult?O.value:O}catch(P){throw P;}}function xa(I,G,L){const F=new ya;I||(I={});G||(G={});const P=new b({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});
P.immutable=!1;F.textformatting={value:P,valueset:!0,node:null};for(const O in G)F[O]={value:new D.NativeFunction(G[O]),native:!0,valueset:!0,node:null};for(const O in I)F[O]=I[O]&&"esri.Graphic"===I[O].declaredClass?{value:A.createFromGraphic(I[O],L),valueset:!0,node:null}:{value:I[O],valueset:!0,node:null};return F}function ka(I){console.log(I)}function W(I){const G={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:a,evaluateIdentifier:ea};for(let L=0;L<I.length;L++)I[L].registerFunctions(G);
for(const L in G.functions)ra[L]={value:new D.NativeFunction(G.functions[L]),valueset:!0,node:null},ya.prototype[L]=ra[L];for(I=0;I<G.signatures.length;I++)C.addFunctionDeclaration(G.signatures[I],"sync")}let la=function(I){function G(F,P){var O=I.call(this)||this;O.definition=null;O.context=null;O.definition=F;O.context=P;return O}K._inheritsLoose(G,I);var L=G.prototype;L.createFunction=function(F){return(...P)=>{const O={spatialReference:this.context.spatialReference,console:this.context.console,
timeReference:this.context.timeReference?this.context.timeReference:null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:F.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<O.depthCounter.depth)throw new g.ArcadeExecutionError(F,g.ExecutionErrorCodes.MaximumCallDepth,null);return ua(this.definition,O,P,null)}};L.call=function(F,P){return a(F,P,(O,Q,ca)=>{O=
{spatialReference:F.spatialReference,globalScope:F.globalScope,depthCounter:{depth:F.depthCounter.depth+1},libraryResolver:F.libraryResolver,exports:F.exports,timeReference:F.timeReference??null,console:F.console,lrucache:F.lrucache,interceptor:F.interceptor,localScope:{}};if(64<O.depthCounter.depth)throw new g.ArcadeExecutionError(F,g.ExecutionErrorCodes.MaximumCallDepth,P);return ua(this.definition,O,ca,P)})};L.marshalledCall=function(F,P,O,Q){return Q(F,P,(ca,ia,U)=>{ca={spatialReference:F.spatialReference,
globalScope:O.globalScope,depthCounter:{depth:F.depthCounter.depth+1},libraryResolver:F.libraryResolver,exports:F.exports,console:F.console,timeReference:F.timeReference??null,lrucache:F.lrucache,interceptor:F.interceptor,localScope:{}};U=U.map(p=>!h.isFunctionParameter(p)||p instanceof D.ScopeMarshalledFunction?p:D.wrapModuleScopedResponse(p,F,Q));return D.wrapModuleScopedResponse(ua(this.definition,ca,U,P),O,Q)})};return G}(D.ArcadeFunction),oa=function(I){function G(F){return I.call(this,F)||this}
K._inheritsLoose(G,I);var L=G.prototype;L.global=function(F){F=this.executingContext.globalScope[F.toLowerCase()];F.valueset||(F.value=l(this.executingContext,F.node),F.valueset=!0);if(h.isFunctionParameter(F.value)&&!(F.value instanceof D.ScopeMarshalledFunction)){const P=new D.ScopeMarshalledFunction;P.fn=F.value;P.parameterEvaluator=a;P.context=this.executingContext;F.value=P}return F.value};L.setGlobal=function(F,P){if(h.isFunctionParameter(P))throw new g.ArcadeExecutionError(null,g.ExecutionErrorCodes.AssignModuleFunction,
null);this.executingContext.globalScope[F.toLowerCase()]={value:P,valueset:!0,node:null}};L.hasGlobal=function(F){void 0===this.executingContext.exports[F]&&(F=F.toLowerCase());return void 0!==this.executingContext.exports[F]?!0:!1};L.loadModule=function(F){let P=F.spatialReference;if(null===P||void 0===P)P=new z({wkid:102100});this.moduleScope=xa({},F.customfunctions,F.timeReference);this.executingContext={spatialReference:P,globalScope:this.moduleScope,localScope:null,libraryResolver:new y.ArcadeModuleLoader(F.libraryResolver._moduleSingletons,
this.source.syntax.loadedModules),exports:{},console:F.console?F.console:ka,timeReference:F.timeReference??null,lrucache:F.lrucache,interceptor:F.interceptor,depthCounter:{depth:1}};l(this.executingContext,this.source.syntax)};return G}(q.ArcadeModule);const ra={};n.registerFunctions(ra,a);e.registerFunctions(ra,a);c.registerFunctions(ra,a);k.registerFunctions(ra,a);x.registerFunctions(ra,a);d.registerFunctions(ra,a);ra.iif=function(I,G){try{h.pcCheck(null===G.arguments?[]:G.arguments,3,3,I,G);const L=
l(I,G.arguments[0]);if(!1===h.isBoolean(L))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,G);return!0===L?l(I,G.arguments[1]):l(I,G.arguments[2])}catch(L){throw L;}};ra.decode=function(I,G){try{if(2>G.arguments.length)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.WrongNumberOfParameters,G);if(2===G.arguments.length)return l(I,G.arguments[1]);if(0===(G.arguments.length-1)%2)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.WrongNumberOfParameters,
G);const L=l(I,G.arguments[0]);return sa(I,G,1,L)}catch(L){throw L;}};ra.when=function(I,G){try{if(3>G.arguments.length)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.WrongNumberOfParameters,G);if(0===G.arguments.length%2)throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.WrongNumberOfParameters,G);const L=l(I,G.arguments[0]);if(!1===h.isBoolean(L))throw new g.ArcadeExecutionError(I,g.ExecutionErrorCodes.BooleanConditionRequired,G.arguments[0]);return Ha(I,G,0,L)}catch(L){throw L;
}};for(const I in ra)ra[I]={value:new D.NativeFunction(ra[I]),valueset:!0,node:null};const ya=function(){};ya.prototype=ra;ya.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ya.prototype.pi={value:Math.PI,valueset:!0,node:null};q={fixSpatialReference:h.fixSpatialReference,parseArguments:B,standardFunction:a};W([v.ArrayFunctions]);t.executeScript=function(I,G){let L=G.spatialReference;if(null===L||void 0===L)L=new z({wkid:102100});let F=null;I.usesModules&&(F=new y.ArcadeModuleLoader(new Map,
I.loadedModules));const P=xa(G.vars,G.customfunctions,G.timeReference);G={spatialReference:L,globalScope:P,localScope:null,exports:{},libraryResolver:F,console:G.console?G.console:ka,timeReference:G.timeReference??null,lrucache:G.lrucache,interceptor:G.interceptor,depthCounter:{depth:1}};I=l(G,I);I instanceof h.ReturnResult&&(I=I.value);I instanceof h.ImplicitResult&&(I=I.value);I===h.voidOperation&&(I=null);if(I===h.breakResult)throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.IllegalResult,
null);if(I===h.continueResult)throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.IllegalResult,null);if(h.isFunctionParameter(I))throw new g.ArcadeExecutionError(G,g.ExecutionErrorCodes.IllegalResult,null);return I};t.extend=W;t.functionHelper=q;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../renderers/visualVariables/support/sizeVariableUtils ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(t,K,q,y,b,g,A,D,h,C,v,n,k){function d(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function c(a){if(!a)return null;try{return q.parseScript(a)}catch(l){}return null}function x(a,l){if(!a)return!1;
if("string"===typeof a)return l(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type||"pie-chart"===a.type){if("dot-density"===a.type){var m=a.attributes?.some(E=>l(E.valueExpression));if(m)return m}m=a.visualVariables;m=!!m&&m.some(E=>{let f=l(E.valueExpression);"size"===E.type&&(D.isSizeVariable(E.minSize)&&(f=f||l(E.minSize.valueExpression)),D.isSizeVariable(E.maxSize)&&(f=f||l(E.maxSize.valueExpression)));return f});return"valueExpression"in
a&&l(a.valueExpression)?!0:m}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!l(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(E=>l(E.expression))||Array.isArray(a.content)&&a.content.some(E=>"expression"===E.type&&l(E.expressionInfo?.expression)):!1}function e(a){a=c(a);return!!a&&q.scriptTouchesGeometry(a)}function r(a){a=c(a);return!!a&&q.scriptUsesGeometryEngine(a)}const z=/^\$(feature|aggregatedFeatures)\./i,
B={vars:{$feature:"any",$view:"any"},spatialReference:null};t.arcade=q.arcade;t.Dictionary=y;t.arcadeFeature=b;t.convertFeatureLayerToFeatureSet=function({layer:a,spatialReference:l,outFields:m,returnGeometry:E,lrucache:f,interceptor:H}){if(null===a)return null;const ha=q.featureSetUtils();return ha?ha.constructFeatureSet(a,l,m,E??!0,f,H):null};t.convertJsonToArcade=function(a,l){return y.convertJsonToArcade(a,l)};t.convertMapToFeatureSetCollection=function(a){if(null===a?.map)return null;const l=
q.featureSetUtils();return l?l.createFeatureSetCollectionFromMap(a.map,a.spatialReference,a.lrucache,a.interceptor):null};t.convertServiceUrlToWorkspace=function({url:a,spatialReference:l,lrucache:m,interceptor:E}){const f=q.featureSetUtils();return f?f.createFeatureSetCollectionFromService(a,l,m,E):null};t.createExecContext=function(a,l){return{vars:{$feature:null==a?new b:b.createFromGraphic(a,null),$view:l&&l.view},spatialReference:l&&l.sr}};t.createFeature=function(a,l,m){return b.createFromGraphicLikeObject(l,
a,m,null)};t.createFunction=function(a,l){a="string"===typeof a?c(a):a;if(!a)return null;try{return l=l||A.clone(B),q.compileScript(a,l)}catch(m){}return null};t.createSyntaxTree=c;t.dependsOnView=function(a){return q.referencesMember(a,"$view")};t.enableFeatureSetOperations=function(){return q.enableFeatureSetSupport()};t.enableGeometryOperations=function(){return q.enableGeometrySupport()};t.evalSyntaxTree=function(a,l){let m;try{m=q.executeScript(a,l)}catch(E){m=null}return m};t.executeAsyncFunction=
function(a,l){try{return a?a(l):Promise.resolve(null)}catch(m){return Promise.resolve(null)}};t.executeFunction=function(a,l){let m;try{m=a?a(l):null}catch(E){m=null}return m};t.extractFieldNames=function(a,l){if(!a)return[];a="string"===typeof a?c(a):a;if(!a)return[];let m=[];q.extractExpectedFieldLiterals(a).forEach(f=>{z.test(f)&&(f=f.replace(z,""),m.push(f))});const E=m.filter(f=>f.includes("*"));m=m.filter(f=>!E.includes(f));l&&E.forEach(f=>{const H=new RegExp(`^${f.split(/\*+/).map(d).join(".*")}$`,
"i");l.forEach(ha=>H.test(ha)?m.push(ha):null)});return[...(new Set(m.sort()))]};t.getArcadeType=function(a){return null==a?null:g.isArray(a)||g.isImmutableArray(a)?"array":g.isDate(a)?"date":g.isString(a)?"text":g.isBoolean(a)?"boolean":g.isNumber(a)?"number":a instanceof y?"dictionary":g.isFeature(a)?"feature":a instanceof h?"point":a instanceof C?"polygon":a instanceof v?"polyline":a instanceof n?"multipoint":a instanceof k?"extent":g.isFeatureSet(a)?"featureSet":g.isFeatureSetCollection(a)?"featureSetCollection":
null};t.getViewInfo=function(a){if(a&&(null!=a.spatialReference||null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new y({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};t.hasGeometryFunctions=function(a){return x(a,e)};t.hasGeometryOperations=function(a){return x(a,r)};t.hasVariable=function(a,l){return a?q.referencesMember(a,l):!1};t.loadScriptDependencies=function(a,l,m=[]){return q.loadScriptDependencies(a,l,m)};t.updateExecContext=function(a,
l){null!=a.vars&&(a.vars.$feature=l)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});