// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/screenUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(m,n,I,p,E,N,P,Q,O,x,v,G,l,t){function B(){B=n._asyncToGenerator(function*(k,q){if(!q)return[];const {field:b,field2:f,field3:g,fieldDelimiter:C}=k,d=k.valueExpression,a=k.normalizationType,e=k.normalizationField,r=k.normalizationTotal,A=[],H=k.viewInfoParams;let J=null,L=null;if(d){if(!y){const {arcadeUtils:M}=yield l.loadArcade();y=M}J=y.createFunction(d);L=H&&y.getViewInfo({viewingMode:H.viewingMode,scale:H.scale,spatialReference:new P(H.spatialReference)})}k=k.fieldInfos;const R=q[0]&&
"declaredClass"in q[0]&&"esri.Graphic"===q[0].declaredClass||!k?null:{fields:k};q.forEach(M=>{var T=M.attributes;if(d){var U=y.createExecContext(R?{...M,layer:R}:M,L);U=y.executeFunction(J,U)}else T&&(U=T[b],f&&(U=`${G.processNullValue(U)}${C}${G.processNullValue(T[f])}`,g&&(U=`${U}${C}${G.processNullValue(T[g])}`)));a&&"number"===typeof U&&isFinite(U)&&(T=T&&parseFloat(T[e]),U=G.getNormalizedValue(U,a,T,r));A.push(U)});return A});return B.apply(this,arguments)}function w(k,q){return new p(k,q)}function D(k,
q){k=E.isSome(k)?k:"";E.isSome(q)&&q&&(k=k?"("+k+") AND ("+q+")":q);return k}function F(k){const q=k.layer;return k.fields.filter(b=>!q.getField(b))}function z(k){const q=k.layer;return k.fields.filter(b=>{b=q.getFieldUsageInfo(b);return!b||!b.supportsStatistics})}let y=null;m.calculateHeatmapStats=function(k,q=18,b,f,g,C){const d=new Float64Array(g*C);q=Math.round(N.pt2px(q));let a=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;var r=0;let A=0,H=0,J=0;b=v.createValueFunction(f,b);for(const {geometry:R,
attributes:M}of k){const {x:T,y:U}=R;k=Math.max(0,T-q);r=Math.max(0,U-q);f=Math.min(C,U+q);const ea=Math.min(g,T+q),Y=+b(M);for(let V=r;V<f;V++)for(let W=k;W<ea;W++){r=V*g+W;const Z=v.evaluateDensityKernel(W-T,V-U,q);var L=d[r];r=d[r]+=Z*Y;L=r-L;A+=L;H+=L*L;r<a&&(a=r);r>e&&(e=r);J++}}return J?{mean:A/J,stdDev:Math.sqrt((H-A*A/J)/J),min:a,max:e,mid:(e-a)/2,count:J}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};m.createError=w;m.getDataValues=function(k,q){return B.apply(this,arguments)};m.getRangeExpr=
function(k,q,b){q=null!=q?k+" \x3e\x3d "+q:"";k=null!=b?k+" \x3c\x3d "+b:"";b="";return(b=q&&k?D(q,k):q||k)?"("+b+")":""};m.getSQLFilterForNormalization=function(k){const q=k.field,b=k.normalizationType;k=k.normalizationField;let f;if("field"===b)f="(NOT "+k+" \x3d 0)";else if("log"===b||"natural-log"===b||"square-root"===b)f=`(${q} > 0)`;return f};m.getSumOfAttributesExpr=function(k,q,b){const f=[],g=[],C=[],d=[],a=[];k.forEach((A,H)=>{const J=A.field?"field":"expression",L=A.field||A.valueExpression;
A.field?(a.push(L),g.push(`var ${J}${H} = Number($feature["${L}"]);`)):(f.push(`function getValueForExpr${H}() {\n  ${L} \n}`),g.push(`var ${J}${H} = Number(getValueForExpr${H}());`));b||C.push(`${J}${H} = IIf(${J}${H} < 0, 0, ${J}${H});`);d.push(`${J}${H}`)});k="return sum;";const e=f.length?null:a.reduce((A,H)=>`${A} + ${H}`);let r=null;q||b?q?b||(k="return IIf(sum \x3e\x3d 0, sum, null);",e&&(r=`(( ${e} ) >= 0)`)):(k="return IIf(sum !\x3d 0, sum, null);",e&&(r=`(( ${e} ) <> 0)`)):(k="return IIf(sum \x3e 0, sum, null);",
e&&(r=`(( ${e} ) > 0)`));return{valueExpression:[f.length?f.join("\n"):"",g.join("\n"),C.join("\n"),`var sum = ${d.join(" + ")};`,k].filter(Boolean).join("\n\n"),sqlExpression:e,sqlWhere:r}};m.mergeWhereClauses=D;m.quantizeFeatures=function(k,q,b,f){const g=O.isWrappable(b)?O.getInfo(b):null,C=g?Math.round((g.valid[1]-g.valid[0])/q.scale[0]):null;return k.map(d=>{const a=new t(E.unwrap(d.geometry));Q.quantizePoint(q,a,a,a.hasZ,a.hasM);if(g){var e=f[0];0>a.x?a.x+=C:a.x>e&&(a.x-=C)}d.geometry=a;return d})};
m.verifyBasicFieldValidity=function(k,q,b){const f=F({layer:k,fields:q});if(f.length)return w(b,"Unknown fields: "+f.join(", ")+". You can only use fields defined in the layer schema");k=z({layer:k,fields:q});if(k.length)return w(b,"Unsupported fields: "+k.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};m.verifyFieldType=function(k,q,b,f){let g=null;q?q.name!==k.objectIdField&&f.includes(q.type)||(g=w(b,"'field' should be one of these types: "+
f.join(","))):g=w(b,"'field' is not defined in the layer schema");return g};m.verifyFilterValidty=function(k,q){if(k&&"intersects"!==k.spatialRelationship)return w(q,"Only 'intersects' spatialRelationship is supported for featureFilter")};m.verifyNumericField=function(k,q,b){let f;q?q.name!==k.objectIdField&&x.isNumericField(q)||(f=w(b,"'field' should be one of these numeric types: "+x.numericTypes.join(","))):f=w(b,"'field' is not defined in the layer schema");return f};Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(m){function n(p){return p?72*p/96:0}const I=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;m.castRenderScreenPointArray=function(p){return p};m.castRenderScreenPointArray3=function(p){return p};m.castScreenPointArray=function(p){return p};m.createRenderScreenPoint=function(p=0,E=0){return{x:p,y:E}};m.createRenderScreenPointArray=function(p=0,E=0){return[p,E]};m.createRenderScreenPointArray3=function(p=0,E=0,N=0){return[p,E,N]};
m.createScreenPoint=function(p=0,E=0){return{x:p,y:E}};m.createScreenPointArray=function(p=0,E=0){return[p,E]};m.pt2px=function(p){return p?p/72*96:0};m.px2pt=n;m.screenPointArrayToObject=function(p,E){return E?(E.x=p[0],E.y=p[1],E):{x:p[0],y:p[1]}};m.screenPointObjectToArray=function(p,E){return E?(E[0]=p.x,E[1]=p.y,2<E.length&&(E[2]=0),E):[p.x,p.y]};m.toPt=function(p){if("string"===typeof p){var E=p.match(I);if(E){var N=Number(E[1]);E=E[3]&&E[3].toLowerCase();p="-"===p.charAt(0);N="px"===E?n(N):
N;return p?-N:N}console.warn("screenUtils.toPt: input not recognized!");return null}return p};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(m,n,I){function p({scale:d,translate:a},e){return Math.round((e-a[0])/d[0])}function E({scale:d,translate:a},e){return Math.round((a[1]-e)/d[1])}function N(d,a,e){const r=[];let A,H,J,L;for(let R=0;R<e.length;R++){const M=e[R];if(0<
R){if(J=p(d,M[0]),L=E(d,M[1]),J!==A||L!==H)r.push(a(M,J-A,L-H)),A=J,H=L}else A=p(d,M[0]),H=E(d,M[1]),r.push(a(M,A,H))}return 0<r.length?r:null}function P(d,a,e,r){return N(d,e?r?C:g:r?g:f,a)}function Q(d,a,e,r){const A=[];e=e?r?C:g:r?g:f;for(r=0;r<a.length;r++){const H=N(d,e,a[r]);H&&3<=H.length&&A.push(H)}return A.length?A:null}function O(d,a,e,r){const A=[];e=e?r?C:g:r?g:f;for(r=0;r<a.length;r++){const H=N(d,e,a[r]);H&&2<=H.length&&A.push(H)}return A.length?A:null}function x({scale:d,translate:a},
e){return e*d[0]+a[0]}function v({scale:d,translate:a},e){return a[1]-e*d[1]}function G(d,a,e){const r=Array(e.length);if(!e.length)return r;const [A,H]=d.scale;let J=x(d,e[0][0]);d=v(d,e[0][1]);r[0]=a(e[0],J,d);for(let L=1;L<e.length;L++){const R=e[L];J+=R[0]*A;d-=R[1]*H;r[L]=a(R,J,d)}return r}function l(d,a,e){const r=Array(e.length);for(let A=0;A<e.length;A++)r[A]=G(d,a,e[A]);return r}function t(d,a,e,r){return G(d,e?r?C:g:r?g:f,a)}function B(d,a,e,r){return l(d,e?r?C:g:r?g:f,a)}function w(d,a,
e,r){return l(d,e?r?C:g:r?g:f,a)}function D(d,a,e){let [r,A]=e[0],H=Math.min(r,a[0]),J=Math.min(A,a[1]),L=Math.max(r,a[2]);a=Math.max(A,a[3]);for(let R=1;R<e.length;R++){const [M,T]=e[R];r+=M;A+=T;0>M&&(H=Math.min(H,r));0<M&&(L=Math.max(L,r));0>T?J=Math.min(J,A):0<T&&(a=Math.max(a,A))}d[0]=H;d[1]=J;d[2]=L;d[3]=a;return d}function F(d,a){if(!a.length)return null;d[0]=d[1]=Number.POSITIVE_INFINITY;d[2]=d[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<a.length;e++)D(d,d,a[e]);return d}function z(d,a,e,r,
A){a.xmin=p(d,e.xmin);a.ymin=E(d,e.ymin);a.xmax=p(d,e.xmax);a.ymax=E(d,e.ymax);a!==e&&(r&&(a.zmin=e.zmin,a.zmax=e.zmax),A&&(a.mmin=e.mmin,a.mmax=e.mmax));return a}function y(d,a,e,r,A){a.points=P(d,e.points,r,A)??[];return a}function k(d,a,e,r,A){a.x=p(d,e.x);a.y=E(d,e.y);a!==e&&(r&&(a.z=e.z),A&&(a.m=e.m));return a}function q(d,a,e,r,A){d=Q(d,e.rings,r,A);if(!d)return null;a.rings=d;return a}function b(d,a,e,r,A){d=O(d,e.paths,r,A);if(!d)return null;a.paths=d;return a}const f=(d,a,e)=>[a,e],g=(d,
a,e)=>[a,e,d[2]],C=(d,a,e)=>[a,e,d[2],d[3]];m.equals=function(d,a){if(d===a||null==d&&null==a)return!0;if(null==d||null==a)return!1;let e,r,A,H;d&&"upperLeft"===d.originPosition?(e=d.translate[0],r=d.translate[1],d=d.scale[0]):(e=n.isSome(d.extent)?d.extent.xmin:0,r=n.isSome(d.extent)?d.extent.ymax:0,d=d.tolerance);a&&"upperLeft"===a.originPosition?(A=a.translate[0],H=a.translate[1],a=a.scale[0]):(A=n.isSome(a.extent)?a.extent.xmin:0,H=n.isSome(a.extent)?a.extent.ymax:0,a=a.tolerance);return e===
A&&r===H&&d===a};m.getQuantizedBoundsCoordsArray=D;m.getQuantizedBoundsCoordsArrayArray=F;m.getQuantizedBoundsPaths=function(d){return F([0,0,0,0],d)};m.getQuantizedBoundsPoints=function(d){const a=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return D(a,a,d)};m.getQuantizedBoundsRings=function(d){return F([0,0,0,0],d)};m.quantizeBounds=function(d,a,e){a[0]=p(d,e[0]);a[3]=E(d,e[1]);a[2]=p(d,e[2]);a[1]=E(d,e[3]);return a};m.quantizeExtent=z;m.quantizeGeometry=
function(d,a){return d&&a?I.isPoint(a)?k(d,{},a,!1,!1):I.isPolyline(a)?b(d,{},a,!1,!1):I.isPolygon(a)?q(d,{},a,!1,!1):I.isMultipoint(a)?y(d,{},a,!1,!1):I.isExtent(a)?z(d,{},a,!1,!1):null:null};m.quantizeMultipoint=y;m.quantizePaths=O;m.quantizePoint=k;m.quantizePoints=P;m.quantizePolygon=q;m.quantizePolyline=b;m.quantizeRings=Q;m.quantizeX=p;m.quantizeY=E;m.toQuantizationTransform=function(d){return d?{originPosition:"upper-left"===d.originPosition?"upperLeft":"lower-left"===d.originPosition?"lowerLeft":
d.originPosition,scale:d.tolerance?[d.tolerance,d.tolerance]:[1,1],translate:n.isSome(d.extent)?[d.extent.xmin,d.extent.ymax]:[0,0]}:null};m.unquantizeBounds=function(d,a,e){return e?(a[0]=x(d,e[0]),a[1]=v(d,e[3]),a[2]=x(d,e[2]),a[3]=v(d,e[1]),a):[x(d,a[0]),v(d,a[3]),x(d,a[2]),v(d,a[1])]};m.unquantizeCoordsArray=G;m.unquantizeCoordsArrayArray=l;m.unquantizeExtent=function(d,a,e,r,A){a.xmin=x(d,e.xmin);a.ymin=v(d,e.ymin);a.xmax=x(d,e.xmax);a.ymax=v(d,e.ymax);a!==e&&(r&&(a.zmin=e.zmin,a.zmax=e.zmax),
A&&(a.mmin=e.mmin,a.mmax=e.mmax));return a};m.unquantizeMultipoint=function(d,a,e,r,A){n.isSome(e)&&(a.points=t(d,e.points,r,A));return a};m.unquantizePaths=B;m.unquantizePoint=function(d,a,e,r,A){if(n.isNone(e))return a;a.x=x(d,e.x);a.y=v(d,e.y);a!==e&&(r&&(a.z=e.z),A&&(a.m=e.m));return a};m.unquantizePoints=t;m.unquantizePolygon=function(d,a,e,r,A){n.isSome(e)&&(a.rings=w(d,e.rings,r,A));return a};m.unquantizePolyline=function(d,a,e,r,A){n.isSome(e)&&(a.paths=B(d,e.paths,r,A));return a};m.unquantizeRings=
w;m.unquantizeX=x;m.unquantizeY=v;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(m,n,I,p,E,N,P,Q){function O(c,h,u){if(c)for(const K of c)(c=(c=N.getDeepValue(K,h))&&"function"!==typeof c&&u.get(c))&&N.setDeepValue(K,c.name,h)}function x(c,h){if(!c||!h)return[];
fa.clear();v(fa,c,h);return Array.from(fa).sort()}function v(c,h,u){if(u)if(h?.fields?.length)if(u.includes("*"))for(const {name:K}of h.fields)c.add(K);else for(const K of u)G(c,h,K);else if(u.includes("*"))c.clear(),c.add("*");else for(const K of u)null!=K&&c.add(K)}function G(c,h,u){"string"===typeof u&&(h?(h=h.get(u))&&c.add(h.name):c.add(u))}function l(c,h,u){return t.apply(this,arguments)}function t(){t=I._asyncToGenerator(function*(c,h,u){if(u){var {arcadeUtils:K}=yield Q.loadArcade();u=K.extractFieldNames(u,
h?.fields?.map(S=>S.name));for(const S of u)G(c,h,S)}});return t.apply(this,arguments)}function B(c,h,u){return w.apply(this,arguments)}function w(){w=I._asyncToGenerator(function*(c,h,u){if(u&&"1\x3d1"!==u){const K=(yield new Promise((S,X)=>m(["../../core/sql/WhereClause"],S,X))).WhereClause.create(u,h);if(!K.isStandardized)throw new p("fieldUtils:collectFilterFields","Where clause is not standardized",{where:u});v(c,h,K.fieldNames)}});return w.apply(this,arguments)}function D(c,h){for(const u of c)if(u&&
u.valueType&&u.valueType===h)return u.name;return null}function F(){F=I._asyncToGenerator(function*(c){if(!c)return[];const h=new Set;yield z(h,c);return Array.from(h).sort()});return F.apply(this,arguments)}function z(c,h){return y.apply(this,arguments)}function y(){y=I._asyncToGenerator(function*(c,h){if(h){var u=h.elevationInfo?.featureExpressionInfo;if(u)return u.collectRequiredFields(c,h.fieldsIndex)}});return y.apply(this,arguments)}function k(){k=I._asyncToGenerator(function*(c,h,u){if(h&&
u&&"fields"in u){var K=[];K.push(q(c,h,u.popupTemplate));u.fields&&K.push(...u.fields.map(function(){var S=I._asyncToGenerator(function*(X){X.onStatisticExpression?l(c,h.fieldsIndex,X.onStatisticExpression.expression):c.add(X.onStatisticField)});return function(X){return S.apply(this,arguments)}}()));yield Promise.all(K)}});return k.apply(this,arguments)}function q(c,h,u){return b.apply(this,arguments)}function b(){b=I._asyncToGenerator(function*(c,h,u){const K=[];u?.expressionInfos&&K.push(...u.expressionInfos.map(S=>
l(c,h.fieldsIndex,S.expression)));u=u?.content;if(Array.isArray(u))for(const S of u)"expression"===S.type&&S.expressionInfo&&K.push(l(c,h.fieldsIndex,S.expressionInfo.expression));yield Promise.all(K)});return b.apply(this,arguments)}function f(){f=I._asyncToGenerator(function*(c,h,u){h&&(h.timeInfo&&E.isSome(u)&&u.timeExtent&&v(c,h.fieldsIndex,[h.timeInfo.startField,h.timeInfo.endField]),h.floorInfo&&v(c,h.fieldsIndex,[h.floorInfo.floorField]),E.isSome(u)&&E.isSome(u.where)&&(yield B(c,h.fieldsIndex,
u.where)))});return f.apply(this,arguments)}function g(){g=I._asyncToGenerator(function*(c,h,u){h&&u&&(yield Promise.all(u.map(K=>C(c,h,K))))});return g.apply(this,arguments)}function C(c,h,u){return d.apply(this,arguments)}function d(){d=I._asyncToGenerator(function*(c,h,u){h&&u&&(u.valueExpression?yield l(c,h.fieldsIndex,u.valueExpression):u.field&&G(c,h.fieldsIndex,u.field))});return d.apply(this,arguments)}function a(){a=I._asyncToGenerator(function*(c){if(!c)return[];const h="timeInfo"in c&&
c.timeInfo;return h?x(c.fieldsIndex,[c.trackIdField,h.startField,h.endField]):[]});return a.apply(this,arguments)}function e(){e=I._asyncToGenerator(function*(c){if(!c)return[];const h=new Set;yield r(h,c);return Array.from(h).sort()});return e.apply(this,arguments)}function r(c,h){return A.apply(this,arguments)}function A(){A=I._asyncToGenerator(function*(c,h){const {labelingInfo:u,fieldsIndex:K}=h;u&&u.length&&(yield Promise.all(u.map(S=>H(c,K,S))))});return A.apply(this,arguments)}function H(c,
h,u){return J.apply(this,arguments)}function J(){J=I._asyncToGenerator(function*(c,h,u){if(u){var K=u.getLabelExpression();u=u.where;"arcade"===K.type?yield l(c,h,K.expression):(K=K.expression.match(/{[^}]*}/g))&&K.forEach(S=>{G(c,h,S.slice(1,-1))});yield B(c,h,u)}});return J.apply(this,arguments)}function L(c){return"number"===typeof c&&!isNaN(c)&&isFinite(c)}function R(c){return null===c||L(c)}function M(c){return null===c||aa(c)}function T(c){return null!=c&&"string"===typeof c}function U(c){return null===
c||T(c)}function ea(){return!0}function Y(c,h){let u;switch(c.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":u=c.nullable?M:aa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":u=c.nullable?R:L;break;case "string":case "esriFieldTypeString":u=c.nullable?U:T;break;default:u=ea}return 1===arguments.length?u:u(h)}function V(c){return null!=
c&&oa.has(c.type)}function W(c,h){return null==c||c.nullable&&null===h?null:V(c)&&!Z(c.type,Number(h))?n.NumericRangeValidationError.OUT_OF_RANGE:Y(c,h)?c.domain?P.validateDomainValue(c.domain,h):null:n.TypeValidationError.INVALID_TYPE}function Z(c,h){c="string"===typeof c?ha(c):c;if(!c)return!1;const u=c.min,K=c.max;return c.isInteger?aa(h)&&h>=u&&h<=K:h>=u&&h<=K}function ha(c){switch(c){case "esriFieldTypeSmallInteger":case "small-integer":return ba;case "esriFieldTypeInteger":case "integer":return ca;
case "esriFieldTypeSingle":case "single":return da;case "esriFieldTypeDouble":case "double":return ja}}function ka(c,h,u){if(!h||!h.attributes||!c){if(E.isSome(u))for(var K of c??[])u.add(K);return!0}h=h.attributes;K=!1;for(const S of c)if(!(S in h))if(K=!0,E.isSome(u))u.add(S);else break;return K}function ia(){ia=I._asyncToGenerator(function*(c,h){const u=new Set;for(const K of h)yield l(u,c.fieldsIndex,K);return Array.from(u).sort()});return ia.apply(this,arguments)}const pa=/^([0-9])/,qa=/[^a-z0-9_\u0080-\uffff]/gi,
ra=/_{2,}/g,sa=/^_/,ta=/_$/,la="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),ma=["field","normalizationField"],fa=new Set,aa=(()=>"isInteger"in Number?Number.isInteger:c=>"number"===typeof c&&isFinite(c)&&Math.floor(c)===c)(),na=["integer","small-integer","single","double"],oa=new Set([...na,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]);n.NumericRangeValidationError=void 0;(n.NumericRangeValidationError||(n.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";n.TypeValidationError=void 0;(n.TypeValidationError||(n.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ba={min:-32768,max:32767,isInteger:!0},ca={min:-2147483648,max:2147483647,isInteger:!0},da={min:-3.4E38,max:1.2E38,isInteger:!1},ja={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,
isInteger:!1};n.collectArcadeFieldNames=l;n.collectElevationFields=z;n.collectFeatureReductionFields=function(c,h,u){return k.apply(this,arguments)};n.collectField=G;n.collectFields=v;n.collectFilterFields=function(c,h,u){return f.apply(this,arguments)};n.collectLabelingFields=r;n.collectOrderByInfos=function(c,h,u){return g.apply(this,arguments)};n.collectPopupTemplateFields=q;n.doubleRange=ja;n.featureHasFields=function(c,h){return!ka(c,h,null)};n.fixFields=x;n.fixRendererFields=function(c,h){if(null!=
c&&null!=h)for(const u of Array.isArray(c)?c:[c])if(O(la,u,h),"visualVariables"in u&&u.visualVariables)for(const K of u.visualVariables)O(ma,K,h)};n.fixTimeInfoFields=function(c,h){if(null!=c&&h?.fields?.length)if("startField"in c){var u=h.get(c.startField);h=h.get(c.endField);c.startField=u?.name??null;c.endField=h?.name??null}else u=h.get(c.startTimeField),h=h.get(c.endTimeField),c.startTimeField=u?.name??null,c.endTimeField=h?.name??null};n.getDisplayFieldName=function({displayField:c,fields:h}){if(c)return c;
if(!h||!h.length)return null;if(!(c=D(h,"name-or-title")||D(h,"unique-identifier")||D(h,"type-or-category")))a:{for(const u of h)if(u&&u.name&&(h=u.name.toLowerCase(),h.includes("name")||h.includes("title"))){c=u.name;break a}c=null}return c};n.getElevationFields=function(c){return F.apply(this,arguments)};n.getExpressionFields=function(c,h){return ia.apply(this,arguments)};n.getFeatureEditFields=function(c){if(!c)return[];const h="editFieldsInfo"in c&&c.editFieldsInfo;return h?x(c.fieldsIndex,[h&&
h.creatorField,h&&h.creationDateField,h&&h.editorField,h&&h.editDateField]):[]};n.getFeatureGeometryFields=function(c){if(!c)return[];const h=c.geometryFieldsInfo;return h?x(c.fieldsIndex,[h.shapeAreaField,h.shapeLengthField]):[]};n.getFieldDefaultValue=function(c){const h=c.defaultValue;if(void 0!==h&&Y(c,h))return h;if(c.nullable)return null};n.getFieldRange=function(c){const h=P.getDomainRange(c.domain);if(h)return h;if(V(c))return ha(c.type)};n.getLabelingFields=function(c){return e.apply(this,
arguments)};n.getNumericTypeForValue=function(c){if(!L(c))return null;if(aa(c)){if(c>=ba.min&&c<=ba.max)return"esriFieldTypeSmallInteger";if(c>=ca.min&&c<=ca.max)return"esriFieldTypeInteger"}return c>=da.min&&c<=da.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};n.getTimeFields=function(c){return a.apply(this,arguments)};n.integerRange=ca;n.isDateField=function(c){return null!=c&&("date"===c.type||"esriFieldTypeDate"===c.type)};n.isNumberInRange=Z;n.isNumericField=V;n.isRasterPixelValueField=function(c){return c?
["raster.itempixelvalue","raster.servicepixelvalue"].some(h=>c.toLowerCase().startsWith(h)):!1};n.isStringField=function(c){return null!=c&&("string"===c.type||"esriFieldTypeString"===c.type)};n.isValidFieldValue=function(c,h){return null===W(c,h)};n.isValueMatchingFieldType=Y;n.normalizeFieldName=function(c){return null==c?null:(c=c.trim().replace(qa,"_").replace(ra,"_").replace(sa,"").replace(ta,"").replace(pa,"F$1"))?c:null};n.numericTypes=na;n.packFields=function(c,h,u=1){if(!h||!c)return[];if(h.includes("*"))return["*"];
h=x(c,h);return h.length/c.fields.length>=u?["*"]:h};n.populateMissingFields=ka;n.rendererFields=la;n.sanitizeNullFieldValue=function(c){return null==c||"number"===typeof c&&isNaN(c)?null:c};n.singleRange=da;n.smallIntegerRange=ba;n.unpackFieldNames=function(c,h){return E.isNone(h)||E.isNone(c)?[]:h.includes("*")?(c.fields??[]).map(u=>u.name):h};n.validateFieldValue=W;n.validationErrorToString=function(c,h,u){switch(c){case P.DomainValidationError.INVALID_CODED_VALUE:return`Value ${u} is not in the coded domain - field: ${h.name}, domain: ${JSON.stringify(h.domain)}`;
case P.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${u} is out of the range of valid values - field: ${h.name}, domain: ${JSON.stringify(h.domain)}`;case n.TypeValidationError.INVALID_TYPE:return`Value ${u} is not a valid value for the field type - field: ${h.name}, type: ${h.type}, nullable: ${h.nullable}`;case n.NumericRangeValidationError.OUT_OF_RANGE:const {min:K,max:S}=ha(h.type);return`Value ${u} is out of range for the number type - field: ${h.name}, type: ${h.type}, value range is ${K} to ${S}`}};
n.visualVariableFields=ma;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(m){m.DomainValidationError=void 0;(function(n){n.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(m.DomainValidationError||(m.DomainValidationError={}));m.getDomainRange=function(n){if(n&&"range"===n.type)return{min:"range"in n?n.range[0]:n.minValue,max:"range"in
n?n.range[1]:n.maxValue}};m.validateDomainValue=function(n,I){switch(n.type){case "range":const p="range"in n?n.range[0]:n.minValue;n="range"in n?n.range[1]:n.maxValue;if(null!=p&&+I<p||null!=n&&+I>n)return m.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==n.codedValues||n.codedValues.every(E=>null==E||E.code!==I))return m.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==n.codedValues||n.codedValues.every(E=>null==E||E.code!==I))return m.DomainValidationError.INVALID_CODED_VALUE}return null};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(m,n,I,p,E,N,P,Q){function O(){v||(v=I._asyncToGenerator(function*(){const l=yield new Promise((t,B)=>m(["./arcadeUtils"],t,B));return{arcade:l.arcade,arcadeUtils:l,Dictionary:l.Dictionary,Feature:l.arcadeFeature}})());return v}const x=
N.getLogger("esri.support.arcadeOnDemand");let v;p=(l,t,B)=>G.create(l,t,B,null,["$feature","$view"]);let G=function(){function l(B,w,D,F,z,y,k){this.script=B;this.evaluate=F;this.fields=Array.isArray(y)?y:y.fields;this._syntaxTree=D;this._arcade=w;this._arcadeFeature=z;this._spatialReference=k;this._referencesGeometry=w.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}l.create=function(){var B=I._asyncToGenerator(function*(w,D,
F,z,y,k){const {arcade:q,Feature:b,Dictionary:f}=yield O(),g=Q.fromJSON(D);let C;try{C=q.parseScript(w,k)}catch(H){return x.error(new E("arcade-bad-expression","Failed to parse arcade script",{script:w,error:H})),null}y=y.reduce((H,J)=>({...H,[J]:null}),{});let d=null;P.isSome(z)&&(d=new f(z),d.immutable=!0,y.$config=null);k=(z=q.scriptUsesGeometryEngine(C))&&q.enableGeometrySupport();const a=q.scriptUsesFeatureSet(C)&&q.enableFeatureSetSupport(),e=(D=q.scriptIsAsync(C))&&q.enableAsyncSupport();y=
{vars:y,spatialReference:g,useAsync:!!e};yield Promise.all([k,a,e]);k=new Set;yield q.loadDependentModules(k,C,null,D,z);const r=new f;r.immutable=!1;r.setField("scale",0);const A=q.compileScript(C,y);return new l(w,q,C,H=>{"$view"in H&&H.$view&&(r.setField("scale","object"===typeof H.$view?H.$view.scale:void 0),H.$view=r);d&&(H.$config=d);return A({vars:H,spatialReference:g})},new b,F,g)});return function(w,D,F,z,y,k){return B.apply(this,arguments)}}();var t=l.prototype;t.repurposeFeature=function(B){B.geometry&&
!B.geometry.spatialReference&&(B.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(B.geometry,B.attributes,{fields:this.fields});return this._arcadeFeature};t.referencesGeometry=function(){return this._referencesGeometry};t.referencesScale=function(){return this._referencesScale};return l}();n.ArcadeExpression=G;n.createDictionaryExpression=(l,t,B,w)=>G.create(l,t,B,w,["$feature","$view"]);n.createLabelExpression=(l,t,B)=>G.create(l,t,B,null,["$feature"]);
n.createRendererExpression=p;n.createVVExpression=p;n.loadArcade=O;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec4","../../chunks/vec4f64"],function(m,n,I,p,E){function N(x,v,G,l){let {color:t,ratio:B}=v,{color:w,ratio:D}=G;D===B&&(1===D?B-=1E-6:D+=1E-6);v=n.clamp((l-B)/(D-B),0,1);p.lerp(x,t.toArray(),w.toArray(),v)}function P(x,v,G,l,t){x=new Uint32Array(x*
x);v="buffer"in v?v:new Float64Array(v);G="buffer"in G?new Uint32Array(G.buffer):new Uint32Array((new Uint8Array(G)).buffer);t=G.length/(t-l);for(let B=0;B<v.length;B++)x[B]=G[n.clamp(Math.floor((v[B]-l)*t),0,G.length-1)];return x.buffer}function Q(x,v,G){x=Math.sqrt(x**2+v**2)/G;return 1<x?0:3/(Math.PI*G**2)*(1-x**2)**2}function O(x,v){return null!=x?"string"===typeof v?G=>-1*+G.readAttribute(x):G=>+G.readAttribute(x)+v:G=>1}m.MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR=2.4;m.calculateHeatmapIntensityInfoReaders=
function(x,v,G,l){const {radius:t,fieldOffset:B,field:w}=v;v=Math.round(I.pt2px(t));const D=new Float64Array(G*l);let F=Number.NEGATIVE_INFINITY;const z=O(w,B),y=new Set;for(const f of x)for(x=f.getCursor();x.next();){var k=x.getObjectId();if(y.has(k))continue;y.add(k);k=x.readLegacyPointGeometry();if(-128>k.x||k.x>=G+128||-128>k.y||k.y>l+128)continue;const g=+z(x),C=Math.max(0,Math.round(k.x)-v);var q=Math.max(0,Math.round(k.y)-v);const d=Math.min(l,Math.round(k.y)+v),a=Math.min(G,Math.round(k.x)+
v);for(;q<d;q++)for(let e=C;e<a;e++){var b=q*G+e;const r=Q(k.x-e,k.y-q,v);b=D[b]+=r*g;b>F&&(F=b)}}return{matrix:D.buffer,max:F}};m.createHeatmapImageData=P;m.createValueFunction=function(x,v){return"function"===typeof x?x:x?"string"===typeof v?G=>-1*+G[x]:G=>+G[x]+v:()=>1};m.createValueFunctionCursor=O;m.drawHeatmap=function(x,v,G,l,t,B){x.canvas.width=x.canvas.height=v;x.clearRect(0,0,v,v);const w=x.getImageData(0,0,v,v);G&&l&&w.data.set(new Uint8ClampedArray(P(v,G,l,t,B)));x.putImageData(w,0,0)};
m.evaluateDensityKernel=Q;m.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(x){return I.px2pt(2.4*x)};m.generateGradient=function(x){const v=new Uint8ClampedArray(2048);x=x.filter(({ratio:w})=>0<=w&&1>=w).sort((w,D)=>w.ratio-D.ratio).map(({color:w,ratio:D})=>({color:w,ratio:Math.max(D,.001)}));if(1>x.length)return v;let G=x[0],l=x[0],t=1;const B=E.create();for(let w=0;512>w;w++){const D=(w+.5)/512;for(;D>l.ratio&&t<x.length;)G=l,l=x[t++];N(B,G,l,D);v.set(B,4*w)}return v};m.kernelDensityRadiusPtToGaussianBlurRadiusPx=
function(x){return I.pt2px(x)/2.4};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec4f64":function(){define(["exports"],function(m){function n(){return[0,0,0,0]}function I(y){return[y[0],y[1],y[2],y[3]]}function p(y,k,q,b){return[y,k,q,b]}function E(y){const k=n(),q=Math.min(4,y.length);for(let b=0;b<q;++b)k[b]=y[b];return k}function N(y,k){return new Float64Array(y,k,4)}function P(){return n()}function Q(){return[1,1,1,1]}function O(){return[1,0,0,0]}function x(){return[0,
1,0,0]}function v(){return[0,0,1,0]}function G(){return[0,0,0,1]}const l=n(),t=Q(),B=O(),w=x(),D=v(),F=G(),z=Object.freeze(Object.defineProperty({__proto__:null,ONES:t,UNIT_W:F,UNIT_X:B,UNIT_Y:w,UNIT_Z:D,ZEROS:l,clone:I,create:n,createView:N,fromArray:E,fromValues:p,ones:Q,unitW:G,unitX:O,unitY:x,unitZ:v,zeros:P},Symbol.toStringTag,{value:"Module"}));m.ONES=t;m.UNIT_W=F;m.UNIT_X=B;m.UNIT_Y=w;m.UNIT_Z=D;m.ZEROS=l;m.clone=I;m.create=n;m.createView=N;m.fromArray=E;m.fromValues=p;m.ones=Q;m.unitW=G;m.unitX=
O;m.unitY=x;m.unitZ=v;m.vec4f64=z;m.zeros=P})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(m,n,I){function p(b){return null==b||"string"===typeof b&&!b?"\x3cNull\x3e":b}function E(b){const f=null!=b.minValue||null!=b.maxValue,g=!!b.sqlExpression&&b.supportsSQLExpression;return!(null!=b.normalizationField||null!=b.normalizationType)&&!f&&!g}function N(b){const {values:f,useSampleStdDev:g,supportsNullCount:C}=
b;var d=Number.POSITIVE_INFINITY;let a=Number.NEGATIVE_INFINITY,e=null,r=null;var A=null;let H=null,J=0;const L=null==b.minValue?-Infinity:b.minValue,R=null==b.maxValue?Infinity:b.maxValue;for(const M of f)Number.isFinite(M)?M>=L&&M<=R&&(e=null===e?M:e+M,d=Math.min(d,M),a=Math.max(a,M),J++):"string"===typeof M&&J++;if(J&&null!=e){r=e/J;A=0;for(const M of f)Number.isFinite(M)&&M>=L&&M<=R&&(A+=(M-r)**2);H=g?1<J?A/(J-1):0:0<J?A/J:0;A=Math.sqrt(H)}else a=d=null;d={avg:r,count:J,max:a,min:d,stddev:A,sum:e,
variance:H};C&&(d.nullcount=f.length-J);b.percentileParams&&(d.median=P(f,b.percentileParams));return d}function P(b,f){const {fieldType:g,value:C,orderBy:d,isDiscrete:a}=f,e=Q(g,"desc"===d);b=[...b].filter(J=>null!=J).sort((J,L)=>e(J,L));if(0===b.length)return null;if(0>=C)return b[0];if(1<=C)return b[b.length-1];var r=(b.length-1)*C,A=Math.floor(r);f=A+1;r%=1;A=b[A];const H=b[f];return f>=b.length||a||"string"===typeof A||"string"===typeof H?A:A*(1-r)+H*r}function Q(b,f){const g=f?1:-1,C=v(f),d=
x(f);if(!b||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...k].includes(b))return(a,e)=>"number"===typeof a&&"number"===typeof e?C(a,e):"string"===typeof a&&"string"===typeof e?d(a,e):g;if("esriFieldTypeDate"===b)return(a,e)=>{a=(new Date(a)).getTime();e=(new Date(e)).getTime();return isNaN(a)||isNaN(e)?g:C(a,e)};if(k.has(b))return(a,e)=>C(a,e);if("esriFieldTypeString"===b)return(a,e)=>d(a,e);if("esriFieldTypeGUID"===b||"esriFieldTypeGlobalID"===b){const a=
x(f);return(e,r)=>a(G(e),G(r))}return f?(a,e)=>1:(a,e)=>-1}function O(b,f,g){if(g){if(null==b)return null==f?0:1;if(null==f)return-1}else{if(null==b)return null==f?0:-1;if(null==f)return 1}return null}function x(b){return b?(f,g)=>{const C=O(f,g,!0);if(null!=C)return C;f=f.toUpperCase();g=g.toUpperCase();return f>g?-1:f<g?1:0}:(f,g)=>{const C=O(f,g,!1);if(null!=C)return C;f=f.toUpperCase();g=g.toUpperCase();return f<g?-1:f>g?1:0}}function v(b){return b?(f,g)=>{const C=O(f,g,!0);return null!=C?C:g-
f}:(f,g)=>{const C=O(f,g,!1);return null!=C?C:f-g}}function G(b){return b.substr(24,12)+b.substr(19,4)+b.substr(16,2)+b.substr(14,2)+b.substr(11,2)+b.substr(9,2)+b.substr(6,2)+b.substr(4,2)+b.substr(2,2)+b.substr(0,2)}function l(b){return"coded-value"!==b?.type?[]:b.codedValues.map(f=>f.code)}function t(b,f){const g=w({field:f.field,normalizationType:f.normalizationType,normalizationField:f.normalizationField,classificationMethod:f.classificationMethod,standardDeviationInterval:f.standardDeviationInterval,
breakCount:f.numClasses||5});b=B(b,f.minValue,f.maxValue);return I.createGenerateRendererClassBreaks({definition:g,values:b,normalizationTotal:f.normalizationTotal})}function B(b,f,g){const C=null==f?-Infinity:f,d=null==g?Infinity:g;return b.filter(a=>Number.isFinite(a)&&a>=C&&a<=d)}function w(b){const {breakCount:f,field:g,normalizationField:C,normalizationType:d}=b,a=b.classificationMethod||"equal-interval";return new n({breakCount:f,classificationField:g,classificationMethod:a,normalizationField:"field"===
d?C:void 0,normalizationType:d,standardDeviationInterval:"standard-deviation"===a?b.standardDeviationInterval||1:void 0})}function D(b,f){const {field:g,classificationMethod:C,standardDeviationInterval:d,normalizationType:a,normalizationField:e,normalizationTotal:r,minValue:A,maxValue:H}=f,J=f.numBins||10;let L=f=null,R=null;C&&"equal-interval"!==C||a?({classBreaks:b}=t(b,{field:g,normalizationType:a,normalizationField:e,normalizationTotal:r,classificationMethod:C,standardDeviationInterval:d,minValue:A,
maxValue:H,numClasses:J}),f=b[0].minValue,L=b[b.length-1].maxValue,R=b.map(M=>[M.minValue,M.maxValue])):(null!=A&&null!=H?(f=A,L=H):(b=N({values:b,minValue:A,maxValue:H,useSampleStdDev:!a,supportsNullCount:E({normalizationType:a,normalizationField:e,minValue:A,maxValue:H})}),f=b.min??null,L=b.max??null),R=z(f??0,L??0,J));return{min:f,max:L,intervals:R}}function F(b,f){let g=-1;for(let C=b.length-1;0<=C;C--)if(f>=b[C][0]){g=C;break}return g}function z(b,f,g){const C=(f-b)/g,d=[];let a;for(let e=1;e<=
g;e++)a=b+C,a=Number(a.toFixed(16)),d.push([b,e===g?f:a]),b=a;return d}const y=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,k=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),q="min max avg stddev count sum variance nullcount median".split(" ");m.calculateClassBreaks=t;m.calculateHistogram=function(b,f){var g=D(b,f);const C=g.intervals,d=g.min??0;g=g.max??0;const a=C.map((e,r)=>({minValue:C[r][0],maxValue:C[r][1],count:0}));for(const e of b)null!=
e&&e>=d&&e<=g&&(b=F(C,e),-1<b&&a[b].count++);return{bins:a,minValue:d,maxValue:g,normalizationTotal:f.normalizationTotal}};m.calculatePercentile=P;m.calculateStatistics=N;m.calculateStringStatistics=function(b){const f=b.returnDistinct?[...(new Set(b.values))]:b.values,g=f.filter(d=>null!=d).length,C={count:g};b.supportsNullCount&&(C.nullcount=f.length-g);b.percentileParams&&(C.median=P(f,b.percentileParams));return C};m.calculateUniqueValuesCount=function(b){const f={};for(let g of b){if(null==g||
"string"===typeof g&&""===g.trim())g=null;null==f[g]?f[g]={count:1,data:g}:f[g].count++}return{count:f}};m.createClassBreaksDefinition=w;m.createUVResult=function(b,f,g,C){b=b.count;const d=[];if(g&&f){g=[];var a=l(f[0]);for(const e of a)if(f[1]){a=l(f[1]);for(const r of a)if(f[2]){a=l(f[2]);for(const A of a)g.push(`${p(e)}${C}${p(r)}${C}${p(A)}`)}else g.push(`${p(e)}${C}${p(r)}`)}else g.push(e);for(const e of g)b.hasOwnProperty(e)||(b[e]={data:e,count:0})}for(const e in b)f=b[e],d.push({value:f.data,
count:f.count,label:f.label});return{uniqueValueInfos:d}};m.getAttributeComparator=Q;m.getEqualIntervalBins=z;m.getNormalizedValue=function(b,f,g,C){let d=null;switch(f){case "log":0!==b&&(d=Math.log(b)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(C)&&0!==C&&(d=b/C*100);break;case "field":Number.isFinite(g)&&0!==g&&(d=b/g);break;case "natural-log":0<b&&(d=Math.log(b));break;case "square-root":0<b&&(d=b**.5)}return d};m.isNullCountSupported=E;m.processNullValue=p;m.processSummaryStatisticsResult=
function(b,f){let g;for(g in b)q.includes(g)&&(Number.isFinite(b[g])||(b[g]=null));if(!f)return b;["avg","stddev","variance"].forEach(C=>{null!=b[C]&&(b[C]=Math.ceil(b[C]))});return b};m.resolveCBResult=function(b,f){let g=b.classBreaks;const C=g[0].minValue,d=g[g.length-1].maxValue,a="standard-deviation"===f;g=g.map(e=>{const r=e.label;e={minValue:e.minValue,maxValue:e.maxValue,label:r};if(a&&r){const A=r.match(y)?.map(H=>+H.trim())??[];2===A.length?(e.minStdDev=A[0],e.maxStdDev=A[1],0>A[0]&&0<A[1]&&
(e.hasAvg=!0)):1===A.length&&(r.includes("\x3c")?(e.minStdDev=null,e.maxStdDev=A[0]):r.includes("\x3e")&&(e.minStdDev=A[0],e.maxStdDev=null))}return e});return{minValue:C,maxValue:d,classBreakInfos:g,normalizationTotal:b.normalizationTotal}};m.statisticTypes=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,n,I,p,E,N,P,Q,O){N=new I.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});I=new I.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});p=function(x){function v(G){G=x.call(this,G)||this;G.type="class-breaks-definition";G.breakCount=
null;G.classificationField=null;G.classificationMethod=null;G.normalizationField=null;G.normalizationType=null;return G}m._inheritsLoose(v,x);m._createClass(v,[{key:"standardDeviationInterval",set:function(G){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",G)}},{key:"definedInterval",set:function(G){"defined-interval"===this.classificationMethod&&this._set("definedInterval",G)}}]);return v}(p.JSONSupport);n.__decorate([Q.enumeration({classBreaksDef:"class-breaks-definition"})],
p.prototype,"type",void 0);n.__decorate([E.property({json:{write:!0}})],p.prototype,"breakCount",void 0);n.__decorate([E.property({json:{write:!0}})],p.prototype,"classificationField",void 0);n.__decorate([E.property({type:String,json:{read:N.read,write:N.write}})],p.prototype,"classificationMethod",void 0);n.__decorate([E.property({json:{write:!0}})],p.prototype,"normalizationField",void 0);n.__decorate([E.property({json:{read:I.read,write:I.write}})],p.prototype,"normalizationType",void 0);n.__decorate([E.property({value:null,
json:{write:!0}})],p.prototype,"standardDeviationInterval",null);n.__decorate([E.property({value:null,json:{write:!0}})],p.prototype,"definedInterval",null);return p=n.__decorate([O.subclass("esri.rest.support.ClassBreaksDefinition")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(m,n,I){m.enumeration=function(p,E={}){p=p instanceof n.JSONMap?p:new n.JSONMap(p,E);p={type:E?.ignoreUnknown??!0?p.apiValues:String,json:{type:p.jsonValues,
read:E?.readOnly?!1:{reader:p.read},write:{writer:p.write}}};void 0!==E?.readOnly&&(p.readOnly=!!E.readOnly);void 0!==E?.default&&(p.json.default=E.default);void 0!==E?.name&&(p.json.name=E.name);void 0!==E?.nonNullable&&(p.nonNullable=E.nonNullable);return I.property(p)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(m,n){function I(l){var t=l.definition;const {classificationMethod:B,
normalizationType:w,definedInterval:D}=t;t=t.breakCount??1;const F=[];var z=l.values;if(0===z.length)return[];z=z.sort((g,C)=>g-C);var y=z[0],k=z[z.length-1];if("equal-interval"===B)if(z.length>=t){z=(k-y)/t;l=y;for(var q=1;q<t;q++){var b=Number((y+q*z).toFixed(6));F.push({minValue:l,maxValue:b,label:p(l,b,w)});l=b}F.push({minValue:l,maxValue:k,label:p(l,k,w)})}else z.forEach(g=>{F.push({minValue:g,maxValue:g,label:p(g,g,w)})});else if("natural-breaks"===B){z=E(z);l=N(z.uniqueValues,l.valueFrequency||
z.valueFrequency,t);for(q=1;q<t;q++)z.uniqueValues.length>q&&(b=Number(z.uniqueValues[l[q]].toFixed(6)),F.push({minValue:y,maxValue:b,label:p(y,b,w)}),y=b);F.push({minValue:y,maxValue:k,label:p(y,k,w)})}else if("quantile"===B)if(z.length>=t&&y!==k){l=Math.ceil(z.length/t);q=0;for(b=1;b<t;b++){var f=l+q-1;f>z.length&&(f=z.length-1);0>f&&(f=0);F.push({minValue:y,maxValue:z[f],label:p(y,z[f],w)});y=z[f];q+=l;l=Math.ceil((z.length-q)/(t-b))}F.push({minValue:y,maxValue:k,label:p(y,k,w)})}else for(t=-1,
k=0;k<z.length;k++)y=z[k],y!==t&&(t=y,F.push({minValue:t,maxValue:y,label:p(t,y,w)}),t=y);else if("standard-deviation"===B)if(l=O(z),q=x(z,l),0===q)F.push({minValue:z[0],maxValue:z[0],label:p(z[0],z[0],w)});else{z=Q(y,k,t,l,q)*q;q=0;for(b=t;1<=b;b--)f=Number((l-(b-.5)*z).toFixed(6)),F.push({minValue:y,maxValue:f,label:p(y,f,w)}),y=f,q++;b=Number((l+.5*z).toFixed(6));F.push({minValue:y,maxValue:b,label:p(y,b,w)});y=b;q++;for(f=1;f<=t;f++)b=q===2*t?k:Number((l+(f+.5)*z).toFixed(6)),F.push({minValue:y,
maxValue:b,label:p(y,b,w)}),y=b,q++}else if("defined-interval"===B){if(!D)return F;t=z[0];k=z[z.length-1];z=Math.ceil((k-t)/D);y=t;for(l=1;l<z;l++)q=Number((t+l*D).toFixed(6)),F.push({minValue:y,maxValue:q,label:p(y,q,w)}),y=q;F.push({minValue:y,maxValue:k,label:p(y,k,w)})}return F}function p(l,t,B){let w=null;return w=l===t?B&&"percent-of-total"===B?l+"%":l.toString():B&&"percent-of-total"===B?l+"% - "+t+"%":l+" - "+t}function E(l){const t=[],B=[];let w=Number.MIN_VALUE,D=1,F=-1;for(let z=0;z<l.length;z++){const y=
l[z];y===w?(D++,B[F]=D):null!==y&&(t.push(y),w=y,D=1,B.push(D),F++)}return{uniqueValues:t,valueFrequency:B}}function N(l,t,B){var w=l.length;const D=[];B>w&&(B=w);for(var F=0;F<B;F++)D.push(Math.round(F*w/B-1));D.push(w-1);F=P(D,l,t,B);w=F.mean;F=F.sdcm;var z=B,y=0,k=0;let q=0,b=0,f=!0;for(let C=0;2>C&&f;C++){0===C&&(f=!1);for(var g=0;g<z-1;g++)for(;D[g+1]+1!==D[g+2];)if(D[g+1]+=1,y=v(g,D,l,t),q=y.sbMean,y=y.sbSdcm,k=v(g+1,D,l,t),b=k.sbMean,k=k.sbSdcm,y+k<F[g]+F[g+1])F[g]=y,F[g+1]=k,w[g]=q,w[g+1]=
b,f=!0;else{--D[g+1];break}for(g=z-1;0<g;g--)for(;D[g]!==D[g-1]+1;)if(--D[g],y=v(g-1,D,l,t),q=y.sbMean,y=y.sbSdcm,k=v(g,D,l,t),b=k.sbMean,k=k.sbSdcm,y+k<F[g-1]+F[g])F[g-1]=y,F[g]=k,w[g-1]=q,w[g]=b,f=!0;else{D[g]+=1;break}}f&&(F=P(D,l,t,B));return D}function P(l,t,B,w){let D=[];var F=[],z=[];let y=0;const k=[],q=[];for(var b=0;b<w;b++){var f=v(b,l,t,B);k.push(f.sbMean);q.push(f.sbSdcm);y+=q[b]}f=y;for(b=!0;b||y<f;){b=!1;D=[];for(F=0;F<w;F++)D.push(l[F]);for(z=0;z<w;z++)for(f=l[z]+1;f<=l[z+1];f++)if(F=
t[f],0<z&&f!==l[z+1]&&Math.abs(F-k[z])>Math.abs(F-k[z-1]))l[z]=f;else if(z<w-1&&l[z]!==f-1&&Math.abs(F-k[z])>Math.abs(F-k[z+1])){l[z+1]=f-1;break}f=y;y=0;F=[];z=[];for(let g=0;g<w;g++){F.push(k[g]);z.push(q[g]);const C=v(g,l,t,B);k[g]=C.sbMean;q[g]=C.sbSdcm;y+=q[g]}}if(y>f){for(t=0;t<w;t++)l[t]=D[t],k[t]=F[t],q[t]=z[t];y=f}return{mean:k,sdcm:q}}function Q(l,t,B,w,D){l=Math.max(w-l,t-w)/D/B;return 1<=l?1:.5<=l?.5:.25}function O(l){let t=0;for(let B=0;B<l.length;B++)t+=l[B];return t/=l.length}function x(l,
t){let B=0;for(let w=0;w<l.length;w++){const D=l[w];B+=(D-t)*(D-t)}B/=l.length;return Math.sqrt(B)}function v(l,t,B,w){var D=0,F=0;for(var z=t[l]+1;z<=t[l+1];z++){const y=w[z];D+=B[z]*y;F+=y}0>=F&&G.warn("Exception in Natural Breaks calculation");D/=F;F=0;for(z=t[l]+1;z<=t[l+1];z++)F+=w[z]*(B[z]-D)**2;return{sbMean:D,sbSdcm:F}}const G=n.getLogger("esri.rest.support.generateRendererUtils");m.createGenerateRendererClassBreaks=function(l){const {normalizationTotal:t}=l;return{classBreaks:I(l),normalizationTotal:t}};
m.createGenerateRendererUniqueValues=function(l){l=E(l);const t=[],B=l.uniqueValues.length;for(let w=0;w<B;w++){const D=l.uniqueValues[w];t.push({value:D,count:l.valueFrequency[w],label:D.toString()})}return{uniqueValues:t}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define(["exports","../../../chunks/_rollupPluginBabelHelpers","./utils","../../../statistics/utils"],function(m,n,I,p){function E(){E=n._asyncToGenerator(function*(x){const {attribute:v,features:G}=x,{normalizationType:l,normalizationField:t,minValue:B,maxValue:w,fieldType:D}=v;x=yield I.getDataValues({field:v.field,valueExpression:v.valueExpression,normalizationType:l,normalizationField:t,normalizationTotal:v.normalizationTotal,viewInfoParams:v.viewInfoParams,fieldInfos:v.fieldInfos},G);const F=
p.isNullCountSupported({normalizationType:l,normalizationField:t,minValue:B,maxValue:w}),z={value:.5,fieldType:D};x="esriFieldTypeString"===D?p.calculateStringStatistics({values:x,supportsNullCount:F,percentileParams:z}):p.calculateStatistics({values:x,minValue:B,maxValue:w,useSampleStdDev:!l,supportsNullCount:F,percentileParams:z});return p.processSummaryStatisticsResult(x,"esriFieldTypeDate"===D)});return E.apply(this,arguments)}function N(){N=n._asyncToGenerator(function*(x){const {attribute:v,
features:G}=x;x=yield I.getDataValues({field:v.field,field2:v.field2,field3:v.field3,fieldDelimiter:v.fieldDelimiter,valueExpression:v.valueExpression,viewInfoParams:v.viewInfoParams,fieldInfos:v.fieldInfos},G);x=p.calculateUniqueValuesCount(x);return p.createUVResult(x,v.domains,v.returnAllCodedValues,v.fieldDelimiter)});return N.apply(this,arguments)}function P(){P=n._asyncToGenerator(function*(x){const {attribute:v,features:G}=x,{field:l,normalizationType:t,normalizationField:B,normalizationTotal:w,
classificationMethod:D}=v;x=yield I.getDataValues({field:l,valueExpression:v.valueExpression,normalizationType:t,normalizationField:B,normalizationTotal:w,viewInfoParams:v.viewInfoParams,fieldInfos:v.fieldInfos},G);x=p.calculateClassBreaks(x,{field:l,normalizationType:t,normalizationField:B,normalizationTotal:w,classificationMethod:D,standardDeviationInterval:v.standardDeviationInterval,numClasses:v.numClasses,minValue:v.minValue,maxValue:v.maxValue});return p.resolveCBResult(x,D)});return P.apply(this,
arguments)}function Q(){Q=n._asyncToGenerator(function*(x){const {attribute:v,features:G}=x,{field:l,normalizationType:t,normalizationField:B,normalizationTotal:w,classificationMethod:D}=v;x=yield I.getDataValues({field:l,valueExpression:v.valueExpression,normalizationType:t,normalizationField:B,normalizationTotal:w,viewInfoParams:v.viewInfoParams,fieldInfos:v.fieldInfos},G);return p.calculateHistogram(x,{field:l,normalizationType:t,normalizationField:B,normalizationTotal:w,classificationMethod:D,
standardDeviationInterval:v.standardDeviationInterval,numBins:v.numBins,minValue:v.minValue,maxValue:v.maxValue})});return Q.apply(this,arguments)}function O(){O=n._asyncToGenerator(function*(x){const {attribute:v,features:G}=x,{field:l,radius:t,fieldOffset:B,transform:w,spatialReference:D,size:F}=v;x=I.quantizeFeatures(G,w,D,F);const {count:z,min:y,max:k,mean:q,stdDev:b}=I.calculateHeatmapStats(x,t,B,l,F[0],F[1]);return{count:z,min:y,max:k,avg:q,stddev:b}});return O.apply(this,arguments)}m.classBreaks=
function(x){return P.apply(this,arguments)};m.heatmapStatistics=function(x){return O.apply(this,arguments)};m.histogram=function(x){return Q.apply(this,arguments)};m.summaryStatistics=function(x){return E.apply(this,arguments)};m.uniqueValues=function(x){return N.apply(this,arguments)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});