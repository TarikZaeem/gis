// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(k,b){k.updateOrigins=function(a){a&&a.writtenProperties&&a.writtenProperties.forEach(({target:d,propName:g,newOrigin:n})=>{b.isMultiOriginJSONMixin(d)&&n&&d.originOf(g)!==n&&d.updateOrigin(g,n)})};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(k){k.isMultiOriginJSONMixin=function(b){return b&&
"getAtOrigin"in b&&"originOf"in b};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/networks/UtilityNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/typeUtils ../rest/support/Query".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h,p,u,y,E,C){const q=d.getLogger("esri.networks.UtilityNetwork");d=function(D){function F(x){x=D.call(this,x)||this;x.sharedNamedTraceConfigurations=[];x.type="utility";return x}k._inheritsLoose(F,D);var K=F.prototype;K.load=function(){var x=k._asyncToGenerator(function*(B){this.addResolvingPromise(D.prototype.load.call(this,B));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(B));return this});return function(B){return x.apply(this,arguments)}}();
K.getTerminalConfiguration=function(x){let B=null,G=null;var H=x.layer;let A=null;if("feature"===H?.type){if(A=H.layerId,null===A)return null}else return null;H=x.attributes;if(null==H)return null;for(const L of Object.keys(H))"ASSETGROUP"===L.toUpperCase()&&(B=x.getAttribute(L)),"ASSETTYPE"===L.toUpperCase()&&(G=x.getAttribute(L));if(!this.dataElement)return null;let I=null;x=this.dataElement.domainNetworks;for(var M of x)if(x=M.junctionSources?.find(L=>L.layerId===A))if(x=x.assetGroups?.find(L=>
L.assetGroupCode===B))if(x=x.assetTypes?.find(L=>L.assetTypeCode===G)){I=x.terminalConfigurationId;break}return null!=I?(M=this.dataElement.terminalConfigurations?.find(L=>L.terminalConfigurationId===I))?y.fromJSON(M):null:null};K.getTierNames=function(x){return this.dataElement?.domainNetworks.find(B=>B.domainNetworkName===x)?.tiers.map(B=>B.name)||[]};K.getRulesTable=function(){var x=k._asyncToGenerator(function*(){return this._createRulesTable()});return function(){return x.apply(this,arguments)}}();
K.isUtilityLayer=function(x){return this._utilityLayerList.has(x.layerId)};K._loadNamedTraceConfigurationsFromNetwork=function(){var x=k._asyncToGenerator(function*(B){if(0!==this.sharedNamedTraceConfigurations?.length){var G=this.sharedNamedTraceConfigurations.map(H=>H.globalId);B=yield this.queryNamedTraceConfigurations({globalIds:G},B);for(const H of this.sharedNamedTraceConfigurations)if(G=B?.find(A=>A.globalId===H.globalId))G=G.write({},{origin:"service"}),H.read(G,{origin:"service"})}});return function(B){return x.apply(this,
arguments)}}();K._createRulesTable=function(){var x=k._asyncToGenerator(function*(){const B=new l({url:this.rulesTableUrl});yield B.load();var G=this.dataElement?.domainNetworks;if(!G)return null;const H=G.flatMap(A=>[...A.edgeSources,...A.junctionSources]);G=(yield this._queryRulesTable(B)).map(A=>this._hydrateRuleInfo(B,H,A));return new h({layer:B,rules:G})});return function(){return x.apply(this,arguments)}}();K._queryRulesTable=function(){var x=k._asyncToGenerator(function*(B){const G=new C({where:"1\x3d1",
outFields:["*"]});return(yield e.queryAllJSON(B,G)).features});return function(B){return x.apply(this,arguments)}}();K._hydrateRuleInfo=function(x,B,G){var H=x.fieldsIndex;x=H.get("RULETYPE");var A=H.get("CREATIONDATE"),I=H.get("FROMNETWORKSOURCEID"),M=H.get("FROMASSETGROUP"),L=H.get("FROMASSETTYPE"),N=H.get("FROMTERMINALID"),S=H.get("TONETWORKSOURCEID"),R=H.get("TOASSETGROUP");const ea=H.get("TOASSETTYPE"),P=H.get("TOTERMINALID"),fa=H.get("VIANETWORKSOURCEID"),ha=H.get("VIAASSETGROUP"),aa=H.get("VIAASSETTYPE");
H=H.get("VIATERMINALID");x=G.attributes[x.name];A=new Date(G.attributes[A.name]);G=[{networkSourceId:G.attributes[I.name],assetGroupId:G.attributes[M.name],assetTypeId:G.attributes[L.name],terminalId:G.attributes[N.name]},{networkSourceId:G.attributes[S.name],assetGroupId:G.attributes[R.name],assetTypeId:G.attributes[ea.name],terminalId:G.attributes[P.name]},{networkSourceId:G.attributes[fa.name],assetGroupId:G.attributes[ha.name],assetTypeId:G.attributes[aa.name],terminalId:G.attributes[H.name]}];
let U;(function(T){T[T.from=0]="from";T[T.to=1]="to";T[T.via=2]="via"})(U||(U={}));I={ruleType:x,creationDate:A};for(const T of[U.from,U.to,U.via]){if(x!==E.RuleType.RTEdgeJunctionEdgeConnectivity&&T===U.via)continue;const X=G[T];M=B.find(Y=>Y.sourceId===X.networkSourceId);L=M?.assetGroups.find(Y=>Y.assetGroupCode===X.assetGroupId);N=L?.assetTypes.find(Y=>Y.assetTypeCode===X.assetTypeId);S=this._getTerminal(x,N,X);if(x===E.RuleType.RTContainment||x===E.RuleType.RTAttachment)S=null;R="";switch(T){case U.from:R=
"from";break;case U.to:R="to";break;case U.via:R="via"}I[`${R}NetworkSource`]=M;I[`${R}AssetGroup`]=L;I[`${R}AssetType`]=N;I[`${R}Terminal`]=S}return I};K._getTerminal=function(x,B,G){if(x===E.RuleType.RTAttachment||x===E.RuleType.RTContainment)return null;const H=B?.terminalConfigurationId;return this.terminalConfigurations?.find(A=>A.id===H)?.terminals?.find(A=>A.id===G.terminalId)??null};k._createClass(F,[{key:"serviceTerritoryFeatureLayerId",get:function(){return this.dataElement?.serviceTerritoryFeatureLayerId??
null}},{key:"networkSystemLayers",get:function(){return new u({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?
`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null})}},{key:"rulesTableId",get:function(){a.deprecatedProperty(q,"rulesTableId",{replacement:"networkSystemLayers.rulesTableId",version:"4.25"});return this.sourceJSON?.systemLayers.rulesTableId}},{key:"rulesTableUrl",get:function(){a.deprecatedProperty(q,"rulesTableUrl",{replacement:"networkSystemLayers.rulesTableUrl",version:"4.25"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.rulesTableId}`:
null}},{key:"subnetworksTableId",get:function(){a.deprecatedProperty(q,"subnetworksTableId",{replacement:"networkSystemLayers.subnetworksTableId",version:"4.25"});return this.sourceJSON?.systemLayers.subnetworksTableId}},{key:"subnetworksTableUrl",get:function(){a.deprecatedProperty(q,"subnetworksTableUrl",{replacement:"networkSystemLayers.subnetworksTableUrl",version:"4.25"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.subnetworksTableId}`:null}},{key:"terminalConfigurations",
get:function(){return this.dataElement?.terminalConfigurations.map(x=>y.fromJSON(x))||[]}},{key:"domainNetworkNames",get:function(){return this.dataElement?.domainNetworks.map(x=>x.domainNetworkName)||[]}},{key:"_utilityLayerList",get:function(){const x=new Set;this.dataElement?.domainNetworks?.map(B=>{B.edgeSources.map(G=>{x.add(G.layerId)});B.junctionSources.map(G=>{x.add(G.layerId)})});return x}}]);return F}(m);b.__decorate([g.property({type:[p],json:{origins:{"web-map":{read:{source:"traceConfigurations"},
write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],d.prototype,"sharedNamedTraceConfigurations",void 0);b.__decorate([g.property({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],d.prototype,"type",void 0);b.__decorate([g.property({readOnly:!0})],d.prototype,"serviceTerritoryFeatureLayerId",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"networkSystemLayers",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableId",null);
b.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableUrl",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"subnetworksTableId",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"subnetworksTableUrl",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"terminalConfigurations",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"domainNetworkNames",null);return d=b.__decorate([t.subclass("esri.networks.UtilityNetwork")],d)})},"esri/layers/support/featureQueryAll":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../rest/support/Query"],function(k,b,a,d){function g(){g=b._asyncToGenerator(function*(l,e,m){e=e.clone();l.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=t(l));const h=n(l),p=l.capabilities.query.supportsPagination;e.start=0;e.num=h;let u=null;for(;;){const y=yield l.source.queryFeaturesJSON(e,m);a.isNone(u)?u=y:u.features=u.features.concat(y.features);u.exceededTransferLimit=y.exceededTransferLimit;if(!p||
!y.exceededTransferLimit)break;e.start+=h}return u});return g.apply(this,arguments)}function n(l){return t(l)*v(l)}function v(l){return l.capabilities.query.maxRecordCount||2E3}function t(l){return l.capabilities.query.supportsMaxRecordCountFactor?d.MAX_MAX_RECORD_COUNT_FACTOR:1}k.getMaxRecordCountFactor=t;k.getMaximumQuerySize=n;k.getMaximumRecordCount=v;k.queryAllJSON=function(l,e,m){return g.apply(this,arguments)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/networks/Network":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/Loadable ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/TopologyValidationJobInfo ./support/utils ../rest/networks/support/QueryNamedTraceConfigurationsParameters".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h,p,u,y,E,C,q,D,F,K,x){n=function(B){function G(A){A=B.call(this,A)||this;A.id=null;A.title=null;A.layerUrl=null;A.dataElement=null;A.fullExtent=null;A.spatialReference=null;A.type=null;A.sourceJSON=null;return A}b._inheritsLoose(G,B);G.fromPortalItem=function(A){return K.networkFromPortalItem(A)};var H=G.prototype;H.initialize=function(){this.when().catch(A=>{e.isAbortError(A)||v.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??
"no title"}', id: '${this.id??"no id"}')`,{error:A})})};H.load=function(){var A=b._asyncToGenerator(function*(I){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),I));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,I));return this});return function(I){return A.apply(this,arguments)}}();H.getLayerIdBySourceId=function(A){if(this.dataElement){const I=this.dataElement.domainNetworks;for(const M of I){for(const L of M.edgeSources?M.edgeSources:
[])if(L.sourceId===A)return L.layerId;for(const L of M.junctionSources?M.junctionSources:[])if(L.sourceId===A)return L.layerId}}return null};H.queryNamedTraceConfigurations=function(){var A=b._asyncToGenerator(function*(I,M){const {queryNamedTraceConfigurations:L}=yield new Promise((S,R)=>k(["../rest/networks/queryNamedTraceConfigurations"],S,R)),N=this.networkServiceUrl;I=new x({...I});return(yield L(N,I,{...M}))?.namedTraceConfigurations??null});return function(I,M){return A.apply(this,arguments)}}();
H.validateTopology=function(){var A=b._asyncToGenerator(function*(I,M){if(!I.validateArea)throw new g("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const {validateNetworkTopology:L}=yield new Promise((N,S)=>k(["../rest/networks/validateNetworkTopology"],N,S));I=yield L(this.networkServiceUrl,I,{...M});I?.serviceEdits&&q.editEventBus.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:{edits:null,addedFeatures:[],
updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:I.serviceEdits,exceededTransferLimit:!1}});return I});return function(I,M){return A.apply(this,arguments)}}();H.submitTopologyValidationJob=function(){var A=b._asyncToGenerator(function*(I,M){if(!I.validateArea)throw new g("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!I.gdbVersion)throw new g("network:undefined-gdb-version",
"version must be defined");const {submitValidateNetworkTopologyJob:L}=yield new Promise((N,S)=>k(["../rest/networks/validateNetworkTopology"],N,S));I=yield L(this.networkServiceUrl,I,{...M});return new F({statusUrl:I,featureServiceUrl:this.featureServiceUrl})});return function(I,M){return A.apply(this,arguments)}}();H._fetchLayerMetaData=function(){var A=b._asyncToGenerator(function*(I,M){I=yield d(I,{responseType:"json",query:{f:"json"},...M});this.sourceJSON=I.data;this.read(I.data,{origin:"service"})});
return function(I,M){return A.apply(this,arguments)}}();H._fetchDataElement=function(){var A=b._asyncToGenerator(function*(I,M,L){this.dataElement||(I=yield d(`${I}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([M]),f:"json"},...L}).then(N=>N.data.layerDataElements?.[0]))&&this.read(I,{origin:"service"})});return function(I,M,L){return A.apply(this,arguments)}}();b._createClass(G,[{key:"datasetName",get:function(){return this.dataElement?.name??null}},{key:"owner",get:function(){return this.dataElement?.userIdentity??
null}},{key:"schemaGeneration",get:function(){return this.dataElement?.schemaGeneration??null}},{key:"parsedUrl",get:function(){return m.urlToObject(this.layerUrl)}},{key:"featureServiceUrl",get:function(){const A=this.parsedUrl&&D.parse(this.parsedUrl.path);return t.isSome(A)?A.url.path:null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const A=this.parsedUrl&&
D.parse(this.parsedUrl.path);return t.isSome(A)?A.sublayer:null}},{key:"networkSystemLayers",get:function(){return null}}]);return G}(l.MultiOriginJSONMixin(n));a.__decorate([h.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],n.prototype,"id",void 0);a.__decorate([h.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],n.prototype,"title",
void 0);a.__decorate([h.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],n.prototype,"layerUrl",void 0);a.__decorate([h.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],n.prototype,"dataElement",void 0);a.__decorate([h.property({type:E,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],n.prototype,"fullExtent",void 0);a.__decorate([h.property({type:C,json:{origins:{service:{read:{source:"extent.spatialReference"}}},
read:!1}})],n.prototype,"spatialReference",void 0);a.__decorate([h.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],n.prototype,"type",void 0);a.__decorate([h.property({readOnly:!0})],n.prototype,"datasetName",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"owner",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"schemaGeneration",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"parsedUrl",null);a.__decorate([h.property({readOnly:!0})],n.prototype,
"featureServiceUrl",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"networkServiceUrl",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"layerId",null);a.__decorate([h.property()],n.prototype,"sourceJSON",void 0);a.__decorate([h.property({readOnly:!0})],n.prototype,"networkSystemLayers",null);return n=a.__decorate([y.subclass("esri.networks.Network")],n)})},"esri/networks/support/TopologyValidationJobInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/mixins/EditBusLayer ../../rest/networks/support/ValidateNetworkTopologyResult".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h,p){d=g.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});p=function(u){function y(C){C=u.call(this,C)||this;C.featureServiceUrl=null;C.statusUrl=null;C.status=null;C.submissionTime=null;C.lastUpdatedTime=null;C._timer=void 0;return C}k._inheritsLoose(y,u);var E=y.prototype;E.destroy=function(){clearInterval(this._timer)};E.checkJobStatus=function(){var C=k._asyncToGenerator(function*(q){({data:q}=yield a(this.statusUrl,{...q,query:{f:"json"}}));
this.read(q);(this.serviceEdits||this.exceededTransferLimit)&&this.featureServiceUrl&&h.editEventBus.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:{edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0}});return this});return function(q){return C.apply(this,arguments)}}();E.waitForJobCompletion=function(){var C=k._asyncToGenerator(function*(q={}){const {interval:D=1E3,statusCallback:F}=
q;return new Promise((K,x)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||x(n.createAbortError());this.checkJobStatus().then(B=>{({status:B}=B);this.status=B;switch(B){case "job-succeeded":this._clearTimer();K(this);break;case "job-waiting":case "job-executing":F&&F(this)}},B=>{this._clearTimer();x(B)})},D)})});return function(){return C.apply(this,arguments)}}();E._clearTimer=function(){clearInterval(this._timer);this._timer=void 0};return y}(p);b.__decorate([v.property()],p.prototype,
"featureServiceUrl",void 0);b.__decorate([v.property({type:String,json:{write:!0}})],p.prototype,"statusUrl",void 0);b.__decorate([e.enumeration(d)],p.prototype,"status",void 0);b.__decorate([v.property({type:Date,json:{type:Number,write:{writer:(u,y)=>{y.submissionTime=u?u.getTime():null}}}})],p.prototype,"submissionTime",void 0);b.__decorate([v.property({type:Date,json:{type:Number,write:{writer:(u,y)=>{y.lastUpdatedTime=u?u.getTime():null}}}})],p.prototype,"lastUpdatedTime",void 0);return p=b.__decorate([m.subclass("esri.networks.support.TopologyValidationJobInfo")],
p)})},"esri/rest/networks/support/ValidateNetworkTopologyResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.moment=null;e.fullUpdate=!1;e.validateErrorsCreated=!1;e.dirtyAreaCount=
null;e.exceededTransferLimit=null;e.serviceEdits=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:Date,json:{type:Number,write:{writer:(t,l)=>{l.moment=t?t.getTime():null}}}})],a.prototype,"moment",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,
"dirtyAreaCount",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0);return a=b.__decorate([v.subclass("esri.rest.networks.support.ValidateNetworkTopologyResult")],a)})},"esri/networks/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),
function(k,b,a,d,g,n,v,t){function l(){l=a._asyncToGenerator(function*(p){const u=p.layers,y=p.layerInfos,E=p.returnGeometry||!1,C=p.outSpatialReference;yield Promise.all(u.map(q=>q.load()));return(yield Promise.all(u.map(function(){var q=a._asyncToGenerator(function*(D){var F=y.find(x=>x.layerUrl===D.parsedUrl?.path);if(!F||!F.objectIds?.length)return{layer:D,featureSet:void 0};const K=D.createQuery();K.returnGeometry=E;K.outFields=F.outFields||["*"];K.outSpatialReference=C;K.gdbVersion=D.gdbVersion;
K.objectIds=F.objectIds;F=t.fromJSON(yield n.queryAllJSON(D,K));return{layer:D,featureSet:F}});return function(D){return q.apply(this,arguments)}}()))).filter(q=>void 0!==q.featureSet)});return l.apply(this,arguments)}function e(p,u){return m.apply(this,arguments)}function m(){m=a._asyncToGenerator(function*(p,u){return"Utility Network Layer"===p?({default:p}=yield new Promise((y,E)=>k(["../UtilityNetwork"],C=>y(Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}))),
E)),new p({layerUrl:u})):null});return m.apply(this,arguments)}function h(){h=a._asyncToGenerator(function*(p){p="portalItem"in p?p:{portalItem:p};!p.portalItem||p.portalItem instanceof v||(p={...p,portalItem:new v(p.portalItem)});p=p.portalItem;yield p.load();if("Feature Service"!==p.type)throw new g("portal:unknown-item-type","Unknown item type '${type}'",{type:p.type});p=p.url;var u=yield d(p,{responseType:"json",query:{f:"json"}});return u.data.type&&u.data.type.includes("Network Layer")?e(u.data.type,
p):u.data.layers&&(u=u.data.layers.find(y=>y.type.includes("Network Layer")))?e(u.type,`${p}/${u.id}`):null});return h.apply(this,arguments)}b.getFeaturesFromLayers=function(p){return l.apply(this,arguments)};b.getObjectIdsFromElements=function(p,u){const y=[],E=new Map;for(const q of u){u=p.getLayerIdBySourceId(q.networkSourceId);if(null==u)continue;let D=E.get(u);void 0===D&&(D=[]);D.push(q.objectId);E.set(u,D)}const C=p.featureServiceUrl;E.forEach((q,D)=>y.push({layerUrl:`${C}/${D}`,objectIds:q}));
return y};b.networkFromPortalItem=function(p){return h.apply(this,arguments)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/networks/support/QueryNamedTraceConfigurationsParameters":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.globalIds=[];e.creators=[];e.tags=[];e.names=[];return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"globalIds",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"creators",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],
a.prototype,"names",void 0);return a=b.__decorate([v.subclass("esri.rest.networks.support.QueryNamedTraceConfigurationsParameters")],a)})},"esri/networks/RulesTable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(k,b,a,d,g,n,v,t,l,e){d=function(m){function h(u){u=
m.call(this,u)||this;u.request=a;return u}k._inheritsLoose(h,m);var p=h.prototype;p.initialize=function(){};p.load=function(){var u=k._asyncToGenerator(function*(y){y=this.layer.load(y).then(()=>this._initializeRulesTable());this.addResolvingPromise(y);return this});return function(y){return u.apply(this,arguments)}}();p.getFeatureSQL=function(u,y){var E=u.layerId.toString(),C=u.fieldsIndex?.normalizeFieldName("assetGroup");u=u.fieldsIndex?.normalizeFieldName("assetType");C=C?y.attributes[C]:null;
y=u?y.attributes[u]:null;if(E=this.rulesHash[E])if(E=E.assetGroupHash[C])return(E=E.assetTypeHash[y])?E:null;return null};p._initializeRulesTable=function(){var u=k._asyncToGenerator(function*(){const y={};let E;var C=E||(E={});C[C.from=0]="from";C[C.to=1]="to";C[C.via=2]="via";C=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",
assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const B of this.rules)if(B.ruleType===e.RuleType.RTJunctionJunctionConnectivity||B.ruleType===e.RuleType.RTJunctionEdgeConnectivity||B.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity){var q=[[E.from,E.to],[E.to,E.from]];B.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity&&(q=[[E.from,E.via],[E.via,E.from],[E.to,E.via],[E.via,E.to]]);for(const G of q){q=G.shift();var D=G.shift(),F=!1;switch(B.ruleType){case e.RuleType.RTEdgeJunctionEdgeConnectivity:F=
q===E.from||q===E.to;break;case e.RuleType.RTJunctionEdgeConnectivity:F=q===E.to}var K=C[q];q=B[K.networkSourceId].layerId.toString();const H=B[K.assetGroupId]?.assetGroupCode?.toString();K=B[K.assetTypeId]?.assetTypeCode?.toString();var x=C[D];D=B[x.networkSourceId].layerId.toString();const A=B[x.assetGroupId]?.assetGroupCode?.toString();x=B[x.assetTypeId];const I=x?.assetTypeCode?.toString(),M=y[q]?y[q]:{assetGroupHash:{}};if(!(H&&K&&A&&I))continue;const L=M.assetGroupHash[H]?M.assetGroupHash[H]:
{assetTypeHash:{}},N=L.assetTypeHash[K]?L.assetTypeHash[K]:{};N[D]=N[D]?N[D]:{};F&&(N[q]=N[q]?N[q]:{},F=`(assetgroup = ${H} AND assettype = ${K})`,N[q].anyVertex=N[q].anyVertex?`${N[q].anyVertex}`:`${F}`,"esriNECPEndVertex"===x.connectivityPolicy&&(N[q].endVertex=N[q]?.endVertex?`${N[q].endVertex}`:`${F}`));F=`(assetgroup = ${A} AND assettype = ${I})`;N[D].anyVertex=N[D]?.anyVertex?`${N[D].anyVertex} OR ${F}`:`${F}`;"esriNECPEndVertex"===x.connectivityPolicy&&(N[D].endVertex=N[D]?.endVertex?`${N[D].endVertex} OR ${F}`:
`${F}`);L.assetTypeHash[K]=N;M.assetGroupHash[H]=L;y[q]=M}}this.rulesHash=y});return function(){return u.apply(this,arguments)}}();return h}(d.JSONSupportMixin(g));b.__decorate([n.property({constructOnly:!0})],d.prototype,"layer",void 0);b.__decorate([n.property({constructOnly:!0})],d.prototype,"rules",void 0);b.__decorate([n.property()],d.prototype,"rulesHash",void 0);b.__decorate([n.property({constructOnly:!0})],d.prototype,"request",void 0);return d=b.__decorate([l.subclass("esri.networks.RulesTable")],
d)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(k,b){k.RuleType=void 0;var a=k.RuleType||(k.RuleType={});a[a.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";a[a.RTContainment=2]="RTContainment";a[a.RTAttachment=3]="RTAttachment";a[a.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";a[a.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";a=new b.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",
shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const d=new b.JSONMap({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});b=new b.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});
k.associationTypeKebabDict=d;k.traceTypeKebabDict=a;k.validationTypeKebabDict=b;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m){a=function(h){function p(u){u=h.call(this,u)||this;u.globalId=null;u.title=null;u.traceConfiguration=null;u.creationDate=null;u.creator=null;u.description=null;u.minStartingPoints=null;u.resultTypes=[];u.tags=[];u.traceType=null;return u}k._inheritsLoose(p,h);p.prototype.readTraceConfiguration=function(u,y){return void 0!==u.tierName?m.fromJSON(u):l.fromJSON(u)};return p}(a.MultiOriginJSONSupport);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},
write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",void 0);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);b.__decorate([d.property({type:l,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,
"traceConfiguration",void 0);b.__decorate([v.reader("service","traceConfiguration")],a.prototype,"readTraceConfiguration",null);b.__decorate([d.property({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);
b.__decorate([d.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",void 0);b.__decorate([d.property({type:[Object],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);b.__decorate([d.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:e.traceTypeKebabDict.apiValues,
json:{type:e.traceTypeKebabDict.jsonValues,origins:{service:{read:e.traceTypeKebabDict.read,write:e.traceTypeKebabDict.write}},read:!1}})],a.prototype,"traceType",void 0);return a=b.__decorate([t.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.conditionBarriers=[];e.outputConditions=[];e.functions=[];e.functionBarriers=[];e.traversabilityScope=null;e.shortestPathNetworkAttributeName=null;e.includeBarriers=null;e.validateConsistency=null;e.ignoreBarriersAtStartingPoints=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);b.__decorate([d.property({type:[Object],
json:{write:!0}})],a.prototype,"outputConditions",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0);b.__decorate([d.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);b.__decorate([d.property({type:Boolean,
json:{write:!0}})],a.prototype,"includeBarriers",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=b.__decorate([v.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),
function(k,b,a,d,g,n,v){d=function(t){function l(e){e=t.call(this,e)||this;e.filterBarriers=[];e.domainNetworkName=null;e.filterBitsetNetworkAttributeName=null;e.filterFunctionBarriers=[];e.filterScope=null;e.includeContainers=null;e.includeContent=null;e.includeIsolated=null;e.includeStructures=null;e.includeUpToFirstSpatialContainer=null;e.nearestNeighbor=null;e.outputFilterCategories=[];e.outputFilters=[];e.propagators=[];e.subnetworkName=null;e.targetTierName=null;e.tierName=null;e.validateLocatability=
null;return e}k._inheritsLoose(l,t);return l}(v);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterBarriers",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"domainNetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"filterBitsetNetworkAttributeName",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterFunctionBarriers",void 0);b.__decorate([a.property({type:["junctions",
"edges","junctionsAndEdges"],json:{write:!0}})],d.prototype,"filterScope",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContainers",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContent",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeIsolated",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeStructures",void 0);b.__decorate([a.property({type:Boolean,
json:{write:!0}})],d.prototype,"includeUpToFirstSpatialContainer",void 0);b.__decorate([a.property({type:Object,json:{write:!0}})],d.prototype,"nearestNeighbor",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilterCategories",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilters",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"propagators",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],
d.prototype,"subnetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"targetTierName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"tierName",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"validateLocatability",void 0);return d=b.__decorate([n.subclass("esri.networks.support.UNTraceConfiguration")],d)})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.rulesTableId=null;e.rulesTableUrl=null;e.subnetworksTableId=null;e.subnetworksTableUrl=null;e.dirtyAreasLayerId=null;e.dirtyAreasLayerUrl=null;return e}k._inheritsLoose(l,t);return l}(a);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableId",
void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);return a=b.__decorate([v.subclass("esri.networks.support.NetworkSystemLayers")],a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(k,b,a,d,g,n,v,t,l){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});d=function(e){function m(h){h=e.call(this,h)||this;h.defaultConfiguration=null;h.id=null;h.name=null;h.terminals=[];h.traversabilityModel=null;return h}k._inheritsLoose(m,e);return m}(d.JSONSupport);b.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"defaultConfiguration",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],d.prototype,"id",void 0);b.__decorate([g.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],d.prototype,"name",void 0);b.__decorate([g.property({type:[l],json:{write:!0}})],d.prototype,"terminals",void 0);b.__decorate([g.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],d.prototype,"traversabilityModel",void 0);return d=b.__decorate([t.subclass("esri.networks.support.TerminalConfiguration")],
d)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.id=null;e.name=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:Number,json:{read:{source:"terminalId"},
write:{target:"terminalId"}}})],a.prototype,"id",void 0);b.__decorate([d.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=b.__decorate([v.subclass("esri.networks.support.Terminal")],a)})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(k,b,a,d,g,n,v,t){function l(){l=b._asyncToGenerator(function*(m,h,p){h=e(h);m=n.parseUrl(m);const u={...m.query,f:"json",...h.toJSON()},y=h.outSpatialReference,E=g.getJsonType(h.geometries[0]);h=n.asValidOptions(u,p);return a(m.path+"/project",h).then(({data:{geometries:C}})=>v.decodeGeometries(C,E,y))});return l.apply(this,arguments)}const e=d.ensureType(t);k.project=function(m,h,p){return l.apply(this,arguments)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(k,b,a,d,g,n,v,t){a=function(l){function e(m){m=l.call(this,m)||this;m.geometries=[];m.outSpatialReference=null;m.transformation=null;m.transformForward=null;return m}k._inheritsLoose(e,l);e.prototype.toJSON=function(){const m=this.geometries.map(u=>u.toJSON()),h=this.geometries[0],p={};p.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());p.inSR=h.spatialReference.wkid||JSON.stringify(h.spatialReference.toJSON());p.geometries=JSON.stringify({geometryType:t.getJsonType(h),
geometries:m});this.transformation&&(p.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(p.transformForward=this.transformForward);return p};return e}(a.JSONSupport);b.__decorate([d.property()],a.prototype,"geometries",void 0);b.__decorate([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property()],a.prototype,"transformation",void 0);b.__decorate([d.property()],a.prototype,"transformForward",
void 0);return a=b.__decorate([v.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(k,b,a,d,g,n,v,t,l,e){a=function(m){function h(p){p=
m.call(this,p)||this;p.levelLayer=null;p.facilityLayer=null;p.siteLayer=null;return p}k._inheritsLoose(h,m);return h}(a.JSONSupport);b.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([d.property({type:t,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([d.property({type:e,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([v.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.facilityIdField=null;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([d.property({type:String,
json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([v.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.facilityIdField=null;e.layerId=null;e.levelIdField=null;e.levelNumberField=null;e.longNameField=null;e.shortNameField=null;e.sublayerId=null;e.verticalOrderField=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,
json:{write:!0}})],a.prototype,"levelIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",
void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([v.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(k,
b,a,d,g,n,v){a=function(t){function l(e){e=t.call(this,e)||this;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}k._inheritsLoose(l,t);return l}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},
write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([v.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/GeotriggersInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),
function(k,b,a,d,g,n,v,t,l){a=function(e){function m(h){h=e.call(this,h)||this;h.geotriggers=null;return h}k._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({types:[l.types],json:{write:{isRequired:!0}}})],a.prototype,"geotriggers",void 0);return a=b.__decorate([t.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(k,b,a){k.types={base:a,
key:"type",typeMap:{fence:b}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h){d=function(p){function u(y){y=p.call(this,y)||this;y.enterExitRule="enter-contains-and-exit-does-not-intersect";y.feed=null;y.feedAccuracyMode="use-geometry";y.fenceNotificationRule=null;y.fenceParameters=null;y.name=null;y.notificationOptions=null;y.type="fence";return y}k._inheritsLoose(u,p);return u}(e);b.__decorate([n.enumeration(h.enterExitRuleKebabDict)],d.prototype,"enterExitRule",void 0);b.__decorate([a.property({type:t,json:{write:{isRequired:!0}}})],d.prototype,
"feed",void 0);b.__decorate([n.enumeration(h.feedAccuracyModeKebabDict)],d.prototype,"feedAccuracyMode",void 0);b.__decorate([a.property({type:h.fenceNotificationRuleKebabDict.apiValues,json:{type:h.fenceNotificationRuleKebabDict.jsonValues,read:h.fenceNotificationRuleKebabDict.read,write:{writer:h.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],d.prototype,"fenceNotificationRule",void 0);b.__decorate([a.property({type:l,json:{write:{isRequired:!0}}})],d.prototype,"fenceParameters",void 0);
b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);b.__decorate([a.property({type:m,json:{write:!0}})],d.prototype,"notificationOptions",void 0);b.__decorate([n.enumeration({fence:"fence"},{readOnly:!0})],d.prototype,"type",void 0);return d=b.__decorate([v.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],d)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(k,b,a,d,g,n,v,t,l,e){d=new d.JSONMap({deviceLocation:"device-location"});a=function(m){function h(p){p=m.call(this,p)||this;p.filterExpression=null;p.type="device-location";return p}k._inheritsLoose(h,m);return h}(a.ClonableMixin(g.JSONSupport));b.__decorate([n.property({type:e,json:{write:!0}})],a.prototype,"filterExpression",void 0);b.__decorate([n.property({type:d.apiValues,readOnly:!0,json:{type:d.jsonValues,read:d.read,write:d.write}})],a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],
a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v,t){a=function(l){function e(m){m=l.call(this,m)||this;m.expression=null;m.returnType="string";m.title=null;return m}k._inheritsLoose(e,l);
return e}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"expression",void 0);b.__decorate([g.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=b.__decorate([t.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m){a=function(h){function p(u){u=h.call(this,u)||this;u.fenceSource=null;u.filter=null;u.bufferDistance=null;u.type="features";return u}k._inheritsLoose(p,h);return p}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:m,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"filter",void 0);b.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);
b.__decorate([t.enumeration({features:"features"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(k,b,a,d,g,n,v,t,l,e){d=function(m){function h(p){p=m.call(this,p)||this;p.geometry=null;p.where=null;return p}k._inheritsLoose(h,m);return h}(d.ClonableMixin(g.JSONSupport));b.__decorate([n.property({types:a.geometryTypes,json:{read:e.fromJSON,write:!0}})],d.prototype,"geometry",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],d)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v,t,l){a=function(e){function m(h){h=e.call(this,h)||this;h.layerId=null;h.layerUrl=null;h.type="feature-layer";return h}k._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,"layerUrl",void 0);b.__decorate([t.enumeration({featureLayer:"feature-layer"},
{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m){a=function(h){function p(u){u=h.call(this,u)||this;u.type="fence";return u}k._inheritsLoose(p,h);return p}(a.ClonableMixin(d.JSONSupport));b.__decorate([e.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([m.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(k,b,a,d,g,n,v,t,l){a=function(e){function m(h){h=e.call(this,h)||this;h.expressionInfo=null;h.requestedActions=null;return h}k._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:l,json:{write:!0}})],a.prototype,"expressionInfo",void 0);b.__decorate([g.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=b.__decorate([t.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(k,b){const a=new b.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),d=new b.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});b=new b.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});k.enterExitRuleKebabDict=
a;k.feedAccuracyModeKebabDict=d;k.fenceNotificationRuleKebabDict=b;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v){var t;a=t=function(l){function e(m){m=l.call(this,m)||this;m.activeRange=null;m.currentRangeExtent=
null;m.fullRangeExtent=null;return m}k._inheritsLoose(e,l);e.prototype.clone=function(){return new t(d.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return e}(a.JSONSupport);b.__decorate([g.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",void 0);b.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"currentRangeExtent",
void 0);b.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=t=b.__decorate([v.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),function(k,
b,a,d,g,n,v,t,l,e){var m;a=m=function(h){function p(u){u=h.call(this,u)||this;u.range=null;u.timeSlider=null;u.floorFilter=null;return u}k._inheritsLoose(p,h);p.prototype.clone=function(){return new m(d.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return p}(a.JSONSupport);b.__decorate([g.property({type:l,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([g.property({type:t,
json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=m=b.__decorate([v.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v){var t;a=t=function(l){function e(m){m=l.call(this,m)||this;m.enabled=
!1;m.longNames=!1;m.minimized=!1;m.pinnedLevels=!1;m.site=null;m.facility=null;m.level=null;return m}k._inheritsLoose(e,l);e.prototype.clone=function(){return new t(d.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return e}(a.JSONSupport);b.__decorate([g.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([g.property({type:Boolean,
json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([g.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([g.property({type:String,
json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([g.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=t=b.__decorate([v.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v,t){var l;a=new a.JSONMap({slider:"slider",picker:"picker"});d=l=function(e){function m(h){h=e.call(this,h)||this;h.interactionMode=null;h.numStops=null;h.stopInterval=null;return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return m}(d.JSONSupport);b.__decorate([g.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},
write:{isRequired:!0,writer:a.write}}})],d.prototype,"interactionMode",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],d.prototype,"numStops",void 0);b.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],d.prototype,"stopInterval",void 0);return d=l=b.__decorate([t.subclass("esri.webdoc.widgets.Range")],
d)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(k,b,a,d,g,n,v,t,l,e,m,h,p){var u;
g=u=function(y){function E(q){q=y.call(this,q)||this;q.currentTimeExtent=null;q.fullTimeExtent=null;q.loop=!1;q.numStops=null;q.numThumbs=null;q.stopDelay=null;q.stopInterval=null;q.stops=null;return q}k._inheritsLoose(E,y);var C=E.prototype;C.readCurrentTimeExtent=function(q){if(q)return new a({start:null!=q[0]?new Date(q[0]):null,end:null!=q[1]?new Date(q[1]):null})};C.writeCurrentTimeExtent=function(q,D,F){q&&t.setDeepValue(F,[v.isSome(q.start)?q.start.getTime():null,v.isSome(q.end)?q.end.getTime():
null],D)};C.readFullTimeExtent=function(q,D){if(q=D.properties)return new a({start:null!=q.startTime?new Date(q.startTime):null,end:null!=q.endTime?new Date(q.endTime):null})};C.writeFullTimeExtent=function(q,D){if(q){D=D.properties=D.properties||{};var F=q.end;q=q.start;F&&(D.endTime=v.isSome(F)?F.getTime():null);q&&(D.startTime=v.isSome(q)?q.getTime():null)}};C.readStopInterval=function(q,D,F){return q?d.fromJSON({value:q.interval,unit:q.units},F):null};C.writeStopInterval=function(q,D,F,K){q&&
(q=q.toJSON(K),t.setDeepValue(F,{interval:q.value,units:q.unit},D))};C.readStops=function(q){return q&&q.length?q.map(D=>new Date(D)):null};C.writeStops=function(q,D,F){q&&q.length&&t.setDeepValue(F,q.map(K=>K.getTime()),D)};C.clone=function(){return new u(n.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};return E}(g.JSONSupport);
b.__decorate([l.property({type:a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],g.prototype,"currentTimeExtent",void 0);b.__decorate([m.reader("currentTimeExtent")],g.prototype,"readCurrentTimeExtent",null);b.__decorate([p.writer("currentTimeExtent")],g.prototype,"writeCurrentTimeExtent",null);b.__decorate([l.property({type:a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],
g.prototype,"fullTimeExtent",void 0);b.__decorate([m.reader("fullTimeExtent")],g.prototype,"readFullTimeExtent",null);b.__decorate([p.writer("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null);b.__decorate([l.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],g.prototype,"loop",void 0);b.__decorate([l.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var y=
!!this.stops?.length;y=!(this.stopInterval||y);return{enabled:y,isRequired:y}}}}})],g.prototype,"numStops",void 0);b.__decorate([l.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],g.prototype,"numThumbs",void 0);b.__decorate([l.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],g.prototype,"stopDelay",void 0);b.__decorate([l.property({type:d,
json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const y=!!this.stops?.length;return{enabled:!y,isRequired:!(null!=this.numStops||y)}}}}})],g.prototype,"stopInterval",void 0);b.__decorate([m.reader("stopInterval")],g.prototype,"readStopInterval",null);b.__decorate([p.writer("stopInterval")],g.prototype,"writeStopInterval",null);b.__decorate([l.property({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",
overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],g.prototype,"stops",void 0);b.__decorate([m.reader("stops")],g.prototype,"readStops",null);b.__decorate([p.writer("stops")],g.prototype,"writeStops",null);return g=u=b.__decorate([h.subclass("esri.webdoc.widgets.TimeSlider")],g)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(k){const b={width:600,height:400};k.getOptimalThumbnailSize=function(a,d){d=d||b;let {width:g,height:n}=d;d=g/n;
1.5>d?n=g/1.5:1.5<d&&(g=1.5*n);g>a.width&&(n*=a.width/g,g=a.width);n>a.height&&(g*=a.height/n,n=a.height);return{width:Math.round(g),height:Math.round(n)}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(k,b,a,d,g,n,v,t){var l;a=l=function(e){function m(h){h=e.call(this,h)||this;h.editing=null;h.offline=null;h.viewing=null;return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l(d.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return m}(a.JSONSupport);b.__decorate([g.property({json:{write:!0}})],a.prototype,"editing",void 0);b.__decorate([g.property({json:{write:!0}})],a.prototype,"offline",void 0);b.__decorate([g.property({type:t,json:{write:!0}})],
a.prototype,"viewing",void 0);return a=l=b.__decorate([v.subclass("esri.webmap.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(k,b,a,d,g,n,v,t){var l;a=l=function(e){function m(h){h=e.call(this,
h)||this;h.search=null;return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l(d.clone({search:this.search}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:!0}})],a.prototype,"search",void 0);return a=l=b.__decorate([v.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h,p){var u;const y=a.ofType(h),E=a.ofType(p);a=u=function(C){function q(F){F=C.call(this,F)||this;F.addressSearchEnabled=!0;F.enabled=!0;F.hintText=null;F.layers=new y;F.tables=new E;return F}k._inheritsLoose(q,C);var D=q.prototype;D.readAddressSearchEnabled=function(F){return!F};D.writeAddressSearchEnabled=function(F,K,x){K[x]=!F};D.clone=function(){return new u(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return q}(d.JSONSupport);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([t.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([e.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([n.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([n.property({type:y,json:{write:{overridePolicy:m.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([n.property({type:E,json:{read:!0,write:{overridePolicy:m.writeNonEmptyCollectionPolicy}}})],
a.prototype,"tables",void 0);return a=u=b.__decorate([l.subclass("esri.webdoc.applicationProperties.Search")],a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(k){k.writeNonEmptyCollectionPolicy=function(b){return{enabled:!!b?.length}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(k,b,a,d,g,n,v,t){var l;a=l=function(e){function m(h){h=e.call(this,h)||this;h.field=null;h.id=null;h.subLayer=null;return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l(d.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([g.property({type:n.Integer,
json:{write:!0}})],a.prototype,"subLayer",void 0);return a=l=b.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(k,b,a,d,g,n,v,t,l){var e;a=e=function(m){function h(p){p=m.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}k._inheritsLoose(h,m);h.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return h}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([v.enumeration(l.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([t.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(k,b,a,d,g,n,v,t){var l;a=l=function(e){function m(h){h=
e.call(this,h)||this;h.field=null;h.id=null;return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l(d.clone({field:this.field,id:this.id}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=l=b.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(k,b,a,d,g,n,v,t,l){var e;a=e=function(m){function h(p){p=m.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}k._inheritsLoose(h,m);h.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return h}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([v.enumeration(l.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([t.subclass("esri.webdoc.applicationProperties.SearchTableField")],a)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../TimeExtent ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m,h,p,u,y,E,C){var q;n=q=function(D){function F(x){x=D.call(this,x)||this;x.name=null;x.thumbnail=new C.SlideThumbnail;x.timeExtent=null;return x}k._inheritsLoose(F,D);var K=F.prototype;K.castThumbnail=function(x){return"string"===typeof x?new C.SlideThumbnail({url:x}):E.ensureType(C.SlideThumbnail,x)};K.readViewpoint=function(x,B){const {extent:G,viewpoint:H}=B;return d.fromJSON(H||{targetGeometry:G})};K.writeViewpoint=function(x,B,G,H){if(x){var {targetGeometry:A}=x;
e.isSome(A)&&"extent"!==A.type?H?.messages?H.messages.push(new g("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):l.getLogger(this.declaredClass).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(e.isSome(A)&&(B.extent=A.toJSON()),B[G]=x.toJSON())}};K.clone=function(){return new q(t.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))};
k._createClass(F,[{key:"viewpoint",set:function(x){const {targetGeometry:B,scale:G}=x;e.isSome(B)&&"point"===B.type&&e.isNone(G)&&l.getLogger(this.declaredClass).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",x);this._set("viewpoint",x)}}]);return F}(n.IdentifiableMixin(v.JSONSupport));b.__decorate([m.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],n.prototype,"name",void 0);b.__decorate([m.property({type:C.SlideThumbnail,json:{write:{overridePolicy(D){return{enabled:!(!D||
!D.url)}}}}})],n.prototype,"thumbnail",void 0);b.__decorate([h.cast("thumbnail")],n.prototype,"castThumbnail",null);b.__decorate([m.property({type:a,json:{write:!0}})],n.prototype,"timeExtent",void 0);b.__decorate([m.property({type:d,nonNullable:!0,json:{write:!0}})],n.prototype,"viewpoint",null);b.__decorate([p.reader("viewpoint",["extent","viewpoint"])],n.prototype,"readViewpoint",null);b.__decorate([y.writer("viewpoint")],n.prototype,"writeViewpoint",null);return n=q=b.__decorate([u.subclass("esri.webmap.Bookmark")],
n)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(k,b,a,d,g,n,v,t){var l;k.SlideThumbnail=l=function(e){function m(){var p=e.apply(this,arguments)||this;p.url="";return p}b._inheritsLoose(m,e);var h=m.prototype;h.destroy=
function(){this.url=""};h.clone=function(){return new l({url:this.url})};return m}(d.JSONSupport);a.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],k.SlideThumbnail.prototype,"url",void 0);k.SlideThumbnail=l=a.__decorate([t.subclass("esri.webdoc.support.SlideThumbnail")],k.SlideThumbnail);Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(k,b,a,d,g,n,v,t,l,e,m){var h;d=h=function(p){function u(y){y=p.call(this,y)||this;y.background=null;y.rangeInfo=null;y.spatialReference=null;y.viewpoint=null;return y}k._inheritsLoose(u,p);u.prototype.clone=function(){return new h(g.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return u}(d);b.__decorate([n.property({type:m})],d.prototype,"background",void 0);b.__decorate([n.property({type:e})],d.prototype,"rangeInfo",
void 0);b.__decorate([n.property({type:l})],d.prototype,"spatialReference",void 0);b.__decorate([n.property({type:a})],d.prototype,"viewpoint",void 0);return d=h=b.__decorate([t.subclass("esri.webmap.InitialViewProperties")],d)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,b,a,d,g,n,v,t){var l;d=l=function(e){function m(h){h=e.call(this,h)||this;h.color=new a([0,0,0,1]);return h}k._inheritsLoose(m,e);m.prototype.clone=function(){return new l(g.clone({color:this.color}))};return m}(d.JSONSupport);b.__decorate([n.property({type:a,json:{write:!0}})],d.prototype,"color",void 0);return d=l=b.__decorate([t.subclass("esri.webmap.background.ColorBackground")],d)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],
function(k,b,a){a=function(d){function g(n,v){return d.call(this,n,v,"webmap")||this}b._inheritsLoose(g,d);return g}(a.Version);k.Version=a;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/Version":function(){define(["exports","./Error"],function(k,b){let a=function(){function d(n,v,t=""){this.major=n;this.minor=v;this._context=t}var g=d.prototype;g.lessThan=function(n,v){return this.major<n||n===this.major&&this.minor<v};g.since=function(n,v){return!this.lessThan(n,v)};
g.validate=function(n){if(this.major!==n.major)throw new b((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:n});};g.clone=function(){return new d(this.major,this.minor,this._context)};d.parse=function(n,v=""){const [t,l]=n.split(".");var e=/^\s*\d+\s*$/;if(!t||!t.match||!t.match(e))throw new b((v&&v+":")+"invalid-version","Expected major version to be a number, but got '${version}'",
{version:n});if(!l||!l.match||!l.match(e))throw new b((v&&v+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:n});n=parseInt(t,10);e=parseInt(l,10);return new d(n,e,v)};return d}();k.Version=a;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/spatialReferenceUtils ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./layers/support/layerUtils ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/geometryService/project ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/GeotriggersInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),function(k,
b,a,d,g,n,v,t,l,e,m,h,p,u,y,E,C,q,D,F,K,x,B,G,H,A,I,M,L,N,S,R,ea,P,fa,ha,aa,U,T,X,Y,oa,pa,qa,ra,ia,ba,ka){const ja=new ba.Version(2,27),la=v.ofType(ra);v=v.ofType(S);const ca=new Map;ca.set("image/jpeg","jpeg");ca.set("image/jpg","jpg");ca.set("image/png","png");ca.set("image/gif","gif");const ma=P.TypeKeyword.JSAPI,na=P.TypeKeyword.DEVELOPER_BASEMAP,sa="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(V=>
V.toLowerCase());g=function(V){function da(c){c=V.call(this,c)||this;c._isAuthoringAppSetByUser=!1;c._isAuthoringAppVersionSetByUser=!1;c._thumbnailFilename=null;c._updateFromPromise=null;c._resourceReferences={portalItem:null,paths:[]};c.applicationProperties=null;c.bookmarks=new la;c.floorInfo=null;c.geotriggersInfo=null;c.initialViewProperties=new ia;c.portalItem=null;c.presentation=null;c.sourceVersion=null;c.widgets=null;c.utilityNetworks=null;c.authoringApp=c.authoringAppVersion=null;c._isAuthoringAppSetByUser=
c._isAuthoringAppVersionSetByUser=!1;return c}b._inheritsLoose(da,V);var z=da.prototype;z.destroy=function(){const c=this.portalItem;this.portalItem=null;c?.destroy()};z.initialize=function(){this.when().catch(c=>{m.getLogger(this.declaredClass).error("#load()","Failed to load web map",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(f){this.addResolvingPromise(Promise.reject(f));return}this.read(c)}};z.writeAuthoringApp=function(c,f){f.authoringApp=c&&this._isAuthoringAppSetByUser?
c:ma};z.writeAuthoringAppVersion=function(c,f){f.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:d.version};z.readInitialViewProperties=function(c,f){c=new ia;f.background&&(c.background=ka.fromJSON(f.background));const r=f.initialState?.viewpoint;r&&(r.rotation&&ba.Version.parse(f.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===f.authoringApp&&(r.rotation*=-1),c.viewpoint=n.fromJSON(r));f.mapRangeInfo&&(c.rangeInfo=X.fromJSON(f.mapRangeInfo));f.spatialReference&&(c.spatialReference=
A.fromJSON(f.spatialReference));return c};z.writeInitialViewProperties=function(c,f,r,w){c&&((r=c.background)&&r.color&&(f.background=r.write({},w)),c.viewpoint&&(f.initialState={viewpoint:c.viewpoint.write({},w)}),c.rangeInfo&&(f.mapRangeInfo=c.rangeInfo.toJSON(w)),c.spatialReference&&(f.spatialReference=c.spatialReference.write({},w)))};z.writeLayers=function(c,f,r,w){f[r]=this._writeLayers(c,w,"operational-layers")};z.readSourceVersion=function(c,f){const [r,w]=f.version.split(".");return new ba.Version(parseInt(r,
10),parseInt(w,10))};z.writeSourceVersion=function(c,f,r){f[r]=`${ja.major}.${ja.minor}`};z.writeTables=function(c,f,r,w){c=this._writeLayers(c,w,"tables");c.length&&(f[r]=c)};z.load=function(c){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};z.loadAll=function(){return e.loadAll(this,c=>{c(this.ground,this.basemap,this.layers,this.tables)})};z.read=function(c,f){f={...f,origin:"web-map"};const r=this._getAuthoringPropsState();H.readLoadable(this,c,w=>V.prototype.read.call(this,
c,w),f);this._restoreAuthoringPropsFromState(r)};z.write=function(c,f){if("loaded"!==this.loadStatus)throw c=new t("webmap:not-loaded","Web map must be loaded before it can be serialized"),m.getLogger(this.declaredClass).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),c;this._removeDanglingLayerRefs();f={...f,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return V.prototype.write.call(this,c,f)};z.save=function(){var c=b._asyncToGenerator(function*(f){f=
f||{};this._validateItem();const r=new Promise((Q,W)=>k(["./webdoc/support/saveUtils"],Q,W));yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();yield this._validateMap();const w=this.portalItem;var J=C.urlToObject(w.itemUrl);const O={origin:"web-map",messages:[],writtenProperties:[],url:J,portal:w.portal||R.getDefault(),portalItem:w,verifyItemRelativeUrls:J?{rootPath:J.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],
toKeep:[],pendingOperations:[]}};J=this.write({},O);yield Promise.all(O.resources.pendingOperations);this._validateJSONForWriting(O,f);yield this._updateItemProperties(w);yield this._updateItem(w,J,O);yield Promise.all([this._updateItemThumbnail(),r.then(({saveResources:Q})=>Q(this._resourceReferences,O,null))]);return w});return function(f){return c.apply(this,arguments)}}();z.saveAs=function(){var c=b._asyncToGenerator(function*(f,r){r=r||{};f=this._getPortalItem(f);const w=new Promise((W,Z)=>k(["./webdoc/support/saveUtils"],
W,Z));yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();yield this._validateMap();const J={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:f.portal,portalItem:f,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},O=this.write({},J);yield Promise.all(J.resources.pendingOperations);this._validateJSONForWriting(J,r);yield this._updateItemPropertiesForSaveAs(f);const Q=this._getThumbnailState();
if(yield this._createItem(f,O,J,r))this._resourceReferences.portalItem=f;this._restoreThumbnailFromState(Q);yield Promise.all([this._updateItemThumbnail(),w.then(({saveResources:W})=>W(this._resourceReferences,J,null))]);return f});return function(f,r){return c.apply(this,arguments)}}();z.updateFrom=function(){var c=b._asyncToGenerator(function*(f,r){this._updateFromPromise=f=this._updateFromInternal(f,r);yield f;f===this._updateFromPromise&&(this._updateFromPromise=null)});return function(f,r){return c.apply(this,
arguments)}}();z.getLayerJSONFromResourceInfo=function(c){const f=this.resourceInfo;return this._collectAllLayersJSON([...(f?.baseMap?.baseMapLayers||[]),...(f?.operationalLayers||[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(r=>r.id===c.id)};z._collectAllLayersJSON=function(c){return c.reduce((f,r)=>{f.push(r);"GroupLayer"===r.layerType&&(f=f.concat(this._collectAllLayersJSON(r.layers||[])));return f},[])};z._writeLayers=function(c,f,r){f={...f,layerContainerType:r};return c.map(w=>
h.unwrap(pa.getLayerJSON(w,"tables"===r?null:this.getLayerJSONFromResourceInfo(w),f))).filter(Boolean).toArray()};z._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve()};z._loadFromItem=function(){var c=b._asyncToGenerator(function*(f){yield f.load().catch(J=>{throw new t("webmap:load-portal-item","Failed to load portal item",{error:J});});if("Web Map"!==
f.type)throw new t("webmap:invalid-portal-item",`Invalid portal item type '${f.type}', expected 'Web Map'`,{type:f.type});const r=yield f.fetchData();this.resourceInfo=r;const w={origin:"web-map",url:C.urlToObject(f.itemUrl),portal:f.portal||R.getDefault(),portalItem:f,readResourcePaths:[]};yield this._readAndLoadFromJSON(r,w);this._resourceReferences={portalItem:f,paths:w.readResourcePaths??[]};return this._computeInitialViewpoint()});return function(f){return c.apply(this,arguments)}}();z._readAndLoadFromJSON=
function(c,f){c=this._validateJSON(c);this.read(c,f);return this._loadFromJSON(c,f)};z._validateJSON=function(c){const f=ba.Version.parse(c.version||"","webmap");ja.validate(f);c.version=`${f.major}.${f.minor}`;return c};z._loadFromJSON=function(c,f){const r={context:{...f,layerContainerType:"operational-layers"}};this.portalItem&&(r.context.portal=this.portalItem.portal||R.getDefault());return(new Promise((w,J)=>k(["./layers/support/layersCreator"],w,J))).then(({populateOperationalLayers:w})=>{const J=
[];var O=c.operationalLayers;O&&O.length&&J.push(w(this.layers,O,r));O={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const Q=c.tables;Q&&Q.length&&J.push(w(this.tables,Q,O));return y.eachAlways(J).then(()=>{})})};z._computeInitialViewpoint=function(){var c=b._asyncToGenerator(function*(){let f=this.initialViewProperties;if(!f?.viewpoint?.targetGeometry){var r=yield this._getExtentFromItem();r&&(f=f?f.clone():new ia,f.viewpoint=new n,f.viewpoint.targetGeometry=
r,this.initialViewProperties=f)}});return function(){return c.apply(this,arguments)}}();z._getExtentFromItem=function(){var c=b._asyncToGenerator(function*(){const f=this.initialViewProperties?.spatialReference,r=this.portalItem?.extent;return f&&r?f.isWGS84?r.clone():f.isWebMercator?M.geographicToWebMercator(r):(yield new Promise((w,J)=>k(["./portal/support/geometryServiceUtils"],w,J))).getGeometryServiceURL(this.portalItem).then(w=>{const J=new ha;J.geometries=[r];J.outSpatialReference=f;return fa.project(w,
J)}).then(w=>w[0]).catch(w=>{m.getLogger(this.declaredClass).error("Error projecting item's extent:",w);return null}):null});return function(){return c.apply(this,arguments)}}();z._removeDanglingLayerRefs=function(){var c=this.applicationProperties,f=c&&c.viewing&&c.viewing.search;const r=w=>this.allLayers.some(J=>J.id===w);f&&f.layers&&(f.layers=f.layers.filter(w=>r(w.id)));f&&f.tables&&(f.tables=f.tables.filter(w=>this.tables.some(J=>J.id===w.id)));(f=c&&c.editing&&c.editing.locationTracking)&&
f.info&&!r(f.info.layerId)&&(c.editing=null);(c=this.presentation&&this.presentation.slides)&&c.forEach(w=>{w.visibleLayers&&(w.visibleLayers=w.visibleLayers.filter(J=>r(J.id)))})};z._validateMap=function(){var c=b._asyncToGenerator(function*(){if(!this.basemap?.baseLayers.length)throw new t("webmap:save","Map does not have a valid basemap with a base layer.");let f=null;yield E.whenOnce(()=>{const r=aa.findSpatialReference(this.initialViewProperties,this.basemap);f=r.spatialReference;return!r.updating});
if(!I.equals(f,this.initialViewProperties.spatialReference))throw new t("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:f});});return function(){return c.apply(this,arguments)}}();z._validateItem=function(){if(!this.portalItem)throw m.getLogger(this.declaredClass).error("save: requires the portalItem property to be set"),new t("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");
this._validateItemType(this.portalItem)};z._validateItemType=function(c){if("Web Map"!==c.type)throw new t("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};z._loadLayerContainers=function(){const c=[];this.basemap&&c.push(this.basemap.load());this.ground&&c.push(this.ground.load());return y.eachAlways(c).then(()=>{})};z._beforeSave=function(){var c=b._asyncToGenerator(function*(){const f=[];for(const r of this.allLayers)if("beforeSave"in r&&"function"===typeof r.beforeSave){const w=
r.beforeSave();w&&f.push(w)}yield y.eachAlways(f)});return function(){return c.apply(this,arguments)}}();z._loadAllLayers=function(){const c=this._getAllLayersAndTables().map(f=>f.load());return y.eachAlways(c).then(()=>{})};z._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};z._validateJSONForWriting=function(c,f){let r=(c.messages?c.messages:[]).filter(w=>"error"===w.type).map(w=>new t(w.name,w.message,w.details));c.blockedRelativeUrls&&(r=r.concat(c.blockedRelativeUrls.map(w=>
new t("url:unsupported",`Relative url '${w}' is not supported in Web Map`))));f.ignoreUnsupported&&(r=r.filter(w=>"layer:unsupported"!==w.name&&"symbol:unsupported"!==w.name&&"symbol-layer:unsupported"!==w.name&&"property:unsupported"!==w.name&&"url:unsupported"!==w.name));if(0<r.length)throw new t("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r});};z._updateItemProperties=function(){var c=b._asyncToGenerator(function*(f){f.extent=
yield this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);yield this._updateTypeKeywords(f)});return function(f){return c.apply(this,arguments)}}();z._updateItemPropertiesForSaveAs=function(){var c=b._asyncToGenerator(function*(f){P.removeTypeKeyword(f,"CollectorDisabled");P.removeTypeKeyword(f,"FieldMapsDisabled");P.removeTypeKeyword(f,P.TypeKeyword.METADATA);P.removeTypeKeyword(f,"OfflineDisabled");P.removeTypeKeyword(f,"Offline Map Areas");P.removeTypeKeyword(f,"Workforce Dispatcher");
P.removeTypeKeyword(f,"Workforce Project");P.removeTypeKeyword(f,"Workforce Worker");yield this._updateItemProperties(f)});return function(f){return c.apply(this,arguments)}}();z._getWGS84Extent=function(){var c=b._asyncToGenerator(function*(f){f=f.clone().normalize();let r;if(1<f.length)for(const w of f)r?w.width>r.width&&(r=w):r=w;else r=f[0];return this._projectToWGS84(r)});return function(f){return c.apply(this,arguments)}}();z._projectToWGS84=function(){var c=b._asyncToGenerator(function*(f){var r=
f.spatialReference;if(r.isWGS84)return f.clone();if(r.isWebMercator)return M.webMercatorToGeographic(f);r=yield(yield new Promise((J,O)=>k(["./portal/support/geometryServiceUtils"],J,O))).getGeometryServiceURL(this.portalItem);const w=new ha;w.geometries=[f];w.outSpatialReference=A.WGS84;return(yield fa.project(r,w))[0]});return function(f){return c.apply(this,arguments)}}();z._updateTypeKeywords=function(){var c=b._asyncToGenerator(function*(f){P.addTypeKeyword(f,ma);yield this._loadAllLayers();
this._evalCollectorKeyword(f);this._evalDataEditingKeyword(f);this._evalOfflineKeyword(f);this._evalDeveloperBasemapKeyword(f);this._evalUtilityNetworkKeyword(f);f.typeKeywords&&(f.typeKeywords=f.typeKeywords.filter((r,w,J)=>J.indexOf(r)===w))});return function(f){return c.apply(this,arguments)}}();z._evalCollectorKeyword=function(c){P.hasTypeKeyword(c,"CollectorDisabled")||P.hasTypeKeyword(c,"Workforce Project")||P.hasTypeKeyword(c,"Workforce Worker")||P.hasTypeKeyword(c,"Workforce Dispatcher")||
!this._hasEditableFeatureLayer()?P.removeTypeKeyword(c,"Collector"):P.addTypeKeyword(c,"Collector")};z._evalDataEditingKeyword=function(c){this._hasEditableFeatureLayer()?P.addTypeKeyword(c,"Data Editing"):P.removeTypeKeyword(c,"Data Editing")};z._evalOfflineKeyword=function(c){!P.hasTypeKeyword(c,"OfflineDisabled")&&this._isOfflineCapableMap()?P.addTypeKeyword(c,"Offline"):P.removeTypeKeyword(c,"Offline")};z._evalDeveloperBasemapKeyword=function(c){aa.hasDeveloperBasemapLayer(this.basemap)?P.addTypeKeyword(c,
na):P.removeTypeKeyword(c,na)};z._evalUtilityNetworkKeyword=function(c){this.utilityNetworks?.length?P.addTypeKeyword(c,"UtilityNetwork"):P.removeTypeKeyword(c,"UtilityNetwork")};z._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(c=>c.loaded&&N.isFeatureServiceLayer(c)&&c.capabilities.operations.supportsEditing&&c.editingEnabled)};z._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(c=>"group"!==c.type).every(c=>c.loaded&&this._isOfflineCapableLayer(c))};
z._isFeatureCollectionLike=function(c){return N.isFeatureCollectionLayer(c)||"map-notes"===c.type||"route"===c.type};z._isOfflineCapableLayer=function(c){return N.isFeatureServiceLayer(c)&&c.capabilities.operations.supportsSync||this._isFeatureCollectionLike(c)&&!c.portalItem||("tile"===c.type||"vector-tile"===c.type)&&(c.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(c)||aa.isDeveloperBasemapLayer(c))&&c.spatialReference.equals(this.initialViewProperties.spatialReference)};
z._isExportableAGOLTileLayer=function(c){return"tile"===c.type?L.isServerOrServicesAGOLUrl(c.url)&&sa.some(f=>c.url?.toLowerCase().includes("/"+f+"/")):!1};z._updateItem=function(){var c=b._asyncToGenerator(function*(f,r,w){yield f.update({data:r});this._syncUpInstanceWithItem(f,r,w)});return function(f,r,w){return c.apply(this,arguments)}}();z._createItem=function(){var c=b._asyncToGenerator(function*(f,r,w,J){var O=this.portalItem;O={item:O,authenticated:!(!O?.id||!O.portal.user)};const Q=f.portal;
yield Q.signIn();const {copyAllowed:W,itemReloaded:Z}=yield this._isCopyAllowed(O,Q);O.authenticated||(O.authenticated=Z);if(!W)throw new t("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");J=yield this._initializeNewItem(f,O,r,J);this.portalItem=f;this._syncUpInstanceWithItem(f,r,w);return J});return function(f,r,w,J){return c.apply(this,arguments)}}();z._isCopyAllowed=function(){var c=b._asyncToGenerator(function*(f,r){const {item:w,authenticated:J}=f;if(w?.id&&
w.typeKeywords?.includes("useOnly")){if(w.portal.portalHostname!==r.portalHostname)return{copyAllowed:!1,itemReloaded:!1};J||(yield w.reload());return{copyAllowed:"admin"===w.itemControl||"update"===w.itemControl,itemReloaded:!0}}return{copyAllowed:!0,itemReloaded:!1}});return function(f,r){return c.apply(this,arguments)}}();z._initializeNewItem=function(){var c=b._asyncToGenerator(function*(f,r,w,J){var O=f.portal;const {item:Q,authenticated:W}=r,{folder:Z,copyAllResources:ta}=J;r=!1;ta&&Q?.id&&
C.hasSameCanonicalArcGISOnlinePortal(Q.portal.url,O.url)&&(W||(yield Q.reload()),Q.isOrgItem&&({total:r}=yield Q.fetchResources(),r=!!r));r?(O=yield Q.copy({copyResources:"all",folder:Z}),f.id=O.id,f.portal=O.portal,O=f.toJSON(),yield f.load(),f.read(O),yield f.update({data:w})):yield O.user?.addItem({item:f,folder:Z,data:w});return r});return function(f,r,w,J){return c.apply(this,arguments)}}();z._syncUpInstanceWithItem=function(c,f,r){p.MultiOriginJSONSupport.prototype.read.call(this,{version:f.version,
authoringApp:f.authoringApp,authoringAppVersion:f.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:c.itemUrl&&C.urlToObject(c.itemUrl)});G.updateOrigins(r);this.resourceInfo=f};z._updateItemThumbnail=function(){var c=b._asyncToGenerator(function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())});return function(){return c.apply(this,arguments)}}();
z._getPortalItem=function(c){c=ea.from(c);c.id&&(c=c.clone(),c.id=null);c.type||(c.type="Web Map");c.portal||(c.portal=R.getDefault());this._validateItemType(c);return c};z._updateFromInternal=function(){var c=b._asyncToGenerator(function*(f,r){r=r||{};yield E.whenOnce(()=>f.ready);this._updateInitialViewProperties(f,r);if(f.map===this)for(const w of f.allLayerViews)for(const J of["visible","featureEffect"])J in w&&J in w.layer&&w._isOverridden(J)&&(w.layer[J]=w[J]);yield this._updateThumbnailUrl(f,
r)});return function(f,r){return c.apply(this,arguments)}}();z._updateInitialViewProperties=function(c,f){f.backgroundExcluded||(this.initialViewProperties.background=c.background?.clone());this.initialViewProperties.spatialReference=c.spatialReference?.clone();f.viewpointExcluded||(this.initialViewProperties.viewpoint=new n({rotation:c.rotation,scale:f.scalePreserved?c.scale:null,targetGeometry:this._getViewExtent(c)}));if(!f.widgetsExcluded)for(const r of c.persistableViewModels)r.updateWebDocument(this)};
z._getViewExtent=function(c){const f=c.center.clone().normalize();c=c.extent.clone();const r=c.width/2;c.xmin=f.x-r;c.xmax=f.x+r;return c};z._updateThumbnailUrl=function(){var c=b._asyncToGenerator(function*(f,r){r.thumbnailExcluded||(r=oa.getOptimalThumbnailSize(f,r.thumbnailSize),f=yield f.takeScreenshot({format:"png",width:r.width,height:r.height}),this._setAutoGeneratedThumbnail(f.dataUrl))});return function(f,r){return c.apply(this,arguments)}}();z._setAutoGeneratedThumbnail=function(c){this.thumbnailUrl=
c;this._thumbnailFilename=null};z._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};z._generateCustomThumbnailFilename=function(c){if(C.isDataProtocol(c)){c=(c=(c=C.dataComponents(c))&&c.mediaType)&&ca.get(c.toLowerCase())||null;const f=`thumbnail${Date.now()}`;return c?`${f}.${c}`:f}return null};z._getThumbnailState=function(){let c=this.thumbnailUrl;c&&(c=this._isOverridden("thumbnailUrl")?c:C.addQueryParameter(c,
"w","8192"));return{thumbnailUrl:c,filename:this._thumbnailFilename}};z._restoreThumbnailFromState=function(c){this.thumbnailUrl=c.thumbnailUrl;this._thumbnailFilename=c.filename};z._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};z._restoreAuthoringPropsFromState=function(c){c.isAuthoringAppSetByUser?this.authoringApp=
c.authoringApp:this._isAuthoringAppSetByUser=!1;c.isAuthoringAppVersionSetByUser?this.authoringAppVersion=c.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};da.fromJSON=function(c){if(!c)throw new t("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:c})};b._createClass(da,[{key:"authoringApp",set:function(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}},{key:"authoringAppVersion",set:function(c){this._isAuthoringAppVersionSetByUser=
!0;this._set("authoringAppVersion",c)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(c){c?(this._override("thumbnailUrl",c),this._thumbnailFilename=this._generateCustomThumbnailFilename(c)):this._clearThumbnailOverride()}}]);return da}(p.MultiOriginJSONMixin(l.LoadableMixin(u.EsriPromiseMixin(g))));g.VERSION=ja;a.__decorate([q.property({type:qa,json:{write:!0}})],g.prototype,"applicationProperties",void 0);a.__decorate([q.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([B.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([q.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",null);a.__decorate([B.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",null);a.__decorate([q.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0);a.__decorate([q.property({type:la,
json:{write:{overridePolicy(V){return{enabled:!!(V&&0<V.length),ignoreOrigin:!0}}}}})],g.prototype,"bookmarks",void 0);a.__decorate([q.property({type:U,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([q.property({type:T,json:{write:!0}})],g.prototype,"geotriggersInfo",void 0);a.__decorate([q.property({type:ia,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,
target:{background:{type:ka},"initialState.viewpoint":{type:n},mapRangeInfo:{type:X},spatialReference:{type:A}}}}})],g.prototype,"initialViewProperties",void 0);a.__decorate([K.reader("initialViewProperties")],g.prototype,"readInitialViewProperties",null);a.__decorate([B.writer("initialViewProperties")],g.prototype,"writeInitialViewProperties",null);a.__decorate([q.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],g.prototype,"layers",void 0);a.__decorate([B.writer("layers")],
g.prototype,"writeLayers",null);a.__decorate([q.property({type:ea})],g.prototype,"portalItem",void 0);a.__decorate([q.property({json:{write:!0}})],g.prototype,"presentation",void 0);a.__decorate([q.property()],g.prototype,"resourceInfo",void 0);a.__decorate([q.property({readOnly:!0,type:ba.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],g.prototype,"sourceVersion",void 0);a.__decorate([K.reader("sourceVersion")],g.prototype,"readSourceVersion",
null);a.__decorate([B.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([q.property({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([B.writer("tables")],g.prototype,"writeTables",null);a.__decorate([q.property()],g.prototype,"thumbnailUrl",null);a.__decorate([q.property({type:Y,json:{write:!0}})],g.prototype,"widgets",void 0);a.__decorate([q.property({type:v,json:{read:!0,write:!0}})],g.prototype,"utilityNetworks",void 0);return g=a.__decorate([x.subclass("esri.WebMap")],
g)});