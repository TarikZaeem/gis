// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define(["exports","./dom","./index"],function(h,w,x){function y(a,b){let d=!1;a.addEventListener("calciteInternalFormComponentRegister",c=>{d=c.composedPath().some(f=>n.has(f));c.stopPropagation()},{once:!0});b.dispatchEvent(new CustomEvent("calciteInternalFormComponentRegister",{bubbles:!0,composed:!0}));return d}function z(){"checked"in this?this.checked=this.defaultChecked:this.value=this.defaultValue}function A(a){const {el:b,formEl:d,name:c,value:f}=a,{ownerDocument:l}=b,m=b.querySelectorAll('input[slot\x3d"hidden-form-input"]');
if(d&&c){var t=Array.isArray(f)?f:[f],p=[],u=new Set;m.forEach(e=>{const g=t.find(B=>B==e.value);null!=g?(u.add(g),v(a,e,g)):p.push(e)});var k;t.forEach(e=>{if(!u.has(e)){var g=p.pop();g||(g=l.createElement("input"),g.slot="hidden-form-input");k||(k=l.createDocumentFragment());k.append(g);g.addEventListener("change",q);v(a,g,e)}});k&&b.append(k);p.forEach(e=>{e.removeEventListener("change",q);e.remove()})}else m.forEach(e=>{e.removeEventListener("change",q);e.remove()})}function v(a,b,d){const {defaultValue:c,
disabled:f,name:l,required:m}=a;b.defaultValue=c;b.disabled=f;b.name=l;b.required=m;b.tabIndex=-1;"checked"in a?(b.checked=a.checked,b.defaultChecked=a.defaultChecked,b.value=a.checked?d||"on":""):b.value=d||"";a.syncHiddenFormInput?.(b)}const r=new WeakMap,n=new WeakSet,q=a=>{a.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))};h.HiddenFormInputSlot=({component:a})=>{A(a);return x.h("slot",{name:"hidden-form-input"})};h.afterConnectDefaultValueSet=function(a,
b){a.defaultValue=b};h.connectForm=function(a){const {el:b,value:d}=a,c=w.closestElementCrossShadowBoundary(b,"form");if(c&&!y(c,b)){a.formEl=c;a.defaultValue=d;"checked"in a&&(a.defaultChecked=a.checked);var f=(a.onFormReset||z).bind(a);c.addEventListener("reset",f);r.set(a.el,f);n.add(b)}};h.disconnectForm=function(a){const {el:b,formEl:d}=a;if(d){var c=r.get(b);d.removeEventListener("reset",c);r.delete(b);a.formEl=null;n.delete(b)}};h.resetForm=function(a){a.formEl?.reset()};h.submitForm=function(a){({formEl:a}=
a);if(!a)return!1;"requestSubmit"in a?a.requestSubmit():a.submit();return!0}});