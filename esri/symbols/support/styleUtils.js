// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags".split(" "),function(c,q,r,m,k,t,n,u,v,w){function x(a,b){return l.apply(this,arguments)}function l(){l=q._asyncToGenerator(function*(a,b){try{return{data:(yield p(a,b)).data,baseUrl:n.removeFile(a),styleUrl:a}}catch(d){return t.throwIfAbortError(d),null}});return l.apply(this,
arguments)}function y(a,b,d){b=k.isSome(b.portal)?b.portal:u.getDefault();let e;const f=`${b.url} - ${b.user&&b.user.username} - ${a}`;c.cachedStyles[f]||(c.cachedStyles[f]=z(a,b,d).then(g=>{e=g;return g.fetchData()}).then(g=>({data:g,baseUrl:e.itemUrl??"",styleName:a})));return c.cachedStyles[f]}function z(a,b,d){return b.load(d).then(()=>{const e=new v({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${a}"`});return b.queryItems(e,d)}).then(({results:e})=>{let f=
null;const g=a.toLowerCase();if(e&&Array.isArray(e))for(const h of e)if(h.typeKeywords?.some(A=>A.toLowerCase()===g)&&"Style"===h.type&&"esri_en"===h.owner){f=h;break}if(!f)throw new m("symbolstyleutils:style-not-found",`The style '${a}' could not be found`,{styleName:a});return f.load(d)})}function p(a,b){b={responseType:"json",query:{f:"json"},...b};return r(n.normalize(a),b)}c.cachedStyles={};c.Style2DUrlTemplate="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson";
c.cleanupStyleUtilsCache=function(){c.cachedStyles&&(c.cachedStyles={})};c.fetchStyle=function(a,b,d){return a&&k.isSome(a.styleUrl)?x(a.styleUrl,d):a&&k.isSome(a.styleName)?y(a.styleName,b,d):Promise.reject(new m("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))};c.makeCIMSymbolRef=function(a){return null===a||"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a}};c.requestJSON=p;c.symbolUrlFromStyleItem=function(a,b){if("cimRef"===
b)return a.cimRef;if(a.formatInfos&&!w.enableWebStyleForceWOSR())for(const d of a.formatInfos)if("gltf"===d.type)return d.href;return a.webRef};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});