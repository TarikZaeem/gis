// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(a,d){a.updateOrigins=function(b){b&&b.writtenProperties&&b.writtenProperties.forEach(({target:m,propName:r,newOrigin:w})=>{d.isMultiOriginJSONMixin(m)&&w&&m.originOf(r)!==w&&m.updateOrigin(r,w)})};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(a){a.isMultiOriginJSONMixin=function(d){return d&&
"getAtOrigin"in d&&"originOf"in d};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(a,d,b,m,r,w,v,l,
u,f){b=function(n){function k(C){C=n.call(this,C)||this;C.levelLayer=null;C.facilityLayer=null;C.siteLayer=null;return C}a._inheritsLoose(k,n);return k}(b.JSONSupport);d.__decorate([m.property({type:u,json:{write:!0}})],b.prototype,"levelLayer",void 0);d.__decorate([m.property({type:l,json:{write:!0}})],b.prototype,"facilityLayer",void 0);d.__decorate([m.property({type:f,json:{write:!0}})],b.prototype,"siteLayer",void 0);return b=d.__decorate([v.subclass("esri.support.MapFloorInfo")],b)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v){b=function(l){function u(f){f=l.call(this,f)||this;f.facilityIdField=null;f.layerId=null;f.nameField=null;f.siteIdField=null;f.sublayerId=null;return f}a._inheritsLoose(u,l);return u}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"facilityIdField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"nameField",void 0);d.__decorate([m.property({type:String,
json:{write:!0}})],b.prototype,"siteIdField",void 0);d.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"sublayerId",void 0);return b=d.__decorate([v.subclass("esri.layers.support.FacilityLayerInfo")],b)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v){b=function(l){function u(f){f=l.call(this,f)||this;f.facilityIdField=null;f.layerId=null;f.levelIdField=null;f.levelNumberField=null;f.longNameField=null;f.shortNameField=null;f.sublayerId=null;f.verticalOrderField=null;return f}a._inheritsLoose(u,l);return u}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"facilityIdField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);d.__decorate([m.property({type:String,
json:{write:!0}})],b.prototype,"levelIdField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"levelNumberField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"longNameField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"shortNameField",void 0);d.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"sublayerId",
void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"verticalOrderField",void 0);return b=d.__decorate([v.subclass("esri.layers.support.LevelLayerInfo")],b)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(a,
d,b,m,r,w,v){b=function(l){function u(f){f=l.call(this,f)||this;f.layerId=null;f.nameField=null;f.siteIdField=null;f.sublayerId=null;return f}a._inheritsLoose(u,l);return u}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"nameField",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"siteIdField",void 0);d.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},
write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"sublayerId",void 0);return b=d.__decorate([v.subclass("esri.layers.support.SiteLayerInfo")],b)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(a,d){a.createCopyError=function(){return new d("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};a.createSchemaValidationError=function(b){return new d("webscene:schema-validation",
"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:b})};a.schemaValidationErrorName="webscene:schema-validation";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(a,d,b){a.isSpatialReferenceSupported=function(m,r){return null==m?!1:null==r?!0:r===b.ViewingMode.Local?m.isGeographic?
m.isWGS84||m.wkid===d.SupportedGCSWkids.CGCS2000:!0:m.isWebMercator||m.isWGS84||m.wkid===d.SupportedGCSWkids.CGCS2000||m.wkid===d.SupportedGCSWkids.GCSMARS2000||m.wkid===d.SupportedGCSWkids.GCSMARS2000_SPHERE||m.wkid===d.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),
function(a,d,b,m,r,w,v,l){function u(){u=d._asyncToGenerator(function*(O,q,B){if(q&&q.resources){var L=q.portalItem===O.portalItem?new Set(O.paths):new Set;O.paths.length=0;O.portalItem=q.portalItem;var E=new Set(q.resources.toKeep.map(W=>W.resource.path)),K=new Set,S=[];E.forEach(W=>{L.delete(W);O.paths.push(W)});for(const W of q.resources.toUpdate)if(L.delete(W.resource.path),E.has(W.resource.path)||K.has(W.resource.path)){const {resource:ca,content:la,finish:ea,error:ba}=W,ka=l.getSiblingOfSameTypeI(ca,
v.generateUUID());O.paths.push(ka.path);S.push(f({resource:ka,content:la,compress:W.compress,finish:ea,error:ba},B))}else O.paths.push(W.resource.path),S.push(k(W,B)),K.add(W.resource.path);for(const W of q.resources.toAdd)S.push(f(W,B)),O.paths.push(W.resource.path);L.forEach(W=>{q.portalItem&&(W=q.portalItem.resourceFromPath(W),S.push(W.portalItem.removeResource(W).catch(()=>{})))});if(0!==S.length&&(E=yield w.eachAlways(S),w.throwIfAborted(B),B=E.filter(W=>"error"in W).map(W=>W.error),0<B.length))throw new m("save:resources",
"Failed to save one or more resources",{errors:B});}});return u.apply(this,arguments)}function f(O,q){return n.apply(this,arguments)}function n(){n=d._asyncToGenerator(function*(O,q){q={...(r.isSome(q)?q:{}),compress:O.compress};q=yield b.result(O.resource.portalItem.addResource(O.resource,O.content,q));if(!0===q.ok)O.finish?.(O.resource);else throw O.error?.(q.error),q.error;});return n.apply(this,arguments)}function k(O,q){return C.apply(this,arguments)}function C(){C=d._asyncToGenerator(function*(O,
q){q=yield b.result(O.resource.update(O.content,q));if(!0===q.ok)O.finish?.(O.resource);else throw O.error?.(q.error),q.error;});return C.apply(this,arguments)}a.saveResources=function(O,q,B){return u.apply(this,arguments)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(a,d,b,m,r,w){function v(){v=
d._asyncToGenerator(function*(q,B={},L){yield q.load(L);var E=w.join(q.itemUrl,"resources");const {start:K=1,num:S=10,sortOrder:W="asc",sortField:ca="created"}=B;B={query:{start:K,num:S,sortOrder:W,sortField:ca,token:q.apiKey},signal:r.get(L,"signal")};E=yield q.portal.request(E,B);return{total:E.total,nextStart:E.nextStart,resources:E.resources.map(({created:la,size:ea,resource:ba})=>({created:new Date(la),size:ea,resource:q.resourceFromPath(ba)}))}});return v.apply(this,arguments)}function l(){l=
d._asyncToGenerator(function*(q,B,L,E){if(!q.hasPath())throw new m(`portal-item-resource-${B}:invalid-path`,"Resource does not have a valid path");const K=q.portalItem;yield K.load(E);B=w.join(K.userItemUrl,"add"===B?"addResources":"updateResources");const [S,W]=n(q.path);L=yield C(L);const ca=new FormData;S&&"."!==S&&ca.append("resourcesPrefix",S);r.isSome(E)&&E.compress&&ca.append("compress","true");ca.append("fileName",W);ca.append("file",L,W);ca.append("f","json");r.isSome(E)&&E.access&&ca.append("access",
E.access);yield K.portal.request(B,{method:"post",body:ca,signal:r.get(E,"signal")});return q});return l.apply(this,arguments)}function u(){u=d._asyncToGenerator(function*(q,B,L){if(!B.hasPath())throw new m("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield q.load(L);const E=w.join(q.userItemUrl,"removeResources");yield q.portal.request(E,{method:"post",query:{resource:B.path},signal:r.get(L,"signal")});B.portalItem=null});return u.apply(this,arguments)}function f(){f=
d._asyncToGenerator(function*(q,B){yield q.load(B);const L=w.join(q.userItemUrl,"removeResources");return q.portal.request(L,{method:"post",query:{deleteAll:!0},signal:r.get(B,"signal")})});return f.apply(this,arguments)}function n(q){const B=q.lastIndexOf("/");return-1===B?[".",q]:[q.slice(0,B),q.slice(B+1)]}function k(q){{const S=w.getPathExtension(q);q=r.isNone(S)?[q,""]:[q.slice(0,q.length-S.length-1),`.${S}`]}const [B,L]=q,[E,K]=n(B);return[E,K,L]}function C(q){return O.apply(this,arguments)}
function O(){O=d._asyncToGenerator(function*(q){return q instanceof Blob?q:(yield b(q.url,{responseType:"blob"})).data});return O.apply(this,arguments)}a.addOrUpdateResource=function(q,B,L,E){return l.apply(this,arguments)};a.contentToBlob=C;a.fetchResources=function(q){return v.apply(this,arguments)};a.getSiblingOfSameType=function(q,B){if(!q.hasPath())return null;const [L,,E]=k(q.path);return q.portalItem.resourceFromPath(w.join(L,B+E))};a.getSiblingOfSameTypeI=function(q,B){if(!q.hasPath())return null;
const [L,,E]=k(q.path);return q.portalItem.resourceFromPath(w.join(L,B+E))};a.removeAllResources=function(q,B){return f.apply(this,arguments)};a.removeResource=function(q,B,L){return u.apply(this,arguments)};a.splitPrefixFileNameAndExtension=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(a){const d={width:600,height:400};a.getOptimalThumbnailSize=function(b,m){m=m||d;let {width:r,height:w}=m;m=r/w;1.5>m?
w=r/1.5:1.5<m&&(r=1.5*w);r>b.width&&(w*=b.width/r,r=b.width);w>b.height&&(r*=b.height/w,w=b.height);return{width:Math.round(r),height:Math.round(w)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.viewing=null;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({viewing:this.viewing?this.viewing.clone():null})};return n}(b.JSONSupport);d.__decorate([m.property({type:l,json:{write:!0}})],b.prototype,"viewing",void 0);return b=u=d.__decorate([v.subclass("esri.webscene.ApplicationProperties")],b)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.search=null;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u(m.clone({search:this.search}))};return n}(b.JSONSupport);d.__decorate([r.property({type:l,json:{write:!0}})],b.prototype,"search",void 0);return b=u=d.__decorate([v.subclass("esri.webdoc.applicationProperties.Viewing")],b)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C){var O;const q=b.ofType(k),B=b.ofType(C);b=O=function(L){function E(S){S=L.call(this,S)||this;S.addressSearchEnabled=!0;S.enabled=!0;S.hintText=null;S.layers=new q;S.tables=new B;return S}a._inheritsLoose(E,L);var K=E.prototype;K.readAddressSearchEnabled=function(S){return!S};K.writeAddressSearchEnabled=function(S,W,ca){W[ca]=!S};K.clone=function(){return new O(r.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return E}(m.JSONSupport);d.__decorate([w.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"addressSearchEnabled",void 0);d.__decorate([l.reader("addressSearchEnabled")],b.prototype,"readAddressSearchEnabled",null);d.__decorate([f.writer("addressSearchEnabled")],b.prototype,"writeAddressSearchEnabled",null);d.__decorate([w.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],b.prototype,"enabled",void 0);d.__decorate([w.property({type:String,json:{write:!0}})],b.prototype,"hintText",void 0);d.__decorate([w.property({type:q,json:{write:{overridePolicy:n.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],b.prototype,"layers",void 0);d.__decorate([w.property({type:B,json:{read:!0,write:{overridePolicy:n.writeNonEmptyCollectionPolicy}}})],
b.prototype,"tables",void 0);return b=O=d.__decorate([u.subclass("esri.webdoc.applicationProperties.Search")],b)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(a){a.writeNonEmptyCollectionPolicy=function(d){return{enabled:!!d?.length}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.field=null;k.id=null;k.subLayer=null;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u(m.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return n}(b.JSONSupport);d.__decorate([r.property({type:l,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);d.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);d.__decorate([r.property({type:w.Integer,
json:{write:!0}})],b.prototype,"subLayer",void 0);return b=u=d.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchLayer")],b)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,d,b,m,r,w,v,l,u){var f;b=f=function(n){function k(C){C=n.call(this,C)||this;C.exactMatch=!1;C.name=null;C.type=null;return C}a._inheritsLoose(k,n);k.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return k}(b.JSONSupport);d.__decorate([m.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([v.enumeration(u.kebabDict)],
b.prototype,"type",void 0);return b=f=d.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchLayerField")],b)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=
f.call(this,k)||this;k.field=null;k.id=null;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u(m.clone({field:this.field,id:this.id}))};return n}(b.JSONSupport);d.__decorate([r.property({type:l,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);d.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);return b=u=d.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchTable")],b)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,d,b,m,r,w,v,l,u){var f;b=f=function(n){function k(C){C=n.call(this,C)||this;C.exactMatch=!1;C.name=null;C.type=null;return C}a._inheritsLoose(k,n);k.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return k}(b.JSONSupport);d.__decorate([m.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([v.enumeration(u.kebabDict)],
b.prototype,"type",void 0);return b=f=d.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchTableField")],b)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C,O){var q;const B=r.getLogger("esri.webscene.Environment");r=(L,E,K)=>({enabled:!K||!K.isPresentation});b=q=function(L){function E(S){S=L.call(this,S)||this;S.lighting=new k;S.background=null;S.atmosphereEnabled=!0;S.starsEnabled=!0;return S}a._inheritsLoose(E,L);var K=E.prototype;K.clone=function(){return new q(this.cloneConstructProperties())};K.cloneConstructProperties=function(){return{lighting:this.lighting&&"virtual"===this.lighting.type?C.prototype.clone.call(this.lighting):
k.prototype.clone.call(this.lighting),background:m.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}};a._createClass(E,[{key:"weather",set:function(S){f.validateWeatherType(S?.type,B)&&this._set("weather",S)}}]);return E}(b.JSONSupport);d.__decorate([w.property({types:n.lightingTypes,nonNullable:!0,json:{write:!0}})],b.prototype,"lighting",void 0);d.__decorate([w.property(O.backgroundProperty)],b.prototype,"background",void 0);
d.__decorate([w.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:r}}})],b.prototype,"atmosphereEnabled",void 0);d.__decorate([w.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:r}}})],b.prototype,"starsEnabled",void 0);d.__decorate([w.property({types:f.weatherTypes,nonNullable:!0,json:{write:!0},value:new u})],b.prototype,"weather",null);return b=q=d.__decorate([l.subclass("esri.webscene.Environment")],b)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.type="sunny";k.cloudCover=.5;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({cloudCover:this.cloudCover})};return n}(b.JSONSupport);d.__decorate([v.enumeration({sunny:"sunny"})],b.prototype,"type",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);return b=u=d.__decorate([l.subclass("esri.views.3d.environment.SunnyWeather")],
b)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),function(a,d,b,m,r,w){d={key:"type",base:w,typeMap:{sunny:w,cloudy:d,rainy:m,snowy:r,foggy:b}};const v=Object.keys(d.typeMap);a.validateWeatherType=function(l,u){return v.includes(l)?!0:(u.error(`"${l}" is not a valid weather type`),!1)};a.weatherHeightLimit=1E4;a.weatherTypes=d;a.weatherTypesArray=v;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.type="cloudy";
k.cloudCover=.5;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({cloudCover:this.cloudCover})};return n}(b.JSONSupport);d.__decorate([v.enumeration({cloudy:"cloudy"})],b.prototype,"type",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);return b=u=d.__decorate([l.subclass("esri.views.3d.environment.CloudyWeather")],b)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.type="foggy";k.fogStrength=.5;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({fogStrength:this.fogStrength})};return n}(b.JSONSupport);d.__decorate([v.enumeration({foggy:"foggy"})],b.prototype,"type",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"fogStrength",void 0);return b=u=d.__decorate([l.subclass("esri.views.3d.environment.FoggyWeather")],
b)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v,l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.type="rainy";k.cloudCover=
.5;k.precipitation=.5;return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({cloudCover:this.cloudCover,precipitation:this.precipitation})};return n}(b.JSONSupport);d.__decorate([v.enumeration({rainy:"rainy"})],b.prototype,"type",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"precipitation",
void 0);return b=u=d.__decorate([l.subclass("esri.views.3d.environment.RainyWeather")],b)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v,
l){var u;b=u=function(f){function n(k){k=f.call(this,k)||this;k.type="snowy";k.cloudCover=.5;k.precipitation=.5;k.snowCover="disabled";return k}a._inheritsLoose(n,f);n.prototype.clone=function(){return new u({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})};return n}(b.JSONSupport);d.__decorate([v.enumeration({snowy:"snowy"})],b.prototype,"type",void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",
void 0);d.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"precipitation",void 0);d.__decorate([m.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],b.prototype,"snowCover",void 0);return b=u=d.__decorate([l.subclass("esri.views.3d.environment.SnowyWeather")],b)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(a,d,b){a.lightingTypes={key:"type",defaultKeyValue:"sun",
base:null,typeMap:{sun:d,virtual:b}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/SunLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(a,d,b,m,r,w,v,l,u){var f;b=f=function(n){function k(O){O=
n.call(this,O)||this;O.type="sun";O.date=null;O.directShadowsEnabled=!1;O.displayUTCOffset=null;return O}a._inheritsLoose(k,n);var C=k.prototype;C.readDate=function(O,q){return null!=q.datetime&&new Date(q.datetime)||null};C.writeDate=function(O,q,B){q[B]=O.getTime()};C.readDirectShadowsEnabled=function(O,q){return!!q.directShadows};C.writedirectShadowsEnabled=function(O,q,B){O&&(q[B]=O)};C.writeDisplayUTCOffset=function(O,q){null!=O&&(q.displayUTCOffset=O)};C.clone=function(){return new f(this.cloneConstructProperties())};
C.cloneConstructProperties=function(){const O={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(O.date=new Date(this.date.getTime()));return O};return k}(b.JSONSupport);d.__decorate([m.property({readOnly:!0,type:["sun"],json:{write:!0}})],b.prototype,"type",void 0);d.__decorate([m.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],b.prototype,"date",void 0);d.__decorate([v.reader("date",["datetime"])],
b.prototype,"readDate",null);d.__decorate([u.writer("date")],b.prototype,"writeDate",null);d.__decorate([m.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],b.prototype,"directShadowsEnabled",void 0);d.__decorate([v.reader("directShadowsEnabled",["directShadows"])],b.prototype,"readDirectShadowsEnabled",null);d.__decorate([u.writer("directShadowsEnabled")],b.prototype,"writedirectShadowsEnabled",null);d.__decorate([m.property({type:Number,json:{write:!0}})],b.prototype,"displayUTCOffset",
void 0);d.__decorate([u.writer("displayUTCOffset")],b.prototype,"writeDisplayUTCOffset",null);return b=f=d.__decorate([l.subclass("esri.webscene.SunLighting")],b)})},"esri/webscene/VirtualLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v){var l;b=l=function(u){function f(k){k=
u.call(this,k)||this;k.type="virtual";k.directShadowsEnabled=!1;return k}a._inheritsLoose(f,u);var n=f.prototype;n.clone=function(){return new l(this.cloneConstructProperties())};n.cloneConstructProperties=function(){return{directShadowsEnabled:this.directShadowsEnabled}};return f}(b.JSONSupport);d.__decorate([m.property({readOnly:!0,type:["virtual"],json:{write:!0}})],b.prototype,"type",void 0);d.__decorate([m.property({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],b.prototype,
"directShadowsEnabled",void 0);return b=l=d.__decorate([v.subclass("esri.webscene.VirtualLighting")],b)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(a,d,b){d={base:d,key:"type",typeMap:{color:b}};d={types:d,json:{read:function(m){return(r,w,v)=>{if(!r)return r;for(const l in m.typeMap)if(r.type===l)return w=new m.typeMap[l],w.read(r,v),w}}(d),write:{overridePolicy:(m,r,w)=>({enabled:!w||!w.isPresentation})}}};a.backgroundProperty=d;
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v){b=function(l){function u(f){return l.call(this,f)||this}a._inheritsLoose(u,l);u.prototype.clone=function(){};
return u}(b.JSONSupport);d.__decorate([m.property({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);return b=d.__decorate([v.subclass("esri.webscene.background.Background")],b)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(a,d,b,m,r,w,v,l,u,f){var n;r={...u.colorAndTransparencyProperty,nonNullable:!0};f=n=function(k){function C(q){q=k.call(this,q)||this;q.type="color";q.color=new b([0,0,0,1]);return q}a._inheritsLoose(C,k);var O=C.prototype;O.clone=function(){return new n(this.cloneProperties())};O.cloneProperties=function(){return{color:this.color.clone()}};return C}(f);d.__decorate([v.enumeration({color:"color"},{readOnly:!0})],f.prototype,"type",void 0);d.__decorate([m.property(r)],f.prototype,"color",void 0);
return f=n=d.__decorate([l.subclass("esri.webscene.background.ColorBackground")],f)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(a,d,b,m,r,w,v,l,u,f){var n;m=n=function(k){function C(O){O=k.call(this,
O)||this;O.environment=new f;O.spatialReference=null;O.viewpoint=null;return O}a._inheritsLoose(C,k);C.prototype.clone=function(){return new n({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};a._createClass(C,[{key:"viewingMode",set:function(O){this._set("viewingMode",O)}}]);return C}(m.JSONSupport);d.__decorate([r.property({type:f,json:{write:{isRequired:!0}}})],
m.prototype,"environment",void 0);d.__decorate([r.property({type:u})],m.prototype,"spatialReference",void 0);d.__decorate([r.property({type:["local","global"]})],m.prototype,"viewingMode",null);d.__decorate([r.property({type:b,json:{write:{isRequired:!0}}})],m.prototype,"viewpoint",void 0);return m=n=d.__decorate([l.subclass("esri.webscene.InitialViewProperties")],m)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(a,d,b,m,r,w,v,l,u,f){const n=b.ofType(f);b=function(k){function C(q){q=k.call(this,q)||this;q.slides=new n;return q}a._inheritsLoose(C,k);var O=C.prototype;O.destroy=function(){this.slides.forEach(q=>q.destroy());this.slides.removeAll()};O.clone=function(){return new this.constructor({slides:this.slides.clone()})};a._createClass(C,[{key:"slides",set:function(q){q&&(q=q.filter(B=>!!B.viewpoint));this._set("slides",m.referenceSetter(q,this._get("slides"),n))}}]);return C}(r.JSONSupport);d.__decorate([w.property({type:n,
nonNullable:!0,json:{write:!0}}),v.cast(m.castForReferenceSetter)],b.prototype,"slides",null);return b=d.__decorate([u.subclass("esri.webscene.Presentation")],b)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C,O,q,B,L,E,K,S,W,ca,la,ea,ba,ka,qa,e,t,N,V,T,Y){function c(fa){if("building-scene"===fa.type||"map-image"===fa.type)return fa.allSublayers.toArray()}function h(fa){if(fa=c(fa))return fa.filter(ma=>ma.visible).map(ma=>ma.id)}function J(fa,ma){fa=ma-fa;43200<fa&&(fa-=86400);-43200>fa&&(fa+=86400);return fa}let Z=0;const ha=w.ofType(T.SlideVisibleLayer);l=function(fa){function ma(g){g=fa.call(this,g)||this;g.id=Date.now().toString(16)+"-slide-"+Z++;g.title=new Y;g.description=
new t;g.thumbnail=new ka.SlideThumbnail;g.viewpoint=null;g.basemap=null;g.ground=null;g.environment=new N.SlideEnvironment;g.visibleLayers=new ha;return g}a._inheritsLoose(ma,fa);var H=ma.prototype;H.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail=f.destroyMaybe(this.thumbnail);this.thumbnail=this.title=this.description=null};H.castTitle=function(g){return"string"===typeof g?new Y({text:g}):L.ensureType(Y,g)};H.castDescription=function(g){return"string"===typeof g?
new t({text:g}):L.ensureType(t,g)};H.castThumbnail=function(g){return"string"===typeof g?new ka.SlideThumbnail({url:g}):L.ensureType(ka.SlideThumbnail,g)};H.castBasemap=function(g){return ca.ensureType(g)};H.castVisibleLayers=function(g){return g&&"function"===typeof g.map?g.map(p=>{if("string"===typeof p)return{id:p};if(p instanceof S){const D=h(p);return{id:p.id,sublayerIds:D}}if(p.id)return{id:p.id,sublayerIds:"sublayerIds"in p?p.sublayerIds:void 0};u.getLogger(this.declaredClass).warn('Invalid visible layer, expected { id }, Layer or "id"');
return p}):null};H.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};H._updateVisibleLayersFrom=function(g){const p=[];return n.eachAlways(this._getLayers(g.map).map(D=>
g.whenLayerView(D).then(P=>{if(P.visible){const x=h(D);p.push(new T.SlideVisibleLayer({id:P.layer.id,sublayerIds:x}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(p)})};H.updateFrom=function(g,p){const D={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...(p&&p.screenshot)};return g.when(()=>{this.viewpoint=g.viewpoint.clone();this.environment.lighting="virtual"===g.environment.lighting.type?e.prototype.clone.apply(g.environment.lighting):qa.prototype.clone.apply(g.environment.lighting);
this.environment.weather=g.environment.weather.clone();this.basemap=g.map.basemap&&g.map.basemap.clone()||null;this.ground=g.map.ground?V.fromGround(g.map.ground):null;return this._updateVisibleLayersFrom(g)}).then(()=>g.takeScreenshot(D)).then(P=>{this.thumbnail=new ka.SlideThumbnail({url:P.dataUrl});return this})};H.applyTo=function(){var g=a._asyncToGenerator(function*(p,D){var P=this;f.isSome(this._applyToController)&&this._applyToController.abort();let x=new AbortController;this._applyToController=
x;const A=n.onAbortOrThrow(D,()=>x?.abort()),U=p.resourceController.scheduler.registerTask(ba.TaskPriority.SLIDE);let ia=!1;const ja={animate:!0,...D,signal:this._applyToController.signal};D=function(){var oa=a._asyncToGenerator(function*(){yield Promise.all([U.schedule(()=>ia=P._setViewpointOfInterest(p,ja)),U.schedule(()=>P._applyBasemap(p,ja),ja.signal)]);yield Promise.all([U.schedule(()=>P._applyLayerVisibility(p),ja.signal),U.schedule(()=>P._applyGround(p),ja.signal),U.schedule(()=>P._applyViewpoint(p,
ja),ja.signal)]);yield U.schedule(()=>p.environment.weather=P.environment.weather.clone())});return function(){return oa.apply(this,arguments)}}();D=yield r.result(p.addUpdatingPromise(D()));ia&&(p.contentCamera=null);U.remove();this._applyToController===x&&(this._applyToController=null);x=null;A?.remove();if(!1===D.ok)throw D.error;return this});return function(p,D){return g.apply(this,arguments)}}();H._applyBasemap=function(){var g=a._asyncToGenerator(function*(p,D){if(this.basemap){try{yield this.basemap.load(D)}catch(P){if(n.isAbortError(P))throw P;
}p.map.basemap=ca.clonePreservingTiledLayers(this.basemap,p.map.basemap)}});return function(p,D){return g.apply(this,arguments)}}();H._applyGround=function(g){this.ground&&(g.map.ground=this.ground.cloneAndApplyTo(g.map.ground))};H._getLayers=function(g){const p=new w;this._collectLayers(g,p);this._collectLayers(g.ground,p);return p};H._collectLayers=function(g,p){g.layers.forEach(D=>{W.isOperationalLayer(D)&&(p.add(D),"layers"in D&&this._collectLayers(D,p))})};H._applyLayerVisibility=function(g){this.visibleLayers&&
this._getLayers(g.map).forEach(p=>{var D=this.visibleLayers.find(x=>x.id===p.id);p.visible=null!=D;const P=D&&D.sublayerIds;D=c(p);P&&D&&D.forEach(x=>x.visible=P.includes(x.id))})};H._setViewpointOfInterest=function(g,p){if(g.state.fixedContentCamera||!this.viewpoint||p?.ignoreViewpoint||!p?.useDestinationCamera)return!1;p=ea.toCamera(g,this.viewpoint);g.contentCamera=p;return f.isSome(p)};H._applyViewpoint=function(){var g=a._asyncToGenerator(function*(p,D){this._applyCachedCameraTrackingEnabled(p);
if(this.viewpoint&&!D.ignoreViewpoint){f.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=p.camera.fov);if(D.animate&&this.get("environment.lighting.date"))return this._animateToLighting(p,D);D.animate&&(p.environment.applyLighting(this.environment.lighting.clone()),yield p.goTo(this.viewpoint,D));p.viewpoint=this.viewpoint}p.environment.applyLighting(this.environment.lighting.clone())});return function(p,D){return g.apply(this,arguments)}}();H._animateToLighting=function(){var g=a._asyncToGenerator(function*(p,
D){let P=null;"virtual"!==p.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===p.viewingMode&&(P=this._animateLightingWithCamera(p,p.environment.lighting,this.environment.lighting)),p.environment.cachedCameraTrackingEnabled=p.environment.lighting.cameraTrackingEnabled,p.environment.lighting.cameraTrackingEnabled=!1);p.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===p.environment.lighting.type?
(p.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==p.environment.lighting.type&&(p.environment.cachedCameraTrackingEnabled=p.environment.lighting.cameraTrackingEnabled,p.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(p.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return p.goTo(this.viewpoint,D).then(()=>{this._applyCachedCameraTrackingEnabled(p);p.environment.applyLighting(this.environment.lighting.clone())}).catch(x=>
{f.isNone(p.animation)&&this._applyCachedCameraTrackingEnabled(p);throw x;}).finally(()=>{f.removeMaybe(P)})});return function(p,D){return g.apply(this,arguments)}}();H._applyCachedCameraTrackingEnabled=function(g){f.isSome(g.environment.cachedCameraTrackingEnabled)&&(g.environment.lighting.cameraTrackingEnabled=g.environment.cachedCameraTrackingEnabled,g.environment.cachedCameraTrackingEnabled=null)};H._getTime=function(g){const p=g.getTime();g=3600*g.getUTCHours()+60*g.getUTCMinutes()+g.getUTCSeconds();
return[p,g]};H._setTime=function(g,p,D){g.setTime(p);g.setUTCHours(D/3600);g.setUTCMinutes(D%3600/60);g.setUTCSeconds(D%3600%60);return g};H._animateLightingWithCamera=function(g,p,D){const [P,x]=this._getTime(new Date(p.date.toString())),[A,U]=this._getTime(D.date),ia=J(x,U),ja=g.renderCoordsHelper,oa=K.create();ja.toRenderCoords(g.camera.position,oa);const aa=K.create(),G=K.create();f.isSome(this.viewpoint.camera)&&ja.toRenderCoords(this.viewpoint.camera.position,aa);const y=new Date;return k.when(()=>
g.camera,z=>{ja.toRenderCoords(z.position,G);var F=E.squaredDistance(oa,G);const Q=E.squaredDistance(aa,G);z=0;0!==F+Q&&(z=F/(F+Q));F=P+(A-P)*z;z=la.moduloPositive(x+ia*z,86400);p.date=this._setTime(y,F,z)})};ma.createFrom=function(g,p){return(new this).updateFrom(g,p)};a._createClass(ma,[{key:"visibleLayers",set:function(g){this._set("visibleLayers",v.referenceSetter(g,this._get("visibleLayers"),ha))}}]);return ma}(l.JSONSupport);d.__decorate([C.property({type:String,json:{write:{isRequired:!0}}})],
l.prototype,"id",void 0);d.__decorate([C.property({type:Y,json:{default:()=>new Y({text:""}),write:{isRequired:!0}}})],l.prototype,"title",void 0);d.__decorate([O.cast("title")],l.prototype,"castTitle",null);d.__decorate([C.property({type:t,json:{write:{overridePolicy(fa){return{enabled:!(!fa||!fa.text)}}}}})],l.prototype,"description",void 0);d.__decorate([O.cast("description")],l.prototype,"castDescription",null);d.__decorate([C.property({type:ka.SlideThumbnail,json:{default:()=>new ka.SlideThumbnail({url:""}),
write:{isRequired:!0}}})],l.prototype,"thumbnail",void 0);d.__decorate([O.cast("thumbnail")],l.prototype,"castThumbnail",null);d.__decorate([C.property({type:m,nonNullable:!0,json:{write:{isRequired:!0}}})],l.prototype,"viewpoint",void 0);d.__decorate([C.property({type:b,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],l.prototype,"basemap",void 0);d.__decorate([O.cast("basemap")],l.prototype,"castBasemap",null);d.__decorate([C.property({type:V,json:{write:!0}})],l.prototype,"ground",void 0);
d.__decorate([C.property({type:ha,json:{write:{isRequired:!0}}})],l.prototype,"visibleLayers",null);d.__decorate([O.cast("visibleLayers")],l.prototype,"castVisibleLayers",null);d.__decorate([C.property({type:N.SlideEnvironment,json:{write:!0}})],l.prototype,"environment",void 0);return l=d.__decorate([B.subclass("esri.webscene.Slide")],l)})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,d,b,m){const r=
m.create(),w=m.create(),v=m.create(),l=m.create(),u=m.create();a.angle=function(f,n,k){f=b.normalize(l,f);n=b.normalize(u,n);const C=d.acosClamped(b.dot(f,n));return k&&(f=b.cross(v,f,n),0>b.dot(f,k))?-C:C};a.bilerp=function(f,n,k,C,O,q){f+=(n-f)*O;return f+(k+(C-k)*O-f)*q};a.cosCapped=function(f,n){return f>n?Math.cos(n):Math.cos(f)};a.fovx2fovy=function(f,n,k){return 2*Math.atan(k*Math.tan(.5*f)/n)};a.fovy2fovx=function(f,n,k){return 2*Math.atan(n*Math.tan(.5*f)/k)};a.makeOrthonormal=function(f,
n,k){k=k||f;const C=b.dot(f,n);b.set(k,f[0]-C*n[0],f[1]-C*n[1],f[2]-C*n[2]);b.normalize(k,k)};a.makePiecewiseLinearFunction=function(f){const n=f.length;return k=>{if(k<=f[0][0])return f[0][1];if(k>=f[n-1][0])return f[n-1][1];let C=1;for(;k>f[C][0];)C++;const O=f[C][0];k=(O-k)/(O-f[C-1][0]);return k*f[C-1][1]+(1-k)*f[C][1]}};a.maxScale=function(f){return Math.sqrt(Math.max(f[0]*f[0]+f[4]*f[4]+f[8]*f[8],f[1]*f[1]+f[5]*f[5]+f[9]*f[9],f[2]*f[2]+f[6]*f[6]+f[10]*f[10]))};a.moduloPositive=function(f,n){return(f%
n+n)%n};a.planeFromPoints=function(f,n,k,C){b.subtract(r,n,f);b.subtract(w,k,f);b.cross(C,r,w);b.normalize(C,C);C[3]=-b.dot(f,C)};a.scaleFromMatrix=function(f,n){b.set(f,Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]));return f};a.slerp=function(f,n,k,C=m.create()){const O=b.length(f);var q=b.length(n),B=b.dot(f,n)/(O*q);if(.9999999999999999>B){B=Math.acos(B);const L=((1-k)*O+k*q)/Math.sin(B);q=L/q*Math.sin(k*B);b.scale(l,
f,L/O*Math.sin((1-k)*B));b.scale(u,n,q);return b.add(C,l,u)}return b.lerp(C,f,n,k)};a.slerpTangent=function(f,n,k,C=m.create(),O=m.create()){const q=b.length(f),B=b.length(n);var L=b.dot(f,n)/(q*B);if(.9999999999999999>L){L=Math.acos(L);const E=Math.sin(L),K=Math.sin(k*L),S=Math.sin((1-k)*L),W=(1-k)*q+k*B,ca=W/E,la=ca/B*K;b.scale(l,f,ca/q*S);b.scale(u,n,la);b.add(C,l,u);b.scale(l,f,1/q*(-Math.cos((1-k)*L)*L*W+S*(-q+B)));b.scale(u,n,1/B*(Math.cos(k*L)*L*W+K*(-q+B)));b.add(O,l,u);b.scale(O,O,1/E);return O}b.lerp(C,
f,n,k);b.subtract(O,n,f);b.normalize(O,O);return O};a.tangentFrame=function(f,n,k){Math.abs(f[0])>Math.abs(f[1])?b.set(n,0,1,0):b.set(n,1,0,0);b.cross(k,f,n);b.normalize(n,n);b.cross(n,k,f);b.normalize(k,k)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Cyclical ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/scaleUtils ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C,O,q,B,L,E,K,S,W,ca,la,ea,ba,ka,qa,e,t,N){function V(I){return 360-u.cyclicalDegrees.normalize(I)}function T(I){return u.cyclicalDegrees.normalize(360-I)}function Y(I){n.isSome(I)&&I.resolver&&I.resolver.reject();return null}function c(I,M,X,da=null){if(!M)return Y(da);var na=I.spatialReference||e.WGS84;if(n.isSome(M.camera)){I=la.project(M.camera.position,na);if(n.isNone(I))return Y(da);M=M.camera.clone();M.position=I;I=M;n.isSome(da)&&da.resolver&&da.resolver.resolve(I);
return I}if(n.isNone(M.targetGeometry))return Y(da);var pa=M.get("targetGeometry.spatialReference");if(pa&&!la.canProject(pa,na))return Y(da);na=ba.internalToExternal(I,I.state.camera);pa=ba.OrientationMode.ADJUST;null!=M.rotation&&(na.heading=V(M.rotation),pa=ba.OrientationMode.LOCKED);null!=X&&(na.tilt=X);if("point"===M.targetGeometry.type){const sa=M.targetGeometry;X=M.targetGeometry.clone();M=null!=M.scale?ba.scaleToDistance(I,M.scale,sa.latitude):I.state.camera.distance;return ba.fromCenterDistance(I,
X,M,na,pa,da)}return(M=M.targetGeometry.extent)?ba.fromExtent(I,M,na.heading,na.tilt,pa,da):Y(da)}function h(){h=d._asyncToGenerator(function*(I,M,X){if(M&&I.spatialReference){var da={target:void 0};if("declaredClass"in M||Array.isArray(M))da.target=M;else{for(var na in M)da[na]=M[na];M.center&&!da.target&&(da.target=M.center)}M=da}else M=null;if(!M)throw new f("viewpointutils-create:no-target","Missing target for creating viewpoint");da=new b({fov:I.camera.fov});na=new w({camera:da});if(M.target instanceof
w)return I=yield D(I,M.target,M,X,na),z(I);if(M.target instanceof b)return z(x(I,M.target,na));var pa=null!=M.scale||null!=M.zoom;if(M.target instanceof t){var sa=M.target.xmin===M.target.xmax||M.target.ymin===M.target.ymax;return pa||sa?z(yield A(I,M,M.target.center,da,X,na)):z(yield oa(I,M,M.target,da,X,na))}sa={boundingBox:K.empty(),hasZ:!1,screenSpaceObjects:[]};var va=pa?(va=J(I,M))?ca.getResolutionInMetersForScale(va):void 0:void 0;yield g(I,M.target,va,sa);if(isFinite(sa.boundingBox[0])){K.center(sa.boundingBox,
F);xa.x=F[0];xa.y=F[1];xa.z=F[2];xa.spatialReference=I.spatialReference;isFinite(xa.z)&&sa.hasZ?va=K.isPoint(sa.boundingBox):(xa.z=void 0,va=S.isPoint(K.toRect(sa.boundingBox,ta)));if(pa||va)return z(yield A(I,M,xa,da,X,na));pa=sa.screenSpaceObjects;if(pa.length){va=Number.NEGATIVE_INFINITY;for(let za=0;za<pa.length;za++){const ya=pa[za].screenSpaceBoundingRect;va=Math.max(va,Math.abs(ya[0]),Math.abs(ya[1]),Math.abs(ya[2]),Math.abs(ya[3]))}pa=.66-va/Math.min(I.width,I.height)*2}else pa=.66;return z(yield G(I,
M,xa,sa.boundingBox,pa,da,X,na))}return M.position?(X=ea.cameraOnContentAlongViewDirection(I),B.copy(ua,X.viewForward),ba.directionToHeadingTilt(I,X.eye,ua,X.up,Ca),da.position=new qa(M.position),da.heading=null!=M.heading?M.heading:Ca.heading,da.tilt=null!=M.tilt?M.tilt:Ca.tilt,I=ha(I,null,da,na),z(I)):z(yield ia(I,M,da,X,na))});return h.apply(this,arguments)}function J(I,M){return null==M.scale&&null!=M.zoom?ba.zoomToScale(I,M.zoom):M.scale}function Z(I,M){let X=!1;null!=M.heading?(I.heading=M.heading,
X=!0):null!=M.rotation&&(I.heading=V(M.rotation),X=!0);null!=M.tilt&&(I.tilt=M.tilt,X=!0);null!=M.fov&&(I.fov=M.fov);return X}function ha(I,M,X,da){const na=I.spatialReference||e.WGS84;M=n.isSome(M)?M:ba.externalToInternal(I,X);if(n.isNone(M))return da;da.targetGeometry=E.projectVectorToPoint(M.center,I.renderSpatialReference,na);da.scale=ba.computeScale(I,M);da.rotation=T(X.heading);da.camera=X;return da}function fa(I,M,X){var da=()=>new f("viewpointutils:invalid-geometry","The target is missing a valid geometry");
if(!M)throw da();if(!la.canProject(M.spatialReference,I.spatialReference))throw new f("viewpointutils:incompatible-spatialreference",`Spatial reference (${M.spatialReference?M.spatialReference.wkid:"unknown"}) is incompatible with the view (${I.spatialReference?.wkid})`,{geometry:M});const na=[];if(!M.hasZ&&I.basemapTerrain){switch(M.type){case "point":var pa=M;break;case "multipoint":case "polyline":pa=M.extent?.center;break;case "mesh":pa=M.origin;break;case "extent":pa=M.center;break;case "polygon":pa=
M.centroid}pa&&n.isSome(I.basemapTerrain.spatialReference)&&la.canProject(pa,I.basemapTerrain.spatialReference)&&I.elevationProvider?F[2]=n.unwrapOr(ka.getElevationAtPoint(I.elevationProvider,pa),0):F[2]=0}(0,Fa[M.type])(M,sa=>{na.push(sa[0],sa[1],sa[2])},F);pa=na.length/3;if(0===pa)throw da();da=Array(na.length);if(E.projectBuffer(na,M.spatialReference,0,da,I.spatialReference,0,pa))for(M.hasZ&&(X.hasZ=!0),I=0;I<da.length;I+=3)M.hasZ?(F[0]=da[I+0],F[1]=da[I+1],F[2]=da[I+2]):(F[0]=da[I+0],F[1]=da[I+
1]),K.expandWithVec3(X.boundingBox,F)}function ma(I,M,X,da){return H.apply(this,arguments)}function H(){H=d._asyncToGenerator(function*(I,M,X,da){const na=yield v.result(I.whenViewForGraphic(M));if(!1!==na.ok&&!n.isNone(na.value)&&"whenGraphicBounds"in na.value)if(X=yield v.result(na.value.whenGraphicBounds(M,{minDemResolution:X})),!1===X.ok)fa(I,M.geometry,da);else{var {screenSpaceObjects:pa,boundingBox:sa}=X.value;K.expandWithAABB(da.boundingBox,sa);pa&&pa.forEach(va=>{da.screenSpaceObjects.push(va)});
isFinite(sa[2])&&(da.hasZ=!0)}else fa(I,M.geometry,da)});return H.apply(this,arguments)}function g(I,M,X,da){return p.apply(this,arguments)}function p(){p=d._asyncToGenerator(function*(I,M,X,da){if(Array.isArray(M)&&2===M.length){const na=M[0],pa=M[1];if("number"===typeof na&&"number"===typeof pa){xa.x=na;xa.y=pa;xa.z=void 0;xa.spatialReference=I.spatialReference?.isGeographic?I.spatialReference:e.WGS84;fa(I,xa,da);return}}M&&"function"===typeof M.map?yield k.eachAlways(M.map(na=>g(I,na,X,da))):M instanceof
N?fa(I,M,da):M instanceof r&&(yield ma(I,M,X,da))});return p.apply(this,arguments)}function D(I,M,X,da,na){return P.apply(this,arguments)}function P(){P=d._asyncToGenerator(function*(I,M,X,da,na){if(n.isSome(M.camera))return x(I,M.camera,na);na.scale=M.scale;na.rotation=M.rotation;na.targetGeometry=n.isSome(M.targetGeometry)?M.targetGeometry.clone():null;na.camera=null;null!=X.heading?na.rotation=T(X.heading):null!=X.rotation&&(na.rotation=X.rotation);M=J(I,X);null!=M&&(na.scale=M);da=new ba.AsyncContext(da);
c(I,na,X.tilt,da);na.camera=yield da.resolver.promise;return na});return P.apply(this,arguments)}function x(I,M,X){const da=la.project(M.position,I.spatialReference);if(n.isNone(da))return null;M=M.clone();M.fov=I.camera.fov;M.position=da;return ha(I,null,M,X)}function A(I,M,X,da,na,pa){return U.apply(this,arguments)}function U(){U=d._asyncToGenerator(function*(I,M,X,da,na,pa){if(n.isNone(X))throw new f("createfromcenter","invalid point");pa.targetGeometry=X.clone();var sa=ea.cameraOnContentAlongViewDirection(I);
if(M.position)return X=pa.targetGeometry,M=M.position,na=I.renderSpatialReference,E.projectPointToVector(M,wa,na),E.projectPointToVector(X,Aa,na),pa.targetGeometry=new qa(X),da.position=new qa(M),B.subtract(ua,Aa,wa),ba.directionToHeadingTilt(I,wa,ua,sa.up,da),pa.scale=ba.distanceToScale(I,B.distance(wa,Aa),pa.targetGeometry.latitude),pa.rotation=T(da.heading),pa.camera=da,pa;if(M.zoomFactor){var va=sa.distance/M.zoomFactor;const za=B.scale(F,sa.viewForward,-va);sa.eye=B.add(F,sa.center,za);pa.scale=
ba.distanceToScale(I,va,X.latitude)}ba.internalToExternal(I,sa,da);va=Z(da,M)?ba.OrientationMode.LOCKED:ba.OrientationMode.ADJUST;M.zoomFactor||(M=J(I,M),null==M?(E.projectPointToVector(X,F,I.renderSpatialReference),W.intersectsPoint(sa.frustum,F)?pa.scale=ba.distanceToScale(I,B.distance(sa.eye,F),X.latitude):pa.scale=ba.computeScale(I,sa)):pa.scale=M,sa=new ba.AsyncContext(na),ba.fromCenterScale(I,pa.targetGeometry,pa.scale,da,va,sa),pa.camera=yield sa.resolver.promise);return pa});return U.apply(this,
arguments)}function ia(I,M,X,da,na){return ja.apply(this,arguments)}function ja(){ja=d._asyncToGenerator(function*(I,M,X,da,na){var pa=ea.cameraOnContentAlongViewDirection(I);pa=E.projectVectorToPoint(pa.center,I.renderSpatialReference,I.spatialReference);return A(I,M,pa,X,da,na)});return ja.apply(this,arguments)}function oa(I,M,X,da,na,pa){return aa.apply(this,arguments)}function aa(){aa=d._asyncToGenerator(function*(I,M,X,da,na,pa){pa.targetGeometry=X.clone();const sa=ea.cameraOnContentAlongViewDirection(I);
ba.internalToExternal(I,sa,da);M=Z(da,M)?ba.OrientationMode.LOCKED:ba.OrientationMode.ADJUST;na=new ba.AsyncContext(na);ba.fromExtent(I,X,da.heading,da.tilt,M,na);pa.camera=yield na.resolver.promise;return pa});return aa.apply(this,arguments)}function G(I,M,X,da,na,pa,sa,va){return y.apply(this,arguments)}function y(){y=d._asyncToGenerator(function*(I,M,X,da,na,pa,sa,va){va.targetGeometry=X.clone();const za=ea.cameraOnContentAlongViewDirection(I);var ya=0;null!=X.z?ya=X.z:I.basemapTerrain&&I.elevationProvider&&
(ya=n.unwrap(ka.getElevationAtPoint(I.elevationProvider,X)));B.set(F,X.x,X.y,ya);E.computeTranslationToOriginAndRotation(I.spatialReference,F,Q,I.renderSpatialReference);C.fromMat4(R,Q);C.transpose(R,R);K.empty(ra);X=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Ba=0;Ba<X.length;Ba++){const Da=X[Ba];let Ea=da[Da[2]];isFinite(Ea)||(Ea=ya);B.set(F,da[Da[0]],da[Da[1]],Ea);E.projectVectorToVector(F,I.spatialReference,F,I.renderSpatialReference);K.expandWithVec3(ra,B.transformMat3(F,
F,R))}da=K.width(ra);ya=K.height(ra);X=K.depth(ra);Ba=1/Math.tan(za.fovY/2);na=Math.max(.5*Math.sqrt(da*da+X*X)*Math.max(Ba,1/Math.tan(za.fovX/2))+.5*ya,.5*ya*Ba+.5*Math.max(da,X))/na;ba.internalToExternal(I,za,pa);M=Z(pa,M)?ba.OrientationMode.LOCKED:ba.OrientationMode.ADJUST;va.scale=ba.distanceToScale(I,na,va.targetGeometry.latitude);sa=new ba.AsyncContext(sa);ba.fromCenterScale(I,va.targetGeometry,va.scale,pa,M,sa);va.camera=yield sa.resolver.promise;return va});return y.apply(this,arguments)}
function z(I){I&&n.isSome(I.camera)&&(I.rotation=T(I.camera.heading));return I}const F=L.create(),Q=q.create(),R=O.create(),ra=K.create(),ta=S.create(),ua=L.create(),wa=L.create(),Aa=L.create(),Ca={heading:0,tilt:0},xa=new qa,Fa={point(I,M,X){X[0]=I.x;X[1]=I.y;null!=I.z&&(X[2]=I.z);M(X)},polygon(I,M,X){const da=I.hasZ;for(let na=0;na<I.rings.length;na++){const pa=I.rings[na];for(let sa=0;sa<pa.length;sa++)X[0]=pa[sa][0],X[1]=pa[sa][1],da&&(X[2]=pa[sa][2]),M(X)}},polyline(I,M,X){const da=I.hasZ;for(let na=
0;na<I.paths.length;na++){const pa=I.paths[na];for(let sa=0;sa<pa.length;sa++)X[0]=pa[sa][0],X[1]=pa[sa][1],da&&(X[2]=pa[sa][2]),M(X)}},multipoint(I,M,X){const da=I.points;I=I.hasZ;for(let na=0;na<da.length;na++)X[0]=da[na][0],X[1]=da[na][1],I&&(X[2]=da[na][2]),M(X)},extent(I,M,X){null!=I.zmin&&null!=I.zmax?(M(B.set(X,I.xmin,I.ymin,I.zmin)),M(B.set(X,I.xmax,I.ymin,I.zmin)),M(B.set(X,I.xmin,I.ymax,I.zmin)),M(B.set(X,I.xmax,I.ymax,I.zmin)),M(B.set(X,I.xmin,I.ymin,I.zmax)),M(B.set(X,I.xmax,I.ymin,I.zmax)),
M(B.set(X,I.xmin,I.ymax,I.zmax)),M(B.set(X,I.xmax,I.ymax,I.zmax))):(M(B.set(X,I.xmin,I.ymin,X[2])),M(B.set(X,I.xmax,I.ymin,X[2])),M(B.set(X,I.xmin,I.ymax,X[2])),M(B.set(X,I.xmax,I.ymax,X[2])))},mesh(I,M,X){if(I=I.vertexAttributes&&I.vertexAttributes.position)for(let da=0;da<I.length;da+=3)M(B.set(X,I[da+0],I[da+1],I[da+2]))}};a.create=function(I,M,X){return h.apply(this,arguments)};a.fromCamera=function(I,M,X=null){n.isNone(X)&&(X=new w);return ha(I,null,M.clone(),X)};a.headingToRotation=T;a.rotationToHeading=
V;a.toCamera=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(a,d){function b(c,h){c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=h[4];c[4]=h[5];c[5]=h[6];c[6]=h[8];c[7]=h[9];c[8]=h[10];return c}function m(c,h){c[0]=h[0];c[1]=h[1];c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=h[5];c[6]=h[6];c[7]=h[7];c[8]=h[8];return c}function r(c,h,J,Z,ha,fa,ma,H,g,p){c[0]=h;c[1]=J;c[2]=Z;c[3]=ha;c[4]=fa;c[5]=ma;c[6]=H;c[7]=g;c[8]=p;return c}function w(c){c[0]=
1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function v(c,h){if(c===h){const J=h[1],Z=h[2],ha=h[5];c[1]=h[3];c[2]=h[6];c[3]=J;c[5]=h[7];c[6]=Z;c[7]=ha}else c[0]=h[0],c[1]=h[3],c[2]=h[6],c[3]=h[1],c[4]=h[4],c[5]=h[7],c[6]=h[2],c[7]=h[5],c[8]=h[8];return c}function l(c,h){const J=h[0],Z=h[1],ha=h[2],fa=h[3],ma=h[4],H=h[5],g=h[6],p=h[7];h=h[8];const D=h*ma-H*p,P=-h*fa+H*g,x=p*fa-ma*g;let A=J*D+Z*P+ha*x;if(!A)return null;A=1/A;c[0]=D*A;c[1]=(-h*Z+ha*p)*A;c[2]=(H*Z-ha*ma)*A;c[3]=
P*A;c[4]=(h*J-ha*g)*A;c[5]=(-H*J+ha*fa)*A;c[6]=x*A;c[7]=(-p*J+Z*g)*A;c[8]=(ma*J-Z*fa)*A;return c}function u(c,h){const J=h[0],Z=h[1],ha=h[2],fa=h[3],ma=h[4],H=h[5],g=h[6],p=h[7];h=h[8];c[0]=ma*h-H*p;c[1]=ha*p-Z*h;c[2]=Z*H-ha*ma;c[3]=H*g-fa*h;c[4]=J*h-ha*g;c[5]=ha*fa-J*H;c[6]=fa*p-ma*g;c[7]=Z*g-J*p;c[8]=J*ma-Z*fa;return c}function f(c){const h=c[3],J=c[4],Z=c[5],ha=c[6],fa=c[7],ma=c[8];return c[0]*(ma*J-Z*fa)+c[1]*(-ma*h+Z*ha)+c[2]*(fa*h-J*ha)}function n(c,h,J){const Z=h[0],ha=h[1],fa=h[2],ma=h[3],
H=h[4],g=h[5],p=h[6],D=h[7];h=h[8];const P=J[0],x=J[1],A=J[2],U=J[3],ia=J[4],ja=J[5],oa=J[6],aa=J[7];J=J[8];c[0]=P*Z+x*ma+A*p;c[1]=P*ha+x*H+A*D;c[2]=P*fa+x*g+A*h;c[3]=U*Z+ia*ma+ja*p;c[4]=U*ha+ia*H+ja*D;c[5]=U*fa+ia*g+ja*h;c[6]=oa*Z+aa*ma+J*p;c[7]=oa*ha+aa*H+J*D;c[8]=oa*fa+aa*g+J*h;return c}function k(c,h,J){const Z=h[0],ha=h[1],fa=h[2],ma=h[3],H=h[4],g=h[5],p=h[6],D=h[7];h=h[8];const P=J[0];J=J[1];c[0]=Z;c[1]=ha;c[2]=fa;c[3]=ma;c[4]=H;c[5]=g;c[6]=P*Z+J*ma+p;c[7]=P*ha+J*H+D;c[8]=P*fa+J*g+h;return c}
function C(c,h,J){const Z=h[0],ha=h[1],fa=h[2],ma=h[3],H=h[4],g=h[5],p=h[6],D=h[7];h=h[8];const P=Math.sin(J);J=Math.cos(J);c[0]=J*Z+P*ma;c[1]=J*ha+P*H;c[2]=J*fa+P*g;c[3]=J*ma-P*Z;c[4]=J*H-P*ha;c[5]=J*g-P*fa;c[6]=p;c[7]=D;c[8]=h;return c}function O(c,h,J){const Z=J[0],ha=J[1];J=J[2];c[0]=Z*h[0];c[1]=Z*h[1];c[2]=Z*h[2];c[3]=ha*h[3];c[4]=ha*h[4];c[5]=ha*h[5];c[6]=J*h[6];c[7]=J*h[7];c[8]=J*h[8];return c}function q(c,h,J){const Z=J[0];J=J[1];c[0]=Z*h[0];c[1]=Z*h[1];c[2]=Z*h[2];c[3]=J*h[3];c[4]=J*h[4];
c[5]=J*h[5];return c}function B(c,h){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=h[0];c[7]=h[1];c[8]=1;return c}function L(c,h){const J=Math.sin(h);h=Math.cos(h);c[0]=h;c[1]=J;c[2]=0;c[3]=-J;c[4]=h;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function E(c,h){c[0]=h[0];c[1]=0;c[2]=0;c[3]=0;c[4]=h[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function K(c,h){c[0]=h[0];c[1]=h[1];c[2]=0;c[3]=h[2];c[4]=h[3];c[5]=0;c[6]=h[4];c[7]=h[5];c[8]=1;return c}function S(c,h){var J=h[0],Z=h[1],ha=h[2];h=h[3];var fa=J+J,ma=
Z+Z;const H=ha+ha;J*=fa;const g=Z*fa;Z*=ma;const p=ha*fa,D=ha*ma;ha*=H;fa*=h;ma*=h;h*=H;c[0]=1-Z-ha;c[3]=g-h;c[6]=p+ma;c[1]=g+h;c[4]=1-J-ha;c[7]=D-fa;c[2]=p-ma;c[5]=D+fa;c[8]=1-J-Z;return c}function W(c,h){const J=h[0],Z=h[1],ha=h[2],fa=h[4],ma=h[5],H=h[6],g=h[8],p=h[9];h=h[10];const D=h*ma-H*p,P=-h*fa+H*g,x=p*fa-ma*g;var A=J*D+Z*P+ha*x;if(!A)return null;A=1/A;c[0]=D*A;c[1]=(-h*Z+ha*p)*A;c[2]=(H*Z-ha*ma)*A;c[3]=P*A;c[4]=(h*J-ha*g)*A;c[5]=(-H*J+ha*fa)*A;c[6]=x*A;c[7]=(-p*J+Z*g)*A;c[8]=(ma*J-Z*fa)*
A;return c}function ca(c,h){const J=h[0],Z=h[1],ha=h[2],fa=h[3],ma=h[4],H=h[5],g=h[6],p=h[7];var D=h[8],P=h[9],x=h[10],A=h[11];const U=h[12],ia=h[13],ja=h[14];h=h[15];const oa=J*H-Z*ma,aa=J*g-ha*ma,G=J*p-fa*ma,y=Z*g-ha*H,z=Z*p-fa*H,F=ha*p-fa*g,Q=D*ia-P*U,R=D*ja-x*U;D=D*h-A*U;const ra=P*ja-x*ia;P=P*h-A*ia;x=x*h-A*ja;A=oa*x-aa*P+G*ra+y*D-z*R+F*Q;if(!A)return null;A=1/A;c[0]=(H*x-g*P+p*ra)*A;c[1]=(g*D-ma*x-p*R)*A;c[2]=(ma*P-H*D+p*Q)*A;c[3]=(ha*P-Z*x-fa*ra)*A;c[4]=(J*x-ha*D+fa*R)*A;c[5]=(Z*D-J*P-fa*Q)*
A;c[6]=(ia*F-ja*z+h*y)*A;c[7]=(ja*G-U*F-h*aa)*A;c[8]=(U*z-ia*G+h*oa)*A;return c}function la(c,h,J){c[0]=2/h;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/J;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c}function ea(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"}function ba(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2)}function ka(c,h,J){c[0]=h[0]+J[0];c[1]=h[1]+J[1];c[2]=h[2]+J[2];c[3]=h[3]+J[3];c[4]=h[4]+J[4];c[5]=h[5]+
J[5];c[6]=h[6]+J[6];c[7]=h[7]+J[7];c[8]=h[8]+J[8];return c}function qa(c,h,J){c[0]=h[0]-J[0];c[1]=h[1]-J[1];c[2]=h[2]-J[2];c[3]=h[3]-J[3];c[4]=h[4]-J[4];c[5]=h[5]-J[5];c[6]=h[6]-J[6];c[7]=h[7]-J[7];c[8]=h[8]-J[8];return c}function e(c,h,J){c[0]=h[0]*J;c[1]=h[1]*J;c[2]=h[2]*J;c[3]=h[3]*J;c[4]=h[4]*J;c[5]=h[5]*J;c[6]=h[6]*J;c[7]=h[7]*J;c[8]=h[8]*J;return c}function t(c,h,J,Z){c[0]=h[0]+J[0]*Z;c[1]=h[1]+J[1]*Z;c[2]=h[2]+J[2]*Z;c[3]=h[3]+J[3]*Z;c[4]=h[4]+J[4]*Z;c[5]=h[5]+J[5]*Z;c[6]=h[6]+J[6]*Z;c[7]=
h[7]+J[7]*Z;c[8]=h[8]+J[8]*Z;return c}function N(c,h){return c[0]===h[0]&&c[1]===h[1]&&c[2]===h[2]&&c[3]===h[3]&&c[4]===h[4]&&c[5]===h[5]&&c[6]===h[6]&&c[7]===h[7]&&c[8]===h[8]}function V(c,h){const J=c[0],Z=c[1],ha=c[2],fa=c[3],ma=c[4],H=c[5],g=c[6],p=c[7];c=c[8];const D=h[0],P=h[1],x=h[2],A=h[3],U=h[4],ia=h[5],ja=h[6],oa=h[7];h=h[8];const aa=d.getEpsilon();return Math.abs(J-D)<=aa*Math.max(1,Math.abs(J),Math.abs(D))&&Math.abs(Z-P)<=aa*Math.max(1,Math.abs(Z),Math.abs(P))&&Math.abs(ha-x)<=aa*Math.max(1,
Math.abs(ha),Math.abs(x))&&Math.abs(fa-A)<=aa*Math.max(1,Math.abs(fa),Math.abs(A))&&Math.abs(ma-U)<=aa*Math.max(1,Math.abs(ma),Math.abs(U))&&Math.abs(H-ia)<=aa*Math.max(1,Math.abs(H),Math.abs(ia))&&Math.abs(g-ja)<=aa*Math.max(1,Math.abs(g),Math.abs(ja))&&Math.abs(p-oa)<=aa*Math.max(1,Math.abs(p),Math.abs(oa))&&Math.abs(c-h)<=aa*Math.max(1,Math.abs(c),Math.abs(h))}function T(c){const h=d.getEpsilon(),J=c[0],Z=c[1],ha=c[2],fa=c[3],ma=c[4],H=c[5],g=c[6],p=c[7];c=c[8];return Math.abs(1-(J*J+fa*fa+g*g))<=
h&&Math.abs(1-(Z*Z+ma*ma+p*p))<=h&&Math.abs(1-(ha*ha+H*H+c*c))<=h}const Y=Object.freeze(Object.defineProperty({__proto__:null,add:ka,adjoint:u,copy:m,determinant:f,equals:V,exactEquals:N,frob:ba,fromMat2d:K,fromMat4:b,fromQuat:S,fromRotation:L,fromScaling:E,fromTranslation:B,identity:w,invert:l,isOrthoNormal:T,mul:n,multiply:n,multiplyScalar:e,multiplyScalarAndAdd:t,normalFromMat4:ca,normalFromMat4Legacy:W,projection:la,rotate:C,scale:O,scaleByVec2:q,set:r,str:ea,sub:qa,subtract:qa,translate:k,transpose:v},
Symbol.toStringTag,{value:"Module"}));a.add=ka;a.adjoint=u;a.copy=m;a.determinant=f;a.equals=V;a.exactEquals=N;a.frob=ba;a.fromMat2d=K;a.fromMat4=b;a.fromQuat=S;a.fromRotation=L;a.fromScaling=E;a.fromTranslation=B;a.identity=w;a.invert=l;a.isOrthoNormal=T;a.mat3=Y;a.mul=n;a.multiply=n;a.multiplyScalar=e;a.multiplyScalarAndAdd=t;a.normalFromMat4=ca;a.normalFromMat4Legacy=W;a.projection=la;a.rotate=C;a.scale=O;a.scaleByVec2=q;a.set=r;a.str=ea;a.sub=qa;a.subtract=qa;a.translate=k;a.transpose=v})},"esri/chunks/mat3f64":function(){define(["exports"],
function(a){function d(){return[1,0,0,0,1,0,0,0,1]}function b(v){return[v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8]]}function m(v,l,u,f,n,k,C,O,q){return[v,l,u,f,n,k,C,O,q]}function r(v,l){return new Float64Array(v,l,9)}const w=Object.freeze(Object.defineProperty({__proto__:null,clone:b,create:d,createView:r,fromValues:m},Symbol.toStringTag,{value:"Module"}));a.clone=b;a.create=d;a.createView=r;a.fromValues=m;a.mat3f64=w})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function d(){return[1,
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(l){return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]]}function m(l,u,f,n,k,C,O,q,B,L,E,K,S,W,ca,la){return[l,u,f,n,k,C,O,q,B,L,E,K,S,W,ca,la]}function r(l,u){return new Float64Array(l,u,16)}const w=d(),v=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:w,clone:b,create:d,createView:r,fromValues:m},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=w;a.clone=b;a.create=d;a.createView=r;a.fromValues=m;a.mat4f64=
v})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(a,d,b,m,r,w,v,l,u,f){function n(){return[r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}function k(E,K){u.fromPoints(K[a.PointIndex.FAR_BOTTOM_LEFT],K[a.PointIndex.NEAR_BOTTOM_LEFT],K[a.PointIndex.NEAR_TOP_LEFT],E[a.PlaneIndex.LEFT]);
u.fromPoints(K[a.PointIndex.NEAR_BOTTOM_RIGHT],K[a.PointIndex.FAR_BOTTOM_RIGHT],K[a.PointIndex.FAR_TOP_RIGHT],E[a.PlaneIndex.RIGHT]);u.fromPoints(K[a.PointIndex.FAR_BOTTOM_LEFT],K[a.PointIndex.FAR_BOTTOM_RIGHT],K[a.PointIndex.NEAR_BOTTOM_RIGHT],E[a.PlaneIndex.BOTTOM]);u.fromPoints(K[a.PointIndex.NEAR_TOP_LEFT],K[a.PointIndex.NEAR_TOP_RIGHT],K[a.PointIndex.FAR_TOP_RIGHT],E[a.PlaneIndex.TOP]);u.fromPoints(K[a.PointIndex.NEAR_BOTTOM_LEFT],K[a.PointIndex.NEAR_BOTTOM_RIGHT],K[a.PointIndex.NEAR_TOP_RIGHT],
E[a.PlaneIndex.NEAR]);u.fromPoints(K[a.PointIndex.FAR_BOTTOM_RIGHT],K[a.PointIndex.FAR_BOTTOM_LEFT],K[a.PointIndex.FAR_TOP_LEFT],E[a.PlaneIndex.FAR])}function C(E,K){for(let S=0;S<a.NumPlanes.NUM;S++)if(!u.clip(E[S],K))return!1;return!0}a.PlaneIndex=void 0;(function(E){E[E.LEFT=0]="LEFT";E[E.RIGHT=1]="RIGHT";E[E.BOTTOM=2]="BOTTOM";E[E.TOP=3]="TOP";E[E.NEAR=4]="NEAR";E[E.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(E){E[E.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";E[E.NEAR_BOTTOM_RIGHT=
1]="NEAR_BOTTOM_RIGHT";E[E.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";E[E.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";E[E.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";E[E.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";E[E.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";E[E.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const O={bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,
a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]};
a.NumPlanes=void 0;(function(E){E[E.NUM=6]="NUM"})(a.NumPlanes||(a.NumPlanes={}));a.NumPoints=void 0;(function(E){E[E.NUM=8]="NUM"})(a.NumPoints||(a.NumPoints={}));const q=[v.fromValues(-1,-1,-1,1),v.fromValues(1,-1,-1,1),v.fromValues(1,1,-1,1),v.fromValues(-1,1,-1,1),v.fromValues(-1,-1,1,1),v.fromValues(1,-1,1,1),v.fromValues(1,1,1,1),v.fromValues(-1,1,1,1)],B=new d.ObjectStack(l.create),L=n();a.computePlanes=k;a.copy=function(E,K){for(let S=0;S<a.NumPlanes.NUM;S++)u.copy(E[S],K[S])};a.create=function(E){return E?
[u.create(E[0]),u.create(E[1]),u.create(E[2]),u.create(E[3]),u.create(E[4]),u.create(E[5])]:[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]};a.createPoints=n;a.fromMatrix=function(E,K,S,W=L){E=b.multiply(f.sm4d.get(),K,E);b.invert(E,E);for(K=0;K<a.NumPoints.NUM;++K){const ca=w.transformMat4(f.sv4d.get(),q[K],E);m.set(W[K],ca[0]/ca[3],ca[1]/ca[3],ca[2]/ca[3])}k(S,W)};a.intersectClipRay=function(E,K){for(let S=0;S<a.NumPlanes.NUM;S++)if(!u.clipInfinite(E[S],K))return!1;return!0};
a.intersectsLineSegment=function(E,K,S){return C(E,l.fromLineSegmentAndDirection(K,S,B.get()))};a.intersectsPoint=function(E,K){for(let S=0;S<a.NumPlanes.NUM;S++)if(0<u.signedDistance(E[S],K))return!1;return!0};a.intersectsRay=function(E,K){return C(E,l.fromRay(K,B.get()))};a.intersectsSphere=function(E,K){for(let S=0;S<a.NumPlanes.NUM;S++){const W=E[S];if(W[0]*K[0]+W[1]*K[1]+W[2]*K[2]+W[3]>=K[3])return!1}return!0};a.planePointIndices=O;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,d){let b=function(){function m(w){this._allocator=w;this._items=[];this._itemsPtr=0;this._grow()}var r=m.prototype;r.get=function(){0===this._itemsPtr&&d.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};r._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};r._grow=
function(){for(let w=0;w<Math.max(8,Math.min(this._items.length,1024));w++)this._items.push(this._allocator())};return m}();a.ObjectStack=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray"],function(a,d,b,m){function r(u){return u?{ray:m.create(u.ray),c0:u.c0,c1:u.c1}:{ray:m.create(),c0:0,c1:Number.MAX_VALUE}}function w(u,f,n,k=r()){m.copy(u,k.ray);k.c0=f;k.c1=n;return k}
function v(u,f,n){return b.add(n,u.ray.origin,b.scale(n,u.ray.direction,f))}const l=new d.ObjectStack(()=>r());a.copy=function(u,f=r()){return w(u.ray,u.c0,u.c1,f)};a.create=r;a.fromLineSegmentAndDirection=function(u,f,n=r()){const k=b.length(u.vector);m.fromValues(u.origin,f,n.ray);n.c0=0;n.c1=k;return n};a.fromRay=function(u,f=r()){m.copy(u,f.ray);f.c0=0;f.c1=Number.MAX_VALUE;return f};a.fromValues=w;a.getAt=v;a.getEnd=function(u,f){return v(u,u.c1,f)};a.getStart=function(u,f){return v(u,u.c0,f)};
a.wrap=function(u,f,n){const k=l.get();k.ray=u;k.c0=f;k.c1=n;return k};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,d,b,m,r,w){function v(n){if(n){var k=r.clone(n.origin);n=r.clone(n.direction);k={origin:k,direction:n}}else k=r.create(),n=r.create(),k={origin:k,direction:n};return k}function l(n,k,C=v()){m.copy(C.origin,
n);m.copy(C.direction,k);return C}function u(n,k){n=m.cross(w.sv3d.get(),m.normalize(w.sv3d.get(),n.direction),m.subtract(w.sv3d.get(),k,n.origin));return m.dot(n,n)}const f=new b.ObjectStack(()=>v());a.closestPoint=function(n,k,C){k=m.dot(n.direction,m.subtract(C,k,n.origin));m.add(C,n.origin,m.scale(C,n.direction,k));return C};a.copy=function(n,k=v()){return l(n.origin,n.direction,k)};a.create=v;a.distance=function(n,k){return Math.sqrt(u(n,k))};a.distance2=u;a.equals=function(n,k){return d.equals(n.origin,
k.origin)&&d.equals(n.direction,k.direction)};a.fromPoints=function(n,k,C=v()){m.copy(C.origin,n);m.subtract(C.direction,k,n);return C};a.fromValues=l;a.wrap=function(n,k){const C=f.get();C.origin=n;C.direction=k;return C};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(a,d){const b=d.VectorStack.createVec2f64(),m=d.VectorStack.createVec3f64(),r=d.VectorStack.createVec4f64(),w=d.VectorStack.createMat3f64(),
v=d.VectorStack.createMat4f64();d=d.VectorStack.createQuatf64();a.sm3d=w;a.sm4d=v;a.sq4d=d;a.sv2d=b;a.sv3d=m;a.sv4d=r;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(a,d,b,m,r,w,v,l,u,f){let n=function(){function C(q,B,L){this._itemByteSize=
q;this._itemCreate=B;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(L/this._itemByteSize)}var O=C.prototype;O.get=function(){0===this._itemsPtr&&m.nextTick(()=>this._reset());const q=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=q;){const B=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let L=0;L<this._itemsPerBuffer;++L)this._items.push(this._itemCreate(B,L*this._itemByteSize));this._buffers.push(B)}return this._items[this._itemsPtr++]};
O._reset=function(){const q=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>q;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};C.createVec2f64=function(q=k){return new C(16,l.createView,q)};C.createVec3f64=function(q=k){return new C(24,u.createView,q)};C.createVec4f64=function(q=k){return new C(32,f.createView,q)};C.createMat3f64=function(q=k){return new C(72,r.createView,q)};C.createMat4f64=function(q=k){return new C(128,
w.createView,q)};C.createQuatf64=function(q=k){return new C(32,v.createView,q)};d._createClass(C,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}]);return C}();const k=4*b.ByteSizeUnit.KILOBYTES;a.VectorStack=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(a){function d(r){return 32+r.length}function b(r){if(!r)return 0;if(Array.isArray(r)){var w=r.length;
if(0===w||"number"===typeof r[0])r=32+8*w;else{var v=32;for(let l=0;l<w;l++)v+=m(r[l]);r=v}return r}v=32;for(w in r)r.hasOwnProperty(w)&&(v+=m(r[w]));return v}function m(r){switch(typeof r){case "object":return b(r);case "string":return d(r);case "number":return 16;case "boolean":return 4;default:return 8}}a.ByteSizeUnit=void 0;(function(r){r[r.KILOBYTES=1024]="KILOBYTES";r[r.MEGABYTES=1048576]="MEGABYTES";r[r.GIGABYTES=1073741824]="GIGABYTES"})(a.ByteSizeUnit||(a.ByteSizeUnit={}));a.estimateAttributesObjectSize=
function(r){if(!r)return 0;let w=32;for(const v in r)if(r.hasOwnProperty(v)){const l=r[v];switch(typeof l){case "string":w+=d(l);break;case "number":w+=16;break;case "boolean":w+=4}}return w};a.estimateFixedArraySize=function(r,w){return 32+r.length*w};a.estimateNestedObjectSize=b;a.estimateNumberByteSize=function(r){return 16};a.estimateStringByteSize=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function d(){return[0,
0,0,1]}function b(l){return[l[0],l[1],l[2],l[3]]}function m(l,u,f,n){return[l,u,f,n]}function r(l,u){return new Float64Array(l,u,4)}const w=d(),v=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:w,clone:b,create:d,createView:r,fromValues:m},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=w;a.clone=b;a.create=d;a.createView=r;a.fromValues=m;a.quatf64=v})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function d(){return[0,0]}function b(B){return[B[0],B[1]]}function m(B,
L){return[B,L]}function r(B){const L=[0,0],E=Math.min(2,B.length);for(let K=0;K<E;++K)L[K]=B[K];return L}function w(B,L){return new Float64Array(B,L,2)}function v(){return[0,0]}function l(){return[1,1]}function u(){return[1,0]}function f(){return[0,1]}const n=[0,0],k=[1,1],C=[1,0],O=[0,1],q=Object.freeze(Object.defineProperty({__proto__:null,ONES:k,UNIT_X:C,UNIT_Y:O,ZEROS:n,clone:b,create:d,createView:w,fromArray:r,fromValues:m,ones:l,unitX:u,unitY:f,zeros:v},Symbol.toStringTag,{value:"Module"}));
a.ONES=k;a.UNIT_X=C;a.UNIT_Y=O;a.ZEROS=n;a.clone=b;a.create=d;a.createView=w;a.fromArray=r;a.fromValues=m;a.ones=l;a.unitX=u;a.unitY=f;a.vec2f64=q;a.zeros=v})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),function(a,d,b,m,r,w,v,l,u){function f(e=ea){return[e[0],e[1],e[2],e[3]]}function n(e,t){return k(t[0],t[1],t[2],t[3],
e)}function k(e,t,N,V,T=f()){T[0]=e;T[1]=t;T[2]=N;T[3]=V;return T}function C(e,t,N){var V=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];V=1E-5<Math.abs(V-1)&&1E-12<V?1/Math.sqrt(V):1;N[0]=t[0]*V;N[1]=t[1]*V;N[2]=t[2]*V;N[3]=-(N[0]*e[0]+N[1]*e[1]+N[2]*e[2]);return N}function O(e,t,N,V=f()){var T=N[0]-t[0],Y=N[1]-t[1],c=N[2]-t[2];N=e[0]-t[0];const h=e[1]-t[1],J=e[2]-t[2];t=Y*J-c*h;c=c*N-T*J;T=T*h-Y*N;Y=t*t+c*c+T*T;Y=1E-5<Math.abs(Y-1)&&1E-12<Y?1/Math.sqrt(Y):1;V[0]=t*Y;V[1]=c*Y;V[2]=T*Y;V[3]=-(V[0]*e[0]+V[1]*e[1]+
V[2]*e[2]);return V}function q(e,t,N,V,T){const Y=e.length/3;if(3>Y)return!1;m.set(K,e[3*N],e[3*N+1],e[3*N+2]);let c=V;for(var h=!1;c<Y-1&&!h;)h=3*c,m.set(S,e[h],e[h+1],e[h+2]),c++,h=!m.exactEquals(K,S);if(!h)return!1;c=Math.max(c,T);for(h=!1;c<Y&&!h;)h=3*c,m.set(W,e[h],e[h+1],e[h+2]),c++,m.subtract(ca,K,S),m.normalize(ca,ca),m.subtract(la,S,W),m.normalize(la,la),h=!m.exactEquals(K,W)&&!m.exactEquals(S,W)&&.99619469809>Math.abs(m.dot(ca,la));if(!h)return 0===N&&1===V&&2===T?!1:q(e,t,0,1,2);O(K,S,
W,t);return!0}function B(e,t,N){e=m.scale(l.sv3d.get(),e,m.dot(e,t));m.subtract(N,t,e);return N}function L(e,t){return m.dot(e,t)+e[3]}function E(e,t,N,V,T){const Y=m.dot(e,N);if(0===Y)return!1;e=-(m.dot(e,t)+e[3])/Y;V&ba.CLAMP&&(e=d.clamp(e,0,1));if(!(V&ba.INFINITE_MIN)&&0>e||!(V&ba.INFINITE_MAX)&&1<e)return!1;m.add(T,t,m.scale(T,N,e));return!0}const K=r.create(),S=r.create(),W=r.create(),ca=r.create(),la=r.create(),ea=[0,0,1,0];var ba;(function(e){e[e.NONE=0]="NONE";e[e.CLAMP=1]="CLAMP";e[e.INFINITE_MIN=
4]="INFINITE_MIN";e[e.INFINITE_MAX=8]="INFINITE_MAX"})(ba||(ba={}));const ka=ba.INFINITE_MIN|ba.INFINITE_MAX,qa=ba.INFINITE_MAX;a.UP=ea;a.clip=function(e,t){const N=m.dot(e,t.ray.direction);e=-L(e,t.ray.origin);if(0>e&&0<=N)return!1;if(-1E-6<N&&1E-6>N)return 0<e;if((0>e||0>N)&&!(0>e&&0>N))return!0;e/=N;0<N?e<t.c1&&(t.c1=e):e>t.c0&&(t.c0=e);return t.c0<=t.c1};a.clipInfinite=function(e,t){const N=m.dot(e,t.ray.direction);e=-L(e,t.ray.origin);if(-1E-6<N&&1E-6>N)return 0<e;e/=N;0<N?e<t.c1&&(t.c1=e):e>
t.c0&&(t.c0=e);return t.c0<=t.c1};a.copy=n;a.create=f;a.distance=function(e,t){return Math.abs(L(e,t))};a.fromManyPoints=function(e,t){return q(e,t,0,1,2)};a.fromManyPointsSampleAt=q;a.fromNormalAndOffset=function(e,t,N){m.copy(N,e);N[3]=t;return N};a.fromPoints=O;a.fromPositionAndNormal=C;a.fromValues=k;a.fromVectorsAndPoint=function(e,t,N,V){m.cross(W,t,e);return C(N,W,V)};a.intersectLine=function(e,t,N,V){N=m.subtract(l.sv3d.get(),N,t);return E(e,t,N,ka,V)};a.intersectLineSegment=function(e,t,
N){return E(e,t.origin,t.vector,ba.NONE,N)};a.intersectLineSegmentClamp=function(e,t,N){return E(e,t.origin,t.vector,ba.CLAMP,N)};a.intersectRay=function(e,t,N){return b.isSome(t)?E(e,t.origin,t.direction,qa,N):!1};a.isPointInside=function(e,t){return 0<=L(e,t)};a.isPointOutside=function(e,t){return 0>L(e,t)};a.isSphereFullyInside=function(e,t){return 0<=L(e,w.getCenter(t))-t[3]};a.isSphereFullyOutside=function(e,t){return 0>L(e,w.getCenter(t))+t[3]};a.negate=function(e,t){t[0]=-e[0];t[1]=-e[1];t[2]=
-e[2];t[3]=-e[3];return t};a.normal=function(e){return e};a.projectPoint=function(e,t,N){const V=m.scale(l.sv3d.get(),e,-e[3]);t=m.subtract(l.sv3d.get(),t,V);e=B(e,t,l.sv3d.get());m.add(N,e,V);return N};a.projectPointLocal=function(e,t,N,V){var T=l.sv3d.get(),Y=l.sv3d.get();u.tangentFrame(e,T,Y);t=m.subtract(l.sv3d.get(),N,t);T=v.projectPointSignedLength(T,t);Y=v.projectPointSignedLength(Y,t);e=v.projectPointSignedLength(e,t);return m.set(V,T,Y,e)};a.projectVector=B;a.setOffsetFromPoint=function(e,
t,N){t!==e&&n(e,t);e[3]=-m.dot(e,N);return e};a.signedDistance=L;a.wrap=function(e=ea[0],t=ea[1],N=ea[2],V=ea[3]){return k(e,t,N,V,l.sv4d.get())};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,d,b,m,r,w,v,
l,u,f,n,k,C,O){function q(){return f.create()}function B(H,g=q()){return u.copy(g,H)}function L(H,g){return f.fromValues(H[0],H[1],H[2],g)}function E(H){return H}function K(H){H[0]=H[1]=H[2]=H[3]=0}function S(H,g){H[0]=H[1]=H[2]=0;H[3]=g;return H}function W(H){return H[3]}function ca(H){return H}function la(H,g,p,D){return f.fromValues(H,g,p,D)}function ea(H,g,p){H!==p&&v.copy(p,H);p[3]=H[3]+g;return p}function ba(H,g,p){b.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return H===p?p:B(H,p)}function ka(H,g,p){if(r.isNone(g))return!1;const {origin:D,direction:P}=g;var x=ha;x[0]=D[0]-H[0];x[1]=D[1]-H[1];x[2]=D[2]-H[2];g=P[0]*P[0]+P[1]*P[1]+P[2]*P[2];if(0===g)return!1;const A=2*(P[0]*x[0]+P[1]*x[1]+P[2]*x[2]);H=A*A-4*g*(x[0]*x[0]+x[1]*x[1]+x[2]*x[2]-H[3]*H[3]);if(0>H)return!1;x=Math.sqrt(H);H=(-A-x)/(2*g);g=(-A+x)/(2*g);if(0>H||g<H&&0<g)H=g;if(0>H)return!1;p&&(p[0]=D[0]+P[0]*H,p[1]=D[1]+P[1]*H,p[2]=D[2]+P[2]*H);return!0}function qa(H,g){return ka(H,g,null)}function e(H,
g,p){if(ka(H,g,p))return p;H=t(H,g,O.sv3d.get());v.add(p,g.origin,v.scale(O.sv3d.get(),g.direction,v.distance(g.origin,H)/v.length(g.direction)));return p}function t(H,g,p){const D=O.sv3d.get(),P=O.sm4d.get();v.cross(D,g.origin,g.direction);const x=H[3];v.cross(p,D,g.origin);v.scale(p,p,1/v.length(p)*x);H=Y(H,g.origin);g=C.angle(g.origin,p);w.fromRotation(P,g+H,D);v.transformMat4(p,p,P);return p}function N(H,g,p){if(ka(H,g,p))return p;k.closestPoint(g,H,p);return V(H,p,p)}function V(H,g,p){g=v.subtract(O.sv3d.get(),
g,H);g=v.scale(O.sv3d.get(),g,H[3]/v.length(g));return v.add(p,g,H)}function T(H,g){g=v.subtract(O.sv3d.get(),g,H);g=v.squaredLength(g);return Math.sqrt(Math.abs(g-H[3]*H[3]))}function Y(H,g){g=v.subtract(O.sv3d.get(),g,H);g=v.length(g);H=H[3];return m.acosClamped(H/(H+Math.abs(H-g)))}function c(H,g,p,D){H=v.subtract(fa,g,H);switch(p){case n.Axis.X:return p=m.cartesianToSpherical(H,fa)[2],v.set(D,-Math.sin(p),Math.cos(p),0);case n.Axis.Y:return H=m.cartesianToSpherical(H,fa),p=H[1],H=H[2],g=Math.sin(p),
v.set(D,-g*Math.cos(H),-g*Math.sin(H),Math.cos(p));case n.Axis.Z:return v.normalize(D,H)}}function h(H,g){g=v.subtract(ma,g,H);return v.length(g)-H[3]}function J(H,g,p,D){const P=h(H,g);H=c(H,g,n.Axis.Z,ma);p=v.scale(ma,H,p-P);return v.add(D,g,p)}function Z(H,g){g=v.squaredDistance(H,g);H=H[3];return g<=H*H}const ha=l.create(),fa=l.create(),ma=l.create();d=q();l=Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:h,angleToSilhouette:Y,axisAt:c,clear:K,closestPoint:N,closestPointOnSilhouette:t,
containsPoint:Z,copy:B,create:q,distanceToSilhouette:T,elevate:ea,fromCenterAndRadius:L,fromRadius:S,fromValues:la,getCenter:ca,getRadius:W,intersectRay:ka,intersectRayClosestSilhouette:e,intersectsRay:qa,projectPoint:V,setAltitudeAt:J,setExtent:ba,tmpSphere:d,wrap:E},Symbol.toStringTag,{value:"Module"}));a.altitudeAt=h;a.angleToSilhouette=Y;a.axisAt=c;a.clear=K;a.closestPoint=N;a.closestPointOnSilhouette=t;a.containsPoint=Z;a.copy=B;a.create=q;a.distanceToSilhouette=T;a.elevate=ea;a.fromCenterAndRadius=
L;a.fromRadius=S;a.fromValues=la;a.getCenter=ca;a.getRadius=W;a.intersectRay=ka;a.intersectRayClosestSilhouette=e;a.intersectsRay=qa;a.projectPoint=V;a.setAltitudeAt=J;a.setExtent=ba;a.sphere=l;a.tmpSphere=d;a.wrap=E})},"esri/geometry/support/Axis":function(){define(["exports"],function(a){a.Axis=void 0;var d=a.Axis||(a.Axis={});d[d.X=0]="X";d[d.Y=1]="Y";d[d.Z=2]="Z";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils",
"../../chunks/vec3","../../chunks/vec3f64"],function(a,d,b,m){const r=m.create(),w=m.create();a.angle=function(v,l){v=b.dot(v,l)/(b.length(v)*b.length(l));return-d.acosClamped(v)};a.angleAroundAxis=function(v,l,u){b.normalize(r,v);b.normalize(w,l);v=b.dot(r,w);v=d.acosClamped(v);l=b.cross(r,r,w);return 0>b.dot(l,u)?2*Math.PI-v:v};a.projectPoint=function(v,l,u){l=b.dot(v,l)/b.dot(v,v);return b.scale(u,v,l)};a.projectPointSignedLength=function(v,l){return b.dot(v,l)/b.length(v)};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(a,d){function b(m,r){r=d.getMetersPerUnitForSR(r);return m/(r*d.inchesPerMeter*96)}a.getExtentForScale=function(m,r){const w=m.extent;m=m.width-(m.padding?m.padding.left+m.padding.right:0);r=b(r,w.spatialReference);return w.clone().expand(r*m/w.width)};a.getResolutionForScale=b;a.getResolutionInMetersForScale=function(m){return m/(96*d.inchesPerMeter)};a.getScale=
function(m,r){r=r||m.extent;m=m.width;const w=d.getMetersPerUnitForSR(r&&r.spatialReference);return r&&m?r.width/m*w*d.inchesPerMeter*96:0};a.getScaleForResolution=function(m,r){r=d.getMetersPerUnitForSR(r);return m*r*d.inchesPerMeter*96};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),
function(a,d,b,m,r,w,v){function l(q,B){return q.elevationProvider?d.unwrapOr(q.elevationProvider.getElevation(B[0],B[1],B[2],q.renderCoordsHelper.spatialReference,"ground"),0):0}function u(q,B,L){if(!q.state.isGlobal||!q.stateManager.constraintsManager)return!1;const E=l(q,B);({far:q}=q.stateManager.constraintsManager.nearFarHeuristic.compute(B,L,q.renderDataExtent,E,O));q*=q;return b.squaredDistance(B,L)>q}const f={},n=m.create(),k=m.create(),C=m.create(),O={near:0,far:0};a.cameraOnContentAlongViewDirection=
function(q,B,L,E){const K=q.state.camera.clone();B&&L&&E&&(K.eye=B,K.center=L,K.up=E);B=K.ray;L=f[q.viewingMode];L||(L=v.newIntersector(q.state.viewingMode),L.options.backfacesTerrain=!q.state.isGlobal,L.options.invisibleTerrain=!0,f[q.viewingMode]=L);({isGlobal:E}=q.state);q.sceneIntersectionHelper.intersectRay(B,L,k)&&!u(q,B.origin,k)?B=!0:!q.renderCoordsHelper.intersectManifold(B,0,k)||u(q,B.origin,k)?E?(L=r.getReferenceEllipsoid(q.spatialReference).radius,L=b.dot(B.origin,B.origin)-L*L,b.scale(k,
B.direction,(0<L?Math.sqrt(L)/3:1)/b.length(B.direction)),b.add(k,k,B.origin),B=!0):B=!1:B=!0;B||b.copy(k,K.center);L=q.state.constraints;E=L.minimumPoiDistance;b.squaredDistance(K.eye,k)<E&&(B=L.collision.enabled,b.copy(C,K.viewForward),b.scale(C,C,E),B?K.eye=b.subtract(n,k,C):b.add(k,K.eye,C),q=q.renderCoordsHelper,E=q.getAltitude(K.eye),L=L.collision.elevationMargin,B&&E<L&&(b.subtract(C,k,K.eye),K.eye=q.setAltitude(n,L,K.eye),b.add(k,K.eye,C)));K.center=k;return K};a.eyeWithinExtent=function(q,
B,L,E){return d.isSome(q.renderCoordsHelper.fromRenderCoords(B.eye,n,E))&&w.containsPoint(L,n)};a.surfaceElevationBelowRenderLocation=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/ray ../../../ViewingMode ./IntersectorInterfaces ./IntersectorTarget ./intersectorUtils ./verticalOffsetUtils".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C,O,q){let B=function(){function ca(ea){this.options=new k.IntersectorOptions;this._results=new L;this.transform=new q.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=f.create();this._rayEnd=v.create();this._rayBeginTransformed=v.create();this._rayEndTransformed=v.create();this.viewingMode=null==ea?n.ViewingMode.Global:ea}var la=ca.prototype;la.reset=function(ea,ba,ka){this.resetWithRay(f.fromPoints(ea,ba,this._ray),ka)};la.resetWithRay=
function(ea,ba){this.camera=ba;ea!==this._ray&&f.copy(ea,this._ray);0!==this.options.verticalOffset?this.viewingMode===n.ViewingMode.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;w.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)};la.intersect=function(ea=null,ba,ka,qa,e){this.point=ba;this.filterPredicate=qa;this.tolerance=null==ka?1E-5:ka;ba=q.getVerticalOffsetObject3D(this.verticalOffset);
if(b.isSome(ea)&&0<ea.length){const t=e?N=>{e(N)&&this.intersectObject(N)}:N=>{this.intersectObject(N)};for(const N of ea)ea=N.getSpatialQueryAccelerator&&N.getSpatialQueryAccelerator(),b.isSome(ea)?(b.isSome(ba)?ea.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,t,ba):ea.forEachAlongRay(this._ray.origin,this._ray.direction,t),this.options.selectionMode&&this.options.hud&&ea.forEachDegenerateObject(t)):N.objects.forAll(V=>t(V))}this.sortResults()};la.intersectObject=function(ea){const ba=
ea.geometries;if(ba){var ka=ea.transformation,qa=q.getVerticalOffsetObject3D(this.verticalOffset);for(const e of ba){if(!e.visible)continue;const {material:t,id:N}=e;this.transform.setAndInvalidateLazyTransforms(ka,e.shaderTransformation);w.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);w.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const V=this.transform.transform;b.isSome(qa)&&(qa.objectTransform=this.transform);t.intersect(e,this.transform.transform,
this,this._rayBeginTransformed,this._rayEndTransformed,(T,Y,c,h,J,Z)=>{if(0<=T&&(!b.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEnd,T))){var ha=h?this._results.hud:this._results,fa=h?ma=>{const H=new C.HudTarget(ea,N,c,Z);ma.set(k.IntersectorType.HUD,H,T,Y,r.IDENTITY,J)}:ma=>ma.set(k.IntersectorType.OBJECT,{object:ea,geometryId:N,triangleNr:c},T,Y,V,J);(null==ha.min.drapedLayerOrder||J>=ha.min.drapedLayerOrder)&&(null==ha.min.dist||T<ha.min.dist)&&fa(ha.min);this.options.store!==
k.StoreResults.MIN&&(null==ha.max.drapedLayerOrder||J<ha.max.drapedLayerOrder)&&(null==ha.max.dist||T>ha.max.dist)&&fa(ha.max);this.options.store===k.StoreResults.ALL&&(h?(h=new K(this._ray),fa(h),this._results.hud.all.push(h)):(h=new E(this._ray),fa(h),this._results.all.push(h)))}})}}};la.sortResults=function(ea=this._results.all){ea.sort((ba,ka)=>ba.dist!==ka.dist?b.unwrapOr(ba.dist,0)-b.unwrapOr(ka.dist,0):ba.drapedLayerOrder!==ka.drapedLayerOrder?b.unwrapOr(ba.drapedLayerOrder,Number.MAX_VALUE)-
b.unwrapOr(ka.drapedLayerOrder,Number.MAX_VALUE):b.unwrapOr(ka.drapedLayerGraphicOrder,Number.MIN_VALUE)-b.unwrapOr(ba.drapedLayerGraphicOrder,Number.MIN_VALUE))};d._createClass(ca,[{key:"results",get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",get:function(){return this._rayEnd}}]);return ca}(),L=function(){function ca(){this.min=new E(f.create());this.max=new E(f.create());this.hud={min:new K(f.create()),
max:new K(f.create()),all:[]};this.ground=new E(f.create());this.all=[]}ca.prototype.init=function(la){this.min.init(la);this.max.init(la);this.ground.init(la);this.all.length=0;this.hud.min.init(la);this.hud.max.init(la);this.hud.all.length=0};return ca}(),E=function(){function ca(ea){this.intersector=k.IntersectorType.OBJECT;this.normal=v.create();this.transformation=r.create();this._ray=f.create();this.init(ea)}var la=ca.prototype;la.getIntersectionPoint=function(ea){if(!O.isValidIntersectorResult(this))return!1;
w.scale(S,this.ray.direction,this.dist);w.add(ea,this.ray.origin,S);return!0};la.getTransformedNormal=function(ea){w.copy(W,this.normal);W[3]=0;l.transformMat4(W,W,this.transformation);w.copy(ea,W);return w.normalize(ea,ea)};la.init=function(ea){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=null;this.intersector=k.IntersectorType.OBJECT;f.copy(ea,this._ray)};la.set=function(ea,ba,ka,qa,e,t,N){this.intersector=ea;this.dist=ka;w.copy(this.normal,b.unwrapOr(qa,v.UNIT_Z));m.copy(this.transformation,
b.unwrapOr(e,r.IDENTITY));this.target=ba;this.drapedLayerOrder=t;this.drapedLayerGraphicOrder=N};la.copy=function(ea){f.copy(ea.ray,this._ray);this.intersector=ea.intersector;this.dist=ea.dist;this.target=ea.target;this.drapedLayerOrder=ea.drapedLayerOrder;this.drapedLayerGraphicOrder=ea.drapedLayerGraphicOrder;w.copy(this.normal,ea.normal);m.copy(this.transformation,ea.transformation)};d._createClass(ca,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return b.isSome(this.dist)?
(w.scale(S,this.ray.direction,this.dist),w.length(S)):null}}]);return ca}(),K=function(ca){function la(){var ea=ca.apply(this,arguments)||this;ea.intersector=k.IntersectorType.HUD;return ea}d._inheritsLoose(la,ca);return la}(E);const S=v.create(),W=u.create();a.DEFAULT_TOLERANCE=1E-5;a.newIntersector=function(ca){return new B(ca)};a.newIntersectorResult=function(ca){return new E(ca)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],
function(a){a.IntersectorType=void 0;(function(d){d[d.OBJECT=0]="OBJECT";d[d.HUD=1]="HUD";d[d.TERRAIN=2]="TERRAIN";d[d.OVERLAY=3]="OVERLAY";d[d.I3S=4]="I3S";d[d.PCL=5]="PCL";d[d.LOD=6]="LOD";d[d.VOXEL=7]="VOXEL"})(a.IntersectorType||(a.IntersectorType={}));a.StoreResults=void 0;(function(d){d[d.MIN=0]="MIN";d[d.MINMAX=1]="MINMAX";d[d.ALL=2]="ALL"})(a.StoreResults||(a.StoreResults={}));a.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=
!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.filteredLayerUids=[];this.store=a.StoreResults.ALL};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorTarget":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/vec3f64"],function(a,d,b,m){let r=function(f,n,k){this.object=f;this.geometryId=n;this.triangleNr=k},w=function(f){function n(k,C,O,q){k=
f.call(this,k,C,O)||this;k.center=b.isSome(q)?m.clone(q):null;return k}d._inheritsLoose(n,f);return n}(r),v=function(f){function n(){return f.apply(this,arguments)||this}d._inheritsLoose(n,f);return n}(w),l=function(f){this.layerUid=f},u=function(f){function n(k,C){k=f.call(this,k)||this;k.graphicUid=C;return k}d._inheritsLoose(n,f);return n}(l);a.Graphic3DTarget=u;a.HudTarget=w;a.LayerTarget=l;a.ObjectTarget=r;a.ValidHudTarget=v;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("exports ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ./IntersectorInterfaces".split(" "),
function(a,d,b,m,r,w){function v(u){return d.isSome(u)&&d.isSome(u.dist)}const l=m.create();a.isHudIntersectorResult=function(u){return v(u)&&u.intersector===w.IntersectorType.HUD&&!!u.target&&"center"in u.target&&d.isSome(u.target.center)};a.isObjectIntersectorResult=function(u){return v(u)&&u.intersector===w.IntersectorType.OBJECT&&!!u.target};a.isValidIntersectorResult=v;a.sliceFilterPredicate=function(u){return(f,n,k)=>{b.lerp(l,f,n,k);return!r.extrusionContainsPoint(u,l)}};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/Axis ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,d,b,m,r,w,v,l,u,f,n,k,C,O,q){function B(z=A){return{plane:k.create(z.plane),origin:u.clone(z.origin),basis1:u.clone(z.basis1),
basis2:u.clone(z.basis2)}}function L(z,F,Q){const R=oa.get();R.origin=z;R.basis1=F;R.basis2=Q;R.plane=k.wrap(0,0,0,0);W(R);return R}function E(z,F=B()){return S(z.origin,z.basis1,z.basis2,F)}function K(z,F){l.copy(F.origin,z.origin);l.copy(F.basis1,z.basis1);l.copy(F.basis2,z.basis2);k.copy(F.plane,z.plane)}function S(z,F,Q,R=B()){l.copy(R.origin,z);l.copy(R.basis1,F);l.copy(R.basis2,Q);W(R);1E-6<Math.abs(l.dot(R.basis1,R.basis2)/(l.length(R.basis1)*l.length(R.basis2)))&&x.warn("fromValues()","Provided basis vectors are not perpendicular");
1E-6<Math.abs(l.dot(R.basis1,H(R)))&&x.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-l.dot(H(R),R.origin)-R.plane[3])&&x.warn("fromValues()","Plane offset is not consistent with plane origin");return R}function W(z){k.fromVectorsAndPoint(z.basis2,z.basis1,z.origin,z.plane)}function ca(z,F,Q){z!==Q&&E(z,Q);z=l.scale(q.sv3d.get(),H(z),F);l.add(Q.origin,Q.origin,z);Q.plane[3]-=F;return Q}function la(z,F,Q){ea(F,Q);ca(Q,J(z,z.origin),Q);return Q}function ea(z,
F=B()){const Q=(z[2]-z[0])/2,R=(z[3]-z[1])/2;l.set(F.origin,z[0]+Q,z[1]+R,0);l.set(F.basis1,Q,0,0);l.set(F.basis2,0,R,0);k.fromValues(0,0,1,0,F.plane);return F}function ba(z,F,Q){return k.intersectRay(z.plane,F,Q)?g(z,Q):!1}function ka(z,F,Q){if(ba(z,F,Q))return Q;z=qa(z,F,q.sv3d.get());l.add(Q,F.origin,l.scale(q.sv3d.get(),F.direction,l.distance(F.origin,z)/l.length(F.direction)));return Q}function qa(z,F,Q){const R=U.get();var ra=U.get();P(z,F,R,ra);ra=Number.POSITIVE_INFINITY;for(const ua of aa){var ta=
D(z,ua,ia.get());const wa=q.sv3d.get();k.intersectLineSegment(R,ta,wa)&&(ta=l.direction(q.sv3d.get(),F.origin,wa),ta=Math.abs(m.acosClamped(l.dot(F.direction,ta))),ta<ra&&(ra=ta,l.copy(Q,wa)))}return ra===Number.POSITIVE_INFINITY?e(z,F,Q):Q}function e(z,F,Q){if(ba(z,F,Q))return Q;const R=U.get(),ra=U.get();P(z,F,R,ra);let ta=Number.POSITIVE_INFINITY;for(const wa of aa){var ua=D(z,wa,ia.get());const Aa=q.sv3d.get();k.intersectLineSegmentClamp(R,ua,Aa)&&(ua=C.distance2(F,Aa),k.isPointInside(ra,Aa)&&
ua<ta&&(ta=ua,l.copy(Q,Aa)))}V(z,F.origin)<ta&&t(z,F.origin,Q);return Q}function t(z,F,Q){var R=k.projectPoint(z.plane,F,q.sv3d.get());F=n.projectPointClamp(p(z,z.basis1),R,-1,1,q.sv3d.get());R=n.projectPointClamp(p(z,z.basis2),R,-1,1,q.sv3d.get());l.subtract(Q,l.add(q.sv3d.get(),F,R),z.origin);return Q}function N(z,F,Q){const {origin:R,basis1:ra,basis2:ta}=z,ua=l.subtract(q.sv3d.get(),F,R);F=O.projectPointSignedLength(ra,ua);const wa=O.projectPointSignedLength(ta,ua);z=O.projectPointSignedLength(H(z),
ua);return l.set(Q,F,wa,z)}function V(z,F){F=N(z,F,q.sv3d.get());const {basis1:Q,basis2:R}=z;z=l.length(Q);var ra=l.length(R);z=Math.max(Math.abs(F[0])-z,0);ra=Math.max(Math.abs(F[1])-ra,0);F=F[2];return z*z+ra*ra+F*F}function T(z,F){return Math.sqrt(V(z,F))}function Y(z,F){let Q=Number.NEGATIVE_INFINITY;for(const ra of aa){var R=D(z,ra,ia.get());R=n.distance2(R,F);R>Q&&(Q=R)}return Math.sqrt(Q)}function c(z,F){return k.isPointInside(z.plane,F)&&g(z,F)}function h(z,F,Q,R){switch(Q){case f.Axis.X:l.copy(R,
z.basis1);l.normalize(R,R);break;case f.Axis.Y:l.copy(R,z.basis2);l.normalize(R,R);break;case f.Axis.Z:l.copy(R,H(z))}return R}function J(z,F){const Q=-z.plane[3];return O.projectPointSignedLength(H(z),F)-Q}function Z(z,F,Q,R){const ra=J(z,F);z=l.scale(ja,H(z),Q-ra);l.add(R,F,z);return R}function ha(z,F){return l.exactEquals(z.basis1,F.basis1)&&l.exactEquals(z.basis2,F.basis2)&&l.exactEquals(z.origin,F.origin)}function fa(z,F,Q){z!==Q&&E(z,Q);w.invert(G,F);w.transpose(G,G);l.transformMat4(Q.basis1,
z.basis1,G);l.transformMat4(Q.basis2,z.basis2,G);l.transformMat4(k.normal(Q.plane),k.normal(z.plane),G);l.transformMat4(Q.origin,z.origin,F);k.setOffsetFromPoint(Q.plane,Q.plane,Q.origin);return Q}function ma(z,F,Q,R){z!==R&&E(z,R);w.fromRotation(y,F,Q);l.transformMat4(R.basis1,z.basis1,y);l.transformMat4(R.basis2,z.basis2,y);W(R);return R}function H(z){return k.normal(z.plane)}function g(z,F){const Q=l.subtract(q.sv3d.get(),F,z.origin);F=l.squaredLength(z.basis1);const R=l.squaredLength(z.basis2),
ra=l.dot(z.basis1,Q);z=l.dot(z.basis2,Q);return 0>-ra-F&&0>ra-F&&0>-z-R&&0>z-R}function p(z,F){const Q=ia.get();l.copy(Q.origin,z.origin);l.copy(Q.vector,F);return Q}function D(z,F,Q){const {basis1:R,basis2:ra,origin:ta}=z;z=l.scale(q.sv3d.get(),R,F.origin[0]);const ua=l.scale(q.sv3d.get(),ra,F.origin[1]);l.add(Q.origin,z,ua);l.add(Q.origin,Q.origin,ta);z=l.scale(q.sv3d.get(),R,F.direction[0]);F=l.scale(q.sv3d.get(),ra,F.direction[1]);l.scale(Q.vector,l.add(z,z,F),2);return Q}function P(z,F,Q,R){z=
H(z);k.fromVectorsAndPoint(z,F.direction,F.origin,Q);k.fromVectorsAndPoint(k.normal(Q),z,F.origin,R)}const x=b.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");d=function(){this.plane=k.create();this.origin=u.create();this.basis1=u.create();this.basis2=u.create()};const A={plane:k.create(),origin:u.fromValues(0,0,0),basis1:u.fromValues(1,0,0),basis2:u.fromValues(0,1,0)},U=new r.ObjectStack(k.create),ia=new r.ObjectStack(n.create),ja=u.create(),oa=new r.ObjectStack(()=>B()),aa=[{origin:[-1,
-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],G=v.create(),y=v.create();r=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:d,UP:A,altitudeAt:J,axisAt:h,closestPoint:e,closestPointOnSilhouette:qa,copy:E,copyWithoutVerify:K,create:B,distance:T,distance2:V,distanceToSilhouette:Y,elevate:ca,equals:ha,extrusionContainsPoint:c,fromAABoundingRect:ea,fromValues:S,intersectRay:ba,intersectRayClosestSilhouette:ka,
normal:H,projectPoint:t,projectPointLocal:N,rotate:ma,setAltitudeAt:Z,setExtent:la,transform:fa,updateUnboundedPlane:W,wrap:L},Symbol.toStringTag,{value:"Module"}));a.BoundedPlaneClass=d;a.UP=A;a.altitudeAt=J;a.axisAt=h;a.boundedPlane=r;a.closestPoint=e;a.closestPointOnSilhouette=qa;a.copy=E;a.copyWithoutVerify=K;a.create=B;a.distance=T;a.distance2=V;a.distanceToSilhouette=Y;a.elevate=ca;a.equals=ha;a.extrusionContainsPoint=c;a.fromAABoundingRect=ea;a.fromValues=S;a.intersectRay=ba;a.intersectRayClosestSilhouette=
ka;a.normal=H;a.projectPoint=t;a.projectPointLocal=N;a.rotate=ma;a.setAltitudeAt=Z;a.setExtent=la;a.transform=fa;a.updateUnboundedPlane=W;a.wrap=L})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,d,b,m,r,w){function v(q){return q?{origin:r.clone(q.origin),vector:r.clone(q.vector)}:{origin:r.create(),vector:r.create()}}function l(q,B){const L=O.get();L.origin=q;
L.vector=B;return L}function u(q,B,L=v()){m.copy(L.origin,q);m.copy(L.vector,B);return L}function f(q,B){B=m.subtract(w.sv3d.get(),B,q.origin);var L=m.dot(q.vector,B);const E=m.dot(q.vector,q.vector);L=d.clamp(L/E,0,1);q=m.subtract(w.sv3d.get(),m.scale(w.sv3d.get(),q.vector,L),B);return m.dot(q,q)}function n(q,B,L,E,K){const {vector:S,origin:W}=q;B=m.subtract(w.sv3d.get(),B,W);B=m.dot(S,B)/m.squaredLength(S);m.scale(K,S,d.clamp(B,L,E));return m.add(K,K,q.origin)}function k(q,B,L,E){const K=q.origin;
var S=m.add(w.sv3d.get(),K,q.vector);q=B.origin;var W=m.add(w.sv3d.get(),q,B.vector),ca=w.sv3d.get();B=w.sv3d.get();ca[0]=K[0]-q[0];ca[1]=K[1]-q[1];ca[2]=K[2]-q[2];B[0]=W[0]-q[0];B[1]=W[1]-q[1];B[2]=W[2]-q[2];if(1E-6>Math.abs(B[0])&&1E-6>Math.abs(B[1])&&1E-6>Math.abs(B[2]))return!1;W=w.sv3d.get();W[0]=S[0]-K[0];W[1]=S[1]-K[1];W[2]=S[2]-K[2];if(1E-6>Math.abs(W[0])&&1E-6>Math.abs(W[1])&&1E-6>Math.abs(W[2]))return!1;S=ca[0]*B[0]+ca[1]*B[1]+ca[2]*B[2];var la=B[0]*W[0]+B[1]*W[1]+B[2]*W[2];const ea=B[0]*
B[0]+B[1]*B[1]+B[2]*B[2],ba=(W[0]*W[0]+W[1]*W[1]+W[2]*W[2])*ea-la*la;if(1E-6>Math.abs(ba))return!1;ca=(S*la-(ca[0]*W[0]+ca[1]*W[1]+ca[2]*W[2])*ea)/ba;S=(S+la*ca)/ea;L&&(ca=d.clamp(ca,0,1),S=d.clamp(S,0,1));L=w.sv3d.get();la=w.sv3d.get();L[0]=K[0]+ca*W[0];L[1]=K[1]+ca*W[1];L[2]=K[2]+ca*W[2];la[0]=q[0]+S*B[0];la[1]=q[1]+S*B[1];la[2]=q[2]+S*B[2];E.tA=ca;E.tB=S;E.pA=L;E.pB=la;E.distance2=m.squaredDistance(L,la);return!0}const C={tA:0,tB:0,pA:r.create(),pB:r.create(),distance2:0},O=new b.ObjectStack(()=>
v());a.closestLineSegmentDistance2=function(q,B){return k(q,B,!0,C)?C.distance2:null};a.closestLineSegmentPoint=function(q,B,L){return k(q,B,!0,C)?(m.copy(L,C.pA),!0):!1};a.closestRayDistance2=function(q,B){if(k(q,l(B.origin,B.direction),!1,C)){const {tA:L,pB:E,distance2:K}=C;if(0<=L&&1>=L)return K;if(0>L)return m.squaredDistance(q.origin,E);if(1<L)return m.squaredDistance(m.add(w.sv3d.get(),q.origin,q.vector),E)}return null};a.copy=function(q,B=v()){return u(q.origin,q.vector,B)};a.create=v;a.distance=
function(q,B){return Math.sqrt(f(q,B))};a.distance2=f;a.fromPoints=function(q,B,L=v()){m.copy(L.origin,q);m.subtract(L.vector,B,q);return L};a.fromValues=u;a.pointAt=function(q,B,L){return m.add(L,q.origin,m.scale(L,q.vector,B))};a.projectPoint=function(q,B,L){return n(q,B,0,1,L)};a.projectPointClamp=n;a.wrap=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/sphere".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C){let O=function(){function ka(){this._transform=v.create();this._transformInverse=new q({value:this._transform},w.invert,v.create);this._transformInverseTranspose=new q(this._transformInverse,w.transpose,v.create);this._transformTranspose=new q({value:this._transform},w.transpose,v.create);this._transformInverseRotation=new q({value:this._transform},m.normalFromMat4Legacy,r.create)}var qa=ka.prototype;qa._invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};qa.setTransformMatrix=function(e){w.copy(this._transform,e)};qa.multiplyTransform=function(e){w.multiply(this._transform,this._transform,e)};qa.set=function(e){w.copy(this._transform,e);this._invalidateLazyTransforms()};qa.setAndInvalidateLazyTransforms=function(e,t){this.setTransformMatrix(e);this.multiplyTransform(t);this._invalidateLazyTransforms()};d._createClass(ka,
[{key:"transform",get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return ka}(),q=function(){function ka(qa,e,t){this._original=qa;this._update=e;this._dirty=!0;this._transform=t()}ka.prototype.invalidate=
function(){this._dirty=!0};d._createClass(ka,[{key:"value",get:function(){this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1);return this._transform}}]);return ka}(),B=function(){function ka(e=0){this.offset=e;this.tmpVertex=k.create()}var qa=ka.prototype;qa.applyToVertex=function(e,t,N){const V=e+this.localOrigin[0],T=t+this.localOrigin[1],Y=N+this.localOrigin[2],c=this.offset/Math.sqrt(V*V+T*T+Y*Y);this.tmpVertex[0]=e+V*c;this.tmpVertex[1]=t+T*c;this.tmpVertex[2]=N+
Y*c;return this.tmpVertex};qa.applyToAabb=function(e){for(var t=0;3>t;++t)L[t]=e[0+t]+this.localOrigin[t],E[t]=e[3+t]+this.localOrigin[t],K[t]=L[t];t=this.applyToVertex(L[0],L[1],L[2]);for(var N=0;3>N;++N)e[N]=t[N],e[N+3]=t[N];t=T=>{T=this.applyToVertex(T[0],T[1],T[2]);for(let Y=0;3>Y;++Y)e[Y+0]=Math.min(e[Y+0],T[Y]),e[Y+3]=Math.max(e[Y+3],T[Y])};for(N=1;8>N;++N){for(var V=0;3>V;++V)K[V]=0===(N&1<<V)?L[V]:E[V];t(K)}N=0;for(V=0;3>V;++V)0>L[V]*E[V]&&(N|=1<<V);if(0!==N&&7!==N)for(V=0;8>V;++V)if(0===
(N&V)){for(let T=0;3>T;++T)K[T]=N[T]?0:0!==(V&1<<T)?L[T]:E[T];t(K)}for(t=0;3>t;++t)e[t+0]-=this.localOrigin[t],e[t+3]-=this.localOrigin[t];return e};return ka}();const L=k.create(),E=k.create(),K=k.create();let S=function(){function ka(e=0){this.componentLocalOriginLength=0;this._tmpVertex=k.create();this._mbs=C.create();this._obb={center:k.create(),halfSize:n.create(),quaternion:null};this._offset=this._totalOffset=0;this._resetOffset(e)}var qa=ka.prototype;qa._resetOffset=function(e){this._totalOffset=
this._offset=e};qa.applyToVertex=function(e,t,N){const V=N+this.componentLocalOriginLength,T=this._totalOffset/Math.sqrt(e*e+t*t+V*V);this._tmpVertex[0]=e+e*T;this._tmpVertex[1]=t+t*T;this._tmpVertex[2]=N+V*T;return this._tmpVertex};qa.applyToAabb=function(e){const t=e[0],N=e[1],V=e[2]+this.componentLocalOriginLength,T=e[3],Y=e[4],c=e[5]+this.componentLocalOriginLength;var h=0>t*T?0:Math.min(Math.abs(t),Math.abs(T)),J=0>N*Y?0:Math.min(Math.abs(N),Math.abs(Y)),Z=0>V*c?0:Math.min(Math.abs(V),Math.abs(c));
h=Math.sqrt(h*h+J*J+Z*Z);if(h<this._totalOffset)return e[0]-=0>t?this._totalOffset:0,e[1]-=0>N?this._totalOffset:0,e[2]-=0>V?this._totalOffset:0,e[3]+=0<T?this._totalOffset:0,e[4]+=0<Y?this._totalOffset:0,e[5]+=0<c?this._totalOffset:0,e;J=Math.max(Math.abs(t),Math.abs(T));Z=Math.max(Math.abs(N),Math.abs(Y));const ha=Math.max(Math.abs(V),Math.abs(c));J=this._totalOffset/Math.sqrt(J*J+Z*Z+ha*ha);h=this._totalOffset/h;e[0]+=t*(0<t?J:h);e[1]+=N*(0<N?J:h);e[2]+=V*(0<V?J:h);e[3]+=T*(0>T?J:h);e[4]+=Y*(0>
Y?J:h);e[5]+=c*(0>c?J:h);return e};qa.applyToMbs=function(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),N=this._totalOffset/t;this._mbs[0]=e[0]+e[0]*N;this._mbs[1]=e[1]+e[1]*N;this._mbs[2]=e[2]+e[2]*N;this._mbs[3]=e[3]+e[3]*this._totalOffset/t;return this._mbs};qa.applyToObb=function(e){var t=e.center;const N=this._totalOffset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this._obb.center[0]=t[0]+t[0]*N;this._obb.center[1]=t[1]+t[1]*N;this._obb.center[2]=t[2]+t[2]*N;f.transformQuat(this._obb.halfSize,
e.halfSize,e.quaternion);f.add(this._obb.halfSize,this._obb.halfSize,e.center);t=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);this._obb.halfSize[0]+=this._obb.halfSize[0]*t;this._obb.halfSize[1]+=this._obb.halfSize[1]*t;this._obb.halfSize[2]+=this._obb.halfSize[2]*t;f.subtract(this._obb.halfSize,this._obb.halfSize,e.center);l.conjugate(ba,e.quaternion);f.transformQuat(this._obb.halfSize,
this._obb.halfSize,ba);this._obb.halfSize[0]*=0>this._obb.halfSize[0]?-1:1;this._obb.halfSize[1]*=0>this._obb.halfSize[1]?-1:1;this._obb.halfSize[2]*=0>this._obb.halfSize[2]?-1:1;this._obb.quaternion=e.quaternion;return this._obb};d._createClass(ka,[{key:"offset",get:function(){return this._offset},set:function(e){this._resetOffset(e)}},{key:"componentOffset",set:function(e){this._totalOffset=this._offset+e}},{key:"localOrigin",set:function(e){this.componentLocalOriginLength=Math.sqrt(e[0]*e[0]+e[1]*
e[1]+e[2]*e[2])}}]);return ka}(),W=function(){function ka(e=0){this.offset=e;this.sphere=C.create();this.tmpVertex=k.create()}var qa=ka.prototype;qa.applyToVertex=function(e,t,N){const V=this.objectTransform.transform;let T=V[0]*e+V[4]*t+V[8]*N+V[12],Y=V[1]*e+V[5]*t+V[9]*N+V[13];e=V[2]*e+V[6]*t+V[10]*N+V[14];t=this.offset/Math.sqrt(T*T+Y*Y+e*e);T+=T*t;Y+=Y*t;e+=e*t;t=this.objectTransform.inverse;this.tmpVertex[0]=t[0]*T+t[4]*Y+t[8]*e+t[12];this.tmpVertex[1]=t[1]*T+t[5]*Y+t[9]*e+t[13];this.tmpVertex[2]=
t[2]*T+t[6]*Y+t[10]*e+t[14];return this.tmpVertex};qa.applyToMinMax=function(e,t){const N=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*N;e[1]+=e[1]*N;e[2]+=e[2]*N;e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e;t[1]+=t[1]*e;t[2]+=t[2]*e};qa.applyToAabb=function(e){var t=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*t;e[1]+=e[1]*t;e[2]+=e[2]*t;t=this.offset/Math.sqrt(e[3]*e[3]+e[4]*e[4]+e[5]*e[5]);e[3]+=e[3]*t;e[4]+=e[4]*t;e[5]+=e[5]*t;return e};
qa.applyToBoundingSphere=function(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),N=this.offset/t;this.sphere[0]=e[0]+e[0]*N;this.sphere[1]=e[1]+e[1]*N;this.sphere[2]=e[2]+e[2]*N;this.sphere[3]=e[3]+e[3]*this.offset/t;return this.sphere};return ka}();const ca=new W,la=new S,ea=new B,ba=u.create();a.I3SVerticalOffsetGlobalViewingMode=S;a.IntersectorTransform=O;a.Object3DVerticalOffsetGlobalViewingMode=W;a.TERRAIN_ID="terrain";a.TerrainVerticalOffsetGlobalViewingMode=B;a.getVerticalOffsetI3S=function(ka){return b.isSome(ka)?
(la.offset=ka,la):null};a.getVerticalOffsetObject3D=function(ka){return b.isSome(ka)?(ca.offset=ka,ca):null};a.getVerticalOffsetTerrain=function(ka){return b.isSome(ka)?(ea.offset=ka,ea):null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,d,b,m,r,w,v){function l(g){g[0]=0;g[1]=0;g[2]=0;g[3]=1;return g}function u(g,p,D){D*=.5;const P=Math.sin(D);g[0]=P*p[0];g[1]=
P*p[1];g[2]=P*p[2];g[3]=Math.cos(D);return g}function f(g,p){const D=2*Math.acos(p[3]),P=Math.sin(D/2);P>r.getEpsilon()?(g[0]=p[0]/P,g[1]=p[1]/P,g[2]=p[2]/P):(g[0]=1,g[1]=0,g[2]=0);return D}function n(g,p,D){const P=p[0],x=p[1],A=p[2];p=p[3];const U=D[0],ia=D[1],ja=D[2];D=D[3];g[0]=P*D+p*U+x*ja-A*ia;g[1]=x*D+p*ia+A*U-P*ja;g[2]=A*D+p*ja+P*ia-x*U;g[3]=p*D-P*U-x*ia-A*ja;return g}function k(g,p,D){D*=.5;const P=p[0],x=p[1],A=p[2];p=p[3];const U=Math.sin(D);D=Math.cos(D);g[0]=P*D+p*U;g[1]=x*D+A*U;g[2]=
A*D-x*U;g[3]=p*D-P*U;return g}function C(g,p,D){D*=.5;const P=p[0],x=p[1],A=p[2];p=p[3];const U=Math.sin(D);D=Math.cos(D);g[0]=P*D-A*U;g[1]=x*D+p*U;g[2]=A*D+P*U;g[3]=p*D-x*U;return g}function O(g,p,D){D*=.5;const P=p[0],x=p[1],A=p[2];p=p[3];const U=Math.sin(D);D=Math.cos(D);g[0]=P*D+x*U;g[1]=x*D-P*U;g[2]=A*D+p*U;g[3]=p*D-A*U;return g}function q(g,p){const D=p[0],P=p[1];p=p[2];g[0]=D;g[1]=P;g[2]=p;g[3]=Math.sqrt(Math.abs(1-D*D-P*P-p*p));return g}function B(g,p,D,P){const x=p[0],A=p[1],U=p[2];p=p[3];
let ia=D[0],ja=D[1],oa=D[2];D=D[3];let aa;let G;var y=x*ia+A*ja+U*oa+p*D;0>y&&(y=-y,ia=-ia,ja=-ja,oa=-oa,D=-D);1-y>r.getEpsilon()?(aa=Math.acos(y),G=Math.sin(aa),y=Math.sin((1-P)*aa)/G,P=Math.sin(P*aa)/G):y=1-P;g[0]=y*x+P*ia;g[1]=y*A+P*ja;g[2]=y*U+P*oa;g[3]=y*p+P*D;return g}function L(g){var p=r.RANDOM,D=p();const P=p();p=p();const x=Math.sqrt(1-D);D=Math.sqrt(D);g[0]=x*Math.sin(2*Math.PI*P);g[1]=x*Math.cos(2*Math.PI*P);g[2]=D*Math.sin(2*Math.PI*p);g[3]=D*Math.cos(2*Math.PI*p);return g}function E(g,
p){const D=p[0],P=p[1],x=p[2];p=p[3];var A=D*D+P*P+x*x+p*p;A=A?1/A:0;g[0]=-D*A;g[1]=-P*A;g[2]=-x*A;g[3]=p*A;return g}function K(g,p){g[0]=-p[0];g[1]=-p[1];g[2]=-p[2];g[3]=p[3];return g}function S(g,p){var D=p[0]+p[4]+p[8];if(0<D)D=Math.sqrt(D+1),g[3]=.5*D,D=.5/D,g[0]=(p[5]-p[7])*D,g[1]=(p[6]-p[2])*D,g[2]=(p[1]-p[3])*D;else{let P=0;p[4]>p[0]&&(P=1);p[8]>p[3*P+P]&&(P=2);const x=(P+1)%3,A=(P+2)%3;D=Math.sqrt(p[3*P+P]-p[3*x+x]-p[3*A+A]+1);g[P]=.5*D;D=.5/D;g[3]=(p[3*x+A]-p[3*A+x])*D;g[x]=(p[3*x+P]+p[3*
P+x])*D;g[A]=(p[3*A+P]+p[3*P+A])*D}return g}function W(g,p,D,P){var x=.5*Math.PI/180;p*=x;D*=x;P*=x;x=Math.sin(p);p=Math.cos(p);const A=Math.sin(D);D=Math.cos(D);const U=Math.sin(P);P=Math.cos(P);g[0]=x*D*P-p*A*U;g[1]=p*A*P+x*D*U;g[2]=p*D*U-x*A*P;g[3]=p*D*P+x*A*U;return g}function ca(g){return"quat("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function la(g,p,D){const P=w.dot(p,D);if(-.999999>P)return w.cross(J,Z,p),1E-6>w.len(J)&&w.cross(J,ha,p),w.normalize(J,J),u(g,J,Math.PI),g;if(.999999<P)return g[0]=
0,g[1]=0,g[2]=0,g[3]=1,g;w.cross(J,p,D);g[0]=J[0];g[1]=J[1];g[2]=J[2];g[3]=1+P;return c(g,g)}function ea(g,p,D,P,x,A){B(fa,p,x,A);B(ma,D,P,A);B(g,fa,ma,2*A*(1-A));return g}function ba(g,p,D,P){const x=H;x[0]=D[0];x[3]=D[1];x[6]=D[2];x[1]=P[0];x[4]=P[1];x[7]=P[2];x[2]=-p[0];x[5]=-p[1];x[8]=-p[2];return c(g,S(g,x))}const ka=v.copy,qa=v.set,e=v.add,t=v.scale,N=v.dot,V=v.lerp,T=v.length,Y=v.squaredLength,c=v.normalize,h=v.exactEquals;v=v.equals;const J=m.create(),Z=m.fromValues(1,0,0),ha=m.fromValues(0,
1,0),fa=b.create(),ma=b.create(),H=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,add:e,calculateW:q,conjugate:K,copy:ka,dot:N,equals:v,exactEquals:h,fromEuler:W,fromMat3:S,getAxisAngle:f,identity:l,invert:E,len:T,length:T,lerp:V,mul:n,multiply:n,normalize:c,random:L,rotateX:k,rotateY:C,rotateZ:O,rotationTo:la,scale:t,set:qa,setAxes:ba,setAxisAngle:u,slerp:B,sqlerp:ea,sqrLen:Y,squaredLength:Y,str:ca},Symbol.toStringTag,{value:"Module"}));a.add=e;a.calculateW=q;a.conjugate=K;a.copy=
ka;a.dot=N;a.equals=v;a.exactEquals=h;a.fromEuler=W;a.fromMat3=S;a.getAxisAngle=f;a.identity=l;a.invert=E;a.len=T;a.length=T;a.lerp=V;a.mul=n;a.multiply=n;a.normalize=c;a.quat=d;a.random=L;a.rotateX=k;a.rotateY=C;a.rotateZ=O;a.rotationTo=la;a.scale=t;a.set=qa;a.setAxes=ba;a.setAxisAngle=u;a.slerp=B;a.sqlerp=ea;a.sqrLen=Y;a.squaredLength=Y;a.str=ca})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function d(){return new Float32Array(3)}function b(L){const E=new Float32Array(3);E[0]=
L[0];E[1]=L[1];E[2]=L[2];return E}function m(L,E,K){const S=new Float32Array(3);S[0]=L;S[1]=E;S[2]=K;return S}function r(L,E){return new Float32Array(L,E,3)}function w(){return d()}function v(){return m(1,1,1)}function l(){return m(1,0,0)}function u(){return m(0,1,0)}function f(){return m(0,0,1)}const n=d(),k=v(),C=l(),O=u(),q=f(),B=Object.freeze(Object.defineProperty({__proto__:null,ONES:k,UNIT_X:C,UNIT_Y:O,UNIT_Z:q,ZEROS:n,clone:b,create:d,createView:r,fromValues:m,ones:v,unitX:l,unitY:u,unitZ:f,
zeros:w},Symbol.toStringTag,{value:"Module"}));a.ONES=k;a.UNIT_X=C;a.UNIT_Y=O;a.UNIT_Z=q;a.ZEROS=n;a.clone=b;a.create=d;a.createView=r;a.fromValues=m;a.ones=v;a.unitX=l;a.unitY=u;a.unitZ=f;a.vec3f32=B;a.zeros=w})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Cyclical ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/Point ../../../geometry/projection ../../../geometry/SpatialReference ../../ViewingMode ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ../../support/spatialReferenceSupport".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k,C,O,q,B,L,E,K,S,W){function ca(x){return"global"===x.viewingMode?E.cameraUtilsSpherical:L.cameraUtilsPlanar}function la(x,A,U){const ia=x.state.camera,ja=ia.width/2/ia.pixelRatio;x.renderCoordsHelper.viewingMode===q.ViewingMode.Global&&null!=U&&(A*=Math.cos(w.deg2rad(U)));A/=x.renderCoordsHelper.unitInMeters;return ja/(96*39.37/A)/Math.tan(ia.fovX/2)}function ea(x,A,U){const ia=x.state.camera;A=96*39.37/(ia.width/2/ia.pixelRatio/(A*Math.tan(ia.fovX/2)));x.renderCoordsHelper.viewingMode===
q.ViewingMode.Global&&null!=U&&(A/=Math.cos(w.deg2rad(U)));return A*=x.renderCoordsHelper.unitInMeters}function ba(x,A,U,ia,ja,oa){if(Z(oa)){const aa=new P(oa.signal);Y(x,ia.heading,ia.tilt,A,U,ja,aa);aa.resolver.promise.then(G=>{G=J(x,G,ia.fov);if(v.isNone(G))oa.resolver.reject();else return oa.resolver.resolve(G)},G=>oa.resolver.reject(G))}else return A=Y(x,ia.heading,ia.tilt,A,U,ja),J(x,A,ia.fov,oa)}function ka(x,A,U,ia,ja){return ca(x).directionToHeadingTilt(A,U,ia,ja)}function qa(x,A){return!!(x.basemapTerrain&&
x.renderCoordsHelper.fromRenderCoords(A,H,x.spatialReference)&&x.elevationProvider&&v.unwrapOr(S.getElevationAtPoint(x.elevationProvider,H),0)>(H.z??0)-1)}function e(x,A,U){return t.apply(this,arguments)}function t(){t=d._asyncToGenerator(function*(x,A,U){if(!x.renderCoordsHelper.fromRenderCoords(A,H,x.spatialReference)||!x.elevationProvider)return!1;A=H.z??0;x=yield x.elevationProvider.queryElevation(H.x,H.y,A,H.spatialReference,"ground",U);return v.unwrapOr(x,0)>A-1});return t.apply(this,arguments)}
function N(x,A,U){return V.apply(this,arguments)}function V(){V=d._asyncToGenerator(function*(x,A,U){const ia=f.create();A?A instanceof k?(C.projectPointToVector(A,ia,x.renderSpatialReference),null==A.z&&null!=x.basemapTerrain&&null!=x.elevationProvider&&(A=yield x.elevationProvider.queryElevation(A.x,A.y,A.z??0,A.spatialReference,"ground",U),v.isSome(A)&&x.renderCoordsHelper.setAltitude(ia,A))):u.copy(ia,A):u.copy(ia,x.state.camera.center);return ia});return V.apply(this,arguments)}function T(x,
A){const U=f.create();A&&A instanceof k?(C.projectPointToVector(A,U,x.renderSpatialReference),null==A.z&&null!=x.basemapTerrain&&null!=x.elevationProvider&&(A=S.getElevationAtPoint(x.elevationProvider,A),v.isSome(A)&&x.renderCoordsHelper.setAltitude(U,A))):A?u.copy(U,A):u.copy(U,x.state.camera.center);return U}function Y(x,A,U,ia,ja,oa,aa){const G=ia&&ia instanceof k?ia:null;if(Z(aa))return N(x,ia,aa.signal).then(y=>{c(x,A,U,G,y,ja,oa,aa)},y=>aa.resolver.reject(y)),null;ia=T(x,ia);return c(x,A,U,
G,ia,ja,oa,aa)}function c(x,A,U,ia,ja,oa,aa,G){if(v.isNone(ia)&&(ia=C.projectVectorToPoint(ja,x.renderSpatialReference,x.spatialReference||O.WGS84),v.isNone(ia)))return null;oa=Math.max(oa,x.state.constraints.minimumPoiDistance);var y=h(x,A,U,ja,oa,aa);const z=ca(x).eyeForCenterWithHeadingTilt,F=z(ja,oa,y.heading,y.tilt);if(aa===a.OrientationMode.ADJUST&&"global"===x.viewingMode&&0<U){const Q=()=>{var R=oa;var ra=oa;var ta=ca(x).eyeTiltToLookAtTilt(U,ja,ra);x.state.constraints.tilt&&(ra=x.state.constraints.tilt(ra),
ta=Math.min(ta,.5*Math.PI),ta=ra.min*(1-.7)+.7*ta);R=ca(x).lookAtTiltToEyeTilt(ta,ja,R);aa=1>U-R?a.OrientationMode.LOCKED:a.OrientationMode.ADJUST;return c(x,A,R,ia,ja,oa,aa,G)};y=x.map.ground.navigationConstraint;if(!y||"stay-above"===y.type){if(qa(x,F.eye))return Q();if(Z(G))return e(x,F.eye,G.signal).then(R=>{if(R)return Q();G.resolver.resolve({eye:F.eye,up:F.up,center:f.clone(ja),heading:F.heading,tilt:F.tilt});return null}),null}}y=!G||Z(G)?{center:f.create(),eye:f.create(),up:f.create(),tilt:0,
heading:0}:G;y.eye=F.eye;y.up=F.up;y.center=f.clone(ja);y.heading=F.heading;y.tilt=F.tilt;Z(G)&&G.resolver.resolve(y);return y}function h(x,A,U,ia,ja,oa){var aa=0;if(oa=oa===a.OrientationMode.ADJUST)if(aa=x.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(ja/aa)/Math.LN2)oa=!0;else{var G=x.renderSpatialReference,y=x.spatialReference||O.WGS84;oa=C.projectVectorToPoint(ia,G,y);G=C.projectVectorToPoint(x.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,G,y);v.isNone(oa)||v.isNone(G)?
oa=!1:(aa*=Math.tan(.5*x.state.camera.fov),oa=5<G.distance(oa)/aa)}oa?(A=0,U=ca(x).eyeTiltToLookAtTilt(U,ia,ja),x.state.constraints.tilt?(oa=x.state.constraints.tilt(ja),oa.max=Math.min(oa.max,.5*Math.PI),aa=Math.min(U,oa.min*(1-.7)+.7*oa.max)):aa=U):aa=ca(x).eyeTiltToLookAtTilt(U,ia,ja);U=aa=x.state.constraints.clampTilt(ja,aa);U=ca(x).lookAtTiltToEyeTilt(U,ia,ja);return{heading:A,tilt:U}}function J(x,A,U,ia){if(v.isNone(A))return null;x=C.projectVectorToPoint(A.eye,x.renderSpatialReference,x.spatialReference||
O.WGS84);return v.isNone(x)?null:v.isSome(ia)?(ia.position=x,ia.heading=A.heading,ia.tilt=A.tilt,ia.fov=U,ia):new b(x,A.heading,A.tilt,U)}function Z(x){return x&&"resolver"in x}const ha=r.getLogger("esri.views.3d.support.cameraUtils"),fa=f.create(),ma={heading:0,tilt:0},H=new k,g=new m.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),p=new m.Cyclical(-180,180);a.OrientationMode=void 0;(function(x){x[x.LOCKED=0]="LOCKED";x[x.ADJUST=1]="ADJUST"})(a.OrientationMode||(a.OrientationMode={}));const D=
f.create();let P=function(x){this.signal=x;this.resolver=l.createResolver()};a.AsyncContext=P;a.computeScale=function(x,A){C.projectVectorToVector(A.center,x.renderSpatialReference,fa,O.WGS84);return ea(x,A.distance,fa[1])};a.directionToHeadingTilt=ka;a.distanceToScale=ea;a.externalToInternal=function(x,A){if(v.isNone(A))return null;var U=x.renderSpatialReference;const ia=ca(x).headingTiltToDirectionUp,ja=f.create();if(!C.projectPointToVector(A.position,ja,U))return null;U=ia(ja,A.heading,A.tilt);
u.scale(U.direction,U.direction,x.state.camera.distance);u.add(U.direction,U.direction,ja);x=B.cameraOnContentAlongViewDirection(x,ja,U.direction,U.up);x.fov=w.deg2rad(A.fov);return x};a.fromCenterDistance=ba;a.fromCenterScale=function(x,A,U,ia,ja,oa){U=la(x,U,A.latitude);return ba(x,A,U,ia,ja,oa)};a.fromExtent=function(x,A,U,ia,ja,oa=null){if(x.state.isGlobal){if(!W.isSpatialReferenceSupported(A.spatialReference,q.ViewingMode.Global))return Z(oa)&&oa.resolver.reject(),null;var aa=new k(A.xmin,A.ymin,
A.spatialReference);const F=new k(A.xmax,A.ymax,A.spatialReference),Q=A.spatialReference.isGeographic?p:g;var G=new k({x:Q.center(aa.x,F.x),y:(F.y+aa.y)/2,z:null!=A.zmax&&null!=A.zmin?(A.zmax+A.zmin)/2:void 0,spatialReference:A.spatialReference});const R=n.getReferenceEllipsoid(A.spatialReference);var y=K.getGreatCircleSpanAt(G,aa,F);var z=y.lon;y=y.lat;Q.diff(aa.x,F.x)>Q.range/2&&(z+=R.halfCircumference);z=Math.min(z,R.halfCircumference);y=Math.min(y,R.halfCircumference)}else G=v.unwrapOr(x.renderSpatialReference,
A.spatialReference),G.equals(A.spatialReference)||(A=C.project(A,G)),z=A.xmax-A.xmin,y=A.ymax-A.ymin,G=new k({x:A.xmin+.5*z,y:A.ymin+.5*y,z:null!=A.zmax&&null!=A.zmin?(A.zmax+A.zmin)/2:void 0,spatialReference:G});aa=x.state.camera;A=Math.max(1/Math.tan(aa.fovX/2)*z*.5,1/Math.tan(aa.fovY/2)*y*.5,1/Math.tan(aa.fov/2)*(null!=A.zmax&&null!=A.zmin?A.zmax-A.zmin:0)*.5)/1;if(Z(oa))z=new P(oa.signal),Y(x,U,ia,G,A,ja,z),z.resolver.promise.then(F=>{F=J(x,F,x.camera.fov);if(v.isNone(F))oa.resolver.reject();
else return oa.resolver.resolve(F)},F=>oa.resolver.reject(F));else return U=Y(x,U,ia,G,A,ja),J(x,U,x.camera.fov,oa)};a.getObserverForPointAtDistance=Y;a.headingTiltToDirectionUp=function(x,A,U,ia,ja){return ca(x).headingTiltToDirectionUp(A,U,ia,ja)};a.internalToExternal=function(x,A,U){const ia=x.renderSpatialReference,ja=ka(x,A.eye,A.viewForward,A.up,ma);x=x.spatialReference||O.WGS84;C.projectVectorToVector(A.eye,ia,D,x)||(x=O.WGS84,C.projectVectorToVector(A.eye,ia,D,x));if(v.isNone(U))return new b(new k(D,
x),ja.heading,ja.tilt,w.rad2deg(A.fov));U.position.x=D[0];U.position.y=D[1];U.position.z=D[2];U.position.spatialReference=x;U.heading=ja.heading;U.tilt=ja.tilt;U.fov=w.rad2deg(A.fov);return U};a.observerToCamera=J;a.scaleToDistance=la;a.scaleToZoom=function(x,A){if(x=x.basemapTerrain?.tilingScheme)return x.levelAtScale(A);ha.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};a.toExtent=function(x,A,U){const ia=C.projectVectorToPoint(U,x.renderSpatialReference,x.spatialReference||
O.WGS84);if(v.isNone(ia))return null;var ja=Math.tan(A.fovX/2),oa=Math.tan(A.fovY/2);A=u.dist(A.eye,U);ja*=2*A;oa*=2*A;return"global"===x.viewingMode?E.toExtent(x,ia,ja,oa):L.toExtent(x,ia,ja,oa)};a.zoomToScale=function(x,A){if(x=x.basemapTerrain?.tilingScheme)return x.scaleAtLevel(A);ha.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),
function(a,d,b,m,r,w,v,l,u){function f(W,ca,la,ea=u.createDirectionUp()){const {direction:ba,up:ka}=ea;b.fromZRotation(E,-d.deg2rad(ca));b.rotateX(E,E,d.deg2rad(la));r.transformMat4(ba,L,E);r.scale(ba,ba,-1);r.transformMat4(ka,B,E);return ea}function n(W,ca,la,ea){return u.directionToHeadingTilt(ca,la,ea,L,B)}function k(W,ca,la,ea){const ba=f(W,la,ea),ka=w.create();r.scale(ka,ba.direction,-ca);r.add(ka,ka,W);return{up:ba.up,eye:ka,heading:la,tilt:ea}}function C(W){return d.rad2deg(W)}function O(W){return d.deg2rad(W)}
function q(W,ca,la,ea,ba){const ka=W.renderSpatialReference;W=W.map&&W.spatialReference||ca.spatialReference;l.projectPointToVector(ca,K,ka);l.projectPointToVector(ca,S,ka);K[0]-=la/2;S[0]+=la/2;K[1]-=ea/2;S[1]+=ea/2;l.projectVectorToVector(K,ka,K,W);l.projectVectorToVector(S,ka,S,W);ba?(ba.xmin=K[0],ba.ymin=K[1],ba.xmax=S[0],ba.ymax=S[1],ba.spatialReference=W):ba=new v(K[0],K[1],S[0],S[1],W);return ba}const B=w.fromValues(0,1,0),L=w.fromValues(0,0,1),E=m.create(),K=w.create(),S=w.create();m=Object.freeze(Object.defineProperty({__proto__:null,
directionToHeadingTilt:n,eyeForCenterWithHeadingTilt:k,eyeTiltToLookAtTilt:O,headingTiltToDirectionUp:f,lookAtTiltToEyeTilt:C,toExtent:q},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsPlanar=m;a.directionToHeadingTilt=n;a.eyeForCenterWithHeadingTilt=k;a.eyeTiltToLookAtTilt=O;a.headingTiltToDirectionUp=f;a.lookAtTiltToEyeTilt=C;a.toExtent=q})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,
d,b,m){const r=m.create(),w=m.create();a.createDirectionUp=function(){return{direction:m.create(),up:m.create()}};a.directionToHeadingTilt=function(v,l,u,f,n){let k=b.normalize(r,v),C=b.dot(k,f);const O=0<C;C=Math.abs(C);.99<C&&(C=Math.abs(b.dot(l,f)),.99>C?(b.copy(k,l),O&&b.scale(k,k,-1)):k=null);l=0;k&&(b.scale(w,f,b.dot(f,k)),b.subtract(k,k,w),l=b.dot(k,n)/(b.length(k)*b.length(n)),b.cross(w,k,n),l=(0<b.dot(w,f)?1:-1)*d.rad2deg(d.acosClamped(l)));v=d.rad2deg(d.acosClamped(-b.dot(f,v)/b.length(v)));
if(!u)return{heading:l,tilt:v};u.heading=l;u.tilt=v;return u};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/Cyclical ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/ellipsoidUtils ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils".split(" "),function(a,d,b,m,r,w,v,l,u,f,n,k,C){function O(e,
t,N,V=k.createDirectionUp()){w.cross(ka,e,ca);0===w.dot(ka,ka)&&w.cross(ka,e,la);m.fromRotation(ba,-b.deg2rad(t),e);m.rotate(ba,ba,-b.deg2rad(N),ka);const {up:T,direction:Y}=V;w.cross(T,ka,e);w.normalize(T,T);w.transformMat4(T,T,ba);w.normalize(Y,e);w.negate(Y,Y);w.transformMat4(Y,Y,ba);return V}function q(e,t,N,V){const T=ka,Y=qa;w.normalize(T,e);w.cross(qa,T,ca);0===w.dot(qa,qa)&&w.cross(qa,T,la);w.cross(Y,qa,T);return k.directionToHeadingTilt(t,N,V,T,Y)}function B(e,t,N,V){const T={eye:v.create(),
up:null,tilt:V,heading:N},Y=ka;Y[0]=e[0];Y[1]=e[2];Y[2]=-e[1];N=b.deg2rad(N);var c=b.deg2rad(V);V=Math.sin(N);N=Math.cos(N);var h=Math.sin(c),J=Math.cos(c);const Z=w.length(Y);if(1E-8>Math.abs(c))c=t+Z;else{var ha=Z/h,fa=b.asinClamped(t/ha);c=ha*Math.sin(Math.PI-c-fa)}J*=t;ha=t*t*h*h;fa=N*N*ha;const ma=c-J,H=ma*ma;var g=fa*(fa+H-Y[1]*Y[1]);if(0>g)return w.scale(T.eye,Y,c/Z),T.tilt=0,E(T,e);var p=Math.sqrt(g);const D=Y[1]*ma;g=fa+H;p=0<N?-p+D:p+D;if(1E-8>Math.abs(g))return 1E-8>Z?(T.eye[0]=0,T.eye[1]=
0,T.eye[2]=t):w.scale(T.eye,Y,c/Z),T.tilt=0,L(T.eye),E(T,e);T.eye[1]=p/g;t*=h;p=T.eye[1]*T.eye[1];h=1-p;g=Math.sqrt(h);ha=fa*p+V*V*ha-2*N*t*T.eye[1]*g*ma+h*H;if(1E-8>Math.abs(ha))return w.scale(T.eye,Y,c/Z),T.tilt=0,L(T.eye),E(T,e);T.eye[0]=(h*(c*Y[0]-J*Y[0])-t*g*(Y[0]*T.eye[1]*N+Y[2]*V))/ha;T.eye[2]=(h*(c*Y[2]-J*Y[2])-t*g*(Y[2]*T.eye[1]*N-Y[0]*V))/ha;w.scale(T.eye,T.eye,c);L(T.eye);return E(T,e)}function L(e){const t=e[1];e[1]=-e[2];e[2]=t}function E(e,t){t=O(t,e.heading,e.tilt);e.up=t.up;return e}
function K(e,t,N){t=w.length(t);N=b.asinClamped(N/(Math.sqrt(N*N+t*t-2*N*t*Math.cos(Math.PI-e))/Math.sin(e)));return b.rad2deg(e-N)}function S(e,t,N){e=b.deg2rad(e);t=w.length(t);return b.asinClamped(N/(t/Math.sin(e)))+e}function W(e,t,N,V,T){function Y(Z){const ha=Math.PI/2;Z=d.cyclical2PI.normalize(Z,-ha);Z>ha&&(Z=Math.PI-Z);return Z}var c=t.latitude;var h=l.getReferenceEllipsoid(e.spatialReference).radius;t=t.longitude;var J=C.getLonDeltaForDistance(c,N,h)/2;N=t-J;t+=J;c=b.deg2rad(c);c=(1+Math.sin(c))/
(1-Math.sin(c));J=(c+1)*Math.tan(V/h/2);c=1.5*Math.PI-2*Math.atan(.5*(J+Math.sqrt(4*c+J*J)));V=c+V/h;c=Y(c);V=Y(V);V<c&&(h=V,V=c,c=h);c=Math.max(b.rad2deg(c),-90);V=Math.min(b.rad2deg(V),90);t=ea.monotonic(N,t);180<t-N&&(h=(t-N-180)/2,N+=h,t-=h);h=e.spatialReference&&e.spatialReference.isGeographic?e.spatialReference:f.WGS84;T?(T.xmin=N,T.ymin=c,T.xmax=t,T.ymax=V,T.spatialReference=h):T=new u(N,c,t,V,h);e.spatialReference&&e.spatialReference.isWebMercator&&n.geographicToWebMercator(T,!1,T);return T}
const ca=v.fromValues(0,0,1),la=w.normalize(v.create(),v.fromValues(1,1,1)),ea=new d.Cyclical(-180,180),ba=r.create(),ka=v.create(),qa=v.create();r=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:q,eyeForCenterWithHeadingTilt:B,eyeTiltToLookAtTilt:S,headingTiltToDirectionUp:O,lookAtTiltToEyeTilt:K,toExtent:W},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsSpherical=r;a.directionToHeadingTilt=q;a.eyeForCenterWithHeadingTilt=B;a.eyeTiltToLookAtTilt=S;a.headingTiltToDirectionUp=
O;a.lookAtTiltToEyeTilt=K;a.toExtent=W})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../core/maybe","../../../geometry/ellipsoidUtils","../../../geometry/Point"],function(a,d,b,m,r){function w(u,f,n){if(b.isNone(f.longitude)||b.isNone(f.latitude)||b.isNone(n.longitude)||b.isNone(n.latitude))throw Error("Invalid points: no lon/lat");return v(u,f.longitude,f.latitude,n.longitude,n.latitude)}function v(u,f,n,k,C){n=d.deg2rad(n);C=d.deg2rad(C);f=d.deg2rad(f);
const O=d.deg2rad(k);k=Math.sin((n-C)/2);f=Math.sin((f-O)/2);n=2*d.asinClamped(Math.sqrt(k*k+Math.cos(n)*Math.cos(C)*f*f));return Math.round(n*u*1E4)/1E4}function l(u,f){u/=15;f||(u=Math.round(u));return u}a.getGreatCircleDistance=v;a.getGreatCircleDistanceFromPoints=w;a.getGreatCircleSpanAt=function(u,f,n){const k=f.spatialReference,C=m.getReferenceEllipsoid(k),O=new r(f.x,u.y,k),q=new r(n.x,u.y,k);f=new r(u.x,f.y,k);u=new r(u.x,n.y,k);return{lon:w(C.radius,O,q),lat:w(C.radius,f,u)}};a.getLonDeltaForDistance=
function(u,f,n){f/=n;u=d.deg2rad(u);f=Math.sin(f/2);u=Math.cos(u);u=2*d.asinClamped(Math.sqrt(f*f/(u*u)));return d.rad2deg(u)};a.longitudeToTimezone=l;a.positionToTimezoneInfo=function(u,f){u=u?.[0];if(null==u)return null;f||(f={hours:0,minutes:0,seconds:0});f.hours=l(u,!0);u=f.hours%1;f.hours-=u;f.minutes=60*u;u=f.minutes%1;f.minutes-=u;f.seconds=Math.round(60*u);return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports",
"../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(a,d,b){function m(r){return"array"in r}a.SamplePosition=function(r,w=null,v=0){this.array=r;this.spatialReference=w;this.offset=v};a.getElevationAtPoint=function(r,w,v="ground"){if(b.isDehydratedPoint(w))return r.getElevation(w.x,w.y,w.z||0,w.spatialReference,v);if(m(w)){let l=w.offset;return r.getElevation(w.array[l++],w.array[l++],w.array[l]||0,d.unwrapOr(w.spatialReference,r.spatialReference),v)}return r.getElevation(w[0],
w[1],w[2]||0,r.spatialReference,v)};a.isSamplePosition=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=function(d){return"point"===d.type};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v,l){var u;a.SlideThumbnail=u=function(f){function n(){var C=f.apply(this,arguments)||this;C.url="";return C}d._inheritsLoose(n,f);var k=n.prototype;k.destroy=function(){this.url=""};k.clone=function(){return new u({url:this.url})};return n}(m.JSONSupport);b.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],a.SlideThumbnail.prototype,"url",void 0);a.SlideThumbnail=u=b.__decorate([l.subclass("esri.webdoc.support.SlideThumbnail")],a.SlideThumbnail);Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(a,d,b,m,r,w,v){var l;b=l=function(u){function f(){var n=u.apply(this,arguments)||this;n.text="";return n}a._inheritsLoose(f,u);f.prototype.clone=function(){return new l({text:this.text})};
return f}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=l=d.__decorate([v.subclass("esri.webscene.support.Description")],b)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(a,d,b,m,r,w,v,l,u,f,n,k){var C;a.SlideEnvironment=C=function(O){function q(){var B=O.apply(this,arguments)||this;B.lighting=new k;B.weather=new u;return B}d._inheritsLoose(q,O);q.prototype.clone=function(){return new C({lighting:r.clone(this.lighting),weather:r.clone(this.weather)})};return q}(m.JSONSupport);b.__decorate([w.property({types:n.lightingTypes,json:{write:!0}})],a.SlideEnvironment.prototype,"lighting",void 0);b.__decorate([w.property({types:f.weatherTypes,json:{write:!0}})],a.SlideEnvironment.prototype,
"weather",void 0);a.SlideEnvironment=C=b.__decorate([l.subclass("esri.webscene.Environment")],a.SlideEnvironment);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),
function(a,d,b,m,r,w,v,l,u){var f;m=f=function(n){function k(){var O=n.apply(this,arguments)||this;O.opacity=null;return O}a._inheritsLoose(k,n);var C=k.prototype;C.clone=function(){return new f({opacity:this.opacity})};C.cloneAndApplyTo=function(O){if(null==this.opacity)return O;O=null!=O?O.clone():new b;O.opacity=this.opacity;return O};k.fromGround=function(O){return new f({opacity:O.opacity})};return k}(m.JSONSupport);d.__decorate([r.property({type:Number,json:{type:w.Integer,read:{reader:u.transparencyToOpacity,
source:"transparency"},write:{writer:(n,k)=>{k.transparency=u.opacityToTransparency(n)},target:"transparency"}}})],m.prototype,"opacity",void 0);return m=f=d.__decorate([l.subclass("esri.webscene.support.SlideGround")],m)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v,l){var u;a.SlideVisibleLayer=u=function(f){function n(k){k=f.call(this,k)||this;k.id="";k.sublayerIds=null;return k}d._inheritsLoose(n,f);n.prototype.clone=function(){return new u({id:this.id,sublayerIds:r.clone(this.sublayerIds)})};return n}(m.JSONSupport);b.__decorate([w.property({type:String,json:{write:!0}})],a.SlideVisibleLayer.prototype,"id",void 0);b.__decorate([w.property({type:[v.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],a.SlideVisibleLayer.prototype,
"sublayerIds",void 0);a.SlideVisibleLayer=u=b.__decorate([l.subclass("esri.webscene.support.SlideVisibleLayer")],a.SlideVisibleLayer);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(a,
d,b,m,r,w,v){var l;b=l=function(u){function f(){var n=u.apply(this,arguments)||this;n.text="";return n}a._inheritsLoose(f,u);f.prototype.clone=function(){return new l({text:this.text})};return f}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"text",void 0);return b=l=d.__decorate([v.subclass("esri.webscene.support.Title")],b)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass".split(" "),
function(a,d,b,m,r,w,v){var l;b=l=function(u){function f(n){return u.call(this,n)||this}a._inheritsLoose(f,u);f.prototype.clone=function(){return new l({name:this.name,path:this.path,title:this.title})};return f}(b.JSONSupport);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"path",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=l=d.__decorate([v.subclass("esri.webscene.TransportationNetwork")],
b)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(a,d,b){b=function(m){function r(w,v){return m.call(this,w,v,"webscene")||this}d._inheritsLoose(r,m);d._createClass(r,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return r}(b.Version);a.Version=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(a,d){let b=function(){function m(w,v,l=""){this.major=w;this.minor=v;this._context=l}var r=m.prototype;r.lessThan=function(w,v){return this.major<w||w===this.major&&this.minor<v};r.since=function(w,v){return!this.lessThan(w,v)};r.validate=function(w){if(this.major!==w.major)throw new d((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:w});
};r.clone=function(){return new m(this.major,this.minor,this._context)};m.parse=function(w,v=""){const [l,u]=w.split(".");var f=/^\s*\d+\s*$/;if(!l||!l.match||!l.match(f))throw new d((v&&v+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:w});if(!u||!u.match||!u.match(f))throw new d((v&&v+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:w});w=parseInt(l,10);f=parseInt(u,10);return new m(w,f,v)};return m}();a.Version=
b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/schemaValidatorLoader":function(){define(["exports"],function(a){let d=null;a.getLoader=function(){return d};a.registerLoader=function(b){d=b};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version ./webscene/support/schemaValidatorLoader".split(" "),function(a,
d,b,m,r,w,v,l,u,f,n,k,C,O,q,B,L,E,K,S,W,ca,la,ea,ba,ka,qa,e,t,N,V,T,Y,c,h,J,Z,ha,fa,ma,H,g,p,D,P,x,A){const U=new x.Version(1,30);r=function(ja){function oa(G){var y=ja.call(this,G)||this;y._layersIdGCTimeoutId=void 0;y._handles=new u;y._updateFromPromise=null;y.applicationProperties=null;y.clippingArea=null;y.clippingEnabled=!1;y.floorInfo=null;y.heightModelInfo=void 0;y.sourceVersion=null;y.transportationNetworks=null;y.presentation=new D;y.initialViewProperties=new p;y.portalItem=null;y.resourceInfo=
null;y._debouncedSaveOperations=L.debounce(function(){var z=d._asyncToGenerator(function*(F,Q,R){switch(F){case ia.SAVE:return y._saveImpl(Q);case ia.SAVE_AS:return y._saveAsImpl(R,Q)}});return function(F,Q,R){return z.apply(this,arguments)}}());y._resourceReferences={portalItem:null,paths:[]};y.authoringApp=null;y.authoringAppVersion=null;y._isAuthoringAppSetByUser=!1;y._isAuthoringAppVersionSetByUser=!1;return y}d._inheritsLoose(oa,ja);var aa=oa.prototype;aa.initialize=function(){this.when().catch(G=>
{C.getLogger(this.declaredClass).error("#load()","Failed to load web scene",G)});if(this.resourceInfo){let G;try{G=this._validateJSON(this.resourceInfo)}catch(y){this.addResolvingPromise(Promise.reject(y));return}this.read(G);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};aa.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&
this.presentation.destroy();const G=this.portalItem;this.portalItem=null;G?.destroy()};aa.writeClippingArea=function(G,y){y.clippingArea||(y.clippingArea={});y.clippingArea.geometry=G.toJSON()};aa.readClippingEnabled=function(G,y){return y.clippingArea?!!y.clippingArea.clip:!1};aa.writeClippingEnabled=function(G,y){this.clippingArea&&(y.clippingArea||(y.clippingArea={}),y.clippingArea.clip=G)};aa.writeLayers=function(G,y,z,F){const Q={...F,layerContainerType:"operational-layers"};G=G.map(R=>this.verifyWriteLayer(R,
F)?R.write({},Q):null).filter(R=>!!R);y[z]=G.toArray()};aa.verifyWriteLayer=function(G,y){return"write"in G?!0:(y&&y.messages&&y.messages.push(new l("layer:unsupported",`Layers (${G.title}, ${G.id}) of type '${G.declaredClass}' cannot be persisted in web scenes`,{layer:G})),!1)};aa.readSourceVersion=function(G,y){const [z,F]=y.version.split(".");return new x.Version(parseInt(z,10),parseInt(F,10))};aa.writeSourceVersion=function(G,y,z){y[z]=`${U.major}.${U.minor}`};aa.writeAuthoringApp=function(G,
y){y.authoringApp=G&&this._isAuthoringAppSetByUser?G:"ArcGIS API for JavaScript"};aa.writeAuthoringAppVersion=function(G,y){y.authoringAppVersion=G&&this._isAuthoringAppVersionSetByUser?G:m.version};aa.writeGround=function(G,y,z,F){y[z]=G?G.write({},F):{transparency:0,layers:[]}};aa.readInitialViewProperties=function(G,y){G={};y.initialState&&y.initialState.environment&&(G.environment=g.fromJSON(y.initialState.environment));G.spatialReference=y.spatialReference?t.fromJSON(y.spatialReference):t.WebMercator;
G.viewingMode=y.viewingMode||"global";y.initialState&&y.initialState.viewpoint&&(G.viewpoint=w.fromJSON(y.initialState.viewpoint));return new p(G)};aa.load=function(G){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};aa.loadAll=function(){return k.loadAll(this,G=>{const y=this.presentation&&this.presentation.slides;G(this.ground,this.basemap,this.layers,y&&y.map(z=>z.basemap))})};aa.read=function(G,y){y={...y,origin:"web-scene"};const z=this._isAuthoringAppVersionSetByUser,
F=this._isAuthoringAppSetByUser;ba.readLoadable(this,G,Q=>ja.prototype.read.call(this,G,Q),y);F||(this._isAuthoringAppSetByUser=!1);z||(this._isAuthoringAppVersionSetByUser=!1);if(G.baseMap&&Array.isArray(G.baseMap.elevationLayers)&&(this.sourceVersion?.supportsVisibleElevationLayersInSlides??!1)){y=G.baseMap.elevationLayers.map(ta=>({id:ta.id}));const Q=this.presentation.slides,R=(ta,ua)=>ta.visibleLayers.some(wa=>wa.id===ua),ra=y.filter(ta=>!Q.some(ua=>R(ua,ta.id)));Q.forEach(ta=>{ta.visibleLayers.addMany(ra)})}};
aa._writeBasemapElevationLayers=function(G){const y=G.ground&&G.ground.layers;!G.baseMap&&y&&y.length&&(G.baseMap={title:"Basemap",baseMapLayers:[]});G.baseMap&&(G.baseMap.elevationLayers=f.clone(y))};aa.write=function(G,y){if("loaded"!==this.loadStatus)throw y=new l("webscene:not-loaded","Web scene must be loaded before it can be serialized"),C.getLogger(this.declaredClass).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),y;this._runLayersIdGC();
var z=!y?.messages;y={messages:[],...y,origin:"web-scene"};G=ja.prototype.write.call(this,G,y);if(z&&(y=y.messages?.filter(F=>"web-document-write:property-required"===F.name)??[],y.length))throw z=new l("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:y}),C.getLogger(this.declaredClass).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",y),z;this._writeBasemapElevationLayers(G);
return G};aa.save=function(){var G=d._asyncToGenerator(function*(y){return this._debouncedSaveOperations(ia.SAVE,y)});return function(y){return G.apply(this,arguments)}}();aa._saveImpl=function(){var G=d._asyncToGenerator(function*(y){if(!this.portalItem)throw C.getLogger(this.declaredClass).error("save(): requires the .portalItem property to be set"),yield Promise.resolve(),new l("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if("Web Scene"!==this.portalItem?.type)throw yield Promise.resolve(),
new l("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"');const z=this._updateFromPromise;yield this._ensureLoadBeforeSave();const F=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl?E.urlToObject(this.portalItem.itemUrl):null,messages:[],portal:this.portalItem.portal??Y.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),Q=this.write({},F);
yield Promise.all(F.resources.pendingOperations);yield this._verifySave(Q,F,y);this._updateTypeKeywords(this.portalItem);yield this.portalItem.update({data:Q});yield fa.saveResources(this._resourceReferences,F,null);ea.updateOrigins(F);z&&(yield z);yield this._saveThumbnail();return this.portalItem});return function(y){return G.apply(this,arguments)}}();aa.saveAs=function(){var G=d._asyncToGenerator(function*(y,z){return this._debouncedSaveOperations(ia.SAVE_AS,z,y)});return function(y,z){return G.apply(this,
arguments)}}();aa._saveAsImpl=function(){var G=d._asyncToGenerator(function*(y,z){y=c.from(y);y||(C.getLogger(this.declaredClass).error("saveAs(portalItem): requires a portal item parameter"),yield Promise.reject(new l("webscene:portal-item-required","saveAs requires a portal item to save to")));y.id&&(y=y.clone(),y.id=null);const F=y.portal||Y.getDefault();yield this._ensureLoadBeforeSave();y.type="Web Scene";y.portal=F;const Q=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],
portal:F,portalItem:y,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),R=this.write({},Q);yield Promise.all(Q.resources.pendingOperations);yield this._verifySaveAs(R,Q,z);const ra=this.thumbnailUrl,ta=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(y);yield F.signIn();yield F.user?.addItem({item:y,folder:z&&z.folder,data:R});yield fa.saveResources(this._resourceReferences,Q,null);this.portalItem=y;q.MultiOriginJSONSupport.prototype.read.call(this,
{version:R.version,authoringApp:R.authoringApp,authoringAppVersion:R.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:y.itemUrl&&E.urlToObject(y.itemUrl)});ea.updateOrigins(Q);ra&&(this.thumbnailUrl=ta?E.addQueryParameter(ra,"w","8192"):ra);Q.portalItem=y;yield this._saveThumbnail();return y});return function(y,z){return G.apply(this,arguments)}}();aa._saveThumbnail=function(){var G=d._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl}),
this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))});return function(){return G.apply(this,arguments)}}();aa._verifySave=function(G,y,z,F=!1){if(!T.isEarth(this.spatialReference))return Promise.reject(new l("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let Q=y.messages?.filter(R=>"error"===R.type).map(R=>new l(R.name,R.message,R.details))??[];y.blockedRelativeUrls&&(Q=Q.concat(y.blockedRelativeUrls.map(R=>
new l("url:unsupported",`Relative url '${R}' is not supported in Web Scene`))));z&&z.ignoreUnsupported&&(Q=Q.filter(R=>"layer:unsupported"!==R.name&&"symbol:unsupported"!==R.name&&"symbol-layer:unsupported"!==R.name&&"property:unsupported"!==R.name&&"url:unsupported"!==R.name&&"scenemodification:unsupported"!==R.name));z?.requiredPropertyChecksDisabled&&(Q=Q.filter(R=>"web-document-write:property-required"!==R.name));y=!!z?.strictSchemaValidationEnabled;z=A.getLoader();return(y&&z?z().then(R=>{R=
R.validate(G);if(0<R.length){const ra=`webscene did not validate:\n${R.join("\n")}`;C.getLogger(this.declaredClass).error(`${F?"saveAs":"save"}(): ${ra}`)}return R.map(ra=>new l("webscene:schema-validation",ra))}).then(R=>{if(0<R.length)throw J.createSchemaValidationError(R.concat(Q));return Q}):Promise.resolve(Q)).then(R=>{if(0<R.length)throw new l("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:R});})};aa._verifySaveAs=
function(G,y,z){return this.canNotSaveAs(y)?Promise.reject(J.createCopyError()):this._verifySave(G,y,z,!0)};aa.verifySaveAs=function(G){const y=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),z=this.write({},y);return this._verifySaveAs(z,y,G)};aa.canNotSaveAs=function(G){G||(G=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},G));return 0<(G.verifyItemRelativeUrls?.writtenUrls?.length??0)};aa.updateFrom=function(){var G=d._asyncToGenerator(function*(y,
z={}){this._updateFromPromise=y=this._updateFrom(y,z);yield y;this._updateFromPromise===y&&(this._updateFromPromise=null)});return function(y){return G.apply(this,arguments)}}();aa._updateFrom=function(){var G=d._asyncToGenerator(function*(y,z={}){yield y.whenReady();!z.environmentExcluded&&y.environment&&(this.initialViewProperties.environment=g.prototype.clone.apply(y.environment));!z.viewpointExcluded&&y.viewpoint&&(this.initialViewProperties.viewpoint=y.viewpoint.clone());this.initialViewProperties.spatialReference=
y.spatialReference.clone();this.initialViewProperties.viewingMode=y.viewingMode;O.isSome(y.clippingArea)?y.clippingArea!==this.clippingArea&&(this.clippingArea=y.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;y.heightModelInfo&&(this.heightModelInfo=y.heightModelInfo.clone());if(y.map===this)for(const F of y.allLayerViews)"visible"in F&&"visible"in F.layer&&F._isOverridden("visible")&&(F.layer.visible=F.visible);if(!1===z.thumbnailExcluded||null==z.thumbnailExcluded&&!z.viewpointExcluded)yield this._updateFromThumbnail(y,
z.thumbnailSize??void 0)});return function(y){return G.apply(this,arguments)}}();aa._updateFromThumbnail=function(){var G=d._asyncToGenerator(function*(y,z){z=ma.getOptimalThumbnailSize(y,z);this.thumbnailUrl=(yield y.takeScreenshot({format:"jpg",width:z.width,height:z.height,disableDecorations:!0})).dataUrl});return function(y,z){return G.apply(this,arguments)}}();aa._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?
this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};aa._readAndLoadFromJSON=function(G,y){G=this._validateJSON(G);this.read(G,y);return this._loadFromJSON(G,y)};aa._extractOperationalLayers=function(G){const y=[];if(!this.sourceVersion?.supportsGround&&G.baseMap&&Array.isArray(G.baseMap.elevationLayers))for(const Q of G.baseMap.elevationLayers)y.push(Q);const z=[],F=Q=>{Q.layers&&(Q.layers=Q.layers.filter(F));return"ArcGISTiledElevationServiceLayer"===Q.layerType?(this.sourceVersion?.supportsGround||
z.push(Q),!1):!0};return{operationalLayers:G.operationalLayers?G.operationalLayers.filter(F):[],operationalElevationLayers:z,basemapElevationLayers:y}};aa._loadFromJSON=function(G,y){const z=new v;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise((F,Q)=>a(["./layers/support/layersCreator"],F,Q))).then(({populateOperationalLayers:F})=>{const {operationalLayers:Q,operationalElevationLayers:R,basemapElevationLayers:ra}=this._extractOperationalLayers(G),
ta=[],ua={context:{...y,layerContainerType:"operational-layers"}};this.portalItem&&(ua.context.portal=this.portalItem.portal||Y.getDefault());0<ra.length&&ta.push(F(this.ground.layers,ra,{...ua,context:{...ua.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<R.length&&ta.push(F(z,R,{...ua,context:{...ua.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));Q&&0<Q.length&&ta.push(F(this.layers,Q,ua));return L.eachAlways(ta).then(()=>
{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(z)})};aa._ensureLoadBeforeSave=function(){var G=d._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const y=[];for(const z of this.allLayers.items)if("beforeSave"in z&&"function"===typeof z.beforeSave){const F=z.beforeSave();F&&y.push(F)}yield L.eachAlways(y)});return function(){return G.apply(this,arguments)}}();aa._loadObjectsWithLayers=function(){var G=d._asyncToGenerator(function*(){const y=
[];this.ground&&y.push(this.ground.load());this.basemap&&y.push(this.basemap.load());this.presentation.slides.forEach(z=>{z.basemap&&y.push(z.basemap.load())});yield L.eachAlways(y)});return function(){return G.apply(this,arguments)}}();aa._loadFromItem=function(){var G=d._asyncToGenerator(function*(y){yield y.load().catch(Q=>{throw new l("webscene:load-portal-item","Failed to load portal item",{error:Q});});if("Web Scene"!==y.type)throw new l("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",
{type:y.type});const z=yield y.fetchData();this.resourceInfo=z;const F={origin:"web-scene",url:E.urlToObject(y.itemUrl),portal:y.portal||Y.getDefault(),portalItem:y,readResourcePaths:[]};yield this._readAndLoadFromJSON(z,F);this._resourceReferences={portalItem:y,paths:F.readResourcePaths??[]}});return function(y){return G.apply(this,arguments)}}();aa._validateSpatialReference=function(){const G=this.initialViewProperties,y=this._sceneSpatialReference;let z=void 0;if("local"!==G.viewingMode){if(!ha.isSpatialReferenceSupported(y,
Z.ViewingMode.Global))return Promise.reject(new l("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:y,viewingMode:G.viewingMode}));z=R=>!R||e.canProjectWithoutEngine(R,y)}else{if(!ha.isSpatialReferenceSupported(y,Z.ViewingMode.Local))return Promise.reject(new l("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:y,viewingMode:G.viewingMode}));z=R=>!R||R.equals(y)}const F=R=>O.unwrap(R?.camera)?.position.spatialReference??O.unwrap(R?.targetGeometry)?.spatialReference;var Q=F(G.viewpoint);return Q&&!z(Q)?Promise.reject(new l("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:Q,sceneSpatialReference:y,viewingMode:G.viewingMode})):
(Q=this.presentation.slides.find(R=>!z(F(R.viewpoint))))?(Q=F(Q.viewpoint),Promise.reject(new l("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:Q,sceneSpatialReference:y,viewingMode:G.viewingMode}))):Promise.resolve()};aa._validateHeightModelInfo=function(){const G=N.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);
return G?Promise.reject(G):Promise.resolve()};aa._validateJSON=function(G){const y=x.Version.parse(G.version||"","webscene");U.validate(y);G.version=`${y.major}.${y.minor}`;1===y.major&&2>=y.minor&&(G.spatialReference=t.WebMercator.toJSON());return G};aa._updateTypeKeywords=function(G){"local"===this.initialViewProperties.viewingMode?G.typeKeywords?G.typeKeywords.includes("ViewingMode-Local")||G.typeKeywords.push("ViewingMode-Local"):G.typeKeywords=["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&
G.typeKeywords&&(G.typeKeywords=G.typeKeywords.filter(y=>"ViewingMode-Local"!==y));G.typeKeywords&&(G.typeKeywords=G.typeKeywords.filter((y,z,F)=>F.indexOf(y)===z))};aa._enableVerifyItemRelativeUrls=function(G){const y=this._verifyItemRelativeRootPath;y&&(G.verifyItemRelativeUrls={rootPath:y,writtenUrls:[]});return G};aa._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};aa._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();
this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};aa._runLayersIdGC=function(){this._unscheduleLayersIdGC();var G=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const y=z=>this.allLayers.some(F=>F.id===z);G&&G.layers&&(G.layers=G.layers.filter(z=>y(z.id)));(G=this.presentation&&this.presentation.slides)&&G.forEach(z=>{z.visibleLayers&&(z.visibleLayers=z.visibleLayers.filter(F=>y(F.id)))})};
oa.fromJSON=function(G){if(!G)throw new l("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:G})};d._createClass(oa,[{key:"thumbnailUrl",get:function(){return this.portalItem?.thumbnailUrl??null},set:function(G){G?this._override("thumbnailUrl",G):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(G){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",G)}},{key:"authoringAppVersion",set:function(G){this._isAuthoringAppVersionSetByUser=
!0;this._set("authoringAppVersion",G)}},{key:"spatialReference",get:function(){return this.initialViewProperties?.spatialReference??t.WebMercator}},{key:"viewingMode",get:function(){return this.initialViewProperties?.viewingMode??"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||t.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem?.itemUrl?E.urlToObject(this.portalItem.itemUrl).path:null}}]);return oa}(n.LoadableMixin(B.EsriPromiseMixin(q.MultiOriginJSONMixin(r))));
r.version=`${U.major}.${U.minor}`;b.__decorate([K.property({type:H,json:{write:!0}})],r.prototype,"applicationProperties",void 0);b.__decorate([K.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],r.prototype,"basemap",void 0);b.__decorate([K.property({type:ka,json:{read:{source:"clippingArea.geometry",reader:V.fromJSON},write:{target:"clippingArea.geometry"}}})],r.prototype,"clippingArea",void 0);b.__decorate([la.writer("clippingArea")],r.prototype,"writeClippingArea",null);b.__decorate([K.property({type:Boolean,
json:{write:{target:"clippingArea.clip"}}})],r.prototype,"clippingEnabled",void 0);b.__decorate([W.reader("clippingEnabled",["clippingArea"])],r.prototype,"readClippingEnabled",null);b.__decorate([la.writer("clippingEnabled")],r.prototype,"writeClippingEnabled",null);b.__decorate([K.property({type:h,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],r.prototype,"floorInfo",void 0);b.__decorate([K.property({type:qa,json:{write:!0}})],r.prototype,"heightModelInfo",void 0);b.__decorate([K.property({json:{write:{target:"operationalLayers",
ignoreOrigin:!0}}})],r.prototype,"layers",void 0);b.__decorate([la.writer("layers")],r.prototype,"writeLayers",null);b.__decorate([K.property({readOnly:!0,type:x.Version,json:{type:(()=>{const ja=[],oa=U.major;for(let aa=8;aa<=U.minor;aa++)ja.push(`${oa}.${aa}`);return ja})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],r.prototype,"sourceVersion",void 0);b.__decorate([W.reader("sourceVersion",["version"])],r.prototype,"readSourceVersion",
null);b.__decorate([la.writer("sourceVersion")],r.prototype,"writeSourceVersion",null);b.__decorate([K.property({json:{read:!1,write:!1}})],r.prototype,"tables",void 0);b.__decorate([K.property()],r.prototype,"thumbnailUrl",null);b.__decorate([K.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],r.prototype,"authoringApp",null);b.__decorate([la.writer("authoringApp")],r.prototype,"writeAuthoringApp",null);b.__decorate([K.property({type:String,json:{write:{writerEnsuresNonNull:!0,
ignoreOrigin:!0}}})],r.prototype,"authoringAppVersion",null);b.__decorate([la.writer("authoringAppVersion")],r.prototype,"writeAuthoringAppVersion",null);b.__decorate([K.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],r.prototype,"ground",void 0);b.__decorate([la.writer("ground")],r.prototype,"writeGround",null);b.__decorate([K.property({type:v.ofType(P),json:{write:!0}})],r.prototype,"transportationNetworks",void 0);b.__decorate([K.property({type:D,nonNullable:!0,
json:{write:{ignoreOrigin:!0,writer:(ja,oa,aa,G)=>{ja.slides&&0<ja.slides.length&&(oa.presentation=ja.write({},{...G,isPresentation:!0}))}}}})],r.prototype,"presentation",void 0);b.__decorate([K.property({type:p,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new p({viewingMode:"global",spatialReference:t.WebMercator})}})],r.prototype,"initialViewProperties",void 0);b.__decorate([W.reader("initialViewProperties",["initialState.environment","spatialReference",
"viewingMode","initialState.viewpoint"])],r.prototype,"readInitialViewProperties",null);b.__decorate([K.property({type:t,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],r.prototype,"spatialReference",null);b.__decorate([K.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],r.prototype,"viewingMode",null);b.__decorate([K.property({type:c})],r.prototype,"portalItem",void 0);b.__decorate([K.property()],r.prototype,"resourceInfo",void 0);r=b.__decorate([ca.subclass("esri.WebScene")],
r);var ia;(function(ja){ja[ja.SAVE=0]="SAVE";ja[ja.SAVE_AS=1]="SAVE_AS"})(ia||(ia={}));return r});