// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/serviceTileInfoProperty ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(w,n,d,g,h,u,v,l,A,B,z,T){w.ArcGISCachedService=
E=>{E=function(I){function M(){var Q=I.apply(this,arguments)||this;Q.copyright=null;Q.minScale=0;Q.maxScale=0;Q.spatialReference=null;Q.tileInfo=null;Q.tilemapCache=null;return Q}n._inheritsLoose(M,I);var G=M.prototype;G.readMinScale=function(Q,H){return null!=H.minLOD&&null!=H.maxLOD?Q:0};G.readMaxScale=function(Q,H){return null!=H.minLOD&&null!=H.maxLOD?Q:0};G.readTilemapCache=function(Q,H){return H.capabilities&&H.capabilities.includes("Tilemap")?new z.TilemapCache({layer:this}):null};n._createClass(M,
[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return M}(E);d.__decorate([h.property({json:{read:{source:"copyrightText"}}})],E.prototype,"copyright",void 0);d.__decorate([h.property()],E.prototype,"minScale",void 0);d.__decorate([l.reader("service","minScale")],E.prototype,"readMinScale",null);d.__decorate([h.property()],E.prototype,"maxScale",void 0);d.__decorate([l.reader("service","maxScale")],E.prototype,"readMaxScale",null);d.__decorate([h.property({type:T})],E.prototype,
"spatialReference",void 0);d.__decorate([h.property({readOnly:!0})],E.prototype,"supportsBlankTile",null);d.__decorate([h.property(B.serviceTileInfoProperty)],E.prototype,"tileInfo",void 0);d.__decorate([h.property()],E.prototype,"tilemapCache",void 0);d.__decorate([l.reader("service","tilemapCache",["capabilities"])],E.prototype,"readTilemapCache",null);d.__decorate([h.property()],E.prototype,"version",void 0);return E=d.__decorate([A.subclass("esri.layers.mixins.ArcGISCachedService")],E)};Object.defineProperty(w,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(w,n){function d(h,u,v,l){if(!h)return null;const {minScale:A,maxScale:B,minLOD:z,maxLOD:T}=u;if(null!=z&&null!=T)return l&&l.ignoreMinMaxLOD?n.fromJSON(h):n.fromJSON({...h,lods:h.lods.filter(({level:E})=>null!=E&&E>=z&&E<=T)});if(0!==A&&0!==B){const E=A?Math.round(1E4*A)/1E4:Infinity,I=B?Math.round(1E4*B)/1E4:-Infinity;return n.fromJSON({...h,lods:h.lods.filter(M=>
{M=Math.round(1E4*M.scale)/1E4;return M<=E&&M>=I})})}return n.fromJSON(h)}const g={type:n,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:d}}}}};w.readServiceTileInfo=d;w.serviceTileInfoProperty=g;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(w,n,d,g,h,u,v,l,A,B,z,T,E,I,M,G,Q,H,Y){var J;d=new d.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=J=function(x){function K(f){f=x.call(this,f)||this;f.dpi=96;f.format=null;f.origin=null;f.minScale=0;f.maxScale=0;f.size=null;f.spatialReference=null;return f}w._inheritsLoose(K,x);K.create=function(f=
{}){const {resolutionFactor:e=1,scales:b,size:k=256,spatialReference:r=I.WebMercator,numLODs:t=24}=f;if(!G.isValid(r)){f=[];if(b)for(var m=0;m<b.length;m++){var O=b[m];f.push(new H({level:m,scale:O,resolution:O}))}else for(m=5E-4,O=t-1;0<=O;O--)f.unshift(new H({level:O,scale:m,resolution:m})),m*=2;return new J({dpi:96,lods:f,origin:new E(0,0,r),size:[k,k],spatialReference:r})}m=G.getInfo(r);f=f.origin?new E({x:f.origin.x,y:f.origin.y,spatialReference:r}):m?new E({x:m.origin[0],y:m.origin[1],spatialReference:r}):
new E({x:0,y:0,spatialReference:r});m=1/(39.37*u.getMetersPerUnitForSR(r)*96);O=[];if(b)for(var P=0;P<b.length;P++){var V=b[P];O.push(new H({level:P,scale:V,resolution:V*m}))}else{var R=G.isGeographic(r)?512/k*5.916575275917094E8:256/k*5.91657527591555E8;P=Math.ceil(t/e);O.push(new H({level:0,scale:R,resolution:R*m}));for(V=1;V<P;V++)R/=2**e,O.push(new H({level:V,scale:R,resolution:R*m}))}return new J({dpi:96,lods:O,origin:f,size:[k,k],spatialReference:r})};var D=K.prototype;D.readOrigin=function(f,
e){return E.fromJSON({spatialReference:e.spatialReference,...f})};D.readSize=function(f,e){return[e.cols,e.rows]};D.writeSize=function(f,e){e.cols=f[0];e.rows=f[1]};D.zoomToScale=function(f){const e=this.scales;if(0>=f)return e[0];if(f>=e.length-1)return e[e.length-1];const b=Math.floor(f);return e[b]/(e[b]/e[b+1])**(f-b)};D.scaleToZoom=function(f){const e=this.scales,b=e.length-1;let k=0;for(;k<b;k++){const r=e[k],t=e[k+1];if(r<=f)break;if(t===f)return k+1;if(r>f&&t<f)return k+Math.log(r/f)/Math.log(r/
t)}return k};D.snapScale=function(f,e=.95){f=this.scaleToZoom(f);return f%Math.floor(f)>=e?this.zoomToScale(Math.ceil(f)):this.zoomToScale(Math.floor(f))};D.tileAt=function(f,e,b,k){var r=this.lodAt(f);if(!r)return null;let t;if("number"===typeof e)t=e,e=b;else{if(G.equals(e.spatialReference,this.spatialReference))t=e.x,e=e.y;else{k=Q.project(e,this.spatialReference);if(h.isNone(k))return null;t=k.x;e=k.y}k=b}b=r.resolution*this.size[0];r=r.resolution*this.size[1];k||(k=new Y.TileKey(null,0,0,0,M.create()));
k.level=f;k.row=Math.floor((this.origin.y-e)/r+.001);k.col=Math.floor((t-this.origin.x)/b+.001);this.updateTileInfo(k);return k};D.updateTileInfo=function(f,e=J.ExtrapolateOptions.NONE){var b=this.lodAt(f.level);b||e!==J.ExtrapolateOptions.POWER_OF_TWO||(e=this.lods[this.lods.length-1],e.level<f.level&&(b=e));if(b){var k=f.level-b.level;e=b.resolution*this.size[0]/2**k;b=b.resolution*this.size[1]/2**k;f.id=`${f.level}/${f.row}/${f.col}`;f.extent||(f.extent=M.create());f.extent[0]=this.origin.x+f.col*
e;f.extent[1]=this.origin.y-(f.row+1)*b;f.extent[2]=f.extent[0]+e;f.extent[3]=f.extent[1]+b}};D.upsampleTile=function(f){const e=this._upsampleLevels[f.level];if(!e||-1===e.parentLevel)return!1;f.level=e.parentLevel;f.row=Math.floor(f.row/e.factor+.001);f.col=Math.floor(f.col/e.factor+.001);this.updateTileInfo(f);return!0};D.getTileBounds=function(f,e){var b=this.lodAt(e.level);if(null==b)return null;var {resolution:k}=b;b=k*this.size[0];k*=this.size[1];f[0]=this.origin.x+e.col*b;f[1]=this.origin.y-
(e.row+1)*k;f[2]=f[0]+b;f[3]=f[1]+k;return f};D.lodAt=function(f){return this._levelToLOD?.[f]??null};D.clone=function(){return J.fromJSON(this.write({}))};D.getOrCreateCompatible=function(f,e){if(256===this.size[0]&&256===this.size[1])return 256===f?this:null;const b=[],k=this.lods.length;for(let r=0;r<k;r++){const t=this.lods[r];b.push(new H({level:t.level,scale:t.scale,resolution:t.resolution*e}))}return new J({size:[f,f],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:b})};D._initializeUpsampleLevels=function(){const f=this.lods;this._upsampleLevels=[];let e=null;for(let b=0;b<f.length;b++){const k=f[b];this._upsampleLevels[k.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/k.resolution:0};e=k}};w._createClass(K,[{key:"isWrappable",get:function(){const {spatialReference:f,origin:e}=this;if(f&&e){const b=G.getInfo(f);return f.isWrappable&&!!b&&Math.abs(b.origin[0]-e.x)<=b.dx}return!1}},{key:"lods",
set:function(f){let e=0,b=0;const k=[],r=this._levelToLOD={};f&&(e=-Infinity,b=Infinity,f.forEach(t=>{k.push(t.scale);e=t.scale>e?t.scale:e;b=t.scale<b?t.scale:b;r[t.level]=t}));this._set("scales",k);this._set("minScale",e);this._set("maxScale",b);this._set("lods",f);this._initializeUpsampleLevels()}}]);return K}(g.JSONSupport);n.__decorate([v.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);n.__decorate([v.property({type:Number,json:{write:!0}})],g.prototype,"dpi",
void 0);n.__decorate([v.property({type:String,json:{read:d.read,write:d.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);n.__decorate([v.property({readOnly:!0})],g.prototype,"isWrappable",null);n.__decorate([v.property({type:E,json:{write:!0}})],g.prototype,"origin",void 0);n.__decorate([B.reader("origin")],g.prototype,"readOrigin",null);n.__decorate([v.property({type:[H],value:null,json:{write:!0}})],g.prototype,"lods",null);n.__decorate([v.property({readOnly:!0})],
g.prototype,"minScale",void 0);n.__decorate([v.property({readOnly:!0})],g.prototype,"maxScale",void 0);n.__decorate([v.property({readOnly:!0})],g.prototype,"scales",void 0);n.__decorate([v.property({cast:x=>Array.isArray(x)?x:"number"===typeof x?[x,x]:[256,256]})],g.prototype,"size",void 0);n.__decorate([B.reader("size",["rows","cols"])],g.prototype,"readSize",null);n.__decorate([T.writer("size",{cols:{type:l.Integer},rows:{type:l.Integer}})],g.prototype,"writeSize",null);n.__decorate([v.property({type:I,
json:{write:!0}})],g.prototype,"spatialReference",void 0);g=J=n.__decorate([z.subclass("esri.layers.support.TileInfo")],g);(function(x){x=x.ExtrapolateOptions||(x.ExtrapolateOptions={});x[x.NONE=0]="NONE";x[x.POWER_OF_TWO=1]="POWER_OF_TWO"})(g||(g={}));return g})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(w,n,d,g,h,u,v){var l;d=l=function(A){function B(z){z=A.call(this,z)||this;z.cols=null;z.level=0;z.levelValue=null;z.origin=null;z.resolution=0;z.rows=null;z.scale=0;return z}w._inheritsLoose(B,A);B.prototype.clone=function(){return new l({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return B}(d.JSONSupport);n.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],d.prototype,"cols",void 0);n.__decorate([g.property({type:h.Integer,json:{write:!0}})],d.prototype,"level",void 0);n.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);n.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"origin",void 0);n.__decorate([g.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);n.__decorate([g.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],d.prototype,"rows",void 0);n.__decorate([g.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=l=n.__decorate([v.subclass("esri.layers.support.LOD")],d)})},"esri/layers/support/TileKey":function(){define(["exports"],function(w){w.TileKey=function(n,d,g,h,u){this.id=n;this.level=d;this.row=g;this.col=h;this.extent=u};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/byteSizeEstimations ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(w,n,d,g,h,u,v,l,A,B,z,T,E,I,M,G,Q,H,Y,J,x){var K;w.TilemapCache=K=function(D){function f(b){b=D.call(this,b)||this;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2*u.ByteSizeUnit.MEGABYTES;b.request=g;b._prefetchingEnabled=!0;return b}n._inheritsLoose(f,D);var e=f.prototype;e.initialize=function(){this._tilemapCache=new B(this.cacheByteSize);this.addHandles([E.watch(()=>{const {layer:b}=this;return[b?.parsedUrl,b?.tileServers,b?.apiKey,b?.customParameters]},
()=>this._initializeTilemapDefinition()),E.watch(()=>this.layer?.tileInfo?.lods,b=>this._initializeAvailableLevels(b),E.syncAndInitial)]);this._initializeTilemapDefinition()};e.castLevels=function(b){return 2>=b?(A.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",b),3):b};e.fetchTilemap=function(b,k,r,t){if(!this._availableLevels[b])return Promise.reject(new v("tilemap-cache:level-unavailable",`Level ${b} is unavailable in the service`));const m=this._tmpTilemapDefinition;
if(b=this._tilemapFromCache(b,k,r,m))return Promise.resolve(b);const O=t&&t.signal;t={...t,signal:null};return new Promise((P,V)=>{T.onAbort(O,()=>V(T.createAbortError()));const R=x.tilemapDefinitionId(m);let X=this._pendingTilemapRequests[R];if(!X){X=x.Tilemap.fromDefinition(m,t).then(W=>{this._tilemapCache.put(R,W,W.byteSize);return W});const C=()=>delete this._pendingTilemapRequests[R];this._pendingTilemapRequests[R]=X;X.then(C,C)}X.then(P,V)})};e.getAvailability=function(b,k,r){return this._availableLevels[b]?
(b=this._tilemapFromCache(b,k,r,this._tmpTilemapDefinition))?b.getAvailability(k,r):"unknown":"unavailable"};e.fetchAvailability=function(b,k,r,t){return this._availableLevels[b]?this.fetchTilemap(b,k,r,t).catch(m=>m).then(m=>{if(m instanceof x.Tilemap){m=m.getAvailability(k,r);if("unavailable"===m)throw new v("tile-map:tile-unavailable","Tile is not available",{level:b,row:k,col:r});return m}if(T.isAbortError(m))throw m;return"unknown"}):Promise.reject(new v("tilemap-cache:level-unavailable",`Level ${b} is unavailable in the service`))};
e.fetchAvailabilityUpsample=function(b,k,r,t,m){t.level=b;t.row=k;t.col=r;const O=this.layer.tileInfo;O.updateTileInfo(t);const P=this.fetchAvailability(b,k,r,m).catch(V=>{if(T.isAbortError(V))throw V;if(O.upsampleTile(t))return this.fetchAvailabilityUpsample(t.level,t.row,t.col,t);throw V;});this._fetchAvailabilityUpsamplePrefetch(t.id,b,k,r,m,P);return P};e._fetchAvailabilityUpsamplePrefetch=function(){var b=n._asyncToGenerator(function*(k,r,t,m,O,P){if(this._prefetchingEnabled&&null!=k){var V=
`prefetch-${k}`;if(!this.handles.has(V)){var R=new AbortController;P.then(()=>R.abort(),()=>R.abort());var X=!1;this.handles.add({remove(){X||(X=!0,R.abort())}},V);yield I.waitTicks(10,R.signal).catch(()=>{});X||(X=!0,this.handles.remove(V));if(!T.isAborted(R))for(k=new J.TileKey(k,r,t,m),O={...O,signal:R.signal},r=this.layer.tileInfo,t=0;K._prefetches.length<K._maxPrefetch&&r.upsampleTile(k);++t){const C=this.fetchAvailability(k.level,k.row,k.col,O);K._prefetches.push(C);m=()=>{K._prefetches.removeUnordered(C)};
C.then(m,m)}}}});return function(k,r,t,m,O,P){return b.apply(this,arguments)}}();e._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var {parsedUrl:b,apiKey:k,customParameters:r}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:b.path,query:M.objectToQuery({...b.query,...r,token:k??b.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};e._tilemapFromCache=function(b,
k,r,t){t.level=b;t.row=k-k%this.size;t.col=r-r%this.size;b=x.tilemapDefinitionId(t);return this._tilemapCache.get(b)};e._initializeAvailableLevels=function(b){this._availableLevels={};b&&b.forEach(k=>this._availableLevels[k.level]=!0)};n._createClass(f,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const b=this;return{get prefetchingEnabled(){return b._prefetchingEnabled},set prefetchingEnabled(k){b._prefetchingEnabled=k},hasTilemap(k,r,t){return!!b._tilemapFromCache(k,
r,t,b._tmpTilemapDefinition)}}}}]);return f}(l.HandleOwnerMixin(h));w.TilemapCache._maxPrefetch=4;w.TilemapCache._prefetches=new z({initialSize:K._maxPrefetch});d.__decorate([G.property({constructOnly:!0,type:Number})],w.TilemapCache.prototype,"levels",void 0);d.__decorate([Q.cast("levels")],w.TilemapCache.prototype,"castLevels",null);d.__decorate([G.property({readOnly:!0,type:Number})],w.TilemapCache.prototype,"size",null);d.__decorate([G.property({constructOnly:!0,type:Number})],w.TilemapCache.prototype,
"cacheByteSize",void 0);d.__decorate([G.property({constructOnly:!0})],w.TilemapCache.prototype,"layer",void 0);d.__decorate([G.property({constructOnly:!0})],w.TilemapCache.prototype,"request",void 0);w.TilemapCache=K=d.__decorate([Y.subclass("esri.layers.support.TilemapCache")],w.TilemapCache);Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(w){function n(h){return 32+h.length}function d(h){if(!h)return 0;if(Array.isArray(h)){var u=
h.length;if(0===u||"number"===typeof h[0])h=32+8*u;else{var v=32;for(let l=0;l<u;l++)v+=g(h[l]);h=v}return h}v=32;for(u in h)h.hasOwnProperty(u)&&(v+=g(h[u]));return v}function g(h){switch(typeof h){case "object":return d(h);case "string":return n(h);case "number":return 16;case "boolean":return 4;default:return 8}}w.ByteSizeUnit=void 0;(function(h){h[h.KILOBYTES=1024]="KILOBYTES";h[h.MEGABYTES=1048576]="MEGABYTES";h[h.GIGABYTES=1073741824]="GIGABYTES"})(w.ByteSizeUnit||(w.ByteSizeUnit={}));w.estimateAttributesObjectSize=
function(h){if(!h)return 0;let u=32;for(const v in h)if(h.hasOwnProperty(v)){const l=h[v];switch(typeof l){case "string":u+=n(l);break;case "number":u+=16;break;case "boolean":u+=4}}return u};w.estimateFixedArraySize=function(h,u){return 32+h.length*u};w.estimateNestedObjectSize=d;w.estimateNumberByteSize=function(h){return 16};w.estimateStringByteSize=n;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils",
"../../core/Error","../../core/lang"],function(w,n,d,g,h){function u(l){if("vector-tile"===l.service.type)var A=`${l.service.url}/tilemap/${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`;else A=l.service.tileServers,A=`${A&&A.length?A[l.row%A.length]:l.service.url}/tilemap/${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`;(l=l.service.query)&&(A=`${A}?${l}`);return A}let v=function(){function l(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}
var A=l.prototype;A.getAvailability=function(B,z){if("unknown"!==this._allAvailability)return this._allAvailability;B=(B-this.location.top)*this.location.width+(z-this.location.left);z=B>>3;const T=this._tileAvailabilityBitSet;return 0>z||z>T.length?"unknown":T[z]&1<<B%8?"available":"unavailable"};A._updateFromData=function(B){let z=!0,T=!0;const E=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let I=0;for(let M=0;M<B.length;M++){const G=M%8;B[M]?(T=!1,E[I]|=1<<G):z=!1;7===
G&&++I}T?this._allAvailability="unavailable":z?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=E,this.byteSize+=E.length)};l.fromDefinition=function(B,z){const T=B.service.request||n,{row:E,col:I,width:M,height:G}=B,Q={query:{f:"json"}};z=z?{...Q,...z}:Q;return T(u(B),z).then(H=>H.data).catch(H=>{if(H&&H.details&&422===H.details.httpStatus)return{location:{top:E,left:I,width:M,height:G},valid:!0,data:d.constant(M*G,0)};throw H;}).then(H=>{if(H.location&&
(H.location.top!==E||H.location.left!==I||H.location.width!==M||H.location.height!==G))throw new g("tilemap:location-mismatch","Tilemap response for different location than requested",{response:H,definition:{top:E,left:I,width:M,height:G}});return l.fromJSON(H)})};l.fromJSON=function(B){l._validateJSON(B);const z=new l;z.location=Object.freeze(h.clone(B.location));z._updateFromData(B.data);return Object.freeze(z)};l._validateJSON=function(B){if(!B||!B.location)throw new g("tilemap:missing-location",
"Location missing from tilemap response");if(!1===B.valid)throw new g("tilemap:invalid","Tilemap response was marked as invalid");if(!B.data)throw new g("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(B.data))throw new g("tilemap:data-mismatch","Data must be an array of numbers");if(B.data.length!==B.location.width*B.location.height)throw new g("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return l}();w.Tilemap=v;w.tilemapDefinitionId=
function(l){return`${l.level}/${l.row}/${l.col}/${l.width}/${l.height}`};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/ArcGISMapService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/promiseUtils ../../core/urlUtils ../../core/Version ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../support/commonProperties".split(" "),
function(w,n,d,g,h,u,v,l,A,B,z,T,E,I,M){w.ArcGISMapService=G=>{G=function(Q){function H(){var J=Q.apply(this,arguments)||this;J.capabilities=void 0;J.copyright=null;J.fullExtent=null;J.legendEnabled=!0;J.spatialReference=null;J.version=void 0;J._allLayersAndTablesPromise=null;J._allLayersAndTablesMap=null;return J}n._inheritsLoose(H,Q);var Y=H.prototype;Y.readCapabilities=function(J,x){var K=x.capabilities&&x.capabilities.split(",").map(P=>P.toLowerCase().trim());if(!K)return{operations:{supportsExportMap:!1,
supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var D=this.type;J="tile"!==D&&!!x.supportsDynamicLayers;const f=K.includes("query"),e=K.includes("map"),b=!!x.exportTilesAllowed,k=K.includes("tilemap");K=K.includes("data");const r="tile"!==D&&(!x.tileInfo||J),t="tile"!==D&&(!x.tileInfo||J);D="tile"!==D;var m=x.cimVersion&&v.Version.parse(x.cimVersion);const O=m?.since(1,4)??!1;m=m?.since(2,0)??!1;return{operations:{supportsExportMap:e,
supportsExportTiles:b,supportsIdentify:f,supportsQuery:K,supportsTileMap:k},exportMap:e?{supportsArcadeExpressionForLabeling:O,supportsSublayersChanges:D,supportsDynamicLayers:J,supportsSublayerVisibility:r,supportsSublayerDefinitionExpression:t,supportsCIMSymbols:m}:null,exportTiles:b?{maxExportTilesCount:+x.maxExportTilesCount}:null}};Y.readVersion=function(J,x){(J=x.currentVersion)||(J=x.hasOwnProperty("capabilities")||x.hasOwnProperty("tables")?10:x.hasOwnProperty("supportedImageFormatTypes")?
9.31:9.3);return J};Y.fetchSublayerInfo=function(){var J=n._asyncToGenerator(function*(x,K){try{return yield this.fetchAllLayersAndTables(K),this._allLayersAndTablesMap?.get(x)}catch{}});return function(x,K){return J.apply(this,arguments)}}();Y.fetchAllLayersAndTables=function(){var J=n._asyncToGenerator(function*(x){yield this.load(x);this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=g(u.urlToObject(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,
token:this.apiKey}}).then(D=>{this._allLayersAndTablesMap=new Map;for(const f of D.data.layers)this._allLayersAndTablesMap.set(f.id,f);return{result:D.data}},D=>({error:D})));const K=yield this._allLayersAndTablesPromise;h.throwIfAborted(x);if("result"in K)return K.result;throw K.error;});return function(x){return J.apply(this,arguments)}}();return H}(G);d.__decorate([l.property({readOnly:!0})],G.prototype,"capabilities",void 0);d.__decorate([z.reader("service","capabilities",["capabilities","exportTilesAllowed",
"maxExportTilesCount","supportsDynamicLayers","tileInfo"])],G.prototype,"readCapabilities",null);d.__decorate([l.property({json:{read:{source:"copyrightText"}}})],G.prototype,"copyright",void 0);d.__decorate([l.property({type:E})],G.prototype,"fullExtent",void 0);d.__decorate([l.property(M.id)],G.prototype,"id",void 0);d.__decorate([l.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],G.prototype,"legendEnabled",void 0);d.__decorate([l.property(M.popupEnabled)],
G.prototype,"popupEnabled",void 0);d.__decorate([l.property({type:I})],G.prototype,"spatialReference",void 0);d.__decorate([l.property({readOnly:!0})],G.prototype,"version",void 0);d.__decorate([z.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],G.prototype,"readVersion",null);return G=d.__decorate([T.subclass("esri.layers.mixins.ArcGISMapService")],G)};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(w,n){let d=function(){function g(u,v,l=""){this.major=u;this.minor=v;this._context=l}var h=g.prototype;h.lessThan=function(u,v){return this.major<u||u===this.major&&this.minor<v};h.since=function(u,v){return!this.lessThan(u,v)};h.validate=function(u){if(this.major!==u.major)throw new n((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:u});
};h.clone=function(){return new g(this.major,this.minor,this._context)};g.parse=function(u,v=""){const [l,A]=u.split(".");var B=/^\s*\d+\s*$/;if(!l||!l.match||!l.match(B))throw new n((v&&v+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:u});if(!A||!A.match||!A.match(B))throw new n((v&&v+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:u});u=parseInt(l,10);B=parseInt(A,10);return new g(u,B,v)};return g}();w.Version=
d;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/SublayersOwner":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(w,n,d,g,h,u,v,l,A,B,z,T,E,I,M,G){function Q(x,K){const D=[],f={};if(!x)return D;x.forEach(e=>{const b=new M;b.read(e,K);f[b.id]=b;null!=e.parentLayerId&&-1!==e.parentLayerId?(e=f[e.parentLayerId],e.sublayers||(e.sublayers=[]),e.sublayers.unshift(b)):D.unshift(b)});return D}function H(x,K){x&&x.forEach(D=>{K(D);D.sublayers&&D.sublayers.length&&H(D.sublayers,K)})}const Y=v.getLogger("esri.layers.TileLayer"),J=g.ofType(M);w.SublayersOwner=x=>{x=function(K){function D(...e){var b=K.call(this,
...e)||this;b.allSublayers=new h({getCollections:()=>[b.sublayers],getChildrenFunction(k){return k.sublayers}});b.sublayersSourceJSON={[I.OriginId.SERVICE]:{},[I.OriginId.PORTAL_ITEM]:{},[I.OriginId.WEB_SCENE]:{},[I.OriginId.WEB_MAP]:{}};b.addHandles(l.watch(()=>b.sublayers,(k,r)=>b._handleSublayersChange(k,r),l.sync));return b}n._inheritsLoose(D,K);var f=D.prototype;f.readSublayers=function(e,b){if(b&&e){var {sublayersSourceJSON:k}=this,r=I.nameToId(b.origin);if(!(r<I.OriginId.SERVICE||(k[r]={context:b,
visibleLayers:e.visibleLayers||k[r].visibleLayers,layers:e.layers||k[r].layers},r>I.OriginId.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var {sublayers:t,origin:m}=this.createSublayersForOrigin("web-document");e=T.getProperties(this);e.setDefaultOrigin(m);this._set("sublayers",new J(t));e.setDefaultOrigin("user")}}};f.findSublayerById=function(e){return this.allSublayers.find(b=>b.id===e)};f.createServiceSublayers=function(){return this.createSublayersForOrigin("service").sublayers};
f.createSublayersForOrigin=function(e){const b="web-document"===e?I.nameToId("web-map"):I.nameToId(e);let k=I.OriginId.SERVICE;e=this.sublayersSourceJSON[I.OriginId.SERVICE].layers;let r=this.sublayersSourceJSON[I.OriginId.SERVICE].context,t=null;var m=[I.OriginId.PORTAL_ITEM,I.OriginId.WEB_SCENE,I.OriginId.WEB_MAP].filter(C=>C<=b);for(var O of m)m=this.sublayersSourceJSON[O],G.isSublayerOverhaul(m.layers)&&(k=O,e=m.layers,r=m.context,m.visibleLayers&&(t={visibleLayers:m.visibleLayers,context:m.context}));
O=[I.OriginId.PORTAL_ITEM,I.OriginId.WEB_SCENE,I.OriginId.WEB_MAP].filter(C=>C>k&&C<=b);let P=null;for(var V of O){const {layers:C,visibleLayers:W,context:p}=this.sublayersSourceJSON[V];C&&(P={layers:C,context:p});W&&(t={visibleLayers:W,context:p})}V=Q(e,r);const R=new Map,X=new Set;if(P)for(const C of P.layers)R.set(C.id,C);if(t?.visibleLayers)for(const C of t.visibleLayers)X.add(C);H(V,C=>{P&&C.read(R.get(C.id),P.context);t&&C.read({defaultVisibility:X.has(C.id)},t.context)});return{origin:I.idToName(k),
sublayers:new J({items:V})}};f.read=function(e,b){K.prototype.read.call(this,e,b);this.readSublayers(e,b)};f._handleSublayersChange=function(e,b){b&&(b.forEach(k=>{k.parent=null;k.layer=null}),this.handles.remove("sublayers-owner"));e&&(e.forEach(k=>{k.parent=this;k.layer=this}),this.handles.add([e.on("after-add",({item:k})=>{k.parent=this;k.layer=this}),e.on("after-remove",({item:k})=>{k.parent=null;k.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",k=>
{Y.error(new u("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this}));k.preventDefault()}),"sublayers-owner"))};return D}(x);d.__decorate([A.property({readOnly:!0})],x.prototype,"allSublayers",void 0);d.__decorate([A.property({readOnly:!0,type:g.ofType(M)})],x.prototype,"serviceSublayers",void 0);d.__decorate([A.property({value:null,type:J,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],x.prototype,"sublayers",void 0);d.__decorate([A.property({readOnly:!0})],
x.prototype,"sublayersSourceJSON",void 0);return x=d.__decorate([E.subclass("esri.layers.mixins.SublayersOwner")],x)};w.forEachSublayer=H;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/PieChartRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/has ../../core/Identifiable ../../core/lang ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/MultiOriginJSONSupport ../../core/sql ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../../core/accessorSupport/utils ../graphics/sources/support/QueryTask ./FeatureType ./Field ./FieldsIndex ./LabelClass ./labelingInfo ./LayerFloorInfo ./serviceCapabilitiesUtils ./source/DataLayerSource ./source/MapLayerSource ../../rest/support/AttachmentQuery ../../rest/support/Query ../../support/popupUtils ../../geometry/Extent ../../geometry/support/typeUtils".split(" "),
function(w,n,d,g,h,u,v,l,A,B,z,T,E,I,M,G,Q,H,Y,J,x,K,D,f,e,b,k,r,t,m,O,P,V,R,X,C,W,p,L,S,Z,ba,ka,fa,sa,pa,la,ta,ua,va,wa,ma){function na(U){return null!=U&&"esriSMS"===U.type}function oa(U,da,F){U=this.originIdOf(da)>=C.nameToId(F.origin);return{ignoreOrigin:!0,allowNull:U,enabled:F?"map-image"===F.layer?.type&&(F.writeSublayerStructure||U):!1}}function qa(U,da,F){return{enabled:F?"tile"===F.layer?.type&&this._isOverridden(da):!1}}function ea(U,da,F){return{ignoreOrigin:!0,enabled:F&&F.writeSublayerStructure||
!1}}function ia(U,da,F){return{ignoreOrigin:!0,enabled:F?F.writeSublayerStructure||this.originIdOf(da)>=C.nameToId(F.origin):!1}}var ja;let xa=0;const ha=new Set;ha.add("layer");ha.add("parent");ha.add("loaded");ha.add("loadStatus");ha.add("loadError");ha.add("loadWarnings");g=ja=function(U){function da(a){a=U.call(this,a)||this;a.capabilities=void 0;a.fields=null;a.fullExtent=null;a.geometryType=null;a.globalIdField=null;a.legendEnabled=!0;a.objectIdField=null;a.popupEnabled=!0;a.popupTemplate=null;
a.sourceJSON=null;a.title=null;a.typeIdField=null;a.types=null;a._lastParsedUrl=null;return a}n._inheritsLoose(da,U);var F=da.prototype;F.load=function(){var a=n._asyncToGenerator(function*(c){var q=this;this.addResolvingPromise(n._asyncToGenerator(function*(){const {layer:y,source:N,url:ca}=q;if(!y&&!ca)throw new Y("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:q});var aa=null;!y||q.originIdOf("url")>C.OriginId.SERVICE||"data-layer"===N?.type?aa=(yield G(ca,
{responseType:"json",query:{f:"json"},...c})).data:(aa=q.id,"map-layer"===N?.type&&(aa=N.mapLayerId),aa=yield y.fetchSublayerInfo(aa,c));aa&&(q.sourceJSON=aa,q.read({layerDefinition:aa},{origin:"service"}))})());return this});return function(c){return a.apply(this,arguments)}}();F.readCapabilities=function(a,c){c=c.layerDefinition||c;const {operations:{supportsQuery:q,supportsQueryAttachments:y},query:{supportsFormatPBF:N},data:{supportsAttachment:ca}}=sa.getFeatureLayerCapabilities(c,this.url);return{exportMap:{supportsModification:!!c.canModifyLayer},
operations:{supportsQuery:q,supportsQueryAttachments:y},data:{supportsAttachment:ca},query:{supportsFormatPBF:N}}};F.readGlobalIdFieldFromService=function(a,c){c=c.layerDefinition||c;if(c.globalIdField)return c.globalIdField;if(c.fields)for(const q of c.fields)if("esriFieldTypeGlobalID"===q.type)return q.name};F.writeLabelingInfo=function(a,c,q,y){a&&a.length&&(c.layerDefinition={drawingInfo:{labelingInfo:a.map(N=>N.write({},y))}})};F.readMinScale=function(a,c){return c.minScale||c.layerDefinition&&
c.layerDefinition.minScale||0};F.readMaxScale=function(a,c){return c.maxScale||c.layerDefinition&&c.layerDefinition.maxScale||0};F.readObjectIdFieldFromService=function(a,c){c=c.layerDefinition||c;if(c.objectIdField)return c.objectIdField;if(c.fields)for(const q of c.fields)if("esriFieldTypeOID"===q.type)return q.name};F.readOpacity=function(a,c){a=c.layerDefinition;return 1-.01*((null!=a?.transparency?a.transparency:a?.drawingInfo?.transparency)??0)};F.writeOpacity=function(a,c,q,y){c.layerDefinition=
{drawingInfo:{transparency:100-100*a}}};F.writeParent=function(a,c){c.parentLayerId=this.parent&&this.parent!==this.layer?X.ensureInteger(this.parent.id):-1};F.castSublayers=function(a){return X.ensureType(H.ofType(ja),a)};F.writeSublayers=function(a,c,q){this.sublayers?.length&&(c[q]=this.sublayers.map(y=>y.id).toArray().reverse())};F.readTypeIdField=function(a,c){c=c.layerDefinition||c;let q=c.typeIdField;q&&c.fields&&(q=q.toLowerCase(),a=c.fields.find(y=>y.name.toLowerCase()===q))&&(q=a.name);
return q};F.writeVisible=function(a,c,q,y){c[q]=this.getAtOrigin("defaultVisibility","service")||a};F.clone=function(){const {store:a}=W.getProperties(this),c=new ja;W.getProperties(c).store=a.clone(ha);this.commitProperty("url");c._lastParsedUrl=this._lastParsedUrl;return c};F.createPopupTemplate=function(a){return va.createPopupTemplate(this,a)};F.createQuery=function(){return new ua({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};F.createFeatureLayer=function(){var a=n._asyncToGenerator(function*(){if(this.hasOwnProperty("sublayers"))return null;
const {layer:c}=this,q=c?.parsedUrl,y=new (yield new Promise((N,ca)=>w(["../FeatureLayer"],aa=>N(Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}))),ca))).default({url:q?.path});q&&this.source&&("map-layer"===this.source.type?y.layerId=this.source.mapLayerId:y.dynamicDataSource=this.source);null!=c?.refreshInterval&&(y.refreshInterval=c.refreshInterval);this.definitionExpression&&(y.definitionExpression=this.definitionExpression);this.floorInfo&&
(y.floorInfo=D.clone(this.floorInfo));this.originIdOf("labelingInfo")>C.OriginId.SERVICE&&(y.labelingInfo=D.clone(this.labelingInfo));this.originIdOf("labelsVisible")>C.OriginId.DEFAULTS&&(y.labelsVisible=this.labelsVisible);this.originIdOf("legendEnabled")>C.OriginId.DEFAULTS&&(y.legendEnabled=this.legendEnabled);this.originIdOf("visible")>C.OriginId.DEFAULTS&&(y.visible=this.visible);this.originIdOf("minScale")>C.OriginId.DEFAULTS&&(y.minScale=this.minScale);this.originIdOf("maxScale")>C.OriginId.DEFAULTS&&
(y.maxScale=this.maxScale);this.originIdOf("opacity")>C.OriginId.DEFAULTS&&(y.opacity=this.opacity);this.originIdOf("popupTemplate")>C.OriginId.DEFAULTS&&(y.popupTemplate=D.clone(this.popupTemplate));this.originIdOf("renderer")>C.OriginId.SERVICE&&(y.renderer=D.clone(this.renderer));"data-layer"===this.source?.type&&(y.dynamicDataSource=this.source.clone());this.originIdOf("title")>C.OriginId.DEFAULTS&&(y.title=this.title);"map-image"===c?.type&&c.originIdOf("customParameters")>C.OriginId.DEFAULTS&&
(y.customParameters=c.customParameters);"tile"===c?.type&&c.originIdOf("customParameters")>C.OriginId.DEFAULTS&&(y.customParameters=c.customParameters);return y});return function(){return a.apply(this,arguments)}}();F.getField=function(a){return this.fieldsIndex.get(a)};F.getFeatureType=function(a){const {typeIdField:c,types:q}=this;if(!c||!a)return null;const y=a.attributes?a.attributes[c]:void 0;if(null==y)return null;let N=null;q?.some(ca=>{const {id:aa}=ca;if(null==aa)return!1;aa.toString()===
y.toString()&&(N=ca);return!!N});return N};F.getFieldDomain=function(a,c){return(c=this.getFeatureType(c&&c.feature))&&(c=c.domains&&c.domains[a])&&"inherited"!==c.type?c:this._getLayerDomain(a)};F.queryAttachments=function(){var a=n._asyncToGenerator(function*(c,q){yield this.load();c=ta.from(c);const y=this.capabilities;if(!y?.data?.supportsAttachment)throw new Y("queryAttachments:not-supported","this layer doesn't support attachments");const {attachmentTypes:N,objectIds:ca,globalIds:aa,num:ya,
size:za,start:Aa,where:ra}=c;if(!y?.operations?.supportsQueryAttachments&&(0<N?.length||0<aa?.length||0<za?.length||ya||Aa||ra))throw new Y("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",c);if(!(ca?.length||aa?.length||ra))throw new Y("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",c);return this.queryTask.executeAttachmentQuery(c,q)});return function(c,
q){return a.apply(this,arguments)}}();F.queryFeatures=function(){var a=n._asyncToGenerator(function*(c=this.createQuery(),q){yield this.load();if(!this.capabilities.operations.supportsQuery)throw new Y("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new Y("queryFeatures:not-supported","this layer has no url.");c=yield this.queryTask.execute(c,{...q,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(c?.features)for(const y of c.features)y.sourceLayer=
this;return c});return function(){return a.apply(this,arguments)}}();F.toExportImageJSON=function(a){const c={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}};a=r.sqlAnd(a,this.definitionExpression);b.isSome(a)&&(c.definitionExpression=a);const q=["renderer","labelingInfo","opacity","labelsVisible"].reduce((y,N)=>{y[N]=this.originIdOf(N);return y},{});if(Object.keys(q).some(y=>q[y]>C.OriginId.SERVICE)){a=c.drawingInfo={};q.renderer>C.OriginId.SERVICE&&(a.renderer=this.renderer?
this.renderer.toJSON():null);q.labelsVisible>C.OriginId.SERVICE&&(a.showLabels=this.labelsVisible);if(this.labelsVisible&&q.labelingInfo>C.OriginId.SERVICE){!this.loaded&&this.labelingInfo.some(N=>!N.labelPlacement)&&e.getLogger(this.declaredClass).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' `+"and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.",{sublayer:this});
let y=this.labelingInfo;b.isSome(this.geometryType)&&(y=ka.validateLabelingInfo(this.labelingInfo,ma.featureGeometryTypeKebabDictionary.toJSON(this.geometryType)));a.labelingInfo=y.filter(N=>N.labelPlacement).map(N=>N.toJSON({origin:"service",layer:this.layer}));a.showLabels=!0}q.opacity>C.OriginId.SERVICE&&(a.transparency=100-100*this.opacity);this._assignDefaultSymbolColors(a.renderer)}return c};F._assignDefaultSymbolColors=function(a){this._forEachSimpleMarkerSymbols(a,c=>{c.color||"esriSMSX"!==
c.style&&"esriSMSCross"!==c.style||(c.color=c.outline&&c.outline.color?c.outline.color:[0,0,0,0])})};F._forEachSimpleMarkerSymbols=function(a,c){if(a){const q=("uniqueValueInfos"in a?a.uniqueValueInfos:"classBreakInfos"in a?a.classBreakInfos:null)??[];for(const y of q)na(y.symbol)&&c(y.symbol);"symbol"in a&&na(a.symbol)&&c(a.symbol);"defaultSymbol"in a&&na(a.defaultSymbol)&&c(a.defaultSymbol)}};F._setAndNotifyLayer=function(a,c){const q=this.layer,y=this._get(a);let N,ca;switch(a){case "definitionExpression":case "floorInfo":N=
"supportsSublayerDefinitionExpression";break;case "minScale":case "maxScale":case "visible":N="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":N="supportsDynamicLayers",ca="supportsModification"}const aa=W.getProperties(this).getDefaultOrigin();if("service"!==aa){if(N&&!1===this.layer?.capabilities?.exportMap?.[N]){this._logLockedError(a,`capability not available 'layer.capabilities.exportMap.${N}'`);return}if(ca&&!1===this.capabilities?.exportMap[ca]){this._logLockedError(a,
`capability not available 'capabilities.exportMap.${ca}'`);return}}"source"===a&&"not-loaded"!==this.loadStatus?this._logLockedError(a,"'source' can't be changed after calling sublayer.load()"):(this._set(a,c),"service"!==aa&&y!==c&&q&&q.emit&&q.emit("sublayer-update",{propertyName:a,target:this}))};F._handleSublayersChange=function(a,c){c&&(c.forEach(q=>{q.parent=null;q.layer=null}),this.handles.removeAll());a&&(a.forEach(q=>{q.parent=this;q.layer=this.layer}),this.handles.add([a.on("after-add",
({item:q})=>{q.parent=this;q.layer=this.layer}),a.on("after-remove",({item:q})=>{q.parent=null;q.layer=null}),a.on("before-changes",q=>{const y=this.layer?.capabilities?.exportMap?.supportsSublayersChanges;null==y||y||(e.getLogger(this.declaredClass).error(new Y("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),q.preventDefault())})]))};F._logLockedError=function(a,c){const {layer:q,declaredClass:y}=this;
e.getLogger(y).error(new Y("sublayer:locked",`Property '${String(a)}' can't be changed on Sublayer from the layer '${q?.id}'`,{reason:c,sublayer:this,layer:q}))};F._getLayerDomain=function(a){return(a=this.fieldsIndex.get(a))?a.domain:null};n._createClass(da,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"definitionExpression",set:function(a){this._setAndNotifyLayer("definitionExpression",a)}},{key:"fieldsIndex",get:function(){return new Z(this.fields||[])}},
{key:"floorInfo",set:function(a){this._setAndNotifyLayer("floorInfo",a)}},{key:"id",get:function(){const a=this._get("id");return null==a?xa++:a},set:function(a){this._get("id")!==a&&(!1===this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",a))}},{key:"labelingInfo",set:function(a){this._setAndNotifyLayer("labelingInfo",a)}},{key:"labelsVisible",set:function(a){this._setAndNotifyLayer("labelsVisible",
a)}},{key:"layer",set:function(a){this._set("layer",a);this.sublayers&&this.sublayers.forEach(c=>c.layer=a)}},{key:"listMode",set:function(a){this._set("listMode",a)}},{key:"minScale",set:function(a){this._setAndNotifyLayer("minScale",a)}},{key:"maxScale",set:function(a){this._setAndNotifyLayer("maxScale",a)}},{key:"effectiveScaleRange",get:function(){const {minScale:a,maxScale:c}=this;return{minScale:a,maxScale:c}}},{key:"opacity",set:function(a){this._setAndNotifyLayer("opacity",a)}},{key:"queryTask",
get:function(){if(!this.layer)return null;const {spatialReference:a}=this.layer,c="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:q,fieldsIndex:y}=this,N=x("featurelayer-pbf")&&q?.query.supportsFormatPBF;return new p({url:this.url,pbfSupported:N,fieldsIndex:y,gdbVersion:c,sourceSpatialReference:a,queryAttachmentsSupported:q?.operations?.supportsQueryAttachments??!1})}},{key:"renderer",set:function(a){if(a)for(const c of a.getSymbols())if(Q.isSymbol3D(c)){e.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");
break}this._setAndNotifyLayer("renderer",a)}},{key:"source",get:function(){return this._get("source")||new la.MapLayerSource({mapLayerId:this.id})},set:function(a){this._setAndNotifyLayer("source",a)}},{key:"sublayers",set:function(a){this._handleSublayersChange(a,this._get("sublayers"));this._set("sublayers",a)}},{key:"url",get:function(){const a=this.layer?.parsedUrl??this._lastParsedUrl;var c=this.source;if(!a)return null;this._lastParsedUrl=a;if("map-layer"===c?.type)return`${a.path}/${c.mapLayerId}`;
c={layer:JSON.stringify({source:this.source})};return`${a.path}/dynamicLayer?${t.objectToQuery(c)}`},set:function(a){this._overrideIfSome("url",a)}},{key:"visible",set:function(a){this._setAndNotifyLayer("visible",a)}}]);return da}(J.HandleOwnerMixin(k.MultiOriginJSONMixin(K.IdentifiableMixin(f))));g.test={isMapImageLayerOverridePolicy:U=>U===ea||U===oa,isTileImageLayerOverridePolicy:U=>U===qa};d.__decorate([m.property({readOnly:!0})],g.prototype,"capabilities",void 0);d.__decorate([P.reader("service",
"capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],g.prototype,"readCapabilities",null);d.__decorate([m.property()],g.prototype,"defaultPopupTemplate",null);d.__decorate([m.property({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:oa}}})],g.prototype,"definitionExpression",null);d.__decorate([m.property({type:[S],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],g.prototype,"fields",void 0);
d.__decorate([m.property({readOnly:!0})],g.prototype,"fieldsIndex",null);d.__decorate([m.property({type:fa,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:oa},origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"floorInfo",null);d.__decorate([m.property({type:wa,json:{read:{source:"layerDefinition.extent"}}})],g.prototype,"fullExtent",void 0);d.__decorate([m.property({type:ma.featureGeometryTypeKebabDictionary.apiValues,
json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:ma.featureGeometryTypeKebabDictionary.read}}}}})],g.prototype,"geometryType",void 0);d.__decorate([m.property({type:String})],g.prototype,"globalIdField",void 0);d.__decorate([P.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],g.prototype,"readGlobalIdFieldFromService",null);d.__decorate([m.property({type:X.Integer,json:{write:{ignoreOrigin:!0}}})],g.prototype,"id",null);d.__decorate([m.property({value:null,
type:[ba],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ea}}})],g.prototype,"labelingInfo",null);d.__decorate([R.writer("labelingInfo")],g.prototype,"writeLabelingInfo",null);d.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ea}}})],g.prototype,"labelsVisible",null);d.__decorate([m.property({value:null})],
g.prototype,"layer",null);d.__decorate([m.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:ia}}})],g.prototype,"legendEnabled",void 0);d.__decorate([m.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"listMode",null);d.__decorate([m.property({type:Number,value:0,json:{write:{overridePolicy:ea}}})],g.prototype,"minScale",
null);d.__decorate([P.reader("minScale",["minScale","layerDefinition.minScale"])],g.prototype,"readMinScale",null);d.__decorate([m.property({type:Number,value:0,json:{write:{overridePolicy:ea}}})],g.prototype,"maxScale",null);d.__decorate([P.reader("maxScale",["maxScale","layerDefinition.maxScale"])],g.prototype,"readMaxScale",null);d.__decorate([m.property({readOnly:!0})],g.prototype,"effectiveScaleRange",null);d.__decorate([m.property({type:String})],g.prototype,"objectIdField",void 0);d.__decorate([P.reader("service",
"objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],g.prototype,"readObjectIdFieldFromService",null);d.__decorate([m.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ea}}})],g.prototype,"opacity",null);d.__decorate([P.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],g.prototype,"readOpacity",null);d.__decorate([R.writer("opacity")],g.prototype,"writeOpacity",null);d.__decorate([m.property({json:{type:X.Integer,
write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ea}}})],g.prototype,"parent",void 0);d.__decorate([R.writer("parent")],g.prototype,"writeParent",null);d.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(U,da){return!da.disablePopup}},write:{target:"disablePopup",overridePolicy:ia,writer(U,da,F){da[F]=!U}}}})],g.prototype,"popupEnabled",void 0);d.__decorate([m.property({type:h,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:ia}}})],
g.prototype,"popupTemplate",void 0);d.__decorate([m.property({readOnly:!0})],g.prototype,"queryTask",null);d.__decorate([m.property({types:M.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ea},origins:{"web-scene":{types:M.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ea}}}}})],g.prototype,"renderer",null);d.__decorate([m.property({types:{key:"type",base:null,typeMap:{"data-layer":pa.DataLayerSource,"map-layer":la.MapLayerSource}},
cast(U){if(U){if("mapLayerId"in U)return X.ensureClass(la.MapLayerSource,U);if("dataSource"in U)return X.ensureClass(pa.DataLayerSource,U)}return U},json:{name:"layerDefinition.source",write:{overridePolicy:ea}}})],g.prototype,"source",null);d.__decorate([m.property()],g.prototype,"sourceJSON",void 0);d.__decorate([m.property({value:null,json:{type:[X.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ea}}})],g.prototype,"sublayers",null);d.__decorate([O.cast("sublayers")],g.prototype,
"castSublayers",null);d.__decorate([R.writer("sublayers")],g.prototype,"writeSublayers",null);d.__decorate([m.property({type:String,json:{name:"name",write:{overridePolicy:ia}}})],g.prototype,"title",void 0);d.__decorate([m.property({type:String})],g.prototype,"typeIdField",void 0);d.__decorate([P.reader("typeIdField",["layerDefinition.typeIdField"])],g.prototype,"readTypeIdField",null);d.__decorate([m.property({type:[L],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],g.prototype,
"types",void 0);d.__decorate([m.property({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:qa}}})],g.prototype,"url",null);d.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ea}}})],g.prototype,"visible",null);d.__decorate([R.writer("visible")],g.prototype,"writeVisible",null);return g=ja=d.__decorate([V.subclass("esri.layers.support.Sublayer")],g)})},"esri/layers/support/sublayerUtils":function(){define(["exports",
"../../core/maybe","../../core/accessorSupport/PropertyOrigin"],function(w,n,d){function g(h,u){if(!h||!h.length||n.isNone(u))return!0;u=u.slice().reverse().flatten(({sublayers:A})=>A&&A.toArray().reverse()).map(A=>A.id).toArray();if(h.length>u.length)return!1;let v=0;const l=u.length;for(const {id:A}of h){for(;v<l&&u[v]!==A;)v++;if(v>=l)return!1}return!0}w.isExportDynamic=function(h,u,v){return h.some(l=>{const A=l.source;return!(!A||"map-layer"===A.type&&A.mapLayerId===l.id&&(n.isNone(A.gdbVersion)||
A.gdbVersion===v))||l.originIdOf("renderer")>d.OriginId.SERVICE||l.originIdOf("labelingInfo")>d.OriginId.SERVICE||l.originIdOf("opacity")>d.OriginId.SERVICE||l.originIdOf("labelsVisible")>d.OriginId.SERVICE})?!0:!g(h,u)};w.isSublayerOverhaul=function(h){return!!h&&h.some(u=>null!=u.minScale||u.layerDefinition&&null!=u.layerDefinition.minScale)};w.shouldWriteSublayerStructure=function(h,u,v){return u.flatten(({sublayers:l})=>l).length!==h.length||h.some(l=>l.originIdOf("minScale")>v||l.originIdOf("maxScale")>
v||l.originIdOf("renderer")>v||l.originIdOf("labelingInfo")>v||l.originIdOf("opacity")>v||l.originIdOf("labelsVisible")>v||l.originIdOf("source")>v)?!0:!g(h,u)};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Error"],function(w,n,d){function g(){g=n._asyncToGenerator(function*(h,u){try{return yield createImageBitmap(h)}catch(v){throw new d("request:server",`Unable to load ${u}`,
{url:u,error:v});}});return g.apply(this,arguments)}w.createBitmap=function(h,u){return g.apply(this,arguments)};Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/HandleOwner ../core/loadAll ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayerUrl ./support/commonProperties ./support/imageBitmapUtils ./support/Sublayer".split(" "),function(w,
n,d,g,h,u,v,l,A,B,z,T,E,I,M,G,Q,H,Y,J,x,K,D,f,e,b,k,r,t,m,O,P,V){const R="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Elevation/World_Hillshade_Dark Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");h=function(X){function C(...p){p=
X.call(this,...p)||this;p.listMode="show";p.isReference=null;p.operationalLayerType="ArcGISTiledMapServiceLayer";p.resampling=!0;p.sourceJSON=null;p.spatialReference=null;p.path=null;p.sublayers=null;p.type="tile";p.url=null;return p}w._inheritsLoose(C,X);var W=C.prototype;W.normalizeCtorArgs=function(p,L){return"string"===typeof p?{url:p,...L}:p};W.load=function(p){const L=v.isSome(p)?p.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},p).catch(A.throwIfAbortError).then(()=>
this._fetchService(L)));return Promise.resolve(this)};W.readSpatialReference=function(p,L){return(p=p||L.tileInfo&&L.tileInfo.spatialReference)&&Q.fromJSON(p)};W.writeSublayers=function(p,L,S,Z){if(this.loaded&&p){p=p.slice().reverse().flatten(({sublayers:fa})=>fa&&fa.toArray().reverse()).toArray();var ba=[],ka={writeSublayerStructure:!1,...Z};p.forEach(fa=>{fa=fa.write({},ka);ba.push(fa)});ba.some(fa=>1<Object.keys(fa).length)&&(L.layers=ba)}};W.castTileServers=function(p){return Array.isArray(p)?
p.map(L=>B.urlToObject(L).path):null};W.fetchTile=function(p,L,S,Z={}){({signal:Z}=Z);p=this.getTileUrl(p,L,S);return d(p,{responseType:"image",signal:Z,query:{...this.refreshParameters}}).then(ba=>ba.data)};W.fetchImageBitmapTile=function(){var p=w._asyncToGenerator(function*(L,S,Z,ba={}){({signal:ba}=ba);L=this.getTileUrl(L,S,Z);({data:S}=yield d(L,{responseType:"blob",signal:ba,query:{...this.refreshParameters}}));return P.createBitmap(S,L)});return function(L,S,Z){return p.apply(this,arguments)}}();
W.getTileUrl=function(p,L,S){const Z=B.objectToQuery({...this.parsedUrl?.query,blankTile:!this.tilemapCache&&this.supportsBlankTile?!1:null,...this.customParameters,token:this.apiKey}),ba=this.tileServers;return`${ba&&ba.length?ba[L%ba.length]:this.parsedUrl?.path}/tile/${p}/${L}/${S}${Z?"?"+Z:""}`};W.loadAll=function(){return u.loadAll(this,p=>{p(this.allSublayers)})};W._fetchService=function(p){return(new Promise((L,S)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new g("tile-layer:unsupported-url",
"use ImageryTileLayer to open a tiled image service");L({data:this.sourceJSON})}else{if(!this.parsedUrl)throw new g("tile-layer:undefined-url","layer's url is not defined");var Z=m.parse(this.parsedUrl.path);if(v.isSome(Z)&&"ImageServer"===Z.serverType)throw new g("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");d(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:p}).then(L,S)}})).then(L=>
{let S=this.url;L.ssl&&(S=this.url=S.replace(/^http:/i,"https:"));this.sourceJSON=L.data;this.read(L.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!m.isHostedAgolService(S))return this._fetchServerVersion(S,p).then(Z=>{this.read({currentVersion:Z})}).catch(()=>{})})};W._fetchServerVersion=function(p,L){if(!m.isArcGISUrl(p))return Promise.reject();p=p.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return d(p,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",
signal:L}).then(S=>{if(S.data&&S.data.currentVersion)return S.data.currentVersion;throw new g("tile-layer:version-not-available");})};W._getMapName=function(p){return(p=p.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))?p[2]:void 0};W._getDefaultAttribution=function(p){if(null==p)return null;let L;p=p.toLowerCase();for(let S=0,Z=R.length;S<Z;S++)if(L=R[S],L.toLowerCase().includes(p))return B.makeAbsolute("//static.arcgis.com/attribution/"+
L);return null};W._getDefaultTileServers=function(p){if(null==p)return[];const L=-1!==p.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),S=-1!==p.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return L||S?[p,p.replace(L?/server\.arcgisonline/i:/services\.arcgisonline/i,L?"services.arcgisonline":"server.arcgisonline")]:[]};w._createClass(C,[{key:"attributionDataUrl",get:function(){const p=this.parsedUrl?.path.toLowerCase();return p?this._getDefaultAttribution(this._getMapName(p)):null}},
{key:"tileServers",get:function(){return this._getDefaultTileServers(this.parsedUrl?.path)}},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile.__isDefault__}}]);return C}(D.BlendLayer(t.SublayersOwner(r.ScaleRangeLayer(e.OperationalLayer(b.PortalLayer(J.ArcGISCachedService(x.ArcGISMapService(K.ArcGISService(l.MultiOriginJSONMixin(h.HandleOwnerMixin(k.RefreshableLayer(Y.APIKeyMixin(f.CustomParametersMixin(H))))))))))))));n.__decorate([z.property({readOnly:!0})],h.prototype,"attributionDataUrl",
null);n.__decorate([z.property({type:["show","hide","hide-children"]})],h.prototype,"listMode",void 0);n.__decorate([z.property({json:{read:!0,write:!0}})],h.prototype,"blendMode",void 0);n.__decorate([z.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],h.prototype,"isReference",void 0);n.__decorate([z.property({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],h.prototype,"operationalLayerType",void 0);n.__decorate([z.property({type:Boolean})],h.prototype,
"resampling",void 0);n.__decorate([z.property()],h.prototype,"sourceJSON",void 0);n.__decorate([z.property({type:Q})],h.prototype,"spatialReference",void 0);n.__decorate([I.reader("spatialReference",["spatialReference","tileInfo"])],h.prototype,"readSpatialReference",null);n.__decorate([z.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],h.prototype,"path",void 0);n.__decorate([z.property({readOnly:!0})],h.prototype,"sublayers",void 0);n.__decorate([G.writer("sublayers",
{layers:{type:[V]}})],h.prototype,"writeSublayers",null);n.__decorate([z.property({json:{read:!1,write:!1}})],h.prototype,"popupEnabled",void 0);n.__decorate([z.property()],h.prototype,"tileServers",null);n.__decorate([T.cast("tileServers")],h.prototype,"castTileServers",null);n.__decorate([z.property({readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0);n.__decorate([z.property(O.url)],h.prototype,"url",void 0);h=n.__decorate([M.subclass("esri.layers.TileLayer")],h);h.prototype.fetchTile.__isDefault__=
!0;return h});