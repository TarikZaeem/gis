// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageBitmapUtils ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageAreaParameters ../../rest/support/ImageDistanceParameters ../../rest/support/ImageHeightParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImagePointParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f,w,c,k,u,B,a,g,r,C,d,e,n,A,D,G,y,E,J,x,q,H,T,Z,V,I,L,U,ba,ea,Y,X,N,W,ca,da,fa,ja,ia,ra,ta,qa,oa,ma,xa,ua,Ba,za,Fa,Ca,Ia,Aa,Ma,La,Na,Wa,Xa,$a,ab,bb,cb,Ta){function db(pa){return pa?(pa=JSON.stringify(pa).match(/"rasterFunction":"(.*?")/gi)?.map(Ga=>Ga.replace('"rasterFunction":"',"").replace('"',"")))?pa.join("/"):null:null}const Ua=S.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",
UNKNOWN:"unknown"}),eb=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),fb=f.ensureRange(w.ensureNumber,{min:0,max:255});K.ArcGISImageService=pa=>{function Ga(Oa){return Oa?.path??""}pa=function(Oa){function Qa(){var P=Oa.apply(this,arguments)||this;P._functionRasterInfos={};P._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};P._cachedRendererJson=null;P._serviceSupportsMosaicRule=null;P._rasterAttributeTableFieldPrefix="Raster.";P.adjustAspectRatio=null;P.bandIds=
void 0;P.capabilities=null;P.compressionQuality=void 0;P.compressionTolerance=.01;P.copyright=null;P.defaultMosaicRule=null;P.definitionExpression=null;P.exportImageServiceParameters=null;P.rasterInfo=null;P.fields=null;P.fullExtent=null;P.hasMultidimensions=!1;P.imageMaxHeight=4100;P.imageMaxWidth=4100;P.interpolation=void 0;P.minScale=0;P.maxScale=0;P.multidimensionalInfo=null;P.multidimensionalSubset=null;P.noData=null;P.noDataInterpretation=void 0;P.objectIdField=null;P.geometryType="polygon";
P.typeIdField=null;P.types=[];P.pixelFilter=null;P.raster=void 0;P.sourceType=null;P.viewId=void 0;P.symbolizer=null;P.rasterFunctionInfos=null;P.serviceDataType=null;P.spatialReference=null;P.pixelType=null;P.serviceRasterInfo=null;P.sourceJSON=null;P.url=null;P.version=void 0;return P}t._inheritsLoose(Qa,Oa);var la=Qa.prototype;la.initialize=function(){this._set("exportImageServiceParameters",new g.ExportImageServiceParameters({layer:this}))};la.readServiceSupportsMosaicRule=function(P,M){return this._isMosaicRuleSupported(M)};
la.readBandIds=function(P,M){if(Array.isArray(P)&&0<P.length&&P.every(aa=>"number"===typeof aa))return P};la.readCapabilities=function(P,M){return this._readCapabilities(M)};la.writeCompressionQuality=function(P,M,aa){null!=P&&"lerc"!==this.format&&(M[aa]=P)};la.writeCompressionTolerance=function(P,M,aa){"lerc"===this.format&&null!=P&&(M[aa]=P)};la.readDefaultMosaicRule=function(P,M){return this._serviceSupportsMosaicRule?n.fromJSON(M):null};la.readFormat=function(P,M){return"esriImageServiceDataTypeVector-UV"===
M.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===M.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};la.readMinScale=function(P,M){return null!=M.minLOD&&null!=M.maxLOD?P:0};la.readMaxScale=function(P,M){return null!=M.minLOD&&null!=M.maxLOD?P:0};la.readMosaicRule=function(P,M){return(P=P||M.mosaicRule)?n.fromJSON(P):this._isMosaicRuleSupported(M)?n.fromJSON(M):null};la.writeMosaicRule=function(P,M,aa){P=this.mosaicRule;const ha=this.definitionExpression;P?ha&&ha!==P.where&&
(P=P.clone(),P.where=ha):ha&&(P=new n({where:ha}));this._isValidCustomizedMosaicRule(P)&&(M[aa]=P.toJSON())};la.writeNoData=function(P,M,aa){null!=P&&"number"===typeof P&&(M[aa]=fb(P))};la.readObjectIdField=function(P,M){P||(P=(P=M.fields.filter(aa=>"esriFieldTypeOID"===aa.type||"oid"===aa.type))&&P[0]&&P[0].name);return P};la.readSourceType=function(P,M){return this._isMosaicDataset(M)?"mosaic-dataset":"raster-dataset"};la.readRenderer=function(P,M,aa){P=M?.layerDefinition?.drawingInfo?.renderer;
aa=R.read(P,aa);if(null==aa)return null;"vector-field"===aa.type&&M.symbolTileSize&&!P.symbolTileSize&&(aa.symbolTileSize=M.symbolTileSize);e.isSupportedRendererType(aa)||l.getLogger(this.declaredClass).warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return aa};la.writeRenderer=function(P,M,aa){M.layerDefinition=M.layerDefinition||{};M.layerDefinition.drawingInfo=M.layerDefinition.drawingInfo||{};M.layerDefinition.drawingInfo.renderer=P.toJSON();"vector-field"===P.type&&
(M.symbolTileSize=P.symbolTileSize)};la.readRenderingRule=function(P,M){P=M.rasterFunctionInfos;return M.renderingRule||P&&P.length&&"None"!==P[0].name?this._isRFTJson(M.renderingRule)?y.fromJSON({rasterFunctionDefinition:M.renderingRule}):y.fromJSON(M.renderingRule||{rasterFunctionInfos:M.rasterFunctionInfos}):null};la.writeRenderingRule=function(P,M,aa){P=P.toJSON();M[aa]=P.rasterFunctionDefinition?P.rasterFunctionDefinition:P};la.readSpatialReference=function(P,M){return(P=P||M.extent.spatialReference)?
Ta.fromJSON(P):null};la.readPixelType=function(P){return Ua.fromJSON(P)||P};la.writePixelType=function(P,M,aa){if(b.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)M[aa]=Ua.toJSON(P)};la.readVersion=function(P,M){(P=M.currentVersion)||(P=M.hasOwnProperty("fields")||M.hasOwnProperty("timeInfo")?10:9.3);return P};la.applyFilter=function(P){let M=P;this.pixelFilter&&(M=this._clonePixelData(P),this.pixelFilter(M));return M};la.applyRenderer=function(){var P=t._asyncToGenerator(function*(M,
aa){var ha=M;const {renderer:ka,symbolizer:na,pixelFilter:wa,bandIds:sa}=this;if(!this._isPicture()&&ka&&na&&!wa){ha=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(ka.toJSON());const ya=this._rasterJobHandler.instance;ya?(ha&&(na.bind(),yield ya.updateSymbolizer(na,aa),this._cachedRendererJson=ka.toJSON()),aa=yield ya.symbolize({bandIds:sa,...M},aa),ha={extent:M.extent,pixelBlock:aa}):ha={extent:M.extent,pixelBlock:na.symbolize({bandIds:sa,...M})}}return ha});return function(M,aa){return P.apply(this,
arguments)}}();la.destroy=function(){this._shutdownJobHandler()};la.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};la.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};la.computeAngles=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsComputeAngles)throw new O("imagery-layer:compute-angles","this operation is not supported on the input image service");
M=w.ensureClass(Aa,M).clone();return V.computeAngles(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.computePixelSpaceLocations=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsComputePixelLocation)throw new O("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");M=w.ensureClass($a,M).clone();return V.computePixelSpaceLocations(this.url,
M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.computeHistograms=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsComputeHistograms)throw new O("imagery-layer:compute-histograms","this operation is not supported on the input image service");M=w.ensureClass(Wa,M).clone();this._applyMosaicAndRenderingRules(M);return V.computeHistograms(this.url,M,this._getRequestOptions(aa))});return function(M,
aa){return P.apply(this,arguments)}}();la.computeStatisticsHistograms=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsComputeStatisticsHistograms)throw new O("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");M=w.ensureClass(Wa,M).clone();this._applyMosaicAndRenderingRules(M);return V.computeStatisticsHistograms(this.url,M,this._getRequestOptions(aa))});return function(M,
aa){return P.apply(this,arguments)}}();la.measureHeight=function(){var P=t._asyncToGenerator(function*(M,aa){const ha=yield this._fetchCapabilities(aa?.signal);if(!("base-and-top"===M.operationType?ha.mensuration.supportsHeightFromBaseAndTop:"base-and-top-shadow"===M.operationType?ha.mensuration.supportsHeightFromBaseAndTopShadow:ha.mensuration.supportsHeightFromTopAndTopShadow))throw new O("imagery-layer:measure-height","this operation is not supported on the input image service");M=w.ensureClass(Na,
M).clone();this._applyMosaicAndRenderingRules(M);return V.measureHeight(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.measureAreaAndPerimeter=function(){var P=t._asyncToGenerator(function*(M,aa){const ha=yield this._fetchCapabilities(aa?.signal);if(!ha.mensuration.supportsAreaAndPerimeter||M.is3D&&!ha.mensuration.supports3D)throw new O("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");M=
w.ensureClass(Ma,M).clone();this._applyMosaicAndRenderingRules(M);return V.measureAreaAndPerimeter(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.measureDistanceAndAngle=function(){var P=t._asyncToGenerator(function*(M,aa){const ha=yield this._fetchCapabilities(aa?.signal);if(!ha.mensuration.supportsDistanceAndAngle||M.is3D&&!ha.mensuration.supports3D)throw new O("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");
M=w.ensureClass(La,M).clone();this._applyMosaicAndRenderingRules(M);return V.measureDistanceAndAngle(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.measurePointOrCentroid=function(){var P=t._asyncToGenerator(function*(M,aa){const ha=yield this._fetchCapabilities(aa?.signal);if(!ha.mensuration.supportsPointOrCentroid||M.is3D&&!ha.mensuration.supports3D)throw new O("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");
M=w.ensureClass(ab,M).clone();this._applyMosaicAndRenderingRules(M);return V.measurePointOrCentroid(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.getField=function(P){const {fieldsIndex:M}=this;return b.isSome(M)?M.get(P):void 0};la.getFieldDomain=function(P,M){return(P=this.getField(P))?P.domain:null};la.fetchImage=function(){var P=t._asyncToGenerator(function*(M,aa,ha,ka={}){if(null==M||null==aa||null==ha)throw new O("imagery-layer:fetch-image",
"Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var na=yield this.generateRasterInfo(this.renderingRule,{signal:ka.signal});na&&(this.rasterInfo=na)}na=this.getExportImageServiceParameters(M,aa,ha,ka.timeExtent);if(null==na){if(ka.requestAsImageElement&&this._canRequestImageElement(this.format))return M=document.createElement("canvas"),M.width=aa,M.height=ha,ka.returnImageBitmap?{imageBitmap:yield d.createBitmap(M,
`${Ga(this.parsedUrl)}/exportImage`)}:{imageOrCanvasElement:M};const {bandIds:sa,rasterInfo:ya}=this;ka=(sa?.length||ya.bandCount)??0;na=aa*ha;var wa=ya.pixelType;const va=[];for(let Da=0;Da<ka;Da++)va.push(D.createEmptyBand(wa,na));return{pixelData:{pixelBlock:new D({width:aa,height:ha,pixels:va,mask:new Uint8Array(na),pixelType:wa}),extent:M}}}wa=!!ka.requestAsImageElement&&!this.pixelFilter;return this._requestArrayBuffer({imageServiceParameters:na,imageProps:{extent:M,width:aa,height:ha,format:this.format},
requestAsImageElement:wa,returnImageBitmap:wa&&!!ka.returnImageBitmap,signal:ka.signal})});return function(M,aa,ha){return P.apply(this,arguments)}}();la.fetchKeyProperties=function(P){return Q(Ga(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?P?.renderingRule:null})}).then(M=>M.data)};la.fetchRasterAttributeTable=function(P){return 10.1>this.version?Promise.reject(new O("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Q(Ga(this.parsedUrl)+
"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?P?.renderingRule:null})}).then(M=>qa.fromJSON(M.data))};la.getCatalogItemRasterInfo=function(P,M){const aa=this._getQueryParams();M={...M,query:aa};return Ia.getCatalogItemRasterInfo(Ga(this.parsedUrl),P,M)};la.getCatalogItemICSInfo=function(){var P=t._asyncToGenerator(function*(M,aa){var {data:ha}=yield Q(Ga(this.parsedUrl)+"/"+M+"/info/ics",{query:this._getQueryParams(),...aa});if(ha=ha&&ha.ics){var ka=null;try{ka=
(yield Q(Ga(this.parsedUrl)+"/"+M+"/info",{query:this._getQueryParams(),...aa})).data.extent}catch{}if(!ka||!ka.spatialReference)return{ics:ha,icsToPixelTransform:null,icsExtent:null,northDirection:null};var na=10.7<=this.version?Q(Ga(this.parsedUrl)+"/"+M+"/info/icstopixel",{query:this._getQueryParams(),...aa}).then(Ea=>Ea.data).catch(()=>({})):{},wa=ka.spatialReference,sa={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ka]}),inSR:wa.wkid||JSON.stringify(wa),outSR:"0:"+
M};sa=Q(Ga(this.parsedUrl)+"/project",{query:this._getQueryParams(sa),...aa}).then(Ea=>Ea.data).catch(()=>({}));var ya=(ka.xmin+ka.xmax)/2,va=(ka.ymax-ka.ymin)/6;ka=ka.ymin+va;var Da=[];for(let Ea=0;5>Ea;Ea++)Da.push({x:ya,y:ka+va*Ea});M={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Da}),inSR:wa.wkid||JSON.stringify(wa),outSR:"0:"+M};aa=Q(Ga(this.parsedUrl)+"/project",{query:this._getQueryParams(M),...aa}).then(Ea=>Ea.data).catch(()=>({}));M=yield Promise.all([na,sa,aa]);
aa=M[0].ipxf;null==aa&&(na=ha.geodataXform?.xf_0,"topup"===na?.name?.toLowerCase()&&6===na?.coefficients?.length&&(aa={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:na.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(na=W.fromJSON(M[1]&&M[1].geometries&&M[1].geometries[0]))na.spatialReference=new Ta({wkid:0,imageCoordinateSystem:ha});M=M[2].geometries?M[2].geometries.filter(Ea=>null!=Ea&&null!=Ea.x&&null!=Ea.y&&"NaN"!==Ea.x&&"NaN"!==Ea.y):[];sa=M.length;
if(3>sa)return{ics:ha,icsToPixelTransform:aa,icsExtent:na,northDirection:null};ka=va=ya=wa=0;for(Da=0;Da<sa;Da++)wa+=M[Da].x,ya+=M[Da].y,va+=M[Da].x*M[Da].x,ka+=M[Da].x*M[Da].y;sa=(sa*ka-wa*ya)/(sa*va-wa*wa);wa=0;ya=M[4].x>M[0].x;M=M[4].y>M[0].y;Infinity===sa?wa=M?90:270:0===sa?wa=ya?0:180:0<sa?wa=ya?180*Math.atan(sa)/Math.PI:180*Math.atan(sa)/Math.PI+180:0>sa&&(wa=M?180+180*Math.atan(sa)/Math.PI:360+180*Math.atan(sa)/Math.PI);return{ics:ha,icsToPixelTransform:aa,icsExtent:na,northDirection:wa}}});
return function(M,aa){return P.apply(this,arguments)}}();la.generateRasterInfo=function(){var P=t._asyncToGenerator(function*(M,aa){M=w.ensureClass(y,M);if(this.serviceRasterInfo&&(!M||"none"===M.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(M)))return this.serviceRasterInfo;const ha=db(M);if(!ha)return null;if(this._functionRasterInfos[ha])return this._functionRasterInfos[ha];M=this._generateRasterInfo(M,aa);this._functionRasterInfos[ha]=M;try{return yield M}catch{return this._functionRasterInfos[ha]=
null}});return function(M,aa){return P.apply(this,arguments)}}();la.getExportImageServiceParameters=function(P,M,aa,ha){P=P.clone().shiftCentralMeridian();const ka=V.getImageSpatialReferenceQueryParameter(P.spatialReference,Ga(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const na=this.exportImageServiceParameters.toJSON(),{bandIds:wa,noData:sa}=na;var {renderingRule:ya}=na,va=this.renderingRule?.rasterFunctionDefinition,
Da=!this.renderer||"raster-stretch"===this.renderer.type;wa?.length&&this._hasRenderingRule(this.renderingRule)&&!va&&Da?(va={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:wa}},"Stretch"===ya.rasterFunction?(va.rasterFunctionArguments.Raster=ya.rasterFunctionArguments.Raster,ya.rasterFunctionArguments.Raster=va):"Colormap"===ya.rasterFunction?(Da=ya.rasterFunctionArguments.Raster,"Stretch"===Da?.rasterFunction?(va.rasterFunctionArguments.Raster=Da.rasterFunctionArguments.Raster,Da.rasterFunctionArguments.Raster=
va):(va.rasterFunctionArguments.Raster=Da,ya.rasterFunctionArguments.Raster=va)):(va.rasterFunctionArguments.Raster=ya,ya=va),na.bandIds=void 0):na.bandIds=wa?.join(",");sa instanceof Array&&0<sa.length&&(na.noData=sa.join(","));ha=this._processMultidimensionalIntersection(null,ha,this.exportImageServiceParameters.mosaicRule);if(ha.isOutSide)return null;na.mosaicRule=b.isSome(ha.mosaicRule)?JSON.stringify(ha.mosaicRule):null;ha=ha.timeExtent;na.renderingRule=this._getRenderingRuleString(y.fromJSON(ya));
ya={};if(b.isSome(ha)){const {start:Ea,end:Ka}=ha.toJSON();if(Ea&&Ka&&Ea===Ka)ya.time=""+Ea;else if(null!=Ea||null!=Ka)ya.time=`${null==Ea?"null":Ea},${null==Ka?"null":Ka}`}return{bbox:P.xmin+","+P.ymin+","+P.xmax+","+P.ymax,bboxSR:ka,imageSR:ka,size:M+","+aa,...na,...ya}};la.getSamples=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal))?.operations.supportsGetSamples)throw new O("imagery-layer:get-samples","getSamples operation is not supported on the input image service");
M=w.ensureClass(bb,M).clone();const {raster:ha}=this;ha&&null==M.raster&&(M.raster=ha);return V.getSamples(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.identify=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsIdentify)throw new O("imagery-layer:identify","identify operation is not supported on the input image service");M=w.ensureClass(Xa,M).clone();const ha=this._processMultidimensionalIntersection(M.geometry,
M.timeExtent,M.mosaicRule||this.mosaicRule);if(ha.isOutSide)throw new O("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");M.timeExtent=b.unwrap(ha.timeExtent);M.mosaicRule=b.unwrap(ha.mosaicRule);const {raster:ka,renderingRule:na}=this;na&&null==M.renderingRule&&(M.renderingRule=na);ka&&null==M.raster&&(M.raster=ka);return V.identify(this.url,M,this._getRequestOptions(aa))});return function(M,aa){return P.apply(this,arguments)}}();la.createQuery=
function(){const P=new oa;P.outFields=["*"];P.returnGeometry=!0;P.where=this.definitionExpression||"1\x3d1";return P};la.queryRasters=function(){var P=t._asyncToGenerator(function*(M,aa){({query:M,requestOptions:aa}=yield this._prepareForQuery(M,aa));return U.executeQueryJSON(this.url,M,aa)});return function(M,aa){return P.apply(this,arguments)}}();la.queryObjectIds=function(){var P=t._asyncToGenerator(function*(M,aa){({query:M,requestOptions:aa}=yield this._prepareForQuery(M,aa));return Ba.executeForIds(this.url,
M,aa)});return function(M,aa){return P.apply(this,arguments)}}();la.queryRasterCount=function(){var P=t._asyncToGenerator(function*(M,aa){({query:M,requestOptions:aa}=yield this._prepareForQuery(M,aa));return ua.executeForCount(this.url,M,aa)});return function(M,aa){return P.apply(this,arguments)}}();la.queryVisibleRasters=function(){var P=t._asyncToGenerator(function*(M,aa){if(!M)throw new O("imagery-layer: query-visible-rasters","missing query parameter");yield this.load();const {pixelSize:ha,returnDomainValues:ka,
returnTopmostRaster:na,showNoDataRecords:wa}=aa||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let sa=!1;var ya=null,va=null;const Da=this._rasterFunctionNamesIndex;if(b.isSome(M.outFields)&&(sa=M.outFields.some(Ja=>!Ja.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){va=M.outFields.filter(Ha=>Ha.toLowerCase().includes("raster.servicepixelvalue")&&24<Ha.length).map(Ha=>{Ha=Ha.slice(25);return[this._updateRenderingRulesFunctionName(Ha,Da),
Ha]});ya=va.map(Ha=>new y({functionName:Ha[0]}));va=va.map(Ha=>Ha[1]);const {renderingRule:Ja}=this;0===ya.length?Ja?.functionName?(ya.push(Ja),va.push(Ja.functionName)):ya=null:Ja?.functionName&&!ya.some(Ha=>Ha.functionName===Ja.functionName)&&(ya.push(Ja),va.push(Ja.functionName))}const Ea=b.isNone(M.outSpatialReference)||M.outSpatialReference.equals(this.spatialReference);var {multidimensionalSubset:Ka}=this;let Pa=M.timeExtent||this.timeExtent;if(Ka){const {isOutside:Ja,intersection:Ha}=x.intersectMultimensionalSubset(Ka,
{geometry:b.unwrap(M.geometry),timeExtent:b.unwrap(M.timeExtent),multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(Ja)throw new O("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");Ha&&b.isSome(Ha.timeExtent)&&(Pa=Ha.timeExtent)}Ka=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Pa);ya=this._getQueryParams({geometry:M.geometry,timeExtent:Pa,
mosaicRule:Ka,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:ya,pixelSize:ha,returnCatalogItems:sa,returnGeometry:Ea,raster:this.raster,maxItemCount:na?1:null});delete ya.f;ya=new Xa(ya);try{yield this.generateRasterInfo(this.renderingRule);const Ja=yield V.identify(this.url,ya,{signal:aa?.signal,query:{...this.customParameters}}),Ha=M.outFields,gb=null!=Ja.value&&Ja.value.toLowerCase().includes("nodata");if(!sa||Ea||!Ja?.catalogItems?.features.length||!wa&&gb)return this._processVisibleRastersResponse(Ja,
{returnDomainValues:ka,templateRRFunctionNames:va,showNoDataRecords:wa,templateFields:Ha});const Ra=this.objectIdField||"ObjectId",Ya=Ja.catalogItems?.features??[],hb=Ya.map(Sa=>Sa.attributes?.[Ra]),ib=new oa({objectIds:hb,returnGeometry:!0,outSpatialReference:M.outSpatialReference,outFields:[Ra]}),Za=yield this.queryRasters(ib);Za?.features?.length&&Za.features.forEach(Sa=>{Ya.forEach(Va=>{Va.attributes[Ra]===Sa.attributes[Ra]&&(Va.geometry=new ja(Sa.geometry),b.isSome(M.outSpatialReference)&&(Va.geometry.spatialReference=
M.outSpatialReference))})});return this._processVisibleRastersResponse(Ja,{returnDomainValues:ka,templateRRFunctionNames:va,showNoDataRecords:wa,templateFields:Ha})}catch{throw new O("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}});return function(M,aa){return P.apply(this,arguments)}}();la.fetchVariableStatisticsHistograms=function(){var P=t._asyncToGenerator(function*(M,aa){var ha=Q(Ga(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:M}),
signal:aa}).then(ka=>ka.data?.statistics);M=Q(Ga(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:M}),signal:aa}).then(ka=>ka.data?.histograms);ha=yield Promise.all([ha,M]);ha[0]&&ha[0].forEach(ka=>{ka.avg=ka.mean;ka.stddev=ka.standardDeviation});return{statistics:ha[0]||null,histograms:ha[1]||null}});return function(M,aa){return P.apply(this,arguments)}}();la.createFlowMesh=function(){var P=t._asyncToGenerator(function*(M,aa){const ha=this._rasterJobHandler.instance;return ha?
ha.createFlowMesh(M,aa):cb.createFlowMesh(M.meshType,M.simulationSettings,M.flowData,b.isSome(aa.signal)?aa.signal:(new AbortController).signal)});return function(M,aa){return P.apply(this,arguments)}}();la.getMultidimensionalSubsetVariables=function(P){return x.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,P??this.serviceRasterInfo.multidimensionalInfo)};la._fetchService=function(){var P=t._asyncToGenerator(function*(M){yield this._fetchServiceInfo(M);this.rasterInfo||(this.rasterInfo=
this.serviceRasterInfo);var aa=this.sourceJSON;aa=b.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):Ca.fetchServiceRasterInfo(Ga(this.parsedUrl),aa,{signal:M,query:this._getQueryParams()}).then(ka=>{this._set("serviceRasterInfo",ka);this._set("multidimensionalInfo",ka.multidimensionalInfo);return ka});M=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:M}):null;const ha=this._getRasterFunctionInfos();return Promise.all([aa,M,ha]).then(ka=>
{ka[1]?this._set("rasterInfo",ka[1]):this._set("rasterInfo",ka[0]);ka[2]&&this._set("rasterFunctionInfos",ka[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),l.getLogger(this.declaredClass).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));this.addHandles([h.watch(()=>this.renderingRule,na=>{(this.renderer||this.symbolizer||this.popupEnabled&&
this.popupTemplate)&&this.generateRasterInfo(na).then(wa=>{wa&&(this.rasterInfo=wa)})})]);({serviceRasterInfo:ka}=this);b.isSome(ka.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ka)})});return function(M){return P.apply(this,arguments)}}();la._combineMosaicRuleWithTimeExtent=function(P,M){var aa=this.timeInfo,{multidimensionalInfo:ha}=this.serviceRasterInfo;if(b.isNone(P)||b.isNone(ha)||b.isNone(M)||b.isNone(aa?.startField))return P;const {startField:ka}=aa,na=ha.variables.some(va=>
va.dimensions.some(Da=>Da.name===ka))?ka:"StdTime";P=P.clone();if("mosaic-dataset"===this.sourceType)return P.multidimensionalDefinition=P.multidimensionalDefinition?.filter(va=>va.dimensionName!==na),this._cleanupMultidimensionalDefinition(P);P.multidimensionalDefinition=P.multidimensionalDefinition||[];aa=P.multidimensionalDefinition.filter(va=>va.dimensionName===na);ha=b.isSome(M.start)?M.start.getTime():null;M=b.isSome(M.end)?M.end.getTime():null;const wa=null==ha||null==M||ha===M,sa=wa?[ha||
M]:[[ha,M]],ya=10.8<=this.version;aa.length?aa.forEach(va=>{va.dimensionName===na&&(ya?(va.dimensionName=null,va.isSlice=!1,va.values=[]):(va.isSlice=wa,va.values=sa))}):ya||(M=P.multidimensionalDefinition.filter(va=>null!=va.variableName&&null==va.dimensionName),M.length?M.forEach(va=>{va.dimensionName=na;va.isSlice=wa;va.values=sa}):P.multidimensionalDefinition.push(new a({variableName:"",dimensionName:na,isSlice:wa,values:sa})));return this._cleanupMultidimensionalDefinition(P)};la._cleanupMultidimensionalDefinition=
function(P){if(b.isNone(P))return null;P.multidimensionalDefinition&&(P.multidimensionalDefinition=P.multidimensionalDefinition.filter(M=>!(!M.variableName&&!M.dimensionName)),0===P.multidimensionalDefinition.length&&(P.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==P.multidimensionalDefinition?null:P};la._prepareForQuery=function(){var P=t._asyncToGenerator(function*(M,aa){if(!(yield this._fetchCapabilities(aa?.signal)).operations.supportsQuery)throw new O("imagery-layer:query-rasters",
"query operation is not supported on the input image service");M=b.isSome(M)?w.ensureClass(oa,M):this.createQuery();aa=this._getRequestOptions(aa);this.raster&&(aa.query={...aa.query,raster:this.raster});return{query:M,requestOptions:aa}});return function(M,aa){return P.apply(this,arguments)}}();la._initJobHandler=function(){var P=t._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const M=new J;this._rasterJobHandler.connectionPromise=
M.initialize().then(()=>{this._rasterJobHandler.instance=M},()=>{});yield this._rasterJobHandler.connectionPromise});return function(){return P.apply(this,arguments)}}();la._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null};la._isSupportedRenderer=function(P){const {rasterInfo:M,renderingRule:aa}=
this;return"unique-value"===P.type&&this._hasRenderingRule(aa)&&1===M?.bandCount&&["u8","s8"].includes(M.pixelType)||null!=M&&null!=P&&T.getSupportedRendererTypes(M).includes(P.type)};la._fetchCapabilities=function(){var P=t._asyncToGenerator(function*(M){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(M);return this.capabilities});return function(M){return P.apply(this,arguments)}}();la._fetchServiceInfo=function(){var P=t._asyncToGenerator(function*(M){let aa=this.sourceJSON;
if(!aa){const {data:ha,ssl:ka}=yield Q(Ga(this.parsedUrl),{query:this._getQueryParams(),signal:M});this.sourceJSON=aa=ha;ka&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<aa.capabilities?.toLowerCase().split(",").map(ha=>ha.trim()).indexOf("tilesonly"))throw new O("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(aa,{origin:"service",url:this.parsedUrl})});return function(M){return P.apply(this,arguments)}}();la._isMosaicDataset=function(P){return P.serviceSourceType?
"esriImageServiceSourceTypeMosaicDataset"===P.serviceSourceType:0<P.fields?.length};la._isMosaicRuleSupported=function(P){if(!P)return!1;const M=this._isMosaicDataset(P);P=10.71<=P.currentVersion&&P.hasMultidimensions&&!(1<P.fields?.length);return M||P};la._isVectorFieldResampleFunction=function(P){if(b.isNone(P))return!1;const {functionName:M,functionArguments:aa}=P;P="resample"===M?.toLowerCase();const ha=aa?.ResampleType||aa?.resampleType;return P&&(7===ha||10===ha)};la._isPicture=function(){return!this.format||
this.format.includes("jpg")||this.format.includes("png")};la._configRenderer=function(P){var M=this._isPicture();const {rasterInfo:aa}=this;if(!M&&!this.pixelFilter||this._isVectorDataSet())!this.bandIds&&3<=aa.bandCount&&(!(M=T.getDefaultBandCombination(aa))||3===aa.bandCount&&0===M[0]&&1===M[1]&&2===M[2]||(this.bandIds=M)),P||(P=T.createDefaultRenderer(aa,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName})),M=T.normalizeRendererJSON(P.toJSON()),
this.symbolizer?(this.symbolizer.rendererJSON=M,this.symbolizer.rasterInfo=aa):this.symbolizer=new Z({rendererJSON:M,rasterInfo:aa}),this.symbolizer.bind().success||(this.symbolizer=null);return P};la._clonePixelData=function(P){return null==P?P:{extent:P.extent&&P.extent.clone(),pixelBlock:b.isSome(P.pixelBlock)?P.pixelBlock.clone():null}};la._getQueryParams=function(P){P&&b.isSome(P.renderingRule)&&"string"!==typeof P.renderingRule&&(P.renderingRule=this._getRenderingRuleString(P.renderingRule));
const {raster:M,viewId:aa}=this;return{raster:M,viewId:aa,f:"json",...P,...this.customParameters}};la._getRequestOptions=function(P){return{...P,query:{...P?.query,...this.customParameters}}};la._decodePixelBlock=function(P,M,aa){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:P,options:M}):q.decode(P,M,aa)};la._getRasterFunctionInfos=function(){var P=t._asyncToGenerator(function*(M){const aa=this.sourceJSON.rasterFunctionInfos;return this.loaded?aa:aa&&10.3<=this.version?
1===aa.length&&"none"===aa[0].name.toLowerCase()?aa:(yield Q(Ga(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:M})).data?.rasterFunctionInfos:null});return function(M){return P.apply(this,arguments)}}();la._canRequestImageElement=function(P){return!this.pixelFilter&&(!P||P.includes("png"))};la._requestArrayBuffer=function(){var P=t._asyncToGenerator(function*(M){const {imageProps:aa,requestAsImageElement:ha,returnImageBitmap:ka,signal:na}=M;if(ha&&this._canRequestImageElement(aa.format)){var wa=
`${Ga(this.parsedUrl)}/exportImage`;({data:M}=yield Q(wa,{responseType:ka?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...M.imageServiceParameters}),signal:na}));return M instanceof Blob?{imageBitmap:yield d.createBitmap(M,wa),params:aa}:{imageOrCanvasElement:M,params:aa}}wa=this._initJobHandler();M=Q(Ga(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...M.imageServiceParameters}),signal:na});M=(yield Promise.all([M,
wa]))[0].data;var sa=wa=aa.format||"jpgpng";"bsq"!==sa&&"bip"!==sa&&(sa=q.getFormat(M));if(!sa)throw new O("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(M)));sa="gif"===wa||"bmp"===wa||wa.includes("png")&&("png"===sa||"jpg"===sa);const ya={signal:na};return{pixelData:{pixelBlock:yield sa?q.decode(M,{useCanvas:!0,...aa},ya):this._decodePixelBlock(M,{width:aa.width,height:aa.height,planes:null,pixelType:null,noDataValue:null,format:wa},ya),
extent:aa.extent},params:aa}});return function(M){return P.apply(this,arguments)}}();la._generateRasterInfo=function(P,M){const aa=this._getQueryParams();M={...M,query:aa};return Ca.generateRasterInfo(Ga(this.parsedUrl),P,M)};la._isValidCustomizedMosaicRule=function(P){return P&&JSON.stringify(P.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())};la._updateMultidimensionalDefinition=function(P){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(P=x.getDefaultMultidimensionalDefinition(P,
{multidimensionalSubset:this.multidimensionalSubset}),b.isSome(P)&&0<P.length)){this.mosaicRule=this.mosaicRule||new n;const M=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&"none"!==this.renderingRule.functionName?.toLowerCase()&&P.forEach(aa=>aa.variableName="");P=P.filter(({variableName:aa,dimensionName:ha})=>aa&&"*"!==aa||ha);!M?.length&&P.length&&(this.mosaicRule.multidimensionalDefinition=P)}};la._processVisibleRastersResponse=function(P,
M){M=M||{};const aa=P.value,{templateRRFunctionNames:ha,showNoDataRecords:ka,returnDomainValues:na,templateFields:wa}=M;M=P.processedValues;var sa=P.catalogItems&&P.catalogItems.features;let ya=P.properties&&P.properties.Values&&P.properties.Values.map(Pa=>Pa.replace(/ /gi,", "))||[];var va=this.objectIdField||"ObjectId",Da="string"===typeof aa&&aa.toLowerCase().includes("nodata");P=[];!aa||sa||Da||(sa={},sa[va]=0,sa=new p(this.fullExtent,null,sa),ya=[aa],sa=[sa]);if(!sa)return[];this._updateResponseFieldNames(sa,
wa);Da&&!ka&&(sa=[]);for(va=0;va<sa.length;va++){Da=sa[va];if(null!=aa){var Ea=ya[va];var Ka=this.renderingRule&&M&&0<M.length&&ha&&0<ha.length&&ha.includes(this.renderingRule.functionName)?M[ha.indexOf(this.renderingRule.functionName)]:aa;if("nodata"===Ea.toLowerCase()&&!ka)continue;Da.attributes["Raster.ItemPixelValue"]=Ea;Da.attributes["Raster.ServicePixelValue"]=Ka;this._updateFeatureWithMagDirValues(Da,Ea);const Pa=this.fields&&0<this.fields.length;Ka=this.renderingRule&&b.isSome(this.serviceRasterInfo.attributeTable)?
Pa?Ea:aa:Ka;this.renderingRule||(Ka=Pa?Ea:aa);this._updateFeatureWithRasterAttributeTableValues(Da,Ka)}Da.sourceLayer=Da.layer=this;na&&this._updateFeatureWithDomainValues(Da);if(ha&&M&&ha.length===M.length)for(Ea=0;Ea<ha.length;Ea++)Da.attributes["Raster.ServicePixelValue."+ha[Ea]]=M[Ea];P.push(sa[va])}return P};la._processMultidimensionalIntersection=function(P,M,aa){const {multidimensionalSubset:ha}=this;if(!ha)return aa=this._combineMosaicRuleWithTimeExtent(aa,M),{isOutSide:!1,timeExtent:M,mosaicRule:aa};
if(ha){const {isOutside:ka,intersection:na}=x.intersectMultimensionalSubset(ha,{geometry:P,timeExtent:M});if(ka)return{isOutSide:!0,timeExtent:null,mosaicRule:null};na&&b.isSome(na.timeExtent)&&(M=na.timeExtent)}aa=this._combineMosaicRuleWithTimeExtent(aa,M);return b.isSome(aa)&&aa.multidimensionalDefinition&&({isOutside:P}=x.intersectMultimensionalSubset(ha,{multidimensionalDefinition:aa.multidimensionalDefinition}),P)?{isOutSide:!0,timeExtent:null,mosaicRule:null}:{isOutSide:!1,timeExtent:M,mosaicRule:aa}};
la._updateFeatureWithRasterAttributeTableValues=function(P,M){var aa=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(!b.isNone(aa)){var {features:ha,fields:ka}=aa,na=(aa=ka.map(sa=>sa.name).filter(sa=>"value"===sa.toLowerCase()))&&aa[0];if(na){var wa=ha.filter(sa=>sa.attributes[na]===(null!=M?parseInt(M,10):null));wa&&wa[0]&&ka.forEach(sa=>{P.attributes[this._rasterAttributeTableFieldPrefix+sa.name]=wa[0].attributes[sa.name]})}}};la._updateFeatureWithMagDirValues=function(P,
M){if(this._isVectorDataSet()){var aa=M.split(/,\s*/).map(ha=>parseFloat(ha));M=aa.map(ha=>[ha]);aa=aa.map(ha=>({minValue:ha,maxValue:ha,noDataValue:null}));M=new D({height:1,width:1,pixelType:"f32",pixels:M,statistics:aa});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:M,extent:new W(0,0,0,0,this.spatialReference)});M="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[M.pixels[0][0],M.pixels[1][0]]:H.uvComponentToVector([M.pixels[0][0],M.pixels[1][0]]);P.attributes["Raster.Magnitude"]=
M[0];P.attributes["Raster.Direction"]=M[1]}};la._updateFeatureWithDomainValues=function(P){const M=this.fields&&this.fields.filter(aa=>aa.domain&&"coded-value"===aa.domain.type);null!=M&&M.forEach(aa=>{const ha=P.attributes[aa.name];if(null!=ha){const ka=aa.domain.codedValues.find(na=>na.code===ha);ka&&(P.attributes[aa.name]=ka.name)}})};la._updateResponseFieldNames=function(P,M){if(M&&!(1>M.length)){var aa=this.fieldsIndex;b.isNone(aa)||P.forEach(ha=>{if(ha&&ha.attributes)for(const ka of M){const na=
aa.get(ka)?.name;na&&na!==ka&&(ha.attributes[ka]=ha.attributes[na],delete ha.attributes[na])}})}};la._getRenderingRuleString=function(P){if(P){P=P.toJSON();P=P.rasterFunctionDefinition??P;if(P.thumbnail||P.thumbnailEx)P.thumbnail=P.thumbnailEx=null;return JSON.stringify(P)}return null};la._hasRenderingRule=function(P){return null!=P&&null!=P.functionName&&"none"!==P.functionName.toLowerCase()};la._updateRenderingRulesFunctionName=function(P,M){if(P&&!(1>P.length)){if("Raw"===P)return P.replace("Raw",
"None");var aa=P.toLowerCase().replace(/ /gi,"_");return M.has(aa)?M.get(aa):P}};la._isRFTJson=function(P){return P&&P.name&&P.arguments&&P.function&&P.hasOwnProperty("functionType")};la._isVectorDataSet=function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType};la._applyMosaicAndRenderingRules=function(P){const {raster:M,mosaicRule:aa,renderingRule:ha}=this;ha&&null==P.renderingRule&&(P.renderingRule=ha);aa&&null==
P.mosaicRule&&(P.mosaicRule=aa);M&&null==P.raster&&(P.raster=M)};la._readCapabilities=function(P){const M=P.capabilities?P.capabilities.toLowerCase().split(",").map(Ea=>Ea.trim()):["image","catalog"],{currentVersion:aa,advancedQueryCapabilities:ha,maxRecordCount:ka}=P,na=M.includes("image"),wa="esriImageServiceDataTypeElevation"===P.serviceDataType;var sa=!!(P.spatialReference||P.extent&&P.extent.spatialReference);const ya=M.includes("edit");sa=M.includes("mensuration")&&sa;const va=null==P.mensurationCapabilities?
[]:P.mensurationCapabilities.toLowerCase().split(",").map(Ea=>Ea.trim()),Da=sa&&va.includes("basic");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:na,supportsExportImage:na,supportsIdentify:na,supportsMeasure:sa,supportsDownload:M.includes("download"),supportsQuery:M.includes("catalog")&&P.fields&&0<P.fields.length,supportsGetSamples:10.2<=aa&&na,supportsProject:10.3<=aa&&na,supportsComputeStatisticsHistograms:10.4<=aa&&na,supportsQueryBoundary:10.6<=aa&&na,supportsCalculateVolume:10.7<=
aa&&wa,supportsComputePixelLocation:10.7<=aa&&M.includes("catalog"),supportsComputeAngles:10.91<=aa,supportsAdd:ya,supportsDelete:ya,supportsEditing:ya,supportsUpdate:ya,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:ka,maxRecordCountFactor:void 0,supportsStatistics:!!ha?.supportsStatistics,
supportsOrderBy:!!ha?.supportsOrderBy,supportsDistinct:!!ha?.supportsDistinct,supportsPagination:!!ha?.supportsPagination,supportsStandardizedQueriesOnly:!!ha?.useStandardizedQueries,supportsPercentileStatistics:!!ha?.supportsPercentileStatistics,supportsCentroid:!!ha?.supportsReturningGeometryCentroid,supportsDistance:!!ha?.supportsQueryWithDistance,supportsExtent:!!ha?.supportsReturningQueryExtent,supportsGeometryProperties:!!ha?.supportsReturningGeometryProperties,supportsHavingClause:!!ha?.supportsHavingClause,
supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!ha?.supportsDefaultSR,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:Da,supportsAreaAndPerimeter:Da,supportsPointOrCentroid:Da,supportsHeightFromBaseAndTop:sa&&va.includes("base-top height"),supportsHeightFromBaseAndTopShadow:sa&&va.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:sa&&va.includes("top-top shadow height"),supports3D:sa&&va.includes("3d")}}};t._createClass(Qa,[{key:"_rasterFunctionNamesIndex",get:function(){const P=
new Map;if(!this.rasterFunctionInfos||b.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return P;b.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(M=>{P.set(M.name.toLowerCase().replace(/ /gi,"_"),M.name)});return P}},{key:"fieldsIndex",get:function(){return this.fields?new C(this.fields):null}},{key:"format",set:function(P){P&&eb.has(P.toLowerCase())&&this._set("format",P.toLowerCase())}},{key:"mosaicRule",set:function(P){P&&P.mosaicMethod&&(P=n.fromJSON({...P.toJSON(),
mosaicMethod:P.mosaicMethod,mosaicOperation:P.mosaicOperation}));this._set("mosaicRule",P)}},{key:"parsedUrl",get:function(){return m.urlToObject(this.url)}},{key:"renderer",set:function(P){this.loaded&&(P=this._configRenderer(P));this._set("renderer",P)}},{key:"rasterFields",get:function(){const P=this._rasterAttributeTableFieldPrefix||"Raster.";var M=new r({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const aa=new r({name:"Raster.ServicePixelValue",
alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ha=new r({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ka=this.fields?z.clone(this.fields):[];ka.push(aa);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&ka.push(M);10.4<=this.version&&b.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(na=>"none"===na.name.toLowerCase())&&ka.push(ha);b.isSome(this.rasterFunctionInfos)&&
this.rasterFunctionInfos.filter(na=>"none"!==na.name.toLowerCase()).forEach(na=>{ka.push(new r({name:"Raster.ServicePixelValue."+na.name,alias:na.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(ka.push(new r({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ka.push(new r({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:M}=this.rasterInfo??{});b.isSome(M)&&(M=M.fields.filter(na=>
"esriFieldTypeOID"!==na.type&&"value"!==na.name.toLowerCase()).map(na=>{const wa=z.clone(na);wa.name=P+na.name;return wa}),ka=ka.concat(M));return ka}},{key:"renderingRule",set:function(P){P&&P.rasterFunction&&(P=y.fromJSON({...P.toJSON(),rasterFunction:P.rasterFunction,rasterFunctionArguments:P.rasterFunctionArguments}));this._set("renderingRule",P)}}]);return Qa}(pa);v.__decorate([f.property()],pa.prototype,"_functionRasterInfos",void 0);v.__decorate([f.property()],pa.prototype,"_rasterJobHandler",
void 0);v.__decorate([f.property()],pa.prototype,"_cachedRendererJson",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"_serviceSupportsMosaicRule",void 0);v.__decorate([c.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],pa.prototype,"readServiceSupportsMosaicRule",null);v.__decorate([f.property()],pa.prototype,"_rasterAttributeTableFieldPrefix",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"_rasterFunctionNamesIndex",null);v.__decorate([f.property()],
pa.prototype,"adjustAspectRatio",void 0);v.__decorate([f.property({type:[w.Integer],json:{write:!0}})],pa.prototype,"bandIds",void 0);v.__decorate([c.reader("bandIds")],pa.prototype,"readBandIds",null);v.__decorate([f.property({readOnly:!0,json:{read:!1}})],pa.prototype,"capabilities",void 0);v.__decorate([c.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],pa.prototype,"readCapabilities",null);v.__decorate([f.property({type:Number})],pa.prototype,"compressionQuality",
void 0);v.__decorate([u.writer("compressionQuality")],pa.prototype,"writeCompressionQuality",null);v.__decorate([f.property({type:Number})],pa.prototype,"compressionTolerance",void 0);v.__decorate([u.writer("compressionTolerance")],pa.prototype,"writeCompressionTolerance",null);v.__decorate([f.property({json:{read:{source:"copyrightText"}}})],pa.prototype,"copyright",void 0);v.__decorate([f.property({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],pa.prototype,"defaultMosaicRule",void 0);
v.__decorate([c.reader("defaultMosaicRule",["defaultMosaicMethod"])],pa.prototype,"readDefaultMosaicRule",null);v.__decorate([f.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],pa.prototype,"definitionExpression",void 0);v.__decorate([f.property({readOnly:!0,constructOnly:!0})],pa.prototype,"exportImageServiceParameters",void 0);v.__decorate([f.property()],pa.prototype,"rasterInfo",void 0);v.__decorate([f.property({readOnly:!0,type:[r]})],
pa.prototype,"fields",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"fieldsIndex",null);v.__decorate([f.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],pa.prototype,"format",null);v.__decorate([c.reader("service","format",["serviceDataType"])],pa.prototype,"readFormat",null);v.__decorate([f.property({type:W})],pa.prototype,"fullExtent",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"hasMultidimensions",void 0);v.__decorate([f.property({json:{read:{source:"maxImageHeight"}}})],
pa.prototype,"imageMaxHeight",void 0);v.__decorate([f.property({json:{read:{source:"maxImageWidth"}}})],pa.prototype,"imageMaxWidth",void 0);v.__decorate([f.property({type:String,json:{type:G.interpolationKebab.jsonValues,read:G.interpolationKebab.read,write:G.interpolationKebab.write}})],pa.prototype,"interpolation",void 0);v.__decorate([f.property()],pa.prototype,"minScale",void 0);v.__decorate([c.reader("service","minScale")],pa.prototype,"readMinScale",null);v.__decorate([f.property()],pa.prototype,
"maxScale",void 0);v.__decorate([c.reader("service","maxScale")],pa.prototype,"readMaxScale",null);v.__decorate([f.property({type:n})],pa.prototype,"mosaicRule",null);v.__decorate([c.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],pa.prototype,"readMosaicRule",null);v.__decorate([u.writer("mosaicRule")],pa.prototype,"writeMosaicRule",null);v.__decorate([f.property()],pa.prototype,"multidimensionalInfo",void 0);v.__decorate([f.property({type:A,json:{write:!0}})],pa.prototype,"multidimensionalSubset",
void 0);v.__decorate([f.property({json:{type:w.Integer}})],pa.prototype,"noData",void 0);v.__decorate([u.writer("noData")],pa.prototype,"writeNoData",null);v.__decorate([f.property({type:String,json:{type:G.noDataInterpretationKebab.jsonValues,read:G.noDataInterpretationKebab.read,write:G.noDataInterpretationKebab.write}})],pa.prototype,"noDataInterpretation",void 0);v.__decorate([f.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],pa.prototype,"objectIdField",void 0);v.__decorate([c.reader("objectIdField")],
pa.prototype,"readObjectIdField",null);v.__decorate([f.property({})],pa.prototype,"geometryType",void 0);v.__decorate([f.property({})],pa.prototype,"typeIdField",void 0);v.__decorate([f.property({})],pa.prototype,"types",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"parsedUrl",null);v.__decorate([f.property({type:Function})],pa.prototype,"pixelFilter",void 0);v.__decorate([f.property()],pa.prototype,"raster",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"sourceType",
void 0);v.__decorate([c.reader("sourceType",["serviceSourceType","fields"])],pa.prototype,"readSourceType",null);v.__decorate([f.property()],pa.prototype,"viewId",void 0);v.__decorate([f.property({types:R.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:R.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Oa){return{enabled:Oa&&"vector-field"!==Oa.type&&"flow"!==Oa.type}}}}}}})],pa.prototype,"renderer",null);
v.__decorate([c.reader("renderer")],pa.prototype,"readRenderer",null);v.__decorate([u.writer("renderer")],pa.prototype,"writeRenderer",null);v.__decorate([f.property()],pa.prototype,"symbolizer",void 0);v.__decorate([f.property(B.opacity)],pa.prototype,"opacity",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"rasterFields",null);v.__decorate([f.property({constructOnly:!0})],pa.prototype,"rasterFunctionInfos",void 0);v.__decorate([f.property({type:y})],pa.prototype,"renderingRule",null);
v.__decorate([c.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],pa.prototype,"readRenderingRule",null);v.__decorate([u.writer("renderingRule")],pa.prototype,"writeRenderingRule",null);v.__decorate([f.property()],pa.prototype,"serviceDataType",void 0);v.__decorate([f.property({readOnly:!0,type:Ta})],pa.prototype,"spatialReference",void 0);v.__decorate([c.reader("spatialReference",["spatialReference","extent"])],pa.prototype,"readSpatialReference",null);v.__decorate([f.property({json:{type:Ua.jsonValues}})],
pa.prototype,"pixelType",void 0);v.__decorate([c.reader("pixelType")],pa.prototype,"readPixelType",null);v.__decorate([u.writer("pixelType")],pa.prototype,"writePixelType",null);v.__decorate([f.property({constructOnly:!0,type:E})],pa.prototype,"serviceRasterInfo",void 0);v.__decorate([f.property()],pa.prototype,"sourceJSON",void 0);v.__decorate([f.property(B.url)],pa.prototype,"url",void 0);v.__decorate([f.property({readOnly:!0})],pa.prototype,"version",void 0);v.__decorate([c.reader("version",["currentVersion",
"fields","timeInfo"])],pa.prototype,"readVersion",null);return pa=v.__decorate([k.subclass("esri.layers.mixins.ArcGISImageService")],pa)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(K,t,v,F,p,R,Q,O,S){function z(m,f){if(!m)return null;if("classBreaks"===m.type&&m.classificationMethod){var w=m.authoringInfo||{classificationMethod:""};w.classificationMethod=m.classificationMethod;m.authoringInfo=w}"vectorField"===m.type&&m.visualVariables&&!Array.isArray(m.visualVariables)&&(m.visualVariables=[m.visualVariables]);w=m?h[m.type]||null:null;if(w)return w=new w,w.read(m,f),w;f&&f.messages&&m&&f.messages.push(new t("renderer:unsupported","Renderers of type '"+(m.type||"unknown")+
"' are not supported",{definition:m,context:f}));return null}const l={key:"type",base:null,typeMap:{"unique-value":O,"class-breaks":v,"raster-colormap":p,"raster-stretch":Q,"vector-field":S,"raster-shaded-relief":R,flow:F}},b={...l,typeMap:{...l.typeMap}};delete b.typeMap["vector-field"];delete b.typeMap.flow;const h={uniqueValue:O,classBreaks:v,rasterStretch:Q,rasterColormap:p,vectorField:S,rasterShadedRelief:R,flowRenderer:F};K.ClassBreaksRenderer=v;K.FlowRenderer=F;K.RasterColormapRenderer=p;K.RasterShadedReliefRenderer=
R;K.RasterStretchRenderer=Q;K.UniqueValueRenderer=O;K.VectorFieldRenderer=S;K.fromJSON=function(m,f){return z(m,f)};K.rasterRendererTypes=l;K.read=z;K.websceneRasterRendererTypes=b;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m){var f;F=new F.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});p=f=function(w){function c(u){u=w.call(this,u)||this;u.density=.8;u.color=new v([255,255,255,1]);u.maxPathLength=200;u.trailWidth=1.5;u.flowSpeed=10;u.trailLength=100;u.smoothing=0;u.flowRepresentation="flow-from";u.type="flow";u.authoringInfo=null;u.legendOptions=null;u.trailCap="butt";u.background="none";return u}K._inheritsLoose(c,w);var k=c.prototype;k.clone=function(){const {density:u,maxPathLength:B,
trailWidth:a,flowSpeed:g,trailLength:r,smoothing:C,flowRepresentation:d,trailCap:e,background:n}=this,A=this.color.clone(),D=(this.visualVariables||[]).map(E=>E.clone()),G=this.authoringInfo?.clone(),y=this.legendOptions?.clone();return new f({density:u,color:A,maxPathLength:B,trailWidth:a,flowSpeed:g,trailLength:r,trailCap:e,background:n,smoothing:C,flowRepresentation:d,visualVariables:D,authoringInfo:G,legendOptions:y})};k.getSymbol=function(u,B){};k.getSymbolAsync=function(){var u=K._asyncToGenerator(function*(B,
a){});return function(B,a){return u.apply(this,arguments)}}();k.getSymbols=function(){return[]};return c}(b.VisualVariablesMixin(p.JSONSupport));t.__decorate([Q.property({type:Number,json:{write:!0}})],p.prototype,"density",void 0);t.__decorate([Q.property({type:v,json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);t.__decorate([Q.property({type:Number,cast:R.toPt,json:{write:!0}})],p.prototype,"maxPathLength",void 0);t.__decorate([Q.property({type:Number,cast:R.toPt,json:{write:!0}})],p.prototype,
"trailWidth",void 0);t.__decorate([Q.property({type:Number,json:{write:!0}})],p.prototype,"flowSpeed",void 0);t.__decorate([Q.property({type:Number,json:{write:!0}})],p.prototype,"trailLength",void 0);t.__decorate([Q.property({type:Number,cast:R.toPt,json:{write:!1}})],p.prototype,"smoothing",void 0);t.__decorate([Q.property({type:F.apiValues,json:{type:F.jsonValues,read:{reader:F.read},write:{writer:F.write}}})],p.prototype,"flowRepresentation",void 0);t.__decorate([z.enumeration({flowRenderer:"flow"})],
p.prototype,"type",void 0);t.__decorate([Q.property({type:h,json:{write:!0}})],p.prototype,"authoringInfo",void 0);t.__decorate([Q.property({type:m.LegendOptions,json:{write:!0}})],p.prototype,"legendOptions",void 0);t.__decorate([Q.property({type:String,json:{write:!0}})],p.prototype,"trailCap",void 0);t.__decorate([Q.property({type:String,json:{write:!0}})],p.prototype,"background",void 0);return p=f=t.__decorate([l.subclass("esri.renderers.FlowRenderer")],p)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(K,t,v,F,p,R,Q,O,S,z){var l;v=l=function(b){function h(f){f=b.call(this,f)||this;f.colormapInfos=null;f.type="raster-colormap";return f}K._inheritsLoose(h,b);h.createFromColormap=function(f,w){if(!f)return null;const c=5===f[0].length;f=[...f].sort(k=>k[0][0]-k[1][0]).map(k=>S.fromJSON({value:k[0],color:c?k.slice(1,5):k.slice(1,4).concat([255]),label:w?w[k[0]]??"":k[0]}));return new l({colormapInfos:f})};h.createFromColorramp=function(f){f=z.convertColorRampToColormap(f);return l.createFromColormap(f)};
var m=h.prototype;m.clone=function(){return new l({colormapInfos:this.colormapInfos.map(f=>f.toJSON())})};m.extractColormap=function(){return this.colormapInfos.map(({value:f,color:w})=>[f,w.r,w.g,w.b,1<w.a?w.a:255*w.a&255]).sort((f,w)=>f[0]-w[0])};return h}(v.JSONSupport);t.__decorate([F.property({type:[S],json:{write:!0}})],v.prototype,"colormapInfos",void 0);t.__decorate([Q.enumeration({rasterColormap:"raster-colormap"})],v.prototype,"type",void 0);return v=l=t.__decorate([O.subclass("esri.renderers.RasterColormapRenderer")],
v)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(K,t,v,F,p,R,Q,O){F=function(S){function z(){var l=S.apply(this,arguments)||this;l.value=null;l.label=null;l.color=null;return l}K._inheritsLoose(z,S);return z}(F.JSONSupport);
t.__decorate([p.property({type:Number,json:{write:!0}})],F.prototype,"value",void 0);t.__decorate([p.property({type:String,json:{write:!0}})],F.prototype,"label",void 0);t.__decorate([p.property({type:v,json:{type:[R.Integer],write:!0}})],F.prototype,"color",void 0);return F=t.__decorate([O.subclass("esri.renderers.support.ColormapInfo")],F)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],function(K,t,v,F){function p(c,
k){if(!c||!k||c.length!==k.length)return!1;for(let u=0;u<c.length;u++)if(c[u]>k[u]+2||c[u]<k[u]-2)return!1;return!0}function R(c,k){if(c){k=k?k:m;var u=null;"algorithmic"===c.type?k.some(B=>{if(p(c.fromColor.toRgb(),B.fromColor)&&p(c.toColor.toRgb(),B.toColor))return u=B.id,!0}):"multipart"===c.type&&k.some(B=>{const a=c.colorRamps,g=B.colorRamps;if(a&&g&&a.length===g.length&&!g.some((r,C)=>{if(!p(a[C].fromColor.toRgb(),(new t(r.fromColor)).toRgb())||!p(a[C].toColor.toRgb(),(new t(r.toColor)).toRgb()))return!0})){if(u)return!0;
u=B.id}});return u}}function Q(c){return(c=R(c))?f[c]:null}function O(c){c=c||{};const k=c.numColors||256;return{...c,numColors:k,distanceOffset:c.distanceOffset||0,interpolateAlpha:!!c.interpolateAlpha,distanceInterval:c.distanceInterval||1/(k-1),isCustomInterval:null!=c.isCustomInterval?c.isCustomInterval:null!==c.distanceInterval&&c.distanceInterval!==1/(k-1),weights:c.weights}}function S(c,k){let {fromColor:u,toColor:B}=c;3===u.length&&(u=u.concat([255]));3===B.length&&(B=B.concat([255]));c=c.algorithm||
"esriCIELabAlgorithm";var a=O(k);const {numColors:g,distanceOffset:r,isCustomInterval:C,interpolateAlpha:d}=a;if(1===g&&0===r)return[u];if(2===g&&0===r&&!C)return[u,B];var e={r:u[0],g:u[1],b:u[2]};k={r:B[0],g:B[1],b:B[2]};if("esriCIELabAlgorithm"===c){c=v.toLAB(e);k=v.toLAB(k);const {numColors:G,distanceOffset:y,distanceInterval:E,isCustomInterval:J}=a;let {l:x,a:q,b:H}=c;c=(k.l-x)*E;e=(k.a-q)*E;a=(k.b-H)*E;var n=[];if(y){var A=y/E;x+=A*c;q+=A*e;H+=A*a}for(A=0;A<G-1;A++)n.push({l:x,a:q,b:H}),x+=c,
q+=e,H+=a;n.push(J?{l:x,a:q,b:H}:k);k=n}else if("esriHSVAlgorithm"===c){c=v.toHSV(e);k=v.toHSV(k);const {numColors:G,distanceOffset:y,distanceInterval:E,isCustomInterval:J}=a;n=0===c.s;A=0===k.s;e=c.h;a=k.h;n&&!A?e=a:A&&!n&&(k={...k,h:e},a=e);n=Math.abs(a-e);180>n?a=(a-e)*E:(n=360-n,a=e>a?n*E:-n*E);n=(k.s-c.s)*E;A=(k.v-c.v)*E;let {s:x,v:q}=c;c=e;y&&(e=y/E,c=(c+e*a+360)%360,x+=e*n,q+=e*A);e=[];for(var D=0;D<G-1;D++)e.push({h:c,s:x,v:q}),c=(c+a+360)%360,x+=n,q+=A;e.push(J?{h:c,s:x,v:q}:k);k=e}else{e=
v.toLCH(e);k=v.toLCH(k);const {numColors:G,distanceOffset:y,distanceInterval:E,isCustomInterval:J}=a;a=e.h;n=k.h;c=2*Math.PI;a<=n?(A=n-a,a=n-a-c,a=Math.abs(a)<Math.abs(A)?a:A):(A=n+c-a,a=n-a,a=Math.abs(a)<Math.abs(A)?a:A);a*=E;n=(k.l-e.l)*E;A=(k.c-e.c)*E;let {l:x,c:q,h:H}=e;y&&(e=y/E,x+=e*n,q+=e*A,H=(H+e*a+c)%c);e=[];for(D=0;D<G-1;D++)e.push({l:x,c:q,h:H}),x+=n,q+=A,H=(H+a+c)%c;e.push(J?{l:x,c:q,h:H}:k);k=e}c=[];e=u[3]??255;a=((B[3]??255)-e)/(g-1);for(n=0;n<g;n++){const {r:G,g:y,b:E}=v.toRGB(k[n]);
c.push([G,y,E,d?Math.round(e+a*n):255])}return c}function z(c,k){const {numColors:u,interpolateAlpha:B}=O(k);k=k?.weights;({colorRamps:c}=c);if(k){const n=k.reduce((A,D)=>A+D);k=k.map(A=>A/n)}else{k=[];for(var a=0;a<c.length;a++)k[a]=1/c.length}a=[];let g=0,r=0;const C=1/(u-1);let d=!1;for(let n=0;n<c.length;n++){var e=d?0:g*C-r;let A=n===c.length-1?u-1-g:(k[n]-e)/C;d=Math.ceil(A)===A;A=Math.ceil(A);0!==A&&(e/=k[n],e=S(c[n],{numColors:A,interpolateAlpha:B,distanceOffset:e,distanceInterval:C/k[n]}),
g+=e.length,a.push(...e),r+=k[n])}k=[...c[c.length-1].toColor];3===k.length&&k.push(255);a.push(k);return a}function l(c,k){c="toJSON"in c?c.toJSON():c;return"multipart"===c.type?z(c,k):S(c,k)}function b(c){if(c)return{Algorithm:c.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:h(c.fromColor),ToColor:h(c.toColor)}}function h(c){c=v.toHSV(c);return{type:"HsvColor",Hue:c.h,Saturation:c.s,Value:c.v,AlphaValue:255}}const m=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,
190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,
255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,
130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],
toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,
240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},
{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,
173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,
13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},
{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],
toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,
17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",
type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,
168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",
colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,
0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],f={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",
blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",
cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",
partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",
purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",
redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",
yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},w=new F.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark",
"Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark",
"Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark",
"Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",
Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});K.PREDEFINED_COLOR_RAMP_NAME_MAP=f;K.PREDEFINED_JSON_COLOR_RAMPS=
m;K.colorRampDict=w;K.convertColorRampToColormap=function(c,k){c=l(c,k);const u=k?.interpolateAlpha;c.forEach((B,a)=>{B.unshift(a);u||B.pop()});return c};K.convertColorRampToColors=l;K.getColorRampId=R;K.getColorRampJSON=function(c){const k=w.toJSON(c),u=Object.entries(f).find(B=>B[1]===k)?.[0];return(c=m.find(B=>B.id===u))?c.colorRamps?{type:"multipart",colorRamps:c.colorRamps.map(B=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:B.fromColor,toColor:B.toColor}))}:{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:c.fromColor,toColor:c.toColor}:null};K.getColorRampName=Q;K.getRFxArgColorRampValue=function(c){const k=Q(c);if(c){if("algorithmic"===c.type)return{...b(c),Name:k};if(c.colorRamps)return c=c.colorRamps.map(b),{type:"MultiPartColorRamp",NumColorRamps:c.length,ArrayOfColorRamp:c,Name:k}}};K.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");K.rgbaConvertTo32Bit=function(c){c=c.reverse().map(k=>{k=k.toString(16);return 2>k.length?
"0"+k:k});return 4294967295&Number.parseInt(c.join(""),16)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(K){function t(z,l){const b=[];let h,m;if(z[0].length!==l.length)throw Error("dimensions do not match");const f=z.length,w=z[0].length;let c=0;for(h=0;h<f;h++){for(m=c=0;m<w;m++)c+=z[h][m]*l[m];b.push(c)}return b}function v(z){z=[z.r/255,z.g/255,z.b/255].map(l=>.04045>=l?l/12.92:((l+.055)/1.055)**2.4);z=t(O,z);return{x:100*
z[0],y:100*z[1],z:100*z[2]}}function F(z){z=t(S,[z.x/100,z.y/100,z.z/100]).map(l=>Math.min(1,Math.max(.0031308>=l?12.92*l:1.055*l**(1/2.4)-.055,0)));return{r:Math.round(255*z[0]),g:Math.round(255*z[1]),b:Math.round(255*z[2])}}function p(z){z=[z.x/95.047,z.y/100,z.z/108.883].map(l=>l>(6/29)**3?l**(1/3):1/3*(29/6)**2*l+4/29);return{l:116*z[1]-16,a:500*(z[0]-z[1]),b:200*(z[1]-z[2])}}function R(z){const l=z.l;z=[(l+16)/116+z.a/500,(l+16)/116,(l+16)/116-z.b/200].map(b=>b>6/29?b**3:3*(6/29)**2*(b-4/29));
return{x:95.047*z[0],y:100*z[1],z:108.883*z[2]}}function Q(z){if("r"in z&&"g"in z&&"b"in z)return z;if("l"in z&&"c"in z&&"h"in z){var l=z.c,b=z.h;return F(R({l:z.l,a:l*Math.cos(b),b:l*Math.sin(b)}))}if("l"in z&&"a"in z&&"b"in z)return F(R(z));if("x"in z&&"y"in z&&"z"in z)return F(z);if("h"in z&&"s"in z&&"v"in z){b=(z.h+360)%360/60;l=z.v/100*255;z=z.s/100*l;const h=z*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:z,g:h,b:0};break;case 1:b={r:h,g:z,b:0};break;case 2:b={r:0,g:z,b:h};break;case 3:b=
{r:0,g:h,b:z};break;case 4:b={r:h,g:0,b:z};break;case 5:case 6:b={r:z,g:0,b:h};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+l-z);b.g=Math.round(b.g+l-z);b.b=Math.round(b.b+l-z);return b}return z}const O=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],S=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];K.darken=function(z,l){z=p(v(z));z.l*=1-l;return F(R(z))};K.toHSV=function(z){if("h"in z&&"s"in z&&"v"in z)return z;var l=Q(z);z=l.r;const b=l.g,h=l.b;l=Math.max(z,
b,h);const m=l-Math.min(z,b,h);z=0===m?0:l===z?(b-h)/m%6:l===b?(h-z)/m+2:(z-b)/m+4;0>z&&(z+=6);return{h:60*z,s:100*(0===m?0:m/l),v:100/255*l}};K.toLAB=function(z){return"l"in z&&"a"in z&&"b"in z?z:p(v(Q(z)))};K.toLCH=function(z){if(!("l"in z&&"c"in z&&"h"in z)){var l=p(v(Q(z)));z=l.l;var b=l.a;const h=l.b;l=Math.sqrt(b*b+h*h);b=Math.atan2(h,b);b=0<b?b:b+2*Math.PI;z={l:z,c:l,h:b}}return z};K.toRGB=Q;K.toXYZ=function(z){return"x"in z&&"y"in z&&"z"in z?z:v(Q(z))};Object.defineProperty(K,Symbol.toStringTag,
{value:"Module"})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),function(K,t,v,F,p,R,Q,O,S,z){var l;v=l=function(b){function h(f){f=b.call(this,
f)||this;f.altitude=45;f.azimuth=315;f.colorRamp=null;f.hillshadeType="traditional";f.pixelSizePower=.664;f.pixelSizeFactor=.024;f.scalingType="none";f.type="raster-shaded-relief";f.zFactor=1;return f}K._inheritsLoose(h,b);var m=h.prototype;m.readColorRamp=function(f){return z.fromJSON(f)};m.clone=function(){return new l({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,
colorRamp:F.clone(this.colorRamp)})};return h}(v.JSONSupport);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"altitude",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"azimuth",void 0);t.__decorate([p.property({types:z.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);t.__decorate([O.reader("colorRamp")],v.prototype,"readColorRamp",null);t.__decorate([p.property({type:["traditional","multi-directional"],json:{write:!0}})],v.prototype,"hillshadeType",
void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizePower",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizeFactor",void 0);t.__decorate([p.property({type:["none","adjusted"],json:{write:!0}})],v.prototype,"scalingType",void 0);t.__decorate([Q.enumeration({rasterShadedRelief:"raster-shaded-relief"})],v.prototype,"type",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"zFactor",void 0);return v=l=t.__decorate([S.subclass("esri.renderers.RasterShadedReliefRenderer")],
v)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),function(K,t,v,F,p,R,Q,O,
S,z,l,b){var h;v=h=function(m){function f(c){c=m.call(this,c)||this;c.colorRamp=null;c.computeGamma=!1;c.dynamicRangeAdjustment=!1;c.gamma=[];c.maxPercent=null;c.minPercent=null;c.numberOfStandardDeviations=null;c.outputMax=null;c.outputMin=null;c.sigmoidStrengthLevel=null;c.statistics=[];c.histograms=null;c.useGamma=!1;c.stretchType="none";c.type="raster-stretch";return c}K._inheritsLoose(f,m);var w=f.prototype;w.readColorRamp=function(c){if(c)return b.fromJSON(c)};w.writeStatistics=function(c,k,
u){c?.length&&(Array.isArray(c[0])||(c=c.map(B=>[B.min,B.max,B.avg,B.stddev])),k[u]=c)};w.readStretchType=function(c,k){c=k.stretchType;"number"===typeof c&&(c=l.stretchTypeFunctionEnum[c]);return l.stretchTypeJSONDict.read(c)};w.clone=function(){return new h({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:F.clone(this.statistics),gamma:F.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:F.clone(this.colorRamp),histograms:F.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return f}(v.JSONSupport);t.__decorate([p.property({types:b.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);t.__decorate([O.reader("colorRamp")],v.prototype,"readColorRamp",null);t.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"computeGamma",
void 0);t.__decorate([p.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0);t.__decorate([p.property({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"numberOfStandardDeviations",
void 0);t.__decorate([p.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0);t.__decorate([p.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0);t.__decorate([p.property({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0);t.__decorate([p.property()],v.prototype,"histograms",void 0);
t.__decorate([z.writer("statistics")],v.prototype,"writeStatistics",null);t.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0);t.__decorate([p.property({type:l.stretchTypeJSONDict.apiValues,json:{type:l.stretchTypeJSONDict.jsonValues,write:l.stretchTypeJSONDict.write}})],v.prototype,"stretchType",void 0);t.__decorate([O.reader("stretchType",["stretchType"])],v.prototype,"readStretchType",null);t.__decorate([Q.enumeration({rasterStretch:"raster-stretch"})],v.prototype,
"type",void 0);return v=h=t.__decorate([S.subclass("esri.renderers.RasterStretchRenderer")],v)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(K,t){t=new t.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});K.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
K.stretchTypeJSONDict=t;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f,w,c,k,u,B,a,g,r,C,d,e,n,A){var D;const G=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);F=new Q.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
Q=new Q.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});O=D=function(y){function E(x){x=y.call(this,x)||this;x.attributeField="Magnitude";x.flowRepresentation="flow-from";x.rotationType="arithmetic";x.style="single-arrow";x.symbolTileSize=50;x.type="vector-field";return x}K._inheritsLoose(E,y);var J=E.prototype;J.readInputUnit=function(x,q){return G.has(x)?c.unitKebabDict.fromJSON(x):null};J.readOutputUnit=function(x,q){return G.has(x)?c.unitKebabDict.fromJSON(x):null};J.clone=function(){return new D({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:S.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};J.getGraphicsFromPixelData=function(){var x=K._asyncToGenerator(function*(q,H=!1,T=[]){const Z=[];var V=c.getUnitConversionFactor(this.inputUnit,this.outputUnit),I=this.rotationVariables[0]?.rotationType||this.rotationType;H=H?c.convertVectorFieldData(q.pixelBlock,"vector-uv",
I,V):c.convertVectorFieldUnit(q.pixelBlock,"vector-magdir",V);if(z.isNone(H))return Z;q=q.extent;V=z.isSome(H.mask)&&0<H.mask.length;I=0;const L=(q.xmax-q.xmin)/H.width,U=(q.ymax-q.ymin)/H.height;for(let ea=0;ea<H.height;ea++)for(let Y=0;Y<H.width;Y++,I++){let X=new A({x:q.xmin+Y*L+L/2,y:q.ymax-ea*U-U/2,spatialReference:q.spatialReference});X=(yield w.normalizeCentralMeridian(X))[0];var ba=T.some(N=>N.intersects(X));V&&!H.mask[I]||ba||(ba=new p({geometry:{type:"point",x:X.x,y:X.y,spatialReference:q.spatialReference},
attributes:{Magnitude:H.pixels[0][I],Direction:H.pixels[1][I]}}),ba.symbol=this._getVisualVariablesAppliedSymbol(ba),Z.push(ba))}return Z});return function(q){return x.apply(this,arguments)}}();J.getSymbol=function(x,q){};J.getSymbolAsync=function(){var x=K._asyncToGenerator(function*(q,H){});return function(q,H){return x.apply(this,arguments)}}();J.getSymbols=function(){return[]};J.getClassBreakInfos=function(){return this.styleRenderer?.classBreakInfos};J.getDefaultSymbol=function(){return this.styleRenderer?.defaultSymbol};
J._getDefaultSymbol=function(x){return new d({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new C({width:0}),size:20,color:x||new v([0,92,230])})};J._getVisualVariablesAppliedSymbol=function(x){if(x){var q=this.styleRenderer?.getSymbol(x)?.clone(),H=this.sizeVariables,T=this.rotationVariables;H&&H.length&&this.sizeVariables.forEach(Z=>e.applySizesToSymbol(q,r.getAllSizes([Z],x)));T&&T.length&&(x.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||
"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(Z=>e.applyRotationToSymbol(q,r.getRotationAngle(Z,x),Z.axis)));return q}};J._createStyleRenderer=function(x){let q={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(x){case "single-arrow":q=this._createSingleArrowRenderer();break;case "beaufort-kn":q=this._createBeaufortKnotsRenderer();break;case "beaufort-m":q=this._createBeaufortMeterRenderer();break;case "beaufort-ft":q=this._createBeaufortFeetRenderer();break;
case "beaufort-mi":q=this._createBeaufortMilesRenderer();break;case "beaufort-km":q=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":q=this._createCurrentMeterRenderer();break;case "ocean-current-kn":q=this._createCurrentKnotsRenderer();break;case "simple-scalar":q=this._createSimpleScalarRenderer();break;case "wind-barb":q=this._createWindBarbsRenderer();break;case "classified-arrow":q=this._createClassifiedArrowRenderer()}return new k(q)};J._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};
J._createBeaufortKnotsRenderer=function(){const x=this._getDefaultSymbol(new v([214,47,39])),q=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:x,classBreakInfos:q}};J._createBeaufortMeterRenderer=function(){const x=this._getDefaultSymbol(new v([214,47,39])),q=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,
14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:x,classBreakInfos:q}};J._createBeaufortFeetRenderer=function(){const x=this._getDefaultSymbol(new v([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(H=>3.28084*H);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,
204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:x,classBreakInfos:q}};J._createBeaufortMilesRenderer=function(){const x=this._getDefaultSymbol(new v([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(H=>2.23694*H);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],
[232,21,21]]);return{defaultSymbol:x,classBreakInfos:q}};J._createBeaufortKilometersRenderer=function(){const x=this._getDefaultSymbol(new v([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(H=>3.6*H);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:x,classBreakInfos:q}};J._createCurrentMeterRenderer=function(){const x=
this._getDefaultSymbol(new v([177,177,177])),q=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:x,classBreakInfos:q}};J._createCurrentKnotsRenderer=function(){const x=this._getDefaultSymbol(new v([177,177,177])),q=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:x,classBreakInfos:q}};J._createClassifiedArrowRenderer=
function(){const x=this._getDefaultSymbol(new v([56,168,0]));var q=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const H=this.sizeVariables[0].minDataValue,T=this.sizeVariables[0].maxDataValue;if(H&&T){const Z=(T-H)/5;q=Array.from(Array(6).keys()).map(V=>H+Z*V)}}q=this._getClassBreaks(q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:x,classBreakInfos:q}};J._createSimpleScalarRenderer=function(){return{defaultSymbol:n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};J._createWindBarbsRenderer=function(){const x=Array.from(Array(31).keys()).map(Z=>5*Z),q=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],H=n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),T=x.map((Z,V)=>{if(V!==x.length-1)if(0===V)var I={minValue:Z,maxValue:x[V+1],symbol:H};else I=n.fromJSON({type:"esriPMS",imageData:q[V].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),I={minValue:Z,maxValue:x[V+1],symbol:I};return new B(I)});return{defaultSymbol:H,classBreakInfos:T}};J._getClassBreaks=function(x,q){return q.map((H,T)=>new B({minValue:x[T],maxValue:x[T+1],symbol:this._getDefaultSymbol(new v(H))}))};K._createClass(E,[{key:"styleRenderer",
get:function(){const x=this.attributeField,q=this._createStyleRenderer(this.style);q.field=x;return q}},{key:"sizeVariables",get:function(){const x=[];if(this.visualVariables)for(var q of this.visualVariables)"size"===q.type&&x.push(q);0===x.length&&(q=new g({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),x.push(q));return x}},{key:"rotationVariables",get:function(){const x=[];if(this.visualVariables)for(var q of this.visualVariables)"rotation"===
q.type&&x.push(q);0===x.length&&(q=new a({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),x.push(q));return x}}]);return E}(u.VisualVariablesMixin(O.JSONSupport));t.__decorate([l.property({type:String,json:{write:!0}})],O.prototype,"attributeField",void 0);t.__decorate([l.property({type:Q.apiValues,json:{type:Q.jsonValues,read:{reader:Q.read},write:{writer:Q.write}}})],O.prototype,"flowRepresentation",void 0);t.__decorate([l.property({type:["geographic",
"arithmetic"],json:{write:!0}})],O.prototype,"rotationType",void 0);t.__decorate([l.property({type:F.apiValues,json:{type:F.jsonValues,read:{reader:F.read},write:{writer:F.write}}})],O.prototype,"style",void 0);t.__decorate([l.property({json:{write:!0}})],O.prototype,"symbolTileSize",void 0);t.__decorate([l.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,write:{writer:c.unitKebabDict.write}}})],O.prototype,"inputUnit",void 0);t.__decorate([m.reader("inputUnit")],O.prototype,
"readInputUnit",null);t.__decorate([l.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,read:{reader:c.unitKebabDict.read},write:{writer:c.unitKebabDict.write}}})],O.prototype,"outputUnit",void 0);t.__decorate([m.reader("outputUnit")],O.prototype,"readOutputUnit",null);t.__decorate([h.enumeration({vectorField:"vector-field"})],O.prototype,"type",void 0);t.__decorate([l.property({type:k})],O.prototype,"styleRenderer",null);t.__decorate([l.property({type:g})],O.prototype,
"sizeVariables",null);t.__decorate([l.property({type:a})],O.prototype,"rotationVariables",null);return O=D=t.__decorate([f.subclass("esri.renderers.VectorFieldRenderer")],O)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,t,v,F,p){function R(d,e){return c.get(d)/c.get(e)||1}function Q(d,e="geographic"){const [n,A]=d;d=Math.sqrt(n*n+A*A);let D=Math.atan2(A,n)*k;D=(360+D)%
360;"geographic"===e&&(D=(450-D)%360);return[d,D]}function O(d,e="geographic"){let n=d[1];"geographic"===e&&(n=(450-n)%360);n%=360;d=d[0];return[d*Math.cos(n/k),d*Math.sin(n/k)]}function S(d,e,n="geographic",A=1){if(!p.isValidPixelBlock(d))return d;const {pixels:D,width:G,height:y}=d;var E=G*y;const J=D[0],x=D[1],q=d.pixelType.startsWith("f")?d.pixelType:"f32",H=F.createEmptyBand(q,E);E=F.createEmptyBand(q,E);let T=0;for(let Z=0;Z<y;Z++)for(let V=0;V<G;V++)"vector-uv"===e?([H[T],E[T]]=Q([J[T],x[T]],
n),H[T]*=A):([H[T],E[T]]=O([J[T],x[T]],n),H[T]*=A,E[T]*=A),T++;d=new F({pixelType:q,width:d.width,height:d.height,mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,pixels:[H,E]});d.updateStatistics();return d}function z(d=0,e=0,n=Math.PI,A=!0){A&&(n=(2*Math.PI-n)%(2*Math.PI));A=A?-1:1;const D=-7*A,G=-2*A,y=-16*A,[E,J]=b(0,e+13*A,n,21.75),[x,q]=b(d-5.5,e+D,n,21.75),[H,T]=b(d+5.5,e+D,n,21.75),[Z,V]=b(d-1.5,e+G,n,21.75),[I,L]=b(d+1.5,e+G,n,21.75),[U,ba]=b(d-1.5,e+y,n,21.75),[ea,
Y]=b(d+1.5,e+y,n,21.75);return[E,J,x,q,Z,V,I,L,H,T,U,ba,ea,Y]}function l(d=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));var A=n?-1:1,D=5*A;const G=20*A,y=25*A;A*=2;const E=n?1:-1;n=5*E;let [J,x]=[0+n,0-G],[q,H]=[J+2*E,x],[T,Z]=[q-0*E,H+A],[V,I]=[0-n,0-y],[L,U]=[V+0*E,I-A],ba=Math.ceil(d/5),ea=Math.floor(ba/10);ba-=8*ea;d=[];const Y=[];for(let ra=0;ra<ba/2;ra++,ea--){0>=ea&&1===ba%2&&ra===(ba-1)/2&&(V=0,L=V+0*E,I=(I+x)/2,U=I-A);const [ta,qa]=b(V,I,e,45);if(0<ea){const [oa,ma]=b(q,I,e,45),[xa,
ua]=b(J,x,e,45);d.push(oa);d.push(ma);d.push(ta);d.push(qa);d.push(xa);d.push(ua)}else{const [oa,ma]=b(q,H,e,45),[xa,ua]=b(T,Z,e,45),[Ba,za]=b(L,U,e,45);Y.push(ta);Y.push(qa);Y.push(Ba);Y.push(za);Y.push(xa);Y.push(ua);Y.push(oa);Y.push(ma)}I+=D;x+=D;H+=D;Z+=D;U+=D}const [X,N]=b(0+n,0+G,e,45);D=7*E;const [W,ca]=b(0+D,0+G,e,45),[da,fa]=b(0+n,0-y,e,45),[ja,ia]=b(0+D,0-y,e,45);return{pennants:d,barbs:Y,shaft:[X,N,W,ca,da,fa,ja,ia]}}function b(d,e,n,A=1){return[Math.sqrt(d*d+e*e)/A,(2*Math.PI+(2*Math.PI+
Math.atan2(e,d))%(2*Math.PI)-n)%(2*Math.PI)]}function h(d,e,n,A){n=R(A||"knots",n);for(A=1;A<e.length;A++)if(A===e.length-1){if(d<e[A]*n)break}else if(d<=e[A]*n)break;return Math.min(A-1,e.length-2)}function m(d,e,n,A,D){let G=0;switch(e){case "beaufort_kn":G=h(d,a,"knots",n);break;case "beaufort_km":G=h(d,a,"kilometer-per-hour",n);break;case "beaufort_ft":G=h(d,a,"feet-per-second",n);break;case "beaufort_m":G=h(d,a,"meter-per-second",n);break;case "classified_arrow":G=h(d,D??[],A,n);break;case "ocean_current_m":G=
h(d,g,"meter-per-second",n);break;case "ocean_current_kn":G=h(d,r,"knots",n)}return G}function f(d,e){const {style:n,inputUnit:A,outputUnit:D,breakValues:G}=e,y=u.fromJSON(A),E=u.fromJSON(D);let J=0,x=0;const {width:q,height:H,mask:T}=d,Z=d.pixels[0];d=d.pixels[1];var V=v.isSome(T)?T.filter(U=>0<U).length:q*H;const I=new Float32Array(42*V);V=new Uint32Array(15*V);e=e.invertDirection?z(0,0,0,!1):B;for(let U=0;U<H;U++)for(let ba=0;ba<q;ba++){var L=U*q+ba;if(!T||T[U*q+ba]){const ea=(d[L]+360)%360/180*
Math.PI,Y=m(Z[L],n,y,E,G);for(let X=0;X<e.length;X+=2)I[J++]=(ba+.5)/q,I[J++]=(U+.5)/H,I[J++]=e[X],I[J++]=e[X+1]+ea,I[J++]=Y,I[J++]=Z[L];L=7*(J/42-1);V[x++]=L;V[x++]=L+1;V[x++]=L+2;V[x++]=L+0;V[x++]=L+4;V[x++]=L+3;V[x++]=L+0;V[x++]=L+2;V[x++]=L+3;V[x++]=L+2;V[x++]=L+5;V[x++]=L+3;V[x++]=L+5;V[x++]=L+6;V[x++]=L+3}}return{vertexData:I,indexData:V}}function w(d,e){let n=0,A=0;const {width:D,height:G,mask:y}=d;d=d.pixels[0];const E=[],J=[];var x=u.fromJSON(e.inputUnit);x=R(x,"knots");e="wind_speed"===
e.style?5:Number.MAX_VALUE;for(let H=0;H<G;H++)for(let T=0;T<D;T++){var q=d[H*D+T]*x;if((!y||y[H*D+T])&&q<e){for(let Z=0;4>Z;Z++)E[n++]=(T+.5)/D,E[n++]=(H+.5)/G,E[n++]=2>Z?-.5:.5,E[n++]=0===Z%2?-.5:.5,E[n++]=0,E[n++]=q;q=4*(n/24-1);J[A++]=q;J[A++]=q+1;J[A++]=q+2;J[A++]=q+1;J[A++]=q+2;J[A++]=q+3}}return{vertexData:new Float32Array(E),indexData:new Uint32Array(J)}}const c=new Map;c.set("meter-per-second",1);c.set("kilometer-per-hour",.277778);c.set("knots",.514444);c.set("feet-per-second",.3048);c.set("mile-per-hour",
.44704);const k=180/Math.PI,u=new t.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),B=z(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],g=[0,.5,1,1.5,2],r=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],C=[];K.convertToLocalDirections=function(d,e,n,A="geographic"){if(!p.isValidPixelBlock(d)||v.isNone(n))return d;d="vector-magdir"===e?d.clone():v.unwrap(S(d,e));const D=d.pixels[1];for(let G=
0;G<D.length;G++)D[G]="geographic"===A?(D[G]+n[G]+270)%360:(D[G]+360-n[G])%360;return"vector-magdir"===e?d:S(d,"vector-magdir")};K.convertVectorFieldData=S;K.convertVectorFieldUnit=function(d,e,n=1){if(1===n||!p.isValidPixelBlock(d))return d;d=d.clone();const {pixels:A,width:D,height:G}=d,y=A[0],E=A[1];let J=0;for(let x=0;x<G;x++)for(let q=0;q<D;q++)"vector-uv"===e?(y[J]*=n,E[J]*=n):y[J]*=n,J++;d.updateStatistics();return d};K.createVFMesh=function(d,e){if("simple_scalar"===e.style)e=w(d,e);else if("wind_speed"===
e.style){if(0===C.length)for(var n=0;30>n;n++)C.push(l(5*n,0,!e.invertDirection));e=u.fromJSON(e.inputUnit);e=R(e,"knots");const {width:y,height:E,mask:J}=d;n=d.pixels[0];d=d.pixels[1];const x=[],q=[];let H=0,T=0;for(let Z=0;Z<E;Z++)for(let V=0;V<y;V++){var A=Z*y+V,D=n[A]*e;if((!J||J[Z*y+V])&&5<=D){const I=(d[A]+360)%360/180*Math.PI,{pennants:L,barbs:U,shaft:ba}=C[Math.min(Math.floor(D/5),29)];if(0===L.length+U.length)continue;A=x.length/6;const ea=(V+.5)/y,Y=(Z+.5)/E;for(var G=0;G<L.length;G+=2)x[H++]=
ea,x[H++]=Y,x[H++]=L[G],x[H++]=L[G+1]+I,x[H++]=0,x[H++]=D;for(G=0;G<U.length;G+=2)x[H++]=ea,x[H++]=Y,x[H++]=U[G],x[H++]=U[G+1]+I,x[H++]=0,x[H++]=D;for(G=0;G<ba.length;G+=2)x[H++]=ea,x[H++]=Y,x[H++]=ba[G],x[H++]=ba[G+1]+I,x[H++]=0,x[H++]=D;for(D=0;D<L.length/6;D++)q[T++]=A,q[T++]=A+1,q[T++]=A+2,A+=3;for(D=0;D<U.length/8;D++)q[T++]=A,q[T++]=A+1,q[T++]=A+2,q[T++]=A+1,q[T++]=A+2,q[T++]=A+3,A+=4;q[T++]=A+0;q[T++]=A+1;q[T++]=A+2;q[T++]=A+1;q[T++]=A+3;q[T++]=A+2;A+=4}}e={vertexData:new Float32Array(x),indexData:new Uint32Array(q)}}else e=
f(d,e);return e};K.createVFMeshScalar=w;K.getUnitConversionFactor=R;K.sampleVectorField=function(d,e,n,A=[0,0],D=.5){const {width:G,height:y,mask:E}=d,[J,x]=d.pixels,[q,H]=A;d=Math.round((G-q)/n);A=Math.round((y-H)/n);var T=d*A;const Z=new Float32Array(T),V=new Float32Array(T);T=new Uint8Array(T);e="vector-uv"===e;for(let L=0;L<A;L++)for(let U=0;U<d;U++){let ba=0;const ea=L*d+U,Y=Math.max(0,L*n+H),X=Math.max(0,U*n+q),N=Math.min(y,Y+n),W=Math.min(G,X+n);for(let ca=Y;ca<N;ca++)for(let da=X;da<W;da++){var I=
ca*G+da;if(!E||E[I]){ba++;I=e?[J[I],x[I]]:[J[I],(360+x[I])%360];const [fa,ja]=e?I:O(I);Z[ea]+=fa;V[ea]+=ja}}if(ba>=(N-Y)*(W-X)*(1-D)){T[ea]=1;const [ca,da]=Q([Z[ea]/ba,V[ea]/ba]);Z[ea]=ca;V[ea]=da}else T[ea]=0,Z[ea]=0,V[ea]=0}n=new F({width:d,height:A,pixels:[Z,V],mask:T});n.updateStatistics();return n};K.snapImageToSymbolTile=function(d,e,n,A,D){if(v.isNone(D)||!D.spatialReference.equals(d.spatialReference))return{extent:d,width:Math.round(e/A),height:Math.round(n/A),resolution:d.width/e};const G=
D.xmin;D=D.ymax;e=(d.xmax-d.xmin)/e*A;n=(d.ymax-d.ymin)/n*A;d.xmin=G+Math.floor((d.xmin-G)/e)*e;d.xmax=G+Math.ceil((d.xmax-G)/e)*e;d.ymin=D+Math.floor((d.ymin-D)/n)*n;d.ymax=D+Math.ceil((d.ymax-D)/n)*n;return{extent:d,width:Math.round(d.width/e),height:Math.round(d.height/n),resolution:(e+n)/2}};K.unitKebabDict=u;K.uvComponentToVector=Q;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b){var h;F=h=function(m){function f(c){c=m.call(this,c)||this;c.width=null;c.height=null;c.pixelType="f32";c.validPixelCount=null;c.mask=null;c.maskIsAlpha=!1;c.premultiplyAlpha=!1;c.statistics=null;c.depthCount=1;return c}K._inheritsLoose(f,m);f.createEmptyBand=function(c,k){return new (h.getPixelArrayConstructor(c))(k)};f.getPixelArrayConstructor=function(c){let k;switch(c){case "u1":case "u2":case "u4":case "u8":k=Uint8Array;break;case "u16":k=Uint16Array;break;case "u32":k=
Uint32Array;break;case "s8":k=Int8Array;break;case "s16":k=Int16Array;break;case "s32":k=Int32Array;break;case "f32":k=Float32Array;break;case "f64":k=Float64Array;break;case "c64":case "c128":case "unknown":k=Float32Array}return k};var w=f.prototype;w.castPixelType=function(c){if(!c)return"f32";c=c.toLowerCase();["u1","u2","u4"].includes(c)?c="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(c)||(c="f32");return c};w.getPlaneCount=function(){return this.pixels?.length};w.addData=function(c){if(!c.pixels||
c.pixels.length!==this.width*this.height)throw new v("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(c.pixels);this.statistics.push(c.statistics??new l.SimpleBandStatistics)};w.getAsRGBA=function(){const c=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(c);
break;default:this._fillFrom8Bit(c)}return new Uint8ClampedArray(c)};w.getAsRGBAFloat=function(){const c=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(c);return c};w.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(u=>this._calculateBandStatistics(u,this.mask));var c=this.mask,k=0;if(Q.isSome(c))for(let u=0;u<c.length;u++)c[u]&&k++;else k=this.width*this.height;this.validPixelCount=k}};w.clamp=function(c){if(c&&"f64"!==c&&"f32"!==c&&this.pixels){var [k,
u]=b.getPixelValueRange(c),B=this.pixels,a=this.width*this.height,g=B.length,r=[];for(let n=0;n<g;n++){var C=h.createEmptyBand(c,a);var d=B[n];for(let A=0;A<a;A++){var e=d[A];C[A]=e>u?u:e<k?k:e}r.push(C)}this.pixels=r;this.pixelType=c}};w.extractBands=function(c){const {pixels:k,statistics:u}=this;if(Q.isNone(c)||0===c.length||!k||0===k.length)return this;var B=k.length;const a=c.some(g=>g>=k.length);B=B===c.length&&!c.some((g,r)=>g!==r);return a||B?this:new h({pixelType:this.pixelType,width:this.width,
height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:c.map(g=>k[g]),statistics:u&&c.map(g=>u[g])})};w.clone=function(){const c=new h({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});Q.isSome(this.mask)&&(c.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let k;const u=h.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){c.pixels=
[];const B=!!this.pixels[0].slice;for(k=0;k<this.pixels.length;k++)c.pixels[k]=B?this.pixels[k].slice(0,this.pixels[k].length):new u(this.pixels[k])}if(this.statistics)for(c.statistics=[],k=0;k<this.statistics.length;k++)c.statistics[k]=p.clone(this.statistics[k]);c.premultiplyAlpha=this.premultiplyAlpha;return c};w._fillFrom8Bit=function(c){const {mask:k,maskIsAlpha:u,premultiplyAlpha:B,pixels:a}=this;if(c&&a&&a.length){var g,r;var C=g=r=a[0];3<=a.length?(g=a[1],r=a[2]):2===a.length&&(g=a[1]);var d=
new Uint32Array(c),e=this.width*this.height;if(C.length!==e)R.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(Q.isSome(k)&&k.length===e)if(u)for(c=0;c<e;c++){const n=k[c];if(n){const A=n/255;d[c]=B?n<<24|r[c]*A<<16|g[c]*A<<8|C[c]*A:n<<24|r[c]<<16|g[c]<<8|C[c]}}else for(c=0;c<e;c++)k[c]&&(d[c]=-16777216|r[c]<<16|g[c]<<8|C[c]);else for(c=0;c<e;c++)d[c]=-16777216|r[c]<<16|g[c]<<8|C[c]}else R.getLogger(this.declaredClass).error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};w._fillFromNon8Bit=function(c){const {pixels:k,mask:u,statistics:B}=this;if(c&&k&&k.length){var a=this.pixelType,g=1,r=0;g=1;if(B&&0<B.length){for(var C of B)null!=C.minValue&&(r=Math.min(r,C.minValue)),null!=C.maxValue&&null!=C.minValue&&(g=Math.max(g,C.maxValue-C.minValue));g=255/g}else g=255,"s8"===a?(r=-128,g=127):"u16"===a?g=65535:"s16"===a?(r=-32768,g=32767):"u32"===a?g=4294967295:"s32"===a?(r=-2147483648,g=2147483647):"f32"===a?
(r=-3.4*1E39,g=3.4*1E39):"f64"===a&&(r=-Number.MAX_VALUE,g=Number.MAX_VALUE),g=255/(g-r);c=new Uint32Array(c);a=this.width*this.height;var d,e,n;C=d=e=k[0];if(C.length!==a)return R.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=k.length)if(d=k[1],3<=k.length&&(e=k[2]),Q.isSome(u)&&u.length===a)for(n=0;n<a;n++)u[n]&&(c[n]=-16777216|(e[n]-r)*g<<16|(d[n]-r)*g<<8|(C[n]-r)*g);else for(n=0;n<a;n++)c[n]=-16777216|(e[n]-r)*g<<16|(d[n]-r)*g<<
8|(C[n]-r)*g;else if(Q.isSome(u)&&u.length===a)for(n=0;n<a;n++)d=(C[n]-r)*g,u[n]&&(c[n]=-16777216|d<<16|d<<8|d);else for(n=0;n<a;n++)d=(C[n]-r)*g,c[n]=-16777216|d<<16|d<<8|d}else R.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFrom32Bit=function(c){const {pixels:k,mask:u}=this;if(!c||!k||!k.length)return R.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let B,
a,g,r;B=a=g=k[0];3<=k.length?(a=k[1],g=k[2]):2===k.length&&(a=k[1]);const C=this.width*this.height;if(B.length!==C)return R.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let d=0;if(Q.isSome(u)&&u.length===C)for(r=0;r<C;r++)c[d++]=B[r],c[d++]=a[r],c[d++]=g[r],c[d++]=u[r]&1;else for(r=0;r<C;r++)c[d++]=B[r],c[d++]=a[r],c[d++]=g[r],c[d++]=1};w._calculateBandStatistics=function(c,k){let u=Infinity,B=-Infinity;const a=c.length;let g,r=0;
if(Q.isSome(k))for(g=0;g<a;g++)k[g]&&(r=c[g],u=r<u?r:u,B=r>B?r:B);else for(g=0;g<a;g++)r=c[g],u=r<u?r:u,B=r>B?r:B;return new l.SimpleBandStatistics(u,B)};return f}(F.JSONSupport);t.__decorate([O.property({json:{write:!0}})],F.prototype,"width",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"height",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"pixelType",void 0);t.__decorate([S.cast("pixelType")],F.prototype,"castPixelType",null);t.__decorate([O.property({json:{write:!0}})],
F.prototype,"validPixelCount",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"mask",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"maskIsAlpha",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"pixels",void 0);t.__decorate([O.property()],F.prototype,"premultiplyAlpha",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"statistics",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"depthCount",void 0);t.__decorate([O.property({json:{write:!0}})],
F.prototype,"noDataValues",void 0);t.__decorate([O.property({json:{write:!0}})],F.prototype,"bandMasks",void 0);return F=h=t.__decorate([z.subclass("esri.layers.support.PixelBlock")],F)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],function(K){K.SimpleBandStatistics=function(t=null,v=null,F=null){this.minValue=t;this.maxValue=v;this.noDataValue=F};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],
function(K){function t(F){return v[F]??[-3.4028234663852886E38,3.4028234663852886E38]}const v={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};K.convertNoDataToMask=function(F,p,R){if(!(F.depthCount&&1<F.depthCount)){var {pixels:Q,statistics:O,pixelType:S}=F,z=Q[0].length,l=F.bandMasks??[],b=F.mask??(new Uint8Array(z)).fill(255),
h="f32"===S||"f64"===S,m=t(S),f=!1;for(let k=0;k<Q.length;k++){const u="number"===typeof p?p:p[k];if(null==u)continue;var w=O?.[k].maxValue??m[1];if((O?.[k].minValue??m[0])>u+Number.EPSILON||w<u-Number.EPSILON)continue;w=l[k]||(new Uint8Array(z)).fill(255);const B=Q[k];var c=R?.customFloatTolerance;if(h&&0!==c){c||(c=9.999999E37<=Math.abs(u)?2E-7*Math.abs(u):"f32"===S?2**-23:Number.EPSILON);for(let a=0;a<B.length;a++)w[a]&&Math.abs(B[a]-u)<c&&(B[a]=0,w[a]=0,b[a]=0,f=!0)}else for(c=0;c<B.length;c++)w[c]&&
B[c]===u&&(B[c]=0,w[c]=0,b[c]=0,f=!0);l[k]=w}f&&(F.bandMasks=l,F.mask=b);f&&"updateStatistics"in F&&F.updateStatistics()}};K.getPixelValueRange=t;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils"],function(K,t,v,F){function p(a){return t.isSome(a)&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function R(a,
g,r,C,d){const e=a.length;d=v.createEmptyBand(d,e);if(g)for(let n=0;n<e;n++)g[n]&&(d[n]=r[a[n]-C]);else for(g=0;g<e;g++)d[g]=r[a[g]-C];return d}function Q(a,g,r,C){const d=null!=r&&2<=r.length?new Set(r):null;r=1===r?.length?r[0]:null;const e=!!g?.length;for(let n=0;n<a.length;n++)if(C[n]){const A=a[n];if(e){let D=!1;for(let G=0;G<g.length;G+=2)if(A>=g[G]&&A<=g[G+1]){D=!0;break}D||(C[n]=0)}C[n]&&(A===r||d?.has(A))&&(C[n]=0)}}function O(a,g){const r=a[0].length;for(let C=0;C<r;C++)if(g[C]){let d=!1;
for(let e=0;e<a.length;e++)if(a[e][C]){d=!0;break}d||(g[C]=0)}}function S(a,g){const r=a[0].length;for(let C=0;C<r;C++)if(g[C]){let d=!1;for(let e=0;e<a.length;e++)if(0===a[e][C]){d=!0;break}d&&(g[C]=0)}}function z(a,g,r,C,d,e,n,A){return{xmin:d<=r*a?0:d<r*a+a?d-r*a:a,ymin:e<=C*g?0:e<C*g+g?e-C*g:g,xmax:d+n<=r*a?0:d+n<r*a+a?d+n-r*a:a,ymax:e+A<=C*g?0:e+A<C*g+g?e+A-C*g:g}}function l(a,g,r,C,d,e){const {width:n,height:A}=r.block,{x:D,y:G}=r.offset,{width:y,height:E}=r.mosaic;r=z(n,A,C,d,D,G,y,E);let J=
0;var x=0;if(e){var q=e.hasGCSSShiftTransform?360:e.halfWorldWidth??0,H=n*e.resolutionX;const T=e.startX+C*H;T<q&&T+H>q?x=e.rightPadding:T>=q&&(J=e.leftMargin-e.rightPadding,x=0)}r.xmax-=x;if("number"===typeof g)for(e=r.ymin;e<r.ymax;e++)for(x=(d*A+e-G)*y+(C*n-D)+J,q=r.xmin;q<r.xmax;q++)a[x+q]=g;else for(e=r.ymin;e<r.ymax;e++)for(x=(d*A+e-G)*y+(C*n-D)+J,q=e*n,H=r.xmin;H<r.xmax;H++)a[x+H]=g[q+H]}function b(a,g,r={}){const {clipOffset:C,clipSize:d,alignmentInfo:e,blockWidths:n}=r;if(n)return h(a,g,
{blockWidths:n});var A=a.find(V=>p(V));if(t.isNone(A))return null;r=d?d.width:g.width;const D=d?d.height:g.height;var G=A.width,y=A.height;const E=g.width/G,J=g.height/y;g={offset:C||{x:0,y:0},mosaic:d||g,block:{width:G,height:y}};G=A.pixelType;y=v.getPixelArrayConstructor(G);var x=A.pixels.length;A=[];for(var q=0;q<x;q++){var H=new y(r*D);for(let V=0;V<J;V++)for(let I=0;I<E;I++){var T=a[V*E+I];p(T)&&(T=T.pixels[q],l(H,T,g,I,V,e))}A.push(H)}let Z;if(a.some(V=>t.isNone(V)||t.isSome(V.mask)&&0<V.mask.length))for(Z=
new Uint8Array(r*D),y=0;y<J;y++)for(x=0;x<E;x++)H=a[y*E+x],q=t.isSome(H)?H.mask:null,t.isSome(q)?l(Z,q,g,x,y,e):H?l(Z,1,g,x,y,e):l(Z,0,g,x,y,e);a=new v({width:r,height:D,pixels:A,pixelType:G,mask:Z});a.updateStatistics();return a}function h(a,g,r){const C=a.find(x=>t.isSome(x));if(t.isNone(C))return null;var d=a.some(x=>t.isSome(x)?!!x.mask:!0);const {width:e,height:n}=g;g=d?new Uint8Array(e*n):null;({blockWidths:r}=r);const A=[],D=C.getPlaneCount(),G=v.getPixelArrayConstructor(C.pixelType);if(d)for(let x=
0,q=0;x<a.length;q+=r[x],x++)if(d=a[x],p(d)){var y=t.unwrap(d.mask);for(var E=0;E<n;E++)for(var J=0;J<r[x];J++)g[E*e+J+q]=null==y?255:y[E*d.width+J]}for(d=0;d<D;d++){y=new G(e*n);for(let x=0,q=0;x<a.length;q+=r[x],x++)if(E=a[x],p(E)&&(J=E.pixels[d],null!=J))for(let H=0;H<n;H++)for(let T=0;T<r[x];T++)y[H*e+T+q]=J[H*E.width+T];A.push(y)}a=new v({width:e,height:n,mask:g,pixels:A,pixelType:C.pixelType});a.updateStatistics();return a}function m(a){if(!p(a))return null;const g=a.clone(),{width:r,height:C,
pixels:d}=a;var e=d[0];const n=g.pixels[0];a=t.unwrap(a.mask);for(let G=2;G<C-1;G++){const y=new Map;for(var A=G-2;A<G+2;A++)for(var D=0;4>D;D++){const E=A*r+D;c(y,e[E],a?a[E]:1)}n[G*r]=f(y);n[G*r+1]=n[G*r+2]=n[G*r];for(A=3;A<r-1;A++)D=(G-2)*r+A+1,c(y,e[D],a?a[D]:1),D=(G-1)*r+A+1,c(y,e[D],a?a[D]:1),D=G*r+A+1,c(y,e[D],a?a[D]:1),D=(G+1)*r+A+1,c(y,e[D],a?a[D]:1),D=(G-2)*r+A-3,w(y,e[D],a?a[D]:1),D=(G-1)*r+A-3,w(y,e[D],a?a[D]:1),D=G*r+A-3,w(y,e[D],a?a[D]:1),D=(G+1)*r+A-3,w(y,e[D],a?a[D]:1),n[G*r+A]=f(y);
n[G*r+A+1]=n[G*r+A]}for(e=0;e<r;e++)n[e]=n[r+e]=n[2*r+e],n[(C-1)*r+e]=n[(C-2)*r+e];g.updateStatistics();return g}function f(a){if(0===a.size)return 0;let g=0,r=-1,C=0;const d=a.keys();let e=d.next();for(;!e.done;)C=a.get(e.value),C>g&&(r=e.value,g=C),e=d.next();return r}function w(a,g,r){0!==r&&(r=a.get(g),1===r?a.delete(g):a.set(g,r-1))}function c(a,g,r){0!==r&&a.set(g,a.has(g)?a.get(g)+1:1)}function k(a,g,r){let {x:C,y:d}=g;const {width:e,height:n}=r;if(0===C&&0===d&&n===a.height&&e===a.width)return a;
const {width:A,height:D}=a;g=Math.max(0,d);const G=Math.max(0,C),y=Math.min(C+e,A),E=Math.min(d+n,D);if(0>y||0>E||!p(a))return null;C=Math.max(0,-C);d=Math.max(0,-d);var {pixels:J}=a,x=e*n,q=J.length;const H=[];for(var T=0;T<q;T++){var Z=J[T],V=v.createEmptyBand(a.pixelType,x);for(let I=g;I<E;I++){const L=I*A;let U=(I+d-g)*e+C;for(let ba=G;ba<y;ba++)V[U++]=Z[L+ba]}H.push(V)}J=new Uint8Array(x);x=t.unwrap(a.mask);for(q=g;q<E;q++)for(T=q*A,Z=(q+d-g)*e+C,V=G;V<y;V++)J[Z++]=x?x[T+V]:1;a=new v({width:r.width,
height:r.height,pixelType:a.pixelType,pixels:H,mask:J});a.updateStatistics();return a}function u(a,g=!0){if(!p(a))return null;const {pixels:r,width:C,height:d,mask:e,pixelType:n}=a;a=[];const A=Math.round(C/2),D=Math.round(d/2),G=d-1,y=C-1;for(var E=0;E<r.length;E++){var J=r[E],x=v.createEmptyBand(n,A*D),q=0;for(var H=0;H<d;H+=2)for(var T=0;T<C;T+=2){var Z=J[H*C+T];if(g){var V=T===y?Z:J[H*C+T+1];const I=H===G?Z:J[H*C+T+C],L=T===y?I:H===G?V:J[H*C+T+C+1];x[q++]=(Z+V+I+L)/4}else x[q++]=Z}a.push(x)}E=
null;if(t.isSome(e))for(E=new Uint8Array(A*D),J=0,x=0;x<d;x+=2)for(q=0;q<C;q+=2)H=e[x*C+q],g?(T=q===y?H:e[x*C+q+1],Z=x===G?H:e[x*C+q+C],V=q===y?Z:x===G?T:e[x*C+q+C+1],E[J++]=H*T*Z*V?1:0):E[J++]=H;return new v({width:A,height:D,pixelType:n,pixels:a,mask:E})}function B(a,g,r,C,d=0){const {width:e,height:n}=a,{width:A,height:D}=g;a=C.cols;C=C.rows;g=Math.ceil(A/a-.1/a);const G=Math.ceil(D/C-.1/C);let y,E,J,x,q;const H=g*a;var T=H*G*C;const Z=new Float32Array(T),V=new Float32Array(T),I=new Uint32Array(T),
L=new Uint32Array(T);let U=0,ba,ea;for(let N=0;N<G;N++)for(let W=0;W<g;W++){var Y=12*(N*g+W);T=r[Y];y=r[Y+1];E=r[Y+2];J=r[Y+3];x=r[Y+4];q=r[Y+5];for(var X=0;X<C;X++){U=(N*C+X)*H+W*a;ea=(X+.5)/C;for(let ca=0;ca<X;ca++)ba=(ca+.5)/a,Z[U+ca]=(T*ba+y*ea+E)*e+d,V[U+ca]=(J*ba+x*ea+q)*n+d,I[U+ca]=Math.floor(Z[U+ca]),L[U+ca]=Math.floor(V[U+ca])}Y+=6;T=r[Y];y=r[Y+1];E=r[Y+2];J=r[Y+3];x=r[Y+4];q=r[Y+5];for(Y=0;Y<C;Y++)for(U=(N*C+Y)*H+W*a,ea=(Y+.5)/C,X=Y;X<a;X++)ba=(X+.5)/a,Z[U+X]=(T*ba+y*ea+E)*e+d,V[U+X]=(J*
ba+x*ea+q)*n+d,I[U+X]=Math.floor(Z[U+X]),L[U+X]=Math.floor(V[U+X])}return{offsets_x:Z,offsets_y:V,offsets_xi:I,offsets_yi:L,gridWidth:H}}K.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(K.NoDataInterpretation||(K.NoDataInterpretation={}));K.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]="bestMatch";a[a.fail=1]="fail"})(K.MissingBandAction||(K.MissingBandAction={}));K.MAX_MAP_SIZE_GPU=6;K.approximateTransform=function(a,g,r,C,d="nearest"){if(!p(a))return null;
"majority"===d&&(a=m(a));const {pixels:e,mask:n,pixelType:A}=a,D=a.width;var G=a.height;const y=v.getPixelArrayConstructor(A),E=e.length,{width:J,height:x}=g;a=!1;for(let L=0;L<r.length;L+=3)-1===r[L]&&-1===r[L+1]&&-1===r[L+2]&&(a=!0);const {offsets_x:q,offsets_y:H,offsets_xi:T,offsets_yi:Z,gridWidth:V}=B({width:D,height:G},g,r,C,"majority"===d?.5:0);let I;g=(L,U,ba)=>{const ea=L instanceof Float32Array||L instanceof Float64Array?0:.5;for(let Y=0;Y<x;Y++){I=Y*V;for(let X=0;X<J;X++){if(0>q[I]||0>H[I])L[Y*
J+X]=0;else if(ba)L[Y*J+X]=U[T[I]+Z[I]*D];else{const N=Math.floor(q[I]),W=Math.floor(H[I]),ca=Math.ceil(q[I]),da=Math.ceil(H[I]),fa=q[I]-N,ja=H[I]-W;L[Y*J+X]=!n||n[N+W*D]&&n[N+W*D]&&n[N+da*D]&&n[ca+da*D]?(1-ja)*((1-fa)*U[N+W*D]+fa*U[ca+W*D])+ja*((1-fa)*U[N+da*D]+fa*U[ca+da*D])+ea:U[T[I]+Z[I]*D]}I++}}};r=[];for(G=0;G<E;G++)C=new y(J*x),g(C,e[G],"nearest"===d||"majority"===d),r.push(C);d=new v({width:J,height:x,pixelType:A,pixels:r});if(t.isSome(n))d.mask=new Uint8Array(J*x),g(d.mask,n,!0);else if(a)for(d.mask=
new Uint8Array(J*x),a=0;a<J*x;a++)d.mask[a]=0>q[a]||0>H[a]?0:1;d.updateStatistics();return d};K.clip=k;K.colorize=function(a,g){if(!p(a)||!g||!g.indexedColormap&&!g.indexed2DColormap)return a;const r=a.clone();var C=r.pixels;let d=r.mask;const e=r.width*r.height;if(1!==C.length)return a;const {indexedColormap:n,indexed2DColormap:A,offset:D,alphaSpecified:G}=g;a=0;C=C[0];g=new Uint8Array(C.length);const y=new Uint8Array(C.length),E=new Uint8Array(C.length);var J=0;if(n){const x=n.length-1;if(t.isSome(d))for(a=
0;a<e;a++)d[a]&&(J=4*(C[a]-D),J<D||J>x?d[a]=0:(g[a]=n[J],y[a]=n[J+1],E[a]=n[J+2],d[a]=n[J+3]));else{d=new Uint8Array(e);for(a=0;a<e;a++)J=4*(C[a]-D),J<D||J>x?d[a]=0:(g[a]=n[J],y[a]=n[J+1],E[a]=n[J+2],d[a]=n[J+3]);r.mask=d}}else if(A)if(t.isSome(d))for(a=0;a<e;a++)d[a]&&(J=A[C[a]],g[a]=J[0],y[a]=J[1],E[a]=J[2],d[a]=J[3]);else{d=new Uint8Array(e);for(a=0;a<e;a++)J=A[C[a]],g[a]=J[0],y[a]=J[1],E[a]=J[2],d[a]=J[3];r.mask=d}r.pixels=[g,y,E];r.statistics=null;r.pixelType="u8";r.maskIsAlpha=G;return r};K.compositeBands=
function(a){if(!a?.length||a.some(D=>!p(D)))return null;if(1===a.length)return t.isSome(a[0])?a[0].clone():null;const {width:g,height:r,pixelType:C}=a[0];if(a.some(D=>D.width!==g||D.height!==r))return null;const d=a.map(({mask:D})=>D).filter(D=>null!=D);let e=null;d.length&&(e=new Uint8Array(g*r),e.set(d[0]),1<d.length&&S(d.slice(1),e));const n=[];a.forEach(({pixels:D})=>n.push(...D));const A=[];a.map(({statistics:D})=>D).filter(D=>D?.length).forEach(D=>A.push(...D));return new v({pixelType:C,width:g,
height:r,mask:e,pixels:n,statistics:A.length?A:null})};K.createColormapLUT=function(a){if(a){var g=a.colormap;if(g&&0!==g.length){g=g.sort((G,y)=>G[0]-y[0]);var r=0;0>g[0][0]&&(r=g[0][0]);var C=Math.max(256,g[g.length-1][0]-r+1),d=new Uint8Array(4*C),e=[],n=0,A=0,D=5===g[0].length;if(65536<C)return g.forEach(G=>{e[G[0]-r]=D?G.slice(1):G.slice(1).concat([255])}),{indexed2DColormap:e,offset:r,alphaSpecified:D};if(a.fillUnspecified)for(a=g[A],n=a[0]-r;n<C;n++)d[4*n]=a[1],d[4*n+1]=a[2],d[4*n+2]=a[3],
d[4*n+3]=D?a[4]:255,n===a[0]-r&&(a=A===g.length-1?a:g[++A]);else for(n=0;n<g.length;n++)a=g[n],A=4*(a[0]-r),d[A]=a[1],d[A+1]=a[2],d[A+2]=a[3],d[A+3]=D?a[4]:255;return{indexedColormap:d,offset:r,alphaSpecified:D}}}};K.createMaskLUT=function(a,g,r){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var C=a.includes("16")?65536:256;a=a.includes("s")?-C/2:0;C=new Uint8Array(C);if(g)for(let e=0;e<g.length;e++){var d=Math.ceil(g[2*e]-a);const n=Math.floor(g[2*e+1]-a);for(;d<=n;d++)C[d]=255}else C.fill(255);
if(r)for(g=0;g<r.length;g++)C[r[g]-a]=0;return{lut:C,offset:a}};K.createRemapLUT=function(a){const {srcPixelType:g,inputRanges:r,outputValues:C,allowUnmatched:d,noDataRanges:e,isLastInputRangeInclusive:n,outputPixelType:A}=a;if("u8"!==g&&"s8"!==g&&"u16"!==g&&"s16"!==g)return null;var D=g.includes("16")?65536:256;a=g.includes("s")?-D/2:0;const G=v.createEmptyBand(A,D);D=new Uint8Array(D);d&&D.fill(255);const [y,E]=F.getPixelValueRange(A);if(r?.length&&C?.length){var J=r.map(T=>T-1E-6);J[0]=r[0];n&&
(J[J.length-1]=r[r.length-1]);for(var x=0;x<J.length;x++){var q=C[x]>E?E:C[x]<y?y:C[x],H=Math.ceil(J[2*x]-a);const T=Math.floor(J[2*x+1]-a);for(;H<=T;H++)G[H]=q,D[H]=255}}if(e?.length)for(J=0;J<e.length;J++)for(q=Math.ceil(e[2*J]-a),x=Math.floor(e[2*J+1]-a);q<=x;q++)D[q]=0;return{lut:G,offset:a,mask:D}};K.extractBands=function(a,g){if(!g?.length||!p(a))return a;const r=a.pixels.length;return g&&g.some(C=>C>=r)||1===r&&1===g.length&&0===g[0]||r===g.length&&!g.some((C,d)=>C!==d)?a:new v({pixelType:a.pixelType,
width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:g.map(C=>a.pixels[C]),statistics:a.statistics&&g.map(C=>a.statistics[C])})};K.getClipBounds=z;K.getLocalArithmeticNorthRotations=function(a,g){const {coefficients:r,spacing:C}=g,{offsets_x:d,offsets_y:e,gridWidth:n}=B(a,a,r,{rows:C[0],cols:C[1]}),{width:A,height:D}=a;a=new Float32Array(A*D);g=180/Math.PI;for(let E=0;E<D;E++)for(let J=0;J<A;J++){var G=E*n+J,y=0===E?G:G-n;const x=E===D-1?G:G+
n;G=d[y]-d[x];y=e[x]-e[y];isNaN(G)||isNaN(y)?a[E*A+J]=90:(y=Math.atan2(y,G)*g,y=(360+y)%360,a[E*A+J]=y)}return a};K.interpolateOffsets=B;K.isValidPixelBlock=p;K.lookupBandValues=R;K.lookupPixels=function(a,g){if(!p(a))return null;const {pixels:r,mask:C}=a,d=r.length;let e=g.lut;const {offset:n}=g;e&&1===e[0].length&&(e=r.map(()=>e));const A=[];g=g.outputPixelType||"u8";for(let D=0;D<d;D++){const G=R(r[D],C,e[D],n||0,g);A.push(G)}a=new v({width:a.width,height:a.height,pixels:A,mask:C,pixelType:g});
a.updateStatistics();return a};K.mask=function(a,g){if(!p(a))return null;const {width:r,height:C,pixels:d}=a;var e=r*C;const n=new Uint8Array(e);a.mask?n.set(a.mask):n.fill(255);a=d.length;const {includedRanges:A,noDataValues:D,outputPixelType:G,matchAll:y,lookups:E}=g;if(E){e=[];for(g=0;g<a;g++){var J=E[g];J=R(d[g],n,J.lut,J.offset||0,"u8");e.push(J)}1===e.length?n.set(e[0]):y?O(e,n):S(e,n)}else if(y){g=[];for(J=0;J<a;J++){const x=new Uint8Array(e);x.set(n);Q(d[J],A?.slice(2*J,2*J+2),D?.[J],x);g.push(x)}1===
g.length?n.set(g[0]):O(g,n)}else for(e=0;e<a;e++)Q(d[e],A?.slice(2*e,2*e+2),D?.[e],n);return new v({width:r,height:C,pixelType:G,pixels:d,mask:n})};K.mosaic=b;K.mosaicPixelData=function(a,g){if(!a||0===a.length)return null;var r=a.find(E=>E.pixelBlock);if(!r||t.isNone(r.pixelBlock))return null;var C=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width;const d=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,e=.01*Math.min(C,d),n=a.sort((E,J)=>Math.abs(E.extent.ymax-J.extent.ymax)>e?J.extent.ymax-E.extent.ymax:
Math.abs(E.extent.xmin-J.extent.xmin)>e?E.extent.xmin-J.extent.xmin:0);var A=Math.min.apply(null,n.map(E=>E.extent.xmin));const D=Math.min.apply(null,n.map(E=>E.extent.ymin)),G=Math.max.apply(null,n.map(E=>E.extent.xmax)),y=Math.max.apply(null,n.map(E=>E.extent.ymax));a={x:Math.round((g.xmin-A)/C),y:Math.round((y-g.ymax)/d)};A={width:Math.round((G-A)/C),height:Math.round((y-D)/d)};C={width:Math.round((g.xmax-g.xmin)/C),height:Math.round((g.ymax-g.ymin)/d)};if(Math.round(A.width/r.pixelBlock.width)*
Math.round(A.height/r.pixelBlock.height)!==n.length||0>a.x||0>a.y||A.width<C.width||A.height<C.height)return null;r=n.map(E=>E.pixelBlock);r=b(r,A,{clipOffset:a,clipSize:C});return{extent:g,pixelBlock:r}};K.remap=function(a,g){if(!p(a))return null;const {width:r,height:C}=a,{inputRanges:d,outputValues:e,outputPixelType:n,noDataRanges:A,allowUnmatched:D,isLastInputRangeInclusive:G}=g;g=a.pixels[0];const y=v.createEmptyBand(n,g.length),E=a.mask,J=new Uint8Array(r*C);E?J.set(E):J.fill(255);const x=a.pixelType.startsWith("f")?
1E-6:0;var q=d.map(U=>U-x);q[0]=d[0];q[q.length-1]=d[d.length-1]+(G?1E-6:0);a=d.length/2;const [H,T]=F.getPixelValueRange(n);for(var Z=0;Z<C;Z++)for(var V=0;V<r;V++){var I=Z*r+V;if(J[I]){var L=g[I];let U=!1;for(let ba=a-1;0<=ba;ba--)if(L===q[2*ba]||L>q[2*ba]&&L<q[2*ba+1]){y[I]=e[ba];U=!0;break}U||(D?y[I]=L>T?T:L<H?H:L:J[I]=0)}}if(A?.length)for(q=0;q<C;q++)for(Z=0;Z<r;Z++)if(V=q*r+Z,!E||E[V])for(I=g[V],L=0;L<a;L+=2)if(I>=A[L]&&I<=A[L+1]){y[V]=0;J[V]=0;break}return new v({width:r,height:C,pixelType:n,
pixels:[y],mask:J})};K.remapColor=function(a,g){if(!p(a))return null;a=a.clone();var {pixels:r}=a;const C=a.width*a.height,d=g.length,e=Math.floor(d/2),n=g[Math.floor(e)];r=r[0];let A,D,G,y,E,J,x=!1;const q=new Uint8Array(C),H=new Uint8Array(C),T=new Uint8Array(C);let Z=a.mask;const V=4===g[0].mappedColor.length;Z||(Z=new Uint8Array(C),Z.fill(V?255:1),a.mask=Z);for(E=0;E<C;E++)if(Z[E]){A=r[E];x=!1;J=e;D=n;G=0;for(y=d-1;1<y-G;){if(A===D.value){x=!0;break}A>D.value?G=J:y=J;J=Math.floor((G+y)/2);D=g[Math.floor(J)]}x||
(A===g[G].value?(D=g[G],x=!0):A===g[y].value?(D=g[y],x=!0):A<g[G].value?(x=!1,D=null):A>g[G].value&&(A<g[y].value?(D=g[G],x=!0):y===d-1?(x=!1,D=null):(D=g[y],x=!0)));x?(q[E]=D.mappedColor[0],H[E]=D.mappedColor[1],T[E]=D.mappedColor[2],Z[E]=D.mappedColor[3]):q[E]=H[E]=T[E]=Z[E]=0}a.pixels=[q,H,T];a.mask=Z;a.pixelType="u8";a.maskIsAlpha=V;return a};K.resampleByMajority=m;K.setValidBoundary=function(a,g,r){if(!p(a))return null;const {width:C,height:d}=a,e=g.x;g=g.y;const n=r.width+e;r=r.height+g;if(0>
e||0>g||n>C||r>d||0===e&&0===g&&n===C&&r===d)return a;a.mask||(a.mask=new Uint8Array(C*d));const A=a.mask;for(let D=0;D<d;D++){const G=D*C;for(let y=0;y<C;y++)A[G+y]=D<g||D>=r||y<e||y>=n?0:1}a.updateStatistics();return a};K.split=function(a,g,r){if(!p(a))return null;const {width:C,height:d}=g;let {width:e,height:n}=a;const A=new Map,D={x:0,y:0};r=null==r?1:1+r;for(let G=0;G<r;G++){const y=Math.ceil(e/C),E=Math.ceil(n/d);for(let J=0;J<E;J++){D.y=J*d;for(let x=0;x<y;x++){D.x=x*C;const q=k(a,D,g);A.set(`${G}/${J}/${x}`,
q)}}G<r-1&&(a=u(a));e=Math.round(e/2);n=Math.round(n/2)}return A};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(K,t,v,F,p,R,Q,O,S,z,l,b,h){function m(y){y=y.symbolLayers;if(!y)return null;
let E=null;y.forEach(J=>{if("object"!==J.type||null==J.resource?.href)E="water"===J.type?O.unwrap(J.color):O.isSome(J.material)?O.unwrap(J.material.color):null});return E?new F(E):null}function f(y,E){if(null==E||null==y)return y;y=y.toRgba();y[3]*=E;return new F(y)}function w(y,E,J){if(y=y.symbolLayers){var x=q=>{q=O.isSome(q)?q:null;E=E??q??(null!=J?G:null);return f(E,J)};y.forEach(q=>{if("object"!==q.type||null==q.resource?.href||E)if("water"===q.type)q.color=x(q.color);else{var H=O.isSome(q.material)?
q.material.color:null;H=x(H);O.isNone(q.material)?q.material=new h.Symbol3DMaterial({color:H}):q.material.color=H;null!=J&&"outline"in q&&O.isSome(q.outline)&&O.isSome(q.outline.color)&&(q.outline.color=f(q.outline.color,J))}})}}function c(y,E){return k.apply(this,arguments)}function k(){k=v._asyncToGenerator(function*(y,E){(y=y.symbolLayers)&&(yield R.forEach(y,function(){var J=v._asyncToGenerator(function*(x){return u(x,E)});return function(x){return J.apply(this,arguments)}}()))});return k.apply(this,
arguments)}function u(y,E){return B.apply(this,arguments)}function B(){B=v._asyncToGenerator(function*(y,E){switch(y.type){case "extrude":y.size="number"===typeof E[2]?E[2]:0;break;case "icon":case "line":case "text":E=a(E);O.isSome(E)&&(y.size=E);break;case "path":const J=C(E,z.ONES,[y.width,void 0,y.height]);y.width=n(E[0],y.width,1,J);y.height=n(E[2],y.height,1,J);break;case "object":yield g(y,E)}});return B.apply(this,arguments)}function a(y){for(const E of y)if("number"===typeof E)return E;return null}
function g(y,E){return r.apply(this,arguments)}function r(){r=v._asyncToGenerator(function*(y,E){const {resourceSize:J,symbolSize:x}=yield d(y),q=C(E,J,x);y.width=n(E[0],x[0],J[0],q);y.depth=n(E[1],x[1],J[1],q);y.height=n(E[2],x[2],J[2],q)});return r.apply(this,arguments)}function C(y,E,J){for(let x=0;3>x;x++){const q=y[x];switch(q){case "symbol-value":return y=J[x],null!=y?y/E[x]:1;case "proportional":break;default:if(q&&E[x])return q/E[x]}}return 1}function d(y){return e.apply(this,arguments)}function e(){e=
v._asyncToGenerator(function*(y){const E=yield(yield new Promise((Z,V)=>K(["./symbolLayerUtils"],Z,V))).computeObjectLayerResourceSize(y,10),{width:J,height:x,depth:q}=y;y=[J,q,x];let H=1;for(var T=0;3>T;T++){const Z=y[T];if(null!=Z){H=Z/E[T];break}}for(T=0;3>T;T++)null==y[T]&&(y[T]=E[T]*H);return{resourceSize:E,symbolSize:y}});return e.apply(this,arguments)}function n(y,E,J,x){switch(y){case "proportional":return J*x;case "symbol-value":return null!=E?E:J;default:return y}}function A(){A=v._asyncToGenerator(function*(y,
E){if(y&&E){if(p.isSymbol3D(y))return c(y,E);if(p.isSymbol2D(y)&&(E=a(E),!O.isNone(E)))switch(y.type){case "simple-marker":y.size=E;break;case "picture-marker":const J=y.width/y.height;1<J?(y.width=E,y.height=E*J):(y.width=E*J,y.height=E);break;case "simple-line":y.width=E;break;case "text":y.font.size=E}}});return A.apply(this,arguments)}function D(){D=v._asyncToGenerator(function*(y,E){const J=yield y.fetchSymbol(E);return J?J:y.fetchCIMSymbol(E)});return D.apply(this,arguments)}const G=new F("white");
t.applyColorToSymbol=function(y,E,J){if(y&&(E||null!=J))if(E&&(E=new F(E)),p.isSymbol3D(y))w(y,E,J);else if(p.isSymbol2D(y)){if(E=E??y.color)y.color=f(E,J);null!=J&&"outline"in y&&y.outline&&y.outline.color&&(y.outline.color=f(y.outline.color,J))}};t.applyOpacityToColor=f;t.applyRotationToSymbol=function(y,E,J){y&&null!=E&&(p.isSymbol3D(y)?(y=y.symbolLayers)&&y.forEach(x=>{if(x&&"object"===x.type)switch(J){case "tilt":x.tilt=E;break;case "roll":x.roll=E;break;default:x.heading=E}}):!p.isSymbol2D(y)||
"simple-marker"!==y.type&&"picture-marker"!==y.type&&"text"!==y.type||(y.angle=E))};t.applySizesToSymbol=function(y,E){return A.apply(this,arguments)};t.fetchWebStyleSymbol=function(y,E){return D.apply(this,arguments)};t.getCSSFilterFromEffectList=function(y){if(!y)return null;y=y.effects.filter(E=>"bloom"!==E.type).map(E=>E.toJSON());return l.effectFunctionsFromJSON(y)};t.getColorFromSymbol=function(y,E){if(!y)return null;let J=null;p.isSymbol3D(y)?J=m(y):p.isSymbol2D(y)&&(J=y.color?new F(y.color):
null);return J?f(J,E):null};t.getIconHref=function(y){return O.unwrapOrThrow(y.resource).href};t.getSymbolOutlineSize=function(y){if(!y)return 0;if(p.isSymbol3D(y)){{const E=y.symbolLayers&&y.symbolLayers.length;E?(y=y.symbolLayers.getItemAt(E-1),y="outline"in y?O.get(y,"outline","size"):void 0):y=void 0}return O.isSome(y)?y:0}return S.px2pt(b.getStroke(y)?.width)};t.isVolumetricSymbol=function(y){if(O.isNone(y)||!("symbolLayers"in y)||O.isNone(y.symbolLayers))return!1;switch(y.type){case "point-3d":return y.symbolLayers.some(E=>
"object"===E.type);case "line-3d":return y.symbolLayers.some(E=>"path"===E.type);case "polygon-3d":return y.symbolLayers.some(E=>"object"===E.type||"extrude"===E.type);default:return!1}};t.symbolHasExtrudeSymbolLayer=function(y){return O.isSome(y)&&"polygon-3d"===y.type&&y.symbolLayers.some(E=>"extrude"===E.type)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(K,t,v,F,p,R,Q){function O(l){if(!l)return null;let b=null;switch(l.type){case "simple-fill":case "picture-fill":case "simple-marker":b=O(l.outline);break;case "simple-line":const h=R.pt2px(l.width);null!=l.style&&"none"!==l.style&&0!==h&&(b={color:l.color,style:z(l.style),width:h,cap:l.cap,join:"miter"===l.join?R.pt2px(l.miterLimit):l.join});break;default:b=null}return b}const S=new p(1E3),z=(()=>{const l={};return b=>{if(l[b])return l[b];const h=b.replace(/-/g,"");return l[b]=h}})();v=new v([128,
128,128]);K.defaultThematicColor=v;K.dekebabifyLineStyle=z;K.getFill=function(l){const b=l.style;let h=null;if(l)switch(l.type){case "simple-marker":"cross"!==b&&"x"!==b&&(h=l.color);break;case "simple-fill":"solid"===b?h=l.color:"none"!==b&&(h={type:"pattern",x:0,y:0,src:t.getAssetUrl(`esri/symbols/patterns/${b}.png`),width:5,height:5});break;case "picture-fill":h={type:"pattern",src:l.url,width:R.pt2px(l.width)*l.xscale,height:R.pt2px(l.height)*l.yscale,x:R.pt2px(l.xoffset),y:R.pt2px(l.yoffset)};
break;case "text":h=l.color;break;case "cim":h=Q.getCIMSymbolColor(l)}return h};K.getPatternUrlWithColor=function(l,b){const h=l+"-"+b;return void 0!==S.get(h)?Promise.resolve(S.get(h)):F(l,{responseType:"image"}).then(m=>{m=m.data;const f=m.naturalWidth,w=m.naturalHeight,c=document.createElement("canvas");c.width=f;c.height=w;const k=c.getContext("2d");k.fillStyle=b;k.fillRect(0,0,f,w);k.globalCompositeOperation="destination-in";k.drawImage(m,0,0);m=c.toDataURL();S.put(h,m);return m})};K.getStroke=
O;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(K){return function(){function t(F,p){this._storage=new K.MemCacheStorage;this._storage.maxSize=F;p&&this._storage.registerRemoveFunc("",p)}var v=t.prototype;v.put=function(F,p){this._storage.put(F,p,1,1)};v.pop=function(F){return this._storage.pop(F)};v.get=function(F){return this._storage.get(F)};v.clear=function(){this._storage.clearAll()};v.destroy=function(){this._storage.destroy()};
return t}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(K,t,v){function F(b){b=v.toCIMSymbolJSON(b);if("CIMTextSymbol"===b?.type)return b.height??0;let h=0;if(b?.symbolLayers)for(const m of b.symbolLayers)v.isCIMMarker(m)&&null!=m.size&&m.size>h?h=m.size:v.isCIMStroke(m)&&null!=m.width&&m.width>h?h=m.width:v.isCIMFill(m);return h}function p(b,h,m,f){if(b)if("CIMTextSymbol"===b.type)null!=b.height&&(b.height*=h);else{if(m&&b.effects)for(const w of b.effects)O(w,
h);if(b.symbolLayers)for(const w of b.symbolLayers)switch(w.type){case "CIMPictureMarker":case "CIMVectorMarker":R(w,h,f);break;case "CIMPictureStroke":case "CIMSolidStroke":!f?.preserveOutlineWidth&&w.width&&(w.width*=h);break;case "CIMPictureFill":w.height&&(w.height*=h);w.offsetX&&(w.offsetX*=h);w.offsetY&&(w.offsetY*=h);break;case "CIMHatchFill":p(w.lineSymbol,h,!0,{...f,preserveOutlineWidth:!1}),w.offsetX&&(w.offsetX*=h),w.offsetY&&(w.offsetY*=h),w.separation&&(w.separation*=h)}}}function R(b,
h,m){if(b&&(b.markerPlacement&&Q(b.markerPlacement,h),b.offsetX&&(b.offsetX*=h),b.offsetY&&(b.offsetY*=h),b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*h,y:b.anchorPoint.y*h}),b.size=null!=b.size?b.size*h:0,"CIMVectorMarker"===b.type&&b.markerGraphics))for(const f of b.markerGraphics)b.scaleSymbolsProportionally||p(f.symbol,h,!0,m)}function Q(b,h){v.isCIMMarkerStrokePlacement(b)&&b.offset&&(b.offset*=h);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&
(b.customEndingOffset*=h);b.offsetAlongLine&&(b.offsetAlongLine*=h);if(b.placementTemplate&&b.placementTemplate.length){var m=b.placementTemplate.map(f=>f*h);b.placementTemplate=m}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=h);b.placementTemplate&&b.placementTemplate.length&&(m=b.placementTemplate.map(f=>f*h),b.placementTemplate=m);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=h);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&
(b.offsetAlongLine*=h);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=h);b.endPosition&&(b.endPosition*=h);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&(b.offsetX*=h);b.offsetY&&(b.offsetY*=h);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&(b.offsetX*=h),b.offsetY&&(b.offsetY*=h),b.stepX&&(b.stepX*=h),b.stepY&&(b.stepY*=h)}}function O(b,h){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=h);break;
case "CIMGeometricEffectBuffer":b.size&&(b.size*=h);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=h);b.endCut&&(b.endCut*=h);b.middleCut&&(b.middleCut*=h);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&(b.customEndingOffset*=h);b.offsetAlongLine&&(b.offsetAlongLine*=h);if(b.dashTemplate&&b.dashTemplate.length){const m=b.dashTemplate.map(f=>f*h);b.dashTemplate=m}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&
(b.length*=h);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=h);b.offsetY&&(b.offsetY*=h);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=h);break;case "CIMGeometricEffectRegularPolygon":b.radius&&(b.radius*=h);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&(b.fromWidth*=h);b.length&&(b.length*=h);b.toWidth&&(b.toWidth*=h);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=h),b.period&&(b.period*=h)}}function S(b,
h){if(b){var m="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(m?.symbolLayers)for(const f of m.symbolLayers)if(!(f.colorLocked||b&&(v.isCIMStroke(f)||v.isCIMMarker(f)&&f.markerPlacement&&v.isCIMMarkerStrokePlacement(f.markerPlacement))))switch(f.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":f.tintColor&&z(h,f.tintColor);break;case "CIMVectorMarker":f.markerGraphics?.forEach(w=>{S(w.symbol,h)});break;case "CIMSolidStroke":case "CIMSolidFill":z(h,
f.color);break;case "CIMHatchFill":S(f.lineSymbol,h)}}}function z(b,h){for(const m of b)if(m.join(".")===h.join("."))return;b.push(h)}function l(b,h,m){if(b){var f="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===f?.type;if(f?.symbolLayers)for(const w of f.symbolLayers)if(!w.colorLocked){if(b)if(m){if({layersToColor:f}=m,(v.isCIMStroke(w)||v.isCIMMarker(w)&&w.markerPlacement&&v.isCIMMarkerStrokePlacement(w.markerPlacement))&&"fill"===f||v.isCIMFill(w)&&"outline"===f)continue}else if(v.isCIMStroke(w)||
v.isCIMMarker(w)&&w.markerPlacement&&v.isCIMMarkerStrokePlacement(w.markerPlacement))continue;f=h.toArray();switch(w.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":w.tintColor=f;break;case "CIMVectorMarker":w.markerGraphics?.forEach(c=>{l(c.symbol,h,m)});break;case "CIMSolidStroke":case "CIMSolidFill":w.color=f;break;case "CIMHatchFill":l(w.lineSymbol,h,m)}}}}K.applyCIMSymbolColor=function(b,h,m){h instanceof t||(h=new t(h));(b=v.toCIMSymbolJSON(b))&&l(b,h,m)};K.applyCIMSymbolRotation=
function(b,h,m=!1){b=v.toCIMSymbolJSON(b);m&&0!==h&&(h=360-h);if("CIMTextSymbol"===b?.type)b.angle=h;else if("CIMPointSymbol"===b?.type&&b.symbolLayers){m=h-(b.angle||0);for(const f of b.symbolLayers)if(v.isCIMMarker(f)){let w=f.rotation||0;w=f.rotateClockwise?w-m:w+m;f.rotation=w}b.angle=h}};K.getCIMSymbolColor=function(b){b=v.toCIMSymbolJSON(b);const h=[];S(b,h);return h.length?new t(v.fromCIMColor(h[0])):null};K.getCIMSymbolRotation=function(b,h=!1){b=v.toCIMSymbolJSON(b);return"CIMTextSymbol"===
b?.type||"CIMPointSymbol"===b?.type?(b=b.angle,null!=b&&0!==b&&h?360-b:b??0):0};K.getCIMSymbolSize=F;K.getCIMSymbolType=function(b){b=v.toCIMSymbolJSON(b);if(!b)return null;switch(b.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};K.scaleCIMMarker=R;K.scaleCIMSymbol=p;K.scaleCIMSymbolTo=function(b,
h,m){if(b){var f=v.toCIMSymbolJSON(b);b=F(b);if(0===b){if(f)if("CIMTextSymbol"===f.type)f.height=h;else if(f.symbolLayers)for(const w of f.symbolLayers)switch(w.type){case "CIMPictureMarker":case "CIMVectorMarker":w.size=h;break;case "CIMPictureStroke":case "CIMSolidStroke":w.width=h}}else p(f,h/b,!1,m)}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(K,t){function v(l){let b=l.length;for(;b--;)if(!" /-,\n".includes(l.charAt(b)))return!1;
return!0}function F(l,b){const h=[];var m=0;let f=-1;do f=l.indexOf("[",m),f>=m&&(f>m&&(m=l.substr(m,f-m),h.push([m,null,v(m)])),m=f+1,f=l.indexOf("]",m),f>=m&&(f>m&&(m=l.substr(m,f-m),(m=b[m])&&h.push([null,m,!1])),m=f+1));while(-1!==f);m<l.length-1&&(l=l.substr(m),h.push([l,null,v(l)]));return h}function p(l,b,h){let m="",f=null;for(const w of b){const [c,k,u]=w;if(c)u?f=c:(f&&(m+=f,f=null),m+=c);else if(b=l.attributes[k])f&&(m+=f,f=null),m+=b}return R(m,h)}function R(l,b){"string"!==typeof l&&
(l=String(l));switch(b){case "LowerCase":return l.toLowerCase();case "Allcaps":return l.toUpperCase();default:return l}}function Q(l){return l?{r:l[0],g:l[1],b:l[2],a:l[3]/255}:{r:0,g:0,b:0,a:0}}function O(l){if(!l)return null;switch(l.type){case "CIMPolygonSymbol":if(l.symbolLayers)for(const b of l.symbolLayers)if(l=O(b),null!=l)return l;break;case "CIMTextSymbol":return O(l.symbol);case "CIMSolidFill":return l.color}}function S(l){if(l)switch(l.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(l=
l.symbolLayers)for(const b of l)if(l=S(b),null!=l)return l;break;case "CIMTextSymbol":return S(l.symbol);case "CIMSolidStroke":case "CIMSolidFill":return l.color}}function z(l){if(l)switch(l.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(l.symbolLayers)for(const b of l.symbolLayers)if(l=z(b),void 0!==l)return l;break;case "CIMTextSymbol":return z(l.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return l.width}}t.adjustTextCase=R;t.analyzeTextParts=F;t.assignTextValuesFromFeature=
p;t.attributesToFields=function(l){return(l?Object.keys(l):[]).map(b=>({name:b,alias:b,type:"string"===typeof l[b]?"esriFieldTypeString":"esriFieldTypeDouble"}))};t.colorToArray=function(l){return[l.r,l.g,l.b,l.a]};t.createLabelOverrideFunction=function(l,b,h){const m=F(b,l);return f=>p(f,m,h)};t.evaluateValueOrFunction=function(l,b,h,m){return"function"===typeof l?l(b,h,m):l};t.fromCIMColor=Q;t.fromCIMFontDecoration=function(l){return l.underline?"underline":l.strikethrough?"line-through":"none"};
t.fromCIMFontStyle=function(l){let b="",h="";l&&(l=l.toLowerCase(),l.includes("italic")?b="italic":l.includes("oblique")&&(b="oblique"),l.includes("bold")?h="bold":l.includes("light")&&(h="lighter"));return{style:b,weight:h}};t.fromCIMHorizontalAlignment=function(l){switch(l){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};t.fromCIMVerticalAlignment=function(l){switch(l){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";
case "Bottom":return"bottom"}};t.getFillColor=O;t.getFontStyle=function(l){if(!l)return"normal";switch(l.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};t.getFontWeight=function(l){if(!l)return"normal";switch(l.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};t.getStrokeColor=S;t.getStrokeWidth=z;t.getTintColor=l=>l.tintColor?Q(l.tintColor):{r:255,g:255,b:255,a:1};t.getValue=
(l,b=0)=>null==l||isNaN(l)?b:l;t.importGeometryEngine=function(){return new Promise((l,b)=>K(["../../geometry/geometryEngineJSON"],l,b))};t.isCIMFill=function(l){return null!=l&&("CIMGradientFill"===l.type||"CIMHatchFill"===l.type||"CIMPictureFill"===l.type||"CIMSolidFill"===l.type||"CIMWaterFill"===l.type)};t.isCIMMarker=function(l){return"CIMVectorMarker"===l.type||"CIMPictureMarker"===l.type||"CIMBarChartMarker"===l.type||"CIMCharacterMarker"===l.type||"CIMPieChartMarker"===l.type||"CIMStackedBarChartMarker"===
l.type};t.isCIMMarkerStrokePlacement=function(l){return null!=l&&("CIMMarkerPlacementAlongLineRandomSize"===l.type||"CIMMarkerPlacementAlongLineSameSize"===l.type||"CIMMarkerPlacementAlongLineVariableSize"===l.type||"CIMMarkerPlacementAtExtremities"===l.type||"CIMMarkerPlacementAtMeasuredUnits"===l.type||"CIMMarkerPlacementAtRatioPositions"===l.type||"CIMMarkerPlacementOnLine"===l.type||"CIMMarkerPlacementOnVertices"===l.type)};t.isCIMStroke=function(l){return"CIMGradientStroke"===l.type||"CIMPictureStroke"===
l.type||"CIMSolidStroke"===l.type};t.isGeometryEngineRequired=l=>{if(!l)return!1;for(const b of l)switch(b.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};t.isSVGImage=l=>l.includes("data:image/svg+xml");t.mapCIMSymbolToGeometryType=function(l){if(!l)return null;switch(l.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";
default:return null}};t.resampleHermite=function(l,b,h,m,f,w,c=!0){const k=b/f;h/=w;const u=Math.ceil(k/2),B=Math.ceil(h/2);for(let r=0;r<w;r++)for(let C=0;C<f;C++){const d=4*(C+(c?w-r-1:r)*f);var a=0;let e=0,n=0,A=0,D=0,G=0,y=0;const E=(r+.5)*h;for(let J=Math.floor(r*h);J<(r+1)*h;J++){var g=Math.abs(E-(J+.5))/B;const x=(C+.5)*k;g*=g;for(let q=Math.floor(C*k);q<(C+1)*k;q++){let H=Math.abs(x-(q+.5))/u;a=Math.sqrt(g+H*H);-1<=a&&1>=a&&(a=2*a*a*a-3*a*a+1,0<a&&(H=4*(q+J*b),y+=a*l[H+3],n+=a,255>l[H+3]&&
(a=a*l[H+3]/250),A+=a*l[H],D+=a*l[H+1],G+=a*l[H+2],e+=a))}}m[d]=A/e;m[d+1]=D/e;m[d+2]=G/e;m[d+3]=y/n}};t.toCIMSymbolJSON=function(l){return l.data?.symbol??null};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(K,t,v,F,p,R,Q){var O;v=O=function(S){function z(l){l=S.call(this,l)||this;l.variableName=null;l.dimensionName=null;l.values=[];l.isSlice=!1;return l}K._inheritsLoose(z,S);z.prototype.clone=function(){return new O({variableName:this.variableName,dimensionName:this.dimensionName,values:F.clone(this.values),isSlice:this.isSlice})};return z}(v.JSONSupport);t.__decorate([p.property({type:String,json:{write:!0}})],v.prototype,"variableName",void 0);t.__decorate([p.property({type:String,json:{write:!0}})],
v.prototype,"dimensionName",void 0);t.__decorate([p.property({type:R.types.array(R.types.oneOf([R.types.native(Number),R.types.array(R.types.native(Number))])),json:{write:!0}})],v.prototype,"values",void 0);t.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"isSlice",void 0);return v=O=t.__decorate([Q.subclass("esri.layers.support.DimensionalDefinition")],v)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h){K.ExportImageServiceParameters=function(m){function f(){var c=m.apply(this,arguments)||this;c.layer=null;c.compression=void 0;c.pixelType=void 0;c.lercVersion=2;return c}t._inheritsLoose(f,m);var w=f.prototype;w.writeAdjustAspectRatio=function(c,k,u){10.3>this.layer.version||(k[u]=c)};w.writeCompressionQuality=function(c,k,u){this.format&&this.format.toLowerCase().includes("jpg")&&null!=c&&(k[u]=c)};w.writeCompressionTolerance=function(c,k,u){"lerc"===this.format&&
null!=c&&(k[u]=c)};w.writeLercVersion=function(c,k,u){"lerc"===this.format&&10.5<=this.layer.version&&(k[u]=c)};w.combineRendererWithRenderingRule=function(c){const k=this.layer,{rasterInfo:u,renderer:B}=k;c=c||k.renderingRule;return B&&z.isSupportedRendererType(B)?z.combineRenderingRules(z.convertRendererToRenderingRule(B,{rasterAttributeTable:u.attributeTable,pixelType:u.pixelType,dataType:u.dataType,bandProperties:u.keyProperties?.BandProperties,convertColorRampToColormap:10.6>k.version,convertToRFT:c?.rasterFunctionDefinition?
!0:!1,bandCount:u.bandCount}),c):c};w._addResampleRasterFunction=function(c){if("vector-field"!==this.layer.renderer?.type||"Resample"===c?.functionName)return c;let k=new h({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});k=c?.rasterFunctionDefinition?new h({rasterFunctionDefinition:z.convertRenderingRuleToRFT(k)}):k;return z.combineRenderingRules(k,c)};w._addClipFunction=
function(c,k){k=new h({functionName:"Clip",functionArguments:{ClippingGeometry:k.toJSON(),ClippingType:1}});return z.combineRenderingRules(k,c)};t._createClass(f,[{key:"adjustAspectRatio",get:function(){return this.layer.adjustAspectRatio}},{key:"bandIds",get:function(){return this.layer.bandIds}},{key:"compressionQuality",get:function(){return this.layer.compressionQuality}},{key:"compressionTolerance",get:function(){return this.layer.compressionTolerance}},{key:"format",get:function(){return"vector-field"===
this.layer.renderer?.type?"lerc":this.layer.format}},{key:"interpolation",get:function(){return this.layer.interpolation}},{key:"noData",get:function(){return this.layer.noData}},{key:"noDataInterpretation",get:function(){return this.layer.noDataInterpretation}},{key:"version",get:function(){const c=this.layer;c.commitProperty("bandIds");c.commitProperty("format");c.commitProperty("compressionQuality");c.commitProperty("compressionTolerance");c.commitProperty("interpolation");c.commitProperty("noData");
c.commitProperty("noDataInterpretation");c.commitProperty("mosaicRule");c.commitProperty("renderingRule");c.commitProperty("adjustAspectRatio");c.commitProperty("pixelFilter");c.commitProperty("definitionExpression");c.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1},set:function(c){this._set("version",c)}},{key:"mosaicRule",get:function(){var c=this.layer;let k=c.mosaicRule;c=c.definitionExpression;k?c&&c!==k.where&&(k=k.clone(),k.where=c):c&&(k=new l({where:c}));return k}},
{key:"renderingRule",get:function(){const c=this.layer;let k=c.renderingRule;const u=c.pixelFilter,B=!c.format||c.format.includes("jpg")||c.format.includes("png");k=this._addResampleRasterFunction(k);const a=c.multidimensionalSubset?.areaOfInterest;a&&(k=this._addClipFunction(k,a));B&&!u&&"vector-field"!==c.renderer?.type&&(k=this.combineRendererWithRenderingRule(k));return k}}]);return f}(F.JSONSupport);v.__decorate([p.property()],K.ExportImageServiceParameters.prototype,"layer",void 0);v.__decorate([p.property({json:{write:!0}})],
K.ExportImageServiceParameters.prototype,"adjustAspectRatio",null);v.__decorate([S.writer("adjustAspectRatio")],K.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"bandIds",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"compression",void 0);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"compressionQuality",
null);v.__decorate([S.writer("compressionQuality")],K.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"compressionTolerance",null);v.__decorate([S.writer("compressionTolerance")],K.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"format",null);v.__decorate([p.property({type:String,
json:{read:{reader:b.interpolationKebab.read},write:{writer:b.interpolationKebab.write}}})],K.ExportImageServiceParameters.prototype,"interpolation",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"noData",null);v.__decorate([p.property({type:String,json:{read:{reader:b.noDataInterpretationKebab.read},write:{writer:b.noDataInterpretationKebab.write}}})],K.ExportImageServiceParameters.prototype,"noDataInterpretation",null);v.__decorate([p.property({json:{write:!0}})],
K.ExportImageServiceParameters.prototype,"pixelType",void 0);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"lercVersion",void 0);v.__decorate([S.writer("lercVersion")],K.ExportImageServiceParameters.prototype,"writeLercVersion",null);v.__decorate([p.property({type:Number})],K.ExportImageServiceParameters.prototype,"version",null);v.__decorate([p.property({json:{write:!0}})],K.ExportImageServiceParameters.prototype,"mosaicRule",null);v.__decorate([p.property({json:{write:!0}})],
K.ExportImageServiceParameters.prototype,"renderingRule",null);K.ExportImageServiceParameters=v.__decorate([O.subclass("esri.layers.mixins.ExportImageServiceParameters")],K.ExportImageServiceParameters);Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ../../core/maybe ./RasterFunction ./rasterFunctionUtils ./rasterFormats/pixelRangeUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(K,t,v,F,p,R,Q,O,S){function z(d,e){for(const n in d)"raster"===n.toLowerCase()&&("RasterFunctionVariable"===d[n].type?(d[n]=e.rasterFunctionDefinition,d[n].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===d[n].type&&z(d[n].arguments,e))}function l(d){const e=t.clone(p.schema[d.functionName+"Function"]);d=d.functionArguments;for(const n in d)"raster"===n.toLowerCase()?(e.arguments[n]=l(d[n]),e.arguments[n].type="RasterFunctionTemplate"):"colormap"===n.toLowerCase()?(e.arguments[n].value=
B(d[n]),e.arguments.ColorSchemeType.value=0):e.arguments[n].value=d[n];return e}function b(d){const e=d?.Raster;return e&&"esri.layers.support.RasterFunction"===e.declaredClass?b(e.functionArguments):d}function h(d,e){const n=new F;n.functionName="VectorFieldRenderer";const {dataType:A,bandProperties:D}=e,G="vector-uv"===A?!0:!1;let y,E;D&&2===D.length&&(y=D.map(H=>H.BandName.toLowerCase()).indexOf("magnitude"),E=D.map(H=>H.BandName.toLowerCase()).indexOf("direction"));if(-1===y||null===y)y=0,E=1;
const J="arithmetic"===d.rotationType?1:2,x="flow-from"===d.flowRepresentation?0:1,q=d.visualVariables?d.visualVariables.find(H=>"Magnitude"===H.field):new S;d={magnitudeBandID:y,directionBandID:E,isUVComponents:G,referenceSystem:J,massFlowAngleRepresentation:x,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:g[d.style.toLowerCase().replace("-","_")],minimumMagnitude:q.minDataValue,maximumMagnitude:q.maxDataValue,minimumSymbolSize:q.minSize,maximumSymbolSize:q.maxSize};
n.functionArguments=d;return e.convertToRFT?new F({rasterFunctionDefinition:l(n)}):n}function m(d,e){const n=e.convertToRFT,A=new F;A.functionName="Stretch";var D=C[O.stretchTypeJSONDict.toJSON(d.stretchType)],G=u(d.statistics??[]);G={StretchType:D,Statistics:G,DRA:d.dynamicRangeAdjustment,UseGamma:d.useGamma,Gamma:d.gamma,ComputeGamma:d.computeGamma};null!=d.outputMin&&(G.Min=d.outputMin);null!=d.outputMax&&(G.Max=d.outputMax);D===C.standardDeviation?(G.NumberOfStandardDeviations=d.numberOfStandardDeviations,
A.outputPixelType="u8"):D===C.percentClip?(G.MinPercent=d.minPercent,G.MaxPercent=d.maxPercent,A.outputPixelType="u8"):D===C.minMax?A.outputPixelType="u8":D===C.sigmoid&&(G.SigmoidStrengthLevel=d.sigmoidStrengthLevel);A.functionArguments=G;A.variableName="Raster";if(d.colorRamp){G=d.colorRamp;D=new F;if(n)D.functionArguments={ColorRamp:Q.getRFxArgColorRampValue(G)};else{const y=Q.getColorRampName(G);y?D.functionArguments={colorRamp:y}:!e.convertColorRampToColormap||"algorithmic"!==G.type&&"multipart"!==
G.type?(d=d.colorRamp.toJSON(),"algorithmic"===d.type?d.algorithm=d.algorithm||"esriCIELabAlgorithm":"multipart"===d.type&&d.colorRamps?.length&&d.colorRamps.forEach(E=>E.algorithm=E.algorithm||"esriCIELabAlgorithm"),D.functionArguments={colorRamp:d}):D.functionArguments={Colormap:Q.convertColorRampToColormap(G)}}D.variableName="Raster";D.functionName="Colormap";D.functionArguments.Raster=A;return n?new F({rasterFunctionDefinition:l(D)}):D}return n?new F({rasterFunctionDefinition:l(A)}):A}function f(d,
e){const n=[],A=[],D=[],G=[],{pixelType:y,rasterAttributeTable:E}=e,J=v.isNone(E)?null:E.features,x=c(E);if(x&&J&&Array.isArray(J)&&d.classBreakInfos){d.classBreakInfos.forEach((Z,V)=>{const I=Z.symbol?.color;let L;I?.a&&null!=Z.minValue&&null!=Z.maxValue&&J.forEach(U=>{null!=Z.minValue&&null!=Z.maxValue&&(L=U.attributes[d.field],(L>=Z.minValue&&L<Z.maxValue||V===d.classBreakInfos.length-1&&L>=Z.minValue)&&G.push([U.attributes[x],I.r,I.g,I.b]))})});var q=y?w(G,y):G,H=new F;H.functionName="Colormap";
H.functionArguments={};H.functionArguments.Colormap=q;H.variableName="Raster";return e.convertToRFT?new F({rasterFunctionDefinition:l(H)}):H}d.classBreakInfos.forEach((Z,V)=>{if(null!=Z.minValue&&null!=Z.maxValue){var I=Z.symbol&&Z.symbol.color;I?.a?(0===V?n.push(Z.minValue,Z.maxValue+1E-6):n.push(Z.minValue+1E-6,Z.maxValue+1E-6),A.push(V),G.push([V,I.r,I.g,I.b])):D.push(Z.minValue,Z.maxValue)}});q=y?w(G,y):G;H=new F;H.functionName="Remap";H.functionArguments={InputRanges:n,OutputValues:A,NoDataRanges:D};
H.variableName="Raster";const T=new F;T.functionName="Colormap";T.functionArguments={Colormap:q,Raster:H};return e.convertToRFT?new F({rasterFunctionDefinition:l(T)}):T}function w(d,e){(e=a.has(e)?R.getPixelValueRange(e):null)&&d.push([Math.floor(e[0]-1),0,0,0],[Math.ceil(e[1]+1),0,0,0]);return d}function c(d){if(!v.isNone(d))return{fields:d}=d,(d=d&&d.find(e=>e&&e.name&&"value"===e.name.toLowerCase()))&&d.name}function k(d,e){const n=[],{pixelType:A,rasterAttributeTable:D}=e;var G=v.isNone(D)?null:
D.features;const y=c(D),E=d.defaultSymbol?.color?.toRgb();var J=d.uniqueValueInfos;if(J)if(!G)for(d=0;d<J.length;d++){var x=J[d];G=x.symbol?.color;x=+x.value;if(G?.a){if(isNaN(x))return null;n.push([x,G.r,G.g,G.b])}}else if(y){const q=new Map;J.forEach(T=>{const Z=T.value;T=T.symbol?.color;null!=Z&&T&&T.a&&q.set(String(Z),T.toRgb())});const H=d.field;G.forEach(({attributes:T})=>{const Z=T[y];(T=q.get(String(T[H])))?n.push([Z,...T]):E&&n.push([Z,...E])})}J=A&&0<n.length?w(n,A):n;d=new F;d.functionName=
"Colormap";d.functionArguments={};d.functionArguments.Colormap=J;d.variableName="Raster";return e.convertToRFT?new F({rasterFunctionDefinition:l(d)}):d}function u(d){const e=[];d?.forEach(n=>{Array.isArray(n)?e.push(n):null!=n.min&&null!=n.max&&e.push([n.min,n.max,n.avg||0,n.stddev||0])});return e}function B(d){const e=[],n=[];d.forEach(A=>{e.push(A[0]);n.push(Q.rgbaConvertTo32Bit([...A.slice(1),255]))});return{type:"RasterColormap",values:e,colors:n}}const a=new Set("u1 u2 u4 u8 s8 u16 s16".split(" ")),
g={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},r=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),C={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};K.combineRenderingRules=function(d,e){if(!d||
!e)return t.clone(d||e);d=t.clone(d);if(d.rasterFunctionDefinition&&e.rasterFunctionDefinition){const n=e.rasterFunctionDefinition;if(n.thumbnail||n.thumbnailEx)n.thumbnail=n.thumbnailEx=void 0;z(d.rasterFunctionDefinition.arguments,e)}else"none"!==e.functionName?.toLowerCase()&&(b(d.functionArguments).Raster=e);return d};K.convertRendererToRenderingRule=function(d,e){e=e||{};switch(d.type){case "raster-stretch":return m(d,e);case "class-breaks":return f(d,e);case "unique-value":return k(d,e);case "raster-colormap":var n=
e;(e=d.extractColormap())&&0!==e.length?({pixelType:d}=n,d=d?w(e,d):e,e=new F,e.functionName="Colormap",e.functionArguments={},e.functionArguments.Colormap=d,d=n.convertToRFT?new F({rasterFunctionDefinition:l(e)}):e):d=null;return d;case "vector-field":return h(d,e);case "raster-shaded-relief":n=e.convertToRFT;if("elevation"!==e.dataType&&("generic"!==e.dataType||1!==e.bandCount||"s16"!==e.pixelType&&"s32"!==e.pixelType&&"f32"!==e.pixelType&&"f64"!==e.pixelType))d=new F;else{e=new F;e.functionName=
"Hillshade";var A="traditional"===d.hillshadeType?0:1,D="none"===d.scalingType?1:3,G={HillshadeType:A,SlopeType:D,ZFactor:d.zFactor};0===A&&(G.Azimuth=d.azimuth,G.Altitude=d.altitude);3===D&&(G.PSPower=d.pixelSizePower,G.PSZFactor=d.pixelSizeFactor);e.functionArguments=G;e.variableName="Raster";d.colorRamp&&(e.functionName="ShadedRelief",n?G.ColorRamp=Q.getRFxArgColorRampValue(d.colorRamp):G.Colormap=Q.convertColorRampToColormap(d.colorRamp));d=n?new F({rasterFunctionDefinition:l(e)}):e}return d;
case "flow":throw Error("Unsupported rendering rule.");}};K.convertRenderingRuleToRFT=l;K.isSupportedRendererType=function(d){return r.has(d.type)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(K,t,v,F,p,R,Q,O,S,z){var l;const b=new Set(["raster","raster2","dem","fillraster"]),h=new Set(["rasters"]),m=k=>k&&k.rasterFunction?c.fromJSON(k):k,f=k=>k&&k instanceof c?k.toJSON():k,w=k=>k?.functionName&&!k.declaredClass?new c(k):k;let c=l=function(k){function u(a){a=k.call(this,a)||this;a.functionName=null;a.outputPixelType="unknown";a.variableName=null;a.rasterFunctionDefinition=null;return a}K._inheritsLoose(u,k);var B=u.prototype;B.readFunctionArguments=function(a){if(null==a)var g=
null;else{a=F.clone(a);var r={};for(g of Object.keys(a))b.has(g.toLowerCase())?r[g]=m(a[g]):h.has(g.toLowerCase())&&Array.isArray(a[g])?r[g]=a[g].map(m):r[g]=a[g];g=r}return g};B.writeFunctionArguments=function(a,g,r){const C={};for(const d of Object.keys(a))b.has(d.toLowerCase())?C[d]=f(a[d]):h.has(d.toLowerCase())&&Array.isArray(a[d])?C[d]=a[d].map(f):C[d]=f(a[d]);g[r]=C};B.readFunctionName=function(a,g){a=g.rasterFunctionInfos;const r=g.name;return r?r:a&&a.length&&"None"!==a[0].name?a[0].name:
g.rasterFunctionDefinition?g.rasterFunctionDefinition.name:g.rasterFunction};B.clone=function(){return new l({functionName:this.functionName,functionArguments:F.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:F.clone(this.rasterFunctionDefinition)})};K._createClass(u,[{key:"functionArguments",set:function(a){if(a){const g=Object.keys(a);if(g.some(r=>{var C;if(C=b.has(r.toLowerCase()))r=a[r],C=r?.functionName&&!r.declaredClass;
return C})||g.some(r=>h.has(r.toLowerCase())&&Array.isArray(a[r])&&a[r].some(C=>C?.functionName&&!C.declaredClass))){a=F.clone(a);for(const r of g)b.has(r.toLowerCase())?a[r]=w(a[r]):h.has(r.toLowerCase())&&Array.isArray(a[r])&&(a[r]=a[r].map(C=>w(C)))}}this._set("functionArguments",a)}}]);return u}(v.JSONSupport);t.__decorate([p.property({json:{type:Object,name:"rasterFunctionArguments"}})],c.prototype,"functionArguments",null);t.__decorate([O.reader("functionArguments")],c.prototype,"readFunctionArguments",
null);t.__decorate([z.writer("functionArguments")],c.prototype,"writeFunctionArguments",null);t.__decorate([p.property({json:{type:String,write:{target:"rasterFunction"}}})],c.prototype,"functionName",void 0);t.__decorate([O.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],c.prototype,"readFunctionName",null);t.__decorate([Q.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",
UNKNOWN:"unknown"},{ignoreUnknown:!1}),p.property({json:{default:"unknown"}})],c.prototype,"outputPixelType",void 0);t.__decorate([p.property({type:String,json:{read:!0,write:!0}})],c.prototype,"variableName",void 0);t.__decorate([p.property({type:Object,json:{name:"rasterFunctionDefinition"}})],c.prototype,"rasterFunctionDefinition",void 0);return c=l=t.__decorate([S.subclass("esri.layers.support.RasterFunction")],c)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(K){K.schema=
{StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},
Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,
name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m){var f;const w=v.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),c=v.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});v=f=function(k){function u(a){a=k.call(this,a)||this;a.ascending=!0;a.itemRenderingRule=
null;a.lockRasterIds=null;a.method=null;a.multidimensionalDefinition=null;a.objectIds=null;a.operation=null;a.sortField=null;a.sortValue=null;a.viewpoint=null;a.where=null;return a}K._inheritsLoose(u,k);var B=u.prototype;B.readAscending=function(a,g){return null!=g.ascending?g.ascending:null!=g.sortAscending?g.sortAscending:!0};B.readMethod=function(a,g){a=g.mosaicMethod||g.defaultMosaicMethod;switch(a?a.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":a="esriMosaicAttribute";
break;case "lockraster":a="esriMosaicLockRaster";break;case "center":a="esriMosaicCenter";break;case "northwest":a="esriMosaicNorthwest";break;case "nadir":a="esriMosaicNadir";break;case "viewpoint":a="esriMosaicViewpoint";break;case "seamline":a="esriMosaicSeamline";break;case "none":a="esriMosaicNone";break;default:a="esriMosaicNone"}return c.fromJSON(a)};B.writeMultidimensionalDefinition=function(a,g,r){null!=a&&(a=a.filter(({variableName:C,dimensionName:d})=>C&&"*"!==C||d),a.length&&(g[r]=a.map(C=>
C.toJSON())))};B.readOperation=function(a,g){a=g.mosaicOperation;g=g.mosaicOperator&&g.mosaicOperator.toLowerCase();g=a||(g?w.toJSON(g):null);return w.fromJSON(g)||"first"};B.castSortValue=function(a){return null==a||"string"===typeof a||"number"===typeof a?a:`${a}`};B.clone=function(){return new f({ascending:this.ascending,itemRenderingRule:p.clone(this.itemRenderingRule),lockRasterIds:p.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:p.clone(this.multidimensionalDefinition),
objectIds:p.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:p.clone(this.viewpoint),where:this.where})};return u}(F.JSONSupport);t.__decorate([R.property({type:Boolean,json:{write:!0}})],v.prototype,"ascending",void 0);t.__decorate([O.reader("ascending",["ascending","sortAscending"])],v.prototype,"readAscending",null);t.__decorate([R.property({type:m,json:{write:!0}})],v.prototype,"itemRenderingRule",void 0);t.__decorate([R.property({type:[l.Integer],
json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],v.prototype,"lockRasterIds",void 0);t.__decorate([R.property({type:String,json:{type:c.jsonValues,write:{target:"mosaicMethod",writer:c.write}}})],v.prototype,"method",void 0);t.__decorate([O.reader("method",["mosaicMethod","defaultMosaicMethod"])],v.prototype,"readMethod",null);t.__decorate([R.property({type:[h],json:{write:!0}})],v.prototype,"multidimensionalDefinition",void 0);t.__decorate([z.writer("multidimensionalDefinition")],
v.prototype,"writeMultidimensionalDefinition",null);t.__decorate([R.property({type:[l.Integer],json:{name:"fids",write:!0}})],v.prototype,"objectIds",void 0);t.__decorate([R.property({json:{type:w.jsonValues,read:{reader:w.read},write:{target:"mosaicOperation",writer:w.write}}})],v.prototype,"operation",void 0);t.__decorate([O.reader("operation",["mosaicOperation","mosaicOperator"])],v.prototype,"readOperation",null);t.__decorate([R.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===
this.method}}}}})],v.prototype,"sortField",void 0);t.__decorate([R.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],v.prototype,"sortValue",void 0);t.__decorate([Q.cast("sortValue")],v.prototype,"castSortValue",null);t.__decorate([R.property({type:b,json:{write:!0}})],v.prototype,"viewpoint",void 0);t.__decorate([R.property({type:String,json:{write:!0}})],v.prototype,"where",void 0);return v=f=t.__decorate([S.subclass("esri.layers.support.MosaicRule")],
v)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(K,t){const v=t.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});t=t.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});K.interpolationKebab=v;K.noDataInterpretationKebab=t;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/Error"],function(K,t,v){function F(){F=t._asyncToGenerator(function*(p,R){try{return yield createImageBitmap(p)}catch(Q){throw new v("request:server",`Unable to load ${R}`,{url:R,error:Q});}});return F.apply(this,arguments)}K.createBitmap=function(p,R){return F.apply(this,arguments)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h){var m;v={base:h,key:"type",typeMap:{extent:S,polygon:z}};F=m=function(f){function w(c){c=f.call(this,c)||this;c.areaOfInterest=null;c.subsetDefinitions=null;return c}K._inheritsLoose(w,f);w.prototype.clone=function(){const c=this.subsetDefinitions?.map(u=>u.clone()),k=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new m({areaOfInterest:k,subsetDefinitions:c})};K._createClass(w,[{key:"dimensions",get:function(){var {subsetDefinitions:c}=
this;if(null==c||0===c.length)return[];const k=new Map;c.forEach(u=>{if(u.dimensionName){if(Array.isArray(u.values[0])){var B=u.values;var a=B[0][0];B=B[u.values.length-1][1]}else B=u.values,a=B[0],B=B[u.values.length-1];k.has(u.dimensionName)?(u=k.get(u.dimensionName),u[0]=Math.min(a,u[0]),u[1]=Math.max(B,u[1])):k.set(u.dimensionName,[a,B])}});c=[];for(const u of k)c.push({name:u[0],extent:u[1]});return c}},{key:"variables",get:function(){const {subsetDefinitions:c}=this;if(null==c||0===c.length)return[];
const k=new Set;c.forEach(u=>{u.variableName&&k.add(u.variableName)});return[...k]}}]);return w}(F.JSONSupport);t.__decorate([p.property({types:v,json:{read:l.fromJSON,write:!0}})],F.prototype,"areaOfInterest",void 0);t.__decorate([p.property({readOnly:!0})],F.prototype,"dimensions",null);t.__decorate([p.property({readOnly:!0})],F.prototype,"variables",null);t.__decorate([p.property({type:[b],json:{write:!0}})],F.prototype,"subsetDefinitions",void 0);return F=m=t.__decorate([O.subclass("esri.layers.support.MultidimensionalSubset")],
F)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),function(K,t,v,F,p,R,Q,O,S,z,l){var b;v=b=function(h){function m(f){f=h.call(this,f)||this;f.attributeTable=
null;f.bandCount=null;f.colormap=null;f.extent=null;f.format=void 0;f.height=null;f.width=null;f.histograms=null;f.keyProperties={};f.multidimensionalInfo=null;f.noDataValue=null;f.pixelSize=null;f.pixelType=null;f.isPseudoSpatialReference=!1;f.spatialReference=null;f.statistics=null;f.storageInfo=null;f.transform=null;return f}K._inheritsLoose(m,h);m.prototype.clone=function(){return new b({attributeTable:F.clone(this.attributeTable),bandCount:this.bandCount,colormap:F.clone(this.colormap),extent:F.clone(this.extent),
nativePixelSize:F.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:F.clone(this.histograms),keyProperties:F.clone(this.keyProperties),multidimensionalInfo:F.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:F.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:F.clone(this.spatialReference),statistics:F.clone(this.statistics),storageInfo:F.clone(this.storageInfo),transform:F.clone(this.transform)})};
K._createClass(m,[{key:"dataType",get:function(){const f=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===f?"standard-time":f}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(f){f&&this._set("nativeExtent",f)}},{key:"nativePixelSize",get:function(){if(p.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const f=this.nativeExtent;return{x:f.width/this.width,y:f.height/this.height}}},{key:"hasMultidimensionalTranspose",
get:function(){return!!this.storageInfo?.transposeInfo}}]);return m}(v.JSONSupport);t.__decorate([R.property({json:{write:!0}})],v.prototype,"attributeTable",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"bandCount",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"colormap",void 0);t.__decorate([R.property({type:String,readOnly:!0})],v.prototype,"dataType",null);t.__decorate([R.property({type:S,json:{write:!0}})],v.prototype,"extent",void 0);t.__decorate([R.property({type:S,
json:{write:!0}})],v.prototype,"nativeExtent",null);t.__decorate([R.property({json:{write:!0}})],v.prototype,"nativePixelSize",null);t.__decorate([R.property({json:{write:!0}})],v.prototype,"format",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"height",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"width",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"hasMultidimensionalTranspose",null);t.__decorate([R.property({json:{write:!0}})],v.prototype,
"histograms",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"keyProperties",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"multidimensionalInfo",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"noDataValue",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"pixelSize",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"pixelType",void 0);t.__decorate([R.property()],v.prototype,"isPseudoSpatialReference",void 0);t.__decorate([R.property({type:z,
json:{write:!0}})],v.prototype,"spatialReference",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"statistics",void 0);t.__decorate([R.property({type:l,json:{write:!0}})],v.prototype,"storageInfo",void 0);t.__decorate([R.property({json:{write:!0}})],v.prototype,"transform",void 0);return v=b=t.__decorate([O.subclass("esri.layers.support.RasterInfo")],v)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O){var S;v=S=function(z){function l(){var b=z.apply(this,arguments)||this;b.blockWidth=void 0;b.blockHeight=void 0;b.compression=null;b.origin=null;b.firstPyramidLevel=null;b.maximumPyramidLevel=null;b.pyramidScalingFactor=2;b.pyramidBlockWidth=null;b.pyramidBlockHeight=null;b.isVirtualTileInfo=!1;b.tileInfo=null;b.transposeInfo=null;b.blockBoundary=null;return b}K._inheritsLoose(l,z);l.prototype.clone=function(){return new S({blockWidth:this.blockWidth,blockHeight:this.blockHeight,
compression:this.compression,origin:F.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:F.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:F.clone(this.tileInfo),transposeInfo:F.clone(this.transposeInfo),blockBoundary:F.clone(this.blockBoundary)})};return l}(v.JSONSupport);
t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"blockWidth",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"blockHeight",void 0);t.__decorate([p.property({type:String,json:{write:!0}})],v.prototype,"compression",void 0);t.__decorate([p.property({type:O,json:{write:!0}})],v.prototype,"origin",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"firstPyramidLevel",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],
v.prototype,"maximumPyramidLevel",void 0);t.__decorate([p.property({json:{write:!0}})],v.prototype,"pyramidResolutions",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pyramidScalingFactor",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pyramidBlockWidth",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"pyramidBlockHeight",void 0);t.__decorate([p.property({type:Boolean,json:{write:!0}})],v.prototype,"isVirtualTileInfo",
void 0);t.__decorate([p.property({json:{write:!0}})],v.prototype,"tileInfo",void 0);t.__decorate([p.property()],v.prototype,"transposeInfo",void 0);t.__decorate([p.property()],v.prototype,"blockBoundary",void 0);return v=S=t.__decorate([Q.subclass("esri.layers.support.RasterStorageInfo")],v)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(K,t,v,F,p){return function(){function R(){this._workerThread=
null;this._destroyed=!1}var Q=R.prototype;Q.initialize=function(){var O=K._asyncToGenerator(function*(){const S=yield F.open("RasterWorker");this._destroyed?S.close():this._workerThread=S});return function(){return O.apply(this,arguments)}}();Q.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};Q.convertVectorFieldData=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection",
"no available worker connection");return(S=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:S.pixelBlock.toJSON(),type:S.dataType},z))?new p(S):null});return function(S,z){return O.apply(this,arguments)}}();Q.decode=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");return(S=yield this._workerThread.invoke("decode",S,z))?new p(S):null});return function(S,z){return O.apply(this,
arguments)}}();Q.symbolize=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");S={extent:S.extent&&S.extent.toJSON(),pixelBlock:v.isSome(S.pixelBlock)&&S.pixelBlock.toJSON(),simpleStretchParams:S.simpleStretchParams,bandIds:S.bandIds};return(z=yield this._workerThread.invoke("symbolize",S,z))?new p(z):null});return function(S,z){return O.apply(this,arguments)}}();Q.updateSymbolizer=function(){var O=
K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");const l=S?.rendererJSON?.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:S.toJSON(),histograms:l},z))});return function(S,z){return O.apply(this,arguments)}}();Q.updateRasterFunction=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");
yield Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:S.toJSON()},z))});return function(S,z){return O.apply(this,arguments)}}();Q.process=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");return(S=yield this._workerThread.invoke("process",{extent:S.extent?.toJSON(),primaryPixelBlocks:S.primaryPixelBlocks.map(l=>v.isSome(l)?l.toJSON():null),primaryRasterIds:S.primaryRasterIds},
z))?new p(S):null});return function(S,z){return O.apply(this,arguments)}}();Q.stretch=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");if(!S?.pixelBlock)return null;S={srcPixelBlock:S.pixelBlock.toJSON(),stretchParams:S.stretchParams};return(z=yield this._workerThread.invoke("stretch",S,z))?new p(z):null});return function(S,z){return O.apply(this,arguments)}}();Q.split=function(){var O=K._asyncToGenerator(function*(S,
z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");if(!S?.pixelBlock)return null;S={srcPixelBlock:S.pixelBlock.toJSON(),tileSize:S.tileSize,maximumPyramidLevel:S.maximumPyramidLevel};const l=yield this._workerThread.invoke("split",S,z);l&&l.forEach((b,h)=>{l.set(h,b?p.fromJSON(b):null)});return l});return function(S,z){return O.apply(this,arguments)}}();Q.estimateStatisticsHistograms=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection",
"no available worker connection");if(!S?.pixelBlock)return null;S={srcPixelBlock:S.pixelBlock.toJSON()};return yield this._workerThread.invoke("estimateStatisticsHistograms",S,z)});return function(S,z){return O.apply(this,arguments)}}();Q.mosaicAndTransform=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");if(!S?.srcPixelBlocks?.length)return{pixelBlock:null};S={...S,srcPixelBlocks:S.srcPixelBlocks.map(l=>
v.isSome(l)?l.toJSON():null)};z=yield this._workerThread.invoke("mosaicAndTransform",S,z);return{pixelBlock:z.pixelBlock?new p(z.pixelBlock):null,localNorthDirections:z.localNorthDirections}});return function(S,z){return O.apply(this,arguments)}}();Q.createFlowMesh=function(){var O=K._asyncToGenerator(function*(S,z){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");const l={buffer:S.flowData.data.buffer,maskBuffer:S.flowData.mask.buffer,width:S.flowData.width,
height:S.flowData.height},{meshType:b,simulationSettings:h}=S;S=yield this._workerThread.invoke("createFlowMesh",{meshType:b,flowData:l,simulationSettings:h},{...z,transferList:[l.buffer,l.maskBuffer]});return{vertexData:new Float32Array(S.vertexBuffer),indexData:new Uint32Array(S.indexBuffer)}});return function(S,z){return O.apply(this,arguments)}}();Q.getProjectionOffsetGrid=function(O,S){if(!this._workerThread)throw new t("raster-jobhandler:no-connection","no available worker connection");const z=
v.isSome(O.datumTransformation)?O.datumTransformation.steps.map(b=>({wkid:b.wkid,wkt:b.wkt,isInverse:b.isInverse})):null,l=v.isSome(O.rasterTransform)?O.rasterTransform.toJSON():null;O={projectedExtent:O.projectedExtent.toJSON(),srcBufferExtent:O.srcBufferExtent.toJSON(),pixelSize:O.pixelSize,hasWrapAround:O.hasWrapAround,spacing:O.spacing,datumTransformationSteps:z,rasterTransform:l,isAdaptive:O.isAdaptive,includeGCSGrid:O.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",
O,S)};return R}()})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/maybe","../DimensionalDefinition"],function(K,t,v){function F(m,f,w){const c=f.shift();0===w.length&&w.push({sliceId:-1,multidimensionalDefinition:[]});const k=w.length;for(let u=0;u<k;u++){const B=w.shift().multidimensionalDefinition;c.values?.forEach(a=>{w.push({sliceId:-1,multidimensionalDefinition:[...B,{variableName:m,dimensionName:c.name,values:[a]}]})})}f.length&&F(m,
f,w)}function p(m,f){return Array.isArray(m)?f[0]===f[1]?m[0]===f[0]||m[1]===f[0]:m[0]>=f[0]&&m[0]<=f[1]&&m[1]>=f[0]&&m[1]<=f[1]:m>=f[0]&&m<=f[1]}function R(m,f){return m[0]<=f[0]&&m[1]>=f[0]||m[0]<=f[1]&&m[1]>=f[1]||m[0]>=f[0]&&m[1]<=f[1]}function Q(m){return 1===m.length?[m[0],m[0]]:[m[0],m[m.length-1]]}function O(m,f,w){if(!f?.subsetDefinitions?.length)return m;if(w){const {variables:k}=f;if(k.length&&!k.includes(w))return null;f=f.subsetDefinitions.find(u=>u.dimensionName===m.name&&u.variableName===
w);if(!f?.values?.length)return m;f=Q(f.values)}else f=f.dimensions.find(({name:k})=>k===m.name)?.extent;const c=f;if(!c||!c?.length)return m;f=m.values.filter(k=>p(k,c));return{...m,extent:[...c],values:f}}function S(m,f,w){if(!f?.subsetDefinitions?.length)return!1;const {variables:c}=f;if(c.length&&m.some(({variableName:k})=>k&&!c.includes(k)))return!0;for(let k=0;k<m.length;k++){const u=m[k],B=f.subsetDefinitions.find(a=>(""===u.variableName||a.variableName===u.variableName)&&a.dimensionName===
u.dimensionName);if(B?.values.length){const a=Q(B.values);if(!u.isSlice&&2===u.values.length&&!Array.isArray(u.values[0])&&u.values[0]!==u.values[1]&&w){if(!R(u.values,a))return!0}else if(u.values.some(g=>!p(g,a)))return!0}}return!1}function z(m,f){var w=m.dimensions.find(({name:B})=>"StdTime"===B);if(null==w||t.isNone(f.start)&&t.isNone(f.end))return f;f=f.clone();const {start:c,end:k}=f.toJSON(),u=c===k?[c]:null!=c&&null!=k?[c,k]:[c??k];if(2===u.length&&w?.extent.length&&(u[0]=Math.max(u[0],w.extent[0]),
u[1]=Math.min(u[1],w.extent[1]??w.extent[0]),u[1]<u[0]))return null;w=new v({variableName:"",dimensionName:"StdTime",isSlice:1===u.length,values:u});if(S([w],m,!0))return null;f.start=new Date(u[0]);f.end=new Date(u[1]??u[0]);return f}function l(m,f={}){const {multidimensionalInfo:w,keyProperties:c}=m;if(t.isNone(w))return null;const {variableName:k,multidimensionalSubset:u,multidimensionalDefinition:B}=f;m=t.isSome(B)?B[0]?.variableName:null;const a=k||m||c?.DefaultVariable;({variables:m}=w);u?.variables?.length&&
(m=m.filter(({name:g})=>u.variables.includes(g)));return a?m.find(({name:g})=>g===a)??m[0]:m[0]}function b(m,f){var {values:w}=f;if(w?.length)return Array.isArray(w[0])!==Array.isArray(m)?-1:Array.isArray(w[0])?w.findIndex(u=>u[0]===m[0]&&u[1]===m[1]):w.indexOf(m);var {extent:c}=f;if(Array.isArray(m)||m<c[0]||m>c[1])return-1;w=f.interval||1;if("ISO8601"!==f.unit)return Math.round((m-c[0])/w);c=c[0];let k=-1;switch(f.intervalUnit?.toLowerCase()||"seconds"){case "seconds":k=Math.round((m-c)/1E3/w);
break;case "minutes":k=Math.round((m-c)/6E4/w);break;case "hours":k=Math.round((m-c)/36E5/w);break;case "days":k=Math.round((m-c)/864E5/w);break;case "months":f=(new Date(m)).getUTCFullYear()-(new Date(c)).getUTCFullYear();w=(new Date(c)).getUTCMonth();c=(new Date(m)).getUTCMonth();k=0===f?c-w:c+11-w+12*(f-1);break;case "years":k=Math.round(((new Date(m)).getUTCFullYear()-(new Date(c)).getUTCFullYear())/w);break;case "decades":k=Math.round(((new Date(m)).getUTCFullYear()-(new Date(c)).getUTCFullYear())/
10/w)}return k}function h(m){var f=m.values?.length;if(f)return f;const {extent:w,unit:c}=m;f=m.interval||1;var k=w?w[1]-w[0]:0;if("ISO8601"!==c)return Math.round(k/f);switch(m.intervalUnit?.toLowerCase()??"seconds"){case "seconds":f=Math.round(k/1E3/f);break;case "minutes":f=Math.round(k/6E4/f);break;case "hours":f=Math.round(k/36E5/f);break;case "days":f=Math.round(k/864E5/f);break;case "months":m=(new Date(w[1])).getUTCFullYear()-(new Date(w[0])).getUTCFullYear();f=(new Date(w[1][0])).getUTCMonth();
k=(new Date(w[1][1])).getUTCMonth();f=0===m?k-f+1:k+11-f+12*(m-1)+1;break;case "years":f=Math.round(((new Date(w[1])).getUTCFullYear()-(new Date(w[0])).getUTCFullYear())/f);break;case "decades":f=Math.round(((new Date(w[1])).getUTCFullYear()-(new Date(w[0])).getUTCFullYear())/10/f);break;default:f=0}return f}K.createSlices=function(m,f){const w=[];let c=0;(f?m.variables.filter(k=>k.name.toLowerCase()===f.toLowerCase()):[...m.variables].sort((k,u)=>k.name>u.name?1:-1)).forEach(k=>{const u=[],B=[...k.dimensions].sort((a,
g)=>a.name>g.name?-1:1);F(k.name,B,u);u.forEach(a=>{w.push({...a,sliceId:c++})})});return w};K.getDefaultMultidimensionalDefinition=function(m,f={}){var w=l(m,f);if(!w)return null;m=[];const {dimensions:c,name:k}=w;if(0===c.length)return[new v({variableName:k,dimensionName:"",values:[],isSlice:!0})];for(w=0;w<c.length;w++){const u=O(c[w],f.multidimensionalSubset,k);if(!u)return null;const {values:B,extent:a}=u;let g=B?.[0]??a[0];"stdz"===u.name.toLowerCase()&&!u.hasRanges&&Math.abs(a[1])<=Math.abs(a[0])&&
(g=B?.length?B[B.length-1]:a[1]);m.push(new v({variableName:k,dimensionName:u.name,values:[g],isSlice:f.useRangeForRangedDimensionInfo?!!u.hasRanges:!0}))}return m};K.getDefaultVariablInfo=l;K.getSliceIds=function(m,f,w){let c=m;f&&(f=[...f].sort((k,u)=>k.dimensionName<u.dimensionName?-1:1),f.forEach(({dimensionName:k,values:u,isSlice:B})=>{u.length&&(c=c.filter(a=>{a=a.multidimensionalDefinition.find(r=>r.dimensionName===k);if(null==a)return!1;const g=a.values[0];return"number"===typeof g?"number"===
typeof u[0]?u.includes(g):u.some(r=>r[0]<=g&&r[1]>=g):"number"===typeof u[0]?u.some(r=>g[0]<=r&&g[1]>=r):B?u.some(r=>r[0]===g[0]&&r[0]===g[1]):u.some(r=>r[0]>=g[0]&&r[0]<=g[1]||r[1]>=g[0]&&r[1]<=g[1]||r[0]<g[0]&&r[1]>g[1])}))}));if(c.length&&w&&t.isSome(w.start)&&t.isSome(w.end)){const k=w.start.getTime(),u=w.end.getTime(),B=c[0].multidimensionalDefinition.findIndex(a=>"StdTime"===a.dimensionName);-1<B&&(c=c.filter(a=>{a=a.multidimensionalDefinition[B].values[0];return k<=a&&u>=a}))}return c.map(k=>
k.sliceId)};K.getSliceIndex=function(m,f){let w=0;var c=m[0].variableName;f=[...f.variables].sort((u,B)=>u.name>B.name?1:-1);for(var k=0;k<f.length;k++){const u=f[k],B=[...u.dimensions].sort((a,g)=>a.name>g.name?-1:1);if(u.name!==c)w+=B.map(a=>h(a)).reduce((a,g)=>a*g);else{c=B.map(a=>h(a));f=B.length;for(let a=0;a<f;a++){k=m.find(g=>g.dimensionName===B[a].name);if(null==k)return null;k=b(k.values[0],B[a]);if(-1===k)return null;c.shift();w=a===f-1?w+k:w+k*c.reduce((g,r)=>g*r)}break}}return w};K.getSubsetVariablesFromMdInfo=
function(m,f){if(t.isNone(f)||t.isNone(m))return null;f=f.variables.map(w=>({...w}));m?.variables?.length&&(f=f.filter(({name:w})=>m.variables.includes(w)),f.forEach(w=>{w.dimensions=w.dimensions.map(c=>O(c,m,w.name)).filter(t.isSome)}));return f};K.hasExcludedVariableOrDimension=S;K.intersectMultimensionalSubset=function(m,f){if(t.isNone(m))return{isOutside:!1};const {geometry:w,timeExtent:c,multidimensionalDefinition:k}=f;f=null;if(t.isSome(c)&&(f=z(m,c),t.isNone(f)))return{isOutside:!0};const {areaOfInterest:u}=
m;if(u&&w){const B="point"===w.type?w:"extent"===w.type?w.center:"polygon"===w.type?w.centroid:null;if(B&&!u.contains(B))return{isOutside:!0}}return t.isSome(k)&&k.length&&S(k,m,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:w,timeExtent:f,multidimensionalDefinition:k}}};K.isMultiSliceOrRangeDefinition=function(m){return t.isNone(m)||!m.length?!1:m.some(f=>{if(null==f.values)return!0;const w=f.values.length;return 0===w||1<w||!f.isSlice&&Array.isArray(f.values[0])})};Object.defineProperty(K,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m){function f(x,q){return w.apply(this,arguments)}function w(){w=t._asyncToGenerator(function*(x,q){if(!m.isPlatformLittleEndian)throw new v("rasterCoded:decode",
"lerc decoder is not supported on big endian platform");yield O.load();const {offset:H}=q,{width:T,height:Z,pixelType:V,statistics:I,depthCount:L,noDataValues:U,bandMasks:ba,pixels:ea,mask:Y}=O.decode(x,{inputOffset:H,returnInterleaved:q.returnInterleaved});return new p({width:T,height:Z,pixelType:V.toLowerCase(),pixels:ea,mask:Y,statistics:I,bandMasks:ba,depthCount:L,noDataValues:U})});return w.apply(this,arguments)}function c(x,q){return k.apply(this,arguments)}function k(){k=t._asyncToGenerator(function*(x,
q){x=yield h.decode(x,{...q,noDataValue:null});F.assertIsSome(x);x=new p({width:x.width,height:x.height,pixels:x.pixels,pixelType:x.pixelType.toLowerCase(),mask:x.mask,statistics:null});x.updateStatistics();return x});return k.apply(this,arguments)}function u(x,q){return B.apply(this,arguments)}function B(){B=t._asyncToGenerator(function*(x,q){x=yield h.decodeTileOrStrip(x,q.customOptions);x=new p({width:x.width,height:x.height,pixels:x.pixels,pixelType:x.pixelType.toLowerCase(),mask:x.mask,statistics:null});
x.updateStatistics();return x});return B.apply(this,arguments)}function a(x,q){const H=q.pixelType||"u8",T=p.getPixelArrayConstructor(H),Z="u8"===H?x:new T(x.buffer),V=[],I=q.planes||1;if(1===I)V.push(Z);else for(let L=0;L<I;L++){const U=(q.width||1)*(q.height||x.length),ba=new T(U);for(let ea=0;ea<U;ea++)ba[ea]=Z[ea*I+L];V.push(ba)}x=new p({width:q.width||1,height:q.height||x.length,pixels:V,pixelType:H,statistics:null});x.updateStatistics();return x}function g(x,q){x=(new l.Zlib(new Uint8Array(x))).getBytes();
return a(x,q)}function r(x,q){x=S.decode(x,q.offset,q.eof,!q.isInputBigEndian);return a(x,q)}function C(x,q){x=Q.decode(x,q.hasNoZlibMask??void 0);x=new p({width:x.width,height:x.height,pixels:x.pixels,pixelType:"U8",mask:x.mask,statistics:null});x.updateStatistics();return x}function d(x,q){x=new Uint8Array(x);x=new E(x);const {width:H,height:T}=q;q=H*T;x=x.decode();let Z=0;var V=0;let I;V=new Uint8Array(q);for(Z=0;Z<q;Z++)V[Z]=x[4*Z+3];const L=new p({width:H,height:T,pixels:[],pixelType:"U8",mask:V,
statistics:[]});for(Z=0;3>Z;Z++){I=new Uint8Array(q);for(V=0;V<q;V++)I[V]=x[4*V+Z];L.addData({pixels:I})}L.updateStatistics();return L}function e(x,q,H,T){return n.apply(this,arguments)}function n(){n=t._asyncToGenerator(function*(x,q,H,T){x=yield(new R).decode(x,{applyJpegMask:!1,format:q,...H},T);x=new p(x);x.updateStatistics();return x});return n.apply(this,arguments)}function A(x){if(null==x)throw new v("rasterCodec:decode","parameter encodeddata is required.");x=new Uint8Array(x,0,10);let q=
"";255===x[0]&&216===x[1]?q="jpg":137===x[0]&&80===x[1]&&78===x[2]&&71===x[3]?q="png":67===x[0]&&110===x[1]&&116===x[2]&&90===x[3]&&73===x[4]&&109===x[5]&&97===x[6]&&103===x[7]&&101===x[8]&&32===x[9]?q="lerc":76===x[0]&&101===x[1]&&114===x[2]&&99===x[3]&&50===x[4]&&32===x[5]?q="lerc2":73===x[0]&&73===x[1]&&42===x[2]&&0===x[3]||77===x[0]&&77===x[1]&&0===x[2]&&42===x[3]||73===x[0]&&73===x[1]&&43===x[2]&&0===x[3]||77===x[0]&&77===x[1]&&0===x[2]&&43===x[3]?q="tiff":71===x[0]&&73===x[1]&&70===x[2]?q="gif":
66===x[0]&&77===x[1]?q="bmp":String.fromCharCode.apply(null,x).toLowerCase().includes("error")&&(q="error");return q}function D(x){let q=null;switch(x){case "lerc":case "lerc2":q=f;break;case "jpg":q=C;break;case "png":q=d;break;case "bsq":case "bip":q=(H,T)=>{var Z=T.pixelType,V=null;let I=null;switch(Z?Z.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":I=255;V=Uint8Array;break;case "u16":I=I||65535;V=Uint16Array;break;case "u32":I=I||2**32-1;V=Uint32Array;break;case "s8":I=I||-128;V=
Int8Array;break;case "s16":I=I||-32768;V=Int16Array;break;case "s32":I=I||-(2**31);V=Int32Array;break;default:V=Float32Array}({pixelTypeCtor:Z}={pixelTypeCtor:V,noDataValue:I});V=b.decode;H=V(H,{width:T.width,height:T.height,pixelType:Z,format:x});T=new p({width:T.width,height:T.height,pixels:H.pixels,pixelType:T.pixelType,mask:H.mask,statistics:null});T.updateStatistics();return T};break;case "tiff":q=c;break;case "deflate":q=g;break;case "lzw":q=r;break;case "error":q=()=>{throw new v("rasterCodec:decode",
"input data contains error");};break;default:q=()=>{throw new v("rasterCodec:decode","unsupported raster format");}}return q}function G(x,q=1){if(x){var {pixels:H,width:T,height:Z,mask:V}=x;if(H&&0!==H.length){var I=H.length,L=T-1,U=Z-1,ba=[],ea,Y,X=null,N=p.getPixelArrayConstructor(x.pixelType);if(0===q){for(q=0;q<I;q++){var W=H[q];var ca=new N(L*U);for(ea=0;ea<U;ea++){var da=ea*T;for(Y=0;Y<L;Y++)ca[ea*L+Y]=W[da+Y]}ba.push(ca)}if(F.isSome(V))for(X=new Uint8Array(L*U),ea=0;ea<U;ea++)for(da=ea*T,Y=
0;Y<L;Y++)X[ea*L+Y]=V[da+Y]}else{for(q=0;q<I;q++){W=H[q];ca=new N(L*U);for(ea=0;ea<U;ea++)for(da=ea*T,Y=0;Y<L;Y++)ca[ea*L+Y]=(W[da+Y]+W[da+Y+1]+W[da+T+Y]+W[da+T+Y+1])/4;ba.push(ca)}if(V)for(X=new Uint8Array(L*U),ea=0;ea<U;ea++)for(da=ea*T,Y=0;Y<L;Y++)X[ea*L+Y]=Math.min.apply(null,[V[da+Y],V[da+Y+1],V[da+T+Y],V[da+T+Y+1]])}x.width=L;x.height=U;x.mask=X;x.pixels=ba}}}function y(){y=t._asyncToGenerator(function*(x,q={},H){if(null==x)throw new v("rasterCodec:decode","missing encodeddata parameter.");
let T=q.format&&q.format.toLowerCase();if(!("bsq"!==T&&"bip"!==T||null!=q.width&&null!=q.height))throw new v("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===T&&q.customOptions)return u(x,q);if(!T||"bsq"!==T&&"bip"!==T&&"deflate"!==T&&"lzw"!==T)T=A(x);if(q.useCanvas&&J.has(T))return e(x,T,q,H);H=D(T);q.isPoint&&(q={...q},null!=q.width&&q.width++,null!=q.height&&q.height++);x=yield H(x,q);if(!x)return x;"jpg"!==T&&null!=q.noDataValue&&1===x.depthCount&&z.convertNoDataToMask(x,
q.noDataValue,{customFloatTolerance:q.tolerance});q.isPoint&&G(x);return x});return y.apply(this,arguments)}var E=function(x){function q(V){var I,L;this.data=V;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(L=null;;){var U=this.readUInt32();var ba=V=void 0;V=[];for(ba=0;4>ba;++ba)V.push(String.fromCharCode(this.data[this.pos++]));V=V.join("");switch(V){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];
this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(U);break;case "fcTL":L&&this.animation.frames.push(L);this.pos+=4;L={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};V=this.readUInt16();
U=this.readUInt16()||100;L.delay=1E3*V/U;L.disposeOp=this.data[this.pos++];L.blendOp=this.data[this.pos++];L.data=[];break;case "IDAT":case "fdAT":"fdAT"===V&&(this.pos+=4,U-=4);V=(null!=L?L.data:void 0)||this.imgData;for(ba=0;0<=U?ba<U:ba>U;0<=U?++ba:--ba)V.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(U);U=255-this.transparency.indexed.length;if(0<U)for(V=0;0<=U?V<U:V>U;0<=U?++V:--V)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(U)[0];break;case 2:this.transparency.rgb=this.read(U)}break;case "tEXt":ba=this.read(U);U=ba.indexOf(0);V=String.fromCharCode.apply(String,ba.slice(0,U));this.text[V]=String.fromCharCode.apply(String,ba.slice(U+1));break;case "IEND":L&&this.animation.frames.push(L);a:{switch(this.colorType){case 0:case 3:case 4:L=1;break a;case 2:case 6:L=3;break a}L=void 0}this.colors=L;this.hasAlphaChannel=4===(I=this.colorType)||6===I;I=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*I;a:{switch(this.colors){case 1:I="DeviceGray";break a;case 3:I="DeviceRGB";break a}I=void 0}this.colorSpace=I;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=U}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var H;q.load=function(V,I,L){"function"===typeof I&&(L=I);var U=new XMLHttpRequest;U.open("GET",V,!0);U.responseType="arraybuffer";U.onload=function(){var ba=new Uint8Array(U.response||U.mozResponseArrayBuffer);
ba=new q(ba);"function"===typeof(null!=I?I.getContext:void 0)&&ba.render(I);return"function"===typeof L?L(ba):void 0};return U.send(null)};q.prototype.read=function(V){var I;var L=[];for(I=0;0<=V?I<V:I>V;0<=V?++I:--I)L.push(this.data[this.pos++]);return L};q.prototype.readUInt32=function(){var V=this.data[this.pos++]<<24;var I=this.data[this.pos++]<<16;var L=this.data[this.pos++]<<8;var U=this.data[this.pos++];return V|I|L|U};q.prototype.readUInt16=function(){var V=this.data[this.pos++]<<8;var I=
this.data[this.pos++];return V|I};q.prototype.decodePixels=function(V){var I,L,U,ba,ea,Y,X,N;null==V&&(V=this.imgData);if(0===V.length)return new Uint8Array(0);V=new l.Zlib(V);V=V.getBytes();var W=this.pixelBitlength/8;var ca=W*this.width;var da=new Uint8Array(ca*this.height);var fa=V.length;for(L=ba=ea=0;ba<fa;){switch(V[ba++]){case 0:for(U=I=0;I<ca;U=I+=1)da[L++]=V[ba++];break;case 1:for(U=Y=0;Y<ca;U=Y+=1){I=V[ba++];var ja=U<W?0:da[L-W];da[L++]=(I+ja)%256}break;case 2:for(U=ja=0;ja<ca;U=ja+=1){I=
V[ba++];var ia=(U-U%W)/W;Y=ea&&da[(ea-1)*ca+ia*W+U%W];da[L++]=(Y+I)%256}break;case 3:for(U=N=0;N<ca;U=N+=1)I=V[ba++],ia=(U-U%W)/W,ja=U<W?0:da[L-W],Y=ea&&da[(ea-1)*ca+ia*W+U%W],da[L++]=(I+Math.floor((ja+Y)/2))%256;break;case 4:for(U=N=0;N<ca;U=N+=1){I=V[ba++];ia=(U-U%W)/W;ja=U<W?0:da[L-W];0===ea?Y=X=0:(Y=da[(ea-1)*ca+ia*W+U%W],X=ia&&da[(ea-1)*ca+(ia-1)*W+U%W]);var ra=ja+Y-X;U=Math.abs(ra-ja);ia=Math.abs(ra-Y);ra=Math.abs(ra-X);ja=U<=ia&&U<=ra?ja:ia<=ra?Y:X;da[L++]=(I+ja)%256}break;default:throw Error("Invalid filter algorithm: "+
V[ba-1]);}ea++}return da};q.prototype.decodePalette=function(){var V,I,L,U;var ba=this.palette;var ea=this.transparency.indexed||[];var Y=new Uint8Array((ea.length||0)+ba.length);var X=0;ba.length;var N=I=V=0;for(L=ba.length;I<L;N=I+=3)Y[X++]=ba[N],Y[X++]=ba[N+1],Y[X++]=ba[N+2],Y[X++]=null!=(U=ea[V++])?U:255;return Y};q.prototype.copyToImageData=function(V,I){var L,U;var ba=this.colors;var ea=null;var Y=this.hasAlphaChannel;this.palette.length&&(ea=null!=(L=this._decodedPalette)?L:this._decodedPalette=
this.decodePalette(),ba=4,Y=!0);V=V.data||V;var X=V.length;var N=ea||I;L=U=0;if(1===ba)for(;L<X;)ba=ea?4*I[L/4]:U,U=N[ba++],V[L++]=U,V[L++]=U,V[L++]=U,V[L++]=Y?N[ba++]:this.transparency.grayscale&&this.transparency.grayscale===U?0:255,U=ba;else for(;L<X;)ba=ea?4*I[L/4]:U,V[L++]=N[ba++],V[L++]=N[ba++],V[L++]=N[ba++],V[L++]=Y?N[ba++]:this.transparency.rgb&&this.transparency.rgb[1]===N[ba-3]&&this.transparency.rgb[3]===N[ba-2]&&this.transparency.rgb[5]===N[ba-1]?0:255,U=ba};q.prototype.decode=function(){var V=
new Uint8Array(this.width*this.height*4);this.copyToImageData(V,this.decodePixels());return V};var T=(H=x.document&&x.document.createElement("canvas"))&&H.getContext("2d");var Z=function(V){T.width=V.width;T.height=V.height;T.clearRect(0,0,V.width,V.height);T.putImageData(V,0,0);V=new Image;V.src=H.toDataURL();return V};q.prototype.decodeFrames=function(V){var I,L;if(this.animation){var U=this.animation.frames;var ba=[];var ea=I=0;for(L=U.length;I<L;ea=++I){ea=U[ea];var Y=V.createImageData(ea.width,
ea.height);var X=this.decodePixels(new Uint8Array(ea.data));this.copyToImageData(Y,X);ea.imageData=Y;ba.push(ea.image=Z(Y))}return ba}};q.prototype.renderFrame=function(V,I){var L=this.animation.frames;var U=L[I];L=L[I-1];0===I&&V.clearRect(0,0,this.width,this.height);1===(null!=L?L.disposeOp:void 0)?V.clearRect(L.xOffset,L.yOffset,L.width,L.height):2===(null!=L?L.disposeOp:void 0)&&V.putImageData(L.imageData,L.xOffset,L.yOffset);0===U.blendOp&&V.clearRect(U.xOffset,U.yOffset,U.width,U.height);return V.drawImage(U.image,
U.xOffset,U.yOffset)};q.prototype.animate=function(V){var I,L=this;var U=0;var ba=this.animation;var ea=ba.numFrames;var Y=ba.frames;var X=ba.numPlays;return(I=function(){var N=U++%ea;var W=Y[N];L.renderFrame(V,N);if(1<ea&&U/ea<X)return L.animation._timeout=setTimeout(I,W.delay)})()};q.prototype.stopAnimation=function(){var V;return clearTimeout(null!=(V=this.animation)?V._timeout:void 0)};q.prototype.render=function(V){V._png&&V._png.stopAnimation();V._png=this;V.width=this.width;V.height=this.height;
V=V.getContext("2d");if(this.animation)return this.decodeFrames(V),this.animate(V);var I=V.createImageData(this.width,this.height);this.copyToImageData(I,this.decodePixels());return V.putImageData(I,0,0)};return q}(self);const J=new Set(["jpg","png","bmp","gif"]);K.decode=function(x){return y.apply(this,arguments)};K.getFormat=function(x){x=A(x);"lerc2"===x?x="lerc":"error"===x&&(x="");return x};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(K,t,v){return function(){function F(p){this._ctx=this._canvas=null;p&&(this._canvas=p.canvas,this._ctx=p.ctx||p.canvas&&p.canvas.getContext("2d"))}F.prototype.decode=function(p,R,Q){if(!p||10>p.byteLength)throw new K("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:O=0,height:S=0,format:z}=R;const {applyJpegMask:l}=R;if(l&&(!O||!S))throw new K("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((b,h)=>{let m=null;"jpg"===z&&l&&(m=F._getMask(p,{width:O,height:S}));const f=new Blob([new Uint8Array(p)],{type:"jpg"==="image/"+z?"jpeg":z}),w=URL.createObjectURL(f),c=new Image;let k;c.src=w;c.onload=()=>{URL.revokeObjectURL(w);if(t.isAborted(Q))h(t.createAbortError());else{O=c.width;S=c.height;if(this._canvas&&this._ctx){if(this._canvas.width!==O||this._canvas.height!==S)this._canvas.width=O,this._canvas.height=S;this._ctx.clearRect(0,0,O,S)}else this._canvas=document.createElement("canvas"),
this._canvas.width=O,this._canvas.height=S,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(c,0,0);var u=this._ctx.getImageData(0,0,O,S);k=u.data;var B;if(R.renderOnCanvas){if(m)for(B=0;B<m.length;B++)k[4*B+3]=m[B]?255:0;this._ctx.putImageData(u,0,0);b(null)}else{u=O*S;var a=new Uint8Array(u),g=new Uint8Array(u),r=new Uint8Array(u);if(m)for(B=0;B<u;B++)a[B]=k[4*B],g[B]=k[4*B+1],r[B]=k[4*B+2];else for(m=new Uint8Array(u),B=0;B<u;B++)a[B]=k[4*B],g[B]=k[4*B+1],r[B]=k[4*B+2],m[B]=k[4*B+3];
b({width:O,height:S,pixels:[a,g,r],mask:m,pixelType:"u8"})}}};c.onerror=()=>{URL.revokeObjectURL(w);h("cannot load image")}})};F._getMask=function(p,R){let Q=null;try{var O=new Uint8Array(p);p=0;var S=O.length-2;for(p=Math.ceil(O.length/2);p<S&&(255!==O[p]||217!==O[p+1]);p++);p+=2;if(p<O.length-1){const z=(new v.Zlib(O.subarray(p))).getBytes();Q=new Uint8Array(R.width*R.height);R=0;for(O=0;O<z.length;O++)for(S=7;0<=S;S--)Q[R++]=z[O]>>S&1}}catch(z){}return Q};return F}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(K){var t={};(function(v){(function(F){F=F();void 0!==F&&(v.exports=F)})(function(){var F=function(){function p(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}p.prototype={ensureBuffer:function(R){var Q=this.buffer,O=Q?Q.byteLength:0;if(R<O)return Q;for(var S=512;S<R;)S<<=1;R=new Uint8Array(S);for(S=0;S<O;++S)R[S]=Q[S];return this.buffer=R},getByte:function(){for(var R=this.pos;this.bufferLength<=R;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(R){var Q=
this.pos;if(R){this.ensureBuffer(Q+R);for(R=Q+R;!this.eof&&this.bufferLength<R;)this.readBlock();var O=this.bufferLength;R>O&&(R=O)}else{for(;!this.eof;)this.readBlock();R=this.bufferLength}this.pos=R;return this.buffer.subarray(Q,R)},lookChar:function(){for(var R=this.pos;this.bufferLength<=R;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var R=this.pos;this.bufferLength<=R;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},
makeSubStream:function(R,Q,O){for(var S=R+Q;this.bufferLength<=S&&!this.eof;)this.readBlock();return new Stream(this.buffer,R,Q,O)},skip:function(R){R||(R=1);this.pos+=R},reset:function(){this.pos=0}};return p}();return function(){function p(b){throw Error(b);}function R(b){var h=0,m=b[h++],f=b[h++];-1!=m&&-1!=f||p("Invalid header in flate stream");8!=(m&15)&&p("Unknown compression method in flate stream");0!=((m<<8)+f)%31&&p("Bad FCHECK in flate stream");f&32&&p("FDICT bit set in flate stream");
this.bytes=b;this.bytesPos=h;this.codeBuf=this.codeSize=0;F.call(this)}if(!self||!self.Uint32Array)return null;var Q=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),S=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,
590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),z=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,
590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,
524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,
589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,
589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,
590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,
524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,
589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],l=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];R.prototype=Object.create(F.prototype);R.prototype.getBits=function(b){for(var h=this.codeSize,m=this.codeBuf,
f=this.bytes,w=this.bytesPos,c;h<b;)"undefined"==typeof(c=f[w++])&&p("Bad encoding in flate stream"),m|=c<<h,h+=8;this.codeBuf=m>>b;this.codeSize=h-=b;this.bytesPos=w;return m&(1<<b)-1};R.prototype.getCode=function(b){var h=b[0],m=b[1];b=this.codeSize;for(var f=this.codeBuf,w=this.bytes,c=this.bytesPos;b<m;){var k;"undefined"==typeof(k=w[c++])&&p("Bad encoding in flate stream");f|=k<<b;b+=8}m=h[f&(1<<m)-1];h=m>>16;m&=65535;(0==b||b<h||0==h)&&p("Bad encoding in flate stream");this.codeBuf=f>>h;this.codeSize=
b-h;this.bytesPos=c;return m};R.prototype.generateHuffmanTable=function(b){for(var h=b.length,m=0,f=0;f<h;++f)b[f]>m&&(m=b[f]);for(var w=1<<m,c=new Uint32Array(w),k=1,u=0,B=2;k<=m;++k,u<<=1,B<<=1)for(var a=0;a<h;++a)if(b[a]==k){var g=0,r=u;for(f=0;f<k;++f)g=g<<1|r&1,r>>=1;for(f=g;f<w;f+=B)c[f]=k<<16|a;++u}return[c,m]};R.prototype.readBlock=function(){function b(g,r,C,d,e){for(g=g.getBits(C)+d;0<g--;)r[u++]=e}var h=this.getBits(3);h&1&&(this.eof=!0);h>>=1;if(0==h){var m=this.bytes,f=this.bytesPos,
w;"undefined"==typeof(w=m[f++])&&p("Bad block header in flate stream");var c=w;"undefined"==typeof(w=m[f++])&&p("Bad block header in flate stream");c|=w<<8;"undefined"==typeof(w=m[f++])&&p("Bad block header in flate stream");h=w;"undefined"==typeof(w=m[f++])&&p("Bad block header in flate stream");(h|w<<8)!=(~c&65535)&&p("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;w=this.bufferLength;h=this.ensureBuffer(w+c);this.bufferLength=c=w+c;for(var k=w;k<c;++k){if("undefined"==
typeof(w=m[f++])){this.eof=!0;break}h[k]=w}this.bytesPos=f}else{if(1==h)f=z,w=l;else if(2==h){h=this.getBits(5)+257;w=this.getBits(5)+1;m=this.getBits(4)+4;f=Array(Q.length);for(var u=0;u<m;)f[Q[u++]]=this.getBits(3);f=this.generateHuffmanTable(f);u=m=0;w=h+w;for(c=Array(w);u<w;)k=this.getCode(f),16==k?b(this,c,2,3,m):17==k?b(this,c,3,3,m=0):18==k?b(this,c,7,11,m=0):c[u++]=m=k;f=this.generateHuffmanTable(c.slice(0,h));w=this.generateHuffmanTable(c.slice(h,w))}else p("Unknown block type in flate stream");
c=(h=this.buffer)?h.length:0;for(k=this.bufferLength;;){var B=this.getCode(f);if(256>B)k+1>=c&&(h=this.ensureBuffer(k+1),c=h.length),h[k++]=B;else{if(256==B){this.bufferLength=k;break}B-=257;B=O[B];var a=B>>16;0<a&&(a=this.getBits(a));m=(B&65535)+a;B=this.getCode(w);B=S[B];a=B>>16;0<a&&(a=this.getBits(a));B=(B&65535)+a;k+m>=c&&(h=this.ensureBuffer(k+m),c=h.length);for(a=0;a<m;++a,++k)h[k]=h[k-B]}}}};return R}()})})({get exports(){return t},set exports(v){t=v}});K.Zlib=t})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(K,t){return function(){function v(){}v.decode=function(F,p=!1){const R=new Uint8Array(F);F=new K.JpegImage;F.parse(R);const {width:Q,height:O,numComponents:S,eof:z}=F,l=F.getData(Q,O,!0),b=Q*O;F=null;let h=0,m=0,f=0;if(!p&&z<R.length-1)try{var w=(new t.Zlib(R.subarray(z))).getBytes();F=new Uint8Array(b);for(h=p=0;h<w.length;h++)for(f=7;0<=f;f--)F[p++]=w[h]>>f&1}catch{}if(1===S&&l.length===Q*O)w=new Uint8Array(l.buffer),w=[w,w,w];else{w=[];for(h=0;3>h;h++)w.push(new Uint8Array(b));
for(m=f=0;m<b;m++)for(h=0;3>h;h++)w[h][m]=l[f++]}return{width:Q,height:O,pixels:w,mask:F}};return v}()})},"esri/chunks/Jpg":function(){define(["exports"],function(K){var t={};(function(v){(function(F){F=F();void 0!==F&&(v.exports=F)})(function(){var F=function(){function p(R){this.message="JPEG error: "+R}p.prototype=Error();p.prototype.name="JpegError";return p.constructor=p}();return function(){function p(){this.decodeTransform=null;this.colorTransform=-1}function R(l,b){for(var h=0,m=[],f,w,c=
16;0<c&&!l[c-1];)c--;m.push({children:[],index:0});var k=m[0],u;for(f=0;f<c;f++){for(w=0;w<l[f];w++){k=m.pop();for(k.children[k.index]=b[h];0<k.index;)k=m.pop();k.index++;for(m.push(k);m.length<=f;)m.push(u={children:[],index:0}),k.children[k.index]=u.children,k=u;h++}f+1<c&&(m.push(u={children:[],index:0}),k.children[k.index]=u.children,k=u)}return m[0].children}function Q(l,b,h,m,f,w,c,k,u){function B(){if(0<E)return E--,y>>E&1;y=l[b++];if(255===y){var X=l[b++];if(X)throw new F("unexpected marker "+
(y<<8|X).toString(16));}E=7;return y>>>7}function a(X){for(;;){X=X[B()];if("number"===typeof X)return X;if("object"!==typeof X)throw new F("invalid huffman sequence");}}function g(X){for(var N=0;0<X;)N=N<<1|B(),X--;return N}function r(X){if(1===X)return 1===B()?1:-1;var N=g(X);return N>=1<<X-1?N:N+(-1<<X)+1}function C(X,N){var W=a(X.huffmanTableDC);W=0===W?0:r(W);X.blockData[N]=X.pred+=W;for(W=1;64>W;){var ca=a(X.huffmanTableAC),da=ca&15;ca>>=4;if(0===da){if(15>ca)break;W+=16}else W+=ca,X.blockData[N+
z[W]]=r(da),W++}}function d(X,N){var W=a(X.huffmanTableDC);W=0===W?0:r(W)<<u;X.blockData[N]=X.pred+=W}function e(X,N){X.blockData[N]|=B()<<u}function n(X,N){if(0<J)J--;else for(var W=w;W<=c;){var ca=a(X.huffmanTableAC),da=ca&15;ca>>=4;if(0===da){if(15>ca){J=g(ca)+(1<<ca)-1;break}W+=16}else W+=ca,X.blockData[N+z[W]]=r(da)*(1<<u),W++}}function A(X,N){for(var W=w,ca=0,da;W<=c;){da=z[W];switch(x){case 0:ca=a(X.huffmanTableAC);da=ca&15;ca>>=4;if(0===da)15>ca?(J=g(ca)+(1<<ca),x=4):(ca=16,x=1);else{if(1!==
da)throw new F("invalid ACn encoding");q=r(da);x=ca?2:3}continue;case 1:case 2:X.blockData[N+da]?X.blockData[N+da]+=B()<<u:(ca--,0===ca&&(x=2===x?3:0));break;case 3:X.blockData[N+da]?X.blockData[N+da]+=B()<<u:(X.blockData[N+da]=q<<u,x=0);break;case 4:X.blockData[N+da]&&(X.blockData[N+da]+=B()<<u)}W++}4===x&&(J--,0===J&&(x=0))}var D=h.mcusPerLine,G=b,y=0,E=0,J=0,x=0,q,H=m.length,T,Z,V,I;k=h.progressive?0===w?0===k?d:e:0===k?n:A:C;var L=0;h=1===H?m[0].blocksPerLine*m[0].blocksPerColumn:D*h.mcusPerColumn;
for(var U,ba;L<h;){var ea=f?Math.min(h-L,f):h;for(T=0;T<H;T++)m[T].pred=0;J=0;if(1===H){var Y=m[0];for(I=0;I<ea;I++)k(Y,64*((Y.blocksPerLine+1)*(L/Y.blocksPerLine|0)+L%Y.blocksPerLine)),L++}else for(I=0;I<ea;I++){for(T=0;T<H;T++)for(Y=m[T],U=Y.h,ba=Y.v,Z=0;Z<ba;Z++)for(V=0;V<U;V++)k(Y,64*((Y.blocksPerLine+1)*((L/D|0)*Y.v+Z)+(L%D*Y.h+V)));L++}E=0;(Y=S(l,b))&&Y.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Y.invalid),b=Y.offset);Y=Y&&Y.marker;if(!Y||65280>=Y)throw new F("marker was not found");
if(65488<=Y&&65495>=Y)b+=2;else break}(Y=S(l,b))&&Y.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Y.invalid),b=Y.offset);return b-G}function O(l,b){l=b.blocksPerLine;for(var h=b.blocksPerColumn,m=new Int16Array(64),f=0;f<h;f++)for(var w=0;w<l;w++){var c=void 0,k=void 0,u=void 0,B=void 0,a=void 0,g=void 0,r=void 0,C=void 0,d=a=g=B=k=c=void 0,e=void 0,n=void 0,A=void 0,D=64*((b.blocksPerLine+1)*f+w),G=m,y=b.quantizationTable,E=b.blockData;if(!y)throw new F("missing required Quantization Table.");
for(var J=0;64>J;J+=8)c=E[D+J],C=E[D+J+1],r=E[D+J+2],g=E[D+J+3],a=E[D+J+4],B=E[D+J+5],u=E[D+J+6],k=E[D+J+7],c*=y[J],0===(C|r|g|a|B|u|k)?(c=5793*c+512>>10,G[J]=c,G[J+1]=c,G[J+2]=c,G[J+3]=c,G[J+4]=c,G[J+5]=c,G[J+6]=c,G[J+7]=c):(C*=y[J+1],r*=y[J+2],g*=y[J+3],a*=y[J+4],B*=y[J+5],u*=y[J+6],k*=y[J+7],A=5793*c+128>>8,n=5793*a+128>>8,e=r,d=u,a=2896*(C-k)+128>>8,k=2896*(C+k)+128>>8,g<<=4,B<<=4,A=A+n+1>>1,n=A-n,c=3784*e+1567*d+128>>8,e=1567*e-3784*d+128>>8,d=c,a=a+B+1>>1,B=a-B,k=k+g+1>>1,g=k-g,A=A+d+1>>1,d=
A-d,n=n+e+1>>1,e=n-e,c=2276*a+3406*k+2048>>12,a=3406*a-2276*k+2048>>12,k=c,c=799*g+4017*B+2048>>12,g=4017*g-799*B+2048>>12,B=c,G[J]=A+k,G[J+7]=A-k,G[J+1]=n+B,G[J+6]=n-B,G[J+2]=e+g,G[J+5]=e-g,G[J+3]=d+a,G[J+4]=d-a);for(y=0;8>y;++y)c=G[y],C=G[y+8],r=G[y+16],g=G[y+24],a=G[y+32],B=G[y+40],u=G[y+48],k=G[y+56],0===(C|r|g|a|B|u|k)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,E[D+y]=c,E[D+y+8]=c,E[D+y+16]=c,E[D+y+24]=c,E[D+y+32]=c,E[D+y+40]=c,E[D+y+48]=c,E[D+y+56]=c):(A=5793*c+2048>>12,n=5793*a+2048>>
12,e=r,d=u,a=2896*(C-k)+2048>>12,k=2896*(C+k)+2048>>12,A=(A+n+1>>1)+4112,n=A-n,c=3784*e+1567*d+2048>>12,e=1567*e-3784*d+2048>>12,d=c,a=a+B+1>>1,B=a-B,k=k+g+1>>1,g=k-g,A=A+d+1>>1,d=A-d,n=n+e+1>>1,e=n-e,c=2276*a+3406*k+2048>>12,a=3406*a-2276*k+2048>>12,k=c,c=799*g+4017*B+2048>>12,g=4017*g-799*B+2048>>12,B=c,c=A+k,k=A-k,C=n+B,u=n-B,r=e+g,B=e-g,g=d+a,a=d-a,c=16>c?0:4080<=c?255:c>>4,C=16>C?0:4080<=C?255:C>>4,r=16>r?0:4080<=r?255:r>>4,g=16>g?0:4080<=g?255:g>>4,a=16>a?0:4080<=a?255:a>>4,B=16>B?0:4080<=B?
255:B>>4,u=16>u?0:4080<=u?255:u>>4,k=16>k?0:4080<=k?255:k>>4,E[D+y]=c,E[D+y+8]=C,E[D+y+16]=r,E[D+y+24]=g,E[D+y+32]=a,E[D+y+40]=B,E[D+y+48]=u,E[D+y+56]=k)}return b.blockData}function S(l,b,h){var m=l.length-1;h=h<b?h:b;if(b>=m)return null;var f=l[b]<<8|l[b+1];if(65472<=f&&65534>=f)return{invalid:null,marker:f,offset:b};for(b=l[h]<<8|l[h+1];!(65472<=b&&65534>=b);){if(++h>=m)return null;b=l[h]<<8|l[h+1]}return{invalid:f.toString(16),marker:b,offset:h}}if(!self||!self.Uint8ClampedArray)return null;var z=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);p.prototype={parse:function(l){function b(){var y=l[f]<<8|l[f+1];f+=2;return y}function h(){var y=b();y=f+y-2;var E=S(l,y,f);E&&E.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+E.invalid),y=E.offset);y=l.subarray(f,y);f+=y.length;return y}function m(y){for(var E=Math.ceil(y.samplesPerLine/
8/y.maxH),J=Math.ceil(y.scanLines/8/y.maxV),x=0;x<y.components.length;x++){G=y.components[x];var q=Math.ceil(Math.ceil(y.samplesPerLine/8)*G.h/y.maxH),H=Math.ceil(Math.ceil(y.scanLines/8)*G.v/y.maxV);G.blockData=new Int16Array(64*J*G.v*(E*G.h+1));G.blocksPerLine=q;G.blocksPerColumn=H}y.mcusPerLine=E;y.mcusPerColumn=J}var f=0,w=null,c=null,k=[],u=[],B=[],a=b();if(65496!==a)throw new F("SOI not found");for(a=b();65497!==a;){switch(a){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var g=
h();65504===a&&74===g[0]&&70===g[1]&&73===g[2]&&70===g[3]&&0===g[4]&&(w={version:{major:g[5],minor:g[6]},densityUnits:g[7],xDensity:g[8]<<8|g[9],yDensity:g[10]<<8|g[11],thumbWidth:g[12],thumbHeight:g[13],thumbData:g.subarray(14,14+3*g[12]*g[13])});65518===a&&65===g[0]&&100===g[1]&&111===g[2]&&98===g[3]&&101===g[4]&&(c={version:g[5]<<8|g[6],flags0:g[7]<<8|g[8],flags1:g[9]<<8|g[10],transformCode:g[11]});break;case 65499:a=b()+f-2;for(var r;f<a;){var C=l[f++],d=new Uint16Array(64);if(0===C>>4)for(g=
0;64>g;g++)r=z[g],d[r]=l[f++];else if(1===C>>4)for(g=0;64>g;g++)r=z[g],d[r]=b();else throw new F("DQT - invalid table spec");k[C&15]=d}break;case 65472:case 65473:case 65474:if(e)throw new F("Only single frame JPEGs supported");b();var e={};e.extended=65473===a;e.progressive=65474===a;e.precision=l[f++];e.scanLines=b();e.samplesPerLine=b();e.components=[];e.componentIds={};g=l[f++];for(a=d=C=0;a<g;a++){r=l[f];var n=l[f+1]>>4;var A=l[f+1]&15;C<n&&(C=n);d<A&&(d=A);n=e.components.push({h:n,v:A,quantizationId:l[f+
2],quantizationTable:null});e.componentIds[r]=n-1;f+=3}e.maxH=C;e.maxV=d;m(e);break;case 65476:r=b();for(a=2;a<r;){C=l[f++];d=new Uint8Array(16);for(g=n=0;16>g;g++,f++)n+=d[g]=l[f];A=new Uint8Array(n);for(g=0;g<n;g++,f++)A[g]=l[f];a+=17+n;(0===C>>4?B:u)[C&15]=R(d,A)}break;case 65501:b();var D=b();break;case 65498:b();r=l[f++];g=[];for(a=0;a<r;a++){C=e.componentIds[l[f++]];var G=e.components[C];C=l[f++];G.huffmanTableDC=B[C>>4];G.huffmanTableAC=u[C&15];g.push(G)}a=l[f++];r=l[f++];C=l[f++];a=Q(l,f,
e,g,D,a,r,C>>4,C&15);f+=a;break;case 65535:255!==l[f]&&f--;break;default:if(255===l[f-3]&&192<=l[f-2]&&254>=l[f-2])f-=3;else throw new F("unknown marker "+a.toString(16));}a=b()}this.width=e.samplesPerLine;this.height=e.scanLines;this.jfif=w;this.eof=f;this.adobe=c;this.components=[];for(a=0;a<e.components.length;a++){G=e.components[a];if(w=k[G.quantizationId])G.quantizationTable=w;this.components.push({output:O(e,G),scaleX:G.h/e.maxH,scaleY:G.v/e.maxV,blocksPerLine:G.blocksPerLine,blocksPerColumn:G.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(l,b){var h=this.width/l,m=this.height/b,f,w,c=0,k=this.components.length,u=l*b*k,B=new Uint8ClampedArray(u),a=new Uint32Array(l);for(w=0;w<k;w++){var g=this.components[w];var r=g.scaleX*h;var C=g.scaleY*m;c=w;var d=g.output;var e=g.blocksPerLine+1<<3;for(f=0;f<l;f++)g=0|f*r,a[f]=(g&4294967288)<<3|g&7;for(r=0;r<b;r++)for(g=0|r*C,g=e*(g&4294967288)|(g&7)<<3,f=0;f<l;f++)B[c]=d[g+a[f]],c+=k}if(b=this.decodeTransform)for(w=0;w<u;)for(l=g=0;g<k;g++,
w++,l+=2)B[w]=(B[w]*b[l]>>8)+b[l+1];return B},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(l){for(var b,h,m,f=0,w=l.length;f<w;f+=3)b=l[f],h=l[f+1],m=l[f+2],l[f]=b-179.456+1.402*m,l[f+1]=b+135.459-.344*h-.714*m,l[f+2]=b-226.816+1.772*h;return l},_convertYcckToRgb:function(l){for(var b,h,m,f,w=0,c=0,k=l.length;c<k;c+=4)b=l[c],h=l[c+1],m=l[c+2],f=l[c+3],l[w++]=
-122.67195406894+h*(-6.60635669420364E-5*h+4.37130475926232E-4*m-5.4080610064599E-5*b+4.8449797120281E-4*f-.154362151871126)+m*(-9.57964378445773E-4*m+8.17076911346625E-4*b-.00477271405408747*f+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*f+.48357088451265)+f*(-3.36197177618394E-4*f+.484791561490776),l[w++]=107.268039397724+h*(2.19927104525741E-5*h-6.40992018297945E-4*m+6.59397001245577E-4*b+4.26105652938837E-4*f-.176491792462875)+m*(-7.78269941513683E-4*m+.00130872261408275*b+7.70482631801132E-4*
f-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*f+.25802910206845)+f*(-3.18913117588328E-4*f-.213742400323665),l[w++]=-20.810012546947+h*(-5.70115196973677E-4*h-2.63409051004589E-5*m+.0020741088115012*b-.00288260236853442*f+.814272968359295)+m*(-1.53496057440975E-5*m-1.32689043961446E-4*b+5.60833691242812E-4*f-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*f+.116935020465145)+f*(-3.43531996510555E-4*f+.24165260232407);return l},_convertYcckToCmyk:function(l){for(var b,
h,m,f=0,w=l.length;f<w;f+=4)b=l[f],h=l[f+1],m=l[f+2],l[f]=434.456-b-1.402*m,l[f+1]=119.541-b+.344*h+.714*m,l[f+2]=481.816-b-1.772*h;return l},_convertCmykToRgb:function(l){for(var b,h,m,f,w=0,c=1/255,k=0,u=l.length;k<u;k+=4)b=l[k]*c,h=l[k+1]*c,m=l[k+2]*c,f=l[k+3]*c,l[w++]=255+b*(-4.387332384609988*b+54.48615194189176*h+18.82290502165302*m+212.25662451639585*f-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*m-17.873870861415444*f-5.497006427196366)+m*(-2.5217340131683033*m-21.248923337353073*
f+17.5119270841813)-f*(21.86122147463605*f+189.48180835922747),l[w++]=255+b*(8.841041422036149*b+60.118027045597366*h+6.871425592049007*m+31.159100130055922*f-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*m+131.35250912493976*f-190.9453302588951)+m*(4.444339102852739*m+9.8632861493405*f-24.86741582555878)-f*(20.737325471181034*f+187.80453709719578),l[w++]=255+b*(.8842522430003296*b+8.078677503112928*h+30.89978309703729*m-.23883238689178934*f-14.183576799673286)+h*(10.49593273432072*
h+63.02378494754052*m+50.606957656360734*f-112.23884253719248)+m*(.03296041114873217*m+115.60384449646641*f-193.58209356861505)-f*(22.33816807309886*f+180.12613974708367);return l},getData:function(l,b,h){if(4<this.numComponents)throw new F("Unsupported color mode");l=this._getLinearizedBlockData(l,b);if(1===this.numComponents&&h){h=l.length;b=new Uint8ClampedArray(3*h);for(var m=0,f=0;f<h;f++){var w=l[f];b[m++]=w;b[m++]=w;b[m++]=w}return b}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(l);
if(4===this.numComponents){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(l):this._convertYcckToCmyk(l);if(h)return this._convertCmykToRgb(l)}return l}};return p}()})})({get exports(){return t},set exports(v){t=v}});K.JpegImage=t})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(K,t,v){function F(z,l,b){b.set(z.slice(l,l+b.length))}function p(z){const {_malloc:l,_free:b,_lerc_getBlobInfo:h,_lerc_getDataRanges:m,_lerc_decode_4D:f,
asm:w}=z;let c;const k=Object.values(w).find(B=>B&&"buffer"in B&&B.buffer===z.HEAPU8.buffer),u=B=>{B=B.map(r=>(r>>3<<3)+16);var a=B.reduce((r,C)=>r+C),g=l(a);c=new Uint8Array(k.buffer);a=B[0];B[0]=g;for(g=1;g<B.length;g++){const r=B[g];B[g]=B[g-1]+a;a=r}return B};S.getBlobInfo=B=>{var a=new Uint8Array(48),g=new Uint8Array(24);const [r,C,d]=u([B.length,a.length,g.length]);c.set(B,r);c.set(a,C);c.set(g,d);var e=h(r,B.length,C,d,12,3);if(e)throw b(r),Error(`lerc-getBlobInfo: error code is ${e}`);c=new Uint8Array(k.buffer);
F(c,C,a);F(c,d,g);a=new Uint32Array(a.buffer);var n=new Float64Array(g.buffer);const [A,D,,G,y,E,J,x,q,H,T]=a;g={version:A,depthCount:H,width:G,height:y,validPixelCount:J,bandCount:E,blobSize:x,maskCount:q,dataType:D,minValue:n[0],maxValue:n[1],maxZerror:n[2],statistics:[],bandCountWithNoData:T};if(T)return g;if(1===H&&1===E)return b(r),g.statistics.push({minValue:n[0],maxValue:n[1]}),g;e=H*E*8;var Z=new Uint8Array(e),V=new Uint8Array(e);a=r;var I=n=0;let L=!1;c.byteLength<r+2*e?(b(r),L=!0,[a,n,I]=
u([B.length,e,e]),c.set(B,a)):[n,I]=u([e,e]);c.set(Z,n);c.set(V,I);if(e=m(a,B.length,H,E,n,I))throw b(a),L||b(n),Error(`lerc-getDataRanges: error code is ${e}`);c=new Uint8Array(k.buffer);F(c,n,Z);F(c,I,V);B=new Float64Array(Z.buffer);e=new Float64Array(V.buffer);V=g.statistics;for(Z=0;Z<E;Z++)if(1<H){I=B.slice(Z*H,(Z+1)*H);const U=e.slice(Z*H,(Z+1)*H),ba=Math.min.apply(null,I),ea=Math.max.apply(null,U);V.push({minValue:ba,maxValue:ea,depthStats:{minValues:I,maxValues:U}})}else V.push({minValue:B[Z],
maxValue:e[Z]});b(a);L||b(n);return g};S.decode=(B,a)=>{const {maskCount:g,depthCount:r,bandCount:C,width:d,height:e,dataType:n,bandCountWithNoData:A}=a;var D=R[n],G=d*e;a=new Uint8Array(G*C);D=new Uint8Array(G*r*C*D.size);G=new Uint8Array(C);var y=new Uint8Array(8*C);const [E,J,x,q,H]=u([B.length,a.length,D.length,G.length,y.length]);c.set(B,E);c.set(a,J);c.set(D,x);c.set(G,q);c.set(y,H);if(B=f(E,B.length,g,J,r,d,e,C,n,x,q,H))throw b(E),Error(`lerc-decode: error code is ${B}`);c=new Uint8Array(k.buffer);
F(c,x,D);F(c,J,a);B=null;if(A){F(c,q,G);F(c,H,y);B=[];y=new Float64Array(y.buffer);for(let T=0;T<G.length;T++)B.push(G[T]?y[T]:null)}b(E);return{data:D,maskData:a,noDataValues:B}}}const R=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let Q=null,O=!1;const S={getBlobInfo:null,decode:null};t.decode=function(z,l={}){var b=l.inputOffset??0;z=z instanceof Uint8Array?z.subarray(b):new Uint8Array(z,b);b=S.getBlobInfo(z);const {data:h,maskData:m,noDataValues:f}=S.decode(z,b),{width:w,height:c,bandCount:k,
depthCount:u,dataType:B,maskCount:a,statistics:g}=b;var r=R[B],C=new r.ctor(h.buffer);z=[];b=[];const d=w*c;var e=d*u;for(var n=0;n<k;n++){var A=C.subarray(n*e,(n+1)*e);if(l.returnInterleaved)z.push(A);else{a:{var D=d,G=u;if(2>G)break a;const y=new r.ctor(D*G);for(let E=0,J=0;E<D;E++)for(let x=0,q=E;x<G;x++,q+=D)y[q]=A[J++];A=y}z.push(A)}b.push(m.subarray(n*e,(n+1)*e))}C=0===a?null:1===a?b[0]:new Uint8Array(d);if(1<a)for(C.set(b[0]),e=1;e<b.length;e++)for(n=b[e],A=0;A<d;A++)C[A]&=n[A];({noDataValue:l}=
l);e=null!=l&&r.range[0]<=l&&r.range[1]>=l;if(0<a&&e)for(e=0;e<k;e++)for(n=z[e],A=b[e]||C,D=0;D<d;D++)0===A[D]&&(n[D]=l);({pixelType:r}=r);return{width:w,height:c,bandCount:k,pixelType:r,depthCount:u,statistics:g,pixels:z,mask:C,bandMasks:a===k&&1<k?b:null,noDataValues:f}};t.getBlobInfo=function(z,l={}){z=z instanceof Uint8Array?z.subarray(l.inputOffset??0):new Uint8Array(z,l.inputOffset??0);return S.getBlobInfo(z)};t.isLoaded=function(){return O};t.load=function(){return Q?Q:Q=(new Promise((z,l)=>
K(["../../../chunks/lerc-wasm"],z,l))).then(z=>z.lercWasm).then(({default:z})=>z({locateFile:l=>v.getAssetUrl(`esri/layers/support/rasterFormats/${l}`)})).then(z=>{p(z);O=!0})};t.pixelTypeInfoMap=R;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(K){function t(R,Q,O,S=!0){if(0!==Q%4||0!==O%4){var z=new ArrayBuffer(4*Math.ceil(O/4));z=new Uint8Array(z);R=new Uint8Array(R,Q,O);if(S)for(S=0;S<z.length;S+=4)z[S]=
R[S+3],z[S+1]=R[S+2],z[S+2]=R[S+1],z[S+3]=R[S];else z.set(R);return new Uint32Array(z.buffer)}if(S){S=new Uint8Array(R,Q,O);z=new Uint8Array(S.length);for(R=0;R<z.length;R+=4)z[R]=S[R+3],z[R+1]=S[R+2],z[R+2]=S[R+1],z[R+3]=S[R];return new Uint32Array(z.buffer)}return new Uint32Array(R,Q,O/4)}function v(){const R=[];for(let Q=0;257>=Q;Q++)R[Q]=[Q];return R}function F(R,Q){for(let O=0;O<Q.length;O++)R.push(Q[O])}const p=new Set;p.add(511);p.add(1023);p.add(2047);p.add(4095);p.add(8191);K.decode=function(R,
Q,O,S=!0){R=t(R,Q,O,S);Q=9;S=v();let z=32,l=S.length,b=[],h=1,m=R[0],f=0;const w=R.length;O=8*(4*w-O);const c=[];for(;null!=m;){if(z>=Q)z-=Q,f=m>>>32-Q,m<<=Q;else{f=m>>>32-z;m=R[h++];var k=Q-z;z=32-k;f=(f<<k)+(m>>>z);m<<=k}if(257===f)break;if(256===f)Q=9,S=v(),l=S.length,b=[];else{k=S[f];if(null==k){if(f>S.length)throw Error("data integrity issue: code does not exist on code page");b.push(b[0]);S[l++]=b.slice();F(c,b)}else F(c,k),b.push(k[0]),1<b.length&&(S[l++]=b.slice()),b=k.slice();p.has(l)&&Q++;
0===z&&(m=R[h++],z=32);if(h>w||h===w&&z<=O)break}}return new Uint8Array(c)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const K=t=>{let v=1;switch(t){case Uint8Array:case Int8Array:v=1;break;case Uint16Array:case Int16Array:v=2;break;case Uint32Array:case Int32Array:case Float32Array:v=4;break;case Float64Array:v=8}return v};return function(){function t(){}t.decode=function(v,F){var p=F.pixelType;const R=[],Q=
F.width*F.height;var O=Math.floor(v.byteLength/(F.width*F.height*K(F.pixelType)));const {bandIds:S,format:z}=F;F=S&&S.length||Math.floor(v.byteLength/(F.width*F.height*K(F.pixelType)));var l=v.byteLength-v.byteLength%(Q*K(p)),b=new p(v,0,Q*O);let h,m,f,w,c=null;if("bip"===z)for(h=0;h<F;h++){f=new p(Q);w=S?S[h]:h;for(m=0;m<Q;m++)f[m]=b[m*O+w];R.push(f)}else if("bsq"===z)for(h=0;h<F;h++)w=S?S[h]:h,R.push(b.subarray(w*Q,(w+1)*Q));if(l<v.byteLength-1)if(v=v.slice(l),8*v.byteLength<Q)c=null;else{v=new Uint8Array(v,
0,Math.ceil(Q/8));p=new Uint8Array(Q);for(l=b=l=F=O=0;l<v.length-1;l++)for(F=v[l],b=7;0<=b;b--)p[O++]=F>>b&1;for(b=7;O<Q-1;)F=v[v.length-1],p[O++]=F>>b&1,b--;c=p}return{pixels:R,mask:c}};return t}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(K,t,v,F,p,R,Q,O,S,z){function l(I,L){let U=
"unknown";3===I?U=64===L?"f64":"f32":1===I?1===L?U="u1":2===L?U="u2":4===L?U="u4":8>=L?U="u8":16>=L?U="u16":32>=L&&(U="u32"):2===I&&(8>=L?U="s8":16>=L?U="s16":32>=L&&(U="s32"));return U}function b(I){let L=null;switch(I?I.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":L=Uint8Array;break;case "u16":L=Uint16Array;break;case "u32":L=Uint32Array;break;case "s8":L=Int8Array;break;case "s16":L=Int16Array;break;case "s32":L=Int32Array;break;case "f64":L=Float64Array;break;default:L=Float32Array}return L}
function h(I,L){return{x:L[0]*I.x+L[1]*I.y+L[2],y:L[3]*I.x+L[4]*I.y+L[5]}}function m(I,L){return I.get(L)?.values?.[0]}function f(I,L,U,ba=0,ea=O.TIFF_TAGS,Y=4){var X=8===Y;const N=X?D(new DataView(I,U,8),0,L):(new DataView(I,U,2)).getUint16(0,L),W=4+2*Y;var ca=X?8:2;X=ca+N*W;if(U+X>I.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:X};const da=U+X+4<=I.byteLength?G(new DataView(I,U+X,8===Y?8:4),0,L,8===Y):null;U+=ca;ca=new Map;let fa,ja,ia,ra=0,ta=0;for(let oa=0;oa<N;oa++){var qa=
new DataView(I,U+W*oa,W);fa=qa.getUint16(0,L);ia=qa.getUint16(2,L);ja=O.getTagName(fa,ea);const ma=[];2===Y?(ra=qa.getUint16(4,L),ta=qa.getUint16(6,L)):4===Y?(ra=qa.getUint32(4,L),ta=qa.getUint32(8,L)):8===Y&&(ra=G(qa,4,L,!0),ta=G(qa,12,L,!0),ma.push(qa.getUint32(12,L)),ma.push(qa.getUint32(16,L)));qa={id:fa,type:ia,valueCount:ra,valueOffset:ta,valueOffsets:ma,values:null};r(I,L,qa,ba,!1,Y);ca.set(ja,qa)}return{success:!0,ifd:ca,nextIFD:da,requiredBufferSize:X}}function w(I,L){if(1!==L&&2!==L&&4!==
L)return I;const U=new Uint8Array(I),ba=8/L;I=new Uint8Array(I.byteLength*ba);let ea=0;const Y=2**L-1;for(let X=0;X<U.length;X++){const N=U[X];for(let W=0;W<ba;W++)I[ea++]=N<<L*W>>>8-L&Y}return I.buffer}function c(I,L,U){const ba=new F.JpegImage;ba.parse(I);ba.colorTransform=6===U?-1:0;I=ba.getData(ba.width,ba.height,1!==L);return new Uint8Array(I.buffer)}function k(I){I=(new z.Zlib(I)).getBytes();var L=new ArrayBuffer(I.length);L=new Uint8Array(L);L.set(I);return L}function u(I,L,U,ba,ea){return B.apply(this,
arguments)}function B(){B=t._asyncToGenerator(function*(I,L,U,ba,ea){var Y=S.isPlatformLittleEndian===L,X=m(U,"BITSPERSAMPLE"),N=m(U,"SAMPLESPERPIXEL");const W=m(U,"PHOTOMETRICINTERPRETATION");var ca=m(U,"SAMPLEFORMAT")??1;const da=l(ca,X);var fa=m(U,"COMPRESSION")??1;ca=b(da);if(34887===fa)return yield p.load(),p.decode(I,{inputOffset:ba}).pixels[0];if(1===fa)N=I.slice(ba,ba+ea),L=new Uint8Array(N);else if(8===fa||32946===fa)L=new Uint8Array(I,ba,ea),L=k(L),N=L.buffer;else if(6===fa)L=new Uint8Array(I,
ba,ea),L=c(L,N,W),N=L.buffer;else if(7===fa){fa=U.get("JPEGTABLES").values;U=fa.length-2;L=new Uint8Array(U+ea-2);for(let ja=0;ja<U;ja++)L[ja]=fa[ja];I=new Uint8Array(I,ba+2,ea-2);for(ba=0;ba<I.length;ba++)L[U+ba]=I[ba];L=c(L,N,W);N=L.buffer}else if(5===fa)L=R.decode(I,ba,ea,L),N=L.buffer;else throw Error("tiff-decode: unsupport compression "+fa);N=w(N,X);if("u8"!==da&&"s8"!==da&&!Y)switch(N=new ArrayBuffer(L.length),Y=new Uint8Array(N),da){case "u16":case "s16":for(X=0;X<L.length;X+=2)Y[X]=L[X+1],
Y[X+1]=L[X];break;case "u32":case "s32":case "f32":for(X=0;X<L.length;X+=4)Y[X]=L[X+3],Y[X+1]=L[X+2],Y[X+2]=L[X+1],Y[X+3]=L[X]}return new ca(N)});return B.apply(this,arguments)}function a(I,L,U){return g.apply(this,arguments)}function g(){g=t._asyncToGenerator(function*(I,L,U){const ba=U.get("TILEOFFSETS")?.values;if(void 0===ba)return null;const ea=U.get("TILEBYTECOUNTS")?.values,{width:Y,height:X,pixelType:N,tileWidth:W,tileHeight:ca}=C([U]);var da=d(U,L);const fa=m(U,"SAMPLESPERPIXEL")||L.planes;
var ja=Y*X,ia=m(U,"BITSPERSAMPLE"),ra=34887===(m(U,"COMPRESSION")??1),ta=b(N);const qa=[];for(var oa=0;oa<fa;oa++)qa.push(new ta(ja));let ma,xa,ua,Ba,za,Fa,Ca,Ia;ja=Math.ceil(Y/W);if(0===ia%8)if(ra&&da&&1<fa)for(da=Math.round(ba.length/fa),ia=0;ia<da;ia++){var Aa=Math.floor(ia/ja)*ca;ua=ia%ja*W;ta=Aa*Y+ua;for(ra=0;ra<fa;ra++)if(oa=ia*fa+ra,0!==ea[oa])for(oa=yield u(I,L.littleEndian,U,ba[oa],ea[oa]),za=0,Ba=ta,Ca=Math.min(W,Y-ua),Fa=Math.min(ca,X-Aa),Ia=qa[ra],ma=0;ma<Fa;ma++)for(Ba=ta+ma*Y,za=ma*
W,xa=0;xa<Ca;xa++,Ba++,za++)Ia[Ba]=oa[za]}else for(ia=0;ia<ba.length;ia++)if(0!==ea[ia])for(Aa=Math.floor(ia/ja)*ca,ua=ia%ja*W,ta=Aa*Y+ua,oa=yield u(I,L.littleEndian,U,ba[ia],ea[ia]),za=0,Ba=ta,Ca=Math.min(W,Y-ua),Fa=Math.min(ca,X-Aa),Aa=0;Aa<fa;Aa++)if(Ia=qa[Aa],da||ra)for(ma=0;ma<Fa;ma++)for(Ba=ta+ma*Y,za=W*ca*Aa+ma*W,xa=0;xa<Ca;xa++,Ba++,za++)Ia[Ba]=oa[za];else for(ma=0;ma<Fa;ma++)for(Ba=ta+ma*Y,za=ma*W*fa+Aa,xa=0;xa<Ca;xa++,Ba++,za+=fa)Ia[Ba]=oa[za];return{width:Y,height:X,pixelType:N,pixels:qa}});
return g.apply(this,arguments)}function r(I,L,U,ba=0,ea=!1,Y=4){if(U.values)return!0;var X=U.type,N=U.valueCount,W=U.valueOffset;let ca=[];var da=H[X],fa=8*da,ja=N*da,ia=N*H[X]*8,ra=8===Y?64:32;Y=U.valueOffsets;if(ia>ra&&ja>(ea?I.byteLength:I?I.byteLength-W+ba:0))return U.offlineOffsetSize=[W,ja],U.values=null,!1;if(ia<=ra)if(L||(32>=ra?W>>>=32-ia:(I=Y?.length?Y[0]:W>>>0,L=Y?.length?Y[1]:Math.round((W-I)/4294967296),32>=ia?(W=I>>>32-ia,Y[0]=W):(W=I*2**(32-ia)+(L>>>32-ia),Y[0]=I,Y[1]=L>>>32-ia))),
1===N&&fa===ra)ca=[W];else if(64===ra)for(I=Y?.length?Y[0]:W>>>0,W=Y?.length?Y[1]:Math.round((W-I)/4294967296),L=I,da=32,I=1;I<=N;I++)ja=32-fa*I%32,da<fa?(ja=L<<ja>>>32-da,ia=W<<32-da>>>32-da,L=W,ca.push(ja+ia*2**(fa-da)),da-=32-(fa-da)):(ca.push(L<<ja>>>32-fa),da-=fa),0===da&&(da=32,L=W);else for(I=1;I<=N;I++)ca.push(W<<32-fa*I>>>32-fa);else for(W-=ba,ea&&(W=0),N=W;N<W+ja;N+=da){switch(X){case 1:fa=(new DataView(I,N,1)).getUint8(0);break;case 2:fa=(new DataView(I,N,1)).getUint8(0);break;case 3:fa=
(new DataView(I,N,2)).getUint16(0,L);break;case 4:case 13:fa=(new DataView(I,N,4)).getUint32(0,L);break;case 5:fa=(new DataView(I,N,4)).getUint32(0,L)/(new DataView(I,N+4,4)).getUint32(0,L);break;case 6:fa=(new DataView(I,N,1)).getInt8(0);break;case 7:fa=(new DataView(I,N,1)).getUint8(0);break;case 8:fa=(new DataView(I,N,2)).getInt16(0,L);break;case 9:fa=(new DataView(I,N,4)).getInt32(0,L);break;case 10:fa=(new DataView(I,N,4)).getInt32(0,L)/(new DataView(I,N+4,4)).getInt32(0,L);break;case 11:fa=
(new DataView(I,N,4)).getFloat32(0,L);break;case 12:fa=(new DataView(I,N,8)).getFloat64(0,L);break;case 16:case 18:fa=D(new DataView(I,N,8),0,L);break;case 17:Y=new DataView(I,N,8);ia=(fa=L)?Y.getInt32(0,fa):Y.getUint32(0,fa);Y=fa?Y.getUint32(4,fa):Y.getInt32(4,fa);ra=0<=(fa?ia:Y)?1:-1;fa?ia*=ra:Y*=ra;fa=ra*(fa?4294967296*Y+ia:4294967296*ia+Y);break;default:fa=null}ca.push(fa)}if(2===X){X="";W=ca;ca=[];for(I=0;I<W.length;I++)0===W[I]&&""!==X?(ca.push(X),X=""):X+=String.fromCharCode(W[I]);""===X&&
0!==ca.length||ca.push(X)}U.values=ca;return!0}function C(I){var L=I[0];const U=m(L,"TILEWIDTH"),ba=m(L,"TILELENGTH"),ea=m(L,"IMAGEWIDTH"),Y=m(L,"IMAGELENGTH");var X=m(L,"BITSPERSAMPLE");const N=m(L,"SAMPLESPERPIXEL");var W=m(L,"SAMPLEFORMAT")??1;const ca=l(W,X),da=d(L);var fa=L.get("GDAL_NODATA")?.values;let ja=null;fa?.length&&(ja=fa.map(Aa=>parseFloat(Aa)),ja.some(Aa=>isNaN(Aa))&&(ja=null));var ia=m(L,"COMPRESSION")??1;switch(ia){case 1:fa="NONE";break;case 2:case 3:case 4:case 32771:fa="CCITT";
break;case 5:fa="LZW";break;case 6:case 7:fa="JPEG";break;case 32773:fa="PACKBITS";break;case 8:case 32946:fa="DEFLATE";break;case 34712:fa="JPEG2000";break;case 34887:fa="LERC";break;default:fa=String(ia)}let ra=!0,ta="";T.has(ia)||(ra=!1,ta+="unsupported tag compression "+ia);3<W&&(ra=!1,ta+="unsupported tag sampleFormat "+W);1!==X&&2!==X&&4!==X&&0!==X%8&&(ra=!1,ta+="unsupported tag bitsPerSample "+X);X=L.get("GEOASCIIPARAMS")?.values?.[0];if(X){var qa=(qa=X.split("|").find(Aa=>Aa.includes("ESRI PE String \x3d ")))?
qa.replace("ESRI PE String \x3d ",""):"";qa=qa.startsWith("COMPD_CS")||qa.startsWith("PROJCS")||qa.startsWith("GEOGCS")?{wkid:null,wkt:qa}:null}W=L.get("GEOTIEPOINTS")?.values;X=L.get("GEOPIXELSCALE")?.values;ia=L.get("GEOTRANSMATRIX")?.values;var oa=L.has("GEOKEYDIRECTORY")?L.get("GEOKEYDIRECTORY").data:null,ma=!1;L=!1;if(oa){ma=2===m(oa,"GTRasterTypeGeoKey");var xa=m(oa,"GTModelTypeGeoKey");2===xa?(oa=m(oa,"GeographicTypeGeoKey"),1024<=oa&&32766>=oa&&(qa={wkid:oa}),qa||32767!==oa||(L=!0,qa={wkid:4326})):
1===xa&&(oa=m(oa,"ProjectedCSTypeGeoKey"),1024<=oa&&32766>=oa&&(qa={wkid:oa}))}let ua;X&&W&&6<=W.length?(ua=[X[0],0,W[3]-W[0]*X[0],0,-Math.abs(X[1]),W[4]-W[1]*X[1]],ma&&(ua[2]-=.5*ua[0]+.5*ua[1],ua[5]-=.5*ua[3]+.5*ua[4])):ia&&16===ia.length&&(ua=ma?[ia[0],ia[1],ia[3]-.5*ia[0],ia[4],ia[5],ia[7]-.5*ia[5]]:[ia[0],ia[1],ia[3],ia[4],ia[5],ia[7]]);if(ua){W=[{x:0,y:Y},{x:0,y:0},{x:ea,y:Y},{x:ea,y:0}];oa=ma=Number.POSITIVE_INFINITY;let Aa=xa=Number.NEGATIVE_INFINITY;for(let Ma=0;Ma<W.length;Ma++)ia=h(W[Ma],
ua),ma=ia.x>ma?ma:ia.x,xa=ia.x<xa?xa:ia.x,oa=ia.y>oa?oa:ia.y,Aa=ia.y<Aa?Aa:ia.y;W={xmin:ma,xmax:xa,ymin:oa,ymax:Aa,spatialReference:qa}}else W={xmin:-.5,ymin:.5-Y,xmax:ea-.5,ymax:.5,spatialReference:qa};L&&(400<W.xmax-W.xmin||361<Math.max(Math.abs(W.xmin),Math.abs(W.xmax)))&&(qa=null,W.spatialReference=null);qa=e(I);let Ba;let za,Fa;if(0<qa.length){za=Math.round(Math.log(ea/m(qa[0],"IMAGEWIDTH"))/Math.LN2);var Ca=qa[qa.length-1];Fa=Math.round(Math.log(ea/m(Ca,"IMAGEWIDTH"))/Math.LN2);Ba=m(Ca,"TILEWIDTH");
Ca=m(Ca,"TILELENGTH")}Ba=null!=Fa&&0<Fa?Ba||U:null;Ca=null!=Fa&&0<Fa?Ca||ba:null;let Ia;U&&(Ia=[{maxCol:Math.ceil(ea/U)-1,maxRow:Math.ceil(Y/ba)-1,minRow:0,minCol:0}],qa.forEach(Aa=>{Ia.push({maxCol:Math.ceil(m(Aa,"IMAGEWIDTH")/m(Aa,"TILEWIDTH"))-1,maxRow:Math.ceil(m(Aa,"IMAGELENGTH")/m(Aa,"TILELENGTH"))-1,minRow:0,minCol:0})}));ia=I[0].get("GDAL_METADATA")?.values?.[0];ia=V(ia);ta+=" "+J({width:ea,height:Y,tileWidth:U,tileHeight:ba,planes:N,ifds:I});I=n(I).length===qa.length+1;return{width:ea,height:Y,
tileWidth:U,tileHeight:ba,planes:N,isBSQ:da,pixelType:ca,compression:fa,noData:ja,hasMaskBand:I,isSupported:ra,message:ta,extent:W,isPseudoGeographic:L,affine:X?null:ua,firstPyramidLevel:za,maximumPyramidLevel:Fa,pyramidBlockWidth:Ba,pyramidBlockHeight:Ca,tileBoundary:Ia,metadata:ia}}function d(I,L){return(I=I.get("PLANARCONFIGURATION")?.values)?2===I[0]:L?L.isBSQ:!1}function e(I){return I.filter(L=>1===m(L,"NEWSUBFILETYPE"))}function n(I){return I.filter(L=>{const U=4===((m(L,"NEWSUBFILETYPE")??
0)&4);L=4===m(L,"PHOTOMETRICINTERPRETATION");return U&&L})}function A(I){const {littleEndian:L,isBigTiff:U,firstIFDPos:ba}=y(I);var ea=ba;const Y=[];do if(ea=E(I,L,ea,0,O.TIFF_TAGS,U?8:4),ea.success)Y.push(ea.ifd),ea=ea.nextIFD;else break;while(0<ea);I=C(Y);ea=e(Y);const X=n(Y);return{...I,littleEndian:L,isBigTiff:U,ifds:Y,pyramidIFDs:ea,maskIFDs:X}}function D(I,L,U){const ba=I.getUint32(L,U);I=I.getUint32(L+4,U);return U?4294967296*I+ba:4294967296*ba+I}function G(I,L,U,ba){return ba?D(I,L,U):I.getUint32(L,
U)}function y(I){var L=new DataView(I,0,16),U=L.getUint16(0,!1);I=null;if(18761===U)I=!0;else if(19789===U)I=!1;else throw Error("unexpected endianess byte");var ba=L.getUint16(2,I);if(42!==ba&&43!==ba)throw Error("unexpected tiff identifier");U=4;if(ba=43===ba){const ea=L.getUint16(U,I);U+=2;if(8!==ea)throw Error("unsupported bigtiff version");if(0!==L.getUint16(U,I))throw Error("unsupported bigtiff version");U+=2}L=G(L,U,I,ba);return{littleEndian:I,isBigTiff:ba,firstIFDPos:L}}function E(I,L,U,ba=
0,ea=O.TIFF_TAGS,Y=4){U=f(I,L,U,ba,ea,Y);let X;const N=U.ifd;N&&(O.ifdTags.forEach((W,ca)=>{N.has(ca)&&(X=N.get(ca),X.data=f(I,L,X.valueOffset-ba,ba,W).ifd)}),N.has("GEOKEYDIRECTORY")&&(X=N.get("GEOKEYDIRECTORY"),(ea=X.values)&&4<ea.length&&(ea=ea[0]+"."+ea[1]+"."+ea[2],X.data=f(I,L,X.valueOffset+6-ba,ba,O.GEO_KEYS,2).ifd,X.data&&X.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[ea]}))),N.has("XMP")&&(X=N.get("XMP"),ea=X.values,"number"===typeof ea[0]&&7===X.type&&(X.values=
[v.bytesToUTF8(new Uint8Array(ea))])));return U}function J(I){const {width:L,height:U,tileHeight:ba,tileWidth:ea}=I,Y=I.planes,X=ea?ea*ba:L*U;I=m(I.ifds[0],"BITSPERSAMPLE");let N="";X*Y>2**30/(8<I?I/8:1)&&(N=ea?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return N}function x(){x=t._asyncToGenerator(function*(I,L){const {headerInfo:U,ifd:ba,offsets:ea,sizes:Y}=L;var X=[];for(var N=0;N<ea.length;N++){var W=yield u(I,U.littleEndian,
ba,ea[N],Y[N]||I.byteLength);X.push(W)}var ca=d(ba,U);I=m(ba,"BITSPERSAMPLE");N=m(ba,"SAMPLEFORMAT")??1;N=l(N,I);var da=m(ba,"SAMPLESPERPIXEL")||U.planes;const fa=b(N);W=m(ba,"TILEWIDTH");const ja=m(ba,"TILELENGTH");var ia=m(ba,"COMPRESSION")??1;const ra=W*ja;I=[];let ta=X[0];const qa=34887===ia;for(let ma=0;ma<da;ma++){ia=new fa(ra);if(ca&&qa){if(ta=X[ma],ta.length)for(var oa=0;oa<ra;oa++)ia[oa]=ta[ma][oa+ma]}else if(ta.length)if(ca||qa&&!ca)ia=ta.slice(ra*ma,ra*(ma+1));else for(oa=0;oa<ra;oa++)ia[oa]=
ta[oa*da+ma];I.push(ia)}X=U.noData?U.noData[0]:L.noDataValue;ca=(da=U.metadata?U.metadata.statistics:null)?da.map(ma=>ma.min):null;da=da?da.map(ma=>ma.max):null;N={pixelType:N,width:W,height:ja,pixels:I,noDataValue:X};null!=X?Q.convertNoDataToMask(N,X):ca&&da&&L.applyMinMaxConstraint&&(N.mask=Z(I,ca,da));return N});return x.apply(this,arguments)}function q(){q=t._asyncToGenerator(function*(I,L={}){var U=L.pyramidLevel||0,ba=L.headerInfo||A(I);const {ifds:ea,noData:Y}=ba;if(0===ea.length)throw Error("no valid image file directory");
var X=J(ba);if(X)throw X;X=null;var N=-1===U?ea[ea.length-1]:ea[U];L=Y??L.noDataValue;if(ba.tileWidth)X=yield a(I,ba,N);else{{const Fa=S.isPlatformLittleEndian===ba.littleEndian,Ca=N.get("STRIPOFFSETS")?.values;if(void 0===Ca)I=null;else{var {width:W,height:ca,pixelType:da}=C([N]);U=m(N,"SAMPLESPERPIXEL")||ba.planes;var fa=m(N,"PHOTOMETRICINTERPRETATION");X=W*ca;var ja=m(N,"BITSPERSAMPLE"),ia=b(da),ra=new ia(X*U),ta=N.get("STRIPBYTECOUNTS")?.values,qa=m(N,"ROWSPERSTRIP"),oa=m(N,"COMPRESSION")??1;
var ma=qa;if(0===ja%8)for(N=0;N<Ca.length;N++){var xa=N*qa*W*U;ma=(N+1)*qa>ca?ca-N*qa:qa;if("u8"===da||"s8"===da||Fa)if(8===oa||32946===oa){var ua=new Uint8Array(I,Ca[N],ta[N]);ua=k(ua);var Ba=ua.buffer}else 6===oa?(ua=new Uint8Array(I,Ca[N],ta[N]),ua=c(ua,U,fa),Ba=ua.buffer):5===oa?(ua=R.decode(I,Ca[N],ta[N],ba.littleEndian),Ba=ua.buffer):(ta[N]!==ma*W*U*ja/8&&console.log("strip byte counts is different than expected"),Ba=I.slice(Ca[N],Ca[N]+ta[N]));else{if(6===oa||8===oa||32946===oa){ua=new Uint8Array(I,
Ca[N],ta[N]);var za=k(ua);Ba=za.buffer}else ta[N]!==ma*W*U*ja/8&&console.log("strip byte counts is different than expected"),Ba=new ArrayBuffer(ta[N]),ua=new Uint8Array(I,Ca[N],ta[N]),za=new Uint8Array(Ba);switch(da){case "u16":case "s16":for(ma=0;ma<ua.length;ma+=2)za[ma]=ua[ma+1],za[ma+1]=ua[ma];break;case "u32":case "s32":case "f32":for(ma=0;ma<ua.length;ma+=4)za[ma]=ua[ma+3],za[ma+1]=ua[ma+2],za[ma+2]=ua[ma+1],za[ma+3]=ua[ma]}}Ba=w(Ba,ja);ma=new ia(Ba);ra.set(ma,xa)}fa=[];if(1===U)fa.push(ra);
else for(N=0;N<U;N++){ba=new ia(X);for(I=0;I<X;I++)ba[I]=ra[I*U+N];fa.push(ba)}I={width:W,height:ca,pixelType:da,pixels:fa}}}X=yield I}if(!X)return X;null!=L&&Q.convertNoDataToMask(X,L);return X});return q.apply(this,arguments)}const H=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],T=new Set([1,5,6,7,8,34712,34887]),Z=(I,L,U)=>{if(!(I&&0<I.length&&L&&U))return null;let ba,ea,Y;const X=I[0].length,N=I.length,W=new Uint8Array(X);for(let da=0;da<N;da++)if(ba=I[da],ea=L[da],Y=U[da],0===da)for(var ca=0;ca<
X;ca++)W[ca]=ba[ca]<ea||ba[ca]>Y?0:1;else for(ca=0;ca<X;ca++)W[ca]&&(W[ca]=ba[ca]<ea||ba[ca]>Y?0:1);return W},V=I=>{if(!I)return null;var L=I.match(/<Item(.*?)Item>/gi);if(!L||0===L.length)return null;I=new Map;var U;for(var ba=0;ba<L.length;ba++){var ea=L[ba];var Y=ea.slice(6,ea.indexOf("\x3e"));var X=ea.indexOf("sample\x3d");-1<X&&(U=ea.slice(X+8,ea.indexOf('"',X+8)));X=ea.indexOf("name\x3d");-1<X&&(Y=ea.slice(X+6,ea.indexOf('"',X+6)));Y&&(ea=ea.slice(ea.indexOf("\x3e")+1,ea.indexOf("\x3c/Item\x3e")).trim(),
null!=U?I.has(Y)?I.get(Y)[U]=ea:I.set(Y,[ea]):I.set(Y,ea));U=null}L=I.get("STATISTICS_MINIMUM");Y=I.get("STATISTICS_MAXIMUM");ba=I.get("STATISTICS_MEAN");ea=I.get("STATISTICS_STDDEV");U=null;if(L&&Y)for(U=[],X=0;X<L.length;X++)U.push({min:parseFloat(L[X]),max:parseFloat(Y[X]),avg:ba&&parseFloat(ba[X]),stddev:ea&&parseFloat(ea[X])});Y=I.get("BandName");ba=I.get("WavelengthMin");ea=I.get("WavelengthMax");L=null;if(Y)for(L=[],X=0;X<Y.length;X++)L.push({BandName:Y[X],WavelengthMin:ba&&parseFloat(ba[X]),
WavelengthMax:ea&&parseFloat(ea[X])});Y=I.get("DataType");return{statistics:U,bandProperties:L,dataType:Y,rawMetadata:I}};K.decode=function(I){return q.apply(this,arguments)};K.decodeTileOrStrip=function(I,L){return x.apply(this,arguments)};K.getImageInfo=C;K.getMaskIFDs=n;K.getPyramidIFDs=e;K.isBSQConfig=d;K.parseFieldValues=r;K.parseHeader=A;K.parseIFD=E;K.parseSignature=y;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],
function(K){K.bytesToUTF8=function(t,v){let F=0,p="",R=0,Q=0;const O=t.length;for(;F<O;)if(Q=t[F++],R=Q>>4,8>R?R=1:15===R?(R=4,Q=(Q&7)<<18|(t[F++]&63)<<12|(t[F++]&63)<<6|t[F++]&63):14===R?(R=3,Q=(Q&15)<<12|(t[F++]&63)<<6|t[F++]&63):(R=2,Q=(Q&31)<<6|t[F++]&63),0!==Q||v)p+=String.fromCharCode(Q);return p};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const K=(()=>{const p=[];p[254]="NEWSUBFILETYPE";p[255]="SUBFILETYPE";
p[256]="IMAGEWIDTH";p[257]="IMAGELENGTH";p[258]="BITSPERSAMPLE";p[259]="COMPRESSION";p[262]="PHOTOMETRICINTERPRETATION";p[263]="THRESHHOLDING";p[264]="CELLWIDTH";p[265]="CELLLENGTH";p[266]="FILLORDER";p[269]="DOCUMENTNAME";p[270]="IMAGEDESCRIPTION";p[271]="MAKE";p[272]="MODEL";p[273]="STRIPOFFSETS";p[274]="ORIENTATION";p[277]="SAMPLESPERPIXEL";p[278]="ROWSPERSTRIP";p[279]="STRIPBYTECOUNTS";p[280]="MINSAMPLEVALUE";p[281]="MAXSAMPLEVALUE";p[282]="XRESOLUTION";p[283]="YRESOLUTION";p[284]="PLANARCONFIGURATION";
p[285]="PAGENAME";p[286]="XPOSITION";p[287]="YPOSITION";p[288]="FREEOFFSETS";p[289]="FREEBYTECOUNTS";p[290]="GRAYRESPONSEUNIT";p[291]="GRAYRESPONSECURVE";p[292]="T4OPTIONS";p[293]="T6OPTIONS";p[296]="RESOLUTIONUNIT";p[297]="PAGENUMBER";p[300]="COLORRESPONSEUNIT";p[301]="TRANSFERFUNCTION";p[305]="SOFTWARE";p[306]="DATETIME";p[315]="ARTIST";p[316]="HOSTCOMPUTER";p[317]="PREDICTOR";p[318]="WHITEPOINT";p[319]="PRIMARYCHROMATICITIES";p[320]="COLORMAP";p[321]="HALFTONEHINTS";p[322]="TILEWIDTH";p[323]="TILELENGTH";
p[324]="TILEOFFSETS";p[325]="TILEBYTECOUNTS";p[326]="BADFAXLINES";p[327]="CLEANFAXDATA";p[328]="CONSECUTIVEBADFAXLINES";p[330]="SUBIFD";p[332]="INKSET";p[333]="INKNAMES";p[334]="NUMBEROFINKS";p[336]="DOTRANGE";p[337]="TARGETPRINTER";p[338]="EXTRASAMPLES";p[339]="SAMPLEFORMAT";p[340]="SMINSAMPLEVALUE";p[341]="SMAXSAMPLEVALUE";p[342]="TRANSFERRANGE";p[347]="JPEGTABLES";p[512]="JPEGPROC";p[513]="JPEGIFOFFSET";p[514]="JPEGIFBYTECOUNT";p[515]="JPEGRESTARTINTERVAL";p[517]="JPEGLOSSLESSPREDICTORS";p[518]=
"JPEGPOINTTRANSFORM";p[519]="JPEGQTABLES";p[520]="JPEGDCTABLES";p[521]="JPEGACTABLES";p[529]="YCBCRCOEFFICIENTS";p[530]="YCBCRSUBSAMPLING";p[531]="YCBCRPOSITIONING";p[532]="REFERENCEBLACKWHITE";p[700]="XMP";p[33550]="GEOPIXELSCALE";p[33922]="GEOTIEPOINTS";p[33432]="COPYRIGHT";p[42112]="GDAL_METADATA";p[42113]="GDAL_NODATA";p[50844]="RPCCOEFFICIENT";p[34264]="GEOTRANSMATRIX";p[34735]="GEOKEYDIRECTORY";p[34736]="GEODOUBLEPARAMS";p[34737]="GEOASCIIPARAMS";p[34665]="EXIFIFD";p[34853]="GPSIFD";p[40965]=
"INTEROPERABILITYIFD";return p})(),t=(()=>{const p=K.slice();p[36864]="ExifVersion";p[40960]="FlashpixVersion";p[40961]="ColorSpace";p[42240]="Gamma";p[37121]="ComponentsConfiguration";p[37122]="CompressedBitsPerPixel";p[40962]="PixelXDimension";p[40963]="PixelYDimension";p[37500]="MakerNote";p[37510]="UserComment";p[40964]="RelatedSoundFile";p[36867]="DateTimeOriginal";p[36868]="DateTimeDigitized";p[36880]="OffsetTime";p[36881]="OffsetTimeOriginal";p[36882]="OffsetTimeDigitized";p[37520]="SubSecTime";
p[37521]="SubSecTimeOriginal";p[37522]="SubSecTimeDigitized";p[37888]="Temperature";p[37889]="Humidity";p[37890]="Pressure";p[37891]="WaterDepth";p[37892]="Acceleration";p[37893]="CameraElevationAngle";p[42016]="ImageUniqueID";p[42032]="CameraOwnerName";p[42033]="BodySerialNumber";p[42034]="LensSpecification";p[42035]="LensMake";p[42036]="LensModel";p[42037]="LensSerialNumber";p[33434]="ExposureTime";p[33437]="FNumber";p[34850]="ExposureProgram";p[34852]="SpectralSensitivity";p[34855]="PhotographicSensitivity";
p[34856]="OECF";p[34864]="SensitivityType";p[34865]="StandardOutputSensitivity";p[34866]="RecommendedExposureIndex";p[34867]="ISOSpeed";p[34868]="ISOSpeedLatitudeyyy";p[34869]="ISOSpeedLatitudezzz";p[37377]="ShutterSpeedValue";p[37378]="ApertureValue";p[37379]="BrightnessValue";p[37380]="ExposureBiasValue";p[37381]="MaxApertureValue";p[37382]="SubjectDistance";p[37383]="MeteringMode";p[37384]="LightSource";p[37385]="Flash";p[37386]="FocalLength";p[37396]="SubjectArea";p[41483]="FlashEnergy";p[41484]=
"SpatialFrequencyResponse";p[41486]="FocalPlaneXResolution";p[41487]="FocalPlaneYResolution";p[41488]="FocalPlaneResolutionUnit";p[41492]="SubjectLocation";p[41493]="ExposureIndex";p[41495]="SensingMethod";p[41728]="FileSource";p[41729]="SceneType";p[41730]="CFAPattern";p[41985]="CustomRendered";p[41986]="ExposureMode";p[41987]="WhiteBalance";p[41988]="DigitalZoomRatio";p[41989]="FocalLengthIn35mmFilm";p[41990]="SceneCaptureType";p[41991]="GainControl";p[41992]="Contrast";p[41993]="Saturation";p[41994]=
"Sharpness";p[41995]="DeviceSettingDescription";p[41996]="SubjectDistanceRange";return p})(),v=(()=>{const p=[];p[1024]="GTModelTypeGeoKey";p[1025]="GTRasterTypeGeoKey";p[1026]="GTCitationGeoKey";p[2048]="GeographicTypeGeoKey";p[2049]="GeogCitationGeoKey";p[2050]="GeogGeodeticDatumGeoKey";p[2051]="GeogPrimeMeridianGeoKey";p[2052]="GeogLinearUnitsGeoKey";p[2053]="GeogLinearUnitSizeGeoKey";p[2054]="GeogAngularUnitsGeoKey";p[2055]="GeogAngularUnitSizeGeoKey";p[2056]="GeogEllipsoidGeoKey";p[2057]="GeogSemiMajorAxisGeoKey";
p[2058]="GeogSemiMinorAxisGeoKey";p[2059]="GeogInvFlatteningGeoKey";p[2061]="GeogPrimeMeridianLongGeoKey";p[2060]="GeogAzimuthUnitsGeoKey";p[3072]="ProjectedCSTypeGeoKey";p[3073]="PCSCitationGeoKey";p[3074]="ProjectionGeoKey";p[3075]="ProjCoordTransGeoKey";p[3076]="ProjLinearUnitsGeoKey";p[3077]="ProjLinearUnitSizeGeoKey";p[3078]="ProjStdParallel1GeoKey";p[3079]="ProjStdParallel2GeoKey";p[3080]="ProjNatOriginLongGeoKey";p[3081]="ProjNatOriginLatGeoKey";p[3082]="ProjFalseEastingGeoKey";p[3083]="ProjFalseNorthingGeoKey";
p[3084]="ProjFalseOriginLongGeoKey";p[3085]="ProjFalseOriginLatGeoKey";p[3086]="ProjFalseOriginEastingGeoKey";p[3087]="ProjFalseOriginNorthingGeoKey";p[3088]="ProjCenterLongGeoKey";p[3090]="ProjCenterEastingGeoKey";p[3091]="ProjCenterNorthingGeoKey";p[3092]="ProjScaleAtNatOriginGeoKey";p[3093]="ProjScaleAtCenterGeoKey";p[3094]="ProjAzimuthAngleGeoKey";p[3095]="ProjStraightVertPoleLongGeoKey";p[4096]="VerticalCSTypeGeoKey";p[4097]="VerticalCitationGeoKey";p[4098]="VerticalDatumGeoKey";p[4099]="VerticalUnitsGeoKey";
return p})(),F=new Map;F.set("EXIFIFD",t);F.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:K,ifdTags:F,GEO_KEYS:v,getTagName:(p,R)=>{R=(R||K)[p];void 0===R&&(R="unknown"+String(p));return R}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(K){const t=new ArrayBuffer(4),v=new Uint8Array(t);(new Uint32Array(t))[0]=1;K.isPlatformLittleEndian=1===v[0];Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f,w,c,k,u,B,a){function g(N,W){N=r(N,W?.variableName);const {bandCount:ca}=N;let {bandIds:da,stretchType:fa}=W||{};da?.some(qa=>qa>=ca)&&(da=null);let ja=F.unwrap(N.statistics),ia=F.unwrap(N.histograms);1<ca?(da=da?.length?da:C(N),ja=null==ja?null:da?.map(qa=>ja[qa]),ia=null==ia?null:da?.map(qa=>ia[qa])):da=[0];null==fa&&(fa=e(N));let ra=!1;switch(fa){case "none":ra=!1;break;case "percent-clip":ra=!ia?.length;break;default:ra=!ja?.length}var {dataType:ta}=N;ta=
1===da?.length&&Y.has(ta)?ba:null;ta=new w({stretchType:fa,dynamicRangeAdjustment:ra,colorRamp:ta,outputMin:0,outputMax:255,gamma:1===da?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===fa?ta.maxPercent=ta.minPercent=.25:"standard-deviation"===fa&&(ta.numberOfStandardDeviations=2);if(!ra&&(F.isSome(N.multidimensionalInfo)||W?.includeStatisticsInStretch))if("percent-clip"===fa)ta.histograms=ia;else if("min-max"===fa||"standard-deviation"===fa)ta.statistics=ja;return ta}function r(N,W){if(!W)return N;
let ca=F.unwrap(N.statistics),da=F.unwrap(N.histograms);var {multidimensionalInfo:fa}=N;if(W&&F.isSome(fa)&&(fa=fa.variables.find(ja=>ja.name===W))){const {statistics:ja,histograms:ia}=fa;ja?.length&&(ca=ja);ia?.length&&(da=ia)}return Q.fromJSON({...N.toJSON(),statistics:ca,histograms:da})}function C(N){const W=N.bandCount;if(1===W)return null;if(2===W)return[0];N=N.keyProperties&&N.keyProperties.BandProperties;let ca;if(N&&N.length===W){const {red:da,green:fa,blue:ja,nir:ia}=d(N);null!=da&&null!=
fa&&null!=ja?ca=[da,fa,ja]:null!=ia&&null!=da&&null!=fa&&(ca=[ia,da,fa])}!ca&&3<=W&&(ca=[0,1,2]);return ca}function d(N){const W={};for(let fa=0;fa<N.length;fa++){var ca=N[fa],da=ca.BandName?.toLowerCase();"red"===da?W.red=fa:"green"===da?W.green=fa:"blue"===da?W.blue=fa:"nearinfrared"===da||"nearinfrared_1"===da||"nir"===da?W.nir=fa:ca.WavelengthMax&&ca.WavelengthMin&&(da=ca.WavelengthMin,ca=ca.WavelengthMax,null==W.blue&&410<=da&&480>=da&&480<=ca&&540>=ca?W.blue=fa:null==W.green&&490<=da&&560>=
da&&560<=ca&&610>=ca?W.green=fa:null==W.red&&595<=da&&670>=da&&660<=ca&&730>=ca?W.red=fa:null==W.nir&&700<=da&&860>=da&&800<=ca&&950>=ca&&(W.nir=fa))}return W}function e(N){let W="percent-clip";const {pixelType:ca,dataType:da,histograms:fa,statistics:ja,multidimensionalInfo:ia}=N;N=Y.has(da)||"generic"===da&&F.isSome(ia);"u8"!==ca||"processed"!==da&&F.isSome(fa)&&F.isSome(ja)?"u8"===ca||"elevation"===da||N?W="min-max":F.isSome(fa)?W="percent-clip":F.isSome(ja)&&(W="min-max"):W="none";return W}function n(N,
W,ca,da){if(!y(N,W))return null;const {attributeTable:fa,statistics:ja}=N,ia=A(fa,W),ra=G(fa,"red"),ta=G(fa,"green"),qa=G(fa,"blue");N=new S;const oa=[],ma=new Set,xa=!!(ra&&ta&&qa);if(F.isSome(fa))fa.features.forEach(ua=>{var Ba=ua.attributes[ia.name];ma.has(ua.attributes[ia.name])||null==Ba||(ma.add(Ba),Ba=!xa||"single"!==ra.type&&"double"!==ra.type||"single"!==ta.type&&"double"!==ta.type||"single"!==qa.type&&"double"!==qa.type||fa.features.some(za=>1<za.attributes[ra.name]||1<za.attributes[ta.name]||
1<za.attributes[qa.name])?1:255,oa.push(new b({value:ua.attributes[ia.name],label:ua.attributes[ia.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:xa?new t([ua.attributes[ra.name]*Ba,ua.attributes[ta.name]*Ba,ua.attributes[qa.name]*Ba,1]):new t([0,0,0,0])}})))});else if(ja?.[0])for(W=ja[0].min;W<=ja[0].max;W++)oa.push(new b({value:W,label:W.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new t([0,0,0,0])}}));oa.sort((ua,Ba)=>ua.value&&"string"===typeof ua.value.valueOf()?
0:ua.value>Ba.value?1:-1);if(!xa){const ua=l.convertColorRampToColormap(ea,{numColors:oa.length});oa.forEach((Ba,za)=>Ba.symbol.color=new t(ua[za].slice(1,4)));N.colorRamp=ea}if(ca||da){const ua=ca||l.convertColorRampToColormap(da,{numColors:oa.length}).map(Ba=>Ba.slice(1));oa.forEach((Ba,za)=>Ba.symbol.color=new t(ua[za]));N.colorRamp=da}return new c({field:ia.name,uniqueValueInfos:oa,authoringInfo:N})}function A(N,W,ca){let da;F.isSome(N)?(da=W?N.fields.find(fa=>W.toLowerCase()===fa.name.toLowerCase()):
D(N.fields),da||(ca||(da=N.fields.find(fa=>"string"===fa.type)),da||(da=G(N,"value")))):da=new R({name:"value"});return da}function D(N){let W;for(let ca=0;ca<N.length;ca++){const da=N[ca].name.toLowerCase();if("string"===N[ca].type){if(da.startsWith("class")){W=N[ca];break}null==W&&(da.endsWith("name")||da.endsWith("type"))&&(W=N[ca])}}return W}function G(N,W){return F.isNone(N)?null:N.fields.find(ca=>ca.name.toLowerCase()===W)}function y(N,W){const {attributeTable:ca,bandCount:da}=N;return F.isNone(ca)&&
T(N)?!0:F.isNone(ca)||1<da||W&&null==ca.fields.find(fa=>fa.name.toLowerCase()===W.toLowerCase())?!1:!0}function E(N){const {bandCount:W,colormap:ca}=N;return F.isSome(ca)&&0<ca.length&&1===W}function J(N){if(!E(N))return null;let W;const {attributeTable:ca,colormap:da}=N;if(F.isSome(ca)){const fa=G(ca,"value"),ja=A(ca,null,!0);"string"===ja.type&&(W={},ca.features.forEach(ia=>{ia=ia.attributes;W[ia[fa.name]]=ja?ia[ja.name]:ia[fa.name]}))}return k.createFromColormap(F.unwrap(da),W)}function x(N){const {bandCount:W,
dataType:ca,pixelType:da}=N;return"elevation"===ca||"generic"===ca&&1===W&&("s16"===da||"s32"===da||"f32"===da||"f64"===da)}function q(N,W=!1){const {attributeTable:ca,bandCount:da}=N;return 1===da&&(!W||F.isSome(ca)||F.isSome(N.histograms))}function H(N,W,ca){let da=0,fa=0;F.isSome(N.attributeTable)?(N=N.attributeTable,da=fa=N.features[0].attributes[W.name],N.features.forEach(ja=>{ja=ja.attributes[W.name];ja<da&&(da=ja);ja>fa&&(fa=ja)})):F.isSome(N.histograms)&&(N=N.histograms,da=N[0].min,fa=N[0].max);
return(fa-da)/ca}function T(N){return["u8","s8"].includes(N.pixelType)&&null!=N.statistics?.[0]?.min&&null!=N.statistics[0]?.max&&1===N.bandCount}function Z(N){({dataType:N}=N);return"vector-uv"===N||"vector-magdir"===N}function V(N){({dataType:N}=N);return"vector-uv"===N||"vector-magdir"===N}function I(N){if(!Z(N))return null;if(F.isSome(N.statistics)&&N.statistics.length&&("vector-magdir"===N.dataType||"vector-uv"===N.dataType)){const {minMagnitude:ca,maxMagnitude:da}=U(N.dataType,N.statistics);
var W=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:ca,maxDataValue:da}]}N=F.isSome(N.multidimensionalInfo)?X.get(N.multidimensionalInfo.variables[0].unit):null;W=new a({visualVariables:W,inputUnit:N,rotationType:"geographic"});W.visualVariables=[...W.sizeVariables,...W.rotationVariables];return W}function L(N){return{color:N.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function U(N,W){if("vector-magdir"===N)N=W[0].min,W=W[0].max;else{const ca=W[0].min,
da=W[0].max,fa=W[1].min;W=W[1].max;N=0;W=Math.max(Math.abs(ca),Math.abs(fa),Math.abs(da),Math.abs(W))}return{minMagnitude:N,maxMagnitude:W}}const ba=f.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),ea=f.fromJSON(l.PREDEFINED_JSON_COLOR_RAMPS[0]),Y=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),X=new Map([["m/s",
"meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);K.createClassBreaksRenderer=function(N,W){N=r(N,W?.variableName);const {attributeTable:ca}=N;if(!q(N))return null;const da=F.isSome(N.histograms)?N.histograms[0]:null,fa=null!=W?.numClasses&&isFinite(W?.numClasses)?W.numClasses:5,ja=new S({classificationMethod:W?.classificationMethod,colorRamp:W?.colorRamp});let ia=W?.field||"value";const ra=[],ta=[],qa=F.isSome(ca),oa=qa&&ca.fields.find(za=>
"count"===za.name.toLowerCase()),ma=qa?ca.fields.find(za=>za.name.toLowerCase()===ia.toLowerCase()):void 0;if(ma&&qa){ia=ma.name;const za=ca.features.length;let Fa=0;ca.features.forEach(Ca=>Fa+=(oa?Ca.attributes[oa.name]:50)/za);ca.features.forEach(Ca=>{const Ia=Ca.attributes[ma.name];Ca=oa?Ca.attributes[oa.name]:50;if(0<Ca){ta.push(Ca);Ca=Math.max(1,Math.round(Ca/za/Fa*1E3));for(let Aa=0;Aa<Ca;Aa++)ra.push(Ia)}})}else{var {pixelType:xa}=N;const za=(da.max-da.min)/da.size,Fa=(xa=xa.includes("s")||
xa.includes("u"))&&1===za?Math.floor(da.min+.5):da.min,Ca=xa&&1===za?Math.floor(da.max-.5):da.max,Ia=da.size;let Aa=0,Ma;da.counts.forEach(La=>Aa+=La/Ia);da.counts.forEach((La,Na)=>{if(0<La)for(ta.push(La),La=Math.max(1,Math.round(La/Ia/Aa*1E3)),Ma=qa?ca.features[Na].attributes[ma.name]:0===Na?Fa:Na===Ia-1?Ca:da.min+za*(Na+.5),Na=0;Na<La;Na++)ra.push(Ma)})}xa=W?.classificationMethod||"natural-breaks";let ua=W?.definedInterval;"defined-interval"!==xa||ua||(ua=H(N,ma,fa));N=m.createGenerateRendererClassBreaks({values:ra,
valueFrequency:ta,normalizationTotal:null,definition:new h({classificationMethod:xa,breakCount:fa,definedInterval:ua})});let Ba=W?.colors;Ba||(W=W?.colorRamp||ba,ja.colorRamp=W,Ba=l.convertColorRampToColormap(W,{numColors:N.classBreaks.length,interpolateAlpha:!0}).map(za=>za.slice(1)));W=N.classBreaks.map((za,Fa)=>new z({minValue:za.minValue,maxValue:za.maxValue,label:za.label,symbol:{type:"simple-fill",color:Ba[Fa]}}));return new B({field:ia,classBreakInfos:W,authoringInfo:ja})};K.createColormapRenderer=
J;K.createDefaultRenderer=function(N,W){const {attributeTable:ca,colormap:da}=N;if(Z(N)){var fa=I(N);if(F.isSome(fa))return fa}return F.isSome(da)&&(fa=J(N),F.isSome(fa))||F.isSome(ca)&&(fa=n(N),F.isSome(fa))?fa:g(N,W)};K.createFlowRenderer=function(N){if(!V(N))return null;let W;if(F.isSome(N.statistics)&&0<N.statistics.length&&("vector-magdir"===N.dataType||"vector-uv"===N.dataType)){const {minMagnitude:ca,maxMagnitude:da}=U(N.dataType,N.statistics);W=[{type:"color",field:"Magnitude",stops:[{value:ca,
color:"#1020C0"},{value:da,color:"#C02010"}]}]}return new O({visualVariables:W})};K.createShadedReliefRenderer=function(N,W="traditional"){if(!x(N))return null;({extent:N}=N);N=N.width*p.getMetersPerUnitForSR(N.spatialReference);return new u({hillshadeType:W,scalingType:5E6<N?"adjusted":"none"})};K.createStretchRenderer=g;K.createUVRenderer=n;K.createVectorFieldRenderer=I;K.estimateMagnitudeRange=U;K.getBandNames=function(N,W){const ca=N.keyProperties&&N.keyProperties.BandProperties;W=W?.length?W:
Array.from(Array(N.bandCount).keys());return W.map(da=>ca&&ca.length===N.bandCount?ca[da]&&ca[da].BandName||"band_"+(da+1):"band_"+(da+1))};K.getClassField=A;K.getDefaultBandCombination=C;K.getDefaultInterpolation=function(N,W,ca){const da=["nearest","bilinear","cubic","majority"].find(fa=>fa===ca?.toLowerCase());return"Map"===W?da??"bilinear":"standard-time"===N.dataType?da??"nearest":"thematic"===N.dataType||N.attributeTable||N.colormap?"nearest"===da||"majority"===da?da:"nearest":da??"bilinear"};
K.getDefinedInterval=H;K.getField=G;K.getSupportedRendererTypes=function(N,W=!1){const ca=["raster-stretch"];E(N)&&ca.push("raster-colormap");y(N)&&ca.push("unique-value");q(N,W)&&ca.push("class-breaks");x(N)&&ca.push("raster-shaded-relief");Z(N)&&ca.push("vector-field");V(N)&&ca.push("flow");return ca};K.getVariableRasterInfo=r;K.getWellKnownBandIndexes=d;K.isClassBreaksSupported=q;K.isColormapRendererSupported=E;K.isFlowRendererSupported=V;K.isShadedReliefRendererSupported=x;K.isSingleBand8BitRasterWithStats=
T;K.isUVRendererSupported=y;K.isVectorFieldRendererSupported=Z;K.normalizeRendererJSON=function(N){if("uniqueValue"===N.type){var W=N.uniqueValueInfos;W?.[0].symbol?.symbolLayers?.length&&(N.uniqueValueInfos=W?.map(ca=>({value:ca.value,label:ca.label,symbol:ca.symbol?L(ca.symbol):null})));return N}"classBreaks"===N.type&&(W=N.classBreakInfos,W[0].symbol?.symbolLayers?.length&&(N.classBreakInfos=W.map(ca=>({classMinValue:ca.classMinValue,classMaxValue:ca.classMaxValue,label:ca.label,symbol:ca.symbol?
L(ca.symbol):null}))));return N};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(K,t,v,F,p,R,Q,
O,S){R=new v.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});v=new v.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});F=function(z){function l(b){b=z.call(this,b)||this;b.type="class-breaks-definition";b.breakCount=null;b.classificationField=
null;b.classificationMethod=null;b.normalizationField=null;b.normalizationType=null;return b}K._inheritsLoose(l,z);K._createClass(l,[{key:"standardDeviationInterval",set:function(b){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",b)}},{key:"definedInterval",set:function(b){"defined-interval"===this.classificationMethod&&this._set("definedInterval",b)}}]);return l}(F.JSONSupport);t.__decorate([O.enumeration({classBreaksDef:"class-breaks-definition"})],F.prototype,
"type",void 0);t.__decorate([p.property({json:{write:!0}})],F.prototype,"breakCount",void 0);t.__decorate([p.property({json:{write:!0}})],F.prototype,"classificationField",void 0);t.__decorate([p.property({type:String,json:{read:R.read,write:R.write}})],F.prototype,"classificationMethod",void 0);t.__decorate([p.property({json:{write:!0}})],F.prototype,"normalizationField",void 0);t.__decorate([p.property({json:{read:v.read,write:v.write}})],F.prototype,"normalizationType",void 0);t.__decorate([p.property({value:null,
json:{write:!0}})],F.prototype,"standardDeviationInterval",null);t.__decorate([p.property({value:null,json:{write:!0}})],F.prototype,"definedInterval",null);return F=t.__decorate([S.subclass("esri.rest.support.ClassBreaksDefinition")],F)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(K,t){function v(h){var m=h.definition;const {classificationMethod:f,normalizationType:w,definedInterval:c}=m;m=m.breakCount??1;const k=[];var u=h.values;if(0===
u.length)return[];u=u.sort((d,e)=>d-e);var B=u[0],a=u[u.length-1];if("equal-interval"===f)if(u.length>=m){u=(a-B)/m;h=B;for(var g=1;g<m;g++){var r=Number((B+g*u).toFixed(6));k.push({minValue:h,maxValue:r,label:F(h,r,w)});h=r}k.push({minValue:h,maxValue:a,label:F(h,a,w)})}else u.forEach(d=>{k.push({minValue:d,maxValue:d,label:F(d,d,w)})});else if("natural-breaks"===f){u=p(u);h=R(u.uniqueValues,h.valueFrequency||u.valueFrequency,m);for(g=1;g<m;g++)u.uniqueValues.length>g&&(r=Number(u.uniqueValues[h[g]].toFixed(6)),
k.push({minValue:B,maxValue:r,label:F(B,r,w)}),B=r);k.push({minValue:B,maxValue:a,label:F(B,a,w)})}else if("quantile"===f)if(u.length>=m&&B!==a){h=Math.ceil(u.length/m);g=0;for(r=1;r<m;r++){var C=h+g-1;C>u.length&&(C=u.length-1);0>C&&(C=0);k.push({minValue:B,maxValue:u[C],label:F(B,u[C],w)});B=u[C];g+=h;h=Math.ceil((u.length-g)/(m-r))}k.push({minValue:B,maxValue:a,label:F(B,a,w)})}else for(m=-1,a=0;a<u.length;a++)B=u[a],B!==m&&(m=B,k.push({minValue:m,maxValue:B,label:F(m,B,w)}),m=B);else if("standard-deviation"===
f)if(h=S(u),g=z(u,h),0===g)k.push({minValue:u[0],maxValue:u[0],label:F(u[0],u[0],w)});else{u=O(B,a,m,h,g)*g;g=0;for(r=m;1<=r;r--)C=Number((h-(r-.5)*u).toFixed(6)),k.push({minValue:B,maxValue:C,label:F(B,C,w)}),B=C,g++;r=Number((h+.5*u).toFixed(6));k.push({minValue:B,maxValue:r,label:F(B,r,w)});B=r;g++;for(C=1;C<=m;C++)r=g===2*m?a:Number((h+(C+.5)*u).toFixed(6)),k.push({minValue:B,maxValue:r,label:F(B,r,w)}),B=r,g++}else if("defined-interval"===f){if(!c)return k;m=u[0];a=u[u.length-1];u=Math.ceil((a-
m)/c);B=m;for(h=1;h<u;h++)g=Number((m+h*c).toFixed(6)),k.push({minValue:B,maxValue:g,label:F(B,g,w)}),B=g;k.push({minValue:B,maxValue:a,label:F(B,a,w)})}return k}function F(h,m,f){let w=null;return w=h===m?f&&"percent-of-total"===f?h+"%":h.toString():f&&"percent-of-total"===f?h+"% - "+m+"%":h+" - "+m}function p(h){const m=[],f=[];let w=Number.MIN_VALUE,c=1,k=-1;for(let u=0;u<h.length;u++){const B=h[u];B===w?(c++,f[k]=c):null!==B&&(m.push(B),w=B,c=1,f.push(c),k++)}return{uniqueValues:m,valueFrequency:f}}
function R(h,m,f){var w=h.length;const c=[];f>w&&(f=w);for(var k=0;k<f;k++)c.push(Math.round(k*w/f-1));c.push(w-1);k=Q(c,h,m,f);w=k.mean;k=k.sdcm;var u=f,B=0,a=0;let g=0,r=0,C=!0;for(let e=0;2>e&&C;e++){0===e&&(C=!1);for(var d=0;d<u-1;d++)for(;c[d+1]+1!==c[d+2];)if(c[d+1]+=1,B=l(d,c,h,m),g=B.sbMean,B=B.sbSdcm,a=l(d+1,c,h,m),r=a.sbMean,a=a.sbSdcm,B+a<k[d]+k[d+1])k[d]=B,k[d+1]=a,w[d]=g,w[d+1]=r,C=!0;else{--c[d+1];break}for(d=u-1;0<d;d--)for(;c[d]!==c[d-1]+1;)if(--c[d],B=l(d-1,c,h,m),g=B.sbMean,B=B.sbSdcm,
a=l(d,c,h,m),r=a.sbMean,a=a.sbSdcm,B+a<k[d-1]+k[d])k[d-1]=B,k[d]=a,w[d-1]=g,w[d]=r,C=!0;else{c[d]+=1;break}}C&&(k=Q(c,h,m,f));return c}function Q(h,m,f,w){let c=[];var k=[],u=[];let B=0;const a=[],g=[];for(var r=0;r<w;r++){var C=l(r,h,m,f);a.push(C.sbMean);g.push(C.sbSdcm);B+=g[r]}C=B;for(r=!0;r||B<C;){r=!1;c=[];for(k=0;k<w;k++)c.push(h[k]);for(u=0;u<w;u++)for(C=h[u]+1;C<=h[u+1];C++)if(k=m[C],0<u&&C!==h[u+1]&&Math.abs(k-a[u])>Math.abs(k-a[u-1]))h[u]=C;else if(u<w-1&&h[u]!==C-1&&Math.abs(k-a[u])>Math.abs(k-
a[u+1])){h[u+1]=C-1;break}C=B;B=0;k=[];u=[];for(let d=0;d<w;d++){k.push(a[d]);u.push(g[d]);const e=l(d,h,m,f);a[d]=e.sbMean;g[d]=e.sbSdcm;B+=g[d]}}if(B>C){for(m=0;m<w;m++)h[m]=c[m],a[m]=k[m],g[m]=u[m];B=C}return{mean:a,sdcm:g}}function O(h,m,f,w,c){h=Math.max(w-h,m-w)/c/f;return 1<=h?1:.5<=h?.5:.25}function S(h){let m=0;for(let f=0;f<h.length;f++)m+=h[f];return m/=h.length}function z(h,m){let f=0;for(let w=0;w<h.length;w++){const c=h[w];f+=(c-m)*(c-m)}f/=h.length;return Math.sqrt(f)}function l(h,
m,f,w){var c=0,k=0;for(var u=m[h]+1;u<=m[h+1];u++){const B=w[u];c+=f[u]*B;k+=B}0>=k&&b.warn("Exception in Natural Breaks calculation");c/=k;k=0;for(u=m[h]+1;u<=m[h+1];u++)k+=w[u]*(f[u]-c)**2;return{sbMean:c,sbSdcm:k}}const b=t.getLogger("esri.rest.support.generateRendererUtils");K.createGenerateRendererClassBreaks=function(h){const {normalizationTotal:m}=h;return{classBreaks:v(h),normalizationTotal:m}};K.createGenerateRendererUniqueValues=function(h){h=p(h);const m=[],f=h.uniqueValues.length;for(let w=
0;w<f;w++){const c=h.uniqueValues[w];m.push({value:c,count:h.valueFrequency[w],label:c.toString()})}return{uniqueValues:m}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f){function w(u,B){const {attributeTable:a,bandCount:g}=u;return R.isNone(a)||1<g||B&&null==a.fields.find(r=>r.name.toLowerCase()===B.toLowerCase())?!1:!0}function c(u){const {bandCount:B,colormap:a}=u;return R.isSome(a)&&0<a.length&&1===B}function k(u){return b.isValidPixelBlock(u)&&0!==u.validPixelCount}F=function(u){function B(g){return u.call(this,g)||this}K._inheritsLoose(B,u);var a=B.prototype;a.bind=function(){const {rendererJSON:g}=this;if(!g)return{success:!1};
this.lookup={rendererJSON:{}};let r;switch(g.type){case "uniqueValue":r=this._updateUVRenderer(g);break;case "rasterColormap":r=this._updateColormapRenderer(g);break;case "rasterStretch":r=this._updateStretchRenderer(g);break;case "classBreaks":r=this._updateClassBreaksRenderer(g);break;case "rasterShadedRelief":r=this._updateShadedReliefRenderer(g);break;case "vectorField":r=this._updateVectorFieldRenderer();break;case "flowRenderer":r=this._updateFlowRenderer()}return r};a.symbolize=function(g){let r=
g&&g.pixelBlock;if(!k(r))return r;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(r,g.simpleStretchParams);try{3<r.pixels.length&&(r=b.extractBands(r,[0,1,2]));let C;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":C=this._symbolizeColormap(r);break;case "classBreaks":C=this._symbolizeClassBreaks(r);break;case "rasterStretch":C=this._symbolizeStretch(r,g.bandIds);break;case "rasterShadedRelief":const d=g.extent;C=this._symbolizeShadedRelief(r,
{isGCS:d.spatialReference.isGeographic,resolution:{x:(d.xmax-d.xmin)/r.width,y:(d.ymax-d.ymin)/r.height}})}return C}catch(C){return p.getLogger(this.declaredClass).error("symbolize",C.message),r}};a.simpleStretch=function(g,r){if(!k(g))return g;try{return 3<g.pixels.length&&(g=b.extractBands(g,[0,1,2])),h.stretch(g,{...r,isRenderer:!0})}catch(C){return p.getLogger(this.declaredClass).error("symbolize",C.message),g}};a.generateWebGLParameters=function(g){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:n,
offset:A}=this.lookup.colormapLut||{};return{colormap:n,colormapOffset:A,type:"lut"}}const {pixelBlock:r,isGCS:C,resolution:d,bandIds:e}=g;({rendererJSON:g}=this);return"rasterStretch"===g.type?this._generateStretchWebGLParams(r,g,e):"rasterShadedRelief"===g.type?this._generateShadedReliefWebGLParams(g,C,d??void 0):"vectorField"===g.type?this._generateVectorFieldWebGLParams(g):null};a._isLUTChanged=function(g){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const r=
this.rendererJSON.colorRamp;if(g)return JSON.stringify(r)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};a._symbolizeColormap=function(g){return this._isLUTChanged()&&!this.bind().success?g:b.colorize(g,this.lookup.colormapLut)};a._symbolizeClassBreaks=function(g){const {canUseIndexedLUT:r}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?g:r?b.colorize(g,this.lookup.colormapLut):b.remapColor(g,this.lookup.remapLut??[])};a._symbolizeStretch=function(g,r){const {rasterInfo:C}=this,{pixelType:d,bandCount:e}=C,n=this.rendererJSON;var A=["u8","u16","s8","s16"].includes(d);let D;var {dra:G}=n;({gamma:y}=this.lookup);if("histogramEqualization"===n.stretchType){A=G?null:this.lookup?.histogramLut;r=h.getStretchCutoff(n,{rasterInfo:C,pixelBlock:g,bandIds:r,returnHistogramLut:!A});var y=h.stretch(g,{...r,gamma:y,isRenderer:!0});
y=b.lookupPixels(y,{lut:G?r.histogramLut:A,offset:0})}else if(A){if(G)G=h.getStretchCutoff(n,{rasterInfo:C,pixelBlock:g,bandIds:r}),D=h.createStretchLUT({pixelType:d,...G,gamma:y,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return g;D=this.lookup?this.lookup.stretchLut:null}if(!D)return g;1<e&&r?.length===R.unwrap(g)?.pixels.length&&D?.lut.length===e&&(D={lut:r.map(E=>D.lut[E]),offset:D.offset});y=b.lookupPixels(g,D)}else G=h.getStretchCutoff(n,{rasterInfo:C,pixelBlock:g,
bandIds:r}),y=h.stretch(g,{...G,gamma:y,isRenderer:!0});if(n.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return g;y=b.colorize(y,this.lookup?.colormapLut)}return y};a._symbolizeShadedRelief=function(g,r){var C=this.rendererJSON;r=m.hillshade(g,{...C,...r});if(!C.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return r;C=this.lookup?this.lookup.hsvMap:null;if(!C)return r;const d=R.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};m.tintHillshade(r,g,C,d);return r};a._isVectorFieldData=
function(){const {bandCount:g,dataType:r}=this.rasterInfo;return 2===g&&("vector-magdir"===r||"vector-uv"===r)};a._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};a._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
a._updateUVRenderer=function(g){const {bandCount:r,attributeTable:C,pixelType:d}=this.rasterInfo,e=g.field1;if(!e)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const n=g.defaultSymbol;var A=1===r&&["u8","s8"].includes(d);if(!w(this.rasterInfo,e)&&!A)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const D=[];if(R.isSome(C)){const G=C.fields.find(y=>"value"===y.name.toLowerCase());
if(!G)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};C.features.forEach(y=>{const E=g.uniqueValueInfos?.find(J=>String(J.value)===String(y.attributes[e]))?.symbol?.color;E?D.push([y.attributes[G.name]].concat(E)):n&&D.push([y.attributes[G.name]].concat(n.color))})}else{if("value"!==e.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};g.uniqueValueInfos?.forEach(G=>
{const y=G?.symbol?.color;y?D.push([parseInt(""+G.value,10)].concat(y)):n&&D.push([parseInt(""+G.value,10)].concat(n?.color))})}if(0===D.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};A=b.createColormapLUT({colormap:D});this.lookup={rendererJSON:g,colormapLut:A};this.canRenderInWebGL=!0;return{success:!0}};a._updateColormapRenderer=function(g){if(!c(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var r=g.colormapInfos.map(C=>[C.value].concat(C.color)).sort((C,d)=>C[0]-d[0]);if(!r||0===r.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};r=b.createColormapLUT({colormap:r});this.lookup={rendererJSON:g,colormapLut:r};this.canRenderInWebGL=!0;return{success:!0}};a._updateShadedReliefRenderer=function(g){const {bandCount:r,dataType:C,pixelType:d}=this.rasterInfo;if("elevation"!==C&&("generic"!==C||1!==r||"s16"!==d&&"f32"!==d&&"f64"!==d))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(g.colorRamp){var e=f.convertColorRampToColormap(g.colorRamp,{interpolateAlpha:!0});e=b.createColormapLUT({colormap:e});const n=[],A=e.indexedColormap;for(let D=0;D<A.length;D+=4){const G=v.toHSV({r:A[D],g:A[D+1],b:A[D+2]});n.push([G.h/60,G.s/100,255*G.v/100])}this.lookup={rendererJSON:g,colormapLut:e,hsvMap:n}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}};a._analyzeClassBreaks=function(g){const {attributeTable:r,pixelType:C}=this.rasterInfo,d=R.isSome(r)?r.fields.find(A=>"value"===A.name.toLowerCase()):null,e=R.isSome(r)?r.fields.find(A=>A.name.toLowerCase()===g.field.toLowerCase()):null,n=null!=d&&null!==e;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(C)||n,tableValueField:d,tableBreakField:e}};a._updateClassBreaksRenderer=function(g){var {attributeTable:r}=this.rasterInfo;const {canUseIndexedLUT:C,tableValueField:d,
tableBreakField:e}=this._analyzeClassBreaks(g);var n=g.classBreakInfos;if(!n?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};n=n.sort((E,J)=>E.classMaxValue-J.classMaxValue);var A=n[n.length-1],D=g.minValue;if(!C){var G=[];for(var y=0;y<n.length;y++)G.push({value:n[y].classMinValue??D,mappedColor:n[y].symbol.color}),D=n[y].classMaxValue;G.push({value:A.classMaxValue,mappedColor:A.symbol.color});this.lookup={rendererJSON:g,remapLut:G};
this.canRenderInWebGL=!1;return{success:!0}}G=[];if(R.isSome(r)&&null!=d&&null!==e&&d!==e){A=d.name;const E=e.name,J=n[n.length-1],{classMaxValue:x}=J;D=g.minValue;for(y of r.features){r=y.attributes[A];const q=y.attributes[E],H=q===x?J:q<D?null:n.find(({classMaxValue:T})=>T>q);H&&G.push([r].concat(H.symbol.color))}}else{D=Math.floor(g.minValue);for(y=0;y<n.length;y++){for(r=n[y];D<r.classMaxValue;D++)G.push([D].concat(r.symbol.color));D=Math.ceil(r.classMaxValue)}A.classMaxValue===D&&G.push([A.classMaxValue].concat(A.symbol.color))}n=
b.createColormapLUT({colormap:G,fillUnspecified:!1});this.lookup={rendererJSON:g,colormapLut:n};this.canRenderInWebGL=!0;return{success:!0}};a._isHistogramRequired=function(g){return"percentClip"===g||"histogramEqualization"===g};a._isValidRasterStatistics=function(g){return R.isSome(g)&&0<g.length&&null!=g[0].min&&null!=g[0].max};a._updateStretchRenderer=function(g){let {stretchType:r,dra:C}=g;if(!("none"===r||g.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||C))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var d=R.unwrap(g.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(g.stretchType)||d?.length||C||(r="minMax");const {computeGamma:e,useGamma:n,colorRamp:A}=g;var {gamma:D}=g;n&&e&&!D?.length&&(D=g.statistics?.length?g.statistics:R.unwrap(this.rasterInfo.statistics),D=h.computeGammaValues(this.rasterInfo.pixelType,D));const G=this.rasterInfo.pixelType,y=!C&&["u8","u16",
"s8","s16"].includes(G);"histogramEqualization"===r?(d=d.map(E=>h.createHistogramEqualizationLUT(E)),this.lookup={rendererJSON:g,histogramLut:d}):y&&(d=h.getStretchCutoff(g,{rasterInfo:this.rasterInfo}),d=h.createStretchLUT({pixelType:G,...d,gamma:n?D:null,rounding:"floor"}),this.lookup={rendererJSON:g,stretchLut:d});A&&(d=f.convertColorRampToColormap(A,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=b.createColormapLUT({colormap:d}),this.lookup.rendererJSON=
g);this.lookup.gamma=n&&D?.length?D:null;this.canRenderInWebGL=!0;return{success:!0}};a._generateStretchWebGLParams=function(g,r,C){let d=null,e=null;var n=this.lookup&&this.lookup.colormapLut;r.colorRamp&&n&&(d=n.indexedColormap,e=n.offset);"histogramEqualization"===r.stretchType&&(r={...r,stretchType:"minMax"});({gamma:n}=this.lookup);const A=!!(r.useGamma&&n&&n.some(H=>1!==H)),{minCutOff:D,maxCutOff:G,outMin:y,outMax:E}=h.getStretchCutoff(r,{rasterInfo:this.rasterInfo,pixelBlock:g,bandIds:C});
var J=0;R.isSome(g)&&(J=g.getPlaneCount(),2===J&&(g=g.clone(),g.statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]));({bandCount:g}=this.rasterInfo);C=Math.min(3,C?.length||J||g,g);g=new Float32Array(C);J=d||A?1:255;let x;for(x=0;x<D.length;x++)g[x]=G[x]===D[x]?0:(E-y)/(G[x]-D[x])/J;const q=new Float32Array(C);if(A&&n)for(x=0;x<C;x++)q[x]=1<n[x]?2<n[x]?6.5+(n[x]-2)**2.5:6.5+100*(2-n[x])**4:1;return{bandCount:C,outMin:y/J,outMax:E/J,minCutOff:D,maxCutOff:G,factor:g,useGamma:A,gamma:A?n:[1,1,1],gammaCorrection:A?
q:[1,1,1],colormap:d,colormapOffset:e,stretchType:r.stretchType,type:"stretch"}};a._generateShadedReliefWebGLParams=function(g,r=!1,C={x:0,y:0}){let d=null,e=null;const n=this.lookup&&this.lookup.colormapLut;g.colorRamp&&n&&(d=n.indexedColormap,e=n.offset);r=m.calculateHillshadeParams({...g,isGCS:r,resolution:C});C=R.unwrap(this.rasterInfo.statistics)?.[0];return{...r,minValue:C?.min??0,maxValue:C?.max??8E3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:d,colormapOffset:e}};
a._generateVectorFieldWebGLParams=function(g){const {style:r,inputUnit:C,outputUnit:d,visualVariables:e,symbolTileSize:n,flowRepresentation:A}=g;let D;var G=this.rasterInfo.statistics?.[0].min??0,y=this.rasterInfo.statistics?.[0].max??50,E=e?.find(q=>"sizeInfo"===q.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:y,maxSize:.8*n,minDataValue:G,minSize:.2*n},J=E.minDataValue??G,x=E.maxDataValue??y;y=R.isSome(E.maxSize)&&R.isSome(E.minSize)?[E.minSize/n,E.maxSize/n]:[.2,.8];"wind_speed"===r&&(y[0]=
y[1]=(y[0]+y[1])/2);G=R.isSome(J)&&R.isSome(x)?[J,x]:null;if("classified_arrow"===r)if(R.isSome(J)&&R.isSome(x)&&R.isSome(E))for(D=[],J=(E.maxDataValue-E.minDataValue)/5,x=0;6>x;x++)D.push(E.minDataValue+J*x);else D=[0,1E-6,3.5,7,10.5,14];E="flow_to"===A===("ocean_current_kn"===r||"ocean_current_m"===r)?0:Math.PI;J=e?.find(q=>"rotationInfo"===q.type);return{breakValues:D,dataRange:G,inputUnit:C,outputUnit:d,symbolTileSize:n,symbolPercentRange:y,style:r||"single_arrow",rotation:E,rotationType:this.rasterInfo.storageInfo?.tileInfo&&
"vector-uv"===this.rasterInfo.dataType?"geographic":J?.rotationType||g.rotationType,type:"vectorField"}};return B}(F.JSONSupport);t.__decorate([Q.property({json:{write:!0}})],F.prototype,"rendererJSON",void 0);t.__decorate([Q.property({type:l,json:{write:!0}})],F.prototype,"rasterInfo",void 0);t.__decorate([Q.property({json:{write:!0}})],F.prototype,"lookup",void 0);t.__decorate([Q.property()],F.prototype,"canRenderInWebGL",void 0);return F=t.__decorate([z.subclass("esri.renderers.support.RasterSymbolizer")],
F)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(K,t,v,F,p){function R(b,h=256){h=Math.min(h,256);const {size:m,counts:f}=b;b=new Uint8Array(m);var w=f.reduce((a,g)=>a+g/h,0);let c=0;var k=0;let u=0,B=w;for(let a=0;a<m;a++)if(u+=f[a],!(a<m-1&&u+f[a+1]<B)){for(;c<h-1&&B<u;)c++,B+=w;for(;k<=a;k++)b[k]=c;k=a+1}for(w=k;w<m;w++)b[w]=h-
1;return b}function Q(b,h){b=Math.min(Math.max(b,-100),100);h=Math.min(Math.max(h??0,-100),100);let m=0,f=0;const w=new Uint8Array(256);for(m=0;256>m;m++)0<b&&100>b?f=(200*m-25500+510*h)/(2*(100-b))+128:0>=b&&-100<b?f=(200*m-25500+510*h)*(100+b)/2E4+128:100===b?(f=200*m-25500+256*(100-b)+510*h,f=0<f?255:0):-100===b&&(f=128),w[m]=255<f?255:0>f?0:f;return w}function O(b){if(t.isNone(b)||!b.pixels?.length)return null;const {pixels:h,mask:m,pixelType:f}=b,w=b.width*b.height,c=h.length;let k,u;let B;var a;
const g=[],r=[];for(B=0;B<c;B++){var C=new Uint32Array(256);var d=h[B];if("u8"===f)if(k=-.5,u=255.5,m)for(a=0;a<w;a++)m[a]&&C[d[a]]++;else for(a=0;a<w;a++)C[d[a]]++;else{a=!1;b.statistics||(b.updateStatistics(),a=!0);var e=b.statistics;k=e[B].minValue;u=e[B].maxValue;var n=(u-k)/256;if(0===n)for(!e||b.validPixelCount||a||b.updateStatistics(),n=(b.validPixelCount||b.width*b.height)/256,a=0;256>a;a++)C[a]=Math.round(n*(a+1))-Math.round(n*a);else{e=new Uint32Array(257);for(a=0;a<w;a++)m&&!m[a]||e[Math.floor((d[a]-
k)/n)]++;for(a=0;255>a;a++)C[a]=e[a];C[255]=e[255]+e[256]}}g.push({min:k,max:u,size:256,counts:C});for(a=e=d=n=0;256>a;a++)n+=C[a],d+=a*C[a];d/=n;for(a=0;256>a;a++)e+=C[a]*(a-d)**2;a=Math.sqrt(e/(n-1));n=(u-k)/256;C=(d+.5)*n+k;n*=a;r.push({min:k,max:u,avg:C,stddev:n})}return{statistics:r,histograms:g}}function S(b,h){if(null==h||0===h.length)return b;const m=Math.max.apply(null,h),{minCutOff:f,maxCutOff:w,outMin:c,outMax:k,histogramLut:u}=b;return f.length===h.length||f.length<=m?b:{minCutOff:h.map(B=>
f[B]),maxCutOff:h.map(B=>w[B]),histogramLut:u?h.map(B=>u[B]):null,outMin:c,outMax:k}}function z(b,h){const m=new Float32Array(b);for(let f=0;f<b;f++)m[f]=1<h[f]?2<h[f]?6.5+(h[f]-2)**2.5:6.5+100*(2-h[f])**4:1;return m}const l=[.299,.587,.114];K.computeGammaCorrection=z;K.computeGammaValues=function(b,h,m){const f=[];for(let B=0;B<h.length;B++){var w=0,c=0,k=0;"min"in h[B]?{min:w,max:c,avg:k}=h[B]:[w,c,k]=h[B];k=k??0;"u8"!==b&&(k=255*(k-w)/(c-w));m&&(k*=l[B]);w=f;c=w.push;if(0>=k||255<=k)k=1;else{var u=
0;150!==k&&(u=150>=k?45*Math.cos(.01047*k):17*Math.sin(.021*k));u=Math.log((k+u)/255);0===u?k=1:(k=Math.log(k/255)/u,k=isNaN(k)?1:Math.min(9.9,Math.max(.01,k)))}c.call(w,k)}return f};K.createContrastBrightnessLUT=Q;K.createHistogramEqualizationLUT=R;K.createStretchLUT=function(b){const {minCutOff:h,maxCutOff:m,gamma:f,pixelType:w,rounding:c}=b,k=b.outMin||0,u=b.outMax||255;if(!["u8","u16","s8","s16"].includes(w))return null;const B=h.length;let a,g,r=0;"s8"===w?r=-127:"s16"===w&&(r=-32767);let C=
256;["u16","s16"].includes(w)&&(C=65536);var d=[],e=[];const n=u-k;for(a=0;a<B;a++)e[a]=m[a]-h[a],d[a]=0===e[a]?0:n/e[a];let A;const D=[];let G,y;if(f&&f.length>=B)for(d=z(B,f),a=0;a<B;a++){y=[];for(g=0;g<C;g++)if(0===e[a])y[g]=k;else{var E=g+r;A=(E-h[a])/e[a];G=1;1<f[a]&&(G-=(1/n)**(A*d[a]));E<m[a]&&E>h[a]?(E=G*n*A**(1/f[a])+k,y[g]="floor"===c?Math.floor(E):"round"===c?Math.round(E):E):y[g]=E>=m[a]?u:k}D[a]=y}else for(a=0;a<B;a++){y=[];for(g=0;g<C;g++)E=g+r,E<=h[a]?y[g]=k:E>=m[a]?y[g]=u:(e=(E-h[a])*
d[a]+k,y[g]="floor"===c?Math.floor(e):"round"===c?Math.round(e):e);D[a]=y}if(null!=b.contrastOffset)for(b=Q(b.contrastOffset,b.brightnessOffset),a=0;a<B;a++)for(y=D[a],g=0;g<C;g++)y[g]=b[y[g]];return{lut:D,offset:r}};K.estimateStatisticsFromHistograms=function(b){const h=[];for(let c=0;c<b.length;c++){const {min:k,max:u,size:B,counts:a}=b[c];let g=0;var m=0;for(var f=0;f<B;f++)g+=a[f],m+=f*a[f];m/=g;f=0;for(var w=0;w<B;w++)f+=a[w]*(w-m)**2;w=(u-k)/B;h.push({min:k,max:u,avg:(m+.5)*w+k,stddev:Math.sqrt(f/
(g-1))*w})}return h};K.estimateStatisticsHistograms=O;K.getStretchCutoff=function(b,h){const {pixelBlock:m,bandIds:f,returnHistogramLut:w,rasterInfo:c}=h;var k=null;h=null;var u=b.stretchType;"number"===typeof u&&(u=p.stretchTypeFunctionEnum[u]);b.dra?"minMax"===u&&t.isSome(m)&&m.statistics?k=m.statistics.map(E=>[E.minValue,E.maxValue,0,0]):(h=O(m),k=t.isSome(h)?h.statistics:null,h=t.isSome(h)?h.histograms:null):(k=0<b.statistics?.length?b.statistics:t.unwrap(c.statistics),h=b.histograms||t.unwrap(c.histograms));
"percentClip"!==u&&"histogramEqualization"!==u||h?.length||(u="minMax");var B=k?.length||h?.length||c.bandCount;const a=[],g=[];let r;let C,d,e,n;k&&!Array.isArray(k[0])&&(k=k.map(E=>[E.min,E.max,E.avg,E.stddev]));const [A,D]=F.getPixelValueRange(c.pixelType);if(!k?.length){k=[];for(e=0;e<B;e++)k.push([A,D,1,1]);"standardDeviation"===u&&(u="minMax")}switch(u){case "none":for(e=0;e<B;e++)a[e]=A,g[e]=D;break;case "minMax":for(e=0;e<B;e++)a[e]=k[e][0],g[e]=k[e][1];break;case "standardDeviation":for(e=
0;e<B;e++)a[e]=k[e][2]-b.numberOfStandardDeviations*k[e][3],g[e]=k[e][2]+b.numberOfStandardDeviations*k[e][3],a[e]<k[e][0]&&(a[e]=k[e][0]),g[e]>k[e][1]&&(g[e]=k[e][1]);break;case "histogramEqualization":t.assertIsSome(h);for(e=0;e<B;e++)a[e]=h[e].min,g[e]=h[e].max;break;case "percentClip":t.assertIsSome(h);for(e=0;e<h.length;e++){k=h[e];C=new Uint32Array(k.size);var G=[...k.counts];20<=G.length&&(G[0]=G[1]=G[2]=G[G.length-1]=G[G.length-2]=0);r=0;B=(k.max-k.min)/k.size;d=-.5===k.min&&1===B?.5:0;for(n=
0;n<k.size;n++)r+=G[n],C[n]=r;G=(b.minPercent||0)*r/100;a[e]=k.min+d;for(n=0;n<k.size;n++)if(C[n]>G){a[e]=k.min+B*(n+d);break}G=(1-(b.maxPercent||0)/100)*r;g[e]=k.max+d;for(n=k.size-2;0<=n;n--)if(C[n]<G){g[e]=k.min+B*(n+2-d);break}g[e]<a[e]&&(k=a[e],a[e]=g[e],g[e]=k)}break;default:for(e=0;e<B;e++)a[e]=k[e][0],g[e]=k[e][1]}let y;"histogramEqualization"===u?(t.assertIsSome(h),u=h[0].size||256,b=0,w&&(y=h.map(E=>R(E)))):(u=b.max||255,b=b.min||0);return S({minCutOff:a,maxCutOff:g,outMax:u,outMin:b,histogramLut:y},
f)};K.stretch=function(b,h){if(t.isNone(b)||!b.pixels?.length)return b;const {mask:m,width:f,height:w,pixels:c}=b,{minCutOff:k,maxCutOff:u,gamma:B}=h;var a=h.outMin||0;const g=h.outMax||255,r=f*w,C=h.outputPixelType||"u8";b=b.pixels.map(()=>v.createEmptyBand(C,r));const d=b.length;let e;let n,A;var D=g-a,G=[];const y=[];for(e=0;e<d;e++)y[e]=u[e]-k[e],G[e]=0===y[e]?0:D/y[e];const E=C.startsWith("u")||C.startsWith("s"),J=!!h.isRenderer;if(B&&B.length>=d)for(G=z(d,B),h=0;h<r;h++){if(null==m||m[h])for(e=
0;e<d;e++)if(0===y[e])b[e][h]=a;else{var x=c[e][h];A=(x-k[e])/y[e];n=1;1<B[e]&&(n-=(1/D)**(A*G[e]));x<u[e]&&x>k[e]?(x=n*D*A**(1/B[e])+a,b[e][h]=J?Math.floor(x):E?Math.round(x):x):b[e][h]=x>=u[e]?g:a}}else for(h=0;h<r;h++)if(null==m||m[h])for(e=0;e<d;e++)x=c[e][h],x<u[e]&&x>k[e]?(D=(x-k[e])*G[e]+a,b[e][h]=J?Math.floor(D):E?Math.round(D):D):b[e][h]=x>=u[e]?g:a;a=new v({width:f,height:w,mask:m,pixels:b,pixelType:C});a.updateStatistics();return a};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,t,v,F){function p(R){let {altitude:Q,azimuth:O}=R;const {hillshadeType:S,pixelSizePower:z=1,pixelSizeFactor:l=1,scalingType:b,isGCS:h,resolution:m}=R;var f="multi-directional"===S?2*R.zFactor:R.zFactor;const {x:w,y:c}=m;R=f/(8*w);var k=f/(8*c);h&&.001<f&&(R/=111E3,k/=111E3);"adjusted"===b&&(h?(R=111E3*w,k=111E3*c,R=(f+R**z*l)/(8*R),k=(f+k**z*l)/(8*k)):(R=
(f+w**z*l)/(8*w),k=(f+c**z*l)/(8*c)));var u=(90-Q)*Math.PI/180;f=Math.cos(u);let B=(360-O+90)*Math.PI/180,a=Math.sin(u)*Math.cos(B);u=Math.sin(u)*Math.sin(B);const g=[315,270,225,360,180,0],r=[60,60,60,60,60,90];var C=new Float32Array([3,5,3,2,1,4]);const d=C.reduce((G,y)=>G+y);C=C.map(G=>G/d);const e="multi-directional"===S?g.length:1,n=new Float32Array(6),A=new Float32Array(6),D=new Float32Array(6);if("multi-directional"===S)for(let G=0;G<e;G++)Q=r[G],O=g[G],u=(90-Q)*Math.PI/180,f=Math.cos(u),B=
(360-O+90)*Math.PI/180,a=Math.sin(u)*Math.cos(B),u=Math.sin(u)*Math.sin(B),n[G]=f,A[G]=a,D[G]=u;else n.fill(f),A.fill(a),D.fill(u);return{resolution:m,factor:[R,k],sinZcosA:a,sinZsinA:u,cosZ:f,sinZcosAs:A,sinZsinAs:D,cosZs:n,weights:C,hillshadeType:["traditional","multi-directional"].indexOf(S)}}K.aspect=function(R,Q={}){if(!F.isValidPixelBlock(R))return R;const {width:O,height:S,mask:z}=R;var l=R.pixels[0];const b=new Uint8Array(O*S);t.isSome(z)&&b.set(z);const h=new Float32Array(O*S);var {resolution:m}=
Q;Q=m?1/m.x:1;m=m?1/m.y:1;let f;let w,c,k,u;const B=t.isSome(z);for(let C=1;C<S-1;C++){const d=C*O;for(let e=1;e<O-1;e++)if(z&&!z[d+e])h[d+e]=0;else{var a=0;if(B&&(a=z[d-O+e-1]+z[d-O+e]+z[d-O+e+1]+z[d+e-1]+z[d+e+1]+z[d+O+e-1]+z[d+O+e]+z[d+O+e+1],7>a)){h[d+e]=0;b[d+e]=0;continue}if(z&&7===a){a=z[d-O+e-1]?l[d-O+e-1]:l[d+e];var g=z[d-O+e]?l[d-O+e]:l[d+e];f=z[d-O+e+1]?l[d-O+e+1]:l[d+e];var r=z[d+e-1]?l[d+e-1]:l[d+e];w=z[d+e+1]?l[d+e+1]:l[d+e];c=z[d+O+e-1]?l[d+O+e-1]:l[d+e];k=z[d+O+e]?l[d+O+e]:l[d+e];
u=z[d+O+e+1]?l[d+O+e+1]:l[d+e]}else a=l[d-O+e-1],g=l[d-O+e],f=l[d-O+e+1],r=l[d+e-1],w=l[d+e+1],c=l[d+O+e-1],k=l[d+O+e],u=l[d+O+e+1];r=(f+w+w+u-(a+r+r+c))*Q;a=(c+k+k+u-(a+g+g+f))*m;g=-1;if(0!==r||0!==a)g=90-57.29578*Math.atan2(a,-r),0>g&&(g+=360),360===g?g=0:360<g&&(g%=360);h[d+e]=g}}for(l=0;l<S;l++)h[l*O]=h[l*O+1],h[(l+1)*O-1]=h[(l+1)*O-2];for(l=1;l<O-1;l++)h[l]=h[l+O],h[l+(S-1)*O]=h[l+(S-2)*O];return new v({width:O,height:S,pixels:[h],mask:z?b:null,pixelType:"f32",validPixelCount:R.validPixelCount,
statistics:[{minValue:0,maxValue:360}]})};K.calculateHillshadeParams=p;K.hillshade=function(R,Q){if(!F.isValidPixelBlock(R))return R;const {width:O,height:S,mask:z}=R,l=new Uint8Array(O*S);var b=1;if(t.isSome(z)){for(var h=0;h<z.length;h++)if(z[h]){b=z[h];break}l.set(z)}const {factor:m,sinZcosA:f,sinZsinA:w,cosZ:c,sinZcosAs:k,sinZsinAs:u,cosZs:B,weights:a}=p(Q),[g,r]=m;({hillshadeType:h}=Q);const C=R.pixels[0];Q=new Uint8Array(O*S);let d;const e=t.isSome(z);for(let x=1;x<S-1;x++){const q=x*O;for(let H=
1;H<O-1;H++)if(z&&!z[q+H])Q[q+H]=0;else{var n=8;if(e&&(n=(z[q-O+H-1]+z[q-O+H]+z[q-O+H+1]+z[q+H-1]+z[q+H+1]+z[q+O+H-1]+z[q+O+H]+z[q+O+H+1])/b,7>n)){Q[q+H]=0;l[q+H]=0;continue}if(z&&7===n){var A=z[q-O+H-1]?C[q-O+H-1]:C[q+H];var D=z[q-O+H]?C[q-O+H]:C[q+H];var G=z[q-O+H+1]?C[q-O+H+1]:C[q+H];n=z[q+H-1]?C[q+H-1]:C[q+H];d=z[q+H+1]?C[q+H+1]:C[q+H];var y=z[q+O+H-1]?C[q+O+H-1]:C[q+H];var E=z[q+O+H]?C[q+O+H]:C[q+H];var J=z[q+O+H+1]?C[q+O+H+1]:C[q+H]}else A=C[q-O+H-1],D=C[q-O+H],G=C[q-O+H+1],n=C[q+H-1],d=C[q+
H+1],y=C[q+O+H-1],E=C[q+O+H],J=C[q+O+H+1];n=(G+d+d+J-(A+n+n+y))*g;A=(y+E+E+J-(A+D+D+G))*r;D=Math.sqrt(1+n*n+A*A);G=0;if("traditional"===h)n=255*(c+w*A-f*n)/D,0>n&&(n=0),G=n;else for(y=u.length,E=0;E<y;E++)J=255*(B[E]+u[E]*A-k[E]*n)/D,0>J&&(J=0),G+=J*a[E];Q[q+H]=G&255}}for(b=0;b<S;b++)Q[b*O]=Q[b*O+1],Q[(b+1)*O-1]=Q[(b+1)*O-2];for(b=1;b<O-1;b++)Q[b]=Q[b+O],Q[b+(S-1)*O]=Q[b+(S-2)*O];return new v({width:O,height:S,pixels:[Q],mask:z?l:null,pixelType:"u8",validPixelCount:R.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};K.slope=function(R,Q){if(!F.isValidPixelBlock(R))return R;var O=Q.zFactor,S=Q.pixelSizePower??1,z=Q.pixelSizeFactor??1,l=Q.slopeType,b=Q.isGCS;const {width:h,height:m,mask:f}=R,w=R.pixels[0],c=new Uint8Array(h*m);let k=1;if(t.isSome(f)){for(var u=0;u<f.length;u++)if(f[u]){k=f[u];break}c.set(f)}u=new Float32Array(h*m);const {x:B,y:a}=Q.resolution;Q=O/(8*B);let g=O/(8*a);b&&1E-4>Math.abs(O-1)&&(Q/=111E3,g/=111E3);"adjusted"===l&&(Q=(O+B**S*z)/(8*B),g=(O+a**S*z)/(8*a));let r,C;let d,
e,n,A;O=t.isSome(f);for(S=1;S<m-1;S++)for(z=S*h,b=1;b<h-1;b++)if(f&&!f[z+b])u[z+b]=0;else{var D=0;if(O&&(D=(f[z-h+b-1]+f[z-h+b]+f[z-h+b+1]+f[z+b-1]+f[z+b+1]+f[z+h+b-1]+f[z+h+b]+f[z+h+b+1])/k,7>D)){u[z+b]=0;c[z+b]=0;continue}if(f&&7===D){D=f[z-h+b-1]?w[z-h+b-1]:w[z+b];r=f[z-h+b]?w[z-h+b]:w[z+b];C=f[z-h+b+1]?w[z-h+b+1]:w[z+b];var G=f[z+b-1]?w[z+b-1]:w[z+b];d=f[z+b+1]?w[z+b+1]:w[z+b];e=f[z+h+b-1]?w[z+h+b-1]:w[z+b];n=f[z+h+b]?w[z+h+b]:w[z+b];A=f[z+h+b+1]?w[z+h+b+1]:w[z+b]}else D=w[z-h+b-1],r=w[z-h+b],
C=w[z-h+b+1],G=w[z+b-1],d=w[z+b+1],e=w[z+h+b-1],n=w[z+h+b],A=w[z+h+b+1];G=(C+d+d+A-(D+G+G+e))*Q;D=(e+n+n+A-(D+r+r+C))*g;D=Math.sqrt(G*G+D*D);u[z+b]="percent-rise"===l?100*D:57.2957795*Math.atan(D)}for(l=0;l<m;l++)u[l*h]=u[l*h+1],u[(l+1)*h-1]=u[(l+1)*h-2];for(l=1;l<h-1;l++)u[l]=u[l+h],u[l+(m-1)*h]=u[l+(m-2)*h];R=new v({width:h,height:m,pixels:[u],mask:f?c:null,pixelType:"f32",validPixelCount:R.validPixelCount});R.updateStatistics();return R};K.tintHillshade=function(R,Q,O,S){if(F.isValidPixelBlock(R)&&
F.isValidPixelBlock(Q)){var {min:z,max:l}=S;S=R.pixels[0];var {pixels:b,mask:h}=Q;Q=b[0];var m=255.00001/(l-z),f=new Uint8ClampedArray(Q.length),w=new Uint8ClampedArray(Q.length),c=new Uint8ClampedArray(Q.length),k=O.length-1;for(let a=0;a<Q.length;a++){if(h&&0===h[a])continue;var u=Math.floor((Q[a]-z)*m);const [g,r]=O[0>u?0:u>k?k:u];var B=S[a];u=B*r;const C=u*(1-Math.abs(g%2-1));B-=u;switch(Math.floor(g)){case 0:f[a]=u+B;w[a]=C+B;c[a]=B;break;case 1:f[a]=C+B;w[a]=u+B;c[a]=B;break;case 2:f[a]=B;w[a]=
u+B;c[a]=C+B;break;case 3:f[a]=B;w[a]=C+B;c[a]=u+B;break;case 4:f[a]=C+B;w[a]=B;c[a]=u+B;break;case 5:case 6:f[a]=u+B,w[a]=B,c[a]=C+B}}R.pixels=[f,w,c];R.updateStatistics()}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageDistanceResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f,w){function c(q){const H=q?.time;if(H&&(null!=H.start||null!=H.end)){const T=[];null!=H.start&&T.push(H.start);null==H.end||T.includes(H.end)||T.push(H.end);q.time=T.join(",")}}function k(q,H,T){return u.apply(this,arguments)}function u(){u=t._asyncToGenerator(function*(q,H,T){q=Q.parseUrl(q);var Z=yield R.normalizeCentralMeridian(H.geometry?[H.geometry]:[]);H=H.toJSON();c(H);Z=Z&&Z[0];p.isSome(Z)&&(H.geometry=Z.toJSON());q=Q.encode({...q.query,f:"json",...H});
return Q.asValidOptions(q,T)});return u.apply(this,arguments)}function B(){B=t._asyncToGenerator(function*(q,H,T){var Z=H.toJSON();p.isSome(Z.angleName)&&(Z.angleName=Z.angleName.join(","));p.isSome(H.point)&&H.point.spatialReference?.imageCoordinateSystem&&(Z.point.spatialReference=J(H.point.spatialReference));p.isSome(H.spatialReference)&&H.spatialReference.imageCoordinateSystem&&(Z.spatialReference=x(H.spatialReference));q=Q.parseUrl(q);Z=Q.encode({...q.query,f:"json",...Z});T=Q.asValidOptions(Z,
T);({data:T}=yield F(`${q.path}/computeAngles`,T));T.spatialReference=T.spatialReference?null!=T.spatialReference.geodataXform?new w({wkid:0,imageCoordinateSystem:T.spatialReference}):w.fromJSON(T.spatialReference):null;"NaN"===T.north&&(T.north=null);"NaN"===T.up&&(T.up=null);return new O(T)});return B.apply(this,arguments)}function a(){a=t._asyncToGenerator(function*(q,H,T){var Z=H.toJSON();({geometries:H}=H);if(H)for(let V=0;V<H.length;V++)H[V].spatialReference?.imageCoordinateSystem&&(Z.geometries.geometries[V].spatialReference=
J(H[V].spatialReference));q=Q.parseUrl(q);Z=Q.encode({...q.query,f:"json",...Z});T=Q.asValidOptions(Z,T);({data:T}=yield F(`${q.path}/computePixelLocation`,T));return h.fromJSON(T)});return a.apply(this,arguments)}function g(){g=t._asyncToGenerator(function*(q,H,T){H=yield k(q,H,T);q=Q.parseUrl(q);({data:q}=yield F(`${q.path}/computeStatisticsHistograms`,H));({statistics:H}=q);H?.length&&H.forEach(Z=>{Z.avg=Z.mean;Z.stddev=Z.standardDeviation});return{statistics:H,histograms:q.histograms}});return g.apply(this,
arguments)}function r(){r=t._asyncToGenerator(function*(q,H,T){H=yield k(q,H,T);q=Q.parseUrl(q);({data:q}=yield F(`${q.path}/computeHistograms`,H));return{histograms:q.histograms}});return r.apply(this,arguments)}function C(){C=t._asyncToGenerator(function*(q,H,T){var Z=H.toJSON();c(Z);Z.outFields?.length&&(Z.outFields=Z.outFields.join(","));H=(yield R.normalizeCentralMeridian(H.geometry))?.[0];p.isSome(H)&&(Z.geometry=H.toJSON());q=Q.parseUrl(q);Z=Q.encode({...q.query,f:"json",...Z});T=Q.asValidOptions(Z,
T);({data:T}=yield F(`${q.path}/getSamples`,T));T=T?.samples?.map(V=>{const I="NaN"===V.value||""===V.value?null:V.value.split(" ").map(L=>Number(L));return{...V,pixelValue:I}});return f.fromJSON({samples:T})});return C.apply(this,arguments)}function d(){d=t._asyncToGenerator(function*(q,H,T){const Z=Q.parseUrl(q);return R.normalizeCentralMeridian(H.geometry?[H.geometry]:[]).then(V=>{var I=H.toJSON();V=V&&V[0];p.isSome(V)&&(I.geometry=JSON.stringify(V.toJSON()));I=Q.encode({...Z.query,f:"json",...I});
I=Q.asValidOptions(I,T);return F(Z.path+"/identify",I)}).then(V=>b.fromJSON(V.data))});return d.apply(this,arguments)}function e(){e=t._asyncToGenerator(function*(q,H,T){q=yield G(q,H,[H.fromGeometry,H.toGeometry],T);return l.fromJSON(q)});return e.apply(this,arguments)}function n(){n=t._asyncToGenerator(function*(q,H,T){q=yield G(q,H,[H.geometry],T);return S.fromJSON(q)});return n.apply(this,arguments)}function A(){A=t._asyncToGenerator(function*(q,H,T){q=yield G(q,H,[H.geometry],T);return m.fromJSON(q)});
return A.apply(this,arguments)}function D(){D=t._asyncToGenerator(function*(q,H,T){q=yield G(q,H,[H.fromGeometry,H.toGeometry],T);return z.fromJSON(q)});return D.apply(this,arguments)}function G(q,H,T,Z){return y.apply(this,arguments)}function y(){y=t._asyncToGenerator(function*(q,H,T,Z){q=Q.parseUrl(q);T=yield R.normalizeCentralMeridian(T);H=H.toJSON();p.isSome(T[0])&&(H.fromGeometry=JSON.stringify(E(T[0])));p.isSome(T[1])&&(H.toGeometry=JSON.stringify(E(T[1])));H=Q.encode({...q.query,f:"json",...H});
Z=Q.asValidOptions(H,Z);({data:Z}=yield F(q.path+"/measure",Z));return Z});return y.apply(this,arguments)}function E(q){const H=q.toJSON();q.spatialReference?.imageCoordinateSystem&&(H.spatialReference=J(q.spatialReference));return H}function J(q){const {imageCoordinateSystem:H}=q;if(H){const {id:T,referenceServiceName:Z}=H;return null!=T?Z?{icsid:T,icsns:Z}:{icsid:T}:{ics:H}}return q.toJSON()}function x(q,H){q=J(q);const {icsid:T,icsns:Z,wkid:V}=q;return null!=T?null==Z||H?.toLowerCase().includes("/"+
Z.toLowerCase()+"/")?`0:${T}`:JSON.stringify(q):V?V.toString():JSON.stringify(q)}K.computeAngles=function(q,H,T){return B.apply(this,arguments)};K.computeHistograms=function(q,H,T){return r.apply(this,arguments)};K.computePixelSpaceLocations=function(q,H,T){return a.apply(this,arguments)};K.computeStatisticsHistograms=function(q,H,T){return g.apply(this,arguments)};K.getImageSpatialReferenceJSON=J;K.getImageSpatialReferenceQueryParameter=x;K.getSamples=function(q,H,T){return C.apply(this,arguments)};
K.identify=function(q,H,T){return d.apply(this,arguments)};K.measureAreaAndPerimeter=function(q,H,T){return n.apply(this,arguments)};K.measureDistanceAndAngle=function(q,H,T){return D.apply(this,arguments)};K.measureHeight=function(q,H,T){return e.apply(this,arguments)};K.measurePointOrCentroid=function(q,H,T){return A.apply(this,arguments)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(K,t,v,F,p,R,Q,O,S){v=function(z){function l(b){b=z.call(this,b)||this;b.north=null;b.up=null;b.spatialReference=null;return b}K._inheritsLoose(l,z);return l}(F.JSONSupport);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"north",void 0);t.__decorate([p.property({type:Number,json:{write:!0}})],v.prototype,"up",void 0);t.__decorate([p.property({type:S,json:{write:!0}})],v.prototype,"spatialReference",void 0);return v=t.__decorate([O.subclass("esri.rest.support.ImageAngleResult")],
v)})},"esri/rest/support/ImageAreaResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(K,t,v,F,p,R,Q){F=function(O){function S(){var z=O.apply(this,arguments)||this;z.area=null;z.perimeter=null;return z}K._inheritsLoose(S,O);return S}(Q.BaseImageMeasureResult);t.__decorate([v.property({type:Q.ImageMeasureResultAreaValue,
json:{read:!0,write:!0}})],F.prototype,"area",void 0);t.__decorate([v.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],F.prototype,"perimeter",void 0);return F=t.__decorate([R.subclass("esri.rest.support.ImageAreaResult")],F)})},"esri/rest/support/BaseImageMeasureResult":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(K,t,v,F,p,R,Q,O,S){Q=function(z){function l(){var b=z.apply(this,arguments)||this;b.value=null;b.displayValue=null;b.uncertainty=null;return b}t._inheritsLoose(l,z);return l}(F.JSONSupport);v.__decorate([R.property({type:Number,json:{read:!0,write:!0}})],Q.prototype,"value",void 0);v.__decorate([R.property({type:String,json:{read:!0,write:!0}})],Q.prototype,"displayValue",void 0);v.__decorate([R.property({type:Number,json:{read:!0,write:!0}})],Q.prototype,"uncertainty",void 0);Q=v.__decorate([S.subclass("esri.rest.support.ImageMeasureResultValue")],
Q);K.ImageMeasureResultLengthValue=function(z){function l(){var b=z.apply(this,arguments)||this;b.unit=null;return b}t._inheritsLoose(l,z);return l}(Q);v.__decorate([R.property({type:String,json:{read:p.lengthUnitsJSONMap.read,write:p.lengthUnitsJSONMap.write}})],K.ImageMeasureResultLengthValue.prototype,"unit",void 0);K.ImageMeasureResultLengthValue=v.__decorate([S.subclass("esri.rest.support.ImageMeasureResultLengthValue")],K.ImageMeasureResultLengthValue);K.ImageMeasureResultAreaValue=function(z){function l(){var b=
z.apply(this,arguments)||this;b.unit=null;return b}t._inheritsLoose(l,z);return l}(Q);v.__decorate([R.property({type:String,json:{read:p.areaUnitsJSONMap.read,write:p.areaUnitsJSONMap.write}})],K.ImageMeasureResultAreaValue.prototype,"unit",void 0);K.ImageMeasureResultAreaValue=v.__decorate([S.subclass("esri.rest.support.ImageMeasureResultAreaValue")],K.ImageMeasureResultAreaValue);K.ImageMeasureResultAngleValue=function(z){function l(){var b=z.apply(this,arguments)||this;b.unit=null;return b}t._inheritsLoose(l,
z);return l}(Q);v.__decorate([R.property({type:String,json:{read:p.angleUnitsJSONMap.read,write:p.angleUnitsJSONMap.write}})],K.ImageMeasureResultAngleValue.prototype,"unit",void 0);K.ImageMeasureResultAngleValue=v.__decorate([S.subclass("esri.rest.support.ImageMeasureResultAngleValue")],K.ImageMeasureResultAngleValue);K.BaseImageMeasureResult=function(z){function l(){var b=z.apply(this,arguments)||this;b.name=null;b.sensorName=null;return b}t._inheritsLoose(l,z);return l}(F.JSONSupport);v.__decorate([R.property({type:String,
json:{read:!0,write:!0}})],K.BaseImageMeasureResult.prototype,"name",void 0);v.__decorate([R.property({type:String,json:{read:!0,write:!0}})],K.BaseImageMeasureResult.prototype,"sensorName",void 0);K.BaseImageMeasureResult=v.__decorate([S.subclass("esri.rest.support.BaseImageMeasureResult")],K.BaseImageMeasureResult);Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(K,t,v,F,p,R,Q){F=function(O){function S(){var z=O.apply(this,arguments)||this;z.distance=null;z.azimuthAngle=null;z.elevationAngle=null;return z}K._inheritsLoose(S,O);return S}(Q.BaseImageMeasureResult);t.__decorate([v.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],F.prototype,"distance",void 0);t.__decorate([v.property({type:Q.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],F.prototype,"azimuthAngle",void 0);t.__decorate([v.property({type:Q.ImageMeasureResultAngleValue,
json:{read:!0,write:!0}})],F.prototype,"elevationAngle",void 0);return F=t.__decorate([R.subclass("esri.rest.support.ImageDistanceResult")],F)})},"esri/rest/support/ImageHeightResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(K,t,v,F,p,R,Q){F=function(O){function S(){var z=
O.apply(this,arguments)||this;z.height=null;return z}K._inheritsLoose(S,O);return S}(Q.BaseImageMeasureResult);t.__decorate([v.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],F.prototype,"height",void 0);return F=t.__decorate([R.subclass("esri.rest.support.ImageHeightResult")],F)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(K,t,v,F,p,R,Q,O,S){v=function(z){function l(){var b=z.apply(this,arguments)||this;b.catalogItemVisibilities=null;b.catalogItems=null;b.location=null;b.name=null;b.objectId=null;b.processedValues=null;b.properties=null;b.value=null;return b}K._inheritsLoose(l,z);return l}(v.JSONSupport);t.__decorate([F.property({json:{write:!0}})],v.prototype,"catalogItemVisibilities",void 0);t.__decorate([F.property({type:S,json:{write:!0}})],v.prototype,"catalogItems",void 0);t.__decorate([F.property({type:O,
json:{write:!0}})],v.prototype,"location",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"name",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"objectId",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"processedValues",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"properties",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"value",void 0);return v=t.__decorate([Q.subclass("esri.rest.support.ImageIdentifyResult")],
v)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(K,t,v,F,p,R,Q){v=function(O){function S(){var z=O.apply(this,arguments)||this;z.geometries=null;return z}K._inheritsLoose(S,O);return S}(v.JSONSupport);t.__decorate([F.property({json:{write:!0}})],
v.prototype,"geometries",void 0);return v=t.__decorate([Q.subclass("esri.rest.support.ImagePixelLocationResult")],v)})},"esri/rest/support/ImagePointResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult ../../geometry/Point".split(" "),function(K,t,v,F,p,R,Q,O,S){v=function(z){function l(){var b=
z.apply(this,arguments)||this;b.point=null;return b}K._inheritsLoose(l,z);return l}(O.BaseImageMeasureResult);t.__decorate([F.property({type:S,json:{name:"point.value",read:!0,write:!0}})],v.prototype,"point",void 0);return v=t.__decorate([Q.subclass("esri.rest.support.ImagePointResult")],v)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(K,t,v,F,p,R,Q,O){v=function(S){function z(){var l=S.apply(this,arguments)||this;l.samples=null;return l}K._inheritsLoose(z,S);return z}(v.JSONSupport);t.__decorate([F.property({type:[O],json:{write:!0}})],v.prototype,"samples",void 0);return v=t.__decorate([Q.subclass("esri.rest.support.ImageSampleResult")],v)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O){v=function(S){function z(){var l=S.apply(this,arguments)||this;l.attributes=null;l.location=null;l.locationId=null;l.rasterId=null;l.resolution=null;l.pixelValue=null;return l}K._inheritsLoose(z,S);return z}(v.JSONSupport);t.__decorate([F.property({json:{write:!0}})],v.prototype,"attributes",void 0);t.__decorate([F.property({type:O,json:{write:!0}})],v.prototype,"location",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"locationId",void 0);t.__decorate([F.property({json:{write:!0}})],
v.prototype,"rasterId",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"resolution",void 0);t.__decorate([F.property({json:{write:!0}})],v.prototype,"pixelValue",void 0);return v=t.__decorate([Q.subclass("esri.rest.support.ImageSample")],v)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(K,t,v,F,p,R,Q,O){var S;const z={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};v=S=function(l){function b(h){h=l.call(this,h)||this;h.contentType=null;h.exifInfo=null;h.id=null;h.globalId=null;h.keywords=null;h.name=null;h.parentGlobalId=null;h.parentObjectId=null;h.size=
null;h.url=null;return h}K._inheritsLoose(b,l);b.prototype.clone=function(){return new S({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};K._createClass(b,[{key:"orientationInfo",get:function(){var {exifInfo:h}=this;h=O.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:h});return z[h]||null}}]);return b}(v.JSONSupport);
t.__decorate([F.property({type:String})],v.prototype,"contentType",void 0);t.__decorate([F.property()],v.prototype,"exifInfo",void 0);t.__decorate([F.property({readOnly:!0})],v.prototype,"orientationInfo",null);t.__decorate([F.property({type:p.Integer})],v.prototype,"id",void 0);t.__decorate([F.property({type:String})],v.prototype,"globalId",void 0);t.__decorate([F.property({type:String})],v.prototype,"keywords",void 0);t.__decorate([F.property({type:String})],v.prototype,"name",void 0);t.__decorate([F.property({json:{read:!1}})],
v.prototype,"parentGlobalId",void 0);t.__decorate([F.property({json:{read:!1}})],v.prototype,"parentObjectId",void 0);t.__decorate([F.property({type:p.Integer})],v.prototype,"size",void 0);t.__decorate([F.property({json:{read:!1}})],v.prototype,"url",void 0);return v=S=t.__decorate([Q.subclass("esri.layers.support.AttachmentInfo")],v)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(K){function t(v){const {tagName:F,tags:p}=v;return p&&F?(v=p.find(R=>R.name===F))&&v.value||
null:null}K.getExifValue=function(v){const {exifInfo:F,exifName:p,tagName:R}=v;return F&&p&&R?(v=F.find(Q=>Q.name===p))?t({tagName:R,tags:v.tags}):null:null};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),function(K,
t,v,F,p,R,Q,O,S){function z(b,h,m){return l.apply(this,arguments)}function l(){l=t._asyncToGenerator(function*(b,h,m){b=O.parseUrl(b);const {renderingRule:f,sourceJSON:w}=h||{};h=f?JSON.stringify(f.rasterFunctionDefinition||f):null;h=O.encode({...b.query,renderingRule:h,f:"json"});h=O.asValidOptions(h,m);b=b.path;m=w||(yield v(b,h).then(n=>n.data));var c=m.hasRasterAttributeTable?v(`${b}/rasterAttributeTable`,h):null,k=m.hasColormap?v(`${b}/colormap`,h):null,u=m.hasHistograms?v(`${b}/histograms`,
h):null,B=10.3<=m.currentVersion?v(`${b}/keyProperties`,h):null;b=m.hasMultidimensions?v(`${b}/multidimensionalInfo`,h):null;h=yield Promise.allSettled([c,k,u,B,b]);b=null;if(m.minValues&&m.minValues.length===m.bandCount)for(b=[],c=0;c<m.minValues.length;c++)b.push({min:m.minValues[c],max:m.maxValues[c],avg:m.meanValues[c],stddev:m.stdvValues[c]});k=F.fromJSON(m.extent);c=Math.ceil(k.width/m.pixelSizeX-.1);k=Math.ceil(k.height/m.pixelSizeY-.1);u=R.fromJSON(m.spatialReference||m.extent.spatialReference);
B="fulfilled"===h[0].status?h[0].value?S.fromJSON(h[0].value.data):null:null;const a="fulfilled"===h[1].status?h[1].value?.data.colormap:null,g="fulfilled"===h[2].status?h[2].value?.data.histograms:null,r="fulfilled"===h[3].status?h[3].value?.data??{}:{};h="fulfilled"===h[4].status?h[4].value?.data.multidimensionalInfo:null;h?.variables?.length&&h.variables.forEach(n=>{n.statistics?.length&&n.statistics.forEach(A=>{A.avg=A.mean;A.stddev=A.standardDeviation})});const {defaultVariable:C,serviceDataType:d}=
m;C&&C!==r.DefaultVariable&&(r.DefaultVariable=C);d&&d.includes("esriImageServiceDataTypeVector")&&!d.includes(r.DataType)&&(r.DataType=d.replace("esriImageServiceDataType",""));let e=m.noDataValue;m.noDataValues?.length&&m.noDataValues.some(n=>n!==e)&&(e=m.noDataValues);return new Q({width:c,height:k,bandCount:m.bandCount,extent:F.fromJSON(m.extent),spatialReference:u,pixelSize:new p({x:m.pixelSizeX,y:m.pixelSizeY,spatialReference:u}),pixelType:m.pixelType.toLowerCase(),statistics:b,attributeTable:B,
colormap:a,histograms:g,keyProperties:r,noDataValue:e,multidimensionalInfo:h})});return l.apply(this,arguments)}K.fetchServiceRasterInfo=function(b,h,m){return z(b,{sourceJSON:h},m)};K.generateRasterInfo=function(b,h,m){return z(b,{renderingRule:h},m)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),
function(K,t,v,F,p,R,Q,O){function S(){S=t._asyncToGenerator(function*(z,l,b){z=O.parseUrl(z);var h=O.encode({...z?.query,f:"json"});b=O.asValidOptions(h,b);z=`${z?.path}/${l}/info`;l=v(`${z}`,b);b=v(`${z}/keyProperties`,b);b=yield Promise.allSettled([l,b]);l="fulfilled"===b[0].status?b[0].value.data:null;b="fulfilled"===b[1].status?b[1].value.data:null;z=null;l.statistics?.length&&(z=l.statistics.map(B=>({min:B[0],max:B[1],avg:B[2],stddev:B[3]})));h=F.fromJSON(l.extent);const m=Math.ceil(h.width/
l.pixelSizeX-.1),f=Math.ceil(h.height/l.pixelSizeY-.1),w=h.spatialReference,c=new p({x:l.pixelSizeX,y:l.pixelSizeY,spatialReference:w}),k=l.histograms?.length?l.histograms:null,u=new Q({origin:l.origin,blockWidth:l.blockWidth,blockHeight:l.blockHeight,firstPyramidLevel:l.firstPyramidLevel,maximumPyramidLevel:l.maxPyramidLevel});return new R({width:m,height:f,bandCount:l.bandCount,extent:h,spatialReference:w,pixelSize:c,pixelType:l.pixelType.toLowerCase(),statistics:z,histograms:k,keyProperties:b,
storageInfo:u})});return S.apply(this,arguments)}K.getCatalogItemRasterInfo=function(z,l,b){return S.apply(this,arguments)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(K,t,v,F,p,R,Q,O,S,z){var l;v=l=function(b){function h(m){m=b.call(this,m)||this;m.angleNames=null;m.point=null;m.spatialReference=null;m.rasterId=null;return m}K._inheritsLoose(h,b);h.prototype.clone=function(){return new l(p.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return h}(F.JSONSupport);t.__decorate([R.property({type:[String],json:{name:"angleName",write:!0}})],v.prototype,"angleNames",void 0);t.__decorate([R.property({type:S,
json:{write:!0}})],v.prototype,"point",void 0);t.__decorate([R.property({type:z,json:{write:!0}})],v.prototype,"spatialReference",void 0);t.__decorate([R.property({type:Q.Integer,json:{write:!0}})],v.prototype,"rasterId",void 0);return v=l=t.__decorate([O.subclass("esri.rest.support.ImageAngleParameters")],v)})},"esri/rest/support/ImageAreaParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l){var b;Q=b=function(h){function m(){var w=h.apply(this,arguments)||this;w.type="area-perimeter";w.geometry=null;w.is3D=!1;w.linearUnit="meters";w.areaUnit="square-meters";return w}K._inheritsLoose(m,h);var f=m.prototype;f.writeGeometry=function(w,c,k){null!=w&&(c.geometryType=z.getJsonType(w),c[k]=w.toJSON())};f.clone=function(){return new b(F.clone({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,
pixelSize:this.pixelSize,raster:this.raster}))};K._createClass(m,[{key:"measureOperation",get:function(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}}]);return m}(l.BaseImageMeasureParameters);t.__decorate([R.property({types:v.geometryTypes,json:{name:"fromGeometry",read:!0,write:!0}})],Q.prototype,"geometry",void 0);t.__decorate([S.writer("geometry")],Q.prototype,"writeGeometry",null);t.__decorate([R.property({type:l.measureOperationJSONMap.apiValues,json:{write:l.measureOperationJSONMap.write}})],
Q.prototype,"measureOperation",null);t.__decorate([R.property({json:{read:!0}})],Q.prototype,"is3D",void 0);t.__decorate([R.property({type:String,json:{read:p.lengthUnitsJSONMap.read,write:p.lengthUnitsJSONMap.write}})],Q.prototype,"linearUnit",void 0);t.__decorate([R.property({type:String,json:{read:p.areaUnitsJSONMap.read,write:p.areaUnitsJSONMap.write}})],Q.prototype,"areaUnit",void 0);return Q=b=t.__decorate([O.subclass("esri.rest.support.ImageAreaParameters")],Q)})},"esri/rest/support/BaseImageMeasureParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h){F=new p.JSONMap({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",
esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});K.BaseImageMeasureParameters=function(m){function f(){var w=m.apply(this,arguments)||this;w.type=null;w.measureOperation=null;w.mosaicRule=null;w.renderingRule=null;w.pixelSize=null;w.raster=void 0;return w}t._inheritsLoose(f,m);return f}(R.JSONSupport);v.__decorate([Q.property()],K.BaseImageMeasureParameters.prototype,"type",void 0);v.__decorate([Q.property({type:F.apiValues,json:{read:F.read,write:F.write}})],K.BaseImageMeasureParameters.prototype,
"measureOperation",void 0);v.__decorate([Q.property({type:l,json:{write:!0}})],K.BaseImageMeasureParameters.prototype,"mosaicRule",void 0);v.__decorate([Q.property({type:b,json:{write:!0}})],K.BaseImageMeasureParameters.prototype,"renderingRule",void 0);v.__decorate([Q.property({type:h,json:{write:!0}})],K.BaseImageMeasureParameters.prototype,"pixelSize",void 0);v.__decorate([Q.property({json:{write:!0}})],K.BaseImageMeasureParameters.prototype,"raster",void 0);K.BaseImageMeasureParameters=v.__decorate([z.subclass("esri.rest.support.BaseImageMeasureParameters")],
K.BaseImageMeasureParameters);K.measureOperationJSONMap=F;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageDistanceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b){var h;v=h=function(m){function f(){var c=m.apply(this,arguments)||this;c.type="distance-angle";c.fromGeometry=null;c.toGeometry=null;c.is3D=!1;c.linearUnit="meters";c.angularUnit="degrees";return c}K._inheritsLoose(f,m);var w=f.prototype;w.writeFromGeometry=function(c,k,u){null!=c&&(k.geometryType=z.getJsonType(c),k[u]=c.toJSON())};w.clone=function(){return new h(F.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,
angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};K._createClass(f,[{key:"measureOperation",get:function(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}}]);return f}(l.BaseImageMeasureParameters);t.__decorate([R.property({type:b,json:{read:!0,write:!0}})],v.prototype,"fromGeometry",void 0);t.__decorate([S.writer("fromGeometry")],v.prototype,"writeFromGeometry",null);t.__decorate([R.property({type:b,
json:{read:!0,write:!0}})],v.prototype,"toGeometry",void 0);t.__decorate([R.property({type:l.measureOperationJSONMap.apiValues,json:{write:l.measureOperationJSONMap.write}})],v.prototype,"measureOperation",null);t.__decorate([R.property({json:{read:!0}})],v.prototype,"is3D",void 0);t.__decorate([R.property({type:String,json:{read:p.lengthUnitsJSONMap.read,write:p.lengthUnitsJSONMap.write}})],v.prototype,"linearUnit",void 0);t.__decorate([R.property({type:String,json:{read:p.angleUnitsJSONMap.read,
write:p.angleUnitsJSONMap.write}})],v.prototype,"angularUnit",void 0);return v=h=t.__decorate([O.subclass("esri.rest.support.ImageDistanceParameters")],v)})},"esri/rest/support/ImageHeightParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b){var h;v=h=function(m){function f(){var c=m.apply(this,arguments)||this;c.type="height";c.fromGeometry=null;c.toGeometry=null;c.operationType="base-and-top";c.linearUnit="meters";return c}K._inheritsLoose(f,m);var w=f.prototype;w.writeFromGeometry=function(c,k,u){null!=c&&(k.geometryType=z.getJsonType(c),k[u]=c.toJSON())};w.clone=function(){return new h(F.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};K._createClass(f,[{key:"measureOperation",get:function(){return this.operationType}}]);return f}(l.BaseImageMeasureParameters);t.__decorate([R.property({type:b,json:{read:!0}})],v.prototype,"fromGeometry",void 0);t.__decorate([S.writer("fromGeometry")],v.prototype,"writeFromGeometry",null);t.__decorate([R.property({type:b,json:{read:!0,write:!0}})],v.prototype,"toGeometry",void 0);t.__decorate([R.property({type:l.measureOperationJSONMap.apiValues,
json:{write:l.measureOperationJSONMap.write}})],v.prototype,"measureOperation",null);t.__decorate([R.property({json:{read:!0}})],v.prototype,"operationType",void 0);t.__decorate([R.property({type:String,json:{read:p.lengthUnitsJSONMap.read,write:p.lengthUnitsJSONMap.write}})],v.prototype,"linearUnit",void 0);return v=h=t.__decorate([O.subclass("esri.rest.support.ImageHeightParameters")],v)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m){var f;p=f=function(w){function c(){var u=w.apply(this,arguments)||this;u.geometry=null;u.mosaicRule=null;u.renderingRule=null;u.pixelSize=null;u.raster=void 0;u.timeExtent=null;return u}K._inheritsLoose(c,w);var k=c.prototype;k.writeGeometry=function(u,B,a){null!=u&&(B.geometryType=l.getJsonType(u),B[a]=u.toJSON())};k.clone=function(){return new f(R.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return c}(p.JSONSupport);t.__decorate([Q.property({types:v.geometryTypes,json:{read:l.fromJSON}})],p.prototype,"geometry",void 0);t.__decorate([z.writer("geometry")],p.prototype,"writeGeometry",null);t.__decorate([Q.property({type:b,json:{write:!0}})],p.prototype,"mosaicRule",void 0);t.__decorate([Q.property({type:h,json:{write:!0}})],p.prototype,"renderingRule",void 0);t.__decorate([Q.property({type:m,json:{write:!0}})],p.prototype,"pixelSize",void 0);
t.__decorate([Q.property({json:{write:!0}})],p.prototype,"raster",void 0);t.__decorate([Q.property({type:F,json:{read:{source:"time"},write:{target:"time"}}})],p.prototype,"timeExtent",void 0);return p=f=t.__decorate([S.subclass("esri.rest.support.ImageHistogramParameters")],p)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m){var f;F=f=function(w){function c(){var u=w.apply(this,arguments)||this;u.geometry=null;u.renderingRules=null;u.pixelSize=null;u.returnGeometry=!0;u.returnCatalogItems=!0;u.returnPixelValues=!0;u.maxItemCount=null;u.timeExtent=null;u.raster=void 0;u.viewId=void 0;u.processAsMultidimensional=!1;return u}K._inheritsLoose(c,w);var k=c.prototype;k.writeGeometry=function(u,B,a){null!=u&&(B.geometryType=b.getJsonType(u),B[a]=JSON.stringify(u.toJSON()))};k.writeMosaicRule=
function(u,B,a){null!=u&&(B[a]=JSON.stringify(u.toJSON()))};k.writeRenderingRule=function(u,B,a){null!=u&&(B[a]=JSON.stringify(u.toJSON()));u.rasterFunctionDefinition&&(B[a]=JSON.stringify(u.rasterFunctionDefinition))};k.writeRenderingRules=function(u,B,a){null!=u&&(B[a]=JSON.stringify(u.map(g=>g.rasterFunctionDefinition||g.toJSON())))};k.writePixelSize=function(u,B,a){null!=u&&(B[a]=JSON.stringify(u))};k.writeTimeExtent=function(u,B,a){if(null!=u){const g=R.isSome(u.start)?u.start.getTime():null;
u=R.isSome(u.end)?u.end.getTime():null;B[a]=null!=g?null!=u?`${g},${u}`:`${g}`:null}};k.clone=function(){return new f(p.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};
K._createClass(c,[{key:"mosaicRule",set:function(u){u&&u.mosaicMethod&&(u=h.fromJSON({...u.toJSON(),mosaicMethod:u.mosaicMethod,mosaicOperation:u.mosaicOperation}));this._set("mosaicRule",u)}},{key:"renderingRule",set:function(u){u&&u.rasterFunction&&(u=m.fromJSON({...u.toJSON(),rasterFunction:u.rasterFunction,rasterFunctionArguments:u.rasterFunctionArguments}));this._set("renderingRule",u)}}]);return c}(F.JSONSupport);t.__decorate([Q.property({json:{write:!0}})],F.prototype,"geometry",void 0);t.__decorate([z.writer("geometry")],
F.prototype,"writeGeometry",null);t.__decorate([Q.property({type:h,json:{write:!0}})],F.prototype,"mosaicRule",null);t.__decorate([z.writer("mosaicRule")],F.prototype,"writeMosaicRule",null);t.__decorate([Q.property({type:m,json:{write:!0}})],F.prototype,"renderingRule",null);t.__decorate([z.writer("renderingRule")],F.prototype,"writeRenderingRule",null);t.__decorate([Q.property({type:[m],json:{write:!0}})],F.prototype,"renderingRules",void 0);t.__decorate([z.writer("renderingRules")],F.prototype,
"writeRenderingRules",null);t.__decorate([Q.property({type:l,json:{write:!0}})],F.prototype,"pixelSize",void 0);t.__decorate([z.writer("pixelSize")],F.prototype,"writePixelSize",null);t.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnGeometry",void 0);t.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnCatalogItems",void 0);t.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnPixelValues",void 0);t.__decorate([Q.property({type:Number,
json:{write:!0}})],F.prototype,"maxItemCount",void 0);t.__decorate([Q.property({type:v,json:{write:{target:"time"}}})],F.prototype,"timeExtent",void 0);t.__decorate([z.writer("timeExtent")],F.prototype,"writeTimeExtent",null);t.__decorate([Q.property({json:{write:!0}})],F.prototype,"raster",void 0);t.__decorate([Q.property({json:{write:!0}})],F.prototype,"viewId",void 0);t.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"processAsMultidimensional",void 0);return F=f=t.__decorate([S.subclass("esri.rest.support.ImageIdentifyParameters")],
F)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),function(K,t,v,F,p,R,Q,O,S,z){var l;v=l=function(b){function h(){var f=b.apply(this,arguments)||
this;f.geometries=null;f.rasterId=null;return f}K._inheritsLoose(h,b);var m=h.prototype;m.writeGeometry=function(f,w,c){w.geometries={geometryType:"esriGeometryPoint",geometries:f.map(k=>k.toJSON())}};m.clone=function(){return new l({geometries:this.geometries?.map(f=>f.clone())??[],rasterId:this.rasterId})};return h}(F.JSONSupport);t.__decorate([p.property({type:[z],json:{write:!0}})],v.prototype,"geometries",void 0);t.__decorate([S.writer("geometries")],v.prototype,"writeGeometry",null);t.__decorate([p.property({type:R.Integer,
json:{write:!0}})],v.prototype,"rasterId",void 0);return v=l=t.__decorate([O.subclass("esri.rest.support.ImagePixelLocationParameters")],v)})},"esri/rest/support/ImagePointParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(K,t,v,F,p,R,Q,O,S,z){var l;R=l=function(b){function h(){var f=b.apply(this,arguments)||this;f.type="point";f.geometry=null;f.is3D=!1;return f}K._inheritsLoose(h,b);var m=h.prototype;m.writeGeometry=function(f,w,c){null!=f&&(w.geometryType=S.getJsonType(f),w[c]=f.toJSON())};m.clone=function(){return new l(F.clone({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster}))};K._createClass(h,[{key:"measureOperation",
get:function(){const {is3D:f,geometry:w}=this;return"point"===w.type?f?"point-3D":"point":f?"centroid-3D":"centroid"}}]);return h}(z.BaseImageMeasureParameters);t.__decorate([p.property({types:v.geometryTypes,json:{name:"fromGeometry",read:S.fromJSON}})],R.prototype,"geometry",void 0);t.__decorate([O.writer("geometry")],R.prototype,"writeGeometry",null);t.__decorate([p.property({type:z.measureOperationJSONMap.apiValues,json:{read:z.measureOperationJSONMap.read,write:z.measureOperationJSONMap.write}})],
R.prototype,"measureOperation",null);t.__decorate([p.property({json:{read:!0}})],R.prototype,"is3D",void 0);return R=l=t.__decorate([Q.subclass("esri.rest.support.ImagePointParameters")],R)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f){var w;p=w=function(c){function k(){var B=c.apply(this,arguments)||this;B.geometry=null;B.interpolation="nearest";B.mosaicRule=null;B.outFields=null;B.pixelSize=null;B.returnFirstValueOnly=!0;B.sampleDistance=null;B.sampleCount=null;B.sliceId=null;B.timeExtent=null;return B}K._inheritsLoose(k,c);var u=k.prototype;u.writeGeometry=function(B,a,g){null!=B&&(a.geometryType=l.getJsonType(B),a[g]=B.toJSON())};u.clone=function(){return new w(R.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};K._createClass(k,[{key:"locations",set:function(B){if(B?.length){const a=new m({spatialReference:B[0].spatialReference});a.points=B.map(g=>[g.x,g.y]);this._set("locations",B);this.geometry=
a}}}]);return k}(p.JSONSupport);t.__decorate([Q.property({types:v.geometryTypes,json:{read:l.fromJSON}})],p.prototype,"geometry",void 0);t.__decorate([z.writer("geometry")],p.prototype,"writeGeometry",null);t.__decorate([Q.property()],p.prototype,"locations",null);t.__decorate([Q.property({type:String,json:{type:h.interpolationKebab.jsonValues,read:h.interpolationKebab.read,write:h.interpolationKebab.write}})],p.prototype,"interpolation",void 0);t.__decorate([Q.property({type:b,json:{write:!0}})],
p.prototype,"mosaicRule",void 0);t.__decorate([Q.property({type:[String],json:{write:!0}})],p.prototype,"outFields",void 0);t.__decorate([Q.property({type:f,json:{write:!0}})],p.prototype,"pixelSize",void 0);t.__decorate([Q.property({type:String,json:{write:!0}})],p.prototype,"raster",void 0);t.__decorate([Q.property({type:Boolean,json:{write:!0}})],p.prototype,"returnFirstValueOnly",void 0);t.__decorate([Q.property({type:Number,json:{write:!0}})],p.prototype,"sampleDistance",void 0);t.__decorate([Q.property({type:Number,
json:{write:!0}})],p.prototype,"sampleCount",void 0);t.__decorate([Q.property({type:Number,json:{write:!0}})],p.prototype,"sliceId",void 0);t.__decorate([Q.property({type:F,json:{read:{source:"time"},write:{target:"time"}}})],p.prototype,"timeExtent",void 0);return p=w=t.__decorate([S.subclass("esri.rest.support.ImageSampleParameters")],p)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l){function b(){b=t._asyncToGenerator(function*(d,e,n,A){const D=performance.now();var G=h(e,n);const y=performance.now();n=f(e,G,n.width,n.height);e=performance.now();G=c(n,!0);n=performance.now();d="Streamlines"===d?k(G,10):u(G);G=performance.now();F("esri-2d-profiler")&&(C.info("I.1","_createFlowFieldFromData (ms)",Math.round(y-D)),C.info("I.2","_getStreamlines (ms)",Math.round(e-y)),C.info("I.3","createAnimatedLinesData (ms)",Math.round(n-e)),C.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(G-n)),C.info("I.5","createFlowMesh (ms)",Math.round(G-D)),C.info("I.6","Mesh size (bytes)",d.vertexData.buffer.byteLength+d.indexData.buffer.byteLength));yield Promise.resolve();O.throwIfAborted(A);return d});return b.apply(this,arguments)}function h(d,e){const n=w(e.data,e.width,e.height,d.smoothing);return d.interpolate?(A,D)=>{const G=Math.floor(A),y=Math.floor(D);if(0>G||G>=e.width||0>y||y>=e.height)return[0,0];A-=G;D-=y;const E=G<e.width-1?G+1:G,J=y<e.height-1?y+1:y;return[(n[2*(y*
e.width+G)]*(1-D)+n[2*(J*e.width+G)]*D)*(1-A)+(n[2*(y*e.width+E)]*(1-D)+n[2*(J*e.width+E)]*D)*A,(n[2*(y*e.width+G)+1]*(1-D)+n[2*(J*e.width+G)+1]*D)*(1-A)+(n[2*(y*e.width+E)+1]*(1-D)+n[2*(J*e.width+E)+1]*D)*A]}:(A,D)=>{A=Math.round(A);D=Math.round(D);return 0>A||A>=e.width||0>D||D>=e.height?[0,0]:[n[2*(D*e.width+A)],n[2*(D*e.width+A)+1]]}}function m(d,e,n,A,D,G,y,E,J){const x=[];let q=0,[H,T]=e(n,A);H*=d.velocityScale;T*=d.velocityScale;x.push({x:n,y:A,t:q,speed:Math.sqrt(H*H+T*T)});for(let I=0;I<
d.verticesPerLine;I++){let [L,U]=e(n,A);L*=d.velocityScale;U*=d.velocityScale;const ba=Math.sqrt(L*L+U*U);if(ba<d.minSpeedThreshold)break;const ea=L/ba,Y=U/ba;n+=ea*d.segmentLength;A+=Y*d.segmentLength;q+=d.segmentLength/ba;if(Math.acos(ea*Z+Y*V)>d.maxTurnAngle)break;if(d.collisions){var Z=Math.round(n*J);var V=Math.round(A*J);if(0>Z||Z>y-1||0>V||V>E-1)break;const X=G[V*y+Z];if(-1!==X&&X!==D)break;G[V*y+Z]=D}x.push({x:n,y:A,t:q,speed:ba});Z=ea;V=Y}return x}function f(d,e,n,A){const D=[],G=new S,y=
1/Math.max(d.lineCollisionWidth,1),E=Math.round(n*y),J=Math.round(A*y),x=new Int32Array(E*J);for(var q=0;q<x.length;q++)x[q]=-1;q=[];for(let H=0;H<A;H+=d.lineSpacing)for(let T=0;T<n;T+=d.lineSpacing)q.push({x:T,y:H,sort:G.getFloat()});q.sort((H,T)=>H.sort-T.sort);for(const {x:H,y:T}of q)G.getFloat()<d.density&&(n=m(d,e,H,T,D.length,x,E,J,y),2>n.length||D.push(n));return D}function w(d,e,n,A){if(0===A)return d;const D=Math.round(3*A),G=Array(2*D+1);var y=0;for(var E=-D;E<=D;E++){var J=Math.exp(-E*
E/(A*A));G[E+D]=J;y+=J}for(A=-D;A<=D;A++)G[A+D]/=y;y=new Float32Array(d.length);for(A=0;A<n;A++)for(E=0;E<e;E++){var x=J=0;for(var q=-D;q<=D;q++)if(!(0>E+q||E+q>=e)){var H=G[q+D];J+=H*d[2*(A*e+(E+q))];x+=H*d[2*(A*e+(E+q))+1]}y[2*(A*e+E)]=J;y[2*(A*e+E)+1]=x}d=new Float32Array(d.length);for(A=0;A<e;A++)for(E=0;E<n;E++){x=J=0;for(q=-D;q<=D;q++)0>E+q||E+q>=n||(H=G[q+D],J+=H*y[2*((E+q)*e+A)],x+=H*y[2*((E+q)*e+A)+1]);d[2*(E*e+A)]=J;d[2*(E*e+A)+1]=x}return d}function c(d,e){const n=new S;var A=d.reduce((E,
J)=>E+J.length,0);A=new Float32Array(4*A);const D=Array(d.length);let G=0,y=0;for(const E of d){d=G;for(const J of E)A[4*G]=J.x,A[4*G+1]=J.y,A[4*G+2]=J.t,A[4*G+3]=J.speed,G++;D[y++]={startVertex:d,numberOfVertices:E.length,totalTime:E[E.length-1].t,timeSeed:e?n.getFloat():0}}return{lineVertices:A,lineDescriptors:D}}function k(d,e){function n(Z,V,I,L,U,ba,ea,Y){const X=9*J;let N=0;E[X+N++]=Z;E[X+N++]=V;E[X+N++]=1;E[X+N++]=I;E[X+N++]=ba;E[X+N++]=ea;E[X+N++]=L/2;E[X+N++]=U/2;E[X+N++]=Y;J++;E[X+N++]=
Z;E[X+N++]=V;E[X+N++]=-1;E[X+N++]=I;E[X+N++]=ba;E[X+N++]=ea;E[X+N++]=-L/2;E[X+N++]=-U/2;E[X+N++]=Y;J++}const {lineVertices:A,lineDescriptors:D}=d;var G=d=0;for(var y of D)d+=2*y.numberOfVertices,G+=6*(y.numberOfVertices-1);const E=new Float32Array(9*d);y=new Uint32Array(G);let J=0;d=0;for(const Z of D){const {totalTime:V,timeSeed:I}=Z;let L=G=null,U=null;var x=null,q=null,H=null;for(let ba=0;ba<Z.numberOfVertices;ba++){x=A[4*(Z.startVertex+ba)];const ea=A[4*(Z.startVertex+ba)+1],Y=A[4*(Z.startVertex+
ba)+2],X=A[4*(Z.startVertex+ba)+3];let N=null,W=null;var T=null;let ca=null;0<ba&&(N=x-G,W=ea-L,T=Math.sqrt(N*N+W*W),N/=T,W/=T,1<ba?(q=N+q,H=W+H,T=Math.sqrt(q*q+H*H),q/=T,H/=T,T=Math.min(1/(q*N+H*W),e),q*=T,H*=T,T=-H,ca=q):(T=-W,ca=N),null!==T&&null!==ca&&(n(G,L,U,T,ca,V,I,X),y[d++]=J-2,y[d++]=J,y[d++]=J-1,y[d++]=J,y[d++]=J+1,y[d++]=J-1));G=x;L=ea;U=Y;q=N;H=W;x=X}n(G,L,U,-H,q,V,I,x)}return{vertexData:E,indexData:y}}function u(d){function e(fa,ja){var ia=Y+N,ra=X+W,ta=Math.sqrt(ia*ia+ra*ra);ia/=ta;
ra/=ta;var qa=Y*ia+X*ra,oa=N+ca,ma=W+da;ta=Math.sqrt(oa*oa+ma*ma);oa/=ta;ma/=ta;var xa=N*oa+W*ma;ta=T;var ua=Z,Ba=V,za=I;ra=-(ra/qa);ia/=qa;qa=L;var Fa=U,Ca=ba,Ia=ea;ma=-(ma/xa);oa/=xa;xa=16*q;let Aa=0;for(const Ma of[1,2])for(const La of[1,2,3,4])J[xa+Aa++]=ta,J[xa+Aa++]=ua,J[xa+Aa++]=Ba,J[xa+Aa++]=za,J[xa+Aa++]=qa,J[xa+Aa++]=Fa,J[xa+Aa++]=Ca,J[xa+Aa++]=Ia,J[xa+Aa++]=Ma,J[xa+Aa++]=La,J[xa+Aa++]=fa,J[xa+Aa++]=ja,J[xa+Aa++]=ra/2,J[xa+Aa++]=ia/2,J[xa+Aa++]=ma/2,J[xa+Aa++]=oa/2,q++;x[H++]=q-8;x[H++]=
q-7;x[H++]=q-6;x[H++]=q-7;x[H++]=q-5;x[H++]=q-6;x[H++]=q-4;x[H++]=q-3;x[H++]=q-2;x[H++]=q-3;x[H++]=q-1;x[H++]=q-2}function n(fa,ja,ia,ra,ta,qa){Y=N;X=W;N=ca;W=da;null==Y&&null==X&&(Y=N,X=W);if(null!=L&&null!=U){ca=fa-L;da=ja-U;const oa=Math.sqrt(ca*ca+da*da);ca/=oa;da/=oa}null!=Y&&null!=X&&e(ta,qa);T=L;Z=U;V=ba;I=ea;L=fa;U=ja;ba=ia;ea=ra}function A(fa,ja){Y=N;X=W;N=ca;W=da;null==Y&&null==X&&(Y=N,X=W);null!=Y&&null!=X&&e(fa,ja)}const {lineVertices:D,lineDescriptors:G}=d;let y=d=0;for(var E of G){const fa=
E.numberOfVertices-1;d+=8*fa;y+=12*fa}const J=new Float32Array(16*d),x=new Uint32Array(y);let q=0,H=0,T,Z,V,I,L,U,ba,ea,Y,X,N,W,ca,da;for(const fa of G){da=ca=W=N=X=Y=ea=ba=U=L=I=V=Z=T=null;const {totalTime:ja,timeSeed:ia}=fa;for(E=0;E<fa.numberOfVertices;E++)n(D[4*(fa.startVertex+E)],D[4*(fa.startVertex+E)+1],D[4*(fa.startVertex+E)+2],D[4*(fa.startVertex+E)+3],ja,ia);A(ja,ia)}return{vertexData:J,indexData:x}}function B(d,e){const n=e.pixels,{width:A,height:D}=e,G=new Float32Array(A*D*2),y=e.mask||
new Uint8Array(A*D*2);e.mask||y.fill(255);if("vector-uv"===d)for(d=0;d<A*D;d++)G[2*d]=n[0][d],G[2*d+1]=-n[1][d];else if("vector-magdir"===d)for(d=0;d<A*D;d++){e=n[0][d];const E=R.deg2rad(n[1][d]),J=Math.sin(E-Math.PI/2);G[2*d]=Math.cos(E-Math.PI/2)*e;G[2*d+1]=J*e}return{data:G,mask:y,width:A,height:D}}function a(){a=t._asyncToGenerator(function*(d,e,n,A,D,G){const y=performance.now();var E=z.getInfo(e.spatialReference);if(!E)return n=yield g(d,e,n,A,D,G),F("esri-2d-profiler")&&C.info("I.7","loadImagery, early exit (ms)",
Math.round(performance.now()-y)),F("esri-2d-profiler")&&C.info("I.9","Number of parts",1),n;const [J,x]=E.valid,q=Math.ceil(e.width/(x-J)),H=e.width/q,T=Math.round(n/q);let Z=e.xmin;const V=[];E=performance.now();for(let I=0;I<q;I++){const L=new l({xmin:Z,xmax:Z+H,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});V.push(g(d,L,T,A,D,G));Z+=H}d=yield Promise.all(V);F("esri-2d-profiler")&&C.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-E));F("esri-2d-profiler")&&
C.info("I.9","Number of parts",d.length);A={data:new Float32Array(n*A*2),mask:new Uint8Array(n*A),width:n,height:A};e=0;for(const I of d){for(d=0;d<I.height;d++)for(D=0;D<I.width;D++)e+D>=n||(A.data[2*(d*n+e+D)]=I.data[2*(d*I.width+D)],A.data[2*(d*n+e+D)+1]=I.data[2*(d*I.width+D)+1],A.mask[d*n+e+D]=I.mask[d*I.width+D]);e+=I.width}F("esri-2d-profiler")&&C.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-y));return A});return a.apply(this,arguments)}function g(d,e,n,A,D,G){return r.apply(this,
arguments)}function r(){r=t._asyncToGenerator(function*(d,e,n,A,D,G){const y={requestProjectedLocalDirections:!0,signal:G};Q.isSome(D)&&(y.timeExtent=D);if("imagery"===d.type)return yield d.load({signal:G}),D=d.rasterInfo.dataType,d=yield d.fetchImage(e,n,A,y),!d||Q.isNone(d.pixelData)||Q.isNone(d.pixelData.pixelBlock)?{data:new Float32Array(n*A*2),mask:new Uint8Array(n*A),width:n,height:A}:B(D,d.pixelData.pixelBlock);yield d.load({signal:G});D=d.rasterInfo.dataType;d=yield d.fetchPixels(e,n,A,y);
return!d||Q.isNone(d.pixelBlock)?{data:new Float32Array(n*A*2),mask:new Uint8Array(n*A),width:n,height:A}:B(D,d.pixelBlock)});return r.apply(this,arguments)}const C=p.getLogger("esri.views.2d.engine.flow.dataUtils");K.createAnimatedLinesData=c;K.createFlowMesh=function(d,e,n,A){return b.apply(this,arguments)};K.createParticlesMesh=u;K.createStreamlinesMesh=k;K.loadImagery=function(d,e,n,A,D,G){return a.apply(this,arguments)};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),
function(K,t,v,F,p,R,Q,O,S,z,l,b,h,m,f,w,c,k,u,B,a,g,r,C){p=function(d){function e(...A){A=d.call(this,...A)||this;A.legendEnabled=!0;A.isReference=null;A.operationalLayerType="ArcGISImageServiceLayer";A.popupEnabled=!0;A.popupTemplate=null;A.type="imagery";return A}K._inheritsLoose(e,d);var n=e.prototype;n.normalizeCtorArgs=function(A,D){return"string"===typeof A?{url:A,...D}:A};n.load=function(A){const D=F.isSome(A)?A.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
A).catch(R.throwIfAbortError).then(()=>this._fetchService(D)));return Promise.resolve(this)};n.writeOperationalLayerType=function(A,D,G){D[G]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};n.createPopupTemplate=function(A){const D=this.rasterFields,G=this.title,y=new Set;var E=!1;let J=!1;this.capabilities&&(E=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,J="esriImageServiceDataTypeVector-UV"===this.serviceDataType||
"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const x=new Set;E&&x.add("raster.itempixelvalue");for(const q of D)E=q.name.toLowerCase(),x.has(E)||E.includes("raster.servicepixelvalue.")||y.add(q.name);J&&y.add("raster.magnitude").add("raster.direction");return C.createPopupTemplate({fields:D,title:G},{...A,visibleFieldNames:y})};n.queryFeatures=function(A,D){return this.queryRasters(A,D).then(G=>{if(G?.features)for(const y of G.features)y.layer=y.sourceLayer=this;return G})};n.queryFeatureCount=
function(A,D){return this.queryRasterCount(A,D)};n.redraw=function(){this.emit("redraw")};n.serviceSupportsSpatialReference=function(A){return r.serviceSupportsSpatialReference(this,A)};K._createClass(e,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return e}(f.BlendLayer(a.TemporalLayer(B.ScaleRangeLayer(c.OperationalLayer(k.PortalLayer(h.ArcGISImageService(u.RefreshableLayer(w.CustomParametersMixin(m.ArcGISService(p.MultiOriginJSONMixin(b)))))))))));t.__decorate([Q.property(g.legendEnabled)],
p.prototype,"legendEnabled",void 0);t.__decorate([Q.property({type:["show","hide"]})],p.prototype,"listMode",void 0);t.__decorate([Q.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);t.__decorate([Q.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],p.prototype,"operationalLayerType",
void 0);t.__decorate([l.writer("web-map","operationalLayerType")],p.prototype,"writeOperationalLayerType",null);t.__decorate([Q.property(g.popupEnabled)],p.prototype,"popupEnabled",void 0);t.__decorate([Q.property({type:v,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",void 0);t.__decorate([Q.property({readOnly:!0})],p.prototype,"defaultPopupTemplate",null);t.__decorate([Q.property({readOnly:!0,json:{read:!1}})],p.prototype,"type",void 0);return p=t.__decorate([z.subclass("esri.layers.ImageryLayer")],
p)});