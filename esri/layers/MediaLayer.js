// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/ImageElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Error ../../core/maybe ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./MediaElementBase ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u,w,B,N,D){function Q(f){return T.apply(this,arguments)}function T(){T=g._asyncToGenerator(function*(f){if("string"===typeof f){if(K.isBlobProtocol(f)){var {data:y}=yield E(f,{responseType:"blob"});return y}if(K.isDataProtocol(f))return K.dataToBlob(f);y=yield E(f,{responseType:"image"});return Q(y.data)}return new Promise(n=>{if(f instanceof HTMLCanvasElement)var l=f;else{l=f instanceof HTMLImageElement?f.naturalWidth:f.width;var I=f instanceof HTMLImageElement?f.naturalHeight:
f.height,h=document.createElement("canvas"),q=h.getContext("2d");h.width=l;h.height=I;f instanceof HTMLImageElement?q.drawImage(f,0,0,f.width,f.height):f instanceof ImageData&&q.putImageData(f,0,0);l=h}return l.toBlob(n)})});return T.apply(this,arguments)}function W(f,y){const n=r.generateUUID();f=`${K.join("media",n)}.${N.getResourceContentExtension(f)}`;return y.resourceFromPath(f)}L=function(f){function y(l){l=f.call(this,l)||this;l.content=null;l.image=null;l.type="image";l.image=null;return l}
g._inheritsLoose(y,f);var n=y.prototype;n.load=function(){const l=this.image;if("string"===typeof l){var I=E(l,{responseType:"image"}).then(({data:h})=>{this._set("content",h)});this.addResolvingPromise(I)}else l instanceof HTMLImageElement?(I=l.decode().then(()=>{this._set("content",l)}),this.addResolvingPromise(I)):l?this._set("content",l):this.addResolvingPromise(Promise.reject(new S("image-element:invalid-image-type","Invalid image type",{image:l})));return Promise.resolve(this)};n.readImage=
function(l,I,h){return D.fromJSON(I.url,h)};n.writeImage=function(l,I,h,q){if(!H.isNone(l)){var m=q?.portalItem,p=q?.resources;if(m&&p){var x="string"!==typeof l||K.isDataProtocol(l)||K.isBlobProtocol(l)?null:l;if(x){if(null==D.itemIdFromResourceUrl(x)){I[h]=x;return}q=D.toJSON(x,{...q,verifyItemRelativeUrls:q&&q.verifyItemRelativeUrls?{writtenUrls:q.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},D.MarkKeep.NO);if(m&&q&&!K.isAbsolute(q)){p.toKeep.push({resource:m.resourceFromPath(q),
compress:!1});I[h]=q;return}}I[h]="\x3cpending\x3e";p.pendingOperations.push(Q(l).then(C=>{const J=W(C,m);I[h]=J.itemRelativeUrl;p.toAdd.push({resource:J,content:C,compress:!1,finish:P=>{this.image=P.url}})}))}else"string"===typeof l&&(I[h]=D.toJSON(l,q))}};return y}(B);A.__decorate([z.property({readOnly:!0})],L.prototype,"content",void 0);A.__decorate([z.property({json:{name:"url",type:String}})],L.prototype,"image",void 0);A.__decorate([F.reader("image",["url"])],L.prototype,"readImage",null);A.__decorate([w.writer("image")],
L.prototype,"writeImage",null);A.__decorate([z.property({readOnly:!0,json:{name:"mediaType"}})],L.prototype,"type",void 0);return L=A.__decorate([u.subclass("esri.layers.support.ImageElement")],L)})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./ControlPointsGeoreference ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u,w,B){r={key:"type",base:B,typeMap:{"control-points":F,corners:u,"extent-and-rotation":w}};E=function(N){function D(){var Q=N.apply(this,arguments)||this;Q.georeference=null;Q.opacity=1;return Q}g._inheritsLoose(D,N);D.prototype.readGeoreference=function(Q){return F.fromJSON(Q)};return D}(E.NumericIdentifiableMixin(S.JSONSupportMixin(H)));A.__decorate([K.property({types:r,json:{write:!0}})],E.prototype,"georeference",void 0);A.__decorate([L.reader("georeference")],
E.prototype,"readGeoreference",null);A.__decorate([K.property()],E.prototype,"opacity",void 0);return E=A.__decorate([M.subclass("esri.layers.support.MediaElementBase")],E)})},"esri/layers/support/ControlPointsGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/mat3 ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ../../geometry/SpatialReference ./GeoreferenceBase".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u,w,B,N,D,Q,T,W,f,y,n,l,I){function h(V){return r.isSome(V)&&r.isSome(V.sourcePoint)&&r.isSome(V.mapPoint)}function q(V,U,Y){T.set(V,Y.sourcePoint.x,Y.sourcePoint.y);T.set(U,Y.mapPoint.x,Y.mapPoint.y)}function m(V,U,Y){q(O,v,U);q(a,c,Y);T.rotate(b,a,O,G);T.rotate(e,O,a,G);T.rotate(d,c,v,-G);T.rotate(k,v,c,-G);U=v;Y=c;var t=d,Z=k;return z.getProjectiveTransform(V,C(R,O,a,b,e),C(X,U,Y,t,Z))}function p(V,U,Y,t){q(O,v,U);q(a,c,Y);q(b,d,t);T.lerp(e,O,a,.5);T.rotate(e,b,e,
Math.PI);T.lerp(k,v,c,.5);T.rotate(k,d,k,Math.PI);U=v;Y=c;t=d;var Z=k;return z.getProjectiveTransform(V,C(R,O,a,b,e),C(X,U,Y,t,Z))}function x(V,U,Y,t,Z){q(O,v,U);q(a,c,Y);q(b,d,t);q(e,k,Z);U=v;Y=c;t=d;Z=k;return z.getProjectiveTransform(V,C(R,O,a,b,e),C(X,U,Y,t,Z))}function C(V,U,Y,t,Z){V[0]=U[0];V[1]=U[1];V[2]=Y[0];V[3]=Y[1];V[4]=t[0];V[5]=t[1];V[6]=Z[0];V[7]=Z[1];return V}const J=Q.create(),P=W.create();E=function(V){function U(){var Y=V.apply(this,arguments)||this;Y.sourcePoint=null;Y.mapPoint=
null;return Y}g._inheritsLoose(U,V);return U}(E);A.__decorate([M.property()],E.prototype,"sourcePoint",void 0);A.__decorate([M.property({type:f})],E.prototype,"mapPoint",void 0);E=A.__decorate([B.subclass("esri.layers.support.ControlPoint")],E);H=function(V){function U(t){t=V.call(this,t)||this;t.controlPoints=null;t.height=0;t.type="control-points";t.width=0;return t}g._inheritsLoose(U,V);var Y=U.prototype;Y.readControlPoints=function(t,Z){const da=l.fromJSON(Z.spatialReference),ba=Q.fromValues(...Z.coefficients,
1);return t.map(aa=>{T.set(P,aa.x,aa.y);z.transformProjective(P,P,ba);return{sourcePoint:aa,mapPoint:new f({x:P[0],y:P[1],spatialReference:da})}})};Y.writeControlPoints=function(t,Z,da,ba){r.isNone(this.transform)?(t=new S("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:ba?.layer,georeference:this}),ba?.messages?ba.messages.push(t):K.getLogger(this.declaredClass).error(t.name,t.message)):r.isSome(t)&&h(t[0])&&(Z.controlPoints=t.map(aa=>
{aa=r.unwrap(aa.sourcePoint);return{x:aa.x,y:aa.y}}),Z.spatialReference=t[0].mapPoint.spatialReference.toJSON(),Z.coefficients=this.transform.slice(0,8))};Y.toMap=function(t){if(r.isNone(t)||r.isNone(this.transform)||r.isNone(this.controlPoints)||!h(this.controlPoints[0]))return null;T.set(P,t.x,t.y);t=this.controlPoints[0].mapPoint.spatialReference;z.transformProjective(P,P,this.transform);return new f({x:P[0],y:P[1],spatialReference:t})};Y.toSource=function(t){if(r.isNone(t)||r.isNone(this.inverseTransform)||
r.isNone(this.controlPoints)||!h(this.controlPoints[0]))return null;const Z=this.controlPoints[0].mapPoint.spatialReference;t=t.normalize();t=n.projectOrLoad(t,Z).geometry;if(r.isNone(t))return null;T.set(P,t.x,t.y);z.transformProjective(P,P,this.inverseTransform);return L.createScreenPoint(P[0],P[1])};Y._updateTransform=function(t){const {controlPoints:Z,width:da,height:ba}=this;if(!(!r.isNone(Z)&&0<da&&0<ba))return null;const [aa,ca,fa,ka]=Z;if(!h(aa))return null;var ea=aa.mapPoint.spatialReference;
const ha=this._projectControlPoint(ca,ea),ia=this._projectControlPoint(fa,ea);ea=this._projectControlPoint(ka,ea);if(!(ha.valid&&ia.valid&&ea.valid&&h(ha.controlPoint)))return null;r.isNone(t)&&(t=Q.create());let ja=null;ja=h(ia.controlPoint)&&h(ea.controlPoint)?x(t,aa,ha.controlPoint,ia.controlPoint,ea.controlPoint):h(ia.controlPoint)?p(t,aa,ha.controlPoint,ia.controlPoint):m(t,aa,ha.controlPoint);return ja.every(la=>0===la)?null:ja};Y._projectControlPoint=function(t,Z){if(!h(t))return{valid:!0,
controlPoint:t};const {sourcePoint:da,mapPoint:ba}=t,{geometry:aa,pending:ca}=n.projectOrLoad(ba,Z);return ca?{valid:!1,controlPoint:null}:ca||aa?{valid:!0,controlPoint:{sourcePoint:da,mapPoint:aa}}:(K.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:t,sourceSpatialReference:ba.spatialReference,targetSpatialReference:Z}),{valid:!1,controlPoint:null})};g._createClass(U,[{key:"coords",get:function(){if(r.isNone(this.controlPoints))return null;
const t=this._updateTransform(J);if(r.isNone(t)||!h(this.controlPoints[0]))return null;var Z=this.width,da=this.height,ba=this.controlPoints[0].mapPoint.spatialReference;const aa=W.fromValues(0,da),ca=W.fromValues(0,0),fa=W.fromValues(Z,0);Z=W.fromValues(Z,da);z.transformProjective(aa,aa,t);z.transformProjective(ca,ca,t);z.transformProjective(fa,fa,t);z.transformProjective(Z,Z,t);return new y({rings:[[aa,ca,fa,Z,aa]],spatialReference:ba})},set:function(t){if(!r.isNone(this.controlPoints)&&h(this.controlPoints[0])){var Z=
this.controlPoints[0].mapPoint.spatialReference;t=this.projectOrWarn(t,Z);if(!r.isNone(t)){var {width:da,height:ba}=this,{rings:[[aa,ca,fa,ka]]}=t;t={sourcePoint:L.createScreenPoint(0,ba),mapPoint:new f({x:aa[0],y:aa[1],spatialReference:Z})};var ea={sourcePoint:L.createScreenPoint(0,0),mapPoint:new f({x:ca[0],y:ca[1],spatialReference:Z})},ha={sourcePoint:L.createScreenPoint(da,0),mapPoint:new f({x:fa[0],y:fa[1],spatialReference:Z})},ia={sourcePoint:L.createScreenPoint(da,ba),mapPoint:new f({x:ka[0],
y:ka[1],spatialReference:Z})};h(t)&&h(ea)&&h(ha)&&h(ia)&&(x(J,t,ea,ha,ia),this.controlPoints=r.unwrap(this.controlPoints).map(({sourcePoint:ja})=>{T.set(P,ja.x,ja.y);z.transformProjective(P,P,J);return{sourcePoint:ja,mapPoint:new f({x:P[0],y:P[1],spatialReference:Z})}}))}}}},{key:"inverseTransform",get:function(){return r.isNone(this.transform)?null:D.invert(Q.create(),this.transform)}},{key:"transform",get:function(){return this._updateTransform()}}]);return U}(H.JSONSupportMixin(I));A.__decorate([M.property({type:[E],
json:{write:{allowNull:!1,isRequired:!0}}})],H.prototype,"controlPoints",void 0);A.__decorate([w.reader("controlPoints")],H.prototype,"readControlPoints",null);A.__decorate([N.writer("controlPoints")],H.prototype,"writeControlPoints",null);A.__decorate([M.property()],H.prototype,"coords",null);A.__decorate([M.property({json:{write:!0}})],H.prototype,"height",void 0);A.__decorate([M.property({readOnly:!0})],H.prototype,"inverseTransform",null);A.__decorate([M.property({readOnly:!0})],H.prototype,"transform",
null);A.__decorate([M.property({json:{write:!0}})],H.prototype,"width",void 0);H=A.__decorate([B.subclass("esri.layers.support.ControlPointsGeoreference")],H);const O=W.create(),a=W.create(),b=W.create(),e=W.create(),v=W.create(),c=W.create(),d=W.create(),k=W.create(),G=Math.PI/2,R=Array(8).fill(0),X=Array(8).fill(0);return H})},"esri/core/perspectiveUtils":function(){define("exports ../chunks/mat3 ../chunks/mat3f64 ../chunks/vec2 ../chunks/vec3 ../chunks/vec3f64".split(" "),function(g,A,E,S,H,K){function r(u,
w,B,N,D,Q,T,W,f){A.set(u,w,N,Q,B,D,T,1,1,1);H.set(z,W,f,1);A.adjoint(L,u);const [y,n,l]=H.transformMat3(z,z,A.transpose(L,L));A.set(L,y,0,0,0,n,0,0,0,l);return A.multiply(u,L,u)}const z=K.create(),L=E.create(),M=E.create(),F=E.create();g.getProjectiveTransform=function(u,w,B){r(M,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7]);r(F,B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7]);A.multiply(u,A.adjoint(M,M),F);0!==u[8]&&(u[0]/=u[8],u[1]/=u[8],u[2]/=u[8],u[3]/=u[8],u[4]/=u[8],u[5]/=u[8],u[6]/=u[8],u[7]/=u[8],u[8]/=
u[8]);return u};g.transformProjective=function(u,w,B){H.set(z,w[0],w[1],1);H.transformMat3(z,z,A.transpose(L,B));return 0===z[2]?S.set(u,z[0],z[1]):S.set(u,z[0]/z[2],z[1]/z[2])};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(g,A){function E(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function S(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=
b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function H(a,b,e,v,c,d,k,G,R,X){a[0]=b;a[1]=e;a[2]=v;a[3]=c;a[4]=d;a[5]=k;a[6]=G;a[7]=R;a[8]=X;return a}function K(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function r(a,b){if(a===b){const e=b[1],v=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=e;a[5]=b[7];a[6]=v;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function z(a,b){const e=b[0],v=b[1],c=b[2],d=b[3],k=b[4],G=
b[5],R=b[6],X=b[7];b=b[8];const V=b*k-G*X,U=-b*d+G*R,Y=X*d-k*R;let t=e*V+v*U+c*Y;if(!t)return null;t=1/t;a[0]=V*t;a[1]=(-b*v+c*X)*t;a[2]=(G*v-c*k)*t;a[3]=U*t;a[4]=(b*e-c*R)*t;a[5]=(-G*e+c*d)*t;a[6]=Y*t;a[7]=(-X*e+v*R)*t;a[8]=(k*e-v*d)*t;return a}function L(a,b){const e=b[0],v=b[1],c=b[2],d=b[3],k=b[4],G=b[5],R=b[6],X=b[7];b=b[8];a[0]=k*b-G*X;a[1]=c*X-v*b;a[2]=v*G-c*k;a[3]=G*R-d*b;a[4]=e*b-c*R;a[5]=c*d-e*G;a[6]=d*X-k*R;a[7]=v*R-e*X;a[8]=e*k-v*d;return a}function M(a){const b=a[3],e=a[4],v=a[5],c=a[6],
d=a[7],k=a[8];return a[0]*(k*e-v*d)+a[1]*(-k*b+v*c)+a[2]*(d*b-e*c)}function F(a,b,e){const v=b[0],c=b[1],d=b[2],k=b[3],G=b[4],R=b[5],X=b[6],V=b[7];b=b[8];const U=e[0],Y=e[1],t=e[2],Z=e[3],da=e[4],ba=e[5],aa=e[6],ca=e[7];e=e[8];a[0]=U*v+Y*k+t*X;a[1]=U*c+Y*G+t*V;a[2]=U*d+Y*R+t*b;a[3]=Z*v+da*k+ba*X;a[4]=Z*c+da*G+ba*V;a[5]=Z*d+da*R+ba*b;a[6]=aa*v+ca*k+e*X;a[7]=aa*c+ca*G+e*V;a[8]=aa*d+ca*R+e*b;return a}function u(a,b,e){const v=b[0],c=b[1],d=b[2],k=b[3],G=b[4],R=b[5],X=b[6],V=b[7];b=b[8];const U=e[0];
e=e[1];a[0]=v;a[1]=c;a[2]=d;a[3]=k;a[4]=G;a[5]=R;a[6]=U*v+e*k+X;a[7]=U*c+e*G+V;a[8]=U*d+e*R+b;return a}function w(a,b,e){const v=b[0],c=b[1],d=b[2],k=b[3],G=b[4],R=b[5],X=b[6],V=b[7];b=b[8];const U=Math.sin(e);e=Math.cos(e);a[0]=e*v+U*k;a[1]=e*c+U*G;a[2]=e*d+U*R;a[3]=e*k-U*v;a[4]=e*G-U*c;a[5]=e*R-U*d;a[6]=X;a[7]=V;a[8]=b;return a}function B(a,b,e){const v=e[0],c=e[1];e=e[2];a[0]=v*b[0];a[1]=v*b[1];a[2]=v*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=e*b[6];a[7]=e*b[7];a[8]=e*b[8];return a}function N(a,
b,e){const v=e[0];e=e[1];a[0]=v*b[0];a[1]=v*b[1];a[2]=v*b[2];a[3]=e*b[3];a[4]=e*b[4];a[5]=e*b[5];return a}function D(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function Q(a,b){const e=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=e;a[2]=0;a[3]=-e;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function T(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function W(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=
b[5];a[8]=1;return a}function f(a,b){var e=b[0],v=b[1],c=b[2];b=b[3];var d=e+e,k=v+v;const G=c+c;e*=d;const R=v*d;v*=k;const X=c*d,V=c*k;c*=G;d*=b;k*=b;b*=G;a[0]=1-v-c;a[3]=R-b;a[6]=X+k;a[1]=R+b;a[4]=1-e-c;a[7]=V-d;a[2]=X-k;a[5]=V+d;a[8]=1-e-v;return a}function y(a,b){const e=b[0],v=b[1],c=b[2],d=b[4],k=b[5],G=b[6],R=b[8],X=b[9];b=b[10];const V=b*k-G*X,U=-b*d+G*R,Y=X*d-k*R;var t=e*V+v*U+c*Y;if(!t)return null;t=1/t;a[0]=V*t;a[1]=(-b*v+c*X)*t;a[2]=(G*v-c*k)*t;a[3]=U*t;a[4]=(b*e-c*R)*t;a[5]=(-G*e+c*
d)*t;a[6]=Y*t;a[7]=(-X*e+v*R)*t;a[8]=(k*e-v*d)*t;return a}function n(a,b){const e=b[0],v=b[1],c=b[2],d=b[3],k=b[4],G=b[5],R=b[6],X=b[7];var V=b[8],U=b[9],Y=b[10],t=b[11];const Z=b[12],da=b[13],ba=b[14];b=b[15];const aa=e*G-v*k,ca=e*R-c*k,fa=e*X-d*k,ka=v*R-c*G,ea=v*X-d*G,ha=c*X-d*R,ia=V*da-U*Z,ja=V*ba-Y*Z;V=V*b-t*Z;const la=U*ba-Y*da;U=U*b-t*da;Y=Y*b-t*ba;t=aa*Y-ca*U+fa*la+ka*V-ea*ja+ha*ia;if(!t)return null;t=1/t;a[0]=(G*Y-R*U+X*la)*t;a[1]=(R*V-k*Y-X*ja)*t;a[2]=(k*U-G*V+X*ia)*t;a[3]=(c*U-v*Y-d*la)*
t;a[4]=(e*Y-c*V+d*ja)*t;a[5]=(v*V-e*U-d*ia)*t;a[6]=(da*ha-ba*ea+b*ka)*t;a[7]=(ba*fa-Z*ha-b*ca)*t;a[8]=(Z*ea-da*fa+b*aa)*t;return a}function l(a,b,e){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/e;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function I(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function h(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2)}function q(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=
b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];a[6]=b[6]+e[6];a[7]=b[7]+e[7];a[8]=b[8]+e[8];return a}function m(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];a[6]=b[6]-e[6];a[7]=b[7]-e[7];a[8]=b[8]-e[8];return a}function p(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*e;return a}function x(a,b,e,v){a[0]=b[0]+e[0]*v;a[1]=b[1]+e[1]*v;a[2]=b[2]+e[2]*v;a[3]=b[3]+e[3]*v;a[4]=b[4]+
e[4]*v;a[5]=b[5]+e[5]*v;a[6]=b[6]+e[6]*v;a[7]=b[7]+e[7]*v;a[8]=b[8]+e[8]*v;return a}function C(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function J(a,b){const e=a[0],v=a[1],c=a[2],d=a[3],k=a[4],G=a[5],R=a[6],X=a[7];a=a[8];const V=b[0],U=b[1],Y=b[2],t=b[3],Z=b[4],da=b[5],ba=b[6],aa=b[7];b=b[8];const ca=A.getEpsilon();return Math.abs(e-V)<=ca*Math.max(1,Math.abs(e),Math.abs(V))&&Math.abs(v-U)<=ca*Math.max(1,Math.abs(v),
Math.abs(U))&&Math.abs(c-Y)<=ca*Math.max(1,Math.abs(c),Math.abs(Y))&&Math.abs(d-t)<=ca*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(k-Z)<=ca*Math.max(1,Math.abs(k),Math.abs(Z))&&Math.abs(G-da)<=ca*Math.max(1,Math.abs(G),Math.abs(da))&&Math.abs(R-ba)<=ca*Math.max(1,Math.abs(R),Math.abs(ba))&&Math.abs(X-aa)<=ca*Math.max(1,Math.abs(X),Math.abs(aa))&&Math.abs(a-b)<=ca*Math.max(1,Math.abs(a),Math.abs(b))}function P(a){const b=A.getEpsilon(),e=a[0],v=a[1],c=a[2],d=a[3],k=a[4],G=a[5],R=a[6],X=a[7];a=a[8];
return Math.abs(1-(e*e+d*d+R*R))<=b&&Math.abs(1-(v*v+k*k+X*X))<=b&&Math.abs(1-(c*c+G*G+a*a))<=b}const O=Object.freeze(Object.defineProperty({__proto__:null,add:q,adjoint:L,copy:S,determinant:M,equals:J,exactEquals:C,frob:h,fromMat2d:W,fromMat4:E,fromQuat:f,fromRotation:Q,fromScaling:T,fromTranslation:D,identity:K,invert:z,isOrthoNormal:P,mul:F,multiply:F,multiplyScalar:p,multiplyScalarAndAdd:x,normalFromMat4:n,normalFromMat4Legacy:y,projection:l,rotate:w,scale:B,scaleByVec2:N,set:H,str:I,sub:m,subtract:m,
translate:u,transpose:r},Symbol.toStringTag,{value:"Module"}));g.add=q;g.adjoint=L;g.copy=S;g.determinant=M;g.equals=J;g.exactEquals=C;g.frob=h;g.fromMat2d=W;g.fromMat4=E;g.fromQuat=f;g.fromRotation=Q;g.fromScaling=T;g.fromTranslation=D;g.identity=K;g.invert=z;g.isOrthoNormal=P;g.mat3=O;g.mul=F;g.multiply=F;g.multiplyScalar=p;g.multiplyScalarAndAdd=x;g.normalFromMat4=n;g.normalFromMat4Legacy=y;g.projection=l;g.rotate=w;g.scale=B;g.scaleByVec2=N;g.set=H;g.str=I;g.sub=m;g.subtract=m;g.translate=u;g.transpose=
r})},"esri/chunks/mat3f64":function(){define(["exports"],function(g){function A(){return[1,0,0,0,1,0,0,0,1]}function E(r){return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]]}function S(r,z,L,M,F,u,w,B,N){return[r,z,L,M,F,u,w,B,N]}function H(r,z){return new Float64Array(r,z,9)}const K=Object.freeze(Object.defineProperty({__proto__:null,clone:E,create:A,createView:H,fromValues:S},Symbol.toStringTag,{value:"Module"}));g.clone=E;g.create=A;g.createView=H;g.fromValues=S;g.mat3f64=K})},"esri/chunks/vec2":function(){define(["exports",
"./common"],function(g,A){function E(c,d){c[0]=d[0];c[1]=d[1];return c}function S(c,d,k){c[0]=d;c[1]=k;return c}function H(c,d,k){c[0]=d[0]+k[0];c[1]=d[1]+k[1];return c}function K(c,d,k){c[0]=d[0]-k[0];c[1]=d[1]-k[1];return c}function r(c,d,k){c[0]=d[0]*k[0];c[1]=d[1]*k[1];return c}function z(c,d,k){c[0]=d[0]/k[0];c[1]=d[1]/k[1];return c}function L(c,d){c[0]=Math.ceil(d[0]);c[1]=Math.ceil(d[1]);return c}function M(c,d){c[0]=Math.floor(d[0]);c[1]=Math.floor(d[1]);return c}function F(c,d,k){c[0]=Math.min(d[0],
k[0]);c[1]=Math.min(d[1],k[1]);return c}function u(c,d,k){c[0]=Math.max(d[0],k[0]);c[1]=Math.max(d[1],k[1]);return c}function w(c,d){c[0]=Math.round(d[0]);c[1]=Math.round(d[1]);return c}function B(c,d,k){c[0]=d[0]*k;c[1]=d[1]*k;return c}function N(c,d,k,G){c[0]=d[0]+k[0]*G;c[1]=d[1]+k[1]*G;return c}function D(c,d){const k=d[0]-c[0];c=d[1]-c[1];return Math.sqrt(k*k+c*c)}function Q(c,d){const k=d[0]-c[0];c=d[1]-c[1];return k*k+c*c}function T(c){const d=c[0];c=c[1];return Math.sqrt(d*d+c*c)}function W(c){const d=
c[0];c=c[1];return d*d+c*c}function f(c,d){c[0]=-d[0];c[1]=-d[1];return c}function y(c,d){c[0]=1/d[0];c[1]=1/d[1];return c}function n(c,d){var k=d[0];const G=d[1];k=k*k+G*G;0<k&&(k=1/Math.sqrt(k),c[0]=d[0]*k,c[1]=d[1]*k);return c}function l(c,d){return c[0]*d[0]+c[1]*d[1]}function I(c,d,k){d=d[0]*k[1]-d[1]*k[0];c[0]=c[1]=0;c[2]=d;return c}function h(c,d,k,G){const R=d[0];d=d[1];c[0]=R+G*(k[0]-R);c[1]=d+G*(k[1]-d);return c}function q(c,d){d=d||1;const k=2*A.RANDOM()*Math.PI;c[0]=Math.cos(k)*d;c[1]=
Math.sin(k)*d;return c}function m(c,d,k){const G=d[0];d=d[1];c[0]=k[0]*G+k[2]*d;c[1]=k[1]*G+k[3]*d;return c}function p(c,d,k){const G=d[0];d=d[1];c[0]=k[0]*G+k[2]*d+k[4];c[1]=k[1]*G+k[3]*d+k[5];return c}function x(c,d,k){const G=d[0];d=d[1];c[0]=k[0]*G+k[3]*d+k[6];c[1]=k[1]*G+k[4]*d+k[7];return c}function C(c,d,k){const G=d[0];d=d[1];c[0]=k[0]*G+k[4]*d+k[12];c[1]=k[1]*G+k[5]*d+k[13];return c}function J(c,d,k,G){const R=d[0]-k[0];d=d[1]-k[1];const X=Math.sin(G);G=Math.cos(G);c[0]=R*G-d*X+k[0];c[1]=
R*X+d*G+k[1];return c}function P(c,d){var k=c[0];c=c[1];const G=d[0];d=d[1];let R=k*k+c*c;0<R&&(R=1/Math.sqrt(R));let X=G*G+d*d;0<X&&(X=1/Math.sqrt(X));k=(k*G+c*d)*R*X;return 1<k?0:-1>k?Math.PI:Math.acos(k)}function O(c){return"vec2("+c[0]+", "+c[1]+")"}function a(c,d){return c[0]===d[0]&&c[1]===d[1]}function b(c,d){const k=c[0];c=c[1];const G=d[0];d=d[1];const R=A.getEpsilon();return Math.abs(k-G)<=R*Math.max(1,Math.abs(k),Math.abs(G))&&Math.abs(c-d)<=R*Math.max(1,Math.abs(c),Math.abs(d))}function e(c,
d,k,G,R){let X=d[0]-k[0];k=d[1]-k[1];R=(G[0]*X+G[1]*k)*(R-1);X=G[0]*R;k=G[1]*R;c[0]=d[0]+X;c[1]=d[1]+k;return c}const v=Object.freeze(Object.defineProperty({__proto__:null,add:H,angle:P,ceil:L,copy:E,cross:I,dist:D,distance:D,div:z,divide:z,dot:l,equals:b,exactEquals:a,floor:M,inverse:y,len:T,length:T,lerp:h,max:u,min:F,mul:r,multiply:r,negate:f,normalize:n,projectAndScale:e,random:q,rotate:J,round:w,scale:B,scaleAndAdd:N,set:S,sqrDist:Q,sqrLen:W,squaredDistance:Q,squaredLength:W,str:O,sub:K,subtract:K,
transformMat2:m,transformMat2d:p,transformMat3:x,transformMat4:C},Symbol.toStringTag,{value:"Module"}));g.add=H;g.angle=P;g.ceil=L;g.copy=E;g.cross=I;g.dist=D;g.distance=D;g.div=z;g.divide=z;g.dot=l;g.equals=b;g.exactEquals=a;g.floor=M;g.inverse=y;g.len=T;g.length=T;g.lerp=h;g.max=u;g.min=F;g.mul=r;g.multiply=r;g.negate=f;g.normalize=n;g.projectAndScale=e;g.random=q;g.rotate=J;g.round=w;g.scale=B;g.scaleAndAdd=N;g.set=S;g.sqrDist=Q;g.sqrLen=W;g.squaredDistance=Q;g.squaredLength=W;g.str=O;g.sub=K;
g.subtract=K;g.transformMat2=m;g.transformMat2d=p;g.transformMat3=x;g.transformMat4=C;g.vec2=v})},"esri/chunks/vec2f64":function(){define(["exports"],function(g){function A(){return[0,0]}function E(D){return[D[0],D[1]]}function S(D,Q){return[D,Q]}function H(D){const Q=[0,0],T=Math.min(2,D.length);for(let W=0;W<T;++W)Q[W]=D[W];return Q}function K(D,Q){return new Float64Array(D,Q,2)}function r(){return[0,0]}function z(){return[1,1]}function L(){return[1,0]}function M(){return[0,1]}const F=[0,0],u=[1,
1],w=[1,0],B=[0,1],N=Object.freeze(Object.defineProperty({__proto__:null,ONES:u,UNIT_X:w,UNIT_Y:B,ZEROS:F,clone:E,create:A,createView:K,fromArray:H,fromValues:S,ones:z,unitX:L,unitY:M,zeros:r},Symbol.toStringTag,{value:"Module"}));g.ONES=u;g.UNIT_X=w;g.UNIT_Y=B;g.ZEROS=F;g.clone=E;g.create=A;g.createView=K;g.fromArray=H;g.fromValues=S;g.ones=z;g.unitX=L;g.unitY=M;g.vec2f64=N;g.zeros=r})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/maybe ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/subclass ../../geometry/projection".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F){E=function(u){function w(){return u.apply(this,arguments)||this}g._inheritsLoose(w,u);w.prototype.projectOrWarn=function(B,N){if(H.isNone(B))return B;const {geometry:D,pending:Q}=F.projectOrLoad(B,N);return Q?null:Q||D?D:(S.getLogger(this.declaredClass).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:B,sourceSpatialReference:B.spatialReference,targetSpatialReference:N}),null)};return w}(E.Clonable);return E=A.__decorate([M.subclass("esri.layers.support.GeoreferenceBase")],
E)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/Polygon ./GeoreferenceBase".split(" "),function(g,A,E,S,H,K,r,z,L,M){H=function(F){function u(w){w=F.call(this,w)||this;w.bottomLeft=null;w.bottomRight=null;w.topLeft=
null;w.topRight=null;w.type="corners";return w}g._inheritsLoose(u,F);g._createClass(u,[{key:"coords",get:function(){let {topLeft:w,topRight:B,bottomLeft:N,bottomRight:D}=this;if(E.isNone(w)||E.isNone(B)||E.isNone(N)||E.isNone(D))return null;const Q=w.spatialReference;B=this.projectOrWarn(B,Q);N=this.projectOrWarn(N,Q);D=this.projectOrWarn(D,Q);return E.isNone(B)||E.isNone(N)||E.isNone(D)?null:new L({rings:[[[N.x,N.y],[w.x,w.y],[B.x,B.y],[D.x,D.y],[N.x,N.y]]],spatialReference:Q})},set:function(w){var {topLeft:B}=
this;if(!E.isNone(B)&&(B=B.spatialReference,w=this.projectOrWarn(w,B),!E.isNone(w))){var {rings:[[N,D,Q,T]]}=w;this.bottomLeft=new z({x:N[0],y:N[1],spatialReference:B});this.topLeft=new z({x:D[0],y:D[1],spatialReference:B});this.topRight=new z({x:Q[0],y:Q[1],spatialReference:B});this.bottomRight=new z({x:T[0],y:T[1],spatialReference:B})}}}]);return u}(M);A.__decorate([S.property()],H.prototype,"coords",null);A.__decorate([S.property({type:z})],H.prototype,"bottomLeft",void 0);A.__decorate([S.property({type:z})],
H.prototype,"bottomRight",void 0);A.__decorate([S.property({type:z})],H.prototype,"topLeft",void 0);A.__decorate([S.property({type:z})],H.prototype,"topRight",void 0);return H=A.__decorate([r.subclass("esri.layers.support.CornersGeoreference")],H)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/mathUtils ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ./GeoreferenceBase".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u){function w(B,N,D){D=L.toRadian(D);const Q=Math.cos(D),T=Math.sin(D);return(W,f)=>[Q*(W-B)+T*(f-N)+B,Q*(f-N)-T*(W-B)+N]}K=function(B){function N(D){D=B.call(this,D)||this;D.extent=null;D.rotation=0;D.type="extent-and-rotation";return D}g._inheritsLoose(N,B);g._createClass(N,[{key:"coords",get:function(){if(S.isNone(this.extent))return null;const {xmin:D,ymin:Q,xmax:T,ymax:W,spatialReference:f}=this.extent;if(this.rotation){const {x:n,y:l}=this.extent.center;var y=
w(n,l,this.rotation);y=[y(D,Q),y(D,W),y(T,W),y(T,Q)];y.push(y[0])}else y=[[D,Q],[D,W],[T,W],[T,Q],[D,Q]];return new F({rings:[y],spatialReference:f})},set:function(D){if(!S.isNone(D)&&!S.isNone(this.extent)){var Q=this.extent.spatialReference;D=this.projectOrWarn(D,Q);if(!S.isNone(D)&&!S.isNone(D.extent)){var {rings:[[T,W,f]],extent:{center:{x:y,y:n}}}=D;D=E.rad2deg(Math.PI/2-Math.atan2(W[1]-T[1],W[0]-T[0]));var l=w(y,n,-D),[I,h]=l(T[0],T[1]),[q,m]=l(f[0],f[1]);this.extent=new M({xmin:I,ymin:h,xmax:q,
ymax:m,spatialReference:Q});this.rotation=D}}}}]);return N}(u);A.__decorate([H.property()],K.prototype,"coords",null);A.__decorate([H.property({type:M})],K.prototype,"extent",void 0);A.__decorate([H.property({type:Number})],K.prototype,"rotation",void 0);return K=A.__decorate([z.subclass("esri.layers.support.ExtentAndRotationGeoreference")],K)})},"esri/portal/support/resourceExtension":function(){define(["exports","../../core/urlUtils"],function(g,A){const E={},S=E["text/plain"],H={png:"image/png",
jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const K in H)E[H[K]]=K;g.getResourceContentExtension=function(K){K instanceof Blob?K=K.type:(K=A.getPathExtension(K.url),K=H[K]||"text/plain");return E[K]||S};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/HandleOwner ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../../geometry/support/spatialReferenceUtils ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./MediaElementView ./VideoElement ../../geometry/SpatialReference".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u,w,B,N,D,Q,T,W,f,y,n,l,I,h,q,m,p){const x=S.ofType({key:"type",defaultKeyValue:"image",base:h,typeMap:{image:I,video:m}});E=function(C){function J(O){var a=C.call(this,O)||this;a._index=new l.BoundsStore;a._elementViewsMap=new Map;a._elementsIndexes=new Map;a._elementsChangedHandler=b=>{for(var e of b.removed){const v=a._elementViewsMap.get(e);a._elementViewsMap.delete(e);a._index.delete(v);a.handles.remove(v);v.destroy();a.notifyChange("fullExtent")}({spatialReference:e}=
g._assertThisInitialized(a));for(const v of b.added){if(a._elementViewsMap.get(v))continue;const c=new q.MediaElementView({spatialReference:e,element:v});a._elementViewsMap.set(v,c);b=w.watch(()=>c.coords,()=>a._updateIndexForElement(c,!1));a._updateIndexForElement(c,!0);a.handles.add(b,c)}a._elementsIndexes.clear();a.elements.forEach((v,c)=>a._elementsIndexes.set(v,c));a.emit("refresh")};a.elements=new x;return a}g._inheritsLoose(J,C);var P=J.prototype;P.load=function(){var O=g._asyncToGenerator(function*(a){u.throwIfAborted(a);
this.spatialReference||(a=this.elements.find(b=>M.isSome(b.georeference)&&M.isSome(b.georeference.coords)),this._set("spatialReference",a?M.unwrap(M.unwrap(a.georeference).coords).spatialReference:p.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.handles.add(this.elements.on("change",this._elementsChangedHandler));return this});return function(a){return O.apply(this,arguments)}}();P.destroy=function(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()};
P.queryElements=function(){var O=g._asyncToGenerator(function*(a,b){yield this.load();yield W.initializeProjection(a.spatialReference,this.spatialReference,null,b);a=n.equals(a.spatialReference,this.spatialReference)?a:W.project(a,this.spatialReference);if(!a)return[];a=a.normalize();const e=[];for(const v of a)this._index.forEachInBounds(f.fromExtent(v),({normalizedCoords:c,element:d})=>{M.isSome(c)&&y.extentIntersectsPolygon(v,c)&&e.push(d)});e.sort((v,c)=>this._elementsIndexes.get(v)-this._elementsIndexes.get(c));
return e});return function(a,b){return O.apply(this,arguments)}}();P._updateIndexForElement=function(O,a){const b=O.normalizedBounds,e=this._index.has(O),v=M.isSome(b);this._index.delete(O);v&&this._index.set(O,b);this.notifyChange("fullExtent");a||(e!==v?this.emit("refresh"):this.emit("change",{element:O.element}))};g._createClass(J,[{key:"elements",set:function(O){this._set("elements",H.referenceSetter(O,this._get("elements"),x))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;
const O=this._index.fullBounds;return M.isNone(O)?null:new T({xmin:O[0],ymin:O[1],xmax:O[2],ymax:O[3],spatialReference:this.spatialReference})}},{key:"spatialReference",set:function(O){"not-loaded"!==this.loadStatus?L.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",O)}}]);return J}(z.LoadableMixin(F.EsriPromiseMixin(r.HandleOwnerMixin(K.EventedAccessor))));A.__decorate([B.property()],E.prototype,
"elements",null);A.__decorate([B.property({readOnly:!0})],E.prototype,"fullExtent",null);A.__decorate([B.property()],E.prototype,"spatialReference",null);return E=A.__decorate([Q.subclass("esri.layers.support.LocalMediaElementSource")],E)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,A,E,S,H){function K(L,M,F){r.minX=
M[0];r.minY=M[1];r.maxX=M[2];r.maxY=M[3];L.search(r,F)}const r={minX:0,minY:0,maxX:0,maxY:0};let z=function(){function L(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new S.PooledRBush(9,E("esri-csp-restrictions")?F=>({minX:F[0],minY:F[1],maxX:F[2],maxY:F[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const F=Array(this._idByBounds.size);let u=0;this._idByBounds.forEach((w,B)=>{F[u++]=B});this._indexInvalid=
!1;this._index.clear();this._index.load(F)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(F=>this._idByBounds.has(F))))),this._boundsToLoad.length=0)}}var M=L.prototype;M.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};M.delete=function(F){const u=this._boundsById.get(F);this._boundsById.delete(F);u&&(this._idByBounds.delete(u),this._indexInvalid||this._index.remove(u))};
M.forEachInBounds=function(F,u){this._loadIndex();K(this._index,F,w=>u(this._idByBounds.get(w)))};M.get=function(F){return this._boundsById.get(F)};M.has=function(F){return this._boundsById.has(F)};M.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};M.set=function(F,u){if(!this._indexInvalid){const w=this._boundsById.get(F);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(F,u);u&&(this._idByBounds.set(u,F),this._indexInvalid||
(this._boundsToLoad.push(u),5E4<this._boundsToLoad.length&&this._loadIndex()))};A._createClass(L,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const F=H.empty();for(const u of this._boundsById.values())u&&(F[0]=Math.min(u[0],F[0]),F[1]=Math.min(u[1],F[1]),F[2]=Math.max(u[2],F[2]),F[3]=Math.max(u[3],F[3]));return F}},{key:"valid",get:function(){return!this._indexInvalid}}]);return L}();g.BoundsStore=z;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(g,A,E,S,H,K){function r(h,q){z(h,0,h.children.length,q,h)}function z(h,q,m,p,x){x||(x=new l([]));x.minX=Infinity;x.minY=Infinity;x.maxX=-Infinity;x.maxY=-Infinity;for(let C=q,J;C<m;C++)J=h.children[C],L(x,h.leaf?p(J):J);return x}function L(h,q){h.minX=Math.min(h.minX,q.minX);h.minY=Math.min(h.minY,q.minY);h.maxX=Math.max(h.maxX,q.maxX);h.maxY=Math.max(h.maxY,q.maxY)}function M(h,q){return h.minX-q.minX}function F(h,q){return h.minY-q.minY}function u(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}
function w(h){return h.maxX-h.minX+(h.maxY-h.minY)}function B(h,q){return h.minX<=q.minX&&h.minY<=q.minY&&q.maxX<=h.maxX&&q.maxY<=h.maxY}function N(h,q){return q.minX<=h.maxX&&q.minY<=h.maxY&&q.maxX>=h.minX&&q.maxY>=h.minY}function D(h,q,m,p,x){for(q=[q,m];q.length;){m=S.assumeNonNull(q.pop());const C=S.assumeNonNull(q.pop());if(m-C<=p)continue;const J=C+Math.ceil((m-C)/p/2)*p;K.quickselect(h,J,C,m,x);q.push(C,J,J,m)}}let Q=function(){function h(m=9,p){this._compareMinX=M;this._compareMinY=F;this._toBBox=
x=>x;this._maxEntries=Math.max(4,m||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));p&&("function"===typeof p?this._toBBox=p:this._initFormat(p));this.clear()}var q=h.prototype;q.destroy=function(){this.clear();T.prune();W.prune();f.prune();y.prune()};q.all=function(m){this._all(this._data,m)};q.search=function(m,p){let x=this._data;const C=this._toBBox;if(N(m,x))for(T.clear();x;){for(let J=0,P=x.children.length;J<P;J++){const O=x.children[J],a=x.leaf?C(O):O;N(m,a)&&(x.leaf?p(O):B(m,
a)?this._all(O,p):T.push(O))}x=T.pop()}};q.collides=function(m){let p=this._data;const x=this._toBBox;if(!N(m,p))return!1;for(T.clear();p;){for(let C=0,J=p.children.length;C<J;C++){const P=p.children[C],O=p.leaf?x(P):P;if(N(m,O)){if(p.leaf||B(m,O))return!0;T.push(P)}}p=T.pop()}return!1};q.load=function(m){if(!m.length)return this;if(m.length<this._minEntries){for(let p=0,x=m.length;p<x;p++)this.insert(m[p]);return this}m=this._build(m.slice(0,m.length),0,m.length-1,0);if(this._data.children.length)if(this._data.height===
m.height)this._splitRoot(this._data,m);else{if(this._data.height<m.height){const p=this._data;this._data=m;m=p}this._insert(m,this._data.height-m.height-1,!0)}else this._data=m;return this};q.insert=function(m){m&&this._insert(m,this._data.height-1);return this};q.clear=function(){this._data=new l([]);return this};q.remove=function(m){if(!m)return this;let p=this._data,x=null,C=0,J=!1,P;const O=this._toBBox(m);f.clear();for(y.clear();p||0<f.length;){p||(p=S.assumeNonNull(f.pop()),x=f.data[f.length-
1],C=y.pop()??0,J=!0);if(p.leaf&&(P=E.indexOf(p.children,m,p.children.length,p.indexHint),-1!==P)){p.children.splice(P,1);f.push(p);this._condense(f);break}J||p.leaf||!B(p,O)?x?(C++,p=x.children[C],J=!1):p=null:(f.push(p),y.push(C),C=0,x=p,p=p.children[0])}return this};q.toJSON=function(){return this._data};q.fromJSON=function(m){this._data=m;return this};q._all=function(m,p){for(W.clear();m;){if(!0===m.leaf)for(const x of m.children)p(x);else W.pushArray(m.children);m=W.pop()??null}};q._build=function(m,
p,x,C){var J=x-p+1,P=this._maxEntries;if(J<=P)return m=new l(m.slice(p,x+1)),r(m,this._toBBox),m;C||(C=Math.ceil(Math.log(J)/Math.log(P)),P=Math.ceil(J/P**(C-1)));const O=new I([]);O.height=C;J=Math.ceil(J/P);P=J*Math.ceil(Math.sqrt(P));for(D(m,p,x,P,this._compareMinX);p<=x;p+=P){const a=Math.min(p+P-1,x);D(m,p,a,J,this._compareMinY);for(let b=p;b<=a;b+=J)O.children.push(this._build(m,b,Math.min(b+J-1,a),C-1))}r(O,this._toBBox);return O};q._chooseSubtree=function(m,p,x,C){for(;;){C.push(p);if(!0===
p.leaf||C.length-1===x)break;let J=Infinity,P=Infinity,O=void 0;for(let a=0,b=p.children.length;a<b;a++){const e=p.children[a],v=u(e),c=(Math.max(e.maxX,m.maxX)-Math.min(e.minX,m.minX))*(Math.max(e.maxY,m.maxY)-Math.min(e.minY,m.minY))-v;c<P?(P=c,J=v<J?v:J,O=e):c===P&&v<J&&(J=v,O=e)}p=O||p.children[0]}return p};q._insert=function(m,p,x){var C=this._toBBox;x=x?m:C(m);f.clear();C=this._chooseSubtree(x,this._data,p,f);C.children.push(m);for(L(C,x);0<=p;)if(f.data[p].children.length>this._maxEntries)this._split(f,
p),p--;else break;this._adjustParentBBoxes(x,f,p)};q._split=function(m,p){const x=m.data[p];var C=x.children.length;const J=this._minEntries;this._chooseSplitAxis(x,J,C);(C=this._chooseSplitIndex(x,J,C))?(C=x.children.splice(C,x.children.length-C),C=x.leaf?new l(C):new I(C),C.height=x.height,r(x,this._toBBox),r(C,this._toBBox),p?m.data[p-1].children.push(C):this._splitRoot(x,C)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};q._splitRoot=function(m,p){this._data=
new I([m,p]);this._data.height=m.height+1;r(this._data,this._toBBox)};q._chooseSplitIndex=function(m,p,x){let C,J,P=void 0;C=J=Infinity;for(let a=p;a<=x-p;a++){var O=z(m,0,a,this._toBBox);const b=z(m,a,x,this._toBBox),e=Math.max(0,Math.min(O.maxX,b.maxX)-Math.max(O.minX,b.minX))*Math.max(0,Math.min(O.maxY,b.maxY)-Math.max(O.minY,b.minY));O=u(O)+u(b);e<C?(C=e,P=a,J=O<J?O:J):e===C&&O<J&&(J=O,P=a)}return P};q._chooseSplitAxis=function(m,p,x){const C=m.leaf?this._compareMinX:M,J=m.leaf?this._compareMinY:
F,P=this._allDistMargin(m,p,x,C);p=this._allDistMargin(m,p,x,J);P<p&&m.children.sort(C)};q._allDistMargin=function(m,p,x,C){m.children.sort(C);C=this._toBBox;var J=z(m,0,p,C);const P=z(m,x-p,x,C);let O=w(J)+w(P);for(let a=p;a<x-p;a++){const b=m.children[a];L(J,m.leaf?C(b):b);O+=w(J)}for(x=x-p-1;x>=p;x--)J=m.children[x],L(P,m.leaf?C(J):J),O+=w(P);return O};q._adjustParentBBoxes=function(m,p,x){for(;0<=x;x--)L(p.data[x],m)};q._condense=function(m){for(let p=m.length-1;0<=p;p--){const x=m.data[p];if(0===
x.children.length)if(0<p){const C=m.data[p-1],J=C.children;J.splice(E.indexOf(J,x,J.length,C.indexHint),1)}else this.clear();else r(x,this._toBBox)}};q._initFormat=function(m){const p=["return a"," - b",";"];this._compareMinX=new Function("a","b",p.join(m[0]));this._compareMinY=new Function("a","b",p.join(m[1]));this._toBBox=new Function("a","return {minX: a"+m[0]+", minY: a"+m[1]+", maxX: a"+m[2]+", maxY: a"+m[3]+"};")};return h}();const T=new H,W=new H,f=new H,y=new H({deallocator:void 0});H=function(){this.minY=
this.minX=Infinity;this.maxY=this.maxX=-Infinity};let n=function(h){function q(){var m=h.apply(this,arguments)||this;m.height=1;m.indexHint=new E.PositionHint;return m}A._inheritsLoose(q,h);return q}(H),l=function(h){function q(m){var p=h.call(this)||this;p.children=m;p.leaf=!0;return p}A._inheritsLoose(q,h);return q}(n),I=function(h){function q(m){var p=h.call(this)||this;p.children=m;p.leaf=!1;return p}A._inheritsLoose(q,h);return q}(n);g.BBox=H;g.PooledRBush=Q;Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var A={};(function(E){(function(S){S=S();void 0!==S&&(E.exports=S)})(function(){function S(r,z,L,M,F){for(;M>L;){if(600<M-L){var u=M-L+1,w=z-L+1,B=Math.log(u),N=.5*Math.exp(2*B/3);B=.5*Math.sqrt(B*N*(u-N)/u)*(0>w-u/2?-1:1);S(r,z,Math.max(L,Math.floor(z-w*N/u+B)),Math.min(M,Math.floor(z+(u-w)*N/u+B)),F)}u=r[z];w=L;N=M;H(r,L,z);for(0<F(r[M],u)&&H(r,L,M);w<N;){H(r,w,N);w++;for(N--;0>F(r[w],u);)w++;for(;0<F(r[N],
u);)N--}0===F(r[L],u)?H(r,L,N):(N++,H(r,N,M));N<=z&&(L=N+1);z<=N&&(M=N-1)}}function H(r,z,L){var M=r[z];r[z]=r[L];r[L]=M}function K(r,z){return r<z?-1:r>z?1:0}return function(r,z,L,M,F){S(r,z,L||0,M||r.length-1,F||K)}})})({get exports(){return A},set exports(E){A=E}});g.quickselect=A})},"esri/layers/support/MediaElementView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(g,A,E,S,H,K,r,z,L,M,F,u,w){g.MediaElementView=function(B){function N(D){return B.call(this,D)||this}A._inheritsLoose(N,B);A._createClass(N,[{key:"bounds",get:function(){const D=this.coords;return H.isNone(D)||H.isNone(D.extent)?null:u.fromExtent(D.extent)}},{key:"coords",get:function(){const D=H.unwrap(this.element.georeference)?.coords;return F.projectOrLoad(D,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return M.fromJSON(w.normalizeCentralMeridianSync(this.coords))}},
{key:"normalizedBounds",get:function(){const D=H.isSome(this.normalizedCoords)?this.normalizedCoords.extent:null;return H.isSome(D)?u.fromExtent(D):null}}]);return N}(S);E.__decorate([K.property()],g.MediaElementView.prototype,"spatialReference",void 0);E.__decorate([K.property()],g.MediaElementView.prototype,"element",void 0);E.__decorate([K.property()],g.MediaElementView.prototype,"bounds",null);E.__decorate([K.property()],g.MediaElementView.prototype,"coords",null);E.__decorate([K.property()],
g.MediaElementView.prototype,"normalizedCoords",null);E.__decorate([K.property()],g.MediaElementView.prototype,"normalizedBounds",null);g.MediaElementView=E.__decorate([L.subclass("esri.layers.support.MediaElementView")],g.MediaElementView);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../core/maybe ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),
function(g,A,E,S,H,K,r,z){function L(f,y){if(A.isNone(f))return null;var n=f.spatialReference,l=z.getInfo(n);f="toJSON"in f?f.toJSON():f;if(!l)return f;n=z.isWebMercator(n)?102100:4326;const I=r.cutParams[n].maxX,h=r.cutParams[n].minX;if(K.isPoint(f))return F(f,I,h);if(K.isMultipoint(f))f.points=f.points.map(q=>F(q,I,h));else{if(K.isExtent(f))return M(f,l);if(K.isPolygon(f)||K.isPolyline(f)){n=S.getBoundsXY(T,f);l=n[0];n=n[2];const q=2*r.offsetMagnitude(l,h)*I;f=0===q?f:r.updatePolyGeometry(f,q);
l+=q;n+=q;return n>I?D(f,I,y):l<h?D(f,h,y):f}}return f}function M(f,y){if(!y)return f;const n=u(f,y).map(l=>l.extent);return 2>n.length?n[0]||f:2<n.length?(f.xmin=y.valid[0],f.xmax=y.valid[1],f):{rings:n.map(l=>[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]])}}function F(f,y,n){if(Array.isArray(f)){var l=f[0];l>y?(n=r.offsetMagnitude(l,y),f[0]=l+-2*n*y):l<n&&(y=r.offsetMagnitude(l,n),f[0]=l+-2*y*n)}else l=f.x,l>y?(n=r.offsetMagnitude(l,y),f.x+=-2*n*y):l<n&&(y=r.offsetMagnitude(l,
n),f.x+=-2*y*n);return f}function u(f,y){const n=[],{ymin:l,ymax:I,xmin:h,xmax:q}=f;var m=f.xmax-f.xmin;const [p,x]=y.valid,{x:C,frameId:J}=w(f.xmin,y),{x:P,frameId:O}=w(f.xmax,y);f=C===P&&0<m;if(m>2*x){m={xmin:h<q?C:P,ymin:l,xmax:x,ymax:I};f={xmin:p,ymin:l,xmax:h<q?P:C,ymax:I};y={xmin:0,ymin:l,xmax:x,ymax:I};const a={xmin:p,ymin:l,xmax:0,ymax:I},b=[],e=[];B(m,y)&&b.push(J);B(m,a)&&e.push(J);B(f,y)&&b.push(O);B(f,a)&&e.push(O);for(let v=J+1;v<O;v++)b.push(v),e.push(v);n.push(new Q(m,[J]),new Q(f,
[O]),new Q(y,b),new Q(a,e))}else C>P||f?n.push(new Q({xmin:C,ymin:l,xmax:x,ymax:I},[J]),new Q({xmin:p,ymin:l,xmax:P,ymax:I},[O])):n.push(new Q({xmin:C,ymin:l,xmax:P,ymax:I},[J]));return n}function w(f,y){const [n,l]=y.valid;y=2*l;var I=0;f>l?(I=Math.ceil(Math.abs(f-l)/y),f-=I*y):f<n&&(I=Math.ceil(Math.abs(f-n)/y),f+=I*y,I=-I);return{x:f,frameId:I}}function B(f,y){const {xmin:n,ymin:l,xmax:I,ymax:h}=y;return N(f,n,l)&&N(f,n,h)&&N(f,I,h)&&N(f,I,l)}function N(f,y,n){return y>=f.xmin&&y<=f.xmax&&n>=f.ymin&&
n<=f.ymax?!0:!1}function D(f,y,n=!0){const l=!K.isPolyline(f);l&&H.closeRings(f);if(n)return(new W).cut(f,y);n=l?f.rings:f.paths;const I=l?4:2,h=n.length;y*=-2;for(let q=0;q<h;q++){const m=n[q];if(m&&m.length>=I){const p=[];for(const x of m)p.push([x[0]+y,x[1]]);n.push(p)}}l?f.rings=n:f.paths=n;return f}let Q=function(f,y){this.extent=f;this.frameIds=y};const T=E.create();let W=function(){function f(){this._linesIn=[];this._linesOut=[]}var y=f.prototype;y.cut=function(n,l){this._xCut=l;if(n.rings)this._closed=
!0,l=n.rings,this._minPts=4;else if(n.paths)this._closed=!1,l=n.paths,this._minPts=2;else return null;for(var I of l)if(I&&!(I.length<this._minPts)){l=!0;for(const h of I)l?(this.moveTo(h),l=!1):this.lineTo(h);this._closed&&this.close()}this._pushLineIn();this._pushLineOut();l=[];for(const h of this._linesIn)h&&h.length>=this._minPts&&l.push(h);I=-2*this._xCut;for(const h of this._linesOut)if(h&&h.length>=this._minPts){for(const q of h)q[0]+=I;l.push(h)}this._closed?n.rings=l:n.paths=l;return n};
y.moveTo=function(n){this._pushLineIn();this._pushLineOut();this._prevSide=this._side(n[0]);this._moveTo(n[0],n[1],this._prevSide);this._firstPt=this._prevPt=n};y.lineTo=function(n){const l=this._side(n[0]);if(-1===l*this._prevSide){const I=this._intersect(this._prevPt,n);this._lineTo(this._xCut,I,0);this._prevSide=0}this._lineTo(n[0],n[1],l);this._prevSide=l;this._prevPt=n};y.close=function(){const n=this._firstPt,l=this._prevPt;n[0]===l[0]&&n[1]===l[1]||this.lineTo(n);this._checkClosingPt(this._lineIn);
this._checkClosingPt(this._lineOut)};y._moveTo=function(n,l,I){this._closed?(this._lineIn.push([0>=I?n:this._xCut,l]),this._lineOut.push([0<=I?n:this._xCut,l])):(0>=I&&this._lineIn.push([n,l]),0<=I&&this._lineOut.push([n,l]))};y._lineTo=function(n,l,I){this._closed?(this._addPolyVertex(this._lineIn,0>=I?n:this._xCut,l),this._addPolyVertex(this._lineOut,0<=I?n:this._xCut,l)):0>I?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([n,l])):0<I?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([n,
l])):0>this._prevSide?(this._lineIn.push([n,l]),this._lineOut.push([n,l])):0<this._prevSide&&(this._lineOut.push([n,l]),this._lineIn.push([n,l]))};y._addPolyVertex=function(n,l,I){const h=n.length;1<h&&n[h-1][0]===l&&n[h-2][0]===l?n[h-1][1]=I:n.push([l,I])};y._checkClosingPt=function(n){const l=n.length;3<l&&n[0][0]===this._xCut&&n[l-2][0]===this._xCut&&n[1][0]===this._xCut&&(n[0][1]=n[l-2][1],n.pop())};y._side=function(n){return n<this._xCut?-1:n>this._xCut?1:0};y._intersect=function(n,l){return n[1]+
(this._xCut-n[0])/(l[0]-n[0])*(l[1]-n[1])};y._pushLineIn=function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn);this._lineIn=[]};y._pushLineOut=function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut);this._lineOut=[]};return f}();g.CutVertical=W;g.normalizeCentralMeridianForDisplay=function(f){return L(f,!1)};g.normalizeCentralMeridianSync=function(f){return L(f,!0)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/VideoElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),function(g,A,E,S,H,K,r,z,L){K=function(M){function F(w){w=M.call(this,w)||this;w.content=null;w.type="video";return w}g._inheritsLoose(F,M);var u=F.prototype;u.load=
function(){const w=this.video;if("string"===typeof w){const B=document.createElement("video");B.src=w;B.crossOrigin="anonymous";B.autoplay=!0;B.muted=!0;B.loop=!0;this.addResolvingPromise(this._loadVideo(B).then(()=>{this._set("content",B)}))}else w instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(w).then(()=>{this._set("content",w)})):this.addResolvingPromise(Promise.reject(new E("video-element:invalid-video-type","Invalid video type",{video:w})));return Promise.resolve(this)};
u._loadVideo=function(w){return new Promise((B,N)=>{w.oncanplay=()=>{w.oncanplay=null;w.play().then(B,N)};"anonymous"!==w.crossOrigin&&(w.crossOrigin="anonymous",w.src=w.src)})};g._createClass(F,[{key:"video",set:function(w){"not-loaded"!==this.loadStatus?S.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded."):this._set("video",w)}}]);return F}(L);A.__decorate([H.property({readOnly:!0})],K.prototype,"content",void 0);A.__decorate([H.property()],K.prototype,
"video",null);return K=A.__decorate([z.subclass("esri.layers.support.VideoElement")],K)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Error ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/BlendLayer ./mixins/OperationalLayer ./mixins/ScaleRangeLayer ./support/ImageElement ./support/LocalMediaElementSource ./support/VideoElement".split(" "),function(g,
A,E,S,H,K,r,z,L,M,F,u,w,B,N,D,Q,T,W,f){function y(n){return"object"===typeof n&&null!=n&&"type"in n}r=function(n){function l(h){h=n.call(this,h)||this;h.effectiveSource=null;h.copyright=null;h.operationalLayerType="MediaLayer";h.spatialReference=null;h.type="media";h.source=new W;return h}g._inheritsLoose(l,n);var I=l.prototype;I.load=function(h){const q=this.source;if(!q)return this.addResolvingPromise(Promise.reject(new S("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer."))),
Promise.resolve(this);const m=y(q)?new W({elements:new E([q])}):q;this._set("effectiveSource",m);this.spatialReference&&(m.spatialReference=this.spatialReference);h=m.load(h).then(()=>{this.spatialReference=m.spatialReference});this.addResolvingPromise(h);return Promise.resolve(this)};I.destroy=function(){K.unwrap(this.effectiveSource)?.destroy();K.unwrap(this.source)?.destroy()};I.castSource=function(h){return h?Array.isArray(h)||h instanceof E?new W({elements:h}):h:null};I.readSource=function(h,
q,m){h="image"===q.mediaType?new T:"video"===q.mediaType?new f:null;h?.read(q,m);return h};I.writeSource=function(h,q,m,p){h&&y(h)&&"image"===h.type?h.write(q,p):p?.messages&&p?.messages?.push(new S("media-layer:unsupported-source","source must be an 'ImageElement'"))};g._createClass(l,[{key:"fullExtent",get:function(){return this.loaded?this.effectiveSource.fullExtent:null}},{key:"source",set:function(h){"not-loaded"!==this.loadStatus?H.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded."):
this._set("source",h)}}]);return l}(N.BlendLayer(Q.ScaleRangeLayer(D.OperationalLayer(r.MultiOriginJSONMixin(B)))));A.__decorate([z.property({readOnly:!0})],r.prototype,"effectiveSource",void 0);A.__decorate([z.property({type:String})],r.prototype,"copyright",void 0);A.__decorate([z.property({readOnly:!0})],r.prototype,"fullExtent",null);A.__decorate([z.property({type:["MediaLayer"]})],r.prototype,"operationalLayerType",void 0);A.__decorate([z.property({type:["show","hide"]})],r.prototype,"listMode",
void 0);A.__decorate([z.property({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1}}})],r.prototype,"source",null);A.__decorate([L.cast("source")],r.prototype,"castSource",null);A.__decorate([F.reader("source",["url"])],r.prototype,"readSource",null);A.__decorate([w.writer("source")],r.prototype,"writeSource",null);A.__decorate([z.property()],r.prototype,"spatialReference",void 0);A.__decorate([z.property({readOnly:!0})],r.prototype,"type",void 0);return r=A.__decorate([u.subclass("esri.layers.MediaLayer")],
r)});