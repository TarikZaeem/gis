// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(L,m,O,B,P,p,Q,V,M,I,N,W,J,R,C,X,x,y,Y,t,D,S,u,Z,aa,T){function ba(E){return null!=E&&E.every(g=>"exceedslimit"!==g.statisticType)}const ca=new Q.MemCacheStorage(2E6);let da=0,ia=function(){function E(c){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:Y.queryCapabilities};this.geometryType=c.geometryType;this.hasM=!!c.hasM;this.hasZ=!!c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.definitionExpression=c.definitionExpression;
this.featureStore=c.featureStore;this.aggregateAdapter=c.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=c.timeInfo;c.cacheSpatialQueries&&(this._geometryQueryCache=new Q.MemCache(da++ +"$$",ca));this.fieldsIndex=new Z(c.fields);c.scheduler&&c.priority&&(this._frameTask=c.scheduler.registerTask(c.priority))}var g=E.prototype;g.destroy=function(){this._frameTask=p.removeMaybe(this._frameTask);this.clearCache();p.destroyMaybe(this._geometryQueryCache);
this._changeHandle=p.removeMaybe(this._changeHandle);p.destroyMaybe(this.fieldsIndex)};g.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};g.executeQuery=function(){var c=m._asyncToGenerator(function*(a,b){try{return(yield this._executeQuery(a,{},b)).createQueryResponse()}catch(d){if(d!==u.QUERY_ENGINE_EMPTY_RESULT)throw d;return(new t.QueryEngineResult([],a,this)).createQueryResponse()}});return function(a,b){return c.apply(this,arguments)}}();
g.executeQueryForCount=function(){var c=m._asyncToGenerator(function*(a={},b){try{return(yield this._executeQuery(a,{returnGeometry:!1,returnCentroid:!1,outSR:null},b)).createQueryResponseForCount()}catch(d){if(d!==u.QUERY_ENGINE_EMPTY_RESULT)throw d;return 0}});return function(){return c.apply(this,arguments)}}();g.executeQueryForExtent=function(){var c=m._asyncToGenerator(function*(a,b){const d=a.outSR;try{const e=yield this._executeQuery(a,{returnGeometry:!0,returnCentroid:!1,outSR:null},b),f=
e.size;if(!f)return{count:0,extent:null};const k=yield this._getBounds(e.items,e.spatialReference,d||this.spatialReference);return{count:f,extent:k}}catch(e){if(e===u.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw e;}});return function(a,b){return c.apply(this,arguments)}}();g.executeQueryForIds=function(){var c=m._asyncToGenerator(function*(a,b){return this.executeQueryForIdSet(a,b).then(d=>Array.from(d))});return function(a,b){return c.apply(this,arguments)}}();g.executeQueryForIdSet=
function(){var c=m._asyncToGenerator(function*(a,b){try{const d=yield this._executeQuery(a,{returnGeometry:!0,returnCentroid:!1,outSR:null},b),e=d.items,f=new Set;yield this._reschedule(()=>{for(const k of e)f.add(d.featureAdapter.getObjectId(k))},b);return f}catch(d){if(d===u.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw d;}});return function(a,b){return c.apply(this,arguments)}}();g.executeQueryForSnapping=function(){var c=m._asyncToGenerator(function*(a,b){const {point:d,distance:e,types:f}=a;
if(f===t.SnappingTypes.NONE)return{candidates:[]};const k=yield this._reschedule(()=>this._checkQuerySupport(a.query),b),l=!C.equals(d.spatialReference,this.spatialReference);l&&(yield y.checkProjectionSupport(d.spatialReference,this.spatialReference));var h="number"===typeof e?e:e.x,q="number"===typeof e?e:e.y;h={xmin:d.x-h,xmax:d.x+h,ymin:d.y-q,ymax:d.y+q,spatialReference:d.spatialReference};h=l?y.project(h,this.spatialReference):h;if(!h)return{candidates:[]};q=(yield R.normalizeCentralMeridian(J.fromJSON(d),
null,{signal:b}))[0];const n=(yield R.normalizeCentralMeridian(J.fromJSON(h),null,{signal:b}))[0];if(p.isNone(q)||p.isNone(n))return{candidates:[]};const r=new t.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(n.toJSON())),b),k,this);yield this._reschedule(()=>this._executeObjectIdsQuery(r),b);yield this._reschedule(()=>this._executeTimeQuery(r),b);yield this._reschedule(()=>this._executeAttributesQuery(r),b);b=q.toJSON();b=l?y.project(b,this.spatialReference):
b;return r.createSnappingResponse({...a,point:b,distance:l?Math.max(h.xmax-h.xmin,h.ymax-h.ymin)/2:e},d.spatialReference)});return function(a,b){return c.apply(this,arguments)}}();g.executeQueryForLatestObservations=function(){var c=m._asyncToGenerator(function*(a,b){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new B("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:a,timeInfo:this.timeInfo});try{const d=yield this._executeQuery(a,{},b);yield this._reschedule(()=>
this._filterLatest(d),b);return d.createQueryResponse()}catch(d){if(d!==u.QUERY_ENGINE_EMPTY_RESULT)throw d;return(new t.QueryEngineResult([],a,this)).createQueryResponse()}});return function(a,b){return c.apply(this,arguments)}}();g.executeQueryForSummaryStatistics=function(){var c=m._asyncToGenerator(function*(a={},b,d){const {field:e,normalizationField:f,valueExpression:k}=b;return(yield this._getQueryEngineResultForStats(a,{field:e,normalizationField:f,valueExpression:k},d)).createSummaryStatisticsResponse(b)});
return function(){return c.apply(this,arguments)}}();g.executeQueryForUniqueValues=function(){var c=m._asyncToGenerator(function*(a={},b,d){const {field:e,field2:f,field3:k,valueExpression:l}=b;return(yield this._getQueryEngineResultForStats(a,{field:e,field2:f,field3:k,valueExpression:l},d)).createUniqueValuesResponse(b)});return function(){return c.apply(this,arguments)}}();g.executeQueryForClassBreaks=function(){var c=m._asyncToGenerator(function*(a={},b,d){const {field:e,normalizationField:f,
valueExpression:k}=b;return(yield this._getQueryEngineResultForStats(a,{field:e,normalizationField:f,valueExpression:k},d)).createClassBreaksResponse(b)});return function(){return c.apply(this,arguments)}}();g.executeQueryForHistogram=function(){var c=m._asyncToGenerator(function*(a={},b,d){const {field:e,normalizationField:f,valueExpression:k}=b;return(yield this._getQueryEngineResultForStats(a,{field:e,normalizationField:f,valueExpression:k},d)).createHistogramResponse(b)});return function(){return c.apply(this,
arguments)}}();g.fetchRecomputedExtents=function(){var c=m._asyncToGenerator(function*(a){const [b,d]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),p.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=S.getTimeExtent(this.timeInfo,this.featureStore)]);V.throwIfAborted(a);
return{fullExtent:b,timeExtent:d}});return function(a){return c.apply(this,arguments)}}();g._getBounds=function(){var c=m._asyncToGenerator(function*(a,b,d){const e=I.set(I.create(),I.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(a,f=>I.expandWithAABB(e,f));a={xmin:e[0],ymin:e[1],xmax:e[3],ymax:e[4],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(e[2])&&isFinite(e[5])&&(a.zmin=e[2],a.zmax=e[5]);b=y.project(a,b,d);b.spatialReference=u.cleanFromGeometryEngine(d);
0===b.xmax-b.xmin&&(d=M.getMetersPerUnitForSR(b.spatialReference),b.xmin-=d,b.xmax+=d);0===b.ymax-b.ymin&&(d=M.getMetersPerUnitForSR(b.spatialReference),b.ymin-=d,b.ymax+=d);this.hasZ&&null!=b.zmin&&null!=b.zmax&&0===b.zmax-b.zmin&&(d=M.getMetersPerUnitForSR(b.spatialReference),b.zmin-=d,b.zmax+=d);return b});return function(a,b,d){return c.apply(this,arguments)}}();g._schedule=function(){var c=m._asyncToGenerator(function*(a,b){return p.isSome(this._frameTask)?this._frameTask.schedule(a,b):a(T.noBudget)});
return function(a,b){return c.apply(this,arguments)}}();g._reschedule=function(){var c=m._asyncToGenerator(function*(a,b){return p.isSome(this._frameTask)?this._frameTask.reschedule(a,b):a(T.noBudget)});return function(a,b){return c.apply(this,arguments)}}();g._getAllFeaturesQueryEngineResult=function(){var c=m._asyncToGenerator(function*(a){return new t.QueryEngineResult(yield this._getAllFeatures(),a,this)});return function(a){return c.apply(this,arguments)}}();g._getAllFeatures=function(){var c=
m._asyncToGenerator(function*(){var a=this;if(p.isNone(this._allFeaturesPromise)){const e=[];this._allFeaturesPromise=m._asyncToGenerator(function*(){yield a.featureStore.forEach(f=>e.push(f))})().then(()=>e)}const b=this._allFeaturesPromise,d=yield b;return b===this._allFeaturesPromise?d.slice():this._getAllFeatures()});return function(){return c.apply(this,arguments)}}();g._executeQuery=function(){var c=m._asyncToGenerator(function*(a,b,d){a=P.clone(a);a=yield this._schedule(()=>u.normalizeQuery(a,
this.definitionExpression,this.spatialReference),d);a=yield this._reschedule(()=>this._checkQuerySupport(a),d);a={...a,...b};const e=yield this._reschedule(()=>this._executeSceneFilterQuery(a,d),d),f=yield this._reschedule(()=>this._executeGeometryQuery(a,e,d),d);yield this._reschedule(()=>this._executeAggregateIdsQuery(f),d);yield this._reschedule(()=>this._executeObjectIdsQuery(f),d);yield this._reschedule(()=>this._executeTimeQuery(f),d);yield this._reschedule(()=>this._executeAttributesQuery(f),
d);return f});return function(a,b,d){return c.apply(this,arguments)}}();g._executeSceneFilterQuery=function(){var c=m._asyncToGenerator(function*(a,b){var d=this;if(p.isNone(a.sceneFilter))return null;const {outSR:e,returnGeometry:f,returnCentroid:k}=a;var l=this.featureStore.featureSpatialReference,h=a.sceneFilter.geometry;const q=p.isNone(l)||C.equals(l,h.spatialReference)?h:y.project(h,l);if(!q)return null;l=f||k;l=C.isValid(e)&&!C.equals(this.spatialReference,e)&&l?function(){var w=m._asyncToGenerator(function*(v){return d._project(v,
e)});return function(v){return w.apply(this,arguments)}}():w=>w;const n=this.featureAdapter;h=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(q)),b);if("disjoint"===a.sceneFilter.spatialRelationship){if(!h.length)return null;const w=new Set;for(var r of h)w.add(n.getObjectId(r));const v=yield this._reschedule(()=>this._getAllFeatures(),b);r=yield this._reschedule(m._asyncToGenerator(function*(){const H=yield D.getSpatialQueryOperator("esriSpatialRelDisjoint",q,d.geometryType,
d.hasZ,d.hasM),z=yield d._runSpatialFilter(v,F=>!w.has(n.getObjectId(F))||H(n.getGeometry(F)),b);return new t.QueryEngineResult(z,a,d)}),b);return l(r)}if(!h.length)return new t.QueryEngineResult([],a,this);if(this._canExecuteSinglePass(q,a))return l(new t.QueryEngineResult(h,a,this));const K=yield D.getSpatialQueryOperator("esriSpatialRelContains",q,this.geometryType,this.hasZ,this.hasM);r=yield this._runSpatialFilter(h,w=>K(n.getGeometry(w)),b);return l(new t.QueryEngineResult(r,a,this))});return function(a,
b){return c.apply(this,arguments)}}();g._executeGeometryQuery=function(){var c=m._asyncToGenerator(function*(a,b,d){var e=this;if(p.isSome(b)&&0===b.items.length)return b;a=p.isSome(b)?b.query:a;const {geometry:f,outSR:k,spatialRel:l,returnGeometry:h,returnCentroid:q}=a;var n=this.featureStore.featureSpatialReference;const r=!f||p.isNone(n)||C.equals(n,f.spatialReference)?f:y.project(f,n),K=h||q,w=C.isValid(k)&&!C.equals(this.spatialReference,k),v=this._geometryQueryCache&&p.isNone(b)?w&&K?JSON.stringify({originalFilterGeometry:f,
spatialRelationship:l,outSpatialReference:k}):JSON.stringify({originalFilterGeometry:f,spatialRelationship:l}):null;n=v?this._geometryQueryCache.get(v):null;if(p.isSome(n))return new t.QueryEngineResult(n,a,this);n=function(){var G=m._asyncToGenerator(function*(A){w&&K&&(yield e._project(A,k));v&&e._geometryQueryCache.put(v,A.items,A.items.length+1);return A});return function(A){return G.apply(this,arguments)}}();if(!r)return n(p.isSome(b)?b:yield this._getAllFeaturesQueryEngineResult(a));const H=
this.featureAdapter;let z=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(f)),d);if("esriSpatialRelDisjoint"===l){if(!z.length)return n(p.isSome(b)?b:yield this._getAllFeaturesQueryEngineResult(a));const G=new Set;for(var F of z)G.add(H.getObjectId(F));const A=p.isSome(b)?b.items:yield this._reschedule(()=>this._getAllFeatures(),d);F=yield this._reschedule(m._asyncToGenerator(function*(){const ea=yield D.getSpatialQueryOperator(l,r,e.geometryType,e.hasZ,e.hasM),fa=yield e._runSpatialFilter(A,
U=>!G.has(H.getObjectId(U))||ea(H.getGeometry(U)),d);return new t.QueryEngineResult(fa,a,e)}),d);return n(F)}if(p.isSome(b)){const G=new O.PositionHint;z=z.filter(A=>0<=O.indexOf(b.items,A,b.items.length,G))}if(!z.length)return n=new t.QueryEngineResult([],a,this),v&&this._geometryQueryCache.put(v,n.items,1),n;if(this._canExecuteSinglePass(r,a))return n(new t.QueryEngineResult(z,a,this));const ha=yield D.getSpatialQueryOperator(l,r,this.geometryType,this.hasZ,this.hasM);F=yield this._runSpatialFilter(z,
G=>ha(H.getGeometry(G)),d);return n(new t.QueryEngineResult(F,a,this))});return function(a,b,d){return c.apply(this,arguments)}}();g._executeAggregateIdsQuery=function(c){if(0!==c.items.length&&c.query.aggregateIds&&c.query.aggregateIds.length&&!p.isNone(this.aggregateAdapter)){var a=new Set;for(const d of c.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(d).forEach(e=>a.add(e));var b=this.featureAdapter.getObjectId;c.items=c.items.filter(d=>a.has(b(d)))}};g._executeObjectIdsQuery=function(c){if(0!==
c.items.length&&c.query.objectIds&&c.query.objectIds.length){var a=new Set(c.query.objectIds),b=this.featureAdapter.getObjectId;c.items=c.items.filter(d=>a.has(b(d)))}};g._executeTimeQuery=function(c){if(0!==c.items.length){var a=S.getTimeOperator(this.timeInfo,c.query.timeExtent,this.featureAdapter);p.isNone(a)||(c.items=c.items.filter(a))}};g._executeAttributesQuery=function(c){if(0!==c.items.length){var a=x.getWhereClause(c.query.where,this.fieldsIndex);if(a){if(!a.isStandardized)throw new TypeError("Where clause is not standardized");
c.items=c.items.filter(b=>a.testFeature(b,this.featureAdapter))}}};g._runSpatialFilter=function(){var c=m._asyncToGenerator(function*(a,b,d){var e=this;if(!b)return a;if(p.isNone(this._frameTask))return a.filter(h=>b(h));let f=0;const k=[],l=function(){var h=m._asyncToGenerator(function*(q){for(;f<a.length;){const n=a[f++];b(n)&&(k.push(n),q.madeProgress());q.done&&(yield e._reschedule(r=>l(r),d))}});return function(q){return h.apply(this,arguments)}}();return this._reschedule(h=>l(h),d).then(()=>
k)});return function(a,b,d){return c.apply(this,arguments)}}();g._filterLatest=function(c){const {trackIdField:a,startTimeField:b,endTimeField:d}=this.timeInfo,e=d||b,f=new Map,k=this.featureAdapter.getAttribute;for(const l of c.items){const h=k(l,a),q=k(l,e),n=f.get(h);(!n||q>k(n,e))&&f.set(h,l)}c.items=Array.from(f.values())};g._canExecuteSinglePass=function(c,a){({spatialRel:a}=a);return D.canQueryWithRBush(c)&&("esriSpatialRelEnvelopeIntersects"===a||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===
a||"esriSpatialRelContains"===a||"esriSpatialRelWithin"===a))};g._project=function(){var c=m._asyncToGenerator(function*(a,b){if(!b||C.equals(this.spatialReference,b))return a;const d=this.featureAdapter;b=yield y.projectMany(a.items.map(e=>u.getGeometry(this.geometryType,this.hasZ,this.hasM,d.getGeometry(e))),this.spatialReference,b);a.items=b.map((e,f)=>d.cloneWithGeometry(a.items[f],X.convertFromGeometry(e,this.hasZ,this.hasM)));return a});return function(a,b){return c.apply(this,arguments)}}();
g._getQueryBBoxes=function(c){if(D.canQueryWithRBush(c)){if(J.isExtent(c))return[N.fromValues(c.xmin,c.ymin,c.xmax,c.ymax)];if(J.isPolygon(c))return c.rings.map(a=>N.fromValues(Math.min(a[0][0],a[2][0]),Math.min(a[0][1],a[2][1]),Math.max(a[0][0],a[2][0]),Math.max(a[0][1],a[2][1])))}return[W.getBoundsXY(N.create(),c)]};g._searchFeatures=function(){var c=m._asyncToGenerator(function*(a){const b=new Set;yield Promise.all(a.map(d=>this.featureStore.forEachInBounds(d,e=>b.add(e))));a=Array.from(b.values());
b.clear();return a});return function(a){return c.apply(this,arguments)}}();g._checkStatisticsSupport=function(){var c=m._asyncToGenerator(function*(a,b){if(0>(a.distance??0)||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text||a.outStatistics||a.groupByFieldsForStatistics||a.having||a.orderByFields)throw new B("feature-store:unsupported-query","Unsupported query options",{query:a});this._checkAttributesQuerySupport(a);return Promise.all([this._checkStatisticsParamsSupport(b),
D.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),y.checkProjectionSupport(this.spatialReference,a.outSR)]).then(()=>a)});return function(a,b){return c.apply(this,arguments)}}();g._checkStatisticsParamsSupport=function(){var c=m._asyncToGenerator(function*(a){var b=[];a.valueExpression&&({arcadeUtils:b}=yield aa.loadArcade(),b=b.extractFieldNames(a.valueExpression));a.field&&b.push(a.field);a.field2&&b.push(a.field2);a.field3&&b.push(a.field3);a.normalizationField&&b.push(a.normalizationField);
if(!b.length)throw new B("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:a});x.validateFields(this.fieldsIndex,b,"params contains missing fields")});return function(a){return c.apply(this,arguments)}}();g._checkQuerySupport=function(){var c=m._asyncToGenerator(function*(a){if(0>(a.distance??0)||null!=a.geometryPrecision||a.multipatchOption||a.pixelSize||a.relationParam||a.text)throw new B("feature-store:unsupported-query","Unsupported query options",
{query:a});this._checkAttributesQuerySupport(a);this._checkStatisticsQuerySupport(a);return Promise.all([D.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),y.checkProjectionSupport(this.spatialReference,a.outSR)]).then(()=>a)});return function(a){return c.apply(this,arguments)}}();g._checkAttributesQuerySupport=function(c){const {outFields:a,orderByFields:b,returnDistinctValues:d,outStatistics:e}=c,f=e?e.map(k=>k.outStatisticFieldName&&k.outStatisticFieldName.toLowerCase()).filter(Boolean):
[];if(b&&0<b.length){const k=b.map(l=>{const h=l.toLowerCase();return h.includes(" asc")?h.split(" asc")[0]:h.includes(" desc")?h.split(" desc")[0]:l}).filter(l=>!f.includes(l));x.validateFields(this.fieldsIndex,k,"orderByFields contains missing fields")}if(a&&0<a.length)x.validateFields(this.fieldsIndex,a,"outFields contains missing fields");else if(d)throw new B("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:c});x.validateWhere(this.fieldsIndex,
c.where)};g._checkStatisticsQuerySupport=function(c){const {outStatistics:a,groupByFieldsForStatistics:b,having:d}=c;var e=b&&b.length,f=a&&a.length;if(d){if(!e||!f)throw new B("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:c});x.validateHaving(this.fieldsIndex,d,a)}if(f&&ba(a)){f=a.map(k=>k.onStatisticField).filter(Boolean);x.validateFields(this.fieldsIndex,f,"onStatisticFields contains missing fields");e&&x.validateFields(this.fieldsIndex,
b,"groupByFieldsForStatistics contains missing fields");for(const k of a){const {onStatisticField:l,statisticType:h}=k;if(("percentile_disc"===h||"percentile_cont"===h)&&"statisticParameters"in k){if({statisticParameters:e}=k,!e)throw new B("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:k,query:c});}else if("count"!==h&&l&&x.hasInvalidFieldType(l,this.fieldsIndex))throw new B("feature-store:unsupported-query","outStatistics contains non-numeric fields",
{definition:k,query:c});}}};g._getQueryEngineResultForStats=function(){var c=m._asyncToGenerator(function*(a,b,d){a=P.clone(a);try{a=yield this._schedule(()=>u.normalizeQuery(a,this.definitionExpression,this.spatialReference),d);a=yield this._reschedule(()=>this._checkStatisticsSupport(a,b),d);const e=yield this._reschedule(()=>this._executeSceneFilterQuery(a,d),d),f=yield this._reschedule(()=>this._executeGeometryQuery(a,e,d),d);yield this._reschedule(()=>this._executeAggregateIdsQuery(f),d);yield this._reschedule(()=>
this._executeObjectIdsQuery(f),d);yield this._reschedule(()=>this._executeTimeQuery(f),d);yield this._reschedule(()=>this._executeAttributesQuery(f),d);return f}catch(e){if(e!==u.QUERY_ENGINE_EMPTY_RESULT)throw e;return new t.QueryEngineResult([],a,this)}});return function(a,b,d){return c.apply(this,arguments)}}();m._createClass(E,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return E}();L.Feature=function(E,g=null,c,a,b){this.attributes=E;this.geometry=c;this.centroid=
a;this.filterFlags=b;this.groupId=-1;this.displayId=g};L.QueryEngine=ia;Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})});