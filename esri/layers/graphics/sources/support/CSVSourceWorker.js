// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/ensureType ./arrayUtils ./accessorSupport/decorators/subclass".split(" "),function(h,f,la,ba,P,S,K,u,m,n){function A(){A=f._asyncToGenerator(function*(Q,T,aa){return(yield S.eachAlways(Q.map((C,q)=>T.apply(aa,[C,q])))).map(C=>C.value)});return A.apply(this,arguments)}function R(Q){return{ok:!0,
value:Q}}function J(Q){return{ok:!1,error:Q}}function g(Q){return P.isSome(Q)&&!0===Q.ok?Q.value:null}function w(Q){return P.isSome(Q)&&!1===Q.ok?Q.error:null}function d(){d=f._asyncToGenerator(function*(Q){if(P.isNone(Q))return{ok:!1,error:Error("no promise provided")};try{return R(yield Q)}catch(T){return J(T)}});return d.apply(this,arguments)}function p(){p=f._asyncToGenerator(function*(Q){try{return R(yield Q)}catch(T){return S.throwIfAbortError(T),J(T)}});return p.apply(this,arguments)}let G=
function(Q){function T(C,q){var z=Q.call(this,{})||this;z._result=null;z._abortHandle=null;z.abort=()=>{z._abortController=P.abortMaybe(z._abortController)};z.remove=z.abort;z._abortController=new AbortController;const {signal:E}=z._abortController;z.promise=C(E);z.promise.then(O=>{z._result=R(O);z._cleanup()},O=>{z._result=J(O);z._cleanup()});z._abortHandle=S.onAbort(q,z.abort);return z}f._inheritsLoose(T,Q);var aa=T.prototype;aa.normalizeCtorArgs=function(){return{}};aa.destroy=function(){this.abort()};
aa._cleanup=function(){this._abortHandle=P.removeMaybe(this._abortHandle);this._abortController=null};f._createClass(T,[{key:"value",get:function(){return g(this._result)}},{key:"error",get:function(){return w(this._result)}},{key:"finished",get:function(){return P.isSome(this._result)}}]);return T}(ba);la.__decorate([K.property()],G.prototype,"value",null);la.__decorate([K.property()],G.prototype,"error",null);la.__decorate([K.property()],G.prototype,"finished",null);la.__decorate([K.property()],
G.prototype,"promise",void 0);la.__decorate([K.property()],G.prototype,"_result",void 0);G=la.__decorate([n.subclass("esri.core.asyncUtils.ReactiveTask")],G);h.assertResult=function(Q){if(!0===Q.ok)return Q.value;throw Q.error;};h.createTask=function(Q,T){return new G(Q,T)};h.forEach=function(Q,T,aa){return S.eachAlways(Q.map((C,q)=>T.apply(aa,[C,q])))};h.makeResultError=J;h.makeResultOk=R;h.map=function(Q,T,aa){return A.apply(this,arguments)};h.result=function(Q){return d.apply(this,arguments)};
h.resultError=w;h.resultOrAbort=function(Q){return p.apply(this,arguments)};h.resultValue=g;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J,g,w,d,p,G,Q,T,aa,C,q,z,E,O,F){function H(){return!!gb&&p.isLoaded()}function L(V){S.isNone(Gb)&&(Gb=Promise.all([p.load(),(new Promise((ha,Y)=>h(["../chunks/geometryEngineBase"],ha,Y))).then(ha=>ha.geometryEngineBase),new Promise((ha,Y)=>h(["./geometryAdapters/hydrated"],ha,Y))]));return Gb.then(([,ha,{hydratedAdapter:Y}])=>{K.throwIfAborted(V);db=Y;gb=ha.default;gb._enableProjection(p.pe);nb.notify()})}function I(V,ha,Y=null,qa=null){return Array.isArray(V)?0===
V.length?[]:x(db,V,V[0].spatialReference,ha,Y,qa):x(db,[V],V.spatialReference,ha,Y,qa)[0]}function x(V,ha,Y,qa,Ca=null,Ea=null){if(S.isNone(Y)||S.isNone(qa))return ha;if(W(Y,qa,Ca))return ha.map(Qa=>S.unwrap(ta(Qa,Y,qa)));if(S.isNone(Ca)){const Qa=z.cacheKey(Y,qa);void 0!==Pb[Qa]?Ca=Pb[Qa]:(Ca=l(Y,qa,void 0),S.isNone(Ca)&&(Ca=new z),Pb[Qa]=Ca)}if(S.isNone(gb)||S.isNone(V))throw new Wb;return S.isSome(Ea)?gb._project(V,ha,Y,qa,Ca,Ea):gb._project(V,ha,Y,qa,Ca)}function y(V,ha){if(!H())for(const Y of V)if(S.isSome(Y)&&
!E.equals(Y.spatialReference,ha)&&E.isValid(Y.spatialReference)&&E.isValid(ha)&&!W(Y.spatialReference,ha))return m.trackAccess(nb),{pending:L(),geometries:null};return{pending:null,geometries:V.map(Y=>S.isNone(Y)?null:E.equals(Y.spatialReference,ha)?Y:E.isValid(Y.spatialReference)&&E.isValid(ha)?t(Y,ha):null)}}function l(V,ha,Y=null){if(S.isNone(V)||S.isNone(ha))return null;if(S.isNone(gb)||S.isNone(db))throw new Wb;V=gb._getTransformation(db,V,ha,Y,Y?.spatialReference);return null!==V?z.fromGE(V):
null}function t(V,ha){try{const Y=I(V,ha);if(null==Y)return null;"xmin"in V&&"xmin"in Y&&(Y.zmin=V.zmin,Y.zmax=V.zmax);const qa=F.getGeometryZScaler(Y.type,V.spatialReference,ha);S.isSome(qa)&&qa(Y);return Y}catch(Y){if(!(Y instanceof Wb))throw Y;return null}}function W(V,ha,Y){return Y?!1:E.equals(V,ha)?!0:E.isValid(V)&&E.isValid(ha)&&!!ub(V,ha,Xb)}function ja(){ja=la._asyncToGenerator(function*(V,ha,Y,qa){if(H())return K.waitTick(qa);if(Array.isArray(V))for(const {source:Ca,dest:Ea,geographicTransformation:Qa}of V){if(!W(Ca,
Ea,Qa))return L(qa)}else if(!W(V,ha,Y))return L(qa);return K.waitTick(qa)});return ja.apply(this,arguments)}function ta(V,ha,Y){return V?"x"in V?ya(V,ha,new G,Y,0):"xmin"in V?La(V,ha,new w,Y,0):"rings"in V?Fa(V,ha,new Q,Y,0):"paths"in V?Ha(V,ha,new T,Y,0):"points"in V?Da(V,ha,new d,Y,0):null:null}function ya(V,ha,Y,qa,Ca){Za[0]=V.x;Za[1]=V.y;const Ea=V.z;Za[2]=void 0!==Ea?Ea:Ca;if(!Ua(Za,ha,0,Za,qa,0,1))return null;Y.x=Za[0];Y.y=Za[1];Y.spatialReference=qa;void 0===Ea?(Y.z=void 0,Y.hasZ=!1):(Y.z=
Za[2],Y.hasZ=!0);void 0===V.m?(Y.m=void 0,Y.hasM=!1):(Y.m=V.m,Y.hasM=!0);return Y}function Da(V,ha,Y,qa,Ca){const {points:Ea,hasZ:Qa,hasM:Va}=V;V=[];const lb=Ea.length,ib=[];for(var hb of Ea)ib.push(hb[0],hb[1],Qa?hb[2]:Ca);if(!Ua(ib,ha,0,ib,qa,0,lb))return null;for(ha=0;ha<lb;++ha){Ca=3*ha;hb=ib[Ca];const xb=ib[Ca+1];Qa&&Va?V.push([hb,xb,ib[Ca+2],Ea[ha][3]]):Qa?V.push([hb,xb,ib[Ca+2]]):Va?V.push([hb,xb,Ea[ha][2]]):V.push([hb,xb])}Y.points=V;Y.spatialReference=qa;Y.hasZ=Qa;Y.hasM=Va;return Y}function Ha(V,
ha,Y,qa,Ca){const {paths:Ea,hasZ:Qa,hasM:Va}=V;V=[];if(!jb(Ea,Qa??!1,Va??!1,ha,V,qa,Ca))return null;Y.paths=V;Y.spatialReference=qa;Y.hasZ=Qa;Y.hasM=Va;return Y}function Fa(V,ha,Y,qa,Ca){const {rings:Ea,hasZ:Qa,hasM:Va}=V;V=[];if(!jb(Ea,Qa??!1,Va??!1,ha,V,qa,Ca))return null;Y.rings=V;Y.spatialReference=qa;Y.hasZ=Qa;Y.hasM=Va;return Y}function La(V,ha,Y,qa,Ca){const {xmin:Ea,ymin:Qa,xmax:Va,ymax:lb,hasZ:ib,hasM:hb}=V;if(!Ja(Ea,Qa,ib?V.zmin:Ca,ha,Za,qa))return null;Y.xmin=Za[0];Y.ymin=Za[1];ib&&(Y.zmin=
Za[2]);if(!Ja(Va,lb,ib?V.zmax:Ca,ha,Za,qa))return null;Y.xmax=Za[0];Y.ymax=Za[1];ib&&(Y.zmax=Za[2]);hb&&(Y.mmin=V.mmin,Y.mmax=V.mmax);Y.spatialReference=qa;return Y}function Ja(V,ha,Y,qa,Ca,Ea){fb[0]=V;fb[1]=ha;fb[2]=Y;return Ua(fb,qa,0,Ca,Ea,0,1)}function Na(V,ha,Y,qa){if(S.isNone(ha)||S.isNone(qa)||2>V.length)return!1;2===V.length&&(fb[0]=V[0],fb[1]=V[1],fb[2]=0,V=fb);return Ua(V,ha,0,Y,qa,0,1)}function Ya(V,ha,Y){if(S.isNone(ha))return!1;ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(S.isNone(ha))return!1;
ha(V,0,fb,0);Y!==fb&&(Y[0]=fb[0],Y[1]=fb[1],2<Y.length&&(Y[2]=fb[2]));return!0}function Ua(V,ha,Y,qa,Ca,Ea,Qa=1){ha=ub(ha,Ca,Xb);if(S.isNone(ha))return!1;if(ha===ea){if(V===qa&&Y===Ea)return!0;Qa=Y+3*Qa;for(let Va=Y,lb=Ea;Va<Qa;Va++,lb++)qa[lb]=V[Va];return!0}Qa=Y+3*Qa;for(let Va=Y,lb=Ea;Va<Qa;Va+=3,lb+=3)ha(V,Va,qa,lb);return!0}function jb(V,ha,Y,qa,Ca,Ea,Qa=0){const Va=[];for(const lb of V)for(const ib of lb)Va.push(ib[0],ib[1],ha?ib[2]:Qa);if(!Ua(Va,qa,0,Va,Ea,0,Va.length/3))return!1;qa=0;Ca.length=
0;for(const lb of V){V=[];for(const ib of lb)ha&&Y?V.push([Va[qa++],Va[qa++],Va[qa++],ib[3]]):ha?V.push([Va[qa++],Va[qa++],Va[qa++]]):(Y?V.push([Va[qa++],Va[qa++],ib[2]]):V.push([Va[qa++],Va[qa++]]),qa++);Ca.push(V)}return!0}function kb(V,ha,Y,qa){ha=qa+ha;if(ha<qa/2||Y>ha)return Number.MAX_VALUE;V=Math.abs(Hb*V)+Math.asin(Y/ha);return V>=Math.PI/2?Number.MAX_VALUE:Y/Math.cos(V)}function mb(V,ha,Y){const qa=Math.sin(V);V=Math.cos(V);const Ca=Math.sin(ha);ha=Math.cos(ha);Y[0]=-qa;Y[4]=-Ca*V;Y[8]=ha*
V;Y[12]=0;Y[1]=V;Y[5]=-Ca*qa;Y[9]=ha*qa;Y[13]=0;Y[2]=0;Y[6]=ha;Y[10]=Ca;Y[14]=0;Y[3]=0;Y[7]=0;Y[11]=0;Y[15]=1;return Y}function c(V,ha,Y){mb(V,ha,Y);A.transpose(Y,Y);return Y}function r(V,ha){if(!V)return oa.UNKNOWN;if(ha.spatialReference===V)return ha.spatialReferenceId;ha.spatialReference=V;"metersPerUnit"in ha&&(ha.metersPerUnit=u.getMetersPerUnitForSR(V,1));return V.wkt===g.SphericalECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_ECEF:E.isWGS84(V)?ha.spatialReferenceId=oa.WGS84:
E.isWebMercator(V)?ha.spatialReferenceId=oa.WEB_MERCATOR:E.isPlateCarree(V)?ha.spatialReferenceId=oa.PLATE_CARREE:V.wkt===g.WGS84ECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.WGS84_ECEF:V.wkid===O.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=oa.CGCS2000:V.wkt===g.SphericalPCPFMarsLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:V.wkt===g.SphericalPCPFMoonLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:E.isMars(V)?ha.spatialReferenceId=oa.GCSMARS2000:E.isMoon(V)?ha.spatialReferenceId=
oa.GCSMOON2000:ha.spatialReferenceId=oa.UNKNOWN}function ea(V,ha,Y,qa){V!==Y&&(Y[qa++]=V[ha++],Y[qa++]=V[ha++],Y[qa]=V[ha])}function ka(V,ha,Y,qa){Y[qa++]=Rb*(V[ha++]/C.earth.radius);Y[qa++]=Rb*(Math.PI/2-2*Math.atan(Math.exp(-V[ha++]/C.earth.radius)));Y[qa]=V[ha]}function va(V,ha,Y,qa){ka(V,ha,Y,qa);pa(Y,qa,Y,qa)}function B(V,ha,Y,qa){ka(V,ha,Y,qa);Ga(Y,qa,Y,qa)}function N(V,ha,Y,qa,Ca){var Ea=.4999999*Math.PI;Ea=P.clamp(Hb*V[ha+1],-Ea,Ea);Ea=Math.sin(Ea);Y[qa++]=Hb*V[ha]*Ca.radius;Y[qa++]=Ca.halfSemiMajorAxis*
Math.log((1+Ea)/(1-Ea));Y[qa]=V[ha+2]}function da(V,ha,Y,qa){N(V,ha,Y,qa,C.earth)}function X(V,ha,Y,qa){Y[qa]=V[ha]*Yb;Y[qa+1]=V[ha+1]*Yb;Y[qa+2]=V[ha+2]}function ia(V,ha,Y,qa){Y[qa]=V[ha]*Sb;Y[qa+1]=V[ha+1]*Sb;Y[qa+2]=V[ha+2]}function na(V,ha,Y,qa){ka(V,ha,Y,qa);X(Y,qa,Y,qa)}function ra(V,ha,Y,qa,Ca){Ca+=V[ha+2];const Ea=Hb*V[ha+1];V=Hb*V[ha];ha=Math.cos(Ea);Y[qa++]=Math.cos(V)*ha*Ca;Y[qa++]=Math.sin(V)*ha*Ca;Y[qa]=Math.sin(Ea)*Ca}function U(V,ha,Y,qa){ra(V,ha,Y,qa,C.moon.radius)}function ca(V,ha,
Y,qa){ra(V,ha,Y,qa,C.mars.radius)}function pa(V,ha,Y,qa){ra(V,ha,Y,qa,C.earth.radius)}function wa(V,ha,Y,qa,Ca){var Ea=V[ha];const Qa=V[ha+1];ha=V[ha+2];V=Math.sqrt(Ea*Ea+Qa*Qa+ha*ha);ha=P.asinClamped(ha/(0===V?1:V));Ea=Math.atan2(Qa,Ea);Y[qa++]=Rb*Ea;Y[qa++]=Rb*ha;Y[qa]=V-Ca}function Ba(V,ha,Y,qa){wa(V,ha,Y,qa,C.moon.radius)}function Oa(V,ha,Y,qa){wa(V,ha,Y,qa,C.mars.radius)}function Ka(V,ha,Y,qa){wa(V,ha,Y,qa,C.earth.radius)}function Ra(V,ha,Y,qa){Ka(V,ha,Y,qa);da(Y,qa,Y,qa)}function Sa(V,ha,Y,
qa){Ka(V,ha,Y,qa);Ga(Y,qa,Y,qa)}function Ga(V,ha,Y,qa){var Ca=C.earth;const Ea=Hb*V[ha];var Qa=Hb*V[ha+1];V=V[ha+2];ha=Math.sin(Qa);Qa=Math.cos(Qa);const Va=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ha*ha);Y[qa++]=(Va+V)*Qa*Math.cos(Ea);Y[qa++]=(Va+V)*Qa*Math.sin(Ea);Y[qa++]=(Va*(1-Ca.eccentricitySquared)+V)*ha}function Ta(V,ha,Y,qa){var Ca=q.earthEllipsoidConstants,Ea=V[ha],Qa=V[ha+1];V=V[ha+2];let Va;ha=Math.abs(V);var lb=Ea*Ea+Qa*Qa;var ib=Math.sqrt(lb);var hb=lb+V*V;var xb=Math.sqrt(hb);Ea=
Math.atan2(Qa,Ea);var Ib=V*V/hb;hb=lb/hb;Qa=Ca.a2/xb;lb=Ca.a3-Ca.a4/xb;.3<hb?(Ib=ha/xb*(1+hb*(Ca.a1+Qa+Ib*lb)/xb),xb=Math.asin(Ib),Qa=Ib*Ib,hb=Math.sqrt(1-Qa)):(hb=ib/xb*(1-Ib*(Ca.a5-Qa-hb*lb)/xb),xb=Math.acos(hb),Qa=1-hb*hb,Ib=Math.sqrt(Qa));Va=1-C.earth.eccentricitySquared*Qa;Qa=C.earth.radius/Math.sqrt(Va);Ca=Ca.a6*Qa;Qa=ib-Qa*hb;lb=ha-Ca*Ib;ha=hb*Qa+Ib*lb;ib=hb*lb-Ib*Qa;Ca=ib/(Ca/Va+ha);xb+=Ca;0>V&&(xb=-xb);Y[qa++]=Rb*Ea;Y[qa++]=Rb*xb;Y[qa]=ha+ib*Ca/2}function xa(V,ha,Y,qa){Ta(V,ha,Y,qa);pa(Y,
qa,Y,qa)}function vb(V,ha,Y,qa){Ta(V,ha,Y,qa);da(Y,qa,Y,qa)}function ub(V,ha,Y=b()){return S.isNone(V)||S.isNone(ha)?null:qb(V,ha,Y).projector}function qb(V,ha,Y){if(S.isNone(V)||S.isNone(ha)||Y.source.spatialReference===V&&Y.dest.spatialReference===ha)return Y;const qa=r(V,Y.source),Ca=r(ha,Y.dest);qa===oa.UNKNOWN&&Ca===oa.UNKNOWN?E.equals(V,ha)?Y.projector=ea:Y.projector=null:Y.projector=zb[qa][Ca];return Y}function b(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},
dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:ea}}let gb=null,db=null,Gb=null,Pb={};const nb=new n.SimpleObservable;let Wb=function(V){function ha(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}la._inheritsLoose(ha,V);return ha}(ba);var oa;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";
V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(oa||(oa={}));const Yb=C.earth.radius*Math.PI/180,Sb=180/(C.earth.radius*Math.PI),zb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,
[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.CGCS2000]:{[oa.CGCS2000]:ea,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:X,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ga},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ca,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:U,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ka,[oa.WGS84_COMPARABLE_LON_LAT]:ka,[oa.SPHERICAL_ECEF]:va,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ea,[oa.PLATE_CARREE]:na,[oa.WGS84]:ka,[oa.WGS84_ECEF]:B},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Ta,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ta,[oa.WGS84_COMPARABLE_LON_LAT]:Ta,
[oa.SPHERICAL_ECEF]:xa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:vb,[oa.PLATE_CARREE]:function(V,ha,Y,qa){Ta(V,ha,Y,qa);X(Y,qa,Y,qa)},[oa.WGS84]:Ta,[oa.WGS84_ECEF]:ea},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ka,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ka,[oa.WGS84_COMPARABLE_LON_LAT]:Ka,[oa.SPHERICAL_ECEF]:ea,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Ra,[oa.PLATE_CARREE]:function(V,
ha,Y,qa){Ka(V,ha,Y,qa);X(Y,qa,Y,qa)},[oa.WGS84]:Ka,[oa.WGS84_ECEF]:Sa},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:Oa,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Oa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ea,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ba,[oa.LON_LAT]:Ba,[oa.WGS84_COMPARABLE_LON_LAT]:null,
[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:ea,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:ea,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:ea,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:ca,[oa.SPHERICAL_MOON_PCPF]:U,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ia,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ia,[oa.WGS84_COMPARABLE_LON_LAT]:ia,[oa.SPHERICAL_ECEF]:function(V,ha,Y,qa){ia(V,ha,Y,qa);pa(Y,qa,Y,qa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(V,ha,Y,qa){ia(V,ha,Y,qa);da(Y,qa,Y,qa)},[oa.PLATE_CARREE]:ea,[oa.WGS84]:ia,[oa.WGS84_ECEF]:function(V,ha,Y,qa){ia(V,ha,Y,
qa);Ga(Y,qa,Y,qa)}}},Kb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Zb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Xb=b(),kc=b(),Hb=P.deg2rad(1),Rb=P.rad2deg(1),fb=J.create(),Ab=J.create(),Bb=J.create(),Za=J.create(),hc=J.create();f.canProjectToWGS84ComparableLonLat=function(V){if(S.isNone(V))return!1;V=r(V,Kb);return!!zb[V][oa.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=W;f.computeENUToSphericalPCPFLocalRotation=mb;f.computeSphericalPCPFToENULocalRotation=c;f.computeTranslationToOriginAndRotation=
function(V,ha,Y,qa){if(S.isNone(V)||S.isNone(qa))return!1;var Ca=r(V,Kb),Ea=r(qa,Zb);if(Ca===Ea&&Ea!==oa.SPHERICAL_ECEF&&Ea!==oa.SPHERICAL_MARS_PCPF&&Ea!==oa.SPHERICAL_MOON_PCPF&&(Ca!==oa.UNKNOWN||E.equals(V,qa)))return A.fromTranslation(Y,ha),!0;if(Ea===oa.SPHERICAL_ECEF||Ea===oa.SPHERICAL_MARS_PCPF||Ea===oa.SPHERICAL_MOON_PCPF){Ca=zb[Ca][oa.LON_LAT];Ea=zb[oa.LON_LAT][Ea];if(S.isNone(Ca)||S.isNone(Ea))return!1;Ca(ha,0,Ab,0);Ea(Ab,0,Bb,0);mb(Hb*Ab[0],Hb*Ab[1],Y);Y[12]=Bb[0];Y[13]=Bb[1];Y[14]=Bb[2];
return!0}if((Ea===oa.WEB_MERCATOR||Ea===oa.PLATE_CARREE)&&(Ca===oa.WGS84||Ca===oa.CGCS2000&&Ea===oa.PLATE_CARREE||Ca===oa.SPHERICAL_ECEF||Ca===oa.WEB_MERCATOR)){V=zb[Ca][oa.LON_LAT];Ea=zb[oa.LON_LAT][Ea];if(S.isNone(V)||S.isNone(Ea))return!1;V(ha,0,Ab,0);Ea(Ab,0,Bb,0);Ca===oa.SPHERICAL_ECEF?c(Hb*Ab[0],Hb*Ab[1],Y):A.identity(Y);Y[12]=Bb[0];Y[13]=Bb[1];Y[14]=Bb[2];return!0}return!1};f.getProjectorName=function(V,ha){switch(ub(V,ha,Xb)){case ea:return"copy3";case pa:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";
case X:return"wgs84ToPlateCarree";case Ga:return"wgs84ToWGS84ECEF";case ka:return"webMercatorToWGS84";case va:return"webMercatorToSphericalECEF";case B:return"webMercatorToWGS84ECEF";case na:return"webMercatorToPlateCarree";case Ta:return"wgs84ECEFToWGS84";case xa:return"wgs84ECEFToSphericalECEF";case vb:return"wgs84ECEFToWebMercator";case Ka:return"sphericalECEFToWGS84";case Ra:return"sphericalECEFToWebMercator";case Oa:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";
case Sa:return"sphericalECEFToWGS84ECEF";case ca:return"mars2000ToSphericalPCPF";case U:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=l;f.getTransformations=function(V,ha,Y=null){if(S.isNone(gb)||S.isNone(db))throw new Wb;V=gb._getTransformationBySuitability(db,V,ha,Y,Y?.spatialReference);if(null!==V){ha=[];for(const qa of V)ha.push(z.fromGE(qa));return ha}return[]};f.initializeProjection=function(V,ha,Y,qa){return ja.apply(this,arguments)};f.isLoaded=H;f.load=L;f.localLinearScaleFactors=
function(V,ha,Y,qa){if(S.isNone(ha)||S.isNone(qa))return!1;const Ca=r(ha,Kb);var Ea=r(qa,Zb);if(Ca===Ea&&Ca!==oa.UNKNOWN||E.equals(ha,qa))return Y[0]=1,Y[1]=1,Y[2]=1,!0;if(Ca===oa.SPHERICAL_ECEF){ha=R.length(V);V=ha/Math.sqrt(V[0]*V[0]+V[1]*V[1]);ha/=C.earth.radius;if(Ea===oa.WEB_MERCATOR)return Y[0]=V*ha,Y[1]=V*ha,Y[2]=1,!0;if(Ea===oa.WGS84||Ea===oa.CGCS2000)return Ea=Sb,Y[0]=Ea*V*ha,Y[1]=Ea*ha,Y[2]=1,!0}else if(Ca===oa.PLATE_CARREE){if(Ea===oa.WGS84||Ea===oa.CGCS2000)return Y[0]=Sb,Y[1]=Sb,Y[2]=
1,!0;if(Ea===oa.WEB_MERCATOR)return Ea=V[1]/C.earth.radius,Y[0]=1,Y[1]=1/Math.cos(Ea),Y[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(V,ha,Y,qa){const Ca=Math.cos(Y);V[0]=Math.cos(ha)*Ca*qa;V[1]=Math.sin(ha)*Ca*qa;V[2]=Math.sin(Y)*qa};f.lonLatToWebMercatorComparable=N;f.project=I;f.projectBoundingRect=function(V,ha,Y,qa){if(null==V)return!1;if(E.equals(ha,qa))return aa.copy(Y,V),!0;fb[0]=V[0];fb[1]=V[1];fb[2]=0;if(!Ua(fb,ha,0,fb,qa,0,1))return!1;Y[0]=fb[0];Y[1]=fb[1];fb[0]=V[2];fb[1]=V[3];fb[2]=
0;if(!Ua(fb,ha,0,fb,qa,0,1))return!1;Y[2]=fb[0];Y[3]=fb[1];return!0};f.projectBoundingSphere=function(V,ha,Y,qa){if(S.isNone(ha)||S.isNone(qa))return!1;ha=qb(ha,qa,kc);if(ha.projector===ea)return Y[0]=V[0],Y[1]=V[1],Y[2]=V[2],Y[3]=V[3],!0;if(S.isNone(ha.projector))return!1;const {source:Ca,dest:Ea}=ha;if(Ea.spatialReferenceId===oa.WEB_MERCATOR){ha=zb[Ca.spatialReferenceId][oa.WGS84];if(S.isNone(ha))return!1;ha(V,0,Ab,0);da(Ab,0,Y,0);Y[3]=kb(Ab[1],V[2],V[3],C.earth.radius);return!0}if(Ca.spatialReferenceId!==
oa.WGS84&&Ca.spatialReferenceId!==oa.CGCS2000||Ea.spatialReferenceId!==oa.PLATE_CARREE)ha.projector(V,0,Y,0),Y[3]=V[3]*(Ca.metersPerUnit??1)/(Ea.metersPerUnit??1);else{qa=zb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Qa=V[3];S.isSome(zb[Ca.spatialReferenceId][oa.SPHERICAL_ECEF])&&S.isSome(qa)&&(Qa=kb(V[1],V[2],V[3],C.earth.radius));ha.projector(V,0,Y,0);Y[3]=Qa}return!0};f.projectBuffer=Ua;f.projectDirection=function(V,ha,Y,qa,Ca){R.copy(Za,V);R.add(hc,V,ha);Na(Za,Y,Za,Ca);Na(hc,Y,hc,Ca);R.subtract(qa,
hc,Za);R.normalize(qa,qa)};f.projectExtent=function(V,ha,Y=ha.spatialReference,qa=0){return S.isSome(V.spatialReference)&&S.isSome(Y)&&S.isSome(La(V,V.spatialReference,ha,Y,qa))};f.projectMany=x;f.projectMultipoint=function(V,ha,Y=ha.spatialReference,qa=0){return S.isSome(V.spatialReference)&&S.isSome(Y)&&S.isSome(Da(V,V.spatialReference,ha,Y,qa))};f.projectOrLoad=function(V,ha){V=y([V],ha);return S.isSome(V.pending)?{pending:V.pending,geometry:null}:S.isSome(V.geometries)?{pending:null,geometry:V.geometries[0]}:
{pending:null,geometry:null}};f.projectOrLoadMany=y;f.projectPoint=function(V,ha,Y=ha.spatialReference,qa=0){return S.isSome(Y)&&S.isSome(V.spatialReference)&&S.isSome(ya(V,V.spatialReference,ha,Y,qa))};f.projectPointToVector=function(V,ha,Y,qa=0){Za[0]=V.x;Za[1]=V.y;const Ca=V.z;Za[2]=void 0!==Ca?Ca:qa;return Ua(Za,V.spatialReference,0,ha,Y,0,1)};f.projectPointToWGS84ComparableLonLat=function(V,ha){Za[0]=V.x;Za[1]=V.y;const Y=V.z;Za[2]=void 0!==Y?Y:0;return Ya(Za,V.spatialReference,ha)};f.projectPolygon=
function(V,ha,Y=ha.spatialReference,qa=0){return S.isSome(V.spatialReference)&&S.isSome(Y)&&S.isSome(Fa(V,V.spatialReference,ha,Y,qa))};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ha,rings:Y},qa,Ca=0){ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(S.isNone(ha))return!1;V=V?Ea=>Ea:Ea=>R.set(Za,Ea[0],Ea[1],Ca);for(const Ea of Y){Y=[];for(const Qa of Ea){const Va=[0,0,Ca];ha(V(Qa),0,Va,0);Y.push(Va)}qa.push(Y)}return!0};f.projectPolyline=function(V,ha,Y=ha.spatialReference,
qa=0){return S.isSome(V.spatialReference)&&S.isSome(Y)&&S.isSome(Ha(V,V.spatialReference,ha,Y,qa))};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ha,paths:Y},qa,Ca=0){ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(S.isNone(ha))return!1;V=V?Ea=>Ea:Ea=>R.set(Za,Ea[0],Ea[1],Ca);for(const Ea of Y){Y=[];for(const Qa of Ea){const Va=[0,0,Ca];ha(V(Qa),0,Va,0);Y.push(Va)}qa.push(Y)}return!0};f.projectVectorToDehydratedPoint=function(V,ha,Y){return Ua(V,ha,0,Za,Y.spatialReference,
0,1)?(Y.x=Za[0],Y.y=Za[1],Y.z=Za[2],Y):null};f.projectVectorToPoint=function(V,ha,Y){if(S.isNone(ha)||S.isNone(Y))return null;const qa=new G({spatialReference:Y});return Ua(V,ha,0,Za,Y,0,1)?(qa.x=Za[0],qa.y=Za[1],qa.z=Za[2],qa):null};f.projectVectorToVector=Na;f.projectVectorToWGS84ComparableLonLat=function(V,ha,Y){return Ya(V,ha,Y)};f.projectWithoutEngine=ta;f.projectXYZToVector=Ja;f.sphericalPCPFtoLonLatElevation=wa;f.test={get loadPromise(){return Gb}};f.tryProjectWithZConversion=t;f.unload=function(){Gb=
db=gb=null;Pb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(h,f,la){la=function(ba){function P(){return ba.apply(this,arguments)||this}f._inheritsLoose(P,ba);P.prototype.notify=function(){var S=this._observers;if(S&&0<S.length){S=S.slice();for(const K of S)K.onInvalidated(),K.onCommitted()}};return P}(la.ObservableBase);
h.SimpleObservable=la;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(h,f,la){function ba(c,r){c[0]=r[0];c[1]=r[1];c[2]=r[2];c[3]=r[3];c[4]=r[4];c[5]=r[5];c[6]=r[6];c[7]=r[7];c[8]=r[8];c[9]=r[9];c[10]=r[10];c[11]=r[11];c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function P(c,r,ea,ka,va,B,N,da,X,ia,na,ra,U,ca,pa,wa,Ba){c[0]=r;c[1]=ea;c[2]=ka;c[3]=va;c[4]=B;c[5]=N;c[6]=da;c[7]=X;c[8]=ia;c[9]=
na;c[10]=ra;c[11]=U;c[12]=ca;c[13]=pa;c[14]=wa;c[15]=Ba;return c}function S(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function K(c,r){if(c===r){const ea=r[1],ka=r[2],va=r[3],B=r[6],N=r[7],da=r[11];c[1]=r[4];c[2]=r[8];c[3]=r[12];c[4]=ea;c[6]=r[9];c[7]=r[13];c[8]=ka;c[9]=B;c[11]=r[14];c[12]=va;c[13]=N;c[14]=da}else c[0]=r[0],c[1]=r[4],c[2]=r[8],c[3]=r[12],c[4]=r[1],c[5]=r[5],c[6]=r[9],c[7]=r[13],c[8]=r[2],c[9]=r[6],
c[10]=r[10],c[11]=r[14],c[12]=r[3],c[13]=r[7],c[14]=r[11],c[15]=r[15];return c}function u(c,r){m(c,r)||S(c);return c}function m(c,r){const ea=r[0],ka=r[1],va=r[2],B=r[3],N=r[4],da=r[5],X=r[6],ia=r[7],na=r[8],ra=r[9],U=r[10],ca=r[11],pa=r[12],wa=r[13],Ba=r[14];r=r[15];const Oa=ea*da-ka*N,Ka=ea*X-va*N,Ra=ea*ia-B*N,Sa=ka*X-va*da,Ga=ka*ia-B*da,Ta=va*ia-B*X,xa=na*wa-ra*pa,vb=na*Ba-U*pa,ub=na*r-ca*pa,qb=ra*Ba-U*wa,b=ra*r-ca*wa,gb=U*r-ca*Ba;let db=Oa*gb-Ka*b+Ra*qb+Sa*ub-Ga*vb+Ta*xa;if(!db)return null;db=
1/db;c[0]=(da*gb-X*b+ia*qb)*db;c[1]=(va*b-ka*gb-B*qb)*db;c[2]=(wa*Ta-Ba*Ga+r*Sa)*db;c[3]=(U*Ga-ra*Ta-ca*Sa)*db;c[4]=(X*ub-N*gb-ia*vb)*db;c[5]=(ea*gb-va*ub+B*vb)*db;c[6]=(Ba*Ra-pa*Ta-r*Ka)*db;c[7]=(na*Ta-U*Ra+ca*Ka)*db;c[8]=(N*b-da*ub+ia*xa)*db;c[9]=(ka*ub-ea*b-B*xa)*db;c[10]=(pa*Ga-wa*Ra+r*Oa)*db;c[11]=(ra*Ra-na*Ga-ca*Oa)*db;c[12]=(da*vb-N*qb-X*xa)*db;c[13]=(ea*qb-ka*vb+va*xa)*db;c[14]=(wa*Ka-pa*Sa-Ba*Oa)*db;c[15]=(na*Sa-ra*Ka+U*Oa)*db;return c}function n(c,r){const ea=r[0],ka=r[1],va=r[2],B=r[3],
N=r[4],da=r[5],X=r[6],ia=r[7],na=r[8],ra=r[9],U=r[10],ca=r[11],pa=r[12],wa=r[13],Ba=r[14];r=r[15];c[0]=da*(U*r-ca*Ba)-ra*(X*r-ia*Ba)+wa*(X*ca-ia*U);c[1]=-(ka*(U*r-ca*Ba)-ra*(va*r-B*Ba)+wa*(va*ca-B*U));c[2]=ka*(X*r-ia*Ba)-da*(va*r-B*Ba)+wa*(va*ia-B*X);c[3]=-(ka*(X*ca-ia*U)-da*(va*ca-B*U)+ra*(va*ia-B*X));c[4]=-(N*(U*r-ca*Ba)-na*(X*r-ia*Ba)+pa*(X*ca-ia*U));c[5]=ea*(U*r-ca*Ba)-na*(va*r-B*Ba)+pa*(va*ca-B*U);c[6]=-(ea*(X*r-ia*Ba)-N*(va*r-B*Ba)+pa*(va*ia-B*X));c[7]=ea*(X*ca-ia*U)-N*(va*ca-B*U)+na*(va*ia-
B*X);c[8]=N*(ra*r-ca*wa)-na*(da*r-ia*wa)+pa*(da*ca-ia*ra);c[9]=-(ea*(ra*r-ca*wa)-na*(ka*r-B*wa)+pa*(ka*ca-B*ra));c[10]=ea*(da*r-ia*wa)-N*(ka*r-B*wa)+pa*(ka*ia-B*da);c[11]=-(ea*(da*ca-ia*ra)-N*(ka*ca-B*ra)+na*(ka*ia-B*da));c[12]=-(N*(ra*Ba-U*wa)-na*(da*Ba-X*wa)+pa*(da*U-X*ra));c[13]=ea*(ra*Ba-U*wa)-na*(ka*Ba-va*wa)+pa*(ka*U-va*ra);c[14]=-(ea*(da*Ba-X*wa)-N*(ka*Ba-va*wa)+pa*(ka*X-va*da));c[15]=ea*(da*U-X*ra)-N*(ka*U-va*ra)+na*(ka*X-va*da);return c}function A(c){const r=c[0],ea=c[1],ka=c[2],va=c[3],
B=c[4],N=c[5],da=c[6],X=c[7],ia=c[8],na=c[9],ra=c[10],U=c[11],ca=c[12],pa=c[13],wa=c[14];c=c[15];return(r*N-ea*B)*(ra*c-U*wa)-(r*da-ka*B)*(na*c-U*pa)+(r*X-va*B)*(na*wa-ra*pa)+(ea*da-ka*N)*(ia*c-U*ca)-(ea*X-va*N)*(ia*wa-ra*ca)+(ka*X-va*da)*(ia*pa-na*ca)}function R(c,r,ea){const ka=r[0],va=r[1],B=r[2],N=r[3],da=r[4],X=r[5],ia=r[6],na=r[7],ra=r[8],U=r[9],ca=r[10],pa=r[11],wa=r[12],Ba=r[13],Oa=r[14];r=r[15];let Ka=ea[0],Ra=ea[1],Sa=ea[2],Ga=ea[3];c[0]=Ka*ka+Ra*da+Sa*ra+Ga*wa;c[1]=Ka*va+Ra*X+Sa*U+Ga*Ba;
c[2]=Ka*B+Ra*ia+Sa*ca+Ga*Oa;c[3]=Ka*N+Ra*na+Sa*pa+Ga*r;Ka=ea[4];Ra=ea[5];Sa=ea[6];Ga=ea[7];c[4]=Ka*ka+Ra*da+Sa*ra+Ga*wa;c[5]=Ka*va+Ra*X+Sa*U+Ga*Ba;c[6]=Ka*B+Ra*ia+Sa*ca+Ga*Oa;c[7]=Ka*N+Ra*na+Sa*pa+Ga*r;Ka=ea[8];Ra=ea[9];Sa=ea[10];Ga=ea[11];c[8]=Ka*ka+Ra*da+Sa*ra+Ga*wa;c[9]=Ka*va+Ra*X+Sa*U+Ga*Ba;c[10]=Ka*B+Ra*ia+Sa*ca+Ga*Oa;c[11]=Ka*N+Ra*na+Sa*pa+Ga*r;Ka=ea[12];Ra=ea[13];Sa=ea[14];Ga=ea[15];c[12]=Ka*ka+Ra*da+Sa*ra+Ga*wa;c[13]=Ka*va+Ra*X+Sa*U+Ga*Ba;c[14]=Ka*B+Ra*ia+Sa*ca+Ga*Oa;c[15]=Ka*N+Ra*na+Sa*pa+
Ga*r;return c}function J(c,r,ea){const ka=ea[0],va=ea[1];ea=ea[2];if(r===c)c[12]=r[0]*ka+r[4]*va+r[8]*ea+r[12],c[13]=r[1]*ka+r[5]*va+r[9]*ea+r[13],c[14]=r[2]*ka+r[6]*va+r[10]*ea+r[14],c[15]=r[3]*ka+r[7]*va+r[11]*ea+r[15];else{const B=r[0],N=r[1],da=r[2],X=r[3],ia=r[4],na=r[5],ra=r[6],U=r[7],ca=r[8],pa=r[9],wa=r[10],Ba=r[11];c[0]=B;c[1]=N;c[2]=da;c[3]=X;c[4]=ia;c[5]=na;c[6]=ra;c[7]=U;c[8]=ca;c[9]=pa;c[10]=wa;c[11]=Ba;c[12]=B*ka+ia*va+ca*ea+r[12];c[13]=N*ka+na*va+pa*ea+r[13];c[14]=da*ka+ra*va+wa*ea+
r[14];c[15]=X*ka+U*va+Ba*ea+r[15]}return c}function g(c,r,ea){const ka=ea[0],va=ea[1];ea=ea[2];c[0]=r[0]*ka;c[1]=r[1]*ka;c[2]=r[2]*ka;c[3]=r[3]*ka;c[4]=r[4]*va;c[5]=r[5]*va;c[6]=r[6]*va;c[7]=r[7]*va;c[8]=r[8]*ea;c[9]=r[9]*ea;c[10]=r[10]*ea;c[11]=r[11]*ea;c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function w(c,r,ea,ka){let va=ka[0],B=ka[1];ka=ka[2];let N=Math.sqrt(va*va+B*B+ka*ka);var da=void 0,X=void 0;let ia=void 0,na=void 0,ra=void 0,U=void 0,ca=void 0,pa=void 0,wa=void 0,Ba=void 0,
Oa=void 0,Ka=void 0,Ra=void 0,Sa=void 0,Ga=void 0,Ta=void 0,xa=void 0,vb=void 0,ub=void 0,qb=void 0,b=void 0,gb=void 0;X=da=void 0;if(N<la.getEpsilon())return null;N=1/N;va*=N;B*=N;ka*=N;da=Math.sin(ea);X=Math.cos(ea);ia=1-X;na=r[0];ra=r[1];U=r[2];ca=r[3];pa=r[4];wa=r[5];Ba=r[6];Oa=r[7];Ka=r[8];Ra=r[9];Sa=r[10];Ga=r[11];Ta=va*va*ia+X;xa=B*va*ia+ka*da;vb=ka*va*ia-B*da;ub=va*B*ia-ka*da;qb=B*B*ia+X;b=ka*B*ia+va*da;gb=va*ka*ia+B*da;da=B*ka*ia-va*da;X=ka*ka*ia+X;c[0]=na*Ta+pa*xa+Ka*vb;c[1]=ra*Ta+wa*xa+
Ra*vb;c[2]=U*Ta+Ba*xa+Sa*vb;c[3]=ca*Ta+Oa*xa+Ga*vb;c[4]=na*ub+pa*qb+Ka*b;c[5]=ra*ub+wa*qb+Ra*b;c[6]=U*ub+Ba*qb+Sa*b;c[7]=ca*ub+Oa*qb+Ga*b;c[8]=na*gb+pa*da+Ka*X;c[9]=ra*gb+wa*da+Ra*X;c[10]=U*gb+Ba*da+Sa*X;c[11]=ca*gb+Oa*da+Ga*X;r!==c&&(c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);return c}function d(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[4],B=r[5],N=r[6],da=r[7],X=r[8],ia=r[9],na=r[10],ra=r[11];r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[12]=r[12],c[13]=r[13],c[14]=r[14],
c[15]=r[15]);c[4]=va*ea+X*ka;c[5]=B*ea+ia*ka;c[6]=N*ea+na*ka;c[7]=da*ea+ra*ka;c[8]=X*ea-va*ka;c[9]=ia*ea-B*ka;c[10]=na*ea-N*ka;c[11]=ra*ea-da*ka;return c}function p(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[0],B=r[1],N=r[2],da=r[3],X=r[8],ia=r[9],na=r[10],ra=r[11];r!==c&&(c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=va*ea-X*ka;c[1]=B*ea-ia*ka;c[2]=N*ea-na*ka;c[3]=da*ea-ra*ka;c[8]=va*ka+X*ea;c[9]=B*ka+ia*ea;c[10]=N*ka+na*ea;c[11]=da*ka+
ra*ea;return c}function G(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[0],B=r[1],N=r[2],da=r[3],X=r[4],ia=r[5],na=r[6],ra=r[7];r!==c&&(c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=va*ea+X*ka;c[1]=B*ea+ia*ka;c[2]=N*ea+na*ka;c[3]=da*ea+ra*ka;c[4]=X*ea-va*ka;c[5]=ia*ea-B*ka;c[6]=na*ea-N*ka;c[7]=ra*ea-da*ka;return c}function Q(c,r){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=r[0];c[13]=r[1];
c[14]=r[2];c[15]=1;return c}function T(c,r){c[0]=r[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=r[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function aa(c,r,ea){if(0===r)return S(c);let ka=ea[0],va=ea[1];ea=ea[2];let B=Math.sqrt(ka*ka+va*va+ea*ea),N=void 0,da=void 0,X=void 0;if(B<la.getEpsilon())return null;B=1/B;ka*=B;va*=B;ea*=B;N=Math.sin(r);da=Math.cos(r);X=1-da;c[0]=ka*ka*X+da;c[1]=va*ka*X+ea*N;c[2]=ea*ka*X-va*N;c[3]=0;c[4]=ka*va*X-ea*N;c[5]=va*va*X+da;
c[6]=ea*va*X+ka*N;c[7]=0;c[8]=ka*ea*X+va*N;c[9]=va*ea*X-ka*N;c[10]=ea*ea*X+da;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,r){const ea=Math.sin(r);r=Math.cos(r);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,r){const ea=Math.sin(r);r=Math.cos(r);c[0]=r;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,
r){const ea=Math.sin(r);r=Math.cos(r);c[0]=r;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function E(c,r,ea){var ka=r[0],va=r[1],B=r[2],N=r[3],da=ka+ka,X=va+va;const ia=B+B;r=ka*da;const na=ka*X;ka*=ia;const ra=va*X;va*=ia;B*=ia;da*=N;X*=N;N*=ia;c[0]=1-(ra+B);c[1]=na+N;c[2]=ka-X;c[3]=0;c[4]=na-N;c[5]=1-(r+B);c[6]=va+da;c[7]=0;c[8]=ka+X;c[9]=va-da;c[10]=1-(r+ra);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}
function O(c,r){const ea=mb,ka=-r[0],va=-r[1],B=-r[2],N=r[3],da=r[4],X=r[5],ia=r[6],na=r[7],ra=ka*ka+va*va+B*B+N*N;0<ra?(ea[0]=2*(da*N+na*ka+X*B-ia*va)/ra,ea[1]=2*(X*N+na*va+ia*ka-da*B)/ra,ea[2]=2*(ia*N+na*B+da*va-X*ka)/ra):(ea[0]=2*(da*N+na*ka+X*B-ia*va),ea[1]=2*(X*N+na*va+ia*ka-da*B),ea[2]=2*(ia*N+na*B+da*va-X*ka));E(c,r,ea);return c}function F(c,r){c[0]=r[12];c[1]=r[13];c[2]=r[14];return c}function H(c,r){const ea=r[0],ka=r[1],va=r[2],B=r[4],N=r[5],da=r[6],X=r[8],ia=r[9];r=r[10];c[0]=Math.sqrt(ea*
ea+ka*ka+va*va);c[1]=Math.sqrt(B*B+N*N+da*da);c[2]=Math.sqrt(X*X+ia*ia+r*r);return c}function L(c,r){const ea=r[0]+r[5]+r[10];let ka=0;0<ea?(ka=2*Math.sqrt(ea+1),c[3]=.25*ka,c[0]=(r[6]-r[9])/ka,c[1]=(r[8]-r[2])/ka,c[2]=(r[1]-r[4])/ka):r[0]>r[5]&&r[0]>r[10]?(ka=2*Math.sqrt(1+r[0]-r[5]-r[10]),c[3]=(r[6]-r[9])/ka,c[0]=.25*ka,c[1]=(r[1]+r[4])/ka,c[2]=(r[8]+r[2])/ka):r[5]>r[10]?(ka=2*Math.sqrt(1+r[5]-r[0]-r[10]),c[3]=(r[8]-r[2])/ka,c[0]=(r[1]+r[4])/ka,c[1]=.25*ka,c[2]=(r[6]+r[9])/ka):(ka=2*Math.sqrt(1+
r[10]-r[0]-r[5]),c[3]=(r[1]-r[4])/ka,c[0]=(r[8]+r[2])/ka,c[1]=(r[6]+r[9])/ka,c[2]=.25*ka);return c}function I(c,r,ea,ka){var va=r[0],B=r[1],N=r[2],da=r[3],X=va+va,ia=B+B,na=N+N;r=va*X;const ra=va*ia;va*=na;const U=B*ia;B*=na;N*=na;X*=da;ia*=da;da*=na;na=ka[0];const ca=ka[1];ka=ka[2];c[0]=(1-(U+N))*na;c[1]=(ra+da)*na;c[2]=(va-ia)*na;c[3]=0;c[4]=(ra-da)*ca;c[5]=(1-(r+N))*ca;c[6]=(B+X)*ca;c[7]=0;c[8]=(va+ia)*ka;c[9]=(B-X)*ka;c[10]=(1-(r+U))*ka;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}
function x(c,r,ea,ka,va){var B=r[0],N=r[1],da=r[2],X=r[3],ia=B+B,na=N+N,ra=da+da;r=B*ia;var U=B*na,ca=B*ra;B=N*na;N*=ra;var pa=da*ra;da=X*ia;na*=X;const wa=X*ra;var Ba=ka[0],Oa=ka[1];ra=ka[2];ka=va[0];X=va[1];va=va[2];ia=(1-(B+pa))*Ba;const Ka=(U+wa)*Ba;Ba*=ca-na;U=(U-wa)*Oa;pa=(1-(r+pa))*Oa;Oa*=N+da;ca=(ca+na)*ra;N=(N-da)*ra;r=(1-(r+B))*ra;c[0]=ia;c[1]=Ka;c[2]=Ba;c[3]=0;c[4]=U;c[5]=pa;c[6]=Oa;c[7]=0;c[8]=ca;c[9]=N;c[10]=r;c[11]=0;c[12]=ea[0]+ka-(ia*ka+U*X+ca*va);c[13]=ea[1]+X-(Ka*ka+pa*X+N*va);c[14]=
ea[2]+va-(Ba*ka+Oa*X+r*va);c[15]=1;return c}function y(c,r){var ea=r[0],ka=r[1],va=r[2];r=r[3];var B=ea+ea,N=ka+ka;const da=va+va;ea*=B;const X=ka*B;ka*=N;const ia=va*B,na=va*N;va*=da;B*=r;N*=r;r*=da;c[0]=1-ka-va;c[1]=X+r;c[2]=ia-N;c[3]=0;c[4]=X-r;c[5]=1-ea-va;c[6]=na+B;c[7]=0;c[8]=ia+N;c[9]=na-B;c[10]=1-ea-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function l(c,r,ea,ka,va,B,N){const da=1/(ea-r),X=1/(va-ka),ia=1/(B-N);c[0]=2*B*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*B*X;c[6]=0;c[7]=0;c[8]=
(ea+r)*da;c[9]=(va+ka)*X;c[10]=(N+B)*ia;c[11]=-1;c[12]=0;c[13]=0;c[14]=N*B*2*ia;c[15]=0;return c}function t(c,r,ea,ka,va){r=1/Math.tan(r/2);let B=void 0;c[0]=r/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=va&&Infinity!==va?(B=1/(ka-va),c[10]=(va+ka)*B,c[14]=2*va*ka*B):(c[10]=-1,c[14]=-2*ka);return c}function W(c,r,ea,ka){const va=Math.tan(r.upDegrees*Math.PI/180),B=Math.tan(r.downDegrees*Math.PI/180),N=Math.tan(r.leftDegrees*Math.PI/180);
r=Math.tan(r.rightDegrees*Math.PI/180);const da=2/(N+r),X=2/(va+B);c[0]=da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((N-r)*da*.5);c[9]=(va-B)*X*.5;c[10]=ka/(ea-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*ea/(ea-ka);c[15]=0;return c}function ja(c,r,ea,ka,va,B,N){const da=1/(r-ea),X=1/(ka-va),ia=1/(B-N);c[0]=-2*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ia;c[11]=0;c[12]=(r+ea)*da;c[13]=(va+ka)*X;c[14]=(N+B)*ia;c[15]=1;return c}function ta(c,r,ea,ka){var va=
void 0;let B=void 0;var N=void 0,da=void 0;let X=void 0,ia=void 0;var na=void 0,ra=void 0;let U=void 0,ca=void 0;const pa=r[0],wa=r[1];r=r[2];N=ka[0];da=ka[1];ka=ka[2];na=ea[0];ra=ea[1];ea=ea[2];va=la.getEpsilon();if(Math.abs(pa-na)<va&&Math.abs(wa-ra)<va&&Math.abs(r-ea)<va)return S(c);na=pa-na;ra=wa-ra;U=r-ea;ca=1/Math.sqrt(na*na+ra*ra+U*U);na*=ca;ra*=ca;U*=ca;va=da*U-ka*ra;B=ka*na-N*U;N=N*ra-da*na;(ca=Math.sqrt(va*va+B*B+N*N))?(ca=1/ca,va*=ca,B*=ca,N*=ca):N=B=va=0;da=ra*N-U*B;X=U*va-na*N;ia=na*
B-ra*va;(ca=Math.sqrt(da*da+X*X+ia*ia))?(ca=1/ca,da*=ca,X*=ca,ia*=ca):ia=X=da=0;c[0]=va;c[1]=da;c[2]=na;c[3]=0;c[4]=B;c[5]=X;c[6]=ra;c[7]=0;c[8]=N;c[9]=ia;c[10]=U;c[11]=0;c[12]=-(va*pa+B*wa+N*r);c[13]=-(da*pa+X*wa+ia*r);c[14]=-(na*pa+ra*wa+U*r);c[15]=1;return c}function ya(c,r,ea,ka){const va=r[0],B=r[1];r=r[2];var N=ka[0];const da=ka[1];var X=ka[2];ka=va-ea[0];let ia=B-ea[1];ea=r-ea[2];let na=ka*ka+ia*ia+ea*ea;0<na&&(na=1/Math.sqrt(na),ka*=na,ia*=na,ea*=na);let ra=da*ea-X*ia;X=X*ka-N*ea;N=N*ia-da*
ka;na=ra*ra+X*X+N*N;0<na&&(na=1/Math.sqrt(na),ra*=na,X*=na,N*=na);c[0]=ra;c[1]=X;c[2]=N;c[3]=0;c[4]=ia*N-ea*X;c[5]=ea*ra-ka*N;c[6]=ka*X-ia*ra;c[7]=0;c[8]=ka;c[9]=ia;c[10]=ea;c[11]=0;c[12]=va;c[13]=B;c[14]=r;c[15]=1;return c}function Da(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ha(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**
2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Fa(c,r,ea){c[0]=r[0]+ea[0];c[1]=r[1]+ea[1];c[2]=r[2]+ea[2];c[3]=r[3]+ea[3];c[4]=r[4]+ea[4];c[5]=r[5]+ea[5];c[6]=r[6]+ea[6];c[7]=r[7]+ea[7];c[8]=r[8]+ea[8];c[9]=r[9]+ea[9];c[10]=r[10]+ea[10];c[11]=r[11]+ea[11];c[12]=r[12]+ea[12];c[13]=r[13]+ea[13];c[14]=r[14]+ea[14];c[15]=r[15]+ea[15];return c}function La(c,r,ea){c[0]=r[0]-ea[0];c[1]=r[1]-ea[1];c[2]=r[2]-ea[2];c[3]=r[3]-ea[3];c[4]=r[4]-ea[4];c[5]=r[5]-ea[5];c[6]=
r[6]-ea[6];c[7]=r[7]-ea[7];c[8]=r[8]-ea[8];c[9]=r[9]-ea[9];c[10]=r[10]-ea[10];c[11]=r[11]-ea[11];c[12]=r[12]-ea[12];c[13]=r[13]-ea[13];c[14]=r[14]-ea[14];c[15]=r[15]-ea[15];return c}function Ja(c,r,ea){c[0]=r[0]*ea;c[1]=r[1]*ea;c[2]=r[2]*ea;c[3]=r[3]*ea;c[4]=r[4]*ea;c[5]=r[5]*ea;c[6]=r[6]*ea;c[7]=r[7]*ea;c[8]=r[8]*ea;c[9]=r[9]*ea;c[10]=r[10]*ea;c[11]=r[11]*ea;c[12]=r[12]*ea;c[13]=r[13]*ea;c[14]=r[14]*ea;c[15]=r[15]*ea;return c}function Na(c,r,ea,ka){c[0]=r[0]+ea[0]*ka;c[1]=r[1]+ea[1]*ka;c[2]=r[2]+
ea[2]*ka;c[3]=r[3]+ea[3]*ka;c[4]=r[4]+ea[4]*ka;c[5]=r[5]+ea[5]*ka;c[6]=r[6]+ea[6]*ka;c[7]=r[7]+ea[7]*ka;c[8]=r[8]+ea[8]*ka;c[9]=r[9]+ea[9]*ka;c[10]=r[10]+ea[10]*ka;c[11]=r[11]+ea[11]*ka;c[12]=r[12]+ea[12]*ka;c[13]=r[13]+ea[13]*ka;c[14]=r[14]+ea[14]*ka;c[15]=r[15]+ea[15]*ka;return c}function Ya(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]&&c[3]===r[3]&&c[4]===r[4]&&c[5]===r[5]&&c[6]===r[6]&&c[7]===r[7]&&c[8]===r[8]&&c[9]===r[9]&&c[10]===r[10]&&c[11]===r[11]&&c[12]===r[12]&&c[13]===r[13]&&c[14]===
r[14]&&c[15]===r[15]}function Ua(c,r){if(c===r)return!0;const ea=c[0],ka=c[1],va=c[2],B=c[3],N=c[4],da=c[5],X=c[6],ia=c[7],na=c[8],ra=c[9],U=c[10],ca=c[11],pa=c[12],wa=c[13],Ba=c[14];c=c[15];const Oa=r[0],Ka=r[1],Ra=r[2],Sa=r[3],Ga=r[4],Ta=r[5],xa=r[6],vb=r[7],ub=r[8],qb=r[9],b=r[10],gb=r[11],db=r[12],Gb=r[13],Pb=r[14];r=r[15];const nb=la.getEpsilon();return Math.abs(ea-Oa)<=nb*Math.max(1,Math.abs(ea),Math.abs(Oa))&&Math.abs(ka-Ka)<=nb*Math.max(1,Math.abs(ka),Math.abs(Ka))&&Math.abs(va-Ra)<=nb*Math.max(1,
Math.abs(va),Math.abs(Ra))&&Math.abs(B-Sa)<=nb*Math.max(1,Math.abs(B),Math.abs(Sa))&&Math.abs(N-Ga)<=nb*Math.max(1,Math.abs(N),Math.abs(Ga))&&Math.abs(da-Ta)<=nb*Math.max(1,Math.abs(da),Math.abs(Ta))&&Math.abs(X-xa)<=nb*Math.max(1,Math.abs(X),Math.abs(xa))&&Math.abs(ia-vb)<=nb*Math.max(1,Math.abs(ia),Math.abs(vb))&&Math.abs(na-ub)<=nb*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(ra-qb)<=nb*Math.max(1,Math.abs(ra),Math.abs(qb))&&Math.abs(U-b)<=nb*Math.max(1,Math.abs(U),Math.abs(b))&&Math.abs(ca-
gb)<=nb*Math.max(1,Math.abs(ca),Math.abs(gb))&&Math.abs(pa-db)<=nb*Math.max(1,Math.abs(pa),Math.abs(db))&&Math.abs(wa-Gb)<=nb*Math.max(1,Math.abs(wa),Math.abs(Gb))&&Math.abs(Ba-Pb)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Pb))&&Math.abs(c-r)<=nb*Math.max(1,Math.abs(c),Math.abs(r))}function jb(c){const r=la.getEpsilon(),ea=c[0],ka=c[1],va=c[2],B=c[4],N=c[5],da=c[6],X=c[8],ia=c[9];c=c[10];return Math.abs(1-(ea*ea+B*B+X*X))<=r&&Math.abs(1-(ka*ka+N*N+ia*ia))<=r&&Math.abs(1-(va*va+da*da+c*c))<=r}function kb(c){return 1===
c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const mb=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Fa,adjoint:n,copy:ba,determinant:A,equals:Ua,exactEquals:Ya,frob:Ha,fromQuat:y,fromQuat2:O,fromRotation:aa,fromRotationTranslation:E,fromRotationTranslationScale:I,fromRotationTranslationScaleOrigin:x,fromScaling:T,fromTranslation:Q,fromXRotation:C,fromYRotation:q,fromZRotation:z,frustum:l,getRotation:L,getScaling:H,getTranslation:F,hasIdentityRotation:kb,
identity:S,invert:m,invertOrIdentity:u,isOrthoNormal:jb,lookAt:ta,mul:R,multiply:R,multiplyScalar:Ja,multiplyScalarAndAdd:Na,ortho:ja,perspective:t,perspectiveFromFieldOfView:W,rotate:w,rotateX:d,rotateY:p,rotateZ:G,scale:g,set:P,str:Da,sub:La,subtract:La,targetTo:ya,translate:J,transpose:K},Symbol.toStringTag,{value:"Module"}));h.add=Fa;h.adjoint=n;h.copy=ba;h.determinant=A;h.equals=Ua;h.exactEquals=Ya;h.frob=Ha;h.fromQuat=y;h.fromQuat2=O;h.fromRotation=aa;h.fromRotationTranslation=E;h.fromRotationTranslationScale=
I;h.fromRotationTranslationScaleOrigin=x;h.fromScaling=T;h.fromTranslation=Q;h.fromXRotation=C;h.fromYRotation=q;h.fromZRotation=z;h.frustum=l;h.getRotation=L;h.getScaling=H;h.getTranslation=F;h.hasIdentityRotation=kb;h.identity=S;h.invert=m;h.invertOrIdentity=u;h.isOrthoNormal=jb;h.lookAt=ta;h.mat4=f;h.mul=R;h.multiply=R;h.multiplyScalar=Ja;h.multiplyScalarAndAdd=Na;h.ortho=ja;h.perspective=t;h.perspectiveFromFieldOfView=W;h.rotate=w;h.rotateX=d;h.rotateY=p;h.rotateZ=G;h.scale=g;h.set=P;h.str=Da;
h.sub=La;h.subtract=La;h.targetTo=ya;h.translate=J;h.transpose=K})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(h,f,la,ba,P){function S(){return!!f._pe}function K(){return!!P("esri-wasm")}function u(){return g?g:g=(new Promise((d,p)=>h(["./pe-wasm"],d,p))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:p=>ba.getAssetUrl(`esri/geometry/support/${p}`)})).then(d=>{m(d)})}function m(d){function p(T,aa,C){T[aa]=C(T[aa])}
f._pe=d;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(T){function aa(){return T.apply(this,arguments)||this}la._inheritsLoose(aa,T);aa.prototype.destroy=function(){f._pe.destroy(this)};return aa}(f._pe.PeGCSExtent);d=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var G of d)p(G.prototype,"getName",T=>function(){return T.call(this,
Array(f.PeDefs.PE_NAME_MAX))});for(const T of[f._pe.PeGeogtran,f._pe.PeProjcs])p(T.prototype,"getParameters",aa=>function(){const C=Array(f.PeDefs.PE_PARM_MAX);let q=aa.call(this);for(let z=0;z<C.length;z++){const E=f._pe.getValue(q,"*");C[z]=E?f._pe.wrapPointer(E,f._pe.PeParameter):null;q+=Int32Array.BYTES_PER_ELEMENT}return C});p(f._pe.PeHorizon.prototype,"getCoord",T=>function(){const aa=this.getSize();if(!aa)return null;const C=[],q=T.call(this);J(C,aa,q);return C});p(f._pe.PeGTlistExtendedEntry.prototype,
"getEntries",T=>{const aa=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let C=null;var q=T.call(this);if(!f._pe.compare(q,f._pe.NULL)){C=[q];const z=this.getSteps();if(1<z){q=f._pe.getPointer(q);for(let E=1;E<z;E++)C.push(f._pe.wrapPointer(q+aa*E,f._pe.PeGTlistExtendedGTs))}}return C}});const Q=f._pe._pe_getPeHorizonSize();G=T=>function(){let aa=this._cache;aa||(this._cache=aa=new Map);if(aa.has(T))return aa.get(T);let C=null;var q=T.call(this);if(!f._pe.compare(q,f._pe.NULL)){C=[q];const z=
q.getNump();if(1<z){q=f._pe.getPointer(q);for(let E=1;E<z;E++)C.push(f._pe.wrapPointer(q+Q*E,f._pe.PeHorizon))}}aa.set(T,C);return C};p(f._pe.PeProjcs.prototype,"horizonGcsGenerate",G);p(f._pe.PeProjcs.prototype,"horizonPcsGenerate",G);f._pe.PeObject.prototype.toString=function(T=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const aa=f._pe.getPointer(this),C=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(aa,T,C))}}function n(d){if(d){var p=
f._pe.getClass(d);p&&(p=f._pe.getCache(p))&&(d=f._pe.getPointer(d))&&delete p[d]}}function A(d,p){const G=[];p=Array(p);for(let Q=0;Q<d;Q++)G.push(f._pe.ensureInt8(p));return G}function R(d){let p;Array.isArray(d[0])?(p=[],d.forEach(G=>{p.push(G[0],G[1])})):p=d;return p}function J(d,p,G,Q=!1){if(Q)for(Q=0;Q<2*p;Q++)d[Q]=f._pe.getValue(G+Q*Float64Array.BYTES_PER_ELEMENT,"double");else{Q=0===d.length;for(let T=0;T<p;T++)Q&&(d[T]=Array(2)),d[T][0]=f._pe.getValue(G,"double"),d[T][1]=f._pe.getValue(G+
Float64Array.BYTES_PER_ELEMENT,"double"),G+=2*Float64Array.BYTES_PER_ELEMENT}}let g;f._pe=null;f.PeCSTransformations=void 0;(function(d){function p(T,aa,C){f._pe.ensureCache.prepare();var q=R(C);const z=C===q;q=f._pe.ensureFloat64(q);(T=f._pe._pe_geog_to_proj(f._pe.getPointer(T),aa,q))&&J(C,aa,q,z);return T}function G(T,aa,C){return Q(T,aa,C,0)}function Q(T,aa,C,q){f._pe.ensureCache.prepare();var z=R(C);const E=C===z;z=f._pe.ensureFloat64(z);(T=f._pe._pe_proj_to_geog_center(f._pe.getPointer(T),aa,
z,q))&&J(C,aa,z,E);return T}d.geogToProj=p;d.projGeog=function(T,aa,C,q){switch(q){case f.PeDefs.PE_TRANSFORM_P_TO_G:return G(T,aa,C);case f.PeDefs.PE_TRANSFORM_G_TO_P:return p(T,aa,C)}return 0};d.projToGeog=G;d.projToGeogCenter=Q})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;
d.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
d.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
d.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(d){function p(aa,C){let q=
null,z=G[aa];z||(z={},G[aa]=z);z.hasOwnProperty(String(C))?q=z[C]:(aa=f._pe.PeFactory.prototype.factoryByType(aa,C),f._pe.compare(aa,f._pe.NULL)||(q=aa,z[C]=q));return q=T(q)}const G={},Q={},T=aa=>{if(aa){const C=aa.getType();switch(C){case f.PeDefs.PE_TYPE_GEOGCS:aa=f._pe.castObject(aa,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:aa=f._pe.castObject(aa,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:aa=f._pe.castObject(aa,f._pe.PeGeogtran);break;default:C&f.PeDefs.PE_TYPE_UNIT&&(aa=f._pe.castObject(aa,
f._pe.PeUnit))}}return aa};d.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(aa){return p(f.PeDefs.PE_TYPE_COORDSYS,aa)};d.factoryByType=p;d.fromString=function(aa,C){let q=null,z=Q[aa];z||(z={},Q[aa]=z);z.hasOwnProperty(C)?q=z[C]:(aa=f._pe.PeFactory.prototype.fromString(aa,C),f._pe.compare(aa,f._pe.NULL)||(q=aa,z[C]=q));return q=T(q)};d.geogcs=function(aa){return p(f.PeDefs.PE_TYPE_GEOGCS,aa)};d.geogtran=function(aa){return p(f.PeDefs.PE_TYPE_GEOGTRAN,aa)};d.getCode=
function(aa){return f._pe.PeFactory.prototype.getCode(aa)};d.projcs=function(aa){return p(f.PeDefs.PE_TYPE_PROJCS,aa)};d.unit=function(aa){return p(f.PeDefs.PE_TYPE_UNIT,aa)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(d){let p;d.init=function(){d.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=f._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(G,Q,T,aa,C,q){let z=null;const E=new f._pe.PeInteger(q);try{const O=
f._pe.PeGTlistExtended.prototype.getGTlist(G,Q,T,aa,C,E);if(q=E.val)if(z=[O],1<q){const F=f._pe.getPointer(O);for(G=1;G<q;G++)z.push(f._pe.wrapPointer(F+p*G,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(E)}return z}})(f.PeGTlistExtended||(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(p){if(p&&p.length){for(const G of p)n(G),G.getEntries().forEach(Q=>{n(Q);Q=Q.getGeogtran();n(Q);Q.getParameters().forEach(n);[Q.getGeogcs1(),Q.getGeogcs2()].forEach(T=>
{n(T);const aa=T.getDatum();n(aa);n(aa.getSpheroid());n(T.getPrimem());n(T.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(p,G,Q,T,aa){f._pe.ensureCache.prepare();var C=R(Q);const q=Q===C;C=f._pe.ensureFloat64(C);let z=0;T&&(z=f._pe.ensureFloat64(T));(p=f._pe._pe_geog_to_geog(f._pe.getPointer(p),G,C,z,aa))&&J(Q,G,C,q);return p}})(f.PeGTTransformations||(f.PeGTTransformations=
{}));f.PeNotationDms=void 0;(function(d){const p=(Q,T,aa,C,q,z)=>{f._pe.ensureCache.prepare();switch(Q){case "dd":var E=f._pe._pe_geog_to_dd;var O=f.PeDefs.PE_DD_MAX;break;case "ddm":E=f._pe._pe_geog_to_ddm;O=f.PeDefs.PE_DDM_MAX;break;case "dms":E=f._pe._pe_geog_to_dms,O=f.PeDefs.PE_DMS_MAX}Q=0;T&&(Q=f._pe.getPointer(T));T=R(C);T=f._pe.ensureFloat64(T);O=A(aa,O);C=f._pe.ensureInt32(O);if(q=E(Q,aa,T,q,C))for(E=0;E<aa;E++)z[E]=f._pe.UTF8ToString(O[E]);return q},G=(Q,T,aa,C,q)=>{f._pe.ensureCache.prepare();
switch(Q){case "dd":var z=f._pe._pe_dd_to_geog;break;case "ddm":z=f._pe._pe_ddm_to_geog;break;case "dms":z=f._pe._pe_dms_to_geog}Q=0;T&&(Q=f._pe.getPointer(T));T=C.map(E=>f._pe.ensureString(E));C=f._pe.ensureInt32(T);T=f._pe.ensureFloat64(Array(2*aa));(z=z(Q,aa,C,T))&&J(q,aa,T);return z};d.geogToDms=function(Q,T,aa,C,q){return p("dms",Q,T,aa,C,q)};d.dmsToGeog=function(Q,T,aa,C){return G("dms",Q,T,aa,C)};d.geogToDdm=function(Q,T,aa,C,q){return p("ddm",Q,T,aa,C,q)};d.ddmToGeog=function(Q,T,aa,C){return G("ddm",
Q,T,aa,C)};d.geogToDd=function(Q,T,aa,C,q){return p("dd",Q,T,aa,C,q)};d.ddToGeog=function(Q,T,aa,C){return G("dd",Q,T,aa,C)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
d.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(p,G,Q,T,aa,C,q){f._pe.ensureCache.prepare();let z=0;p&&(z=f._pe.getPointer(p));p=R(Q);Q=f._pe.ensureFloat64(p);p=A(G,f.PeDefs.PE_MGRS_MAX);const E=f._pe.ensureInt32(p);if(T=f._pe._pe_geog_to_mgrs_extended(z,G,Q,T,aa,C,E))for(aa=0;aa<G;aa++)q[aa]=f._pe.UTF8ToString(p[aa]);return T};d.mgrsToGeogExtended=function(p,G,Q,T,aa){f._pe.ensureCache.prepare();let C=0;p&&(C=f._pe.getPointer(p));p=Q.map(q=>f._pe.ensureString(q));
Q=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*G));(T=f._pe._pe_mgrs_to_geog_extended(C,G,Q,T,p))&&J(aa,G,p);return T}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(p,G,Q,T,aa,C,q){f._pe.ensureCache.prepare();let z=0;p&&(z=f._pe.getPointer(p));p=R(Q);Q=f._pe.ensureFloat64(p);p=A(G,f.PeDefs.PE_MGRS_MAX);const E=f._pe.ensureInt32(p);if(T=f._pe._pe_geog_to_usng(z,G,Q,T,aa,C,E))for(aa=0;aa<G;aa++)q[aa]=f._pe.UTF8ToString(p[aa]);return T};d.usngToGeog=
function(p,G,Q,T){f._pe.ensureCache.prepare();var aa=0;p&&(aa=f._pe.getPointer(p));p=Q.map(C=>f._pe.ensureString(C));Q=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*G));(aa=f._pe._pe_usng_to_geog(aa,G,Q,p))&&J(T,G,p);return aa}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
d.geogToUtm=function(p,G,Q,T,aa){f._pe.ensureCache.prepare();var C=0;p&&(C=f._pe.getPointer(p));p=R(Q);Q=f._pe.ensureFloat64(p);p=A(G,f.PeDefs.PE_UTM_MAX);const q=f._pe.ensureInt32(p);if(T=f._pe._pe_geog_to_utm(C,G,Q,T,q))for(C=0;C<G;C++)aa[C]=f._pe.UTF8ToString(p[C]);return T};d.utmToGeog=function(p,G,Q,T,aa){f._pe.ensureCache.prepare();let C=0;p&&(C=f._pe.getPointer(p));p=Q.map(q=>f._pe.ensureString(q));Q=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*G));(T=f._pe._pe_utm_to_geog(C,G,Q,T,p))&&
J(aa,G,p);return T}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(d){const p=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(G,Q=d.PE_PCSINFO_OPTION_DOMAIN){let T=null,aa=null;p.has(G)&&(aa=p.get(G),
aa[Q]&&(T=aa[Q]));T||(T=f._pe.PePCSInfo.prototype.generate(G,Q),aa||(aa=[],p.set(G,aa)),aa[Q]=T);return T}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(d){d.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const w=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},
get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:m,get _pe(){return f._pe},isLoaded:S,isSupported:K,load:u},Symbol.toStringTag,
{value:"Module"}));f._init=m;f.isLoaded=S;f.isSupported=K;f.load=u;f.pe=w})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(h,f,la,ba,P){function S(g=J){return[g[0],g[1],g[2],g[3]]}function K(g,w){g!==w&&(g[0]=w[0],g[1]=w[1],g[2]=w[2],g[3]=w[3]);return g}function u(g){return ba.isNone(g)||g[0]>=g[2]?0:g[2]-g[0]}function m(g){return g[1]>=g[3]?0:g[3]-g[1]}function n(g,w,d){return w>=g[0]&&d>=g[1]&&
w<=g[2]&&d<=g[3]}function A(g){return null!=g&&4===g.length}const R=[Infinity,Infinity,-Infinity,-Infinity],J=[0,0,0,0];h.NEGATIVE_INFINITY=R;h.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];h.UNIT=[0,0,1,1];h.ZERO=J;h.allFinite=function(g){for(let w=0;4>w;w++)if(!isFinite(g[w]))return!1;return!0};h.area=function(g){return u(g)*m(g)};h.center=function(g,w=[0,0]){w[0]=(g[0]+g[2])/2;w[1]=(g[1]+g[3])/2;return w};h.clone=function(g){return[g[0],g[1],g[2],g[3]]};h.contains=function(g,w){return w[0]>=
g[0]&&w[2]<=g[2]&&w[1]>=g[1]&&w[3]<=g[3]};h.containsPoint=function(g,w){return n(g,w[0],w[1])};h.containsPointObject=function(g,w){return n(g,w.x,w.y)};h.containsPointWithMargin=function(g,w,d){return w[0]>=g[0]-d&&w[1]>=g[1]-d&&w[0]<=g[2]+d&&w[1]<=g[3]+d};h.containsXY=n;h.containsXYWithMargin=function(g,w,d,p){return w>=g[0]-p&&d>=g[1]-p&&w<=g[2]+p&&d<=g[3]+p};h.copy=K;h.create=S;h.distance=function(g,w){const d=(g[1]+g[3])/2,p=Math.max(Math.abs(w[0]-(g[0]+g[2])/2)-u(g)/2,0);g=Math.max(Math.abs(w[1]-
d)-m(g)/2,0);return Math.sqrt(p*p+g*g)};h.empty=function(g){return g?K(g,R):S(R)};h.equals=function(g,w){return A(g)&&A(w)?g[0]===w[0]&&g[1]===w[1]&&g[2]===w[2]&&g[3]===w[3]:g===w};h.expand=function(g,w,d){if(ba.isNone(w))K(d,g);else if("length"in w)if(A(w))d[0]=Math.min(g[0],w[0]),d[1]=Math.min(g[1],w[1]),d[2]=Math.max(g[2],w[2]),d[3]=Math.max(g[3],w[3]);else{if(2===w.length||3===w.length)d[0]=Math.min(g[0],w[0]),d[1]=Math.min(g[1],w[1]),d[2]=Math.max(g[2],w[0]),d[3]=Math.max(g[3],w[1])}else switch(w.type){case "extent":d[0]=
Math.min(g[0],w.xmin);d[1]=Math.min(g[1],w.ymin);d[2]=Math.max(g[2],w.xmax);d[3]=Math.max(g[3],w.ymax);break;case "point":d[0]=Math.min(g[0],w.x),d[1]=Math.min(g[1],w.y),d[2]=Math.max(g[2],w.x),d[3]=Math.max(g[3],w.y)}};h.expandPointInPlace=function(g,w){w[0]<g[0]&&(g[0]=w[0]);w[0]>g[2]&&(g[2]=w[0]);w[1]<g[1]&&(g[1]=w[1]);w[1]>g[3]&&(g[3]=w[1])};h.expandWithNestedArray=function(g,w,d=g){const p=w.length;let G=g[0],Q=g[1],T=g[2];g=g[3];for(let aa=0;aa<p;aa++){const C=w[aa];G=Math.min(G,C[0]);Q=Math.min(Q,
C[1]);T=Math.max(T,C[0]);g=Math.max(g,C[1])}d[0]=G;d[1]=Q;d[2]=T;d[3]=g;return d};h.fromExtent=function(g,w=S()){w[0]=g.xmin;w[1]=g.ymin;w[2]=g.xmax;w[3]=g.ymax;return w};h.fromValues=function(g,w,d,p,G=S()){G[0]=g;G[1]=w;G[2]=d;G[3]=p;return G};h.height=m;h.intersection=function(g,w,d){if(ba.isNone(w))return K(d,g);const p=w[0],G=w[1],Q=w[2];w=w[3];d[0]=la.clamp(g[0],p,Q);d[1]=la.clamp(g[1],G,w);d[2]=la.clamp(g[2],p,Q);d[3]=la.clamp(g[3],G,w);return d};h.intersects=function(g,w){return Math.max(w[0],
g[0])<=Math.min(w[2],g[2])&&Math.max(w[1],g[1])<=Math.min(w[3],g[3])};h.intersectsSegment=function(g,w,d){const p=g[0],G=g[1],Q=g[2];g=g[3];const {x:T,y:aa}=w,{x:C,y:q}=d;var z=(O,F)=>0>(q-aa)*O+(T-C)*F+(C*aa-T*q);w=z(p,g);d=z(Q,g);const E=z(Q,G);z=z(p,G);return w===d&&d===E&&E===z&&z===w||T<p&&C<p||T>Q&&C>Q||aa>g&&q>g||aa<G&&q<G?!1:!0};h.intersectsSphere=function(g,w){const d=w[3];var p=Math.abs(w[0]-.5*(g[0]+g[2]));const G=.5*(g[2]-g[0]);if(p>d+G)return!1;var Q=.5*(g[3]-g[1]);g=Math.abs(w[1]-.5*
(g[1]+g[3]));if(g>d+Q)return!1;if(p<G||g<Q)return!0;p-=G;Q=g-Q;return p*p+Q*Q<=d*d};h.is=A;h.isPoint=function(g){return(0===u(g)||!isFinite(g[0]))&&(0===m(g)||!isFinite(g[1]))};h.offset=function(g,w,d,p=g){p[0]=g[0]+w;p[1]=g[1]+d;p[2]=g[2]+w;p[3]=g[3]+d;return p};h.pad=function(g,w,d=g){d[0]=g[0]-w;d[1]=g[1]-w;d[2]=g[2]+w;d[3]=g[3]+w;return d};h.setMax=function(g,w,d=g){d[2]=w[0];d[3]=w[1];d!==g&&(d[0]=g[0],d[1]=g[1]);return g};h.setMin=function(g,w,d=g){d[0]=w[0];d[1]=w[1];d!==g&&(d[2]=g[2],d[3]=
g[3]);return d};h.size=function(g,w){w[0]=g[2]-g[0];w[1]=g[3]-g[1]};h.toExtent=function(g,w){return new P({xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:w})};h.width=u;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(h,f){const la=Math.PI/180;var ba=f.earth.radius;const P=f.earth.eccentricitySquared;ba={a1:ba*P,a2:ba*P*ba*P,a3:ba*P*P/2,a4:ba*P*ba*P*2.5,a5:ba*P+ba*P*P/2,a6:1-P};
f={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},
104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,
f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},
104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};h.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;h.earthEllipsoidConstants=ba;h.spheroids=f;h.toRadians=la;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(h){return function(){function f(ba){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(ba&&ba.steps)for(const P of ba.steps)P instanceof h?this.steps.push(P):this.steps.push(new h({wkid:P.wkid,wkt:P.wkt,isInverse:P.isInverse}))}f.cacheKey=function(ba,P){return[void 0!==ba.wkid&&null!==ba.wkid?ba.wkid.toString():"-1",void 0!==ba.wkt&&null!==ba.wkt?ba.wkt.toString():"",void 0!==P.wkid&&null!==P.wkid?P.wkid.toString():"-1",void 0!==P.wkt&&null!==P.wkt?P.wkt.toString():
""].join()};f.fromGE=function(ba){const P=new f;let S="";for(const K of ba.steps)ba=h.fromGE(K),P.steps.push(ba),S+=ba.uid.toString()+",";P._cachedProjection={};P._gtlistentry=null;P._chain=S;return P};var la=f.prototype;la.getInverse=function(){const ba=new f;ba.steps=[];for(let P=this.steps.length-1;0<=P;P--)ba.steps.push(this.steps[P].getInverse());return ba};la.getGTListEntry=function(){let ba="";for(const P of this.steps)ba+=P.uid.toString()+",";ba!==this._chain&&(this._gtlistentry=null,this._cachedProjection=
{},this._chain=ba);return this._gtlistentry};la.assignCachedGe=function(ba,P,S){this._cachedProjection[f.cacheKey(ba,P)]=S};la.getCachedGeTransformation=function(ba,P){let S="";for(const K of this.steps)S+=K.uid.toString()+",";S!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=S);ba=this._cachedProjection[f.cacheKey(ba,P)];return void 0===ba?null:ba};return f}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(h){let f=0;return function(){function la(ba){this.uid=f++;ba?(this._wkt=null!=ba.wkt?ba.wkt:null,this._wkid=null!=ba.wkid?ba.wkid:-1,this._isInverse=null!=ba.isInverse?!0===ba.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}la.fromGE=function(ba){const P=new la;P._wkt=ba.wkt;P._wkid=ba.wkid;P._isInverse=ba.isInverse;return P};la.prototype.getInverse=function(){const ba=new la;ba._wkt=this.wkt;ba._wkid=this._wkid;ba._isInverse=!this.isInverse;return ba};h._createClass(la,[{key:"wkt",
get:function(){return this._wkt},set:function(ba){this._wkt=ba;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(ba){this._wkid=ba;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ba){this._isInverse=ba;this.uid=f++}}]);return la}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(h,f,la,ba){h.getGeometryZScaler=function(P,S,K){if(f.isNone(S)||f.isNone(K)||
K.vcsWkid||ba.equals(S,K))return null;S=la.getMetersPerVerticalUnitForSR(S);K=la.getMetersPerVerticalUnitForSR(K);const u=S/K;if(1===u)return null;switch(P){case "point":case "esriGeometryPoint":return m=>{m&&null!=m.z&&(m.z*=u)};case "polyline":case "esriGeometryPolyline":return m=>{if(m)for(const n of m.paths)for(const A of n)2<A.length&&(A[2]*=u)};case "polygon":case "esriGeometryPolygon":return m=>{if(m)for(const n of m.rings)for(const A of n)2<A.length&&(A[2]*=u)};case "multipoint":case "esriGeometryMultipoint":return m=>
{if(m)for(const n of m.points)2<n.length&&(n[2]*=u)};case "extent":case "esriGeometryExtent":return m=>{m&&null!=m.zmin&&null!=m.zmax&&(m.zmin*=u,m.zmax*=u)};default:return null}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(h){let f=function(K,u,m){this.x=K;this.y=u;this.spatialReference=m;this.m=this.z=void 0},la=function(K,u,m,n){this.rings=K;this.spatialReference=u;this.hasM=this.hasZ=void 0;m&&(this.hasZ=
m);n&&(this.hasM=n)},ba=function(K,u,m,n){this.paths=K;this.spatialReference=u;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);n&&(this.hasM=n)},P=function(K,u,m,n){this.points=K;this.spatialReference=u;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);n&&(this.hasM=n)},S=function(K,u,m,n,A){this.xmin=K;this.ymin=u;this.xmax=m;this.ymax=n;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0};h.jsonAdapter={convertToGEGeometry:function(K,u){return null==u?null:K.convertJSONToGeometry(u)},exportPoint:function(K,
u,m){m=new f(K.getPointX(u),K.getPointY(u),m);const n=K.hasZ(u),A=K.hasM(u);n&&(m.z=K.getPointZ(u));A&&(m.m=K.getPointM(u));return m},exportPolygon:function(K,u,m){return new la(K.exportPaths(u),m,K.hasZ(u),K.hasM(u))},exportPolyline:function(K,u,m){return new ba(K.exportPaths(u),m,K.hasZ(u),K.hasM(u))},exportMultipoint:function(K,u,m){return new P(K.exportPoints(u),m,K.hasZ(u),K.hasM(u))},exportExtent:function(K,u,m){var n=K.hasZ(u);const A=K.hasM(u);m=new S(K.getXMin(u),K.getYMin(u),K.getXMax(u),
K.getYMax(u),m);n&&(n=K.getZExtent(u),m.zmin=n.vmin,m.zmax=n.vmax);A&&(K=K.getMExtent(u),m.mmin=K.vmin,m.mmax=K.vmax);return m}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(h,f,la){let ba=function(){function S(K=null,u={},m,n){this.geometry=K;this.attributes=u;this.centroid=m;this.objectId=n;this.geohashY=this.geohashX=this.displayId=0}S.prototype.weakClone=
function(){const K=new S(this.geometry,this.attributes,this.centroid,this.objectId);K.displayId=this.displayId;K.geohashX=this.geohashX;K.geohashY=this.geohashY;return K};return S}(),P=function(S){function K(){return S.apply(this,arguments)||this}f._inheritsLoose(K,S);return K}(ba);h.OptimizedFeature=ba;h.OptimizedFeatureWithGeometry=P;h.hasGeometry=function(S){return!(la.isNone(S.geometry)||!S.geometry.coords||!S.geometry.coords.length)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){return function(){function f(ba=[],P=[],S=!1){this.lengths=ba??[];this.coords=P??[];this.hasIndeterminateRingOrder=S}f.fromRect=function(ba){const [P,S,K,u]=ba;ba=K-P;const m=u-S;return new f([5],[P,S,ba,0,0,m,-ba,0,0,-m])};var la=f.prototype;la.forEachVertex=function(ba){let P=0;this.lengths.length||ba(this.coords[0],this.coords[1]);for(let S=0;S<this.lengths.length;S++){const K=this.lengths[S];
for(let u=0;u<K;u++)ba(this.coords[2*(u+P)],this.coords[2*(u+P)+1]);P+=K}};la.clone=function(ba){return ba?(ba.set(this.coords),new f(this.lengths.slice(),ba,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};h._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((ba,P)=>ba+P)}}]);return f}()})},
"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(h,f,la,ba,P,S,K,u,m,n,A){const R=S.create();return function(){function J(w){this.geometryInfo=w;this._boundsStore=new m.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new la;this.featureAdapter=n.optimizedFeatureQueryEngineAdapter}var g=J.prototype;g.getFullExtent=function(w){if(P.isNone(this.fullBounds))return null;const [d,p,G,Q]=this.fullBounds;return{xmin:d,ymin:p,xmax:G,ymax:Q,spatialReference:A.cleanFromGeometryEngine(w)}};g.add=function(w){this._add(w);this._emitChanged()};g.addMany=function(w){for(const d of w)this._add(d);this._emitChanged()};g.clear=function(){this._featuresById.clear();this._boundsStore.clear();
this._emitChanged()};g.removeById=function(w){w=this._featuresById.get(w);if(!w)return null;this._remove(w);this._emitChanged();return w};g.removeManyById=function(w){this._boundsStore.invalidateIndex();for(const d of w)(w=this._featuresById.get(d))&&this._remove(w);this._emitChanged()};g.forEachBounds=function(w,d){for(const p of w)(w=this._boundsStore.get(p.objectId))&&d(S.fromRect(R,w))};g.getFeature=function(w){return this._featuresById.get(w)};g.has=function(w){return this._featuresById.has(w)};
g.forEach=function(w){this._featuresById.forEach(d=>w(d))};g.forEachInBounds=function(w,d){this._boundsStore.forEachInBounds(w,p=>{d(this._featuresById.get(p))})};g.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};g.sweep=function(){let w=!1;this._featuresById.forEach((d,p)=>{this._markedIds.has(p)||(w=!0,this._remove(d))});this._markedIds.clear();w&&this._emitChanged()};g._emitChanged=function(){this.events.emit("changed",void 0)};g._add=function(w){if(w){var d=
w.objectId;if(null==d)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:w}));else{var p=this._featuresById.get(d);this._markedIds.add(d);if(p){w.displayId=p.displayId;var G=this._boundsStore.get(d);this._boundsStore.delete(d)}else if(P.isSome(this.onFeatureAdd))this.onFeatureAdd(w);!P.isNone(w.geometry)&&w.geometry.coords&&w.geometry.coords.length?(G=u.getBoundsOptimizedGeometry(P.isSome(G)?G:K.create(),w.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),P.isSome(G)&&this._boundsStore.set(d,G)):this._boundsStore.set(d,null);this._featuresById.set(d,w)}}};g._remove=function(w){if(P.isSome(this.onFeatureRemove))this.onFeatureRemove(w);const d=w.objectId;this._markedIds.delete(d);this._boundsStore.delete(d);this._featuresById.delete(d);return w};h._createClass(J,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let w=0;this._featuresById.forEach(d=>{P.isSome(d.geometry)&&d.geometry.coords&&(w+=d.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:w/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return J}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(h,f,la,ba,P){let S=function(){function K(){this._emitter=new K.EventEmitter(this)}var u=K.prototype;u.emit=function(m,n){return this._emitter.emit(m,n)};u.on=function(m,n){return this._emitter.on(m,n)};u.once=function(m,n){return this._emitter.once(m,n)};u.hasEventListener=function(m){return this._emitter.hasEventListener(m)};return K}();(function(K){let u=function(){function n(R=null){this._target=R;this._listenersMap=
null}var A=n.prototype;A.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};A.emit=function(R,J){R=this._listenersMap&&this._listenersMap.get(R);if(!R)return!1;const g=this._target||this;[...R].forEach(w=>{w.call(g,J)});return 0<R.length};A.on=function(R,J){if(Array.isArray(R)){var g=R.map(w=>this.on(w,J));return ba.handlesGroup(g)}if(R.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);g=this._listenersMap.get(R)||[];g.push(J);this._listenersMap.set(R,g);return{remove:()=>{const w=this._listenersMap&&this._listenersMap.get(R)||[],d=w.indexOf(J);0<=d&&w.splice(d,1)}}};A.once=function(R,J){const g=this.on(R,w=>{g.remove();J.call(null,w)});return g};A.hasEventListener=function(R){R=this._listenersMap&&this._listenersMap.get(R);return null!=R&&0<R.length};return n}();K.EventEmitter=u;K.EventedMixin=n=>{n=function(A){function R(){var g=A.apply(this,arguments)||
this;g._emitter=new u;return g}h._inheritsLoose(R,A);var J=R.prototype;J.destroy=function(){this._emitter.clear()};J.emit=function(g,w){return this._emitter.emit(g,w)};J.on=function(g,w){return this._emitter.on(g,w)};J.once=function(g,w){return this._emitter.once(g,w)};J.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return R}(n);return n=f.__decorate([P.subclass("esri.core.Evented")],n)};let m=function(n){function A(){var J=n.apply(this,arguments)||this;J._emitter=new S.EventEmitter(h._assertThisInitialized(J));
return J}h._inheritsLoose(A,n);var R=A.prototype;R.destroy=function(){this._emitter.clear()};R.emit=function(J,g){return this._emitter.emit(J,g)};R.on=function(J,g){return this._emitter.on(J,g)};R.once=function(J,g){return this._emitter.once(J,g)};R.hasEventListener=function(J){return this._emitter.hasEventListener(J)};return A}(la);m=f.__decorate([P.subclass("esri.core.Evented")],m);K.EventedAccessor=m})(S||(S={}));return S})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe",
"../Extent","./aaBoundingRect"],function(h,f,la,ba){function P(d=g){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function S(d,p,G,Q,T,aa,C=P()){C[0]=d;C[1]=p;C[2]=G;C[3]=Q;C[4]=T;C[5]=aa;return C}function K(d){return d[0]>=d[3]?0:d[3]-d[0]}function u(d){return d[1]>=d[4]?0:d[4]-d[1]}function m(d){return d[2]>=d[5]?0:d[5]-d[2]}function n(d,p){return Math.max(p[0],d[0])<=Math.min(p[3],d[3])&&Math.max(p[1],d[1])<=Math.min(p[4],d[4])&&Math.max(p[2],d[2])<=Math.min(p[5],d[5])}function A(d,p){d[0]=p[0];d[1]=p[1];
d[2]=p[2];d[3]=p[3];d[4]=p[4];d[5]=p[5];return d}function R(d){return 6===d.length}const J=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],w=P();h.NEGATIVE_INFINITY=J;h.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];h.ZERO=g;h.allFinite=function(d){for(let p=0;6>p;p++)if(!isFinite(d[p]))return!1;return!0};h.center=function(d,p=[0,0,0]){p[0]=d[0]+K(d)/2;p[1]=d[1]+u(d)/2;p[2]=d[2]+m(d)/2;return p};h.contains=function(d,p){return p[0]>=d[0]&&p[1]>=
d[1]&&p[2]>=d[2]&&p[3]<=d[3]&&p[4]<=d[4]&&p[5]<=d[5]};h.containsPoint=function(d,p){return p[0]>=d[0]&&p[1]>=d[1]&&p[2]>=d[2]&&p[0]<=d[3]&&p[1]<=d[4]&&p[2]<=d[5]};h.containsPointWithMargin=function(d,p,G){return p[0]>=d[0]-G&&p[1]>=d[1]-G&&p[2]>=d[2]-G&&p[0]<=d[3]+G&&p[1]<=d[4]+G&&p[2]<=d[5]+G};h.create=P;h.depth=u;h.diameter=function(d){const p=K(d),G=m(d);d=u(d);return Math.sqrt(p*p+G*G+d*d)};h.empty=function(d){return d?A(d,J):P(J)};h.equals=function(d,p,G){if(f.isNone(d)||f.isNone(p))return d===
p;if(!R(d)||!R(p))return!1;if(G)for(let Q=0;Q<d.length;Q++){if(!G(d[Q],p[Q]))return!1}else for(G=0;G<d.length;G++)if(d[G]!==p[G])return!1;return!0};h.expandWithAABB=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[2]=Math.min(d[2],p[2]);d[3]=Math.max(d[3],p[3]);d[4]=Math.max(d[4],p[4]);d[5]=Math.max(d[5],p[5])};h.expandWithBuffer=function(d,p,G=0,Q=p.length/3){let T=d[0],aa=d[1],C=d[2],q=d[3],z=d[4],E=d[5];for(let O=0;O<Q;O++)T=Math.min(T,p[G+3*O]),aa=Math.min(aa,p[G+3*O+1]),C=Math.min(C,
p[G+3*O+2]),q=Math.max(q,p[G+3*O]),z=Math.max(z,p[G+3*O+1]),E=Math.max(E,p[G+3*O+2]);d[0]=T;d[1]=aa;d[2]=C;d[3]=q;d[4]=z;d[5]=E};h.expandWithNestedArray=function(d,p,G){const Q=p.length;let T=d[0],aa=d[1],C=d[2],q=d[3],z=d[4],E=d[5];if(G)for(G=0;G<Q;G++){var O=p[G];T=Math.min(T,O[0]);aa=Math.min(aa,O[1]);C=Math.min(C,O[2]);q=Math.max(q,O[0]);z=Math.max(z,O[1]);E=Math.max(E,O[2])}else for(G=0;G<Q;G++)O=p[G],T=Math.min(T,O[0]),aa=Math.min(aa,O[1]),q=Math.max(q,O[0]),z=Math.max(z,O[1]);d[0]=T;d[1]=aa;
d[2]=C;d[3]=q;d[4]=z;d[5]=E};h.expandWithOffset=function(d,p,G,Q){d[0]=Math.min(d[0],d[0]+p);d[3]=Math.max(d[3],d[3]+p);d[1]=Math.min(d[1],d[1]+G);d[4]=Math.max(d[4],d[4]+G);d[2]=Math.min(d[2],d[2]+Q);d[5]=Math.max(d[5],d[5]+Q)};h.expandWithRect=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[3]=Math.max(d[3],p[2]);d[4]=Math.max(d[4],p[3])};h.expandWithVec3=function(d,p){d[0]=Math.min(d[0],p[0]);d[1]=Math.min(d[1],p[1]);d[2]=Math.min(d[2],p[2]);d[3]=Math.max(d[3],p[0]);d[4]=Math.max(d[4],
p[1]);d[5]=Math.max(d[5],p[2])};h.fromExtent=function(d,p=P()){p[0]=d.xmin;p[1]=d.ymin;p[2]=d.hasZ?d.zmin:-Infinity;p[3]=d.xmax;p[4]=d.ymax;p[5]=d.hasZ?d.zmax:Infinity;return p};h.fromMinMax=function(d,p,G=P()){G[0]=d[0];G[1]=d[1];G[2]=d[2];G[3]=p[0];G[4]=p[1];G[5]=p[2];return G};h.fromRect=function(d,p){d[0]=p[0];d[1]=p[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=p[2];d[4]=p[3];d[5]=Number.POSITIVE_INFINITY;return d};h.fromRectValues=function(d,p,G,Q,T){d[0]=p;d[1]=G;d[2]=Number.NEGATIVE_INFINITY;d[3]=
Q;d[4]=T;d[5]=Number.POSITIVE_INFINITY;return d};h.fromValues=S;h.getMax=function(d,p){p[0]=d[3];p[1]=d[4];p[2]=d[5];return p};h.getMin=function(d,p){p[0]=d[0];p[1]=d[1];p[2]=d[2];return p};h.height=m;h.intersects=n;h.intersectsClippingArea=function(d,p){return f.isNone(p)?!0:n(d,p)};h.is=R;h.isPoint=function(d){return 0===K(d)&&0===u(d)&&0===m(d)};h.maximumDimension=function(d){return Math.max(K(d),m(d),u(d))};h.offset=function(d,p,G,Q,T=d){T[0]=d[0]+p;T[1]=d[1]+G;T[2]=d[2]+Q;T[3]=d[3]+p;T[4]=d[4]+
G;T[5]=d[5]+Q;return T};h.scale=function(d,p,G=d){const Q=d[0]+K(d)/2,T=d[1]+u(d)/2,aa=d[2]+m(d)/2;G[0]=Q+(d[0]-Q)*p;G[1]=T+(d[1]-T)*p;G[2]=aa+(d[2]-aa)*p;G[3]=Q+(d[3]-Q)*p;G[4]=T+(d[4]-T)*p;G[5]=aa+(d[5]-aa)*p;return G};h.set=A;h.setMax=function(d,p,G=d){G[3]=p[0];G[4]=p[1];G[5]=p[2];G!==d&&(G[0]=d[0],G[1]=d[1],G[2]=d[2]);return d};h.setMin=function(d,p,G=d){G[0]=p[0];G[1]=p[1];G[2]=p[2];G!==d&&(G[3]=d[3],G[4]=d[4],G[5]=d[5]);return G};h.size=function(d,p=[0,0,0]){p[0]=K(d);p[1]=u(d);p[2]=m(d);return p};
h.toExtent=function(d,p){return isFinite(d[2])||isFinite(d[5])?new la({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:p}):new la({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:p})};h.toRect=function(d,p){p||(p=ba.create());p[0]=d[0];p[1]=d[1];p[2]=d[3];p[3]=d[4];return p};h.width=K;h.wrap=function(d,p,G,Q,T,aa){return S(d,p,G,Q,T,aa,w)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(h,f,la,ba,P,S,K,u,m,n){function A(B,N){return B?N?4:3:N?3:2}function R(B,N,da,X){if(B){if(da)return N&&X?r:mb;if(N&&X)return c}else if(N&&X)return mb;return kb}function J({scale:B,translate:N},da){return Math.round((da-N[0])/B[0])}function g({scale:B,translate:N},da){return Math.round((N[1]-da)/B[1])}function w({scale:B,translate:N},da,X){return da*B[X]+N[X]}function d(B){B=B.coords;return{x:B[0],y:B[1]}}function p(B,N){B.coords[0]=N.x;B.coords[1]=N.y;return B}function G(B){B=B.coords;return{x:B[0],
y:B[1],z:B[2]}}function Q(B,N){B.coords[0]=N.x;B.coords[1]=N.y;B.coords[2]=N.z;return B}function T(B){B=B.coords;return{x:B[0],y:B[1],m:B[2]}}function aa(B,N){B.coords[0]=N.x;B.coords[1]=N.y;B.coords[2]=N.m;return B}function C(B){B=B.coords;return{x:B[0],y:B[1],z:B[2],m:B[3]}}function q(B,N){B.coords[0]=N.x;B.coords[1]=N.y;B.coords[2]=N.z;B.coords[3]=N.m;return B}function z(B,N){return B&&N?q:B?Q:N?aa:p}function E(B,N,da,X,ia){da=z(da,X);for(const {geometry:na,attributes:ra}of N)N=ba.isSome(na)?da(new n,
na):null,B.push(new u.OptimizedFeature(N,ra,null,ia?ra[ia]:void 0));return B}function O(B,N,da,X){for(const {geometry:ia,attributes:na}of N)B.push({attributes:na,geometry:ba.isSome(ia)?F(ia,da,X):null});return B}function F(B,N,da){if(ba.isNone(B))return null;const X=A(N,da),ia=[];for(let na=0;na<B.coords.length;na+=X){const ra=[];for(let U=0;U<X;U++)ra.push(B.coords[na+U]);ia.push(ra)}return N?da?{points:ia,hasZ:N,hasM:da}:{points:ia,hasZ:N}:da?{points:ia,hasM:da}:{points:ia}}function H(B,N,da,X,
ia){da=A(da,X);for(const {geometry:na,attributes:ra}of N)N=ba.isSome(na)?L(new n,na,da):null,B.push(new u.OptimizedFeature(N,ra,null,ia?ra[ia]:void 0));return B}function L(B,N,da=A(N.hasZ,N.hasM)){B.lengths[0]=N.points.length;const X=B.coords;let ia=0;for(const na of N.points)for(N=0;N<da;N++)X[ia++]=na[N];return B}function I(B,N,da){if(!B)return null;const X=A(N,da),{coords:ia,lengths:na}=B;B=[];let ra=0;for(const U of na){const ca=[];for(let pa=0;pa<U;pa++){const wa=[];for(let Ba=0;Ba<X;Ba++)wa.push(ia[ra++]);
ca.push(wa)}B.push(ca)}return N?da?{paths:B,hasZ:N,hasM:da}:{paths:B,hasZ:N}:da?{paths:B,hasM:da}:{paths:B}}function x(B,N,da,X,ia){da=A(da,X);for(const {geometry:na,attributes:ra}of N)N=ba.isSome(na)?y(new n,na,da):null,B.push(new u.OptimizedFeature(N,ra,null,ia?ra[ia]:void 0));return B}function y(B,N,da=A(N.hasZ,N.hasM)){const {lengths:X,coords:ia}=B;let na=0;for(const ra of N.paths){for(const U of ra)for(N=0;N<da;N++)ia[na++]=U[N];X.push(ra.length)}return B}function l(B,N,da){if(!B)return null;
const X=A(N,da),{coords:ia,lengths:na}=B;B=[];let ra=0;for(const U of na){const ca=[];for(let pa=0;pa<U;pa++){const wa=[];for(let Ba=0;Ba<X;Ba++)wa.push(ia[ra++]);ca.push(wa)}B.push(ca)}return N?da?{rings:B,hasZ:N,hasM:da}:{rings:B,hasZ:N}:da?{rings:B,hasM:da}:{rings:B}}function t(B,N,da,X,ia){for(const {geometry:na,centroid:ra,attributes:U}of N){N=ba.isSome(na)?W(new n,na,da,X):null;const ca=ia?U[ia]:void 0;ba.isSome(ra)?B.push(new u.OptimizedFeature(N,U,p(new n,ra),ca)):B.push(new u.OptimizedFeature(N,
U,null,ca))}return B}function W(B,N,da=N.hasZ,X=N.hasM){ja(B,N.rings,da,X);return B}function ja(B,N,da,X){da=A(da,X);const {lengths:ia,coords:na}=B;X=0;Na(B);for(const ra of N){for(const U of ra)for(N=0;N<da;N++)na[X++]=U[N];ia.push(ra.length)}return B}function ta(B,N,da,X,ia,na){Ya(B);if(!da){for(const ra of N)B.push(new u.OptimizedFeature(null,ra.attributes,null,na?ra.attributes[na]:void 0));return B}switch(da){case "esriGeometryPoint":return E(B,N,X,ia,na);case "esriGeometryMultipoint":return H(B,
N,X,ia,na);case "esriGeometryPolyline":return x(B,N,X,ia,na);case "esriGeometryPolygon":return t(B,N,X,ia,na);default:Ua.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`)),Ya(B)}return B}function ya(B,N,da,X){B=B&&("coords"in B?B:B.geometry);if(ba.isNone(B))return null;switch(N){case "esriGeometryPoint":return N=d,da&&X?N=C:da?N=G:X&&(N=T),N(B);case "esriGeometryMultipoint":return F(B,da,X);case "esriGeometryPolyline":return I(B,da,X);case "esriGeometryPolygon":return l(B,
da,X);default:return Ua.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${N}'`)),null}}function Da(B,N,da,X,ia){Ya(B);if(ba.isNone(da)){for(const ra of N)B.push({attributes:ra.attributes});return B}switch(da){case "esriGeometryPoint":da=d;X&&ia?da=C:X?da=G:ia&&(da=T);for(var na of N){const {geometry:ra,attributes:U}=na;X=ba.isSome(ra)?da(ra):null;B.push({attributes:U,geometry:X})}break;case "esriGeometryMultipoint":return O(B,N,X,ia);case "esriGeometryPolyline":for(const {geometry:ra,
attributes:U}of N)B.push({attributes:U,geometry:ba.isSome(ra)?I(ra,X,ia):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:U,centroid:ca}of N)na=ba.isSome(ra)?l(ra,X,ia):null,ba.isSome(ca)?(N=d(ca),B.push({attributes:U,centroid:N,geometry:na})):B.push({attributes:U,geometry:na});break;default:Ua.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}return B}function Ha(B,N,da,X,ia,na,ra=da,U=X){Na(B);if(ba.isNone(N)||!N.coords.length)return null;
ia=jb[ia];const {coords:ca,lengths:pa}=N;N=A(da,X);const wa=A(da&&ra,X&&U);da=R(da,X,ra,U);if(!pa.length)return da(B.coords,ca,0,0,J(na,ca[0]),g(na,ca[1])),Na(B,N,0),B;let Ba,Oa=0,Ka,Ra=0;for(const Sa of pa){if(Sa<ia)continue;let Ga=0;Ka=Ra;U=X=J(na,ca[Oa]);Ba=ra=g(na,ca[Oa+1]);da(B.coords,ca,Ka,Oa,U,Ba);Ga++;Oa+=N;Ka+=wa;for(let Ta=1;Ta<Sa;Ta++,Oa+=N)if(U=J(na,ca[Oa]),Ba=g(na,ca[Oa+1]),U!==X||Ba!==ra)da(B.coords,ca,Ka,Oa,U-X,Ba-ra),Ka+=wa,Ga++,X=U,ra=Ba;Ga>=ia&&(B.lengths.push(Ga),Ra=Ka)}Ya(B.coords,
Ra);return B.coords.length?B:null}function Fa(B,N,da,X,ia,na,ra){let U=X,ca=0;for(let wa=na+da;wa<ra;wa+=da){var pa=N[wa];const Ba=N[wa+1],Oa=N[ra],Ka=N[ra+1];let Ra=N[na],Sa=N[na+1],Ga=Oa-Ra,Ta=Ka-Sa;if(0!==Ga||0!==Ta){const xa=((pa-Ra)*Ga+(Ba-Sa)*Ta)/(Ga*Ga+Ta*Ta);1<xa?(Ra=Oa,Sa=Ka):0<xa&&(Ra+=Ga*xa,Sa+=Ta*xa)}Ga=pa-Ra;Ta=Ba-Sa;pa=Ga*Ga+Ta*Ta;pa>U&&(ca=wa,U=pa)}U>X&&(ca-na>da&&Fa(B,N,da,X,ia,na,ca),ia(B,N,B.length,ca,N[ca],N[ca+1]),ra-ca>da&&Fa(B,N,da,X,ia,ca,ra))}function La(B,N,da,X,ia){const {coords:na,
lengths:ra}=N;da=A(da,X);if(!na.length)return B!==N&&Na(B),B;ba.assertIsSome(ia);const {originPosition:U,scale:ca,translate:pa}=ia;ia=va;ia.originPosition=U;X=ia.scale;X[0]=ca[0]??1;X[1]=-(ca[1]??1);X[2]=ca[2]??1;X[3]=ca[3]??1;var wa=ia.translate;wa[0]=pa[0]??0;wa[1]=pa[1]??0;wa[2]=pa[2]??0;wa[3]=pa[3]??0;if(!ra.length){for(X=0;X<da;++X)B.coords[X]=w(ia,na[X],X);B!==N&&Na(B,da,0);return B}wa=0;for(let Oa=0;Oa<ra.length;Oa++){const Ka=ra[Oa];B.lengths[Oa]=Ka;for(var Ba=0;Ba<da;++Ba)B.coords[wa+Ba]=
w(ia,na[wa+Ba],Ba);Ba=B.coords[wa];let Ra=B.coords[wa+1];wa+=da;for(let Sa=1;Sa<Ka;Sa++,wa+=da){Ba+=na[wa]*X[0];Ra+=na[wa+1]*X[1];B.coords[wa]=Ba;B.coords[wa+1]=Ra;for(let Ga=2;Ga<da;++Ga)B.coords[wa+Ga]=w(ia,na[wa+Ga],Ga)}}B!==N&&Na(B,na.length,ra.length);return B}function Ja(B,N,da,X){let ia=0,na=B[X*N],ra=B[X*(N+1)];for(let U=1;U<da;U++){const ca=na+B[X*(N+U)],pa=ra+B[X*(N+U)+1],wa=(ca-na)*(pa+ra);na=ca;ra=pa;ia+=wa}return.5*ia}function Na(B,N=0,da=0){Ya(B.lengths,da);Ya(B.coords,N)}function Ya(B,
N=0){B.length!==N&&(B.length=N)}const Ua=la.getLogger("esri.layers.graphics.featureConversionUtils"),jb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},kb=(B,N,da,X,ia,na)=>{B[da]=ia;B[da+1]=na},mb=(B,N,da,X,ia,na)=>{B[da]=ia;B[da+1]=na;B[da+2]=N[X+2]},c=(B,N,da,X,ia,na)=>{B[da]=ia;B[da+1]=na;B[da+2]=N[X+3]},r=(B,N,da,X,ia,na)=>{B[da]=ia;B[da+1]=na;B[da+2]=N[X+2];B[da+3]=N[X+3]},ea=[],ka=[],va={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,
0]};h.convertFromFeature=function(B,N,da,X,ia){ea[0]=B;[B]=ta(ka,ea,N,da,X,ia);Ya(ea);Ya(ka);return B};h.convertFromFeatureSet=function(B,N){const da=new m,{hasM:X,hasZ:ia,features:na,objectIdFieldName:ra,spatialReference:U,geometryType:ca,exceededTransferLimit:pa,transform:wa,fields:Ba}=B;Ba&&(da.fields=Ba);da.geometryType=ca??null;da.objectIdFieldName=ra??N??null;da.spatialReference=U??null;if(!da.objectIdFieldName)return Ua.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
da;na&&ta(da.features,na,ca,ia,X,da.objectIdFieldName);pa&&(da.exceededTransferLimit=pa);X&&(da.hasM=X);ia&&(da.hasZ=ia);wa&&(da.transform=wa);return da};h.convertFromFeatures=ta;h.convertFromGeometry=function(B,N,da){if(ba.isNone(B))return null;const X=new n;"hasZ"in B&&null==N&&(N=B.hasZ);"hasM"in B&&null==da&&(da=B.hasM);if(K.isPoint(B))return z(null!=N?N:null!=B.z,null!=da?da:null!=B.m)(X,B);if(K.isPolygon(B))return W(X,B,N,da);if(K.isPolyline(B))return y(X,B,A(N,da));if(K.isMultipoint(B))return L(X,
B,A(N,da));Ua.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${B}'`))};h.convertFromGraphics=function(B,N,da,X,ia,na){const ra=B.length;switch(da){case "esriGeometryPoint":E(B,N,X,ia,na);break;case "esriGeometryMultipoint":H(B,N,X,ia,na);break;case "esriGeometryPolyline":x(B,N,X,ia,na);break;case "esriGeometryPolygon":t(B,N,X,ia,na);break;default:Ua.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}for(X=
0;X<N.length;X++)B[X+ra].geometryType=da,B[X+ra].insertAfter=N[X].insertAfter,B[X+ra].groupId=N[X].groupId;return B};h.convertFromMultipoint=L;h.convertFromMultipointFeatures=H;h.convertFromNestedArray=ja;h.convertFromPoint=function(B,N,da=z(null!=N.z,null!=N.m)){return da(B,N)};h.convertFromPointFeatures=E;h.convertFromPolygon=W;h.convertFromPolyline=y;h.convertFromPolylineFeatures=x;h.convertToFeature=function(B,N,da,X){ka[0]=B;Da(ea,ka,N,da,X);B=ea[0];Ya(ea);Ya(ka);return B};h.convertToFeatureSet=
function(B){const {objectIdFieldName:N,spatialReference:da,transform:X,fields:ia,hasM:na,hasZ:ra,features:U,geometryType:ca,exceededTransferLimit:pa,uniqueIdField:wa,queryGeometry:Ba,queryGeometryType:Oa}=B;B=Da([],U,ca,ra,na);const Ka=ya(Ba,Oa,!1,!1);B={features:B,fields:ia,geometryType:ca,objectIdFieldName:N,spatialReference:da,uniqueIdField:wa,queryGeometry:Ka};X&&(B.transform=X);pa&&(B.exceededTransferLimit=pa);na&&(B.hasM=na);ra&&(B.hasZ=ra);return B};h.convertToFeatures=Da;h.convertToGeometry=
ya;h.convertToMultipoint=F;h.convertToMultipointFeatures=O;h.convertToPoint=function(B,N,da){return B?N?da?C(B):G(B):da?T(B):d(B):null};h.convertToPolygon=l;h.convertToPolyline=I;h.deltaDecodeGeometry=function(B,N){if(ba.isNone(B))return null;const da=B.clone(),X=B.coords;B=B.lengths;let ia=0;for(let U=0;U<B.length;U++){const ca=B[U];var na=X[N*ia],ra=X[N*ia+1];for(let pa=1;pa<ca;pa++)na+=X[N*(ia+pa)],ra+=X[N*(ia+pa)+1],da.coords[N*(ia+pa)]=na,da.coords[N*(ia+pa)+1]=ra;ia+=ca}return da};h.deltaEncodeGeometry=
function(B,N){const da=B.clone(),X=B.coords;B=B.lengths;let ia=0;for(let ra=0;ra<B.length;ra++){const U=B[ra];let ca=X[N*ia];var na=X[N*ia+1];for(let pa=1;pa<U;pa++){const wa=X[N*(ia+pa)],Ba=X[N*(ia+pa)+1];na=Ba-na;da.coords[N*(ia+pa)]=wa-ca;da.coords[N*(ia+pa)+1]=na;ca=wa;na=Ba}ia+=U}return da};h.generalizeOptimizedGeometry=function(B,N,da,X,ia,na,ra=da,U=X){Na(B);if(!N||!N.coords.length)return null;ia=jb[ia];const {coords:ca,lengths:pa}=N;N=A(da,X);const wa=A(da&&ra,X&&U);da=R(da,X,ra,U);if(!pa.length)return da(B.coords,
ca,0,0,ca[0],ca[1]),Na(B,N,0),B;X=0;na*=na;for(const Ba of pa){if(Ba<ia){X+=Ba*N;continue}ra=B.coords.length/wa;U=X;const Oa=X+(Ba-1)*N;da(B.coords,ca,B.coords.length,U,ca[U],ca[U+1]);Fa(B.coords,ca,N,na,da,U,Oa);da(B.coords,ca,B.coords.length,Oa,ca[Oa],ca[Oa+1]);U=B.coords.length/wa-ra;U>=ia?B.lengths.push(U):Ya(B.coords,ra*wa);X+=Ba*N}return B.coords.length?B:null};h.getBoundsOptimizedGeometry=function(B,N,da,X){if(ba.isNone(N)||!N.coords||!N.coords.length)return null;da=A(da,X);let ia=X=Number.POSITIVE_INFINITY,
na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(N&&N.coords){N=N.coords;for(let U=0;U<N.length;U+=da){const ca=N[U],pa=N[U+1];X=Math.min(X,ca);na=Math.max(na,ca);ia=Math.min(ia,pa);ra=Math.max(ra,pa)}}P.is(B)?P.fromRectValues(B,X,ia,na,ra):S.fromValues(X,ia,na,ra,B);return B};h.getQuantizedArea=function(B,N){const {coords:da,lengths:X}=B;let ia=B=0;for(let na=0;na<X.length;na++){const ra=X[na];ia+=Ja(da,B,ra,N);B+=ra}return Math.abs(ia)};h.getQuantizedBoundsOptimizedGeometry=function(B,
N,da,X){da=A(da,X);const {lengths:ia,coords:na}=N;X=N=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY,ca=0;for(const pa of ia){let wa=na[ca],Ba=na[ca+1];N=Math.min(wa,N);X=Math.min(Ba,X);ra=Math.max(wa,ra);U=Math.max(Ba,U);ca+=da;for(let Oa=1;Oa<pa;Oa++,ca+=da){const Ka=na[ca],Ra=na[ca+1];wa+=Ka;Ba+=Ra;0>Ka&&(N=Math.min(N,wa));0<Ka&&(ra=Math.max(ra,wa));0>Ra?X=Math.min(X,Ba):0<Ra&&(U=Math.max(U,Ba))}}B[0]=N;B[1]=X;B[2]=ra;B[3]=U;return B};h.getSignedQuantizedRingArea=
Ja;h.quantizeOptimizedFeatureSet=function(B,N){const {geometryType:da,features:X,hasM:ia,hasZ:na}=N;if(!B)return N;for(let ra=0;ra<X.length;ra++){const U=X[ra],ca=U.weakClone();ca.geometry=new n;Ha(ca.geometry,U.geometry,ia,na,da,B);U.centroid&&(ca.centroid=new n,Ha(ca.centroid,U.centroid,ia,na,"esriGeometryPoint",B));X[ra]=ca}N.transform=B;return N};h.quantizeOptimizedGeometry=Ha;h.quantizeX=J;h.quantizeY=g;h.removeCollinearVectices=function(B,N,da,X,ia){if(!N||!N.coords||!N.coords.length)return null;
da=jb[da];const {coords:na,lengths:ra}=N;N=R(X,ia,X,ia);X=A(X,ia);let U=ia=0,ca=0,pa=0;for(const Oa of ra){U=pa;N(B.coords,na,U,ia,na[ia],na[ia+1]);ia+=X;var wa=na[ia];let Ka=na[ia+1],Ra=wa,Sa=Ka;var Ba=Ka/wa;U+=X;N(B.coords,na,U,ia,Ra,Sa);ia+=X;for(let Ga=2;Ga<Oa;Ga++){wa=na[ia];Ka=na[ia+1];const Ta=Ka/wa,xa=Ba===Ta||!isFinite(Ba)&&!isFinite(Ta);Ba=xa&&isFinite(Ta)?0<=Ba&&0<=Ta||0>=Ba&&0>=Ta:0<=Sa&&0<=Ka||0>=Sa&&0>=Ka;xa&&Ba?(Ra+=wa,Sa+=Ka):(Ra=wa,Sa=Ka,U+=X);N(B.coords,na,U,ia,Ra,Sa);ia+=X;Ba=Ta}U+=
X;wa=(U-pa)/X;wa>=da&&(B.lengths[ca]=wa,pa=U,ca++)}B.coords.length>pa&&(B.coords.length=pa);B.lengths.length>ca&&(B.lengths.length=ca);return B.coords.length&&B.lengths.length?B:null};h.removeZMValues=function(B,N,da,X,ia,na){Na(B);B.lengths.push(...N.lengths);if(da===ia&&X===na)for(var ra=0;ra<N.coords.length;ra++)B.coords.push(N.coords[ra]);else for(ra=A(da,X),da=R(da,X,ia,na),N=N.coords,X=0;X<N.length;X+=ra)da(B.coords,N,B.coords.length,X,N[X],N[X+1]);return B};h.unquantizeOptimizedFeatureSet=
function(B){const {transform:N,features:da,hasM:X,hasZ:ia}=B;if(!N)return B;for(const na of da)ba.isSome(na.geometry)&&La(na.geometry,na.geometry,X,ia,N),ba.isSome(na.centroid)&&La(na.centroid,na.centroid,X,ia,N);B.transform=null;return B};h.unquantizeOptimizedGeometry=La;h.unquantizeValue=w;h.unquantizeX=function(B,N){return w(B,N,0)};h.unquantizeY=function(B,N){return w(B,-N,1)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function h(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}h.prototype.weakClone=function(){const f=new h;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;
f.geometryType=this.geometryType;f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f};return h}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has",
"../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(h,f,la,ba,P){function S(m,n,A){K.minX=n[0];K.minY=n[1];K.maxX=n[2];K.maxY=n[3];m.search(K,A)}const K={minX:0,minY:0,maxX:0,maxY:0};let u=function(){function m(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new ba.PooledRBush(9,la("esri-csp-restrictions")?A=>({minX:A[0],minY:A[1],maxX:A[2],maxY:A[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>
{if(this._indexInvalid){const A=Array(this._idByBounds.size);let R=0;this._idByBounds.forEach((J,g)=>{A[R++]=g});this._indexInvalid=!1;this._index.clear();this._index.load(A)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(A=>this._idByBounds.has(A))))),this._boundsToLoad.length=0)}}var n=m.prototype;n.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};n.delete=function(A){const R=
this._boundsById.get(A);this._boundsById.delete(A);R&&(this._idByBounds.delete(R),this._indexInvalid||this._index.remove(R))};n.forEachInBounds=function(A,R){this._loadIndex();S(this._index,A,J=>R(this._idByBounds.get(J)))};n.get=function(A){return this._boundsById.get(A)};n.has=function(A){return this._boundsById.has(A)};n.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};n.set=function(A,R){if(!this._indexInvalid){const J=this._boundsById.get(A);
J&&(this._index.remove(J),this._idByBounds.delete(J))}this._boundsById.set(A,R);R&&(this._idByBounds.set(R,A),this._indexInvalid||(this._boundsToLoad.push(R),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(m,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const A=P.empty();for(const R of this._boundsById.values())R&&(A[0]=Math.min(R[0],A[0]),A[1]=Math.min(R[1],A[1]),A[2]=Math.max(R[2],A[2]),A[3]=Math.max(R[3],A[3]));return A}},{key:"valid",get:function(){return!this._indexInvalid}}]);
return m}();h.BoundsStore=u;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(h,f,la,ba,P,S){function K(E,O){u(E,0,E.children.length,O,E)}function u(E,O,F,H,L){L||(L=new q([]));L.minX=Infinity;L.minY=Infinity;L.maxX=-Infinity;L.maxY=-Infinity;for(let I=O,x;I<F;I++)x=E.children[I],m(L,E.leaf?
H(x):x);return L}function m(E,O){E.minX=Math.min(E.minX,O.minX);E.minY=Math.min(E.minY,O.minY);E.maxX=Math.max(E.maxX,O.maxX);E.maxY=Math.max(E.maxY,O.maxY)}function n(E,O){return E.minX-O.minX}function A(E,O){return E.minY-O.minY}function R(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function J(E){return E.maxX-E.minX+(E.maxY-E.minY)}function g(E,O){return E.minX<=O.minX&&E.minY<=O.minY&&O.maxX<=E.maxX&&O.maxY<=E.maxY}function w(E,O){return O.minX<=E.maxX&&O.minY<=E.maxY&&O.maxX>=E.minX&&O.maxY>=E.minY}
function d(E,O,F,H,L){for(O=[O,F];O.length;){F=ba.assumeNonNull(O.pop());const I=ba.assumeNonNull(O.pop());if(F-I<=H)continue;const x=I+Math.ceil((F-I)/H/2)*H;S.quickselect(E,x,I,F,L);O.push(I,x,x,F)}}let p=function(){function E(F=9,H){this._compareMinX=n;this._compareMinY=A;this._toBBox=L=>L;this._maxEntries=Math.max(4,F||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));H&&("function"===typeof H?this._toBBox=H:this._initFormat(H));this.clear()}var O=E.prototype;O.destroy=function(){this.clear();
G.prune();Q.prune();T.prune();aa.prune()};O.all=function(F){this._all(this._data,F)};O.search=function(F,H){let L=this._data;const I=this._toBBox;if(w(F,L))for(G.clear();L;){for(let x=0,y=L.children.length;x<y;x++){const l=L.children[x],t=L.leaf?I(l):l;w(F,t)&&(L.leaf?H(l):g(F,t)?this._all(l,H):G.push(l))}L=G.pop()}};O.collides=function(F){let H=this._data;const L=this._toBBox;if(!w(F,H))return!1;for(G.clear();H;){for(let I=0,x=H.children.length;I<x;I++){const y=H.children[I],l=H.leaf?L(y):y;if(w(F,
l)){if(H.leaf||g(F,l))return!0;G.push(y)}}H=G.pop()}return!1};O.load=function(F){if(!F.length)return this;if(F.length<this._minEntries){for(let H=0,L=F.length;H<L;H++)this.insert(F[H]);return this}F=this._build(F.slice(0,F.length),0,F.length-1,0);if(this._data.children.length)if(this._data.height===F.height)this._splitRoot(this._data,F);else{if(this._data.height<F.height){const H=this._data;this._data=F;F=H}this._insert(F,this._data.height-F.height-1,!0)}else this._data=F;return this};O.insert=function(F){F&&
this._insert(F,this._data.height-1);return this};O.clear=function(){this._data=new q([]);return this};O.remove=function(F){if(!F)return this;let H=this._data,L=null,I=0,x=!1,y;const l=this._toBBox(F);T.clear();for(aa.clear();H||0<T.length;){H||(H=ba.assumeNonNull(T.pop()),L=T.data[T.length-1],I=aa.pop()??0,x=!0);if(H.leaf&&(y=la.indexOf(H.children,F,H.children.length,H.indexHint),-1!==y)){H.children.splice(y,1);T.push(H);this._condense(T);break}x||H.leaf||!g(H,l)?L?(I++,H=L.children[I],x=!1):H=null:
(T.push(H),aa.push(I),I=0,L=H,H=H.children[0])}return this};O.toJSON=function(){return this._data};O.fromJSON=function(F){this._data=F;return this};O._all=function(F,H){for(Q.clear();F;){if(!0===F.leaf)for(const L of F.children)H(L);else Q.pushArray(F.children);F=Q.pop()??null}};O._build=function(F,H,L,I){var x=L-H+1,y=this._maxEntries;if(x<=y)return F=new q(F.slice(H,L+1)),K(F,this._toBBox),F;I||(I=Math.ceil(Math.log(x)/Math.log(y)),y=Math.ceil(x/y**(I-1)));const l=new z([]);l.height=I;x=Math.ceil(x/
y);y=x*Math.ceil(Math.sqrt(y));for(d(F,H,L,y,this._compareMinX);H<=L;H+=y){const t=Math.min(H+y-1,L);d(F,H,t,x,this._compareMinY);for(let W=H;W<=t;W+=x)l.children.push(this._build(F,W,Math.min(W+x-1,t),I-1))}K(l,this._toBBox);return l};O._chooseSubtree=function(F,H,L,I){for(;;){I.push(H);if(!0===H.leaf||I.length-1===L)break;let x=Infinity,y=Infinity,l=void 0;for(let t=0,W=H.children.length;t<W;t++){const ja=H.children[t],ta=R(ja),ya=(Math.max(ja.maxX,F.maxX)-Math.min(ja.minX,F.minX))*(Math.max(ja.maxY,
F.maxY)-Math.min(ja.minY,F.minY))-ta;ya<y?(y=ya,x=ta<x?ta:x,l=ja):ya===y&&ta<x&&(x=ta,l=ja)}H=l||H.children[0]}return H};O._insert=function(F,H,L){var I=this._toBBox;L=L?F:I(F);T.clear();I=this._chooseSubtree(L,this._data,H,T);I.children.push(F);for(m(I,L);0<=H;)if(T.data[H].children.length>this._maxEntries)this._split(T,H),H--;else break;this._adjustParentBBoxes(L,T,H)};O._split=function(F,H){const L=F.data[H];var I=L.children.length;const x=this._minEntries;this._chooseSplitAxis(L,x,I);(I=this._chooseSplitIndex(L,
x,I))?(I=L.children.splice(I,L.children.length-I),I=L.leaf?new q(I):new z(I),I.height=L.height,K(L,this._toBBox),K(I,this._toBBox),H?F.data[H-1].children.push(I):this._splitRoot(L,I)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};O._splitRoot=function(F,H){this._data=new z([F,H]);this._data.height=F.height+1;K(this._data,this._toBBox)};O._chooseSplitIndex=function(F,H,L){let I,x,y=void 0;I=x=Infinity;for(let t=H;t<=L-H;t++){var l=u(F,0,t,this._toBBox);const W=
u(F,t,L,this._toBBox),ja=Math.max(0,Math.min(l.maxX,W.maxX)-Math.max(l.minX,W.minX))*Math.max(0,Math.min(l.maxY,W.maxY)-Math.max(l.minY,W.minY));l=R(l)+R(W);ja<I?(I=ja,y=t,x=l<x?l:x):ja===I&&l<x&&(x=l,y=t)}return y};O._chooseSplitAxis=function(F,H,L){const I=F.leaf?this._compareMinX:n,x=F.leaf?this._compareMinY:A,y=this._allDistMargin(F,H,L,I);H=this._allDistMargin(F,H,L,x);y<H&&F.children.sort(I)};O._allDistMargin=function(F,H,L,I){F.children.sort(I);I=this._toBBox;var x=u(F,0,H,I);const y=u(F,L-
H,L,I);let l=J(x)+J(y);for(let t=H;t<L-H;t++){const W=F.children[t];m(x,F.leaf?I(W):W);l+=J(x)}for(L=L-H-1;L>=H;L--)x=F.children[L],m(y,F.leaf?I(x):x),l+=J(y);return l};O._adjustParentBBoxes=function(F,H,L){for(;0<=L;L--)m(H.data[L],F)};O._condense=function(F){for(let H=F.length-1;0<=H;H--){const L=F.data[H];if(0===L.children.length)if(0<H){const I=F.data[H-1],x=I.children;x.splice(la.indexOf(x,L,x.length,I.indexHint),1)}else this.clear();else K(L,this._toBBox)}};O._initFormat=function(F){const H=
["return a"," - b",";"];this._compareMinX=new Function("a","b",H.join(F[0]));this._compareMinY=new Function("a","b",H.join(F[1]));this._toBBox=new Function("a","return {minX: a"+F[0]+", minY: a"+F[1]+", maxX: a"+F[2]+", maxY: a"+F[3]+"};")};return E}();const G=new P,Q=new P,T=new P,aa=new P({deallocator:void 0});P=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let C=function(E){function O(){var F=E.apply(this,arguments)||this;F.height=1;F.indexHint=new la.PositionHint;return F}
f._inheritsLoose(O,E);return O}(P),q=function(E){function O(F){var H=E.call(this)||this;H.children=F;H.leaf=!0;return H}f._inheritsLoose(O,E);return O}(C),z=function(E){function O(F){var H=E.call(this)||this;H.children=F;H.leaf=!1;return H}f._inheritsLoose(O,E);return O}(C);h.BBox=P;h.PooledRBush=p;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(h){var f={};(function(la){(function(ba){ba=ba();void 0!==ba&&(la.exports=
ba)})(function(){function ba(K,u,m,n,A){for(;n>m;){if(600<n-m){var R=n-m+1,J=u-m+1,g=Math.log(R),w=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*w*(R-w)/R)*(0>J-R/2?-1:1);ba(K,u,Math.max(m,Math.floor(u-J*w/R+g)),Math.min(n,Math.floor(u+(R-J)*w/R+g)),A)}R=K[u];J=m;w=n;P(K,m,u);for(0<A(K[n],R)&&P(K,m,n);J<w;){P(K,J,w);J++;for(w--;0>A(K[J],R);)J++;for(;0<A(K[w],R);)w--}0===A(K[m],R)?P(K,m,w):(w++,P(K,w,n));w<=u&&(m=w+1);u<=w&&(n=w-1)}}function P(K,u,m){var n=K[u];K[u]=K[m];K[m]=n}function S(K,u){return K<u?-1:
K>u?1:0}return function(K,u,m,n,A){ba(K,u,m||0,n||K.length-1,A||S)}})})({get exports(){return f},set exports(la){f=la}});h.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(h,f,la,ba,P){h.optimizedFeatureQueryEngineAdapter={getObjectId(S){return S.objectId},getAttributes(S){return S.attributes},getAttribute(S,K){return S.attributes[K]},cloneWithGeometry(S,
K){return new ba.OptimizedFeature(K,S.attributes,null,S.objectId)},getGeometry(S){return S.geometry},getCentroid(S,K){f.isNone(S.centroid)&&(S.centroid=la.getCentroidOptimizedGeometry(new P,S.geometry,K.hasZ,K.hasM));return S.centroid}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(h,f){function la(P,S,K,u,m,n,A=1){n=m?n?4:3:n?3:2;let R=K,J=K+n,g=0,w=0,d=K=0,p=0;for(let G=0,Q=u-1;G<Q;G++,R+=
n,J+=n){u=S[R];const T=S[R+1],aa=S[R+2],C=S[J],q=S[J+1],z=S[J+2];let E=u*q-C*T;d+=E;g+=(u+C)*E;w+=(T+q)*E;m&&(E=u*z-C*aa,K+=(aa+z)*E,p+=E);u<P[0]&&(P[0]=u);u>P[1]&&(P[1]=u);T<P[2]&&(P[2]=T);T>P[3]&&(P[3]=T);m&&(aa<P[4]&&(P[4]=aa),aa>P[5]&&(P[5]=aa))}0<d*A&&(d*=-1);0<p*A&&(p*=-1);if(!d)return null;P=[g,w,.5*d];m&&(P[3]=K,P[4]=.5*p);return P}function ba(P,S,K,u,m){m=u?m?4:3:m?3:2;let n=S,A=S+m,R=0,J=0,g=0,w=0;for(let Q=0,T=K-1;Q<T;Q++,n+=m,A+=m){var d=P[n];const aa=P[n+1],C=P[n+2],q=P[A],z=P[A+1],E=
P[A+2];if(u){var p=q-d;var G=z-aa;const O=E-C;p=Math.sqrt(p*p+G*G+O*O)}else p=q-d,G=z-aa,p=Math.sqrt(p*p+G*G);p&&(R+=p,u?(d=[d+.5*(q-d),aa+.5*(z-aa),C+.5*(E-C)],J+=p*d[0],g+=p*d[1],w+=p*d[2]):(d=[d+.5*(q-d),aa+.5*(z-aa)],J+=p*d[0],g+=p*d[1]))}return 0<R?u?[J/R,g/R,w/R]:[J/R,g/R]:0<K?u?[P[S],P[S+1],P[S+2]]:[P[S],P[S+1]]:null}h.getCentroidOptimizedGeometry=function(P,S,K,u,m){if(f.isNone(S)||!S.lengths.length)return null;const n="upperLeft"===m?.originPosition?-1:1;P.lengths.length&&(P.lengths.length=
0);P.coords.length&&(P.coords.length=0);m=P.coords;const A=[],R=K?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:J,coords:g}=S,w=K?u?4:3:u?3:2;let d=0;for(var p of J){const G=la(R,g,d,p,K,u,n);G&&A.push(G);d+=p*w}A.sort((G,Q)=>{let T=n*G[2]-n*Q[2];0===T&&K&&(T=G[4]-Q[4]);return T});A.length&&
(p=6*A[0][2],m[0]=A[0][0]/p,m[1]=A[0][1]/p,K&&(p=6*A[0][4],m[2]=0!==p?A[0][3]/p:0),m[0]<R[0]||m[0]>R[1]||m[1]<R[2]||m[1]>R[3]||K&&(m[2]<R[4]||m[2]>R[5]))&&(m.length=0);if(!m.length)if(S=S.lengths[0]?ba(g,0,J[0],K,u):null)m[0]=S[0],m[1]=S[1],K&&2<S.length&&(m[2]=S[2]);else return null;return P};h.lineCentroid=ba;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J,g){function w(){w=la._asyncToGenerator(function*(I,x,y){const {outFields:l,orderByFields:t,groupByFieldsForStatistics:W,outStatistics:ja}=I;if(l)for(var ta=0;ta<l.length;ta++)l[ta]=l[ta].trim();if(t)for(ta=0;ta<t.length;ta++)t[ta]=t[ta].trim();if(W)for(ta=0;ta<W.length;ta++)W[ta]=W[ta].trim();if(ja)for(ta=0;ta<ja.length;ta++)ja[ta].onStatisticField&&(ja[ta].onStatisticField=ja[ta].onStatisticField.trim());I.geometry&&!I.outSR&&(I.outSR=I.geometry.spatialReference);
return d(I,x,y)});return w.apply(this,arguments)}function d(I,x,y){return p.apply(this,arguments)}function p(){p=la._asyncToGenerator(function*(I,x,y){if(!I)return null;var {where:l}=I;I.where=l=l&&l.trim();if(!l||/^1 *= *1$/.test(l)||x&&x===l)I.where=null;if(!I.geometry)return I;x=yield Q(I);I.distance=0;I.units=null;"esriSpatialRelEnvelopeIntersects"===I.spatialRel&&({spatialReference:l}=I.geometry,x=u.getGeometryExtent(x),x.spatialReference=l);if(x){yield g.checkProjectionSupport(x.spatialReference,
y);l=x.spatialReference;x=G(x,y)&&m.isExtent(x)?{spatialReference:l,rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]}:x;l=(yield n.normalizeCentralMeridian(m.fromJSON(x)))[0];if(P.isNone(l))throw z;const t="quantizationParameters"in I&&I.quantizationParameters?.tolerance||"maxAllowableOffset"in I&&I.maxAllowableOffset||0;x=t&&G(x,y)?{densificationStep:8*t}:void 0;l=l.toJSON();x=yield g.project(l,l.spatialReference,y,x);if(!x)throw z;x.spatialReference=y;I.geometry=
x}return I});return p.apply(this,arguments)}function G(I,x){if(!I)return!1;const y=I.spatialReference;return(m.isExtent(I)||m.isPolygon(I)||m.isPolyline(I))&&!A.equals(y,x)&&!K.canProjectWithoutEngine(y,x)}function Q(I){return T.apply(this,arguments)}function T(){T=la._asyncToGenerator(function*(I){const {distance:x,units:y}=I,l=I.geometry;if(null==x||"vertexAttributes"in l)return l;var t=l.spatialReference;I=y?q.fromJSON(y):S.getUnitString(t);t=t&&(A.isGeographic(t)||A.isWebMercator(t))?l:yield g.checkProjectionSupport(t,
A.WGS84).then(()=>g.project(l,A.WGS84));return(yield aa())(t.spatialReference,t,x,I)});return T.apply(this,arguments)}function aa(){return C.apply(this,arguments)}function C(){C=la._asyncToGenerator(function*(){return(yield new Promise((I,x)=>h(["../../../geometry/geometryEngineJSON"],I,x))).geodesicBuffer});return C.apply(this,arguments)}const q=new ba.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),E=new J,O=new J,F=new J,H={esriGeometryPoint:R.convertToPoint,esriGeometryPolyline:R.convertToPolyline,esriGeometryPolygon:R.convertToPolygon,esriGeometryMultipoint:R.convertToMultipoint},L=(I,x)=>"_geVersion"!==I?x:void 0;f.QUERY_ENGINE_EMPTY_RESULT=z;f.cleanFromGeometryEngine=function(I){return I&&"_geVersion"in I?JSON.parse(JSON.stringify(I,L)):I};f.getGeometry=function(I,x,y,l,t,W,ja=x,ta=y){const ya=x&&ja,Da=y&&ta;l=P.isSome(l)?
"coords"in l?l:l.geometry:null;if(P.isNone(l))return null;if(t)return x=R.generalizeOptimizedGeometry(O,l,x,y,I,t,ja,ta),W&&(x=R.quantizeOptimizedGeometry(F,x,ya,Da,I,W)),H[I]?.(x,ya,Da)??null;if(W)return W=R.quantizeOptimizedGeometry(F,l,x,y,I,W,ja,ta),H[I]?.(W,ya,Da)??null;R.removeZMValues(E,l,x,y,ja,ta);return H[I]?.(E,ya,Da)??null};f.normalizeQuery=function(I,x,y){return w.apply(this,arguments)};f.normalizeQueryLike=d;f.transformCentroid=function(I,x,y,l=I.hasZ,t=I.hasM){if(P.isNone(x))return null;
const W=I.hasZ&&l,ja=I.hasM&&t;return y?(I=R.quantizeOptimizedGeometry(F,x,I.hasZ,I.hasM,"esriGeometryPoint",y,l,t),R.convertToPoint(I,W,ja)):R.convertToPoint(x,W,ja)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J){function g(C){const q=[];let z=0,E=0;for(let O=0;O<C.length;O++){const F=C[O];let H=null;for(let L=0;L<F.length;L++)H=F[L],q.push(H),0===L?E=z=H[0]:(z=Math.min(z,H[0]),E=Math.max(E,H[0]));H&&q.push([(z+E)/2,0])}return q}function w(C,q){if(!(C instanceof u||C instanceof K))throw aa.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ba("straightLineDensify: the input geometry is neither polyline nor polygon");var z=m.getGeometryParts(C);
const E=[];for(const F of z){z=[];E.push(z);z.push([F[0][0],F[0][1]]);for(let H=0;H<F.length-1;H++){const L=F[H][0],I=F[H][1],x=F[H+1][0],y=F[H+1][1];var O=Math.sqrt((x-L)*(x-L)+(y-I)*(y-I));const l=(y-I)/O,t=(x-L)/O,W=O/q;if(1<W){for(let ja=1;ja<=W-1;ja++){const ta=ja*q;z.push([t*ta+L,l*ta+I])}O=(O+Math.floor(W-1)*q)/2;z.push([t*O+L,l*O+I])}z.push([x,y])}}return"polygon"===C.type?new K({rings:E,spatialReference:C.spatialReference}):new u({paths:E,spatialReference:C.spatialReference})}function d(C,
q,z){q&&(C=w(C,1E6),C=A.webMercatorToGeographic(C,!0));z&&(C=m.updatePolyGeometry(C,z));return C}function p(C,q,z){if(Array.isArray(C)){var E=C[0];E>q?(z=m.offsetMagnitude(E,q),C[0]=E+-2*z*q):E<z&&(q=m.offsetMagnitude(E,z),C[0]=E+-2*q*z)}else E=C.x,E>q?(z=m.offsetMagnitude(E,q),C=C.clone().offset(-2*z*q,0)):E<z&&(q=m.offsetMagnitude(E,z),C=C.clone().offset(-2*q*z,0));return C}function G(C,q){let z=-1;for(let E=0;E<q.cutIndexes.length;E++){const O=q.cutIndexes[E],F=q.geometries[E],H=m.getGeometryParts(F);
for(let L=0;L<H.length;L++){const I=H[L];I.some(x=>{if(180>x[0])return!0;x=0;for(var y=0;y<I.length;y++){var l=I[y][0];x=l>x?l:x}x=Number(x.toFixed(9));x=-360*m.offsetMagnitude(x,180);for(y=0;y<I.length;y++)l=F.getPoint(L,y),F.setPoint(L,y,l.clone().offset(x,0));return!0})}if(O===z)if("polygon"===C[0].type)for(const L of m.getGeometryParts(F))C[O]=C[O].addRing(L);else{if("polyline"===C[0].type)for(const L of m.getGeometryParts(F))C[O]=C[O].addPath(L)}else z=O,C[O]=F}return C}function Q(C,q,z){return T.apply(this,
arguments)}function T(){T=f._asyncToGenerator(function*(C,q,z){if(!Array.isArray(C))return Q([C],q);q&&"string"!==typeof q&&aa.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var E="string"===typeof q?q:q?.url??la.geometryServiceUrl;let O,F,H;let L=0;var I=[];q=[];for(var x of C)if(S.isNone(x))q.push(x);else{if(!y){var y=x.spatialReference;var l=n.getInfo(y);var t=(O=y.isWebMercator)?102100:4326;F=m.cutParams[t].maxX;H=m.cutParams[t].minX;var W=m.cutParams[t].plus180Line;
t=m.cutParams[t].minus180Line}if(l)if("mesh"===x.type)q.push(x);else if("point"===x.type)q.push(p(x.clone(),F,H));else if("multipoint"===x.type){var ja=x.clone();ja.points=ja.points.map(ta=>p(ta,F,H));q.push(ja)}else if("extent"===x.type)ja=x.clone()._normalize(!1,!1,l),q.push(ja.rings?new K(ja):ja);else if(x.extent){ja=x.extent;const ta=2*m.offsetMagnitude(ja.xmin,H)*F;let ya=0===ta?x.clone():m.updatePolyGeometry(x.clone(),ta);ja.offset(ta,0);ja.intersects(W)&&ja.xmax!==F?(L=ja.xmax>L?ja.xmax:L,
ya=d(ya,O),I.push(ya),q.push("cut")):ja.intersects(t)&&ja.xmin!==H?(L=2*ja.xmax*F>L?2*ja.xmax*F:L,ya=d(ya,O,360),I.push(ya),q.push("cut")):q.push(ya)}else q.push(x.clone());else q.push(x)}y=m.offsetMagnitude(L,F);l=-90;W=y;for(x=new u;0<y;)t=-180+360*y,x.addPath([[t,l],[t,-1*l]]),l*=-1,y--;if(0<I.length&&0<W){y=yield R.cut(E,I,x,z);y=G(I,y);l=[];I=[];for(W=0;W<q.length;W++)x=q[W],"cut"!==x?I.push(x):(x=y.shift(),t=C[W],S.isSome(t)&&"polygon"===t.type&&t.rings&&1<t.rings.length&&x.rings.length>=t.rings.length?
(l.push(x),I.push("simplify")):I.push(O?A.geographicToWebMercator(x):x));if(!l.length)return I;q=yield J.simplify(E,l,z);C=[];for(z=0;z<I.length;z++)E=I[z],"simplify"!==E?C.push(E):C.push(O?A.geographicToWebMercator(q.shift()):q.shift());return C}C=[];for(z=0;z<q.length;z++)E=q[z],"cut"!==E?C.push(E):(E=I.shift(),C.push(!0===O?A.geographicToWebMercator(E):E));return C});return T.apply(this,arguments)}const aa=P.getLogger("esri.geometry.support.normalizeUtils");h.getDenormalizedExtent=function(C){if(!C)return null;
const q=C.extent;if(!q)return null;var z=C.spatialReference&&n.getInfo(C.spatialReference);if(!z)return q;const [E,O]=z.valid;({width:z}=q);let {xmin:F,xmax:H}=q;[F,H]=[H,F];if("extent"===C.type||0===z||z<=O||z>2*O||F<E||H>O)return q;let L;switch(C.type){case "polygon":if(1<C.rings.length)L=g(C.rings);else return q;break;case "polyline":if(1<C.paths.length)L=g(C.paths);else return q;break;case "multipoint":L=C.points}C=q.clone();for(let I=0;I<L.length;I++){let x=L[I][0];0>x?(x+=O,H=Math.max(x,H)):
(x-=O,F=Math.min(x,F))}C.xmin=F;C.xmax=H;return C.width<z?(C.xmin-=O,C.xmax-=O,C):q};h.normalizeCentralMeridian=Q;h.normalizeMapX=function(C,q){if(q=n.getInfo(q)){const [z,E]=q.valid;q=E-z;if(C<z)for(;C<z;)C+=q;if(C>E)for(;C>E;)C-=q}return C};h.straightLineDensify=w;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(h,f,la,ba){function P(S){return ba.isPolygon(S)?
S.rings:S.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:la.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:la.WGS84}),minus180Line:new f({paths:[[[-180,
-180],[-180,180]]],spatialReference:la.WGS84})}};h.cutParams=f;h.getGeometryParts=P;h.offsetMagnitude=function(S,K){return Math.ceil((S-K)/(2*K))};h.updatePolyGeometry=function(S,K){const u=P(S);for(const m of u)for(const n of m)n[0]+=K;return S};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(h,
f,la,ba,P,S){function K(){K=f._asyncToGenerator(function*(u,m,n,A){u=S.parseUrl(u);const R=m[0].spatialReference;m={...A,query:{...u.query,f:"json",sr:JSON.stringify(R),target:JSON.stringify({geometryType:P.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(n)}};m=yield ba(u.path+"/cut",m);const {cutIndexes:J,geometries:g=[]}=m.data;return{cutIndexes:J,geometries:g.map(w=>{w=P.fromJSON(w);w.spatialReference=R;return w})}});return K.apply(this,arguments)}h.cut=function(u,m,n,A){return K.apply(this,
arguments)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(h,f,la,ba,P,S){function K(u,m,n){const A={};for(const J in u)if("declaredClass"!==J){var R=u[J];if(null!=R&&"function"!==typeof R)if(Array.isArray(R)){A[J]=[];for(let g=0;g<R.length;g++)A[J][g]=K(R[g])}else"object"===typeof R?R.toJSON?(R=R.toJSON(n&&n[J]),A[J]=m?R:JSON.stringify(R)):A[J]=
m?R:JSON.stringify(R):A[J]=R}return A}h.asValidOptions=function(u,m){return m?{...m,query:{...(u??{}),...m.query}}:{query:u}};h.encode=K;h.getToken=function(u,m){return S.supportsApiKey(u)&&(m||f.apiKey)?m||f.apiKey:la.id?.findCredential(u)?.token};h.parseUrl=function(u){return"string"===typeof u?P.urlToObject(u):ba.clone(u)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(h,f,la,ba,P,S){function K(){K=f._asyncToGenerator(function*(u,m,n){const A="string"===typeof u?ba.urlToObject(u):u;u=m[0].spatialReference;const R=P.getJsonType(m[0]);m={...n,query:{...A.query,f:"json",sr:u.wkid?u.wkid:JSON.stringify(u),geometries:JSON.stringify(S.encodeGeometries(m))}};({data:m}=yield la(A.path+"/simplify",m));return S.decodeGeometries(m.geometries,R,u)});return K.apply(this,arguments)}h.simplify=function(u,m,n){return K.apply(this,arguments)};Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(h,f){h.decodeGeometries=function(la,ba,P){const S=f.getGeometryType(ba);return la.map(K=>{K=S.fromJSON(K);K.spatialReference=P;return K})};h.encodeGeometries=function(la){return{geometryType:f.getJsonType(la[0]),geometries:la.map(ba=>ba.toJSON())}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(h,f,la,ba,P,S,K){function u(d,p){if(!p)return null;if("x"in p){var G={x:0,y:0};[G.x,G.y]=d(p.x,p.y,R);null!=p.z&&(G.z=p.z);null!=p.m&&(G.m=p.m);return G}return"xmin"in p?(G={xmin:0,ymin:0,xmax:0,ymax:0},[G.xmin,G.ymin]=d(p.xmin,p.ymin,R),[G.xmax,G.ymax]=d(p.xmax,p.ymax,R),p.hasZ&&(G.zmin=p.zmin,G.zmax=p.zmax,G.hasZ=!0),p.hasM&&(G.mmin=p.mmin,G.mmax=p.mmax,G.hasM=!0),G):"rings"in p?{rings:m(p.rings,d),hasM:p.hasM,hasZ:p.hasZ}:"paths"in p?{paths:m(p.paths,d),hasM:p.hasM,hasZ:p.hasZ}:"points"in
p?{points:n(p.points,d),hasM:p.hasM,hasZ:p.hasZ}:null}function m(d,p){const G=[];for(const Q of d)G.push(n(Q,p));return G}function n(d,p){const G=[];for(const Q of d)d=p(Q[0],Q[1],[0,0]),G.push(d),2<Q.length&&d.push(Q[2]),3<Q.length&&d.push(Q[3]);return G}function A(){A=f._asyncToGenerator(function*(d,p){d&&p&&(d=Array.isArray(d)?d.map(G=>la.isSome(G.geometry)?G.geometry.spatialReference:null).filter(la.isSome):[d],yield ba.initializeProjection(d.map(G=>({source:G,dest:p}))))});return A.apply(this,
arguments)}const R=[0,0],J=u.bind(null,K.lngLatToXY),g=u.bind(null,K.xyToLngLat),w=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var p=d.prototype;p.push=function(){var G=f._asyncToGenerator(function*(Q,T,aa){if(!(Q&&Q.length&&T&&aa)||S.equals(T,aa))return Q;const C={geometries:Q,inSpatialReference:T,outSpatialReference:aa,resolve:null};this._jobs.push(C);return new Promise(q=>{C.resolve=q;null===this._timer&&(this._timer=setTimeout(this._process,
10))})});return function(Q,T,aa){return G.apply(this,arguments)}}();p._process=function(){this._timer=null;const G=this._jobs.shift();if(G){var {geometries:Q,inSpatialReference:T,outSpatialReference:aa,resolve:C}=G;K.canProject(T,aa)?S.isWebMercator(aa)?C(Q.map(J)):C(Q.map(g)):C(ba.projectMany(P.jsonAdapter,Q,T,aa,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());h.checkProjectionSupport=function(d,p){return A.apply(this,arguments)};h.project=function(d,p,
G,Q){if(!d)return d;G||(G=p,p=d.spatialReference);return S.isValid(p)&&S.isValid(G)&&!S.equals(p,G)?K.canProject(p,G)?(d=S.isWebMercator(G)?J(d):g(d),d.spatialReference=G,d):ba.projectMany(P.jsonAdapter,[d],p,G,null,Q)[0]:d};h.projectMany=function(d,p,G){return w.push(d,p,G)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J,g,w,d,p,G,Q,T,aa,C,q,z,E,O){function F(x){return null!=x&&x.every(y=>"exceedslimit"!==y.statisticType)}const H=new K.MemCacheStorage(2E6);let L=0,I=function(){function x(l){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:Q.queryCapabilities};this.geometryType=l.geometryType;this.hasM=!!l.hasM;this.hasZ=!!l.hasZ;this.objectIdField=l.objectIdField;this.spatialReference=l.spatialReference;this.definitionExpression=l.definitionExpression;
this.featureStore=l.featureStore;this.aggregateAdapter=l.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=l.timeInfo;l.cacheSpatialQueries&&(this._geometryQueryCache=new K.MemCache(L++ +"$$",H));this.fieldsIndex=new z(l.fields);l.scheduler&&l.priority&&(this._frameTask=l.scheduler.registerTask(l.priority))}var y=x.prototype;y.destroy=function(){this._frameTask=S.removeMaybe(this._frameTask);this.clearCache();S.destroyMaybe(this._geometryQueryCache);
this._changeHandle=S.removeMaybe(this._changeHandle);S.destroyMaybe(this.fieldsIndex)};y.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};y.executeQuery=function(){var l=f._asyncToGenerator(function*(t,W){try{return(yield this._executeQuery(t,{},W)).createQueryResponse()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new T.QueryEngineResult([],t,this)).createQueryResponse()}});return function(t,W){return l.apply(this,arguments)}}();
y.executeQueryForCount=function(){var l=f._asyncToGenerator(function*(t={},W){try{return(yield this._executeQuery(t,{returnGeometry:!1,returnCentroid:!1,outSR:null},W)).createQueryResponseForCount()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return l.apply(this,arguments)}}();y.executeQueryForExtent=function(){var l=f._asyncToGenerator(function*(t,W){const ja=t.outSR;try{const ta=yield this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},
W),ya=ta.size;if(!ya)return{count:0,extent:null};const Da=yield this._getBounds(ta.items,ta.spatialReference,ja||this.spatialReference);return{count:ya,extent:Da}}catch(ta){if(ta===q.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ta;}});return function(t,W){return l.apply(this,arguments)}}();y.executeQueryForIds=function(){var l=f._asyncToGenerator(function*(t,W){return this.executeQueryForIdSet(t,W).then(ja=>Array.from(ja))});return function(t,W){return l.apply(this,arguments)}}();y.executeQueryForIdSet=
function(){var l=f._asyncToGenerator(function*(t,W){try{const ja=yield this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},W),ta=ja.items,ya=new Set;yield this._reschedule(()=>{for(const Da of ta)ya.add(ja.featureAdapter.getObjectId(Da))},W);return ya}catch(ja){if(ja===q.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}});return function(t,W){return l.apply(this,arguments)}}();y.executeQueryForSnapping=function(){var l=f._asyncToGenerator(function*(t,W){const {point:ja,distance:ta,
types:ya}=t;if(ya===T.SnappingTypes.NONE)return{candidates:[]};const Da=yield this._reschedule(()=>this._checkQuerySupport(t.query),W),Ha=!w.equals(ja.spatialReference,this.spatialReference);Ha&&(yield G.checkProjectionSupport(ja.spatialReference,this.spatialReference));var Fa="number"===typeof ta?ta:ta.x,La="number"===typeof ta?ta:ta.y;Fa={xmin:ja.x-Fa,xmax:ja.x+Fa,ymin:ja.y-La,ymax:ja.y+La,spatialReference:ja.spatialReference};Fa=Ha?G.project(Fa,this.spatialReference):Fa;if(!Fa)return{candidates:[]};
La=(yield g.normalizeCentralMeridian(J.fromJSON(ja),null,{signal:W}))[0];const Ja=(yield g.normalizeCentralMeridian(J.fromJSON(Fa),null,{signal:W}))[0];if(S.isNone(La)||S.isNone(Ja))return{candidates:[]};const Na=new T.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),W),Da,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),W);yield this._reschedule(()=>this._executeTimeQuery(Na),W);yield this._reschedule(()=>this._executeAttributesQuery(Na),
W);W=La.toJSON();W=Ha?G.project(W,this.spatialReference):W;return Na.createSnappingResponse({...t,point:W,distance:Ha?Math.max(Fa.xmax-Fa.xmin,Fa.ymax-Fa.ymin)/2:ta},ja.spatialReference)});return function(t,W){return l.apply(this,arguments)}}();y.executeQueryForLatestObservations=function(){var l=f._asyncToGenerator(function*(t,W){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new ba("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:t,timeInfo:this.timeInfo});
try{const ja=yield this._executeQuery(t,{},W);yield this._reschedule(()=>this._filterLatest(ja),W);return ja.createQueryResponse()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new T.QueryEngineResult([],t,this)).createQueryResponse()}});return function(t,W){return l.apply(this,arguments)}}();y.executeQueryForSummaryStatistics=function(){var l=f._asyncToGenerator(function*(t={},W,ja){const {field:ta,normalizationField:ya,valueExpression:Da}=W;return(yield this._getQueryEngineResultForStats(t,
{field:ta,normalizationField:ya,valueExpression:Da},ja)).createSummaryStatisticsResponse(W)});return function(){return l.apply(this,arguments)}}();y.executeQueryForUniqueValues=function(){var l=f._asyncToGenerator(function*(t={},W,ja){const {field:ta,field2:ya,field3:Da,valueExpression:Ha}=W;return(yield this._getQueryEngineResultForStats(t,{field:ta,field2:ya,field3:Da,valueExpression:Ha},ja)).createUniqueValuesResponse(W)});return function(){return l.apply(this,arguments)}}();y.executeQueryForClassBreaks=
function(){var l=f._asyncToGenerator(function*(t={},W,ja){const {field:ta,normalizationField:ya,valueExpression:Da}=W;return(yield this._getQueryEngineResultForStats(t,{field:ta,normalizationField:ya,valueExpression:Da},ja)).createClassBreaksResponse(W)});return function(){return l.apply(this,arguments)}}();y.executeQueryForHistogram=function(){var l=f._asyncToGenerator(function*(t={},W,ja){const {field:ta,normalizationField:ya,valueExpression:Da}=W;return(yield this._getQueryEngineResultForStats(t,
{field:ta,normalizationField:ya,valueExpression:Da},ja)).createHistogramResponse(W)});return function(){return l.apply(this,arguments)}}();y.fetchRecomputedExtents=function(){var l=f._asyncToGenerator(function*(t){const [W,ja]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),S.isSome(this._timeExtentPromise)?
this._timeExtentPromise:this._timeExtentPromise=C.getTimeExtent(this.timeInfo,this.featureStore)]);u.throwIfAborted(t);return{fullExtent:W,timeExtent:ja}});return function(t){return l.apply(this,arguments)}}();y._getBounds=function(){var l=f._asyncToGenerator(function*(t,W,ja){const ta=n.set(n.create(),n.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(t,ya=>n.expandWithAABB(ta,ya));t={xmin:ta[0],ymin:ta[1],xmax:ta[3],ymax:ta[4],spatialReference:q.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(ta[2])&&isFinite(ta[5])&&(t.zmin=ta[2],t.zmax=ta[5]);W=G.project(t,W,ja);W.spatialReference=q.cleanFromGeometryEngine(ja);0===W.xmax-W.xmin&&(ja=m.getMetersPerUnitForSR(W.spatialReference),W.xmin-=ja,W.xmax+=ja);0===W.ymax-W.ymin&&(ja=m.getMetersPerUnitForSR(W.spatialReference),W.ymin-=ja,W.ymax+=ja);this.hasZ&&null!=W.zmin&&null!=W.zmax&&0===W.zmax-W.zmin&&(ja=m.getMetersPerUnitForSR(W.spatialReference),W.zmin-=ja,W.zmax+=ja);return W});return function(t,W,ja){return l.apply(this,
arguments)}}();y._schedule=function(){var l=f._asyncToGenerator(function*(t,W){return S.isSome(this._frameTask)?this._frameTask.schedule(t,W):t(O.noBudget)});return function(t,W){return l.apply(this,arguments)}}();y._reschedule=function(){var l=f._asyncToGenerator(function*(t,W){return S.isSome(this._frameTask)?this._frameTask.reschedule(t,W):t(O.noBudget)});return function(t,W){return l.apply(this,arguments)}}();y._getAllFeaturesQueryEngineResult=function(){var l=f._asyncToGenerator(function*(t){return new T.QueryEngineResult(yield this._getAllFeatures(),
t,this)});return function(t){return l.apply(this,arguments)}}();y._getAllFeatures=function(){var l=f._asyncToGenerator(function*(){var t=this;if(S.isNone(this._allFeaturesPromise)){const ta=[];this._allFeaturesPromise=f._asyncToGenerator(function*(){yield t.featureStore.forEach(ya=>ta.push(ya))})().then(()=>ta)}const W=this._allFeaturesPromise,ja=yield W;return W===this._allFeaturesPromise?ja.slice():this._getAllFeatures()});return function(){return l.apply(this,arguments)}}();y._executeQuery=function(){var l=
f._asyncToGenerator(function*(t,W,ja){t=P.clone(t);t=yield this._schedule(()=>q.normalizeQuery(t,this.definitionExpression,this.spatialReference),ja);t=yield this._reschedule(()=>this._checkQuerySupport(t),ja);t={...t,...W};const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),ya=yield this._reschedule(()=>this._executeGeometryQuery(t,ta,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(ya),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(ya),ja);yield this._reschedule(()=>
this._executeTimeQuery(ya),ja);yield this._reschedule(()=>this._executeAttributesQuery(ya),ja);return ya});return function(t,W,ja){return l.apply(this,arguments)}}();y._executeSceneFilterQuery=function(){var l=f._asyncToGenerator(function*(t,W){var ja=this;if(S.isNone(t.sceneFilter))return null;const {outSR:ta,returnGeometry:ya,returnCentroid:Da}=t;var Ha=this.featureStore.featureSpatialReference,Fa=t.sceneFilter.geometry;const La=S.isNone(Ha)||w.equals(Ha,Fa.spatialReference)?Fa:G.project(Fa,Ha);
if(!La)return null;Ha=ya||Da;Ha=w.isValid(ta)&&!w.equals(this.spatialReference,ta)&&Ha?function(){var Ua=f._asyncToGenerator(function*(jb){return ja._project(jb,ta)});return function(jb){return Ua.apply(this,arguments)}}():Ua=>Ua;const Ja=this.featureAdapter;Fa=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(La)),W);if("disjoint"===t.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Ua=new Set;for(var Na of Fa)Ua.add(Ja.getObjectId(Na));const jb=yield this._reschedule(()=>
this._getAllFeatures(),W);Na=yield this._reschedule(f._asyncToGenerator(function*(){const kb=yield aa.getSpatialQueryOperator("esriSpatialRelDisjoint",La,ja.geometryType,ja.hasZ,ja.hasM),mb=yield ja._runSpatialFilter(jb,c=>!Ua.has(Ja.getObjectId(c))||kb(Ja.getGeometry(c)),W);return new T.QueryEngineResult(mb,t,ja)}),W);return Ha(Na)}if(!Fa.length)return new T.QueryEngineResult([],t,this);if(this._canExecuteSinglePass(La,t))return Ha(new T.QueryEngineResult(Fa,t,this));const Ya=yield aa.getSpatialQueryOperator("esriSpatialRelContains",
La,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Fa,Ua=>Ya(Ja.getGeometry(Ua)),W);return Ha(new T.QueryEngineResult(Na,t,this))});return function(t,W){return l.apply(this,arguments)}}();y._executeGeometryQuery=function(){var l=f._asyncToGenerator(function*(t,W,ja){var ta=this;if(S.isSome(W)&&0===W.items.length)return W;t=S.isSome(W)?W.query:t;const {geometry:ya,outSR:Da,spatialRel:Ha,returnGeometry:Fa,returnCentroid:La}=t;var Ja=this.featureStore.featureSpatialReference;const Na=
!ya||S.isNone(Ja)||w.equals(Ja,ya.spatialReference)?ya:G.project(ya,Ja),Ya=Fa||La,Ua=w.isValid(Da)&&!w.equals(this.spatialReference,Da),jb=this._geometryQueryCache&&S.isNone(W)?Ua&&Ya?JSON.stringify({originalFilterGeometry:ya,spatialRelationship:Ha,outSpatialReference:Da}):JSON.stringify({originalFilterGeometry:ya,spatialRelationship:Ha}):null;Ja=jb?this._geometryQueryCache.get(jb):null;if(S.isSome(Ja))return new T.QueryEngineResult(Ja,t,this);Ja=function(){var ea=f._asyncToGenerator(function*(ka){Ua&&
Ya&&(yield ta._project(ka,Da));jb&&ta._geometryQueryCache.put(jb,ka.items,ka.items.length+1);return ka});return function(ka){return ea.apply(this,arguments)}}();if(!Na)return Ja(S.isSome(W)?W:yield this._getAllFeaturesQueryEngineResult(t));const kb=this.featureAdapter;let mb=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ya)),ja);if("esriSpatialRelDisjoint"===Ha){if(!mb.length)return Ja(S.isSome(W)?W:yield this._getAllFeaturesQueryEngineResult(t));const ea=new Set;for(var c of mb)ea.add(kb.getObjectId(c));
const ka=S.isSome(W)?W.items:yield this._reschedule(()=>this._getAllFeatures(),ja);c=yield this._reschedule(f._asyncToGenerator(function*(){const va=yield aa.getSpatialQueryOperator(Ha,Na,ta.geometryType,ta.hasZ,ta.hasM),B=yield ta._runSpatialFilter(ka,N=>!ea.has(kb.getObjectId(N))||va(kb.getGeometry(N)),ja);return new T.QueryEngineResult(B,t,ta)}),ja);return Ja(c)}if(S.isSome(W)){const ea=new la.PositionHint;mb=mb.filter(ka=>0<=la.indexOf(W.items,ka,W.items.length,ea))}if(!mb.length)return Ja=new T.QueryEngineResult([],
t,this),jb&&this._geometryQueryCache.put(jb,Ja.items,1),Ja;if(this._canExecuteSinglePass(Na,t))return Ja(new T.QueryEngineResult(mb,t,this));const r=yield aa.getSpatialQueryOperator(Ha,Na,this.geometryType,this.hasZ,this.hasM);c=yield this._runSpatialFilter(mb,ea=>r(kb.getGeometry(ea)),ja);return Ja(new T.QueryEngineResult(c,t,this))});return function(t,W,ja){return l.apply(this,arguments)}}();y._executeAggregateIdsQuery=function(l){if(0!==l.items.length&&l.query.aggregateIds&&l.query.aggregateIds.length&&
!S.isNone(this.aggregateAdapter)){var t=new Set;for(const ja of l.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ja).forEach(ta=>t.add(ta));var W=this.featureAdapter.getObjectId;l.items=l.items.filter(ja=>t.has(W(ja)))}};y._executeObjectIdsQuery=function(l){if(0!==l.items.length&&l.query.objectIds&&l.query.objectIds.length){var t=new Set(l.query.objectIds),W=this.featureAdapter.getObjectId;l.items=l.items.filter(ja=>t.has(W(ja)))}};y._executeTimeQuery=function(l){if(0!==l.items.length){var t=
C.getTimeOperator(this.timeInfo,l.query.timeExtent,this.featureAdapter);S.isNone(t)||(l.items=l.items.filter(t))}};y._executeAttributesQuery=function(l){if(0!==l.items.length){var t=p.getWhereClause(l.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError("Where clause is not standardized");l.items=l.items.filter(W=>t.testFeature(W,this.featureAdapter))}}};y._runSpatialFilter=function(){var l=f._asyncToGenerator(function*(t,W,ja){var ta=this;if(!W)return t;if(S.isNone(this._frameTask))return t.filter(Fa=>
W(Fa));let ya=0;const Da=[],Ha=function(){var Fa=f._asyncToGenerator(function*(La){for(;ya<t.length;){const Ja=t[ya++];W(Ja)&&(Da.push(Ja),La.madeProgress());La.done&&(yield ta._reschedule(Na=>Ha(Na),ja))}});return function(La){return Fa.apply(this,arguments)}}();return this._reschedule(Fa=>Ha(Fa),ja).then(()=>Da)});return function(t,W,ja){return l.apply(this,arguments)}}();y._filterLatest=function(l){const {trackIdField:t,startTimeField:W,endTimeField:ja}=this.timeInfo,ta=ja||W,ya=new Map,Da=this.featureAdapter.getAttribute;
for(const Ha of l.items){const Fa=Da(Ha,t),La=Da(Ha,ta),Ja=ya.get(Fa);(!Ja||La>Da(Ja,ta))&&ya.set(Fa,Ha)}l.items=Array.from(ya.values())};y._canExecuteSinglePass=function(l,t){({spatialRel:t}=t);return aa.canQueryWithRBush(l)&&("esriSpatialRelEnvelopeIntersects"===t||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t||"esriSpatialRelWithin"===t))};y._project=function(){var l=f._asyncToGenerator(function*(t,W){if(!W||w.equals(this.spatialReference,
W))return t;const ja=this.featureAdapter;W=yield G.projectMany(t.items.map(ta=>q.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(ta))),this.spatialReference,W);t.items=W.map((ta,ya)=>ja.cloneWithGeometry(t.items[ya],d.convertFromGeometry(ta,this.hasZ,this.hasM)));return t});return function(t,W){return l.apply(this,arguments)}}();y._getQueryBBoxes=function(l){if(aa.canQueryWithRBush(l)){if(J.isExtent(l))return[A.fromValues(l.xmin,l.ymin,l.xmax,l.ymax)];if(J.isPolygon(l))return l.rings.map(t=>
A.fromValues(Math.min(t[0][0],t[2][0]),Math.min(t[0][1],t[2][1]),Math.max(t[0][0],t[2][0]),Math.max(t[0][1],t[2][1])))}return[R.getBoundsXY(A.create(),l)]};y._searchFeatures=function(){var l=f._asyncToGenerator(function*(t){const W=new Set;yield Promise.all(t.map(ja=>this.featureStore.forEachInBounds(ja,ta=>W.add(ta))));t=Array.from(W.values());W.clear();return t});return function(t){return l.apply(this,arguments)}}();y._checkStatisticsSupport=function(){var l=f._asyncToGenerator(function*(t,W){if(0>
(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);return Promise.all([this._checkStatisticsParamsSupport(W),aa.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),G.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)});return function(t,
W){return l.apply(this,arguments)}}();y._checkStatisticsParamsSupport=function(){var l=f._asyncToGenerator(function*(t){var W=[];t.valueExpression&&({arcadeUtils:W}=yield E.loadArcade(),W=W.extractFieldNames(t.valueExpression));t.field&&W.push(t.field);t.field2&&W.push(t.field2);t.field3&&W.push(t.field3);t.normalizationField&&W.push(t.normalizationField);if(!W.length)throw new ba("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:t});p.validateFields(this.fieldsIndex,
W,"params contains missing fields")});return function(t){return l.apply(this,arguments)}}();y._checkQuerySupport=function(){var l=f._asyncToGenerator(function*(t){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new ba("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);this._checkStatisticsQuerySupport(t);return Promise.all([aa.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),
G.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)});return function(t){return l.apply(this,arguments)}}();y._checkAttributesQuerySupport=function(l){const {outFields:t,orderByFields:W,returnDistinctValues:ja,outStatistics:ta}=l,ya=ta?ta.map(Da=>Da.outStatisticFieldName&&Da.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(W&&0<W.length){const Da=W.map(Ha=>{const Fa=Ha.toLowerCase();return Fa.includes(" asc")?Fa.split(" asc")[0]:Fa.includes(" desc")?Fa.split(" desc")[0]:
Ha}).filter(Ha=>!ya.includes(Ha));p.validateFields(this.fieldsIndex,Da,"orderByFields contains missing fields")}if(t&&0<t.length)p.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(ja)throw new ba("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:l});p.validateWhere(this.fieldsIndex,l.where)};y._checkStatisticsQuerySupport=function(l){const {outStatistics:t,groupByFieldsForStatistics:W,having:ja}=l;var ta=W&&W.length,ya=
t&&t.length;if(ja){if(!ta||!ya)throw new ba("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:l});p.validateHaving(this.fieldsIndex,ja,t)}if(ya&&F(t)){ya=t.map(Da=>Da.onStatisticField).filter(Boolean);p.validateFields(this.fieldsIndex,ya,"onStatisticFields contains missing fields");ta&&p.validateFields(this.fieldsIndex,W,"groupByFieldsForStatistics contains missing fields");for(const Da of t){const {onStatisticField:Ha,statisticType:Fa}=
Da;if(("percentile_disc"===Fa||"percentile_cont"===Fa)&&"statisticParameters"in Da){if({statisticParameters:ta}=Da,!ta)throw new ba("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Da,query:l});}else if("count"!==Fa&&Ha&&p.hasInvalidFieldType(Ha,this.fieldsIndex))throw new ba("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Da,query:l});}}};y._getQueryEngineResultForStats=function(){var l=f._asyncToGenerator(function*(t,
W,ja){t=P.clone(t);try{t=yield this._schedule(()=>q.normalizeQuery(t,this.definitionExpression,this.spatialReference),ja);t=yield this._reschedule(()=>this._checkStatisticsSupport(t,W),ja);const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),ya=yield this._reschedule(()=>this._executeGeometryQuery(t,ta,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(ya),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(ya),ja);yield this._reschedule(()=>this._executeTimeQuery(ya),
ja);yield this._reschedule(()=>this._executeAttributesQuery(ya),ja);return ya}catch(ta){if(ta!==q.QUERY_ENGINE_EMPTY_RESULT)throw ta;return new T.QueryEngineResult([],t,this)}});return function(t,W,ja){return l.apply(this,arguments)}}();f._createClass(x,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return x}();h.Feature=function(x,y=null,l,t,W){this.attributes=x;this.geometry=l;this.centroid=t;this.filterFlags=W;this.groupId=-1;this.displayId=y};h.QueryEngine=I;
Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(h,f,la,ba){h.RemoveMode=void 0;(function(K){K[K.ALL=0]="ALL";K[K.SOME=1]="SOME"})(h.RemoveMode||(h.RemoveMode={}));let P=function(){function K(m,n,A){this._namespace=m;this._storage=n;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";A&&(this._storage.registerRemoveFunc(this._namespace,
A),this._removeFunc=!0)}var u=K.prototype;u.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};u.resetHitRate=function(){this._hit=this._miss=0};u.put=function(m,n,A,R=0){this._storage.put(this._namespace+m,n,A,R)};u.get=function(m){m=this._storage.get(this._namespace+m);void 0===m?++this._miss:++this._hit;return m};u.pop=function(m){m=this._storage.pop(this._namespace+m);
void 0===m?++this._miss:++this._hit;return m};u.updateSize=function(m,n,A){this._storage.updateSize(this._namespace+m,n,A)};u.clear=function(){this._storage.clear(this._namespace)};u.clearAll=function(){this._storage.clearAll()};u.getStats=function(){return this._storage.getStats()};u.resetStats=function(){this._storage.resetStats()};f._createClass(K,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return K}(),S=function(){function K(m=10485760){this._maxSize=m;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ba;this._users=new ba}var u=K.prototype;u.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};u.register=function(m){this._users.push(m)};u.deregister=function(m){this._users.removeUnordered(m)};u.registerRemoveFunc=
function(m,n){this._removeFuncs.push([m,n])};u.deregisterRemoveFunc=function(m){this._removeFuncs.filterInPlace(n=>n[0]!==m)};u.put=function(m,n,A,R){const J=this._db.get(m);J&&(this._size-=J.size,this._db.delete(m),J.entry!==n&&this._notifyRemove(m,J.entry,h.RemoveMode.ALL));A>this._maxSize?this._notifyRemove(m,n,h.RemoveMode.ALL):void 0===n?console.warn("Refusing to cache undefined entry "):!A||0>A?console.warn("Refusing to cache entry with invalid size "+A):(R=1+Math.max(R,-3)- -3,this._db.set(m,
{entry:n,size:A,lifetime:R,lives:R}),this._size+=A,this._checkSizeLimit())};u.updateSize=function(m,n,A){const R=this._db.get(m);if(R&&R.entry===n){for(this._size-=R.size;A>this._maxSize;)if(A=this._notifyRemove(m,n,h.RemoveMode.SOME),!(la.isSome(A)&&0<A)){this._db.delete(m);return}R.size=A;this._size+=A;this._checkSizeLimit()}};u.pop=function(m){const n=this._db.get(m);if(n)return this._size-=n.size,this._db.delete(m),++this._hit,n.entry;++this._miss};u.get=function(m){const n=this._db.get(m);if(void 0===
n)++this._miss;else return this._db.delete(m),n.lives=n.lifetime,this._db.set(m,n),++this._hit,n.entry};u.getStats=function(){const m={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},A=[];this._db.forEach((g,w)=>{const d=g.lifetime;A[d]=(A[d]||0)+g.size;this._users.forAll(p=>{p=p.namespace;w.startsWith(p)&&(n[p]=(n[p]||0)+g.size)})});const R={};this._users.forAll(g=>{const w=g.namespace;
!isNaN(g.hitRate)&&0<g.hitRate?(n[w]=n[w]||0,R[w]=Math.round(100*g.hitRate)+"%"):R[w]="0%"});var J=Object.keys(n);J.sort((g,w)=>n[w]-n[g]);J.forEach(g=>m[g]=Math.round(n[g]/2**20)+"MB / "+R[g]);for(J=A.length-1;0<=J;--J){const g=A[J];g&&(m["Priority "+(J+-3-1)]=Math.round(g/this.size*100)+"%")}return m};u.resetStats=function(){this._hit=this._miss=0;this._users.forAll(m=>m.resetHitRate())};u.clear=function(m){this._db.forEach((n,A)=>{A.startsWith(m)&&(this._size-=n.size,this._db.delete(A),this._notifyRemove(A,
n.entry,h.RemoveMode.ALL))})};u.clearAll=function(){this._db.forEach((m,n)=>this._notifyRemove(n,m.entry,h.RemoveMode.ALL));this._size=0;this._db.clear()};u._getHitRate=function(){return this._hit/(this._hit+this._miss)};u._notifyRemove=function(m,n,A){let R;this._removeFuncs.some(J=>m.startsWith(J[0])?(J=J[1](n,A),"number"===typeof J&&(R=J),!0):!1);return R};u._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [m,n]of this._db){this._db.delete(m);if(1>=n.lives){this._size-=n.size;
const A=this._notifyRemove(m,n.entry,h.RemoveMode.SOME);la.isSome(A)&&0<A&&(this._size+=A,n.lives=n.lifetime,n.size=A,this._db.set(m,n))}else--n.lives,this._db.set(m,n);if(this._size<=.9*this.maxSize)break}};f._createClass(K,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(m){this._maxSize=Math.max(m,0);this._checkSizeLimit()}}]);return K}();h.MIN_PRIORITY=-3;h.MemCache=P;h.MemCacheStorage=S;Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(h,f,la){function ba(m,n){return m?K.get(m,n):null}function P(m,n,A,R=!0){const J=[];for(const g of n)if("*"!==g&&!m.has(g))if(R){n=S(g);try{const w=ba(n,m);if(!w)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:n});if(!w.isStandardized)throw new f("feature-store:unsupported-query","expression is not standard",
{clause:w});P(m,w.fieldNames,"expression contains missing fields")}catch(w){if((n=w&&w.details)&&(n.clause||n.where))throw w;n&&n.missingFields?J.push(...n.missingFields):J.push(g)}}else J.push(g);if(J.length)throw new f("feature-store:unsupported-query",A,{missingFields:J});}function S(m){return m.split(" as ")[0]}const K=new la.WhereClauseCache(50,500),u=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
h.getAliasFromFieldName=function(m){return m.split(" as ")[1]};h.getExpressionFromFieldName=S;h.getWhereClause=ba;h.hasInvalidFieldType=function(m,n){return(m=n.get(m))?!u.has(m.type):!1};h.validateFields=P;h.validateHaving=function(m,n,A){if(!n)return!0;const R=K.get(n,m);if(!R)throw new f("feature-store:unsupported-query","invalid SQL expression",{having:n});if(!R.isAggregate)throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:n});P(m,R.fieldNames,
"having contains missing fields");if(!R.getExpressions().every(J=>{const {aggregateType:g,field:w}=J,d=m.get(w)?.name;return A.some(p=>{const {onStatisticField:G,statisticType:Q}=p;return m.get(G)?.name===d&&Q.toLowerCase().trim()===g})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:n});return!0};h.validateWhere=function(m,n){if(!n)return!0;const A=K.get(n,m);if(!A)throw new f("feature-store:unsupported-query","invalid SQL expression",
{where:n});if(!A.isStandardized)throw new f("feature-store:unsupported-query","where clause is not standard",{where:n});P(m,A.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(h,f,la){let ba=function(){function P(S,K){this._cache=new f(S);this._invalidCache=new f(K)}P.prototype.get=function(S,K){const u=`${K.uid}:${S}`,m=
this._cache.get(u);if(m)return m;if(void 0!==this._invalidCache.get(u))return null;try{const n=la.WhereClause.create(S,K);this._cache.put(u,n);return n}catch{return this._invalidCache.put(u,null),null}};return P}();h.WhereClauseCache=ba;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(h){return function(){function f(ba,P){this._storage=new h.MemCacheStorage;this._storage.maxSize=ba;P&&this._storage.registerRemoveFunc("",
P)}var la=f.prototype;la.put=function(ba,P){this._storage.put(ba,P,1,1)};la.pop=function(ba){return this._storage.pop(ba)};la.get=function(ba){return this._storage.get(ba)};la.clear=function(){this._storage.clearAll()};la.destroy=function(){this._storage.destroy()};return f}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(h,f,la,ba,P,S){function K(x,y){x+="";return x.length>=
y?x:Array(y-x.length+1).join("0")+x}function u(x,y,l="0",t="0",W="0",ja="0",ta="",ya="0",Da="0"){return"+"===ta||"-"===ta?(x=`${K(parseInt(x,10),4)}-${K(parseInt(y,10),2)}-${K(parseInt(l,10),2)}`,y="",10>parseFloat(ja)&&(y="0"),t=`${K(parseInt(t,10),2)}:${K(parseInt(W,10),2)}:${y+parseFloat(ja).toString()}`,ta=`${ta}${K(parseInt(ya,10),2)}:${K(parseInt(Da,10),2)}`,new Date(x+"T"+t+ta)):new Date(parseInt(x,10),parseInt(y,10)-1,parseInt(l,10),parseInt(t,10),parseInt(W,10),parseFloat(ja))}function m(x){let y=
C.exec(x);if(null!==y){const [,l,t,W,ja,ta,ya]=y;return u(l,t,W,ja,ta,ya)}y=q.exec(x);if(null!==y){const [,l,t,W,ja,ta,ya,Da,Ha,Fa]=y;return u(l,t,W,ja,ta,ya,Da,Ha,Fa)}y=z.exec(x);if(null!==y){const [,l,t,W,ja,ta,ya,Da,Ha]=y;return u(l,t,W,ja,ta,"0",ya,Da,Ha)}y=E.exec(x);if(null!==y){const [,l,t,W,ja,ta]=y;return u(l,t,W,ja,ta)}y=aa.exec(x);if(null!==y){const [,l,t,W]=y;return u(l,t,W)}throw Error("SQL Invalid Timestamp");}function n(x){const y=aa.exec(x);if(null===y)try{return m(x)}catch{throw Error("SQL Invalid Date");
}const [,l,t,W]=y;return new Date(parseInt(l,10),parseInt(t,10)-1,parseInt(W,10))}function A(x){return Array.isArray(x)?x:[x]}function R(x){return null!==x?!0!==x:null}function J(x,y){return null!=x&&null!=y?!0===x&&!0===y:!1===x||!1===y?!1:null}function g(x,y){return null!=x&&null!=y?!0===x||!0===y:!0===x||!0===y?!0:null}function w(x,y){if(null==x)return null;let l=!1;for(const t of y)if(null==t)l=null;else if(x===t){l=!0;break}return l}function d(x,y,l){if(null==x)return null;let t="",W=L.Normal;
for(let ja=0;ja<y.length;ja++){const ta=y.charAt(ja);switch(W){case L.Normal:ta===l?W=L.Escaped:t="-[]/{}()*+?.\\^$|".includes(ta)?t+("\\"+ta):"%"===ta?t+".*":"_"===ta?t+".":t+ta;break;case L.Escaped:t="-[]/{}()*+?.\\^$|".includes(ta)?t+("\\"+ta):t+ta,W=L.Normal}}return(new RegExp("^"+t+"$","m")).test(x)}function p(x){return x instanceof Date?x.valueOf():x}function G(x,y,l){if(null==y||null==l)return null;y=p(y);l=p(l);switch(x){case "\x3c\x3e":return y!==l;case "\x3d":return y===l;case "\x3e":return y>
l;case "\x3c":return y<l;case "\x3e\x3d":return y>=l;case "\x3c\x3d":return y<=l}}function Q(x,y,l){if("||"===x)return P.evaluateFunction("concat",[y,l]);if(y instanceof P.SqlInterval)if(l instanceof Date)switch(x){case "+":return new Date(y.valueInMilliseconds()+l.getTime());case "-":return y.valueInMilliseconds()-l.getTime();case "*":return y.valueInMilliseconds()*l.getTime();case "/":return y.valueInMilliseconds()/l.getTime()}else if(l instanceof P.SqlInterval)switch(x){case "+":return P.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()+
l.valueInMilliseconds());case "-":return P.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()-l.valueInMilliseconds());case "*":return y.valueInMilliseconds()*l.valueInMilliseconds();case "/":return y.valueInMilliseconds()/l.valueInMilliseconds()}else y=y.valueInMilliseconds();else if(l instanceof P.SqlInterval)if(y instanceof Date)switch(x){case "+":return new Date(l.valueInMilliseconds()+y.getTime());case "-":return new Date(y.getTime()-l.valueInMilliseconds());case "*":return y.getTime()*
l.valueInMilliseconds();case "/":return y.getTime()/l.valueInMilliseconds()}else l=l.valueInMilliseconds();else if(y instanceof Date&&"number"===typeof l)switch(l*=864E5,y=y.getTime(),x){case "+":return new Date(y+l);case "-":return new Date(y-l);case "*":return new Date(y*l);case "/":return new Date(y/l)}else if(l instanceof Date&&"number"===typeof y)switch(y*=864E5,l=l.getTime(),x){case "+":return new Date(y+l);case "-":return new Date(y-l);case "*":return new Date(y*l);case "/":return new Date(y/
l)}switch(x){case "+":return y+l;case "-":return y-l;case "*":return y*l;case "/":return y/l}}function T(x,y,l,t){x=t.getAttribute(x,y);return null!=x&&1===l[y]?new Date(x):x}const aa=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
O=new Set(["current_timestamp","current_date","current_time"]);let F=function(){function x(){}x.makeBool=function(y){return!0===y};x.featureValue=function(y,l,t,W){return T(y,l,t,W)};x.equalsNull=function(y){return null===y};x.applyLike=function(y,l,t){return d(y,l,t)};x.ensureArray=function(y){return A(y)};x.applyIn=function(y,l){return w(y,l)};x.currentDate=function(){const y=new Date;y.setHours(0,0,0,0);return y};x.makeSqlInterval=function(y,l,t){return P.SqlInterval.createFromValueAndQualifer(y,
l,t)};x.convertInterval=function(y){return y instanceof P.SqlInterval?y.valueInMilliseconds():y};x.currentTimestamp=function(){return new Date};x.compare=function(y,l,t){return G(y,l,t)};x.calculate=function(y,l,t){return Q(y,l,t)};x.makeComparable=function(y){return p(y)};x.evaluateFunction=function(y,l){return P.evaluateFunction(y,l)};x.lookup=function(y,l){y=l[y];return void 0===y?null:y};x.between=function(y,l){return null==y||null==l[0]||null==l[1]?null:y>=l[0]&&y<=l[1]};x.notbetween=function(y,
l){return null==y||null==l[0]||null==l[1]?null:y<l[0]||y>l[1]};x.ternaryNot=function(y){return R(y)};x.ternaryAnd=function(y,l){return J(y,l)};x.ternaryOr=function(y,l){return g(y,l)};return x}(),H=function(){function x(l,t){this.fieldsIndex=t;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=S.WhereGrammar.parse(l);const {isStandardized:W,isAggregate:ja,referencedFieldNames:ta}=this._extractExpressionInfo(t);this._referencedFieldNames=ta;this.isStandardized=W;this.isAggregate=
ja}x.create=function(l,t){return new x(l,t)};var y=x.prototype;y.testSet=function(l,t=I){const W={};for(const ja of this.fieldNames)W[ja]=l.map(ta=>t.getAttribute(ta,ja));return!!this._evaluateNode(this.parseTree,{attributes:W},I)};y.calculateValue=function(l,t=I){l=this._evaluateNode(this.parseTree,l,t);return l instanceof P.SqlInterval?l.valueInMilliseconds()/864E5:l};y.calculateValueCompiled=function(l,t=I){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,
t,this._datefields);if(la("esri-csp-restrictions"))return this.calculateValue(l,t);this._compileMe();return this.parseTree._compiledVersion(l,this.parameters,t,this._datefields)};y.testFeature=function(l,t=I){return!!this._evaluateNode(this.parseTree,l,t)};y.testFeatureCompiled=function(l,t=I){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,t,this._datefields);if(la("esri-csp-restrictions"))return this.testFeature(l,t);this._compileMe();return!!this.parseTree._compiledVersion(l,
this.parameters,t,this._datefields)};y.getFunctions=function(){const l=new Set;this._visitAll(this.parseTree,t=>{"function"===t.type&&l.add(t.name.toLowerCase())});return Array.from(l)};y.getExpressions=function(){const l=new Map;this._visitAll(this.parseTree,t=>{if("function"===t.type){const W=t.name.toLowerCase();t=t.args.value[0];if("column-reference"===t.type){t=t.column;const ja=`${W}-${t}`;l.has(ja)||l.set(ja,{aggregateType:W,field:t})}}});return[...l.values()]};y.getVariables=function(){const l=
new Set;this._visitAll(this.parseTree,t=>{"parameter"===t.type&&l.add(t.value.toLowerCase())});return Array.from(l)};y._compileMe=function(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",l)).bind(F)};y._extractExpressionInfo=function(l){const t=[],W=new Set;let ja=!0,ta=!0;this._visitAll(this.parseTree,ya=>{switch(ya.type){case "column-reference":const Da=l?.get(ya.column);
let Ha,Fa;Da?Ha=Fa=Da.name??"":(Fa=ya.column,Ha=Fa.toLowerCase());Da&&Da.name&&("date"===Da.type||"esriFieldTypeDate"===Da.type)&&(this._datefields[Da.name]=1);W.has(Ha)||(W.add(Ha),t.push(Fa));ya.column=Fa;break;case "function":const {name:La,args:Ja}=ya;ya=Ja.value.length;ja&&(ja=P.isStandardized(La,ya));ta&&(ta=ba.isAggregate(La,ya))}});return{referencedFieldNames:Array.from(t),isStandardized:ja,isAggregate:ta}};y._visitAll=function(l,t){if(null!=l)switch(t(l),l.type){case "when-clause":this._visitAll(l.operand,
t);this._visitAll(l.value,t);break;case "case-expression":for(const W of l.clauses)this._visitAll(W,t);"simple"===l.format&&this._visitAll(l.operand,t);null!==l.else&&this._visitAll(l.else,t);break;case "expression-list":for(const W of l.value)this._visitAll(W,t);break;case "unary-expression":this._visitAll(l.expr,t);break;case "binary-expression":this._visitAll(l.left,t);this._visitAll(l.right,t);break;case "function":this._visitAll(l.args,t)}};y.evaluateNodeToJavaScript=function(l){switch(l.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case-expression":var t="";if("simple"===l.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(l.operand)+")";t="( ";for(let ja=0;ja<l.clauses.length;ja++)t+=" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(l.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(l.clauses[ja].value)+") : "}else for(t="( ",W=0;W<l.clauses.length;W++)t+=" this.makeBool("+
this.evaluateNodeToJavaScript(l.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[W].value)+") : ";t=null!==l.else?t+this.evaluateNodeToJavaScript(l.else):t+"null";return t+" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":t="[";for(W of l.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(W);return t+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";
case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")"}throw Error("Not Supported Operator "+l.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "date":return"(new Date("+n(l.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+m(l.value).getTime().toString()+"))";case "current-time":return"date"===l.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+")"}throw Error("Unsupported sql syntax "+l.type);};y._evaluateNode=function(l,t,W){switch(l.type){case "interval":return t=
this._evaluateNode(l.value,t,W),P.SqlInterval.createFromValueAndQualifer(t,l.qualifier,l.op);case "case-expression":if("simple"===l.format){var ja=p(this._evaluateNode(l.operand,t,W));for(var ta=0;ta<l.clauses.length;ta++)if(ja===p(this._evaluateNode(l.clauses[ta].operand,t,W)))return this._evaluateNode(l.clauses[ta].value,t,W)}else for(ja=0;ja<l.clauses.length;ja++)if(!0===this._evaluateNode(l.clauses[ja].operand,t,W))return this._evaluateNode(l.clauses[ja].value,t,W);return null!==l.else?this._evaluateNode(l.else,
t,W):null;case "parameter":return this.parameters[l.value.toLowerCase()];case "expression-list":ja=[];for(ta of l.value)ja.push(this._evaluateNode(ta,t,W));return ja;case "unary-expression":return R(this._evaluateNode(l.expr,t,W));case "binary-expression":switch(l.operator){case "AND":return J(this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,t,W));case "OR":return g(this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,t,W));case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(l.left,t,W);case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(l.left,t,W);case "IN":return ja=A(this._evaluateNode(l.right,t,W)),w(this._evaluateNode(l.left,t,W),ja);case "NOT IN":return ja=A(this._evaluateNode(l.right,t,W)),R(w(this._evaluateNode(l.left,t,W),ja));case "BETWEEN":return ja=this._evaluateNode(l.left,t,W),l=this._evaluateNode(l.right,t,W),null==ja||null==l[0]||null==l[1]?null:ja>=p(l[0])&&ja<=
p(l[1]);case "NOTBETWEEN":return ja=this._evaluateNode(l.left,t,W),l=this._evaluateNode(l.right,t,W),null==ja||null==l[0]||null==l[1]?null:ja<p(l[0])||ja>p(l[1]);case "LIKE":return d(this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,t,W),l.escape);case "NOT LIKE":return R(d(this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,t,W),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return G(l.operator,this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,
t,W));case "-":case "+":case "*":case "/":case "||":return Q(l.operator,this._evaluateNode(l.left,t,W),this._evaluateNode(l.right,t,W))}case "null":case "boolean":case "string":case "number":return l.value;case "date":return n(l.value);case "timestamp":return m(l.value);case "current-time":return t=new Date,"date"===l.mode&&t.setHours(0,0,0,0),t;case "column-reference":return T(t,l.column,this._datefields,W);case "data-type":return l.value;case "function":return t=this._evaluateNode(l.args,t,W),this.isAggregate?
ba.aggregateFunction(l.name,t):P.evaluateFunction(l.name,t)}throw Error("Unsupported sql syntax "+l.type);};f._createClass(x,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||O.has(l.name.toLowerCase()))});
return this._hasDateFunctions}}]);return x}();var L;(function(x){x[x.Normal=0]="Normal";x[x.Escaped=1]="Escaped"})(L||(L={}));const I={getAttribute(x,y){return(x&&"object"===typeof x.attributes?x.attributes:x)[y]}};h.WhereClause=H;h.defaultAttributeAdapter=I;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(h){function f(P){let S=0;for(let K=0;K<P.length;K++)S+=P[K];return S/P.length}function la(P){const S=f(P),
K=P.length;let u=0;for(const m of P)u+=(m-S)**2;return 1<K?u/(K-1):0}const ba={min:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:Math.min.apply(Math,P[0])},max:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:Math.max.apply(Math,P[0])},avg:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:f(P[0])},sum:{minParams:1,maxParams:1,evaluate:P=>{if(null==P[0])P=null;else{P=P[0];let S=0;for(let K=0;K<P.length;K++)S+=P[K];P=S}return P}},stddev:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?
null:Math.sqrt(la(P[0]))},count:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:P[0].length},var:{minParams:1,maxParams:1,evaluate:P=>null==P[0]?null:la(P[0])}};h.aggregateFunction=function(P,S){const K=ba[P.toLowerCase()];if(null==K)throw Error("Function Not Recognised");if(S.length<K.minParams||S.length>K.maxParams)throw Error(`Invalid Parameter count for call to ${P.toUpperCase()}`);return K.evaluate(S)};h.isAggregate=function(P,S){P=ba[P.toLowerCase()];return null!=P&&S>=P.minParams&&S<=
P.maxParams};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(h,f,la,ba){function P(m){m=new Date(m.getTime());m.setHours(0,0,0,0);return m}function S(m,n){if(m instanceof Date)return n?P(m):m;if("string"===typeof m||m instanceof String)if(m=ba.DateTime.fromSQL(m),m.isValid)return n?P(m.toJSDate()):m.toJSDate();throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
}let K=function(){function m(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}m._fixDefaults=function(n){if(null!==n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};m._parseSecondsComponent=function(n,A){A.includes(".")?(A=A.split("."),n.second=parseFloat(A[0]),n.millis=parseInt(A[1],10)):n.second=parseFloat(A)};m.createFromMilliseconds=function(n){const A=new m;A.second=n/1E3;return A};m.createFromValueAndQualifer=
function(n,A,R){let J=null;const g=new m;g.op="-"===R?"-":"+";if("interval-period"===A.type){m._fixDefaults(A);R=RegExp("^[0-9]{1,}$");if("year"===A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");if("second"===A.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))m._parseSecondsComponent(g,n);else throw Error("Illegal Interval");else if(R.test(n))g[A.period]=parseFloat(n);else throw Error("Illegal Interval");}else{m._fixDefaults(A.start);m._fixDefaults(A.end);if("year"===
A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":J=RegExp("^[0-9]{1,} [0-9]{1,}$");if(J.test(n))g[A.start.period]=parseFloat(n.split(" ")[0]),g[A.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":J=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(J.test(n))g[A.start.period]=
parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),g.hour=parseFloat(n[0]),g.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":J=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(J.test(n))g[A.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),g.hour=parseFloat(n[0]),g.minute=parseFloat(n[1]),m._parseSecondsComponent(g,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(A.end.period){case "minute":J=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(J.test(n))g.hour=parseFloat(n.split(":")[0]),g.minute=parseFloat(n.split(":")[1]);else throw Error("Illegal Interval");break;case "second":J=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(J.test(n))n=n.split(":"),g.hour=parseFloat(n[0]),g.minute=parseFloat(n[1]),m._parseSecondsComponent(g,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(A.end.period){case "second":J=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(J.test(n))n=n.split(":"),g.minute=parseFloat(n[0]),m._parseSecondsComponent(g,n[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return g};m.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return m}();const u={extract:{minParams:2,
maxParams:2,evaluate:([m,n])=>{if(null==n)return null;if(n instanceof Date)switch(m.toUpperCase()){case "SECOND":return n.getSeconds();case "MINUTE":return n.getMinutes();case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:m=>{if(2===m.length){const [n,A]=m;return null==n||null==A?null:n.toString().substring(A-1)}if(3===
m.length){const [n,A,R]=m;return null==n||null==A||null==R?null:0>=R?"":n.toString().substring(A-1,A+R-1)}}},position:{minParams:2,maxParams:2,evaluate:([m,n])=>null==m||null==n?null:n.indexOf(m)+1},trim:{minParams:2,maxParams:3,evaluate:m=>{var n=3===m.length,A=n?m[1]:" ";n=n?m[2]:m[1];if(null==A||null==n)return null;A=`(${la.escapeRegExpString(A)})`;switch(m[0]){case "BOTH":return n.replace(new RegExp(`^${A}*|${A}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${A}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.abs(m[0])},ceiling:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.ceil(m[0])},floor:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.floor(m[0])},log:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])},log10:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.log(m[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?
null:Math.sin(m[0])},cos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cos(m[0])},tan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tan(m[0])},asin:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.asin(m[0])},acos:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.acos(m[0])},atan:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.atan(m[0])},sign:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:0<m[0]?1:0>m[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:m=>null==m[0]||null==m[1]?null:m[0]**m[1]},mod:{minParams:2,maxParams:2,evaluate:m=>null==m[0]||null==m[1]?null:m[0]%m[1]},round:{minParams:1,maxParams:2,evaluate:m=>{const n=m[0];m=2===m.length?10**m[1]:1;return null==n?null:Math.round(n*m)/m}},truncate:{minParams:1,maxParams:2,evaluate:m=>null==m[0]?null:1===m.length?parseInt(m[0].toFixed(0),10):parseFloat(m[0].toFixed(m[1]))},char_length:{minParams:1,maxParams:1,evaluate:m=>"string"===typeof m[0]||m[0]instanceof String?m[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:m=>{let n="";for(let A=0;A<m.length;A++){if(null==m[A])return null;n+=m[A].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:m=>{for(const n of m)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.cosh(m[0])},
sinh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.sinh(m[0])},tanh:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:Math.tanh(m[0])},nullif:{minParams:2,maxParams:2,evaluate:m=>{const n=m[0];m=m[1];return(n instanceof Date?n.valueOf():n)===(m instanceof Date?m.valueOf():m)?null:n}},cast:{minParams:2,maxParams:2,evaluate:m=>{var n=m[0];m=m[1];if(null===n)return null;switch(m.type){case "integer":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;
case "smallint":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(32767<n||-32767>n)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "float":case "real":n=parseFloat(n);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "date":return S(n,!0);case "timestamp":return S(n,!1);case "varchar":n=n.toString();if(n.length>m.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};h.SqlInterval=K;h.evaluateFunction=function(m,n){const A=u[m.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(n.length<A.minParams||n.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${m.toUpperCase()}`);return A.evaluate(n)};h.isStandardized=function(m,n){m=u[m.toLowerCase()];return null!=m&&n>=m.minParams&&n<=m.maxParams};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(h,f,la){h.SqlErrorCodes=void 0;(function(u){u.InvalidFunctionParameters="InvalidFunctionParameters";u.UnsupportedSqlFunction="UnsupportedSqlFunction";u.UnsupportedOperator="UnsupportedOperator";u.UnsupportedSyntax="UnsupportedSyntax";u.UnsupportedIsRhs="UnsupportedIsRhs";u.UnsupportedIsLhs="UnsupportedIsLhs";u.InvalidDataType="InvalidDataType";u.CannotCastValue="CannotCastValue";u.MissingStatisticParameters="MissingStatisticParameters"})(h.SqlErrorCodes||
(h.SqlErrorCodes={}));const ba={[h.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[h.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[h.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[h.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[h.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[h.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[h.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[h.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[h.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let P=function(u){function m(n,A){n=u.call(this,la.doSubstitutions(ba[n],A))||this;n.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),m);return n}f._inheritsLoose(m,u);return m}(f._wrapNativeSuper(Error));
h.FeatureSetErrorCodes=void 0;(function(u){u.NeverReach="NeverReach";u.NotImplemented="NotImplemented";u.Cancelled="Cancelled";u.InvalidStatResponse="InvalidStatResponse";u.InvalidRequest="InvalidRequest";u.RequestFailed="RequestFailed";u.MissingFeatures="MissingFeatures";u.AggregationFieldNotFound="AggregationFieldNotFound";u.DataElementsNotFound="DataElementsNotFound"})(h.FeatureSetErrorCodes||(h.FeatureSetErrorCodes={}));const S={[h.FeatureSetErrorCodes.Cancelled]:"Cancelled",[h.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[h.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[h.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[h.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[h.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[h.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[h.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[h.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let K=function(u){function m(n,
A){n=u.call(this,la.doSubstitutions(S[n],A))||this;n.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),m);return n}f._inheritsLoose(m,u);return m}(f._wrapNativeSuper(Error));h.FeatureSetError=K;h.FeatureSetErrorMessages=S;h.SqlError=P;h.SqlErrorMessages=ba;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(h,f){function la(J){return J&&J.loc?`Line : ${J.loc.start?.line}, ${J.loc.start?.column}: `:""}function ba(J,g){try{if(!g)return J;for(const w in g){let d=g[w];d||(d="");J=J.replace("{"+w+"}",g[w])}}catch(w){}return J}h.ExecutionErrorCodes=void 0;(function(J){J.AsyncNotEnabled="AsyncNotEnabled";J.ModulesNotSupported="ModulesNotSupported";J.CircularModules="CircularModules";J.NeverReach="NeverReach";J.UnsupportedHashType="UnsupportedHashType";J.InvalidParameter="InvalidParameter";J.UnexpectedToken=
"UnexpectedToken";J.Unrecognised="Unrecognised";J.UnrecognisedType="UnrecognisedType";J.MaximumCallDepth="MaximumCallDepth";J.BooleanConditionRequired="BooleanConditionRequired";J.TypeNotAllowedInFeature="TypeNotAllowedInFeature";J.KeyMustBeString="KeyMustBeString";J.WrongNumberOfParameters="WrongNumberOfParameters";J.CallNonFunction="CallNonFunction";J.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";J.NoFunctionInDictionary="NoFunctionInDictionary";J.NoFunctionInArray="NoFunctionInArray";
J.AssignModuleFunction="AssignModuleFunction";J.LogicExpressionOrAnd="LogicExpressionOrAnd";J.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";J.FuncionNotFound="FunctionNotFound";J.InvalidMemberAccessKey="InvalidMemberAccessKey";J.UnsupportedUnaryOperator="UnsupportUnaryOperator";J.InvalidIdentifier="InvalidIdentifier";J.MemberOfNull="MemberOfNull";J.UnsupportedOperator="UnsupportedOperator";J.Cancelled="Cancelled";J.ModuleAccessorMustBeString="ModuleAccessorMustBeString";J.ModuleExportNotFound=
"ModuleExportNotFound";J.Immutable="Immutable";J.OutOfBounds="OutOfBounds";J.IllegalResult="IllegalResult";J.FieldNotFound="FieldNotFound";J.PortalRequired="PortalRequired";J.LogicError="LogicError";J.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";J.KeyAccessorMustBeString="KeyAccessorMustBeString";J.WrongSpatialReference="WrongSpatialReference"})(h.ExecutionErrorCodes||(h.ExecutionErrorCodes={}));const P={[h.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[h.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[h.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[h.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[h.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[h.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[h.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[h.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[h.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[h.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[h.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[h.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[h.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[h.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[h.ExecutionErrorCodes.PortalRequired]:"Portal is required",[h.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[h.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[h.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[h.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[h.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[h.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[h.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[h.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[h.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[h.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[h.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[h.ExecutionErrorCodes.Immutable]:"Object is immutable",[h.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[h.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[h.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[h.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[h.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[h.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[h.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[h.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[h.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[h.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[h.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[h.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[h.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[h.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let S=function(J){function g(...w){return J.call(this,...w)||this}f._inheritsLoose(g,J);return g}(f._wrapNativeSuper(Error)),K=function(J){function g(w,d){w=
J.call(this,la(d)+w.message,{cause:w})||this;w.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(w),g);d&&d.loc&&(w.loc=d.loc);return w}f._inheritsLoose(g,J);return g}(S),u=function(J){function g(w,d,p,G){w=J.call(this,"Execution error - "+la(p)+ba(P[d],G))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(w),g);p&&p.loc&&(w.loc=p.loc);return w}f._inheritsLoose(g,J);return g}(f._wrapNativeSuper(Error)),
m=function(J){function g(w,d,p,G){w=J.call(this,"Compilation error - "+la(p)+ba(P[d],G))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(w),g);p&&p.loc&&(w.loc=p.loc);return w}f._inheritsLoose(g,J);return g}(f._wrapNativeSuper(Error)),n=function(J){function g(){var w=J.call(this,"Uncompilable code structures")||this;w.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&
Error.captureStackTrace(f._assertThisInitialized(w),g);return w}f._inheritsLoose(g,J);return g}(f._wrapNativeSuper(Error));h.ModuleErrorCodes=void 0;(function(J){J.UnrecognisedUri="UnrecognisedUri";J.UnsupportedUriProtocol="UnsupportedUriProtocol"})(h.ModuleErrorCodes||(h.ModuleErrorCodes={}));const A={[h.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[h.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let R=function(J){function g(w,d){w=J.call(this,ba(A[w],d))||
this;w.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(w),g);return w}f._inheritsLoose(g,J);return g}(f._wrapNativeSuper(Error));h.ArcadeCompilationError=m;h.ArcadeExecutionError=u;h.ArcadeUncompilableError=n;h.ErrorWithCause=S;h.ExecutionErrorMessages=P;h.LocatableArcadeExecutionError=K;h.ModuleError=R;h.ModuleErrorMessages=A;h.doSubstitutions=ba;h.ensureArcadeExecutionError=function(J,g,w){return"esri.arcade.arcadeexecutionerror"===
w.declaredRootClass||"esri.arcade.arcadecompilationerror"===w.declaredRootClass?null===w.loc&&g&&g.loc?new K(w,{cause:w}):w:g&&g.loc?new K(w,{cause:w}):w};h.parsingValidationMessage=function(J,g,w){return"Parsing error - "+la(J)+ba(P[g],w)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(h){function f(a,k={}){const M=JSON.stringify([a,k]);let fa=gd[M];fa||(fa=new Intl.ListFormat(a,k),gd[M]=fa);return fa}function la(a,k=
{}){const M=JSON.stringify([a,k]);let fa=Hc[M];fa||(fa=new Intl.DateTimeFormat(a,k),Hc[M]=fa);return fa}function ba(a,k={}){const M=JSON.stringify([a,k]);let fa=Ic[M];fa||(fa=new Intl.NumberFormat(a,k),Ic[M]=fa);return fa}function P(a,k={}){const {base:M,...fa}=k,ma=JSON.stringify([a,fa]);let sa=Jc[ma];sa||(sa=new Intl.RelativeTimeFormat(a,k),Jc[ma]=sa);return sa}function S(a){const k=[];for(let M=1;12>=M;M++){const fa=$a.utc(2016,M,1);k.push(a(fa))}return k}function K(a){const k=[];for(let M=1;7>=
M;M++){const fa=$a.utc(2016,11,13+M);k.push(a(fa))}return k}function u(a,k,M,fa,ma){a=a.listingMode(M);return"error"===a?null:"en"===a?fa(k):ma(k)}function m(a,k){if(n(a)||null===a)return k;if(a instanceof ic)return a;if("string"===typeof a){const M=a.toLowerCase();return"default"===M?k:"local"===M||"system"===M?nc.instance:"utc"===M||"gmt"===M?Eb.utcInstance:Eb.parseSpecifier(M)||Tb.create(a)}return A(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new hd(a)}function n(a){return"undefined"===
typeof a}function A(a){return"number"===typeof a}function R(a){return"number"===typeof a&&0===a%1}function J(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function g(a,k,M){if(0!==a.length)return a.reduce((fa,ma)=>{ma=[k(ma),ma];return fa?M(fa[0],ma[0])===fa[0]?fa:ma:ma},null)[1]}function w(a,k){return k.reduce((M,fa)=>{M[fa]=a[fa];return M},{})}function d(a,k){return Object.prototype.hasOwnProperty.call(a,k)}function p(a,k,M){return R(a)&&a>=k&&a<=M}function G(a,
k=2){return 0>a?"-"+(""+-a).padStart(k,"0"):(""+a).padStart(k,"0")}function Q(a){if(!n(a)&&null!==a&&""!==a)return parseInt(a,10)}function T(a){if(!n(a)&&null!==a&&""!==a)return parseFloat(a)}function aa(a){if(!n(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function C(a,k,M=!1){k=10**k;return(M?Math.trunc:Math.round)(a*k)/k}function q(a){return 0===a%4&&(0!==a%100||0===a%400)}function z(a,k){var M=k-1;M=M-12*Math.floor(M/12)+1;return 2===M?q(a+(k-M)/12)?29:28:[31,null,31,30,
31,30,31,31,30,31,30,31][M-1]}function E(a){let k=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(k=new Date(k),k.setUTCFullYear(k.getUTCFullYear()-1900));return+k}function O(a){var k=a-1;k=(k+Math.floor(k/4)-Math.floor(k/100)+Math.floor(k/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===k?53:52}function F(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function H(a,k,M,fa=null){a=new Date(a);const ma={hourCycle:"h23",
year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fa&&(ma.timeZone=fa);return(k=(new Intl.DateTimeFormat(M,{timeZoneName:k,...ma})).formatToParts(a).find(sa=>"timezonename"===sa.type.toLowerCase()))?k.value:null}function L(a,k){a=parseInt(a,10);Number.isNaN(a)&&(a=0);k=parseInt(k,10)||0;k=0>a||Object.is(a,-0)?-k:k;return 60*a+k}function I(a){const k=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(k))throw new qa(`Invalid unit value ${a}`);return k}function x(a,
k){const M={};for(const fa in a)if(d(a,fa)){const ma=a[fa];void 0!==ma&&null!==ma&&(M[k(fa)]=I(ma))}return M}function y(a,k){const M=Math.trunc(Math.abs(a/60)),fa=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(k){case "short":return`${a}${G(M,2)}:${G(fa,2)}`;case "narrow":return`${a}${M}${0<fa?`:${fa}`:""}`;case "techie":return`${a}${G(M,2)}${G(fa,2)}`;default:throw new RangeError(`Value format ${k} is out of range for property format`);}}function l(a){return w(a,["hour","minute","second","millisecond"])}
function t(a){switch(a){case "narrow":return[...id];case "short":return[...jd];case "long":return[...kd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function W(a){switch(a){case "narrow":return[...oe];case "short":return[...ld];case "long":return[...md];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...Kc];case "short":return[...pe];
case "long":return[...qe];default:return null}}function ta(a,k,M="always",fa=!1){const ma={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var sa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===M&&sa)switch(M="days"===a,k){case 1:return M?"tomorrow":`next ${ma[a][0]}`;case -1:return M?"yesterday":`last ${ma[a][0]}`;case 0:return M?"today":`this ${ma[a][0]}`}M=
Object.is(k,-0)||0>k;k=Math.abs(k);sa=1===k;const Aa=ma[a];a=fa?sa?Aa[1]:Aa[2]||Aa[1]:sa?ma[a][0]:a;return M?`${k} ${a} ago`:`in ${k} ${a}`}function ya(a,k){let M="";for(const fa of a)M=fa.literal?M+fa.val:M+k(fa.val);return M}function Da(...a){a=a.reduce((k,M)=>k+M.source,"");return RegExp(`^${a}$`)}function Ha(...a){return k=>a.reduce(([M,fa,ma],sa)=>{const [Aa,Ia,Pa]=sa(k,ma);return[{...M,...Aa},Ia||fa,Pa]},[{},null,1]).slice(0,2)}function Fa(a,...k){if(null==a)return[null,null];for(const [M,fa]of k)if(k=
M.exec(a))return fa(k);return[null,null]}function La(...a){return(k,M)=>{const fa={};let ma;for(ma=0;ma<a.length;ma++)fa[a[ma]]=Q(k[M+ma]);return[fa,null,M+ma]}}function Ja(a,k,M){a=a[k];return n(a)?M:Q(a)}function Na(a,k){return[{hours:Ja(a,k,0),minutes:Ja(a,k+1,0),seconds:Ja(a,k+2,0),milliseconds:aa(a[k+3])},null,k+4]}function Ya(a,k){const M=!a[k]&&!a[k+1];a=L(a[k+1],a[k+2]);return[{},M?null:Eb.instance(a),k+3]}function Ua(a,k){return[{},a[k]?Tb.create(a[k]):null,k+1]}function jb(a){const [k,M,
fa,ma,sa,Aa,Ia,Pa,e]=a,Wa="-"===k[0];a=Pa&&"-"===Pa[0];const Xa=(bb,ua=!1)=>void 0!==bb&&(ua||bb&&Wa)?-bb:bb;return[{years:Xa(T(M)),months:Xa(T(fa)),weeks:Xa(T(ma)),days:Xa(T(sa)),hours:Xa(T(Aa)),minutes:Xa(T(Ia)),seconds:Xa(T(Pa),"-0"===Pa),milliseconds:Xa(aa(e),a)}]}function kb(a,k,M,fa,ma,sa,Aa){k={year:2===k.length?F(Q(k)):Q(k),month:jd.indexOf(M)+1,day:Q(fa),hour:Q(ma),minute:Q(sa)};Aa&&(k.second=Q(Aa));a&&(k.weekday=3<a.length?md.indexOf(a)+1:ld.indexOf(a)+1);return k}function mb(a){const [,
k,M,fa,ma,sa,Aa,Ia,Pa,e,Wa,Xa]=a;a=kb(k,ma,fa,M,sa,Aa,Ia);let bb;bb=Pa?re[Pa]:e?0:L(Wa,Xa);return[a,new Eb(bb)]}function c(a){const [,k,M,fa,ma,sa,Aa,Ia]=a;return[kb(k,ma,fa,M,sa,Aa,Ia),Eb.utcInstance]}function r(a){const [,k,M,fa,ma,sa,Aa,Ia]=a;return[kb(k,Ia,M,fa,ma,sa,Aa),Eb.utcInstance]}function ea(a,k,M=!1){a={values:M?k.values:{...a.values,...(k.values||{})},loc:a.loc.clone(k.loc),conversionAccuracy:k.conversionAccuracy||a.conversionAccuracy,matrix:k.matrix||a.matrix};return new eb(a)}function ka(a,
k,M,fa,ma){a=a[ma][M];var sa=k[M]/a;sa=Math.sign(sa)!==Math.sign(fa[ma])&&0!==fa[ma]&&1>=Math.abs(sa)?0>sa?Math.floor(sa):Math.ceil(sa):Math.trunc(sa);fa[ma]+=sa;k[M]-=sa*a}function va(a,k){se.reduce((M,fa)=>{if(n(k[fa]))return M;M&&ka(a,k,M,k,fa);return fa},null)}function B(a,k){a=k.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(eb.fromMillis(a).as("days"))}function N(a,k,M){const fa=[["years",(Pa,e)=>e.year-Pa.year],
["quarters",(Pa,e)=>e.quarter-Pa.quarter+4*(e.year-Pa.year)],["months",(Pa,e)=>e.month-Pa.month+12*(e.year-Pa.year)],["weeks",(Pa,e)=>{Pa=B(Pa,e);return(Pa-Pa%7)/7}],["days",B]],ma={},sa=a;let Aa,Ia;for(const [Pa,e]of fa)0<=M.indexOf(Pa)&&(Aa=Pa,ma[Pa]=e(a,k),Ia=sa.plus(ma),Ia>k?(ma[Pa]--,a=sa.plus(ma)):a=Ia);return[a,ma,Ia,Aa]}function da(a,k,M,fa){let [ma,sa,Aa,Ia]=N(a,k,M);a=k-ma;M=M.filter(Pa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Pa));0===M.length&&(Aa<k&&(Aa=ma.plus({[Ia]:1})),
Aa!==ma&&(sa[Ia]=(sa[Ia]||0)+a/(Aa-ma)));k=eb.fromObject(sa,fa);return 0<M.length?eb.fromMillis(a,fa).shiftTo(...M).plus(k):k}function X({numberingSystem:a},k=""){return new RegExp(`${Lc[a||"latn"]}${k}`)}function ia(a,k=M=>M){return{regex:a,deser:([M])=>{{let fa=parseInt(M,10);if(isNaN(fa)){fa="";for(let ma=0;ma<M.length;ma++){const sa=M.charCodeAt(ma);if(-1!==M[ma].search(Lc.hanidec))fa+=te.indexOf(M[ma]);else for(const Aa in nd){const [Ia,Pa]=nd[Aa];sa>=Ia&&sa<=Pa&&(fa+=sa-Ia)}}M=parseInt(fa,10)}else M=
fa}return k(M)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,od)}function ra(a,k){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([M])=>a.findIndex(fa=>M.replace(/\./g,"").replace(Mc," ").toLowerCase()===fa.replace(/\./g,"").replace(Mc," ").toLowerCase())+k}}function U(a,k){return{regex:a,deser:([,M,fa])=>L(M,fa),groups:k}}function ca(a){return{regex:a,deser:([k])=>k}}function pa(a,k){const M=X(k),fa=X(k,"{2}"),ma=X(k,"{3}"),sa=X(k,"{4}"),Aa=X(k,"{6}"),Ia=X(k,"{1,2}"),
Pa=X(k,"{1,3}"),e=X(k,"{1,6}"),Wa=X(k,"{1,9}"),Xa=X(k,"{2,4}"),bb=X(k,"{4,6}"),ua=v=>({regex:RegExp(v.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([D])=>D,literal:!0}),$b=(v=>{if(a.literal)return ua(v);switch(v.val){case "G":return ra(k.eras("short",!1),0);case "GG":return ra(k.eras("long",!1),0);case "y":return ia(e);case "yy":return ia(Xa,F);case "yyyy":return ia(sa);case "yyyyy":return ia(bb);case "yyyyyy":return ia(Aa);case "M":return ia(Ia);case "MM":return ia(fa);case "MMM":return ra(k.months("short",
!0,!1),1);case "MMMM":return ra(k.months("long",!0,!1),1);case "L":return ia(Ia);case "LL":return ia(fa);case "LLL":return ra(k.months("short",!1,!1),1);case "LLLL":return ra(k.months("long",!1,!1),1);case "d":return ia(Ia);case "dd":return ia(fa);case "o":return ia(Pa);case "ooo":return ia(ma);case "HH":return ia(fa);case "H":return ia(Ia);case "hh":return ia(fa);case "h":return ia(Ia);case "mm":return ia(fa);case "m":return ia(Ia);case "q":return ia(Ia);case "qq":return ia(fa);case "s":return ia(Ia);
case "ss":return ia(fa);case "S":return ia(Pa);case "SSS":return ia(ma);case "u":return ca(Wa);case "uu":return ca(Ia);case "uuu":return ia(M);case "a":return ra(k.meridiems(),0);case "kkkk":return ia(sa);case "kk":return ia(Xa,F);case "W":return ia(Ia);case "WW":return ia(fa);case "E":case "c":return ia(M);case "EEE":return ra(k.weekdays("short",!1,!1),1);case "EEEE":return ra(k.weekdays("long",!1,!1),1);case "ccc":return ra(k.weekdays("short",!0,!1),1);case "cccc":return ra(k.weekdays("long",!0,
!1),1);case "Z":case "ZZ":return U(new RegExp(`([+-]${Ia.source})(?::(${fa.source}))?`),2);case "ZZZ":return U(new RegExp(`([+-]${Ia.source})(${fa.source})?`),2);case "z":return ca(/[a-z_+-/]{1,256}?/i);default:return ua(v)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};$b.token=a;return $b}function wa(a){return[`^${a.map(k=>k.regex).reduce((k,M)=>`${k}(${M.source})`,"")}$`,a]}function Ba(a,k,M){if(a=a.match(k)){k={};let fa=1;for(const ma in M)if(d(M,ma)){const sa=M[ma],
Aa=sa.groups?sa.groups+1:1;!sa.literal&&sa.token&&(k[sa.token.val[0]]=sa.deser(a.slice(fa,fa+Aa)));fa+=Aa}return[a,k]}return[a,{}]}function Oa(a){const k=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};
let M=null,fa;n(a.z)||(M=Tb.create(a.z));n(a.Z)||(M||(M=new Eb(a.Z)),fa=a.Z);n(a.q)||(a.M=3*(a.q-1)+1);n(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);n(a.u)||(a.S=aa(a.u));return[Object.keys(a).reduce((ma,sa)=>{const Aa=k(sa);Aa&&(ma[Aa]=a[sa]);return ma},{}),M,fa]}function Ka(a,k){return Array.prototype.concat(...a.map(M=>{if(!M.literal){var fa=Fb.macroTokenToFormatOpts(M.val);fa=Sa(fa,k);M=null==fa||fa.includes(void 0)?M:fa}return M}))}function Ra(a,k,M){M=
Ka(Fb.parseFormat(M),a);var fa=M.map(bb=>pa(bb,a));const ma=fa.find(bb=>bb.invalidReason);if(ma)return{input:k,tokens:M,invalidReason:ma.invalidReason};const [sa,Aa]=wa(fa);fa=RegExp(sa,"i");const [Ia,Pa]=Ba(k,fa,Aa),[e,Wa,Xa]=Pa?Oa(Pa):[null,null,void 0];if(d(Pa,"a")&&d(Pa,"H"))throw new ha("Can't include meridiem when specifying 24-hour format");return{input:k,tokens:M,regex:fa,rawMatches:Ia,matches:Pa,result:e,zone:Wa,specificOffset:Xa}}function Sa(a,k){if(!a)return null;k=Fb.create(k,a);var M=
k.formatDateTimeParts;Nc||(Nc=$a.fromMillis(1555555555555));return M.call(k,Nc).map(fa=>{{const {type:sa,value:Aa}=fa;if("literal"===sa)fa={literal:!0,val:Aa};else{fa=a[sa];var ma=ue[sa];"object"===typeof ma&&(ma=ma[fa]);fa=ma?{literal:!1,val:ma}:void 0}}return fa})}function Ga(a,k){return new Qb("unit out of range",`you specified ${k} (of type ${typeof k}) as a ${a}, which is invalid`)}function Ta(a,k,M){k=new Date(Date.UTC(a,k-1,M));100>a&&0<=a&&k.setUTCFullYear(k.getUTCFullYear()-1900);a=k.getUTCDay();
return 0===a?7:a}function xa(a,k){a=q(a)?Oc:Pc;const M=a.findIndex(fa=>fa<k);return{month:M+1,day:k-a[M]}}function vb(a){const {year:k,month:M,day:fa}=a;var ma=fa+(q(k)?Oc:Pc)[M-1];const sa=Ta(k,M,fa);ma=Math.floor((ma-sa+10)/7);let Aa;1>ma?(Aa=k-1,ma=O(Aa)):ma>O(k)?(Aa=k+1,ma=1):Aa=k;return{weekYear:Aa,weekNumber:ma,weekday:sa,...l(a)}}function ub(a){const {weekYear:k,weekNumber:M,weekday:fa}=a;var ma=Ta(k,1,4),sa=q(k)?366:365;ma=7*M+fa-ma-3;1>ma?(sa=k-1,ma+=q(sa)?366:365):ma>sa?(sa=k+1,ma-=q(k)?
366:365):sa=k;const {month:Aa,day:Ia}=xa(sa,ma);return{year:sa,month:Aa,day:Ia,...l(a)}}function qb(a){const {year:k,month:M,day:fa}=a;var ma=fa+(q(k)?Oc:Pc)[M-1];return{year:k,ordinal:ma,...l(a)}}function b(a){const {year:k,ordinal:M}=a,{month:fa,day:ma}=xa(k,M);return{year:k,month:fa,day:ma,...l(a)}}function gb(a){const k=R(a.year),M=p(a.month,1,12),fa=p(a.day,1,z(a.year,a.month));return k?M?fa?!1:Ga("day",a.day):Ga("month",a.month):Ga("year",a.year)}function db(a){const {hour:k,minute:M,second:fa,
millisecond:ma}=a;a=p(k,0,23)||24===k&&0===M&&0===fa&&0===ma;const sa=p(M,0,59),Aa=p(fa,0,59),Ia=p(ma,0,999);return a?sa?Aa?Ia?!1:Ga("millisecond",ma):Ga("second",fa):Ga("minute",M):Ga("hour",k)}function Gb(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Pb(a){null===a.weekData&&(a.weekData=vb(a.c));return a.weekData}function nb(a,k){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new $a({...a,...k,old:a})}function Wb(a,k,M){let fa=a-6E4*
k;const ma=M.offset(fa);if(k===ma)return[fa,k];fa-=6E4*(ma-k);k=M.offset(fa);return ma===k?[fa,ma]:[a-6E4*Math.min(ma,k),Math.max(ma,k)]}function oa(a,k){a=new Date(a+6E4*k);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Yb(a,k,M){return Wb(E(a),k,M)}function Sb(a,k){const M=a.o;var fa=a.c.year+Math.trunc(k.years);const ma=a.c.month+Math.trunc(k.months)+3*
Math.trunc(k.quarters);fa={...a.c,year:fa,month:ma,day:Math.min(a.c.day,z(fa,ma))+Math.trunc(k.days)+7*Math.trunc(k.weeks)};k=eb.fromObject({years:k.years-Math.trunc(k.years),quarters:k.quarters-Math.trunc(k.quarters),months:k.months-Math.trunc(k.months),weeks:k.weeks-Math.trunc(k.weeks),days:k.days-Math.trunc(k.days),hours:k.hours,minutes:k.minutes,seconds:k.seconds,milliseconds:k.milliseconds}).as("milliseconds");fa=E(fa);let [sa,Aa]=Wb(fa,M,a.zone);0!==k&&(sa+=k,Aa=a.zone.offset(sa));return{ts:sa,
o:Aa}}function zb(a,k,M,fa,ma,sa){const {setZone:Aa,zone:Ia}=M;return a&&0!==Object.keys(a).length?(a=$a.fromObject(a,{...M,zone:k||Ia,specificOffset:sa}),Aa?a:a.setZone(Ia)):$a.invalid(new Qb("unparsable",`the input "${ma}" can't be parsed as ${fa}`))}function Kb(a,k,M=!0){return a.isValid?Fb.create(rb.create("en-US"),{allowZ:M,forceSimple:!0}).formatDateTimeFromString(a,k):null}function Zb(a,k){const M=9999<a.c.year||0>a.c.year;let fa="";M&&0<=a.c.year&&(fa+="+");fa+=G(a.c.year,M?6:4);k?(fa=fa+
"-"+G(a.c.month),fa=fa+"-"+G(a.c.day)):(fa+=G(a.c.month),fa+=G(a.c.day));return fa}function Xb(a,k,M,fa,ma,sa){let Aa=G(a.c.hour);k?(Aa=Aa+":"+G(a.c.minute),0===a.c.second&&M||(Aa+=":")):Aa+=G(a.c.minute);0===a.c.second&&M||(Aa+=G(a.c.second),0===a.c.millisecond&&fa||(Aa=Aa+"."+G(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!sa?Aa+="Z":0>a.o?(Aa=Aa+"-"+G(Math.trunc(-a.o/60)),Aa=Aa+":"+G(Math.trunc(-a.o%60))):(Aa=Aa+"+"+G(Math.trunc(a.o/60)),Aa=Aa+":"+G(Math.trunc(a.o%60))));sa&&(Aa+="["+
a.zone.ianaName+"]");return Aa}function kc(a){const k={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!k)throw new Y(a);
return k}function Hb(a,k){const M=m(k.zone,yb.defaultZone);k=rb.fromObject(k);const fa=yb.now();var ma;if(n(a.year))a=fa;else{for(const sa of pd)n(a[sa])&&(a[sa]=qd[sa]);if(ma=gb(a)||db(a))return $a.invalid(ma);ma=M.offset(fa);[a,ma]=Yb(a,ma,M)}return new $a({ts:a,zone:M,loc:k,o:ma})}function Rb(a,k,M){const fa=n(M.round)?!0:M.round,ma=(Aa,Ia)=>{Aa=C(Aa,fa||M.calendary?0:2,!0);return k.loc.clone(M).relFormatter(M).format(Aa,Ia)},sa=Aa=>M.calendary?k.hasSame(a,Aa)?0:k.startOf(Aa).diff(a.startOf(Aa),
Aa).get(Aa):k.diff(a,Aa).get(Aa);if(M.unit)return ma(sa(M.unit),M.unit);for(const Aa of M.units){const Ia=sa(Aa);if(1<=Math.abs(Ia))return ma(Ia,Aa)}return ma(a>k?-0:0,M.units[M.units.length-1])}function fb(a){let k={};0<a.length&&"object"===typeof a[a.length-1]?(k=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[k,a]}function Ab(a){if($a.isDateTime(a))return a;if(a&&a.valueOf&&A(a.valueOf()))return $a.fromJSDate(a);if(a&&"object"===typeof a)return $a.fromObject(a);throw new qa(`Unknown datetime argument: ${a}, of type ${typeof a}`);
}class Bb extends Error{}class Za extends Bb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class hc extends Bb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class V extends Bb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class ha extends Bb{}class Y extends Bb{constructor(a){super(`Invalid unit ${a}`)}}class qa extends Bb{}class Ca extends Bb{constructor(){super("Zone is an abstract class")}}const Ea={year:"numeric",month:"numeric",day:"numeric"},Qa={year:"numeric",
month:"short",day:"numeric"},Va={year:"numeric",month:"short",day:"numeric",weekday:"short"},lb={year:"numeric",month:"long",day:"numeric"},ib={year:"numeric",month:"long",day:"numeric",weekday:"long"},hb={hour:"numeric",minute:"numeric"},xb={hour:"numeric",minute:"numeric",second:"numeric"},Ib={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sd={hour:"numeric",minute:"numeric",hourCycle:"h23"},td={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},wd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},yd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},zd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},ve={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ad={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Bd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
Dd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Ca;}get name(){throw new Ca;}get ianaName(){return this.name}get isUniversal(){throw new Ca;}offsetName(a,k){throw new Ca;}formatOffset(a,k){throw new Ca;}offset(a){throw new Ca;}equals(a){throw new Ca;}get isValid(){throw new Ca;}}let Qc=null;class nc extends ic{static get instance(){null===Qc&&(Qc=new nc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:k,locale:M}){return H(a,k,M)}formatOffset(a,k){return y(this.offset(a),k)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const we={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Tb extends ic{static create(a){pc[a]||(pc[a]=new Tb(a));return pc[a]}static resetCache(){pc={};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(k){return!1}}constructor(a){super();this.zoneName=a;this.valid=Tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:k,locale:M}){return H(a,k,M,this.name)}formatOffset(a,k){return y(this.offset(a),k)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var k=this.name;oc[k]||(oc[k]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:k,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));k=oc[k];if(k.formatToParts){k=k.formatToParts(a);var M=[];for(let Wa=0;Wa<k.length;Wa++){const {type:Xa,value:bb}=k[Wa],ua=we[Xa];"era"===Xa?M[ua]=bb:n(ua)||(M[ua]=parseInt(bb,10))}k=M}else{k=k.format(a).replace(/\u200E/g,"");k=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(k);const [,Wa,Xa,bb,ua,$b,v,D]=k;k=[bb,Wa,Xa,ua,$b,v,D]}let [fa,ma,sa,Aa,Ia,Pa,e]=k;"BC"===Aa&&(fa=-Math.abs(fa)+1);k=E({year:fa,month:ma,day:sa,hour:24===Ia?0:Ia,minute:Pa,second:e,millisecond:0});
a=+a;M=a%1E3;return(k-(a-(0<=M?M:1E3+M)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Hc={},Ic={},Jc={},qc=null;class xe{constructor(a,k,M){this.padTo=M.padTo||0;this.floor=M.floor||!1;const {padTo:fa,floor:ma,...sa}=M;if(!k||0<Object.keys(sa).length)k={useGrouping:!1,...M},0<M.padTo&&(k.minimumIntegerDigits=M.padTo),this.inf=ba(a,k)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):C(a,3);return G(a,
this.padTo)}}class ye{constructor(a,k,M){this.opts=M;var fa=void 0;a.zone.isUniversal?(fa=a.offset/60*-1,fa=0<=fa?`Etc/GMT+${fa}`:`Etc/GMT${fa}`,0!==a.offset&&Tb.create(fa).valid?this.dt=a:(fa="UTC",this.dt=M.timeZoneName?a:0===a.offset?a:$a.fromMillis(a.ts+6E4*a.offset))):"system"===a.zone.type?this.dt=a:(this.dt=a,fa=a.zone.name);a={...this.opts};a.timeZone=a.timeZone||fa;this.dtf=la(k,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class ze{constructor(a,k,M){this.opts={style:"long",...M};!k&&J()&&(this.rtf=P(a,M))}format(a,k){return this.rtf?this.rtf.format(a,k):ta(k,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,k){return this.rtf?this.rtf.formatToParts(a,k):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,k,M,fa=!1){a=a||yb.defaultLocale;var ma;(ma=a)||(fa?fa="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),fa=qc),
ma=fa);return new rb(ma,k||yb.defaultNumberingSystem,M||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:k,outputCalendar:M}={}){return rb.create(a,k,M)}constructor(a,k,M,fa){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var sa=[a];else{try{sa=la(a).resolvedOptions();var Aa=a}catch(bb){Aa=a.substring(0,ma),sa=la(Aa).resolvedOptions()}const {numberingSystem:Wa,calendar:Xa}=sa;sa=[Aa,Wa,Xa]}const [Ia,
Pa,e]=sa;this.locale=Ia;this.numberingSystem=k||Pa||null;this.outputCalendar=M||e||null;k=this.locale;M=this.numberingSystem;if((sa=this.outputCalendar)||M)k.includes("-u-")||(k+="-u"),sa&&(k+=`-ca-${sa}`),M&&(k+=`-nu-${M}`);this.intl=k;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=fa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==
this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),k=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&k?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||
this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,k=!1,M=!0){return u(this,a,M,t,()=>{const fa=k?{month:a,day:"numeric"}:{month:a},ma=k?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=S(sa=>this.extract(sa,fa,"month")));return this.monthsCache[ma][a]})}weekdays(a,k=!1,
M=!0){return u(this,a,M,W,()=>{const fa=k?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=k?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=K(sa=>this.extract(sa,fa,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return u(this,void 0,a,()=>Ed,()=>{if(!this.meridiemCache){const k={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$a.utc(2016,11,13,9),$a.utc(2016,11,13,19)].map(M=>this.extract(M,k,"dayperiod"))}return this.meridiemCache})}eras(a,
k=!0){return u(this,a,k,ja,()=>{const M={era:a};this.eraCache[a]||(this.eraCache[a]=[$a.utc(-40,1,1),$a.utc(2017,1,1)].map(fa=>this.extract(fa,M,"era")));return this.eraCache[a]})}extract(a,k,M){return(a=this.dtFormatter(a,k).formatToParts().find(fa=>fa.type.toLowerCase()===M))?a.value:null}numberFormatter(a={}){return new xe(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,k={}){return new ye(a,this.intl,k)}relFormatter(a={}){return new ze(this.intl,this.isEnglish(),a)}listFormatter(a=
{}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(L(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${y(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${y(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,k){return y(this.fixed,k)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class hd extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Fd=()=>Date.now(),Gd="system",Hd=null,Sc=null,Id=null,Jd=60,Kd;class yb{static get now(){return Fd}static set now(a){Fd=a}static set defaultZone(a){Gd=a}static get defaultZone(){return m(Gd,nc.instance)}static get defaultLocale(){return Hd}static set defaultLocale(a){Hd=a}static get defaultNumberingSystem(){return Sc}static set defaultNumberingSystem(a){Sc=
a}static get defaultOutputCalendar(){return Id}static set defaultOutputCalendar(a){Id=a}static get twoDigitCutoffYear(){return Jd}static set twoDigitCutoffYear(a){Jd=a%100}static get throwOnInvalid(){return Kd}static set throwOnInvalid(a){Kd=a}static resetCaches(){rb.resetCache();Tb.resetCache()}}const kd="January February March April May June July August September October November December".split(" "),jd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),md=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ld="Mon Tue Wed Thu Fri Sat Sun".split(" "),oe="MTWTFSS".split(""),Ed=["AM","PM"],qe=["Before Christ","Anno Domini"],pe=["BC","AD"],Kc=["B","A"],Tc={D:Ea,DD:Qa,DDD:lb,DDDD:ib,t:hb,tt:xb,ttt:Ib,tttt:rd,T:sd,TT:td,TTT:ud,TTTT:vd,f:wd,ff:yd,fff:Ad,ffff:Cd,F:xd,FF:zd,FFF:Bd,FFFF:Dd};class Fb{static create(a,k={}){return new Fb(a,k)}static parseFormat(a){let k=null,M="",fa=!1;const ma=[];for(let sa=0;sa<a.length;sa++){const Aa=a.charAt(sa);
"'"===Aa?(0<M.length&&ma.push({literal:fa,val:M}),k=null,M="",fa=!fa):fa?M+=Aa:Aa===k?M+=Aa:(0<M.length&&ma.push({literal:!1,val:M}),k=M=Aa)}0<M.length&&ma.push({literal:fa,val:M});return ma}static macroTokenToFormatOpts(a){return Tc[a]}constructor(a,k){this.opts=k;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,k){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...k}).format()}formatDateTime(a,k={}){return this.loc.dtFormatter(a,
{...this.opts,...k}).format()}formatDateTimeParts(a,k={}){return this.loc.dtFormatter(a,{...this.opts,...k}).formatToParts()}formatInterval(a,k={}){return this.loc.dtFormatter(a.start,{...this.opts,...k}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,k={}){return this.loc.dtFormatter(a,{...this.opts,...k}).resolvedOptions()}num(a,k=0){if(this.opts.forceSimple)return G(a,k);const M={...this.opts};0<k&&(M.padTo=k);return this.loc.numberFormatter(M).format(a)}formatDateTimeFromString(a,
k){const M="en"===this.loc.listingMode(),fa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(Wa,Xa)=>this.loc.extract(a,Wa,Xa),sa=Wa=>a.isOffsetFixed&&0===a.offset&&Wa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Wa.format):"",Aa=(Wa,Xa)=>M?t(Wa)[a.month-1]:ma(Xa?{month:Wa}:{month:Wa,day:"numeric"},"month"),Ia=(Wa,Xa)=>M?W(Wa)[a.weekday-1]:ma(Xa?{weekday:Wa}:{weekday:Wa,month:"long",day:"numeric"},"weekday"),Pa=Wa=>{const Xa=Fb.macroTokenToFormatOpts(Wa);return Xa?this.formatWithSystemDefault(a,
Xa):Wa},e=Wa=>M?ja(Wa)[0>a.year?0:1]:ma({era:Wa},"era");return ya(Fb.parseFormat(k),Wa=>{switch(Wa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%
12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return sa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return sa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return sa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return M?Ed[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return fa?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return fa?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",!1);case "EEEEE":return Ia("narrow",!1);case "L":return fa?
ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return fa?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return fa?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return fa?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return fa?
ma({year:"numeric"},"year"):this.num(a.year);case "yy":return fa?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return e("short");case "GG":return e("long");case "GGGGG":return e("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Pa(Wa)}})}formatDurationFromString(a,k){const M=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};k=Fb.parseFormat(k);const fa=k.reduce((ma,{literal:sa,val:Aa})=>sa?ma:ma.concat(Aa),[]);a=a.shiftTo(...fa.map(M).filter(ma=>ma));return ya(k,(ma=>sa=>{const Aa=M(sa);return Aa?this.num(ma.get(Aa),sa.length):sa})(a))}}class Qb{constructor(a,k){this.reason=a;this.explanation=k}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ld=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Md=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Uc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nd=RegExp(`${Uc.source}${`(?:${Md.source}?(?:\\[(${Ld.source})\\])?)?`}`),Vc=RegExp(`(?:T${Nd.source})?`),Od=La("weekYear","weekNumber","weekDay"),Ae=La("year","ordinal"),Wc=RegExp(`${Uc.source} ?(?:${Md.source}|(${Ld.source}))?`),Pd=RegExp(`(?: ${Wc.source})?`),Be=RegExp(`^T?${Uc.source}$`),Ce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},De=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Ee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,He=Da(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vc),Ie=Da(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vc),Je=Da(/(\d{4})-?(\d{3})/,Vc),Ke=Da(Nd),Qd=Ha(function(a,k){return[{year:Ja(a,k),month:Ja(a,k+1,1),day:Ja(a,k+2,1)},null,k+3]},Na,Ya,Ua),Le=Ha(Od,Na,Ya,Ua),Me=Ha(Ae,Na,Ya,Ua),Ne=Ha(Na,Ya,Ua),Oe=Ha(Na),Pe=Da(/(\d{4})-(\d\d)-(\d\d)/,Pd),Qe=Da(Wc),Re=Ha(Na,Ya,Ua),Rd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Se={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Rd},Te={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Rd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),se=cc.slice(0).reverse();
class eb{constructor(a){const k="longterm"===a.conversionAccuracy||!1;let M=k?Te:Se;a.matrix&&(M=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=k?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=M;this.isLuxonDuration=!0}static fromMillis(a,k){return eb.fromObject({milliseconds:a},k)}static fromObject(a,k={}){if(null==a||"object"!==typeof a)throw new qa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new eb({values:x(a,
eb.normalizeUnit),loc:rb.fromObject(k),conversionAccuracy:k.conversionAccuracy,matrix:k.matrix})}static fromDurationLike(a){if(A(a))return eb.fromMillis(a);if(eb.isDuration(a))return a;if("object"===typeof a)return eb.fromObject(a);throw new qa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,k){const [M]=Fa(a,[Ce,jb]);return M?eb.fromObject(M,k):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,k){const [M]=Fa(a,[Be,Oe]);return M?
eb.fromObject(M,k):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,k=null){if(!a)throw new qa("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,k);if(yb.throwOnInvalid)throw new V(a);return new eb({invalid:a})}static normalizeUnit(a){const k={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!k)throw new Y(a);return k}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,k={}){k={...k,floor:!1!==k.round&&!1!==k.floor};return this.isValid?Fb.create(this.loc,k).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const k=cc.map(M=>{const fa=this.values[M];return n(fa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:M.slice(0,-1)}).format(fa)}).filter(M=>M);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(k)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=C(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var k=this.toMillis();if(0>k||864E5<=k)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
k=this.shiftTo("hours","minutes","seconds","milliseconds");let M="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===k.seconds&&0===k.milliseconds||(M+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===k.milliseconds||(M+=".SSS"));k=k.toFormat(M);a.includePrefix&&(k="T"+k);return k}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);const k=
{};for(const M of cc)if(d(a.values,M)||d(this.values,M))k[M]=a.get(M)+this.get(M);return ea(this,{values:k},!0)}minus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const k={};for(const M of Object.keys(this.values))k[M]=I(a(this.values[M],M));return ea(this,{values:k},!0)}get(a){return this[eb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...x(a,eb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:k,conversionAccuracy:M,matrix:fa}={}){a={loc:this.loc.clone({locale:a,numberingSystem:k}),matrix:fa,conversionAccuracy:M};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();va(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const k={};for(const [M,fa]of Object.entries(a))0!==fa&&(k[M]=fa);return ea(this,{values:k},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(sa=>eb.normalizeUnit(sa));const k={},M={},fa=this.toObject();let ma;for(const sa of cc)if(0<=a.indexOf(sa)){ma=sa;let Aa=0;for(const Pa in M)Aa+=this.matrix[Pa][sa]*M[Pa],M[Pa]=0;A(fa[sa])&&(Aa+=fa[sa]);const Ia=Math.trunc(Aa);k[sa]=Ia;M[sa]=(1E3*Aa-1E3*Ia)/1E3;for(const Pa in fa)cc.indexOf(Pa)>cc.indexOf(sa)&&ka(this.matrix,fa,Pa,k,sa)}else A(fa[sa])&&(M[sa]=fa[sa]);for(const sa in M)0!==M[sa]&&(k[ma]+=sa===ma?M[sa]:M[sa]/this.matrix[ma][sa]);return ea(this,{values:k},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const k of Object.keys(this.values))a[k]=0===this.values[k]?0:-this.values[k];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const fa of cc){var k=this.values[fa];var M=a.values[fa];k=void 0===k||0===k?void 0===M||0===M:k===M;if(!k)return!1}return!0}}class wb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,k=null){if(!a)throw new qa("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,k);if(yb.throwOnInvalid)throw new hc(a);return new wb({invalid:a})}static fromDateTimes(a,
k){a=Ab(a);k=Ab(k);var M=a&&a.isValid?k&&k.isValid?k<a?wb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${k.toISO()}`):null:wb.invalid("missing or invalid end"):wb.invalid("missing or invalid start");return null==M?new wb({start:a,end:k}):M}static after(a,k){k=eb.fromDurationLike(k);a=Ab(a);return wb.fromDateTimes(a,a.plus(k))}static before(a,k){k=eb.fromDurationLike(k);a=Ab(a);return wb.fromDateTimes(a.minus(k),a)}static fromISO(a,
k){const [M,fa]=(a||"").split("/",2);if(M&&fa){let Aa;try{var ma=$a.fromISO(M,k);Aa=ma.isValid}catch(Pa){Aa=!1}let Ia;try{var sa=$a.fromISO(fa,k);Ia=sa.isValid}catch(Pa){Ia=!1}if(Aa&&Ia)return wb.fromDateTimes(ma,sa);if(Aa){if(sa=eb.fromISO(fa,k),sa.isValid)return wb.after(ma,sa)}else if(Ia&&(ma=eb.fromISO(M,k),ma.isValid))return wb.before(sa,ma)}return wb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const k=this.start.startOf(a),M=this.end.startOf(a);return Math.floor(M.diff(k,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:k}={}){return this.isValid?wb.fromDateTimes(a||this.s,k||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ab).filter(sa=>this.contains(sa)).sort();const k=[];let {s:M}=this,fa=0;for(;M<this.e;){var ma=a[fa]||this.e;ma=+ma>+this.e?this.e:ma;
k.push(wb.fromDateTimes(M,ma));M=ma;fa+=1}return k}splitBy(a){a=eb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:k}=this,M=1;const fa=[];for(;k<this.e;){var ma=this.start.plus(a.mapUnits(sa=>sa*M));ma=+ma>+this.e?this.e:ma;fa.push(wb.fromDateTimes(k,ma));k=ma;M+=1}return fa}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?
+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const k=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return k>=a?null:wb.fromDateTimes(k,a)}union(a){return this.isValid?wb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [k,M]=a.sort((fa,ma)=>fa.s-ma.s).reduce(([fa,ma],sa)=>ma?ma.overlaps(sa)||ma.abutsStart(sa)?
[fa,ma.union(sa)]:[fa.concat([ma]),sa]:[fa,sa],[[],null]);M&&k.push(M);return k}static xor(a){let k=null,M=0;const fa=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,sa)=>ma.time-sa.time);for(const ma of a)M+="s"===ma.type?1:-1,1===M?k=ma.time:(k&&+k!==+ma.time&&fa.push(wb.fromDateTimes(k,ma.time)),k=null);return wb.merge(fa)}difference(...a){return wb.xor([this].concat(a)).map(k=>this.intersection(k)).filter(k=>k&&!k.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ea,k={}){return this.isValid?Fb.create(this.s.loc.clone(k),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:k=" \u2013 "}=
{}){return this.isValid?`${this.s.toFormat(a)}${k}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,k){return this.isValid?this.e.diff(this.s,a,k):eb.invalid(this.invalidReason)}mapEndpoints(a){return wb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const k=$a.now().setZone(a).set({month:12});return!a.isUniversal&&k.offset!==k.set({month:6}).offset}static isValidIANAZone(a){return Tb.isValidZone(a)}static normalizeZone(a){return m(a,yb.defaultZone)}static months(a=
"long",{locale:k=null,numberingSystem:M=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(k,M,ma)).months(a)}static monthsFormat(a="long",{locale:k=null,numberingSystem:M=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(k,M,ma)).months(a,!0)}static weekdays(a="long",{locale:k=null,numberingSystem:M=null,locObj:fa=null}={}){return(fa||rb.create(k,M,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:k=null,numberingSystem:M=null,locObj:fa=null}=
{}){return(fa||rb.create(k,M,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:k=null}={}){return rb.create(k,null,"gregory").eras(a)}static features(){return{relative:J()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},nd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},te=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),od=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(od,"g"),ue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],qd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pd="year month day hour minute second millisecond".split(" "),We="weekYear weekNumber weekday hour minute second millisecond".split(" "),Xe="year ordinal hour minute second millisecond".split(" ");
class $a{constructor(a){const k=a.zone||yb.defaultZone;let M=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(k.isValid?null:Gb(k));this.ts=n(a.ts)?yb.now():a.ts;let fa=null;var ma=null;M||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(k)?[fa,ma]=[a.old.c,a.old.o]:(ma=k.offset(this.ts),fa=oa(this.ts,ma),fa=(M=Number.isNaN(fa.year)?new Qb("invalid input"):null)?null:fa,ma=M?null:ma));this._zone=k;this.loc=a.loc||rb.create();this.invalid=M;this.weekData=null;this.c=fa;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new $a({})}static local(){const [a,k]=fb(arguments),[M,fa,ma,sa,Aa,Ia,Pa]=k;return Hb({year:M,month:fa,day:ma,hour:sa,minute:Aa,second:Ia,millisecond:Pa},a)}static utc(){const [a,k]=fb(arguments),[M,fa,ma,sa,Aa,Ia,Pa]=k;a.zone=Eb.utcInstance;return Hb({year:M,month:fa,day:ma,hour:sa,minute:Aa,second:Ia,millisecond:Pa},a)}static fromJSDate(a,k={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return $a.invalid("invalid input");const M=
m(k.zone,yb.defaultZone);return M.isValid?new $a({ts:a,zone:M,loc:rb.fromObject(k)}):$a.invalid(Gb(M))}static fromMillis(a,k={}){if(A(a))return-864E13>a||864E13<a?$a.invalid("Timestamp out of range"):new $a({ts:a,zone:m(k.zone,yb.defaultZone),loc:rb.fromObject(k)});throw new qa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,k={}){if(A(a))return new $a({ts:1E3*a,zone:m(k.zone,yb.defaultZone),loc:rb.fromObject(k)});throw new qa("fromSeconds requires a numerical input");
}static fromObject(a,k={}){a=a||{};var M=m(k.zone,yb.defaultZone);if(!M.isValid)return $a.invalid(Gb(M));var fa=yb.now();const ma=n(k.specificOffset)?M.offset(fa):k.specificOffset,sa=x(a,kc);var Aa=!n(sa.ordinal),Ia=!n(sa.year),Pa=!n(sa.month)||!n(sa.day);Ia=Ia||Pa;var e=sa.weekYear||sa.weekNumber;k=rb.fromObject(k);if((Ia||Aa)&&e)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Pa&&Aa)throw new ha("Can't mix ordinal dates with month/day");Pa=e||sa.weekday&&!Ia;
let Wa=oa(fa,ma);Pa?(fa=We,e=Ue,Wa=vb(Wa)):Aa?(fa=Xe,e=Ve,Wa=qb(Wa)):(fa=pd,e=qd);let Xa=!1;for(var bb of fa)n(sa[bb])?sa[bb]=Xa?e[bb]:Wa[bb]:Xa=!0;Pa?(bb=R(sa.weekYear),fa=p(sa.weekNumber,1,O(sa.weekYear)),e=p(sa.weekday,1,7),bb=bb?fa?e?!1:Ga("weekday",sa.weekday):Ga("week",sa.week):Ga("weekYear",sa.weekYear)):Aa?(bb=R(sa.year),fa=p(sa.ordinal,1,q(sa.year)?366:365),bb=bb?fa?!1:Ga("ordinal",sa.ordinal):Ga("year",sa.year)):bb=gb(sa);if(bb=bb||db(sa))return $a.invalid(bb);Aa=Pa?ub(sa):Aa?b(sa):sa;const [ua,
$b]=Yb(Aa,ma,M);M=new $a({ts:ua,zone:M,o:$b,loc:k});return sa.weekday&&Ia&&a.weekday!==M.weekday?$a.invalid("mismatched weekday",`you can't specify both a weekday of ${sa.weekday} and a date of ${M.toISO()}`):M}static fromISO(a,k={}){const [M,fa]=Fa(a,[He,Qd],[Ie,Le],[Je,Me],[Ke,Ne]);return zb(M,fa,k,"ISO 8601",a)}static fromRFC2822(a,k={}){const [M,fa]=Fa(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[De,mb]);return zb(M,fa,k,"RFC 2822",a)}static fromHTTP(a,k={}){const [M,fa]=
Fa(a,[Ee,c],[Fe,c],[Ge,r]);return zb(M,fa,k,"HTTP",k)}static fromFormat(a,k,M={}){if(n(a)||n(k))throw new qa("fromFormat requires an input string and a format");const {locale:fa=null,numberingSystem:ma=null}=M,sa=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0}),{result:Aa,zone:Ia,specificOffset:Pa,invalidReason:e}=Ra(sa,a,k),[Wa,Xa,bb,ua]=[Aa,Ia,Pa,e];return ua?$a.invalid(ua):zb(Wa,Xa,M,`format ${k}`,a,bb)}static fromString(a,k,M={}){return $a.fromFormat(a,k,M)}static fromSQL(a,k={}){const [M,
fa]=Fa(a,[Pe,Qd],[Qe,Re]);return zb(M,fa,k,"SQL",a)}static invalid(a,k=null){if(!a)throw new qa("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,k);if(yb.throwOnInvalid)throw new Za(a);return new $a({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,k={}){return(a=Sa(a,rb.fromObject(k)))?a.map(M=>M?M.val:null).join(""):null}static expandFormat(a,k={}){return Ka(Fb.parseFormat(a),rb.fromObject(k)).map(M=>M.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pb(this).weekYear:NaN}get weekNumber(){return this.isValid?Pb(this).weekNumber:NaN}get weekday(){return this.isValid?Pb(this).weekday:
NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return q(this.year)}get daysInMonth(){return z(this.year,this.month)}get daysInYear(){return this.isValid?
q(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?O(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:k,numberingSystem:M,calendar:fa}=Fb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:k,numberingSystem:M,outputCalendar:fa}}toUTC(a=0,k={}){return this.setZone(Eb.instance(a),k)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:k=!1,keepCalendarTime:M=!1}={}){a=m(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let fa=
this.ts;if(k||M)k=a.offset(this.ts),M=this.toObject(),[fa]=Yb(M,k,a);return nb(this,{ts:fa,zone:a})}return $a.invalid(Gb(a))}reconfigure({locale:a,numberingSystem:k,outputCalendar:M}={}){a=this.loc.clone({locale:a,numberingSystem:k,outputCalendar:M});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=x(a,kc);var k=!n(a.weekYear)||!n(a.weekNumber)||!n(a.weekday);const M=!n(a.ordinal),fa=!n(a.year),ma=!n(a.month)||!n(a.day),sa=a.weekYear||
a.weekNumber;if((fa||ma||M)&&sa)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&M)throw new ha("Can't mix ordinal dates with month/day");k?k=ub({...vb(this.c),...a}):n(a.ordinal)?(k={...this.toObject(),...a},n(a.day)&&(k.day=Math.min(z(k.year,k.month),k.day))):k=b({...qb(this.c),...a});const [Aa,Ia]=Yb(k,this.o,this.zone);return nb(this,{ts:Aa,o:Ia})}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return nb(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=eb.fromDurationLike(a).negate();return nb(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const k={};a=eb.normalizeUnit(a);switch(a){case "years":k.month=1;case "quarters":case "months":k.day=1;case "weeks":case "days":k.hour=0;case "hours":k.minute=0;case "minutes":k.second=0;case "seconds":k.millisecond=0}"weeks"===a&&(k.weekday=1);"quarters"===a&&(k.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(k)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
k={}){return this.isValid?Fb.create(this.loc.redefaultToEN(k)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ea,k={}){return this.isValid?Fb.create(this.loc.clone(k),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Fb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:k=!1,suppressMilliseconds:M=!1,includeOffset:fa=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let sa=
Zb(this,a);return sa=sa+"T"+Xb(this,a,k,M,fa,ma)}toISODate({format:a="extended"}={}){return this.isValid?Zb(this,"extended"===a):null}toISOWeekDate(){return Kb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:k=!1,includeOffset:M=!0,includePrefix:fa=!1,extendedZone:ma=!1,format:sa="extended"}={}){return this.isValid?(fa?"T":"")+Xb(this,"extended"===sa,k,a,M,ma):null}toRFC2822(){return Kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Zb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:k=!1,includeOffsetSpace:M=!0}={}){let fa="HH:mm:ss.SSS";if(k||a)M&&(fa+=" "),k?fa+="z":a&&(fa+="ZZ");return Kb(this,fa,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const k={...this.c};a.includeConfig&&(k.outputCalendar=this.outputCalendar,k.numberingSystem=this.loc.numberingSystem,k.locale=this.loc.locale);return k}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,k="milliseconds",M={}){if(!this.isValid||!a.isValid)return eb.invalid("created by diffing an invalid DateTime");M={locale:this.locale,numberingSystem:this.numberingSystem,...M};
const fa=(Array.isArray(k)?k:[k]).map(eb.normalizeUnit);k=a.valueOf()>this.valueOf();a=da(k?this:a,k?a:this,fa,M);return k?a.negate():a}diffNow(a="milliseconds",k={}){return this.diff($a.now(),a,k)}until(a){return this.isValid?wb.fromDateTimes(this,a):this}hasSame(a,k){if(!this.isValid)return!1;const M=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(k)<=M&&M<=a.endOf(k)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const k=a.base||$a.fromObject({},{zone:this.zone}),M=a.padding?this<k?-a.padding:a.padding:0;let fa="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(fa=a.unit,ma=void 0);return Rb(k,this.plus(M),{...a,numeric:"always",units:fa,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Rb(a.base||$a.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every($a.isDateTime))throw new qa("min requires all arguments be DateTimes");
return g(a,k=>k.valueOf(),Math.min)}static max(...a){if(!a.every($a.isDateTime))throw new qa("max requires all arguments be DateTimes");return g(a,k=>k.valueOf(),Math.max)}static fromFormatExplain(a,k,M={}){const {locale:fa=null,numberingSystem:ma=null}=M;M=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0});return Ra(M,a,k)}static fromStringExplain(a,k,M={}){return $a.fromFormatExplain(a,k,M)}static get DATE_SHORT(){return Ea}static get DATE_MED(){return Qa}static get DATE_MED_WITH_WEEKDAY(){return Va}static get DATE_FULL(){return lb}static get DATE_HUGE(){return ib}static get TIME_SIMPLE(){return hb}static get TIME_WITH_SECONDS(){return xb}static get TIME_WITH_SHORT_OFFSET(){return Ib}static get TIME_WITH_LONG_OFFSET(){return rd}static get TIME_24_SIMPLE(){return sd}static get TIME_24_WITH_SECONDS(){return td}static get TIME_24_WITH_SHORT_OFFSET(){return ud}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return wd}static get DATETIME_SHORT_WITH_SECONDS(){return xd}static get DATETIME_MED(){return yd}static get DATETIME_MED_WITH_SECONDS(){return zd}static get DATETIME_MED_WITH_WEEKDAY(){return ve}static get DATETIME_FULL(){return Ad}static get DATETIME_FULL_WITH_SECONDS(){return Bd}static get DATETIME_HUGE(){return Cd}static get DATETIME_HUGE_WITH_SECONDS(){return Dd}}
h.DateTime=$a;h.Duration=eb;h.FixedOffsetZone=Eb;h.IANAZone=Tb;h.Info=lc;h.Interval=wb;h.SystemZone=nc;h.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(h,f){var la={};(function(P){(function(S,K){P.exports&&(P.exports=K())})(f.commonjsGlobal,function(){function S(u,m,n,A){u=Error.call(this,u);Object.setPrototypeOf&&Object.setPrototypeOf(u,S.prototype);u.expected=m;u.found=n;u.location=A;u.name="SyntaxError";return u}function K(u,m,n){n=
n||" ";if(u.length>m)return u;m-=u.length;n+=n.repeat(m);return u+n.slice(0,m)}(function(u,m){function n(){this.constructor=u}n.prototype=m.prototype;u.prototype=new n})(S,Error);S.prototype.format=function(u){var m="Error: "+this.message;if(this.location){var n=null,A;for(A=0;A<u.length;A++)if(u[A].source===this.location.source){n=u[A].text.split(/\r\n|\n|\r/g);break}u=this.location.start;A=this.location.source+":"+u.line+":"+u.column;if(n){var R=this.location.end,J=K("",u.line.toString().length,
" ");n=n[u.line-1];R=(u.line===R.line?R.column:n.length+1)-u.column||1;m+="\n --\x3e "+A+"\n"+J+" |\n"+u.line+" | "+n+"\n"+J+" | "+K("",u.column-1," ")+K("",R,"^")}else m+="\n at "+A}return m};S.buildMessage=function(u,m){function n(w){return w.charCodeAt(0).toString(16).toUpperCase()}function A(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(d){return"\\x"+n(d)})}function R(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function J(w){return g[w.type](w)}var g={literal:function(w){return'"'+A(w.text)+'"'},class:function(w){var d=w.parts.map(function(p){return Array.isArray(p)?R(p[0])+
"-"+R(p[1]):R(p)});return"["+(w.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};return"Expected "+function(w){w=w.map(J);var d,p;w.sort();if(0<w.length){for(p=d=1;d<w.length;d++)w[d-1]!==w[d]&&(w[p]=w[d],p++);w.length=p}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}(u)+" but "+(m?'"'+A(m)+'"':"end of input")+" found."};
return{SyntaxError:S,parse:function(u,m){function n(v,D){return{type:"literal",text:v,ignoreCase:D}}function A(v,D,Z){return{type:"class",parts:v,inverted:D,ignoreCase:Z}}function R(v){var D=Wa[v],Z;if(!D){for(Z=v-1;!Wa[Z];)Z--;D=Wa[Z];for(D={line:D.line,column:D.column};Z<v;)10===u.charCodeAt(Z)?(D.line++,D.column=1):D.column++,Z++;Wa[v]=D}return D}function J(v,D){var Z=R(v),za=R(D);return{source:gb,start:{offset:v,line:Z.line,column:Z.column},end:{offset:D,line:za.line,column:za.column}}}function g(v){e<
Xa||(e>Xa&&(Xa=e,bb=[]),bb.push(v))}function w(){var v=e;xa();var D=p();D!==b?(xa(),v=D):(e=v,v=b);return v}function d(){var v=e;var D=p();if(D!==b){v=[];var Z=e;var za=xa();var Ma=Sa();if(Ma!==b){var ab=xa();var cb=p();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)v.push(Z),Z=e,za=xa(),Ma=Sa(),Ma!==b?(ab=xa(),cb=p(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);Z={type:"expression-list"};D=[D];for(za=0;za<v.length;za++)D.push(v[za][3]);Z.value=D;v=Z}else e=v,v=b;return v}function p(){var v=
e;var D=G();if(D!==b){v=[];var Z=e;var za=xa();var Ma=ka();if(Ma!==b){var ab=xa();var cb=G();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)v.push(Z),Z=e,za=xa(),Ma=ka(),Ma!==b?(ab=xa(),cb=G(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);v=qb(D,v)}else e=v,v=b;return v}function G(){var v=e;var D=Q();if(D!==b){v=[];var Z=e;var za=xa();var Ma=ea();if(Ma!==b){var ab=xa();var cb=Q();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)v.push(Z),Z=e,za=xa(),Ma=ea(),Ma!==b?(ab=xa(),
cb=Q(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);v=qb(D,v)}else e=v,v=b;return v}function Q(){var v=e;var D=r();if(D===b){D=e;if(33===u.charCodeAt(e)){var Z=Pb;e++}else Z=b,0===ua&&g(jd);if(Z!==b){var za=e;ua++;if(61===u.charCodeAt(e)){var Ma=nb;e++}else Ma=b,0===ua&&g(id);ua--;Ma===b?za=void 0:(e=za,za=b);za!==b?D=Z=[Z,za]:(e=D,D=b)}else e=D,D=b}D!==b?(Z=xa(),za=Q(),za!==b?v={type:"unary-expression",operator:"NOT",expr:za}:(e=v,v=b)):(e=v,v=b);if(v===b){D=e;v=q();if(v!==b){xa();D=[];Z=e;za=
xa();Ma=T();if(Ma!==b){var ab=xa();var cb=q();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;if(Z!==b)for(;Z!==b;)D.push(Z),Z=e,za=xa(),Ma=T(),Ma!==b?(ab=xa(),cb=q(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);else D=b;D!==b&&(D={type:"arithmetic",tail:D});D===b&&(D=e,Z=C(),Z!==b?(xa(),za=Ga(),za!==b?(xa(),za=d(),za!==b?(xa(),Ma=Ta(),Ma!==b?D={op:Z,right:za}:(e=D,D=b)):(e=D,D=b)):(e=D,D=b)):(e=D,D=b),D===b&&(D=e,Z=C(),Z!==b?(xa(),za=Ga(),za!==b?(xa(),za=Ta(),za!==b?D={op:Z,right:{type:"expression-list",
value:[]}}:(e=D,D=b)):(e=D,D=b)):(e=D,D=b),D===b&&(D=e,Z=C(),Z!==b?(xa(),za=y(),za!==b?D={op:Z,right:za}:(e=D,D=b)):(e=D,D=b))),D===b&&(D=e,Ma=r(),Ma!==b?(xa(),Z=va(),Z!==b?(xa(),za=q(),za!==b?(xa(),ab=ea(),ab!==b?(xa(),Ma=q(),Ma!==b?D={op:"NOT"+Z,right:{type:"expression-list",value:[za,Ma]}}:(e=D,D=b)):(e=D,D=b)):(e=D,D=b)):(e=D,D=b)):(e=D,D=b),D===b&&(D=e,Ma=va(),Ma!==b?(xa(),Z=q(),Z!==b?(xa(),za=ea(),za!==b?(xa(),ab=q(),ab!==b?D={op:Ma,right:{type:"expression-list",value:[Z,ab]}}:(e=D,D=b)):(e=
D,D=b)):(e=D,D=b)):(e=D,D=b)),D===b&&(D=e,Z=mb(),Z!==b?(xa(),za=r(),za!==b?(xa(),za=q(),za!==b?D={op:Z+"NOT",right:za}:(e=D,D=b)):(e=D,D=b)):(e=D,D=b),D===b&&(D=e,Z=mb(),Z!==b?(xa(),za=q(),za!==b?D={op:Z,right:za}:(e=D,D=b)):(e=D,D=b)),D===b&&(D=e,Z=aa(),Z!==b?(xa(),za=ya(),za!==b?(xa(),Ma=e,u.substr(e,6).toLowerCase()===Qa?(ab=u.substr(e,6),e+=6):(ab=b,0===ua&&g(Ke)),ab!==b?(ab=e,ua++,cb=I(),ua--,cb===b?ab=void 0:(e=ab,ab=b),ab!==b?Ma="ESCAPE":(e=Ma,Ma=b)):(e=Ma,Ma=b),Ma!==b?(xa(),Ma=Da(),Ma!==b?
D={op:Z,right:za,escape:Ma.value}:(e=D,D=b)):(e=D,D=b)):(e=D,D=b)):(e=D,D=b),D===b&&(D=e,Z=aa(),Z!==b?(xa(),za=ya(),za!==b?D={op:Z,right:za,escape:""}:(e=D,D=b)):(e=D,D=b))))));D===b&&(D=null);""==D||void 0==D||null==D?D=v:(Z=null,D=Z="arithmetic"==D.type?qb(v,D.tail):ub(D.op,v,D.right,D.escape))}else e=D,D=b;v=D}return v}function T(){if(u.substr(e,2)===Wb){var v=Wb;e+=2}else v=b,0===ua&&g(md);v===b&&(62===u.charCodeAt(e)?(v=oa,e++):(v=b,0===ua&&g(ld)),v===b&&(u.substr(e,2)===Yb?(v=Yb,e+=2):(v=b,
0===ua&&g(oe)),v===b&&(u.substr(e,2)===Sb?(v=Sb,e+=2):(v=b,0===ua&&g(Ed)),v===b&&(60===u.charCodeAt(e)?(v=zb,e++):(v=b,0===ua&&g(qe)),v===b&&(61===u.charCodeAt(e)?(v=nb,e++):(v=b,0===ua&&g(id)),v===b&&(u.substr(e,2)===Kb?(v=Kb,e+=2):(v=b,0===ua&&g(pe))))))));return v}function aa(){var v=v=e;var D=r();if(D!==b){var Z=xa();var za=c();za!==b?v=D=[D,Z,za]:(e=v,v=b)}else e=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=c());return v}function C(){var v=v=e;var D=r();if(D!==b){var Z=xa();var za=kb();za!==b?v=
D=[D,Z,za]:(e=v,v=b)}else e=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=kb());return v}function q(){var v=e;var D=E();if(D!==b){v=[];var Z=e;var za=xa();var Ma=z();if(Ma!==b){var ab=xa();var cb=E();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)v.push(Z),Z=e,za=xa(),Ma=z(),Ma!==b?(ab=xa(),cb=E(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);v=qb(D,v)}else e=v,v=b;return v}function z(){if(43===u.charCodeAt(e)){var v=Zb;e++}else v=b,0===ua&&g(Kc);v===b&&(45===u.charCodeAt(e)?(v=Xb,e++):
(v=b,0===ua&&g(Tc)),v===b&&(u.substr(e,2)===kc?(v=kc,e+=2):(v=b,0===ua&&g(Fb))));return v}function E(){var v=e;var D=F();if(D!==b){v=[];var Z=e;var za=xa();var Ma=O();if(Ma!==b){var ab=xa();var cb=F();cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)v.push(Z),Z=e,za=xa(),Ma=O(),Ma!==b?(ab=xa(),cb=F(),cb!==b?Z=za=[za,Ma,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);v=qb(D,v)}else e=v,v=b;return v}function O(){if(42===u.charCodeAt(e)){var v=Hb;e++}else v=b,0===ua&&g(Qb);v===b&&(47===u.charCodeAt(e)?(v=Rb,
e++):(v=b,0===ua&&g(Ld)));return v}function F(){var v=Da();if(v===b){var D=e;var Z=e;var za=Ja();if(za!==b){var Ma=Na();if(Ma!==b){var ab=Ya();ab!==b?Z=parseFloat(za+Ma+ab):(e=Z,Z=b)}else e=Z,Z=b}else e=Z,Z=b;Z===b&&(Z=e,za=Ja(),za!==b?(Ma=Na(),Ma!==b?Z=parseFloat(za+Ma):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,za=Ja(),za!==b?(Ma=Ya(),Ma!==b?Z=parseFloat(za+Ma):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,za=Ja(),za!==b&&(za=parseFloat(za)),Z=za)));var cb=Z;if(cb!==b){var Sd=e;ua++;var Kf=L();ua--;Kf===b?Sd=void 0:(e=
Sd,Sd=b);Sd!==b?D={type:"number",value:cb}:(e=D,D=b)}else e=D,D=b;v=D;if(v===b){var Xc=e;var rc=e;if(u.substr(e,4).toLowerCase()===ha){var Td=u.substr(e,4);e+=4}else Td=b,0===ua&&g(Fe);if(Td!==b){var Yc=e;ua++;var Lf=I();ua--;Lf===b?Yc=void 0:(e=Yc,Yc=b);Yc!==b?rc=Td=[Td,Yc]:(e=rc,rc=b)}else e=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Xc=mc;if(Xc===b){Xc=e;var sc=e;if(u.substr(e,5).toLowerCase()===Y){var Ud=u.substr(e,5);e+=5}else Ud=b,0===ua&&g(Ge);if(Ud!==b){var Zc=e;ua++;var Mf=
I();ua--;Mf===b?Zc=void 0:(e=Zc,Zc=b);Zc!==b?sc=Ud=[Ud,Zc]:(e=sc,sc=b)}else e=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Xc=mc}v=Xc;if(v===b){var tc=e;if(u.substr(e,4).toLowerCase()===V){var Vd=u.substr(e,4);e+=4}else Vd=b,0===ua&&g(Ee);if(Vd!==b){var $c=e;ua++;var Nf=I();ua--;Nf===b?$c=void 0:(e=$c,$c=b);$c!==b?tc=Vd=[Vd,$c]:(e=tc,tc=b)}else e=tc,tc=b;var Ye=tc;Ye!==b&&(Ye={type:"null",value:null});v=Ye;if(v===b){var uc=e;if(X()!==b){xa();var kf=ya();kf!==b?uc={type:"date",value:kf.value}:
(e=uc,uc=b)}else e=uc,uc=b;v=uc;if(v===b){var vc=e;if(da()!==b){xa();var lf=ya();lf!==b?vc={type:"timestamp",value:lf.value}:(e=vc,vc=b)}else e=vc,vc=b;v=vc;if(v===b){var Cb=e;var Ze=ia();if(Ze!==b){xa();if(45===u.charCodeAt(e)){var dc=Xb;e++}else dc=b,0===ua&&g(Tc);dc===b&&(43===u.charCodeAt(e)?(dc=Zb,e++):(dc=b,0===ua&&g(Kc)));if(dc!==b){xa();var ad=ya();if(ad!==b){xa();var mf=t();mf!==b?Cb={type:"interval",value:ad,qualifier:mf,op:dc}:(e=Cb,Cb=b)}else e=Cb,Cb=b}else e=Cb,Cb=b}else e=Cb,Cb=b;Cb===
b&&(Cb=e,Ze=ia(),Ze!==b?(xa(),dc=ya(),dc!==b?(xa(),ad=t(),ad!==b?Cb={type:"interval",value:dc,qualifier:ad,op:""}:(e=Cb,Cb=b)):(e=Cb,Cb=b)):(e=Cb,Cb=b));v=Cb}}}}}}var ob=v;if(ob===b){var Lb=e;var wc=e;if(u.substr(e,7).toLowerCase()===sd){var nf=u.substr(e,7);e+=7}else nf=b,0===ua&&g(Re);if(nf!==b){var Wd=e;ua++;var Of=I();ua--;Of===b?Wd=void 0:(e=Wd,Wd=b);Wd!==b?wc="EXTRACT":(e=wc,wc=b)}else e=wc,wc=b;if(wc!==b){xa();var Pf=Ga();if(Pf!==b){xa();var Ub=na();Ub===b&&(Ub=ra(),Ub===b&&(Ub=U(),Ub===b&&
(Ub=ca(),Ub===b&&(Ub=pa(),Ub===b&&(Ub=wa())))));var of=Ub;if(of!==b){xa();var Qf=B();if(Qf!==b){xa();var pf=p();if(pf!==b){xa();var Rf=Ta();Rf!==b?Lb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:of},pf]}}:(e=Lb,Lb=b)}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b;ob=Lb;if(ob===b){var Mb=e;var xc=e;if(u.substr(e,9).toLowerCase()===rd){var qf=u.substr(e,9);e+=9}else qf=b,0===ua&&g(Qe);if(qf!==b){var Xd=e;ua++;var Sf=I();ua--;Sf===
b?Xd=void 0:(e=Xd,Xd=b);Xd!==b?xc="SUBSTRING":(e=xc,xc=b)}else e=xc,xc=b;if(xc!==b){xa();var Tf=Ga();if(Tf!==b){xa();var $e=p();if($e!==b){xa();var Uf=B();if(Uf!==b){xa();var af=p();if(af!==b){xa();var ec=e;var yc=e;if(u.substr(e,3).toLowerCase()===Ib){var rf=u.substr(e,3);e+=3}else rf=b,0===ua&&g(Pe);if(rf!==b){var Yd=e;ua++;var Vf=I();ua--;Vf===b?Yd=void 0:(e=Yd,Yd=b);Yd!==b?yc="FOR":(e=yc,yc=b)}else e=yc,yc=b;var bd=yc;if(bd!==b){var Wf=xa();var sf=p();if(sf!==b){var Xf=xa();ec=bd=[bd,Wf,sf,Xf]}else e=
ec,ec=b}else e=ec,ec=b;ec===b&&(ec=null);bd=Ta();bd!==b?Mb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[$e,af,ec[2]]:[$e,af]}}:(e=Mb,Mb=b)}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b;ob=Mb;if(ob===b){var sb=e;var bf=N();if(bf!==b){xa();var cf=Ga();if(cf!==b){xa();var fc=l();fc===b&&(fc=null);xa();var cd=p();if(cd!==b){xa();var df=B();if(df!==b){xa();var tf=p();if(tf!==b){xa();var Yf=Ta();Yf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",
value:[{type:"string",value:null==fc?"BOTH":fc},cd,tf]}}:(e=sb,sb=b)}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b;sb===b&&(sb=e,bf=N(),bf!==b?(xa(),cf=Ga(),cf!==b?(xa(),fc=l(),fc===b&&(fc=null),xa(),cd=p(),cd!==b?(xa(),df=Ta(),df!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd]}}:(e=sb,sb=b)):(e=sb,sb=b)):(e=sb,sb=b)):(e=sb,sb=b));ob=sb;if(ob===b){var Nb=e;var zc=e;if(u.substr(e,8).toLowerCase()===ud){var uf=
u.substr(e,8);e+=8}else uf=b,0===ua&&g(Se);if(uf!==b){var Zd=e;ua++;var Zf=I();ua--;Zf===b?Zd=void 0:(e=Zd,Zd=b);Zd!==b?zc="POSITION":(e=zc,zc=b)}else e=zc,zc=b;if(zc!==b){xa();var $f=Ga();if($f!==b){xa();var vf=p();if(vf!==b){xa();var ag=kb();if(ag!==b){xa();var wf=p();if(wf!==b){xa();var bg=Ta();bg!==b?Nb={type:"function",name:"position",args:{type:"expression-list",value:[vf,wf]}}:(e=Nb,Nb=b)}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b;ob=Nb;if(ob===b){var Ob=e;var Ac=
e;if(u.substr(e,4).toLowerCase()===ve){var xf=u.substr(e,4);e+=4}else xf=b,0===ua&&g(lc);if(xf!==b){var $d=e;ua++;var cg=I();ua--;cg===b?$d=void 0:(e=$d,$d=b);$d!==b?Ac="CAST":(e=Ac,Ac=b)}else e=Ac,Ac=b;if(Ac!==b){xa();var dg=Ga();if(dg!==b){xa();var yf=p();if(yf!==b){xa();var Bc=e;if(u.substr(e,2).toLowerCase()===Ad){var zf=u.substr(e,2);e+=2}else zf=b,0===ua&&g(Lc);if(zf!==b){var ae=e;ua++;var eg=I();ua--;eg===b?ae=void 0:(e=ae,ae=b);ae!==b?Bc="AS":(e=Bc,Bc=b)}else e=Bc,Bc=b;var fg=Bc;if(fg!==b){xa();
var pb=e;var Cc=e;if(u.substr(e,7).toLowerCase()===Bd){var Af=u.substr(e,7);e+=7}else Af=b,0===ua&&g(nd);if(Af!==b){var be=e;ua++;var gg=I();ua--;gg===b?be=void 0:(e=be,be=b);be!==b?Cc="INTEGER":(e=Cc,Cc=b)}else e=Cc,Cc=b;var tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});pb=tb;if(pb===b){pb=e;var Dc=e;if(u.substr(e,8).toLowerCase()===Cd){var Bf=u.substr(e,8);e+=8}else Bf=b,0===ua&&g(te);if(Bf!==b){var ce=e;ua++;var hg=I();ua--;hg===b?ce=void 0:(e=ce,ce=b);ce!==b?Dc="SMALLINT":(e=Dc,
Dc=b)}else e=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});pb=tb;if(pb===b){pb=e;var Ec=e;if(u.substr(e,5).toLowerCase()===Dd){var Cf=u.substr(e,5);e+=5}else Cf=b,0===ua&&g(od);if(Cf!==b){var de=e;ua++;var ig=I();ua--;ig===b?de=void 0:(e=de,de=b);de!==b?Ec="FLOAT":(e=Ec,Ec=b)}else e=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"float"}});pb=tb;if(pb===b){pb=e;var Fc=e;if(u.substr(e,4).toLowerCase()===ic){var Df=u.substr(e,4);e+=4}else Df=b,0===ua&&g(Mc);if(Df!==
b){var ee=e;ua++;var jg=I();ua--;jg===b?ee=void 0:(e=ee,ee=b);ee!==b?Fc="REAL":(e=Fc,Fc=b)}else e=Fc,Fc=b;tb=Fc;tb!==b&&(tb={type:"data-type",value:{type:"real"}});pb=tb;if(pb===b&&(pb=e,tb=X(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),pb=tb,pb===b&&(pb=e,tb=da(),tb!==b&&(tb={type:"data-type",value:{type:"timestamp"}}),pb=tb,pb===b))){pb=e;var Gc=e;if(u.substr(e,7).toLowerCase()===Qc){var Ef=u.substr(e,7);e+=7}else Ef=b,0===ua&&g(ue);if(Ef!==b){var fe=e;ua++;var kg=I();ua--;kg===b?fe=void 0:
(e=fe,fe=b);fe!==b?Gc="VARCHAR":(e=Gc,Gc=b)}else e=Gc,Gc=b;tb=Gc;if(tb!==b){xa();var lg=Ga();if(lg!==b){xa();var Ff=Ua();if(Ff!==b){xa();var mg=Ta();mg!==b?pb={type:"data-type",value:{type:"varchar",size:parseInt(Ff)}}:(e=pb,pb=b)}else e=pb,pb=b}else e=pb,pb=b}else e=pb,pb=b}}}}var Gf=pb;if(Gf!==b){xa();var ng=Ta();ng!==b?Ob={type:"function",name:"cast",args:{type:"expression-list",value:[yf,Gf]}}:(e=Ob,Ob=b)}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b;ob=Ob;if(ob===
b){var jc=e;var ge;var Vb=e;Vb=ge=H();if(Vb===b)if(Vb=e,96===u.charCodeAt(e)?(ge=hd,e++):(ge=b,0===ua&&g(Ia)),ge!==b){var he=[];if(kd.test(u.charAt(e))){var gc=u.charAt(e);e++}else gc=b,0===ua&&g(Pa);if(gc!==b)for(;gc!==b;)he.push(gc),kd.test(u.charAt(e))?(gc=u.charAt(e),e++):(gc=b,0===ua&&g(Pa));else he=b;he!==b?(96===u.charCodeAt(e)?(gc=hd,e++):(gc=b,0===ua&&g(Ia)),gc!==b?Vb=he.join(""):(e=Vb,Vb=b)):(e=Vb,Vb=b)}else e=Vb,Vb=b;var Hf=Vb;if(Hf!==b){xa();var og=Ga();if(og!==b){xa();var ie=d();ie===
b&&(ie=null);xa();var pg=Ta();pg!==b?jc={type:"function",name:Hf,args:ie?ie:{type:"expression-list",value:[]}}:(e=jc,jc=b)}else e=jc,jc=b}else e=jc,jc=b;ob=jc;if(ob===b){var ac;var Db=e;var ef=Ba();if(ef!==b){xa();var dd=p();if(dd!==b){xa();var ed=[];for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();var je=Oa();je!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(e=Db,Db=b)}else e=Db,Db=b}else e=Db,Db=b;if(Db===b)if(Db=e,ef=Ba(),ef!==b)if(xa(),dd=p(),dd!==b){xa();ed=[];
for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();je=La();if(je!==b){xa();var qg=Oa();qg!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:je.value}:(e=Db,Db=b)}else e=Db,Db=b}else e=Db,Db=b;else e=Db,Db=b;var ff=Db;if(ff===b){var bc;var Jb=e;var gf=Ba();if(gf!==b){xa();var fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();var ke=Oa();ke!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:null}:(e=Jb,Jb=b)}else e=Jb,Jb=b;if(Jb===b)if(Jb=e,gf=Ba(),gf!==b){xa();
fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();ke=La();if(ke!==b){xa();var rg=Oa();rg!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:ke.value}:(e=Jb,Jb=b)}else e=Jb,Jb=b}else e=Jb,Jb=b;ff=Jb}ob=ff;if(ob===b){var le;var me=e;var If=L();if(If!==b){var Jf=[];for(le=x();le!==b;)Jf.push(le),le=x();me=If+Jf.join("")}else e=me,me=b;var ne=me;if(ne!==b){var hf=ne;ne=/^CURRENT_DATE$/i.test(hf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hf)?{type:"current-time",mode:"timestamp"}:
{type:"column-reference",table:"",column:hf}}ob=ne;if(ob===b&&(ob=y(),ob===b)){ob=e;var sg=Ga();if(sg!==b){xa();var jf=p();if(jf!==b){xa();var tg=Ta();tg!==b?(jf.paren=!0,ob=jf):(e=ob,ob=b)}else e=ob,ob=b}else e=ob,ob=b}}}}}}}}}return ob}function H(){var v;var D=e;var Z=L();if(Z!==b){D=[];for(v=I();v!==b;)D.push(v),v=I();D=Z+D.join("")}else e=D,D=b;return D}function L(){if(Fd.test(u.charAt(e))){var v=u.charAt(e);e++}else v=b,0===ua&&g(Md);return v}function I(){if(Gd.test(u.charAt(e))){var v=u.charAt(e);
e++}else v=b,0===ua&&g(Uc);return v}function x(){if(Hd.test(u.charAt(e))){var v=u.charAt(e);e++}else v=b,0===ua&&g(Nd);return v}function y(){var v=e;if(64===u.charCodeAt(e)){var D=fb;e++}else D=b,0===ua&&g(Vc);if(D!==b){var Z=H();Z!==b?v=D=[D,Z]:(e=v,v=b)}else e=v,v=b;v!==b&&(v={type:"parameter",value:v[1]});return v}function l(){var v=e;if(u.substr(e,7).toLowerCase()===xd){var D=u.substr(e,7);e+=7}else D=b,0===ua&&g(se);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="LEADING":
(e=v,v=b)}else e=v,v=b;v===b&&(v=e,u.substr(e,8).toLowerCase()===yd?(D=u.substr(e,8),e+=8):(D=b,0===ua&&g(eb)),D!==b?(D=e,ua++,Z=I(),ua--,Z===b?D=void 0:(e=D,D=b),D!==b?v="TRAILING":(e=v,v=b)):(e=v,v=b),v===b&&(v=e,u.substr(e,4).toLowerCase()===zd?(D=u.substr(e,4),e+=4):(D=b,0===ua&&g(wb)),D!==b?(D=e,ua++,Z=I(),ua--,Z===b?D=void 0:(e=D,D=b),D!==b?v="BOTH":(e=v,v=b)):(e=v,v=b)));return v}function t(){var v=e;var D=e;var Z=W();if(Z!==b){xa();var za=Ga();if(za!==b)if(xa(),za=ta(),za!==b){xa();var Ma=
Ta();Ma!==b?D={type:"interval-period",period:Z.value,precision:za,secondary:null}:(e=D,D=b)}else e=D,D=b;else e=D,D=b}else e=D,D=b;D===b&&(D=e,Z=W(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),D=Z);if(D!==b)if(xa(),Z=e,u.substr(e,2).toLowerCase()===nc?(za=u.substr(e,2),e+=2):(za=b,0===ua&&g(Nc)),za!==b?(za=e,ua++,Ma=I(),ua--,Ma===b?za=void 0:(e=za,za=b),za!==b?Z="TO":(e=Z,Z=b)):(e=Z,Z=b),Z!==b){xa();Z=e;za=W();za!==b&&(za={type:"interval-period",period:za.value,
precision:null,secondary:null});Z=za;if(Z===b){Z=e;za=wa();if(za!==b)if(xa(),za=Ga(),za!==b)if(xa(),za=ta(),za!==b)if(xa(),Ma=Sa(),Ma!==b)if(xa(),Ma=ja(),Ma!==b){xa();var ab=Ta();ab!==b?Z={type:"interval-period",period:"second",precision:za,secondary:Ma}:(e=Z,Z=b)}else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;Z===b&&(Z=e,za=wa(),za!==b?(xa(),za=Ga(),za!==b?(xa(),za=ta(),za!==b?(xa(),Ma=Ta(),Ma!==b?Z={type:"interval-period",period:"second",precision:za,secondary:null}:(e=Z,Z=b)):
(e=Z,Z=b)):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,za=wa(),za!==b&&(za={type:"interval-period",period:"second",precision:null,secondary:null}),Z=za))}Z!==b?v={type:"interval-qualifier",start:D,end:Z}:(e=v,v=b)}else e=v,v=b;else e=v,v=b;v===b&&(v=e,Z=W(),Z!==b?(xa(),D=Ga(),D!==b?(xa(),D=ja(),D!==b?(xa(),za=Ta(),za!==b?v={type:"interval-period",period:Z.value,precision:D,secondary:null}:(e=v,v=b)):(e=v,v=b)):(e=v,v=b)):(e=v,v=b),v===b&&(v=e,Z=W(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,
secondary:null}),v=Z,v===b&&(v=e,Z=wa(),Z!==b?(xa(),D=Ga(),D!==b?(xa(),D=ta(),D!==b?(xa(),za=Sa(),za!==b?(xa(),Z=ja(),Z!==b?(xa(),za=Ta(),za!==b?v={type:"interval-period",period:"second",precision:D,secondary:Z}:(e=v,v=b)):(e=v,v=b)):(e=v,v=b)):(e=v,v=b)):(e=v,v=b)):(e=v,v=b),v===b&&(v=e,Z=wa(),Z!==b?(xa(),D=Ga(),D!==b?(xa(),D=ja(),D!==b?(xa(),za=Ta(),za!==b?v={type:"interval-period",period:"second",precision:D,secondary:null}:(e=v,v=b)):(e=v,v=b)):(e=v,v=b)):(e=v,v=b),v===b&&(v=e,Z=wa(),Z!==b&&(Z=
{type:"interval-period",period:"second",precision:null,secondary:null}),v=Z)))));return v}function W(){var v=e;v=U();v!==b&&(v={type:"string",value:"day"});v===b&&(v=e,v=ca(),v!==b&&(v={type:"string",value:"hour"}),v===b&&(v=e,v=pa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=e,v=ra(),v!==b&&(v={type:"string",value:"month"}),v===b&&(v=e,v=na(),v!==b&&(v={type:"string",value:"year"})))));return v}function ja(){var v=Ua();v!==b&&(v=parseFloat(v));return v}function ta(){var v=Ua();v!==b&&(v=
parseFloat(v));return v}function ya(){var v=Da();v===b&&(v=y());return v}function Da(){var v=e;if(39===u.charCodeAt(e)){var D=Ab;e++}else D=b,0===ua&&g(Od);D===b&&(u.substr(e,2)===Bb?(D=Bb,e+=2):(D=b,0===ua&&g(Ae)));if(D!==b){D=[];var Z=e;u.substr(e,2)===Za?(Z=Za,e+=2):(Z=b,0===ua&&g(Wc));Z!==b&&(Z="'");Z===b&&(Sc.test(u.charAt(e))?(Z=u.charAt(e),e++):(Z=b,0===ua&&g(Pd)));for(;Z!==b;)D.push(Z),Z=e,u.substr(e,2)===Za?(Z=Za,e+=2):(Z=b,0===ua&&g(Wc)),Z!==b&&(Z="'"),Z===b&&(Sc.test(u.charAt(e))?(Z=u.charAt(e),
e++):(Z=b,0===ua&&g(Pd)));39===u.charCodeAt(e)?(Z=Ab,e++):(Z=b,0===ua&&g(Od));Z!==b?v={type:"string",value:D.join("")}:(e=v,v=b)}else e=v,v=b;return v}function Ha(){var v=e;if(Ka()!==b){xa();var D=p();if(D!==b){xa();var Z=Ra();Z!==b?(xa(),Z=p(),Z!==b?v={type:"when-clause",operand:D,value:Z}:(e=v,v=b)):(e=v,v=b)}else e=v,v=b}else e=v,v=b;return v}function Fa(){var v=e;if(Ka()!==b){xa();var D=p();if(D!==b){xa();var Z=Ra();Z!==b?(xa(),Z=p(),Z!==b?v={type:"when-clause",operand:D,value:Z}:(e=v,v=b)):(e=
v,v=b)}else e=v,v=b}else e=v,v=b;return v}function La(){var v=e;var D=e;if(u.substr(e,4).toLowerCase()===ze){var Z=u.substr(e,4);e+=4}else Z=b,0===ua&&g(M);if(Z!==b){Z=e;ua++;var za=I();ua--;za===b?Z=void 0:(e=Z,Z=b);Z!==b?D="ELSE":(e=D,D=b)}else e=D,D=b;D!==b?(xa(),D=p(),D!==b?v={type:"else-clause",value:D}:(e=v,v=b)):(e=v,v=b);return v}function Ja(){var v=Ua();if(v===b){v=e;if(45===u.charCodeAt(e)){var D=Xb;e++}else D=b,0===ua&&g(Tc);D===b&&(43===u.charCodeAt(e)?(D=Zb,e++):(D=b,0===ua&&g(Kc)));
if(D!==b){var Z=Ua();Z!==b?v=D[0]+Z:(e=v,v=b)}else e=v,v=b}return v}function Na(){var v=e;if(46===u.charCodeAt(e)){var D=hc;e++}else D=b,0===ua&&g(Be);D!==b?(v=Ua(),v===b&&(v=null),v="."+(null!=v?v:"")):(e=v,v=b);return v}function Ya(){var v;var D=v=e;if(Jd.test(u.charAt(e))){var Z=u.charAt(e);e++}else Z=b,0===ua&&g(re);Z!==b?(Kd.test(u.charAt(e))?(D=u.charAt(e),e++):(D=b,0===ua&&g(De)),D===b&&(D=null),D="e"+(null===D?"":D)):(e=D,D=b);D!==b?(Z=Ua(),Z!==b?v=D+Z:(e=v,v=b)):(e=v,v=b);return v}function Ua(){var v=
[];var D=jb();if(D!==b)for(;D!==b;)v.push(D),D=jb();else v=b;v!==b&&(v=v.join(""));return v}function jb(){if(Id.test(u.charAt(e))){var v=u.charAt(e);e++}else v=b,0===ua&&g(Ce);return v}function kb(){var v=e;if(u.substr(e,2).toLowerCase()===qa){var D=u.substr(e,2);e+=2}else D=b,0===ua&&g(He);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="IN":(e=v,v=b)}else e=v,v=b;return v}function mb(){var v=e;if(u.substr(e,2).toLowerCase()===Ca){var D=u.substr(e,2);e+=2}else D=b,0===ua&&g(Ie);
if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="IS":(e=v,v=b)}else e=v,v=b;return v}function c(){var v=e;if(u.substr(e,4).toLowerCase()===Ea){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Je);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="LIKE":(e=v,v=b)}else e=v,v=b;return v}function r(){var v=e;if(u.substr(e,3).toLowerCase()===Va){var D=u.substr(e,3);e+=3}else D=b,0===ua&&g(Qd);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="NOT":(e=v,v=
b)}else e=v,v=b;return v}function ea(){var v=e;if(u.substr(e,3).toLowerCase()===lb){var D=u.substr(e,3);e+=3}else D=b,0===ua&&g(Le);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="AND":(e=v,v=b)}else e=v,v=b;return v}function ka(){var v=e;if(u.substr(e,2).toLowerCase()===ib){var D=u.substr(e,2);e+=2}else D=b,0===ua&&g(Me);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="OR":(e=v,v=b)}else e=v,v=b;return v}function va(){var v=e;if(u.substr(e,7).toLowerCase()===
hb){var D=u.substr(e,7);e+=7}else D=b,0===ua&&g(Ne);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="BETWEEN":(e=v,v=b)}else e=v,v=b;return v}function B(){var v=e;if(u.substr(e,4).toLowerCase()===xb){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Oe);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="FROM":(e=v,v=b)}else e=v,v=b;return v}function N(){var v=e;if(u.substr(e,4).toLowerCase()===td){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Rd);if(D!==b){D=e;ua++;var Z=
I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="TRIM":(e=v,v=b)}else e=v,v=b;return v}function da(){var v=e;if(u.substr(e,9).toLowerCase()===vd){var D=u.substr(e,9);e+=9}else D=b,0===ua&&g(Te);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="TIMESTAMP":(e=v,v=b)}else e=v,v=b;return v}function X(){var v=e;if(u.substr(e,4).toLowerCase()===wd){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(cc);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="DATE":(e=v,v=b)}else e=v,v=b;
return v}function ia(){var v=e;if(u.substr(e,8).toLowerCase()===oc){var D=u.substr(e,8);e+=8}else D=b,0===ua&&g(Pc);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="INTERVAL":(e=v,v=b)}else e=v,v=b;return v}function na(){var v=e;if(u.substr(e,4).toLowerCase()===we){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Oc);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="YEAR":(e=v,v=b)}else e=v,v=b;return v}function ra(){var v=e;if(u.substr(e,5).toLowerCase()===pc){var D=
u.substr(e,5);e+=5}else D=b,0===ua&&g(qd);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="MONTH":(e=v,v=b)}else e=v,v=b;return v}function U(){var v=e;if(u.substr(e,3).toLowerCase()===Tb){var D=u.substr(e,3);e+=3}else D=b,0===ua&&g(Ue);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="DAY":(e=v,v=b)}else e=v,v=b;return v}function ca(){var v=e;if(u.substr(e,4).toLowerCase()===gd){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Ve);if(D!==b){D=e;ua++;var Z=I();ua--;
Z===b?D=void 0:(e=D,D=b);D!==b?v="HOUR":(e=v,v=b)}else e=v,v=b;return v}function pa(){var v=e;if(u.substr(e,6).toLowerCase()===Hc){var D=u.substr(e,6);e+=6}else D=b,0===ua&&g(pd);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="MINUTE":(e=v,v=b)}else e=v,v=b;return v}function wa(){var v=e;if(u.substr(e,6).toLowerCase()===Ic){var D=u.substr(e,6);e+=6}else D=b,0===ua&&g(We);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="SECOND":(e=v,v=b)}else e=v,v=b;return v}
function Ba(){var v=e;if(u.substr(e,4).toLowerCase()===Jc){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(Xe);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="CASE":(e=v,v=b)}else e=v,v=b;return v}function Oa(){var v=e;if(u.substr(e,3).toLowerCase()===qc){var D=u.substr(e,3);e+=3}else D=b,0===ua&&g($a);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="END":(e=v,v=b)}else e=v,v=b;return v}function Ka(){var v=e;if(u.substr(e,4).toLowerCase()===xe){var D=u.substr(e,
4);e+=4}else D=b,0===ua&&g(a);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="WHEN":(e=v,v=b)}else e=v,v=b;return v}function Ra(){var v=e;if(u.substr(e,4).toLowerCase()===ye){var D=u.substr(e,4);e+=4}else D=b,0===ua&&g(k);if(D!==b){D=e;ua++;var Z=I();ua--;Z===b?D=void 0:(e=D,D=b);D!==b?v="THEN":(e=v,v=b)}else e=v,v=b;return v}function Sa(){if(44===u.charCodeAt(e)){var v=rb;e++}else v=b,0===ua&&g(fa);return v}function Ga(){if(40===u.charCodeAt(e)){var v=Rc;e++}else v=b,0===ua&&
g(ma);return v}function Ta(){if(41===u.charCodeAt(e)){var v=Eb;e++}else v=b,0===ua&&g(sa);return v}function xa(){var v;var D=[];for(v=vb();v!==b;)D.push(v),v=vb();return D}function vb(){if(yb.test(u.charAt(e))){var v=u.charAt(e);e++}else v=b,0===ua&&g(Aa);return v}function ub(v,D,Z,za){v={type:"binary-expression",operator:v,left:D,right:Z};void 0!==za&&(v.escape=za);return v}function qb(v,D){for(var Z=0;Z<D.length;Z++)v=ub(D[Z][1],v,D[Z][3]);return v}m=void 0!==m?m:{};var b={},gb=m.grammarSource,
db={start:w},Gb=w,Pb="!",nb="\x3d",Wb="\x3e\x3d",oa="\x3e",Yb="\x3c\x3d",Sb="\x3c\x3e",zb="\x3c",Kb="!\x3d",Zb="+",Xb="-",kc="||",Hb="*",Rb="/",fb="@",Ab="'",Bb="N'",Za="''",hc=".",V="null",ha="true",Y="false",qa="in",Ca="is",Ea="like",Qa="escape",Va="not",lb="and",ib="or",hb="between",xb="from",Ib="for",rd="substring",sd="extract",td="trim",ud="position",vd="timestamp",wd="date",xd="leading",yd="trailing",zd="both",ve="cast",Ad="as",Bd="integer",Cd="smallint",Dd="float",ic="real",Qc="varchar",nc=
"to",oc="interval",we="year",pc="month",Tb="day",gd="hour",Hc="minute",Ic="second",Jc="case",qc="end",xe="when",ye="then",ze="else",rb=",",Rc="(",Eb=")",hd="`",Fd=/^[A-Za-z_\x80-\uFFFF]/,Gd=/^[A-Za-z0-9_]/,Hd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sc=/^[^']/,Id=/^[0-9]/,Jd=/^[eE]/,Kd=/^[+\-]/,yb=/^[ \t\n\r]/,kd=/^[^`]/,jd=n("!",!1),id=n("\x3d",!1),md=n("\x3e\x3d",!1),ld=n("\x3e",!1),oe=n("\x3c\x3d",!1),Ed=n("\x3c\x3e",!1),qe=n("\x3c",!1),pe=n("!\x3d",!1),Kc=n("+",!1),Tc=n("-",!1),Fb=n("||",!1),Qb=n("*",!1),
Ld=n("/",!1),Md=A([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Uc=A([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=A([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Vc=n("@",!1),Od=n("'",!1),Ae=n("N'",!1),Wc=n("''",!1),Pd=A(["'"],!0,!1),Be=n(".",!1),Ce=A([["0","9"]],!1,!1),re=A(["e","E"],!1,!1),De=A(["+","-"],!1,!1),Ee=n("NULL",!0),Fe=n("TRUE",!0),Ge=n("FALSE",!0),He=n("IN",!0),Ie=n("IS",!0),Je=n("LIKE",!0),Ke=n("ESCAPE",!0),Qd=n("NOT",!0),Le=n("AND",!0),Me=n("OR",!0),Ne=
n("BETWEEN",!0),Oe=n("FROM",!0),Pe=n("FOR",!0),Qe=n("SUBSTRING",!0),Re=n("EXTRACT",!0),Rd=n("TRIM",!0),Se=n("POSITION",!0),Te=n("TIMESTAMP",!0),cc=n("DATE",!0),se=n("LEADING",!0),eb=n("TRAILING",!0),wb=n("BOTH",!0),lc=n("CAST",!0),Lc=n("AS",!0),nd=n("INTEGER",!0),te=n("SMALLINT",!0),od=n("FLOAT",!0),Mc=n("REAL",!0),ue=n("VARCHAR",!0),Nc=n("TO",!0),Pc=n("INTERVAL",!0),Oc=n("YEAR",!0),qd=n("MONTH",!0),Ue=n("DAY",!0),Ve=n("HOUR",!0),pd=n("MINUTE",!0),We=n("SECOND",!0),Xe=n("CASE",!0),$a=n("END",!0),
a=n("WHEN",!0),k=n("THEN",!0),M=n("ELSE",!0),fa=n(",",!1),ma=n("(",!1),sa=n(")",!1),Aa=A([" ","\t","\n","\r"],!1,!1),Ia=n("`",!1),Pa=A(["`"],!0,!1),e=0,Wa=[{line:1,column:1}],Xa=0,bb=[],ua=0;if("startRule"in m){if(!(m.startRule in db))throw Error("Can't start parsing from rule \""+m.startRule+'".');Gb=db[m.startRule]}var $b=Gb();if($b!==b&&e===u.length)return $b;$b!==b&&e<u.length&&g({type:"end"});throw function(v,D,Z){return new S(S.buildMessage(v,D),v,D,Z)}(bb,Xa<u.length?u.charAt(Xa):null,Xa<u.length?
J(Xa,Xa+1):J(Xa,Xa));}}})})({get exports(){return la},set exports(P){la=P}});let ba=function(){function P(){}P.parse=function(S){return la.parse(S)};return P}();h.WhereGrammar=ba;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(h){h.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};h.getDefaultExportFromCjs=
function(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(h){h.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,
maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J,g,w){function d(T,aa,C,q){const z=q.x-C.x;q=q.y-C.y;aa=Math.min(1,Math.max(0,((aa.x-C.x)*z+(aa.y-C.y)*q)/(z*z+q*q)));T.x=C.x+z*aa;T.y=C.y+q*aa}function p(T,aa){return T?aa?4:3:aa?3:2}let G=function(){function T(C,q,z){this.items=C;this.query=q;this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.fieldsIndex=z.fieldsIndex;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.featureAdapter=z.featureAdapter}var aa=T.prototype;
aa.createQueryResponseForCount=function(){const C=new m(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return C.countDistinctValues(this.items);const {groupByFieldsForStatistics:q,having:z,outStatistics:E}=this.query;if(!q?.length)return 1;const O=new Map,F=new Map,H=new Set;for(const x of E){var {statisticType:L}=x;L="exceedslimit"!==L?x.onStatisticField:void 0;if(!F.has(L)){var I=[];for(const y of q){const l=this._getAttributeValues(C,y,O);I.push(l)}F.set(L,this._calculateUniqueValues(I,
C.returnDistinctValues))}L=F.get(L);for(const y in L){const {data:l,items:t}=L[y];I=l.join(",");z&&!C.validateItems(t,z)||H.add(I)}}return H.size};aa.createQueryResponse=function(){var C=la._asyncToGenerator(function*(){let q;q=this.query.outStatistics?this.query.outStatistics.some(z=>"exceedslimit"===z.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const z=
this.query.geometry;u.isValid(this.query.outSR)&&!u.equals(z.spatialReference,this.query.outSR)?q.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...n.project(z,z.spatialReference,this.query.outSR)}):q.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...z})}return q});return function(){return C.apply(this,arguments)}}();aa.createSnappingResponse=function(C,q){const z=this.featureAdapter,E=p(this.hasZ,this.hasM),{point:O,mode:F}=C,H="number"===typeof C.distance?
C.distance:C.distance.x,L="number"===typeof C.distance?C.distance:C.distance.y,I={candidates:[]},x="esriGeometryPolygon"===this.geometryType;q=this._getPointCreator(F,this.spatialReference,q);const y=new Q(null,0),l=new Q(null,0),t={x:0,y:0,z:0};for(const Fa of this.items){var W=z.getGeometry(Fa);if(ba.isNone(W))continue;const {coords:La,lengths:Ja}=W;y.coords=La;l.coords=La;if(C.types&f.SnappingTypes.EDGE){W=0;for(var ja=0;ja<Ja.length;ja++){var ta=Ja[ja];for(var ya=0;ya<ta;ya++,W+=E){var Da=y;Da.coordsIndex=
W;if(ya!==ta-1){const Na=l;Na.coordsIndex=W+E;const Ya=t;d(t,O,Da,Na);var Ha=(O.x-Ya.x)/H;const Ua=(O.y-Ya.y)/L;Ha=Ha*Ha+Ua*Ua;1>=Ha&&I.candidates.push(A.makeEdgeCandidate(z.getObjectId(Fa),q(Ya),Math.sqrt(Ha),q(Da),q(Na)))}}}}if(C.types&f.SnappingTypes.VERTEX)for(W=x?La.length-E:La.length,ja=0;ja<W;ja+=E)ta=y,ta.coordsIndex=ja,ya=(O.x-ta.x)/H,Da=(O.y-ta.y)/L,ya=ya*ya+Da*Da,1>=ya&&I.candidates.push(A.makeVertexCandidate(z.getObjectId(Fa),q(ta),Math.sqrt(ya)))}I.candidates.sort((Fa,La)=>Fa.distance-
La.distance);return I};aa._getPointCreator=function(C,q,z){const E=ba.isSome(z)&&!u.equals(q,z)?F=>n.project(F,q,z):F=>F,{hasZ:O}=this;return"3d"===C?O?({x:F,y:H,z:L})=>E({x:F,y:H,z:L}):({x:F,y:H})=>E({x:F,y:H,z:0}):({x:F,y:H})=>E({x:F,y:H})};aa.createSummaryStatisticsResponse=function(){var C=la._asyncToGenerator(function*(q){const {field:z,valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,minValue:L,maxValue:I,scale:x}=q;q=this.fieldsIndex.isDateField(z);var y=yield this._getDataValues({field:z,
valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,scale:x});const l=g.isNullCountSupported({normalizationType:F,normalizationField:O,minValue:L,maxValue:I}),t=this.fieldsIndex.get(z),W={value:.5,fieldType:t?.type};y=J.isStringField(t)?g.calculateStringStatistics({values:y,supportsNullCount:l,percentileParams:W}):g.calculateStatistics({values:y,minValue:L,maxValue:I,useSampleStdDev:!F,supportsNullCount:l,percentileParams:W});return g.processSummaryStatisticsResult(y,q)});
return function(q){return C.apply(this,arguments)}}();aa.createUniqueValuesResponse=function(){var C=la._asyncToGenerator(function*(q){const {field:z,valueExpression:E,domains:O,returnAllCodedValues:F,scale:H}=q;var L=yield this._getDataValues({field:z,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,valueExpression:E,scale:H});L=g.calculateUniqueValuesCount(L);return g.createUVResult(L,O,F,q.fieldDelimiter)});return function(q){return C.apply(this,arguments)}}();aa.createClassBreaksResponse=
function(){var C=la._asyncToGenerator(function*(q){const {field:z,valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,classificationMethod:L,standardDeviationInterval:I,minValue:x,maxValue:y,numClasses:l,scale:t}=q;q=yield this._getDataValues({field:z,valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,scale:t});q=g.calculateClassBreaks(q,{field:z,normalizationField:O,normalizationType:F,normalizationTotal:H,classificationMethod:L,standardDeviationInterval:I,
minValue:x,maxValue:y,numClasses:l});return g.resolveCBResult(q,L)});return function(q){return C.apply(this,arguments)}}();aa.createHistogramResponse=function(){var C=la._asyncToGenerator(function*(q){const {field:z,valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,classificationMethod:L,standardDeviationInterval:I,minValue:x,maxValue:y,numBins:l,scale:t}=q;q=yield this._getDataValues({field:z,valueExpression:E,normalizationField:O,normalizationType:F,normalizationTotal:H,
scale:t});return g.calculateHistogram(q,{field:z,normalizationField:O,normalizationType:F,normalizationTotal:H,classificationMethod:L,standardDeviationInterval:I,minValue:x,maxValue:y,numBins:l})});return function(q){return C.apply(this,arguments)}}();aa._sortFeatures=function(C,q,z){if(1<C.length&&q&&q.length)for(const E of q.reverse()){q=E.split(" ");const O=q[0],F=this.fieldsIndex.get(O);q=q[1]?"desc"===q[1].toLowerCase():!1;const H=g.getAttributeComparator(F?.type,q);C.sort((L,I)=>{L=z(L,O,F);
I=z(I,O,F);return H(L,I)})}};aa._createFeatureQueryResponse=function(C){const q=this.items,{geometryType:z,hasM:E,hasZ:O,objectIdField:F,spatialReference:H}=this,{outFields:L,outSR:I,quantizationParameters:x,resultRecordCount:y,resultOffset:l,returnZ:t,returnM:W}=C,ja=null!=y?q.length>(l||0)+y:!1,ta=L&&(L.includes("*")?[...this.fieldsIndex.fields]:L.map(ya=>this.fieldsIndex.get(ya)));return{exceededTransferLimit:ja,features:this._createFeatures(C,q),fields:ta,geometryType:z,hasM:E&&W,hasZ:O&&t,objectIdFieldName:F,
spatialReference:R.cleanFromGeometryEngine(I?I:H),transform:x&&K.toQuantizationTransform(x)||null}};aa._createFeatures=function(C,q){const z=new m(C,this.featureAdapter,this.fieldsIndex),{hasM:E,hasZ:O}=this,{orderByFields:F,quantizationParameters:H,returnGeometry:L,returnCentroid:I,maxAllowableOffset:x,resultOffset:y,resultRecordCount:l,returnZ:t=!1,returnM:W=!1}=C,ja=O&&t,ta=E&&W;C=[];var ya=0;q=[...q];this._sortFeatures(q,F,(Fa,La,Ja)=>z.getFieldValue(Fa,La,Ja));if(L||I){var Da=K.toQuantizationTransform(H)??
void 0;if(L&&!I)for(var Ha of q)C[ya++]={attributes:z.getAttributes(Ha),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ha),x,Da,ja,ta)};else if(!L&&I)for(const Fa of q)C[ya++]={attributes:z.getAttributes(Fa),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Da)};else for(const Fa of q)C[ya++]={attributes:z.getAttributes(Fa),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Da),geometry:R.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Fa),x,Da,ja,ta)}}else for(Da of q)(Ha=z.getAttributes(Da))&&(C[ya++]={attributes:Ha});ya=y||0;null!=l&&(C=C.slice(ya,Math.min(C.length,ya+l)));return C};aa._createExceedsLimitQueryResponse=function(C){var q=!1;let z=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY;q=Number.POSITIVE_INFINITY;for(const O of C.outStatistics??[])if("exceedslimit"===O.statisticType){z=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;E=null!=O.maxRecordCount?
O.maxRecordCount:Number.POSITIVE_INFINITY;q=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)q=this.items.length>z;else if(this.items.length>E)q=!0;else{C=p(this.hasZ,this.hasM);const O=this.featureAdapter;q=this.items.reduce((F,H)=>{H=O.getGeometry(H);return F+(ba.isSome(H)&&H.coords.length||0)},0)/C>q}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(q)}}]}};aa._createStatisticsQueryResponse=function(){var C=la._asyncToGenerator(function*(q){var z={attributes:{}};const E=[],O=new Map,F=new Map,H=new Map,L=new Map,I=new m(q,this.featureAdapter,this.fieldsIndex);var x=q.outStatistics;const {groupByFieldsForStatistics:y,having:l,orderByFields:t}=q;q=y&&y.length;const W=!!q,ja=W?y[0]:null,ta=W&&!this.fieldsIndex.get(ja);for(const La of x??[]){const {outStatisticFieldName:Ja,statisticType:Na}=La;x=La;var ya=
"exceedslimit"!==Na?La.onStatisticField:void 0;const Ya="percentile_disc"===Na||"percentile_cont"===Na,Ua="EnvelopeAggregate"===Na||"CentroidAggregate"===Na||"ConvexHullAggregate"===Na,jb=W&&1===q&&(ya===ja||ta)&&"count"===Na;if(W){if(!H.has(ya)){var Da=[];for(const kb of y){var Ha=this._getAttributeValues(I,kb,O);Da.push(Ha)}H.set(ya,this._calculateUniqueValues(Da,Ua?!1:I.returnDistinctValues))}Da=H.get(ya);for(const kb in Da){const {count:mb,data:c,items:r,itemPositions:ea}=Da[kb];Ha=c.join(",");
if(!l||I.validateItems(r,l)){const ka=L.get(Ha)||{attributes:{}};if(Ua){ka.aggregateGeometries||(ka.aggregateGeometries={});const {aggregateGeometries:B,outStatisticFieldName:N}=yield this._getAggregateGeometry(x,r);ka.aggregateGeometries[N]=B}else{var Fa=null;if(jb)Fa=mb;else{const B=this._getAttributeValues(I,ya,O);Fa=ea.map(N=>B[N]);Fa=Ya&&"statisticParameters"in x?this._getPercentileValue(x,Fa):this._getStatisticValue(x,Fa,null,I.returnDistinctValues)}ka.attributes[Ja]=Fa}let va=0;y.forEach((B,
N)=>ka.attributes[this.fieldsIndex.get(B)?B:`EXPR_${++va}`]=c[N]);L.set(Ha,ka)}}}else if(Ua){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:kb,outStatisticFieldName:mb}=yield this._getAggregateGeometry(x,this.items);z.aggregateGeometries[mb]=kb}else ya=this._getAttributeValues(I,ya,O),z.attributes[Ja]=Ya&&"statisticParameters"in x?this._getPercentileValue(x,ya):this._getStatisticValue(x,ya,F,I.returnDistinctValues);E.push({name:Ja,alias:Ja,type:"esriFieldTypeDouble"})}z=
W?Array.from(L.values()):[z];this._sortFeatures(z,t,(La,Ja)=>La.attributes[Ja]);return{fields:E,features:z}});return function(q){return C.apply(this,arguments)}}();aa._getAggregateGeometry=function(){var C=la._asyncToGenerator(function*(q,z){var E=yield new Promise((t,W)=>h(["../../../geometry/geometryEngineJSON"],t,W));const {statisticType:O,outStatisticFieldName:F}=q,{featureAdapter:H,spatialReference:L,geometryType:I,hasZ:x,hasM:y}=this;z=z.map(t=>R.getGeometry(I,x,y,H.getGeometry(t)));const l=
E.convexHull(L,z,!0)[0];q={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===O?(E=l?S.getPolygonExtent(l):S.getGeometryExtent(E.union(L,z)),q.aggregateGeometries={...E,spatialReference:L},q.outStatisticFieldName=F||"extent"):"CentroidAggregate"===O?(E=l?P.polygonCentroid(l):P.extentCentroid(S.getGeometryExtent(E.union(L,z))),q.aggregateGeometries={x:E[0],y:E[1],spatialReference:L},q.outStatisticFieldName=F||"centroid"):"ConvexHullAggregate"===O&&(q.aggregateGeometries=l,q.outStatisticFieldName=
F||"convexHull");return q});return function(q,z){return C.apply(this,arguments)}}();aa._getStatisticValue=function(C,q,z,E){const {onStatisticField:O,statisticType:F}=C;C=null;C=z?.has(O)?z.get(O):J.isStringField(this.fieldsIndex.get(O))?g.calculateStringStatistics({values:q,returnDistinct:E}):g.calculateStatistics({values:E?[...(new Set(q))]:q,minValue:null,maxValue:null,useSampleStdDev:!0});z&&z.set(O,C);return C["var"===F?"variance":F]};aa._getPercentileValue=function(C,q){const {onStatisticField:z,
statisticParameters:E,statisticType:O}=C,{value:F,orderBy:H}=E;C=this.fieldsIndex.get(z);return g.calculatePercentile(q,{value:F,orderBy:H,fieldType:C?.type,isDiscrete:"percentile_disc"===O})};aa._getAttributeValues=function(C,q,z){if(z.has(q))return z.get(q);const E=this.fieldsIndex.get(q),O=this.items.map(F=>C.getFieldValue(F,q,E));z.set(q,O);return O};aa._getAttributeDataValues=function(C,q){return this.items.map(z=>C.getDataValue(z,{field:q.field,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,
normalizationField:q.normalizationField,normalizationType:q.normalizationType,normalizationTotal:q.normalizationTotal}))};aa._getAttributeExpressionValues=function(){var C=la._asyncToGenerator(function*(q,z,E){const {arcadeUtils:O}=yield w.loadArcade();z=O.createFunction(z);E=E&&O.getViewInfo(E);return q.getExpressionValues(this.items,z,E,O)});return function(q,z,E){return C.apply(this,arguments)}}();aa._calculateUniqueValues=function(C,q){const z={},E=this.items,O=E.length;for(let F=0;F<O;F++){const H=
E[F],L=[];for(const x of C)L.push(x[F]);const I=L.join(",");null==z[I]?z[I]={count:1,data:L,items:[H],itemPositions:[F]}:(q||z[I].count++,z[I].items.push(H),z[I].itemPositions.push(F))}return z};aa._getDataValues=function(){var C=la._asyncToGenerator(function*(q){const z=new m(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:E,field:O,normalizationField:F,normalizationType:H,normalizationTotal:L,scale:I}=q,x=E?{viewingMode:"map",scale:I,spatialReference:this.query.outSR||this.spatialReference}:
null;return E?this._getAttributeExpressionValues(z,E,x):this._getAttributeDataValues(z,{field:O,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,normalizationField:F,normalizationType:H,normalizationTotal:L})});return function(q){return C.apply(this,arguments)}}();la._createClass(T,[{key:"size",get:function(){return this.items.length}}]);return T}();f.SnappingTypes=void 0;(function(T){T[T.NONE=0]="NONE";T[T.EDGE=1]="EDGE";T[T.VERTEX=2]="VERTEX"})(f.SnappingTypes||(f.SnappingTypes={}));
let Q=function(){function T(aa,C){this.coords=aa;this.coordsIndex=C}la._createClass(T,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return T}();f.QueryEngineResult=G;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(h,f,la){function ba({scale:F,
translate:H},L){return Math.round((L-H[0])/F[0])}function P({scale:F,translate:H},L){return Math.round((H[1]-L)/F[1])}function S(F,H,L){const I=[];let x,y,l,t;for(let W=0;W<L.length;W++){const ja=L[W];if(0<W){if(l=ba(F,ja[0]),t=P(F,ja[1]),l!==x||t!==y)I.push(H(ja,l-x,t-y)),x=l,y=t}else x=ba(F,ja[0]),y=P(F,ja[1]),I.push(H(ja,x,y))}return 0<I.length?I:null}function K(F,H,L,I){return S(F,L?I?O:E:I?E:z,H)}function u(F,H,L,I){const x=[];L=L?I?O:E:I?E:z;for(I=0;I<H.length;I++){const y=S(F,L,H[I]);y&&3<=
y.length&&x.push(y)}return x.length?x:null}function m(F,H,L,I){const x=[];L=L?I?O:E:I?E:z;for(I=0;I<H.length;I++){const y=S(F,L,H[I]);y&&2<=y.length&&x.push(y)}return x.length?x:null}function n({scale:F,translate:H},L){return L*F[0]+H[0]}function A({scale:F,translate:H},L){return H[1]-L*F[1]}function R(F,H,L){const I=Array(L.length);if(!L.length)return I;const [x,y]=F.scale;let l=n(F,L[0][0]);F=A(F,L[0][1]);I[0]=H(L[0],l,F);for(let t=1;t<L.length;t++){const W=L[t];l+=W[0]*x;F-=W[1]*y;I[t]=H(W,l,F)}return I}
function J(F,H,L){const I=Array(L.length);for(let x=0;x<L.length;x++)I[x]=R(F,H,L[x]);return I}function g(F,H,L,I){return R(F,L?I?O:E:I?E:z,H)}function w(F,H,L,I){return J(F,L?I?O:E:I?E:z,H)}function d(F,H,L,I){return J(F,L?I?O:E:I?E:z,H)}function p(F,H,L){let [I,x]=L[0],y=Math.min(I,H[0]),l=Math.min(x,H[1]),t=Math.max(I,H[2]);H=Math.max(x,H[3]);for(let W=1;W<L.length;W++){const [ja,ta]=L[W];I+=ja;x+=ta;0>ja&&(y=Math.min(y,I));0<ja&&(t=Math.max(t,I));0>ta?l=Math.min(l,x):0<ta&&(H=Math.max(H,x))}F[0]=
y;F[1]=l;F[2]=t;F[3]=H;return F}function G(F,H){if(!H.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;for(let L=0;L<H.length;L++)p(F,F,H[L]);return F}function Q(F,H,L,I,x){H.xmin=ba(F,L.xmin);H.ymin=P(F,L.ymin);H.xmax=ba(F,L.xmax);H.ymax=P(F,L.ymax);H!==L&&(I&&(H.zmin=L.zmin,H.zmax=L.zmax),x&&(H.mmin=L.mmin,H.mmax=L.mmax));return H}function T(F,H,L,I,x){H.points=K(F,L.points,I,x)??[];return H}function aa(F,H,L,I,x){H.x=ba(F,L.x);H.y=P(F,L.y);H!==L&&(I&&(H.z=
L.z),x&&(H.m=L.m));return H}function C(F,H,L,I,x){F=u(F,L.rings,I,x);if(!F)return null;H.rings=F;return H}function q(F,H,L,I,x){F=m(F,L.paths,I,x);if(!F)return null;H.paths=F;return H}const z=(F,H,L)=>[H,L],E=(F,H,L)=>[H,L,F[2]],O=(F,H,L)=>[H,L,F[2],F[3]];h.equals=function(F,H){if(F===H||null==F&&null==H)return!0;if(null==F||null==H)return!1;let L,I,x,y;F&&"upperLeft"===F.originPosition?(L=F.translate[0],I=F.translate[1],F=F.scale[0]):(L=f.isSome(F.extent)?F.extent.xmin:0,I=f.isSome(F.extent)?F.extent.ymax:
0,F=F.tolerance);H&&"upperLeft"===H.originPosition?(x=H.translate[0],y=H.translate[1],H=H.scale[0]):(x=f.isSome(H.extent)?H.extent.xmin:0,y=f.isSome(H.extent)?H.extent.ymax:0,H=H.tolerance);return L===x&&I===y&&F===H};h.getQuantizedBoundsCoordsArray=p;h.getQuantizedBoundsCoordsArrayArray=G;h.getQuantizedBoundsPaths=function(F){return G([0,0,0,0],F)};h.getQuantizedBoundsPoints=function(F){const H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return p(H,H,F)};h.getQuantizedBoundsRings=function(F){return G([0,0,0,0],F)};h.quantizeBounds=function(F,H,L){H[0]=ba(F,L[0]);H[3]=P(F,L[1]);H[2]=ba(F,L[2]);H[1]=P(F,L[3]);return H};h.quantizeExtent=Q;h.quantizeGeometry=function(F,H){return F&&H?la.isPoint(H)?aa(F,{},H,!1,!1):la.isPolyline(H)?q(F,{},H,!1,!1):la.isPolygon(H)?C(F,{},H,!1,!1):la.isMultipoint(H)?T(F,{},H,!1,!1):la.isExtent(H)?Q(F,{},H,!1,!1):null:null};h.quantizeMultipoint=T;h.quantizePaths=m;h.quantizePoint=aa;h.quantizePoints=K;h.quantizePolygon=
C;h.quantizePolyline=q;h.quantizeRings=u;h.quantizeX=ba;h.quantizeY=P;h.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":F.originPosition,scale:F.tolerance?[F.tolerance,F.tolerance]:[1,1],translate:f.isSome(F.extent)?[F.extent.xmin,F.extent.ymax]:[0,0]}:null};h.unquantizeBounds=function(F,H,L){return L?(H[0]=n(F,L[0]),H[1]=A(F,L[3]),H[2]=n(F,L[2]),H[3]=A(F,L[1]),H):[n(F,H[0]),A(F,H[3]),n(F,H[2]),A(F,
H[1])]};h.unquantizeCoordsArray=R;h.unquantizeCoordsArrayArray=J;h.unquantizeExtent=function(F,H,L,I,x){H.xmin=n(F,L.xmin);H.ymin=A(F,L.ymin);H.xmax=n(F,L.xmax);H.ymax=A(F,L.ymax);H!==L&&(I&&(H.zmin=L.zmin,H.zmax=L.zmax),x&&(H.mmin=L.mmin,H.mmax=L.mmax));return H};h.unquantizeMultipoint=function(F,H,L,I,x){f.isSome(L)&&(H.points=g(F,L.points,I,x));return H};h.unquantizePaths=w;h.unquantizePoint=function(F,H,L,I,x){if(f.isNone(L))return H;H.x=n(F,L.x);H.y=A(F,L.y);H!==L&&(I&&(H.z=L.z),x&&(H.m=L.m));
return H};h.unquantizePoints=g;h.unquantizePolygon=function(F,H,L,I,x){f.isSome(L)&&(H.rings=d(F,L.rings,I,x));return H};h.unquantizePolyline=function(F,H,L,I,x){f.isSome(L)&&(H.paths=w(F,L.paths,I,x));return H};h.unquantizeRings=d;h.unquantizeX=n;h.unquantizeY=A;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(h,f,la){return function(){function ba(S,
K,u){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=S.returnDistinctValues??!1;this.fieldsIndex=u;this.featureAdapter=K;if((K=S.outFields)&&!K.includes("*")){this.outFields=K;S=0;for(const n of K){var m=f.getExpressionFromFieldName(n);m=(K=this.fieldsIndex.get(m))?null:f.getWhereClause(m,u);K=K?K.name:f.getAliasFromFieldName(n)||`FIELD_EXP_${S++}`;this._fieldDataCache.set(n,{alias:K,clause:m})}}}var P=ba.prototype;P.countDistinctValues=function(S){if(!this.returnDistinctValues)return S.length;
S.forEach(K=>this.getAttributes(K));return this._returnDistinctMap.size};P.getAttributes=function(S){S=this._processAttributesForOutFields(S);return this._processAttributesForDistinctValues(S)};P.getFieldValue=function(S,K,u){const m=u?u.name:K;let n=null;this._fieldDataCache.has(m)?n=this._fieldDataCache.get(m)?.clause:u||(n=f.getWhereClause(K,this.fieldsIndex),this._fieldDataCache.set(m,{alias:m,clause:n}));return u?this.featureAdapter.getAttribute(S,m):n?.calculateValue(S,this.featureAdapter)};
P.getDataValue=function(S,K){const u=K.normalizationType,m=K.normalizationTotal;let n=K.field&&this.getFieldValue(S,K.field,this.fieldsIndex.get(K.field));K.field2&&(n=`${la.processNullValue(n)}${K.fieldDelimiter}${la.processNullValue(this.getFieldValue(S,K.field2,this.fieldsIndex.get(K.field2)))}`,K.field3&&(n=`${n}${K.fieldDelimiter}${la.processNullValue(this.getFieldValue(S,K.field3,this.fieldsIndex.get(K.field3)))}`));u&&Number.isFinite(n)&&(S="field"===u&&K.normalizationField?this.getFieldValue(S,
K.normalizationField,this.fieldsIndex.get(K.normalizationField)):null,n=la.getNormalizedValue(n,u,S,m));return n};P.getExpressionValue=function(S,K,u,m){S={attributes:this.featureAdapter.getAttributes(S),layer:{fields:this.fieldsIndex.fields}};u=m.createExecContext(S,u);return m.executeFunction(K,u)};P.getExpressionValues=function(S,K,u,m){const n={fields:this.fieldsIndex.fields};return S.map(A=>{A={attributes:this.featureAdapter.getAttributes(A),layer:n};A=m.createExecContext(A,u);return m.executeFunction(K,
A)})};P.validateItem=function(S,K){this._fieldDataCache.has(K)||this._fieldDataCache.set(K,{alias:K,clause:f.getWhereClause(K,this.fieldsIndex)});return this._fieldDataCache.get(K)?.clause?.testFeature(S,this.featureAdapter)??!1};P.validateItems=function(S,K){this._fieldDataCache.has(K)||this._fieldDataCache.set(K,{alias:K,clause:f.getWhereClause(K,this.fieldsIndex)});return this._fieldDataCache.get(K)?.clause?.testSet(S,this.featureAdapter)??!1};P._processAttributesForOutFields=function(S){const K=
this.outFields;if(!K||!K.length)return this.featureAdapter.getAttributes(S);const u={};for(const m of K){const {alias:n,clause:A}=this._fieldDataCache.get(m);u[n]=A?A.calculateValue(S,this.featureAdapter):this.featureAdapter.getAttribute(S,n)}return u};P._processAttributesForDistinctValues=function(S){if(h.isNone(S)||!this.returnDistinctValues)return S;var K=this.outFields,u=[];if(K)for(const n of K){var {alias:m}=this._fieldDataCache.get(n);u.push(S[m])}else for(m in S)u.push(S[m]);K=`${(K||["*"]).join(",")}=${u.join(",")}`;
u=this._returnDistinctMap.get(K)||0;this._returnDistinctMap.set(K,++u);return 1<u?null:S};return ba}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(h,f,la){function ba(q){return null==q||"string"===typeof q&&!q?"\x3cNull\x3e":q}function P(q){const z=null!=q.minValue||null!=q.maxValue,E=!!q.sqlExpression&&q.supportsSQLExpression;return!(null!=q.normalizationField||null!=q.normalizationType)&&!z&&!E}
function S(q){const {values:z,useSampleStdDev:E,supportsNullCount:O}=q;var F=Number.POSITIVE_INFINITY;let H=Number.NEGATIVE_INFINITY,L=null,I=null;var x=null;let y=null,l=0;const t=null==q.minValue?-Infinity:q.minValue,W=null==q.maxValue?Infinity:q.maxValue;for(const ja of z)Number.isFinite(ja)?ja>=t&&ja<=W&&(L=null===L?ja:L+ja,F=Math.min(F,ja),H=Math.max(H,ja),l++):"string"===typeof ja&&l++;if(l&&null!=L){I=L/l;x=0;for(const ja of z)Number.isFinite(ja)&&ja>=t&&ja<=W&&(x+=(ja-I)**2);y=E?1<l?x/(l-
1):0:0<l?x/l:0;x=Math.sqrt(y)}else H=F=null;F={avg:I,count:l,max:H,min:F,stddev:x,sum:L,variance:y};O&&(F.nullcount=z.length-l);q.percentileParams&&(F.median=K(z,q.percentileParams));return F}function K(q,z){const {fieldType:E,value:O,orderBy:F,isDiscrete:H}=z,L=u(E,"desc"===F);q=[...q].filter(l=>null!=l).sort((l,t)=>L(l,t));if(0===q.length)return null;if(0>=O)return q[0];if(1<=O)return q[q.length-1];var I=(q.length-1)*O,x=Math.floor(I);z=x+1;I%=1;x=q[x];const y=q[z];return z>=q.length||H||"string"===
typeof x||"string"===typeof y?x:x*(1-I)+y*I}function u(q,z){const E=z?1:-1,O=A(z),F=n(z);if(!q||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...aa].includes(q))return(H,L)=>"number"===typeof H&&"number"===typeof L?O(H,L):"string"===typeof H&&"string"===typeof L?F(H,L):E;if("esriFieldTypeDate"===q)return(H,L)=>{H=(new Date(H)).getTime();L=(new Date(L)).getTime();return isNaN(H)||isNaN(L)?E:O(H,L)};if(aa.has(q))return(H,L)=>O(H,L);if("esriFieldTypeString"===
q)return(H,L)=>F(H,L);if("esriFieldTypeGUID"===q||"esriFieldTypeGlobalID"===q){const H=n(z);return(L,I)=>H(R(L),R(I))}return z?(H,L)=>1:(H,L)=>-1}function m(q,z,E){if(E){if(null==q)return null==z?0:1;if(null==z)return-1}else{if(null==q)return null==z?0:-1;if(null==z)return 1}return null}function n(q){return q?(z,E)=>{const O=m(z,E,!0);if(null!=O)return O;z=z.toUpperCase();E=E.toUpperCase();return z>E?-1:z<E?1:0}:(z,E)=>{const O=m(z,E,!1);if(null!=O)return O;z=z.toUpperCase();E=E.toUpperCase();return z<
E?-1:z>E?1:0}}function A(q){return q?(z,E)=>{const O=m(z,E,!0);return null!=O?O:E-z}:(z,E)=>{const O=m(z,E,!1);return null!=O?O:z-E}}function R(q){return q.substr(24,12)+q.substr(19,4)+q.substr(16,2)+q.substr(14,2)+q.substr(11,2)+q.substr(9,2)+q.substr(6,2)+q.substr(4,2)+q.substr(2,2)+q.substr(0,2)}function J(q){return"coded-value"!==q?.type?[]:q.codedValues.map(z=>z.code)}function g(q,z){const E=d({field:z.field,normalizationType:z.normalizationType,normalizationField:z.normalizationField,classificationMethod:z.classificationMethod,
standardDeviationInterval:z.standardDeviationInterval,breakCount:z.numClasses||5});q=w(q,z.minValue,z.maxValue);return la.createGenerateRendererClassBreaks({definition:E,values:q,normalizationTotal:z.normalizationTotal})}function w(q,z,E){const O=null==z?-Infinity:z,F=null==E?Infinity:E;return q.filter(H=>Number.isFinite(H)&&H>=O&&H<=F)}function d(q){const {breakCount:z,field:E,normalizationField:O,normalizationType:F}=q,H=q.classificationMethod||"equal-interval";return new f({breakCount:z,classificationField:E,
classificationMethod:H,normalizationField:"field"===F?O:void 0,normalizationType:F,standardDeviationInterval:"standard-deviation"===H?q.standardDeviationInterval||1:void 0})}function p(q,z){const {field:E,classificationMethod:O,standardDeviationInterval:F,normalizationType:H,normalizationField:L,normalizationTotal:I,minValue:x,maxValue:y}=z,l=z.numBins||10;let t=z=null,W=null;O&&"equal-interval"!==O||H?({classBreaks:q}=g(q,{field:E,normalizationType:H,normalizationField:L,normalizationTotal:I,classificationMethod:O,
standardDeviationInterval:F,minValue:x,maxValue:y,numClasses:l}),z=q[0].minValue,t=q[q.length-1].maxValue,W=q.map(ja=>[ja.minValue,ja.maxValue])):(null!=x&&null!=y?(z=x,t=y):(q=S({values:q,minValue:x,maxValue:y,useSampleStdDev:!H,supportsNullCount:P({normalizationType:H,normalizationField:L,minValue:x,maxValue:y})}),z=q.min??null,t=q.max??null),W=Q(z??0,t??0,l));return{min:z,max:t,intervals:W}}function G(q,z){let E=-1;for(let O=q.length-1;0<=O;O--)if(z>=q[O][0]){E=O;break}return E}function Q(q,z,
E){const O=(z-q)/E,F=[];let H;for(let L=1;L<=E;L++)H=q+O,H=Number(H.toFixed(16)),F.push([q,L===E?z:H]),q=H;return F}const T=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,aa=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),C="min max avg stddev count sum variance nullcount median".split(" ");h.calculateClassBreaks=g;h.calculateHistogram=function(q,z){var E=p(q,z);const O=E.intervals,F=E.min??0;E=E.max??0;const H=O.map((L,I)=>({minValue:O[I][0],maxValue:O[I][1],
count:0}));for(const L of q)null!=L&&L>=F&&L<=E&&(q=G(O,L),-1<q&&H[q].count++);return{bins:H,minValue:F,maxValue:E,normalizationTotal:z.normalizationTotal}};h.calculatePercentile=K;h.calculateStatistics=S;h.calculateStringStatistics=function(q){const z=q.returnDistinct?[...(new Set(q.values))]:q.values,E=z.filter(F=>null!=F).length,O={count:E};q.supportsNullCount&&(O.nullcount=z.length-E);q.percentileParams&&(O.median=K(z,q.percentileParams));return O};h.calculateUniqueValuesCount=function(q){const z=
{};for(let E of q){if(null==E||"string"===typeof E&&""===E.trim())E=null;null==z[E]?z[E]={count:1,data:E}:z[E].count++}return{count:z}};h.createClassBreaksDefinition=d;h.createUVResult=function(q,z,E,O){q=q.count;const F=[];if(E&&z){E=[];var H=J(z[0]);for(const L of H)if(z[1]){H=J(z[1]);for(const I of H)if(z[2]){H=J(z[2]);for(const x of H)E.push(`${ba(L)}${O}${ba(I)}${O}${ba(x)}`)}else E.push(`${ba(L)}${O}${ba(I)}`)}else E.push(L);for(const L of E)q.hasOwnProperty(L)||(q[L]={data:L,count:0})}for(const L in q)z=
q[L],F.push({value:z.data,count:z.count,label:z.label});return{uniqueValueInfos:F}};h.getAttributeComparator=u;h.getEqualIntervalBins=Q;h.getNormalizedValue=function(q,z,E,O){let F=null;switch(z){case "log":0!==q&&(F=Math.log(q)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(O)&&0!==O&&(F=q/O*100);break;case "field":Number.isFinite(E)&&0!==E&&(F=q/E);break;case "natural-log":0<q&&(F=Math.log(q));break;case "square-root":0<q&&(F=q**.5)}return F};h.isNullCountSupported=P;h.processNullValue=
ba;h.processSummaryStatisticsResult=function(q,z){let E;for(E in q)C.includes(E)&&(Number.isFinite(q[E])||(q[E]=null));if(!z)return q;["avg","stddev","variance"].forEach(O=>{null!=q[O]&&(q[O]=Math.ceil(q[O]))});return q};h.resolveCBResult=function(q,z){let E=q.classBreaks;const O=E[0].minValue,F=E[E.length-1].maxValue,H="standard-deviation"===z;E=E.map(L=>{const I=L.label;L={minValue:L.minValue,maxValue:L.maxValue,label:I};if(H&&I){const x=I.match(T)?.map(y=>+y.trim())??[];2===x.length?(L.minStdDev=
x[0],L.maxStdDev=x[1],0>x[0]&&0<x[1]&&(L.hasAvg=!0)):1===x.length&&(I.includes("\x3c")?(L.minStdDev=null,L.maxStdDev=x[0]):I.includes("\x3e")&&(L.minStdDev=x[0],L.maxStdDev=null))}return L});return{minValue:O,maxValue:F,classBreakInfos:E,normalizationTotal:q.normalizationTotal}};h.statisticTypes=C;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(h,f,la,ba,P,S,K,u,m){S=new la.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});la=new la.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});ba=function(n){function A(R){R=n.call(this,R)||this;R.type="class-breaks-definition";
R.breakCount=null;R.classificationField=null;R.classificationMethod=null;R.normalizationField=null;R.normalizationType=null;return R}h._inheritsLoose(A,n);h._createClass(A,[{key:"standardDeviationInterval",set:function(R){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",R)}},{key:"definedInterval",set:function(R){"defined-interval"===this.classificationMethod&&this._set("definedInterval",R)}}]);return A}(ba.JSONSupport);f.__decorate([u.enumeration({classBreaksDef:"class-breaks-definition"})],
ba.prototype,"type",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"breakCount",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"classificationField",void 0);f.__decorate([P.property({type:String,json:{read:S.read,write:S.write}})],ba.prototype,"classificationMethod",void 0);f.__decorate([P.property({json:{write:!0}})],ba.prototype,"normalizationField",void 0);f.__decorate([P.property({json:{read:la.read,write:la.write}})],ba.prototype,"normalizationType",void 0);
f.__decorate([P.property({value:null,json:{write:!0}})],ba.prototype,"standardDeviationInterval",null);f.__decorate([P.property({value:null,json:{write:!0}})],ba.prototype,"definedInterval",null);return ba=f.__decorate([m.subclass("esri.rest.support.ClassBreaksDefinition")],ba)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(h,f,la){h.enumeration=function(ba,P={}){ba=ba instanceof f.JSONMap?ba:new f.JSONMap(ba,P);ba={type:P?.ignoreUnknown??
!0?ba.apiValues:String,json:{type:ba.jsonValues,read:P?.readOnly?!1:{reader:ba.read},write:{writer:ba.write}}};void 0!==P?.readOnly&&(ba.readOnly=!!P.readOnly);void 0!==P?.default&&(ba.json.default=P.default);void 0!==P?.name&&(ba.json.name=P.name);void 0!==P?.nonNullable&&(ba.nonNullable=P.nonNullable);return la.property(ba)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(h,f){function la(J){var g=
J.definition;const {classificationMethod:w,normalizationType:d,definedInterval:p}=g;g=g.breakCount??1;const G=[];var Q=J.values;if(0===Q.length)return[];Q=Q.sort((E,O)=>E-O);var T=Q[0],aa=Q[Q.length-1];if("equal-interval"===w)if(Q.length>=g){Q=(aa-T)/g;J=T;for(var C=1;C<g;C++){var q=Number((T+C*Q).toFixed(6));G.push({minValue:J,maxValue:q,label:ba(J,q,d)});J=q}G.push({minValue:J,maxValue:aa,label:ba(J,aa,d)})}else Q.forEach(E=>{G.push({minValue:E,maxValue:E,label:ba(E,E,d)})});else if("natural-breaks"===
w){Q=P(Q);J=S(Q.uniqueValues,J.valueFrequency||Q.valueFrequency,g);for(C=1;C<g;C++)Q.uniqueValues.length>C&&(q=Number(Q.uniqueValues[J[C]].toFixed(6)),G.push({minValue:T,maxValue:q,label:ba(T,q,d)}),T=q);G.push({minValue:T,maxValue:aa,label:ba(T,aa,d)})}else if("quantile"===w)if(Q.length>=g&&T!==aa){J=Math.ceil(Q.length/g);C=0;for(q=1;q<g;q++){var z=J+C-1;z>Q.length&&(z=Q.length-1);0>z&&(z=0);G.push({minValue:T,maxValue:Q[z],label:ba(T,Q[z],d)});T=Q[z];C+=J;J=Math.ceil((Q.length-C)/(g-q))}G.push({minValue:T,
maxValue:aa,label:ba(T,aa,d)})}else for(g=-1,aa=0;aa<Q.length;aa++)T=Q[aa],T!==g&&(g=T,G.push({minValue:g,maxValue:T,label:ba(g,T,d)}),g=T);else if("standard-deviation"===w)if(J=m(Q),C=n(Q,J),0===C)G.push({minValue:Q[0],maxValue:Q[0],label:ba(Q[0],Q[0],d)});else{Q=u(T,aa,g,J,C)*C;C=0;for(q=g;1<=q;q--)z=Number((J-(q-.5)*Q).toFixed(6)),G.push({minValue:T,maxValue:z,label:ba(T,z,d)}),T=z,C++;q=Number((J+.5*Q).toFixed(6));G.push({minValue:T,maxValue:q,label:ba(T,q,d)});T=q;C++;for(z=1;z<=g;z++)q=C===
2*g?aa:Number((J+(z+.5)*Q).toFixed(6)),G.push({minValue:T,maxValue:q,label:ba(T,q,d)}),T=q,C++}else if("defined-interval"===w){if(!p)return G;g=Q[0];aa=Q[Q.length-1];Q=Math.ceil((aa-g)/p);T=g;for(J=1;J<Q;J++)C=Number((g+J*p).toFixed(6)),G.push({minValue:T,maxValue:C,label:ba(T,C,d)}),T=C;G.push({minValue:T,maxValue:aa,label:ba(T,aa,d)})}return G}function ba(J,g,w){let d=null;return d=J===g?w&&"percent-of-total"===w?J+"%":J.toString():w&&"percent-of-total"===w?J+"% - "+g+"%":J+" - "+g}function P(J){const g=
[],w=[];let d=Number.MIN_VALUE,p=1,G=-1;for(let Q=0;Q<J.length;Q++){const T=J[Q];T===d?(p++,w[G]=p):null!==T&&(g.push(T),d=T,p=1,w.push(p),G++)}return{uniqueValues:g,valueFrequency:w}}function S(J,g,w){var d=J.length;const p=[];w>d&&(w=d);for(var G=0;G<w;G++)p.push(Math.round(G*d/w-1));p.push(d-1);G=K(p,J,g,w);d=G.mean;G=G.sdcm;var Q=w,T=0,aa=0;let C=0,q=0,z=!0;for(let O=0;2>O&&z;O++){0===O&&(z=!1);for(var E=0;E<Q-1;E++)for(;p[E+1]+1!==p[E+2];)if(p[E+1]+=1,T=A(E,p,J,g),C=T.sbMean,T=T.sbSdcm,aa=A(E+
1,p,J,g),q=aa.sbMean,aa=aa.sbSdcm,T+aa<G[E]+G[E+1])G[E]=T,G[E+1]=aa,d[E]=C,d[E+1]=q,z=!0;else{--p[E+1];break}for(E=Q-1;0<E;E--)for(;p[E]!==p[E-1]+1;)if(--p[E],T=A(E-1,p,J,g),C=T.sbMean,T=T.sbSdcm,aa=A(E,p,J,g),q=aa.sbMean,aa=aa.sbSdcm,T+aa<G[E-1]+G[E])G[E-1]=T,G[E]=aa,d[E-1]=C,d[E]=q,z=!0;else{p[E]+=1;break}}z&&(G=K(p,J,g,w));return p}function K(J,g,w,d){let p=[];var G=[],Q=[];let T=0;const aa=[],C=[];for(var q=0;q<d;q++){var z=A(q,J,g,w);aa.push(z.sbMean);C.push(z.sbSdcm);T+=C[q]}z=T;for(q=!0;q||
T<z;){q=!1;p=[];for(G=0;G<d;G++)p.push(J[G]);for(Q=0;Q<d;Q++)for(z=J[Q]+1;z<=J[Q+1];z++)if(G=g[z],0<Q&&z!==J[Q+1]&&Math.abs(G-aa[Q])>Math.abs(G-aa[Q-1]))J[Q]=z;else if(Q<d-1&&J[Q]!==z-1&&Math.abs(G-aa[Q])>Math.abs(G-aa[Q+1])){J[Q+1]=z-1;break}z=T;T=0;G=[];Q=[];for(let E=0;E<d;E++){G.push(aa[E]);Q.push(C[E]);const O=A(E,J,g,w);aa[E]=O.sbMean;C[E]=O.sbSdcm;T+=C[E]}}if(T>z){for(g=0;g<d;g++)J[g]=p[g],aa[g]=G[g],C[g]=Q[g];T=z}return{mean:aa,sdcm:C}}function u(J,g,w,d,p){J=Math.max(d-J,g-d)/p/w;return 1<=
J?1:.5<=J?.5:.25}function m(J){let g=0;for(let w=0;w<J.length;w++)g+=J[w];return g/=J.length}function n(J,g){let w=0;for(let d=0;d<J.length;d++){const p=J[d];w+=(p-g)*(p-g)}w/=J.length;return Math.sqrt(w)}function A(J,g,w,d){var p=0,G=0;for(var Q=g[J]+1;Q<=g[J+1];Q++){const T=d[Q];p+=w[Q]*T;G+=T}0>=G&&R.warn("Exception in Natural Breaks calculation");p/=G;G=0;for(Q=g[J]+1;Q<=g[J+1];Q++)G+=d[Q]*(w[Q]-p)**2;return{sbMean:p,sbSdcm:G}}const R=f.getLogger("esri.rest.support.generateRendererUtils");h.createGenerateRendererClassBreaks=
function(J){const {normalizationTotal:g}=J;return{classBreaks:la(J),normalizationTotal:g}};h.createGenerateRendererUniqueValues=function(J){J=P(J);const g=[],w=J.uniqueValues.length;for(let d=0;d<w;d++){const p=J.uniqueValues[d];g.push({value:p,count:J.valueFrequency[d],label:p.toString()})}return{uniqueValues:g}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(h){h.makeEdgeCandidate=function(f,la,
ba,P,S,K=!1){return{objectId:f,target:la,distance:ba,type:"edge",start:P,end:S,draped:K}};h.makeVertexCandidate=function(f,la,ba){return{objectId:f,target:la,distance:ba,type:"vertex"}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(h,f,la,ba,P,S,K,u){function m(U,
ca,pa){if(U)for(const wa of U)(U=(U=S.getDeepValue(wa,ca))&&"function"!==typeof U&&pa.get(U))&&S.setDeepValue(wa,U.name,ca)}function n(U,ca){if(!U||!ca)return[];va.clear();A(va,U,ca);return Array.from(va).sort()}function A(U,ca,pa){if(pa)if(ca?.fields?.length)if(pa.includes("*"))for(const {name:wa}of ca.fields)U.add(wa);else for(const wa of pa)R(U,ca,wa);else if(pa.includes("*"))U.clear(),U.add("*");else for(const wa of pa)null!=wa&&U.add(wa)}function R(U,ca,pa){"string"===typeof pa&&(ca?(ca=ca.get(pa))&&
U.add(ca.name):U.add(pa))}function J(U,ca,pa){return g.apply(this,arguments)}function g(){g=la._asyncToGenerator(function*(U,ca,pa){if(pa){var {arcadeUtils:wa}=yield u.loadArcade();pa=wa.extractFieldNames(pa,ca?.fields?.map(Ba=>Ba.name));for(const Ba of pa)R(U,ca,Ba)}});return g.apply(this,arguments)}function w(U,ca,pa){return d.apply(this,arguments)}function d(){d=la._asyncToGenerator(function*(U,ca,pa){if(pa&&"1\x3d1"!==pa){const wa=(yield new Promise((Ba,Oa)=>h(["../../core/sql/WhereClause"],Ba,
Oa))).WhereClause.create(pa,ca);if(!wa.isStandardized)throw new ba("fieldUtils:collectFilterFields","Where clause is not standardized",{where:pa});A(U,ca,wa.fieldNames)}});return d.apply(this,arguments)}function p(U,ca){for(const pa of U)if(pa&&pa.valueType&&pa.valueType===ca)return pa.name;return null}function G(){G=la._asyncToGenerator(function*(U){if(!U)return[];const ca=new Set;yield Q(ca,U);return Array.from(ca).sort()});return G.apply(this,arguments)}function Q(U,ca){return T.apply(this,arguments)}
function T(){T=la._asyncToGenerator(function*(U,ca){if(ca){var pa=ca.elevationInfo?.featureExpressionInfo;if(pa)return pa.collectRequiredFields(U,ca.fieldsIndex)}});return T.apply(this,arguments)}function aa(){aa=la._asyncToGenerator(function*(U,ca,pa){if(ca&&pa&&"fields"in pa){var wa=[];wa.push(C(U,ca,pa.popupTemplate));pa.fields&&wa.push(...pa.fields.map(function(){var Ba=la._asyncToGenerator(function*(Oa){Oa.onStatisticExpression?J(U,ca.fieldsIndex,Oa.onStatisticExpression.expression):U.add(Oa.onStatisticField)});
return function(Oa){return Ba.apply(this,arguments)}}()));yield Promise.all(wa)}});return aa.apply(this,arguments)}function C(U,ca,pa){return q.apply(this,arguments)}function q(){q=la._asyncToGenerator(function*(U,ca,pa){const wa=[];pa?.expressionInfos&&wa.push(...pa.expressionInfos.map(Ba=>J(U,ca.fieldsIndex,Ba.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ba of pa)"expression"===Ba.type&&Ba.expressionInfo&&wa.push(J(U,ca.fieldsIndex,Ba.expressionInfo.expression));yield Promise.all(wa)});
return q.apply(this,arguments)}function z(){z=la._asyncToGenerator(function*(U,ca,pa){ca&&(ca.timeInfo&&P.isSome(pa)&&pa.timeExtent&&A(U,ca.fieldsIndex,[ca.timeInfo.startField,ca.timeInfo.endField]),ca.floorInfo&&A(U,ca.fieldsIndex,[ca.floorInfo.floorField]),P.isSome(pa)&&P.isSome(pa.where)&&(yield w(U,ca.fieldsIndex,pa.where)))});return z.apply(this,arguments)}function E(){E=la._asyncToGenerator(function*(U,ca,pa){ca&&pa&&(yield Promise.all(pa.map(wa=>O(U,ca,wa))))});return E.apply(this,arguments)}
function O(U,ca,pa){return F.apply(this,arguments)}function F(){F=la._asyncToGenerator(function*(U,ca,pa){ca&&pa&&(pa.valueExpression?yield J(U,ca.fieldsIndex,pa.valueExpression):pa.field&&R(U,ca.fieldsIndex,pa.field))});return F.apply(this,arguments)}function H(){H=la._asyncToGenerator(function*(U){if(!U)return[];const ca="timeInfo"in U&&U.timeInfo;return ca?n(U.fieldsIndex,[U.trackIdField,ca.startField,ca.endField]):[]});return H.apply(this,arguments)}function L(){L=la._asyncToGenerator(function*(U){if(!U)return[];
const ca=new Set;yield I(ca,U);return Array.from(ca).sort()});return L.apply(this,arguments)}function I(U,ca){return x.apply(this,arguments)}function x(){x=la._asyncToGenerator(function*(U,ca){const {labelingInfo:pa,fieldsIndex:wa}=ca;pa&&pa.length&&(yield Promise.all(pa.map(Ba=>y(U,wa,Ba))))});return x.apply(this,arguments)}function y(U,ca,pa){return l.apply(this,arguments)}function l(){l=la._asyncToGenerator(function*(U,ca,pa){if(pa){var wa=pa.getLabelExpression();pa=pa.where;"arcade"===wa.type?
yield J(U,ca,wa.expression):(wa=wa.expression.match(/{[^}]*}/g))&&wa.forEach(Ba=>{R(U,ca,Ba.slice(1,-1))});yield w(U,ca,pa)}});return l.apply(this,arguments)}function t(U){return"number"===typeof U&&!isNaN(U)&&isFinite(U)}function W(U){return null===U||t(U)}function ja(U){return null===U||B(U)}function ta(U){return null!=U&&"string"===typeof U}function ya(U){return null===U||ta(U)}function Da(){return!0}function Ha(U,ca){let pa;switch(U.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=
U.nullable?ja:B;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=U.nullable?W:t;break;case "string":case "esriFieldTypeString":pa=U.nullable?ya:ta;break;default:pa=Da}return 1===arguments.length?pa:pa(ca)}function Fa(U){return null!=U&&da.has(U.type)}function La(U,ca){return null==U||U.nullable&&null===ca?null:Fa(U)&&!Ja(U.type,Number(ca))?f.NumericRangeValidationError.OUT_OF_RANGE:Ha(U,ca)?U.domain?K.validateDomainValue(U.domain,ca):null:f.TypeValidationError.INVALID_TYPE}
function Ja(U,ca){U="string"===typeof U?Na(U):U;if(!U)return!1;const pa=U.min,wa=U.max;return U.isInteger?B(ca)&&ca>=pa&&ca<=wa:ca>=pa&&ca<=wa}function Na(U){switch(U){case "esriFieldTypeSmallInteger":case "small-integer":return X;case "esriFieldTypeInteger":case "integer":return ia;case "esriFieldTypeSingle":case "single":return na;case "esriFieldTypeDouble":case "double":return ra}}function Ya(U,ca,pa){if(!ca||!ca.attributes||!U){if(P.isSome(pa))for(var wa of U??[])pa.add(wa);return!0}ca=ca.attributes;
wa=!1;for(const Ba of U)if(!(Ba in ca))if(wa=!0,P.isSome(pa))pa.add(Ba);else break;return wa}function Ua(){Ua=la._asyncToGenerator(function*(U,ca){const pa=new Set;for(const wa of ca)yield J(pa,U.fieldsIndex,wa);return Array.from(pa).sort()});return Ua.apply(this,arguments)}const jb=/^([0-9])/,kb=/[^a-z0-9_\u0080-\uffff]/gi,mb=/_{2,}/g,c=/^_/,r=/_$/,ea="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
ka=["field","normalizationField"],va=new Set,B=(()=>"isInteger"in Number?Number.isInteger:U=>"number"===typeof U&&isFinite(U)&&Math.floor(U)===U)(),N=["integer","small-integer","single","double"],da=new Set([...N,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;
(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const X={min:-32768,max:32767,isInteger:!0},ia={min:-2147483648,max:2147483647,isInteger:!0},na={min:-3.4E38,max:1.2E38,isInteger:!1},ra={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.collectArcadeFieldNames=J;f.collectElevationFields=Q;f.collectFeatureReductionFields=function(U,ca,pa){return aa.apply(this,arguments)};f.collectField=R;f.collectFields=A;f.collectFilterFields=function(U,
ca,pa){return z.apply(this,arguments)};f.collectLabelingFields=I;f.collectOrderByInfos=function(U,ca,pa){return E.apply(this,arguments)};f.collectPopupTemplateFields=C;f.doubleRange=ra;f.featureHasFields=function(U,ca){return!Ya(U,ca,null)};f.fixFields=n;f.fixRendererFields=function(U,ca){if(null!=U&&null!=ca)for(const pa of Array.isArray(U)?U:[U])if(m(ea,pa,ca),"visualVariables"in pa&&pa.visualVariables)for(const wa of pa.visualVariables)m(ka,wa,ca)};f.fixTimeInfoFields=function(U,ca){if(null!=U&&
ca?.fields?.length)if("startField"in U){var pa=ca.get(U.startField);ca=ca.get(U.endField);U.startField=pa?.name??null;U.endField=ca?.name??null}else pa=ca.get(U.startTimeField),ca=ca.get(U.endTimeField),U.startTimeField=pa?.name??null,U.endTimeField=ca?.name??null};f.getDisplayFieldName=function({displayField:U,fields:ca}){if(U)return U;if(!ca||!ca.length)return null;if(!(U=p(ca,"name-or-title")||p(ca,"unique-identifier")||p(ca,"type-or-category")))a:{for(const pa of ca)if(pa&&pa.name&&(ca=pa.name.toLowerCase(),
ca.includes("name")||ca.includes("title"))){U=pa.name;break a}U=null}return U};f.getElevationFields=function(U){return G.apply(this,arguments)};f.getExpressionFields=function(U,ca){return Ua.apply(this,arguments)};f.getFeatureEditFields=function(U){if(!U)return[];const ca="editFieldsInfo"in U&&U.editFieldsInfo;return ca?n(U.fieldsIndex,[ca&&ca.creatorField,ca&&ca.creationDateField,ca&&ca.editorField,ca&&ca.editDateField]):[]};f.getFeatureGeometryFields=function(U){if(!U)return[];const ca=U.geometryFieldsInfo;
return ca?n(U.fieldsIndex,[ca.shapeAreaField,ca.shapeLengthField]):[]};f.getFieldDefaultValue=function(U){const ca=U.defaultValue;if(void 0!==ca&&Ha(U,ca))return ca;if(U.nullable)return null};f.getFieldRange=function(U){const ca=K.getDomainRange(U.domain);if(ca)return ca;if(Fa(U))return Na(U.type)};f.getLabelingFields=function(U){return L.apply(this,arguments)};f.getNumericTypeForValue=function(U){if(!t(U))return null;if(B(U)){if(U>=X.min&&U<=X.max)return"esriFieldTypeSmallInteger";if(U>=ia.min&&
U<=ia.max)return"esriFieldTypeInteger"}return U>=na.min&&U<=na.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=function(U){return H.apply(this,arguments)};f.integerRange=ia;f.isDateField=function(U){return null!=U&&("date"===U.type||"esriFieldTypeDate"===U.type)};f.isNumberInRange=Ja;f.isNumericField=Fa;f.isRasterPixelValueField=function(U){return U?["raster.itempixelvalue","raster.servicepixelvalue"].some(ca=>U.toLowerCase().startsWith(ca)):!1};f.isStringField=function(U){return null!=
U&&("string"===U.type||"esriFieldTypeString"===U.type)};f.isValidFieldValue=function(U,ca){return null===La(U,ca)};f.isValueMatchingFieldType=Ha;f.normalizeFieldName=function(U){return null==U?null:(U=U.trim().replace(kb,"_").replace(mb,"_").replace(c,"").replace(r,"").replace(jb,"F$1"))?U:null};f.numericTypes=N;f.packFields=function(U,ca,pa=1){if(!ca||!U)return[];if(ca.includes("*"))return["*"];ca=n(U,ca);return ca.length/U.fields.length>=pa?["*"]:ca};f.populateMissingFields=Ya;f.rendererFields=
ea;f.sanitizeNullFieldValue=function(U){return null==U||"number"===typeof U&&isNaN(U)?null:U};f.singleRange=na;f.smallIntegerRange=X;f.unpackFieldNames=function(U,ca){return P.isNone(ca)||P.isNone(U)?[]:ca.includes("*")?(U.fields??[]).map(pa=>pa.name):ca};f.validateFieldValue=La;f.validationErrorToString=function(U,ca,pa){switch(U){case K.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${ca.name}, domain: ${JSON.stringify(ca.domain)}`;case K.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${ca.name}, domain: ${JSON.stringify(ca.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${ca.name}, type: ${ca.type}, nullable: ${ca.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:wa,max:Ba}=Na(ca.type);return`Value ${pa} is out of range for the number type - field: ${ca.name}, type: ${ca.type}, value range is ${wa} to ${Ba}`}};f.visualVariableFields=ka;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(h){h.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(h.DomainValidationError||(h.DomainValidationError={}));h.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};h.validateDomainValue=function(f,la){switch(f.type){case "range":const ba="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=ba&&+la<ba||null!=f&&+la>f)return h.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(P=>null==P||P.code!==la))return h.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(P=>null==P||P.code!==la))return h.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(h,f,la,ba,P,S,K,u){function m(){A||(A=la._asyncToGenerator(function*(){const J=yield new Promise((g,w)=>h(["./arcadeUtils"],g,w));return{arcade:J.arcade,arcadeUtils:J,Dictionary:J.Dictionary,Feature:J.arcadeFeature}})());return A}const n=S.getLogger("esri.support.arcadeOnDemand");let A;ba=(J,g,w)=>R.create(J,g,w,null,["$feature","$view"]);let R=function(){function J(w,d,p,G,Q,T,aa){this.script=w;this.evaluate=G;this.fields=Array.isArray(T)?T:T.fields;this._syntaxTree=p;this._arcade=d;this._arcadeFeature=
Q;this._spatialReference=aa;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}J.create=function(){var w=la._asyncToGenerator(function*(d,p,G,Q,T,aa){const {arcade:C,Feature:q,Dictionary:z}=yield m(),E=u.fromJSON(p);let O;try{O=C.parseScript(d,aa)}catch(y){return n.error(new P("arcade-bad-expression","Failed to parse arcade script",{script:d,error:y})),null}T=T.reduce((y,l)=>({...y,[l]:null}),{});let F=null;
K.isSome(Q)&&(F=new z(Q),F.immutable=!0,T.$config=null);aa=(Q=C.scriptUsesGeometryEngine(O))&&C.enableGeometrySupport();const H=C.scriptUsesFeatureSet(O)&&C.enableFeatureSetSupport(),L=(p=C.scriptIsAsync(O))&&C.enableAsyncSupport();T={vars:T,spatialReference:E,useAsync:!!L};yield Promise.all([aa,H,L]);aa=new Set;yield C.loadDependentModules(aa,O,null,p,Q);const I=new z;I.immutable=!1;I.setField("scale",0);const x=C.compileScript(O,T);return new J(d,C,O,y=>{"$view"in y&&y.$view&&(I.setField("scale",
"object"===typeof y.$view?y.$view.scale:void 0),y.$view=I);F&&(y.$config=F);return x({vars:y,spatialReference:E})},new q,G,E)});return function(d,p,G,Q,T,aa){return w.apply(this,arguments)}}();var g=J.prototype;g.repurposeFeature=function(w){w.geometry&&!w.geometry.spatialReference&&(w.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(w.geometry,w.attributes,{fields:this.fields});return this._arcadeFeature};g.referencesGeometry=function(){return this._referencesGeometry};
g.referencesScale=function(){return this._referencesScale};return J}();f.ArcadeExpression=R;f.createDictionaryExpression=(J,g,w,d)=>R.create(J,g,w,d,["$feature","$view"]);f.createLabelExpression=(J,g,w)=>R.create(J,g,w,null,["$feature"]);f.createRendererExpression=ba;f.createVVExpression=ba;f.loadArcade=m;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J){function g(){return new Promise((G,Q)=>h(["../../../geometry/geometryEngineJSON"],G,Q))}function w(){w=la._asyncToGenerator(function*(G,Q,T){const {spatialRel:aa,geometry:C}=G;if(C){if(null==aa||!0!==p.spatialRelationship[aa])throw new ba("feature-store:unsupported-query","Unsupported query spatial relationship",{query:G});if(u.isValid(C.spatialReference)&&u.isValid(T)){if(null==C||!0!==p.queryGeometry[K.getJsonType(C)])throw new ba("feature-store:unsupported-query",
"Unsupported query geometry type",{query:G});if(null==Q||!0!==p.layerGeometry[Q])throw new ba("feature-store:unsupported-query","Unsupported layer geometry type",{query:G});if(G.outSR)return R.checkProjectionSupport(G.geometry&&G.geometry.spatialReference,G.outSR)}}});return w.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},p={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};f.canQueryWithRBush=function(G){if(K.isExtent(G))return!0;if(K.isPolygon(G)){for(const Q of G.rings)if(5!==Q.length||Q[0][0]!==Q[1][0]||Q[0][0]!==Q[4][0]||Q[2][0]!==Q[3][0]||Q[0][1]!==Q[3][1]||Q[0][1]!==Q[4][1]||Q[1][1]!==Q[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=function(G,Q,T){return w.apply(this,
arguments)};f.getSpatialQueryOperator=function(G,Q,T,aa,C){if(K.isPolygon(Q)&&"esriGeometryPoint"===T&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G)){const q=n.convertFromPolygon(new A,Q,!1,!1);return Promise.resolve(z=>m.polygonContainsPoint(q,!1,!1,z))}if(K.isPolygon(Q)&&"esriGeometryMultipoint"===T){const q=n.convertFromPolygon(new A,Q,!1,!1);if("esriSpatialRelContains"===G)return Promise.resolve(z=>m.polygonContainsMultipoint(q,!1,!1,z,aa,C))}if(K.isExtent(Q)&&"esriGeometryPoint"===
T&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G))return Promise.resolve(q=>P.extentContainsPoint(Q,J.getGeometry(T,aa,C,q)));if(K.isExtent(Q)&&"esriGeometryMultipoint"===T&&"esriSpatialRelContains"===G)return Promise.resolve(q=>P.extentContainsMultipoint(Q,J.getGeometry(T,aa,C,q)));if(K.isExtent(Q)&&"esriSpatialRelIntersects"===G){const q=S.getExtentIntersector(T);return Promise.resolve(z=>q(Q,J.getGeometry(T,aa,C,z)))}return g().then(q=>{const z=q[d[G]].bind(null,Q.spatialReference,
Q);return E=>z(J.getGeometry(T,aa,C,E))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(h,f){h.extentIntersectsExtent=f.extentIntersectsExtent;h.extentIntersectsMultipoint=f.extentIntersectsMultipoint;h.extentIntersectsPoint=f.extentIntersectsPoint;h.extentIntersectsPolygon=f.extentIntersectsPolygon;h.extentIntersectsPolyline=f.extentIntersectsPolyline;h.extentIntersectsRings=f.extentIntersectsRings;
h.getFeatureExtentIntersector=f.getFeatureExtentIntersector;h.isSelfIntersecting=f.isSelfIntersecting;h.segmentIntersects=f.segmentIntersects;h.getExtentIntersector=function(la){return"mesh"===la?f.extentIntersectsExtent:f.getFeatureExtentIntersector(la)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(h){function f(la,ba,P,S,K){if(!la)return!1;ba=ba?P?4:3:P?3:2;const {coords:u,lengths:m}=la;P=!1;la=0;for(const A of m){var n=
la;for(let R=la,J=la+A*ba;R<J;R+=ba){n=R+ba;n===J&&(n=la);const g=u[R],w=u[R+1],d=u[n];n=u[n+1];(w<K&&n>=K||n<K&&w>=K)&&g+(K-w)/(n-w)*(d-g)<S&&(P=!P)}la+=A*ba}return P}h.polygonContainsCoords=f;h.polygonContainsMultipoint=function(la,ba,P,S,K,u){K=K?u?4:3:u?3:2;const {coords:m,lengths:n}=S;if(!n)return!1;for(let A=0,R=0;A<n.length;A++,R+=K)if(!f(la,ba,P,m[R],m[R+1]))return!1;return!0};h.polygonContainsPoint=function(la,ba,P,S){return f(la,ba,P,S.coords[0],S.coords[1])};Object.defineProperty(h,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(h,f){function la(){la=f._asyncToGenerator(function*(K,u){if(!K)return null;const m=u.featureAdapter,{startTimeField:n,endTimeField:A}=K;let R=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY;if(n&&A)yield u.forEach(g=>{const w=m.getAttribute(g,n);g=m.getAttribute(g,A);null==w||isNaN(w)||(R=Math.min(R,w));null==g||isNaN(g)||(J=Math.max(J,g))});else{const g=
n||A;yield u.forEach(w=>{w=m.getAttribute(w,g);null==w||isNaN(w)||(R=Math.min(R,w),J=Math.max(J,w))})}return{start:R,end:J}});return la.apply(this,arguments)}function ba(K,u,m,n,A){if(null!=n&&null!=A)return R=>{const J=K.getAttribute(R,u);R=K.getAttribute(R,m);return(null==J||J<=A)&&(null==R||R>=n)};if(null!=n)return R=>{R=K.getAttribute(R,m);return null==R||R>=n};if(null!=A)return R=>{R=K.getAttribute(R,u);return null==R||R<=A}}function P(K,u,m,n){if(null!=m&&null!=n&&m===n)return A=>K.getAttribute(A,
u)===m;if(null!=m&&null!=n)return A=>{A=K.getAttribute(A,u);return A>=m&&A<=n};if(null!=m)return A=>K.getAttribute(A,u)>=m;if(null!=n)return A=>K.getAttribute(A,u)<=n}function S(){return()=>!1}h.getTimeExtent=function(K,u){return la.apply(this,arguments)};h.getTimeOperator=function(K,u,m){if(!u||!K)return null;const {startTimeField:n,endTimeField:A}=K;if(!n&&!A)return null;const {start:R,end:J}=u;return null===R&&null===J?null:void 0===R&&void 0===J?S():n&&A?ba(m,n,A,R,J):P(m,n||A,R,J)};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(h,f){function la(P){return"oid"===P.type||"esriFieldTypeOID"===P.type}function ba(P){return"global-id"===P.type||"esriFieldTypeGlobalID"===P.type}return function(){function P(K=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=
[];this._requiredFields=null;if(K){this.fields=K;var u=[];for(const m of K){K=m?.name;const n=f.normalizeFieldName(m?.name)?.toLowerCase()??"";if(K&&n){const A=K.trim().toLowerCase();this._fieldsMap.set(K,m);this._fieldsMap.set(A,m);this._normalizedFieldsMap.set(n,m);u.push(A);"date"===m.type||"esriFieldTypeDate"===m.type?(this.dateFields.push(m),this._dateFieldsSet.add(m)):f.isNumericField(m)&&(this._numericFieldsSet.add(m),this.numericFields.push(m));la(m)||ba(m)||(m.editable=null==m.editable?!0:
!!m.editable,m.nullable=null==m.nullable?!0:!!m.nullable)}}u.sort();this.uid=u.join(",")}}var S=P.prototype;S.destroy=function(){this._fieldsMap.clear()};S.has=function(K){return null!=this.get(K)};S.get=function(K){if(K){var u=this._fieldsMap.get(K);if(u)return u;(u=this._fieldsMap.get(K.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(K)?.toLowerCase()??""))&&this._fieldsMap.set(K,u);return u}};S.isDateField=function(K){return this._dateFieldsSet.has(this.get(K))};S.isNumericField=
function(K){return this._numericFieldsSet.has(this.get(K))};S.normalizeFieldName=function(K){if(K=this.get(K))return K.name??void 0};h._createClass(P,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const K of this.fields)la(K)||ba(K)||K.nullable||void 0!==f.getFieldDefaultValue(K)||this._requiredFields.push(K)}return this._requiredFields}}]);return P}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(h,f,la,ba,P,S,K,u,m,n,A,R,J,g,w){function d(O){return p.has(O)?p.get(O):"number"===typeof O?O:1}h.Task=void 0;(function(O){O[O.YIELD=1]="YIELD"})(h.Task||(h.Task={}));h.TaskPriority=void 0;(function(O){O.RESOURCE_CONTROLLER_IMMEDIATE="immediate";O.RESOURCE_CONTROLLER="schedule";O.SLIDE="slide";O.STREAM_DATA_LOADER="stream loader";O.ELEVATION_QUERY="elevation query";O.TERRAIN_SURFACE="terrain";O.SURFACE_GEOMETRY_UPDATES="surface geometry updates";O.LOD_RENDERER="LoD renderer";O.GRAPHICS_CORE=
"Graphics3D";O.I3S_CONTROLLER="I3S";O.POINT_CLOUD_LAYER="point cloud";O.FEATURE_TILE_FETCHER="feature fetcher";O.OVERLAY="overlay";O.STAGE="stage";O.GRAPHICS_DECONFLICTOR="graphics deconflictor";O.FILTER_VISIBILITY="Graphics3D filter visibility";O.SCALE_VISIBILITY="Graphics3D scale visibility";O.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";O.POINT_OF_INTEREST_FREQUENT="POI frequent";O.POINT_OF_INTEREST_INFREQUENT="POI infrequent";O.LABELER="labeler";O.FEATURE_QUERY_ENGINE="feature query";O.FEATURE_TILE_TREE=
"feature tile tree";O.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";O.ELEVATION_ALIGNMENT="elevation alignment";O.TEXT_TEXTURE_ATLAS="text texture atlas";O.TEXTURE_UNLOAD="texture unload";O.LINE_OF_SIGHT_TOOL="line of sight tool";O.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";O.ELEVATION_PROFILE="elevation profile";O.SNAPPING="snapping";O.SHADOW_ACCUMULATOR="shadow accumulator";O.CLOUDS_GENERATOR="clouds generator";O[O.TEST_PRIO=1]="TEST_PRIO"})(h.TaskPriority||(h.TaskPriority=
{}));const p=new Map([[h.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[h.TaskPriority.RESOURCE_CONTROLLER,4],[h.TaskPriority.SLIDE,0],[h.TaskPriority.STREAM_DATA_LOADER,0],[h.TaskPriority.ELEVATION_QUERY,0],[h.TaskPriority.TERRAIN_SURFACE,1],[h.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[h.TaskPriority.LOD_RENDERER,2],[h.TaskPriority.GRAPHICS_CORE,2],[h.TaskPriority.I3S_CONTROLLER,2],[h.TaskPriority.POINT_CLOUD_LAYER,2],[h.TaskPriority.FEATURE_TILE_FETCHER,2],[h.TaskPriority.OVERLAY,4],[h.TaskPriority.STAGE,
4],[h.TaskPriority.GRAPHICS_DECONFLICTOR,4],[h.TaskPriority.FILTER_VISIBILITY,4],[h.TaskPriority.SCALE_VISIBILITY,4],[h.TaskPriority.FRUSTUM_VISIBILITY,4],[h.TaskPriority.CLOUDS_GENERATOR,4],[h.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[h.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[h.TaskPriority.LABELER,8],[h.TaskPriority.FEATURE_QUERY_ENGINE,8],[h.TaskPriority.FEATURE_TILE_TREE,16],[h.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[h.TaskPriority.ELEVATION_ALIGNMENT,12],[h.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[h.TaskPriority.TEXTURE_UNLOAD,12],[h.TaskPriority.LINE_OF_SIGHT_TOOL,16],[h.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[h.TaskPriority.SNAPPING,0],[h.TaskPriority.SHADOW_ACCUMULATOR,30]]),G=A.Milliseconds(6.5),Q=A.Milliseconds(1),T=A.Milliseconds(30),aa=A.Milliseconds(1E3/30),C=A.Milliseconds(100);var q;(function(O){let F=function(){function I(){this._updating=new R.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new K("total"),tasks:new Map};
this._frameTaskTimes=new Map;this._budget=new L;this._state=w.RenderState.INTERACTING;this._tasks=new u;this._runQueue=new u;this._load=0;this._idleStateCallbacks=new u;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=n.watch(()=>g.SCHEDULER_LOG_SLOW_TASKS,l=>this._debug=l,n.initial);for(const l of Object.keys(h.TaskPriority))this.performanceInfo.tasks.set(h.TaskPriority[l],new K(h.TaskPriority[l]));const y=this;this._test={FRAME_SAFETY_BUDGET:G,INTERACTING_BUDGET:aa,IDLE_BUDGET:C,
get availableBudget(){return y._budget.budget},usedBudget:0,getBudget:()=>y._budget,setBudget:l=>y._budget=l,updateTask:l=>this._updateTask(l),getState:l=>this._getState(l),getRuntime:l=>this._getRuntime(l),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var x=I.prototype;x._updatingChanged=function(){this._updating.set(this._tasks.some(y=>y.needsUpdate))};x.destroy=function(){this._tasks.toArray().forEach(y=>y.remove());this._tasks.clear();
S.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};x.taskRunningChanged=function(y){this._updatingChanged();y&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};x.registerTask=function(y,l){const t=d(y);l=new H(this,y,l,t);this._tasks.push(l);this._updatingChanged();this.performanceInfo.tasks.has(y)||this.performanceInfo.tasks.set(y,
new K(y));return l};x.registerIdleStateCallbacks=function(y,l){const t={idleBegin:y,idleEnd:l};this._idleStateCallbacks.push(t);this.state===w.RenderState.IDLE&&this._idleUpdatesStartFired&&t.idleBegin();const W=this;return{remove:()=>this._removeIdleStateCallbacks(t),set idleBegin(ja){W._idleUpdatesStartFired&&(t.idleEnd(),W._state===w.RenderState.IDLE&&ja());t.idleBegin=ja},set idleEnd(ja){t.idleEnd=ja}}};x.updateBudget=function(y){this._test.usedBudget=0;++this._frameNumber;let l=G,t=y.frameDuration,
W=Q;switch(this.state){case w.RenderState.IDLE:l=A.Milliseconds(0);t=A.Milliseconds(Math.max(C,y.frameDuration));W=T;break;case w.RenderState.INTERACTING:t=A.Milliseconds(Math.max(aa,y.frameDuration))}t=A.Milliseconds(t-y.elapsedFrameTime-l);if(this.state!==w.RenderState.IDLE&&t<Q&&!this._forceTask)return this._forceTask=!0,!1;t=A.Milliseconds(Math.max(t,W));this._budget.reset(t,this.state);this._updateLoad();return this._schedule()};x.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case w.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(y=>y.idleBegin()));this._runIdle();break;case w.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};x.stopFrame=function(){this._budget.reset(A.Milliseconds(0),this._state);this._budget.madeProgress()};x._removeIdleStateCallbacks=function(y){this._idleUpdatesStartFired&&y.idleEnd();this._idleStateCallbacks.removeUnordered(y)};x.removeTask=function(y){this._tasks.removeUnordered(y);
this._runQueue.removeUnordered(y);this._updatingChanged()};x._updateTask=function(y){this._tasks.forAll(l=>{l.name===y&&l.setPriority(y)})};x._getState=function(y){if(this._runQueue.some(t=>t.name===y))return h.TaskState.SCHEDULED;let l=h.TaskState.IDLE;this._tasks.forAll(t=>{t.name===y&&t.needsUpdate&&(1>=t.schedulePriority?l=h.TaskState.READY:l!==h.TaskState.READY&&(l=h.TaskState.WAITING))});return l};x._getRuntime=function(y){let l=0;this._tasks.forAll(t=>{t.name===y&&(l+=t.runtime)});return l};
x._resetRuntimes=function(){this._tasks.forAll(y=>y.runtime=0)};x._getRunning=function(){const y=new Map;this._tasks.forAll(t=>{t.needsUpdate&&y.set(t.name,(y.get(t.name)||0)+1)});if(0===y.size)return null;let l="";y.forEach((t,W)=>{l=1<t?l+` ${t}x ${W}`:l+` ${W}`});return l};x._runIdle=function(){this._run()};x._runInteracting=function(){this._run()};x._runAnimating=function(){this._run()};x._updateLoad=function(){const y=this._tasks.reduce((l,t)=>t.needsUpdate?++l:l,0);this._load=.9*this._load+
y*(1-.9)};x._schedule=function(){this._runQueue.filterInPlace(y=>{if(y.needsUpdate)return!0;y.schedulePriority=y.basePriority;return!1});for(this._tasks.forAll(y=>{0===y.basePriority&&y.needsUpdate&&!this._runQueue.includes(y)&&y.blockFrame!==this._frameNumber&&this._runQueue.unshift(y)});0===this._runQueue.length;){let y=!1;this._tasks.forAll(l=>{if(l.needsUpdate&&0!==l.schedulePriority&&0!==l.basePriority&&l.blockFrame!==this._frameNumber)switch(y=!0,l.schedulePriority){case 1:l.schedulePriority=
0;this._runQueue.push(l);break;default:--l.schedulePriority}});if(!y)return this._updatingChanged(),!1}this._updatingChanged();return!0};x._run=function(){const y=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var l=this._budget.now();const t=this._runQueue.pop();this._budget.resetProgress();try{t.task.runTask(this._budget)===h.Task.YIELD&&(t.blockFrame=this._frameNumber)}catch(W){P.getLogger("esri.views.support.Scheduler").error(`Exception in task "${t.name}"`,W)}!this._budget.hasProgressed&&
t.blockFrame!==this._frameNumber&&t.needsUpdate&&(t.blockFrame=this._frameNumber);t.schedulePriority=t.basePriority;l=this._budget.now()-l;t.runtime+=l;this._frameTaskTimes.set(t.priority,this._frameTaskTimes.get(t.priority)+l);this._debug&&l>2*this._budget.budget&&console.log("Task",t.name,"used",l,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-y);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
y)};x._startFrameTaskTimes=function(){for(const y of Object.keys(h.TaskPriority))this._frameTaskTimes.set(h.TaskPriority[y],0)};x._recordFrameTaskTimes=function(y){this._frameTaskTimes.forEach((l,t)=>this.performanceInfo.tasks.get(t).record(l));this.performanceInfo.total.record(y)};f._createClass(I,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(y){this._state!==y&&(this._state=
y,this.state!==w.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(l=>l.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return I}();O.Scheduler=F;let H=function(){function I(y,l,t,W){this._scheduler=y;this.name=l;this._basePriority=W;this.runtime=this.blockFrame=0;this._queue=new J.PromiseQueue;this._handles=new la;this.schedulePriority=this._basePriority;this._task=new R.ObservableValue(S.isSome(t)?t:this._queue);this._handles.add(n.when(()=>
this.task.running,ja=>y.taskRunningChanged(ja)))}var x=I.prototype;x.remove=function(){this.processQueue(z);this._scheduler.removeTask(this);this.schedule=E.schedule;this.reschedule=E.reschedule;this._handles.destroy()};x.setPriority=function(y){this.name=y;y=d(y);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=y;this._basePriority=y};x.schedule=function(y,l,t){return this._queue.push(y,l,t)};x.reschedule=function(y,l,t){return this._queue.unshift(y,l,t)};x.processQueue=
function(y){this._queue.runTask(y)};f._createClass(I,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(y){this.setPriority(y)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return I}(),L=function(){function I(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=w.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var x=I.prototype;x.run=function(y){if(this.done)return!1;!0===y()&&this.madeProgress();return!0};x.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};x.reset=function(y,l){this._begin=this.now();this._budget=y;this._state=l;this.resetProgress()};x.now=function(){return performance.now()};x.resetProgress=function(){this._done=this._progressed=!1};f._createClass(I,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(y){this._enabled=y}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return I}();O.Budget=L})(q||(q={}));h.TaskState=void 0;
(function(O){O.SCHEDULED="s";O.READY="r";O.WAITING="w";O.IDLE="i"})(h.TaskState||(h.TaskState={}));const z=(()=>{const O=new q.Budget;O.enabled=!1;return O})(),E=new (function(){function O(){}var F=O.prototype;F.remove=function(){};F.processQueue=function(){};F.schedule=function(H,L,I){try{if(m.isAborted(L)){const x=m.createAbortError();return I?Promise.resolve(I(x)):Promise.reject(x)}return m.when(H(z))}catch(x){return Promise.reject(x)}};F.reschedule=function(H,L,I){return this.schedule(H,L,I)};
return O}());h.ImmediateTask=E;h.getTaskPriority=d;h.newScheduler=function(){return new q.Scheduler};h.noBudget=z;h.taskPriorities=p;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(h,f,la,ba,P,S,K){function u(J,g,w={}){return m(J,g,w,A)}function m(J,g,w={},d){let p=null;const G=w.once?(Q,T)=>{d(Q)&&(ba.removeMaybe(p),
g(Q,T))}:(Q,T)=>{d(Q)&&g(Q,T)};p=S.watchTracked(J,G,w.sync,w.equals);w.initial&&(J=J(),G(J,J));return p}function n(J,g,w){if(P.isAborted(w))return Promise.reject(P.createAbortError());const d=J();if(g?.(d))return Promise.resolve(d);let p=null;return new Promise((G,Q)=>{p=la.handlesGroup([P.onAbort(w,()=>{p=ba.removeMaybe(p);Q(P.createAbortError())}),m(J,T=>{p=ba.removeMaybe(p);G(T)},{sync:!1,once:!0},g??A)])})}function A(J){return!0}function R(J){return!!J}h.autorun=K.autorun;h.initial={initial:!0};
h.on=function(J,g,w,d={}){function p(){Q&&T&&(T.remove(),d.onListenerRemove?.(Q),T=Q=null)}function G(q){d.once&&d.once&&ba.removeMaybe(aa);w(q)}let Q=null,T=null,aa=null;const C=u(J,(q,z)=>{p();f.isEventTarget(q)&&(Q=q,T=f.on(q,g,G),d.onListenerAdd?.(q))},{sync:d.sync,initial:!0});return aa=la.makeHandle(()=>{C.remove();p()})};h.once=function(J,g){return n(J,null,g)};h.pausable=function(J,g,w={}){let d=!1;const p=u(J,(G,Q)=>{d||g(G,Q)},w);return{remove(){p.remove()},pause(){d=!0},resume(){d=!1}}};
h.sync={sync:!0};h.syncAndInitial={sync:!0,initial:!0};h.watch=u;h.when=function(J,g,w={}){return m(J,g,w,R)};h.whenOnce=function(J,g){return n(J,R,g)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],function(h,f,la){let ba=function(){function P(K){this._observable=new la.SimpleObservable;this._value=K}var S=P.prototype;S.get=function(){f.trackAccess(this._observable);
return this._value};S.set=function(K){K!==this._value&&(this._value=K,this._observable.notify())};return P}();h.ObservableValue=ba;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(h,f,la,ba){let P=function(){function K(){this._tasks=[];this._running=new ba.ObservableValue(!1)}var u=K.prototype;
u.destroy=function(){this.cancelAll()};u.runTask=function(m){for(;!m.done&&this._process(m);)m.madeProgress()};u.push=function(m,n,A){this._running.set(!0);return new Promise((R,J)=>this._tasks.push(new S(R,J,m,n,A)))};u.unshift=function(m,n,A){this._running.set(!0);return new Promise((R,J)=>this._tasks.unshift(new S(R,J,m,n,A)))};u._process=function(m){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const A=la.isAborted(n.signal);if(A&&!n.abortCallback)n.reject(la.createAbortError());
else{const R=A?n.abortCallback?.(la.createAbortError()):n.callback(m);la.isPromiseLike(R)?R.then(n.resolve,n.reject):n.resolve(R)}}catch(A){n.reject(A)}this._running.set(0<this._tasks.length);return!0};u.cancelAll=function(){const m=la.createAbortError();for(const n of this._tasks)if(n.abortCallback){const A=n.abortCallback(m);n.resolve(A)}else n.reject(m);this._tasks.length=0;this._running.set(!1)};f._createClass(K,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);
return K}(),S=function(K,u,m,n,A){this.resolve=K;this.reject=u;this.callback=m;this.signal=n;this.abortCallback=A};h.PromiseQueue=P;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(h,
f,la,ba,P,S,K){la=function(u){function m(){var n=u.apply(this,arguments)||this;n.SCHEDULER_LOG_SLOW_TASKS=!1;n.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return n}h._inheritsLoose(m,u);return m}(la);f.__decorate([ba.property()],la.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([ba.property()],la.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);la=f.__decorate([K.subclass("esri.views.support.DebugFlags")],la);return new la})},"esri/views/support/RenderState":function(){define(["exports"],
function(h){h.RenderState=void 0;var f=h.RenderState||(h.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/number","../../../support/fieldUtils"],function(h,f,la){function*ba(C,q,z){let E=0;for(;E<=C.length;){var O=C.indexOf(q,E);O=C.substring(E,-1<O?O:void 0);E+=O.length+q.length;if(!z||O.trim())yield O}}
function P(C){const q=C.includes("\r\n")?"\r\n":"\n";return ba(C,q,!0)}function S(C,q){return ba(C,q,!1)}function*K(C,q,z,E=()=>Object.create(null)){var O=P(C);O.next();var F="";C="";let H=0,L=E(),I=0;a:for(const x of O){O=S(x,z);for(const y of O)if(F+=C+y,C="",H+=n(y),0===H%2){if(0<H)if(F=g.exec(F))L[q[I]]=F[1].replace(w,'"'),I++;else{L=E();I=0;F="";H=0;continue a}else L[q[I]]=F,I++;F="";H=0}else C=z;0===H?(yield L,L=E(),I=0):C="\n"}}function u(C,q){C=m(C,q).filter(z=>null!=z);q=C.map(z=>la.normalizeFieldName(z));
for(let z=q.length-1;0<=z;z--)q[z]||(q.splice(z,1),C.splice(z,1));return{names:q,aliases:C}}function m(C,q){if(!C?.length)return[];const z=[];var E="";let O="",F=0;C=S(C,q);for(const H of C)E+=O+H,O="",F+=n(H),0===F%2?(0<F?(E=g.exec(E))&&z.push(E[1].replace(w,'"')):z.push(E),E="",F=0):O=q;return z}function n(C){let q=0,z;for(z=C.indexOf('"',0);0<=z;)q++,z=C.indexOf('"',z+1);return q}function A(C,q,z){q=la.normalizeFieldName(q)?.toLowerCase();z=la.normalizeFieldName(z)?.toLowerCase();const E=C.map(O=>
O.toLowerCase());q=q?C[E.indexOf(q)]:null;z=z?C[E.indexOf(z)]:null;return{longitudeFieldName:q||C[E.indexOf(aa.find(O=>E.includes(O)))],latitudeFieldName:z||C[E.indexOf(T.find(O=>E.includes(O)))]}}function R(C){if(!C.length)return"string";const q=/[^+-.,0-9]/;return C.map(z=>{var E=!1;if(""!==z){if(q.test(z))E=!0;else{E=p(z);if(!isNaN(E))return/[.,]/.test(z)||!Number.isInteger(E)||214783647<E||-214783648>E?"double":"integer";if(z.includes("E"))if(E=Number(z),isNaN(E))if(z.includes(","))if(z=z.replace(",",
"."),E=Number(z),isNaN(E))E=!0;else return"double";else E=!0;else return"double";else E=!0}return E&&!/^[-]?\d*[.,]?\d*$/.test(z)&&J(new Date(z),z)?"date":"string"}}).reduce((z,E)=>{if(void 0===z)return E;if(void 0===E)return z;if(z===E)return E;if("string"===z||"string"===E)return"string";if("double"===z||"double"===E)return"double"})}function J(C,q){if(!C||"[object Date]"!==Object.prototype.toString.call(C)||isNaN(C.getTime()))return!1;C=!0;if(!Q&&/\d+\W*$/.test(q)&&(q=q.match(/[a-zA-Z]{2,}/))){C=
!1;let z=0;for(;!C&&z<=q.length;)C=!G.test(q[z]),z++;C=!C}return C}const g=/^\s*"([\S\s]*)"\s*$/,w=/""/g,d=[","," ",";","|","\t"],p=function(){const C=f._parseInfo(),q=new RegExp("^"+C.regexp+"$"),z=new RegExp("["+C.group+"\\s\\xa0]","g"),E=C.factor;return O=>{O=q.exec(O);C.factor=E;if(!O)return NaN;let F=O[1];if(!O[1]){if(!O[2])return NaN;F=O[2];C.factor*=-1}F=F.replace(z,"").replace(C.decimal,".");return+F*C.factor}}(),G=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
Q=Number.isNaN((new Date("technology 10")).getTime()),T="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),aa="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");h.extractFieldNamesAndAliasesFromRow=u;h.inferDelimiterAndLocationInfo=function(C,q,z){C=C.trim();q=q?.trim();var E=[],O=Array.from(new Set([z?.delimiter,...d])).filter(F=>null!=F);for(const F of O){O=m(C,F).length;const H=m(q,F).length??O;1<O&&E.push({weight:Math.min(O,H),delimiter:F})}q=
E.sort(({weight:F},{weight:H})=>H-F).map(({delimiter:F})=>F);for(const F of q)if(E=u(C,F).names,E=A(E,z?.longitudeField,z?.latitudeField),E.longitudeFieldName&&E.latitudeFieldName)return{delimiter:F,locationInfo:E};return{delimiter:q[0],locationInfo:null}};h.inferFieldType=R;h.inferFields=function(C,q,z,E,O){const F=[];q=K(C,z,q);C=[];for(var H of q){if(10===C.length)break;C.push(H)}for(H=0;H<z.length;H++){const I=z[H];q=E[H];if(I===O.longitudeFieldName||I===O.latitudeFieldName)F.push({name:I,type:"esriFieldTypeDouble",
alias:q});else{var L=C.map(y=>y[I]);let x=void 0;switch(R(L)){case "integer":L="esriFieldTypeInteger";break;case "double":L="esriFieldTypeDouble";break;case "date":L="esriFieldTypeDate";x=36;break;default:L="esriFieldTypeString",x=255}F.push({name:I,type:L,alias:q,length:x})}}return F};h.isValidDate=J;h.parseNumber=p;h.parseRows=K;h.readRowParts=S;h.readRows=P;h.splitSingleRow=m;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string",
"../intl/locale"],function(h,f,la){function ba(A=la.getLocale()){A=A.toLowerCase();let R=A in u;if(!R){const d=A.split("-");1<d.length&&d[0]in u&&(A=d[0],R=!0);R||(A="en")}const [J,g,w="#,##0.###"]=u[A];return{decimal:J,group:g,pattern:w}}function P(A){A=A||{};var R=ba(A.locale);const J=A.pattern||R.pattern,g=R.group,w=R.decimal;let d=1;if(J.includes("%"))d/=100;else if(J.includes("\u2030"))d/=1E3;else if(J.includes("\u00a4"))throw Error("currency notation not supported");R=J.split(";");1===R.length&&
R.push("-"+R[0]);return{regexp:n(R,p=>{p="(?:"+f.escapeRegExpString(p,".")+")";return p.replace(m,G=>{const Q={signed:!1,separator:A.strict?g:[g,""],fractional:A.fractional,decimal:w,exponent:!1};G=G.split(".");let T=A.places;1===G.length&&1!==d&&(G[1]="###");1===G.length||0===T?Q.fractional=!1:(void 0===T&&(T=A.pattern?G[1].lastIndexOf("0")+1:Infinity),T&&null==A.fractional&&(Q.fractional=!0),!A.places&&T<G[1].length&&(T+=","+G[1].length),Q.places=T);G=G[0].split(",");1<G.length&&(Q.groupSize=G.pop().length,
1<G.length&&(Q.groupSize2=G.pop().length));return"("+S(Q)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:w,factor:d}}function S(A){A=A||{};"places"in A||(A.places=Infinity);"string"!==typeof A.decimal&&(A.decimal=".");"fractional"in A&&!/^0/.test(String(A.places))||(A.fractional=[!0,!1]);"exponent"in A||(A.exponent=[!0,!1]);"eSigned"in A||(A.eSigned=[!0,!1]);var R=K(A);const J=n(A.fractional,w=>{let d="";w&&0!==A.places&&(d="\\"+A.decimal,d=Infinity===A.places?"(?:"+d+"\\d+)?":d+("\\d{"+
A.places+"}"));return d},!0),g=n(A.exponent,w=>w?"([eE]"+K({signed:A.eSigned})+")":"");R+=J;J&&(R="(?:(?:"+R+")|(?:"+J+"))");return R+g}function K(A){A=A||{};"signed"in A||(A.signed=[!0,!1]);"separator"in A?"groupSize"in A||(A.groupSize=3):A.separator="";const R=n(A.signed,g=>g?"[-+]":"",!0),J=n(A.separator,g=>{if(!g)return"(?:\\d+)";g=f.escapeRegExpString(g);" "===g?g="\\s":"\u00a0"===g&&(g="\\s\\xa0");const w=A.groupSize,d=A.groupSize2;return d?(g="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+g+"]\\d{"+d+"})*["+
g+"]\\d{"+w+"})",0<w-d?"(?:"+g+"|(?:0|[1-9]\\d{0,"+(w-1)+"}))":g):"(?:0|[1-9]\\d{0,"+(w-1)+"}(?:["+g+"]\\d{"+w+"})*)"},!0);return R+J}const u={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],
it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},m=/[#0,]*[#0](?:\.0*#*)?/,n=(A,R,J)=>{if(!(A instanceof Array))return R(A);const g=[];for(let w=0;w<A.length;w++)g.push(R(A[w]));A=g.join("|");
return"("+(J?"?:":"")+A+")"};h._parseInfo=P;h.format=function(A,R){R={...R};var J=ba(R.locale);R.customs=J;J=R.pattern||J.pattern;if(isNaN(A)||Infinity===Math.abs(A))return null;var g=A;var w=R||{};var d=w.customs.group,p=w.customs.decimal;J=J.split(";");A=J[0];R=J[0>g?1:0]||"-"+A;if(R.includes("%"))g*=100;else if(R.includes("\u2030"))g*=1E3;else{if(R.includes("\u00a4"))throw Error("currency notation not supported");if(R.includes("E"))throw Error("exponential notation not supported");}J=m;var G=A.match(J);
if(!G)throw Error("unable to find a number expression in pattern: "+R);!1===w.fractional&&(w.places=0);A=R.replace;G=G[0];w=w={decimal:p,group:d,places:w.places,round:w.round};!0===w.places&&(w.places=0);Infinity===w.places&&(w.places=6);p=G.split(".");var Q="string"===typeof w.places&&w.places.indexOf(",");G=w.places;Q?G=w.places.substring(Q+1):0<=G||(G=(p[1]||[]).length);0>w.round||(g=Number(g.toFixed(Number(G))));d=String(Math.abs(g)).split(".");g=d[1]||"";p[1]||w.places?(Q&&(w.places=w.places.substring(0,
Q)),Q=void 0!==w.places?w.places:p[1]&&p[1].lastIndexOf("0")+1,Q>g.length&&(d[1]=g.padEnd(Number(Q),"0")),G<g.length&&(d[1]=g.substr(0,Number(G)))):d[1]&&d.pop();g=p[0].replace(",","");G=g.indexOf("0");-1!==G&&(G=g.length-G,G>d[0].length&&(d[0]=d[0].padStart(G,"0")),g.includes("#")||(d[0]=d[0].substr(d[0].length-G)));g=p[0].lastIndexOf(",");let T;if(-1!==g){var aa=p[0].length-g-1;p=p[0].substr(0,g);g=p.lastIndexOf(",");-1!==g&&(T=p.length-g-1)}p=[];for(g=d[0];g;)G=g.length-aa,p.push(0<G?g.substr(G):
g),g=0<G?g.slice(0,G):"",T&&(aa=T,T=void 0);d[0]=p.reverse().join(w.group||",");aa=d.join(w.decimal||".");return A.call(R,J,aa)};h.getCustoms=ba;h.parse=function(A,R){R=P(R);A=(new RegExp("^"+R.regexp+"$")).exec(A);if(!A)return NaN;let J=A[1];if(!A[1]){if(!A[2])return NaN;J=A[2];R.factor*=-1}J=J.replace(new RegExp("["+R.group+"\\s\\xa0]","g"),"").replace(R.decimal,".");return Number(J)*R.factor};h.regexp=function(A){return P(A).regexp};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},
"esri/intl/locale":function(){define(["exports"],function(h){function f(){return u??globalThis.navigator?.language??"en"}function la(){void 0===K&&(K=f());return K}function ba(R=la()){return/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(R)?.[1].toLowerCase()}function P(){const R=S??f();K!==R&&(K=R,[...A].forEach(J=>{J.call(null,R)}),[...n].forEach(J=>{J.call(null,R)}))}let S=void 0,K=void 0;const u=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,m={he:!0,ar:!0},n=[],A=[];globalThis.addEventListener?.("languagechange",
P);h.beforeLocaleChange=function(R){A.push(R);return{remove(){n.splice(A.indexOf(R),1)}}};h.getDefaultLocale=f;h.getLanguage=ba;h.getLocale=la;h.onLocaleChange=function(R){n.push(R);return{remove(){n.splice(n.indexOf(R),1)}}};h.prefersRTL=function(R=la()){R=ba(R);return void 0!==R&&(m[R]||!1)};h.setLocale=function(R){S=R?R:void 0;P()};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has",
"../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(h,f,la,ba,P){const S=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let K=1;h.createCapabilities=function(u,m){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:m,supportsDelete:m,supportsEditing:m,
supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:m,supportsExceedsLimitStatistics:!0},query:ba.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:m,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,
supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};h.createDefaultAttributesFunction=function(u,m){if(f("esri-csp-restrictions"))return()=>({[m]:null,...u});try{let n=`this.${m} = null;`;for(const R in u){const J=S.test(R)?`.${R}`:`["${R}"]`;n+=`this${J} = ${JSON.stringify(u[R])};`}const A=(new Function(`\n      return class AttributesClass$${K++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `))();
return()=>new A}catch(n){return()=>({[m]:null,...u})}};h.createDefaultTemplate=function(u={}){return[{name:"New Feature",description:"",prototype:{attributes:la.clone(u)}}]};h.createDrawingInfo=function(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?P.defaultPointSymbolJSON:"esriGeometryPolyline"===u?P.defaultPolylineSymbolJSON:P.defaultPolygonSymbolJSON}}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(h){const f=[252,146,31,255],la={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ba={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};h.defaultColor=f;h.defaultOutlineColor=[153,153,153,255];h.defaultPointSymbolJSON=la;h.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};h.defaultPolylineSymbolJSON=
ba;h.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};h.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};h.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};h.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(h,
f,la,ba,P,S,K,u,m,n,A,R,J,g,w,d,p,G,Q,T,aa,C){function q(H,L){var I=L.parsingOptions||{};const x={delimiter:I.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:I.latitudeField,longitudeFieldName:I.longitudeField}},y=x.layerDefinition={name:u.getFilename(L.url,E)||"csv",drawingInfo:z,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:I.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,
spatialReference:I.spatialReference||{wkid:4326}}};var l=G.readRows(H);L=l.next().value?.trim();l=l.next().value?.trim();if(!L)throw new P("csv-layer:empty-csv","CSV is empty",{csv:H});const {delimiter:t,locationInfo:W}=G.inferDelimiterAndLocationInfo(L,l,I);if(!t)throw new P("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:L,secondLine:l,parsingOptions:I});if(!W)throw new P("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:L,secondLine:l,parsingOptions:I});x.locationInfo=W;x.delimiter=t;const {names:ja,aliases:ta}=G.extractFieldNamesAndAliasesFromRow(L,t);H=G.inferFields(H,x.delimiter,ja,ta,x.locationInfo);if(I.fields?.length){I=new T(I.fields);for(var ya of H)(L=I.get(ya.name))&&Object.assign(ya,L)}H.some(Da=>"esriFieldTypeOID"===Da.type?(y.objectIdField=Da.name,!0):!1)||(ya={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},y.objectIdField=ya.name,H.unshift(ya));y.fields=
H;I=new T(y.fields);x.locationInfo&&(x.locationInfo.latitudeFieldName=I.get(x.locationInfo.latitudeFieldName).name,x.locationInfo.longitudeFieldName=I.get(x.locationInfo.longitudeFieldName).name);y.timeInfo&&(ya=y.timeInfo,ya.startTimeField&&((H=I.get(ya.startTimeField))?(ya.startTimeField=H.name,H.type="esriFieldTypeDate"):ya.startTimeField=null),ya.endTimeField&&((H=I.get(ya.endTimeField))?(ya.endTimeField=H.name,H.type="esriFieldTypeDate"):ya.endTimeField=null),ya.trackIdField&&(I=I.get(ya.trackIdField),
ya.trackIdField=I?I.name:null),ya.startTimeField||ya.endTimeField||(y.timeInfo=null));return x}const z=Q.createDrawingInfo("esriGeometryPoint"),E=["csv"],O=[0,0];let F=function(H,L){this.x=H;this.y=L};return function(){function H(){var I=this;this._queryEngine=null;this._snapshotFeatures=function(){var x=h._asyncToGenerator(function*(y){y=yield I._fetch(y);return I._createFeatures(y)});return function(y){return x.apply(this,arguments)}}()}var L=H.prototype;L.destroy=function(){this._queryEngine?.destroy();
this._queryEngine=null};L.load=function(){var I=h._asyncToGenerator(function*(x,y={}){this._loadOptions=x;[y]=yield Promise.all([this._fetch(y.signal),this._checkProjection(x?.parsingOptions?.spatialReference)]);x=q(y,x);this._locationInfo=x.locationInfo;this._delimiter=x.delimiter;this._queryEngine=this._createQueryEngine(x);y=yield this._createFeatures(y);this._queryEngine.featureStore.addMany(y);const {fullExtent:l,timeExtent:t}=yield this._queryEngine.fetchRecomputedExtents();x.layerDefinition.extent=
l;if(t){const {start:W,end:ja}=t;x.layerDefinition.timeInfo.timeExtent=[W,ja]}return x});return function(x){return I.apply(this,arguments)}}();L.applyEdits=function(){var I=h._asyncToGenerator(function*(){throw new P("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return I.apply(this,arguments)}}();L.queryFeatures=function(){var I=h._asyncToGenerator(function*(x={},y={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(x,
y.signal)});return function(){return I.apply(this,arguments)}}();L.queryFeatureCount=function(){var I=h._asyncToGenerator(function*(x={},y={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(x,y.signal)});return function(){return I.apply(this,arguments)}}();L.queryObjectIds=function(){var I=h._asyncToGenerator(function*(x={},y={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(x,y.signal)});return function(){return I.apply(this,arguments)}}();
L.queryExtent=function(){var I=h._asyncToGenerator(function*(x={},y={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(x,y.signal)});return function(){return I.apply(this,arguments)}}();L.querySnapping=function(){var I=h._asyncToGenerator(function*(x,y={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(x,y.signal)});return function(x){return I.apply(this,arguments)}}();L.refresh=function(){var I=h._asyncToGenerator(function*(x){this._loadOptions.customParameters=
x;this._snapshotTask?.abort();this._snapshotTask=ba.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(t=>{this._queryEngine.featureStore.clear();t&&this._queryEngine.featureStore.addMany(t)},t=>{this._queryEngine.featureStore.clear();K.isAbortError(t)||S.getLogger("esri.layers.CSVLayer").error(new P("csv-layer:refresh","An error occurred during refresh",{error:t}))});yield this._waitSnapshotComplete();const {fullExtent:y,timeExtent:l}=yield this._queryEngine.fetchRecomputedExtents();
return{extent:y,timeExtent:l}});return function(x){return I.apply(this,arguments)}}();L._waitSnapshotComplete=function(){var I=h._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return I.apply(this,arguments)}}();L._fetch=function(){var I=h._asyncToGenerator(function*(x){const {url:y,customParameters:l}=this._loadOptions;if(!y)throw new P("csv-layer:invalid-source",
"url not defined");const t=u.urlToObject(y);return(yield la(t.path,{query:{...t.query,...l},responseType:"text",signal:x})).data});return function(x){return I.apply(this,arguments)}}();L._createQueryEngine=function(I){const {objectIdField:x,fields:y,extent:l,timeInfo:t}=I.layerDefinition;I=new w({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new p.QueryEngine({fields:y,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:t,objectIdField:x,spatialReference:l.spatialReference||{wkid:4326},
cacheSpatialQueries:!0,featureStore:I})};L._createFeatures=function(){var I=h._asyncToGenerator(function*(x){const {latitudeFieldName:y,longitudeFieldName:l}=this._locationInfo,{objectIdField:t,fieldsIndex:W,spatialReference:ja}=this._queryEngine;let ta=[];const ya=[];var Da=W.fields.filter(Na=>Na.name!==t).map(Na=>Na.name),Ha=0,Fa={};for(const Na of W.fields)if("esriFieldTypeOID"!==Na.type&&"esriFieldTypeGlobalID"!==Na.type){const Ya=aa.getFieldDefaultValue(Na);void 0!==Ya&&(Fa[Na.name]=Ya)}x=G.parseRows(x,
Da,this._delimiter,Q.createDefaultAttributesFunction(Fa,t));for(var La of x)if(x=this._parseCoordinateValue(La[y]),Da=this._parseCoordinateValue(La[l]),null!=Da&&null!=x&&!isNaN(x)&&!isNaN(Da)){La[y]=x;La[l]=Da;for(var Ja in La)Ja!==y&&Ja!==l&&(W.isDateField(Ja)?(Fa=new Date(La[Ja]),La[Ja]=G.isValidDate(Fa,La[Ja])?Fa.getTime():null):W.isNumericField(Ja)&&(Fa=G.parseNumber(La[Ja]),isNaN(Fa)?La[Ja]=null:La[Ja]=Fa));La[t]=Ha;Ha++;ta.push(new F(Da,x));ya.push(La)}if(!A.equals({wkid:4326},ja))if(A.isWebMercator(ja))for(const Na of ta)[Na.x,
Na.y]=R.lngLatToXY(Na.x,Na.y,O);else ta=m.projectMany(n.jsonAdapter,ta,C.WGS84,ja,null,null);Ha=[];for(La=0;La<ta.length;La++){const {x:Na,y:Ya}=ta[La];Ja=ya[La];Ja[t]=La+1;Ha.push(new J.OptimizedFeature(new g([],[Na,Ya]),Ja,null,Ja[t]))}return Ha});return function(x){return I.apply(this,arguments)}}();L._parseCoordinateValue=function(I){if(null==I||""===I)return null;let x=G.parseNumber(I);if(isNaN(x)||181<Math.abs(x))x=parseFloat(I);return x};L._checkProjection=function(){var I=h._asyncToGenerator(function*(x){try{yield d.checkProjectionSupport(A.WGS84,
x)}catch{throw new P("csv-layer:projection-not-supported","Projection not supported");}});return function(x){return I.apply(this,arguments)}}();return H}()});