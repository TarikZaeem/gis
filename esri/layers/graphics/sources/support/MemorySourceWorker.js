// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(l,f,ma,Z,R,Q,F,u,k,n){function H(x,J){return x?J?4:3:J?3:2}function ba(x,J,da,V){if(x){if(da)return J&&V?r:lb;if(J&&V)return c}else if(J&&V)return lb;return ib}function K({scale:x,
translate:J},da){return Math.round((da-J[0])/x[0])}function m({scale:x,translate:J},da){return Math.round((J[1]-da)/x[1])}function y({scale:x,translate:J},da,V){return da*x[V]+J[V]}function e(x){x=x.coords;return{x:x[0],y:x[1]}}function p(x,J){x.coords[0]=J.x;x.coords[1]=J.y;return x}function L(x){x=x.coords;return{x:x[0],y:x[1],z:x[2]}}function W(x,J){x.coords[0]=J.x;x.coords[1]=J.y;x.coords[2]=J.z;return x}function U(x){x=x.coords;return{x:x[0],y:x[1],m:x[2]}}function aa(x,J){x.coords[0]=J.x;x.coords[1]=
J.y;x.coords[2]=J.m;return x}function G(x){x=x.coords;return{x:x[0],y:x[1],z:x[2],m:x[3]}}function q(x,J){x.coords[0]=J.x;x.coords[1]=J.y;x.coords[2]=J.z;x.coords[3]=J.m;return x}function w(x,J){return x&&J?q:x?W:J?aa:p}function D(x,J,da,V,ia){da=w(da,V);for(const {geometry:na,attributes:ra}of J)J=Z.isSome(na)?da(new n,na):null,x.push(new u.OptimizedFeature(J,ra,null,ia?ra[ia]:void 0));return x}function O(x,J,da,V){for(const {geometry:ia,attributes:na}of J)x.push({attributes:na,geometry:Z.isSome(ia)?
C(ia,da,V):null});return x}function C(x,J,da){if(Z.isNone(x))return null;const V=H(J,da),ia=[];for(let na=0;na<x.coords.length;na+=V){const ra=[];for(let S=0;S<V;S++)ra.push(x.coords[na+S]);ia.push(ra)}return J?da?{points:ia,hasZ:J,hasM:da}:{points:ia,hasZ:J}:da?{points:ia,hasM:da}:{points:ia}}function E(x,J,da,V,ia){da=H(da,V);for(const {geometry:na,attributes:ra}of J)J=Z.isSome(na)?N(new n,na,da):null,x.push(new u.OptimizedFeature(J,ra,null,ia?ra[ia]:void 0));return x}function N(x,J,da=H(J.hasZ,
J.hasM)){x.lengths[0]=J.points.length;const V=x.coords;let ia=0;for(const na of J.points)for(J=0;J<da;J++)V[ia++]=na[J];return x}function M(x,J,da){if(!x)return null;const V=H(J,da),{coords:ia,lengths:na}=x;x=[];let ra=0;for(const S of na){const ca=[];for(let pa=0;pa<S;pa++){const wa=[];for(let Ba=0;Ba<V;Ba++)wa.push(ia[ra++]);ca.push(wa)}x.push(ca)}return J?da?{paths:x,hasZ:J,hasM:da}:{paths:x,hasZ:J}:da?{paths:x,hasM:da}:{paths:x}}function B(x,J,da,V,ia){da=H(da,V);for(const {geometry:na,attributes:ra}of J)J=
Z.isSome(na)?z(new n,na,da):null,x.push(new u.OptimizedFeature(J,ra,null,ia?ra[ia]:void 0));return x}function z(x,J,da=H(J.hasZ,J.hasM)){const {lengths:V,coords:ia}=x;let na=0;for(const ra of J.paths){for(const S of ra)for(J=0;J<da;J++)ia[na++]=S[J];V.push(ra.length)}return x}function h(x,J,da){if(!x)return null;const V=H(J,da),{coords:ia,lengths:na}=x;x=[];let ra=0;for(const S of na){const ca=[];for(let pa=0;pa<S;pa++){const wa=[];for(let Ba=0;Ba<V;Ba++)wa.push(ia[ra++]);ca.push(wa)}x.push(ca)}return J?
da?{rings:x,hasZ:J,hasM:da}:{rings:x,hasZ:J}:da?{rings:x,hasM:da}:{rings:x}}function t(x,J,da,V,ia){for(const {geometry:na,centroid:ra,attributes:S}of J){J=Z.isSome(na)?P(new n,na,da,V):null;const ca=ia?S[ia]:void 0;Z.isSome(ra)?x.push(new u.OptimizedFeature(J,S,p(new n,ra),ca)):x.push(new u.OptimizedFeature(J,S,null,ca))}return x}function P(x,J,da=J.hasZ,V=J.hasM){ja(x,J.rings,da,V);return x}function ja(x,J,da,V){da=H(da,V);const {lengths:ia,coords:na}=x;V=0;Sa(x);for(const ra of J){for(const S of ra)for(J=
0;J<da;J++)na[V++]=S[J];ia.push(ra.length)}return x}function sa(x,J,da,V,ia,na){$a(x);if(!da){for(const ra of J)x.push(new u.OptimizedFeature(null,ra.attributes,null,na?ra.attributes[na]:void 0));return x}switch(da){case "esriGeometryPoint":return D(x,J,V,ia,na);case "esriGeometryMultipoint":return E(x,J,V,ia,na);case "esriGeometryPolyline":return B(x,J,V,ia,na);case "esriGeometryPolygon":return t(x,J,V,ia,na);default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`)),
$a(x)}return x}function za(x,J,da,V){x=x&&("coords"in x?x:x.geometry);if(Z.isNone(x))return null;switch(J){case "esriGeometryPoint":return J=e,da&&V?J=G:da?J=L:V&&(J=U),J(x);case "esriGeometryMultipoint":return C(x,da,V);case "esriGeometryPolyline":return M(x,da,V);case "esriGeometryPolygon":return h(x,da,V);default:return Ta.error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${J}'`)),null}}function Ea(x,J,da,V,ia){$a(x);if(Z.isNone(da)){for(const ra of J)x.push({attributes:ra.attributes});
return x}switch(da){case "esriGeometryPoint":da=e;V&&ia?da=G:V?da=L:ia&&(da=U);for(var na of J){const {geometry:ra,attributes:S}=na;V=Z.isSome(ra)?da(ra):null;x.push({attributes:S,geometry:V})}break;case "esriGeometryMultipoint":return O(x,J,V,ia);case "esriGeometryPolyline":for(const {geometry:ra,attributes:S}of J)x.push({attributes:S,geometry:Z.isSome(ra)?M(ra,V,ia):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:S,centroid:ca}of J)na=Z.isSome(ra)?h(ra,V,ia):null,Z.isSome(ca)?
(J=e(ca),x.push({attributes:S,centroid:J,geometry:na})):x.push({attributes:S,geometry:na});break;default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}return x}function Ha(x,J,da,V,ia,na,ra=da,S=V){Sa(x);if(Z.isNone(J)||!J.coords.length)return null;ia=jb[ia];const {coords:ca,lengths:pa}=J;J=H(da,V);const wa=H(da&&ra,V&&S);da=ba(da,V,ra,S);if(!pa.length)return da(x.coords,ca,0,0,K(na,ca[0]),m(na,ca[1])),Sa(x,J,0),x;let Ba,La=0,Ja,Pa=0;for(const Qa of pa){if(Qa<
ia)continue;let Ga=0;Ja=Pa;S=V=K(na,ca[La]);Ba=ra=m(na,ca[La+1]);da(x.coords,ca,Ja,La,S,Ba);Ga++;La+=J;Ja+=wa;for(let Ra=1;Ra<Qa;Ra++,La+=J)if(S=K(na,ca[La]),Ba=m(na,ca[La+1]),S!==V||Ba!==ra)da(x.coords,ca,Ja,La,S-V,Ba-ra),Ja+=wa,Ga++,V=S,ra=Ba;Ga>=ia&&(x.lengths.push(Ga),Pa=Ja)}$a(x.coords,Pa);return x.coords.length?x:null}function Fa(x,J,da,V,ia,na,ra){let S=V,ca=0;for(let wa=na+da;wa<ra;wa+=da){var pa=J[wa];const Ba=J[wa+1],La=J[ra],Ja=J[ra+1];let Pa=J[na],Qa=J[na+1],Ga=La-Pa,Ra=Ja-Qa;if(0!==Ga||
0!==Ra){const xa=((pa-Pa)*Ga+(Ba-Qa)*Ra)/(Ga*Ga+Ra*Ra);1<xa?(Pa=La,Qa=Ja):0<xa&&(Pa+=Ga*xa,Qa+=Ra*xa)}Ga=pa-Pa;Ra=Ba-Qa;pa=Ga*Ga+Ra*Ra;pa>S&&(ca=wa,S=pa)}S>V&&(ca-na>da&&Fa(x,J,da,V,ia,na,ca),ia(x,J,x.length,ca,J[ca],J[ca+1]),ra-ca>da&&Fa(x,J,da,V,ia,ca,ra))}function Ua(x,J,da,V,ia){const {coords:na,lengths:ra}=J;da=H(da,V);if(!na.length)return x!==J&&Sa(x),x;Z.assertIsSome(ia);const {originPosition:S,scale:ca,translate:pa}=ia;ia=va;ia.originPosition=S;V=ia.scale;V[0]=ca[0]??1;V[1]=-(ca[1]??1);V[2]=
ca[2]??1;V[3]=ca[3]??1;var wa=ia.translate;wa[0]=pa[0]??0;wa[1]=pa[1]??0;wa[2]=pa[2]??0;wa[3]=pa[3]??0;if(!ra.length){for(V=0;V<da;++V)x.coords[V]=y(ia,na[V],V);x!==J&&Sa(x,da,0);return x}wa=0;for(let La=0;La<ra.length;La++){const Ja=ra[La];x.lengths[La]=Ja;for(var Ba=0;Ba<da;++Ba)x.coords[wa+Ba]=y(ia,na[wa+Ba],Ba);Ba=x.coords[wa];let Pa=x.coords[wa+1];wa+=da;for(let Qa=1;Qa<Ja;Qa++,wa+=da){Ba+=na[wa]*V[0];Pa+=na[wa+1]*V[1];x.coords[wa]=Ba;x.coords[wa+1]=Pa;for(let Ga=2;Ga<da;++Ga)x.coords[wa+Ga]=
y(ia,na[wa+Ga],Ga)}}x!==J&&Sa(x,na.length,ra.length);return x}function Oa(x,J,da,V){let ia=0,na=x[V*J],ra=x[V*(J+1)];for(let S=1;S<da;S++){const ca=na+x[V*(J+S)],pa=ra+x[V*(J+S)+1],wa=(ca-na)*(pa+ra);na=ca;ra=pa;ia+=wa}return.5*ia}function Sa(x,J=0,da=0){$a(x.lengths,da);$a(x.coords,J)}function $a(x,J=0){x.length!==J&&(x.length=J)}const Ta=ma.getLogger("esri.layers.graphics.featureConversionUtils"),jb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ib=(x,
J,da,V,ia,na)=>{x[da]=ia;x[da+1]=na},lb=(x,J,da,V,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=J[V+2]},c=(x,J,da,V,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=J[V+3]},r=(x,J,da,V,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=J[V+2];x[da+3]=J[V+3]},ea=[],ka=[],va={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};l.convertFromFeature=function(x,J,da,V,ia){ea[0]=x;[x]=sa(ka,ea,J,da,V,ia);$a(ea);$a(ka);return x};l.convertFromFeatureSet=function(x,J){const da=new k,{hasM:V,hasZ:ia,features:na,objectIdFieldName:ra,
spatialReference:S,geometryType:ca,exceededTransferLimit:pa,transform:wa,fields:Ba}=x;Ba&&(da.fields=Ba);da.geometryType=ca??null;da.objectIdFieldName=ra??J??null;da.spatialReference=S??null;if(!da.objectIdFieldName)return Ta.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),da;na&&sa(da.features,na,ca,ia,V,da.objectIdFieldName);pa&&(da.exceededTransferLimit=pa);V&&(da.hasM=V);ia&&(da.hasZ=ia);wa&&(da.transform=wa);return da};l.convertFromFeatures=sa;l.convertFromGeometry=
function(x,J,da){if(Z.isNone(x))return null;const V=new n;"hasZ"in x&&null==J&&(J=x.hasZ);"hasM"in x&&null==da&&(da=x.hasM);if(F.isPoint(x))return w(null!=J?J:null!=x.z,null!=da?da:null!=x.m)(V,x);if(F.isPolygon(x))return P(V,x,J,da);if(F.isPolyline(x))return z(V,x,H(J,da));if(F.isMultipoint(x))return N(V,x,H(J,da));Ta.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${x}'`))};l.convertFromGraphics=function(x,J,da,V,ia,na){const ra=x.length;switch(da){case "esriGeometryPoint":D(x,
J,V,ia,na);break;case "esriGeometryMultipoint":E(x,J,V,ia,na);break;case "esriGeometryPolyline":B(x,J,V,ia,na);break;case "esriGeometryPolygon":t(x,J,V,ia,na);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}for(V=0;V<J.length;V++)x[V+ra].geometryType=da,x[V+ra].insertAfter=J[V].insertAfter,x[V+ra].groupId=J[V].groupId;return x};l.convertFromMultipoint=N;l.convertFromMultipointFeatures=E;l.convertFromNestedArray=ja;l.convertFromPoint=
function(x,J,da=w(null!=J.z,null!=J.m)){return da(x,J)};l.convertFromPointFeatures=D;l.convertFromPolygon=P;l.convertFromPolyline=z;l.convertFromPolylineFeatures=B;l.convertToFeature=function(x,J,da,V){ka[0]=x;Ea(ea,ka,J,da,V);x=ea[0];$a(ea);$a(ka);return x};l.convertToFeatureSet=function(x){const {objectIdFieldName:J,spatialReference:da,transform:V,fields:ia,hasM:na,hasZ:ra,features:S,geometryType:ca,exceededTransferLimit:pa,uniqueIdField:wa,queryGeometry:Ba,queryGeometryType:La}=x;x=Ea([],S,ca,
ra,na);const Ja=za(Ba,La,!1,!1);x={features:x,fields:ia,geometryType:ca,objectIdFieldName:J,spatialReference:da,uniqueIdField:wa,queryGeometry:Ja};V&&(x.transform=V);pa&&(x.exceededTransferLimit=pa);na&&(x.hasM=na);ra&&(x.hasZ=ra);return x};l.convertToFeatures=Ea;l.convertToGeometry=za;l.convertToMultipoint=C;l.convertToMultipointFeatures=O;l.convertToPoint=function(x,J,da){return x?J?da?G(x):L(x):da?U(x):e(x):null};l.convertToPolygon=h;l.convertToPolyline=M;l.deltaDecodeGeometry=function(x,J){if(Z.isNone(x))return null;
const da=x.clone(),V=x.coords;x=x.lengths;let ia=0;for(let S=0;S<x.length;S++){const ca=x[S];var na=V[J*ia],ra=V[J*ia+1];for(let pa=1;pa<ca;pa++)na+=V[J*(ia+pa)],ra+=V[J*(ia+pa)+1],da.coords[J*(ia+pa)]=na,da.coords[J*(ia+pa)+1]=ra;ia+=ca}return da};l.deltaEncodeGeometry=function(x,J){const da=x.clone(),V=x.coords;x=x.lengths;let ia=0;for(let ra=0;ra<x.length;ra++){const S=x[ra];let ca=V[J*ia];var na=V[J*ia+1];for(let pa=1;pa<S;pa++){const wa=V[J*(ia+pa)],Ba=V[J*(ia+pa)+1];na=Ba-na;da.coords[J*(ia+
pa)]=wa-ca;da.coords[J*(ia+pa)+1]=na;ca=wa;na=Ba}ia+=S}return da};l.generalizeOptimizedGeometry=function(x,J,da,V,ia,na,ra=da,S=V){Sa(x);if(!J||!J.coords.length)return null;ia=jb[ia];const {coords:ca,lengths:pa}=J;J=H(da,V);const wa=H(da&&ra,V&&S);da=ba(da,V,ra,S);if(!pa.length)return da(x.coords,ca,0,0,ca[0],ca[1]),Sa(x,J,0),x;V=0;na*=na;for(const Ba of pa){if(Ba<ia){V+=Ba*J;continue}ra=x.coords.length/wa;S=V;const La=V+(Ba-1)*J;da(x.coords,ca,x.coords.length,S,ca[S],ca[S+1]);Fa(x.coords,ca,J,na,
da,S,La);da(x.coords,ca,x.coords.length,La,ca[La],ca[La+1]);S=x.coords.length/wa-ra;S>=ia?x.lengths.push(S):$a(x.coords,ra*wa);V+=Ba*J}return x.coords.length?x:null};l.getBoundsOptimizedGeometry=function(x,J,da,V){if(Z.isNone(J)||!J.coords||!J.coords.length)return null;da=H(da,V);let ia=V=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let S=0;S<J.length;S+=da){const ca=J[S],pa=J[S+1];V=Math.min(V,ca);na=Math.max(na,ca);ia=Math.min(ia,
pa);ra=Math.max(ra,pa)}}R.is(x)?R.fromRectValues(x,V,ia,na,ra):Q.fromValues(V,ia,na,ra,x);return x};l.getQuantizedArea=function(x,J){const {coords:da,lengths:V}=x;let ia=x=0;for(let na=0;na<V.length;na++){const ra=V[na];ia+=Oa(da,x,ra,J);x+=ra}return Math.abs(ia)};l.getQuantizedBoundsOptimizedGeometry=function(x,J,da,V){da=H(da,V);const {lengths:ia,coords:na}=J;V=J=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,S=Number.NEGATIVE_INFINITY,ca=0;for(const pa of ia){let wa=na[ca],Ba=na[ca+1];
J=Math.min(wa,J);V=Math.min(Ba,V);ra=Math.max(wa,ra);S=Math.max(Ba,S);ca+=da;for(let La=1;La<pa;La++,ca+=da){const Ja=na[ca],Pa=na[ca+1];wa+=Ja;Ba+=Pa;0>Ja&&(J=Math.min(J,wa));0<Ja&&(ra=Math.max(ra,wa));0>Pa?V=Math.min(V,Ba):0<Pa&&(S=Math.max(S,Ba))}}x[0]=J;x[1]=V;x[2]=ra;x[3]=S;return x};l.getSignedQuantizedRingArea=Oa;l.quantizeOptimizedFeatureSet=function(x,J){const {geometryType:da,features:V,hasM:ia,hasZ:na}=J;if(!x)return J;for(let ra=0;ra<V.length;ra++){const S=V[ra],ca=S.weakClone();ca.geometry=
new n;Ha(ca.geometry,S.geometry,ia,na,da,x);S.centroid&&(ca.centroid=new n,Ha(ca.centroid,S.centroid,ia,na,"esriGeometryPoint",x));V[ra]=ca}J.transform=x;return J};l.quantizeOptimizedGeometry=Ha;l.quantizeX=K;l.quantizeY=m;l.removeCollinearVectices=function(x,J,da,V,ia){if(!J||!J.coords||!J.coords.length)return null;da=jb[da];const {coords:na,lengths:ra}=J;J=ba(V,ia,V,ia);V=H(V,ia);let S=ia=0,ca=0,pa=0;for(const La of ra){S=pa;J(x.coords,na,S,ia,na[ia],na[ia+1]);ia+=V;var wa=na[ia];let Ja=na[ia+1],
Pa=wa,Qa=Ja;var Ba=Ja/wa;S+=V;J(x.coords,na,S,ia,Pa,Qa);ia+=V;for(let Ga=2;Ga<La;Ga++){wa=na[ia];Ja=na[ia+1];const Ra=Ja/wa,xa=Ba===Ra||!isFinite(Ba)&&!isFinite(Ra);Ba=xa&&isFinite(Ra)?0<=Ba&&0<=Ra||0>=Ba&&0>=Ra:0<=Qa&&0<=Ja||0>=Qa&&0>=Ja;xa&&Ba?(Pa+=wa,Qa+=Ja):(Pa=wa,Qa=Ja,S+=V);J(x.coords,na,S,ia,Pa,Qa);ia+=V;Ba=Ra}S+=V;wa=(S-pa)/V;wa>=da&&(x.lengths[ca]=wa,pa=S,ca++)}x.coords.length>pa&&(x.coords.length=pa);x.lengths.length>ca&&(x.lengths.length=ca);return x.coords.length&&x.lengths.length?x:null};
l.removeZMValues=function(x,J,da,V,ia,na){Sa(x);x.lengths.push(...J.lengths);if(da===ia&&V===na)for(var ra=0;ra<J.coords.length;ra++)x.coords.push(J.coords[ra]);else for(ra=H(da,V),da=ba(da,V,ia,na),J=J.coords,V=0;V<J.length;V+=ra)da(x.coords,J,x.coords.length,V,J[V],J[V+1]);return x};l.unquantizeOptimizedFeatureSet=function(x){const {transform:J,features:da,hasM:V,hasZ:ia}=x;if(!J)return x;for(const na of da)Z.isSome(na.geometry)&&Ua(na.geometry,na.geometry,V,ia,J),Z.isSome(na.centroid)&&Ua(na.centroid,
na.centroid,V,ia,J);x.transform=null;return x};l.unquantizeOptimizedGeometry=Ua;l.unquantizeValue=y;l.unquantizeX=function(x,J){return y(x,J,0)};l.unquantizeY=function(x,J){return y(x,-J,1)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(l,f,ma,Z){function R(e=m){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Q(e,p,L,W,U,aa,G=R()){G[0]=e;G[1]=p;G[2]=L;G[3]=
W;G[4]=U;G[5]=aa;return G}function F(e){return e[0]>=e[3]?0:e[3]-e[0]}function u(e){return e[1]>=e[4]?0:e[4]-e[1]}function k(e){return e[2]>=e[5]?0:e[5]-e[2]}function n(e,p){return Math.max(p[0],e[0])<=Math.min(p[3],e[3])&&Math.max(p[1],e[1])<=Math.min(p[4],e[4])&&Math.max(p[2],e[2])<=Math.min(p[5],e[5])}function H(e,p){e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=p[3];e[4]=p[4];e[5]=p[5];return e}function ba(e){return 6===e.length}const K=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],m=[0,0,0,
0,0,0],y=R();l.NEGATIVE_INFINITY=K;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=m;l.allFinite=function(e){for(let p=0;6>p;p++)if(!isFinite(e[p]))return!1;return!0};l.center=function(e,p=[0,0,0]){p[0]=e[0]+F(e)/2;p[1]=e[1]+u(e)/2;p[2]=e[2]+k(e)/2;return p};l.contains=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[3]<=e[3]&&p[4]<=e[4]&&p[5]<=e[5]};l.containsPoint=function(e,p){return p[0]>=e[0]&&p[1]>=e[1]&&p[2]>=e[2]&&p[0]<=e[3]&&p[1]<=e[4]&&p[2]<=
e[5]};l.containsPointWithMargin=function(e,p,L){return p[0]>=e[0]-L&&p[1]>=e[1]-L&&p[2]>=e[2]-L&&p[0]<=e[3]+L&&p[1]<=e[4]+L&&p[2]<=e[5]+L};l.create=R;l.depth=u;l.diameter=function(e){const p=F(e),L=k(e);e=u(e);return Math.sqrt(p*p+L*L+e*e)};l.empty=function(e){return e?H(e,K):R(K)};l.equals=function(e,p,L){if(f.isNone(e)||f.isNone(p))return e===p;if(!ba(e)||!ba(p))return!1;if(L)for(let W=0;W<e.length;W++){if(!L(e[W],p[W]))return!1}else for(L=0;L<e.length;L++)if(e[L]!==p[L])return!1;return!0};l.expandWithAABB=
function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[3]);e[4]=Math.max(e[4],p[4]);e[5]=Math.max(e[5],p[5])};l.expandWithBuffer=function(e,p,L=0,W=p.length/3){let U=e[0],aa=e[1],G=e[2],q=e[3],w=e[4],D=e[5];for(let O=0;O<W;O++)U=Math.min(U,p[L+3*O]),aa=Math.min(aa,p[L+3*O+1]),G=Math.min(G,p[L+3*O+2]),q=Math.max(q,p[L+3*O]),w=Math.max(w,p[L+3*O+1]),D=Math.max(D,p[L+3*O+2]);e[0]=U;e[1]=aa;e[2]=G;e[3]=q;e[4]=w;e[5]=D};l.expandWithNestedArray=function(e,
p,L){const W=p.length;let U=e[0],aa=e[1],G=e[2],q=e[3],w=e[4],D=e[5];if(L)for(L=0;L<W;L++){var O=p[L];U=Math.min(U,O[0]);aa=Math.min(aa,O[1]);G=Math.min(G,O[2]);q=Math.max(q,O[0]);w=Math.max(w,O[1]);D=Math.max(D,O[2])}else for(L=0;L<W;L++)O=p[L],U=Math.min(U,O[0]),aa=Math.min(aa,O[1]),q=Math.max(q,O[0]),w=Math.max(w,O[1]);e[0]=U;e[1]=aa;e[2]=G;e[3]=q;e[4]=w;e[5]=D};l.expandWithOffset=function(e,p,L,W){e[0]=Math.min(e[0],e[0]+p);e[3]=Math.max(e[3],e[3]+p);e[1]=Math.min(e[1],e[1]+L);e[4]=Math.max(e[4],
e[4]+L);e[2]=Math.min(e[2],e[2]+W);e[5]=Math.max(e[5],e[5]+W)};l.expandWithRect=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[3]=Math.max(e[3],p[2]);e[4]=Math.max(e[4],p[3])};l.expandWithVec3=function(e,p){e[0]=Math.min(e[0],p[0]);e[1]=Math.min(e[1],p[1]);e[2]=Math.min(e[2],p[2]);e[3]=Math.max(e[3],p[0]);e[4]=Math.max(e[4],p[1]);e[5]=Math.max(e[5],p[2])};l.fromExtent=function(e,p=R()){p[0]=e.xmin;p[1]=e.ymin;p[2]=e.hasZ?e.zmin:-Infinity;p[3]=e.xmax;p[4]=e.ymax;p[5]=e.hasZ?e.zmax:
Infinity;return p};l.fromMinMax=function(e,p,L=R()){L[0]=e[0];L[1]=e[1];L[2]=e[2];L[3]=p[0];L[4]=p[1];L[5]=p[2];return L};l.fromRect=function(e,p){e[0]=p[0];e[1]=p[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=p[2];e[4]=p[3];e[5]=Number.POSITIVE_INFINITY;return e};l.fromRectValues=function(e,p,L,W,U){e[0]=p;e[1]=L;e[2]=Number.NEGATIVE_INFINITY;e[3]=W;e[4]=U;e[5]=Number.POSITIVE_INFINITY;return e};l.fromValues=Q;l.getMax=function(e,p){p[0]=e[3];p[1]=e[4];p[2]=e[5];return p};l.getMin=function(e,p){p[0]=e[0];
p[1]=e[1];p[2]=e[2];return p};l.height=k;l.intersects=n;l.intersectsClippingArea=function(e,p){return f.isNone(p)?!0:n(e,p)};l.is=ba;l.isPoint=function(e){return 0===F(e)&&0===u(e)&&0===k(e)};l.maximumDimension=function(e){return Math.max(F(e),k(e),u(e))};l.offset=function(e,p,L,W,U=e){U[0]=e[0]+p;U[1]=e[1]+L;U[2]=e[2]+W;U[3]=e[3]+p;U[4]=e[4]+L;U[5]=e[5]+W;return U};l.scale=function(e,p,L=e){const W=e[0]+F(e)/2,U=e[1]+u(e)/2,aa=e[2]+k(e)/2;L[0]=W+(e[0]-W)*p;L[1]=U+(e[1]-U)*p;L[2]=aa+(e[2]-aa)*p;L[3]=
W+(e[3]-W)*p;L[4]=U+(e[4]-U)*p;L[5]=aa+(e[5]-aa)*p;return L};l.set=H;l.setMax=function(e,p,L=e){L[3]=p[0];L[4]=p[1];L[5]=p[2];L!==e&&(L[0]=e[0],L[1]=e[1],L[2]=e[2]);return e};l.setMin=function(e,p,L=e){L[0]=p[0];L[1]=p[1];L[2]=p[2];L!==e&&(L[3]=e[3],L[4]=e[4],L[5]=e[5]);return L};l.size=function(e,p=[0,0,0]){p[0]=F(e);p[1]=u(e);p[2]=k(e);return p};l.toExtent=function(e,p){return isFinite(e[2])||isFinite(e[5])?new ma({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:p}):
new ma({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:p})};l.toRect=function(e,p){p||(p=Z.create());p[0]=e[0];p[1]=e[1];p[2]=e[3];p[3]=e[4];return p};l.width=F;l.wrap=function(e,p,L,W,U,aa){return Q(e,p,L,W,U,aa,y)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(l,f,ma,Z,R){function Q(m=K){return[m[0],m[1],m[2],m[3]]}function F(m,
y){m!==y&&(m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3]);return m}function u(m){return Z.isNone(m)||m[0]>=m[2]?0:m[2]-m[0]}function k(m){return m[1]>=m[3]?0:m[3]-m[1]}function n(m,y,e){return y>=m[0]&&e>=m[1]&&y<=m[2]&&e<=m[3]}function H(m){return null!=m&&4===m.length}const ba=[Infinity,Infinity,-Infinity,-Infinity],K=[0,0,0,0];l.NEGATIVE_INFINITY=ba;l.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];l.UNIT=[0,0,1,1];l.ZERO=K;l.allFinite=function(m){for(let y=0;4>y;y++)if(!isFinite(m[y]))return!1;
return!0};l.area=function(m){return u(m)*k(m)};l.center=function(m,y=[0,0]){y[0]=(m[0]+m[2])/2;y[1]=(m[1]+m[3])/2;return y};l.clone=function(m){return[m[0],m[1],m[2],m[3]]};l.contains=function(m,y){return y[0]>=m[0]&&y[2]<=m[2]&&y[1]>=m[1]&&y[3]<=m[3]};l.containsPoint=function(m,y){return n(m,y[0],y[1])};l.containsPointObject=function(m,y){return n(m,y.x,y.y)};l.containsPointWithMargin=function(m,y,e){return y[0]>=m[0]-e&&y[1]>=m[1]-e&&y[0]<=m[2]+e&&y[1]<=m[3]+e};l.containsXY=n;l.containsXYWithMargin=
function(m,y,e,p){return y>=m[0]-p&&e>=m[1]-p&&y<=m[2]+p&&e<=m[3]+p};l.copy=F;l.create=Q;l.distance=function(m,y){const e=(m[1]+m[3])/2,p=Math.max(Math.abs(y[0]-(m[0]+m[2])/2)-u(m)/2,0);m=Math.max(Math.abs(y[1]-e)-k(m)/2,0);return Math.sqrt(p*p+m*m)};l.empty=function(m){return m?F(m,ba):Q(ba)};l.equals=function(m,y){return H(m)&&H(y)?m[0]===y[0]&&m[1]===y[1]&&m[2]===y[2]&&m[3]===y[3]:m===y};l.expand=function(m,y,e){if(Z.isNone(y))F(e,m);else if("length"in y)if(H(y))e[0]=Math.min(m[0],y[0]),e[1]=Math.min(m[1],
y[1]),e[2]=Math.max(m[2],y[2]),e[3]=Math.max(m[3],y[3]);else{if(2===y.length||3===y.length)e[0]=Math.min(m[0],y[0]),e[1]=Math.min(m[1],y[1]),e[2]=Math.max(m[2],y[0]),e[3]=Math.max(m[3],y[1])}else switch(y.type){case "extent":e[0]=Math.min(m[0],y.xmin);e[1]=Math.min(m[1],y.ymin);e[2]=Math.max(m[2],y.xmax);e[3]=Math.max(m[3],y.ymax);break;case "point":e[0]=Math.min(m[0],y.x),e[1]=Math.min(m[1],y.y),e[2]=Math.max(m[2],y.x),e[3]=Math.max(m[3],y.y)}};l.expandPointInPlace=function(m,y){y[0]<m[0]&&(m[0]=
y[0]);y[0]>m[2]&&(m[2]=y[0]);y[1]<m[1]&&(m[1]=y[1]);y[1]>m[3]&&(m[3]=y[1])};l.expandWithNestedArray=function(m,y,e=m){const p=y.length;let L=m[0],W=m[1],U=m[2];m=m[3];for(let aa=0;aa<p;aa++){const G=y[aa];L=Math.min(L,G[0]);W=Math.min(W,G[1]);U=Math.max(U,G[0]);m=Math.max(m,G[1])}e[0]=L;e[1]=W;e[2]=U;e[3]=m;return e};l.fromExtent=function(m,y=Q()){y[0]=m.xmin;y[1]=m.ymin;y[2]=m.xmax;y[3]=m.ymax;return y};l.fromValues=function(m,y,e,p,L=Q()){L[0]=m;L[1]=y;L[2]=e;L[3]=p;return L};l.height=k;l.intersection=
function(m,y,e){if(Z.isNone(y))return F(e,m);const p=y[0],L=y[1],W=y[2];y=y[3];e[0]=ma.clamp(m[0],p,W);e[1]=ma.clamp(m[1],L,y);e[2]=ma.clamp(m[2],p,W);e[3]=ma.clamp(m[3],L,y);return e};l.intersects=function(m,y){return Math.max(y[0],m[0])<=Math.min(y[2],m[2])&&Math.max(y[1],m[1])<=Math.min(y[3],m[3])};l.intersectsSegment=function(m,y,e){const p=m[0],L=m[1],W=m[2];m=m[3];const {x:U,y:aa}=y,{x:G,y:q}=e;var w=(O,C)=>0>(q-aa)*O+(U-G)*C+(G*aa-U*q);y=w(p,m);e=w(W,m);const D=w(W,L);w=w(p,L);return y===e&&
e===D&&D===w&&w===y||U<p&&G<p||U>W&&G>W||aa>m&&q>m||aa<L&&q<L?!1:!0};l.intersectsSphere=function(m,y){const e=y[3];var p=Math.abs(y[0]-.5*(m[0]+m[2]));const L=.5*(m[2]-m[0]);if(p>e+L)return!1;var W=.5*(m[3]-m[1]);m=Math.abs(y[1]-.5*(m[1]+m[3]));if(m>e+W)return!1;if(p<L||m<W)return!0;p-=L;W=m-W;return p*p+W*W<=e*e};l.is=H;l.isPoint=function(m){return(0===u(m)||!isFinite(m[0]))&&(0===k(m)||!isFinite(m[1]))};l.offset=function(m,y,e,p=m){p[0]=m[0]+y;p[1]=m[1]+e;p[2]=m[2]+y;p[3]=m[3]+e;return p};l.pad=
function(m,y,e=m){e[0]=m[0]-y;e[1]=m[1]-y;e[2]=m[2]+y;e[3]=m[3]+y;return e};l.setMax=function(m,y,e=m){e[2]=y[0];e[3]=y[1];e!==m&&(e[0]=m[0],e[1]=m[1]);return m};l.setMin=function(m,y,e=m){e[0]=y[0];e[1]=y[1];e!==m&&(e[2]=m[2],e[3]=m[3]);return e};l.size=function(m,y){y[0]=m[2]-m[0];y[1]=m[3]-m[1]};l.toExtent=function(m,y){return new R({xmin:m[0],ymin:m[1],xmax:m[2],ymax:m[3],spatialReference:y})};l.width=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(l,f,ma){let Z=function(){function Q(F=null,u={},k,n){this.geometry=F;this.attributes=u;this.centroid=k;this.objectId=n;this.geohashY=this.geohashX=this.displayId=0}Q.prototype.weakClone=function(){const F=new Q(this.geometry,this.attributes,this.centroid,this.objectId);F.displayId=this.displayId;F.geohashX=this.geohashX;F.geohashY=this.geohashY;return F};return Q}(),R=function(Q){function F(){return Q.apply(this,arguments)||this}
f._inheritsLoose(F,Q);return F}(Z);l.OptimizedFeature=Z;l.OptimizedFeatureWithGeometry=R;l.hasGeometry=function(Q){return!(ma.isNone(Q.geometry)||!Q.geometry.coords||!Q.geometry.coords.length)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function l(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=
this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}l.prototype.weakClone=function(){const f=new l;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;f.geometryType=this.geometryType;f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;
f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f};return l}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function f(Z=[],R=[],Q=!1){this.lengths=Z??[];this.coords=R??[];this.hasIndeterminateRingOrder=Q}f.fromRect=function(Z){const [R,Q,F,
u]=Z;Z=F-R;const k=u-Q;return new f([5],[R,Q,Z,0,0,k,-Z,0,0,-k])};var ma=f.prototype;ma.forEachVertex=function(Z){let R=0;this.lengths.length||Z(this.coords[0],this.coords[1]);for(let Q=0;Q<this.lengths.length;Q++){const F=this.lengths[Q];for(let u=0;u<F;u++)Z(this.coords[2*(u+R)],this.coords[2*(u+R)+1]);R+=F}};ma.clone=function(Z){return Z?(Z.set(this.coords),new f(this.lengths.slice(),Z,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};
l._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Z,R)=>Z+R)}}]);return f}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(l){l.findLastObjectIdFromFeatures=function(f,ma){let Z=0;for(const R of ma)ma=R.attributes?.[f],"number"===typeof ma&&isFinite(ma)&&(Z=Math.max(Z,ma));return Z};l.initialObjectId=1;Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),function(l,f,ma,Z,R,Q,F,u,k,n,H){const ba=Q.create();return function(){function K(y){this.geometryInfo=
y;this._boundsStore=new k.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ma;this.featureAdapter=n.optimizedFeatureQueryEngineAdapter}var m=K.prototype;m.getFullExtent=function(y){if(R.isNone(this.fullBounds))return null;const [e,p,L,W]=this.fullBounds;return{xmin:e,ymin:p,xmax:L,ymax:W,spatialReference:H.cleanFromGeometryEngine(y)}};m.add=function(y){this._add(y);this._emitChanged()};m.addMany=function(y){for(const e of y)this._add(e);this._emitChanged()};m.clear=function(){this._featuresById.clear();
this._boundsStore.clear();this._emitChanged()};m.removeById=function(y){y=this._featuresById.get(y);if(!y)return null;this._remove(y);this._emitChanged();return y};m.removeManyById=function(y){this._boundsStore.invalidateIndex();for(const e of y)(y=this._featuresById.get(e))&&this._remove(y);this._emitChanged()};m.forEachBounds=function(y,e){for(const p of y)(y=this._boundsStore.get(p.objectId))&&e(Q.fromRect(ba,y))};m.getFeature=function(y){return this._featuresById.get(y)};m.has=function(y){return this._featuresById.has(y)};
m.forEach=function(y){this._featuresById.forEach(e=>y(e))};m.forEachInBounds=function(y,e){this._boundsStore.forEachInBounds(y,p=>{e(this._featuresById.get(p))})};m.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};m.sweep=function(){let y=!1;this._featuresById.forEach((e,p)=>{this._markedIds.has(p)||(y=!0,this._remove(e))});this._markedIds.clear();y&&this._emitChanged()};m._emitChanged=function(){this.events.emit("changed",void 0)};m._add=function(y){if(y){var e=
y.objectId;if(null==e)Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:y}));else{var p=this._featuresById.get(e);this._markedIds.add(e);if(p){y.displayId=p.displayId;var L=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(R.isSome(this.onFeatureAdd))this.onFeatureAdd(y);!R.isNone(y.geometry)&&y.geometry.coords&&y.geometry.coords.length?(L=u.getBoundsOptimizedGeometry(R.isSome(L)?L:F.create(),y.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),R.isSome(L)&&this._boundsStore.set(e,L)):this._boundsStore.set(e,null);this._featuresById.set(e,y)}}};m._remove=function(y){if(R.isSome(this.onFeatureRemove))this.onFeatureRemove(y);const e=y.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return y};l._createClass(K,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let y=0;this._featuresById.forEach(e=>{R.isSome(e.geometry)&&e.geometry.coords&&(y+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:y/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return K}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,f,ma,Z,R){let Q=function(){function F(){this._emitter=new F.EventEmitter(this)}var u=F.prototype;u.emit=function(k,n){return this._emitter.emit(k,n)};u.on=function(k,n){return this._emitter.on(k,n)};u.once=function(k,n){return this._emitter.once(k,n)};u.hasEventListener=function(k){return this._emitter.hasEventListener(k)};return F}();(function(F){let u=function(){function n(ba=null){this._target=ba;this._listenersMap=
null}var H=n.prototype;H.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};H.emit=function(ba,K){ba=this._listenersMap&&this._listenersMap.get(ba);if(!ba)return!1;const m=this._target||this;[...ba].forEach(y=>{y.call(m,K)});return 0<ba.length};H.on=function(ba,K){if(Array.isArray(ba)){var m=ba.map(y=>this.on(y,K));return Z.handlesGroup(m)}if(ba.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);m=this._listenersMap.get(ba)||[];m.push(K);this._listenersMap.set(ba,m);return{remove:()=>{const y=this._listenersMap&&this._listenersMap.get(ba)||[],e=y.indexOf(K);0<=e&&y.splice(e,1)}}};H.once=function(ba,K){const m=this.on(ba,y=>{m.remove();K.call(null,y)});return m};H.hasEventListener=function(ba){ba=this._listenersMap&&this._listenersMap.get(ba);return null!=ba&&0<ba.length};return n}();F.EventEmitter=u;F.EventedMixin=n=>{n=function(H){function ba(){var m=H.apply(this,
arguments)||this;m._emitter=new u;return m}l._inheritsLoose(ba,H);var K=ba.prototype;K.destroy=function(){this._emitter.clear()};K.emit=function(m,y){return this._emitter.emit(m,y)};K.on=function(m,y){return this._emitter.on(m,y)};K.once=function(m,y){return this._emitter.once(m,y)};K.hasEventListener=function(m){return this._emitter.hasEventListener(m)};return ba}(n);return n=f.__decorate([R.subclass("esri.core.Evented")],n)};let k=function(n){function H(){var K=n.apply(this,arguments)||this;K._emitter=
new Q.EventEmitter(l._assertThisInitialized(K));return K}l._inheritsLoose(H,n);var ba=H.prototype;ba.destroy=function(){this._emitter.clear()};ba.emit=function(K,m){return this._emitter.emit(K,m)};ba.on=function(K,m){return this._emitter.on(K,m)};ba.once=function(K,m){return this._emitter.once(K,m)};ba.hasEventListener=function(K){return this._emitter.hasEventListener(K)};return H}(ma);k=f.__decorate([R.subclass("esri.core.Evented")],k);F.EventedAccessor=k})(Q||(Q={}));return Q})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(l,f,ma,Z,R){function Q(k,n,H){F.minX=n[0];F.minY=n[1];F.maxX=n[2];F.maxY=n[3];k.search(F,H)}const F={minX:0,minY:0,maxX:0,maxY:0};let u=function(){function k(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,ma("esri-csp-restrictions")?H=>({minX:H[0],minY:H[1],maxX:H[2],
maxY:H[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const H=Array(this._idByBounds.size);let ba=0;this._idByBounds.forEach((K,m)=>{H[ba++]=m});this._indexInvalid=!1;this._index.clear();this._index.load(H)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(H=>this._idByBounds.has(H))))),this._boundsToLoad.length=0)}}var n=k.prototype;n.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();
this._idByBounds.clear();this._index.clear()};n.delete=function(H){const ba=this._boundsById.get(H);this._boundsById.delete(H);ba&&(this._idByBounds.delete(ba),this._indexInvalid||this._index.remove(ba))};n.forEachInBounds=function(H,ba){this._loadIndex();Q(this._index,H,K=>ba(this._idByBounds.get(K)))};n.get=function(H){return this._boundsById.get(H)};n.has=function(H){return this._boundsById.has(H)};n.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=
0)};n.set=function(H,ba){if(!this._indexInvalid){const K=this._boundsById.get(H);K&&(this._index.remove(K),this._idByBounds.delete(K))}this._boundsById.set(H,ba);ba&&(this._idByBounds.set(ba,H),this._indexInvalid||(this._boundsToLoad.push(ba),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(k,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const H=R.empty();for(const ba of this._boundsById.values())ba&&(H[0]=Math.min(ba[0],H[0]),H[1]=Math.min(ba[1],H[1]),
H[2]=Math.max(ba[2],H[2]),H[3]=Math.max(ba[3],H[3]));return H}},{key:"valid",get:function(){return!this._indexInvalid}}]);return k}();l.BoundsStore=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,f,ma,Z,R,Q){function F(D,O){u(D,0,D.children.length,O,D)}function u(D,O,C,E,N){N||(N=
new q([]));N.minX=Infinity;N.minY=Infinity;N.maxX=-Infinity;N.maxY=-Infinity;for(let M=O,B;M<C;M++)B=D.children[M],k(N,D.leaf?E(B):B);return N}function k(D,O){D.minX=Math.min(D.minX,O.minX);D.minY=Math.min(D.minY,O.minY);D.maxX=Math.max(D.maxX,O.maxX);D.maxY=Math.max(D.maxY,O.maxY)}function n(D,O){return D.minX-O.minX}function H(D,O){return D.minY-O.minY}function ba(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function K(D){return D.maxX-D.minX+(D.maxY-D.minY)}function m(D,O){return D.minX<=O.minX&&D.minY<=
O.minY&&O.maxX<=D.maxX&&O.maxY<=D.maxY}function y(D,O){return O.minX<=D.maxX&&O.minY<=D.maxY&&O.maxX>=D.minX&&O.maxY>=D.minY}function e(D,O,C,E,N){for(O=[O,C];O.length;){C=Z.assumeNonNull(O.pop());const M=Z.assumeNonNull(O.pop());if(C-M<=E)continue;const B=M+Math.ceil((C-M)/E/2)*E;Q.quickselect(D,B,M,C,N);O.push(M,B,B,C)}}let p=function(){function D(C=9,E){this._compareMinX=n;this._compareMinY=H;this._toBBox=N=>N;this._maxEntries=Math.max(4,C||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));
E&&("function"===typeof E?this._toBBox=E:this._initFormat(E));this.clear()}var O=D.prototype;O.destroy=function(){this.clear();L.prune();W.prune();U.prune();aa.prune()};O.all=function(C){this._all(this._data,C)};O.search=function(C,E){let N=this._data;const M=this._toBBox;if(y(C,N))for(L.clear();N;){for(let B=0,z=N.children.length;B<z;B++){const h=N.children[B],t=N.leaf?M(h):h;y(C,t)&&(N.leaf?E(h):m(C,t)?this._all(h,E):L.push(h))}N=L.pop()}};O.collides=function(C){let E=this._data;const N=this._toBBox;
if(!y(C,E))return!1;for(L.clear();E;){for(let M=0,B=E.children.length;M<B;M++){const z=E.children[M],h=E.leaf?N(z):z;if(y(C,h)){if(E.leaf||m(C,h))return!0;L.push(z)}}E=L.pop()}return!1};O.load=function(C){if(!C.length)return this;if(C.length<this._minEntries){for(let E=0,N=C.length;E<N;E++)this.insert(C[E]);return this}C=this._build(C.slice(0,C.length),0,C.length-1,0);if(this._data.children.length)if(this._data.height===C.height)this._splitRoot(this._data,C);else{if(this._data.height<C.height){const E=
this._data;this._data=C;C=E}this._insert(C,this._data.height-C.height-1,!0)}else this._data=C;return this};O.insert=function(C){C&&this._insert(C,this._data.height-1);return this};O.clear=function(){this._data=new q([]);return this};O.remove=function(C){if(!C)return this;let E=this._data,N=null,M=0,B=!1,z;const h=this._toBBox(C);U.clear();for(aa.clear();E||0<U.length;){E||(E=Z.assumeNonNull(U.pop()),N=U.data[U.length-1],M=aa.pop()??0,B=!0);if(E.leaf&&(z=ma.indexOf(E.children,C,E.children.length,E.indexHint),
-1!==z)){E.children.splice(z,1);U.push(E);this._condense(U);break}B||E.leaf||!m(E,h)?N?(M++,E=N.children[M],B=!1):E=null:(U.push(E),aa.push(M),M=0,N=E,E=E.children[0])}return this};O.toJSON=function(){return this._data};O.fromJSON=function(C){this._data=C;return this};O._all=function(C,E){for(W.clear();C;){if(!0===C.leaf)for(const N of C.children)E(N);else W.pushArray(C.children);C=W.pop()??null}};O._build=function(C,E,N,M){var B=N-E+1,z=this._maxEntries;if(B<=z)return C=new q(C.slice(E,N+1)),F(C,
this._toBBox),C;M||(M=Math.ceil(Math.log(B)/Math.log(z)),z=Math.ceil(B/z**(M-1)));const h=new w([]);h.height=M;B=Math.ceil(B/z);z=B*Math.ceil(Math.sqrt(z));for(e(C,E,N,z,this._compareMinX);E<=N;E+=z){const t=Math.min(E+z-1,N);e(C,E,t,B,this._compareMinY);for(let P=E;P<=t;P+=B)h.children.push(this._build(C,P,Math.min(P+B-1,t),M-1))}F(h,this._toBBox);return h};O._chooseSubtree=function(C,E,N,M){for(;;){M.push(E);if(!0===E.leaf||M.length-1===N)break;let B=Infinity,z=Infinity,h=void 0;for(let t=0,P=E.children.length;t<
P;t++){const ja=E.children[t],sa=ba(ja),za=(Math.max(ja.maxX,C.maxX)-Math.min(ja.minX,C.minX))*(Math.max(ja.maxY,C.maxY)-Math.min(ja.minY,C.minY))-sa;za<z?(z=za,B=sa<B?sa:B,h=ja):za===z&&sa<B&&(B=sa,h=ja)}E=h||E.children[0]}return E};O._insert=function(C,E,N){var M=this._toBBox;N=N?C:M(C);U.clear();M=this._chooseSubtree(N,this._data,E,U);M.children.push(C);for(k(M,N);0<=E;)if(U.data[E].children.length>this._maxEntries)this._split(U,E),E--;else break;this._adjustParentBBoxes(N,U,E)};O._split=function(C,
E){const N=C.data[E];var M=N.children.length;const B=this._minEntries;this._chooseSplitAxis(N,B,M);(M=this._chooseSplitIndex(N,B,M))?(M=N.children.splice(M,N.children.length-M),M=N.leaf?new q(M):new w(M),M.height=N.height,F(N,this._toBBox),F(M,this._toBBox),E?C.data[E-1].children.push(M):this._splitRoot(N,M)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};O._splitRoot=function(C,E){this._data=new w([C,E]);this._data.height=C.height+1;F(this._data,this._toBBox)};
O._chooseSplitIndex=function(C,E,N){let M,B,z=void 0;M=B=Infinity;for(let t=E;t<=N-E;t++){var h=u(C,0,t,this._toBBox);const P=u(C,t,N,this._toBBox),ja=Math.max(0,Math.min(h.maxX,P.maxX)-Math.max(h.minX,P.minX))*Math.max(0,Math.min(h.maxY,P.maxY)-Math.max(h.minY,P.minY));h=ba(h)+ba(P);ja<M?(M=ja,z=t,B=h<B?h:B):ja===M&&h<B&&(B=h,z=t)}return z};O._chooseSplitAxis=function(C,E,N){const M=C.leaf?this._compareMinX:n,B=C.leaf?this._compareMinY:H,z=this._allDistMargin(C,E,N,M);E=this._allDistMargin(C,E,N,
B);z<E&&C.children.sort(M)};O._allDistMargin=function(C,E,N,M){C.children.sort(M);M=this._toBBox;var B=u(C,0,E,M);const z=u(C,N-E,N,M);let h=K(B)+K(z);for(let t=E;t<N-E;t++){const P=C.children[t];k(B,C.leaf?M(P):P);h+=K(B)}for(N=N-E-1;N>=E;N--)B=C.children[N],k(z,C.leaf?M(B):B),h+=K(z);return h};O._adjustParentBBoxes=function(C,E,N){for(;0<=N;N--)k(E.data[N],C)};O._condense=function(C){for(let E=C.length-1;0<=E;E--){const N=C.data[E];if(0===N.children.length)if(0<E){const M=C.data[E-1],B=M.children;
B.splice(ma.indexOf(B,N,B.length,M.indexHint),1)}else this.clear();else F(N,this._toBBox)}};O._initFormat=function(C){const E=["return a"," - b",";"];this._compareMinX=new Function("a","b",E.join(C[0]));this._compareMinY=new Function("a","b",E.join(C[1]));this._toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+C[3]+"};")};return D}();const L=new R,W=new R,U=new R,aa=new R({deallocator:void 0});R=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=
-Infinity};let G=function(D){function O(){var C=D.apply(this,arguments)||this;C.height=1;C.indexHint=new ma.PositionHint;return C}f._inheritsLoose(O,D);return O}(R),q=function(D){function O(C){var E=D.call(this)||this;E.children=C;E.leaf=!0;return E}f._inheritsLoose(O,D);return O}(G),w=function(D){function O(C){var E=D.call(this)||this;E.children=C;E.leaf=!1;return E}f._inheritsLoose(O,D);return O}(G);l.BBox=R;l.PooledRBush=p;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],
function(l){var f={};(function(ma){(function(Z){Z=Z();void 0!==Z&&(ma.exports=Z)})(function(){function Z(F,u,k,n,H){for(;n>k;){if(600<n-k){var ba=n-k+1,K=u-k+1,m=Math.log(ba),y=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*y*(ba-y)/ba)*(0>K-ba/2?-1:1);Z(F,u,Math.max(k,Math.floor(u-K*y/ba+m)),Math.min(n,Math.floor(u+(ba-K)*y/ba+m)),H)}ba=F[u];K=k;y=n;R(F,k,u);for(0<H(F[n],ba)&&R(F,k,n);K<y;){R(F,K,y);K++;for(y--;0>H(F[K],ba);)K++;for(;0<H(F[y],ba);)y--}0===H(F[k],ba)?R(F,k,y):(y++,R(F,y,n));y<=u&&(k=y+1);u<=
y&&(n=y-1)}}function R(F,u,k){var n=F[u];F[u]=F[k];F[k]=n}function Q(F,u){return F<u?-1:F>u?1:0}return function(F,u,k,n,H){Z(F,u,k||0,n||F.length-1,H||Q)}})})({get exports(){return f},set exports(ma){f=ma}});l.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,f,ma,Z,R){l.optimizedFeatureQueryEngineAdapter={getObjectId(Q){return Q.objectId},getAttributes(Q){return Q.attributes},
getAttribute(Q,F){return Q.attributes[F]},cloneWithGeometry(Q,F){return new Z.OptimizedFeature(F,Q.attributes,null,Q.objectId)},getGeometry(Q){return Q.geometry},getCentroid(Q,F){f.isNone(Q.centroid)&&(Q.centroid=ma.getCentroidOptimizedGeometry(new R,Q.geometry,F.hasZ,F.hasM));return Q.centroid}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(l,f){function ma(R,Q,F,u,k,n,H=1){n=k?n?4:3:n?3:2;
let ba=F,K=F+n,m=0,y=0,e=F=0,p=0;for(let L=0,W=u-1;L<W;L++,ba+=n,K+=n){u=Q[ba];const U=Q[ba+1],aa=Q[ba+2],G=Q[K],q=Q[K+1],w=Q[K+2];let D=u*q-G*U;e+=D;m+=(u+G)*D;y+=(U+q)*D;k&&(D=u*w-G*aa,F+=(aa+w)*D,p+=D);u<R[0]&&(R[0]=u);u>R[1]&&(R[1]=u);U<R[2]&&(R[2]=U);U>R[3]&&(R[3]=U);k&&(aa<R[4]&&(R[4]=aa),aa>R[5]&&(R[5]=aa))}0<e*H&&(e*=-1);0<p*H&&(p*=-1);if(!e)return null;R=[m,y,.5*e];k&&(R[3]=F,R[4]=.5*p);return R}function Z(R,Q,F,u,k){k=u?k?4:3:k?3:2;let n=Q,H=Q+k,ba=0,K=0,m=0,y=0;for(let W=0,U=F-1;W<U;W++,
n+=k,H+=k){var e=R[n];const aa=R[n+1],G=R[n+2],q=R[H],w=R[H+1],D=R[H+2];if(u){var p=q-e;var L=w-aa;const O=D-G;p=Math.sqrt(p*p+L*L+O*O)}else p=q-e,L=w-aa,p=Math.sqrt(p*p+L*L);p&&(ba+=p,u?(e=[e+.5*(q-e),aa+.5*(w-aa),G+.5*(D-G)],K+=p*e[0],m+=p*e[1],y+=p*e[2]):(e=[e+.5*(q-e),aa+.5*(w-aa)],K+=p*e[0],m+=p*e[1]))}return 0<ba?u?[K/ba,m/ba,y/ba]:[K/ba,m/ba]:0<F?u?[R[Q],R[Q+1],R[Q+2]]:[R[Q],R[Q+1]]:null}l.getCentroidOptimizedGeometry=function(R,Q,F,u,k){if(f.isNone(Q)||!Q.lengths.length)return null;const n=
"upperLeft"===k?.originPosition?-1:1;R.lengths.length&&(R.lengths.length=0);R.coords.length&&(R.coords.length=0);k=R.coords;const H=[],ba=F?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:K,coords:m}=Q,y=F?u?4:3:u?3:2;let e=0;for(var p of K){const L=ma(ba,m,e,p,F,u,n);L&&H.push(L);e+=p*
y}H.sort((L,W)=>{let U=n*L[2]-n*W[2];0===U&&F&&(U=L[4]-W[4]);return U});H.length&&(p=6*H[0][2],k[0]=H[0][0]/p,k[1]=H[0][1]/p,F&&(p=6*H[0][4],k[2]=0!==p?H[0][3]/p:0),k[0]<ba[0]||k[0]>ba[1]||k[1]<ba[2]||k[1]>ba[3]||F&&(k[2]<ba[4]||k[2]>ba[5]))&&(k.length=0);if(!k.length)if(Q=Q.lengths[0]?Z(m,0,K[0],F,u):null)k[0]=Q[0],k[1]=Q[1],F&&2<Q.length&&(k[2]=Q[2]);else return null;return R};l.lineCentroid=Z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m){function y(){y=ma._asyncToGenerator(function*(M,B,z){const {outFields:h,orderByFields:t,groupByFieldsForStatistics:P,outStatistics:ja}=M;if(h)for(var sa=0;sa<h.length;sa++)h[sa]=h[sa].trim();if(t)for(sa=0;sa<t.length;sa++)t[sa]=t[sa].trim();if(P)for(sa=0;sa<P.length;sa++)P[sa]=P[sa].trim();if(ja)for(sa=0;sa<ja.length;sa++)ja[sa].onStatisticField&&(ja[sa].onStatisticField=ja[sa].onStatisticField.trim());M.geometry&&!M.outSR&&(M.outSR=M.geometry.spatialReference);
return e(M,B,z)});return y.apply(this,arguments)}function e(M,B,z){return p.apply(this,arguments)}function p(){p=ma._asyncToGenerator(function*(M,B,z){if(!M)return null;var {where:h}=M;M.where=h=h&&h.trim();if(!h||/^1 *= *1$/.test(h)||B&&B===h)M.where=null;if(!M.geometry)return M;B=yield W(M);M.distance=0;M.units=null;"esriSpatialRelEnvelopeIntersects"===M.spatialRel&&({spatialReference:h}=M.geometry,B=u.getGeometryExtent(B),B.spatialReference=h);if(B){yield m.checkProjectionSupport(B.spatialReference,
z);h=B.spatialReference;B=L(B,z)&&k.isExtent(B)?{spatialReference:h,rings:[[[B.xmin,B.ymin],[B.xmin,B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]]}:B;h=(yield n.normalizeCentralMeridian(k.fromJSON(B)))[0];if(R.isNone(h))throw w;const t="quantizationParameters"in M&&M.quantizationParameters?.tolerance||"maxAllowableOffset"in M&&M.maxAllowableOffset||0;B=t&&L(B,z)?{densificationStep:8*t}:void 0;h=h.toJSON();B=yield m.project(h,h.spatialReference,z,B);if(!B)throw w;B.spatialReference=z;M.geometry=
B}return M});return p.apply(this,arguments)}function L(M,B){if(!M)return!1;const z=M.spatialReference;return(k.isExtent(M)||k.isPolygon(M)||k.isPolyline(M))&&!H.equals(z,B)&&!F.canProjectWithoutEngine(z,B)}function W(M){return U.apply(this,arguments)}function U(){U=ma._asyncToGenerator(function*(M){const {distance:B,units:z}=M,h=M.geometry;if(null==B||"vertexAttributes"in h)return h;var t=h.spatialReference;M=z?q.fromJSON(z):Q.getUnitString(t);t=t&&(H.isGeographic(t)||H.isWebMercator(t))?h:yield m.checkProjectionSupport(t,
H.WGS84).then(()=>m.project(h,H.WGS84));return(yield aa())(t.spatialReference,t,B,M)});return U.apply(this,arguments)}function aa(){return G.apply(this,arguments)}function G(){G=ma._asyncToGenerator(function*(){return(yield new Promise((M,B)=>l(["../../../geometry/geometryEngineJSON"],M,B))).geodesicBuffer});return G.apply(this,arguments)}const q=new Z.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),w=Object.freeze({}),D=new K,O=new K,C=new K,E={esriGeometryPoint:ba.convertToPoint,esriGeometryPolyline:ba.convertToPolyline,esriGeometryPolygon:ba.convertToPolygon,esriGeometryMultipoint:ba.convertToMultipoint},N=(M,B)=>"_geVersion"!==M?B:void 0;f.QUERY_ENGINE_EMPTY_RESULT=w;f.cleanFromGeometryEngine=function(M){return M&&"_geVersion"in M?JSON.parse(JSON.stringify(M,N)):M};f.getGeometry=function(M,B,z,h,t,P,ja=B,sa=z){const za=B&&ja,Ea=z&&sa;h=R.isSome(h)?
"coords"in h?h:h.geometry:null;if(R.isNone(h))return null;if(t)return B=ba.generalizeOptimizedGeometry(O,h,B,z,M,t,ja,sa),P&&(B=ba.quantizeOptimizedGeometry(C,B,za,Ea,M,P)),E[M]?.(B,za,Ea)??null;if(P)return P=ba.quantizeOptimizedGeometry(C,h,B,z,M,P,ja,sa),E[M]?.(P,za,Ea)??null;ba.removeZMValues(D,h,B,z,ja,sa);return E[M]?.(D,za,Ea)??null};f.normalizeQuery=function(M,B,z){return y.apply(this,arguments)};f.normalizeQueryLike=e;f.transformCentroid=function(M,B,z,h=M.hasZ,t=M.hasM){if(R.isNone(B))return null;
const P=M.hasZ&&h,ja=M.hasM&&t;return z?(M=ba.quantizeOptimizedGeometry(C,B,M.hasZ,M.hasM,"esriGeometryPoint",z,h,t),ba.convertToPoint(M,P,ja)):ba.convertToPoint(B,P,ja)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m,y,e,p,L,W,U,aa,G,q,w,D,O,C){function E(){return!!gb&&p.isLoaded()}function N(T){Q.isNone(Gb)&&(Gb=Promise.all([p.load(),(new Promise((ha,X)=>l(["../chunks/geometryEngineBase"],ha,X))).then(ha=>ha.geometryEngineBase),new Promise((ha,X)=>l(["./geometryAdapters/hydrated"],ha,X))]));return Gb.then(([,ha,{hydratedAdapter:X}])=>{F.throwIfAborted(T);db=X;gb=ha.default;gb._enableProjection(p.pe);nb.notify()})}function M(T,ha,X=null,qa=null){return Array.isArray(T)?0===
T.length?[]:B(db,T,T[0].spatialReference,ha,X,qa):B(db,[T],T.spatialReference,ha,X,qa)[0]}function B(T,ha,X,qa,Ca=null,Da=null){if(Q.isNone(X)||Q.isNone(qa))return ha;if(P(X,qa,Ca))return ha.map(Na=>Q.unwrap(sa(Na,X,qa)));if(Q.isNone(Ca)){const Na=w.cacheKey(X,qa);void 0!==Pb[Na]?Ca=Pb[Na]:(Ca=h(X,qa,void 0),Q.isNone(Ca)&&(Ca=new w),Pb[Na]=Ca)}if(Q.isNone(gb)||Q.isNone(T))throw new Wb;return Q.isSome(Da)?gb._project(T,ha,X,qa,Ca,Da):gb._project(T,ha,X,qa,Ca)}function z(T,ha){if(!E())for(const X of T)if(Q.isSome(X)&&
!D.equals(X.spatialReference,ha)&&D.isValid(X.spatialReference)&&D.isValid(ha)&&!P(X.spatialReference,ha))return k.trackAccess(nb),{pending:N(),geometries:null};return{pending:null,geometries:T.map(X=>Q.isNone(X)?null:D.equals(X.spatialReference,ha)?X:D.isValid(X.spatialReference)&&D.isValid(ha)?t(X,ha):null)}}function h(T,ha,X=null){if(Q.isNone(T)||Q.isNone(ha))return null;if(Q.isNone(gb)||Q.isNone(db))throw new Wb;T=gb._getTransformation(db,T,ha,X,X?.spatialReference);return null!==T?w.fromGE(T):
null}function t(T,ha){try{const X=M(T,ha);if(null==X)return null;"xmin"in T&&"xmin"in X&&(X.zmin=T.zmin,X.zmax=T.zmax);const qa=C.getGeometryZScaler(X.type,T.spatialReference,ha);Q.isSome(qa)&&qa(X);return X}catch(X){if(!(X instanceof Wb))throw X;return null}}function P(T,ha,X){return X?!1:D.equals(T,ha)?!0:D.isValid(T)&&D.isValid(ha)&&!!ub(T,ha,Xb)}function ja(){ja=ma._asyncToGenerator(function*(T,ha,X,qa){if(E())return F.waitTick(qa);if(Array.isArray(T))for(const {source:Ca,dest:Da,geographicTransformation:Na}of T){if(!P(Ca,
Da,Na))return N(qa)}else if(!P(T,ha,X))return N(qa);return F.waitTick(qa)});return ja.apply(this,arguments)}function sa(T,ha,X){return T?"x"in T?za(T,ha,new L,X,0):"xmin"in T?Ua(T,ha,new y,X,0):"rings"in T?Fa(T,ha,new W,X,0):"paths"in T?Ha(T,ha,new U,X,0):"points"in T?Ea(T,ha,new e,X,0):null:null}function za(T,ha,X,qa,Ca){Ya[0]=T.x;Ya[1]=T.y;const Da=T.z;Ya[2]=void 0!==Da?Da:Ca;if(!Ta(Ya,ha,0,Ya,qa,0,1))return null;X.x=Ya[0];X.y=Ya[1];X.spatialReference=qa;void 0===Da?(X.z=void 0,X.hasZ=!1):(X.z=
Ya[2],X.hasZ=!0);void 0===T.m?(X.m=void 0,X.hasM=!1):(X.m=T.m,X.hasM=!0);return X}function Ea(T,ha,X,qa,Ca){const {points:Da,hasZ:Na,hasM:Va}=T;T=[];const mb=Da.length,kb=[];for(var hb of Da)kb.push(hb[0],hb[1],Na?hb[2]:Ca);if(!Ta(kb,ha,0,kb,qa,0,mb))return null;for(ha=0;ha<mb;++ha){Ca=3*ha;hb=kb[Ca];const xb=kb[Ca+1];Na&&Va?T.push([hb,xb,kb[Ca+2],Da[ha][3]]):Na?T.push([hb,xb,kb[Ca+2]]):Va?T.push([hb,xb,Da[ha][2]]):T.push([hb,xb])}X.points=T;X.spatialReference=qa;X.hasZ=Na;X.hasM=Va;return X}function Ha(T,
ha,X,qa,Ca){const {paths:Da,hasZ:Na,hasM:Va}=T;T=[];if(!jb(Da,Na??!1,Va??!1,ha,T,qa,Ca))return null;X.paths=T;X.spatialReference=qa;X.hasZ=Na;X.hasM=Va;return X}function Fa(T,ha,X,qa,Ca){const {rings:Da,hasZ:Na,hasM:Va}=T;T=[];if(!jb(Da,Na??!1,Va??!1,ha,T,qa,Ca))return null;X.rings=T;X.spatialReference=qa;X.hasZ=Na;X.hasM=Va;return X}function Ua(T,ha,X,qa,Ca){const {xmin:Da,ymin:Na,xmax:Va,ymax:mb,hasZ:kb,hasM:hb}=T;if(!Oa(Da,Na,kb?T.zmin:Ca,ha,Ya,qa))return null;X.xmin=Ya[0];X.ymin=Ya[1];kb&&(X.zmin=
Ya[2]);if(!Oa(Va,mb,kb?T.zmax:Ca,ha,Ya,qa))return null;X.xmax=Ya[0];X.ymax=Ya[1];kb&&(X.zmax=Ya[2]);hb&&(X.mmin=T.mmin,X.mmax=T.mmax);X.spatialReference=qa;return X}function Oa(T,ha,X,qa,Ca,Da){fb[0]=T;fb[1]=ha;fb[2]=X;return Ta(fb,qa,0,Ca,Da,0,1)}function Sa(T,ha,X,qa){if(Q.isNone(ha)||Q.isNone(qa)||2>T.length)return!1;2===T.length&&(fb[0]=T[0],fb[1]=T[1],fb[2]=0,T=fb);return Ta(T,ha,0,X,qa,0,1)}function $a(T,ha,X){if(Q.isNone(ha))return!1;ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(Q.isNone(ha))return!1;
ha(T,0,fb,0);X!==fb&&(X[0]=fb[0],X[1]=fb[1],2<X.length&&(X[2]=fb[2]));return!0}function Ta(T,ha,X,qa,Ca,Da,Na=1){ha=ub(ha,Ca,Xb);if(Q.isNone(ha))return!1;if(ha===ea){if(T===qa&&X===Da)return!0;Na=X+3*Na;for(let Va=X,mb=Da;Va<Na;Va++,mb++)qa[mb]=T[Va];return!0}Na=X+3*Na;for(let Va=X,mb=Da;Va<Na;Va+=3,mb+=3)ha(T,Va,qa,mb);return!0}function jb(T,ha,X,qa,Ca,Da,Na=0){const Va=[];for(const mb of T)for(const kb of mb)Va.push(kb[0],kb[1],ha?kb[2]:Na);if(!Ta(Va,qa,0,Va,Da,0,Va.length/3))return!1;qa=0;Ca.length=
0;for(const mb of T){T=[];for(const kb of mb)ha&&X?T.push([Va[qa++],Va[qa++],Va[qa++],kb[3]]):ha?T.push([Va[qa++],Va[qa++],Va[qa++]]):(X?T.push([Va[qa++],Va[qa++],kb[2]]):T.push([Va[qa++],Va[qa++]]),qa++);Ca.push(T)}return!0}function ib(T,ha,X,qa){ha=qa+ha;if(ha<qa/2||X>ha)return Number.MAX_VALUE;T=Math.abs(Hb*T)+Math.asin(X/ha);return T>=Math.PI/2?Number.MAX_VALUE:X/Math.cos(T)}function lb(T,ha,X){const qa=Math.sin(T);T=Math.cos(T);const Ca=Math.sin(ha);ha=Math.cos(ha);X[0]=-qa;X[4]=-Ca*T;X[8]=ha*
T;X[12]=0;X[1]=T;X[5]=-Ca*qa;X[9]=ha*qa;X[13]=0;X[2]=0;X[6]=ha;X[10]=Ca;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function c(T,ha,X){lb(T,ha,X);H.transpose(X,X);return X}function r(T,ha){if(!T)return oa.UNKNOWN;if(ha.spatialReference===T)return ha.spatialReferenceId;ha.spatialReference=T;"metersPerUnit"in ha&&(ha.metersPerUnit=u.getMetersPerUnitForSR(T,1));return T.wkt===m.SphericalECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_ECEF:D.isWGS84(T)?ha.spatialReferenceId=oa.WGS84:
D.isWebMercator(T)?ha.spatialReferenceId=oa.WEB_MERCATOR:D.isPlateCarree(T)?ha.spatialReferenceId=oa.PLATE_CARREE:T.wkt===m.WGS84ECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.WGS84_ECEF:T.wkid===O.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=oa.CGCS2000:T.wkt===m.SphericalPCPFMarsLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:T.wkt===m.SphericalPCPFMoonLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:D.isMars(T)?ha.spatialReferenceId=oa.GCSMARS2000:D.isMoon(T)?ha.spatialReferenceId=
oa.GCSMOON2000:ha.spatialReferenceId=oa.UNKNOWN}function ea(T,ha,X,qa){T!==X&&(X[qa++]=T[ha++],X[qa++]=T[ha++],X[qa]=T[ha])}function ka(T,ha,X,qa){X[qa++]=Rb*(T[ha++]/G.earth.radius);X[qa++]=Rb*(Math.PI/2-2*Math.atan(Math.exp(-T[ha++]/G.earth.radius)));X[qa]=T[ha]}function va(T,ha,X,qa){ka(T,ha,X,qa);pa(X,qa,X,qa)}function x(T,ha,X,qa){ka(T,ha,X,qa);Ga(X,qa,X,qa)}function J(T,ha,X,qa,Ca){var Da=.4999999*Math.PI;Da=R.clamp(Hb*T[ha+1],-Da,Da);Da=Math.sin(Da);X[qa++]=Hb*T[ha]*Ca.radius;X[qa++]=Ca.halfSemiMajorAxis*
Math.log((1+Da)/(1-Da));X[qa]=T[ha+2]}function da(T,ha,X,qa){J(T,ha,X,qa,G.earth)}function V(T,ha,X,qa){X[qa]=T[ha]*Yb;X[qa+1]=T[ha+1]*Yb;X[qa+2]=T[ha+2]}function ia(T,ha,X,qa){X[qa]=T[ha]*Sb;X[qa+1]=T[ha+1]*Sb;X[qa+2]=T[ha+2]}function na(T,ha,X,qa){ka(T,ha,X,qa);V(X,qa,X,qa)}function ra(T,ha,X,qa,Ca){Ca+=T[ha+2];const Da=Hb*T[ha+1];T=Hb*T[ha];ha=Math.cos(Da);X[qa++]=Math.cos(T)*ha*Ca;X[qa++]=Math.sin(T)*ha*Ca;X[qa]=Math.sin(Da)*Ca}function S(T,ha,X,qa){ra(T,ha,X,qa,G.moon.radius)}function ca(T,ha,
X,qa){ra(T,ha,X,qa,G.mars.radius)}function pa(T,ha,X,qa){ra(T,ha,X,qa,G.earth.radius)}function wa(T,ha,X,qa,Ca){var Da=T[ha];const Na=T[ha+1];ha=T[ha+2];T=Math.sqrt(Da*Da+Na*Na+ha*ha);ha=R.asinClamped(ha/(0===T?1:T));Da=Math.atan2(Na,Da);X[qa++]=Rb*Da;X[qa++]=Rb*ha;X[qa]=T-Ca}function Ba(T,ha,X,qa){wa(T,ha,X,qa,G.moon.radius)}function La(T,ha,X,qa){wa(T,ha,X,qa,G.mars.radius)}function Ja(T,ha,X,qa){wa(T,ha,X,qa,G.earth.radius)}function Pa(T,ha,X,qa){Ja(T,ha,X,qa);da(X,qa,X,qa)}function Qa(T,ha,X,
qa){Ja(T,ha,X,qa);Ga(X,qa,X,qa)}function Ga(T,ha,X,qa){var Ca=G.earth;const Da=Hb*T[ha];var Na=Hb*T[ha+1];T=T[ha+2];ha=Math.sin(Na);Na=Math.cos(Na);const Va=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ha*ha);X[qa++]=(Va+T)*Na*Math.cos(Da);X[qa++]=(Va+T)*Na*Math.sin(Da);X[qa++]=(Va*(1-Ca.eccentricitySquared)+T)*ha}function Ra(T,ha,X,qa){var Ca=q.earthEllipsoidConstants,Da=T[ha],Na=T[ha+1];T=T[ha+2];let Va;ha=Math.abs(T);var mb=Da*Da+Na*Na;var kb=Math.sqrt(mb);var hb=mb+T*T;var xb=Math.sqrt(hb);Da=
Math.atan2(Na,Da);var Ib=T*T/hb;hb=mb/hb;Na=Ca.a2/xb;mb=Ca.a3-Ca.a4/xb;.3<hb?(Ib=ha/xb*(1+hb*(Ca.a1+Na+Ib*mb)/xb),xb=Math.asin(Ib),Na=Ib*Ib,hb=Math.sqrt(1-Na)):(hb=kb/xb*(1-Ib*(Ca.a5-Na-hb*mb)/xb),xb=Math.acos(hb),Na=1-hb*hb,Ib=Math.sqrt(Na));Va=1-G.earth.eccentricitySquared*Na;Na=G.earth.radius/Math.sqrt(Va);Ca=Ca.a6*Na;Na=kb-Na*hb;mb=ha-Ca*Ib;ha=hb*Na+Ib*mb;kb=hb*mb-Ib*Na;Ca=kb/(Ca/Va+ha);xb+=Ca;0>T&&(xb=-xb);X[qa++]=Rb*Da;X[qa++]=Rb*xb;X[qa]=ha+kb*Ca/2}function xa(T,ha,X,qa){Ra(T,ha,X,qa);pa(X,
qa,X,qa)}function vb(T,ha,X,qa){Ra(T,ha,X,qa);da(X,qa,X,qa)}function ub(T,ha,X=b()){return Q.isNone(T)||Q.isNone(ha)?null:qb(T,ha,X).projector}function qb(T,ha,X){if(Q.isNone(T)||Q.isNone(ha)||X.source.spatialReference===T&&X.dest.spatialReference===ha)return X;const qa=r(T,X.source),Ca=r(ha,X.dest);qa===oa.UNKNOWN&&Ca===oa.UNKNOWN?D.equals(T,ha)?X.projector=ea:X.projector=null:X.projector=zb[qa][Ca];return X}function b(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},
dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:ea}}let gb=null,db=null,Gb=null,Pb={};const nb=new n.SimpleObservable;let Wb=function(T){function ha(){return T.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ma._inheritsLoose(ha,T);return ha}(Z);var oa;(function(T){T[T.UNKNOWN=0]="UNKNOWN";T[T.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";T[T.WGS84=2]="WGS84";T[T.WEB_MERCATOR=3]="WEB_MERCATOR";T[T.WGS84_ECEF=4]="WGS84_ECEF";
T[T.CGCS2000=5]="CGCS2000";T[T.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";T[T.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";T[T.GCSMARS2000=8]="GCSMARS2000";T[T.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";T[T.GCSMOON2000=10]="GCSMOON2000";T[T.LON_LAT=11]="LON_LAT";T[T.PLATE_CARREE=12]="PLATE_CARREE"})(oa||(oa={}));const Yb=G.earth.radius*Math.PI/180,Sb=180/(G.earth.radius*Math.PI),zb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,
[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:V,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.CGCS2000]:{[oa.CGCS2000]:ea,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:V,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ga},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ca,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:S,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ka,[oa.WGS84_COMPARABLE_LON_LAT]:ka,[oa.SPHERICAL_ECEF]:va,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ea,[oa.PLATE_CARREE]:na,[oa.WGS84]:ka,[oa.WGS84_ECEF]:x},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Ra,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ra,[oa.WGS84_COMPARABLE_LON_LAT]:Ra,
[oa.SPHERICAL_ECEF]:xa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:vb,[oa.PLATE_CARREE]:function(T,ha,X,qa){Ra(T,ha,X,qa);V(X,qa,X,qa)},[oa.WGS84]:Ra,[oa.WGS84_ECEF]:ea},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ja,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ja,[oa.WGS84_COMPARABLE_LON_LAT]:Ja,[oa.SPHERICAL_ECEF]:ea,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Pa,[oa.PLATE_CARREE]:function(T,
ha,X,qa){Ja(T,ha,X,qa);V(X,qa,X,qa)},[oa.WGS84]:Ja,[oa.WGS84_ECEF]:Qa},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:La,[oa.GCSMOON2000]:null,[oa.LON_LAT]:La,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ea,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ba,[oa.LON_LAT]:Ba,[oa.WGS84_COMPARABLE_LON_LAT]:null,
[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:ea,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:ea,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:ea,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:ca,[oa.SPHERICAL_MOON_PCPF]:S,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:V,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:V,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ia,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ia,[oa.WGS84_COMPARABLE_LON_LAT]:ia,[oa.SPHERICAL_ECEF]:function(T,ha,X,qa){ia(T,ha,X,qa);pa(X,qa,X,qa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(T,ha,X,qa){ia(T,ha,X,qa);da(X,qa,X,qa)},[oa.PLATE_CARREE]:ea,[oa.WGS84]:ia,[oa.WGS84_ECEF]:function(T,ha,X,qa){ia(T,ha,X,
qa);Ga(X,qa,X,qa)}}},Kb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Zb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Xb=b(),kc=b(),Hb=R.deg2rad(1),Rb=R.rad2deg(1),fb=K.create(),Ab=K.create(),Bb=K.create(),Ya=K.create(),hc=K.create();f.canProjectToWGS84ComparableLonLat=function(T){if(Q.isNone(T))return!1;T=r(T,Kb);return!!zb[T][oa.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=P;f.computeENUToSphericalPCPFLocalRotation=lb;f.computeSphericalPCPFToENULocalRotation=c;f.computeTranslationToOriginAndRotation=
function(T,ha,X,qa){if(Q.isNone(T)||Q.isNone(qa))return!1;var Ca=r(T,Kb),Da=r(qa,Zb);if(Ca===Da&&Da!==oa.SPHERICAL_ECEF&&Da!==oa.SPHERICAL_MARS_PCPF&&Da!==oa.SPHERICAL_MOON_PCPF&&(Ca!==oa.UNKNOWN||D.equals(T,qa)))return H.fromTranslation(X,ha),!0;if(Da===oa.SPHERICAL_ECEF||Da===oa.SPHERICAL_MARS_PCPF||Da===oa.SPHERICAL_MOON_PCPF){Ca=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(Q.isNone(Ca)||Q.isNone(Da))return!1;Ca(ha,0,Ab,0);Da(Ab,0,Bb,0);lb(Hb*Ab[0],Hb*Ab[1],X);X[12]=Bb[0];X[13]=Bb[1];X[14]=Bb[2];
return!0}if((Da===oa.WEB_MERCATOR||Da===oa.PLATE_CARREE)&&(Ca===oa.WGS84||Ca===oa.CGCS2000&&Da===oa.PLATE_CARREE||Ca===oa.SPHERICAL_ECEF||Ca===oa.WEB_MERCATOR)){T=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(Q.isNone(T)||Q.isNone(Da))return!1;T(ha,0,Ab,0);Da(Ab,0,Bb,0);Ca===oa.SPHERICAL_ECEF?c(Hb*Ab[0],Hb*Ab[1],X):H.identity(X);X[12]=Bb[0];X[13]=Bb[1];X[14]=Bb[2];return!0}return!1};f.getProjectorName=function(T,ha){switch(ub(T,ha,Xb)){case ea:return"copy3";case pa:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";
case V:return"wgs84ToPlateCarree";case Ga:return"wgs84ToWGS84ECEF";case ka:return"webMercatorToWGS84";case va:return"webMercatorToSphericalECEF";case x:return"webMercatorToWGS84ECEF";case na:return"webMercatorToPlateCarree";case Ra:return"wgs84ECEFToWGS84";case xa:return"wgs84ECEFToSphericalECEF";case vb:return"wgs84ECEFToWebMercator";case Ja:return"sphericalECEFToWGS84";case Pa:return"sphericalECEFToWebMercator";case La:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";
case Qa:return"sphericalECEFToWGS84ECEF";case ca:return"mars2000ToSphericalPCPF";case S:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=h;f.getTransformations=function(T,ha,X=null){if(Q.isNone(gb)||Q.isNone(db))throw new Wb;T=gb._getTransformationBySuitability(db,T,ha,X,X?.spatialReference);if(null!==T){ha=[];for(const qa of T)ha.push(w.fromGE(qa));return ha}return[]};f.initializeProjection=function(T,ha,X,qa){return ja.apply(this,arguments)};f.isLoaded=E;f.load=N;f.localLinearScaleFactors=
function(T,ha,X,qa){if(Q.isNone(ha)||Q.isNone(qa))return!1;const Ca=r(ha,Kb);var Da=r(qa,Zb);if(Ca===Da&&Ca!==oa.UNKNOWN||D.equals(ha,qa))return X[0]=1,X[1]=1,X[2]=1,!0;if(Ca===oa.SPHERICAL_ECEF){ha=ba.length(T);T=ha/Math.sqrt(T[0]*T[0]+T[1]*T[1]);ha/=G.earth.radius;if(Da===oa.WEB_MERCATOR)return X[0]=T*ha,X[1]=T*ha,X[2]=1,!0;if(Da===oa.WGS84||Da===oa.CGCS2000)return Da=Sb,X[0]=Da*T*ha,X[1]=Da*ha,X[2]=1,!0}else if(Ca===oa.PLATE_CARREE){if(Da===oa.WGS84||Da===oa.CGCS2000)return X[0]=Sb,X[1]=Sb,X[2]=
1,!0;if(Da===oa.WEB_MERCATOR)return Da=T[1]/G.earth.radius,X[0]=1,X[1]=1/Math.cos(Da),X[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(T,ha,X,qa){const Ca=Math.cos(X);T[0]=Math.cos(ha)*Ca*qa;T[1]=Math.sin(ha)*Ca*qa;T[2]=Math.sin(X)*qa};f.lonLatToWebMercatorComparable=J;f.project=M;f.projectBoundingRect=function(T,ha,X,qa){if(null==T)return!1;if(D.equals(ha,qa))return aa.copy(X,T),!0;fb[0]=T[0];fb[1]=T[1];fb[2]=0;if(!Ta(fb,ha,0,fb,qa,0,1))return!1;X[0]=fb[0];X[1]=fb[1];fb[0]=T[2];fb[1]=T[3];fb[2]=
0;if(!Ta(fb,ha,0,fb,qa,0,1))return!1;X[2]=fb[0];X[3]=fb[1];return!0};f.projectBoundingSphere=function(T,ha,X,qa){if(Q.isNone(ha)||Q.isNone(qa))return!1;ha=qb(ha,qa,kc);if(ha.projector===ea)return X[0]=T[0],X[1]=T[1],X[2]=T[2],X[3]=T[3],!0;if(Q.isNone(ha.projector))return!1;const {source:Ca,dest:Da}=ha;if(Da.spatialReferenceId===oa.WEB_MERCATOR){ha=zb[Ca.spatialReferenceId][oa.WGS84];if(Q.isNone(ha))return!1;ha(T,0,Ab,0);da(Ab,0,X,0);X[3]=ib(Ab[1],T[2],T[3],G.earth.radius);return!0}if(Ca.spatialReferenceId!==
oa.WGS84&&Ca.spatialReferenceId!==oa.CGCS2000||Da.spatialReferenceId!==oa.PLATE_CARREE)ha.projector(T,0,X,0),X[3]=T[3]*(Ca.metersPerUnit??1)/(Da.metersPerUnit??1);else{qa=zb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Na=T[3];Q.isSome(zb[Ca.spatialReferenceId][oa.SPHERICAL_ECEF])&&Q.isSome(qa)&&(Na=ib(T[1],T[2],T[3],G.earth.radius));ha.projector(T,0,X,0);X[3]=Na}return!0};f.projectBuffer=Ta;f.projectDirection=function(T,ha,X,qa,Ca){ba.copy(Ya,T);ba.add(hc,T,ha);Sa(Ya,X,Ya,Ca);Sa(hc,X,hc,Ca);ba.subtract(qa,
hc,Ya);ba.normalize(qa,qa)};f.projectExtent=function(T,ha,X=ha.spatialReference,qa=0){return Q.isSome(T.spatialReference)&&Q.isSome(X)&&Q.isSome(Ua(T,T.spatialReference,ha,X,qa))};f.projectMany=B;f.projectMultipoint=function(T,ha,X=ha.spatialReference,qa=0){return Q.isSome(T.spatialReference)&&Q.isSome(X)&&Q.isSome(Ea(T,T.spatialReference,ha,X,qa))};f.projectOrLoad=function(T,ha){T=z([T],ha);return Q.isSome(T.pending)?{pending:T.pending,geometry:null}:Q.isSome(T.geometries)?{pending:null,geometry:T.geometries[0]}:
{pending:null,geometry:null}};f.projectOrLoadMany=z;f.projectPoint=function(T,ha,X=ha.spatialReference,qa=0){return Q.isSome(X)&&Q.isSome(T.spatialReference)&&Q.isSome(za(T,T.spatialReference,ha,X,qa))};f.projectPointToVector=function(T,ha,X,qa=0){Ya[0]=T.x;Ya[1]=T.y;const Ca=T.z;Ya[2]=void 0!==Ca?Ca:qa;return Ta(Ya,T.spatialReference,0,ha,X,0,1)};f.projectPointToWGS84ComparableLonLat=function(T,ha){Ya[0]=T.x;Ya[1]=T.y;const X=T.z;Ya[2]=void 0!==X?X:0;return $a(Ya,T.spatialReference,ha)};f.projectPolygon=
function(T,ha,X=ha.spatialReference,qa=0){return Q.isSome(T.spatialReference)&&Q.isSome(X)&&Q.isSome(Fa(T,T.spatialReference,ha,X,qa))};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:T,spatialReference:ha,rings:X},qa,Ca=0){ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(Q.isNone(ha))return!1;T=T?Da=>Da:Da=>ba.set(Ya,Da[0],Da[1],Ca);for(const Da of X){X=[];for(const Na of Da){const Va=[0,0,Ca];ha(T(Na),0,Va,0);X.push(Va)}qa.push(X)}return!0};f.projectPolyline=function(T,ha,X=ha.spatialReference,
qa=0){return Q.isSome(T.spatialReference)&&Q.isSome(X)&&Q.isSome(Ha(T,T.spatialReference,ha,X,qa))};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:T,spatialReference:ha,paths:X},qa,Ca=0){ha=r(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(Q.isNone(ha))return!1;T=T?Da=>Da:Da=>ba.set(Ya,Da[0],Da[1],Ca);for(const Da of X){X=[];for(const Na of Da){const Va=[0,0,Ca];ha(T(Na),0,Va,0);X.push(Va)}qa.push(X)}return!0};f.projectVectorToDehydratedPoint=function(T,ha,X){return Ta(T,ha,0,Ya,X.spatialReference,
0,1)?(X.x=Ya[0],X.y=Ya[1],X.z=Ya[2],X):null};f.projectVectorToPoint=function(T,ha,X){if(Q.isNone(ha)||Q.isNone(X))return null;const qa=new L({spatialReference:X});return Ta(T,ha,0,Ya,X,0,1)?(qa.x=Ya[0],qa.y=Ya[1],qa.z=Ya[2],qa):null};f.projectVectorToVector=Sa;f.projectVectorToWGS84ComparableLonLat=function(T,ha,X){return $a(T,ha,X)};f.projectWithoutEngine=sa;f.projectXYZToVector=Oa;f.sphericalPCPFtoLonLatElevation=wa;f.test={get loadPromise(){return Gb}};f.tryProjectWithZConversion=t;f.unload=function(){Gb=
db=gb=null;Pb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(l,f,ma){ma=function(Z){function R(){return Z.apply(this,arguments)||this}f._inheritsLoose(R,Z);R.prototype.notify=function(){var Q=this._observers;if(Q&&0<Q.length){Q=Q.slice();for(const F of Q)F.onInvalidated(),F.onCommitted()}};return R}(ma.ObservableBase);l.SimpleObservable=
ma;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,f,ma){function Z(c,r){c[0]=r[0];c[1]=r[1];c[2]=r[2];c[3]=r[3];c[4]=r[4];c[5]=r[5];c[6]=r[6];c[7]=r[7];c[8]=r[8];c[9]=r[9];c[10]=r[10];c[11]=r[11];c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function R(c,r,ea,ka,va,x,J,da,V,ia,na,ra,S,ca,pa,wa,Ba){c[0]=r;c[1]=ea;c[2]=ka;c[3]=va;c[4]=x;c[5]=J;c[6]=da;c[7]=V;c[8]=ia;c[9]=na;c[10]=ra;c[11]=
S;c[12]=ca;c[13]=pa;c[14]=wa;c[15]=Ba;return c}function Q(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function F(c,r){if(c===r){const ea=r[1],ka=r[2],va=r[3],x=r[6],J=r[7],da=r[11];c[1]=r[4];c[2]=r[8];c[3]=r[12];c[4]=ea;c[6]=r[9];c[7]=r[13];c[8]=ka;c[9]=x;c[11]=r[14];c[12]=va;c[13]=J;c[14]=da}else c[0]=r[0],c[1]=r[4],c[2]=r[8],c[3]=r[12],c[4]=r[1],c[5]=r[5],c[6]=r[9],c[7]=r[13],c[8]=r[2],c[9]=r[6],c[10]=r[10],c[11]=
r[14],c[12]=r[3],c[13]=r[7],c[14]=r[11],c[15]=r[15];return c}function u(c,r){k(c,r)||Q(c);return c}function k(c,r){const ea=r[0],ka=r[1],va=r[2],x=r[3],J=r[4],da=r[5],V=r[6],ia=r[7],na=r[8],ra=r[9],S=r[10],ca=r[11],pa=r[12],wa=r[13],Ba=r[14];r=r[15];const La=ea*da-ka*J,Ja=ea*V-va*J,Pa=ea*ia-x*J,Qa=ka*V-va*da,Ga=ka*ia-x*da,Ra=va*ia-x*V,xa=na*wa-ra*pa,vb=na*Ba-S*pa,ub=na*r-ca*pa,qb=ra*Ba-S*wa,b=ra*r-ca*wa,gb=S*r-ca*Ba;let db=La*gb-Ja*b+Pa*qb+Qa*ub-Ga*vb+Ra*xa;if(!db)return null;db=1/db;c[0]=(da*gb-
V*b+ia*qb)*db;c[1]=(va*b-ka*gb-x*qb)*db;c[2]=(wa*Ra-Ba*Ga+r*Qa)*db;c[3]=(S*Ga-ra*Ra-ca*Qa)*db;c[4]=(V*ub-J*gb-ia*vb)*db;c[5]=(ea*gb-va*ub+x*vb)*db;c[6]=(Ba*Pa-pa*Ra-r*Ja)*db;c[7]=(na*Ra-S*Pa+ca*Ja)*db;c[8]=(J*b-da*ub+ia*xa)*db;c[9]=(ka*ub-ea*b-x*xa)*db;c[10]=(pa*Ga-wa*Pa+r*La)*db;c[11]=(ra*Pa-na*Ga-ca*La)*db;c[12]=(da*vb-J*qb-V*xa)*db;c[13]=(ea*qb-ka*vb+va*xa)*db;c[14]=(wa*Ja-pa*Qa-Ba*La)*db;c[15]=(na*Qa-ra*Ja+S*La)*db;return c}function n(c,r){const ea=r[0],ka=r[1],va=r[2],x=r[3],J=r[4],da=r[5],V=
r[6],ia=r[7],na=r[8],ra=r[9],S=r[10],ca=r[11],pa=r[12],wa=r[13],Ba=r[14];r=r[15];c[0]=da*(S*r-ca*Ba)-ra*(V*r-ia*Ba)+wa*(V*ca-ia*S);c[1]=-(ka*(S*r-ca*Ba)-ra*(va*r-x*Ba)+wa*(va*ca-x*S));c[2]=ka*(V*r-ia*Ba)-da*(va*r-x*Ba)+wa*(va*ia-x*V);c[3]=-(ka*(V*ca-ia*S)-da*(va*ca-x*S)+ra*(va*ia-x*V));c[4]=-(J*(S*r-ca*Ba)-na*(V*r-ia*Ba)+pa*(V*ca-ia*S));c[5]=ea*(S*r-ca*Ba)-na*(va*r-x*Ba)+pa*(va*ca-x*S);c[6]=-(ea*(V*r-ia*Ba)-J*(va*r-x*Ba)+pa*(va*ia-x*V));c[7]=ea*(V*ca-ia*S)-J*(va*ca-x*S)+na*(va*ia-x*V);c[8]=J*(ra*
r-ca*wa)-na*(da*r-ia*wa)+pa*(da*ca-ia*ra);c[9]=-(ea*(ra*r-ca*wa)-na*(ka*r-x*wa)+pa*(ka*ca-x*ra));c[10]=ea*(da*r-ia*wa)-J*(ka*r-x*wa)+pa*(ka*ia-x*da);c[11]=-(ea*(da*ca-ia*ra)-J*(ka*ca-x*ra)+na*(ka*ia-x*da));c[12]=-(J*(ra*Ba-S*wa)-na*(da*Ba-V*wa)+pa*(da*S-V*ra));c[13]=ea*(ra*Ba-S*wa)-na*(ka*Ba-va*wa)+pa*(ka*S-va*ra);c[14]=-(ea*(da*Ba-V*wa)-J*(ka*Ba-va*wa)+pa*(ka*V-va*da));c[15]=ea*(da*S-V*ra)-J*(ka*S-va*ra)+na*(ka*V-va*da);return c}function H(c){const r=c[0],ea=c[1],ka=c[2],va=c[3],x=c[4],J=c[5],da=
c[6],V=c[7],ia=c[8],na=c[9],ra=c[10],S=c[11],ca=c[12],pa=c[13],wa=c[14];c=c[15];return(r*J-ea*x)*(ra*c-S*wa)-(r*da-ka*x)*(na*c-S*pa)+(r*V-va*x)*(na*wa-ra*pa)+(ea*da-ka*J)*(ia*c-S*ca)-(ea*V-va*J)*(ia*wa-ra*ca)+(ka*V-va*da)*(ia*pa-na*ca)}function ba(c,r,ea){const ka=r[0],va=r[1],x=r[2],J=r[3],da=r[4],V=r[5],ia=r[6],na=r[7],ra=r[8],S=r[9],ca=r[10],pa=r[11],wa=r[12],Ba=r[13],La=r[14];r=r[15];let Ja=ea[0],Pa=ea[1],Qa=ea[2],Ga=ea[3];c[0]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[1]=Ja*va+Pa*V+Qa*S+Ga*Ba;c[2]=Ja*x+Pa*ia+
Qa*ca+Ga*La;c[3]=Ja*J+Pa*na+Qa*pa+Ga*r;Ja=ea[4];Pa=ea[5];Qa=ea[6];Ga=ea[7];c[4]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[5]=Ja*va+Pa*V+Qa*S+Ga*Ba;c[6]=Ja*x+Pa*ia+Qa*ca+Ga*La;c[7]=Ja*J+Pa*na+Qa*pa+Ga*r;Ja=ea[8];Pa=ea[9];Qa=ea[10];Ga=ea[11];c[8]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[9]=Ja*va+Pa*V+Qa*S+Ga*Ba;c[10]=Ja*x+Pa*ia+Qa*ca+Ga*La;c[11]=Ja*J+Pa*na+Qa*pa+Ga*r;Ja=ea[12];Pa=ea[13];Qa=ea[14];Ga=ea[15];c[12]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[13]=Ja*va+Pa*V+Qa*S+Ga*Ba;c[14]=Ja*x+Pa*ia+Qa*ca+Ga*La;c[15]=Ja*J+Pa*na+Qa*pa+Ga*r;return c}
function K(c,r,ea){const ka=ea[0],va=ea[1];ea=ea[2];if(r===c)c[12]=r[0]*ka+r[4]*va+r[8]*ea+r[12],c[13]=r[1]*ka+r[5]*va+r[9]*ea+r[13],c[14]=r[2]*ka+r[6]*va+r[10]*ea+r[14],c[15]=r[3]*ka+r[7]*va+r[11]*ea+r[15];else{const x=r[0],J=r[1],da=r[2],V=r[3],ia=r[4],na=r[5],ra=r[6],S=r[7],ca=r[8],pa=r[9],wa=r[10],Ba=r[11];c[0]=x;c[1]=J;c[2]=da;c[3]=V;c[4]=ia;c[5]=na;c[6]=ra;c[7]=S;c[8]=ca;c[9]=pa;c[10]=wa;c[11]=Ba;c[12]=x*ka+ia*va+ca*ea+r[12];c[13]=J*ka+na*va+pa*ea+r[13];c[14]=da*ka+ra*va+wa*ea+r[14];c[15]=V*
ka+S*va+Ba*ea+r[15]}return c}function m(c,r,ea){const ka=ea[0],va=ea[1];ea=ea[2];c[0]=r[0]*ka;c[1]=r[1]*ka;c[2]=r[2]*ka;c[3]=r[3]*ka;c[4]=r[4]*va;c[5]=r[5]*va;c[6]=r[6]*va;c[7]=r[7]*va;c[8]=r[8]*ea;c[9]=r[9]*ea;c[10]=r[10]*ea;c[11]=r[11]*ea;c[12]=r[12];c[13]=r[13];c[14]=r[14];c[15]=r[15];return c}function y(c,r,ea,ka){let va=ka[0],x=ka[1];ka=ka[2];let J=Math.sqrt(va*va+x*x+ka*ka);var da=void 0,V=void 0;let ia=void 0,na=void 0,ra=void 0,S=void 0,ca=void 0,pa=void 0,wa=void 0,Ba=void 0,La=void 0,Ja=
void 0,Pa=void 0,Qa=void 0,Ga=void 0,Ra=void 0,xa=void 0,vb=void 0,ub=void 0,qb=void 0,b=void 0,gb=void 0;V=da=void 0;if(J<ma.getEpsilon())return null;J=1/J;va*=J;x*=J;ka*=J;da=Math.sin(ea);V=Math.cos(ea);ia=1-V;na=r[0];ra=r[1];S=r[2];ca=r[3];pa=r[4];wa=r[5];Ba=r[6];La=r[7];Ja=r[8];Pa=r[9];Qa=r[10];Ga=r[11];Ra=va*va*ia+V;xa=x*va*ia+ka*da;vb=ka*va*ia-x*da;ub=va*x*ia-ka*da;qb=x*x*ia+V;b=ka*x*ia+va*da;gb=va*ka*ia+x*da;da=x*ka*ia-va*da;V=ka*ka*ia+V;c[0]=na*Ra+pa*xa+Ja*vb;c[1]=ra*Ra+wa*xa+Pa*vb;c[2]=S*
Ra+Ba*xa+Qa*vb;c[3]=ca*Ra+La*xa+Ga*vb;c[4]=na*ub+pa*qb+Ja*b;c[5]=ra*ub+wa*qb+Pa*b;c[6]=S*ub+Ba*qb+Qa*b;c[7]=ca*ub+La*qb+Ga*b;c[8]=na*gb+pa*da+Ja*V;c[9]=ra*gb+wa*da+Pa*V;c[10]=S*gb+Ba*da+Qa*V;c[11]=ca*gb+La*da+Ga*V;r!==c&&(c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);return c}function e(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[4],x=r[5],J=r[6],da=r[7],V=r[8],ia=r[9],na=r[10],ra=r[11];r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);
c[4]=va*ea+V*ka;c[5]=x*ea+ia*ka;c[6]=J*ea+na*ka;c[7]=da*ea+ra*ka;c[8]=V*ea-va*ka;c[9]=ia*ea-x*ka;c[10]=na*ea-J*ka;c[11]=ra*ea-da*ka;return c}function p(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[0],x=r[1],J=r[2],da=r[3],V=r[8],ia=r[9],na=r[10],ra=r[11];r!==c&&(c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=va*ea-V*ka;c[1]=x*ea-ia*ka;c[2]=J*ea-na*ka;c[3]=da*ea-ra*ka;c[8]=va*ka+V*ea;c[9]=x*ka+ia*ea;c[10]=J*ka+na*ea;c[11]=da*ka+ra*ea;return c}
function L(c,r,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=r[0],x=r[1],J=r[2],da=r[3],V=r[4],ia=r[5],na=r[6],ra=r[7];r!==c&&(c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]);c[0]=va*ea+V*ka;c[1]=x*ea+ia*ka;c[2]=J*ea+na*ka;c[3]=da*ea+ra*ka;c[4]=V*ea-va*ka;c[5]=ia*ea-x*ka;c[6]=na*ea-J*ka;c[7]=ra*ea-da*ka;return c}function W(c,r){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=r[0];c[13]=r[1];c[14]=r[2];c[15]=
1;return c}function U(c,r){c[0]=r[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=r[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function aa(c,r,ea){if(0===r)return Q(c);let ka=ea[0],va=ea[1];ea=ea[2];let x=Math.sqrt(ka*ka+va*va+ea*ea),J=void 0,da=void 0,V=void 0;if(x<ma.getEpsilon())return null;x=1/x;ka*=x;va*=x;ea*=x;J=Math.sin(r);da=Math.cos(r);V=1-da;c[0]=ka*ka*V+da;c[1]=va*ka*V+ea*J;c[2]=ea*ka*V-va*J;c[3]=0;c[4]=ka*va*V-ea*J;c[5]=va*va*V+da;c[6]=ea*va*V+ka*J;
c[7]=0;c[8]=ka*ea*V+va*J;c[9]=va*ea*V-ka*J;c[10]=ea*ea*V+da;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function G(c,r){const ea=Math.sin(r);r=Math.cos(r);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,r){const ea=Math.sin(r);r=Math.cos(r);c[0]=r;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=r;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function w(c,r){const ea=Math.sin(r);
r=Math.cos(r);c[0]=r;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,r,ea){var ka=r[0],va=r[1],x=r[2],J=r[3],da=ka+ka,V=va+va;const ia=x+x;r=ka*da;const na=ka*V;ka*=ia;const ra=va*V;va*=ia;x*=ia;da*=J;V*=J;J*=ia;c[0]=1-(ra+x);c[1]=na+J;c[2]=ka-V;c[3]=0;c[4]=na-J;c[5]=1-(r+x);c[6]=va+da;c[7]=0;c[8]=ka+V;c[9]=va-da;c[10]=1-(r+ra);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function O(c,r){const ea=
lb,ka=-r[0],va=-r[1],x=-r[2],J=r[3],da=r[4],V=r[5],ia=r[6],na=r[7],ra=ka*ka+va*va+x*x+J*J;0<ra?(ea[0]=2*(da*J+na*ka+V*x-ia*va)/ra,ea[1]=2*(V*J+na*va+ia*ka-da*x)/ra,ea[2]=2*(ia*J+na*x+da*va-V*ka)/ra):(ea[0]=2*(da*J+na*ka+V*x-ia*va),ea[1]=2*(V*J+na*va+ia*ka-da*x),ea[2]=2*(ia*J+na*x+da*va-V*ka));D(c,r,ea);return c}function C(c,r){c[0]=r[12];c[1]=r[13];c[2]=r[14];return c}function E(c,r){const ea=r[0],ka=r[1],va=r[2],x=r[4],J=r[5],da=r[6],V=r[8],ia=r[9];r=r[10];c[0]=Math.sqrt(ea*ea+ka*ka+va*va);c[1]=
Math.sqrt(x*x+J*J+da*da);c[2]=Math.sqrt(V*V+ia*ia+r*r);return c}function N(c,r){const ea=r[0]+r[5]+r[10];let ka=0;0<ea?(ka=2*Math.sqrt(ea+1),c[3]=.25*ka,c[0]=(r[6]-r[9])/ka,c[1]=(r[8]-r[2])/ka,c[2]=(r[1]-r[4])/ka):r[0]>r[5]&&r[0]>r[10]?(ka=2*Math.sqrt(1+r[0]-r[5]-r[10]),c[3]=(r[6]-r[9])/ka,c[0]=.25*ka,c[1]=(r[1]+r[4])/ka,c[2]=(r[8]+r[2])/ka):r[5]>r[10]?(ka=2*Math.sqrt(1+r[5]-r[0]-r[10]),c[3]=(r[8]-r[2])/ka,c[0]=(r[1]+r[4])/ka,c[1]=.25*ka,c[2]=(r[6]+r[9])/ka):(ka=2*Math.sqrt(1+r[10]-r[0]-r[5]),c[3]=
(r[1]-r[4])/ka,c[0]=(r[8]+r[2])/ka,c[1]=(r[6]+r[9])/ka,c[2]=.25*ka);return c}function M(c,r,ea,ka){var va=r[0],x=r[1],J=r[2],da=r[3],V=va+va,ia=x+x,na=J+J;r=va*V;const ra=va*ia;va*=na;const S=x*ia;x*=na;J*=na;V*=da;ia*=da;da*=na;na=ka[0];const ca=ka[1];ka=ka[2];c[0]=(1-(S+J))*na;c[1]=(ra+da)*na;c[2]=(va-ia)*na;c[3]=0;c[4]=(ra-da)*ca;c[5]=(1-(r+J))*ca;c[6]=(x+V)*ca;c[7]=0;c[8]=(va+ia)*ka;c[9]=(x-V)*ka;c[10]=(1-(r+S))*ka;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function B(c,r,ea,
ka,va){var x=r[0],J=r[1],da=r[2],V=r[3],ia=x+x,na=J+J,ra=da+da;r=x*ia;var S=x*na,ca=x*ra;x=J*na;J*=ra;var pa=da*ra;da=V*ia;na*=V;const wa=V*ra;var Ba=ka[0],La=ka[1];ra=ka[2];ka=va[0];V=va[1];va=va[2];ia=(1-(x+pa))*Ba;const Ja=(S+wa)*Ba;Ba*=ca-na;S=(S-wa)*La;pa=(1-(r+pa))*La;La*=J+da;ca=(ca+na)*ra;J=(J-da)*ra;r=(1-(r+x))*ra;c[0]=ia;c[1]=Ja;c[2]=Ba;c[3]=0;c[4]=S;c[5]=pa;c[6]=La;c[7]=0;c[8]=ca;c[9]=J;c[10]=r;c[11]=0;c[12]=ea[0]+ka-(ia*ka+S*V+ca*va);c[13]=ea[1]+V-(Ja*ka+pa*V+J*va);c[14]=ea[2]+va-(Ba*
ka+La*V+r*va);c[15]=1;return c}function z(c,r){var ea=r[0],ka=r[1],va=r[2];r=r[3];var x=ea+ea,J=ka+ka;const da=va+va;ea*=x;const V=ka*x;ka*=J;const ia=va*x,na=va*J;va*=da;x*=r;J*=r;r*=da;c[0]=1-ka-va;c[1]=V+r;c[2]=ia-J;c[3]=0;c[4]=V-r;c[5]=1-ea-va;c[6]=na+x;c[7]=0;c[8]=ia+J;c[9]=na-x;c[10]=1-ea-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function h(c,r,ea,ka,va,x,J){const da=1/(ea-r),V=1/(va-ka),ia=1/(x-J);c[0]=2*x*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*x*V;c[6]=0;c[7]=0;c[8]=(ea+r)*da;c[9]=
(va+ka)*V;c[10]=(J+x)*ia;c[11]=-1;c[12]=0;c[13]=0;c[14]=J*x*2*ia;c[15]=0;return c}function t(c,r,ea,ka,va){r=1/Math.tan(r/2);let x=void 0;c[0]=r/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=r;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=va&&Infinity!==va?(x=1/(ka-va),c[10]=(va+ka)*x,c[14]=2*va*ka*x):(c[10]=-1,c[14]=-2*ka);return c}function P(c,r,ea,ka){const va=Math.tan(r.upDegrees*Math.PI/180),x=Math.tan(r.downDegrees*Math.PI/180),J=Math.tan(r.leftDegrees*Math.PI/180);r=Math.tan(r.rightDegrees*
Math.PI/180);const da=2/(J+r),V=2/(va+x);c[0]=da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=V;c[6]=0;c[7]=0;c[8]=-((J-r)*da*.5);c[9]=(va-x)*V*.5;c[10]=ka/(ea-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*ea/(ea-ka);c[15]=0;return c}function ja(c,r,ea,ka,va,x,J){const da=1/(r-ea),V=1/(ka-va),ia=1/(x-J);c[0]=-2*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*V;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ia;c[11]=0;c[12]=(r+ea)*da;c[13]=(va+ka)*V;c[14]=(J+x)*ia;c[15]=1;return c}function sa(c,r,ea,ka){var va=void 0;let x=void 0;var J=
void 0,da=void 0;let V=void 0,ia=void 0;var na=void 0,ra=void 0;let S=void 0,ca=void 0;const pa=r[0],wa=r[1];r=r[2];J=ka[0];da=ka[1];ka=ka[2];na=ea[0];ra=ea[1];ea=ea[2];va=ma.getEpsilon();if(Math.abs(pa-na)<va&&Math.abs(wa-ra)<va&&Math.abs(r-ea)<va)return Q(c);na=pa-na;ra=wa-ra;S=r-ea;ca=1/Math.sqrt(na*na+ra*ra+S*S);na*=ca;ra*=ca;S*=ca;va=da*S-ka*ra;x=ka*na-J*S;J=J*ra-da*na;(ca=Math.sqrt(va*va+x*x+J*J))?(ca=1/ca,va*=ca,x*=ca,J*=ca):J=x=va=0;da=ra*J-S*x;V=S*va-na*J;ia=na*x-ra*va;(ca=Math.sqrt(da*da+
V*V+ia*ia))?(ca=1/ca,da*=ca,V*=ca,ia*=ca):ia=V=da=0;c[0]=va;c[1]=da;c[2]=na;c[3]=0;c[4]=x;c[5]=V;c[6]=ra;c[7]=0;c[8]=J;c[9]=ia;c[10]=S;c[11]=0;c[12]=-(va*pa+x*wa+J*r);c[13]=-(da*pa+V*wa+ia*r);c[14]=-(na*pa+ra*wa+S*r);c[15]=1;return c}function za(c,r,ea,ka){const va=r[0],x=r[1];r=r[2];var J=ka[0];const da=ka[1];var V=ka[2];ka=va-ea[0];let ia=x-ea[1];ea=r-ea[2];let na=ka*ka+ia*ia+ea*ea;0<na&&(na=1/Math.sqrt(na),ka*=na,ia*=na,ea*=na);let ra=da*ea-V*ia;V=V*ka-J*ea;J=J*ia-da*ka;na=ra*ra+V*V+J*J;0<na&&
(na=1/Math.sqrt(na),ra*=na,V*=na,J*=na);c[0]=ra;c[1]=V;c[2]=J;c[3]=0;c[4]=ia*J-ea*V;c[5]=ea*ra-ka*J;c[6]=ka*V-ia*ra;c[7]=0;c[8]=ka;c[9]=ia;c[10]=ea;c[11]=0;c[12]=va;c[13]=x;c[14]=r;c[15]=1;return c}function Ea(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ha(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**
2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Fa(c,r,ea){c[0]=r[0]+ea[0];c[1]=r[1]+ea[1];c[2]=r[2]+ea[2];c[3]=r[3]+ea[3];c[4]=r[4]+ea[4];c[5]=r[5]+ea[5];c[6]=r[6]+ea[6];c[7]=r[7]+ea[7];c[8]=r[8]+ea[8];c[9]=r[9]+ea[9];c[10]=r[10]+ea[10];c[11]=r[11]+ea[11];c[12]=r[12]+ea[12];c[13]=r[13]+ea[13];c[14]=r[14]+ea[14];c[15]=r[15]+ea[15];return c}function Ua(c,r,ea){c[0]=r[0]-ea[0];c[1]=r[1]-ea[1];c[2]=r[2]-ea[2];c[3]=r[3]-ea[3];c[4]=r[4]-ea[4];c[5]=r[5]-ea[5];c[6]=r[6]-ea[6];c[7]=r[7]-
ea[7];c[8]=r[8]-ea[8];c[9]=r[9]-ea[9];c[10]=r[10]-ea[10];c[11]=r[11]-ea[11];c[12]=r[12]-ea[12];c[13]=r[13]-ea[13];c[14]=r[14]-ea[14];c[15]=r[15]-ea[15];return c}function Oa(c,r,ea){c[0]=r[0]*ea;c[1]=r[1]*ea;c[2]=r[2]*ea;c[3]=r[3]*ea;c[4]=r[4]*ea;c[5]=r[5]*ea;c[6]=r[6]*ea;c[7]=r[7]*ea;c[8]=r[8]*ea;c[9]=r[9]*ea;c[10]=r[10]*ea;c[11]=r[11]*ea;c[12]=r[12]*ea;c[13]=r[13]*ea;c[14]=r[14]*ea;c[15]=r[15]*ea;return c}function Sa(c,r,ea,ka){c[0]=r[0]+ea[0]*ka;c[1]=r[1]+ea[1]*ka;c[2]=r[2]+ea[2]*ka;c[3]=r[3]+ea[3]*
ka;c[4]=r[4]+ea[4]*ka;c[5]=r[5]+ea[5]*ka;c[6]=r[6]+ea[6]*ka;c[7]=r[7]+ea[7]*ka;c[8]=r[8]+ea[8]*ka;c[9]=r[9]+ea[9]*ka;c[10]=r[10]+ea[10]*ka;c[11]=r[11]+ea[11]*ka;c[12]=r[12]+ea[12]*ka;c[13]=r[13]+ea[13]*ka;c[14]=r[14]+ea[14]*ka;c[15]=r[15]+ea[15]*ka;return c}function $a(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]&&c[3]===r[3]&&c[4]===r[4]&&c[5]===r[5]&&c[6]===r[6]&&c[7]===r[7]&&c[8]===r[8]&&c[9]===r[9]&&c[10]===r[10]&&c[11]===r[11]&&c[12]===r[12]&&c[13]===r[13]&&c[14]===r[14]&&c[15]===r[15]}
function Ta(c,r){if(c===r)return!0;const ea=c[0],ka=c[1],va=c[2],x=c[3],J=c[4],da=c[5],V=c[6],ia=c[7],na=c[8],ra=c[9],S=c[10],ca=c[11],pa=c[12],wa=c[13],Ba=c[14];c=c[15];const La=r[0],Ja=r[1],Pa=r[2],Qa=r[3],Ga=r[4],Ra=r[5],xa=r[6],vb=r[7],ub=r[8],qb=r[9],b=r[10],gb=r[11],db=r[12],Gb=r[13],Pb=r[14];r=r[15];const nb=ma.getEpsilon();return Math.abs(ea-La)<=nb*Math.max(1,Math.abs(ea),Math.abs(La))&&Math.abs(ka-Ja)<=nb*Math.max(1,Math.abs(ka),Math.abs(Ja))&&Math.abs(va-Pa)<=nb*Math.max(1,Math.abs(va),
Math.abs(Pa))&&Math.abs(x-Qa)<=nb*Math.max(1,Math.abs(x),Math.abs(Qa))&&Math.abs(J-Ga)<=nb*Math.max(1,Math.abs(J),Math.abs(Ga))&&Math.abs(da-Ra)<=nb*Math.max(1,Math.abs(da),Math.abs(Ra))&&Math.abs(V-xa)<=nb*Math.max(1,Math.abs(V),Math.abs(xa))&&Math.abs(ia-vb)<=nb*Math.max(1,Math.abs(ia),Math.abs(vb))&&Math.abs(na-ub)<=nb*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(ra-qb)<=nb*Math.max(1,Math.abs(ra),Math.abs(qb))&&Math.abs(S-b)<=nb*Math.max(1,Math.abs(S),Math.abs(b))&&Math.abs(ca-gb)<=nb*Math.max(1,
Math.abs(ca),Math.abs(gb))&&Math.abs(pa-db)<=nb*Math.max(1,Math.abs(pa),Math.abs(db))&&Math.abs(wa-Gb)<=nb*Math.max(1,Math.abs(wa),Math.abs(Gb))&&Math.abs(Ba-Pb)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Pb))&&Math.abs(c-r)<=nb*Math.max(1,Math.abs(c),Math.abs(r))}function jb(c){const r=ma.getEpsilon(),ea=c[0],ka=c[1],va=c[2],x=c[4],J=c[5],da=c[6],V=c[8],ia=c[9];c=c[10];return Math.abs(1-(ea*ea+x*x+V*V))<=r&&Math.abs(1-(ka*ka+J*J+ia*ia))<=r&&Math.abs(1-(va*va+da*da+c*c))<=r}function ib(c){return 1===c[0]&&
0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const lb=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Fa,adjoint:n,copy:Z,determinant:H,equals:Ta,exactEquals:$a,frob:Ha,fromQuat:z,fromQuat2:O,fromRotation:aa,fromRotationTranslation:D,fromRotationTranslationScale:M,fromRotationTranslationScaleOrigin:B,fromScaling:U,fromTranslation:W,fromXRotation:G,fromYRotation:q,fromZRotation:w,frustum:h,getRotation:N,getScaling:E,getTranslation:C,hasIdentityRotation:ib,
identity:Q,invert:k,invertOrIdentity:u,isOrthoNormal:jb,lookAt:sa,mul:ba,multiply:ba,multiplyScalar:Oa,multiplyScalarAndAdd:Sa,ortho:ja,perspective:t,perspectiveFromFieldOfView:P,rotate:y,rotateX:e,rotateY:p,rotateZ:L,scale:m,set:R,str:Ea,sub:Ua,subtract:Ua,targetTo:za,translate:K,transpose:F},Symbol.toStringTag,{value:"Module"}));l.add=Fa;l.adjoint=n;l.copy=Z;l.determinant=H;l.equals=Ta;l.exactEquals=$a;l.frob=Ha;l.fromQuat=z;l.fromQuat2=O;l.fromRotation=aa;l.fromRotationTranslation=D;l.fromRotationTranslationScale=
M;l.fromRotationTranslationScaleOrigin=B;l.fromScaling=U;l.fromTranslation=W;l.fromXRotation=G;l.fromYRotation=q;l.fromZRotation=w;l.frustum=h;l.getRotation=N;l.getScaling=E;l.getTranslation=C;l.hasIdentityRotation=ib;l.identity=Q;l.invert=k;l.invertOrIdentity=u;l.isOrthoNormal=jb;l.lookAt=sa;l.mat4=f;l.mul=ba;l.multiply=ba;l.multiplyScalar=Oa;l.multiplyScalarAndAdd=Sa;l.ortho=ja;l.perspective=t;l.perspectiveFromFieldOfView=P;l.rotate=y;l.rotateX=e;l.rotateY=p;l.rotateZ=L;l.scale=m;l.set=R;l.str=
Ea;l.sub=Ua;l.subtract=Ua;l.targetTo=za;l.translate=K;l.transpose=F})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,f,ma,Z,R){function Q(){return!!f._pe}function F(){return!!R("esri-wasm")}function u(){return m?m:m=(new Promise((e,p)=>l(["./pe-wasm"],e,p))).then(e=>e.peWasm).then(({default:e})=>e({locateFile:p=>Z.getAssetUrl(`esri/geometry/support/${p}`)})).then(e=>{k(e)})}function k(e){function p(U,aa,G){U[aa]=G(U[aa])}
f._pe=e;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(U){function aa(){return U.apply(this,arguments)||this}ma._inheritsLoose(aa,U);aa.prototype.destroy=function(){f._pe.destroy(this)};return aa}(f._pe.PeGCSExtent);e=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var L of e)p(L.prototype,"getName",U=>function(){return U.call(this,
Array(f.PeDefs.PE_NAME_MAX))});for(const U of[f._pe.PeGeogtran,f._pe.PeProjcs])p(U.prototype,"getParameters",aa=>function(){const G=Array(f.PeDefs.PE_PARM_MAX);let q=aa.call(this);for(let w=0;w<G.length;w++){const D=f._pe.getValue(q,"*");G[w]=D?f._pe.wrapPointer(D,f._pe.PeParameter):null;q+=Int32Array.BYTES_PER_ELEMENT}return G});p(f._pe.PeHorizon.prototype,"getCoord",U=>function(){const aa=this.getSize();if(!aa)return null;const G=[],q=U.call(this);K(G,aa,q);return G});p(f._pe.PeGTlistExtendedEntry.prototype,
"getEntries",U=>{const aa=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let G=null;var q=U.call(this);if(!f._pe.compare(q,f._pe.NULL)){G=[q];const w=this.getSteps();if(1<w){q=f._pe.getPointer(q);for(let D=1;D<w;D++)G.push(f._pe.wrapPointer(q+aa*D,f._pe.PeGTlistExtendedGTs))}}return G}});const W=f._pe._pe_getPeHorizonSize();L=U=>function(){let aa=this._cache;aa||(this._cache=aa=new Map);if(aa.has(U))return aa.get(U);let G=null;var q=U.call(this);if(!f._pe.compare(q,f._pe.NULL)){G=[q];const w=
q.getNump();if(1<w){q=f._pe.getPointer(q);for(let D=1;D<w;D++)G.push(f._pe.wrapPointer(q+W*D,f._pe.PeHorizon))}}aa.set(U,G);return G};p(f._pe.PeProjcs.prototype,"horizonGcsGenerate",L);p(f._pe.PeProjcs.prototype,"horizonPcsGenerate",L);f._pe.PeObject.prototype.toString=function(U=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const aa=f._pe.getPointer(this),G=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(aa,U,G))}}function n(e){if(e){var p=
f._pe.getClass(e);p&&(p=f._pe.getCache(p))&&(e=f._pe.getPointer(e))&&delete p[e]}}function H(e,p){const L=[];p=Array(p);for(let W=0;W<e;W++)L.push(f._pe.ensureInt8(p));return L}function ba(e){let p;Array.isArray(e[0])?(p=[],e.forEach(L=>{p.push(L[0],L[1])})):p=e;return p}function K(e,p,L,W=!1){if(W)for(W=0;W<2*p;W++)e[W]=f._pe.getValue(L+W*Float64Array.BYTES_PER_ELEMENT,"double");else{W=0===e.length;for(let U=0;U<p;U++)W&&(e[U]=Array(2)),e[U][0]=f._pe.getValue(L,"double"),e[U][1]=f._pe.getValue(L+
Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let m;f._pe=null;f.PeCSTransformations=void 0;(function(e){function p(U,aa,G){f._pe.ensureCache.prepare();var q=ba(G);const w=G===q;q=f._pe.ensureFloat64(q);(U=f._pe._pe_geog_to_proj(f._pe.getPointer(U),aa,q))&&K(G,aa,q,w);return U}function L(U,aa,G){return W(U,aa,G,0)}function W(U,aa,G,q){f._pe.ensureCache.prepare();var w=ba(G);const D=G===w;w=f._pe.ensureFloat64(w);(U=f._pe._pe_proj_to_geog_center(f._pe.getPointer(U),
aa,w,q))&&K(G,aa,w,D);return U}e.geogToProj=p;e.projGeog=function(U,aa,G,q){switch(q){case f.PeDefs.PE_TRANSFORM_P_TO_G:return L(U,aa,G);case f.PeDefs.PE_TRANSFORM_G_TO_P:return p(U,aa,G)}return 0};e.projToGeog=L;e.projToGeogCenter=W})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;
e.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
e.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
e.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(e){function p(aa,G){let q=
null,w=L[aa];w||(w={},L[aa]=w);w.hasOwnProperty(String(G))?q=w[G]:(aa=f._pe.PeFactory.prototype.factoryByType(aa,G),f._pe.compare(aa,f._pe.NULL)||(q=aa,w[G]=q));return q=U(q)}const L={},W={},U=aa=>{if(aa){const G=aa.getType();switch(G){case f.PeDefs.PE_TYPE_GEOGCS:aa=f._pe.castObject(aa,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:aa=f._pe.castObject(aa,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:aa=f._pe.castObject(aa,f._pe.PeGeogtran);break;default:G&f.PeDefs.PE_TYPE_UNIT&&(aa=f._pe.castObject(aa,
f._pe.PeUnit))}}return aa};e.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(aa){return p(f.PeDefs.PE_TYPE_COORDSYS,aa)};e.factoryByType=p;e.fromString=function(aa,G){let q=null,w=W[aa];w||(w={},W[aa]=w);w.hasOwnProperty(G)?q=w[G]:(aa=f._pe.PeFactory.prototype.fromString(aa,G),f._pe.compare(aa,f._pe.NULL)||(q=aa,w[G]=q));return q=U(q)};e.geogcs=function(aa){return p(f.PeDefs.PE_TYPE_GEOGCS,aa)};e.geogtran=function(aa){return p(f.PeDefs.PE_TYPE_GEOGTRAN,aa)};e.getCode=
function(aa){return f._pe.PeFactory.prototype.getCode(aa)};e.projcs=function(aa){return p(f.PeDefs.PE_TYPE_PROJCS,aa)};e.unit=function(aa){return p(f.PeDefs.PE_TYPE_UNIT,aa)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(e){let p;e.init=function(){e.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=f._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(L,W,U,aa,G,q){let w=null;const D=new f._pe.PeInteger(q);try{const O=
f._pe.PeGTlistExtended.prototype.getGTlist(L,W,U,aa,G,D);if(q=D.val)if(w=[O],1<q){const C=f._pe.getPointer(O);for(L=1;L<q;L++)w.push(f._pe.wrapPointer(C+p*L,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(D)}return w}})(f.PeGTlistExtended||(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(p){if(p&&p.length){for(const L of p)n(L),L.getEntries().forEach(W=>{n(W);W=W.getGeogtran();n(W);W.getParameters().forEach(n);[W.getGeogcs1(),W.getGeogcs2()].forEach(U=>
{n(U);const aa=U.getDatum();n(aa);n(aa.getSpheroid());n(U.getPrimem());n(U.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(f.PeGTlistExtendedEntry||(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(e){e.geogToGeog=function(p,L,W,U,aa){f._pe.ensureCache.prepare();var G=ba(W);const q=W===G;G=f._pe.ensureFloat64(G);let w=0;U&&(w=f._pe.ensureFloat64(U));(p=f._pe._pe_geog_to_geog(f._pe.getPointer(p),L,G,w,aa))&&K(W,L,G,q);return p}})(f.PeGTTransformations||(f.PeGTTransformations=
{}));f.PeNotationDms=void 0;(function(e){const p=(W,U,aa,G,q,w)=>{f._pe.ensureCache.prepare();switch(W){case "dd":var D=f._pe._pe_geog_to_dd;var O=f.PeDefs.PE_DD_MAX;break;case "ddm":D=f._pe._pe_geog_to_ddm;O=f.PeDefs.PE_DDM_MAX;break;case "dms":D=f._pe._pe_geog_to_dms,O=f.PeDefs.PE_DMS_MAX}W=0;U&&(W=f._pe.getPointer(U));U=ba(G);U=f._pe.ensureFloat64(U);O=H(aa,O);G=f._pe.ensureInt32(O);if(q=D(W,aa,U,q,G))for(D=0;D<aa;D++)w[D]=f._pe.UTF8ToString(O[D]);return q},L=(W,U,aa,G,q)=>{f._pe.ensureCache.prepare();
switch(W){case "dd":var w=f._pe._pe_dd_to_geog;break;case "ddm":w=f._pe._pe_ddm_to_geog;break;case "dms":w=f._pe._pe_dms_to_geog}W=0;U&&(W=f._pe.getPointer(U));U=G.map(D=>f._pe.ensureString(D));G=f._pe.ensureInt32(U);U=f._pe.ensureFloat64(Array(2*aa));(w=w(W,aa,G,U))&&K(q,aa,U);return w};e.geogToDms=function(W,U,aa,G,q){return p("dms",W,U,aa,G,q)};e.dmsToGeog=function(W,U,aa,G){return L("dms",W,U,aa,G)};e.geogToDdm=function(W,U,aa,G,q){return p("ddm",W,U,aa,G,q)};e.ddmToGeog=function(W,U,aa,G){return L("ddm",
W,U,aa,G)};e.geogToDd=function(W,U,aa,G,q){return p("dd",W,U,aa,G,q)};e.ddToGeog=function(W,U,aa,G){return L("dd",W,U,aa,G)}})(f.PeNotationDms||(f.PeNotationDms={}));f.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
e.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=function(p,L,W,U,aa,G,q){f._pe.ensureCache.prepare();let w=0;p&&(w=f._pe.getPointer(p));p=ba(W);W=f._pe.ensureFloat64(p);p=H(L,f.PeDefs.PE_MGRS_MAX);const D=f._pe.ensureInt32(p);if(U=f._pe._pe_geog_to_mgrs_extended(w,L,W,U,aa,G,D))for(aa=0;aa<L;aa++)q[aa]=f._pe.UTF8ToString(p[aa]);return U};e.mgrsToGeogExtended=function(p,L,W,U,aa){f._pe.ensureCache.prepare();let G=0;p&&(G=f._pe.getPointer(p));p=W.map(q=>
f._pe.ensureString(q));W=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*L));(U=f._pe._pe_mgrs_to_geog_extended(G,L,W,U,p))&&K(aa,L,p);return U}})(f.PeNotationMgrs||(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(p,L,W,U,aa,G,q){f._pe.ensureCache.prepare();let w=0;p&&(w=f._pe.getPointer(p));p=ba(W);W=f._pe.ensureFloat64(p);p=H(L,f.PeDefs.PE_MGRS_MAX);const D=f._pe.ensureInt32(p);if(U=f._pe._pe_geog_to_usng(w,L,W,U,aa,G,D))for(aa=0;aa<L;aa++)q[aa]=f._pe.UTF8ToString(p[aa]);
return U};e.usngToGeog=function(p,L,W,U){f._pe.ensureCache.prepare();var aa=0;p&&(aa=f._pe.getPointer(p));p=W.map(G=>f._pe.ensureString(G));W=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*L));(aa=f._pe._pe_usng_to_geog(aa,L,W,p))&&K(U,L,p);return aa}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=
f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geogToUtm=function(p,L,W,U,aa){f._pe.ensureCache.prepare();var G=0;p&&(G=f._pe.getPointer(p));p=ba(W);W=f._pe.ensureFloat64(p);p=H(L,f.PeDefs.PE_UTM_MAX);const q=f._pe.ensureInt32(p);if(U=f._pe._pe_geog_to_utm(G,L,W,U,q))for(G=0;G<L;G++)aa[G]=f._pe.UTF8ToString(p[G]);return U};e.utmToGeog=function(p,L,W,U,aa){f._pe.ensureCache.prepare();let G=0;p&&(G=f._pe.getPointer(p));p=W.map(q=>f._pe.ensureString(q));W=f._pe.ensureInt32(p);p=f._pe.ensureFloat64(Array(2*
L));(U=f._pe._pe_utm_to_geog(G,L,W,U,p))&&K(aa,L,p);return U}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(e){const p=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(L,W=e.PE_PCSINFO_OPTION_DOMAIN){let U=
null,aa=null;p.has(L)&&(aa=p.get(L),aa[W]&&(U=aa[W]));U||(U=f._pe.PePCSInfo.prototype.generate(L,W),aa||(aa=[],p.set(L,aa)),aa[W]=U);return U}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;(function(e){e.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const y=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},
get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:k,get _pe(){return f._pe},isLoaded:Q,
isSupported:F,load:u},Symbol.toStringTag,{value:"Module"}));f._init=k;f.isLoaded=Q;f.isSupported=F;f.load=u;f.pe=y})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,f){const ma=Math.PI/180;var Z=f.earth.radius;const R=f.earth.eccentricitySquared;Z={a1:Z*R,a2:Z*R*Z*R,a3:Z*R*R/2,a4:Z*R*Z*R*2.5,a5:Z*R+Z*R*R/2,a6:1-R};f={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,
f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,
f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,
f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,
f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=Z;l.spheroids=f;l.toRadians=ma;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(l){return function(){function f(Z){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(Z&&Z.steps)for(const R of Z.steps)R instanceof l?this.steps.push(R):this.steps.push(new l({wkid:R.wkid,wkt:R.wkt,isInverse:R.isInverse}))}f.cacheKey=function(Z,R){return[void 0!==Z.wkid&&null!==Z.wkid?Z.wkid.toString():"-1",void 0!==Z.wkt&&null!==Z.wkt?Z.wkt.toString():"",void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():""].join()};f.fromGE=function(Z){const R=new f;let Q="";for(const F of Z.steps)Z=
l.fromGE(F),R.steps.push(Z),Q+=Z.uid.toString()+",";R._cachedProjection={};R._gtlistentry=null;R._chain=Q;return R};var ma=f.prototype;ma.getInverse=function(){const Z=new f;Z.steps=[];for(let R=this.steps.length-1;0<=R;R--)Z.steps.push(this.steps[R].getInverse());return Z};ma.getGTListEntry=function(){let Z="";for(const R of this.steps)Z+=R.uid.toString()+",";Z!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=Z);return this._gtlistentry};ma.assignCachedGe=function(Z,R,
Q){this._cachedProjection[f.cacheKey(Z,R)]=Q};ma.getCachedGeTransformation=function(Z,R){let Q="";for(const F of this.steps)Q+=F.uid.toString()+",";Q!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=Q);Z=this._cachedProjection[f.cacheKey(Z,R)];return void 0===Z?null:Z};return f}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let f=0;return function(){function ma(Z){this.uid=f++;Z?(this._wkt=
null!=Z.wkt?Z.wkt:null,this._wkid=null!=Z.wkid?Z.wkid:-1,this._isInverse=null!=Z.isInverse?!0===Z.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ma.fromGE=function(Z){const R=new ma;R._wkt=Z.wkt;R._wkid=Z.wkid;R._isInverse=Z.isInverse;return R};ma.prototype.getInverse=function(){const Z=new ma;Z._wkt=this.wkt;Z._wkid=this._wkid;Z._isInverse=!this.isInverse;return Z};l._createClass(ma,[{key:"wkt",get:function(){return this._wkt},set:function(Z){this._wkt=Z;this.uid=f++}},{key:"wkid",
get:function(){return this._wkid},set:function(Z){this._wkid=Z;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Z){this._isInverse=Z;this.uid=f++}}]);return ma}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(l,f,ma,Z){l.getGeometryZScaler=function(R,Q,F){if(f.isNone(Q)||f.isNone(F)||F.vcsWkid||Z.equals(Q,F))return null;Q=ma.getMetersPerVerticalUnitForSR(Q);F=ma.getMetersPerVerticalUnitForSR(F);
const u=Q/F;if(1===u)return null;switch(R){case "point":case "esriGeometryPoint":return k=>{k&&null!=k.z&&(k.z*=u)};case "polyline":case "esriGeometryPolyline":return k=>{if(k)for(const n of k.paths)for(const H of n)2<H.length&&(H[2]*=u)};case "polygon":case "esriGeometryPolygon":return k=>{if(k)for(const n of k.rings)for(const H of n)2<H.length&&(H[2]*=u)};case "multipoint":case "esriGeometryMultipoint":return k=>{if(k)for(const n of k.points)2<n.length&&(n[2]*=u)};case "extent":case "esriGeometryExtent":return k=>
{k&&null!=k.zmin&&null!=k.zmax&&(k.zmin*=u,k.zmax*=u)};default:return null}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(l,f,ma,Z,R,Q,
F,u,k,n,H,ba,K){function m(G){const q=[];let w=0,D=0;for(let O=0;O<G.length;O++){const C=G[O];let E=null;for(let N=0;N<C.length;N++)E=C[N],q.push(E),0===N?D=w=E[0]:(w=Math.min(w,E[0]),D=Math.max(D,E[0]));E&&q.push([(w+D)/2,0])}return q}function y(G,q){if(!(G instanceof u||G instanceof F))throw aa.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Z("straightLineDensify: the input geometry is neither polyline nor polygon");var w=k.getGeometryParts(G);const D=[];for(const C of w){w=
[];D.push(w);w.push([C[0][0],C[0][1]]);for(let E=0;E<C.length-1;E++){const N=C[E][0],M=C[E][1],B=C[E+1][0],z=C[E+1][1];var O=Math.sqrt((B-N)*(B-N)+(z-M)*(z-M));const h=(z-M)/O,t=(B-N)/O,P=O/q;if(1<P){for(let ja=1;ja<=P-1;ja++){const sa=ja*q;w.push([t*sa+N,h*sa+M])}O=(O+Math.floor(P-1)*q)/2;w.push([t*O+N,h*O+M])}w.push([B,z])}}return"polygon"===G.type?new F({rings:D,spatialReference:G.spatialReference}):new u({paths:D,spatialReference:G.spatialReference})}function e(G,q,w){q&&(G=y(G,1E6),G=H.webMercatorToGeographic(G,
!0));w&&(G=k.updatePolyGeometry(G,w));return G}function p(G,q,w){if(Array.isArray(G)){var D=G[0];D>q?(w=k.offsetMagnitude(D,q),G[0]=D+-2*w*q):D<w&&(q=k.offsetMagnitude(D,w),G[0]=D+-2*q*w)}else D=G.x,D>q?(w=k.offsetMagnitude(D,q),G=G.clone().offset(-2*w*q,0)):D<w&&(q=k.offsetMagnitude(D,w),G=G.clone().offset(-2*q*w,0));return G}function L(G,q){let w=-1;for(let D=0;D<q.cutIndexes.length;D++){const O=q.cutIndexes[D],C=q.geometries[D],E=k.getGeometryParts(C);for(let N=0;N<E.length;N++){const M=E[N];M.some(B=>
{if(180>B[0])return!0;B=0;for(var z=0;z<M.length;z++){var h=M[z][0];B=h>B?h:B}B=Number(B.toFixed(9));B=-360*k.offsetMagnitude(B,180);for(z=0;z<M.length;z++)h=C.getPoint(N,z),C.setPoint(N,z,h.clone().offset(B,0));return!0})}if(O===w)if("polygon"===G[0].type)for(const N of k.getGeometryParts(C))G[O]=G[O].addRing(N);else{if("polyline"===G[0].type)for(const N of k.getGeometryParts(C))G[O]=G[O].addPath(N)}else w=O,G[O]=C}return G}function W(G,q,w){return U.apply(this,arguments)}function U(){U=f._asyncToGenerator(function*(G,
q,w){if(!Array.isArray(G))return W([G],q);q&&"string"!==typeof q&&aa.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var D="string"===typeof q?q:q?.url??ma.geometryServiceUrl;let O,C,E;let N=0;var M=[];q=[];for(var B of G)if(Q.isNone(B))q.push(B);else{if(!z){var z=B.spatialReference;var h=n.getInfo(z);var t=(O=z.isWebMercator)?102100:4326;C=k.cutParams[t].maxX;E=k.cutParams[t].minX;var P=k.cutParams[t].plus180Line;t=k.cutParams[t].minus180Line}if(h)if("mesh"===
B.type)q.push(B);else if("point"===B.type)q.push(p(B.clone(),C,E));else if("multipoint"===B.type){var ja=B.clone();ja.points=ja.points.map(sa=>p(sa,C,E));q.push(ja)}else if("extent"===B.type)ja=B.clone()._normalize(!1,!1,h),q.push(ja.rings?new F(ja):ja);else if(B.extent){ja=B.extent;const sa=2*k.offsetMagnitude(ja.xmin,E)*C;let za=0===sa?B.clone():k.updatePolyGeometry(B.clone(),sa);ja.offset(sa,0);ja.intersects(P)&&ja.xmax!==C?(N=ja.xmax>N?ja.xmax:N,za=e(za,O),M.push(za),q.push("cut")):ja.intersects(t)&&
ja.xmin!==E?(N=2*ja.xmax*C>N?2*ja.xmax*C:N,za=e(za,O,360),M.push(za),q.push("cut")):q.push(za)}else q.push(B.clone());else q.push(B)}z=k.offsetMagnitude(N,C);h=-90;P=z;for(B=new u;0<z;)t=-180+360*z,B.addPath([[t,h],[t,-1*h]]),h*=-1,z--;if(0<M.length&&0<P){z=yield ba.cut(D,M,B,w);z=L(M,z);h=[];M=[];for(P=0;P<q.length;P++)B=q[P],"cut"!==B?M.push(B):(B=z.shift(),t=G[P],Q.isSome(t)&&"polygon"===t.type&&t.rings&&1<t.rings.length&&B.rings.length>=t.rings.length?(h.push(B),M.push("simplify")):M.push(O?H.geographicToWebMercator(B):
B));if(!h.length)return M;q=yield K.simplify(D,h,w);G=[];for(w=0;w<M.length;w++)D=M[w],"simplify"!==D?G.push(D):G.push(O?H.geographicToWebMercator(q.shift()):q.shift());return G}G=[];for(w=0;w<q.length;w++)D=q[w],"cut"!==D?G.push(D):(D=M.shift(),G.push(!0===O?H.geographicToWebMercator(D):D));return G});return U.apply(this,arguments)}const aa=R.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(G){if(!G)return null;const q=G.extent;if(!q)return null;var w=G.spatialReference&&
n.getInfo(G.spatialReference);if(!w)return q;const [D,O]=w.valid;({width:w}=q);let {xmin:C,xmax:E}=q;[C,E]=[E,C];if("extent"===G.type||0===w||w<=O||w>2*O||C<D||E>O)return q;let N;switch(G.type){case "polygon":if(1<G.rings.length)N=m(G.rings);else return q;break;case "polyline":if(1<G.paths.length)N=m(G.paths);else return q;break;case "multipoint":N=G.points}G=q.clone();for(let M=0;M<N.length;M++){let B=N[M][0];0>B?(B+=O,E=Math.max(B,E)):(B-=O,C=Math.min(B,C))}G.xmin=C;G.xmax=E;return G.width<w?(G.xmin-=
O,G.xmax-=O,G):q};l.normalizeCentralMeridian=W;l.normalizeMapX=function(G,q){if(q=n.getInfo(q)){const [w,D]=q.valid;q=D-w;if(G<w)for(;G<w;)G+=q;if(G>D)for(;G>D;)G-=q}return G};l.straightLineDensify=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,f,ma,Z){function R(Q){return Z.isPolygon(Q)?Q.rings:Q.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,
plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ma.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ma.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:ma.WGS84}),minus180Line:new f({paths:[[[-180,-180],[-180,180]]],spatialReference:ma.WGS84})}};l.cutParams=
f;l.getGeometryParts=R;l.offsetMagnitude=function(Q,F){return Math.ceil((Q-F)/(2*F))};l.updatePolyGeometry=function(Q,F){const u=R(Q);for(const k of u)for(const n of k)n[0]+=F;return Q};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(l,f,ma,Z,R,Q){function F(){F=f._asyncToGenerator(function*(u,
k,n,H){u=Q.parseUrl(u);const ba=k[0].spatialReference;k={...H,query:{...u.query,f:"json",sr:JSON.stringify(ba),target:JSON.stringify({geometryType:R.getJsonType(k[0]),geometries:k}),cutter:JSON.stringify(n)}};k=yield Z(u.path+"/cut",k);const {cutIndexes:K,geometries:m=[]}=k.data;return{cutIndexes:K,geometries:m.map(y=>{y=R.fromJSON(y);y.spatialReference=ba;return y})}});return F.apply(this,arguments)}l.cut=function(u,k,n,H){return F.apply(this,arguments)};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(l,f,ma,Z,R,Q){function F(u,k,n){const H={};for(const K in u)if("declaredClass"!==K){var ba=u[K];if(null!=ba&&"function"!==typeof ba)if(Array.isArray(ba)){H[K]=[];for(let m=0;m<ba.length;m++)H[K][m]=F(ba[m])}else"object"===typeof ba?ba.toJSON?(ba=ba.toJSON(n&&n[K]),H[K]=k?ba:JSON.stringify(ba)):H[K]=k?ba:JSON.stringify(ba):H[K]=ba}return H}
l.asValidOptions=function(u,k){return k?{...k,query:{...(u??{}),...k.query}}:{query:u}};l.encode=F;l.getToken=function(u,k){return Q.supportsApiKey(u)&&(k||f.apiKey)?k||f.apiKey:ma.id?.findCredential(u)?.token};l.parseUrl=function(u){return"string"===typeof u?R.urlToObject(u):Z.clone(u)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(l,f,ma,Z,R,Q){function F(){F=f._asyncToGenerator(function*(u,k,n){const H="string"===typeof u?Z.urlToObject(u):u;u=k[0].spatialReference;const ba=R.getJsonType(k[0]);k={...n,query:{...H.query,f:"json",sr:u.wkid?u.wkid:JSON.stringify(u),geometries:JSON.stringify(Q.encodeGeometries(k))}};({data:k}=yield ma(H.path+"/simplify",k));return Q.decodeGeometries(k.geometries,ba,u)});return F.apply(this,arguments)}l.simplify=function(u,k,n){return F.apply(this,arguments)};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(l,f){l.decodeGeometries=function(ma,Z,R){const Q=f.getGeometryType(Z);return ma.map(F=>{F=Q.fromJSON(F);F.spatialReference=R;return F})};l.encodeGeometries=function(ma){return{geometryType:f.getJsonType(ma[0]),geometries:ma.map(Z=>Z.toJSON())}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(l,f,ma,Z,R,Q,F){function u(e,p){if(!p)return null;if("x"in p){var L={x:0,y:0};[L.x,L.y]=e(p.x,p.y,ba);null!=p.z&&(L.z=p.z);null!=p.m&&(L.m=p.m);return L}return"xmin"in p?(L={xmin:0,ymin:0,xmax:0,ymax:0},[L.xmin,L.ymin]=e(p.xmin,p.ymin,ba),[L.xmax,L.ymax]=e(p.xmax,p.ymax,ba),p.hasZ&&(L.zmin=p.zmin,L.zmax=p.zmax,L.hasZ=!0),p.hasM&&(L.mmin=p.mmin,L.mmax=p.mmax,L.hasM=!0),L):"rings"in p?{rings:k(p.rings,e),hasM:p.hasM,hasZ:p.hasZ}:"paths"in p?{paths:k(p.paths,e),hasM:p.hasM,hasZ:p.hasZ}:"points"in
p?{points:n(p.points,e),hasM:p.hasM,hasZ:p.hasZ}:null}function k(e,p){const L=[];for(const W of e)L.push(n(W,p));return L}function n(e,p){const L=[];for(const W of e)e=p(W[0],W[1],[0,0]),L.push(e),2<W.length&&e.push(W[2]),3<W.length&&e.push(W[3]);return L}function H(){H=f._asyncToGenerator(function*(e,p){e&&p&&(e=Array.isArray(e)?e.map(L=>ma.isSome(L.geometry)?L.geometry.spatialReference:null).filter(ma.isSome):[e],yield Z.initializeProjection(e.map(L=>({source:L,dest:p}))))});return H.apply(this,
arguments)}const ba=[0,0],K=u.bind(null,F.lngLatToXY),m=u.bind(null,F.xyToLngLat),y=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var p=e.prototype;p.push=function(){var L=f._asyncToGenerator(function*(W,U,aa){if(!(W&&W.length&&U&&aa)||Q.equals(U,aa))return W;const G={geometries:W,inSpatialReference:U,outSpatialReference:aa,resolve:null};this._jobs.push(G);return new Promise(q=>{G.resolve=q;null===this._timer&&(this._timer=setTimeout(this._process,
10))})});return function(W,U,aa){return L.apply(this,arguments)}}();p._process=function(){this._timer=null;const L=this._jobs.shift();if(L){var {geometries:W,inSpatialReference:U,outSpatialReference:aa,resolve:G}=L;F.canProject(U,aa)?Q.isWebMercator(aa)?G(W.map(K)):G(W.map(m)):G(Z.projectMany(R.jsonAdapter,W,U,aa,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e}());l.checkProjectionSupport=function(e,p){return H.apply(this,arguments)};l.project=function(e,p,L,
W){if(!e)return e;L||(L=p,p=e.spatialReference);return Q.isValid(p)&&Q.isValid(L)&&!Q.equals(p,L)?F.canProject(p,L)?(e=Q.isWebMercator(L)?K(e):m(e),e.spatialReference=L,e):Z.projectMany(R.jsonAdapter,[e],p,L,null,W)[0]:e};l.projectMany=function(e,p,L){return y.push(e,p,L)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(l){let f=function(F,u,k){this.x=F;this.y=u;this.spatialReference=k;this.m=this.z=void 0},
ma=function(F,u,k,n){this.rings=F;this.spatialReference=u;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)},Z=function(F,u,k,n){this.paths=F;this.spatialReference=u;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)},R=function(F,u,k,n){this.points=F;this.spatialReference=u;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);n&&(this.hasM=n)},Q=function(F,u,k,n,H){this.xmin=F;this.ymin=u;this.xmax=k;this.ymax=n;this.spatialReference=H;this.mmax=this.mmin=this.zmax=this.zmin=void 0};
l.jsonAdapter={convertToGEGeometry:function(F,u){return null==u?null:F.convertJSONToGeometry(u)},exportPoint:function(F,u,k){k=new f(F.getPointX(u),F.getPointY(u),k);const n=F.hasZ(u),H=F.hasM(u);n&&(k.z=F.getPointZ(u));H&&(k.m=F.getPointM(u));return k},exportPolygon:function(F,u,k){return new ma(F.exportPaths(u),k,F.hasZ(u),F.hasM(u))},exportPolyline:function(F,u,k){return new Z(F.exportPaths(u),k,F.hasZ(u),F.hasM(u))},exportMultipoint:function(F,u,k){return new R(F.exportPoints(u),k,F.hasZ(u),F.hasM(u))},
exportExtent:function(F,u,k){var n=F.hasZ(u);const H=F.hasM(u);k=new Q(F.getXMin(u),F.getYMin(u),F.getXMax(u),F.getYMax(u),k);n&&(n=F.getZExtent(u),k.zmin=n.vmin,k.zmax=n.vmax);H&&(F=F.getMExtent(u),k.mmin=F.vmin,k.mmax=F.vmax);return k}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m,y,e,p,L,W,U,aa,G,q,w,D,O){function C(B){return null!=B&&B.every(z=>"exceedslimit"!==z.statisticType)}const E=new F.MemCacheStorage(2E6);let N=0,M=function(){function B(h){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:W.queryCapabilities};this.geometryType=h.geometryType;this.hasM=!!h.hasM;this.hasZ=!!h.hasZ;this.objectIdField=h.objectIdField;this.spatialReference=h.spatialReference;this.definitionExpression=h.definitionExpression;
this.featureStore=h.featureStore;this.aggregateAdapter=h.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=h.timeInfo;h.cacheSpatialQueries&&(this._geometryQueryCache=new F.MemCache(N++ +"$$",E));this.fieldsIndex=new w(h.fields);h.scheduler&&h.priority&&(this._frameTask=h.scheduler.registerTask(h.priority))}var z=B.prototype;z.destroy=function(){this._frameTask=Q.removeMaybe(this._frameTask);this.clearCache();Q.destroyMaybe(this._geometryQueryCache);
this._changeHandle=Q.removeMaybe(this._changeHandle);Q.destroyMaybe(this.fieldsIndex)};z.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};z.executeQuery=function(){var h=f._asyncToGenerator(function*(t,P){try{return(yield this._executeQuery(t,{},P)).createQueryResponse()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new U.QueryEngineResult([],t,this)).createQueryResponse()}});return function(t,P){return h.apply(this,arguments)}}();
z.executeQueryForCount=function(){var h=f._asyncToGenerator(function*(t={},P){try{return(yield this._executeQuery(t,{returnGeometry:!1,returnCentroid:!1,outSR:null},P)).createQueryResponseForCount()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return h.apply(this,arguments)}}();z.executeQueryForExtent=function(){var h=f._asyncToGenerator(function*(t,P){const ja=t.outSR;try{const sa=yield this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},
P),za=sa.size;if(!za)return{count:0,extent:null};const Ea=yield this._getBounds(sa.items,sa.spatialReference,ja||this.spatialReference);return{count:za,extent:Ea}}catch(sa){if(sa===q.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw sa;}});return function(t,P){return h.apply(this,arguments)}}();z.executeQueryForIds=function(){var h=f._asyncToGenerator(function*(t,P){return this.executeQueryForIdSet(t,P).then(ja=>Array.from(ja))});return function(t,P){return h.apply(this,arguments)}}();z.executeQueryForIdSet=
function(){var h=f._asyncToGenerator(function*(t,P){try{const ja=yield this._executeQuery(t,{returnGeometry:!0,returnCentroid:!1,outSR:null},P),sa=ja.items,za=new Set;yield this._reschedule(()=>{for(const Ea of sa)za.add(ja.featureAdapter.getObjectId(Ea))},P);return za}catch(ja){if(ja===q.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}});return function(t,P){return h.apply(this,arguments)}}();z.executeQueryForSnapping=function(){var h=f._asyncToGenerator(function*(t,P){const {point:ja,distance:sa,
types:za}=t;if(za===U.SnappingTypes.NONE)return{candidates:[]};const Ea=yield this._reschedule(()=>this._checkQuerySupport(t.query),P),Ha=!y.equals(ja.spatialReference,this.spatialReference);Ha&&(yield L.checkProjectionSupport(ja.spatialReference,this.spatialReference));var Fa="number"===typeof sa?sa:sa.x,Ua="number"===typeof sa?sa:sa.y;Fa={xmin:ja.x-Fa,xmax:ja.x+Fa,ymin:ja.y-Ua,ymax:ja.y+Ua,spatialReference:ja.spatialReference};Fa=Ha?L.project(Fa,this.spatialReference):Fa;if(!Fa)return{candidates:[]};
Ua=(yield m.normalizeCentralMeridian(K.fromJSON(ja),null,{signal:P}))[0];const Oa=(yield m.normalizeCentralMeridian(K.fromJSON(Fa),null,{signal:P}))[0];if(Q.isNone(Ua)||Q.isNone(Oa))return{candidates:[]};const Sa=new U.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Oa.toJSON())),P),Ea,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Sa),P);yield this._reschedule(()=>this._executeTimeQuery(Sa),P);yield this._reschedule(()=>this._executeAttributesQuery(Sa),
P);P=Ua.toJSON();P=Ha?L.project(P,this.spatialReference):P;return Sa.createSnappingResponse({...t,point:P,distance:Ha?Math.max(Fa.xmax-Fa.xmin,Fa.ymax-Fa.ymin)/2:sa},ja.spatialReference)});return function(t,P){return h.apply(this,arguments)}}();z.executeQueryForLatestObservations=function(){var h=f._asyncToGenerator(function*(t,P){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:t,timeInfo:this.timeInfo});
try{const ja=yield this._executeQuery(t,{},P);yield this._reschedule(()=>this._filterLatest(ja),P);return ja.createQueryResponse()}catch(ja){if(ja!==q.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new U.QueryEngineResult([],t,this)).createQueryResponse()}});return function(t,P){return h.apply(this,arguments)}}();z.executeQueryForSummaryStatistics=function(){var h=f._asyncToGenerator(function*(t={},P,ja){const {field:sa,normalizationField:za,valueExpression:Ea}=P;return(yield this._getQueryEngineResultForStats(t,
{field:sa,normalizationField:za,valueExpression:Ea},ja)).createSummaryStatisticsResponse(P)});return function(){return h.apply(this,arguments)}}();z.executeQueryForUniqueValues=function(){var h=f._asyncToGenerator(function*(t={},P,ja){const {field:sa,field2:za,field3:Ea,valueExpression:Ha}=P;return(yield this._getQueryEngineResultForStats(t,{field:sa,field2:za,field3:Ea,valueExpression:Ha},ja)).createUniqueValuesResponse(P)});return function(){return h.apply(this,arguments)}}();z.executeQueryForClassBreaks=
function(){var h=f._asyncToGenerator(function*(t={},P,ja){const {field:sa,normalizationField:za,valueExpression:Ea}=P;return(yield this._getQueryEngineResultForStats(t,{field:sa,normalizationField:za,valueExpression:Ea},ja)).createClassBreaksResponse(P)});return function(){return h.apply(this,arguments)}}();z.executeQueryForHistogram=function(){var h=f._asyncToGenerator(function*(t={},P,ja){const {field:sa,normalizationField:za,valueExpression:Ea}=P;return(yield this._getQueryEngineResultForStats(t,
{field:sa,normalizationField:za,valueExpression:Ea},ja)).createHistogramResponse(P)});return function(){return h.apply(this,arguments)}}();z.fetchRecomputedExtents=function(){var h=f._asyncToGenerator(function*(t){const [P,ja]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),Q.isSome(this._timeExtentPromise)?
this._timeExtentPromise:this._timeExtentPromise=G.getTimeExtent(this.timeInfo,this.featureStore)]);u.throwIfAborted(t);return{fullExtent:P,timeExtent:ja}});return function(t){return h.apply(this,arguments)}}();z._getBounds=function(){var h=f._asyncToGenerator(function*(t,P,ja){const sa=n.set(n.create(),n.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(t,za=>n.expandWithAABB(sa,za));t={xmin:sa[0],ymin:sa[1],xmax:sa[3],ymax:sa[4],spatialReference:q.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(sa[2])&&isFinite(sa[5])&&(t.zmin=sa[2],t.zmax=sa[5]);P=L.project(t,P,ja);P.spatialReference=q.cleanFromGeometryEngine(ja);0===P.xmax-P.xmin&&(ja=k.getMetersPerUnitForSR(P.spatialReference),P.xmin-=ja,P.xmax+=ja);0===P.ymax-P.ymin&&(ja=k.getMetersPerUnitForSR(P.spatialReference),P.ymin-=ja,P.ymax+=ja);this.hasZ&&null!=P.zmin&&null!=P.zmax&&0===P.zmax-P.zmin&&(ja=k.getMetersPerUnitForSR(P.spatialReference),P.zmin-=ja,P.zmax+=ja);return P});return function(t,P,ja){return h.apply(this,
arguments)}}();z._schedule=function(){var h=f._asyncToGenerator(function*(t,P){return Q.isSome(this._frameTask)?this._frameTask.schedule(t,P):t(O.noBudget)});return function(t,P){return h.apply(this,arguments)}}();z._reschedule=function(){var h=f._asyncToGenerator(function*(t,P){return Q.isSome(this._frameTask)?this._frameTask.reschedule(t,P):t(O.noBudget)});return function(t,P){return h.apply(this,arguments)}}();z._getAllFeaturesQueryEngineResult=function(){var h=f._asyncToGenerator(function*(t){return new U.QueryEngineResult(yield this._getAllFeatures(),
t,this)});return function(t){return h.apply(this,arguments)}}();z._getAllFeatures=function(){var h=f._asyncToGenerator(function*(){var t=this;if(Q.isNone(this._allFeaturesPromise)){const sa=[];this._allFeaturesPromise=f._asyncToGenerator(function*(){yield t.featureStore.forEach(za=>sa.push(za))})().then(()=>sa)}const P=this._allFeaturesPromise,ja=yield P;return P===this._allFeaturesPromise?ja.slice():this._getAllFeatures()});return function(){return h.apply(this,arguments)}}();z._executeQuery=function(){var h=
f._asyncToGenerator(function*(t,P,ja){t=R.clone(t);t=yield this._schedule(()=>q.normalizeQuery(t,this.definitionExpression,this.spatialReference),ja);t=yield this._reschedule(()=>this._checkQuerySupport(t),ja);t={...t,...P};const sa=yield this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),za=yield this._reschedule(()=>this._executeGeometryQuery(t,sa,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ja);yield this._reschedule(()=>
this._executeTimeQuery(za),ja);yield this._reschedule(()=>this._executeAttributesQuery(za),ja);return za});return function(t,P,ja){return h.apply(this,arguments)}}();z._executeSceneFilterQuery=function(){var h=f._asyncToGenerator(function*(t,P){var ja=this;if(Q.isNone(t.sceneFilter))return null;const {outSR:sa,returnGeometry:za,returnCentroid:Ea}=t;var Ha=this.featureStore.featureSpatialReference,Fa=t.sceneFilter.geometry;const Ua=Q.isNone(Ha)||y.equals(Ha,Fa.spatialReference)?Fa:L.project(Fa,Ha);
if(!Ua)return null;Ha=za||Ea;Ha=y.isValid(sa)&&!y.equals(this.spatialReference,sa)&&Ha?function(){var Ta=f._asyncToGenerator(function*(jb){return ja._project(jb,sa)});return function(jb){return Ta.apply(this,arguments)}}():Ta=>Ta;const Oa=this.featureAdapter;Fa=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ua)),P);if("disjoint"===t.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Ta=new Set;for(var Sa of Fa)Ta.add(Oa.getObjectId(Sa));const jb=yield this._reschedule(()=>
this._getAllFeatures(),P);Sa=yield this._reschedule(f._asyncToGenerator(function*(){const ib=yield aa.getSpatialQueryOperator("esriSpatialRelDisjoint",Ua,ja.geometryType,ja.hasZ,ja.hasM),lb=yield ja._runSpatialFilter(jb,c=>!Ta.has(Oa.getObjectId(c))||ib(Oa.getGeometry(c)),P);return new U.QueryEngineResult(lb,t,ja)}),P);return Ha(Sa)}if(!Fa.length)return new U.QueryEngineResult([],t,this);if(this._canExecuteSinglePass(Ua,t))return Ha(new U.QueryEngineResult(Fa,t,this));const $a=yield aa.getSpatialQueryOperator("esriSpatialRelContains",
Ua,this.geometryType,this.hasZ,this.hasM);Sa=yield this._runSpatialFilter(Fa,Ta=>$a(Oa.getGeometry(Ta)),P);return Ha(new U.QueryEngineResult(Sa,t,this))});return function(t,P){return h.apply(this,arguments)}}();z._executeGeometryQuery=function(){var h=f._asyncToGenerator(function*(t,P,ja){var sa=this;if(Q.isSome(P)&&0===P.items.length)return P;t=Q.isSome(P)?P.query:t;const {geometry:za,outSR:Ea,spatialRel:Ha,returnGeometry:Fa,returnCentroid:Ua}=t;var Oa=this.featureStore.featureSpatialReference;const Sa=
!za||Q.isNone(Oa)||y.equals(Oa,za.spatialReference)?za:L.project(za,Oa),$a=Fa||Ua,Ta=y.isValid(Ea)&&!y.equals(this.spatialReference,Ea),jb=this._geometryQueryCache&&Q.isNone(P)?Ta&&$a?JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha,outSpatialReference:Ea}):JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha}):null;Oa=jb?this._geometryQueryCache.get(jb):null;if(Q.isSome(Oa))return new U.QueryEngineResult(Oa,t,this);Oa=function(){var ea=f._asyncToGenerator(function*(ka){Ta&&
$a&&(yield sa._project(ka,Ea));jb&&sa._geometryQueryCache.put(jb,ka.items,ka.items.length+1);return ka});return function(ka){return ea.apply(this,arguments)}}();if(!Sa)return Oa(Q.isSome(P)?P:yield this._getAllFeaturesQueryEngineResult(t));const ib=this.featureAdapter;let lb=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(za)),ja);if("esriSpatialRelDisjoint"===Ha){if(!lb.length)return Oa(Q.isSome(P)?P:yield this._getAllFeaturesQueryEngineResult(t));const ea=new Set;for(var c of lb)ea.add(ib.getObjectId(c));
const ka=Q.isSome(P)?P.items:yield this._reschedule(()=>this._getAllFeatures(),ja);c=yield this._reschedule(f._asyncToGenerator(function*(){const va=yield aa.getSpatialQueryOperator(Ha,Sa,sa.geometryType,sa.hasZ,sa.hasM),x=yield sa._runSpatialFilter(ka,J=>!ea.has(ib.getObjectId(J))||va(ib.getGeometry(J)),ja);return new U.QueryEngineResult(x,t,sa)}),ja);return Oa(c)}if(Q.isSome(P)){const ea=new ma.PositionHint;lb=lb.filter(ka=>0<=ma.indexOf(P.items,ka,P.items.length,ea))}if(!lb.length)return Oa=new U.QueryEngineResult([],
t,this),jb&&this._geometryQueryCache.put(jb,Oa.items,1),Oa;if(this._canExecuteSinglePass(Sa,t))return Oa(new U.QueryEngineResult(lb,t,this));const r=yield aa.getSpatialQueryOperator(Ha,Sa,this.geometryType,this.hasZ,this.hasM);c=yield this._runSpatialFilter(lb,ea=>r(ib.getGeometry(ea)),ja);return Oa(new U.QueryEngineResult(c,t,this))});return function(t,P,ja){return h.apply(this,arguments)}}();z._executeAggregateIdsQuery=function(h){if(0!==h.items.length&&h.query.aggregateIds&&h.query.aggregateIds.length&&
!Q.isNone(this.aggregateAdapter)){var t=new Set;for(const ja of h.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ja).forEach(sa=>t.add(sa));var P=this.featureAdapter.getObjectId;h.items=h.items.filter(ja=>t.has(P(ja)))}};z._executeObjectIdsQuery=function(h){if(0!==h.items.length&&h.query.objectIds&&h.query.objectIds.length){var t=new Set(h.query.objectIds),P=this.featureAdapter.getObjectId;h.items=h.items.filter(ja=>t.has(P(ja)))}};z._executeTimeQuery=function(h){if(0!==h.items.length){var t=
G.getTimeOperator(this.timeInfo,h.query.timeExtent,this.featureAdapter);Q.isNone(t)||(h.items=h.items.filter(t))}};z._executeAttributesQuery=function(h){if(0!==h.items.length){var t=p.getWhereClause(h.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError("Where clause is not standardized");h.items=h.items.filter(P=>t.testFeature(P,this.featureAdapter))}}};z._runSpatialFilter=function(){var h=f._asyncToGenerator(function*(t,P,ja){var sa=this;if(!P)return t;if(Q.isNone(this._frameTask))return t.filter(Fa=>
P(Fa));let za=0;const Ea=[],Ha=function(){var Fa=f._asyncToGenerator(function*(Ua){for(;za<t.length;){const Oa=t[za++];P(Oa)&&(Ea.push(Oa),Ua.madeProgress());Ua.done&&(yield sa._reschedule(Sa=>Ha(Sa),ja))}});return function(Ua){return Fa.apply(this,arguments)}}();return this._reschedule(Fa=>Ha(Fa),ja).then(()=>Ea)});return function(t,P,ja){return h.apply(this,arguments)}}();z._filterLatest=function(h){const {trackIdField:t,startTimeField:P,endTimeField:ja}=this.timeInfo,sa=ja||P,za=new Map,Ea=this.featureAdapter.getAttribute;
for(const Ha of h.items){const Fa=Ea(Ha,t),Ua=Ea(Ha,sa),Oa=za.get(Fa);(!Oa||Ua>Ea(Oa,sa))&&za.set(Fa,Ha)}h.items=Array.from(za.values())};z._canExecuteSinglePass=function(h,t){({spatialRel:t}=t);return aa.canQueryWithRBush(h)&&("esriSpatialRelEnvelopeIntersects"===t||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t||"esriSpatialRelWithin"===t))};z._project=function(){var h=f._asyncToGenerator(function*(t,P){if(!P||y.equals(this.spatialReference,
P))return t;const ja=this.featureAdapter;P=yield L.projectMany(t.items.map(sa=>q.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(sa))),this.spatialReference,P);t.items=P.map((sa,za)=>ja.cloneWithGeometry(t.items[za],e.convertFromGeometry(sa,this.hasZ,this.hasM)));return t});return function(t,P){return h.apply(this,arguments)}}();z._getQueryBBoxes=function(h){if(aa.canQueryWithRBush(h)){if(K.isExtent(h))return[H.fromValues(h.xmin,h.ymin,h.xmax,h.ymax)];if(K.isPolygon(h))return h.rings.map(t=>
H.fromValues(Math.min(t[0][0],t[2][0]),Math.min(t[0][1],t[2][1]),Math.max(t[0][0],t[2][0]),Math.max(t[0][1],t[2][1])))}return[ba.getBoundsXY(H.create(),h)]};z._searchFeatures=function(){var h=f._asyncToGenerator(function*(t){const P=new Set;yield Promise.all(t.map(ja=>this.featureStore.forEachInBounds(ja,sa=>P.add(sa))));t=Array.from(P.values());P.clear();return t});return function(t){return h.apply(this,arguments)}}();z._checkStatisticsSupport=function(){var h=f._asyncToGenerator(function*(t,P){if(0>
(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);return Promise.all([this._checkStatisticsParamsSupport(P),aa.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),L.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)});return function(t,
P){return h.apply(this,arguments)}}();z._checkStatisticsParamsSupport=function(){var h=f._asyncToGenerator(function*(t){var P=[];t.valueExpression&&({arcadeUtils:P}=yield D.loadArcade(),P=P.extractFieldNames(t.valueExpression));t.field&&P.push(t.field);t.field2&&P.push(t.field2);t.field3&&P.push(t.field3);t.normalizationField&&P.push(t.normalizationField);if(!P.length)throw new Z("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:t});p.validateFields(this.fieldsIndex,
P,"params contains missing fields")});return function(t){return h.apply(this,arguments)}}();z._checkQuerySupport=function(){var h=f._asyncToGenerator(function*(t){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:t});this._checkAttributesQuerySupport(t);this._checkStatisticsQuerySupport(t);return Promise.all([aa.checkSpatialQuerySupport(t,this.geometryType,this.spatialReference),
L.checkProjectionSupport(this.spatialReference,t.outSR)]).then(()=>t)});return function(t){return h.apply(this,arguments)}}();z._checkAttributesQuerySupport=function(h){const {outFields:t,orderByFields:P,returnDistinctValues:ja,outStatistics:sa}=h,za=sa?sa.map(Ea=>Ea.outStatisticFieldName&&Ea.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(P&&0<P.length){const Ea=P.map(Ha=>{const Fa=Ha.toLowerCase();return Fa.includes(" asc")?Fa.split(" asc")[0]:Fa.includes(" desc")?Fa.split(" desc")[0]:
Ha}).filter(Ha=>!za.includes(Ha));p.validateFields(this.fieldsIndex,Ea,"orderByFields contains missing fields")}if(t&&0<t.length)p.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(ja)throw new Z("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:h});p.validateWhere(this.fieldsIndex,h.where)};z._checkStatisticsQuerySupport=function(h){const {outStatistics:t,groupByFieldsForStatistics:P,having:ja}=h;var sa=P&&P.length,za=t&&
t.length;if(ja){if(!sa||!za)throw new Z("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:h});p.validateHaving(this.fieldsIndex,ja,t)}if(za&&C(t)){za=t.map(Ea=>Ea.onStatisticField).filter(Boolean);p.validateFields(this.fieldsIndex,za,"onStatisticFields contains missing fields");sa&&p.validateFields(this.fieldsIndex,P,"groupByFieldsForStatistics contains missing fields");for(const Ea of t){const {onStatisticField:Ha,statisticType:Fa}=
Ea;if(("percentile_disc"===Fa||"percentile_cont"===Fa)&&"statisticParameters"in Ea){if({statisticParameters:sa}=Ea,!sa)throw new Z("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ea,query:h});}else if("count"!==Fa&&Ha&&p.hasInvalidFieldType(Ha,this.fieldsIndex))throw new Z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ea,query:h});}}};z._getQueryEngineResultForStats=function(){var h=f._asyncToGenerator(function*(t,
P,ja){t=R.clone(t);try{t=yield this._schedule(()=>q.normalizeQuery(t,this.definitionExpression,this.spatialReference),ja);t=yield this._reschedule(()=>this._checkStatisticsSupport(t,P),ja);const sa=yield this._reschedule(()=>this._executeSceneFilterQuery(t,ja),ja),za=yield this._reschedule(()=>this._executeGeometryQuery(t,sa,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ja);yield this._reschedule(()=>this._executeTimeQuery(za),
ja);yield this._reschedule(()=>this._executeAttributesQuery(za),ja);return za}catch(sa){if(sa!==q.QUERY_ENGINE_EMPTY_RESULT)throw sa;return new U.QueryEngineResult([],t,this)}});return function(t,P,ja){return h.apply(this,arguments)}}();f._createClass(B,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return B}();l.Feature=function(B,z=null,h,t,P){this.attributes=B;this.geometry=h;this.centroid=t;this.filterFlags=P;this.groupId=-1;this.displayId=z};l.QueryEngine=M;
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(l,f,ma,Z){l.RemoveMode=void 0;(function(F){F[F.ALL=0]="ALL";F[F.SOME=1]="SOME"})(l.RemoveMode||(l.RemoveMode={}));let R=function(){function F(k,n,H){this._namespace=k;this._storage=n;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";H&&(this._storage.registerRemoveFunc(this._namespace,
H),this._removeFunc=!0)}var u=F.prototype;u.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};u.resetHitRate=function(){this._hit=this._miss=0};u.put=function(k,n,H,ba=0){this._storage.put(this._namespace+k,n,H,ba)};u.get=function(k){k=this._storage.get(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};u.pop=function(k){k=this._storage.pop(this._namespace+k);
void 0===k?++this._miss:++this._hit;return k};u.updateSize=function(k,n,H){this._storage.updateSize(this._namespace+k,n,H)};u.clear=function(){this._storage.clear(this._namespace)};u.clearAll=function(){this._storage.clearAll()};u.getStats=function(){return this._storage.getStats()};u.resetStats=function(){this._storage.resetStats()};f._createClass(F,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return F}(),Q=function(){function F(k=10485760){this._maxSize=k;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Z;this._users=new Z}var u=F.prototype;u.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};u.register=function(k){this._users.push(k)};u.deregister=function(k){this._users.removeUnordered(k)};u.registerRemoveFunc=
function(k,n){this._removeFuncs.push([k,n])};u.deregisterRemoveFunc=function(k){this._removeFuncs.filterInPlace(n=>n[0]!==k)};u.put=function(k,n,H,ba){const K=this._db.get(k);K&&(this._size-=K.size,this._db.delete(k),K.entry!==n&&this._notifyRemove(k,K.entry,l.RemoveMode.ALL));H>this._maxSize?this._notifyRemove(k,n,l.RemoveMode.ALL):void 0===n?console.warn("Refusing to cache undefined entry "):!H||0>H?console.warn("Refusing to cache entry with invalid size "+H):(ba=1+Math.max(ba,-3)- -3,this._db.set(k,
{entry:n,size:H,lifetime:ba,lives:ba}),this._size+=H,this._checkSizeLimit())};u.updateSize=function(k,n,H){const ba=this._db.get(k);if(ba&&ba.entry===n){for(this._size-=ba.size;H>this._maxSize;)if(H=this._notifyRemove(k,n,l.RemoveMode.SOME),!(ma.isSome(H)&&0<H)){this._db.delete(k);return}ba.size=H;this._size+=H;this._checkSizeLimit()}};u.pop=function(k){const n=this._db.get(k);if(n)return this._size-=n.size,this._db.delete(k),++this._hit,n.entry;++this._miss};u.get=function(k){const n=this._db.get(k);
if(void 0===n)++this._miss;else return this._db.delete(k),n.lives=n.lifetime,this._db.set(k,n),++this._hit,n.entry};u.getStats=function(){const k={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},H=[];this._db.forEach((m,y)=>{const e=m.lifetime;H[e]=(H[e]||0)+m.size;this._users.forAll(p=>{p=p.namespace;y.startsWith(p)&&(n[p]=(n[p]||0)+m.size)})});const ba={};this._users.forAll(m=>
{const y=m.namespace;!isNaN(m.hitRate)&&0<m.hitRate?(n[y]=n[y]||0,ba[y]=Math.round(100*m.hitRate)+"%"):ba[y]="0%"});var K=Object.keys(n);K.sort((m,y)=>n[y]-n[m]);K.forEach(m=>k[m]=Math.round(n[m]/2**20)+"MB / "+ba[m]);for(K=H.length-1;0<=K;--K){const m=H[K];m&&(k["Priority "+(K+-3-1)]=Math.round(m/this.size*100)+"%")}return k};u.resetStats=function(){this._hit=this._miss=0;this._users.forAll(k=>k.resetHitRate())};u.clear=function(k){this._db.forEach((n,H)=>{H.startsWith(k)&&(this._size-=n.size,this._db.delete(H),
this._notifyRemove(H,n.entry,l.RemoveMode.ALL))})};u.clearAll=function(){this._db.forEach((k,n)=>this._notifyRemove(n,k.entry,l.RemoveMode.ALL));this._size=0;this._db.clear()};u._getHitRate=function(){return this._hit/(this._hit+this._miss)};u._notifyRemove=function(k,n,H){let ba;this._removeFuncs.some(K=>k.startsWith(K[0])?(K=K[1](n,H),"number"===typeof K&&(ba=K),!0):!1);return ba};u._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [k,n]of this._db){this._db.delete(k);if(1>=n.lives){this._size-=
n.size;const H=this._notifyRemove(k,n.entry,l.RemoveMode.SOME);ma.isSome(H)&&0<H&&(this._size+=H,n.lives=n.lifetime,n.size=H,this._db.set(k,n))}else--n.lives,this._db.set(k,n);if(this._size<=.9*this.maxSize)break}};f._createClass(F,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(k){this._maxSize=Math.max(k,0);this._checkSizeLimit()}}]);return F}();l.MIN_PRIORITY=-3;l.MemCache=R;l.MemCacheStorage=Q;Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,f,ma){function Z(k,n){return k?F.get(k,n):null}function R(k,n,H,ba=!0){const K=[];for(const m of n)if("*"!==m&&!k.has(m))if(ba){n=Q(m);try{const y=Z(n,k);if(!y)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:n});if(!y.isStandardized)throw new f("feature-store:unsupported-query","expression is not standard",
{clause:y});R(k,y.fieldNames,"expression contains missing fields")}catch(y){if((n=y&&y.details)&&(n.clause||n.where))throw y;n&&n.missingFields?K.push(...n.missingFields):K.push(m)}}else K.push(m);if(K.length)throw new f("feature-store:unsupported-query",H,{missingFields:K});}function Q(k){return k.split(" as ")[0]}const F=new ma.WhereClauseCache(50,500),u=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
l.getAliasFromFieldName=function(k){return k.split(" as ")[1]};l.getExpressionFromFieldName=Q;l.getWhereClause=Z;l.hasInvalidFieldType=function(k,n){return(k=n.get(k))?!u.has(k.type):!1};l.validateFields=R;l.validateHaving=function(k,n,H){if(!n)return!0;const ba=F.get(n,k);if(!ba)throw new f("feature-store:unsupported-query","invalid SQL expression",{having:n});if(!ba.isAggregate)throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:n});R(k,ba.fieldNames,
"having contains missing fields");if(!ba.getExpressions().every(K=>{const {aggregateType:m,field:y}=K,e=k.get(y)?.name;return H.some(p=>{const {onStatisticField:L,statisticType:W}=p;return k.get(L)?.name===e&&W.toLowerCase().trim()===m})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:n});return!0};l.validateWhere=function(k,n){if(!n)return!0;const H=F.get(n,k);if(!H)throw new f("feature-store:unsupported-query","invalid SQL expression",
{where:n});if(!H.isStandardized)throw new f("feature-store:unsupported-query","where clause is not standard",{where:n});R(k,H.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(l,f,ma){let Z=function(){function R(Q,F){this._cache=new f(Q);this._invalidCache=new f(F)}R.prototype.get=function(Q,F){const u=`${F.uid}:${Q}`,k=this._cache.get(u);
if(k)return k;if(void 0!==this._invalidCache.get(u))return null;try{const n=ma.WhereClause.create(Q,F);this._cache.put(u,n);return n}catch{return this._invalidCache.put(u,null),null}};return R}();l.WhereClauseCache=Z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(l){return function(){function f(Z,R){this._storage=new l.MemCacheStorage;this._storage.maxSize=Z;R&&this._storage.registerRemoveFunc("",R)}var ma=f.prototype;
ma.put=function(Z,R){this._storage.put(Z,R,1,1)};ma.pop=function(Z){return this._storage.pop(Z)};ma.get=function(Z){return this._storage.get(Z)};ma.clear=function(){this._storage.clearAll()};ma.destroy=function(){this._storage.destroy()};return f}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,f,ma,Z,R,Q){function F(B,z){B+="";return B.length>=z?B:Array(z-B.length+
1).join("0")+B}function u(B,z,h="0",t="0",P="0",ja="0",sa="",za="0",Ea="0"){return"+"===sa||"-"===sa?(B=`${F(parseInt(B,10),4)}-${F(parseInt(z,10),2)}-${F(parseInt(h,10),2)}`,z="",10>parseFloat(ja)&&(z="0"),t=`${F(parseInt(t,10),2)}:${F(parseInt(P,10),2)}:${z+parseFloat(ja).toString()}`,sa=`${sa}${F(parseInt(za,10),2)}:${F(parseInt(Ea,10),2)}`,new Date(B+"T"+t+sa)):new Date(parseInt(B,10),parseInt(z,10)-1,parseInt(h,10),parseInt(t,10),parseInt(P,10),parseFloat(ja))}function k(B){let z=G.exec(B);if(null!==
z){const [,h,t,P,ja,sa,za]=z;return u(h,t,P,ja,sa,za)}z=q.exec(B);if(null!==z){const [,h,t,P,ja,sa,za,Ea,Ha,Fa]=z;return u(h,t,P,ja,sa,za,Ea,Ha,Fa)}z=w.exec(B);if(null!==z){const [,h,t,P,ja,sa,za,Ea,Ha]=z;return u(h,t,P,ja,sa,"0",za,Ea,Ha)}z=D.exec(B);if(null!==z){const [,h,t,P,ja,sa]=z;return u(h,t,P,ja,sa)}z=aa.exec(B);if(null!==z){const [,h,t,P]=z;return u(h,t,P)}throw Error("SQL Invalid Timestamp");}function n(B){const z=aa.exec(B);if(null===z)try{return k(B)}catch{throw Error("SQL Invalid Date");
}const [,h,t,P]=z;return new Date(parseInt(h,10),parseInt(t,10)-1,parseInt(P,10))}function H(B){return Array.isArray(B)?B:[B]}function ba(B){return null!==B?!0!==B:null}function K(B,z){return null!=B&&null!=z?!0===B&&!0===z:!1===B||!1===z?!1:null}function m(B,z){return null!=B&&null!=z?!0===B||!0===z:!0===B||!0===z?!0:null}function y(B,z){if(null==B)return null;let h=!1;for(const t of z)if(null==t)h=null;else if(B===t){h=!0;break}return h}function e(B,z,h){if(null==B)return null;let t="",P=N.Normal;
for(let ja=0;ja<z.length;ja++){const sa=z.charAt(ja);switch(P){case N.Normal:sa===h?P=N.Escaped:t="-[]/{}()*+?.\\^$|".includes(sa)?t+("\\"+sa):"%"===sa?t+".*":"_"===sa?t+".":t+sa;break;case N.Escaped:t="-[]/{}()*+?.\\^$|".includes(sa)?t+("\\"+sa):t+sa,P=N.Normal}}return(new RegExp("^"+t+"$","m")).test(B)}function p(B){return B instanceof Date?B.valueOf():B}function L(B,z,h){if(null==z||null==h)return null;z=p(z);h=p(h);switch(B){case "\x3c\x3e":return z!==h;case "\x3d":return z===h;case "\x3e":return z>
h;case "\x3c":return z<h;case "\x3e\x3d":return z>=h;case "\x3c\x3d":return z<=h}}function W(B,z,h){if("||"===B)return R.evaluateFunction("concat",[z,h]);if(z instanceof R.SqlInterval)if(h instanceof Date)switch(B){case "+":return new Date(z.valueInMilliseconds()+h.getTime());case "-":return z.valueInMilliseconds()-h.getTime();case "*":return z.valueInMilliseconds()*h.getTime();case "/":return z.valueInMilliseconds()/h.getTime()}else if(h instanceof R.SqlInterval)switch(B){case "+":return R.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+
h.valueInMilliseconds());case "-":return R.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-h.valueInMilliseconds());case "*":return z.valueInMilliseconds()*h.valueInMilliseconds();case "/":return z.valueInMilliseconds()/h.valueInMilliseconds()}else z=z.valueInMilliseconds();else if(h instanceof R.SqlInterval)if(z instanceof Date)switch(B){case "+":return new Date(h.valueInMilliseconds()+z.getTime());case "-":return new Date(z.getTime()-h.valueInMilliseconds());case "*":return z.getTime()*
h.valueInMilliseconds();case "/":return z.getTime()/h.valueInMilliseconds()}else h=h.valueInMilliseconds();else if(z instanceof Date&&"number"===typeof h)switch(h*=864E5,z=z.getTime(),B){case "+":return new Date(z+h);case "-":return new Date(z-h);case "*":return new Date(z*h);case "/":return new Date(z/h)}else if(h instanceof Date&&"number"===typeof z)switch(z*=864E5,h=h.getTime(),B){case "+":return new Date(z+h);case "-":return new Date(z-h);case "*":return new Date(z*h);case "/":return new Date(z/
h)}switch(B){case "+":return z+h;case "-":return z-h;case "*":return z*h;case "/":return z/h}}function U(B,z,h,t){B=t.getAttribute(B,z);return null!=B&&1===h[z]?new Date(B):B}const aa=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
O=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function B(){}B.makeBool=function(z){return!0===z};B.featureValue=function(z,h,t,P){return U(z,h,t,P)};B.equalsNull=function(z){return null===z};B.applyLike=function(z,h,t){return e(z,h,t)};B.ensureArray=function(z){return H(z)};B.applyIn=function(z,h){return y(z,h)};B.currentDate=function(){const z=new Date;z.setHours(0,0,0,0);return z};B.makeSqlInterval=function(z,h,t){return R.SqlInterval.createFromValueAndQualifer(z,
h,t)};B.convertInterval=function(z){return z instanceof R.SqlInterval?z.valueInMilliseconds():z};B.currentTimestamp=function(){return new Date};B.compare=function(z,h,t){return L(z,h,t)};B.calculate=function(z,h,t){return W(z,h,t)};B.makeComparable=function(z){return p(z)};B.evaluateFunction=function(z,h){return R.evaluateFunction(z,h)};B.lookup=function(z,h){z=h[z];return void 0===z?null:z};B.between=function(z,h){return null==z||null==h[0]||null==h[1]?null:z>=h[0]&&z<=h[1]};B.notbetween=function(z,
h){return null==z||null==h[0]||null==h[1]?null:z<h[0]||z>h[1]};B.ternaryNot=function(z){return ba(z)};B.ternaryAnd=function(z,h){return K(z,h)};B.ternaryOr=function(z,h){return m(z,h)};return B}(),E=function(){function B(h,t){this.fieldsIndex=t;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=Q.WhereGrammar.parse(h);const {isStandardized:P,isAggregate:ja,referencedFieldNames:sa}=this._extractExpressionInfo(t);this._referencedFieldNames=sa;this.isStandardized=P;this.isAggregate=
ja}B.create=function(h,t){return new B(h,t)};var z=B.prototype;z.testSet=function(h,t=M){const P={};for(const ja of this.fieldNames)P[ja]=h.map(sa=>t.getAttribute(sa,ja));return!!this._evaluateNode(this.parseTree,{attributes:P},M)};z.calculateValue=function(h,t=M){h=this._evaluateNode(this.parseTree,h,t);return h instanceof R.SqlInterval?h.valueInMilliseconds()/864E5:h};z.calculateValueCompiled=function(h,t=M){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(h,this.parameters,
t,this._datefields);if(ma("esri-csp-restrictions"))return this.calculateValue(h,t);this._compileMe();return this.parseTree._compiledVersion(h,this.parameters,t,this._datefields)};z.testFeature=function(h,t=M){return!!this._evaluateNode(this.parseTree,h,t)};z.testFeatureCompiled=function(h,t=M){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(h,this.parameters,t,this._datefields);if(ma("esri-csp-restrictions"))return this.testFeature(h,t);this._compileMe();return!!this.parseTree._compiledVersion(h,
this.parameters,t,this._datefields)};z.getFunctions=function(){const h=new Set;this._visitAll(this.parseTree,t=>{"function"===t.type&&h.add(t.name.toLowerCase())});return Array.from(h)};z.getExpressions=function(){const h=new Map;this._visitAll(this.parseTree,t=>{if("function"===t.type){const P=t.name.toLowerCase();t=t.args.value[0];if("column-reference"===t.type){t=t.column;const ja=`${P}-${t}`;h.has(ja)||h.set(ja,{aggregateType:P,field:t})}}});return[...h.values()]};z.getVariables=function(){const h=
new Set;this._visitAll(this.parseTree,t=>{"parameter"===t.type&&h.add(t.value.toLowerCase())});return Array.from(h)};z._compileMe=function(){const h="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",h)).bind(C)};z._extractExpressionInfo=function(h){const t=[],P=new Set;let ja=!0,sa=!0;this._visitAll(this.parseTree,za=>{switch(za.type){case "column-reference":const Ea=h?.get(za.column);
let Ha,Fa;Ea?Ha=Fa=Ea.name??"":(Fa=za.column,Ha=Fa.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);P.has(Ha)||(P.add(Ha),t.push(Fa));za.column=Fa;break;case "function":const {name:Ua,args:Oa}=za;za=Oa.value.length;ja&&(ja=R.isStandardized(Ua,za));sa&&(sa=Z.isAggregate(Ua,za))}});return{referencedFieldNames:Array.from(t),isStandardized:ja,isAggregate:sa}};z._visitAll=function(h,t){if(null!=h)switch(t(h),h.type){case "when-clause":this._visitAll(h.operand,
t);this._visitAll(h.value,t);break;case "case-expression":for(const P of h.clauses)this._visitAll(P,t);"simple"===h.format&&this._visitAll(h.operand,t);null!==h.else&&this._visitAll(h.else,t);break;case "expression-list":for(const P of h.value)this._visitAll(P,t);break;case "unary-expression":this._visitAll(h.expr,t);break;case "binary-expression":this._visitAll(h.left,t);this._visitAll(h.right,t);break;case "function":this._visitAll(h.args,t)}};z.evaluateNodeToJavaScript=function(h){switch(h.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(h.value)+", "+JSON.stringify(h.qualifier)+","+JSON.stringify(h.op)+")";case "case-expression":var t="";if("simple"===h.format){var P="this.makeComparable("+this.evaluateNodeToJavaScript(h.operand)+")";t="( ";for(let ja=0;ja<h.clauses.length;ja++)t+=" ("+P+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(h.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(h.clauses[ja].value)+") : "}else for(t="( ",P=0;P<h.clauses.length;P++)t+=" this.makeBool("+
this.evaluateNodeToJavaScript(h.clauses[P].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(h.clauses[P].value)+") : ";t=null!==h.else?t+this.evaluateNodeToJavaScript(h.else):t+"null";return t+" )";case "parameter":return"this.lookup("+JSON.stringify(h.value.toLowerCase())+",lookups)";case "expression-list":t="[";for(P of h.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(P);return t+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(h.expr)+")";
case "binary-expression":switch(h.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "IS":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")";case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(h.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(h.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")"}throw Error("Not Supported Operator "+h.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(h.value);case "date":return"(new Date("+n(h.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+k(h.value).getTime().toString()+"))";case "current-time":return"date"===h.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(h.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(h.name)+","+this.evaluateNodeToJavaScript(h.args)+")"}throw Error("Unsupported sql syntax "+h.type);};z._evaluateNode=function(h,t,P){switch(h.type){case "interval":return t=
this._evaluateNode(h.value,t,P),R.SqlInterval.createFromValueAndQualifer(t,h.qualifier,h.op);case "case-expression":if("simple"===h.format){var ja=p(this._evaluateNode(h.operand,t,P));for(var sa=0;sa<h.clauses.length;sa++)if(ja===p(this._evaluateNode(h.clauses[sa].operand,t,P)))return this._evaluateNode(h.clauses[sa].value,t,P)}else for(ja=0;ja<h.clauses.length;ja++)if(!0===this._evaluateNode(h.clauses[ja].operand,t,P))return this._evaluateNode(h.clauses[ja].value,t,P);return null!==h.else?this._evaluateNode(h.else,
t,P):null;case "parameter":return this.parameters[h.value.toLowerCase()];case "expression-list":ja=[];for(sa of h.value)ja.push(this._evaluateNode(sa,t,P));return ja;case "unary-expression":return ba(this._evaluateNode(h.expr,t,P));case "binary-expression":switch(h.operator){case "AND":return K(this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,t,P));case "OR":return m(this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,t,P));case "IS":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(h.left,t,P);case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(h.left,t,P);case "IN":return ja=H(this._evaluateNode(h.right,t,P)),y(this._evaluateNode(h.left,t,P),ja);case "NOT IN":return ja=H(this._evaluateNode(h.right,t,P)),ba(y(this._evaluateNode(h.left,t,P),ja));case "BETWEEN":return ja=this._evaluateNode(h.left,t,P),h=this._evaluateNode(h.right,t,P),null==ja||null==h[0]||null==h[1]?null:ja>=p(h[0])&&ja<=
p(h[1]);case "NOTBETWEEN":return ja=this._evaluateNode(h.left,t,P),h=this._evaluateNode(h.right,t,P),null==ja||null==h[0]||null==h[1]?null:ja<p(h[0])||ja>p(h[1]);case "LIKE":return e(this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,t,P),h.escape);case "NOT LIKE":return ba(e(this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,t,P),h.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(h.operator,this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,
t,P));case "-":case "+":case "*":case "/":case "||":return W(h.operator,this._evaluateNode(h.left,t,P),this._evaluateNode(h.right,t,P))}case "null":case "boolean":case "string":case "number":return h.value;case "date":return n(h.value);case "timestamp":return k(h.value);case "current-time":return t=new Date,"date"===h.mode&&t.setHours(0,0,0,0),t;case "column-reference":return U(t,h.column,this._datefields,P);case "data-type":return h.value;case "function":return t=this._evaluateNode(h.args,t,P),this.isAggregate?
Z.aggregateFunction(h.name,t):R.evaluateFunction(h.name,t)}throw Error("Unsupported sql syntax "+h.type);};f._createClass(B,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,h=>{"current-time"===h.type?this._hasDateFunctions=!0:"function"===h.type&&(this._hasDateFunctions=this._hasDateFunctions||O.has(h.name.toLowerCase()))});
return this._hasDateFunctions}}]);return B}();var N;(function(B){B[B.Normal=0]="Normal";B[B.Escaped=1]="Escaped"})(N||(N={}));const M={getAttribute(B,z){return(B&&"object"===typeof B.attributes?B.attributes:B)[z]}};l.WhereClause=E;l.defaultAttributeAdapter=M;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function f(R){let Q=0;for(let F=0;F<R.length;F++)Q+=R[F];return Q/R.length}function ma(R){const Q=f(R),
F=R.length;let u=0;for(const k of R)u+=(k-Q)**2;return 1<F?u/(F-1):0}const Z={min:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.min.apply(Math,R[0])},max:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:Math.max.apply(Math,R[0])},avg:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:f(R[0])},sum:{minParams:1,maxParams:1,evaluate:R=>{if(null==R[0])R=null;else{R=R[0];let Q=0;for(let F=0;F<R.length;F++)Q+=R[F];R=Q}return R}},stddev:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:
Math.sqrt(ma(R[0]))},count:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:R[0].length},var:{minParams:1,maxParams:1,evaluate:R=>null==R[0]?null:ma(R[0])}};l.aggregateFunction=function(R,Q){const F=Z[R.toLowerCase()];if(null==F)throw Error("Function Not Recognised");if(Q.length<F.minParams||Q.length>F.maxParams)throw Error(`Invalid Parameter count for call to ${R.toUpperCase()}`);return F.evaluate(Q)};l.isAggregate=function(R,Q){R=Z[R.toLowerCase()];return null!=R&&Q>=R.minParams&&Q<=R.maxParams};
Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(l,f,ma,Z){function R(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function Q(k,n){if(k instanceof Date)return n?R(k):k;if("string"===typeof k||k instanceof String)if(k=Z.DateTime.fromSQL(k),k.isValid)return n?R(k.toJSDate()):k.toJSDate();throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
}let F=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(n){if(null!==n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(n,H){H.includes(".")?(H=H.split("."),n.second=parseFloat(H[0]),n.millis=parseInt(H[1],10)):n.second=parseFloat(H)};k.createFromMilliseconds=function(n){const H=new k;H.second=n/1E3;return H};k.createFromValueAndQualifer=
function(n,H,ba){let K=null;const m=new k;m.op="-"===ba?"-":"+";if("interval-period"===H.type){k._fixDefaults(H);ba=RegExp("^[0-9]{1,}$");if("year"===H.period||"month"===H.period)throw Error("Year-Month Intervals not supported");if("second"===H.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))k._parseSecondsComponent(m,n);else throw Error("Illegal Interval");else if(ba.test(n))m[H.period]=parseFloat(n);else throw Error("Illegal Interval");}else{k._fixDefaults(H.start);k._fixDefaults(H.end);if("year"===
H.start.period||"month"===H.start.period)throw Error("Year-Month Intervals not supported");if("year"===H.end.period||"month"===H.end.period)throw Error("Year-Month Intervals not supported");switch(H.start.period){case "day":switch(H.end.period){case "hour":K=RegExp("^[0-9]{1,} [0-9]{1,}$");if(K.test(n))m[H.start.period]=parseFloat(n.split(" ")[0]),m[H.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":K=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(K.test(n))m[H.start.period]=
parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":K=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(n))m[H.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]),k._parseSecondsComponent(m,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(H.end.period){case "minute":K=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(K.test(n))m.hour=parseFloat(n.split(":")[0]),m.minute=parseFloat(n.split(":")[1]);else throw Error("Illegal Interval");break;case "second":K=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(n))n=n.split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]),k._parseSecondsComponent(m,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(H.end.period){case "second":K=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(K.test(n))n=n.split(":"),m.minute=parseFloat(n[0]),k._parseSecondsComponent(m,n[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return m};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const u={extract:{minParams:2,
maxParams:2,evaluate:([k,n])=>{if(null==n)return null;if(n instanceof Date)switch(k.toUpperCase()){case "SECOND":return n.getSeconds();case "MINUTE":return n.getMinutes();case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [n,H]=k;return null==n||null==H?null:n.toString().substring(H-1)}if(3===
k.length){const [n,H,ba]=k;return null==n||null==H||null==ba?null:0>=ba?"":n.toString().substring(H-1,H+ba-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,n])=>null==k||null==n?null:n.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var n=3===k.length,H=n?k[1]:" ";n=n?k[2]:k[1];if(null==H||null==n)return null;H=`(${ma.escapeRegExpString(H)})`;switch(k[0]){case "BOTH":return n.replace(new RegExp(`^${H}*|${H}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${H}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${H}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?
null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const n=k[0];k=2===k.length?10**k[1]:1;return null==n?null:Math.round(n*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let n="";for(let H=0;H<k.length;H++){if(null==k[H])return null;n+=k[H].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const n of k)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},
sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const n=k[0];k=k[1];return(n instanceof Date?n.valueOf():n)===(k instanceof Date?k.valueOf():k)?null:n}},cast:{minParams:2,maxParams:2,evaluate:k=>{var n=k[0];k=k[1];if(null===n)return null;switch(k.type){case "integer":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;
case "smallint":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(32767<n||-32767>n)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "float":case "real":n=parseFloat(n);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "date":return Q(n,!0);case "timestamp":return Q(n,!1);case "varchar":n=n.toString();if(n.length>k.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};l.SqlInterval=F;l.evaluateFunction=function(k,n){const H=u[k.toLowerCase()];if(null==H)throw Error("Function Not Recognised");if(n.length<H.minParams||n.length>H.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return H.evaluate(n)};l.isStandardized=function(k,n){k=u[k.toLowerCase()];return null!=k&&n>=k.minParams&&n<=k.maxParams};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(l,f,ma){l.SqlErrorCodes=void 0;(function(u){u.InvalidFunctionParameters="InvalidFunctionParameters";u.UnsupportedSqlFunction="UnsupportedSqlFunction";u.UnsupportedOperator="UnsupportedOperator";u.UnsupportedSyntax="UnsupportedSyntax";u.UnsupportedIsRhs="UnsupportedIsRhs";u.UnsupportedIsLhs="UnsupportedIsLhs";u.InvalidDataType="InvalidDataType";u.CannotCastValue="CannotCastValue";u.MissingStatisticParameters="MissingStatisticParameters"})(l.SqlErrorCodes||
(l.SqlErrorCodes={}));const Z={[l.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[l.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[l.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[l.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[l.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[l.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[l.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[l.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[l.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let R=function(u){function k(n,H){n=u.call(this,ma.doSubstitutions(Z[n],H))||this;n.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),k);return n}f._inheritsLoose(k,u);return k}(f._wrapNativeSuper(Error));
l.FeatureSetErrorCodes=void 0;(function(u){u.NeverReach="NeverReach";u.NotImplemented="NotImplemented";u.Cancelled="Cancelled";u.InvalidStatResponse="InvalidStatResponse";u.InvalidRequest="InvalidRequest";u.RequestFailed="RequestFailed";u.MissingFeatures="MissingFeatures";u.AggregationFieldNotFound="AggregationFieldNotFound";u.DataElementsNotFound="DataElementsNotFound"})(l.FeatureSetErrorCodes||(l.FeatureSetErrorCodes={}));const Q={[l.FeatureSetErrorCodes.Cancelled]:"Cancelled",[l.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[l.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[l.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[l.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[l.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[l.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[l.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[l.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let F=function(u){function k(n,
H){n=u.call(this,ma.doSubstitutions(Q[n],H))||this;n.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),k);return n}f._inheritsLoose(k,u);return k}(f._wrapNativeSuper(Error));l.FeatureSetError=F;l.FeatureSetErrorMessages=Q;l.SqlError=R;l.SqlErrorMessages=Z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(l,f){function ma(K){return K&&K.loc?`Line : ${K.loc.start?.line}, ${K.loc.start?.column}: `:""}function Z(K,m){try{if(!m)return K;for(const y in m){let e=m[y];e||(e="");K=K.replace("{"+y+"}",m[y])}}catch(y){}return K}l.ExecutionErrorCodes=void 0;(function(K){K.AsyncNotEnabled="AsyncNotEnabled";K.ModulesNotSupported="ModulesNotSupported";K.CircularModules="CircularModules";K.NeverReach="NeverReach";K.UnsupportedHashType="UnsupportedHashType";K.InvalidParameter="InvalidParameter";K.UnexpectedToken=
"UnexpectedToken";K.Unrecognised="Unrecognised";K.UnrecognisedType="UnrecognisedType";K.MaximumCallDepth="MaximumCallDepth";K.BooleanConditionRequired="BooleanConditionRequired";K.TypeNotAllowedInFeature="TypeNotAllowedInFeature";K.KeyMustBeString="KeyMustBeString";K.WrongNumberOfParameters="WrongNumberOfParameters";K.CallNonFunction="CallNonFunction";K.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";K.NoFunctionInDictionary="NoFunctionInDictionary";K.NoFunctionInArray="NoFunctionInArray";
K.AssignModuleFunction="AssignModuleFunction";K.LogicExpressionOrAnd="LogicExpressionOrAnd";K.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";K.FuncionNotFound="FunctionNotFound";K.InvalidMemberAccessKey="InvalidMemberAccessKey";K.UnsupportedUnaryOperator="UnsupportUnaryOperator";K.InvalidIdentifier="InvalidIdentifier";K.MemberOfNull="MemberOfNull";K.UnsupportedOperator="UnsupportedOperator";K.Cancelled="Cancelled";K.ModuleAccessorMustBeString="ModuleAccessorMustBeString";K.ModuleExportNotFound=
"ModuleExportNotFound";K.Immutable="Immutable";K.OutOfBounds="OutOfBounds";K.IllegalResult="IllegalResult";K.FieldNotFound="FieldNotFound";K.PortalRequired="PortalRequired";K.LogicError="LogicError";K.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";K.KeyAccessorMustBeString="KeyAccessorMustBeString";K.WrongSpatialReference="WrongSpatialReference"})(l.ExecutionErrorCodes||(l.ExecutionErrorCodes={}));const R={[l.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[l.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[l.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[l.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[l.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[l.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[l.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[l.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[l.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[l.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[l.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[l.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[l.ExecutionErrorCodes.PortalRequired]:"Portal is required",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[l.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[l.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[l.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[l.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[l.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[l.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[l.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[l.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[l.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[l.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[l.ExecutionErrorCodes.Immutable]:"Object is immutable",[l.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[l.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[l.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[l.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[l.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[l.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[l.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[l.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[l.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[l.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[l.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[l.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[l.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[l.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let Q=function(K){function m(...y){return K.call(this,...y)||this}f._inheritsLoose(m,K);return m}(f._wrapNativeSuper(Error)),F=function(K){function m(y,e){y=
K.call(this,ma(e)+y.message,{cause:y})||this;y.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(y),m);e&&e.loc&&(y.loc=e.loc);return y}f._inheritsLoose(m,K);return m}(Q),u=function(K){function m(y,e,p,L){y=K.call(this,"Execution error - "+ma(p)+Z(R[e],L))||this;y.loc=null;y.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(y),m);p&&p.loc&&(y.loc=p.loc);return y}f._inheritsLoose(m,K);return m}(f._wrapNativeSuper(Error)),
k=function(K){function m(y,e,p,L){y=K.call(this,"Compilation error - "+ma(p)+Z(R[e],L))||this;y.loc=null;y.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(y),m);p&&p.loc&&(y.loc=p.loc);return y}f._inheritsLoose(m,K);return m}(f._wrapNativeSuper(Error)),n=function(K){function m(){var y=K.call(this,"Uncompilable code structures")||this;y.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(y),
m);return y}f._inheritsLoose(m,K);return m}(f._wrapNativeSuper(Error));l.ModuleErrorCodes=void 0;(function(K){K.UnrecognisedUri="UnrecognisedUri";K.UnsupportedUriProtocol="UnsupportedUriProtocol"})(l.ModuleErrorCodes||(l.ModuleErrorCodes={}));const H={[l.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[l.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let ba=function(K){function m(y,e){y=K.call(this,Z(H[y],e))||this;y.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(y),m);return y}f._inheritsLoose(m,K);return m}(f._wrapNativeSuper(Error));l.ArcadeCompilationError=k;l.ArcadeExecutionError=u;l.ArcadeUncompilableError=n;l.ErrorWithCause=Q;l.ExecutionErrorMessages=R;l.LocatableArcadeExecutionError=F;l.ModuleError=ba;l.ModuleErrorMessages=H;l.doSubstitutions=Z;l.ensureArcadeExecutionError=function(K,m,y){return"esri.arcade.arcadeexecutionerror"===y.declaredRootClass||"esri.arcade.arcadecompilationerror"===
y.declaredRootClass?null===y.loc&&m&&m.loc?new F(y,{cause:y}):y:m&&m.loc?new F(y,{cause:y}):y};l.parsingValidationMessage=function(K,m,y){return"Parsing error - "+ma(K)+Z(R[m],y)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(l){function f(a,g={}){const I=JSON.stringify([a,g]);let fa=gd[I];fa||(fa=new Intl.ListFormat(a,g),gd[I]=fa);return fa}function ma(a,g={}){const I=JSON.stringify([a,g]);let fa=Hc[I];fa||(fa=new Intl.DateTimeFormat(a,
g),Hc[I]=fa);return fa}function Z(a,g={}){const I=JSON.stringify([a,g]);let fa=Ic[I];fa||(fa=new Intl.NumberFormat(a,g),Ic[I]=fa);return fa}function R(a,g={}){const {base:I,...fa}=g,la=JSON.stringify([a,fa]);let ta=Jc[la];ta||(ta=new Intl.RelativeTimeFormat(a,g),Jc[la]=ta);return ta}function Q(a){const g=[];for(let I=1;12>=I;I++){const fa=Za.utc(2016,I,1);g.push(a(fa))}return g}function F(a){const g=[];for(let I=1;7>=I;I++){const fa=Za.utc(2016,11,13+I);g.push(a(fa))}return g}function u(a,g,I,fa,
la){a=a.listingMode(I);return"error"===a?null:"en"===a?fa(g):la(g)}function k(a,g){if(n(a)||null===a)return g;if(a instanceof ic)return a;if("string"===typeof a){const I=a.toLowerCase();return"default"===I?g:"local"===I||"system"===I?nc.instance:"utc"===I||"gmt"===I?Eb.utcInstance:Eb.parseSpecifier(I)||Tb.create(a)}return H(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new hd(a)}function n(a){return"undefined"===typeof a}function H(a){return"number"===typeof a}function ba(a){return"number"===
typeof a&&0===a%1}function K(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function m(a,g,I){if(0!==a.length)return a.reduce((fa,la)=>{la=[g(la),la];return fa?I(fa[0],la[0])===fa[0]?fa:la:la},null)[1]}function y(a,g){return g.reduce((I,fa)=>{I[fa]=a[fa];return I},{})}function e(a,g){return Object.prototype.hasOwnProperty.call(a,g)}function p(a,g,I){return ba(a)&&a>=g&&a<=I}function L(a,g=2){return 0>a?"-"+(""+-a).padStart(g,"0"):(""+a).padStart(g,"0")}function W(a){if(!n(a)&&
null!==a&&""!==a)return parseInt(a,10)}function U(a){if(!n(a)&&null!==a&&""!==a)return parseFloat(a)}function aa(a){if(!n(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function G(a,g,I=!1){g=10**g;return(I?Math.trunc:Math.round)(a*g)/g}function q(a){return 0===a%4&&(0!==a%100||0===a%400)}function w(a,g){var I=g-1;I=I-12*Math.floor(I/12)+1;return 2===I?q(a+(g-I)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][I-1]}function D(a){let g=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,
a.second,a.millisecond);100>a.year&&0<=a.year&&(g=new Date(g),g.setUTCFullYear(g.getUTCFullYear()-1900));return+g}function O(a){var g=a-1;g=(g+Math.floor(g/4)-Math.floor(g/100)+Math.floor(g/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===g?53:52}function C(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function E(a,g,I,fa=null){a=new Date(a);const la={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fa&&(la.timeZone=
fa);return(g=(new Intl.DateTimeFormat(I,{timeZoneName:g,...la})).formatToParts(a).find(ta=>"timezonename"===ta.type.toLowerCase()))?g.value:null}function N(a,g){a=parseInt(a,10);Number.isNaN(a)&&(a=0);g=parseInt(g,10)||0;g=0>a||Object.is(a,-0)?-g:g;return 60*a+g}function M(a){const g=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(g))throw new qa(`Invalid unit value ${a}`);return g}function B(a,g){const I={};for(const fa in a)if(e(a,fa)){const la=a[fa];void 0!==la&&null!==la&&(I[g(fa)]=M(la))}return I}
function z(a,g){const I=Math.trunc(Math.abs(a/60)),fa=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(g){case "short":return`${a}${L(I,2)}:${L(fa,2)}`;case "narrow":return`${a}${I}${0<fa?`:${fa}`:""}`;case "techie":return`${a}${L(I,2)}${L(fa,2)}`;default:throw new RangeError(`Value format ${g} is out of range for property format`);}}function h(a){return y(a,["hour","minute","second","millisecond"])}function t(a){switch(a){case "narrow":return[...id];case "short":return[...jd];case "long":return[...kd];
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function P(a){switch(a){case "narrow":return[...oe];case "short":return[...ld];case "long":return[...md];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...Kc];case "short":return[...pe];case "long":return[...qe];default:return null}}function sa(a,g,I="always",fa=!1){const la={years:["year",
"yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ta=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===I&&ta)switch(I="days"===a,g){case 1:return I?"tomorrow":`next ${la[a][0]}`;case -1:return I?"yesterday":`last ${la[a][0]}`;case 0:return I?"today":`this ${la[a][0]}`}I=Object.is(g,-0)||0>g;g=Math.abs(g);ta=1===g;const Aa=la[a];a=fa?ta?Aa[1]:Aa[2]||Aa[1]:ta?
la[a][0]:a;return I?`${g} ${a} ago`:`in ${g} ${a}`}function za(a,g){let I="";for(const fa of a)I=fa.literal?I+fa.val:I+g(fa.val);return I}function Ea(...a){a=a.reduce((g,I)=>g+I.source,"");return RegExp(`^${a}$`)}function Ha(...a){return g=>a.reduce(([I,fa,la],ta)=>{const [Aa,Ia,Ma]=ta(g,la);return[{...I,...Aa},Ia||fa,Ma]},[{},null,1]).slice(0,2)}function Fa(a,...g){if(null==a)return[null,null];for(const [I,fa]of g)if(g=I.exec(a))return fa(g);return[null,null]}function Ua(...a){return(g,I)=>{const fa=
{};let la;for(la=0;la<a.length;la++)fa[a[la]]=W(g[I+la]);return[fa,null,I+la]}}function Oa(a,g,I){a=a[g];return n(a)?I:W(a)}function Sa(a,g){return[{hours:Oa(a,g,0),minutes:Oa(a,g+1,0),seconds:Oa(a,g+2,0),milliseconds:aa(a[g+3])},null,g+4]}function $a(a,g){const I=!a[g]&&!a[g+1];a=N(a[g+1],a[g+2]);return[{},I?null:Eb.instance(a),g+3]}function Ta(a,g){return[{},a[g]?Tb.create(a[g]):null,g+1]}function jb(a){const [g,I,fa,la,ta,Aa,Ia,Ma,d]=a,Wa="-"===g[0];a=Ma&&"-"===Ma[0];const Xa=(bb,ua=!1)=>void 0!==
bb&&(ua||bb&&Wa)?-bb:bb;return[{years:Xa(U(I)),months:Xa(U(fa)),weeks:Xa(U(la)),days:Xa(U(ta)),hours:Xa(U(Aa)),minutes:Xa(U(Ia)),seconds:Xa(U(Ma),"-0"===Ma),milliseconds:Xa(aa(d),a)}]}function ib(a,g,I,fa,la,ta,Aa){g={year:2===g.length?C(W(g)):W(g),month:jd.indexOf(I)+1,day:W(fa),hour:W(la),minute:W(ta)};Aa&&(g.second=W(Aa));a&&(g.weekday=3<a.length?md.indexOf(a)+1:ld.indexOf(a)+1);return g}function lb(a){const [,g,I,fa,la,ta,Aa,Ia,Ma,d,Wa,Xa]=a;a=ib(g,la,fa,I,ta,Aa,Ia);let bb;bb=Ma?re[Ma]:d?0:N(Wa,
Xa);return[a,new Eb(bb)]}function c(a){const [,g,I,fa,la,ta,Aa,Ia]=a;return[ib(g,la,fa,I,ta,Aa,Ia),Eb.utcInstance]}function r(a){const [,g,I,fa,la,ta,Aa,Ia]=a;return[ib(g,Ia,I,fa,la,ta,Aa),Eb.utcInstance]}function ea(a,g,I=!1){a={values:I?g.values:{...a.values,...(g.values||{})},loc:a.loc.clone(g.loc),conversionAccuracy:g.conversionAccuracy||a.conversionAccuracy,matrix:g.matrix||a.matrix};return new eb(a)}function ka(a,g,I,fa,la){a=a[la][I];var ta=g[I]/a;ta=Math.sign(ta)!==Math.sign(fa[la])&&0!==
fa[la]&&1>=Math.abs(ta)?0>ta?Math.floor(ta):Math.ceil(ta):Math.trunc(ta);fa[la]+=ta;g[I]-=ta*a}function va(a,g){se.reduce((I,fa)=>{if(n(g[fa]))return I;I&&ka(a,g,I,g,fa);return fa},null)}function x(a,g){a=g.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(eb.fromMillis(a).as("days"))}function J(a,g,I){const fa=[["years",(Ma,d)=>d.year-Ma.year],["quarters",(Ma,d)=>d.quarter-Ma.quarter+4*(d.year-Ma.year)],["months",(Ma,d)=>
d.month-Ma.month+12*(d.year-Ma.year)],["weeks",(Ma,d)=>{Ma=x(Ma,d);return(Ma-Ma%7)/7}],["days",x]],la={},ta=a;let Aa,Ia;for(const [Ma,d]of fa)0<=I.indexOf(Ma)&&(Aa=Ma,la[Ma]=d(a,g),Ia=ta.plus(la),Ia>g?(la[Ma]--,a=ta.plus(la)):a=Ia);return[a,la,Ia,Aa]}function da(a,g,I,fa){let [la,ta,Aa,Ia]=J(a,g,I);a=g-la;I=I.filter(Ma=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ma));0===I.length&&(Aa<g&&(Aa=la.plus({[Ia]:1})),Aa!==la&&(ta[Ia]=(ta[Ia]||0)+a/(Aa-la)));g=eb.fromObject(ta,fa);return 0<I.length?
eb.fromMillis(a,fa).shiftTo(...I).plus(g):g}function V({numberingSystem:a},g=""){return new RegExp(`${Lc[a||"latn"]}${g}`)}function ia(a,g=I=>I){return{regex:a,deser:([I])=>{{let fa=parseInt(I,10);if(isNaN(fa)){fa="";for(let la=0;la<I.length;la++){const ta=I.charCodeAt(la);if(-1!==I[la].search(Lc.hanidec))fa+=te.indexOf(I[la]);else for(const Aa in nd){const [Ia,Ma]=nd[Aa];ta>=Ia&&ta<=Ma&&(fa+=ta-Ia)}}I=parseInt(fa,10)}else I=fa}return g(I)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,
od)}function ra(a,g){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([I])=>a.findIndex(fa=>I.replace(/\./g,"").replace(Mc," ").toLowerCase()===fa.replace(/\./g,"").replace(Mc," ").toLowerCase())+g}}function S(a,g){return{regex:a,deser:([,I,fa])=>N(I,fa),groups:g}}function ca(a){return{regex:a,deser:([g])=>g}}function pa(a,g){const I=V(g),fa=V(g,"{2}"),la=V(g,"{3}"),ta=V(g,"{4}"),Aa=V(g,"{6}"),Ia=V(g,"{1,2}"),Ma=V(g,"{1,3}"),d=V(g,"{1,6}"),Wa=V(g,"{1,9}"),Xa=V(g,"{2,4}"),bb=V(g,"{4,6}"),
ua=v=>({regex:RegExp(v.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([A])=>A,literal:!0}),$b=(v=>{if(a.literal)return ua(v);switch(v.val){case "G":return ra(g.eras("short",!1),0);case "GG":return ra(g.eras("long",!1),0);case "y":return ia(d);case "yy":return ia(Xa,C);case "yyyy":return ia(ta);case "yyyyy":return ia(bb);case "yyyyyy":return ia(Aa);case "M":return ia(Ia);case "MM":return ia(fa);case "MMM":return ra(g.months("short",!0,!1),1);case "MMMM":return ra(g.months("long",!0,!1),
1);case "L":return ia(Ia);case "LL":return ia(fa);case "LLL":return ra(g.months("short",!1,!1),1);case "LLLL":return ra(g.months("long",!1,!1),1);case "d":return ia(Ia);case "dd":return ia(fa);case "o":return ia(Ma);case "ooo":return ia(la);case "HH":return ia(fa);case "H":return ia(Ia);case "hh":return ia(fa);case "h":return ia(Ia);case "mm":return ia(fa);case "m":return ia(Ia);case "q":return ia(Ia);case "qq":return ia(fa);case "s":return ia(Ia);case "ss":return ia(fa);case "S":return ia(Ma);case "SSS":return ia(la);
case "u":return ca(Wa);case "uu":return ca(Ia);case "uuu":return ia(I);case "a":return ra(g.meridiems(),0);case "kkkk":return ia(ta);case "kk":return ia(Xa,C);case "W":return ia(Ia);case "WW":return ia(fa);case "E":case "c":return ia(I);case "EEE":return ra(g.weekdays("short",!1,!1),1);case "EEEE":return ra(g.weekdays("long",!1,!1),1);case "ccc":return ra(g.weekdays("short",!0,!1),1);case "cccc":return ra(g.weekdays("long",!0,!1),1);case "Z":case "ZZ":return S(new RegExp(`([+-]${Ia.source})(?::(${fa.source}))?`),
2);case "ZZZ":return S(new RegExp(`([+-]${Ia.source})(${fa.source})?`),2);case "z":return ca(/[a-z_+-/]{1,256}?/i);default:return ua(v)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};$b.token=a;return $b}function wa(a){return[`^${a.map(g=>g.regex).reduce((g,I)=>`${g}(${I.source})`,"")}$`,a]}function Ba(a,g,I){if(a=a.match(g)){g={};let fa=1;for(const la in I)if(e(I,la)){const ta=I[la],Aa=ta.groups?ta.groups+1:1;!ta.literal&&ta.token&&(g[ta.token.val[0]]=ta.deser(a.slice(fa,
fa+Aa)));fa+=Aa}return[a,g]}return[a,{}]}function La(a){const g=la=>{switch(la){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let I=null,fa;n(a.z)||(I=Tb.create(a.z));n(a.Z)||(I||(I=new Eb(a.Z)),fa=a.Z);n(a.q)||
(a.M=3*(a.q-1)+1);n(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);n(a.u)||(a.S=aa(a.u));return[Object.keys(a).reduce((la,ta)=>{const Aa=g(ta);Aa&&(la[Aa]=a[ta]);return la},{}),I,fa]}function Ja(a,g){return Array.prototype.concat(...a.map(I=>{if(!I.literal){var fa=Fb.macroTokenToFormatOpts(I.val);fa=Qa(fa,g);I=null==fa||fa.includes(void 0)?I:fa}return I}))}function Pa(a,g,I){I=Ja(Fb.parseFormat(I),a);var fa=I.map(bb=>pa(bb,a));const la=fa.find(bb=>bb.invalidReason);
if(la)return{input:g,tokens:I,invalidReason:la.invalidReason};const [ta,Aa]=wa(fa);fa=RegExp(ta,"i");const [Ia,Ma]=Ba(g,fa,Aa),[d,Wa,Xa]=Ma?La(Ma):[null,null,void 0];if(e(Ma,"a")&&e(Ma,"H"))throw new ha("Can't include meridiem when specifying 24-hour format");return{input:g,tokens:I,regex:fa,rawMatches:Ia,matches:Ma,result:d,zone:Wa,specificOffset:Xa}}function Qa(a,g){if(!a)return null;g=Fb.create(g,a);var I=g.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return I.call(g,Nc).map(fa=>{{const {type:ta,
value:Aa}=fa;if("literal"===ta)fa={literal:!0,val:Aa};else{fa=a[ta];var la=ue[ta];"object"===typeof la&&(la=la[fa]);fa=la?{literal:!1,val:la}:void 0}}return fa})}function Ga(a,g){return new Qb("unit out of range",`you specified ${g} (of type ${typeof g}) as a ${a}, which is invalid`)}function Ra(a,g,I){g=new Date(Date.UTC(a,g-1,I));100>a&&0<=a&&g.setUTCFullYear(g.getUTCFullYear()-1900);a=g.getUTCDay();return 0===a?7:a}function xa(a,g){a=q(a)?Oc:Pc;const I=a.findIndex(fa=>fa<g);return{month:I+1,day:g-
a[I]}}function vb(a){const {year:g,month:I,day:fa}=a;var la=fa+(q(g)?Oc:Pc)[I-1];const ta=Ra(g,I,fa);la=Math.floor((la-ta+10)/7);let Aa;1>la?(Aa=g-1,la=O(Aa)):la>O(g)?(Aa=g+1,la=1):Aa=g;return{weekYear:Aa,weekNumber:la,weekday:ta,...h(a)}}function ub(a){const {weekYear:g,weekNumber:I,weekday:fa}=a;var la=Ra(g,1,4),ta=q(g)?366:365;la=7*I+fa-la-3;1>la?(ta=g-1,la+=q(ta)?366:365):la>ta?(ta=g+1,la-=q(g)?366:365):ta=g;const {month:Aa,day:Ia}=xa(ta,la);return{year:ta,month:Aa,day:Ia,...h(a)}}function qb(a){const {year:g,
month:I,day:fa}=a;var la=fa+(q(g)?Oc:Pc)[I-1];return{year:g,ordinal:la,...h(a)}}function b(a){const {year:g,ordinal:I}=a,{month:fa,day:la}=xa(g,I);return{year:g,month:fa,day:la,...h(a)}}function gb(a){const g=ba(a.year),I=p(a.month,1,12),fa=p(a.day,1,w(a.year,a.month));return g?I?fa?!1:Ga("day",a.day):Ga("month",a.month):Ga("year",a.year)}function db(a){const {hour:g,minute:I,second:fa,millisecond:la}=a;a=p(g,0,23)||24===g&&0===I&&0===fa&&0===la;const ta=p(I,0,59),Aa=p(fa,0,59),Ia=p(la,0,999);return a?
ta?Aa?Ia?!1:Ga("millisecond",la):Ga("second",fa):Ga("minute",I):Ga("hour",g)}function Gb(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Pb(a){null===a.weekData&&(a.weekData=vb(a.c));return a.weekData}function nb(a,g){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Za({...a,...g,old:a})}function Wb(a,g,I){let fa=a-6E4*g;const la=I.offset(fa);if(g===la)return[fa,g];fa-=6E4*(la-g);g=I.offset(fa);return la===g?[fa,la]:[a-6E4*Math.min(la,
g),Math.max(la,g)]}function oa(a,g){a=new Date(a+6E4*g);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Yb(a,g,I){return Wb(D(a),g,I)}function Sb(a,g){const I=a.o;var fa=a.c.year+Math.trunc(g.years);const la=a.c.month+Math.trunc(g.months)+3*Math.trunc(g.quarters);fa={...a.c,year:fa,month:la,day:Math.min(a.c.day,w(fa,la))+Math.trunc(g.days)+7*Math.trunc(g.weeks)};
g=eb.fromObject({years:g.years-Math.trunc(g.years),quarters:g.quarters-Math.trunc(g.quarters),months:g.months-Math.trunc(g.months),weeks:g.weeks-Math.trunc(g.weeks),days:g.days-Math.trunc(g.days),hours:g.hours,minutes:g.minutes,seconds:g.seconds,milliseconds:g.milliseconds}).as("milliseconds");fa=D(fa);let [ta,Aa]=Wb(fa,I,a.zone);0!==g&&(ta+=g,Aa=a.zone.offset(ta));return{ts:ta,o:Aa}}function zb(a,g,I,fa,la,ta){const {setZone:Aa,zone:Ia}=I;return a&&0!==Object.keys(a).length?(a=Za.fromObject(a,{...I,
zone:g||Ia,specificOffset:ta}),Aa?a:a.setZone(Ia)):Za.invalid(new Qb("unparsable",`the input "${la}" can't be parsed as ${fa}`))}function Kb(a,g,I=!0){return a.isValid?Fb.create(rb.create("en-US"),{allowZ:I,forceSimple:!0}).formatDateTimeFromString(a,g):null}function Zb(a,g){const I=9999<a.c.year||0>a.c.year;let fa="";I&&0<=a.c.year&&(fa+="+");fa+=L(a.c.year,I?6:4);g?(fa=fa+"-"+L(a.c.month),fa=fa+"-"+L(a.c.day)):(fa+=L(a.c.month),fa+=L(a.c.day));return fa}function Xb(a,g,I,fa,la,ta){let Aa=L(a.c.hour);
g?(Aa=Aa+":"+L(a.c.minute),0===a.c.second&&I||(Aa+=":")):Aa+=L(a.c.minute);0===a.c.second&&I||(Aa+=L(a.c.second),0===a.c.millisecond&&fa||(Aa=Aa+"."+L(a.c.millisecond,3)));la&&(a.isOffsetFixed&&0===a.offset&&!ta?Aa+="Z":0>a.o?(Aa=Aa+"-"+L(Math.trunc(-a.o/60)),Aa=Aa+":"+L(Math.trunc(-a.o%60))):(Aa=Aa+"+"+L(Math.trunc(a.o/60)),Aa=Aa+":"+L(Math.trunc(a.o%60))));ta&&(Aa+="["+a.zone.ianaName+"]");return Aa}function kc(a){const g={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",
hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!g)throw new X(a);return g}function Hb(a,g){const I=k(g.zone,yb.defaultZone);g=rb.fromObject(g);const fa=yb.now();var la;if(n(a.year))a=
fa;else{for(const ta of pd)n(a[ta])&&(a[ta]=qd[ta]);if(la=gb(a)||db(a))return Za.invalid(la);la=I.offset(fa);[a,la]=Yb(a,la,I)}return new Za({ts:a,zone:I,loc:g,o:la})}function Rb(a,g,I){const fa=n(I.round)?!0:I.round,la=(Aa,Ia)=>{Aa=G(Aa,fa||I.calendary?0:2,!0);return g.loc.clone(I).relFormatter(I).format(Aa,Ia)},ta=Aa=>I.calendary?g.hasSame(a,Aa)?0:g.startOf(Aa).diff(a.startOf(Aa),Aa).get(Aa):g.diff(a,Aa).get(Aa);if(I.unit)return la(ta(I.unit),I.unit);for(const Aa of I.units){const Ia=ta(Aa);if(1<=
Math.abs(Ia))return la(Ia,Aa)}return la(a>g?-0:0,I.units[I.units.length-1])}function fb(a){let g={};0<a.length&&"object"===typeof a[a.length-1]?(g=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[g,a]}function Ab(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&H(a.valueOf()))return Za.fromJSDate(a);if(a&&"object"===typeof a)return Za.fromObject(a);throw new qa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Bb extends Error{}class Ya extends Bb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}
class hc extends Bb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class T extends Bb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class ha extends Bb{}class X extends Bb{constructor(a){super(`Invalid unit ${a}`)}}class qa extends Bb{}class Ca extends Bb{constructor(){super("Zone is an abstract class")}}const Da={year:"numeric",month:"numeric",day:"numeric"},Na={year:"numeric",month:"short",day:"numeric"},Va={year:"numeric",month:"short",day:"numeric",weekday:"short"},
mb={year:"numeric",month:"long",day:"numeric"},kb={year:"numeric",month:"long",day:"numeric",weekday:"long"},hb={hour:"numeric",minute:"numeric"},xb={hour:"numeric",minute:"numeric",second:"numeric"},Ib={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sd={hour:"numeric",minute:"numeric",hourCycle:"h23"},td={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},wd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},yd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},zd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
ve={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ad={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Bd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Dd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Ca;}get name(){throw new Ca;}get ianaName(){return this.name}get isUniversal(){throw new Ca;}offsetName(a,g){throw new Ca;}formatOffset(a,g){throw new Ca;}offset(a){throw new Ca;}equals(a){throw new Ca;}get isValid(){throw new Ca;}}let Qc=null;class nc extends ic{static get instance(){null===Qc&&(Qc=new nc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:g,locale:I}){return E(a,g,I)}formatOffset(a,g){return z(this.offset(a),g)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const we={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Tb extends ic{static create(a){pc[a]||(pc[a]=new Tb(a));return pc[a]}static resetCache(){pc={};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(g){return!1}}constructor(a){super();this.zoneName=a;this.valid=Tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:g,locale:I}){return E(a,g,I,this.name)}formatOffset(a,g){return z(this.offset(a),g)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var g=this.name;oc[g]||(oc[g]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));g=oc[g];if(g.formatToParts){g=g.formatToParts(a);var I=[];for(let Wa=0;Wa<g.length;Wa++){const {type:Xa,value:bb}=g[Wa],ua=we[Xa];"era"===Xa?I[ua]=bb:n(ua)||(I[ua]=parseInt(bb,10))}g=I}else{g=g.format(a).replace(/\u200E/g,"");g=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(g);const [,Wa,Xa,bb,ua,$b,v,A]=g;g=[bb,Wa,Xa,ua,$b,v,A]}let [fa,la,ta,Aa,Ia,Ma,d]=g;"BC"===Aa&&(fa=-Math.abs(fa)+1);g=D({year:fa,month:la,day:ta,hour:24===Ia?0:Ia,minute:Ma,second:d,millisecond:0});
a=+a;I=a%1E3;return(g-(a-(0<=I?I:1E3+I)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Hc={},Ic={},Jc={},qc=null;class xe{constructor(a,g,I){this.padTo=I.padTo||0;this.floor=I.floor||!1;const {padTo:fa,floor:la,...ta}=I;if(!g||0<Object.keys(ta).length)g={useGrouping:!1,...I},0<I.padTo&&(g.minimumIntegerDigits=I.padTo),this.inf=Z(a,g)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):G(a,3);return L(a,
this.padTo)}}class ye{constructor(a,g,I){this.opts=I;var fa=void 0;a.zone.isUniversal?(fa=a.offset/60*-1,fa=0<=fa?`Etc/GMT+${fa}`:`Etc/GMT${fa}`,0!==a.offset&&Tb.create(fa).valid?this.dt=a:(fa="UTC",this.dt=I.timeZoneName?a:0===a.offset?a:Za.fromMillis(a.ts+6E4*a.offset))):"system"===a.zone.type?this.dt=a:(this.dt=a,fa=a.zone.name);a={...this.opts};a.timeZone=a.timeZone||fa;this.dtf=ma(g,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class ze{constructor(a,g,I){this.opts={style:"long",...I};!g&&K()&&(this.rtf=R(a,I))}format(a,g){return this.rtf?this.rtf.format(a,g):sa(g,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,g){return this.rtf?this.rtf.formatToParts(a,g):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,g,I,fa=!1){a=a||yb.defaultLocale;var la;(la=a)||(fa?fa="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),fa=qc),
la=fa);return new rb(la,g||yb.defaultNumberingSystem,I||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:g,outputCalendar:I}={}){return rb.create(a,g,I)}constructor(a,g,I,fa){var la=a.indexOf("-x-");-1!==la&&(a=a.substring(0,la));la=a.indexOf("-u-");if(-1===la)var ta=[a];else{try{ta=ma(a).resolvedOptions();var Aa=a}catch(bb){Aa=a.substring(0,la),ta=ma(Aa).resolvedOptions()}const {numberingSystem:Wa,calendar:Xa}=ta;ta=[Aa,Wa,Xa]}const [Ia,
Ma,d]=ta;this.locale=Ia;this.numberingSystem=g||Ma||null;this.outputCalendar=I||d||null;g=this.locale;I=this.numberingSystem;if((ta=this.outputCalendar)||I)g.includes("-u-")||(g+="-u"),ta&&(g+=`-ca-${ta}`),I&&(g+=`-nu-${I}`);this.intl=g;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=fa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==
this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),g=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&g?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||
this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,g=!1,I=!0){return u(this,a,I,t,()=>{const fa=g?{month:a,day:"numeric"}:{month:a},la=g?"format":"standalone";this.monthsCache[la][a]||(this.monthsCache[la][a]=Q(ta=>this.extract(ta,fa,"month")));return this.monthsCache[la][a]})}weekdays(a,g=!1,
I=!0){return u(this,a,I,P,()=>{const fa=g?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},la=g?"format":"standalone";this.weekdaysCache[la][a]||(this.weekdaysCache[la][a]=F(ta=>this.extract(ta,fa,"weekday")));return this.weekdaysCache[la][a]})}meridiems(a=!0){return u(this,void 0,a,()=>Ed,()=>{if(!this.meridiemCache){const g={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,9),Za.utc(2016,11,13,19)].map(I=>this.extract(I,g,"dayperiod"))}return this.meridiemCache})}eras(a,
g=!0){return u(this,a,g,ja,()=>{const I={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(fa=>this.extract(fa,I,"era")));return this.eraCache[a]})}extract(a,g,I){return(a=this.dtFormatter(a,g).formatToParts().find(fa=>fa.type.toLowerCase()===I))?a.value:null}numberFormatter(a={}){return new xe(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,g={}){return new ye(a,this.intl,g)}relFormatter(a={}){return new ze(this.intl,this.isEnglish(),a)}listFormatter(a=
{}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(N(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${z(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${z(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,g){return z(this.fixed,g)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class hd extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Fd=()=>Date.now(),Gd="system",Hd=null,Sc=null,Id=null,Jd=60,Kd;class yb{static get now(){return Fd}static set now(a){Fd=a}static set defaultZone(a){Gd=a}static get defaultZone(){return k(Gd,nc.instance)}static get defaultLocale(){return Hd}static set defaultLocale(a){Hd=a}static get defaultNumberingSystem(){return Sc}static set defaultNumberingSystem(a){Sc=
a}static get defaultOutputCalendar(){return Id}static set defaultOutputCalendar(a){Id=a}static get twoDigitCutoffYear(){return Jd}static set twoDigitCutoffYear(a){Jd=a%100}static get throwOnInvalid(){return Kd}static set throwOnInvalid(a){Kd=a}static resetCaches(){rb.resetCache();Tb.resetCache()}}const kd="January February March April May June July August September October November December".split(" "),jd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),md=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ld="Mon Tue Wed Thu Fri Sat Sun".split(" "),oe="MTWTFSS".split(""),Ed=["AM","PM"],qe=["Before Christ","Anno Domini"],pe=["BC","AD"],Kc=["B","A"],Tc={D:Da,DD:Na,DDD:mb,DDDD:kb,t:hb,tt:xb,ttt:Ib,tttt:rd,T:sd,TT:td,TTT:ud,TTTT:vd,f:wd,ff:yd,fff:Ad,ffff:Cd,F:xd,FF:zd,FFF:Bd,FFFF:Dd};class Fb{static create(a,g={}){return new Fb(a,g)}static parseFormat(a){let g=null,I="",fa=!1;const la=[];for(let ta=0;ta<a.length;ta++){const Aa=a.charAt(ta);
"'"===Aa?(0<I.length&&la.push({literal:fa,val:I}),g=null,I="",fa=!fa):fa?I+=Aa:Aa===g?I+=Aa:(0<I.length&&la.push({literal:!1,val:I}),g=I=Aa)}0<I.length&&la.push({literal:fa,val:I});return la}static macroTokenToFormatOpts(a){return Tc[a]}constructor(a,g){this.opts=g;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,g){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...g}).format()}formatDateTime(a,g={}){return this.loc.dtFormatter(a,
{...this.opts,...g}).format()}formatDateTimeParts(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).formatToParts()}formatInterval(a,g={}){return this.loc.dtFormatter(a.start,{...this.opts,...g}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,g={}){return this.loc.dtFormatter(a,{...this.opts,...g}).resolvedOptions()}num(a,g=0){if(this.opts.forceSimple)return L(a,g);const I={...this.opts};0<g&&(I.padTo=g);return this.loc.numberFormatter(I).format(a)}formatDateTimeFromString(a,
g){const I="en"===this.loc.listingMode(),fa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,la=(Wa,Xa)=>this.loc.extract(a,Wa,Xa),ta=Wa=>a.isOffsetFixed&&0===a.offset&&Wa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Wa.format):"",Aa=(Wa,Xa)=>I?t(Wa)[a.month-1]:la(Xa?{month:Wa}:{month:Wa,day:"numeric"},"month"),Ia=(Wa,Xa)=>I?P(Wa)[a.weekday-1]:la(Xa?{weekday:Wa}:{weekday:Wa,month:"long",day:"numeric"},"weekday"),Ma=Wa=>{const Xa=Fb.macroTokenToFormatOpts(Wa);return Xa?this.formatWithSystemDefault(a,
Xa):Wa},d=Wa=>I?ja(Wa)[0>a.year?0:1]:la({era:Wa},"era");return za(Fb.parseFormat(g),Wa=>{switch(Wa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%
12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ta({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ta({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ta({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return I?Ed[12>a.hour?0:1]:la({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return fa?la({day:"numeric"},"day"):this.num(a.day);case "dd":return fa?la({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",!1);case "EEEEE":return Ia("narrow",!1);case "L":return fa?
la({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return fa?la({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return fa?la({month:"numeric"},"month"):this.num(a.month);case "MM":return fa?la({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return fa?
la({year:"numeric"},"year"):this.num(a.year);case "yy":return fa?la({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return fa?la({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return fa?la({year:"numeric"},"year"):this.num(a.year,6);case "G":return d("short");case "GG":return d("long");case "GGGGG":return d("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ma(Wa)}})}formatDurationFromString(a,g){const I=la=>{switch(la[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};g=Fb.parseFormat(g);const fa=g.reduce((la,{literal:ta,val:Aa})=>ta?la:la.concat(Aa),[]);a=a.shiftTo(...fa.map(I).filter(la=>la));return za(g,(la=>ta=>{const Aa=I(ta);return Aa?this.num(la.get(Aa),ta.length):ta})(a))}}class Qb{constructor(a,g){this.reason=a;this.explanation=g}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ld=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Md=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Uc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nd=RegExp(`${Uc.source}${`(?:${Md.source}?(?:\\[(${Ld.source})\\])?)?`}`),Vc=RegExp(`(?:T${Nd.source})?`),Od=Ua("weekYear","weekNumber","weekDay"),Ae=Ua("year","ordinal"),Wc=RegExp(`${Uc.source} ?(?:${Md.source}|(${Ld.source}))?`),Pd=RegExp(`(?: ${Wc.source})?`),Be=RegExp(`^T?${Uc.source}$`),Ce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},De=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Ee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,He=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vc),Ie=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vc),Je=Ea(/(\d{4})-?(\d{3})/,Vc),Ke=Ea(Nd),Qd=Ha(function(a,g){return[{year:Oa(a,g),month:Oa(a,g+1,1),day:Oa(a,g+2,1)},null,g+3]},Sa,$a,Ta),Le=Ha(Od,Sa,$a,Ta),Me=Ha(Ae,Sa,$a,Ta),Ne=Ha(Sa,$a,Ta),Oe=Ha(Sa),Pe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Pd),Qe=Ea(Wc),Re=Ha(Sa,$a,Ta),Rd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Se={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Rd},Te={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Rd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),se=cc.slice(0).reverse();
class eb{constructor(a){const g="longterm"===a.conversionAccuracy||!1;let I=g?Te:Se;a.matrix&&(I=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=g?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=I;this.isLuxonDuration=!0}static fromMillis(a,g){return eb.fromObject({milliseconds:a},g)}static fromObject(a,g={}){if(null==a||"object"!==typeof a)throw new qa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new eb({values:B(a,
eb.normalizeUnit),loc:rb.fromObject(g),conversionAccuracy:g.conversionAccuracy,matrix:g.matrix})}static fromDurationLike(a){if(H(a))return eb.fromMillis(a);if(eb.isDuration(a))return a;if("object"===typeof a)return eb.fromObject(a);throw new qa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,g){const [I]=Fa(a,[Ce,jb]);return I?eb.fromObject(I,g):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,g){const [I]=Fa(a,[Be,Oe]);return I?
eb.fromObject(I,g):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,g=null){if(!a)throw new qa("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new T(a);return new eb({invalid:a})}static normalizeUnit(a){const g={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!g)throw new X(a);return g}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,g={}){g={...g,floor:!1!==g.round&&!1!==g.floor};return this.isValid?Fb.create(this.loc,g).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const g=cc.map(I=>{const fa=this.values[I];return n(fa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:I.slice(0,-1)}).format(fa)}).filter(I=>I);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(g)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=G(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var g=this.toMillis();if(0>g||864E5<=g)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
g=this.shiftTo("hours","minutes","seconds","milliseconds");let I="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===g.seconds&&0===g.milliseconds||(I+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===g.milliseconds||(I+=".SSS"));g=g.toFormat(I);a.includePrefix&&(g="T"+g);return g}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);const g=
{};for(const I of cc)if(e(a.values,I)||e(this.values,I))g[I]=a.get(I)+this.get(I);return ea(this,{values:g},!0)}minus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const g={};for(const I of Object.keys(this.values))g[I]=M(a(this.values[I],I));return ea(this,{values:g},!0)}get(a){return this[eb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...B(a,eb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:g,conversionAccuracy:I,matrix:fa}={}){a={loc:this.loc.clone({locale:a,numberingSystem:g}),matrix:fa,conversionAccuracy:I};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();va(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const g={};for(const [I,fa]of Object.entries(a))0!==fa&&(g[I]=fa);return ea(this,{values:g},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(ta=>eb.normalizeUnit(ta));const g={},I={},fa=this.toObject();let la;for(const ta of cc)if(0<=a.indexOf(ta)){la=ta;let Aa=0;for(const Ma in I)Aa+=this.matrix[Ma][ta]*I[Ma],I[Ma]=0;H(fa[ta])&&(Aa+=fa[ta]);const Ia=Math.trunc(Aa);g[ta]=Ia;I[ta]=(1E3*Aa-1E3*Ia)/1E3;for(const Ma in fa)cc.indexOf(Ma)>cc.indexOf(ta)&&ka(this.matrix,fa,Ma,g,ta)}else H(fa[ta])&&(I[ta]=fa[ta]);for(const ta in I)0!==I[ta]&&(g[la]+=ta===la?I[ta]:I[ta]/this.matrix[la][ta]);return ea(this,{values:g},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const g of Object.keys(this.values))a[g]=0===this.values[g]?0:-this.values[g];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const fa of cc){var g=this.values[fa];var I=a.values[fa];g=void 0===g||0===g?void 0===I||0===I:g===I;if(!g)return!1}return!0}}class wb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,g=null){if(!a)throw new qa("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new hc(a);return new wb({invalid:a})}static fromDateTimes(a,
g){a=Ab(a);g=Ab(g);var I=a&&a.isValid?g&&g.isValid?g<a?wb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${g.toISO()}`):null:wb.invalid("missing or invalid end"):wb.invalid("missing or invalid start");return null==I?new wb({start:a,end:g}):I}static after(a,g){g=eb.fromDurationLike(g);a=Ab(a);return wb.fromDateTimes(a,a.plus(g))}static before(a,g){g=eb.fromDurationLike(g);a=Ab(a);return wb.fromDateTimes(a.minus(g),a)}static fromISO(a,
g){const [I,fa]=(a||"").split("/",2);if(I&&fa){let Aa;try{var la=Za.fromISO(I,g);Aa=la.isValid}catch(Ma){Aa=!1}let Ia;try{var ta=Za.fromISO(fa,g);Ia=ta.isValid}catch(Ma){Ia=!1}if(Aa&&Ia)return wb.fromDateTimes(la,ta);if(Aa){if(ta=eb.fromISO(fa,g),ta.isValid)return wb.after(la,ta)}else if(Ia&&(la=eb.fromISO(I,g),la.isValid))return wb.before(ta,la)}return wb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const g=this.start.startOf(a),I=this.end.startOf(a);return Math.floor(I.diff(g,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:g}={}){return this.isValid?wb.fromDateTimes(a||this.s,g||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ab).filter(ta=>this.contains(ta)).sort();const g=[];let {s:I}=this,fa=0;for(;I<this.e;){var la=a[fa]||this.e;la=+la>+this.e?this.e:la;
g.push(wb.fromDateTimes(I,la));I=la;fa+=1}return g}splitBy(a){a=eb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:g}=this,I=1;const fa=[];for(;g<this.e;){var la=this.start.plus(a.mapUnits(ta=>ta*I));la=+la>+this.e?this.e:la;fa.push(wb.fromDateTimes(g,la));g=la;I+=1}return fa}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?
+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const g=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return g>=a?null:wb.fromDateTimes(g,a)}union(a){return this.isValid?wb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [g,I]=a.sort((fa,la)=>fa.s-la.s).reduce(([fa,la],ta)=>la?la.overlaps(ta)||la.abutsStart(ta)?
[fa,la.union(ta)]:[fa.concat([la]),ta]:[fa,ta],[[],null]);I&&g.push(I);return g}static xor(a){let g=null,I=0;const fa=[];a=a.map(la=>[{time:la.s,type:"s"},{time:la.e,type:"e"}]);a=Array.prototype.concat(...a).sort((la,ta)=>la.time-ta.time);for(const la of a)I+="s"===la.type?1:-1,1===I?g=la.time:(g&&+g!==+la.time&&fa.push(wb.fromDateTimes(g,la.time)),g=null);return wb.merge(fa)}difference(...a){return wb.xor([this].concat(a)).map(g=>this.intersection(g)).filter(g=>g&&!g.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Da,g={}){return this.isValid?Fb.create(this.s.loc.clone(g),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:g=" \u2013 "}=
{}){return this.isValid?`${this.s.toFormat(a)}${g}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,g){return this.isValid?this.e.diff(this.s,a,g):eb.invalid(this.invalidReason)}mapEndpoints(a){return wb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const g=Za.now().setZone(a).set({month:12});return!a.isUniversal&&g.offset!==g.set({month:6}).offset}static isValidIANAZone(a){return Tb.isValidZone(a)}static normalizeZone(a){return k(a,yb.defaultZone)}static months(a=
"long",{locale:g=null,numberingSystem:I=null,locObj:fa=null,outputCalendar:la="gregory"}={}){return(fa||rb.create(g,I,la)).months(a)}static monthsFormat(a="long",{locale:g=null,numberingSystem:I=null,locObj:fa=null,outputCalendar:la="gregory"}={}){return(fa||rb.create(g,I,la)).months(a,!0)}static weekdays(a="long",{locale:g=null,numberingSystem:I=null,locObj:fa=null}={}){return(fa||rb.create(g,I,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:g=null,numberingSystem:I=null,locObj:fa=null}=
{}){return(fa||rb.create(g,I,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:g=null}={}){return rb.create(g,null,"gregory").eras(a)}static features(){return{relative:K()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},nd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},te=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),od=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(od,"g"),ue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],qd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pd="year month day hour minute second millisecond".split(" "),We="weekYear weekNumber weekday hour minute second millisecond".split(" "),Xe="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const g=a.zone||yb.defaultZone;let I=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(g.isValid?null:Gb(g));this.ts=n(a.ts)?yb.now():a.ts;let fa=null;var la=null;I||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(g)?[fa,la]=[a.old.c,a.old.o]:(la=g.offset(this.ts),fa=oa(this.ts,la),fa=(I=Number.isNaN(fa.year)?new Qb("invalid input"):null)?null:fa,la=I?null:la));this._zone=g;this.loc=a.loc||rb.create();this.invalid=I;this.weekData=null;this.c=fa;this.o=la;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,g]=fb(arguments),[I,fa,la,ta,Aa,Ia,Ma]=g;return Hb({year:I,month:fa,day:la,hour:ta,minute:Aa,second:Ia,millisecond:Ma},a)}static utc(){const [a,g]=fb(arguments),[I,fa,la,ta,Aa,Ia,Ma]=g;a.zone=Eb.utcInstance;return Hb({year:I,month:fa,day:la,hour:ta,minute:Aa,second:Ia,millisecond:Ma},a)}static fromJSDate(a,g={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const I=
k(g.zone,yb.defaultZone);return I.isValid?new Za({ts:a,zone:I,loc:rb.fromObject(g)}):Za.invalid(Gb(I))}static fromMillis(a,g={}){if(H(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:k(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new qa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,g={}){if(H(a))return new Za({ts:1E3*a,zone:k(g.zone,yb.defaultZone),loc:rb.fromObject(g)});throw new qa("fromSeconds requires a numerical input");
}static fromObject(a,g={}){a=a||{};var I=k(g.zone,yb.defaultZone);if(!I.isValid)return Za.invalid(Gb(I));var fa=yb.now();const la=n(g.specificOffset)?I.offset(fa):g.specificOffset,ta=B(a,kc);var Aa=!n(ta.ordinal),Ia=!n(ta.year),Ma=!n(ta.month)||!n(ta.day);Ia=Ia||Ma;var d=ta.weekYear||ta.weekNumber;g=rb.fromObject(g);if((Ia||Aa)&&d)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ma&&Aa)throw new ha("Can't mix ordinal dates with month/day");Ma=d||ta.weekday&&!Ia;
let Wa=oa(fa,la);Ma?(fa=We,d=Ue,Wa=vb(Wa)):Aa?(fa=Xe,d=Ve,Wa=qb(Wa)):(fa=pd,d=qd);let Xa=!1;for(var bb of fa)n(ta[bb])?ta[bb]=Xa?d[bb]:Wa[bb]:Xa=!0;Ma?(bb=ba(ta.weekYear),fa=p(ta.weekNumber,1,O(ta.weekYear)),d=p(ta.weekday,1,7),bb=bb?fa?d?!1:Ga("weekday",ta.weekday):Ga("week",ta.week):Ga("weekYear",ta.weekYear)):Aa?(bb=ba(ta.year),fa=p(ta.ordinal,1,q(ta.year)?366:365),bb=bb?fa?!1:Ga("ordinal",ta.ordinal):Ga("year",ta.year)):bb=gb(ta);if(bb=bb||db(ta))return Za.invalid(bb);Aa=Ma?ub(ta):Aa?b(ta):ta;
const [ua,$b]=Yb(Aa,la,I);I=new Za({ts:ua,zone:I,o:$b,loc:g});return ta.weekday&&Ia&&a.weekday!==I.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${ta.weekday} and a date of ${I.toISO()}`):I}static fromISO(a,g={}){const [I,fa]=Fa(a,[He,Qd],[Ie,Le],[Je,Me],[Ke,Ne]);return zb(I,fa,g,"ISO 8601",a)}static fromRFC2822(a,g={}){const [I,fa]=Fa(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[De,lb]);return zb(I,fa,g,"RFC 2822",a)}static fromHTTP(a,g={}){const [I,
fa]=Fa(a,[Ee,c],[Fe,c],[Ge,r]);return zb(I,fa,g,"HTTP",g)}static fromFormat(a,g,I={}){if(n(a)||n(g))throw new qa("fromFormat requires an input string and a format");const {locale:fa=null,numberingSystem:la=null}=I,ta=rb.fromOpts({locale:fa,numberingSystem:la,defaultToEN:!0}),{result:Aa,zone:Ia,specificOffset:Ma,invalidReason:d}=Pa(ta,a,g),[Wa,Xa,bb,ua]=[Aa,Ia,Ma,d];return ua?Za.invalid(ua):zb(Wa,Xa,I,`format ${g}`,a,bb)}static fromString(a,g,I={}){return Za.fromFormat(a,g,I)}static fromSQL(a,g={}){const [I,
fa]=Fa(a,[Pe,Qd],[Qe,Re]);return zb(I,fa,g,"SQL",a)}static invalid(a,g=null){if(!a)throw new qa("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,g);if(yb.throwOnInvalid)throw new Ya(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,g={}){return(a=Qa(a,rb.fromObject(g)))?a.map(I=>I?I.val:null).join(""):null}static expandFormat(a,g={}){return Ja(Fb.parseFormat(a),rb.fromObject(g)).map(I=>I.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pb(this).weekYear:NaN}get weekNumber(){return this.isValid?Pb(this).weekNumber:NaN}get weekday(){return this.isValid?Pb(this).weekday:
NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return q(this.year)}get daysInMonth(){return w(this.year,this.month)}get daysInYear(){return this.isValid?
q(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?O(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:g,numberingSystem:I,calendar:fa}=Fb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:g,numberingSystem:I,outputCalendar:fa}}toUTC(a=0,g={}){return this.setZone(Eb.instance(a),g)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:g=!1,keepCalendarTime:I=!1}={}){a=k(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let fa=
this.ts;if(g||I)g=a.offset(this.ts),I=this.toObject(),[fa]=Yb(I,g,a);return nb(this,{ts:fa,zone:a})}return Za.invalid(Gb(a))}reconfigure({locale:a,numberingSystem:g,outputCalendar:I}={}){a=this.loc.clone({locale:a,numberingSystem:g,outputCalendar:I});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=B(a,kc);var g=!n(a.weekYear)||!n(a.weekNumber)||!n(a.weekday);const I=!n(a.ordinal),fa=!n(a.year),la=!n(a.month)||!n(a.day),ta=a.weekYear||
a.weekNumber;if((fa||la||I)&&ta)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(la&&I)throw new ha("Can't mix ordinal dates with month/day");g?g=ub({...vb(this.c),...a}):n(a.ordinal)?(g={...this.toObject(),...a},n(a.day)&&(g.day=Math.min(w(g.year,g.month),g.day))):g=b({...qb(this.c),...a});const [Aa,Ia]=Yb(g,this.o,this.zone);return nb(this,{ts:Aa,o:Ia})}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return nb(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=eb.fromDurationLike(a).negate();return nb(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const g={};a=eb.normalizeUnit(a);switch(a){case "years":g.month=1;case "quarters":case "months":g.day=1;case "weeks":case "days":g.hour=0;case "hours":g.minute=0;case "minutes":g.second=0;case "seconds":g.millisecond=0}"weeks"===a&&(g.weekday=1);"quarters"===a&&(g.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(g)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
g={}){return this.isValid?Fb.create(this.loc.redefaultToEN(g)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Da,g={}){return this.isValid?Fb.create(this.loc.clone(g),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Fb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:g=!1,suppressMilliseconds:I=!1,includeOffset:fa=!0,extendedZone:la=!1}={}){if(!this.isValid)return null;a="extended"===a;let ta=
Zb(this,a);return ta=ta+"T"+Xb(this,a,g,I,fa,la)}toISODate({format:a="extended"}={}){return this.isValid?Zb(this,"extended"===a):null}toISOWeekDate(){return Kb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:g=!1,includeOffset:I=!0,includePrefix:fa=!1,extendedZone:la=!1,format:ta="extended"}={}){return this.isValid?(fa?"T":"")+Xb(this,"extended"===ta,g,a,I,la):null}toRFC2822(){return Kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Zb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:g=!1,includeOffsetSpace:I=!0}={}){let fa="HH:mm:ss.SSS";if(g||a)I&&(fa+=" "),g?fa+="z":a&&(fa+="ZZ");return Kb(this,fa,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const g={...this.c};a.includeConfig&&(g.outputCalendar=this.outputCalendar,g.numberingSystem=this.loc.numberingSystem,g.locale=this.loc.locale);return g}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,g="milliseconds",I={}){if(!this.isValid||!a.isValid)return eb.invalid("created by diffing an invalid DateTime");I={locale:this.locale,numberingSystem:this.numberingSystem,...I};
const fa=(Array.isArray(g)?g:[g]).map(eb.normalizeUnit);g=a.valueOf()>this.valueOf();a=da(g?this:a,g?a:this,fa,I);return g?a.negate():a}diffNow(a="milliseconds",g={}){return this.diff(Za.now(),a,g)}until(a){return this.isValid?wb.fromDateTimes(this,a):this}hasSame(a,g){if(!this.isValid)return!1;const I=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(g)<=I&&I<=a.endOf(g)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const g=a.base||Za.fromObject({},{zone:this.zone}),I=a.padding?this<g?-a.padding:a.padding:0;let fa="years months days hours minutes seconds".split(" "),la=a.unit;Array.isArray(a.unit)&&(fa=a.unit,la=void 0);return Rb(g,this.plus(I),{...a,numeric:"always",units:fa,unit:la})}toRelativeCalendar(a={}){return this.isValid?Rb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new qa("min requires all arguments be DateTimes");
return m(a,g=>g.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new qa("max requires all arguments be DateTimes");return m(a,g=>g.valueOf(),Math.max)}static fromFormatExplain(a,g,I={}){const {locale:fa=null,numberingSystem:la=null}=I;I=rb.fromOpts({locale:fa,numberingSystem:la,defaultToEN:!0});return Pa(I,a,g)}static fromStringExplain(a,g,I={}){return Za.fromFormatExplain(a,g,I)}static get DATE_SHORT(){return Da}static get DATE_MED(){return Na}static get DATE_MED_WITH_WEEKDAY(){return Va}static get DATE_FULL(){return mb}static get DATE_HUGE(){return kb}static get TIME_SIMPLE(){return hb}static get TIME_WITH_SECONDS(){return xb}static get TIME_WITH_SHORT_OFFSET(){return Ib}static get TIME_WITH_LONG_OFFSET(){return rd}static get TIME_24_SIMPLE(){return sd}static get TIME_24_WITH_SECONDS(){return td}static get TIME_24_WITH_SHORT_OFFSET(){return ud}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return wd}static get DATETIME_SHORT_WITH_SECONDS(){return xd}static get DATETIME_MED(){return yd}static get DATETIME_MED_WITH_SECONDS(){return zd}static get DATETIME_MED_WITH_WEEKDAY(){return ve}static get DATETIME_FULL(){return Ad}static get DATETIME_FULL_WITH_SECONDS(){return Bd}static get DATETIME_HUGE(){return Cd}static get DATETIME_HUGE_WITH_SECONDS(){return Dd}}
l.DateTime=Za;l.Duration=eb;l.FixedOffsetZone=Eb;l.IANAZone=Tb;l.Info=lc;l.Interval=wb;l.SystemZone=nc;l.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(l,f){var ma={};(function(R){(function(Q,F){R.exports&&(R.exports=F())})(f.commonjsGlobal,function(){function Q(u,k,n,H){u=Error.call(this,u);Object.setPrototypeOf&&Object.setPrototypeOf(u,Q.prototype);u.expected=k;u.found=n;u.location=H;u.name="SyntaxError";return u}function F(u,k,n){n=
n||" ";if(u.length>k)return u;k-=u.length;n+=n.repeat(k);return u+n.slice(0,k)}(function(u,k){function n(){this.constructor=u}n.prototype=k.prototype;u.prototype=new n})(Q,Error);Q.prototype.format=function(u){var k="Error: "+this.message;if(this.location){var n=null,H;for(H=0;H<u.length;H++)if(u[H].source===this.location.source){n=u[H].text.split(/\r\n|\n|\r/g);break}u=this.location.start;H=this.location.source+":"+u.line+":"+u.column;if(n){var ba=this.location.end,K=F("",u.line.toString().length,
" ");n=n[u.line-1];ba=(u.line===ba.line?ba.column:n.length+1)-u.column||1;k+="\n --\x3e "+H+"\n"+K+" |\n"+u.line+" | "+n+"\n"+K+" | "+F("",u.column-1," ")+F("",ba,"^")}else k+="\n at "+H}return k};Q.buildMessage=function(u,k){function n(y){return y.charCodeAt(0).toString(16).toUpperCase()}function H(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(e){return"\\x"+n(e)})}function ba(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function K(y){return m[y.type](y)}var m={literal:function(y){return'"'+H(y.text)+'"'},class:function(y){var e=y.parts.map(function(p){return Array.isArray(p)?ba(p[0])+
"-"+ba(p[1]):ba(p)});return"["+(y.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};return"Expected "+function(y){y=y.map(K);var e,p;y.sort();if(0<y.length){for(p=e=1;e<y.length;e++)y[e-1]!==y[e]&&(y[p]=y[e],p++);y.length=p}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(u)+" but "+(k?'"'+H(k)+'"':"end of input")+" found."};
return{SyntaxError:Q,parse:function(u,k){function n(v,A){return{type:"literal",text:v,ignoreCase:A}}function H(v,A,Y){return{type:"class",parts:v,inverted:A,ignoreCase:Y}}function ba(v){var A=Wa[v],Y;if(!A){for(Y=v-1;!Wa[Y];)Y--;A=Wa[Y];for(A={line:A.line,column:A.column};Y<v;)10===u.charCodeAt(Y)?(A.line++,A.column=1):A.column++,Y++;Wa[v]=A}return A}function K(v,A){var Y=ba(v),ya=ba(A);return{source:gb,start:{offset:v,line:Y.line,column:Y.column},end:{offset:A,line:ya.line,column:ya.column}}}function m(v){d<
Xa||(d>Xa&&(Xa=d,bb=[]),bb.push(v))}function y(){var v=d;xa();var A=p();A!==b?(xa(),v=A):(d=v,v=b);return v}function e(){var v=d;var A=p();if(A!==b){v=[];var Y=d;var ya=xa();var Ka=Qa();if(Ka!==b){var ab=xa();var cb=p();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)v.push(Y),Y=d,ya=xa(),Ka=Qa(),Ka!==b?(ab=xa(),cb=p(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);Y={type:"expression-list"};A=[A];for(ya=0;ya<v.length;ya++)A.push(v[ya][3]);Y.value=A;v=Y}else d=v,v=b;return v}function p(){var v=
d;var A=L();if(A!==b){v=[];var Y=d;var ya=xa();var Ka=ka();if(Ka!==b){var ab=xa();var cb=L();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)v.push(Y),Y=d,ya=xa(),Ka=ka(),Ka!==b?(ab=xa(),cb=L(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);v=qb(A,v)}else d=v,v=b;return v}function L(){var v=d;var A=W();if(A!==b){v=[];var Y=d;var ya=xa();var Ka=ea();if(Ka!==b){var ab=xa();var cb=W();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)v.push(Y),Y=d,ya=xa(),Ka=ea(),Ka!==b?(ab=xa(),
cb=W(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);v=qb(A,v)}else d=v,v=b;return v}function W(){var v=d;var A=r();if(A===b){A=d;if(33===u.charCodeAt(d)){var Y=Pb;d++}else Y=b,0===ua&&m(jd);if(Y!==b){var ya=d;ua++;if(61===u.charCodeAt(d)){var Ka=nb;d++}else Ka=b,0===ua&&m(id);ua--;Ka===b?ya=void 0:(d=ya,ya=b);ya!==b?A=Y=[Y,ya]:(d=A,A=b)}else d=A,A=b}A!==b?(Y=xa(),ya=W(),ya!==b?v={type:"unary-expression",operator:"NOT",expr:ya}:(d=v,v=b)):(d=v,v=b);if(v===b){A=d;v=q();if(v!==b){xa();A=[];Y=d;ya=
xa();Ka=U();if(Ka!==b){var ab=xa();var cb=q();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;if(Y!==b)for(;Y!==b;)A.push(Y),Y=d,ya=xa(),Ka=U(),Ka!==b?(ab=xa(),cb=q(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);else A=b;A!==b&&(A={type:"arithmetic",tail:A});A===b&&(A=d,Y=G(),Y!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=e(),ya!==b?(xa(),Ka=Ra(),Ka!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=G(),Y!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=Ra(),ya!==b?A={op:Y,right:{type:"expression-list",
value:[]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=G(),Y!==b?(xa(),ya=z(),ya!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b))),A===b&&(A=d,Ka=r(),Ka!==b?(xa(),Y=va(),Y!==b?(xa(),ya=q(),ya!==b?(xa(),ab=ea(),ab!==b?(xa(),Ka=q(),Ka!==b?A={op:"NOT"+Y,right:{type:"expression-list",value:[ya,Ka]}}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Ka=va(),Ka!==b?(xa(),Y=q(),Y!==b?(xa(),ya=ea(),ya!==b?(xa(),ab=q(),ab!==b?A={op:Ka,right:{type:"expression-list",value:[Y,ab]}}:(d=A,A=b)):(d=
A,A=b)):(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,Y=lb(),Y!==b?(xa(),ya=r(),ya!==b?(xa(),ya=q(),ya!==b?A={op:Y+"NOT",right:ya}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=lb(),Y!==b?(xa(),ya=q(),ya!==b?A={op:Y,right:ya}:(d=A,A=b)):(d=A,A=b)),A===b&&(A=d,Y=aa(),Y!==b?(xa(),ya=za(),ya!==b?(xa(),Ka=d,u.substr(d,6).toLowerCase()===Na?(ab=u.substr(d,6),d+=6):(ab=b,0===ua&&m(Ke)),ab!==b?(ab=d,ua++,cb=M(),ua--,cb===b?ab=void 0:(d=ab,ab=b),ab!==b?Ka="ESCAPE":(d=Ka,Ka=b)):(d=Ka,Ka=b),Ka!==b?(xa(),Ka=Ea(),Ka!==b?
A={op:Y,right:ya,escape:Ka.value}:(d=A,A=b)):(d=A,A=b)):(d=A,A=b)):(d=A,A=b),A===b&&(A=d,Y=aa(),Y!==b?(xa(),ya=za(),ya!==b?A={op:Y,right:ya,escape:""}:(d=A,A=b)):(d=A,A=b))))));A===b&&(A=null);""==A||void 0==A||null==A?A=v:(Y=null,A=Y="arithmetic"==A.type?qb(v,A.tail):ub(A.op,v,A.right,A.escape))}else d=A,A=b;v=A}return v}function U(){if(u.substr(d,2)===Wb){var v=Wb;d+=2}else v=b,0===ua&&m(md);v===b&&(62===u.charCodeAt(d)?(v=oa,d++):(v=b,0===ua&&m(ld)),v===b&&(u.substr(d,2)===Yb?(v=Yb,d+=2):(v=b,
0===ua&&m(oe)),v===b&&(u.substr(d,2)===Sb?(v=Sb,d+=2):(v=b,0===ua&&m(Ed)),v===b&&(60===u.charCodeAt(d)?(v=zb,d++):(v=b,0===ua&&m(qe)),v===b&&(61===u.charCodeAt(d)?(v=nb,d++):(v=b,0===ua&&m(id)),v===b&&(u.substr(d,2)===Kb?(v=Kb,d+=2):(v=b,0===ua&&m(pe))))))));return v}function aa(){var v=v=d;var A=r();if(A!==b){var Y=xa();var ya=c();ya!==b?v=A=[A,Y,ya]:(d=v,v=b)}else d=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=c());return v}function G(){var v=v=d;var A=r();if(A!==b){var Y=xa();var ya=ib();ya!==b?v=
A=[A,Y,ya]:(d=v,v=b)}else d=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=ib());return v}function q(){var v=d;var A=D();if(A!==b){v=[];var Y=d;var ya=xa();var Ka=w();if(Ka!==b){var ab=xa();var cb=D();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)v.push(Y),Y=d,ya=xa(),Ka=w(),Ka!==b?(ab=xa(),cb=D(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);v=qb(A,v)}else d=v,v=b;return v}function w(){if(43===u.charCodeAt(d)){var v=Zb;d++}else v=b,0===ua&&m(Kc);v===b&&(45===u.charCodeAt(d)?(v=Xb,d++):
(v=b,0===ua&&m(Tc)),v===b&&(u.substr(d,2)===kc?(v=kc,d+=2):(v=b,0===ua&&m(Fb))));return v}function D(){var v=d;var A=C();if(A!==b){v=[];var Y=d;var ya=xa();var Ka=O();if(Ka!==b){var ab=xa();var cb=C();cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)}else d=Y,Y=b;for(;Y!==b;)v.push(Y),Y=d,ya=xa(),Ka=O(),Ka!==b?(ab=xa(),cb=C(),cb!==b?Y=ya=[ya,Ka,ab,cb]:(d=Y,Y=b)):(d=Y,Y=b);v=qb(A,v)}else d=v,v=b;return v}function O(){if(42===u.charCodeAt(d)){var v=Hb;d++}else v=b,0===ua&&m(Qb);v===b&&(47===u.charCodeAt(d)?(v=Rb,
d++):(v=b,0===ua&&m(Ld)));return v}function C(){var v=Ea();if(v===b){var A=d;var Y=d;var ya=Oa();if(ya!==b){var Ka=Sa();if(Ka!==b){var ab=$a();ab!==b?Y=parseFloat(ya+Ka+ab):(d=Y,Y=b)}else d=Y,Y=b}else d=Y,Y=b;Y===b&&(Y=d,ya=Oa(),ya!==b?(Ka=Sa(),Ka!==b?Y=parseFloat(ya+Ka):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Oa(),ya!==b?(Ka=$a(),Ka!==b?Y=parseFloat(ya+Ka):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=Oa(),ya!==b&&(ya=parseFloat(ya)),Y=ya)));var cb=Y;if(cb!==b){var Sd=d;ua++;var Kf=N();ua--;Kf===b?Sd=void 0:(d=
Sd,Sd=b);Sd!==b?A={type:"number",value:cb}:(d=A,A=b)}else d=A,A=b;v=A;if(v===b){var Xc=d;var rc=d;if(u.substr(d,4).toLowerCase()===ha){var Td=u.substr(d,4);d+=4}else Td=b,0===ua&&m(Fe);if(Td!==b){var Yc=d;ua++;var Lf=M();ua--;Lf===b?Yc=void 0:(d=Yc,Yc=b);Yc!==b?rc=Td=[Td,Yc]:(d=rc,rc=b)}else d=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Xc=mc;if(Xc===b){Xc=d;var sc=d;if(u.substr(d,5).toLowerCase()===X){var Ud=u.substr(d,5);d+=5}else Ud=b,0===ua&&m(Ge);if(Ud!==b){var Zc=d;ua++;var Mf=
M();ua--;Mf===b?Zc=void 0:(d=Zc,Zc=b);Zc!==b?sc=Ud=[Ud,Zc]:(d=sc,sc=b)}else d=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Xc=mc}v=Xc;if(v===b){var tc=d;if(u.substr(d,4).toLowerCase()===T){var Vd=u.substr(d,4);d+=4}else Vd=b,0===ua&&m(Ee);if(Vd!==b){var $c=d;ua++;var Nf=M();ua--;Nf===b?$c=void 0:(d=$c,$c=b);$c!==b?tc=Vd=[Vd,$c]:(d=tc,tc=b)}else d=tc,tc=b;var Ye=tc;Ye!==b&&(Ye={type:"null",value:null});v=Ye;if(v===b){var uc=d;if(V()!==b){xa();var kf=za();kf!==b?uc={type:"date",value:kf.value}:
(d=uc,uc=b)}else d=uc,uc=b;v=uc;if(v===b){var vc=d;if(da()!==b){xa();var lf=za();lf!==b?vc={type:"timestamp",value:lf.value}:(d=vc,vc=b)}else d=vc,vc=b;v=vc;if(v===b){var Cb=d;var Ze=ia();if(Ze!==b){xa();if(45===u.charCodeAt(d)){var dc=Xb;d++}else dc=b,0===ua&&m(Tc);dc===b&&(43===u.charCodeAt(d)?(dc=Zb,d++):(dc=b,0===ua&&m(Kc)));if(dc!==b){xa();var ad=za();if(ad!==b){xa();var mf=t();mf!==b?Cb={type:"interval",value:ad,qualifier:mf,op:dc}:(d=Cb,Cb=b)}else d=Cb,Cb=b}else d=Cb,Cb=b}else d=Cb,Cb=b;Cb===
b&&(Cb=d,Ze=ia(),Ze!==b?(xa(),dc=za(),dc!==b?(xa(),ad=t(),ad!==b?Cb={type:"interval",value:dc,qualifier:ad,op:""}:(d=Cb,Cb=b)):(d=Cb,Cb=b)):(d=Cb,Cb=b));v=Cb}}}}}}var ob=v;if(ob===b){var Lb=d;var wc=d;if(u.substr(d,7).toLowerCase()===sd){var nf=u.substr(d,7);d+=7}else nf=b,0===ua&&m(Re);if(nf!==b){var Wd=d;ua++;var Of=M();ua--;Of===b?Wd=void 0:(d=Wd,Wd=b);Wd!==b?wc="EXTRACT":(d=wc,wc=b)}else d=wc,wc=b;if(wc!==b){xa();var Pf=Ga();if(Pf!==b){xa();var Ub=na();Ub===b&&(Ub=ra(),Ub===b&&(Ub=S(),Ub===b&&
(Ub=ca(),Ub===b&&(Ub=pa(),Ub===b&&(Ub=wa())))));var of=Ub;if(of!==b){xa();var Qf=x();if(Qf!==b){xa();var pf=p();if(pf!==b){xa();var Rf=Ra();Rf!==b?Lb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:of},pf]}}:(d=Lb,Lb=b)}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b}else d=Lb,Lb=b;ob=Lb;if(ob===b){var Mb=d;var xc=d;if(u.substr(d,9).toLowerCase()===rd){var qf=u.substr(d,9);d+=9}else qf=b,0===ua&&m(Qe);if(qf!==b){var Xd=d;ua++;var Sf=M();ua--;Sf===
b?Xd=void 0:(d=Xd,Xd=b);Xd!==b?xc="SUBSTRING":(d=xc,xc=b)}else d=xc,xc=b;if(xc!==b){xa();var Tf=Ga();if(Tf!==b){xa();var $e=p();if($e!==b){xa();var Uf=x();if(Uf!==b){xa();var af=p();if(af!==b){xa();var ec=d;var yc=d;if(u.substr(d,3).toLowerCase()===Ib){var rf=u.substr(d,3);d+=3}else rf=b,0===ua&&m(Pe);if(rf!==b){var Yd=d;ua++;var Vf=M();ua--;Vf===b?Yd=void 0:(d=Yd,Yd=b);Yd!==b?yc="FOR":(d=yc,yc=b)}else d=yc,yc=b;var bd=yc;if(bd!==b){var Wf=xa();var sf=p();if(sf!==b){var Xf=xa();ec=bd=[bd,Wf,sf,Xf]}else d=
ec,ec=b}else d=ec,ec=b;ec===b&&(ec=null);bd=Ra();bd!==b?Mb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[$e,af,ec[2]]:[$e,af]}}:(d=Mb,Mb=b)}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b}else d=Mb,Mb=b;ob=Mb;if(ob===b){var sb=d;var bf=J();if(bf!==b){xa();var cf=Ga();if(cf!==b){xa();var fc=h();fc===b&&(fc=null);xa();var cd=p();if(cd!==b){xa();var df=x();if(df!==b){xa();var tf=p();if(tf!==b){xa();var Yf=Ra();Yf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",
value:[{type:"string",value:null==fc?"BOTH":fc},cd,tf]}}:(d=sb,sb=b)}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b}else d=sb,sb=b;sb===b&&(sb=d,bf=J(),bf!==b?(xa(),cf=Ga(),cf!==b?(xa(),fc=h(),fc===b&&(fc=null),xa(),cd=p(),cd!==b?(xa(),df=Ra(),df!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd]}}:(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b)):(d=sb,sb=b));ob=sb;if(ob===b){var Nb=d;var zc=d;if(u.substr(d,8).toLowerCase()===ud){var uf=
u.substr(d,8);d+=8}else uf=b,0===ua&&m(Se);if(uf!==b){var Zd=d;ua++;var Zf=M();ua--;Zf===b?Zd=void 0:(d=Zd,Zd=b);Zd!==b?zc="POSITION":(d=zc,zc=b)}else d=zc,zc=b;if(zc!==b){xa();var $f=Ga();if($f!==b){xa();var vf=p();if(vf!==b){xa();var ag=ib();if(ag!==b){xa();var wf=p();if(wf!==b){xa();var bg=Ra();bg!==b?Nb={type:"function",name:"position",args:{type:"expression-list",value:[vf,wf]}}:(d=Nb,Nb=b)}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b}else d=Nb,Nb=b;ob=Nb;if(ob===b){var Ob=d;var Ac=
d;if(u.substr(d,4).toLowerCase()===ve){var xf=u.substr(d,4);d+=4}else xf=b,0===ua&&m(lc);if(xf!==b){var $d=d;ua++;var cg=M();ua--;cg===b?$d=void 0:(d=$d,$d=b);$d!==b?Ac="CAST":(d=Ac,Ac=b)}else d=Ac,Ac=b;if(Ac!==b){xa();var dg=Ga();if(dg!==b){xa();var yf=p();if(yf!==b){xa();var Bc=d;if(u.substr(d,2).toLowerCase()===Ad){var zf=u.substr(d,2);d+=2}else zf=b,0===ua&&m(Lc);if(zf!==b){var ae=d;ua++;var eg=M();ua--;eg===b?ae=void 0:(d=ae,ae=b);ae!==b?Bc="AS":(d=Bc,Bc=b)}else d=Bc,Bc=b;var fg=Bc;if(fg!==b){xa();
var pb=d;var Cc=d;if(u.substr(d,7).toLowerCase()===Bd){var Af=u.substr(d,7);d+=7}else Af=b,0===ua&&m(nd);if(Af!==b){var be=d;ua++;var gg=M();ua--;gg===b?be=void 0:(d=be,be=b);be!==b?Cc="INTEGER":(d=Cc,Cc=b)}else d=Cc,Cc=b;var tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});pb=tb;if(pb===b){pb=d;var Dc=d;if(u.substr(d,8).toLowerCase()===Cd){var Bf=u.substr(d,8);d+=8}else Bf=b,0===ua&&m(te);if(Bf!==b){var ce=d;ua++;var hg=M();ua--;hg===b?ce=void 0:(d=ce,ce=b);ce!==b?Dc="SMALLINT":(d=Dc,
Dc=b)}else d=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});pb=tb;if(pb===b){pb=d;var Ec=d;if(u.substr(d,5).toLowerCase()===Dd){var Cf=u.substr(d,5);d+=5}else Cf=b,0===ua&&m(od);if(Cf!==b){var de=d;ua++;var ig=M();ua--;ig===b?de=void 0:(d=de,de=b);de!==b?Ec="FLOAT":(d=Ec,Ec=b)}else d=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"float"}});pb=tb;if(pb===b){pb=d;var Fc=d;if(u.substr(d,4).toLowerCase()===ic){var Df=u.substr(d,4);d+=4}else Df=b,0===ua&&m(Mc);if(Df!==
b){var ee=d;ua++;var jg=M();ua--;jg===b?ee=void 0:(d=ee,ee=b);ee!==b?Fc="REAL":(d=Fc,Fc=b)}else d=Fc,Fc=b;tb=Fc;tb!==b&&(tb={type:"data-type",value:{type:"real"}});pb=tb;if(pb===b&&(pb=d,tb=V(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),pb=tb,pb===b&&(pb=d,tb=da(),tb!==b&&(tb={type:"data-type",value:{type:"timestamp"}}),pb=tb,pb===b))){pb=d;var Gc=d;if(u.substr(d,7).toLowerCase()===Qc){var Ef=u.substr(d,7);d+=7}else Ef=b,0===ua&&m(ue);if(Ef!==b){var fe=d;ua++;var kg=M();ua--;kg===b?fe=void 0:
(d=fe,fe=b);fe!==b?Gc="VARCHAR":(d=Gc,Gc=b)}else d=Gc,Gc=b;tb=Gc;if(tb!==b){xa();var lg=Ga();if(lg!==b){xa();var Ff=Ta();if(Ff!==b){xa();var mg=Ra();mg!==b?pb={type:"data-type",value:{type:"varchar",size:parseInt(Ff)}}:(d=pb,pb=b)}else d=pb,pb=b}else d=pb,pb=b}else d=pb,pb=b}}}}var Gf=pb;if(Gf!==b){xa();var ng=Ra();ng!==b?Ob={type:"function",name:"cast",args:{type:"expression-list",value:[yf,Gf]}}:(d=Ob,Ob=b)}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b}else d=Ob,Ob=b;ob=Ob;if(ob===
b){var jc=d;var ge;var Vb=d;Vb=ge=E();if(Vb===b)if(Vb=d,96===u.charCodeAt(d)?(ge=hd,d++):(ge=b,0===ua&&m(Ia)),ge!==b){var he=[];if(kd.test(u.charAt(d))){var gc=u.charAt(d);d++}else gc=b,0===ua&&m(Ma);if(gc!==b)for(;gc!==b;)he.push(gc),kd.test(u.charAt(d))?(gc=u.charAt(d),d++):(gc=b,0===ua&&m(Ma));else he=b;he!==b?(96===u.charCodeAt(d)?(gc=hd,d++):(gc=b,0===ua&&m(Ia)),gc!==b?Vb=he.join(""):(d=Vb,Vb=b)):(d=Vb,Vb=b)}else d=Vb,Vb=b;var Hf=Vb;if(Hf!==b){xa();var og=Ga();if(og!==b){xa();var ie=e();ie===
b&&(ie=null);xa();var pg=Ra();pg!==b?jc={type:"function",name:Hf,args:ie?ie:{type:"expression-list",value:[]}}:(d=jc,jc=b)}else d=jc,jc=b}else d=jc,jc=b;ob=jc;if(ob===b){var ac;var Db=d;var ef=Ba();if(ef!==b){xa();var dd=p();if(dd!==b){xa();var ed=[];for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();var je=La();je!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(d=Db,Db=b)}else d=Db,Db=b}else d=Db,Db=b;if(Db===b)if(Db=d,ef=Ba(),ef!==b)if(xa(),dd=p(),dd!==b){xa();ed=[];
for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();je=Ua();if(je!==b){xa();var qg=La();qg!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:je.value}:(d=Db,Db=b)}else d=Db,Db=b}else d=Db,Db=b;else d=Db,Db=b;var ff=Db;if(ff===b){var bc;var Jb=d;var gf=Ba();if(gf!==b){xa();var fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();var ke=La();ke!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:null}:(d=Jb,Jb=b)}else d=Jb,Jb=b;if(Jb===b)if(Jb=d,gf=Ba(),gf!==b){xa();
fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();ke=Ua();if(ke!==b){xa();var rg=La();rg!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:ke.value}:(d=Jb,Jb=b)}else d=Jb,Jb=b}else d=Jb,Jb=b;ff=Jb}ob=ff;if(ob===b){var le;var me=d;var If=N();if(If!==b){var Jf=[];for(le=B();le!==b;)Jf.push(le),le=B();me=If+Jf.join("")}else d=me,me=b;var ne=me;if(ne!==b){var hf=ne;ne=/^CURRENT_DATE$/i.test(hf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hf)?{type:"current-time",mode:"timestamp"}:
{type:"column-reference",table:"",column:hf}}ob=ne;if(ob===b&&(ob=z(),ob===b)){ob=d;var sg=Ga();if(sg!==b){xa();var jf=p();if(jf!==b){xa();var tg=Ra();tg!==b?(jf.paren=!0,ob=jf):(d=ob,ob=b)}else d=ob,ob=b}else d=ob,ob=b}}}}}}}}}return ob}function E(){var v;var A=d;var Y=N();if(Y!==b){A=[];for(v=M();v!==b;)A.push(v),v=M();A=Y+A.join("")}else d=A,A=b;return A}function N(){if(Fd.test(u.charAt(d))){var v=u.charAt(d);d++}else v=b,0===ua&&m(Md);return v}function M(){if(Gd.test(u.charAt(d))){var v=u.charAt(d);
d++}else v=b,0===ua&&m(Uc);return v}function B(){if(Hd.test(u.charAt(d))){var v=u.charAt(d);d++}else v=b,0===ua&&m(Nd);return v}function z(){var v=d;if(64===u.charCodeAt(d)){var A=fb;d++}else A=b,0===ua&&m(Vc);if(A!==b){var Y=E();Y!==b?v=A=[A,Y]:(d=v,v=b)}else d=v,v=b;v!==b&&(v={type:"parameter",value:v[1]});return v}function h(){var v=d;if(u.substr(d,7).toLowerCase()===xd){var A=u.substr(d,7);d+=7}else A=b,0===ua&&m(se);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="LEADING":
(d=v,v=b)}else d=v,v=b;v===b&&(v=d,u.substr(d,8).toLowerCase()===yd?(A=u.substr(d,8),d+=8):(A=b,0===ua&&m(eb)),A!==b?(A=d,ua++,Y=M(),ua--,Y===b?A=void 0:(d=A,A=b),A!==b?v="TRAILING":(d=v,v=b)):(d=v,v=b),v===b&&(v=d,u.substr(d,4).toLowerCase()===zd?(A=u.substr(d,4),d+=4):(A=b,0===ua&&m(wb)),A!==b?(A=d,ua++,Y=M(),ua--,Y===b?A=void 0:(d=A,A=b),A!==b?v="BOTH":(d=v,v=b)):(d=v,v=b)));return v}function t(){var v=d;var A=d;var Y=P();if(Y!==b){xa();var ya=Ga();if(ya!==b)if(xa(),ya=sa(),ya!==b){xa();var Ka=
Ra();Ka!==b?A={type:"interval-period",period:Y.value,precision:ya,secondary:null}:(d=A,A=b)}else d=A,A=b;else d=A,A=b}else d=A,A=b;A===b&&(A=d,Y=P(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),A=Y);if(A!==b)if(xa(),Y=d,u.substr(d,2).toLowerCase()===nc?(ya=u.substr(d,2),d+=2):(ya=b,0===ua&&m(Nc)),ya!==b?(ya=d,ua++,Ka=M(),ua--,Ka===b?ya=void 0:(d=ya,ya=b),ya!==b?Y="TO":(d=Y,Y=b)):(d=Y,Y=b),Y!==b){xa();Y=d;ya=P();ya!==b&&(ya={type:"interval-period",period:ya.value,
precision:null,secondary:null});Y=ya;if(Y===b){Y=d;ya=wa();if(ya!==b)if(xa(),ya=Ga(),ya!==b)if(xa(),ya=sa(),ya!==b)if(xa(),Ka=Qa(),Ka!==b)if(xa(),Ka=ja(),Ka!==b){xa();var ab=Ra();ab!==b?Y={type:"interval-period",period:"second",precision:ya,secondary:Ka}:(d=Y,Y=b)}else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;else d=Y,Y=b;Y===b&&(Y=d,ya=wa(),ya!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=sa(),ya!==b?(xa(),Ka=Ra(),Ka!==b?Y={type:"interval-period",period:"second",precision:ya,secondary:null}:(d=Y,Y=b)):
(d=Y,Y=b)):(d=Y,Y=b)):(d=Y,Y=b),Y===b&&(Y=d,ya=wa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),Y=ya))}Y!==b?v={type:"interval-qualifier",start:A,end:Y}:(d=v,v=b)}else d=v,v=b;else d=v,v=b;v===b&&(v=d,Y=P(),Y!==b?(xa(),A=Ga(),A!==b?(xa(),A=ja(),A!==b?(xa(),ya=Ra(),ya!==b?v={type:"interval-period",period:Y.value,precision:A,secondary:null}:(d=v,v=b)):(d=v,v=b)):(d=v,v=b)):(d=v,v=b),v===b&&(v=d,Y=P(),Y!==b&&(Y={type:"interval-period",period:Y.value,precision:null,
secondary:null}),v=Y,v===b&&(v=d,Y=wa(),Y!==b?(xa(),A=Ga(),A!==b?(xa(),A=sa(),A!==b?(xa(),ya=Qa(),ya!==b?(xa(),Y=ja(),Y!==b?(xa(),ya=Ra(),ya!==b?v={type:"interval-period",period:"second",precision:A,secondary:Y}:(d=v,v=b)):(d=v,v=b)):(d=v,v=b)):(d=v,v=b)):(d=v,v=b)):(d=v,v=b),v===b&&(v=d,Y=wa(),Y!==b?(xa(),A=Ga(),A!==b?(xa(),A=ja(),A!==b?(xa(),ya=Ra(),ya!==b?v={type:"interval-period",period:"second",precision:A,secondary:null}:(d=v,v=b)):(d=v,v=b)):(d=v,v=b)):(d=v,v=b),v===b&&(v=d,Y=wa(),Y!==b&&(Y=
{type:"interval-period",period:"second",precision:null,secondary:null}),v=Y)))));return v}function P(){var v=d;v=S();v!==b&&(v={type:"string",value:"day"});v===b&&(v=d,v=ca(),v!==b&&(v={type:"string",value:"hour"}),v===b&&(v=d,v=pa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=d,v=ra(),v!==b&&(v={type:"string",value:"month"}),v===b&&(v=d,v=na(),v!==b&&(v={type:"string",value:"year"})))));return v}function ja(){var v=Ta();v!==b&&(v=parseFloat(v));return v}function sa(){var v=Ta();v!==b&&(v=
parseFloat(v));return v}function za(){var v=Ea();v===b&&(v=z());return v}function Ea(){var v=d;if(39===u.charCodeAt(d)){var A=Ab;d++}else A=b,0===ua&&m(Od);A===b&&(u.substr(d,2)===Bb?(A=Bb,d+=2):(A=b,0===ua&&m(Ae)));if(A!==b){A=[];var Y=d;u.substr(d,2)===Ya?(Y=Ya,d+=2):(Y=b,0===ua&&m(Wc));Y!==b&&(Y="'");Y===b&&(Sc.test(u.charAt(d))?(Y=u.charAt(d),d++):(Y=b,0===ua&&m(Pd)));for(;Y!==b;)A.push(Y),Y=d,u.substr(d,2)===Ya?(Y=Ya,d+=2):(Y=b,0===ua&&m(Wc)),Y!==b&&(Y="'"),Y===b&&(Sc.test(u.charAt(d))?(Y=u.charAt(d),
d++):(Y=b,0===ua&&m(Pd)));39===u.charCodeAt(d)?(Y=Ab,d++):(Y=b,0===ua&&m(Od));Y!==b?v={type:"string",value:A.join("")}:(d=v,v=b)}else d=v,v=b;return v}function Ha(){var v=d;if(Ja()!==b){xa();var A=p();if(A!==b){xa();var Y=Pa();Y!==b?(xa(),Y=p(),Y!==b?v={type:"when-clause",operand:A,value:Y}:(d=v,v=b)):(d=v,v=b)}else d=v,v=b}else d=v,v=b;return v}function Fa(){var v=d;if(Ja()!==b){xa();var A=p();if(A!==b){xa();var Y=Pa();Y!==b?(xa(),Y=p(),Y!==b?v={type:"when-clause",operand:A,value:Y}:(d=v,v=b)):(d=
v,v=b)}else d=v,v=b}else d=v,v=b;return v}function Ua(){var v=d;var A=d;if(u.substr(d,4).toLowerCase()===ze){var Y=u.substr(d,4);d+=4}else Y=b,0===ua&&m(I);if(Y!==b){Y=d;ua++;var ya=M();ua--;ya===b?Y=void 0:(d=Y,Y=b);Y!==b?A="ELSE":(d=A,A=b)}else d=A,A=b;A!==b?(xa(),A=p(),A!==b?v={type:"else-clause",value:A}:(d=v,v=b)):(d=v,v=b);return v}function Oa(){var v=Ta();if(v===b){v=d;if(45===u.charCodeAt(d)){var A=Xb;d++}else A=b,0===ua&&m(Tc);A===b&&(43===u.charCodeAt(d)?(A=Zb,d++):(A=b,0===ua&&m(Kc)));
if(A!==b){var Y=Ta();Y!==b?v=A[0]+Y:(d=v,v=b)}else d=v,v=b}return v}function Sa(){var v=d;if(46===u.charCodeAt(d)){var A=hc;d++}else A=b,0===ua&&m(Be);A!==b?(v=Ta(),v===b&&(v=null),v="."+(null!=v?v:"")):(d=v,v=b);return v}function $a(){var v;var A=v=d;if(Jd.test(u.charAt(d))){var Y=u.charAt(d);d++}else Y=b,0===ua&&m(re);Y!==b?(Kd.test(u.charAt(d))?(A=u.charAt(d),d++):(A=b,0===ua&&m(De)),A===b&&(A=null),A="e"+(null===A?"":A)):(d=A,A=b);A!==b?(Y=Ta(),Y!==b?v=A+Y:(d=v,v=b)):(d=v,v=b);return v}function Ta(){var v=
[];var A=jb();if(A!==b)for(;A!==b;)v.push(A),A=jb();else v=b;v!==b&&(v=v.join(""));return v}function jb(){if(Id.test(u.charAt(d))){var v=u.charAt(d);d++}else v=b,0===ua&&m(Ce);return v}function ib(){var v=d;if(u.substr(d,2).toLowerCase()===qa){var A=u.substr(d,2);d+=2}else A=b,0===ua&&m(He);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="IN":(d=v,v=b)}else d=v,v=b;return v}function lb(){var v=d;if(u.substr(d,2).toLowerCase()===Ca){var A=u.substr(d,2);d+=2}else A=b,0===ua&&m(Ie);
if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="IS":(d=v,v=b)}else d=v,v=b;return v}function c(){var v=d;if(u.substr(d,4).toLowerCase()===Da){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Je);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="LIKE":(d=v,v=b)}else d=v,v=b;return v}function r(){var v=d;if(u.substr(d,3).toLowerCase()===Va){var A=u.substr(d,3);d+=3}else A=b,0===ua&&m(Qd);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="NOT":(d=v,v=
b)}else d=v,v=b;return v}function ea(){var v=d;if(u.substr(d,3).toLowerCase()===mb){var A=u.substr(d,3);d+=3}else A=b,0===ua&&m(Le);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="AND":(d=v,v=b)}else d=v,v=b;return v}function ka(){var v=d;if(u.substr(d,2).toLowerCase()===kb){var A=u.substr(d,2);d+=2}else A=b,0===ua&&m(Me);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="OR":(d=v,v=b)}else d=v,v=b;return v}function va(){var v=d;if(u.substr(d,7).toLowerCase()===
hb){var A=u.substr(d,7);d+=7}else A=b,0===ua&&m(Ne);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="BETWEEN":(d=v,v=b)}else d=v,v=b;return v}function x(){var v=d;if(u.substr(d,4).toLowerCase()===xb){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Oe);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="FROM":(d=v,v=b)}else d=v,v=b;return v}function J(){var v=d;if(u.substr(d,4).toLowerCase()===td){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Rd);if(A!==b){A=d;ua++;var Y=
M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="TRIM":(d=v,v=b)}else d=v,v=b;return v}function da(){var v=d;if(u.substr(d,9).toLowerCase()===vd){var A=u.substr(d,9);d+=9}else A=b,0===ua&&m(Te);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="TIMESTAMP":(d=v,v=b)}else d=v,v=b;return v}function V(){var v=d;if(u.substr(d,4).toLowerCase()===wd){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(cc);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="DATE":(d=v,v=b)}else d=v,v=b;
return v}function ia(){var v=d;if(u.substr(d,8).toLowerCase()===oc){var A=u.substr(d,8);d+=8}else A=b,0===ua&&m(Pc);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="INTERVAL":(d=v,v=b)}else d=v,v=b;return v}function na(){var v=d;if(u.substr(d,4).toLowerCase()===we){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Oc);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="YEAR":(d=v,v=b)}else d=v,v=b;return v}function ra(){var v=d;if(u.substr(d,5).toLowerCase()===pc){var A=
u.substr(d,5);d+=5}else A=b,0===ua&&m(qd);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="MONTH":(d=v,v=b)}else d=v,v=b;return v}function S(){var v=d;if(u.substr(d,3).toLowerCase()===Tb){var A=u.substr(d,3);d+=3}else A=b,0===ua&&m(Ue);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="DAY":(d=v,v=b)}else d=v,v=b;return v}function ca(){var v=d;if(u.substr(d,4).toLowerCase()===gd){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Ve);if(A!==b){A=d;ua++;var Y=M();ua--;
Y===b?A=void 0:(d=A,A=b);A!==b?v="HOUR":(d=v,v=b)}else d=v,v=b;return v}function pa(){var v=d;if(u.substr(d,6).toLowerCase()===Hc){var A=u.substr(d,6);d+=6}else A=b,0===ua&&m(pd);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="MINUTE":(d=v,v=b)}else d=v,v=b;return v}function wa(){var v=d;if(u.substr(d,6).toLowerCase()===Ic){var A=u.substr(d,6);d+=6}else A=b,0===ua&&m(We);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="SECOND":(d=v,v=b)}else d=v,v=b;return v}
function Ba(){var v=d;if(u.substr(d,4).toLowerCase()===Jc){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(Xe);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="CASE":(d=v,v=b)}else d=v,v=b;return v}function La(){var v=d;if(u.substr(d,3).toLowerCase()===qc){var A=u.substr(d,3);d+=3}else A=b,0===ua&&m(Za);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="END":(d=v,v=b)}else d=v,v=b;return v}function Ja(){var v=d;if(u.substr(d,4).toLowerCase()===xe){var A=u.substr(d,
4);d+=4}else A=b,0===ua&&m(a);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="WHEN":(d=v,v=b)}else d=v,v=b;return v}function Pa(){var v=d;if(u.substr(d,4).toLowerCase()===ye){var A=u.substr(d,4);d+=4}else A=b,0===ua&&m(g);if(A!==b){A=d;ua++;var Y=M();ua--;Y===b?A=void 0:(d=A,A=b);A!==b?v="THEN":(d=v,v=b)}else d=v,v=b;return v}function Qa(){if(44===u.charCodeAt(d)){var v=rb;d++}else v=b,0===ua&&m(fa);return v}function Ga(){if(40===u.charCodeAt(d)){var v=Rc;d++}else v=b,0===ua&&
m(la);return v}function Ra(){if(41===u.charCodeAt(d)){var v=Eb;d++}else v=b,0===ua&&m(ta);return v}function xa(){var v;var A=[];for(v=vb();v!==b;)A.push(v),v=vb();return A}function vb(){if(yb.test(u.charAt(d))){var v=u.charAt(d);d++}else v=b,0===ua&&m(Aa);return v}function ub(v,A,Y,ya){v={type:"binary-expression",operator:v,left:A,right:Y};void 0!==ya&&(v.escape=ya);return v}function qb(v,A){for(var Y=0;Y<A.length;Y++)v=ub(A[Y][1],v,A[Y][3]);return v}k=void 0!==k?k:{};var b={},gb=k.grammarSource,
db={start:y},Gb=y,Pb="!",nb="\x3d",Wb="\x3e\x3d",oa="\x3e",Yb="\x3c\x3d",Sb="\x3c\x3e",zb="\x3c",Kb="!\x3d",Zb="+",Xb="-",kc="||",Hb="*",Rb="/",fb="@",Ab="'",Bb="N'",Ya="''",hc=".",T="null",ha="true",X="false",qa="in",Ca="is",Da="like",Na="escape",Va="not",mb="and",kb="or",hb="between",xb="from",Ib="for",rd="substring",sd="extract",td="trim",ud="position",vd="timestamp",wd="date",xd="leading",yd="trailing",zd="both",ve="cast",Ad="as",Bd="integer",Cd="smallint",Dd="float",ic="real",Qc="varchar",nc=
"to",oc="interval",we="year",pc="month",Tb="day",gd="hour",Hc="minute",Ic="second",Jc="case",qc="end",xe="when",ye="then",ze="else",rb=",",Rc="(",Eb=")",hd="`",Fd=/^[A-Za-z_\x80-\uFFFF]/,Gd=/^[A-Za-z0-9_]/,Hd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sc=/^[^']/,Id=/^[0-9]/,Jd=/^[eE]/,Kd=/^[+\-]/,yb=/^[ \t\n\r]/,kd=/^[^`]/,jd=n("!",!1),id=n("\x3d",!1),md=n("\x3e\x3d",!1),ld=n("\x3e",!1),oe=n("\x3c\x3d",!1),Ed=n("\x3c\x3e",!1),qe=n("\x3c",!1),pe=n("!\x3d",!1),Kc=n("+",!1),Tc=n("-",!1),Fb=n("||",!1),Qb=n("*",!1),
Ld=n("/",!1),Md=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Uc=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Vc=n("@",!1),Od=n("'",!1),Ae=n("N'",!1),Wc=n("''",!1),Pd=H(["'"],!0,!1),Be=n(".",!1),Ce=H([["0","9"]],!1,!1),re=H(["e","E"],!1,!1),De=H(["+","-"],!1,!1),Ee=n("NULL",!0),Fe=n("TRUE",!0),Ge=n("FALSE",!0),He=n("IN",!0),Ie=n("IS",!0),Je=n("LIKE",!0),Ke=n("ESCAPE",!0),Qd=n("NOT",!0),Le=n("AND",!0),Me=n("OR",!0),Ne=
n("BETWEEN",!0),Oe=n("FROM",!0),Pe=n("FOR",!0),Qe=n("SUBSTRING",!0),Re=n("EXTRACT",!0),Rd=n("TRIM",!0),Se=n("POSITION",!0),Te=n("TIMESTAMP",!0),cc=n("DATE",!0),se=n("LEADING",!0),eb=n("TRAILING",!0),wb=n("BOTH",!0),lc=n("CAST",!0),Lc=n("AS",!0),nd=n("INTEGER",!0),te=n("SMALLINT",!0),od=n("FLOAT",!0),Mc=n("REAL",!0),ue=n("VARCHAR",!0),Nc=n("TO",!0),Pc=n("INTERVAL",!0),Oc=n("YEAR",!0),qd=n("MONTH",!0),Ue=n("DAY",!0),Ve=n("HOUR",!0),pd=n("MINUTE",!0),We=n("SECOND",!0),Xe=n("CASE",!0),Za=n("END",!0),
a=n("WHEN",!0),g=n("THEN",!0),I=n("ELSE",!0),fa=n(",",!1),la=n("(",!1),ta=n(")",!1),Aa=H([" ","\t","\n","\r"],!1,!1),Ia=n("`",!1),Ma=H(["`"],!0,!1),d=0,Wa=[{line:1,column:1}],Xa=0,bb=[],ua=0;if("startRule"in k){if(!(k.startRule in db))throw Error("Can't start parsing from rule \""+k.startRule+'".');Gb=db[k.startRule]}var $b=Gb();if($b!==b&&d===u.length)return $b;$b!==b&&d<u.length&&m({type:"end"});throw function(v,A,Y){return new Q(Q.buildMessage(v,A),v,A,Y)}(bb,Xa<u.length?u.charAt(Xa):null,Xa<u.length?
K(Xa,Xa+1):K(Xa,Xa));}}})})({get exports(){return ma},set exports(R){ma=R}});let Z=function(){function R(){}R.parse=function(Q){return ma.parse(Q)};return R}();l.WhereGrammar=Z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(l){l.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.getDefaultExportFromCjs=
function(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,
maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m,y){function e(U,aa,G,q){const w=q.x-G.x;q=q.y-G.y;aa=Math.min(1,Math.max(0,((aa.x-G.x)*w+(aa.y-G.y)*q)/(w*w+q*q)));U.x=G.x+w*aa;U.y=G.y+q*aa}function p(U,aa){return U?aa?4:3:aa?3:2}let L=function(){function U(G,q,w){this.items=G;this.query=q;this.geometryType=w.geometryType;this.hasM=w.hasM;this.hasZ=w.hasZ;this.fieldsIndex=w.fieldsIndex;this.objectIdField=w.objectIdField;this.spatialReference=w.spatialReference;this.featureAdapter=w.featureAdapter}var aa=U.prototype;
aa.createQueryResponseForCount=function(){const G=new k(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return G.countDistinctValues(this.items);const {groupByFieldsForStatistics:q,having:w,outStatistics:D}=this.query;if(!q?.length)return 1;const O=new Map,C=new Map,E=new Set;for(const B of D){var {statisticType:N}=B;N="exceedslimit"!==N?B.onStatisticField:void 0;if(!C.has(N)){var M=[];for(const z of q){const h=this._getAttributeValues(G,z,O);M.push(h)}C.set(N,this._calculateUniqueValues(M,
G.returnDistinctValues))}N=C.get(N);for(const z in N){const {data:h,items:t}=N[z];M=h.join(",");w&&!G.validateItems(t,w)||E.add(M)}}return E.size};aa.createQueryResponse=function(){var G=ma._asyncToGenerator(function*(){let q;q=this.query.outStatistics?this.query.outStatistics.some(w=>"exceedslimit"===w.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const w=
this.query.geometry;u.isValid(this.query.outSR)&&!u.equals(w.spatialReference,this.query.outSR)?q.queryGeometry=ba.cleanFromGeometryEngine({spatialReference:this.query.outSR,...n.project(w,w.spatialReference,this.query.outSR)}):q.queryGeometry=ba.cleanFromGeometryEngine({spatialReference:this.query.outSR,...w})}return q});return function(){return G.apply(this,arguments)}}();aa.createSnappingResponse=function(G,q){const w=this.featureAdapter,D=p(this.hasZ,this.hasM),{point:O,mode:C}=G,E="number"===
typeof G.distance?G.distance:G.distance.x,N="number"===typeof G.distance?G.distance:G.distance.y,M={candidates:[]},B="esriGeometryPolygon"===this.geometryType;q=this._getPointCreator(C,this.spatialReference,q);const z=new W(null,0),h=new W(null,0),t={x:0,y:0,z:0};for(const Fa of this.items){var P=w.getGeometry(Fa);if(Z.isNone(P))continue;const {coords:Ua,lengths:Oa}=P;z.coords=Ua;h.coords=Ua;if(G.types&f.SnappingTypes.EDGE){P=0;for(var ja=0;ja<Oa.length;ja++){var sa=Oa[ja];for(var za=0;za<sa;za++,
P+=D){var Ea=z;Ea.coordsIndex=P;if(za!==sa-1){const Sa=h;Sa.coordsIndex=P+D;const $a=t;e(t,O,Ea,Sa);var Ha=(O.x-$a.x)/E;const Ta=(O.y-$a.y)/N;Ha=Ha*Ha+Ta*Ta;1>=Ha&&M.candidates.push(H.makeEdgeCandidate(w.getObjectId(Fa),q($a),Math.sqrt(Ha),q(Ea),q(Sa)))}}}}if(G.types&f.SnappingTypes.VERTEX)for(P=B?Ua.length-D:Ua.length,ja=0;ja<P;ja+=D)sa=z,sa.coordsIndex=ja,za=(O.x-sa.x)/E,Ea=(O.y-sa.y)/N,za=za*za+Ea*Ea,1>=za&&M.candidates.push(H.makeVertexCandidate(w.getObjectId(Fa),q(sa),Math.sqrt(za)))}M.candidates.sort((Fa,
Ua)=>Fa.distance-Ua.distance);return M};aa._getPointCreator=function(G,q,w){const D=Z.isSome(w)&&!u.equals(q,w)?C=>n.project(C,q,w):C=>C,{hasZ:O}=this;return"3d"===G?O?({x:C,y:E,z:N})=>D({x:C,y:E,z:N}):({x:C,y:E})=>D({x:C,y:E,z:0}):({x:C,y:E})=>D({x:C,y:E})};aa.createSummaryStatisticsResponse=function(){var G=ma._asyncToGenerator(function*(q){const {field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,minValue:N,maxValue:M,scale:B}=q;q=this.fieldsIndex.isDateField(w);
var z=yield this._getDataValues({field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,scale:B});const h=m.isNullCountSupported({normalizationType:C,normalizationField:O,minValue:N,maxValue:M}),t=this.fieldsIndex.get(w),P={value:.5,fieldType:t?.type};z=K.isStringField(t)?m.calculateStringStatistics({values:z,supportsNullCount:h,percentileParams:P}):m.calculateStatistics({values:z,minValue:N,maxValue:M,useSampleStdDev:!C,supportsNullCount:h,percentileParams:P});return m.processSummaryStatisticsResult(z,
q)});return function(q){return G.apply(this,arguments)}}();aa.createUniqueValuesResponse=function(){var G=ma._asyncToGenerator(function*(q){const {field:w,valueExpression:D,domains:O,returnAllCodedValues:C,scale:E}=q;var N=yield this._getDataValues({field:w,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,valueExpression:D,scale:E});N=m.calculateUniqueValuesCount(N);return m.createUVResult(N,O,C,q.fieldDelimiter)});return function(q){return G.apply(this,arguments)}}();aa.createClassBreaksResponse=
function(){var G=ma._asyncToGenerator(function*(q){const {field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,classificationMethod:N,standardDeviationInterval:M,minValue:B,maxValue:z,numClasses:h,scale:t}=q;q=yield this._getDataValues({field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,scale:t});q=m.calculateClassBreaks(q,{field:w,normalizationField:O,normalizationType:C,normalizationTotal:E,classificationMethod:N,standardDeviationInterval:M,
minValue:B,maxValue:z,numClasses:h});return m.resolveCBResult(q,N)});return function(q){return G.apply(this,arguments)}}();aa.createHistogramResponse=function(){var G=ma._asyncToGenerator(function*(q){const {field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,classificationMethod:N,standardDeviationInterval:M,minValue:B,maxValue:z,numBins:h,scale:t}=q;q=yield this._getDataValues({field:w,valueExpression:D,normalizationField:O,normalizationType:C,normalizationTotal:E,
scale:t});return m.calculateHistogram(q,{field:w,normalizationField:O,normalizationType:C,normalizationTotal:E,classificationMethod:N,standardDeviationInterval:M,minValue:B,maxValue:z,numBins:h})});return function(q){return G.apply(this,arguments)}}();aa._sortFeatures=function(G,q,w){if(1<G.length&&q&&q.length)for(const D of q.reverse()){q=D.split(" ");const O=q[0],C=this.fieldsIndex.get(O);q=q[1]?"desc"===q[1].toLowerCase():!1;const E=m.getAttributeComparator(C?.type,q);G.sort((N,M)=>{N=w(N,O,C);
M=w(M,O,C);return E(N,M)})}};aa._createFeatureQueryResponse=function(G){const q=this.items,{geometryType:w,hasM:D,hasZ:O,objectIdField:C,spatialReference:E}=this,{outFields:N,outSR:M,quantizationParameters:B,resultRecordCount:z,resultOffset:h,returnZ:t,returnM:P}=G,ja=null!=z?q.length>(h||0)+z:!1,sa=N&&(N.includes("*")?[...this.fieldsIndex.fields]:N.map(za=>this.fieldsIndex.get(za)));return{exceededTransferLimit:ja,features:this._createFeatures(G,q),fields:sa,geometryType:w,hasM:D&&P,hasZ:O&&t,objectIdFieldName:C,
spatialReference:ba.cleanFromGeometryEngine(M?M:E),transform:B&&F.toQuantizationTransform(B)||null}};aa._createFeatures=function(G,q){const w=new k(G,this.featureAdapter,this.fieldsIndex),{hasM:D,hasZ:O}=this,{orderByFields:C,quantizationParameters:E,returnGeometry:N,returnCentroid:M,maxAllowableOffset:B,resultOffset:z,resultRecordCount:h,returnZ:t=!1,returnM:P=!1}=G,ja=O&&t,sa=D&&P;G=[];var za=0;q=[...q];this._sortFeatures(q,C,(Fa,Ua,Oa)=>w.getFieldValue(Fa,Ua,Oa));if(N||M){var Ea=F.toQuantizationTransform(E)??
void 0;if(N&&!M)for(var Ha of q)G[za++]={attributes:w.getAttributes(Ha),geometry:ba.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ha),B,Ea,ja,sa)};else if(!N&&M)for(const Fa of q)G[za++]={attributes:w.getAttributes(Fa),centroid:ba.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea)};else for(const Fa of q)G[za++]={attributes:w.getAttributes(Fa),centroid:ba.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea),geometry:ba.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Fa),B,Ea,ja,sa)}}else for(Ea of q)(Ha=w.getAttributes(Ea))&&(G[za++]={attributes:Ha});za=z||0;null!=h&&(G=G.slice(za,Math.min(G.length,za+h)));return G};aa._createExceedsLimitQueryResponse=function(G){var q=!1;let w=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;q=Number.POSITIVE_INFINITY;for(const O of G.outStatistics??[])if("exceedslimit"===O.statisticType){w=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;D=null!=O.maxRecordCount?
O.maxRecordCount:Number.POSITIVE_INFINITY;q=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)q=this.items.length>w;else if(this.items.length>D)q=!0;else{G=p(this.hasZ,this.hasM);const O=this.featureAdapter;q=this.items.reduce((C,E)=>{E=O.getGeometry(E);return C+(Z.isSome(E)&&E.coords.length||0)},0)/G>q}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(q)}}]}};aa._createStatisticsQueryResponse=function(){var G=ma._asyncToGenerator(function*(q){var w={attributes:{}};const D=[],O=new Map,C=new Map,E=new Map,N=new Map,M=new k(q,this.featureAdapter,this.fieldsIndex);var B=q.outStatistics;const {groupByFieldsForStatistics:z,having:h,orderByFields:t}=q;q=z&&z.length;const P=!!q,ja=P?z[0]:null,sa=P&&!this.fieldsIndex.get(ja);for(const Ua of B??[]){const {outStatisticFieldName:Oa,statisticType:Sa}=Ua;B=Ua;var za=
"exceedslimit"!==Sa?Ua.onStatisticField:void 0;const $a="percentile_disc"===Sa||"percentile_cont"===Sa,Ta="EnvelopeAggregate"===Sa||"CentroidAggregate"===Sa||"ConvexHullAggregate"===Sa,jb=P&&1===q&&(za===ja||sa)&&"count"===Sa;if(P){if(!E.has(za)){var Ea=[];for(const ib of z){var Ha=this._getAttributeValues(M,ib,O);Ea.push(Ha)}E.set(za,this._calculateUniqueValues(Ea,Ta?!1:M.returnDistinctValues))}Ea=E.get(za);for(const ib in Ea){const {count:lb,data:c,items:r,itemPositions:ea}=Ea[ib];Ha=c.join(",");
if(!h||M.validateItems(r,h)){const ka=N.get(Ha)||{attributes:{}};if(Ta){ka.aggregateGeometries||(ka.aggregateGeometries={});const {aggregateGeometries:x,outStatisticFieldName:J}=yield this._getAggregateGeometry(B,r);ka.aggregateGeometries[J]=x}else{var Fa=null;if(jb)Fa=lb;else{const x=this._getAttributeValues(M,za,O);Fa=ea.map(J=>x[J]);Fa=$a&&"statisticParameters"in B?this._getPercentileValue(B,Fa):this._getStatisticValue(B,Fa,null,M.returnDistinctValues)}ka.attributes[Oa]=Fa}let va=0;z.forEach((x,
J)=>ka.attributes[this.fieldsIndex.get(x)?x:`EXPR_${++va}`]=c[J]);N.set(Ha,ka)}}}else if(Ta){w.aggregateGeometries||(w.aggregateGeometries={});const {aggregateGeometries:ib,outStatisticFieldName:lb}=yield this._getAggregateGeometry(B,this.items);w.aggregateGeometries[lb]=ib}else za=this._getAttributeValues(M,za,O),w.attributes[Oa]=$a&&"statisticParameters"in B?this._getPercentileValue(B,za):this._getStatisticValue(B,za,C,M.returnDistinctValues);D.push({name:Oa,alias:Oa,type:"esriFieldTypeDouble"})}w=
P?Array.from(N.values()):[w];this._sortFeatures(w,t,(Ua,Oa)=>Ua.attributes[Oa]);return{fields:D,features:w}});return function(q){return G.apply(this,arguments)}}();aa._getAggregateGeometry=function(){var G=ma._asyncToGenerator(function*(q,w){var D=yield new Promise((t,P)=>l(["../../../geometry/geometryEngineJSON"],t,P));const {statisticType:O,outStatisticFieldName:C}=q,{featureAdapter:E,spatialReference:N,geometryType:M,hasZ:B,hasM:z}=this;w=w.map(t=>ba.getGeometry(M,B,z,E.getGeometry(t)));const h=
D.convexHull(N,w,!0)[0];q={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===O?(D=h?Q.getPolygonExtent(h):Q.getGeometryExtent(D.union(N,w)),q.aggregateGeometries={...D,spatialReference:N},q.outStatisticFieldName=C||"extent"):"CentroidAggregate"===O?(D=h?R.polygonCentroid(h):R.extentCentroid(Q.getGeometryExtent(D.union(N,w))),q.aggregateGeometries={x:D[0],y:D[1],spatialReference:N},q.outStatisticFieldName=C||"centroid"):"ConvexHullAggregate"===O&&(q.aggregateGeometries=h,q.outStatisticFieldName=
C||"convexHull");return q});return function(q,w){return G.apply(this,arguments)}}();aa._getStatisticValue=function(G,q,w,D){const {onStatisticField:O,statisticType:C}=G;G=null;G=w?.has(O)?w.get(O):K.isStringField(this.fieldsIndex.get(O))?m.calculateStringStatistics({values:q,returnDistinct:D}):m.calculateStatistics({values:D?[...(new Set(q))]:q,minValue:null,maxValue:null,useSampleStdDev:!0});w&&w.set(O,G);return G["var"===C?"variance":C]};aa._getPercentileValue=function(G,q){const {onStatisticField:w,
statisticParameters:D,statisticType:O}=G,{value:C,orderBy:E}=D;G=this.fieldsIndex.get(w);return m.calculatePercentile(q,{value:C,orderBy:E,fieldType:G?.type,isDiscrete:"percentile_disc"===O})};aa._getAttributeValues=function(G,q,w){if(w.has(q))return w.get(q);const D=this.fieldsIndex.get(q),O=this.items.map(C=>G.getFieldValue(C,q,D));w.set(q,O);return O};aa._getAttributeDataValues=function(G,q){return this.items.map(w=>G.getDataValue(w,{field:q.field,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,
normalizationField:q.normalizationField,normalizationType:q.normalizationType,normalizationTotal:q.normalizationTotal}))};aa._getAttributeExpressionValues=function(){var G=ma._asyncToGenerator(function*(q,w,D){const {arcadeUtils:O}=yield y.loadArcade();w=O.createFunction(w);D=D&&O.getViewInfo(D);return q.getExpressionValues(this.items,w,D,O)});return function(q,w,D){return G.apply(this,arguments)}}();aa._calculateUniqueValues=function(G,q){const w={},D=this.items,O=D.length;for(let C=0;C<O;C++){const E=
D[C],N=[];for(const B of G)N.push(B[C]);const M=N.join(",");null==w[M]?w[M]={count:1,data:N,items:[E],itemPositions:[C]}:(q||w[M].count++,w[M].items.push(E),w[M].itemPositions.push(C))}return w};aa._getDataValues=function(){var G=ma._asyncToGenerator(function*(q){const w=new k(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:D,field:O,normalizationField:C,normalizationType:E,normalizationTotal:N,scale:M}=q,B=D?{viewingMode:"map",scale:M,spatialReference:this.query.outSR||this.spatialReference}:
null;return D?this._getAttributeExpressionValues(w,D,B):this._getAttributeDataValues(w,{field:O,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,normalizationField:C,normalizationType:E,normalizationTotal:N})});return function(q){return G.apply(this,arguments)}}();ma._createClass(U,[{key:"size",get:function(){return this.items.length}}]);return U}();f.SnappingTypes=void 0;(function(U){U[U.NONE=0]="NONE";U[U.EDGE=1]="EDGE";U[U.VERTEX=2]="VERTEX"})(f.SnappingTypes||(f.SnappingTypes={}));
let W=function(){function U(aa,G){this.coords=aa;this.coordsIndex=G}ma._createClass(U,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return U}();f.QueryEngineResult=L;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,f,ma){function Z({scale:C,
translate:E},N){return Math.round((N-E[0])/C[0])}function R({scale:C,translate:E},N){return Math.round((E[1]-N)/C[1])}function Q(C,E,N){const M=[];let B,z,h,t;for(let P=0;P<N.length;P++){const ja=N[P];if(0<P){if(h=Z(C,ja[0]),t=R(C,ja[1]),h!==B||t!==z)M.push(E(ja,h-B,t-z)),B=h,z=t}else B=Z(C,ja[0]),z=R(C,ja[1]),M.push(E(ja,B,z))}return 0<M.length?M:null}function F(C,E,N,M){return Q(C,N?M?O:D:M?D:w,E)}function u(C,E,N,M){const B=[];N=N?M?O:D:M?D:w;for(M=0;M<E.length;M++){const z=Q(C,N,E[M]);z&&3<=z.length&&
B.push(z)}return B.length?B:null}function k(C,E,N,M){const B=[];N=N?M?O:D:M?D:w;for(M=0;M<E.length;M++){const z=Q(C,N,E[M]);z&&2<=z.length&&B.push(z)}return B.length?B:null}function n({scale:C,translate:E},N){return N*C[0]+E[0]}function H({scale:C,translate:E},N){return E[1]-N*C[1]}function ba(C,E,N){const M=Array(N.length);if(!N.length)return M;const [B,z]=C.scale;let h=n(C,N[0][0]);C=H(C,N[0][1]);M[0]=E(N[0],h,C);for(let t=1;t<N.length;t++){const P=N[t];h+=P[0]*B;C-=P[1]*z;M[t]=E(P,h,C)}return M}
function K(C,E,N){const M=Array(N.length);for(let B=0;B<N.length;B++)M[B]=ba(C,E,N[B]);return M}function m(C,E,N,M){return ba(C,N?M?O:D:M?D:w,E)}function y(C,E,N,M){return K(C,N?M?O:D:M?D:w,E)}function e(C,E,N,M){return K(C,N?M?O:D:M?D:w,E)}function p(C,E,N){let [M,B]=N[0],z=Math.min(M,E[0]),h=Math.min(B,E[1]),t=Math.max(M,E[2]);E=Math.max(B,E[3]);for(let P=1;P<N.length;P++){const [ja,sa]=N[P];M+=ja;B+=sa;0>ja&&(z=Math.min(z,M));0<ja&&(t=Math.max(t,M));0>sa?h=Math.min(h,B):0<sa&&(E=Math.max(E,B))}C[0]=
z;C[1]=h;C[2]=t;C[3]=E;return C}function L(C,E){if(!E.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let N=0;N<E.length;N++)p(C,C,E[N]);return C}function W(C,E,N,M,B){E.xmin=Z(C,N.xmin);E.ymin=R(C,N.ymin);E.xmax=Z(C,N.xmax);E.ymax=R(C,N.ymax);E!==N&&(M&&(E.zmin=N.zmin,E.zmax=N.zmax),B&&(E.mmin=N.mmin,E.mmax=N.mmax));return E}function U(C,E,N,M,B){E.points=F(C,N.points,M,B)??[];return E}function aa(C,E,N,M,B){E.x=Z(C,N.x);E.y=R(C,N.y);E!==N&&(M&&(E.z=N.z),
B&&(E.m=N.m));return E}function G(C,E,N,M,B){C=u(C,N.rings,M,B);if(!C)return null;E.rings=C;return E}function q(C,E,N,M,B){C=k(C,N.paths,M,B);if(!C)return null;E.paths=C;return E}const w=(C,E,N)=>[E,N],D=(C,E,N)=>[E,N,C[2]],O=(C,E,N)=>[E,N,C[2],C[3]];l.equals=function(C,E){if(C===E||null==C&&null==E)return!0;if(null==C||null==E)return!1;let N,M,B,z;C&&"upperLeft"===C.originPosition?(N=C.translate[0],M=C.translate[1],C=C.scale[0]):(N=f.isSome(C.extent)?C.extent.xmin:0,M=f.isSome(C.extent)?C.extent.ymax:
0,C=C.tolerance);E&&"upperLeft"===E.originPosition?(B=E.translate[0],z=E.translate[1],E=E.scale[0]):(B=f.isSome(E.extent)?E.extent.xmin:0,z=f.isSome(E.extent)?E.extent.ymax:0,E=E.tolerance);return N===B&&M===z&&C===E};l.getQuantizedBoundsCoordsArray=p;l.getQuantizedBoundsCoordsArrayArray=L;l.getQuantizedBoundsPaths=function(C){return L([0,0,0,0],C)};l.getQuantizedBoundsPoints=function(C){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return p(E,E,C)};l.getQuantizedBoundsRings=function(C){return L([0,0,0,0],C)};l.quantizeBounds=function(C,E,N){E[0]=Z(C,N[0]);E[3]=R(C,N[1]);E[2]=Z(C,N[2]);E[1]=R(C,N[3]);return E};l.quantizeExtent=W;l.quantizeGeometry=function(C,E){return C&&E?ma.isPoint(E)?aa(C,{},E,!1,!1):ma.isPolyline(E)?q(C,{},E,!1,!1):ma.isPolygon(E)?G(C,{},E,!1,!1):ma.isMultipoint(E)?U(C,{},E,!1,!1):ma.isExtent(E)?W(C,{},E,!1,!1):null:null};l.quantizeMultipoint=U;l.quantizePaths=k;l.quantizePoint=aa;l.quantizePoints=F;l.quantizePolygon=
G;l.quantizePolyline=q;l.quantizeRings=u;l.quantizeX=Z;l.quantizeY=R;l.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":C.originPosition,scale:C.tolerance?[C.tolerance,C.tolerance]:[1,1],translate:f.isSome(C.extent)?[C.extent.xmin,C.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(C,E,N){return N?(E[0]=n(C,N[0]),E[1]=H(C,N[3]),E[2]=n(C,N[2]),E[3]=H(C,N[1]),E):[n(C,E[0]),H(C,E[3]),n(C,E[2]),H(C,
E[1])]};l.unquantizeCoordsArray=ba;l.unquantizeCoordsArrayArray=K;l.unquantizeExtent=function(C,E,N,M,B){E.xmin=n(C,N.xmin);E.ymin=H(C,N.ymin);E.xmax=n(C,N.xmax);E.ymax=H(C,N.ymax);E!==N&&(M&&(E.zmin=N.zmin,E.zmax=N.zmax),B&&(E.mmin=N.mmin,E.mmax=N.mmax));return E};l.unquantizeMultipoint=function(C,E,N,M,B){f.isSome(N)&&(E.points=m(C,N.points,M,B));return E};l.unquantizePaths=y;l.unquantizePoint=function(C,E,N,M,B){if(f.isNone(N))return E;E.x=n(C,N.x);E.y=H(C,N.y);E!==N&&(M&&(E.z=N.z),B&&(E.m=N.m));
return E};l.unquantizePoints=m;l.unquantizePolygon=function(C,E,N,M,B){f.isSome(N)&&(E.rings=e(C,N.rings,M,B));return E};l.unquantizePolyline=function(C,E,N,M,B){f.isSome(N)&&(E.paths=y(C,N.paths,M,B));return E};l.unquantizeRings=e;l.unquantizeX=n;l.unquantizeY=H;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(l,f,ma){return function(){function Z(Q,
F,u){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=Q.returnDistinctValues??!1;this.fieldsIndex=u;this.featureAdapter=F;if((F=Q.outFields)&&!F.includes("*")){this.outFields=F;Q=0;for(const n of F){var k=f.getExpressionFromFieldName(n);k=(F=this.fieldsIndex.get(k))?null:f.getWhereClause(k,u);F=F?F.name:f.getAliasFromFieldName(n)||`FIELD_EXP_${Q++}`;this._fieldDataCache.set(n,{alias:F,clause:k})}}}var R=Z.prototype;R.countDistinctValues=function(Q){if(!this.returnDistinctValues)return Q.length;
Q.forEach(F=>this.getAttributes(F));return this._returnDistinctMap.size};R.getAttributes=function(Q){Q=this._processAttributesForOutFields(Q);return this._processAttributesForDistinctValues(Q)};R.getFieldValue=function(Q,F,u){const k=u?u.name:F;let n=null;this._fieldDataCache.has(k)?n=this._fieldDataCache.get(k)?.clause:u||(n=f.getWhereClause(F,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:n}));return u?this.featureAdapter.getAttribute(Q,k):n?.calculateValue(Q,this.featureAdapter)};
R.getDataValue=function(Q,F){const u=F.normalizationType,k=F.normalizationTotal;let n=F.field&&this.getFieldValue(Q,F.field,this.fieldsIndex.get(F.field));F.field2&&(n=`${ma.processNullValue(n)}${F.fieldDelimiter}${ma.processNullValue(this.getFieldValue(Q,F.field2,this.fieldsIndex.get(F.field2)))}`,F.field3&&(n=`${n}${F.fieldDelimiter}${ma.processNullValue(this.getFieldValue(Q,F.field3,this.fieldsIndex.get(F.field3)))}`));u&&Number.isFinite(n)&&(Q="field"===u&&F.normalizationField?this.getFieldValue(Q,
F.normalizationField,this.fieldsIndex.get(F.normalizationField)):null,n=ma.getNormalizedValue(n,u,Q,k));return n};R.getExpressionValue=function(Q,F,u,k){Q={attributes:this.featureAdapter.getAttributes(Q),layer:{fields:this.fieldsIndex.fields}};u=k.createExecContext(Q,u);return k.executeFunction(F,u)};R.getExpressionValues=function(Q,F,u,k){const n={fields:this.fieldsIndex.fields};return Q.map(H=>{H={attributes:this.featureAdapter.getAttributes(H),layer:n};H=k.createExecContext(H,u);return k.executeFunction(F,
H)})};R.validateItem=function(Q,F){this._fieldDataCache.has(F)||this._fieldDataCache.set(F,{alias:F,clause:f.getWhereClause(F,this.fieldsIndex)});return this._fieldDataCache.get(F)?.clause?.testFeature(Q,this.featureAdapter)??!1};R.validateItems=function(Q,F){this._fieldDataCache.has(F)||this._fieldDataCache.set(F,{alias:F,clause:f.getWhereClause(F,this.fieldsIndex)});return this._fieldDataCache.get(F)?.clause?.testSet(Q,this.featureAdapter)??!1};R._processAttributesForOutFields=function(Q){const F=
this.outFields;if(!F||!F.length)return this.featureAdapter.getAttributes(Q);const u={};for(const k of F){const {alias:n,clause:H}=this._fieldDataCache.get(k);u[n]=H?H.calculateValue(Q,this.featureAdapter):this.featureAdapter.getAttribute(Q,n)}return u};R._processAttributesForDistinctValues=function(Q){if(l.isNone(Q)||!this.returnDistinctValues)return Q;var F=this.outFields,u=[];if(F)for(const n of F){var {alias:k}=this._fieldDataCache.get(n);u.push(Q[k])}else for(k in Q)u.push(Q[k]);F=`${(F||["*"]).join(",")}=${u.join(",")}`;
u=this._returnDistinctMap.get(F)||0;this._returnDistinctMap.set(F,++u);return 1<u?null:Q};return Z}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,f,ma){function Z(q){return null==q||"string"===typeof q&&!q?"\x3cNull\x3e":q}function R(q){const w=null!=q.minValue||null!=q.maxValue,D=!!q.sqlExpression&&q.supportsSQLExpression;return!(null!=q.normalizationField||null!=q.normalizationType)&&!w&&!D}function Q(q){const {values:w,
useSampleStdDev:D,supportsNullCount:O}=q;var C=Number.POSITIVE_INFINITY;let E=Number.NEGATIVE_INFINITY,N=null,M=null;var B=null;let z=null,h=0;const t=null==q.minValue?-Infinity:q.minValue,P=null==q.maxValue?Infinity:q.maxValue;for(const ja of w)Number.isFinite(ja)?ja>=t&&ja<=P&&(N=null===N?ja:N+ja,C=Math.min(C,ja),E=Math.max(E,ja),h++):"string"===typeof ja&&h++;if(h&&null!=N){M=N/h;B=0;for(const ja of w)Number.isFinite(ja)&&ja>=t&&ja<=P&&(B+=(ja-M)**2);z=D?1<h?B/(h-1):0:0<h?B/h:0;B=Math.sqrt(z)}else E=
C=null;C={avg:M,count:h,max:E,min:C,stddev:B,sum:N,variance:z};O&&(C.nullcount=w.length-h);q.percentileParams&&(C.median=F(w,q.percentileParams));return C}function F(q,w){const {fieldType:D,value:O,orderBy:C,isDiscrete:E}=w,N=u(D,"desc"===C);q=[...q].filter(h=>null!=h).sort((h,t)=>N(h,t));if(0===q.length)return null;if(0>=O)return q[0];if(1<=O)return q[q.length-1];var M=(q.length-1)*O,B=Math.floor(M);w=B+1;M%=1;B=q[B];const z=q[w];return w>=q.length||E||"string"===typeof B||"string"===typeof z?B:
B*(1-M)+z*M}function u(q,w){const D=w?1:-1,O=H(w),C=n(w);if(!q||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...aa].includes(q))return(E,N)=>"number"===typeof E&&"number"===typeof N?O(E,N):"string"===typeof E&&"string"===typeof N?C(E,N):D;if("esriFieldTypeDate"===q)return(E,N)=>{E=(new Date(E)).getTime();N=(new Date(N)).getTime();return isNaN(E)||isNaN(N)?D:O(E,N)};if(aa.has(q))return(E,N)=>O(E,N);if("esriFieldTypeString"===q)return(E,N)=>C(E,N);if("esriFieldTypeGUID"===
q||"esriFieldTypeGlobalID"===q){const E=n(w);return(N,M)=>E(ba(N),ba(M))}return w?(E,N)=>1:(E,N)=>-1}function k(q,w,D){if(D){if(null==q)return null==w?0:1;if(null==w)return-1}else{if(null==q)return null==w?0:-1;if(null==w)return 1}return null}function n(q){return q?(w,D)=>{const O=k(w,D,!0);if(null!=O)return O;w=w.toUpperCase();D=D.toUpperCase();return w>D?-1:w<D?1:0}:(w,D)=>{const O=k(w,D,!1);if(null!=O)return O;w=w.toUpperCase();D=D.toUpperCase();return w<D?-1:w>D?1:0}}function H(q){return q?(w,
D)=>{const O=k(w,D,!0);return null!=O?O:D-w}:(w,D)=>{const O=k(w,D,!1);return null!=O?O:w-D}}function ba(q){return q.substr(24,12)+q.substr(19,4)+q.substr(16,2)+q.substr(14,2)+q.substr(11,2)+q.substr(9,2)+q.substr(6,2)+q.substr(4,2)+q.substr(2,2)+q.substr(0,2)}function K(q){return"coded-value"!==q?.type?[]:q.codedValues.map(w=>w.code)}function m(q,w){const D=e({field:w.field,normalizationType:w.normalizationType,normalizationField:w.normalizationField,classificationMethod:w.classificationMethod,standardDeviationInterval:w.standardDeviationInterval,
breakCount:w.numClasses||5});q=y(q,w.minValue,w.maxValue);return ma.createGenerateRendererClassBreaks({definition:D,values:q,normalizationTotal:w.normalizationTotal})}function y(q,w,D){const O=null==w?-Infinity:w,C=null==D?Infinity:D;return q.filter(E=>Number.isFinite(E)&&E>=O&&E<=C)}function e(q){const {breakCount:w,field:D,normalizationField:O,normalizationType:C}=q,E=q.classificationMethod||"equal-interval";return new f({breakCount:w,classificationField:D,classificationMethod:E,normalizationField:"field"===
C?O:void 0,normalizationType:C,standardDeviationInterval:"standard-deviation"===E?q.standardDeviationInterval||1:void 0})}function p(q,w){const {field:D,classificationMethod:O,standardDeviationInterval:C,normalizationType:E,normalizationField:N,normalizationTotal:M,minValue:B,maxValue:z}=w,h=w.numBins||10;let t=w=null,P=null;O&&"equal-interval"!==O||E?({classBreaks:q}=m(q,{field:D,normalizationType:E,normalizationField:N,normalizationTotal:M,classificationMethod:O,standardDeviationInterval:C,minValue:B,
maxValue:z,numClasses:h}),w=q[0].minValue,t=q[q.length-1].maxValue,P=q.map(ja=>[ja.minValue,ja.maxValue])):(null!=B&&null!=z?(w=B,t=z):(q=Q({values:q,minValue:B,maxValue:z,useSampleStdDev:!E,supportsNullCount:R({normalizationType:E,normalizationField:N,minValue:B,maxValue:z})}),w=q.min??null,t=q.max??null),P=W(w??0,t??0,h));return{min:w,max:t,intervals:P}}function L(q,w){let D=-1;for(let O=q.length-1;0<=O;O--)if(w>=q[O][0]){D=O;break}return D}function W(q,w,D){const O=(w-q)/D,C=[];let E;for(let N=
1;N<=D;N++)E=q+O,E=Number(E.toFixed(16)),C.push([q,N===D?w:E]),q=E;return C}const U=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,aa=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),G="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=m;l.calculateHistogram=function(q,w){var D=p(q,w);const O=D.intervals,C=D.min??0;D=D.max??0;const E=O.map((N,M)=>({minValue:O[M][0],maxValue:O[M][1],count:0}));for(const N of q)null!=
N&&N>=C&&N<=D&&(q=L(O,N),-1<q&&E[q].count++);return{bins:E,minValue:C,maxValue:D,normalizationTotal:w.normalizationTotal}};l.calculatePercentile=F;l.calculateStatistics=Q;l.calculateStringStatistics=function(q){const w=q.returnDistinct?[...(new Set(q.values))]:q.values,D=w.filter(C=>null!=C).length,O={count:D};q.supportsNullCount&&(O.nullcount=w.length-D);q.percentileParams&&(O.median=F(w,q.percentileParams));return O};l.calculateUniqueValuesCount=function(q){const w={};for(let D of q){if(null==D||
"string"===typeof D&&""===D.trim())D=null;null==w[D]?w[D]={count:1,data:D}:w[D].count++}return{count:w}};l.createClassBreaksDefinition=e;l.createUVResult=function(q,w,D,O){q=q.count;const C=[];if(D&&w){D=[];var E=K(w[0]);for(const N of E)if(w[1]){E=K(w[1]);for(const M of E)if(w[2]){E=K(w[2]);for(const B of E)D.push(`${Z(N)}${O}${Z(M)}${O}${Z(B)}`)}else D.push(`${Z(N)}${O}${Z(M)}`)}else D.push(N);for(const N of D)q.hasOwnProperty(N)||(q[N]={data:N,count:0})}for(const N in q)w=q[N],C.push({value:w.data,
count:w.count,label:w.label});return{uniqueValueInfos:C}};l.getAttributeComparator=u;l.getEqualIntervalBins=W;l.getNormalizedValue=function(q,w,D,O){let C=null;switch(w){case "log":0!==q&&(C=Math.log(q)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(O)&&0!==O&&(C=q/O*100);break;case "field":Number.isFinite(D)&&0!==D&&(C=q/D);break;case "natural-log":0<q&&(C=Math.log(q));break;case "square-root":0<q&&(C=q**.5)}return C};l.isNullCountSupported=R;l.processNullValue=Z;l.processSummaryStatisticsResult=
function(q,w){let D;for(D in q)G.includes(D)&&(Number.isFinite(q[D])||(q[D]=null));if(!w)return q;["avg","stddev","variance"].forEach(O=>{null!=q[O]&&(q[O]=Math.ceil(q[O]))});return q};l.resolveCBResult=function(q,w){let D=q.classBreaks;const O=D[0].minValue,C=D[D.length-1].maxValue,E="standard-deviation"===w;D=D.map(N=>{const M=N.label;N={minValue:N.minValue,maxValue:N.maxValue,label:M};if(E&&M){const B=M.match(U)?.map(z=>+z.trim())??[];2===B.length?(N.minStdDev=B[0],N.maxStdDev=B[1],0>B[0]&&0<B[1]&&
(N.hasAvg=!0)):1===B.length&&(M.includes("\x3c")?(N.minStdDev=null,N.maxStdDev=B[0]):M.includes("\x3e")&&(N.minStdDev=B[0],N.maxStdDev=null))}return N});return{minValue:O,maxValue:C,classBreakInfos:D,normalizationTotal:q.normalizationTotal}};l.statisticTypes=G;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,f,ma,Z,R,Q,F,u,k){Q=new ma.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ma=new ma.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});Z=function(n){function H(ba){ba=n.call(this,ba)||this;ba.type="class-breaks-definition";
ba.breakCount=null;ba.classificationField=null;ba.classificationMethod=null;ba.normalizationField=null;ba.normalizationType=null;return ba}l._inheritsLoose(H,n);l._createClass(H,[{key:"standardDeviationInterval",set:function(ba){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",ba)}},{key:"definedInterval",set:function(ba){"defined-interval"===this.classificationMethod&&this._set("definedInterval",ba)}}]);return H}(Z.JSONSupport);f.__decorate([u.enumeration({classBreaksDef:"class-breaks-definition"})],
Z.prototype,"type",void 0);f.__decorate([R.property({json:{write:!0}})],Z.prototype,"breakCount",void 0);f.__decorate([R.property({json:{write:!0}})],Z.prototype,"classificationField",void 0);f.__decorate([R.property({type:String,json:{read:Q.read,write:Q.write}})],Z.prototype,"classificationMethod",void 0);f.__decorate([R.property({json:{write:!0}})],Z.prototype,"normalizationField",void 0);f.__decorate([R.property({json:{read:ma.read,write:ma.write}})],Z.prototype,"normalizationType",void 0);f.__decorate([R.property({value:null,
json:{write:!0}})],Z.prototype,"standardDeviationInterval",null);f.__decorate([R.property({value:null,json:{write:!0}})],Z.prototype,"definedInterval",null);return Z=f.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],Z)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,f,ma){l.enumeration=function(Z,R={}){Z=Z instanceof f.JSONMap?Z:new f.JSONMap(Z,R);Z={type:R?.ignoreUnknown??!0?Z.apiValues:String,json:{type:Z.jsonValues,
read:R?.readOnly?!1:{reader:Z.read},write:{writer:Z.write}}};void 0!==R?.readOnly&&(Z.readOnly=!!R.readOnly);void 0!==R?.default&&(Z.json.default=R.default);void 0!==R?.name&&(Z.json.name=R.name);void 0!==R?.nonNullable&&(Z.nonNullable=R.nonNullable);return ma.property(Z)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(l,f){function ma(K){var m=K.definition;const {classificationMethod:y,
normalizationType:e,definedInterval:p}=m;m=m.breakCount??1;const L=[];var W=K.values;if(0===W.length)return[];W=W.sort((D,O)=>D-O);var U=W[0],aa=W[W.length-1];if("equal-interval"===y)if(W.length>=m){W=(aa-U)/m;K=U;for(var G=1;G<m;G++){var q=Number((U+G*W).toFixed(6));L.push({minValue:K,maxValue:q,label:Z(K,q,e)});K=q}L.push({minValue:K,maxValue:aa,label:Z(K,aa,e)})}else W.forEach(D=>{L.push({minValue:D,maxValue:D,label:Z(D,D,e)})});else if("natural-breaks"===y){W=R(W);K=Q(W.uniqueValues,K.valueFrequency||
W.valueFrequency,m);for(G=1;G<m;G++)W.uniqueValues.length>G&&(q=Number(W.uniqueValues[K[G]].toFixed(6)),L.push({minValue:U,maxValue:q,label:Z(U,q,e)}),U=q);L.push({minValue:U,maxValue:aa,label:Z(U,aa,e)})}else if("quantile"===y)if(W.length>=m&&U!==aa){K=Math.ceil(W.length/m);G=0;for(q=1;q<m;q++){var w=K+G-1;w>W.length&&(w=W.length-1);0>w&&(w=0);L.push({minValue:U,maxValue:W[w],label:Z(U,W[w],e)});U=W[w];G+=K;K=Math.ceil((W.length-G)/(m-q))}L.push({minValue:U,maxValue:aa,label:Z(U,aa,e)})}else for(m=
-1,aa=0;aa<W.length;aa++)U=W[aa],U!==m&&(m=U,L.push({minValue:m,maxValue:U,label:Z(m,U,e)}),m=U);else if("standard-deviation"===y)if(K=k(W),G=n(W,K),0===G)L.push({minValue:W[0],maxValue:W[0],label:Z(W[0],W[0],e)});else{W=u(U,aa,m,K,G)*G;G=0;for(q=m;1<=q;q--)w=Number((K-(q-.5)*W).toFixed(6)),L.push({minValue:U,maxValue:w,label:Z(U,w,e)}),U=w,G++;q=Number((K+.5*W).toFixed(6));L.push({minValue:U,maxValue:q,label:Z(U,q,e)});U=q;G++;for(w=1;w<=m;w++)q=G===2*m?aa:Number((K+(w+.5)*W).toFixed(6)),L.push({minValue:U,
maxValue:q,label:Z(U,q,e)}),U=q,G++}else if("defined-interval"===y){if(!p)return L;m=W[0];aa=W[W.length-1];W=Math.ceil((aa-m)/p);U=m;for(K=1;K<W;K++)G=Number((m+K*p).toFixed(6)),L.push({minValue:U,maxValue:G,label:Z(U,G,e)}),U=G;L.push({minValue:U,maxValue:aa,label:Z(U,aa,e)})}return L}function Z(K,m,y){let e=null;return e=K===m?y&&"percent-of-total"===y?K+"%":K.toString():y&&"percent-of-total"===y?K+"% - "+m+"%":K+" - "+m}function R(K){const m=[],y=[];let e=Number.MIN_VALUE,p=1,L=-1;for(let W=0;W<
K.length;W++){const U=K[W];U===e?(p++,y[L]=p):null!==U&&(m.push(U),e=U,p=1,y.push(p),L++)}return{uniqueValues:m,valueFrequency:y}}function Q(K,m,y){var e=K.length;const p=[];y>e&&(y=e);for(var L=0;L<y;L++)p.push(Math.round(L*e/y-1));p.push(e-1);L=F(p,K,m,y);e=L.mean;L=L.sdcm;var W=y,U=0,aa=0;let G=0,q=0,w=!0;for(let O=0;2>O&&w;O++){0===O&&(w=!1);for(var D=0;D<W-1;D++)for(;p[D+1]+1!==p[D+2];)if(p[D+1]+=1,U=H(D,p,K,m),G=U.sbMean,U=U.sbSdcm,aa=H(D+1,p,K,m),q=aa.sbMean,aa=aa.sbSdcm,U+aa<L[D]+L[D+1])L[D]=
U,L[D+1]=aa,e[D]=G,e[D+1]=q,w=!0;else{--p[D+1];break}for(D=W-1;0<D;D--)for(;p[D]!==p[D-1]+1;)if(--p[D],U=H(D-1,p,K,m),G=U.sbMean,U=U.sbSdcm,aa=H(D,p,K,m),q=aa.sbMean,aa=aa.sbSdcm,U+aa<L[D-1]+L[D])L[D-1]=U,L[D]=aa,e[D-1]=G,e[D]=q,w=!0;else{p[D]+=1;break}}w&&(L=F(p,K,m,y));return p}function F(K,m,y,e){let p=[];var L=[],W=[];let U=0;const aa=[],G=[];for(var q=0;q<e;q++){var w=H(q,K,m,y);aa.push(w.sbMean);G.push(w.sbSdcm);U+=G[q]}w=U;for(q=!0;q||U<w;){q=!1;p=[];for(L=0;L<e;L++)p.push(K[L]);for(W=0;W<
e;W++)for(w=K[W]+1;w<=K[W+1];w++)if(L=m[w],0<W&&w!==K[W+1]&&Math.abs(L-aa[W])>Math.abs(L-aa[W-1]))K[W]=w;else if(W<e-1&&K[W]!==w-1&&Math.abs(L-aa[W])>Math.abs(L-aa[W+1])){K[W+1]=w-1;break}w=U;U=0;L=[];W=[];for(let D=0;D<e;D++){L.push(aa[D]);W.push(G[D]);const O=H(D,K,m,y);aa[D]=O.sbMean;G[D]=O.sbSdcm;U+=G[D]}}if(U>w){for(m=0;m<e;m++)K[m]=p[m],aa[m]=L[m],G[m]=W[m];U=w}return{mean:aa,sdcm:G}}function u(K,m,y,e,p){K=Math.max(e-K,m-e)/p/y;return 1<=K?1:.5<=K?.5:.25}function k(K){let m=0;for(let y=0;y<
K.length;y++)m+=K[y];return m/=K.length}function n(K,m){let y=0;for(let e=0;e<K.length;e++){const p=K[e];y+=(p-m)*(p-m)}y/=K.length;return Math.sqrt(y)}function H(K,m,y,e){var p=0,L=0;for(var W=m[K]+1;W<=m[K+1];W++){const U=e[W];p+=y[W]*U;L+=U}0>=L&&ba.warn("Exception in Natural Breaks calculation");p/=L;L=0;for(W=m[K]+1;W<=m[K+1];W++)L+=e[W]*(y[W]-p)**2;return{sbMean:p,sbSdcm:L}}const ba=f.getLogger("esri.rest.support.generateRendererUtils");l.createGenerateRendererClassBreaks=function(K){const {normalizationTotal:m}=
K;return{classBreaks:ma(K),normalizationTotal:m}};l.createGenerateRendererUniqueValues=function(K){K=R(K);const m=[],y=K.uniqueValues.length;for(let e=0;e<y;e++){const p=K.uniqueValues[e];m.push({value:p,count:K.valueFrequency[e],label:p.toString()})}return{uniqueValues:m}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(l){l.makeEdgeCandidate=function(f,ma,Z,R,Q,F=!1){return{objectId:f,target:ma,
distance:Z,type:"edge",start:R,end:Q,draped:F}};l.makeVertexCandidate=function(f,ma,Z){return{objectId:f,target:ma,distance:Z,type:"vertex"}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,f,ma,Z,R,Q,F,u){function k(S,ca,pa){if(S)for(const wa of S)(S=(S=Q.getDeepValue(wa,
ca))&&"function"!==typeof S&&pa.get(S))&&Q.setDeepValue(wa,S.name,ca)}function n(S,ca){if(!S||!ca)return[];va.clear();H(va,S,ca);return Array.from(va).sort()}function H(S,ca,pa){if(pa)if(ca?.fields?.length)if(pa.includes("*"))for(const {name:wa}of ca.fields)S.add(wa);else for(const wa of pa)ba(S,ca,wa);else if(pa.includes("*"))S.clear(),S.add("*");else for(const wa of pa)null!=wa&&S.add(wa)}function ba(S,ca,pa){"string"===typeof pa&&(ca?(ca=ca.get(pa))&&S.add(ca.name):S.add(pa))}function K(S,ca,pa){return m.apply(this,
arguments)}function m(){m=ma._asyncToGenerator(function*(S,ca,pa){if(pa){var {arcadeUtils:wa}=yield u.loadArcade();pa=wa.extractFieldNames(pa,ca?.fields?.map(Ba=>Ba.name));for(const Ba of pa)ba(S,ca,Ba)}});return m.apply(this,arguments)}function y(S,ca,pa){return e.apply(this,arguments)}function e(){e=ma._asyncToGenerator(function*(S,ca,pa){if(pa&&"1\x3d1"!==pa){const wa=(yield new Promise((Ba,La)=>l(["../../core/sql/WhereClause"],Ba,La))).WhereClause.create(pa,ca);if(!wa.isStandardized)throw new Z("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:pa});H(S,ca,wa.fieldNames)}});return e.apply(this,arguments)}function p(S,ca){for(const pa of S)if(pa&&pa.valueType&&pa.valueType===ca)return pa.name;return null}function L(){L=ma._asyncToGenerator(function*(S){if(!S)return[];const ca=new Set;yield W(ca,S);return Array.from(ca).sort()});return L.apply(this,arguments)}function W(S,ca){return U.apply(this,arguments)}function U(){U=ma._asyncToGenerator(function*(S,ca){if(ca){var pa=ca.elevationInfo?.featureExpressionInfo;
if(pa)return pa.collectRequiredFields(S,ca.fieldsIndex)}});return U.apply(this,arguments)}function aa(){aa=ma._asyncToGenerator(function*(S,ca,pa){if(ca&&pa&&"fields"in pa){var wa=[];wa.push(G(S,ca,pa.popupTemplate));pa.fields&&wa.push(...pa.fields.map(function(){var Ba=ma._asyncToGenerator(function*(La){La.onStatisticExpression?K(S,ca.fieldsIndex,La.onStatisticExpression.expression):S.add(La.onStatisticField)});return function(La){return Ba.apply(this,arguments)}}()));yield Promise.all(wa)}});return aa.apply(this,
arguments)}function G(S,ca,pa){return q.apply(this,arguments)}function q(){q=ma._asyncToGenerator(function*(S,ca,pa){const wa=[];pa?.expressionInfos&&wa.push(...pa.expressionInfos.map(Ba=>K(S,ca.fieldsIndex,Ba.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ba of pa)"expression"===Ba.type&&Ba.expressionInfo&&wa.push(K(S,ca.fieldsIndex,Ba.expressionInfo.expression));yield Promise.all(wa)});return q.apply(this,arguments)}function w(){w=ma._asyncToGenerator(function*(S,ca,pa){ca&&(ca.timeInfo&&
R.isSome(pa)&&pa.timeExtent&&H(S,ca.fieldsIndex,[ca.timeInfo.startField,ca.timeInfo.endField]),ca.floorInfo&&H(S,ca.fieldsIndex,[ca.floorInfo.floorField]),R.isSome(pa)&&R.isSome(pa.where)&&(yield y(S,ca.fieldsIndex,pa.where)))});return w.apply(this,arguments)}function D(){D=ma._asyncToGenerator(function*(S,ca,pa){ca&&pa&&(yield Promise.all(pa.map(wa=>O(S,ca,wa))))});return D.apply(this,arguments)}function O(S,ca,pa){return C.apply(this,arguments)}function C(){C=ma._asyncToGenerator(function*(S,ca,
pa){ca&&pa&&(pa.valueExpression?yield K(S,ca.fieldsIndex,pa.valueExpression):pa.field&&ba(S,ca.fieldsIndex,pa.field))});return C.apply(this,arguments)}function E(){E=ma._asyncToGenerator(function*(S){if(!S)return[];const ca="timeInfo"in S&&S.timeInfo;return ca?n(S.fieldsIndex,[S.trackIdField,ca.startField,ca.endField]):[]});return E.apply(this,arguments)}function N(){N=ma._asyncToGenerator(function*(S){if(!S)return[];const ca=new Set;yield M(ca,S);return Array.from(ca).sort()});return N.apply(this,
arguments)}function M(S,ca){return B.apply(this,arguments)}function B(){B=ma._asyncToGenerator(function*(S,ca){const {labelingInfo:pa,fieldsIndex:wa}=ca;pa&&pa.length&&(yield Promise.all(pa.map(Ba=>z(S,wa,Ba))))});return B.apply(this,arguments)}function z(S,ca,pa){return h.apply(this,arguments)}function h(){h=ma._asyncToGenerator(function*(S,ca,pa){if(pa){var wa=pa.getLabelExpression();pa=pa.where;"arcade"===wa.type?yield K(S,ca,wa.expression):(wa=wa.expression.match(/{[^}]*}/g))&&wa.forEach(Ba=>
{ba(S,ca,Ba.slice(1,-1))});yield y(S,ca,pa)}});return h.apply(this,arguments)}function t(S){return"number"===typeof S&&!isNaN(S)&&isFinite(S)}function P(S){return null===S||t(S)}function ja(S){return null===S||x(S)}function sa(S){return null!=S&&"string"===typeof S}function za(S){return null===S||sa(S)}function Ea(){return!0}function Ha(S,ca){let pa;switch(S.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=
S.nullable?ja:x;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=S.nullable?P:t;break;case "string":case "esriFieldTypeString":pa=S.nullable?za:sa;break;default:pa=Ea}return 1===arguments.length?pa:pa(ca)}function Fa(S){return null!=S&&da.has(S.type)}function Ua(S,ca){return null==S||S.nullable&&null===ca?null:Fa(S)&&!Oa(S.type,Number(ca))?f.NumericRangeValidationError.OUT_OF_RANGE:Ha(S,ca)?S.domain?F.validateDomainValue(S.domain,ca):null:f.TypeValidationError.INVALID_TYPE}
function Oa(S,ca){S="string"===typeof S?Sa(S):S;if(!S)return!1;const pa=S.min,wa=S.max;return S.isInteger?x(ca)&&ca>=pa&&ca<=wa:ca>=pa&&ca<=wa}function Sa(S){switch(S){case "esriFieldTypeSmallInteger":case "small-integer":return V;case "esriFieldTypeInteger":case "integer":return ia;case "esriFieldTypeSingle":case "single":return na;case "esriFieldTypeDouble":case "double":return ra}}function $a(S,ca,pa){if(!ca||!ca.attributes||!S){if(R.isSome(pa))for(var wa of S??[])pa.add(wa);return!0}ca=ca.attributes;
wa=!1;for(const Ba of S)if(!(Ba in ca))if(wa=!0,R.isSome(pa))pa.add(Ba);else break;return wa}function Ta(){Ta=ma._asyncToGenerator(function*(S,ca){const pa=new Set;for(const wa of ca)yield K(pa,S.fieldsIndex,wa);return Array.from(pa).sort()});return Ta.apply(this,arguments)}const jb=/^([0-9])/,ib=/[^a-z0-9_\u0080-\uffff]/gi,lb=/_{2,}/g,c=/^_/,r=/_$/,ea="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
ka=["field","normalizationField"],va=new Set,x=(()=>"isInteger"in Number?Number.isInteger:S=>"number"===typeof S&&isFinite(S)&&Math.floor(S)===S)(),J=["integer","small-integer","single","double"],da=new Set([...J,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;
(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const V={min:-32768,max:32767,isInteger:!0},ia={min:-2147483648,max:2147483647,isInteger:!0},na={min:-3.4E38,max:1.2E38,isInteger:!1},ra={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.collectArcadeFieldNames=K;f.collectElevationFields=W;f.collectFeatureReductionFields=function(S,ca,pa){return aa.apply(this,arguments)};f.collectField=ba;f.collectFields=H;f.collectFilterFields=function(S,
ca,pa){return w.apply(this,arguments)};f.collectLabelingFields=M;f.collectOrderByInfos=function(S,ca,pa){return D.apply(this,arguments)};f.collectPopupTemplateFields=G;f.doubleRange=ra;f.featureHasFields=function(S,ca){return!$a(S,ca,null)};f.fixFields=n;f.fixRendererFields=function(S,ca){if(null!=S&&null!=ca)for(const pa of Array.isArray(S)?S:[S])if(k(ea,pa,ca),"visualVariables"in pa&&pa.visualVariables)for(const wa of pa.visualVariables)k(ka,wa,ca)};f.fixTimeInfoFields=function(S,ca){if(null!=S&&
ca?.fields?.length)if("startField"in S){var pa=ca.get(S.startField);ca=ca.get(S.endField);S.startField=pa?.name??null;S.endField=ca?.name??null}else pa=ca.get(S.startTimeField),ca=ca.get(S.endTimeField),S.startTimeField=pa?.name??null,S.endTimeField=ca?.name??null};f.getDisplayFieldName=function({displayField:S,fields:ca}){if(S)return S;if(!ca||!ca.length)return null;if(!(S=p(ca,"name-or-title")||p(ca,"unique-identifier")||p(ca,"type-or-category")))a:{for(const pa of ca)if(pa&&pa.name&&(ca=pa.name.toLowerCase(),
ca.includes("name")||ca.includes("title"))){S=pa.name;break a}S=null}return S};f.getElevationFields=function(S){return L.apply(this,arguments)};f.getExpressionFields=function(S,ca){return Ta.apply(this,arguments)};f.getFeatureEditFields=function(S){if(!S)return[];const ca="editFieldsInfo"in S&&S.editFieldsInfo;return ca?n(S.fieldsIndex,[ca&&ca.creatorField,ca&&ca.creationDateField,ca&&ca.editorField,ca&&ca.editDateField]):[]};f.getFeatureGeometryFields=function(S){if(!S)return[];const ca=S.geometryFieldsInfo;
return ca?n(S.fieldsIndex,[ca.shapeAreaField,ca.shapeLengthField]):[]};f.getFieldDefaultValue=function(S){const ca=S.defaultValue;if(void 0!==ca&&Ha(S,ca))return ca;if(S.nullable)return null};f.getFieldRange=function(S){const ca=F.getDomainRange(S.domain);if(ca)return ca;if(Fa(S))return Sa(S.type)};f.getLabelingFields=function(S){return N.apply(this,arguments)};f.getNumericTypeForValue=function(S){if(!t(S))return null;if(x(S)){if(S>=V.min&&S<=V.max)return"esriFieldTypeSmallInteger";if(S>=ia.min&&
S<=ia.max)return"esriFieldTypeInteger"}return S>=na.min&&S<=na.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=function(S){return E.apply(this,arguments)};f.integerRange=ia;f.isDateField=function(S){return null!=S&&("date"===S.type||"esriFieldTypeDate"===S.type)};f.isNumberInRange=Oa;f.isNumericField=Fa;f.isRasterPixelValueField=function(S){return S?["raster.itempixelvalue","raster.servicepixelvalue"].some(ca=>S.toLowerCase().startsWith(ca)):!1};f.isStringField=function(S){return null!=
S&&("string"===S.type||"esriFieldTypeString"===S.type)};f.isValidFieldValue=function(S,ca){return null===Ua(S,ca)};f.isValueMatchingFieldType=Ha;f.normalizeFieldName=function(S){return null==S?null:(S=S.trim().replace(ib,"_").replace(lb,"_").replace(c,"").replace(r,"").replace(jb,"F$1"))?S:null};f.numericTypes=J;f.packFields=function(S,ca,pa=1){if(!ca||!S)return[];if(ca.includes("*"))return["*"];ca=n(S,ca);return ca.length/S.fields.length>=pa?["*"]:ca};f.populateMissingFields=$a;f.rendererFields=
ea;f.sanitizeNullFieldValue=function(S){return null==S||"number"===typeof S&&isNaN(S)?null:S};f.singleRange=na;f.smallIntegerRange=V;f.unpackFieldNames=function(S,ca){return R.isNone(ca)||R.isNone(S)?[]:ca.includes("*")?(S.fields??[]).map(pa=>pa.name):ca};f.validateFieldValue=Ua;f.validationErrorToString=function(S,ca,pa){switch(S){case F.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${ca.name}, domain: ${JSON.stringify(ca.domain)}`;case F.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${ca.name}, domain: ${JSON.stringify(ca.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${ca.name}, type: ${ca.type}, nullable: ${ca.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:wa,max:Ba}=Sa(ca.type);return`Value ${pa} is out of range for the number type - field: ${ca.name}, type: ${ca.type}, value range is ${wa} to ${Ba}`}};f.visualVariableFields=ka;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){l.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};l.validateDomainValue=function(f,ma){switch(f.type){case "range":const Z="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=Z&&+ma<Z||null!=f&&+ma>f)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==ma))return l.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(R=>null==R||R.code!==ma))return l.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,f,ma,Z,R,Q,F,u){function k(){H||(H=ma._asyncToGenerator(function*(){const K=yield new Promise((m,y)=>l(["./arcadeUtils"],m,y));return{arcade:K.arcade,arcadeUtils:K,Dictionary:K.Dictionary,Feature:K.arcadeFeature}})());return H}const n=Q.getLogger("esri.support.arcadeOnDemand");let H;Z=(K,m,y)=>ba.create(K,m,y,null,["$feature","$view"]);let ba=function(){function K(y,e,p,L,W,U,aa){this.script=y;this.evaluate=L;this.fields=Array.isArray(U)?U:U.fields;this._syntaxTree=p;this._arcade=e;this._arcadeFeature=
W;this._spatialReference=aa;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}K.create=function(){var y=ma._asyncToGenerator(function*(e,p,L,W,U,aa){const {arcade:G,Feature:q,Dictionary:w}=yield k(),D=u.fromJSON(p);let O;try{O=G.parseScript(e,aa)}catch(z){return n.error(new R("arcade-bad-expression","Failed to parse arcade script",{script:e,error:z})),null}U=U.reduce((z,h)=>({...z,[h]:null}),{});let C=null;
F.isSome(W)&&(C=new w(W),C.immutable=!0,U.$config=null);aa=(W=G.scriptUsesGeometryEngine(O))&&G.enableGeometrySupport();const E=G.scriptUsesFeatureSet(O)&&G.enableFeatureSetSupport(),N=(p=G.scriptIsAsync(O))&&G.enableAsyncSupport();U={vars:U,spatialReference:D,useAsync:!!N};yield Promise.all([aa,E,N]);aa=new Set;yield G.loadDependentModules(aa,O,null,p,W);const M=new w;M.immutable=!1;M.setField("scale",0);const B=G.compileScript(O,U);return new K(e,G,O,z=>{"$view"in z&&z.$view&&(M.setField("scale",
"object"===typeof z.$view?z.$view.scale:void 0),z.$view=M);C&&(z.$config=C);return B({vars:z,spatialReference:D})},new q,L,D)});return function(e,p,L,W,U,aa){return y.apply(this,arguments)}}();var m=K.prototype;m.repurposeFeature=function(y){y.geometry&&!y.geometry.spatialReference&&(y.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(y.geometry,y.attributes,{fields:this.fields});return this._arcadeFeature};m.referencesGeometry=function(){return this._referencesGeometry};
m.referencesScale=function(){return this._referencesScale};return K}();f.ArcadeExpression=ba;f.createDictionaryExpression=(K,m,y,e)=>ba.create(K,m,y,e,["$feature","$view"]);f.createLabelExpression=(K,m,y)=>ba.create(K,m,y,null,["$feature"]);f.createRendererExpression=Z;f.createVVExpression=Z;f.loadArcade=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K){function m(){return new Promise((L,W)=>l(["../../../geometry/geometryEngineJSON"],L,W))}function y(){y=ma._asyncToGenerator(function*(L,W,U){const {spatialRel:aa,geometry:G}=L;if(G){if(null==aa||!0!==p.spatialRelationship[aa])throw new Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(u.isValid(G.spatialReference)&&u.isValid(U)){if(null==G||!0!==p.queryGeometry[F.getJsonType(G)])throw new Z("feature-store:unsupported-query",
"Unsupported query geometry type",{query:L});if(null==W||!0!==p.layerGeometry[W])throw new Z("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return ba.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}});return y.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},p={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};f.canQueryWithRBush=function(L){if(F.isExtent(L))return!0;if(F.isPolygon(L)){for(const W of L.rings)if(5!==W.length||W[0][0]!==W[1][0]||W[0][0]!==W[4][0]||W[2][0]!==W[3][0]||W[0][1]!==W[3][1]||W[0][1]!==W[4][1]||W[1][1]!==W[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=function(L,W,U){return y.apply(this,
arguments)};f.getSpatialQueryOperator=function(L,W,U,aa,G){if(F.isPolygon(W)&&"esriGeometryPoint"===U&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const q=n.convertFromPolygon(new H,W,!1,!1);return Promise.resolve(w=>k.polygonContainsPoint(q,!1,!1,w))}if(F.isPolygon(W)&&"esriGeometryMultipoint"===U){const q=n.convertFromPolygon(new H,W,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(w=>k.polygonContainsMultipoint(q,!1,!1,w,aa,G))}if(F.isExtent(W)&&"esriGeometryPoint"===
U&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L))return Promise.resolve(q=>R.extentContainsPoint(W,K.getGeometry(U,aa,G,q)));if(F.isExtent(W)&&"esriGeometryMultipoint"===U&&"esriSpatialRelContains"===L)return Promise.resolve(q=>R.extentContainsMultipoint(W,K.getGeometry(U,aa,G,q)));if(F.isExtent(W)&&"esriSpatialRelIntersects"===L){const q=Q.getExtentIntersector(U);return Promise.resolve(w=>q(W,K.getGeometry(U,aa,G,w)))}return m().then(q=>{const w=q[e[L]].bind(null,W.spatialReference,
W);return D=>w(K.getGeometry(U,aa,G,D))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(l,f){l.extentIntersectsExtent=f.extentIntersectsExtent;l.extentIntersectsMultipoint=f.extentIntersectsMultipoint;l.extentIntersectsPoint=f.extentIntersectsPoint;l.extentIntersectsPolygon=f.extentIntersectsPolygon;l.extentIntersectsPolyline=f.extentIntersectsPolyline;l.extentIntersectsRings=f.extentIntersectsRings;
l.getFeatureExtentIntersector=f.getFeatureExtentIntersector;l.isSelfIntersecting=f.isSelfIntersecting;l.segmentIntersects=f.segmentIntersects;l.getExtentIntersector=function(ma){return"mesh"===ma?f.extentIntersectsExtent:f.getFeatureExtentIntersector(ma)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function f(ma,Z,R,Q,F){if(!ma)return!1;Z=Z?R?4:3:R?3:2;const {coords:u,lengths:k}=ma;R=!1;ma=0;for(const H of k){var n=
ma;for(let ba=ma,K=ma+H*Z;ba<K;ba+=Z){n=ba+Z;n===K&&(n=ma);const m=u[ba],y=u[ba+1],e=u[n];n=u[n+1];(y<F&&n>=F||n<F&&y>=F)&&m+(F-y)/(n-y)*(e-m)<Q&&(R=!R)}ma+=H*Z}return R}l.polygonContainsCoords=f;l.polygonContainsMultipoint=function(ma,Z,R,Q,F,u){F=F?u?4:3:u?3:2;const {coords:k,lengths:n}=Q;if(!n)return!1;for(let H=0,ba=0;H<n.length;H++,ba+=F)if(!f(ma,Z,R,k[ba],k[ba+1]))return!1;return!0};l.polygonContainsPoint=function(ma,Z,R,Q){return f(ma,Z,R,Q.coords[0],Q.coords[1])};Object.defineProperty(l,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(l,f){function ma(){ma=f._asyncToGenerator(function*(F,u){if(!F)return null;const k=u.featureAdapter,{startTimeField:n,endTimeField:H}=F;let ba=Number.POSITIVE_INFINITY,K=Number.NEGATIVE_INFINITY;if(n&&H)yield u.forEach(m=>{const y=k.getAttribute(m,n);m=k.getAttribute(m,H);null==y||isNaN(y)||(ba=Math.min(ba,y));null==m||isNaN(m)||(K=Math.max(K,m))});else{const m=
n||H;yield u.forEach(y=>{y=k.getAttribute(y,m);null==y||isNaN(y)||(ba=Math.min(ba,y),K=Math.max(K,y))})}return{start:ba,end:K}});return ma.apply(this,arguments)}function Z(F,u,k,n,H){if(null!=n&&null!=H)return ba=>{const K=F.getAttribute(ba,u);ba=F.getAttribute(ba,k);return(null==K||K<=H)&&(null==ba||ba>=n)};if(null!=n)return ba=>{ba=F.getAttribute(ba,k);return null==ba||ba>=n};if(null!=H)return ba=>{ba=F.getAttribute(ba,u);return null==ba||ba<=H}}function R(F,u,k,n){if(null!=k&&null!=n&&k===n)return H=>
F.getAttribute(H,u)===k;if(null!=k&&null!=n)return H=>{H=F.getAttribute(H,u);return H>=k&&H<=n};if(null!=k)return H=>F.getAttribute(H,u)>=k;if(null!=n)return H=>F.getAttribute(H,u)<=n}function Q(){return()=>!1}l.getTimeExtent=function(F,u){return ma.apply(this,arguments)};l.getTimeOperator=function(F,u,k){if(!u||!F)return null;const {startTimeField:n,endTimeField:H}=F;if(!n&&!H)return null;const {start:ba,end:K}=u;return null===ba&&null===K?null:void 0===ba&&void 0===K?Q():n&&H?Z(k,n,H,ba,K):R(k,
n||H,ba,K)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,f){function ma(R){return"oid"===R.type||"esriFieldTypeOID"===R.type}function Z(R){return"global-id"===R.type||"esriFieldTypeGlobalID"===R.type}return function(){function R(F=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;
this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(F){this.fields=F;var u=[];for(const k of F){F=k?.name;const n=f.normalizeFieldName(k?.name)?.toLowerCase()??"";if(F&&n){const H=F.trim().toLowerCase();this._fieldsMap.set(F,k);this._fieldsMap.set(H,k);this._normalizedFieldsMap.set(n,k);u.push(H);"date"===k.type||"esriFieldTypeDate"===k.type?(this.dateFields.push(k),this._dateFieldsSet.add(k)):f.isNumericField(k)&&(this._numericFieldsSet.add(k),this.numericFields.push(k));ma(k)||
Z(k)||(k.editable=null==k.editable?!0:!!k.editable,k.nullable=null==k.nullable?!0:!!k.nullable)}}u.sort();this.uid=u.join(",")}}var Q=R.prototype;Q.destroy=function(){this._fieldsMap.clear()};Q.has=function(F){return null!=this.get(F)};Q.get=function(F){if(F){var u=this._fieldsMap.get(F);if(u)return u;(u=this._fieldsMap.get(F.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(F)?.toLowerCase()??""))&&this._fieldsMap.set(F,u);return u}};Q.isDateField=function(F){return this._dateFieldsSet.has(this.get(F))};
Q.isNumericField=function(F){return this._numericFieldsSet.has(this.get(F))};Q.normalizeFieldName=function(F){if(F=this.get(F))return F.name??void 0};l._createClass(R,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const F of this.fields)ma(F)||Z(F)||F.nullable||void 0!==f.getFieldDefaultValue(F)||this._requiredFields.push(F)}return this._requiredFields}}]);return R}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m,y){function e(O){return p.has(O)?p.get(O):"number"===typeof O?O:1}l.Task=void 0;(function(O){O[O.YIELD=1]="YIELD"})(l.Task||(l.Task={}));l.TaskPriority=void 0;(function(O){O.RESOURCE_CONTROLLER_IMMEDIATE="immediate";O.RESOURCE_CONTROLLER="schedule";O.SLIDE="slide";O.STREAM_DATA_LOADER="stream loader";O.ELEVATION_QUERY="elevation query";O.TERRAIN_SURFACE="terrain";O.SURFACE_GEOMETRY_UPDATES="surface geometry updates";O.LOD_RENDERER="LoD renderer";O.GRAPHICS_CORE=
"Graphics3D";O.I3S_CONTROLLER="I3S";O.POINT_CLOUD_LAYER="point cloud";O.FEATURE_TILE_FETCHER="feature fetcher";O.OVERLAY="overlay";O.STAGE="stage";O.GRAPHICS_DECONFLICTOR="graphics deconflictor";O.FILTER_VISIBILITY="Graphics3D filter visibility";O.SCALE_VISIBILITY="Graphics3D scale visibility";O.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";O.POINT_OF_INTEREST_FREQUENT="POI frequent";O.POINT_OF_INTEREST_INFREQUENT="POI infrequent";O.LABELER="labeler";O.FEATURE_QUERY_ENGINE="feature query";O.FEATURE_TILE_TREE=
"feature tile tree";O.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";O.ELEVATION_ALIGNMENT="elevation alignment";O.TEXT_TEXTURE_ATLAS="text texture atlas";O.TEXTURE_UNLOAD="texture unload";O.LINE_OF_SIGHT_TOOL="line of sight tool";O.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";O.ELEVATION_PROFILE="elevation profile";O.SNAPPING="snapping";O.SHADOW_ACCUMULATOR="shadow accumulator";O.CLOUDS_GENERATOR="clouds generator";O[O.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||(l.TaskPriority=
{}));const p=new Map([[l.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[l.TaskPriority.RESOURCE_CONTROLLER,4],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.LOD_RENDERER,2],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,4],[l.TaskPriority.STAGE,
4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.CLOUDS_GENERATOR,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,30]]),L=H.Milliseconds(6.5),W=H.Milliseconds(1),U=H.Milliseconds(30),aa=H.Milliseconds(1E3/30),G=H.Milliseconds(100);var q;(function(O){let C=function(){function M(){this._updating=new ba.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new F("total"),tasks:new Map};
this._frameTaskTimes=new Map;this._budget=new N;this._state=y.RenderState.INTERACTING;this._tasks=new u;this._runQueue=new u;this._load=0;this._idleStateCallbacks=new u;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=n.watch(()=>m.SCHEDULER_LOG_SLOW_TASKS,h=>this._debug=h,n.initial);for(const h of Object.keys(l.TaskPriority))this.performanceInfo.tasks.set(l.TaskPriority[h],new F(l.TaskPriority[h]));const z=this;this._test={FRAME_SAFETY_BUDGET:L,INTERACTING_BUDGET:aa,IDLE_BUDGET:G,
get availableBudget(){return z._budget.budget},usedBudget:0,getBudget:()=>z._budget,setBudget:h=>z._budget=h,updateTask:h=>this._updateTask(h),getState:h=>this._getState(h),getRuntime:h=>this._getRuntime(h),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var B=M.prototype;B._updatingChanged=function(){this._updating.set(this._tasks.some(z=>z.needsUpdate))};B.destroy=function(){this._tasks.toArray().forEach(z=>z.remove());this._tasks.clear();
Q.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};B.taskRunningChanged=function(z){this._updatingChanged();z&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};B.registerTask=function(z,h){const t=e(z);h=new E(this,z,h,t);this._tasks.push(h);this._updatingChanged();this.performanceInfo.tasks.has(z)||this.performanceInfo.tasks.set(z,
new F(z));return h};B.registerIdleStateCallbacks=function(z,h){const t={idleBegin:z,idleEnd:h};this._idleStateCallbacks.push(t);this.state===y.RenderState.IDLE&&this._idleUpdatesStartFired&&t.idleBegin();const P=this;return{remove:()=>this._removeIdleStateCallbacks(t),set idleBegin(ja){P._idleUpdatesStartFired&&(t.idleEnd(),P._state===y.RenderState.IDLE&&ja());t.idleBegin=ja},set idleEnd(ja){t.idleEnd=ja}}};B.updateBudget=function(z){this._test.usedBudget=0;++this._frameNumber;let h=L,t=z.frameDuration,
P=W;switch(this.state){case y.RenderState.IDLE:h=H.Milliseconds(0);t=H.Milliseconds(Math.max(G,z.frameDuration));P=U;break;case y.RenderState.INTERACTING:t=H.Milliseconds(Math.max(aa,z.frameDuration))}t=H.Milliseconds(t-z.elapsedFrameTime-h);if(this.state!==y.RenderState.IDLE&&t<W&&!this._forceTask)return this._forceTask=!0,!1;t=H.Milliseconds(Math.max(t,P));this._budget.reset(t,this.state);this._updateLoad();return this._schedule()};B.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case y.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(z=>z.idleBegin()));this._runIdle();break;case y.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};B.stopFrame=function(){this._budget.reset(H.Milliseconds(0),this._state);this._budget.madeProgress()};B._removeIdleStateCallbacks=function(z){this._idleUpdatesStartFired&&z.idleEnd();this._idleStateCallbacks.removeUnordered(z)};B.removeTask=function(z){this._tasks.removeUnordered(z);
this._runQueue.removeUnordered(z);this._updatingChanged()};B._updateTask=function(z){this._tasks.forAll(h=>{h.name===z&&h.setPriority(z)})};B._getState=function(z){if(this._runQueue.some(t=>t.name===z))return l.TaskState.SCHEDULED;let h=l.TaskState.IDLE;this._tasks.forAll(t=>{t.name===z&&t.needsUpdate&&(1>=t.schedulePriority?h=l.TaskState.READY:h!==l.TaskState.READY&&(h=l.TaskState.WAITING))});return h};B._getRuntime=function(z){let h=0;this._tasks.forAll(t=>{t.name===z&&(h+=t.runtime)});return h};
B._resetRuntimes=function(){this._tasks.forAll(z=>z.runtime=0)};B._getRunning=function(){const z=new Map;this._tasks.forAll(t=>{t.needsUpdate&&z.set(t.name,(z.get(t.name)||0)+1)});if(0===z.size)return null;let h="";z.forEach((t,P)=>{h=1<t?h+` ${t}x ${P}`:h+` ${P}`});return h};B._runIdle=function(){this._run()};B._runInteracting=function(){this._run()};B._runAnimating=function(){this._run()};B._updateLoad=function(){const z=this._tasks.reduce((h,t)=>t.needsUpdate?++h:h,0);this._load=.9*this._load+
z*(1-.9)};B._schedule=function(){this._runQueue.filterInPlace(z=>{if(z.needsUpdate)return!0;z.schedulePriority=z.basePriority;return!1});for(this._tasks.forAll(z=>{0===z.basePriority&&z.needsUpdate&&!this._runQueue.includes(z)&&z.blockFrame!==this._frameNumber&&this._runQueue.unshift(z)});0===this._runQueue.length;){let z=!1;this._tasks.forAll(h=>{if(h.needsUpdate&&0!==h.schedulePriority&&0!==h.basePriority&&h.blockFrame!==this._frameNumber)switch(z=!0,h.schedulePriority){case 1:h.schedulePriority=
0;this._runQueue.push(h);break;default:--h.schedulePriority}});if(!z)return this._updatingChanged(),!1}this._updatingChanged();return!0};B._run=function(){const z=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var h=this._budget.now();const t=this._runQueue.pop();this._budget.resetProgress();try{t.task.runTask(this._budget)===l.Task.YIELD&&(t.blockFrame=this._frameNumber)}catch(P){R.getLogger("esri.views.support.Scheduler").error(`Exception in task "${t.name}"`,P)}!this._budget.hasProgressed&&
t.blockFrame!==this._frameNumber&&t.needsUpdate&&(t.blockFrame=this._frameNumber);t.schedulePriority=t.basePriority;h=this._budget.now()-h;t.runtime+=h;this._frameTaskTimes.set(t.priority,this._frameTaskTimes.get(t.priority)+h);this._debug&&h>2*this._budget.budget&&console.log("Task",t.name,"used",h,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-z);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
z)};B._startFrameTaskTimes=function(){for(const z of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[z],0)};B._recordFrameTaskTimes=function(z){this._frameTaskTimes.forEach((h,t)=>this.performanceInfo.tasks.get(t).record(h));this.performanceInfo.total.record(z)};f._createClass(M,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(z){this._state!==z&&(this._state=
z,this.state!==y.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(h=>h.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return M}();O.Scheduler=C;let E=function(){function M(z,h,t,P){this._scheduler=z;this.name=h;this._basePriority=P;this.runtime=this.blockFrame=0;this._queue=new K.PromiseQueue;this._handles=new ma;this.schedulePriority=this._basePriority;this._task=new ba.ObservableValue(Q.isSome(t)?t:this._queue);this._handles.add(n.when(()=>
this.task.running,ja=>z.taskRunningChanged(ja)))}var B=M.prototype;B.remove=function(){this.processQueue(w);this._scheduler.removeTask(this);this.schedule=D.schedule;this.reschedule=D.reschedule;this._handles.destroy()};B.setPriority=function(z){this.name=z;z=e(z);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=z;this._basePriority=z};B.schedule=function(z,h,t){return this._queue.push(z,h,t)};B.reschedule=function(z,h,t){return this._queue.unshift(z,h,t)};B.processQueue=
function(z){this._queue.runTask(z)};f._createClass(M,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(z){this.setPriority(z)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return M}(),N=function(){function M(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=y.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var B=M.prototype;B.run=function(z){if(this.done)return!1;!0===z()&&this.madeProgress();return!0};B.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};B.reset=function(z,h){this._begin=this.now();this._budget=z;this._state=h;this.resetProgress()};B.now=function(){return performance.now()};B.resetProgress=function(){this._done=this._progressed=!1};f._createClass(M,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(z){this._enabled=z}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return M}();O.Budget=N})(q||(q={}));l.TaskState=void 0;
(function(O){O.SCHEDULED="s";O.READY="r";O.WAITING="w";O.IDLE="i"})(l.TaskState||(l.TaskState={}));const w=(()=>{const O=new q.Budget;O.enabled=!1;return O})(),D=new (function(){function O(){}var C=O.prototype;C.remove=function(){};C.processQueue=function(){};C.schedule=function(E,N,M){try{if(k.isAborted(N)){const B=k.createAbortError();return M?Promise.resolve(M(B)):Promise.reject(B)}return k.when(E(w))}catch(B){return Promise.reject(B)}};C.reschedule=function(E,N,M){return this.schedule(E,N,M)};
return O}());l.ImmediateTask=D;l.getTaskPriority=e;l.newScheduler=function(){return new q.Scheduler};l.noBudget=w;l.taskPriorities=p;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,f,ma,Z,R,Q,F){function u(K,m,y={}){return k(K,m,y,H)}function k(K,m,y={},e){let p=null;const L=y.once?(W,U)=>{e(W)&&(Z.removeMaybe(p),
m(W,U))}:(W,U)=>{e(W)&&m(W,U)};p=Q.watchTracked(K,L,y.sync,y.equals);y.initial&&(K=K(),L(K,K));return p}function n(K,m,y){if(R.isAborted(y))return Promise.reject(R.createAbortError());const e=K();if(m?.(e))return Promise.resolve(e);let p=null;return new Promise((L,W)=>{p=ma.handlesGroup([R.onAbort(y,()=>{p=Z.removeMaybe(p);W(R.createAbortError())}),k(K,U=>{p=Z.removeMaybe(p);L(U)},{sync:!1,once:!0},m??H)])})}function H(K){return!0}function ba(K){return!!K}l.autorun=F.autorun;l.initial={initial:!0};
l.on=function(K,m,y,e={}){function p(){W&&U&&(U.remove(),e.onListenerRemove?.(W),U=W=null)}function L(q){e.once&&e.once&&Z.removeMaybe(aa);y(q)}let W=null,U=null,aa=null;const G=u(K,(q,w)=>{p();f.isEventTarget(q)&&(W=q,U=f.on(q,m,L),e.onListenerAdd?.(q))},{sync:e.sync,initial:!0});return aa=ma.makeHandle(()=>{G.remove();p()})};l.once=function(K,m){return n(K,null,m)};l.pausable=function(K,m,y={}){let e=!1;const p=u(K,(L,W)=>{e||m(L,W)},y);return{remove(){p.remove()},pause(){e=!0},resume(){e=!1}}};
l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};l.watch=u;l.when=function(K,m,y={}){return k(K,m,y,ba)};l.whenOnce=function(K,m){return n(K,ba,m)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],function(l,f,ma){let Z=function(){function R(F){this._observable=new ma.SimpleObservable;this._value=F}var Q=R.prototype;Q.get=function(){f.trackAccess(this._observable);
return this._value};Q.set=function(F){F!==this._value&&(this._value=F,this._observable.notify())};return R}();l.ObservableValue=Z;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(l,f,ma,Z){let R=function(){function F(){this._tasks=[];this._running=new Z.ObservableValue(!1)}var u=F.prototype;
u.destroy=function(){this.cancelAll()};u.runTask=function(k){for(;!k.done&&this._process(k);)k.madeProgress()};u.push=function(k,n,H){this._running.set(!0);return new Promise((ba,K)=>this._tasks.push(new Q(ba,K,k,n,H)))};u.unshift=function(k,n,H){this._running.set(!0);return new Promise((ba,K)=>this._tasks.unshift(new Q(ba,K,k,n,H)))};u._process=function(k){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const H=ma.isAborted(n.signal);if(H&&!n.abortCallback)n.reject(ma.createAbortError());
else{const ba=H?n.abortCallback?.(ma.createAbortError()):n.callback(k);ma.isPromiseLike(ba)?ba.then(n.resolve,n.reject):n.resolve(ba)}}catch(H){n.reject(H)}this._running.set(0<this._tasks.length);return!0};u.cancelAll=function(){const k=ma.createAbortError();for(const n of this._tasks)if(n.abortCallback){const H=n.abortCallback(k);n.resolve(H)}else n.reject(k);this._tasks.length=0;this._running.set(!1)};f._createClass(F,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);
return F}(),Q=function(F,u,k,n,H){this.resolve=F;this.reject=u;this.callback=k;this.signal=n;this.abortCallback=H};l.PromiseQueue=R;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(l,
f,ma,Z,R,Q,F){ma=function(u){function k(){var n=u.apply(this,arguments)||this;n.SCHEDULER_LOG_SLOW_TASKS=!1;n.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return n}l._inheritsLoose(k,u);return k}(ma);f.__decorate([Z.property()],ma.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([Z.property()],ma.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ma=f.__decorate([F.subclass("esri.views.support.DebugFlags")],ma);return new ma})},"esri/views/support/RenderState":function(){define(["exports"],
function(l){l.RenderState=void 0;var f=l.RenderState||(l.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,f,ma,Z,R){const Q=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let F=1;l.createCapabilities=
function(u,k){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:k,supportsDelete:k,supportsEditing:k,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:k,supportsExceedsLimitStatistics:!0},
query:Z.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:k,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};l.createDefaultAttributesFunction=function(u,
k){if(f("esri-csp-restrictions"))return()=>({[k]:null,...u});try{let n=`this.${k} = null;`;for(const ba in u){const K=Q.test(ba)?`.${ba}`:`["${ba}"]`;n+=`this${K} = ${JSON.stringify(u[ba])};`}const H=(new Function(`\n      return class AttributesClass$${F++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `))();return()=>new H}catch(n){return()=>({[k]:null,...u})}};l.createDefaultTemplate=function(u={}){return[{name:"New Feature",description:"",prototype:{attributes:ma.clone(u)}}]};
l.createDrawingInfo=function(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?R.defaultPointSymbolJSON:"esriGeometryPolyline"===u?R.defaultPolylineSymbolJSON:R.defaultPolygonSymbolJSON}}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const f=[252,146,31,255],ma={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",
width:.75,color:[153,153,153,255]}},Z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};l.defaultColor=f;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=ma;l.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=Z;l.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",
kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),
function(l,f,ma,Z,R,Q){function F(e){return new ba(e)}function u(){return k.apply(this,arguments)}function k(){k=ma._asyncToGenerator(function*(){Z.isNone(y)&&(y=yield new Promise((e,p)=>l(["../../../../geometry/geometryEngineJSON"],e,p)));return y});return k.apply(this,arguments)}function n(){n=ma._asyncToGenerator(function*(e,p){!R.isValid(e)||"esriGeometryPolygon"!==p&&"esriGeometryPolyline"!==p||(yield u())});return n.apply(this,arguments)}let H=function(){this.description=this.code=null},ba=
function(e){this.error=new H;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=e},K=function(e){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=e};const m=new Set;let y;f.createFeatureEditErrorResult=F;f.createFeatureEditSuccessResult=function(e){return new K(e)};f.loadGeometryEngineForSimplify=function(e,p){return n.apply(this,arguments)};f.mixAttributes=function(e,p,L,W=!1,U){m.clear();for(const w in L){const D=e.get(w);if(!D)continue;var aa=
L[w],G=D,q=aa;let O=q;"string"===typeof q&&Q.isNumericField(G)?O=parseFloat(q):null!=q&&Q.isStringField(G)&&"string"!==typeof q&&(O=String(q));G=Q.sanitizeNullFieldValue(O);G!==aa&&U&&U.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:D,originalValue:aa,sanitizedValue:G}});m.add(D.name);if(D&&(W||D.editable)){if(aa=Q.validateFieldValue(D,G))return F(Q.validationErrorToString(aa,D,G));p[D.name]=G}}for(const w of e?.requiredFields??[])if(!m.has(w.name))return F(`missing required field "${w.name}"`);
return null};f.simplify=function(e,p){if(!e||!R.isValid(p))return e;if("rings"in e||"paths"in e){if(Z.isNone(y))throw new TypeError("geometry engine not loaded");return y.simplify(p,e)}return e};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(l,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",
esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});l.kebabDict=f;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(l,f,ma,Z,R,Q,F,u,k,n,H,ba,K,m,y){function e(aa){return Z.isPoint(aa)?
null!=aa.z:!!aa.hasZ}function p(aa){return Z.isPoint(aa)?null!=aa.m:!!aa.hasM}const L=R.WGS84,W={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:R.WGS84},U={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,
supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function aa(){this._nextObjectId=this._queryEngine=null}var G=aa.prototype;G.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};G.load=
function(){var q=l._asyncToGenerator(function*(w){var D=[];const {features:O}=w;var C=this._inferLayerProperties(O,w.fields);const E=w.fields||[],N=null!=w.hasM?w.hasM:!!C.hasM,M=null!=w.hasZ?w.hasZ:!!C.hasZ;var B=!w.spatialReference&&!C.spatialReference;const z=B?L:w.spatialReference||C.spatialReference,h=B?W:null,t=w.geometryType||C.geometryType;let P=w.objectIdField||C.objectIdField;w=w.timeInfo;if(t&&(B&&D.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),
!t))throw new f("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!P)throw new f("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");C.objectIdField&&P!==C.objectIdField&&(D.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${P}" doesn't match the field name "${C.objectIdField}", found in the provided fields`}),P=C.objectIdField);if(P&&!C.objectIdField){let sa=
null;E.some(za=>za.name===P?(sa=za,!0):!1)?(sa.type="esriFieldTypeOID",sa.editable=!1,sa.nullable=!1):E.unshift({alias:P,name:P,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const sa of E){null==sa.name&&(sa.name=sa.alias);null==sa.alias&&(sa.alias=sa.name);if(!sa.name)throw new f("feature-layer:invalid-field-name","field name is missing",{field:sa});sa.name===P&&(sa.type="esriFieldTypeOID");if(!m.kebabDict.jsonValues.includes(sa.type))throw new f("feature-layer:invalid-field-type",`invalid type for field "${sa.name}"`,
{field:sa});}C={};for(var ja of E)"esriFieldTypeOID"!==ja.type&&"esriFieldTypeGlobalID"!==ja.type&&(B=y.getFieldDefaultValue(ja),void 0!==B&&(C[ja.name]=B));this._fieldsIndex=new K(E);this._createDefaultAttributes=H.createDefaultAttributesFunction(C,P);w&&(w.startTimeField&&((ja=this._fieldsIndex.get(w.startTimeField))?(w.startTimeField=ja.name,ja.type="esriFieldTypeDate"):w.startTimeField=null),w.endTimeField&&((ja=this._fieldsIndex.get(w.endTimeField))?(w.endTimeField=ja.name,ja.type="esriFieldTypeDate"):
w.endTimeField=null),w.trackIdField&&((ja=this._fieldsIndex.get(w.trackIdField))?w.trackIdField=ja.name:(w.trackIdField=null,D.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:w}}))),w.startTimeField||w.endTimeField||(D.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:w}}),w=null));D={warnings:D,featureErrors:[],layerDefinition:{...U,drawingInfo:H.createDrawingInfo(t),
templates:H.createDefaultTemplate(C),extent:h,geometryType:t,objectIdField:P,fields:E,hasZ:M,hasM:N,timeInfo:w},assignedObjectIds:{}};this._queryEngine=new n.QueryEngine({fields:E,geometryType:t,hasM:N,hasZ:M,objectIdField:P,spatialReference:z,featureStore:new u({geometryType:t,hasM:N,hasZ:M}),timeInfo:w,cacheSpatialQueries:!0});if(!O||!O.length)return this._nextObjectId=F.initialObjectId,D;this._nextObjectId=F.findLastObjectIdFromFeatures(P,O)+1;yield k.checkProjectionSupport(O,z);return this._loadInitialFeatures(D,
O)});return function(w){return q.apply(this,arguments)}}();G.applyEdits=function(){var q=l._asyncToGenerator(function*(w){const {spatialReference:D,geometryType:O}=this._queryEngine;yield Promise.all([ba.loadGeometryEngineForSimplify(D,O),k.checkProjectionSupport(w.adds,D),k.checkProjectionSupport(w.updates,D)]);return this._applyEdits(w)});return function(w){return q.apply(this,arguments)}}();G.queryFeatures=function(q,w={}){return this._queryEngine.executeQuery(q,w.signal)};G.queryFeatureCount=
function(q,w={}){return this._queryEngine.executeQueryForCount(q,w.signal)};G.queryObjectIds=function(q,w={}){return this._queryEngine.executeQueryForIds(q,w.signal)};G.queryExtent=function(q,w={}){return this._queryEngine.executeQueryForExtent(q,w.signal)};G.querySnapping=function(q,w={}){return this._queryEngine.executeQueryForSnapping(q,w.signal)};G._inferLayerProperties=function(q,w){let D=void 0,O=void 0,C=null,E=null,N=null;for(const M of q)if(q=M.geometry,!ma.isNone(q)&&(C||(C=Z.getJsonType(q)),
E||(E=q.spatialReference),null==D&&(D=e(q)),null==O&&(O=p(q)),C&&E&&null!=D&&null!=O))break;if(w&&w.length){let M=null;w.some(B=>{const z="esriFieldTypeOID"===B.type,h=!B.type&&B.name&&"objectid"===B.name.toLowerCase();M=B;return z||h})&&(N=M.name)}return{geometryType:C,spatialReference:E,objectIdField:N,hasM:O,hasZ:D}};G._loadInitialFeatures=function(){var q=l._asyncToGenerator(function*(w,D){const {geometryType:O,hasM:C,hasZ:E,objectIdField:N,spatialReference:M,featureStore:B}=this._queryEngine,
z=[];for(const P of D){null!=P.uid&&(w.assignedObjectIds[P.uid]=-1);if(P.geometry&&O!==Z.getJsonType(P.geometry)){w.featureErrors.push(ba.createFeatureEditErrorResult("Incorrect geometry type."));continue}D=this._createDefaultAttributes();const ja=ba.mixAttributes(this._fieldsIndex,D,P.attributes,!0,w.warnings);ja?w.featureErrors.push(ja):(this._assignObjectId(D,P.attributes,!0),P.attributes=D,null!=P.uid&&(w.assignedObjectIds[P.uid]=P.attributes[N]),ma.isSome(P.geometry)&&(P.geometry=k.project(P.geometry,
P.geometry.spatialReference,M)),z.push(P))}B.addMany(Q.convertFromFeatures([],z,O,E,C,N));const {fullExtent:h,timeExtent:t}=yield this._queryEngine.fetchRecomputedExtents();w.layerDefinition.extent=h;if(t){const {start:P,end:ja}=t;w.layerDefinition.timeInfo.timeExtent=[P,ja]}return w});return function(w,D){return q.apply(this,arguments)}}();G._applyEdits=function(){var q=l._asyncToGenerator(function*(w){const {adds:D,updates:O,deletes:C}=w;w={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};
D&&D.length&&this._applyAddEdits(w,D);O&&O.length&&this._applyUpdateEdits(w,O);if(C&&C.length){for(const M of C)w.deleteResults.push(ba.createFeatureEditSuccessResult(M));this._queryEngine.featureStore.removeManyById(C)}const {fullExtent:E,timeExtent:N}=yield this._queryEngine.fetchRecomputedExtents();return{extent:E,timeExtent:N,featureEditResults:w}});return function(w){return q.apply(this,arguments)}}();G._applyAddEdits=function(q,w){const {addResults:D}=q,{geometryType:O,hasM:C,hasZ:E,objectIdField:N,
spatialReference:M,featureStore:B}=this._queryEngine,z=[];for(const h of w){if(h.geometry&&O!==Z.getJsonType(h.geometry)){D.push(ba.createFeatureEditErrorResult("Incorrect geometry type."));continue}w=this._createDefaultAttributes();const t=ba.mixAttributes(this._fieldsIndex,w,h.attributes);t?D.push(t):(this._assignObjectId(w,h.attributes),h.attributes=w,null!=h.uid&&(q.uidToObjectId[h.uid]=h.attributes[N]),ma.isSome(h.geometry)&&(w=h.geometry.spatialReference??M,h.geometry=k.project(ba.simplify(h.geometry,
w),w,M)),z.push(h),D.push(ba.createFeatureEditSuccessResult(h.attributes[N])))}B.addMany(Q.convertFromFeatures([],z,O,E,C,N))};G._applyUpdateEdits=function({updateResults:q},w){const {geometryType:D,hasM:O,hasZ:C,objectIdField:E,spatialReference:N,featureStore:M}=this._queryEngine;for(const z of w){const {attributes:h,geometry:t}=z;w=h&&h[E];if(null==w){q.push(ba.createFeatureEditErrorResult(`Identifier field ${E} missing`));continue}if(!M.has(w)){q.push(ba.createFeatureEditErrorResult(`Feature with object id ${w} missing`));
continue}const P=Q.convertToFeature(M.getFeature(w),D,C,O);if(ma.isSome(t)){if(D!==Z.getJsonType(t)){q.push(ba.createFeatureEditErrorResult("Incorrect geometry type."));continue}var B=t.spatialReference??N;P.geometry=k.project(ba.simplify(t,B),B,N)}if(h&&(B=ba.mixAttributes(this._fieldsIndex,P.attributes,h))){q.push(B);continue}M.add(Q.convertFromFeature(P,D,C,O,E));q.push(ba.createFeatureEditSuccessResult(w))}};G._assignObjectId=function(q,w,D=!1){const O=this._queryEngine.objectIdField;D?w&&isFinite(w[O])?
q[O]=w[O]:q[O]=this._nextObjectId++:q[O]=this._nextObjectId++};return aa}()});