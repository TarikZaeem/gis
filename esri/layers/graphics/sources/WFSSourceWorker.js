// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/ensureType ./arrayUtils ./accessorSupport/decorators/subclass".split(" "),function(g,d,ja,T,I,N,E,t,k,m){function G(){G=d._asyncToGenerator(function*(y,B,S){return(yield N.eachAlways(y.map((F,r)=>B.apply(S,[F,r])))).map(F=>F.value)});return G.apply(this,arguments)}function Y(y){return{ok:!0,
value:y}}function M(y){return{ok:!1,error:y}}function n(y){return I.isSome(y)&&!0===y.ok?y.value:null}function w(y){return I.isSome(y)&&!1===y.ok?y.error:null}function e(){e=d._asyncToGenerator(function*(y){if(I.isNone(y))return{ok:!1,error:Error("no promise provided")};try{return Y(yield y)}catch(B){return M(B)}});return e.apply(this,arguments)}function q(){q=d._asyncToGenerator(function*(y){try{return Y(yield y)}catch(B){return N.throwIfAbortError(B),M(B)}});return q.apply(this,arguments)}let z=
function(y){function B(F,r){var C=y.call(this,{})||this;C._result=null;C._abortHandle=null;C.abort=()=>{C._abortController=I.abortMaybe(C._abortController)};C.remove=C.abort;C._abortController=new AbortController;const {signal:K}=C._abortController;C.promise=F(K);C.promise.then(U=>{C._result=Y(U);C._cleanup()},U=>{C._result=M(U);C._cleanup()});C._abortHandle=N.onAbort(r,C.abort);return C}d._inheritsLoose(B,y);var S=B.prototype;S.normalizeCtorArgs=function(){return{}};S.destroy=function(){this.abort()};
S._cleanup=function(){this._abortHandle=I.removeMaybe(this._abortHandle);this._abortController=null};d._createClass(B,[{key:"value",get:function(){return n(this._result)}},{key:"error",get:function(){return w(this._result)}},{key:"finished",get:function(){return I.isSome(this._result)}}]);return B}(T);ja.__decorate([E.property()],z.prototype,"value",null);ja.__decorate([E.property()],z.prototype,"error",null);ja.__decorate([E.property()],z.prototype,"finished",null);ja.__decorate([E.property()],z.prototype,
"promise",void 0);ja.__decorate([E.property()],z.prototype,"_result",void 0);z=ja.__decorate([m.subclass("esri.core.asyncUtils.ReactiveTask")],z);g.assertResult=function(y){if(!0===y.ok)return y.value;throw y.error;};g.createTask=function(y,B){return new z(y,B)};g.forEach=function(y,B,S){return N.eachAlways(y.map((F,r)=>B.apply(S,[F,r])))};g.makeResultError=M;g.makeResultOk=Y;g.map=function(y,B,S){return G.apply(this,arguments)};g.result=function(y){return e.apply(this,arguments)};g.resultError=w;
g.resultOrAbort=function(y){return q.apply(this,arguments)};g.resultValue=n;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(g,d,ja,T,I,N,E,t,k,m){function G(x,O){return x?
O?4:3:O?3:2}function Y(x,O,da,aa){if(x){if(da)return O&&aa?p:Fa;if(O&&aa)return c}else if(O&&aa)return Fa;return Da}function M({scale:x,translate:O},da){return Math.round((da-O[0])/x[0])}function n({scale:x,translate:O},da){return Math.round((O[1]-da)/x[1])}function w({scale:x,translate:O},da,aa){return da*x[aa]+O[aa]}function e(x){x=x.coords;return{x:x[0],y:x[1]}}function q(x,O){x.coords[0]=O.x;x.coords[1]=O.y;return x}function z(x){x=x.coords;return{x:x[0],y:x[1],z:x[2]}}function y(x,O){x.coords[0]=
O.x;x.coords[1]=O.y;x.coords[2]=O.z;return x}function B(x){x=x.coords;return{x:x[0],y:x[1],m:x[2]}}function S(x,O){x.coords[0]=O.x;x.coords[1]=O.y;x.coords[2]=O.m;return x}function F(x){x=x.coords;return{x:x[0],y:x[1],z:x[2],m:x[3]}}function r(x,O){x.coords[0]=O.x;x.coords[1]=O.y;x.coords[2]=O.z;x.coords[3]=O.m;return x}function C(x,O){return x&&O?r:x?y:O?S:q}function K(x,O,da,aa,ia){da=C(da,aa);for(const {geometry:na,attributes:ra}of O)O=T.isSome(na)?da(new m,na):null,x.push(new t.OptimizedFeature(O,
ra,null,ia?ra[ia]:void 0));return x}function U(x,O,da,aa){for(const {geometry:ia,attributes:na}of O)x.push({attributes:na,geometry:T.isSome(ia)?J(ia,da,aa):null});return x}function J(x,O,da){if(T.isNone(x))return null;const aa=G(O,da),ia=[];for(let na=0;na<x.coords.length;na+=aa){const ra=[];for(let W=0;W<aa;W++)ra.push(x.coords[na+W]);ia.push(ra)}return O?da?{points:ia,hasZ:O,hasM:da}:{points:ia,hasZ:O}:da?{points:ia,hasM:da}:{points:ia}}function L(x,O,da,aa,ia){da=G(da,aa);for(const {geometry:na,
attributes:ra}of O)O=T.isSome(na)?Q(new m,na,da):null,x.push(new t.OptimizedFeature(O,ra,null,ia?ra[ia]:void 0));return x}function Q(x,O,da=G(O.hasZ,O.hasM)){x.lengths[0]=O.points.length;const aa=x.coords;let ia=0;for(const na of O.points)for(O=0;O<da;O++)aa[ia++]=na[O];return x}function R(x,O,da){if(!x)return null;const aa=G(O,da),{coords:ia,lengths:na}=x;x=[];let ra=0;for(const W of na){const ea=[];for(let pa=0;pa<W;pa++){const wa=[];for(let Ca=0;Ca<aa;Ca++)wa.push(ia[ra++]);ea.push(wa)}x.push(ea)}return O?
da?{paths:x,hasZ:O,hasM:da}:{paths:x,hasZ:O}:da?{paths:x,hasM:da}:{paths:x}}function H(x,O,da,aa,ia){da=G(da,aa);for(const {geometry:na,attributes:ra}of O)O=T.isSome(na)?A(new m,na,da):null,x.push(new t.OptimizedFeature(O,ra,null,ia?ra[ia]:void 0));return x}function A(x,O,da=G(O.hasZ,O.hasM)){const {lengths:aa,coords:ia}=x;let na=0;for(const ra of O.paths){for(const W of ra)for(O=0;O<da;O++)ia[na++]=W[O];aa.push(ra.length)}return x}function l(x,O,da){if(!x)return null;const aa=G(O,da),{coords:ia,
lengths:na}=x;x=[];let ra=0;for(const W of na){const ea=[];for(let pa=0;pa<W;pa++){const wa=[];for(let Ca=0;Ca<aa;Ca++)wa.push(ia[ra++]);ea.push(wa)}x.push(ea)}return O?da?{rings:x,hasZ:O,hasM:da}:{rings:x,hasZ:O}:da?{rings:x,hasM:da}:{rings:x}}function u(x,O,da,aa,ia){for(const {geometry:na,centroid:ra,attributes:W}of O){O=T.isSome(na)?Z(new m,na,da,aa):null;const ea=ia?W[ia]:void 0;T.isSome(ra)?x.push(new t.OptimizedFeature(O,W,q(new m,ra),ea)):x.push(new t.OptimizedFeature(O,W,null,ea))}return x}
function Z(x,O,da=O.hasZ,aa=O.hasM){ka(x,O.rings,da,aa);return x}function ka(x,O,da,aa){da=G(da,aa);const {lengths:ia,coords:na}=x;aa=0;Sa(x);for(const ra of O){for(const W of ra)for(O=0;O<da;O++)na[aa++]=W[O];ia.push(ra.length)}return x}function ua(x,O,da,aa,ia,na){bb(x);if(!da){for(const ra of O)x.push(new t.OptimizedFeature(null,ra.attributes,null,na?ra.attributes[na]:void 0));return x}switch(da){case "esriGeometryPoint":return K(x,O,aa,ia,na);case "esriGeometryMultipoint":return L(x,O,aa,ia,na);
case "esriGeometryPolyline":return H(x,O,aa,ia,na);case "esriGeometryPolygon":return u(x,O,aa,ia,na);default:Xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${da}'`)),bb(x)}return x}function za(x,O,da,aa){x=x&&("coords"in x?x:x.geometry);if(T.isNone(x))return null;switch(O){case "esriGeometryPoint":return O=e,da&&aa?O=F:da?O=z:aa&&(O=B),O(x);case "esriGeometryMultipoint":return J(x,da,aa);case "esriGeometryPolyline":return R(x,da,aa);case "esriGeometryPolygon":return l(x,
da,aa);default:return Xa.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${O}'`)),null}}function Ha(x,O,da,aa,ia){bb(x);if(T.isNone(da)){for(const ra of O)x.push({attributes:ra.attributes});return x}switch(da){case "esriGeometryPoint":da=e;aa&&ia?da=F:aa?da=z:ia&&(da=B);for(var na of O){const {geometry:ra,attributes:W}=na;aa=T.isSome(ra)?da(ra):null;x.push({attributes:W,geometry:aa})}break;case "esriGeometryMultipoint":return U(x,O,aa,ia);case "esriGeometryPolyline":for(const {geometry:ra,
attributes:W}of O)x.push({attributes:W,geometry:T.isSome(ra)?R(ra,aa,ia):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:W,centroid:ea}of O)na=T.isSome(ra)?l(ra,aa,ia):null,T.isSome(ea)?(O=e(ea),x.push({attributes:W,centroid:O,geometry:na})):x.push({attributes:W,geometry:na});break;default:Xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${da}'`))}return x}function Ka(x,O,da,aa,ia,na,ra=da,W=aa){Sa(x);if(T.isNone(O)||!O.coords.length)return null;
ia=Aa[ia];const {coords:ea,lengths:pa}=O;O=G(da,aa);const wa=G(da&&ra,aa&&W);da=Y(da,aa,ra,W);if(!pa.length)return da(x.coords,ea,0,0,M(na,ea[0]),n(na,ea[1])),Sa(x,O,0),x;let Ca,Oa=0,Ma,Ta=0;for(const Va of pa){if(Va<ia)continue;let Ja=0;Ma=Ta;W=aa=M(na,ea[Oa]);Ca=ra=n(na,ea[Oa+1]);da(x.coords,ea,Ma,Oa,W,Ca);Ja++;Oa+=O;Ma+=wa;for(let Wa=1;Wa<Va;Wa++,Oa+=O)if(W=M(na,ea[Oa]),Ca=n(na,ea[Oa+1]),W!==aa||Ca!==ra)da(x.coords,ea,Ma,Oa,W-aa,Ca-ra),Ma+=wa,Ja++,aa=W,ra=Ca;Ja>=ia&&(x.lengths.push(Ja),Ta=Ma)}bb(x.coords,
Ta);return x.coords.length?x:null}function Ia(x,O,da,aa,ia,na,ra){let W=aa,ea=0;for(let wa=na+da;wa<ra;wa+=da){var pa=O[wa];const Ca=O[wa+1],Oa=O[ra],Ma=O[ra+1];let Ta=O[na],Va=O[na+1],Ja=Oa-Ta,Wa=Ma-Va;if(0!==Ja||0!==Wa){const xa=((pa-Ta)*Ja+(Ca-Va)*Wa)/(Ja*Ja+Wa*Wa);1<xa?(Ta=Oa,Va=Ma):0<xa&&(Ta+=Ja*xa,Va+=Wa*xa)}Ja=pa-Ta;Wa=Ca-Va;pa=Ja*Ja+Wa*Wa;pa>W&&(ea=wa,W=pa)}W>aa&&(ea-na>da&&Ia(x,O,da,aa,ia,na,ea),ia(x,O,x.length,ea,O[ea],O[ea+1]),ra-ea>da&&Ia(x,O,da,aa,ia,ea,ra))}function Ua(x,O,da,aa,ia){const {coords:na,
lengths:ra}=O;da=G(da,aa);if(!na.length)return x!==O&&Sa(x),x;T.assertIsSome(ia);const {originPosition:W,scale:ea,translate:pa}=ia;ia=ta;ia.originPosition=W;aa=ia.scale;aa[0]=ea[0]??1;aa[1]=-(ea[1]??1);aa[2]=ea[2]??1;aa[3]=ea[3]??1;var wa=ia.translate;wa[0]=pa[0]??0;wa[1]=pa[1]??0;wa[2]=pa[2]??0;wa[3]=pa[3]??0;if(!ra.length){for(aa=0;aa<da;++aa)x.coords[aa]=w(ia,na[aa],aa);x!==O&&Sa(x,da,0);return x}wa=0;for(let Oa=0;Oa<ra.length;Oa++){const Ma=ra[Oa];x.lengths[Oa]=Ma;for(var Ca=0;Ca<da;++Ca)x.coords[wa+
Ca]=w(ia,na[wa+Ca],Ca);Ca=x.coords[wa];let Ta=x.coords[wa+1];wa+=da;for(let Va=1;Va<Ma;Va++,wa+=da){Ca+=na[wa]*aa[0];Ta+=na[wa+1]*aa[1];x.coords[wa]=Ca;x.coords[wa+1]=Ta;for(let Ja=2;Ja<da;++Ja)x.coords[wa+Ja]=w(ia,na[wa+Ja],Ja)}}x!==O&&Sa(x,na.length,ra.length);return x}function Qa(x,O,da,aa){let ia=0,na=x[aa*O],ra=x[aa*(O+1)];for(let W=1;W<da;W++){const ea=na+x[aa*(O+W)],pa=ra+x[aa*(O+W)+1],wa=(ea-na)*(pa+ra);na=ea;ra=pa;ia+=wa}return.5*ia}function Sa(x,O=0,da=0){bb(x.lengths,da);bb(x.coords,O)}
function bb(x,O=0){x.length!==O&&(x.length=O)}const Xa=ja.getLogger("esri.layers.graphics.featureConversionUtils"),Aa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Da=(x,O,da,aa,ia,na)=>{x[da]=ia;x[da+1]=na},Fa=(x,O,da,aa,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=O[aa+2]},c=(x,O,da,aa,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=O[aa+3]},p=(x,O,da,aa,ia,na)=>{x[da]=ia;x[da+1]=na;x[da+2]=O[aa+2];x[da+3]=O[aa+3]},V=[],la=[],ta={originPosition:"lowerLeft",scale:[1,1,
1,1],translate:[0,0,0,0]};g.convertFromFeature=function(x,O,da,aa,ia){V[0]=x;[x]=ua(la,V,O,da,aa,ia);bb(V);bb(la);return x};g.convertFromFeatureSet=function(x,O){const da=new k,{hasM:aa,hasZ:ia,features:na,objectIdFieldName:ra,spatialReference:W,geometryType:ea,exceededTransferLimit:pa,transform:wa,fields:Ca}=x;Ca&&(da.fields=Ca);da.geometryType=ea??null;da.objectIdFieldName=ra??O??null;da.spatialReference=W??null;if(!da.objectIdFieldName)return Xa.error(new d("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),da;na&&ua(da.features,na,ea,ia,aa,da.objectIdFieldName);pa&&(da.exceededTransferLimit=pa);aa&&(da.hasM=aa);ia&&(da.hasZ=ia);wa&&(da.transform=wa);return da};g.convertFromFeatures=ua;g.convertFromGeometry=function(x,O,da){if(T.isNone(x))return null;const aa=new m;"hasZ"in x&&null==O&&(O=x.hasZ);"hasM"in x&&null==da&&(da=x.hasM);if(E.isPoint(x))return C(null!=O?O:null!=x.z,null!=da?da:null!=x.m)(aa,x);if(E.isPolygon(x))return Z(aa,x,O,da);if(E.isPolyline(x))return A(aa,
x,G(O,da));if(E.isMultipoint(x))return Q(aa,x,G(O,da));Xa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${x}'`))};g.convertFromGraphics=function(x,O,da,aa,ia,na){const ra=x.length;switch(da){case "esriGeometryPoint":K(x,O,aa,ia,na);break;case "esriGeometryMultipoint":L(x,O,aa,ia,na);break;case "esriGeometryPolyline":H(x,O,aa,ia,na);break;case "esriGeometryPolygon":u(x,O,aa,ia,na);break;default:Xa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${da}'`))}for(aa=
0;aa<O.length;aa++)x[aa+ra].geometryType=da,x[aa+ra].insertAfter=O[aa].insertAfter,x[aa+ra].groupId=O[aa].groupId;return x};g.convertFromMultipoint=Q;g.convertFromMultipointFeatures=L;g.convertFromNestedArray=ka;g.convertFromPoint=function(x,O,da=C(null!=O.z,null!=O.m)){return da(x,O)};g.convertFromPointFeatures=K;g.convertFromPolygon=Z;g.convertFromPolyline=A;g.convertFromPolylineFeatures=H;g.convertToFeature=function(x,O,da,aa){la[0]=x;Ha(V,la,O,da,aa);x=V[0];bb(V);bb(la);return x};g.convertToFeatureSet=
function(x){const {objectIdFieldName:O,spatialReference:da,transform:aa,fields:ia,hasM:na,hasZ:ra,features:W,geometryType:ea,exceededTransferLimit:pa,uniqueIdField:wa,queryGeometry:Ca,queryGeometryType:Oa}=x;x=Ha([],W,ea,ra,na);const Ma=za(Ca,Oa,!1,!1);x={features:x,fields:ia,geometryType:ea,objectIdFieldName:O,spatialReference:da,uniqueIdField:wa,queryGeometry:Ma};aa&&(x.transform=aa);pa&&(x.exceededTransferLimit=pa);na&&(x.hasM=na);ra&&(x.hasZ=ra);return x};g.convertToFeatures=Ha;g.convertToGeometry=
za;g.convertToMultipoint=J;g.convertToMultipointFeatures=U;g.convertToPoint=function(x,O,da){return x?O?da?F(x):z(x):da?B(x):e(x):null};g.convertToPolygon=l;g.convertToPolyline=R;g.deltaDecodeGeometry=function(x,O){if(T.isNone(x))return null;const da=x.clone(),aa=x.coords;x=x.lengths;let ia=0;for(let W=0;W<x.length;W++){const ea=x[W];var na=aa[O*ia],ra=aa[O*ia+1];for(let pa=1;pa<ea;pa++)na+=aa[O*(ia+pa)],ra+=aa[O*(ia+pa)+1],da.coords[O*(ia+pa)]=na,da.coords[O*(ia+pa)+1]=ra;ia+=ea}return da};g.deltaEncodeGeometry=
function(x,O){const da=x.clone(),aa=x.coords;x=x.lengths;let ia=0;for(let ra=0;ra<x.length;ra++){const W=x[ra];let ea=aa[O*ia];var na=aa[O*ia+1];for(let pa=1;pa<W;pa++){const wa=aa[O*(ia+pa)],Ca=aa[O*(ia+pa)+1];na=Ca-na;da.coords[O*(ia+pa)]=wa-ea;da.coords[O*(ia+pa)+1]=na;ea=wa;na=Ca}ia+=W}return da};g.generalizeOptimizedGeometry=function(x,O,da,aa,ia,na,ra=da,W=aa){Sa(x);if(!O||!O.coords.length)return null;ia=Aa[ia];const {coords:ea,lengths:pa}=O;O=G(da,aa);const wa=G(da&&ra,aa&&W);da=Y(da,aa,ra,
W);if(!pa.length)return da(x.coords,ea,0,0,ea[0],ea[1]),Sa(x,O,0),x;aa=0;na*=na;for(const Ca of pa){if(Ca<ia){aa+=Ca*O;continue}ra=x.coords.length/wa;W=aa;const Oa=aa+(Ca-1)*O;da(x.coords,ea,x.coords.length,W,ea[W],ea[W+1]);Ia(x.coords,ea,O,na,da,W,Oa);da(x.coords,ea,x.coords.length,Oa,ea[Oa],ea[Oa+1]);W=x.coords.length/wa-ra;W>=ia?x.lengths.push(W):bb(x.coords,ra*wa);aa+=Ca*O}return x.coords.length?x:null};g.getBoundsOptimizedGeometry=function(x,O,da,aa){if(T.isNone(O)||!O.coords||!O.coords.length)return null;
da=G(da,aa);let ia=aa=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(O&&O.coords){O=O.coords;for(let W=0;W<O.length;W+=da){const ea=O[W],pa=O[W+1];aa=Math.min(aa,ea);na=Math.max(na,ea);ia=Math.min(ia,pa);ra=Math.max(ra,pa)}}I.is(x)?I.fromRectValues(x,aa,ia,na,ra):N.fromValues(aa,ia,na,ra,x);return x};g.getQuantizedArea=function(x,O){const {coords:da,lengths:aa}=x;let ia=x=0;for(let na=0;na<aa.length;na++){const ra=aa[na];ia+=Qa(da,x,ra,O);x+=ra}return Math.abs(ia)};
g.getQuantizedBoundsOptimizedGeometry=function(x,O,da,aa){da=G(da,aa);const {lengths:ia,coords:na}=O;aa=O=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY,ea=0;for(const pa of ia){let wa=na[ea],Ca=na[ea+1];O=Math.min(wa,O);aa=Math.min(Ca,aa);ra=Math.max(wa,ra);W=Math.max(Ca,W);ea+=da;for(let Oa=1;Oa<pa;Oa++,ea+=da){const Ma=na[ea],Ta=na[ea+1];wa+=Ma;Ca+=Ta;0>Ma&&(O=Math.min(O,wa));0<Ma&&(ra=Math.max(ra,wa));0>Ta?aa=Math.min(aa,Ca):0<Ta&&(W=Math.max(W,Ca))}}x[0]=
O;x[1]=aa;x[2]=ra;x[3]=W;return x};g.getSignedQuantizedRingArea=Qa;g.quantizeOptimizedFeatureSet=function(x,O){const {geometryType:da,features:aa,hasM:ia,hasZ:na}=O;if(!x)return O;for(let ra=0;ra<aa.length;ra++){const W=aa[ra],ea=W.weakClone();ea.geometry=new m;Ka(ea.geometry,W.geometry,ia,na,da,x);W.centroid&&(ea.centroid=new m,Ka(ea.centroid,W.centroid,ia,na,"esriGeometryPoint",x));aa[ra]=ea}O.transform=x;return O};g.quantizeOptimizedGeometry=Ka;g.quantizeX=M;g.quantizeY=n;g.removeCollinearVectices=
function(x,O,da,aa,ia){if(!O||!O.coords||!O.coords.length)return null;da=Aa[da];const {coords:na,lengths:ra}=O;O=Y(aa,ia,aa,ia);aa=G(aa,ia);let W=ia=0,ea=0,pa=0;for(const Oa of ra){W=pa;O(x.coords,na,W,ia,na[ia],na[ia+1]);ia+=aa;var wa=na[ia];let Ma=na[ia+1],Ta=wa,Va=Ma;var Ca=Ma/wa;W+=aa;O(x.coords,na,W,ia,Ta,Va);ia+=aa;for(let Ja=2;Ja<Oa;Ja++){wa=na[ia];Ma=na[ia+1];const Wa=Ma/wa,xa=Ca===Wa||!isFinite(Ca)&&!isFinite(Wa);Ca=xa&&isFinite(Wa)?0<=Ca&&0<=Wa||0>=Ca&&0>=Wa:0<=Va&&0<=Ma||0>=Va&&0>=Ma;xa&&
Ca?(Ta+=wa,Va+=Ma):(Ta=wa,Va=Ma,W+=aa);O(x.coords,na,W,ia,Ta,Va);ia+=aa;Ca=Wa}W+=aa;wa=(W-pa)/aa;wa>=da&&(x.lengths[ea]=wa,pa=W,ea++)}x.coords.length>pa&&(x.coords.length=pa);x.lengths.length>ea&&(x.lengths.length=ea);return x.coords.length&&x.lengths.length?x:null};g.removeZMValues=function(x,O,da,aa,ia,na){Sa(x);x.lengths.push(...O.lengths);if(da===ia&&aa===na)for(var ra=0;ra<O.coords.length;ra++)x.coords.push(O.coords[ra]);else for(ra=G(da,aa),da=Y(da,aa,ia,na),O=O.coords,aa=0;aa<O.length;aa+=
ra)da(x.coords,O,x.coords.length,aa,O[aa],O[aa+1]);return x};g.unquantizeOptimizedFeatureSet=function(x){const {transform:O,features:da,hasM:aa,hasZ:ia}=x;if(!O)return x;for(const na of da)T.isSome(na.geometry)&&Ua(na.geometry,na.geometry,aa,ia,O),T.isSome(na.centroid)&&Ua(na.centroid,na.centroid,aa,ia,O);x.transform=null;return x};g.unquantizeOptimizedGeometry=Ua;g.unquantizeValue=w;g.unquantizeX=function(x,O){return w(x,O,0)};g.unquantizeY=function(x,O){return w(x,-O,1)};Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(g,d,ja,T){function I(e=n){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function N(e,q,z,y,B,S,F=I()){F[0]=e;F[1]=q;F[2]=z;F[3]=y;F[4]=B;F[5]=S;return F}function E(e){return e[0]>=e[3]?0:e[3]-e[0]}function t(e){return e[1]>=e[4]?0:e[4]-e[1]}function k(e){return e[2]>=e[5]?0:e[5]-e[2]}function m(e,q){return Math.max(q[0],e[0])<=Math.min(q[3],
e[3])&&Math.max(q[1],e[1])<=Math.min(q[4],e[4])&&Math.max(q[2],e[2])<=Math.min(q[5],e[5])}function G(e,q){e[0]=q[0];e[1]=q[1];e[2]=q[2];e[3]=q[3];e[4]=q[4];e[5]=q[5];return e}function Y(e){return 6===e.length}const M=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],n=[0,0,0,0,0,0],w=I();g.NEGATIVE_INFINITY=M;g.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];g.ZERO=n;g.allFinite=function(e){for(let q=0;6>q;q++)if(!isFinite(e[q]))return!1;return!0};g.center=function(e,
q=[0,0,0]){q[0]=e[0]+E(e)/2;q[1]=e[1]+t(e)/2;q[2]=e[2]+k(e)/2;return q};g.contains=function(e,q){return q[0]>=e[0]&&q[1]>=e[1]&&q[2]>=e[2]&&q[3]<=e[3]&&q[4]<=e[4]&&q[5]<=e[5]};g.containsPoint=function(e,q){return q[0]>=e[0]&&q[1]>=e[1]&&q[2]>=e[2]&&q[0]<=e[3]&&q[1]<=e[4]&&q[2]<=e[5]};g.containsPointWithMargin=function(e,q,z){return q[0]>=e[0]-z&&q[1]>=e[1]-z&&q[2]>=e[2]-z&&q[0]<=e[3]+z&&q[1]<=e[4]+z&&q[2]<=e[5]+z};g.create=I;g.depth=t;g.diameter=function(e){const q=E(e),z=k(e);e=t(e);return Math.sqrt(q*
q+z*z+e*e)};g.empty=function(e){return e?G(e,M):I(M)};g.equals=function(e,q,z){if(d.isNone(e)||d.isNone(q))return e===q;if(!Y(e)||!Y(q))return!1;if(z)for(let y=0;y<e.length;y++){if(!z(e[y],q[y]))return!1}else for(z=0;z<e.length;z++)if(e[z]!==q[z])return!1;return!0};g.expandWithAABB=function(e,q){e[0]=Math.min(e[0],q[0]);e[1]=Math.min(e[1],q[1]);e[2]=Math.min(e[2],q[2]);e[3]=Math.max(e[3],q[3]);e[4]=Math.max(e[4],q[4]);e[5]=Math.max(e[5],q[5])};g.expandWithBuffer=function(e,q,z=0,y=q.length/3){let B=
e[0],S=e[1],F=e[2],r=e[3],C=e[4],K=e[5];for(let U=0;U<y;U++)B=Math.min(B,q[z+3*U]),S=Math.min(S,q[z+3*U+1]),F=Math.min(F,q[z+3*U+2]),r=Math.max(r,q[z+3*U]),C=Math.max(C,q[z+3*U+1]),K=Math.max(K,q[z+3*U+2]);e[0]=B;e[1]=S;e[2]=F;e[3]=r;e[4]=C;e[5]=K};g.expandWithNestedArray=function(e,q,z){const y=q.length;let B=e[0],S=e[1],F=e[2],r=e[3],C=e[4],K=e[5];if(z)for(z=0;z<y;z++){var U=q[z];B=Math.min(B,U[0]);S=Math.min(S,U[1]);F=Math.min(F,U[2]);r=Math.max(r,U[0]);C=Math.max(C,U[1]);K=Math.max(K,U[2])}else for(z=
0;z<y;z++)U=q[z],B=Math.min(B,U[0]),S=Math.min(S,U[1]),r=Math.max(r,U[0]),C=Math.max(C,U[1]);e[0]=B;e[1]=S;e[2]=F;e[3]=r;e[4]=C;e[5]=K};g.expandWithOffset=function(e,q,z,y){e[0]=Math.min(e[0],e[0]+q);e[3]=Math.max(e[3],e[3]+q);e[1]=Math.min(e[1],e[1]+z);e[4]=Math.max(e[4],e[4]+z);e[2]=Math.min(e[2],e[2]+y);e[5]=Math.max(e[5],e[5]+y)};g.expandWithRect=function(e,q){e[0]=Math.min(e[0],q[0]);e[1]=Math.min(e[1],q[1]);e[3]=Math.max(e[3],q[2]);e[4]=Math.max(e[4],q[3])};g.expandWithVec3=function(e,q){e[0]=
Math.min(e[0],q[0]);e[1]=Math.min(e[1],q[1]);e[2]=Math.min(e[2],q[2]);e[3]=Math.max(e[3],q[0]);e[4]=Math.max(e[4],q[1]);e[5]=Math.max(e[5],q[2])};g.fromExtent=function(e,q=I()){q[0]=e.xmin;q[1]=e.ymin;q[2]=e.hasZ?e.zmin:-Infinity;q[3]=e.xmax;q[4]=e.ymax;q[5]=e.hasZ?e.zmax:Infinity;return q};g.fromMinMax=function(e,q,z=I()){z[0]=e[0];z[1]=e[1];z[2]=e[2];z[3]=q[0];z[4]=q[1];z[5]=q[2];return z};g.fromRect=function(e,q){e[0]=q[0];e[1]=q[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=q[2];e[4]=q[3];e[5]=Number.POSITIVE_INFINITY;
return e};g.fromRectValues=function(e,q,z,y,B){e[0]=q;e[1]=z;e[2]=Number.NEGATIVE_INFINITY;e[3]=y;e[4]=B;e[5]=Number.POSITIVE_INFINITY;return e};g.fromValues=N;g.getMax=function(e,q){q[0]=e[3];q[1]=e[4];q[2]=e[5];return q};g.getMin=function(e,q){q[0]=e[0];q[1]=e[1];q[2]=e[2];return q};g.height=k;g.intersects=m;g.intersectsClippingArea=function(e,q){return d.isNone(q)?!0:m(e,q)};g.is=Y;g.isPoint=function(e){return 0===E(e)&&0===t(e)&&0===k(e)};g.maximumDimension=function(e){return Math.max(E(e),k(e),
t(e))};g.offset=function(e,q,z,y,B=e){B[0]=e[0]+q;B[1]=e[1]+z;B[2]=e[2]+y;B[3]=e[3]+q;B[4]=e[4]+z;B[5]=e[5]+y;return B};g.scale=function(e,q,z=e){const y=e[0]+E(e)/2,B=e[1]+t(e)/2,S=e[2]+k(e)/2;z[0]=y+(e[0]-y)*q;z[1]=B+(e[1]-B)*q;z[2]=S+(e[2]-S)*q;z[3]=y+(e[3]-y)*q;z[4]=B+(e[4]-B)*q;z[5]=S+(e[5]-S)*q;return z};g.set=G;g.setMax=function(e,q,z=e){z[3]=q[0];z[4]=q[1];z[5]=q[2];z!==e&&(z[0]=e[0],z[1]=e[1],z[2]=e[2]);return e};g.setMin=function(e,q,z=e){z[0]=q[0];z[1]=q[1];z[2]=q[2];z!==e&&(z[3]=e[3],
z[4]=e[4],z[5]=e[5]);return z};g.size=function(e,q=[0,0,0]){q[0]=E(e);q[1]=t(e);q[2]=k(e);return q};g.toExtent=function(e,q){return isFinite(e[2])||isFinite(e[5])?new ja({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:q}):new ja({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:q})};g.toRect=function(e,q){q||(q=T.create());q[0]=e[0];q[1]=e[1];q[2]=e[3];q[3]=e[4];return q};g.width=E;g.wrap=function(e,q,z,y,B,S){return N(e,q,z,y,B,S,w)};Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(g,d,ja,T,I){function N(n=M){return[n[0],n[1],n[2],n[3]]}function E(n,w){n!==w&&(n[0]=w[0],n[1]=w[1],n[2]=w[2],n[3]=w[3]);return n}function t(n){return T.isNone(n)||n[0]>=n[2]?0:n[2]-n[0]}function k(n){return n[1]>=n[3]?0:n[3]-n[1]}function m(n,w,e){return w>=n[0]&&e>=n[1]&&w<=n[2]&&e<=n[3]}function G(n){return null!=
n&&4===n.length}const Y=[Infinity,Infinity,-Infinity,-Infinity],M=[0,0,0,0];g.NEGATIVE_INFINITY=Y;g.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];g.UNIT=[0,0,1,1];g.ZERO=M;g.allFinite=function(n){for(let w=0;4>w;w++)if(!isFinite(n[w]))return!1;return!0};g.area=function(n){return t(n)*k(n)};g.center=function(n,w=[0,0]){w[0]=(n[0]+n[2])/2;w[1]=(n[1]+n[3])/2;return w};g.clone=function(n){return[n[0],n[1],n[2],n[3]]};g.contains=function(n,w){return w[0]>=n[0]&&w[2]<=n[2]&&w[1]>=n[1]&&w[3]<=
n[3]};g.containsPoint=function(n,w){return m(n,w[0],w[1])};g.containsPointObject=function(n,w){return m(n,w.x,w.y)};g.containsPointWithMargin=function(n,w,e){return w[0]>=n[0]-e&&w[1]>=n[1]-e&&w[0]<=n[2]+e&&w[1]<=n[3]+e};g.containsXY=m;g.containsXYWithMargin=function(n,w,e,q){return w>=n[0]-q&&e>=n[1]-q&&w<=n[2]+q&&e<=n[3]+q};g.copy=E;g.create=N;g.distance=function(n,w){const e=(n[1]+n[3])/2,q=Math.max(Math.abs(w[0]-(n[0]+n[2])/2)-t(n)/2,0);n=Math.max(Math.abs(w[1]-e)-k(n)/2,0);return Math.sqrt(q*
q+n*n)};g.empty=function(n){return n?E(n,Y):N(Y)};g.equals=function(n,w){return G(n)&&G(w)?n[0]===w[0]&&n[1]===w[1]&&n[2]===w[2]&&n[3]===w[3]:n===w};g.expand=function(n,w,e){if(T.isNone(w))E(e,n);else if("length"in w)if(G(w))e[0]=Math.min(n[0],w[0]),e[1]=Math.min(n[1],w[1]),e[2]=Math.max(n[2],w[2]),e[3]=Math.max(n[3],w[3]);else{if(2===w.length||3===w.length)e[0]=Math.min(n[0],w[0]),e[1]=Math.min(n[1],w[1]),e[2]=Math.max(n[2],w[0]),e[3]=Math.max(n[3],w[1])}else switch(w.type){case "extent":e[0]=Math.min(n[0],
w.xmin);e[1]=Math.min(n[1],w.ymin);e[2]=Math.max(n[2],w.xmax);e[3]=Math.max(n[3],w.ymax);break;case "point":e[0]=Math.min(n[0],w.x),e[1]=Math.min(n[1],w.y),e[2]=Math.max(n[2],w.x),e[3]=Math.max(n[3],w.y)}};g.expandPointInPlace=function(n,w){w[0]<n[0]&&(n[0]=w[0]);w[0]>n[2]&&(n[2]=w[0]);w[1]<n[1]&&(n[1]=w[1]);w[1]>n[3]&&(n[3]=w[1])};g.expandWithNestedArray=function(n,w,e=n){const q=w.length;let z=n[0],y=n[1],B=n[2];n=n[3];for(let S=0;S<q;S++){const F=w[S];z=Math.min(z,F[0]);y=Math.min(y,F[1]);B=Math.max(B,
F[0]);n=Math.max(n,F[1])}e[0]=z;e[1]=y;e[2]=B;e[3]=n;return e};g.fromExtent=function(n,w=N()){w[0]=n.xmin;w[1]=n.ymin;w[2]=n.xmax;w[3]=n.ymax;return w};g.fromValues=function(n,w,e,q,z=N()){z[0]=n;z[1]=w;z[2]=e;z[3]=q;return z};g.height=k;g.intersection=function(n,w,e){if(T.isNone(w))return E(e,n);const q=w[0],z=w[1],y=w[2];w=w[3];e[0]=ja.clamp(n[0],q,y);e[1]=ja.clamp(n[1],z,w);e[2]=ja.clamp(n[2],q,y);e[3]=ja.clamp(n[3],z,w);return e};g.intersects=function(n,w){return Math.max(w[0],n[0])<=Math.min(w[2],
n[2])&&Math.max(w[1],n[1])<=Math.min(w[3],n[3])};g.intersectsSegment=function(n,w,e){const q=n[0],z=n[1],y=n[2];n=n[3];const {x:B,y:S}=w,{x:F,y:r}=e;var C=(U,J)=>0>(r-S)*U+(B-F)*J+(F*S-B*r);w=C(q,n);e=C(y,n);const K=C(y,z);C=C(q,z);return w===e&&e===K&&K===C&&C===w||B<q&&F<q||B>y&&F>y||S>n&&r>n||S<z&&r<z?!1:!0};g.intersectsSphere=function(n,w){const e=w[3];var q=Math.abs(w[0]-.5*(n[0]+n[2]));const z=.5*(n[2]-n[0]);if(q>e+z)return!1;var y=.5*(n[3]-n[1]);n=Math.abs(w[1]-.5*(n[1]+n[3]));if(n>e+y)return!1;
if(q<z||n<y)return!0;q-=z;y=n-y;return q*q+y*y<=e*e};g.is=G;g.isPoint=function(n){return(0===t(n)||!isFinite(n[0]))&&(0===k(n)||!isFinite(n[1]))};g.offset=function(n,w,e,q=n){q[0]=n[0]+w;q[1]=n[1]+e;q[2]=n[2]+w;q[3]=n[3]+e;return q};g.pad=function(n,w,e=n){e[0]=n[0]-w;e[1]=n[1]-w;e[2]=n[2]+w;e[3]=n[3]+w;return e};g.setMax=function(n,w,e=n){e[2]=w[0];e[3]=w[1];e!==n&&(e[0]=n[0],e[1]=n[1]);return n};g.setMin=function(n,w,e=n){e[0]=w[0];e[1]=w[1];e!==n&&(e[2]=n[2],e[3]=n[3]);return e};g.size=function(n,
w){w[0]=n[2]-n[0];w[1]=n[3]-n[1]};g.toExtent=function(n,w){return new I({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:w})};g.width=t;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(g,d,ja){let T=function(){function N(E=null,t={},k,m){this.geometry=E;this.attributes=t;this.centroid=k;this.objectId=m;this.geohashY=this.geohashX=this.displayId=
0}N.prototype.weakClone=function(){const E=new N(this.geometry,this.attributes,this.centroid,this.objectId);E.displayId=this.displayId;E.geohashX=this.geohashX;E.geohashY=this.geohashY;return E};return N}(),I=function(N){function E(){return N.apply(this,arguments)||this}d._inheritsLoose(E,N);return E}(T);g.OptimizedFeature=T;g.OptimizedFeatureWithGeometry=I;g.hasGeometry=function(N){return!(ja.isNone(N.geometry)||!N.geometry.coords||!N.geometry.coords.length)};Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function g(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}g.prototype.weakClone=function(){const d=new g;d.objectIdFieldName=this.objectIdFieldName;
d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return g}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(g){return function(){function d(T=[],I=[],N=!1){this.lengths=T??[];this.coords=I??[];this.hasIndeterminateRingOrder=N}d.fromRect=function(T){const [I,N,E,t]=T;T=E-I;const k=t-N;return new d([5],[I,N,T,0,0,k,-T,0,0,-k])};var ja=d.prototype;ja.forEachVertex=function(T){let I=0;this.lengths.length||T(this.coords[0],this.coords[1]);for(let N=0;N<this.lengths.length;N++){const E=this.lengths[N];for(let t=0;t<E;t++)T(this.coords[2*(t+I)],this.coords[2*(t+I)+1]);I+=E}};ja.clone=function(T){return T?
(T.set(this.coords),new d(this.lengths.slice(),T,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};g._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((T,I)=>T+I)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G){const Y=N.create();return function(){function M(w){this.geometryInfo=w;this._boundsStore=new k.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ja;this.featureAdapter=m.optimizedFeatureQueryEngineAdapter}var n=M.prototype;n.getFullExtent=function(w){if(I.isNone(this.fullBounds))return null;const [e,q,z,y]=this.fullBounds;return{xmin:e,ymin:q,xmax:z,ymax:y,spatialReference:G.cleanFromGeometryEngine(w)}};n.add=function(w){this._add(w);this._emitChanged()};
n.addMany=function(w){for(const e of w)this._add(e);this._emitChanged()};n.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};n.removeById=function(w){w=this._featuresById.get(w);if(!w)return null;this._remove(w);this._emitChanged();return w};n.removeManyById=function(w){this._boundsStore.invalidateIndex();for(const e of w)(w=this._featuresById.get(e))&&this._remove(w);this._emitChanged()};n.forEachBounds=function(w,e){for(const q of w)(w=this._boundsStore.get(q.objectId))&&
e(N.fromRect(Y,w))};n.getFeature=function(w){return this._featuresById.get(w)};n.has=function(w){return this._featuresById.has(w)};n.forEach=function(w){this._featuresById.forEach(e=>w(e))};n.forEachInBounds=function(w,e){this._boundsStore.forEachInBounds(w,q=>{e(this._featuresById.get(q))})};n.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};n.sweep=function(){let w=!1;this._featuresById.forEach((e,q)=>{this._markedIds.has(q)||(w=!0,this._remove(e))});
this._markedIds.clear();w&&this._emitChanged()};n._emitChanged=function(){this.events.emit("changed",void 0)};n._add=function(w){if(w){var e=w.objectId;if(null==e)T.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature","feature id is missing",{feature:w}));else{var q=this._featuresById.get(e);this._markedIds.add(e);if(q){w.displayId=q.displayId;var z=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(I.isSome(this.onFeatureAdd))this.onFeatureAdd(w);
!I.isNone(w.geometry)&&w.geometry.coords&&w.geometry.coords.length?(z=t.getBoundsOptimizedGeometry(I.isSome(z)?z:E.create(),w.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),I.isSome(z)&&this._boundsStore.set(e,z)):this._boundsStore.set(e,null);this._featuresById.set(e,w)}}};n._remove=function(w){if(I.isSome(this.onFeatureRemove))this.onFeatureRemove(w);const e=w.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return w};g._createClass(M,[{key:"geometryType",
get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let w=0;this._featuresById.forEach(e=>{I.isSome(e.geometry)&&e.geometry.coords&&(w+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:w/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return M}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(g,d,ja,T,I){let N=function(){function E(){this._emitter=new E.EventEmitter(this)}var t=E.prototype;t.emit=function(k,m){return this._emitter.emit(k,m)};t.on=function(k,m){return this._emitter.on(k,m)};t.once=function(k,m){return this._emitter.once(k,
m)};t.hasEventListener=function(k){return this._emitter.hasEventListener(k)};return E}();(function(E){let t=function(){function m(Y=null){this._target=Y;this._listenersMap=null}var G=m.prototype;G.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};G.emit=function(Y,M){Y=this._listenersMap&&this._listenersMap.get(Y);if(!Y)return!1;const n=this._target||this;[...Y].forEach(w=>{w.call(n,M)});return 0<Y.length};G.on=function(Y,M){if(Array.isArray(Y)){var n=Y.map(w=>
this.on(w,M));return T.handlesGroup(n)}if(Y.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);n=this._listenersMap.get(Y)||[];n.push(M);this._listenersMap.set(Y,n);return{remove:()=>{const w=this._listenersMap&&this._listenersMap.get(Y)||[],e=w.indexOf(M);0<=e&&w.splice(e,1)}}};G.once=function(Y,M){const n=this.on(Y,w=>{n.remove();M.call(null,w)});return n};G.hasEventListener=function(Y){Y=
this._listenersMap&&this._listenersMap.get(Y);return null!=Y&&0<Y.length};return m}();E.EventEmitter=t;E.EventedMixin=m=>{m=function(G){function Y(){var n=G.apply(this,arguments)||this;n._emitter=new t;return n}g._inheritsLoose(Y,G);var M=Y.prototype;M.destroy=function(){this._emitter.clear()};M.emit=function(n,w){return this._emitter.emit(n,w)};M.on=function(n,w){return this._emitter.on(n,w)};M.once=function(n,w){return this._emitter.once(n,w)};M.hasEventListener=function(n){return this._emitter.hasEventListener(n)};
return Y}(m);return m=d.__decorate([I.subclass("esri.core.Evented")],m)};let k=function(m){function G(){var M=m.apply(this,arguments)||this;M._emitter=new N.EventEmitter(g._assertThisInitialized(M));return M}g._inheritsLoose(G,m);var Y=G.prototype;Y.destroy=function(){this._emitter.clear()};Y.emit=function(M,n){return this._emitter.emit(M,n)};Y.on=function(M,n){return this._emitter.on(M,n)};Y.once=function(M,n){return this._emitter.once(M,n)};Y.hasEventListener=function(M){return this._emitter.hasEventListener(M)};
return G}(ja);k=d.__decorate([I.subclass("esri.core.Evented")],k);E.EventedAccessor=k})(N||(N={}));return N})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,d,ja,T,I){function N(k,m,G){E.minX=m[0];E.minY=m[1];E.maxX=m[2];E.maxY=m[3];k.search(E,G)}const E={minX:0,minY:0,maxX:0,maxY:0};let t=function(){function k(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new T.PooledRBush(9,ja("esri-csp-restrictions")?G=>({minX:G[0],minY:G[1],maxX:G[2],maxY:G[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const G=Array(this._idByBounds.size);let Y=0;this._idByBounds.forEach((M,n)=>{G[Y++]=n});this._indexInvalid=!1;this._index.clear();this._index.load(G)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(G=>
this._idByBounds.has(G))))),this._boundsToLoad.length=0)}}var m=k.prototype;m.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};m.delete=function(G){const Y=this._boundsById.get(G);this._boundsById.delete(G);Y&&(this._idByBounds.delete(Y),this._indexInvalid||this._index.remove(Y))};m.forEachInBounds=function(G,Y){this._loadIndex();N(this._index,G,M=>Y(this._idByBounds.get(M)))};m.get=function(G){return this._boundsById.get(G)};
m.has=function(G){return this._boundsById.has(G)};m.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};m.set=function(G,Y){if(!this._indexInvalid){const M=this._boundsById.get(G);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(G,Y);Y&&(this._idByBounds.set(Y,G),this._indexInvalid||(this._boundsToLoad.push(Y),5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(k,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const G=I.empty();for(const Y of this._boundsById.values())Y&&(G[0]=Math.min(Y[0],G[0]),G[1]=Math.min(Y[1],G[1]),G[2]=Math.max(Y[2],G[2]),G[3]=Math.max(Y[3],G[3]));return G}},{key:"valid",get:function(){return!this._indexInvalid}}]);return k}();g.BoundsStore=t;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(g,d,ja,T,I,N){function E(K,U){t(K,0,K.children.length,U,K)}function t(K,U,J,L,Q){Q||(Q=new r([]));Q.minX=Infinity;Q.minY=Infinity;Q.maxX=-Infinity;Q.maxY=-Infinity;for(let R=U,H;R<J;R++)H=K.children[R],k(Q,K.leaf?L(H):H);return Q}function k(K,U){K.minX=Math.min(K.minX,U.minX);K.minY=Math.min(K.minY,U.minY);K.maxX=Math.max(K.maxX,U.maxX);K.maxY=Math.max(K.maxY,U.maxY)}function m(K,U){return K.minX-U.minX}function G(K,U){return K.minY-U.minY}function Y(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}
function M(K){return K.maxX-K.minX+(K.maxY-K.minY)}function n(K,U){return K.minX<=U.minX&&K.minY<=U.minY&&U.maxX<=K.maxX&&U.maxY<=K.maxY}function w(K,U){return U.minX<=K.maxX&&U.minY<=K.maxY&&U.maxX>=K.minX&&U.maxY>=K.minY}function e(K,U,J,L,Q){for(U=[U,J];U.length;){J=T.assumeNonNull(U.pop());const R=T.assumeNonNull(U.pop());if(J-R<=L)continue;const H=R+Math.ceil((J-R)/L/2)*L;N.quickselect(K,H,R,J,Q);U.push(R,H,H,J)}}let q=function(){function K(J=9,L){this._compareMinX=m;this._compareMinY=G;this._toBBox=
Q=>Q;this._maxEntries=Math.max(4,J||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));L&&("function"===typeof L?this._toBBox=L:this._initFormat(L));this.clear()}var U=K.prototype;U.destroy=function(){this.clear();z.prune();y.prune();B.prune();S.prune()};U.all=function(J){this._all(this._data,J)};U.search=function(J,L){let Q=this._data;const R=this._toBBox;if(w(J,Q))for(z.clear();Q;){for(let H=0,A=Q.children.length;H<A;H++){const l=Q.children[H],u=Q.leaf?R(l):l;w(J,u)&&(Q.leaf?L(l):n(J,
u)?this._all(l,L):z.push(l))}Q=z.pop()}};U.collides=function(J){let L=this._data;const Q=this._toBBox;if(!w(J,L))return!1;for(z.clear();L;){for(let R=0,H=L.children.length;R<H;R++){const A=L.children[R],l=L.leaf?Q(A):A;if(w(J,l)){if(L.leaf||n(J,l))return!0;z.push(A)}}L=z.pop()}return!1};U.load=function(J){if(!J.length)return this;if(J.length<this._minEntries){for(let L=0,Q=J.length;L<Q;L++)this.insert(J[L]);return this}J=this._build(J.slice(0,J.length),0,J.length-1,0);if(this._data.children.length)if(this._data.height===
J.height)this._splitRoot(this._data,J);else{if(this._data.height<J.height){const L=this._data;this._data=J;J=L}this._insert(J,this._data.height-J.height-1,!0)}else this._data=J;return this};U.insert=function(J){J&&this._insert(J,this._data.height-1);return this};U.clear=function(){this._data=new r([]);return this};U.remove=function(J){if(!J)return this;let L=this._data,Q=null,R=0,H=!1,A;const l=this._toBBox(J);B.clear();for(S.clear();L||0<B.length;){L||(L=T.assumeNonNull(B.pop()),Q=B.data[B.length-
1],R=S.pop()??0,H=!0);if(L.leaf&&(A=ja.indexOf(L.children,J,L.children.length,L.indexHint),-1!==A)){L.children.splice(A,1);B.push(L);this._condense(B);break}H||L.leaf||!n(L,l)?Q?(R++,L=Q.children[R],H=!1):L=null:(B.push(L),S.push(R),R=0,Q=L,L=L.children[0])}return this};U.toJSON=function(){return this._data};U.fromJSON=function(J){this._data=J;return this};U._all=function(J,L){for(y.clear();J;){if(!0===J.leaf)for(const Q of J.children)L(Q);else y.pushArray(J.children);J=y.pop()??null}};U._build=function(J,
L,Q,R){var H=Q-L+1,A=this._maxEntries;if(H<=A)return J=new r(J.slice(L,Q+1)),E(J,this._toBBox),J;R||(R=Math.ceil(Math.log(H)/Math.log(A)),A=Math.ceil(H/A**(R-1)));const l=new C([]);l.height=R;H=Math.ceil(H/A);A=H*Math.ceil(Math.sqrt(A));for(e(J,L,Q,A,this._compareMinX);L<=Q;L+=A){const u=Math.min(L+A-1,Q);e(J,L,u,H,this._compareMinY);for(let Z=L;Z<=u;Z+=H)l.children.push(this._build(J,Z,Math.min(Z+H-1,u),R-1))}E(l,this._toBBox);return l};U._chooseSubtree=function(J,L,Q,R){for(;;){R.push(L);if(!0===
L.leaf||R.length-1===Q)break;let H=Infinity,A=Infinity,l=void 0;for(let u=0,Z=L.children.length;u<Z;u++){const ka=L.children[u],ua=Y(ka),za=(Math.max(ka.maxX,J.maxX)-Math.min(ka.minX,J.minX))*(Math.max(ka.maxY,J.maxY)-Math.min(ka.minY,J.minY))-ua;za<A?(A=za,H=ua<H?ua:H,l=ka):za===A&&ua<H&&(H=ua,l=ka)}L=l||L.children[0]}return L};U._insert=function(J,L,Q){var R=this._toBBox;Q=Q?J:R(J);B.clear();R=this._chooseSubtree(Q,this._data,L,B);R.children.push(J);for(k(R,Q);0<=L;)if(B.data[L].children.length>
this._maxEntries)this._split(B,L),L--;else break;this._adjustParentBBoxes(Q,B,L)};U._split=function(J,L){const Q=J.data[L];var R=Q.children.length;const H=this._minEntries;this._chooseSplitAxis(Q,H,R);(R=this._chooseSplitIndex(Q,H,R))?(R=Q.children.splice(R,Q.children.length-R),R=Q.leaf?new r(R):new C(R),R.height=Q.height,E(Q,this._toBBox),E(R,this._toBBox),L?J.data[L-1].children.push(R):this._splitRoot(Q,R)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};U._splitRoot=
function(J,L){this._data=new C([J,L]);this._data.height=J.height+1;E(this._data,this._toBBox)};U._chooseSplitIndex=function(J,L,Q){let R,H,A=void 0;R=H=Infinity;for(let u=L;u<=Q-L;u++){var l=t(J,0,u,this._toBBox);const Z=t(J,u,Q,this._toBBox),ka=Math.max(0,Math.min(l.maxX,Z.maxX)-Math.max(l.minX,Z.minX))*Math.max(0,Math.min(l.maxY,Z.maxY)-Math.max(l.minY,Z.minY));l=Y(l)+Y(Z);ka<R?(R=ka,A=u,H=l<H?l:H):ka===R&&l<H&&(H=l,A=u)}return A};U._chooseSplitAxis=function(J,L,Q){const R=J.leaf?this._compareMinX:
m,H=J.leaf?this._compareMinY:G,A=this._allDistMargin(J,L,Q,R);L=this._allDistMargin(J,L,Q,H);A<L&&J.children.sort(R)};U._allDistMargin=function(J,L,Q,R){J.children.sort(R);R=this._toBBox;var H=t(J,0,L,R);const A=t(J,Q-L,Q,R);let l=M(H)+M(A);for(let u=L;u<Q-L;u++){const Z=J.children[u];k(H,J.leaf?R(Z):Z);l+=M(H)}for(Q=Q-L-1;Q>=L;Q--)H=J.children[Q],k(A,J.leaf?R(H):H),l+=M(A);return l};U._adjustParentBBoxes=function(J,L,Q){for(;0<=Q;Q--)k(L.data[Q],J)};U._condense=function(J){for(let L=J.length-1;0<=
L;L--){const Q=J.data[L];if(0===Q.children.length)if(0<L){const R=J.data[L-1],H=R.children;H.splice(ja.indexOf(H,Q,H.length,R.indexHint),1)}else this.clear();else E(Q,this._toBBox)}};U._initFormat=function(J){const L=["return a"," - b",";"];this._compareMinX=new Function("a","b",L.join(J[0]));this._compareMinY=new Function("a","b",L.join(J[1]));this._toBBox=new Function("a","return {minX: a"+J[0]+", minY: a"+J[1]+", maxX: a"+J[2]+", maxY: a"+J[3]+"};")};return K}();const z=new I,y=new I,B=new I,S=
new I({deallocator:void 0});I=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let F=function(K){function U(){var J=K.apply(this,arguments)||this;J.height=1;J.indexHint=new ja.PositionHint;return J}d._inheritsLoose(U,K);return U}(I),r=function(K){function U(J){var L=K.call(this)||this;L.children=J;L.leaf=!0;return L}d._inheritsLoose(U,K);return U}(F),C=function(K){function U(J){var L=K.call(this)||this;L.children=J;L.leaf=!1;return L}d._inheritsLoose(U,K);return U}(F);g.BBox=
I;g.PooledRBush=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var d={};(function(ja){(function(T){T=T();void 0!==T&&(ja.exports=T)})(function(){function T(E,t,k,m,G){for(;m>k;){if(600<m-k){var Y=m-k+1,M=t-k+1,n=Math.log(Y),w=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*w*(Y-w)/Y)*(0>M-Y/2?-1:1);T(E,t,Math.max(k,Math.floor(t-M*w/Y+n)),Math.min(m,Math.floor(t+(Y-M)*w/Y+n)),G)}Y=E[t];M=k;w=m;I(E,k,t);for(0<G(E[m],Y)&&I(E,
k,m);M<w;){I(E,M,w);M++;for(w--;0>G(E[M],Y);)M++;for(;0<G(E[w],Y);)w--}0===G(E[k],Y)?I(E,k,w):(w++,I(E,w,m));w<=t&&(k=w+1);t<=w&&(m=w-1)}}function I(E,t,k){var m=E[t];E[t]=E[k];E[k]=m}function N(E,t){return E<t?-1:E>t?1:0}return function(E,t,k,m,G){T(E,t,k||0,m||E.length-1,G||N)}})})({get exports(){return d},set exports(ja){d=ja}});g.quickselect=d})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature",
"../OptimizedGeometry"],function(g,d,ja,T,I){g.optimizedFeatureQueryEngineAdapter={getObjectId(N){return N.objectId},getAttributes(N){return N.attributes},getAttribute(N,E){return N.attributes[E]},cloneWithGeometry(N,E){return new T.OptimizedFeature(E,N.attributes,null,N.objectId)},getGeometry(N){return N.geometry},getCentroid(N,E){d.isNone(N.centroid)&&(N.centroid=ja.getCentroidOptimizedGeometry(new I,N.geometry,E.hasZ,E.hasM));return N.centroid}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(g,d){function ja(I,N,E,t,k,m,G=1){m=k?m?4:3:m?3:2;let Y=E,M=E+m,n=0,w=0,e=E=0,q=0;for(let z=0,y=t-1;z<y;z++,Y+=m,M+=m){t=N[Y];const B=N[Y+1],S=N[Y+2],F=N[M],r=N[M+1],C=N[M+2];let K=t*r-F*B;e+=K;n+=(t+F)*K;w+=(B+r)*K;k&&(K=t*C-F*S,E+=(S+C)*K,q+=K);t<I[0]&&(I[0]=t);t>I[1]&&(I[1]=t);B<I[2]&&(I[2]=B);B>I[3]&&(I[3]=B);k&&(S<I[4]&&(I[4]=S),S>I[5]&&(I[5]=S))}0<e*G&&(e*=-1);0<q*G&&(q*=-1);if(!e)return null;I=[n,w,.5*
e];k&&(I[3]=E,I[4]=.5*q);return I}function T(I,N,E,t,k){k=t?k?4:3:k?3:2;let m=N,G=N+k,Y=0,M=0,n=0,w=0;for(let y=0,B=E-1;y<B;y++,m+=k,G+=k){var e=I[m];const S=I[m+1],F=I[m+2],r=I[G],C=I[G+1],K=I[G+2];if(t){var q=r-e;var z=C-S;const U=K-F;q=Math.sqrt(q*q+z*z+U*U)}else q=r-e,z=C-S,q=Math.sqrt(q*q+z*z);q&&(Y+=q,t?(e=[e+.5*(r-e),S+.5*(C-S),F+.5*(K-F)],M+=q*e[0],n+=q*e[1],w+=q*e[2]):(e=[e+.5*(r-e),S+.5*(C-S)],M+=q*e[0],n+=q*e[1]))}return 0<Y?t?[M/Y,n/Y,w/Y]:[M/Y,n/Y]:0<E?t?[I[N],I[N+1],I[N+2]]:[I[N],I[N+
1]]:null}g.getCentroidOptimizedGeometry=function(I,N,E,t,k){if(d.isNone(N)||!N.lengths.length)return null;const m="upperLeft"===k?.originPosition?-1:1;I.lengths.length&&(I.lengths.length=0);I.coords.length&&(I.coords.length=0);k=I.coords;const G=[],Y=E?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],
{lengths:M,coords:n}=N,w=E?t?4:3:t?3:2;let e=0;for(var q of M){const z=ja(Y,n,e,q,E,t,m);z&&G.push(z);e+=q*w}G.sort((z,y)=>{let B=m*z[2]-m*y[2];0===B&&E&&(B=z[4]-y[4]);return B});G.length&&(q=6*G[0][2],k[0]=G[0][0]/q,k[1]=G[0][1]/q,E&&(q=6*G[0][4],k[2]=0!==q?G[0][3]/q:0),k[0]<Y[0]||k[0]>Y[1]||k[1]<Y[2]||k[1]>Y[3]||E&&(k[2]<Y[4]||k[2]>Y[5]))&&(k.length=0);if(!k.length)if(N=N.lengths[0]?T(n,0,M[0],E,t):null)k[0]=N[0],k[1]=N[1],E&&2<N.length&&(k[2]=N[2]);else return null;return I};g.lineCentroid=T;Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(g,d,
ja,T,I,N,E,t,k,m,G,Y,M,n){function w(){w=ja._asyncToGenerator(function*(R,H,A){const {outFields:l,orderByFields:u,groupByFieldsForStatistics:Z,outStatistics:ka}=R;if(l)for(var ua=0;ua<l.length;ua++)l[ua]=l[ua].trim();if(u)for(ua=0;ua<u.length;ua++)u[ua]=u[ua].trim();if(Z)for(ua=0;ua<Z.length;ua++)Z[ua]=Z[ua].trim();if(ka)for(ua=0;ua<ka.length;ua++)ka[ua].onStatisticField&&(ka[ua].onStatisticField=ka[ua].onStatisticField.trim());R.geometry&&!R.outSR&&(R.outSR=R.geometry.spatialReference);return e(R,
H,A)});return w.apply(this,arguments)}function e(R,H,A){return q.apply(this,arguments)}function q(){q=ja._asyncToGenerator(function*(R,H,A){if(!R)return null;var {where:l}=R;R.where=l=l&&l.trim();if(!l||/^1 *= *1$/.test(l)||H&&H===l)R.where=null;if(!R.geometry)return R;H=yield y(R);R.distance=0;R.units=null;"esriSpatialRelEnvelopeIntersects"===R.spatialRel&&({spatialReference:l}=R.geometry,H=t.getGeometryExtent(H),H.spatialReference=l);if(H){yield n.checkProjectionSupport(H.spatialReference,A);l=
H.spatialReference;H=z(H,A)&&k.isExtent(H)?{spatialReference:l,rings:[[[H.xmin,H.ymin],[H.xmin,H.ymax],[H.xmax,H.ymax],[H.xmax,H.ymin],[H.xmin,H.ymin]]]}:H;l=(yield m.normalizeCentralMeridian(k.fromJSON(H)))[0];if(I.isNone(l))throw C;const u="quantizationParameters"in R&&R.quantizationParameters?.tolerance||"maxAllowableOffset"in R&&R.maxAllowableOffset||0;H=u&&z(H,A)?{densificationStep:8*u}:void 0;l=l.toJSON();H=yield n.project(l,l.spatialReference,A,H);if(!H)throw C;H.spatialReference=A;R.geometry=
H}return R});return q.apply(this,arguments)}function z(R,H){if(!R)return!1;const A=R.spatialReference;return(k.isExtent(R)||k.isPolygon(R)||k.isPolyline(R))&&!G.equals(A,H)&&!E.canProjectWithoutEngine(A,H)}function y(R){return B.apply(this,arguments)}function B(){B=ja._asyncToGenerator(function*(R){const {distance:H,units:A}=R,l=R.geometry;if(null==H||"vertexAttributes"in l)return l;var u=l.spatialReference;R=A?r.fromJSON(A):N.getUnitString(u);u=u&&(G.isGeographic(u)||G.isWebMercator(u))?l:yield n.checkProjectionSupport(u,
G.WGS84).then(()=>n.project(l,G.WGS84));return(yield S())(u.spatialReference,u,H,R)});return B.apply(this,arguments)}function S(){return F.apply(this,arguments)}function F(){F=ja._asyncToGenerator(function*(){return(yield new Promise((R,H)=>g(["../../../geometry/geometryEngineJSON"],R,H))).geodesicBuffer});return F.apply(this,arguments)}const r=new T.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),C=Object.freeze({}),K=new M,U=new M,J=new M,L={esriGeometryPoint:Y.convertToPoint,esriGeometryPolyline:Y.convertToPolyline,esriGeometryPolygon:Y.convertToPolygon,esriGeometryMultipoint:Y.convertToMultipoint},Q=(R,H)=>"_geVersion"!==R?H:void 0;d.QUERY_ENGINE_EMPTY_RESULT=C;d.cleanFromGeometryEngine=function(R){return R&&"_geVersion"in R?JSON.parse(JSON.stringify(R,Q)):R};d.getGeometry=function(R,H,A,l,u,Z,ka=H,ua=A){const za=H&&ka,Ha=A&&ua;l=I.isSome(l)?
"coords"in l?l:l.geometry:null;if(I.isNone(l))return null;if(u)return H=Y.generalizeOptimizedGeometry(U,l,H,A,R,u,ka,ua),Z&&(H=Y.quantizeOptimizedGeometry(J,H,za,Ha,R,Z)),L[R]?.(H,za,Ha)??null;if(Z)return Z=Y.quantizeOptimizedGeometry(J,l,H,A,R,Z,ka,ua),L[R]?.(Z,za,Ha)??null;Y.removeZMValues(K,l,H,A,ka,ua);return L[R]?.(K,za,Ha)??null};d.normalizeQuery=function(R,H,A){return w.apply(this,arguments)};d.normalizeQueryLike=e;d.transformCentroid=function(R,H,A,l=R.hasZ,u=R.hasM){if(I.isNone(H))return null;
const Z=R.hasZ&&l,ka=R.hasM&&u;return A?(R=Y.quantizeOptimizedGeometry(J,H,R.hasZ,R.hasM,"esriGeometryPoint",A,l,u),Y.convertToPoint(R,Z,ka)):Y.convertToPoint(H,Z,ka)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y,M,n,w,e,q,z,y,B,S,F,r,C,K,U,J){function L(){return!!jb&&q.isLoaded()}function Q(X){N.isNone(Gb)&&(Gb=Promise.all([q.load(),(new Promise((ha,ba)=>g(["../chunks/geometryEngineBase"],ha,ba))).then(ha=>ha.geometryEngineBase),new Promise((ha,ba)=>g(["./geometryAdapters/hydrated"],ha,ba))]));return Gb.then(([,ha,{hydratedAdapter:ba}])=>{E.throwIfAborted(X);gb=ba;jb=ha.default;jb._enableProjection(q.pe);nb.notify()})}function R(X,ha,ba=null,qa=null){return Array.isArray(X)?
0===X.length?[]:H(gb,X,X[0].spatialReference,ha,ba,qa):H(gb,[X],X.spatialReference,ha,ba,qa)[0]}function H(X,ha,ba,qa,Ea=null,Ga=null){if(N.isNone(ba)||N.isNone(qa))return ha;if(Z(ba,qa,Ea))return ha.map(Ra=>N.unwrap(ua(Ra,ba,qa)));if(N.isNone(Ea)){const Ra=C.cacheKey(ba,qa);void 0!==Pb[Ra]?Ea=Pb[Ra]:(Ea=l(ba,qa,void 0),N.isNone(Ea)&&(Ea=new C),Pb[Ra]=Ea)}if(N.isNone(jb)||N.isNone(X))throw new Wb;return N.isSome(Ga)?jb._project(X,ha,ba,qa,Ea,Ga):jb._project(X,ha,ba,qa,Ea)}function A(X,ha){if(!L())for(const ba of X)if(N.isSome(ba)&&
!K.equals(ba.spatialReference,ha)&&K.isValid(ba.spatialReference)&&K.isValid(ha)&&!Z(ba.spatialReference,ha))return k.trackAccess(nb),{pending:Q(),geometries:null};return{pending:null,geometries:X.map(ba=>N.isNone(ba)?null:K.equals(ba.spatialReference,ha)?ba:K.isValid(ba.spatialReference)&&K.isValid(ha)?u(ba,ha):null)}}function l(X,ha,ba=null){if(N.isNone(X)||N.isNone(ha))return null;if(N.isNone(jb)||N.isNone(gb))throw new Wb;X=jb._getTransformation(gb,X,ha,ba,ba?.spatialReference);return null!==
X?C.fromGE(X):null}function u(X,ha){try{const ba=R(X,ha);if(null==ba)return null;"xmin"in X&&"xmin"in ba&&(ba.zmin=X.zmin,ba.zmax=X.zmax);const qa=J.getGeometryZScaler(ba.type,X.spatialReference,ha);N.isSome(qa)&&qa(ba);return ba}catch(ba){if(!(ba instanceof Wb))throw ba;return null}}function Z(X,ha,ba){return ba?!1:K.equals(X,ha)?!0:K.isValid(X)&&K.isValid(ha)&&!!ub(X,ha,Xb)}function ka(){ka=ja._asyncToGenerator(function*(X,ha,ba,qa){if(L())return E.waitTick(qa);if(Array.isArray(X))for(const {source:Ea,
dest:Ga,geographicTransformation:Ra}of X){if(!Z(Ea,Ga,Ra))return Q(qa)}else if(!Z(X,ha,ba))return Q(qa);return E.waitTick(qa)});return ka.apply(this,arguments)}function ua(X,ha,ba){return X?"x"in X?za(X,ha,new z,ba,0):"xmin"in X?Ua(X,ha,new w,ba,0):"rings"in X?Ia(X,ha,new y,ba,0):"paths"in X?Ka(X,ha,new B,ba,0):"points"in X?Ha(X,ha,new e,ba,0):null:null}function za(X,ha,ba,qa,Ea){ab[0]=X.x;ab[1]=X.y;const Ga=X.z;ab[2]=void 0!==Ga?Ga:Ea;if(!Xa(ab,ha,0,ab,qa,0,1))return null;ba.x=ab[0];ba.y=ab[1];ba.spatialReference=
qa;void 0===Ga?(ba.z=void 0,ba.hasZ=!1):(ba.z=ab[2],ba.hasZ=!0);void 0===X.m?(ba.m=void 0,ba.hasM=!1):(ba.m=X.m,ba.hasM=!0);return ba}function Ha(X,ha,ba,qa,Ea){const {points:Ga,hasZ:Ra,hasM:Ya}=X;X=[];const mb=Ga.length,lb=[];for(var kb of Ga)lb.push(kb[0],kb[1],Ra?kb[2]:Ea);if(!Xa(lb,ha,0,lb,qa,0,mb))return null;for(ha=0;ha<mb;++ha){Ea=3*ha;kb=lb[Ea];const xb=lb[Ea+1];Ra&&Ya?X.push([kb,xb,lb[Ea+2],Ga[ha][3]]):Ra?X.push([kb,xb,lb[Ea+2]]):Ya?X.push([kb,xb,Ga[ha][2]]):X.push([kb,xb])}ba.points=X;ba.spatialReference=
qa;ba.hasZ=Ra;ba.hasM=Ya;return ba}function Ka(X,ha,ba,qa,Ea){const {paths:Ga,hasZ:Ra,hasM:Ya}=X;X=[];if(!Aa(Ga,Ra??!1,Ya??!1,ha,X,qa,Ea))return null;ba.paths=X;ba.spatialReference=qa;ba.hasZ=Ra;ba.hasM=Ya;return ba}function Ia(X,ha,ba,qa,Ea){const {rings:Ga,hasZ:Ra,hasM:Ya}=X;X=[];if(!Aa(Ga,Ra??!1,Ya??!1,ha,X,qa,Ea))return null;ba.rings=X;ba.spatialReference=qa;ba.hasZ=Ra;ba.hasM=Ya;return ba}function Ua(X,ha,ba,qa,Ea){const {xmin:Ga,ymin:Ra,xmax:Ya,ymax:mb,hasZ:lb,hasM:kb}=X;if(!Qa(Ga,Ra,lb?X.zmin:
Ea,ha,ab,qa))return null;ba.xmin=ab[0];ba.ymin=ab[1];lb&&(ba.zmin=ab[2]);if(!Qa(Ya,mb,lb?X.zmax:Ea,ha,ab,qa))return null;ba.xmax=ab[0];ba.ymax=ab[1];lb&&(ba.zmax=ab[2]);kb&&(ba.mmin=X.mmin,ba.mmax=X.mmax);ba.spatialReference=qa;return ba}function Qa(X,ha,ba,qa,Ea,Ga){ib[0]=X;ib[1]=ha;ib[2]=ba;return Xa(ib,qa,0,Ea,Ga,0,1)}function Sa(X,ha,ba,qa){if(N.isNone(ha)||N.isNone(qa)||2>X.length)return!1;2===X.length&&(ib[0]=X[0],ib[1]=X[1],ib[2]=0,X=ib);return Xa(X,ha,0,ba,qa,0,1)}function bb(X,ha,ba){if(N.isNone(ha))return!1;
ha=p(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ha))return!1;ha(X,0,ib,0);ba!==ib&&(ba[0]=ib[0],ba[1]=ib[1],2<ba.length&&(ba[2]=ib[2]));return!0}function Xa(X,ha,ba,qa,Ea,Ga,Ra=1){ha=ub(ha,Ea,Xb);if(N.isNone(ha))return!1;if(ha===V){if(X===qa&&ba===Ga)return!0;Ra=ba+3*Ra;for(let Ya=ba,mb=Ga;Ya<Ra;Ya++,mb++)qa[mb]=X[Ya];return!0}Ra=ba+3*Ra;for(let Ya=ba,mb=Ga;Ya<Ra;Ya+=3,mb+=3)ha(X,Ya,qa,mb);return!0}function Aa(X,ha,ba,qa,Ea,Ga,Ra=0){const Ya=[];for(const mb of X)for(const lb of mb)Ya.push(lb[0],
lb[1],ha?lb[2]:Ra);if(!Xa(Ya,qa,0,Ya,Ga,0,Ya.length/3))return!1;qa=0;Ea.length=0;for(const mb of X){X=[];for(const lb of mb)ha&&ba?X.push([Ya[qa++],Ya[qa++],Ya[qa++],lb[3]]):ha?X.push([Ya[qa++],Ya[qa++],Ya[qa++]]):(ba?X.push([Ya[qa++],Ya[qa++],lb[2]]):X.push([Ya[qa++],Ya[qa++]]),qa++);Ea.push(X)}return!0}function Da(X,ha,ba,qa){ha=qa+ha;if(ha<qa/2||ba>ha)return Number.MAX_VALUE;X=Math.abs(Hb*X)+Math.asin(ba/ha);return X>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(X)}function Fa(X,ha,ba){const qa=Math.sin(X);
X=Math.cos(X);const Ea=Math.sin(ha);ha=Math.cos(ha);ba[0]=-qa;ba[4]=-Ea*X;ba[8]=ha*X;ba[12]=0;ba[1]=X;ba[5]=-Ea*qa;ba[9]=ha*qa;ba[13]=0;ba[2]=0;ba[6]=ha;ba[10]=Ea;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function c(X,ha,ba){Fa(X,ha,ba);G.transpose(ba,ba);return ba}function p(X,ha){if(!X)return oa.UNKNOWN;if(ha.spatialReference===X)return ha.spatialReferenceId;ha.spatialReference=X;"metersPerUnit"in ha&&(ha.metersPerUnit=t.getMetersPerUnitForSR(X,1));return X.wkt===n.SphericalECEFSpatialReferenceLike.wkt?
ha.spatialReferenceId=oa.SPHERICAL_ECEF:K.isWGS84(X)?ha.spatialReferenceId=oa.WGS84:K.isWebMercator(X)?ha.spatialReferenceId=oa.WEB_MERCATOR:K.isPlateCarree(X)?ha.spatialReferenceId=oa.PLATE_CARREE:X.wkt===n.WGS84ECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.WGS84_ECEF:X.wkid===U.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=oa.CGCS2000:X.wkt===n.SphericalPCPFMarsLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:X.wkt===n.SphericalPCPFMoonLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:
K.isMars(X)?ha.spatialReferenceId=oa.GCSMARS2000:K.isMoon(X)?ha.spatialReferenceId=oa.GCSMOON2000:ha.spatialReferenceId=oa.UNKNOWN}function V(X,ha,ba,qa){X!==ba&&(ba[qa++]=X[ha++],ba[qa++]=X[ha++],ba[qa]=X[ha])}function la(X,ha,ba,qa){ba[qa++]=Rb*(X[ha++]/F.earth.radius);ba[qa++]=Rb*(Math.PI/2-2*Math.atan(Math.exp(-X[ha++]/F.earth.radius)));ba[qa]=X[ha]}function ta(X,ha,ba,qa){la(X,ha,ba,qa);pa(ba,qa,ba,qa)}function x(X,ha,ba,qa){la(X,ha,ba,qa);Ja(ba,qa,ba,qa)}function O(X,ha,ba,qa,Ea){var Ga=.4999999*
Math.PI;Ga=I.clamp(Hb*X[ha+1],-Ga,Ga);Ga=Math.sin(Ga);ba[qa++]=Hb*X[ha]*Ea.radius;ba[qa++]=Ea.halfSemiMajorAxis*Math.log((1+Ga)/(1-Ga));ba[qa]=X[ha+2]}function da(X,ha,ba,qa){O(X,ha,ba,qa,F.earth)}function aa(X,ha,ba,qa){ba[qa]=X[ha]*Yb;ba[qa+1]=X[ha+1]*Yb;ba[qa+2]=X[ha+2]}function ia(X,ha,ba,qa){ba[qa]=X[ha]*Sb;ba[qa+1]=X[ha+1]*Sb;ba[qa+2]=X[ha+2]}function na(X,ha,ba,qa){la(X,ha,ba,qa);aa(ba,qa,ba,qa)}function ra(X,ha,ba,qa,Ea){Ea+=X[ha+2];const Ga=Hb*X[ha+1];X=Hb*X[ha];ha=Math.cos(Ga);ba[qa++]=
Math.cos(X)*ha*Ea;ba[qa++]=Math.sin(X)*ha*Ea;ba[qa]=Math.sin(Ga)*Ea}function W(X,ha,ba,qa){ra(X,ha,ba,qa,F.moon.radius)}function ea(X,ha,ba,qa){ra(X,ha,ba,qa,F.mars.radius)}function pa(X,ha,ba,qa){ra(X,ha,ba,qa,F.earth.radius)}function wa(X,ha,ba,qa,Ea){var Ga=X[ha];const Ra=X[ha+1];ha=X[ha+2];X=Math.sqrt(Ga*Ga+Ra*Ra+ha*ha);ha=I.asinClamped(ha/(0===X?1:X));Ga=Math.atan2(Ra,Ga);ba[qa++]=Rb*Ga;ba[qa++]=Rb*ha;ba[qa]=X-Ea}function Ca(X,ha,ba,qa){wa(X,ha,ba,qa,F.moon.radius)}function Oa(X,ha,ba,qa){wa(X,
ha,ba,qa,F.mars.radius)}function Ma(X,ha,ba,qa){wa(X,ha,ba,qa,F.earth.radius)}function Ta(X,ha,ba,qa){Ma(X,ha,ba,qa);da(ba,qa,ba,qa)}function Va(X,ha,ba,qa){Ma(X,ha,ba,qa);Ja(ba,qa,ba,qa)}function Ja(X,ha,ba,qa){var Ea=F.earth;const Ga=Hb*X[ha];var Ra=Hb*X[ha+1];X=X[ha+2];ha=Math.sin(Ra);Ra=Math.cos(Ra);const Ya=Ea.radius/Math.sqrt(1-Ea.eccentricitySquared*ha*ha);ba[qa++]=(Ya+X)*Ra*Math.cos(Ga);ba[qa++]=(Ya+X)*Ra*Math.sin(Ga);ba[qa++]=(Ya*(1-Ea.eccentricitySquared)+X)*ha}function Wa(X,ha,ba,qa){var Ea=
r.earthEllipsoidConstants,Ga=X[ha],Ra=X[ha+1];X=X[ha+2];let Ya;ha=Math.abs(X);var mb=Ga*Ga+Ra*Ra;var lb=Math.sqrt(mb);var kb=mb+X*X;var xb=Math.sqrt(kb);Ga=Math.atan2(Ra,Ga);var Ib=X*X/kb;kb=mb/kb;Ra=Ea.a2/xb;mb=Ea.a3-Ea.a4/xb;.3<kb?(Ib=ha/xb*(1+kb*(Ea.a1+Ra+Ib*mb)/xb),xb=Math.asin(Ib),Ra=Ib*Ib,kb=Math.sqrt(1-Ra)):(kb=lb/xb*(1-Ib*(Ea.a5-Ra-kb*mb)/xb),xb=Math.acos(kb),Ra=1-kb*kb,Ib=Math.sqrt(Ra));Ya=1-F.earth.eccentricitySquared*Ra;Ra=F.earth.radius/Math.sqrt(Ya);Ea=Ea.a6*Ra;Ra=lb-Ra*kb;mb=ha-Ea*Ib;
ha=kb*Ra+Ib*mb;lb=kb*mb-Ib*Ra;Ea=lb/(Ea/Ya+ha);xb+=Ea;0>X&&(xb=-xb);ba[qa++]=Rb*Ga;ba[qa++]=Rb*xb;ba[qa]=ha+lb*Ea/2}function xa(X,ha,ba,qa){Wa(X,ha,ba,qa);pa(ba,qa,ba,qa)}function vb(X,ha,ba,qa){Wa(X,ha,ba,qa);da(ba,qa,ba,qa)}function ub(X,ha,ba=b()){return N.isNone(X)||N.isNone(ha)?null:qb(X,ha,ba).projector}function qb(X,ha,ba){if(N.isNone(X)||N.isNone(ha)||ba.source.spatialReference===X&&ba.dest.spatialReference===ha)return ba;const qa=p(X,ba.source),Ea=p(ha,ba.dest);qa===oa.UNKNOWN&&Ea===oa.UNKNOWN?
K.equals(X,ha)?ba.projector=V:ba.projector=null:ba.projector=zb[qa][Ea];return ba}function b(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:V}}let jb=null,gb=null,Gb=null,Pb={};const nb=new m.SimpleObservable;let Wb=function(X){function ha(){return X.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ja._inheritsLoose(ha,X);
return ha}(T);var oa;(function(X){X[X.UNKNOWN=0]="UNKNOWN";X[X.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";X[X.WGS84=2]="WGS84";X[X.WEB_MERCATOR=3]="WEB_MERCATOR";X[X.WGS84_ECEF=4]="WGS84_ECEF";X[X.CGCS2000=5]="CGCS2000";X[X.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";X[X.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";X[X.GCSMARS2000=8]="GCSMARS2000";X[X.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";X[X.GCSMOON2000=10]="GCSMOON2000";X[X.LON_LAT=11]="LON_LAT";X[X.PLATE_CARREE=12]="PLATE_CARREE"})(oa||
(oa={}));const Yb=F.earth.radius*Math.PI/180,Sb=180/(F.earth.radius*Math.PI),zb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:V,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:aa,[oa.WGS84]:V,[oa.WGS84_ECEF]:Ja},[oa.CGCS2000]:{[oa.CGCS2000]:V,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:V,
[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:aa,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ja},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:V,[oa.GCSMOON2000]:null,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ea,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:V,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:W,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:la,[oa.WGS84_COMPARABLE_LON_LAT]:la,[oa.SPHERICAL_ECEF]:ta,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:V,[oa.PLATE_CARREE]:na,[oa.WGS84]:la,[oa.WGS84_ECEF]:x},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Wa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Wa,[oa.WGS84_COMPARABLE_LON_LAT]:Wa,[oa.SPHERICAL_ECEF]:xa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:vb,[oa.PLATE_CARREE]:function(X,ha,ba,qa){Wa(X,ha,ba,qa);aa(ba,qa,ba,qa)},[oa.WGS84]:Wa,[oa.WGS84_ECEF]:V},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ma,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,
[oa.LON_LAT]:Ma,[oa.WGS84_COMPARABLE_LON_LAT]:Ma,[oa.SPHERICAL_ECEF]:V,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Ta,[oa.PLATE_CARREE]:function(X,ha,ba,qa){Ma(X,ha,ba,qa);aa(ba,qa,ba,qa)},[oa.WGS84]:Ma,[oa.WGS84_ECEF]:Va},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:Oa,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Oa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:V,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ca,[oa.LON_LAT]:Ca,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:V,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,
[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:V,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:V,[oa.GCSMARS2000]:V,[oa.GCSMOON2000]:V,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:V,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:ea,[oa.SPHERICAL_MOON_PCPF]:W,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:aa,[oa.WGS84]:V,[oa.WGS84_ECEF]:Ja},
[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:V,[oa.WGS84_COMPARABLE_LON_LAT]:V,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:aa,[oa.WGS84]:V,[oa.WGS84_ECEF]:Ja},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ia,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ia,[oa.WGS84_COMPARABLE_LON_LAT]:ia,[oa.SPHERICAL_ECEF]:function(X,ha,ba,qa){ia(X,ha,ba,qa);
pa(ba,qa,ba,qa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(X,ha,ba,qa){ia(X,ha,ba,qa);da(ba,qa,ba,qa)},[oa.PLATE_CARREE]:V,[oa.WGS84]:ia,[oa.WGS84_ECEF]:function(X,ha,ba,qa){ia(X,ha,ba,qa);Ja(ba,qa,ba,qa)}}},Kb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Zb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Xb=b(),kc=b(),Hb=I.deg2rad(1),Rb=I.rad2deg(1),ib=M.create(),Ab=M.create(),Bb=M.create(),ab=M.create(),hc=M.create();
d.canProjectToWGS84ComparableLonLat=function(X){if(N.isNone(X))return!1;X=p(X,Kb);return!!zb[X][oa.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=Z;d.computeENUToSphericalPCPFLocalRotation=Fa;d.computeSphericalPCPFToENULocalRotation=c;d.computeTranslationToOriginAndRotation=function(X,ha,ba,qa){if(N.isNone(X)||N.isNone(qa))return!1;var Ea=p(X,Kb),Ga=p(qa,Zb);if(Ea===Ga&&Ga!==oa.SPHERICAL_ECEF&&Ga!==oa.SPHERICAL_MARS_PCPF&&Ga!==oa.SPHERICAL_MOON_PCPF&&(Ea!==oa.UNKNOWN||K.equals(X,qa)))return G.fromTranslation(ba,
ha),!0;if(Ga===oa.SPHERICAL_ECEF||Ga===oa.SPHERICAL_MARS_PCPF||Ga===oa.SPHERICAL_MOON_PCPF){Ea=zb[Ea][oa.LON_LAT];Ga=zb[oa.LON_LAT][Ga];if(N.isNone(Ea)||N.isNone(Ga))return!1;Ea(ha,0,Ab,0);Ga(Ab,0,Bb,0);Fa(Hb*Ab[0],Hb*Ab[1],ba);ba[12]=Bb[0];ba[13]=Bb[1];ba[14]=Bb[2];return!0}if((Ga===oa.WEB_MERCATOR||Ga===oa.PLATE_CARREE)&&(Ea===oa.WGS84||Ea===oa.CGCS2000&&Ga===oa.PLATE_CARREE||Ea===oa.SPHERICAL_ECEF||Ea===oa.WEB_MERCATOR)){X=zb[Ea][oa.LON_LAT];Ga=zb[oa.LON_LAT][Ga];if(N.isNone(X)||N.isNone(Ga))return!1;
X(ha,0,Ab,0);Ga(Ab,0,Bb,0);Ea===oa.SPHERICAL_ECEF?c(Hb*Ab[0],Hb*Ab[1],ba):G.identity(ba);ba[12]=Bb[0];ba[13]=Bb[1];ba[14]=Bb[2];return!0}return!1};d.getProjectorName=function(X,ha){switch(ub(X,ha,Xb)){case V:return"copy3";case pa:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";case aa:return"wgs84ToPlateCarree";case Ja:return"wgs84ToWGS84ECEF";case la:return"webMercatorToWGS84";case ta:return"webMercatorToSphericalECEF";case x:return"webMercatorToWGS84ECEF";case na:return"webMercatorToPlateCarree";
case Wa:return"wgs84ECEFToWGS84";case xa:return"wgs84ECEFToSphericalECEF";case vb:return"wgs84ECEFToWebMercator";case Ma:return"sphericalECEFToWGS84";case Ta:return"sphericalECEFToWebMercator";case Oa:return"sphericalMarsPCPFToMars2000";case Ca:return"sphericalMoonPCPFToMoon2000";case Va:return"sphericalECEFToWGS84ECEF";case ea:return"mars2000ToSphericalPCPF";case W:return"moon2000ToSphericalPCPF";default:return null}};d.getTransformation=l;d.getTransformations=function(X,ha,ba=null){if(N.isNone(jb)||
N.isNone(gb))throw new Wb;X=jb._getTransformationBySuitability(gb,X,ha,ba,ba?.spatialReference);if(null!==X){ha=[];for(const qa of X)ha.push(C.fromGE(qa));return ha}return[]};d.initializeProjection=function(X,ha,ba,qa){return ka.apply(this,arguments)};d.isLoaded=L;d.load=Q;d.localLinearScaleFactors=function(X,ha,ba,qa){if(N.isNone(ha)||N.isNone(qa))return!1;const Ea=p(ha,Kb);var Ga=p(qa,Zb);if(Ea===Ga&&Ea!==oa.UNKNOWN||K.equals(ha,qa))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(Ea===oa.SPHERICAL_ECEF){ha=
Y.length(X);X=ha/Math.sqrt(X[0]*X[0]+X[1]*X[1]);ha/=F.earth.radius;if(Ga===oa.WEB_MERCATOR)return ba[0]=X*ha,ba[1]=X*ha,ba[2]=1,!0;if(Ga===oa.WGS84||Ga===oa.CGCS2000)return Ga=Sb,ba[0]=Ga*X*ha,ba[1]=Ga*ha,ba[2]=1,!0}else if(Ea===oa.PLATE_CARREE){if(Ga===oa.WGS84||Ga===oa.CGCS2000)return ba[0]=Sb,ba[1]=Sb,ba[2]=1,!0;if(Ga===oa.WEB_MERCATOR)return Ga=X[1]/F.earth.radius,ba[0]=1,ba[1]=1/Math.cos(Ga),ba[2]=1,!0}return!1};d.lonLatToSphericalPCPF=function(X,ha,ba,qa){const Ea=Math.cos(ba);X[0]=Math.cos(ha)*
Ea*qa;X[1]=Math.sin(ha)*Ea*qa;X[2]=Math.sin(ba)*qa};d.lonLatToWebMercatorComparable=O;d.project=R;d.projectBoundingRect=function(X,ha,ba,qa){if(null==X)return!1;if(K.equals(ha,qa))return S.copy(ba,X),!0;ib[0]=X[0];ib[1]=X[1];ib[2]=0;if(!Xa(ib,ha,0,ib,qa,0,1))return!1;ba[0]=ib[0];ba[1]=ib[1];ib[0]=X[2];ib[1]=X[3];ib[2]=0;if(!Xa(ib,ha,0,ib,qa,0,1))return!1;ba[2]=ib[0];ba[3]=ib[1];return!0};d.projectBoundingSphere=function(X,ha,ba,qa){if(N.isNone(ha)||N.isNone(qa))return!1;ha=qb(ha,qa,kc);if(ha.projector===
V)return ba[0]=X[0],ba[1]=X[1],ba[2]=X[2],ba[3]=X[3],!0;if(N.isNone(ha.projector))return!1;const {source:Ea,dest:Ga}=ha;if(Ga.spatialReferenceId===oa.WEB_MERCATOR){ha=zb[Ea.spatialReferenceId][oa.WGS84];if(N.isNone(ha))return!1;ha(X,0,Ab,0);da(Ab,0,ba,0);ba[3]=Da(Ab[1],X[2],X[3],F.earth.radius);return!0}if(Ea.spatialReferenceId!==oa.WGS84&&Ea.spatialReferenceId!==oa.CGCS2000||Ga.spatialReferenceId!==oa.PLATE_CARREE)ha.projector(X,0,ba,0),ba[3]=X[3]*(Ea.metersPerUnit??1)/(Ga.metersPerUnit??1);else{qa=
zb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Ra=X[3];N.isSome(zb[Ea.spatialReferenceId][oa.SPHERICAL_ECEF])&&N.isSome(qa)&&(Ra=Da(X[1],X[2],X[3],F.earth.radius));ha.projector(X,0,ba,0);ba[3]=Ra}return!0};d.projectBuffer=Xa;d.projectDirection=function(X,ha,ba,qa,Ea){Y.copy(ab,X);Y.add(hc,X,ha);Sa(ab,ba,ab,Ea);Sa(hc,ba,hc,Ea);Y.subtract(qa,hc,ab);Y.normalize(qa,qa)};d.projectExtent=function(X,ha,ba=ha.spatialReference,qa=0){return N.isSome(X.spatialReference)&&N.isSome(ba)&&N.isSome(Ua(X,X.spatialReference,
ha,ba,qa))};d.projectMany=H;d.projectMultipoint=function(X,ha,ba=ha.spatialReference,qa=0){return N.isSome(X.spatialReference)&&N.isSome(ba)&&N.isSome(Ha(X,X.spatialReference,ha,ba,qa))};d.projectOrLoad=function(X,ha){X=A([X],ha);return N.isSome(X.pending)?{pending:X.pending,geometry:null}:N.isSome(X.geometries)?{pending:null,geometry:X.geometries[0]}:{pending:null,geometry:null}};d.projectOrLoadMany=A;d.projectPoint=function(X,ha,ba=ha.spatialReference,qa=0){return N.isSome(ba)&&N.isSome(X.spatialReference)&&
N.isSome(za(X,X.spatialReference,ha,ba,qa))};d.projectPointToVector=function(X,ha,ba,qa=0){ab[0]=X.x;ab[1]=X.y;const Ea=X.z;ab[2]=void 0!==Ea?Ea:qa;return Xa(ab,X.spatialReference,0,ha,ba,0,1)};d.projectPointToWGS84ComparableLonLat=function(X,ha){ab[0]=X.x;ab[1]=X.y;const ba=X.z;ab[2]=void 0!==ba?ba:0;return bb(ab,X.spatialReference,ha)};d.projectPolygon=function(X,ha,ba=ha.spatialReference,qa=0){return N.isSome(X.spatialReference)&&N.isSome(ba)&&N.isSome(Ia(X,X.spatialReference,ha,ba,qa))};d.projectPolygonToWGS84ComparableLonLat=
function({hasZ:X,spatialReference:ha,rings:ba},qa,Ea=0){ha=p(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ha))return!1;X=X?Ga=>Ga:Ga=>Y.set(ab,Ga[0],Ga[1],Ea);for(const Ga of ba){ba=[];for(const Ra of Ga){const Ya=[0,0,Ea];ha(X(Ra),0,Ya,0);ba.push(Ya)}qa.push(ba)}return!0};d.projectPolyline=function(X,ha,ba=ha.spatialReference,qa=0){return N.isSome(X.spatialReference)&&N.isSome(ba)&&N.isSome(Ka(X,X.spatialReference,ha,ba,qa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:X,
spatialReference:ha,paths:ba},qa,Ea=0){ha=p(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ha))return!1;X=X?Ga=>Ga:Ga=>Y.set(ab,Ga[0],Ga[1],Ea);for(const Ga of ba){ba=[];for(const Ra of Ga){const Ya=[0,0,Ea];ha(X(Ra),0,Ya,0);ba.push(Ya)}qa.push(ba)}return!0};d.projectVectorToDehydratedPoint=function(X,ha,ba){return Xa(X,ha,0,ab,ba.spatialReference,0,1)?(ba.x=ab[0],ba.y=ab[1],ba.z=ab[2],ba):null};d.projectVectorToPoint=function(X,ha,ba){if(N.isNone(ha)||N.isNone(ba))return null;const qa=
new z({spatialReference:ba});return Xa(X,ha,0,ab,ba,0,1)?(qa.x=ab[0],qa.y=ab[1],qa.z=ab[2],qa):null};d.projectVectorToVector=Sa;d.projectVectorToWGS84ComparableLonLat=function(X,ha,ba){return bb(X,ha,ba)};d.projectWithoutEngine=ua;d.projectXYZToVector=Qa;d.sphericalPCPFtoLonLatElevation=wa;d.test={get loadPromise(){return Gb}};d.tryProjectWithZConversion=u;d.unload=function(){Gb=gb=jb=null;Pb={}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(g,d,ja){ja=function(T){function I(){return T.apply(this,arguments)||this}d._inheritsLoose(I,T);I.prototype.notify=function(){var N=this._observers;if(N&&0<N.length){N=N.slice();for(const E of N)E.onInvalidated(),E.onCommitted()}};return I}(ja.ObservableBase);g.SimpleObservable=ja;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(g,
d,ja){function T(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];c[9]=p[9];c[10]=p[10];c[11]=p[11];c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function I(c,p,V,la,ta,x,O,da,aa,ia,na,ra,W,ea,pa,wa,Ca){c[0]=p;c[1]=V;c[2]=la;c[3]=ta;c[4]=x;c[5]=O;c[6]=da;c[7]=aa;c[8]=ia;c[9]=na;c[10]=ra;c[11]=W;c[12]=ea;c[13]=pa;c[14]=wa;c[15]=Ca;return c}function N(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function E(c,p){if(c===p){const V=p[1],la=p[2],ta=p[3],x=p[6],O=p[7],da=p[11];c[1]=p[4];c[2]=p[8];c[3]=p[12];c[4]=V;c[6]=p[9];c[7]=p[13];c[8]=la;c[9]=x;c[11]=p[14];c[12]=ta;c[13]=O;c[14]=da}else c[0]=p[0],c[1]=p[4],c[2]=p[8],c[3]=p[12],c[4]=p[1],c[5]=p[5],c[6]=p[9],c[7]=p[13],c[8]=p[2],c[9]=p[6],c[10]=p[10],c[11]=p[14],c[12]=p[3],c[13]=p[7],c[14]=p[11],c[15]=p[15];return c}function t(c,p){k(c,p)||N(c);return c}function k(c,p){const V=p[0],la=p[1],ta=p[2],x=p[3],
O=p[4],da=p[5],aa=p[6],ia=p[7],na=p[8],ra=p[9],W=p[10],ea=p[11],pa=p[12],wa=p[13],Ca=p[14];p=p[15];const Oa=V*da-la*O,Ma=V*aa-ta*O,Ta=V*ia-x*O,Va=la*aa-ta*da,Ja=la*ia-x*da,Wa=ta*ia-x*aa,xa=na*wa-ra*pa,vb=na*Ca-W*pa,ub=na*p-ea*pa,qb=ra*Ca-W*wa,b=ra*p-ea*wa,jb=W*p-ea*Ca;let gb=Oa*jb-Ma*b+Ta*qb+Va*ub-Ja*vb+Wa*xa;if(!gb)return null;gb=1/gb;c[0]=(da*jb-aa*b+ia*qb)*gb;c[1]=(ta*b-la*jb-x*qb)*gb;c[2]=(wa*Wa-Ca*Ja+p*Va)*gb;c[3]=(W*Ja-ra*Wa-ea*Va)*gb;c[4]=(aa*ub-O*jb-ia*vb)*gb;c[5]=(V*jb-ta*ub+x*vb)*gb;c[6]=
(Ca*Ta-pa*Wa-p*Ma)*gb;c[7]=(na*Wa-W*Ta+ea*Ma)*gb;c[8]=(O*b-da*ub+ia*xa)*gb;c[9]=(la*ub-V*b-x*xa)*gb;c[10]=(pa*Ja-wa*Ta+p*Oa)*gb;c[11]=(ra*Ta-na*Ja-ea*Oa)*gb;c[12]=(da*vb-O*qb-aa*xa)*gb;c[13]=(V*qb-la*vb+ta*xa)*gb;c[14]=(wa*Ma-pa*Va-Ca*Oa)*gb;c[15]=(na*Va-ra*Ma+W*Oa)*gb;return c}function m(c,p){const V=p[0],la=p[1],ta=p[2],x=p[3],O=p[4],da=p[5],aa=p[6],ia=p[7],na=p[8],ra=p[9],W=p[10],ea=p[11],pa=p[12],wa=p[13],Ca=p[14];p=p[15];c[0]=da*(W*p-ea*Ca)-ra*(aa*p-ia*Ca)+wa*(aa*ea-ia*W);c[1]=-(la*(W*p-ea*Ca)-
ra*(ta*p-x*Ca)+wa*(ta*ea-x*W));c[2]=la*(aa*p-ia*Ca)-da*(ta*p-x*Ca)+wa*(ta*ia-x*aa);c[3]=-(la*(aa*ea-ia*W)-da*(ta*ea-x*W)+ra*(ta*ia-x*aa));c[4]=-(O*(W*p-ea*Ca)-na*(aa*p-ia*Ca)+pa*(aa*ea-ia*W));c[5]=V*(W*p-ea*Ca)-na*(ta*p-x*Ca)+pa*(ta*ea-x*W);c[6]=-(V*(aa*p-ia*Ca)-O*(ta*p-x*Ca)+pa*(ta*ia-x*aa));c[7]=V*(aa*ea-ia*W)-O*(ta*ea-x*W)+na*(ta*ia-x*aa);c[8]=O*(ra*p-ea*wa)-na*(da*p-ia*wa)+pa*(da*ea-ia*ra);c[9]=-(V*(ra*p-ea*wa)-na*(la*p-x*wa)+pa*(la*ea-x*ra));c[10]=V*(da*p-ia*wa)-O*(la*p-x*wa)+pa*(la*ia-x*da);
c[11]=-(V*(da*ea-ia*ra)-O*(la*ea-x*ra)+na*(la*ia-x*da));c[12]=-(O*(ra*Ca-W*wa)-na*(da*Ca-aa*wa)+pa*(da*W-aa*ra));c[13]=V*(ra*Ca-W*wa)-na*(la*Ca-ta*wa)+pa*(la*W-ta*ra);c[14]=-(V*(da*Ca-aa*wa)-O*(la*Ca-ta*wa)+pa*(la*aa-ta*da));c[15]=V*(da*W-aa*ra)-O*(la*W-ta*ra)+na*(la*aa-ta*da);return c}function G(c){const p=c[0],V=c[1],la=c[2],ta=c[3],x=c[4],O=c[5],da=c[6],aa=c[7],ia=c[8],na=c[9],ra=c[10],W=c[11],ea=c[12],pa=c[13],wa=c[14];c=c[15];return(p*O-V*x)*(ra*c-W*wa)-(p*da-la*x)*(na*c-W*pa)+(p*aa-ta*x)*(na*
wa-ra*pa)+(V*da-la*O)*(ia*c-W*ea)-(V*aa-ta*O)*(ia*wa-ra*ea)+(la*aa-ta*da)*(ia*pa-na*ea)}function Y(c,p,V){const la=p[0],ta=p[1],x=p[2],O=p[3],da=p[4],aa=p[5],ia=p[6],na=p[7],ra=p[8],W=p[9],ea=p[10],pa=p[11],wa=p[12],Ca=p[13],Oa=p[14];p=p[15];let Ma=V[0],Ta=V[1],Va=V[2],Ja=V[3];c[0]=Ma*la+Ta*da+Va*ra+Ja*wa;c[1]=Ma*ta+Ta*aa+Va*W+Ja*Ca;c[2]=Ma*x+Ta*ia+Va*ea+Ja*Oa;c[3]=Ma*O+Ta*na+Va*pa+Ja*p;Ma=V[4];Ta=V[5];Va=V[6];Ja=V[7];c[4]=Ma*la+Ta*da+Va*ra+Ja*wa;c[5]=Ma*ta+Ta*aa+Va*W+Ja*Ca;c[6]=Ma*x+Ta*ia+Va*ea+
Ja*Oa;c[7]=Ma*O+Ta*na+Va*pa+Ja*p;Ma=V[8];Ta=V[9];Va=V[10];Ja=V[11];c[8]=Ma*la+Ta*da+Va*ra+Ja*wa;c[9]=Ma*ta+Ta*aa+Va*W+Ja*Ca;c[10]=Ma*x+Ta*ia+Va*ea+Ja*Oa;c[11]=Ma*O+Ta*na+Va*pa+Ja*p;Ma=V[12];Ta=V[13];Va=V[14];Ja=V[15];c[12]=Ma*la+Ta*da+Va*ra+Ja*wa;c[13]=Ma*ta+Ta*aa+Va*W+Ja*Ca;c[14]=Ma*x+Ta*ia+Va*ea+Ja*Oa;c[15]=Ma*O+Ta*na+Va*pa+Ja*p;return c}function M(c,p,V){const la=V[0],ta=V[1];V=V[2];if(p===c)c[12]=p[0]*la+p[4]*ta+p[8]*V+p[12],c[13]=p[1]*la+p[5]*ta+p[9]*V+p[13],c[14]=p[2]*la+p[6]*ta+p[10]*V+p[14],
c[15]=p[3]*la+p[7]*ta+p[11]*V+p[15];else{const x=p[0],O=p[1],da=p[2],aa=p[3],ia=p[4],na=p[5],ra=p[6],W=p[7],ea=p[8],pa=p[9],wa=p[10],Ca=p[11];c[0]=x;c[1]=O;c[2]=da;c[3]=aa;c[4]=ia;c[5]=na;c[6]=ra;c[7]=W;c[8]=ea;c[9]=pa;c[10]=wa;c[11]=Ca;c[12]=x*la+ia*ta+ea*V+p[12];c[13]=O*la+na*ta+pa*V+p[13];c[14]=da*la+ra*ta+wa*V+p[14];c[15]=aa*la+W*ta+Ca*V+p[15]}return c}function n(c,p,V){const la=V[0],ta=V[1];V=V[2];c[0]=p[0]*la;c[1]=p[1]*la;c[2]=p[2]*la;c[3]=p[3]*la;c[4]=p[4]*ta;c[5]=p[5]*ta;c[6]=p[6]*ta;c[7]=
p[7]*ta;c[8]=p[8]*V;c[9]=p[9]*V;c[10]=p[10]*V;c[11]=p[11]*V;c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function w(c,p,V,la){let ta=la[0],x=la[1];la=la[2];let O=Math.sqrt(ta*ta+x*x+la*la);var da=void 0,aa=void 0;let ia=void 0,na=void 0,ra=void 0,W=void 0,ea=void 0,pa=void 0,wa=void 0,Ca=void 0,Oa=void 0,Ma=void 0,Ta=void 0,Va=void 0,Ja=void 0,Wa=void 0,xa=void 0,vb=void 0,ub=void 0,qb=void 0,b=void 0,jb=void 0;aa=da=void 0;if(O<ja.getEpsilon())return null;O=1/O;ta*=O;x*=O;la*=O;da=Math.sin(V);
aa=Math.cos(V);ia=1-aa;na=p[0];ra=p[1];W=p[2];ea=p[3];pa=p[4];wa=p[5];Ca=p[6];Oa=p[7];Ma=p[8];Ta=p[9];Va=p[10];Ja=p[11];Wa=ta*ta*ia+aa;xa=x*ta*ia+la*da;vb=la*ta*ia-x*da;ub=ta*x*ia-la*da;qb=x*x*ia+aa;b=la*x*ia+ta*da;jb=ta*la*ia+x*da;da=x*la*ia-ta*da;aa=la*la*ia+aa;c[0]=na*Wa+pa*xa+Ma*vb;c[1]=ra*Wa+wa*xa+Ta*vb;c[2]=W*Wa+Ca*xa+Va*vb;c[3]=ea*Wa+Oa*xa+Ja*vb;c[4]=na*ub+pa*qb+Ma*b;c[5]=ra*ub+wa*qb+Ta*b;c[6]=W*ub+Ca*qb+Va*b;c[7]=ea*ub+Oa*qb+Ja*b;c[8]=na*jb+pa*da+Ma*aa;c[9]=ra*jb+wa*da+Ta*aa;c[10]=W*jb+Ca*
da+Va*aa;c[11]=ea*jb+Oa*da+Ja*aa;p!==c&&(c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);return c}function e(c,p,V){const la=Math.sin(V);V=Math.cos(V);const ta=p[4],x=p[5],O=p[6],da=p[7],aa=p[8],ia=p[9],na=p[10],ra=p[11];p!==c&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[4]=ta*V+aa*la;c[5]=x*V+ia*la;c[6]=O*V+na*la;c[7]=da*V+ra*la;c[8]=aa*V-ta*la;c[9]=ia*V-x*la;c[10]=na*V-O*la;c[11]=ra*V-da*la;return c}function q(c,p,V){const la=Math.sin(V);V=Math.cos(V);
const ta=p[0],x=p[1],O=p[2],da=p[3],aa=p[8],ia=p[9],na=p[10],ra=p[11];p!==c&&(c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=ta*V-aa*la;c[1]=x*V-ia*la;c[2]=O*V-na*la;c[3]=da*V-ra*la;c[8]=ta*la+aa*V;c[9]=x*la+ia*V;c[10]=O*la+na*V;c[11]=da*la+ra*V;return c}function z(c,p,V){const la=Math.sin(V);V=Math.cos(V);const ta=p[0],x=p[1],O=p[2],da=p[3],aa=p[4],ia=p[5],na=p[6],ra=p[7];p!==c&&(c[8]=p[8],c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=
p[14],c[15]=p[15]);c[0]=ta*V+aa*la;c[1]=x*V+ia*la;c[2]=O*V+na*la;c[3]=da*V+ra*la;c[4]=aa*V-ta*la;c[5]=ia*V-x*la;c[6]=na*V-O*la;c[7]=ra*V-da*la;return c}function y(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=p[0];c[13]=p[1];c[14]=p[2];c[15]=1;return c}function B(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=p[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function S(c,p,V){if(0===p)return N(c);let la=
V[0],ta=V[1];V=V[2];let x=Math.sqrt(la*la+ta*ta+V*V),O=void 0,da=void 0,aa=void 0;if(x<ja.getEpsilon())return null;x=1/x;la*=x;ta*=x;V*=x;O=Math.sin(p);da=Math.cos(p);aa=1-da;c[0]=la*la*aa+da;c[1]=ta*la*aa+V*O;c[2]=V*la*aa-ta*O;c[3]=0;c[4]=la*ta*aa-V*O;c[5]=ta*ta*aa+da;c[6]=V*ta*aa+la*O;c[7]=0;c[8]=la*V*aa+ta*O;c[9]=ta*V*aa-la*O;c[10]=V*V*aa+da;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function F(c,p){const V=Math.sin(p);p=Math.cos(p);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p;c[6]=V;c[7]=0;
c[8]=0;c[9]=-V;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,p){const V=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=0;c[2]=-V;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=V;c[9]=0;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,p){const V=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=V;c[2]=0;c[3]=0;c[4]=-V;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function K(c,p,V){var la=p[0],ta=p[1],x=p[2],O=p[3],da=la+la,aa=ta+ta;const ia=
x+x;p=la*da;const na=la*aa;la*=ia;const ra=ta*aa;ta*=ia;x*=ia;da*=O;aa*=O;O*=ia;c[0]=1-(ra+x);c[1]=na+O;c[2]=la-aa;c[3]=0;c[4]=na-O;c[5]=1-(p+x);c[6]=ta+da;c[7]=0;c[8]=la+aa;c[9]=ta-da;c[10]=1-(p+ra);c[11]=0;c[12]=V[0];c[13]=V[1];c[14]=V[2];c[15]=1;return c}function U(c,p){const V=Fa,la=-p[0],ta=-p[1],x=-p[2],O=p[3],da=p[4],aa=p[5],ia=p[6],na=p[7],ra=la*la+ta*ta+x*x+O*O;0<ra?(V[0]=2*(da*O+na*la+aa*x-ia*ta)/ra,V[1]=2*(aa*O+na*ta+ia*la-da*x)/ra,V[2]=2*(ia*O+na*x+da*ta-aa*la)/ra):(V[0]=2*(da*O+na*la+
aa*x-ia*ta),V[1]=2*(aa*O+na*ta+ia*la-da*x),V[2]=2*(ia*O+na*x+da*ta-aa*la));K(c,p,V);return c}function J(c,p){c[0]=p[12];c[1]=p[13];c[2]=p[14];return c}function L(c,p){const V=p[0],la=p[1],ta=p[2],x=p[4],O=p[5],da=p[6],aa=p[8],ia=p[9];p=p[10];c[0]=Math.sqrt(V*V+la*la+ta*ta);c[1]=Math.sqrt(x*x+O*O+da*da);c[2]=Math.sqrt(aa*aa+ia*ia+p*p);return c}function Q(c,p){const V=p[0]+p[5]+p[10];let la=0;0<V?(la=2*Math.sqrt(V+1),c[3]=.25*la,c[0]=(p[6]-p[9])/la,c[1]=(p[8]-p[2])/la,c[2]=(p[1]-p[4])/la):p[0]>p[5]&&
p[0]>p[10]?(la=2*Math.sqrt(1+p[0]-p[5]-p[10]),c[3]=(p[6]-p[9])/la,c[0]=.25*la,c[1]=(p[1]+p[4])/la,c[2]=(p[8]+p[2])/la):p[5]>p[10]?(la=2*Math.sqrt(1+p[5]-p[0]-p[10]),c[3]=(p[8]-p[2])/la,c[0]=(p[1]+p[4])/la,c[1]=.25*la,c[2]=(p[6]+p[9])/la):(la=2*Math.sqrt(1+p[10]-p[0]-p[5]),c[3]=(p[1]-p[4])/la,c[0]=(p[8]+p[2])/la,c[1]=(p[6]+p[9])/la,c[2]=.25*la);return c}function R(c,p,V,la){var ta=p[0],x=p[1],O=p[2],da=p[3],aa=ta+ta,ia=x+x,na=O+O;p=ta*aa;const ra=ta*ia;ta*=na;const W=x*ia;x*=na;O*=na;aa*=da;ia*=da;
da*=na;na=la[0];const ea=la[1];la=la[2];c[0]=(1-(W+O))*na;c[1]=(ra+da)*na;c[2]=(ta-ia)*na;c[3]=0;c[4]=(ra-da)*ea;c[5]=(1-(p+O))*ea;c[6]=(x+aa)*ea;c[7]=0;c[8]=(ta+ia)*la;c[9]=(x-aa)*la;c[10]=(1-(p+W))*la;c[11]=0;c[12]=V[0];c[13]=V[1];c[14]=V[2];c[15]=1;return c}function H(c,p,V,la,ta){var x=p[0],O=p[1],da=p[2],aa=p[3],ia=x+x,na=O+O,ra=da+da;p=x*ia;var W=x*na,ea=x*ra;x=O*na;O*=ra;var pa=da*ra;da=aa*ia;na*=aa;const wa=aa*ra;var Ca=la[0],Oa=la[1];ra=la[2];la=ta[0];aa=ta[1];ta=ta[2];ia=(1-(x+pa))*Ca;const Ma=
(W+wa)*Ca;Ca*=ea-na;W=(W-wa)*Oa;pa=(1-(p+pa))*Oa;Oa*=O+da;ea=(ea+na)*ra;O=(O-da)*ra;p=(1-(p+x))*ra;c[0]=ia;c[1]=Ma;c[2]=Ca;c[3]=0;c[4]=W;c[5]=pa;c[6]=Oa;c[7]=0;c[8]=ea;c[9]=O;c[10]=p;c[11]=0;c[12]=V[0]+la-(ia*la+W*aa+ea*ta);c[13]=V[1]+aa-(Ma*la+pa*aa+O*ta);c[14]=V[2]+ta-(Ca*la+Oa*aa+p*ta);c[15]=1;return c}function A(c,p){var V=p[0],la=p[1],ta=p[2];p=p[3];var x=V+V,O=la+la;const da=ta+ta;V*=x;const aa=la*x;la*=O;const ia=ta*x,na=ta*O;ta*=da;x*=p;O*=p;p*=da;c[0]=1-la-ta;c[1]=aa+p;c[2]=ia-O;c[3]=0;c[4]=
aa-p;c[5]=1-V-ta;c[6]=na+x;c[7]=0;c[8]=ia+O;c[9]=na-x;c[10]=1-V-la;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function l(c,p,V,la,ta,x,O){const da=1/(V-p),aa=1/(ta-la),ia=1/(x-O);c[0]=2*x*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*x*aa;c[6]=0;c[7]=0;c[8]=(V+p)*da;c[9]=(ta+la)*aa;c[10]=(O+x)*ia;c[11]=-1;c[12]=0;c[13]=0;c[14]=O*x*2*ia;c[15]=0;return c}function u(c,p,V,la,ta){p=1/Math.tan(p/2);let x=void 0;c[0]=p/V;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=
0;c[15]=0;null!=ta&&Infinity!==ta?(x=1/(la-ta),c[10]=(ta+la)*x,c[14]=2*ta*la*x):(c[10]=-1,c[14]=-2*la);return c}function Z(c,p,V,la){const ta=Math.tan(p.upDegrees*Math.PI/180),x=Math.tan(p.downDegrees*Math.PI/180),O=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const da=2/(O+p),aa=2/(ta+x);c[0]=da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=aa;c[6]=0;c[7]=0;c[8]=-((O-p)*da*.5);c[9]=(ta-x)*aa*.5;c[10]=la/(V-la);c[11]=-1;c[12]=0;c[13]=0;c[14]=la*V/(V-la);c[15]=0;return c}function ka(c,
p,V,la,ta,x,O){const da=1/(p-V),aa=1/(la-ta),ia=1/(x-O);c[0]=-2*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*aa;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ia;c[11]=0;c[12]=(p+V)*da;c[13]=(ta+la)*aa;c[14]=(O+x)*ia;c[15]=1;return c}function ua(c,p,V,la){var ta=void 0;let x=void 0;var O=void 0,da=void 0;let aa=void 0,ia=void 0;var na=void 0,ra=void 0;let W=void 0,ea=void 0;const pa=p[0],wa=p[1];p=p[2];O=la[0];da=la[1];la=la[2];na=V[0];ra=V[1];V=V[2];ta=ja.getEpsilon();if(Math.abs(pa-na)<ta&&Math.abs(wa-ra)<ta&&Math.abs(p-
V)<ta)return N(c);na=pa-na;ra=wa-ra;W=p-V;ea=1/Math.sqrt(na*na+ra*ra+W*W);na*=ea;ra*=ea;W*=ea;ta=da*W-la*ra;x=la*na-O*W;O=O*ra-da*na;(ea=Math.sqrt(ta*ta+x*x+O*O))?(ea=1/ea,ta*=ea,x*=ea,O*=ea):O=x=ta=0;da=ra*O-W*x;aa=W*ta-na*O;ia=na*x-ra*ta;(ea=Math.sqrt(da*da+aa*aa+ia*ia))?(ea=1/ea,da*=ea,aa*=ea,ia*=ea):ia=aa=da=0;c[0]=ta;c[1]=da;c[2]=na;c[3]=0;c[4]=x;c[5]=aa;c[6]=ra;c[7]=0;c[8]=O;c[9]=ia;c[10]=W;c[11]=0;c[12]=-(ta*pa+x*wa+O*p);c[13]=-(da*pa+aa*wa+ia*p);c[14]=-(na*pa+ra*wa+W*p);c[15]=1;return c}function za(c,
p,V,la){const ta=p[0],x=p[1];p=p[2];var O=la[0];const da=la[1];var aa=la[2];la=ta-V[0];let ia=x-V[1];V=p-V[2];let na=la*la+ia*ia+V*V;0<na&&(na=1/Math.sqrt(na),la*=na,ia*=na,V*=na);let ra=da*V-aa*ia;aa=aa*la-O*V;O=O*ia-da*la;na=ra*ra+aa*aa+O*O;0<na&&(na=1/Math.sqrt(na),ra*=na,aa*=na,O*=na);c[0]=ra;c[1]=aa;c[2]=O;c[3]=0;c[4]=ia*O-V*aa;c[5]=V*ra-la*O;c[6]=la*aa-ia*ra;c[7]=0;c[8]=la;c[9]=ia;c[10]=V;c[11]=0;c[12]=ta;c[13]=x;c[14]=p;c[15]=1;return c}function Ha(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+
", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ka(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Ia(c,p,V){c[0]=p[0]+V[0];c[1]=p[1]+V[1];c[2]=p[2]+V[2];c[3]=p[3]+V[3];c[4]=p[4]+V[4];c[5]=p[5]+V[5];c[6]=p[6]+V[6];c[7]=p[7]+V[7];c[8]=p[8]+V[8];c[9]=p[9]+V[9];c[10]=p[10]+V[10];c[11]=p[11]+
V[11];c[12]=p[12]+V[12];c[13]=p[13]+V[13];c[14]=p[14]+V[14];c[15]=p[15]+V[15];return c}function Ua(c,p,V){c[0]=p[0]-V[0];c[1]=p[1]-V[1];c[2]=p[2]-V[2];c[3]=p[3]-V[3];c[4]=p[4]-V[4];c[5]=p[5]-V[5];c[6]=p[6]-V[6];c[7]=p[7]-V[7];c[8]=p[8]-V[8];c[9]=p[9]-V[9];c[10]=p[10]-V[10];c[11]=p[11]-V[11];c[12]=p[12]-V[12];c[13]=p[13]-V[13];c[14]=p[14]-V[14];c[15]=p[15]-V[15];return c}function Qa(c,p,V){c[0]=p[0]*V;c[1]=p[1]*V;c[2]=p[2]*V;c[3]=p[3]*V;c[4]=p[4]*V;c[5]=p[5]*V;c[6]=p[6]*V;c[7]=p[7]*V;c[8]=p[8]*V;c[9]=
p[9]*V;c[10]=p[10]*V;c[11]=p[11]*V;c[12]=p[12]*V;c[13]=p[13]*V;c[14]=p[14]*V;c[15]=p[15]*V;return c}function Sa(c,p,V,la){c[0]=p[0]+V[0]*la;c[1]=p[1]+V[1]*la;c[2]=p[2]+V[2]*la;c[3]=p[3]+V[3]*la;c[4]=p[4]+V[4]*la;c[5]=p[5]+V[5]*la;c[6]=p[6]+V[6]*la;c[7]=p[7]+V[7]*la;c[8]=p[8]+V[8]*la;c[9]=p[9]+V[9]*la;c[10]=p[10]+V[10]*la;c[11]=p[11]+V[11]*la;c[12]=p[12]+V[12]*la;c[13]=p[13]+V[13]*la;c[14]=p[14]+V[14]*la;c[15]=p[15]+V[15]*la;return c}function bb(c,p){return c[0]===p[0]&&c[1]===p[1]&&c[2]===p[2]&&c[3]===
p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]&&c[9]===p[9]&&c[10]===p[10]&&c[11]===p[11]&&c[12]===p[12]&&c[13]===p[13]&&c[14]===p[14]&&c[15]===p[15]}function Xa(c,p){if(c===p)return!0;const V=c[0],la=c[1],ta=c[2],x=c[3],O=c[4],da=c[5],aa=c[6],ia=c[7],na=c[8],ra=c[9],W=c[10],ea=c[11],pa=c[12],wa=c[13],Ca=c[14];c=c[15];const Oa=p[0],Ma=p[1],Ta=p[2],Va=p[3],Ja=p[4],Wa=p[5],xa=p[6],vb=p[7],ub=p[8],qb=p[9],b=p[10],jb=p[11],gb=p[12],Gb=p[13],Pb=p[14];p=p[15];const nb=ja.getEpsilon();
return Math.abs(V-Oa)<=nb*Math.max(1,Math.abs(V),Math.abs(Oa))&&Math.abs(la-Ma)<=nb*Math.max(1,Math.abs(la),Math.abs(Ma))&&Math.abs(ta-Ta)<=nb*Math.max(1,Math.abs(ta),Math.abs(Ta))&&Math.abs(x-Va)<=nb*Math.max(1,Math.abs(x),Math.abs(Va))&&Math.abs(O-Ja)<=nb*Math.max(1,Math.abs(O),Math.abs(Ja))&&Math.abs(da-Wa)<=nb*Math.max(1,Math.abs(da),Math.abs(Wa))&&Math.abs(aa-xa)<=nb*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ia-vb)<=nb*Math.max(1,Math.abs(ia),Math.abs(vb))&&Math.abs(na-ub)<=nb*Math.max(1,
Math.abs(na),Math.abs(ub))&&Math.abs(ra-qb)<=nb*Math.max(1,Math.abs(ra),Math.abs(qb))&&Math.abs(W-b)<=nb*Math.max(1,Math.abs(W),Math.abs(b))&&Math.abs(ea-jb)<=nb*Math.max(1,Math.abs(ea),Math.abs(jb))&&Math.abs(pa-gb)<=nb*Math.max(1,Math.abs(pa),Math.abs(gb))&&Math.abs(wa-Gb)<=nb*Math.max(1,Math.abs(wa),Math.abs(Gb))&&Math.abs(Ca-Pb)<=nb*Math.max(1,Math.abs(Ca),Math.abs(Pb))&&Math.abs(c-p)<=nb*Math.max(1,Math.abs(c),Math.abs(p))}function Aa(c){const p=ja.getEpsilon(),V=c[0],la=c[1],ta=c[2],x=c[4],
O=c[5],da=c[6],aa=c[8],ia=c[9];c=c[10];return Math.abs(1-(V*V+x*x+aa*aa))<=p&&Math.abs(1-(la*la+O*O+ia*ia))<=p&&Math.abs(1-(ta*ta+da*da+c*c))<=p}function Da(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const Fa=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,add:Ia,adjoint:m,copy:T,determinant:G,equals:Xa,exactEquals:bb,frob:Ka,fromQuat:A,fromQuat2:U,fromRotation:S,fromRotationTranslation:K,fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:H,
fromScaling:B,fromTranslation:y,fromXRotation:F,fromYRotation:r,fromZRotation:C,frustum:l,getRotation:Q,getScaling:L,getTranslation:J,hasIdentityRotation:Da,identity:N,invert:k,invertOrIdentity:t,isOrthoNormal:Aa,lookAt:ua,mul:Y,multiply:Y,multiplyScalar:Qa,multiplyScalarAndAdd:Sa,ortho:ka,perspective:u,perspectiveFromFieldOfView:Z,rotate:w,rotateX:e,rotateY:q,rotateZ:z,scale:n,set:I,str:Ha,sub:Ua,subtract:Ua,targetTo:za,translate:M,transpose:E},Symbol.toStringTag,{value:"Module"}));g.add=Ia;g.adjoint=
m;g.copy=T;g.determinant=G;g.equals=Xa;g.exactEquals=bb;g.frob=Ka;g.fromQuat=A;g.fromQuat2=U;g.fromRotation=S;g.fromRotationTranslation=K;g.fromRotationTranslationScale=R;g.fromRotationTranslationScaleOrigin=H;g.fromScaling=B;g.fromTranslation=y;g.fromXRotation=F;g.fromYRotation=r;g.fromZRotation=C;g.frustum=l;g.getRotation=Q;g.getScaling=L;g.getTranslation=J;g.hasIdentityRotation=Da;g.identity=N;g.invert=k;g.invertOrIdentity=t;g.isOrthoNormal=Aa;g.lookAt=ua;g.mat4=d;g.mul=Y;g.multiply=Y;g.multiplyScalar=
Qa;g.multiplyScalarAndAdd=Sa;g.ortho=ka;g.perspective=u;g.perspectiveFromFieldOfView=Z;g.rotate=w;g.rotateX=e;g.rotateY=q;g.rotateZ=z;g.scale=n;g.set=I;g.str=Ha;g.sub=Ua;g.subtract=Ua;g.targetTo=za;g.translate=M;g.transpose=E})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(g,d,ja,T,I){function N(){return!!d._pe}function E(){return!!I("esri-wasm")}function t(){return n?n:n=(new Promise((e,q)=>g(["./pe-wasm"],e,q))).then(e=>
e.peWasm).then(({default:e})=>e({locateFile:q=>T.getAssetUrl(`esri/geometry/support/${q}`)})).then(e=>{k(e)})}function k(e){function q(B,S,F){B[S]=F(B[S])}d._pe=e;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(B){function S(){return B.apply(this,arguments)||this}ja._inheritsLoose(S,B);S.prototype.destroy=function(){d._pe.destroy(this)};return S}(d._pe.PeGCSExtent);e=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,
d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var z of e)q(z.prototype,"getName",B=>function(){return B.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const B of[d._pe.PeGeogtran,d._pe.PeProjcs])q(B.prototype,"getParameters",S=>function(){const F=Array(d.PeDefs.PE_PARM_MAX);let r=S.call(this);for(let C=0;C<F.length;C++){const K=d._pe.getValue(r,"*");F[C]=K?d._pe.wrapPointer(K,d._pe.PeParameter):null;r+=Int32Array.BYTES_PER_ELEMENT}return F});q(d._pe.PeHorizon.prototype,
"getCoord",B=>function(){const S=this.getSize();if(!S)return null;const F=[],r=B.call(this);M(F,S,r);return F});q(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",B=>{const S=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let F=null;var r=B.call(this);if(!d._pe.compare(r,d._pe.NULL)){F=[r];const C=this.getSteps();if(1<C){r=d._pe.getPointer(r);for(let K=1;K<C;K++)F.push(d._pe.wrapPointer(r+S*K,d._pe.PeGTlistExtendedGTs))}}return F}});const y=d._pe._pe_getPeHorizonSize();z=B=>function(){let S=
this._cache;S||(this._cache=S=new Map);if(S.has(B))return S.get(B);let F=null;var r=B.call(this);if(!d._pe.compare(r,d._pe.NULL)){F=[r];const C=r.getNump();if(1<C){r=d._pe.getPointer(r);for(let K=1;K<C;K++)F.push(d._pe.wrapPointer(r+y*K,d._pe.PeHorizon))}}S.set(B,F);return F};q(d._pe.PeProjcs.prototype,"horizonGcsGenerate",z);q(d._pe.PeProjcs.prototype,"horizonPcsGenerate",z);d._pe.PeObject.prototype.toString=function(B=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const S=d._pe.getPointer(this),
F=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(S,B,F))}}function m(e){if(e){var q=d._pe.getClass(e);q&&(q=d._pe.getCache(q))&&(e=d._pe.getPointer(e))&&delete q[e]}}function G(e,q){const z=[];q=Array(q);for(let y=0;y<e;y++)z.push(d._pe.ensureInt8(q));return z}function Y(e){let q;Array.isArray(e[0])?(q=[],e.forEach(z=>{q.push(z[0],z[1])})):q=e;return q}function M(e,q,z,y=!1){if(y)for(y=0;y<2*q;y++)e[y]=d._pe.getValue(z+y*Float64Array.BYTES_PER_ELEMENT,
"double");else{y=0===e.length;for(let B=0;B<q;B++)y&&(e[B]=Array(2)),e[B][0]=d._pe.getValue(z,"double"),e[B][1]=d._pe.getValue(z+Float64Array.BYTES_PER_ELEMENT,"double"),z+=2*Float64Array.BYTES_PER_ELEMENT}}let n;d._pe=null;d.PeCSTransformations=void 0;(function(e){function q(B,S,F){d._pe.ensureCache.prepare();var r=Y(F);const C=F===r;r=d._pe.ensureFloat64(r);(B=d._pe._pe_geog_to_proj(d._pe.getPointer(B),S,r))&&M(F,S,r,C);return B}function z(B,S,F){return y(B,S,F,0)}function y(B,S,F,r){d._pe.ensureCache.prepare();
var C=Y(F);const K=F===C;C=d._pe.ensureFloat64(C);(B=d._pe._pe_proj_to_geog_center(d._pe.getPointer(B),S,C,r))&&M(F,S,C,K);return B}e.geogToProj=q;e.projGeog=function(B,S,F,r){switch(r){case d.PeDefs.PE_TRANSFORM_P_TO_G:return z(B,S,F);case d.PeDefs.PE_TRANSFORM_G_TO_P:return q(B,S,F)}return 0};e.projToGeog=z;e.projToGeogCenter=y})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;
e.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=
d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=
d._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||
(d.PeDefs={}));d.PeFactory=void 0;(function(e){function q(S,F){let r=null,C=z[S];C||(C={},z[S]=C);C.hasOwnProperty(String(F))?r=C[F]:(S=d._pe.PeFactory.prototype.factoryByType(S,F),d._pe.compare(S,d._pe.NULL)||(r=S,C[F]=r));return r=B(r)}const z={},y={},B=S=>{if(S){const F=S.getType();switch(F){case d.PeDefs.PE_TYPE_GEOGCS:S=d._pe.castObject(S,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:S=d._pe.castObject(S,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:S=d._pe.castObject(S,d._pe.PeGeogtran);
break;default:F&d.PeDefs.PE_TYPE_UNIT&&(S=d._pe.castObject(S,d._pe.PeUnit))}}return S};e.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(S){return q(d.PeDefs.PE_TYPE_COORDSYS,S)};e.factoryByType=q;e.fromString=function(S,F){let r=null,C=y[S];C||(C={},y[S]=C);C.hasOwnProperty(F)?r=C[F]:(S=d._pe.PeFactory.prototype.fromString(S,F),d._pe.compare(S,d._pe.NULL)||(r=S,C[F]=r));return r=B(r)};e.geogcs=function(S){return q(d.PeDefs.PE_TYPE_GEOGCS,S)};e.geogtran=function(S){return q(d.PeDefs.PE_TYPE_GEOGTRAN,
S)};e.getCode=function(S){return d._pe.PeFactory.prototype.getCode(S)};e.projcs=function(S){return q(d.PeDefs.PE_TYPE_PROJCS,S)};e.unit=function(S){return q(d.PeDefs.PE_TYPE_UNIT,S)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(e){let q;e.init=function(){e.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;q=d._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(z,y,B,S,F,r){let C=null;const K=new d._pe.PeInteger(r);try{const U=
d._pe.PeGTlistExtended.prototype.getGTlist(z,y,B,S,F,K);if(r=K.val)if(C=[U],1<r){const J=d._pe.getPointer(U);for(z=1;z<r;z++)C.push(d._pe.wrapPointer(J+q*z,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(K)}return C}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(q){if(q&&q.length){for(const z of q)m(z),z.getEntries().forEach(y=>{m(y);y=y.getGeogtran();m(y);y.getParameters().forEach(m);[y.getGeogcs1(),y.getGeogcs2()].forEach(B=>{m(B);
const S=B.getDatum();m(S);m(S.getSpheroid());m(B.getPrimem());m(B.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(q[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(e){e.geogToGeog=function(q,z,y,B,S){d._pe.ensureCache.prepare();var F=Y(y);const r=y===F;F=d._pe.ensureFloat64(F);let C=0;B&&(C=d._pe.ensureFloat64(B));(q=d._pe._pe_geog_to_geog(d._pe.getPointer(q),z,F,C,S))&&M(y,z,F,r);return q}})(d.PeGTTransformations||(d.PeGTTransformations=
{}));d.PeNotationDms=void 0;(function(e){const q=(y,B,S,F,r,C)=>{d._pe.ensureCache.prepare();switch(y){case "dd":var K=d._pe._pe_geog_to_dd;var U=d.PeDefs.PE_DD_MAX;break;case "ddm":K=d._pe._pe_geog_to_ddm;U=d.PeDefs.PE_DDM_MAX;break;case "dms":K=d._pe._pe_geog_to_dms,U=d.PeDefs.PE_DMS_MAX}y=0;B&&(y=d._pe.getPointer(B));B=Y(F);B=d._pe.ensureFloat64(B);U=G(S,U);F=d._pe.ensureInt32(U);if(r=K(y,S,B,r,F))for(K=0;K<S;K++)C[K]=d._pe.UTF8ToString(U[K]);return r},z=(y,B,S,F,r)=>{d._pe.ensureCache.prepare();
switch(y){case "dd":var C=d._pe._pe_dd_to_geog;break;case "ddm":C=d._pe._pe_ddm_to_geog;break;case "dms":C=d._pe._pe_dms_to_geog}y=0;B&&(y=d._pe.getPointer(B));B=F.map(K=>d._pe.ensureString(K));F=d._pe.ensureInt32(B);B=d._pe.ensureFloat64(Array(2*S));(C=C(y,S,F,B))&&M(r,S,B);return C};e.geogToDms=function(y,B,S,F,r){return q("dms",y,B,S,F,r)};e.dmsToGeog=function(y,B,S,F){return z("dms",y,B,S,F)};e.geogToDdm=function(y,B,S,F,r){return q("ddm",y,B,S,F,r)};e.ddmToGeog=function(y,B,S,F){return z("ddm",
y,B,S,F)};e.geogToDd=function(y,B,S,F,r){return q("dd",y,B,S,F,r)};e.ddToGeog=function(y,B,S,F){return z("dd",y,B,S,F)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
e.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=function(q,z,y,B,S,F,r){d._pe.ensureCache.prepare();let C=0;q&&(C=d._pe.getPointer(q));q=Y(y);y=d._pe.ensureFloat64(q);q=G(z,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(q);if(B=d._pe._pe_geog_to_mgrs_extended(C,z,y,B,S,F,K))for(S=0;S<z;S++)r[S]=d._pe.UTF8ToString(q[S]);return B};e.mgrsToGeogExtended=function(q,z,y,B,S){d._pe.ensureCache.prepare();let F=0;q&&(F=d._pe.getPointer(q));q=y.map(r=>d._pe.ensureString(r));
y=d._pe.ensureInt32(q);q=d._pe.ensureFloat64(Array(2*z));(B=d._pe._pe_mgrs_to_geog_extended(F,z,y,B,q))&&M(S,z,q);return B}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(q,z,y,B,S,F,r){d._pe.ensureCache.prepare();let C=0;q&&(C=d._pe.getPointer(q));q=Y(y);y=d._pe.ensureFloat64(q);q=G(z,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(q);if(B=d._pe._pe_geog_to_usng(C,z,y,B,S,F,K))for(S=0;S<z;S++)r[S]=d._pe.UTF8ToString(q[S]);return B};e.usngToGeog=
function(q,z,y,B){d._pe.ensureCache.prepare();var S=0;q&&(S=d._pe.getPointer(q));q=y.map(F=>d._pe.ensureString(F));y=d._pe.ensureInt32(q);q=d._pe.ensureFloat64(Array(2*z));(S=d._pe._pe_usng_to_geog(S,z,y,q))&&M(B,z,q);return S}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
e.geogToUtm=function(q,z,y,B,S){d._pe.ensureCache.prepare();var F=0;q&&(F=d._pe.getPointer(q));q=Y(y);y=d._pe.ensureFloat64(q);q=G(z,d.PeDefs.PE_UTM_MAX);const r=d._pe.ensureInt32(q);if(B=d._pe._pe_geog_to_utm(F,z,y,B,r))for(F=0;F<z;F++)S[F]=d._pe.UTF8ToString(q[F]);return B};e.utmToGeog=function(q,z,y,B,S){d._pe.ensureCache.prepare();let F=0;q&&(F=d._pe.getPointer(q));q=y.map(r=>d._pe.ensureString(r));y=d._pe.ensureInt32(q);q=d._pe.ensureFloat64(Array(2*z));(B=d._pe._pe_utm_to_geog(F,z,y,B,q))&&
M(S,z,q);return B}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(e){const q=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(z,y=e.PE_PCSINFO_OPTION_DOMAIN){let B=null,S=null;q.has(z)&&(S=q.get(z),
S[y]&&(B=S[y]));B||(B=d._pe.PePCSInfo.prototype.generate(z,y),S||(S=[],q.set(z,S)),S[y]=B);return B}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(e){e.versionString=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const w=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTTransformations(){return d.PeGTTransformations},
get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:k,get _pe(){return d._pe},isLoaded:N,isSupported:E,load:t},Symbol.toStringTag,{value:"Module"}));d._init=k;d.isLoaded=N;d.isSupported=
E;d.load=t;d.pe=w})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(g,d){const ja=Math.PI/180;var T=d.earth.radius;const I=d.earth.eccentricitySquared;T={a1:T*I,a2:T*I*T*I,a3:T*I*I/2,a4:T*I*T*I*2.5,a5:T*I+T*I*I/2,a6:1-I};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,
f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},
104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,
f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};g.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;g.earthEllipsoidConstants=T;g.spheroids=d;g.toRadians=ja;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(g){return function(){function d(T){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(T&&T.steps)for(const I of T.steps)I instanceof
g?this.steps.push(I):this.steps.push(new g({wkid:I.wkid,wkt:I.wkt,isInverse:I.isInverse}))}d.cacheKey=function(T,I){return[void 0!==T.wkid&&null!==T.wkid?T.wkid.toString():"-1",void 0!==T.wkt&&null!==T.wkt?T.wkt.toString():"",void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==I.wkt?I.wkt.toString():""].join()};d.fromGE=function(T){const I=new d;let N="";for(const E of T.steps)T=g.fromGE(E),I.steps.push(T),N+=T.uid.toString()+",";I._cachedProjection={};I._gtlistentry=null;
I._chain=N;return I};var ja=d.prototype;ja.getInverse=function(){const T=new d;T.steps=[];for(let I=this.steps.length-1;0<=I;I--)T.steps.push(this.steps[I].getInverse());return T};ja.getGTListEntry=function(){let T="";for(const I of this.steps)T+=I.uid.toString()+",";T!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=T);return this._gtlistentry};ja.assignCachedGe=function(T,I,N){this._cachedProjection[d.cacheKey(T,I)]=N};ja.getCachedGeTransformation=function(T,I){let N=
"";for(const E of this.steps)N+=E.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=N);T=this._cachedProjection[d.cacheKey(T,I)];return void 0===T?null:T};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){let d=0;return function(){function ja(T){this.uid=d++;T?(this._wkt=null!=T.wkt?T.wkt:null,this._wkid=null!=T.wkid?T.wkid:-1,this._isInverse=null!=T.isInverse?
!0===T.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ja.fromGE=function(T){const I=new ja;I._wkt=T.wkt;I._wkid=T.wkid;I._isInverse=T.isInverse;return I};ja.prototype.getInverse=function(){const T=new ja;T._wkt=this.wkt;T._wkid=this._wkid;T._isInverse=!this.isInverse;return T};g._createClass(ja,[{key:"wkt",get:function(){return this._wkt},set:function(T){this._wkt=T;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(T){this._wkid=T;this.uid=d++}},{key:"isInverse",
get:function(){return this._isInverse},set:function(T){this._isInverse=T;this.uid=d++}}]);return ja}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(g,d,ja,T){g.getGeometryZScaler=function(I,N,E){if(d.isNone(N)||d.isNone(E)||E.vcsWkid||T.equals(N,E))return null;N=ja.getMetersPerVerticalUnitForSR(N);E=ja.getMetersPerVerticalUnitForSR(E);const t=N/E;if(1===t)return null;switch(I){case "point":case "esriGeometryPoint":return k=>
{k&&null!=k.z&&(k.z*=t)};case "polyline":case "esriGeometryPolyline":return k=>{if(k)for(const m of k.paths)for(const G of m)2<G.length&&(G[2]*=t)};case "polygon":case "esriGeometryPolygon":return k=>{if(k)for(const m of k.rings)for(const G of m)2<G.length&&(G[2]*=t)};case "multipoint":case "esriGeometryMultipoint":return k=>{if(k)for(const m of k.points)2<m.length&&(m[2]*=t)};case "extent":case "esriGeometryExtent":return k=>{k&&null!=k.zmin&&null!=k.zmax&&(k.zmin*=t,k.zmax*=t)};default:return null}};
Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(g,d,ja,T,I,N,E,t,k,m,G,Y,M){function n(F){const r=[];let C=0,K=0;for(let U=0;U<F.length;U++){const J=
F[U];let L=null;for(let Q=0;Q<J.length;Q++)L=J[Q],r.push(L),0===Q?K=C=L[0]:(C=Math.min(C,L[0]),K=Math.max(K,L[0]));L&&r.push([(C+K)/2,0])}return r}function w(F,r){if(!(F instanceof t||F instanceof E))throw S.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new T("straightLineDensify: the input geometry is neither polyline nor polygon");var C=k.getGeometryParts(F);const K=[];for(const J of C){C=[];K.push(C);C.push([J[0][0],J[0][1]]);for(let L=0;L<J.length-1;L++){const Q=
J[L][0],R=J[L][1],H=J[L+1][0],A=J[L+1][1];var U=Math.sqrt((H-Q)*(H-Q)+(A-R)*(A-R));const l=(A-R)/U,u=(H-Q)/U,Z=U/r;if(1<Z){for(let ka=1;ka<=Z-1;ka++){const ua=ka*r;C.push([u*ua+Q,l*ua+R])}U=(U+Math.floor(Z-1)*r)/2;C.push([u*U+Q,l*U+R])}C.push([H,A])}}return"polygon"===F.type?new E({rings:K,spatialReference:F.spatialReference}):new t({paths:K,spatialReference:F.spatialReference})}function e(F,r,C){r&&(F=w(F,1E6),F=G.webMercatorToGeographic(F,!0));C&&(F=k.updatePolyGeometry(F,C));return F}function q(F,
r,C){if(Array.isArray(F)){var K=F[0];K>r?(C=k.offsetMagnitude(K,r),F[0]=K+-2*C*r):K<C&&(r=k.offsetMagnitude(K,C),F[0]=K+-2*r*C)}else K=F.x,K>r?(C=k.offsetMagnitude(K,r),F=F.clone().offset(-2*C*r,0)):K<C&&(r=k.offsetMagnitude(K,C),F=F.clone().offset(-2*r*C,0));return F}function z(F,r){let C=-1;for(let K=0;K<r.cutIndexes.length;K++){const U=r.cutIndexes[K],J=r.geometries[K],L=k.getGeometryParts(J);for(let Q=0;Q<L.length;Q++){const R=L[Q];R.some(H=>{if(180>H[0])return!0;H=0;for(var A=0;A<R.length;A++){var l=
R[A][0];H=l>H?l:H}H=Number(H.toFixed(9));H=-360*k.offsetMagnitude(H,180);for(A=0;A<R.length;A++)l=J.getPoint(Q,A),J.setPoint(Q,A,l.clone().offset(H,0));return!0})}if(U===C)if("polygon"===F[0].type)for(const Q of k.getGeometryParts(J))F[U]=F[U].addRing(Q);else{if("polyline"===F[0].type)for(const Q of k.getGeometryParts(J))F[U]=F[U].addPath(Q)}else C=U,F[U]=J}return F}function y(F,r,C){return B.apply(this,arguments)}function B(){B=d._asyncToGenerator(function*(F,r,C){if(!Array.isArray(F))return y([F],
r);r&&"string"!==typeof r&&S.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var K="string"===typeof r?r:r?.url??ja.geometryServiceUrl;let U,J,L;let Q=0;var R=[];r=[];for(var H of F)if(N.isNone(H))r.push(H);else{if(!A){var A=H.spatialReference;var l=m.getInfo(A);var u=(U=A.isWebMercator)?102100:4326;J=k.cutParams[u].maxX;L=k.cutParams[u].minX;var Z=k.cutParams[u].plus180Line;u=k.cutParams[u].minus180Line}if(l)if("mesh"===H.type)r.push(H);else if("point"===
H.type)r.push(q(H.clone(),J,L));else if("multipoint"===H.type){var ka=H.clone();ka.points=ka.points.map(ua=>q(ua,J,L));r.push(ka)}else if("extent"===H.type)ka=H.clone()._normalize(!1,!1,l),r.push(ka.rings?new E(ka):ka);else if(H.extent){ka=H.extent;const ua=2*k.offsetMagnitude(ka.xmin,L)*J;let za=0===ua?H.clone():k.updatePolyGeometry(H.clone(),ua);ka.offset(ua,0);ka.intersects(Z)&&ka.xmax!==J?(Q=ka.xmax>Q?ka.xmax:Q,za=e(za,U),R.push(za),r.push("cut")):ka.intersects(u)&&ka.xmin!==L?(Q=2*ka.xmax*J>
Q?2*ka.xmax*J:Q,za=e(za,U,360),R.push(za),r.push("cut")):r.push(za)}else r.push(H.clone());else r.push(H)}A=k.offsetMagnitude(Q,J);l=-90;Z=A;for(H=new t;0<A;)u=-180+360*A,H.addPath([[u,l],[u,-1*l]]),l*=-1,A--;if(0<R.length&&0<Z){A=yield Y.cut(K,R,H,C);A=z(R,A);l=[];R=[];for(Z=0;Z<r.length;Z++)H=r[Z],"cut"!==H?R.push(H):(H=A.shift(),u=F[Z],N.isSome(u)&&"polygon"===u.type&&u.rings&&1<u.rings.length&&H.rings.length>=u.rings.length?(l.push(H),R.push("simplify")):R.push(U?G.geographicToWebMercator(H):
H));if(!l.length)return R;r=yield M.simplify(K,l,C);F=[];for(C=0;C<R.length;C++)K=R[C],"simplify"!==K?F.push(K):F.push(U?G.geographicToWebMercator(r.shift()):r.shift());return F}F=[];for(C=0;C<r.length;C++)K=r[C],"cut"!==K?F.push(K):(K=R.shift(),F.push(!0===U?G.geographicToWebMercator(K):K));return F});return B.apply(this,arguments)}const S=I.getLogger("esri.geometry.support.normalizeUtils");g.getDenormalizedExtent=function(F){if(!F)return null;const r=F.extent;if(!r)return null;var C=F.spatialReference&&
m.getInfo(F.spatialReference);if(!C)return r;const [K,U]=C.valid;({width:C}=r);let {xmin:J,xmax:L}=r;[J,L]=[L,J];if("extent"===F.type||0===C||C<=U||C>2*U||J<K||L>U)return r;let Q;switch(F.type){case "polygon":if(1<F.rings.length)Q=n(F.rings);else return r;break;case "polyline":if(1<F.paths.length)Q=n(F.paths);else return r;break;case "multipoint":Q=F.points}F=r.clone();for(let R=0;R<Q.length;R++){let H=Q[R][0];0>H?(H+=U,L=Math.max(H,L)):(H-=U,J=Math.min(H,J))}F.xmin=J;F.xmax=L;return F.width<C?(F.xmin-=
U,F.xmax-=U,F):r};g.normalizeCentralMeridian=y;g.normalizeMapX=function(F,r){if(r=m.getInfo(r)){const [C,K]=r.valid;r=K-C;if(F<C)for(;F<C;)F+=r;if(F>K)for(;F>K;)F-=r}return F};g.straightLineDensify=w;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(g,d,ja,T){function I(N){return T.isPolygon(N)?N.rings:N.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,
plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ja.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ja.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:ja.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:ja.WGS84})}};g.cutParams=
d;g.getGeometryParts=I;g.offsetMagnitude=function(N,E){return Math.ceil((N-E)/(2*E))};g.updatePolyGeometry=function(N,E){const t=I(N);for(const k of t)for(const m of k)m[0]+=E;return N};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(g,d,ja,T,I,N){function E(){E=d._asyncToGenerator(function*(t,
k,m,G){t=N.parseUrl(t);const Y=k[0].spatialReference;k={...G,query:{...t.query,f:"json",sr:JSON.stringify(Y),target:JSON.stringify({geometryType:I.getJsonType(k[0]),geometries:k}),cutter:JSON.stringify(m)}};k=yield T(t.path+"/cut",k);const {cutIndexes:M,geometries:n=[]}=k.data;return{cutIndexes:M,geometries:n.map(w=>{w=I.fromJSON(w);w.spatialReference=Y;return w})}});return E.apply(this,arguments)}g.cut=function(t,k,m,G){return E.apply(this,arguments)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(g,d,ja,T,I,N){function E(t,k,m){const G={};for(const M in t)if("declaredClass"!==M){var Y=t[M];if(null!=Y&&"function"!==typeof Y)if(Array.isArray(Y)){G[M]=[];for(let n=0;n<Y.length;n++)G[M][n]=E(Y[n])}else"object"===typeof Y?Y.toJSON?(Y=Y.toJSON(m&&m[M]),G[M]=k?Y:JSON.stringify(Y)):G[M]=k?Y:JSON.stringify(Y):G[M]=Y}return G}g.asValidOptions=function(t,k){return k?
{...k,query:{...(t??{}),...k.query}}:{query:t}};g.encode=E;g.getToken=function(t,k){return N.supportsApiKey(t)&&(k||d.apiKey)?k||d.apiKey:ja.id?.findCredential(t)?.token};g.parseUrl=function(t){return"string"===typeof t?I.urlToObject(t):T.clone(t)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(g,d,ja,T,I,N){function E(){E=d._asyncToGenerator(function*(t,k,m){const G="string"===typeof t?T.urlToObject(t):t;t=k[0].spatialReference;const Y=I.getJsonType(k[0]);k={...m,query:{...G.query,f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),geometries:JSON.stringify(N.encodeGeometries(k))}};({data:k}=yield ja(G.path+"/simplify",k));return N.decodeGeometries(k.geometries,Y,t)});return E.apply(this,arguments)}g.simplify=function(t,k,m){return E.apply(this,arguments)};Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(g,d){g.decodeGeometries=function(ja,T,I){const N=d.getGeometryType(T);return ja.map(E=>{E=N.fromJSON(E);E.spatialReference=I;return E})};g.encodeGeometries=function(ja){return{geometryType:d.getJsonType(ja[0]),geometries:ja.map(T=>T.toJSON())}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(g,d,ja,T,I,N,E){function t(e,q){if(!q)return null;if("x"in q){var z={x:0,y:0};[z.x,z.y]=e(q.x,q.y,Y);null!=q.z&&(z.z=q.z);null!=q.m&&(z.m=q.m);return z}return"xmin"in q?(z={xmin:0,ymin:0,xmax:0,ymax:0},[z.xmin,z.ymin]=e(q.xmin,q.ymin,Y),[z.xmax,z.ymax]=e(q.xmax,q.ymax,Y),q.hasZ&&(z.zmin=q.zmin,z.zmax=q.zmax,z.hasZ=!0),q.hasM&&(z.mmin=q.mmin,z.mmax=q.mmax,z.hasM=!0),z):"rings"in q?{rings:k(q.rings,e),hasM:q.hasM,hasZ:q.hasZ}:"paths"in q?{paths:k(q.paths,e),hasM:q.hasM,hasZ:q.hasZ}:"points"in
q?{points:m(q.points,e),hasM:q.hasM,hasZ:q.hasZ}:null}function k(e,q){const z=[];for(const y of e)z.push(m(y,q));return z}function m(e,q){const z=[];for(const y of e)e=q(y[0],y[1],[0,0]),z.push(e),2<y.length&&e.push(y[2]),3<y.length&&e.push(y[3]);return z}function G(){G=d._asyncToGenerator(function*(e,q){e&&q&&(e=Array.isArray(e)?e.map(z=>ja.isSome(z.geometry)?z.geometry.spatialReference:null).filter(ja.isSome):[e],yield T.initializeProjection(e.map(z=>({source:z,dest:q}))))});return G.apply(this,
arguments)}const Y=[0,0],M=t.bind(null,E.lngLatToXY),n=t.bind(null,E.xyToLngLat),w=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var q=e.prototype;q.push=function(){var z=d._asyncToGenerator(function*(y,B,S){if(!(y&&y.length&&B&&S)||N.equals(B,S))return y;const F={geometries:y,inSpatialReference:B,outSpatialReference:S,resolve:null};this._jobs.push(F);return new Promise(r=>{F.resolve=r;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(y,B,S){return z.apply(this,arguments)}}();q._process=function(){this._timer=null;const z=this._jobs.shift();if(z){var {geometries:y,inSpatialReference:B,outSpatialReference:S,resolve:F}=z;E.canProject(B,S)?N.isWebMercator(S)?F(y.map(M)):F(y.map(n)):F(T.projectMany(I.jsonAdapter,y,B,S,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e}());g.checkProjectionSupport=function(e,q){return G.apply(this,arguments)};g.project=function(e,q,z,y){if(!e)return e;
z||(z=q,q=e.spatialReference);return N.isValid(q)&&N.isValid(z)&&!N.equals(q,z)?E.canProject(q,z)?(e=N.isWebMercator(z)?M(e):n(e),e.spatialReference=z,e):T.projectMany(I.jsonAdapter,[e],q,z,null,y)[0]:e};g.projectMany=function(e,q,z){return w.push(e,q,z)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(g){let d=function(E,t,k){this.x=E;this.y=t;this.spatialReference=k;this.m=this.z=void 0},ja=function(E,t,
k,m){this.rings=E;this.spatialReference=t;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);m&&(this.hasM=m)},T=function(E,t,k,m){this.paths=E;this.spatialReference=t;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);m&&(this.hasM=m)},I=function(E,t,k,m){this.points=E;this.spatialReference=t;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);m&&(this.hasM=m)},N=function(E,t,k,m,G){this.xmin=E;this.ymin=t;this.xmax=k;this.ymax=m;this.spatialReference=G;this.mmax=this.mmin=this.zmax=this.zmin=void 0};g.jsonAdapter={convertToGEGeometry:function(E,
t){return null==t?null:E.convertJSONToGeometry(t)},exportPoint:function(E,t,k){k=new d(E.getPointX(t),E.getPointY(t),k);const m=E.hasZ(t),G=E.hasM(t);m&&(k.z=E.getPointZ(t));G&&(k.m=E.getPointM(t));return k},exportPolygon:function(E,t,k){return new ja(E.exportPaths(t),k,E.hasZ(t),E.hasM(t))},exportPolyline:function(E,t,k){return new T(E.exportPaths(t),k,E.hasZ(t),E.hasM(t))},exportMultipoint:function(E,t,k){return new I(E.exportPoints(t),k,E.hasZ(t),E.hasM(t))},exportExtent:function(E,t,k){var m=
E.hasZ(t);const G=E.hasM(t);k=new N(E.getXMin(t),E.getYMin(t),E.getXMax(t),E.getYMax(t),k);m&&(m=E.getZExtent(t),k.zmin=m.vmin,k.zmax=m.vmax);G&&(E=E.getMExtent(t),k.mmin=E.vmin,k.mmax=E.vmax);return k}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y,M,n,w,e,q,z,y,B,S,F,r,C,K,U){function J(H){return null!=H&&H.every(A=>"exceedslimit"!==A.statisticType)}const L=new E.MemCacheStorage(2E6);let Q=0,R=function(){function H(l){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:y.queryCapabilities};this.geometryType=l.geometryType;this.hasM=!!l.hasM;this.hasZ=!!l.hasZ;this.objectIdField=l.objectIdField;this.spatialReference=l.spatialReference;this.definitionExpression=l.definitionExpression;this.featureStore=
l.featureStore;this.aggregateAdapter=l.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=l.timeInfo;l.cacheSpatialQueries&&(this._geometryQueryCache=new E.MemCache(Q++ +"$$",L));this.fieldsIndex=new C(l.fields);l.scheduler&&l.priority&&(this._frameTask=l.scheduler.registerTask(l.priority))}var A=H.prototype;A.destroy=function(){this._frameTask=N.removeMaybe(this._frameTask);this.clearCache();N.destroyMaybe(this._geometryQueryCache);this._changeHandle=
N.removeMaybe(this._changeHandle);N.destroyMaybe(this.fieldsIndex)};A.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};A.executeQuery=function(){var l=d._asyncToGenerator(function*(u,Z){try{return(yield this._executeQuery(u,{},Z)).createQueryResponse()}catch(ka){if(ka!==r.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new B.QueryEngineResult([],u,this)).createQueryResponse()}});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForCount=
function(){var l=d._asyncToGenerator(function*(u={},Z){try{return(yield this._executeQuery(u,{returnGeometry:!1,returnCentroid:!1,outSR:null},Z)).createQueryResponseForCount()}catch(ka){if(ka!==r.QUERY_ENGINE_EMPTY_RESULT)throw ka;return 0}});return function(){return l.apply(this,arguments)}}();A.executeQueryForExtent=function(){var l=d._asyncToGenerator(function*(u,Z){const ka=u.outSR;try{const ua=yield this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),za=ua.size;if(!za)return{count:0,
extent:null};const Ha=yield this._getBounds(ua.items,ua.spatialReference,ka||this.spatialReference);return{count:za,extent:Ha}}catch(ua){if(ua===r.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ua;}});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForIds=function(){var l=d._asyncToGenerator(function*(u,Z){return this.executeQueryForIdSet(u,Z).then(ka=>Array.from(ka))});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForIdSet=function(){var l=
d._asyncToGenerator(function*(u,Z){try{const ka=yield this._executeQuery(u,{returnGeometry:!0,returnCentroid:!1,outSR:null},Z),ua=ka.items,za=new Set;yield this._reschedule(()=>{for(const Ha of ua)za.add(ka.featureAdapter.getObjectId(Ha))},Z);return za}catch(ka){if(ka===r.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ka;}});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForSnapping=function(){var l=d._asyncToGenerator(function*(u,Z){const {point:ka,distance:ua,types:za}=u;
if(za===B.SnappingTypes.NONE)return{candidates:[]};const Ha=yield this._reschedule(()=>this._checkQuerySupport(u.query),Z),Ka=!w.equals(ka.spatialReference,this.spatialReference);Ka&&(yield z.checkProjectionSupport(ka.spatialReference,this.spatialReference));var Ia="number"===typeof ua?ua:ua.x,Ua="number"===typeof ua?ua:ua.y;Ia={xmin:ka.x-Ia,xmax:ka.x+Ia,ymin:ka.y-Ua,ymax:ka.y+Ua,spatialReference:ka.spatialReference};Ia=Ka?z.project(Ia,this.spatialReference):Ia;if(!Ia)return{candidates:[]};Ua=(yield n.normalizeCentralMeridian(M.fromJSON(ka),
null,{signal:Z}))[0];const Qa=(yield n.normalizeCentralMeridian(M.fromJSON(Ia),null,{signal:Z}))[0];if(N.isNone(Ua)||N.isNone(Qa))return{candidates:[]};const Sa=new B.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Qa.toJSON())),Z),Ha,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Sa),Z);yield this._reschedule(()=>this._executeTimeQuery(Sa),Z);yield this._reschedule(()=>this._executeAttributesQuery(Sa),Z);Z=Ua.toJSON();Z=Ka?z.project(Z,this.spatialReference):
Z;return Sa.createSnappingResponse({...u,point:Z,distance:Ka?Math.max(Ia.xmax-Ia.xmin,Ia.ymax-Ia.ymin)/2:ua},ka.spatialReference)});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForLatestObservations=function(){var l=d._asyncToGenerator(function*(u,Z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new T("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:u,timeInfo:this.timeInfo});try{const ka=yield this._executeQuery(u,{},Z);yield this._reschedule(()=>
this._filterLatest(ka),Z);return ka.createQueryResponse()}catch(ka){if(ka!==r.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new B.QueryEngineResult([],u,this)).createQueryResponse()}});return function(u,Z){return l.apply(this,arguments)}}();A.executeQueryForSummaryStatistics=function(){var l=d._asyncToGenerator(function*(u={},Z,ka){const {field:ua,normalizationField:za,valueExpression:Ha}=Z;return(yield this._getQueryEngineResultForStats(u,{field:ua,normalizationField:za,valueExpression:Ha},ka)).createSummaryStatisticsResponse(Z)});
return function(){return l.apply(this,arguments)}}();A.executeQueryForUniqueValues=function(){var l=d._asyncToGenerator(function*(u={},Z,ka){const {field:ua,field2:za,field3:Ha,valueExpression:Ka}=Z;return(yield this._getQueryEngineResultForStats(u,{field:ua,field2:za,field3:Ha,valueExpression:Ka},ka)).createUniqueValuesResponse(Z)});return function(){return l.apply(this,arguments)}}();A.executeQueryForClassBreaks=function(){var l=d._asyncToGenerator(function*(u={},Z,ka){const {field:ua,normalizationField:za,
valueExpression:Ha}=Z;return(yield this._getQueryEngineResultForStats(u,{field:ua,normalizationField:za,valueExpression:Ha},ka)).createClassBreaksResponse(Z)});return function(){return l.apply(this,arguments)}}();A.executeQueryForHistogram=function(){var l=d._asyncToGenerator(function*(u={},Z,ka){const {field:ua,normalizationField:za,valueExpression:Ha}=Z;return(yield this._getQueryEngineResultForStats(u,{field:ua,normalizationField:za,valueExpression:Ha},ka)).createHistogramResponse(Z)});return function(){return l.apply(this,
arguments)}}();A.fetchRecomputedExtents=function(){var l=d._asyncToGenerator(function*(u){const [Z,ka]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),N.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=F.getTimeExtent(this.timeInfo,this.featureStore)]);t.throwIfAborted(u);
return{fullExtent:Z,timeExtent:ka}});return function(u){return l.apply(this,arguments)}}();A._getBounds=function(){var l=d._asyncToGenerator(function*(u,Z,ka){const ua=m.set(m.create(),m.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(u,za=>m.expandWithAABB(ua,za));u={xmin:ua[0],ymin:ua[1],xmax:ua[3],ymax:ua[4],spatialReference:r.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ua[2])&&isFinite(ua[5])&&(u.zmin=ua[2],u.zmax=ua[5]);Z=z.project(u,Z,ka);Z.spatialReference=
r.cleanFromGeometryEngine(ka);0===Z.xmax-Z.xmin&&(ka=k.getMetersPerUnitForSR(Z.spatialReference),Z.xmin-=ka,Z.xmax+=ka);0===Z.ymax-Z.ymin&&(ka=k.getMetersPerUnitForSR(Z.spatialReference),Z.ymin-=ka,Z.ymax+=ka);this.hasZ&&null!=Z.zmin&&null!=Z.zmax&&0===Z.zmax-Z.zmin&&(ka=k.getMetersPerUnitForSR(Z.spatialReference),Z.zmin-=ka,Z.zmax+=ka);return Z});return function(u,Z,ka){return l.apply(this,arguments)}}();A._schedule=function(){var l=d._asyncToGenerator(function*(u,Z){return N.isSome(this._frameTask)?
this._frameTask.schedule(u,Z):u(U.noBudget)});return function(u,Z){return l.apply(this,arguments)}}();A._reschedule=function(){var l=d._asyncToGenerator(function*(u,Z){return N.isSome(this._frameTask)?this._frameTask.reschedule(u,Z):u(U.noBudget)});return function(u,Z){return l.apply(this,arguments)}}();A._getAllFeaturesQueryEngineResult=function(){var l=d._asyncToGenerator(function*(u){return new B.QueryEngineResult(yield this._getAllFeatures(),u,this)});return function(u){return l.apply(this,arguments)}}();
A._getAllFeatures=function(){var l=d._asyncToGenerator(function*(){var u=this;if(N.isNone(this._allFeaturesPromise)){const ua=[];this._allFeaturesPromise=d._asyncToGenerator(function*(){yield u.featureStore.forEach(za=>ua.push(za))})().then(()=>ua)}const Z=this._allFeaturesPromise,ka=yield Z;return Z===this._allFeaturesPromise?ka.slice():this._getAllFeatures()});return function(){return l.apply(this,arguments)}}();A._executeQuery=function(){var l=d._asyncToGenerator(function*(u,Z,ka){u=I.clone(u);
u=yield this._schedule(()=>r.normalizeQuery(u,this.definitionExpression,this.spatialReference),ka);u=yield this._reschedule(()=>this._checkQuerySupport(u),ka);u={...u,...Z};const ua=yield this._reschedule(()=>this._executeSceneFilterQuery(u,ka),ka),za=yield this._reschedule(()=>this._executeGeometryQuery(u,ua,ka),ka);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ka);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ka);yield this._reschedule(()=>this._executeTimeQuery(za),
ka);yield this._reschedule(()=>this._executeAttributesQuery(za),ka);return za});return function(u,Z,ka){return l.apply(this,arguments)}}();A._executeSceneFilterQuery=function(){var l=d._asyncToGenerator(function*(u,Z){var ka=this;if(N.isNone(u.sceneFilter))return null;const {outSR:ua,returnGeometry:za,returnCentroid:Ha}=u;var Ka=this.featureStore.featureSpatialReference,Ia=u.sceneFilter.geometry;const Ua=N.isNone(Ka)||w.equals(Ka,Ia.spatialReference)?Ia:z.project(Ia,Ka);if(!Ua)return null;Ka=za||
Ha;Ka=w.isValid(ua)&&!w.equals(this.spatialReference,ua)&&Ka?function(){var Xa=d._asyncToGenerator(function*(Aa){return ka._project(Aa,ua)});return function(Aa){return Xa.apply(this,arguments)}}():Xa=>Xa;const Qa=this.featureAdapter;Ia=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ua)),Z);if("disjoint"===u.sceneFilter.spatialRelationship){if(!Ia.length)return null;const Xa=new Set;for(var Sa of Ia)Xa.add(Qa.getObjectId(Sa));const Aa=yield this._reschedule(()=>this._getAllFeatures(),
Z);Sa=yield this._reschedule(d._asyncToGenerator(function*(){const Da=yield S.getSpatialQueryOperator("esriSpatialRelDisjoint",Ua,ka.geometryType,ka.hasZ,ka.hasM),Fa=yield ka._runSpatialFilter(Aa,c=>!Xa.has(Qa.getObjectId(c))||Da(Qa.getGeometry(c)),Z);return new B.QueryEngineResult(Fa,u,ka)}),Z);return Ka(Sa)}if(!Ia.length)return new B.QueryEngineResult([],u,this);if(this._canExecuteSinglePass(Ua,u))return Ka(new B.QueryEngineResult(Ia,u,this));const bb=yield S.getSpatialQueryOperator("esriSpatialRelContains",
Ua,this.geometryType,this.hasZ,this.hasM);Sa=yield this._runSpatialFilter(Ia,Xa=>bb(Qa.getGeometry(Xa)),Z);return Ka(new B.QueryEngineResult(Sa,u,this))});return function(u,Z){return l.apply(this,arguments)}}();A._executeGeometryQuery=function(){var l=d._asyncToGenerator(function*(u,Z,ka){var ua=this;if(N.isSome(Z)&&0===Z.items.length)return Z;u=N.isSome(Z)?Z.query:u;const {geometry:za,outSR:Ha,spatialRel:Ka,returnGeometry:Ia,returnCentroid:Ua}=u;var Qa=this.featureStore.featureSpatialReference;const Sa=
!za||N.isNone(Qa)||w.equals(Qa,za.spatialReference)?za:z.project(za,Qa),bb=Ia||Ua,Xa=w.isValid(Ha)&&!w.equals(this.spatialReference,Ha),Aa=this._geometryQueryCache&&N.isNone(Z)?Xa&&bb?JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ka,outSpatialReference:Ha}):JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ka}):null;Qa=Aa?this._geometryQueryCache.get(Aa):null;if(N.isSome(Qa))return new B.QueryEngineResult(Qa,u,this);Qa=function(){var V=d._asyncToGenerator(function*(la){Xa&&
bb&&(yield ua._project(la,Ha));Aa&&ua._geometryQueryCache.put(Aa,la.items,la.items.length+1);return la});return function(la){return V.apply(this,arguments)}}();if(!Sa)return Qa(N.isSome(Z)?Z:yield this._getAllFeaturesQueryEngineResult(u));const Da=this.featureAdapter;let Fa=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(za)),ka);if("esriSpatialRelDisjoint"===Ka){if(!Fa.length)return Qa(N.isSome(Z)?Z:yield this._getAllFeaturesQueryEngineResult(u));const V=new Set;for(var c of Fa)V.add(Da.getObjectId(c));
const la=N.isSome(Z)?Z.items:yield this._reschedule(()=>this._getAllFeatures(),ka);c=yield this._reschedule(d._asyncToGenerator(function*(){const ta=yield S.getSpatialQueryOperator(Ka,Sa,ua.geometryType,ua.hasZ,ua.hasM),x=yield ua._runSpatialFilter(la,O=>!V.has(Da.getObjectId(O))||ta(Da.getGeometry(O)),ka);return new B.QueryEngineResult(x,u,ua)}),ka);return Qa(c)}if(N.isSome(Z)){const V=new ja.PositionHint;Fa=Fa.filter(la=>0<=ja.indexOf(Z.items,la,Z.items.length,V))}if(!Fa.length)return Qa=new B.QueryEngineResult([],
u,this),Aa&&this._geometryQueryCache.put(Aa,Qa.items,1),Qa;if(this._canExecuteSinglePass(Sa,u))return Qa(new B.QueryEngineResult(Fa,u,this));const p=yield S.getSpatialQueryOperator(Ka,Sa,this.geometryType,this.hasZ,this.hasM);c=yield this._runSpatialFilter(Fa,V=>p(Da.getGeometry(V)),ka);return Qa(new B.QueryEngineResult(c,u,this))});return function(u,Z,ka){return l.apply(this,arguments)}}();A._executeAggregateIdsQuery=function(l){if(0!==l.items.length&&l.query.aggregateIds&&l.query.aggregateIds.length&&
!N.isNone(this.aggregateAdapter)){var u=new Set;for(const ka of l.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ka).forEach(ua=>u.add(ua));var Z=this.featureAdapter.getObjectId;l.items=l.items.filter(ka=>u.has(Z(ka)))}};A._executeObjectIdsQuery=function(l){if(0!==l.items.length&&l.query.objectIds&&l.query.objectIds.length){var u=new Set(l.query.objectIds),Z=this.featureAdapter.getObjectId;l.items=l.items.filter(ka=>u.has(Z(ka)))}};A._executeTimeQuery=function(l){if(0!==l.items.length){var u=
F.getTimeOperator(this.timeInfo,l.query.timeExtent,this.featureAdapter);N.isNone(u)||(l.items=l.items.filter(u))}};A._executeAttributesQuery=function(l){if(0!==l.items.length){var u=q.getWhereClause(l.query.where,this.fieldsIndex);if(u){if(!u.isStandardized)throw new TypeError("Where clause is not standardized");l.items=l.items.filter(Z=>u.testFeature(Z,this.featureAdapter))}}};A._runSpatialFilter=function(){var l=d._asyncToGenerator(function*(u,Z,ka){var ua=this;if(!Z)return u;if(N.isNone(this._frameTask))return u.filter(Ia=>
Z(Ia));let za=0;const Ha=[],Ka=function(){var Ia=d._asyncToGenerator(function*(Ua){for(;za<u.length;){const Qa=u[za++];Z(Qa)&&(Ha.push(Qa),Ua.madeProgress());Ua.done&&(yield ua._reschedule(Sa=>Ka(Sa),ka))}});return function(Ua){return Ia.apply(this,arguments)}}();return this._reschedule(Ia=>Ka(Ia),ka).then(()=>Ha)});return function(u,Z,ka){return l.apply(this,arguments)}}();A._filterLatest=function(l){const {trackIdField:u,startTimeField:Z,endTimeField:ka}=this.timeInfo,ua=ka||Z,za=new Map,Ha=this.featureAdapter.getAttribute;
for(const Ka of l.items){const Ia=Ha(Ka,u),Ua=Ha(Ka,ua),Qa=za.get(Ia);(!Qa||Ua>Ha(Qa,ua))&&za.set(Ia,Ka)}l.items=Array.from(za.values())};A._canExecuteSinglePass=function(l,u){({spatialRel:u}=u);return S.canQueryWithRBush(l)&&("esriSpatialRelEnvelopeIntersects"===u||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===u||"esriSpatialRelContains"===u||"esriSpatialRelWithin"===u))};A._project=function(){var l=d._asyncToGenerator(function*(u,Z){if(!Z||w.equals(this.spatialReference,
Z))return u;const ka=this.featureAdapter;Z=yield z.projectMany(u.items.map(ua=>r.getGeometry(this.geometryType,this.hasZ,this.hasM,ka.getGeometry(ua))),this.spatialReference,Z);u.items=Z.map((ua,za)=>ka.cloneWithGeometry(u.items[za],e.convertFromGeometry(ua,this.hasZ,this.hasM)));return u});return function(u,Z){return l.apply(this,arguments)}}();A._getQueryBBoxes=function(l){if(S.canQueryWithRBush(l)){if(M.isExtent(l))return[G.fromValues(l.xmin,l.ymin,l.xmax,l.ymax)];if(M.isPolygon(l))return l.rings.map(u=>
G.fromValues(Math.min(u[0][0],u[2][0]),Math.min(u[0][1],u[2][1]),Math.max(u[0][0],u[2][0]),Math.max(u[0][1],u[2][1])))}return[Y.getBoundsXY(G.create(),l)]};A._searchFeatures=function(){var l=d._asyncToGenerator(function*(u){const Z=new Set;yield Promise.all(u.map(ka=>this.featureStore.forEachInBounds(ka,ua=>Z.add(ua))));u=Array.from(Z.values());Z.clear();return u});return function(u){return l.apply(this,arguments)}}();A._checkStatisticsSupport=function(){var l=d._asyncToGenerator(function*(u,Z){if(0>
(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text||u.outStatistics||u.groupByFieldsForStatistics||u.having||u.orderByFields)throw new T("feature-store:unsupported-query","Unsupported query options",{query:u});this._checkAttributesQuerySupport(u);return Promise.all([this._checkStatisticsParamsSupport(Z),S.checkSpatialQuerySupport(u,this.geometryType,this.spatialReference),z.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)});return function(u,
Z){return l.apply(this,arguments)}}();A._checkStatisticsParamsSupport=function(){var l=d._asyncToGenerator(function*(u){var Z=[];u.valueExpression&&({arcadeUtils:Z}=yield K.loadArcade(),Z=Z.extractFieldNames(u.valueExpression));u.field&&Z.push(u.field);u.field2&&Z.push(u.field2);u.field3&&Z.push(u.field3);u.normalizationField&&Z.push(u.normalizationField);if(!Z.length)throw new T("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:u});q.validateFields(this.fieldsIndex,
Z,"params contains missing fields")});return function(u){return l.apply(this,arguments)}}();A._checkQuerySupport=function(){var l=d._asyncToGenerator(function*(u){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text)throw new T("feature-store:unsupported-query","Unsupported query options",{query:u});this._checkAttributesQuerySupport(u);this._checkStatisticsQuerySupport(u);return Promise.all([S.checkSpatialQuerySupport(u,this.geometryType,this.spatialReference),
z.checkProjectionSupport(this.spatialReference,u.outSR)]).then(()=>u)});return function(u){return l.apply(this,arguments)}}();A._checkAttributesQuerySupport=function(l){const {outFields:u,orderByFields:Z,returnDistinctValues:ka,outStatistics:ua}=l,za=ua?ua.map(Ha=>Ha.outStatisticFieldName&&Ha.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(Z&&0<Z.length){const Ha=Z.map(Ka=>{const Ia=Ka.toLowerCase();return Ia.includes(" asc")?Ia.split(" asc")[0]:Ia.includes(" desc")?Ia.split(" desc")[0]:
Ka}).filter(Ka=>!za.includes(Ka));q.validateFields(this.fieldsIndex,Ha,"orderByFields contains missing fields")}if(u&&0<u.length)q.validateFields(this.fieldsIndex,u,"outFields contains missing fields");else if(ka)throw new T("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:l});q.validateWhere(this.fieldsIndex,l.where)};A._checkStatisticsQuerySupport=function(l){const {outStatistics:u,groupByFieldsForStatistics:Z,having:ka}=l;var ua=Z&&Z.length,za=u&&
u.length;if(ka){if(!ua||!za)throw new T("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:l});q.validateHaving(this.fieldsIndex,ka,u)}if(za&&J(u)){za=u.map(Ha=>Ha.onStatisticField).filter(Boolean);q.validateFields(this.fieldsIndex,za,"onStatisticFields contains missing fields");ua&&q.validateFields(this.fieldsIndex,Z,"groupByFieldsForStatistics contains missing fields");for(const Ha of u){const {onStatisticField:Ka,statisticType:Ia}=
Ha;if(("percentile_disc"===Ia||"percentile_cont"===Ia)&&"statisticParameters"in Ha){if({statisticParameters:ua}=Ha,!ua)throw new T("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ha,query:l});}else if("count"!==Ia&&Ka&&q.hasInvalidFieldType(Ka,this.fieldsIndex))throw new T("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ha,query:l});}}};A._getQueryEngineResultForStats=function(){var l=d._asyncToGenerator(function*(u,
Z,ka){u=I.clone(u);try{u=yield this._schedule(()=>r.normalizeQuery(u,this.definitionExpression,this.spatialReference),ka);u=yield this._reschedule(()=>this._checkStatisticsSupport(u,Z),ka);const ua=yield this._reschedule(()=>this._executeSceneFilterQuery(u,ka),ka),za=yield this._reschedule(()=>this._executeGeometryQuery(u,ua,ka),ka);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ka);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ka);yield this._reschedule(()=>this._executeTimeQuery(za),
ka);yield this._reschedule(()=>this._executeAttributesQuery(za),ka);return za}catch(ua){if(ua!==r.QUERY_ENGINE_EMPTY_RESULT)throw ua;return new B.QueryEngineResult([],u,this)}});return function(u,Z,ka){return l.apply(this,arguments)}}();d._createClass(H,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return H}();g.Feature=function(H,A=null,l,u,Z){this.attributes=H;this.geometry=l;this.centroid=u;this.filterFlags=Z;this.groupId=-1;this.displayId=A};g.QueryEngine=R;
Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(g,d,ja,T){g.RemoveMode=void 0;(function(E){E[E.ALL=0]="ALL";E[E.SOME=1]="SOME"})(g.RemoveMode||(g.RemoveMode={}));let I=function(){function E(k,m,G){this._namespace=k;this._storage=m;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";G&&(this._storage.registerRemoveFunc(this._namespace,
G),this._removeFunc=!0)}var t=E.prototype;t.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};t.resetHitRate=function(){this._hit=this._miss=0};t.put=function(k,m,G,Y=0){this._storage.put(this._namespace+k,m,G,Y)};t.get=function(k){k=this._storage.get(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};t.pop=function(k){k=this._storage.pop(this._namespace+k);
void 0===k?++this._miss:++this._hit;return k};t.updateSize=function(k,m,G){this._storage.updateSize(this._namespace+k,m,G)};t.clear=function(){this._storage.clear(this._namespace)};t.clearAll=function(){this._storage.clearAll()};t.getStats=function(){return this._storage.getStats()};t.resetStats=function(){this._storage.resetStats()};d._createClass(E,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return E}(),N=function(){function E(k=10485760){this._maxSize=k;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new T;this._users=new T}var t=E.prototype;t.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};t.register=function(k){this._users.push(k)};t.deregister=function(k){this._users.removeUnordered(k)};t.registerRemoveFunc=
function(k,m){this._removeFuncs.push([k,m])};t.deregisterRemoveFunc=function(k){this._removeFuncs.filterInPlace(m=>m[0]!==k)};t.put=function(k,m,G,Y){const M=this._db.get(k);M&&(this._size-=M.size,this._db.delete(k),M.entry!==m&&this._notifyRemove(k,M.entry,g.RemoveMode.ALL));G>this._maxSize?this._notifyRemove(k,m,g.RemoveMode.ALL):void 0===m?console.warn("Refusing to cache undefined entry "):!G||0>G?console.warn("Refusing to cache entry with invalid size "+G):(Y=1+Math.max(Y,-3)- -3,this._db.set(k,
{entry:m,size:G,lifetime:Y,lives:Y}),this._size+=G,this._checkSizeLimit())};t.updateSize=function(k,m,G){const Y=this._db.get(k);if(Y&&Y.entry===m){for(this._size-=Y.size;G>this._maxSize;)if(G=this._notifyRemove(k,m,g.RemoveMode.SOME),!(ja.isSome(G)&&0<G)){this._db.delete(k);return}Y.size=G;this._size+=G;this._checkSizeLimit()}};t.pop=function(k){const m=this._db.get(k);if(m)return this._size-=m.size,this._db.delete(k),++this._hit,m.entry;++this._miss};t.get=function(k){const m=this._db.get(k);if(void 0===
m)++this._miss;else return this._db.delete(k),m.lives=m.lifetime,this._db.set(k,m),++this._hit,m.entry};t.getStats=function(){const k={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},G=[];this._db.forEach((n,w)=>{const e=n.lifetime;G[e]=(G[e]||0)+n.size;this._users.forAll(q=>{q=q.namespace;w.startsWith(q)&&(m[q]=(m[q]||0)+n.size)})});const Y={};this._users.forAll(n=>{const w=n.namespace;
!isNaN(n.hitRate)&&0<n.hitRate?(m[w]=m[w]||0,Y[w]=Math.round(100*n.hitRate)+"%"):Y[w]="0%"});var M=Object.keys(m);M.sort((n,w)=>m[w]-m[n]);M.forEach(n=>k[n]=Math.round(m[n]/2**20)+"MB / "+Y[n]);for(M=G.length-1;0<=M;--M){const n=G[M];n&&(k["Priority "+(M+-3-1)]=Math.round(n/this.size*100)+"%")}return k};t.resetStats=function(){this._hit=this._miss=0;this._users.forAll(k=>k.resetHitRate())};t.clear=function(k){this._db.forEach((m,G)=>{G.startsWith(k)&&(this._size-=m.size,this._db.delete(G),this._notifyRemove(G,
m.entry,g.RemoveMode.ALL))})};t.clearAll=function(){this._db.forEach((k,m)=>this._notifyRemove(m,k.entry,g.RemoveMode.ALL));this._size=0;this._db.clear()};t._getHitRate=function(){return this._hit/(this._hit+this._miss)};t._notifyRemove=function(k,m,G){let Y;this._removeFuncs.some(M=>k.startsWith(M[0])?(M=M[1](m,G),"number"===typeof M&&(Y=M),!0):!1);return Y};t._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [k,m]of this._db){this._db.delete(k);if(1>=m.lives){this._size-=m.size;
const G=this._notifyRemove(k,m.entry,g.RemoveMode.SOME);ja.isSome(G)&&0<G&&(this._size+=G,m.lives=m.lifetime,m.size=G,this._db.set(k,m))}else--m.lives,this._db.set(k,m);if(this._size<=.9*this.maxSize)break}};d._createClass(E,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(k){this._maxSize=Math.max(k,0);this._checkSizeLimit()}}]);return E}();g.MIN_PRIORITY=-3;g.MemCache=I;g.MemCacheStorage=N;Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(g,d,ja){function T(k,m){return k?E.get(k,m):null}function I(k,m,G,Y=!0){const M=[];for(const n of m)if("*"!==n&&!k.has(n))if(Y){m=N(n);try{const w=T(m,k);if(!w)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:m});if(!w.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",
{clause:w});I(k,w.fieldNames,"expression contains missing fields")}catch(w){if((m=w&&w.details)&&(m.clause||m.where))throw w;m&&m.missingFields?M.push(...m.missingFields):M.push(n)}}else M.push(n);if(M.length)throw new d("feature-store:unsupported-query",G,{missingFields:M});}function N(k){return k.split(" as ")[0]}const E=new ja.WhereClauseCache(50,500),t=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
g.getAliasFromFieldName=function(k){return k.split(" as ")[1]};g.getExpressionFromFieldName=N;g.getWhereClause=T;g.hasInvalidFieldType=function(k,m){return(k=m.get(k))?!t.has(k.type):!1};g.validateFields=I;g.validateHaving=function(k,m,G){if(!m)return!0;const Y=E.get(m,k);if(!Y)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:m});if(!Y.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:m});I(k,Y.fieldNames,
"having contains missing fields");if(!Y.getExpressions().every(M=>{const {aggregateType:n,field:w}=M,e=k.get(w)?.name;return G.some(q=>{const {onStatisticField:z,statisticType:y}=q;return k.get(z)?.name===e&&y.toLowerCase().trim()===n})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:m});return!0};g.validateWhere=function(k,m){if(!m)return!0;const G=E.get(m,k);if(!G)throw new d("feature-store:unsupported-query","invalid SQL expression",
{where:m});if(!G.isStandardized)throw new d("feature-store:unsupported-query","where clause is not standard",{where:m});I(k,G.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(g,d,ja){let T=function(){function I(N,E){this._cache=new d(N);this._invalidCache=new d(E)}I.prototype.get=function(N,E){const t=`${E.uid}:${N}`,k=this._cache.get(t);
if(k)return k;if(void 0!==this._invalidCache.get(t))return null;try{const m=ja.WhereClause.create(N,E);this._cache.put(t,m);return m}catch{return this._invalidCache.put(t,null),null}};return I}();g.WhereClauseCache=T;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function d(T,I){this._storage=new g.MemCacheStorage;this._storage.maxSize=T;I&&this._storage.registerRemoveFunc("",I)}var ja=d.prototype;
ja.put=function(T,I){this._storage.put(T,I,1,1)};ja.pop=function(T){return this._storage.pop(T)};ja.get=function(T){return this._storage.get(T)};ja.clear=function(){this._storage.clearAll()};ja.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(g,d,ja,T,I,N){function E(H,A){H+="";return H.length>=A?H:Array(A-H.length+
1).join("0")+H}function t(H,A,l="0",u="0",Z="0",ka="0",ua="",za="0",Ha="0"){return"+"===ua||"-"===ua?(H=`${E(parseInt(H,10),4)}-${E(parseInt(A,10),2)}-${E(parseInt(l,10),2)}`,A="",10>parseFloat(ka)&&(A="0"),u=`${E(parseInt(u,10),2)}:${E(parseInt(Z,10),2)}:${A+parseFloat(ka).toString()}`,ua=`${ua}${E(parseInt(za,10),2)}:${E(parseInt(Ha,10),2)}`,new Date(H+"T"+u+ua)):new Date(parseInt(H,10),parseInt(A,10)-1,parseInt(l,10),parseInt(u,10),parseInt(Z,10),parseFloat(ka))}function k(H){let A=F.exec(H);if(null!==
A){const [,l,u,Z,ka,ua,za]=A;return t(l,u,Z,ka,ua,za)}A=r.exec(H);if(null!==A){const [,l,u,Z,ka,ua,za,Ha,Ka,Ia]=A;return t(l,u,Z,ka,ua,za,Ha,Ka,Ia)}A=C.exec(H);if(null!==A){const [,l,u,Z,ka,ua,za,Ha,Ka]=A;return t(l,u,Z,ka,ua,"0",za,Ha,Ka)}A=K.exec(H);if(null!==A){const [,l,u,Z,ka,ua]=A;return t(l,u,Z,ka,ua)}A=S.exec(H);if(null!==A){const [,l,u,Z]=A;return t(l,u,Z)}throw Error("SQL Invalid Timestamp");}function m(H){const A=S.exec(H);if(null===A)try{return k(H)}catch{throw Error("SQL Invalid Date");
}const [,l,u,Z]=A;return new Date(parseInt(l,10),parseInt(u,10)-1,parseInt(Z,10))}function G(H){return Array.isArray(H)?H:[H]}function Y(H){return null!==H?!0!==H:null}function M(H,A){return null!=H&&null!=A?!0===H&&!0===A:!1===H||!1===A?!1:null}function n(H,A){return null!=H&&null!=A?!0===H||!0===A:!0===H||!0===A?!0:null}function w(H,A){if(null==H)return null;let l=!1;for(const u of A)if(null==u)l=null;else if(H===u){l=!0;break}return l}function e(H,A,l){if(null==H)return null;let u="",Z=Q.Normal;
for(let ka=0;ka<A.length;ka++){const ua=A.charAt(ka);switch(Z){case Q.Normal:ua===l?Z=Q.Escaped:u="-[]/{}()*+?.\\^$|".includes(ua)?u+("\\"+ua):"%"===ua?u+".*":"_"===ua?u+".":u+ua;break;case Q.Escaped:u="-[]/{}()*+?.\\^$|".includes(ua)?u+("\\"+ua):u+ua,Z=Q.Normal}}return(new RegExp("^"+u+"$","m")).test(H)}function q(H){return H instanceof Date?H.valueOf():H}function z(H,A,l){if(null==A||null==l)return null;A=q(A);l=q(l);switch(H){case "\x3c\x3e":return A!==l;case "\x3d":return A===l;case "\x3e":return A>
l;case "\x3c":return A<l;case "\x3e\x3d":return A>=l;case "\x3c\x3d":return A<=l}}function y(H,A,l){if("||"===H)return I.evaluateFunction("concat",[A,l]);if(A instanceof I.SqlInterval)if(l instanceof Date)switch(H){case "+":return new Date(A.valueInMilliseconds()+l.getTime());case "-":return A.valueInMilliseconds()-l.getTime();case "*":return A.valueInMilliseconds()*l.getTime();case "/":return A.valueInMilliseconds()/l.getTime()}else if(l instanceof I.SqlInterval)switch(H){case "+":return I.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+
l.valueInMilliseconds());case "-":return I.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-l.valueInMilliseconds());case "*":return A.valueInMilliseconds()*l.valueInMilliseconds();case "/":return A.valueInMilliseconds()/l.valueInMilliseconds()}else A=A.valueInMilliseconds();else if(l instanceof I.SqlInterval)if(A instanceof Date)switch(H){case "+":return new Date(l.valueInMilliseconds()+A.getTime());case "-":return new Date(A.getTime()-l.valueInMilliseconds());case "*":return A.getTime()*
l.valueInMilliseconds();case "/":return A.getTime()/l.valueInMilliseconds()}else l=l.valueInMilliseconds();else if(A instanceof Date&&"number"===typeof l)switch(l*=864E5,A=A.getTime(),H){case "+":return new Date(A+l);case "-":return new Date(A-l);case "*":return new Date(A*l);case "/":return new Date(A/l)}else if(l instanceof Date&&"number"===typeof A)switch(A*=864E5,l=l.getTime(),H){case "+":return new Date(A+l);case "-":return new Date(A-l);case "*":return new Date(A*l);case "/":return new Date(A/
l)}switch(H){case "+":return A+l;case "-":return A-l;case "*":return A*l;case "/":return A/l}}function B(H,A,l,u){H=u.getAttribute(H,A);return null!=H&&1===l[A]?new Date(H):H}const S=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,K=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
U=new Set(["current_timestamp","current_date","current_time"]);let J=function(){function H(){}H.makeBool=function(A){return!0===A};H.featureValue=function(A,l,u,Z){return B(A,l,u,Z)};H.equalsNull=function(A){return null===A};H.applyLike=function(A,l,u){return e(A,l,u)};H.ensureArray=function(A){return G(A)};H.applyIn=function(A,l){return w(A,l)};H.currentDate=function(){const A=new Date;A.setHours(0,0,0,0);return A};H.makeSqlInterval=function(A,l,u){return I.SqlInterval.createFromValueAndQualifer(A,
l,u)};H.convertInterval=function(A){return A instanceof I.SqlInterval?A.valueInMilliseconds():A};H.currentTimestamp=function(){return new Date};H.compare=function(A,l,u){return z(A,l,u)};H.calculate=function(A,l,u){return y(A,l,u)};H.makeComparable=function(A){return q(A)};H.evaluateFunction=function(A,l){return I.evaluateFunction(A,l)};H.lookup=function(A,l){A=l[A];return void 0===A?null:A};H.between=function(A,l){return null==A||null==l[0]||null==l[1]?null:A>=l[0]&&A<=l[1]};H.notbetween=function(A,
l){return null==A||null==l[0]||null==l[1]?null:A<l[0]||A>l[1]};H.ternaryNot=function(A){return Y(A)};H.ternaryAnd=function(A,l){return M(A,l)};H.ternaryOr=function(A,l){return n(A,l)};return H}(),L=function(){function H(l,u){this.fieldsIndex=u;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=N.WhereGrammar.parse(l);const {isStandardized:Z,isAggregate:ka,referencedFieldNames:ua}=this._extractExpressionInfo(u);this._referencedFieldNames=ua;this.isStandardized=Z;this.isAggregate=
ka}H.create=function(l,u){return new H(l,u)};var A=H.prototype;A.testSet=function(l,u=R){const Z={};for(const ka of this.fieldNames)Z[ka]=l.map(ua=>u.getAttribute(ua,ka));return!!this._evaluateNode(this.parseTree,{attributes:Z},R)};A.calculateValue=function(l,u=R){l=this._evaluateNode(this.parseTree,l,u);return l instanceof I.SqlInterval?l.valueInMilliseconds()/864E5:l};A.calculateValueCompiled=function(l,u=R){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,
u,this._datefields);if(ja("esri-csp-restrictions"))return this.calculateValue(l,u);this._compileMe();return this.parseTree._compiledVersion(l,this.parameters,u,this._datefields)};A.testFeature=function(l,u=R){return!!this._evaluateNode(this.parseTree,l,u)};A.testFeatureCompiled=function(l,u=R){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,u,this._datefields);if(ja("esri-csp-restrictions"))return this.testFeature(l,u);this._compileMe();return!!this.parseTree._compiledVersion(l,
this.parameters,u,this._datefields)};A.getFunctions=function(){const l=new Set;this._visitAll(this.parseTree,u=>{"function"===u.type&&l.add(u.name.toLowerCase())});return Array.from(l)};A.getExpressions=function(){const l=new Map;this._visitAll(this.parseTree,u=>{if("function"===u.type){const Z=u.name.toLowerCase();u=u.args.value[0];if("column-reference"===u.type){u=u.column;const ka=`${Z}-${u}`;l.has(ka)||l.set(ka,{aggregateType:Z,field:u})}}});return[...l.values()]};A.getVariables=function(){const l=
new Set;this._visitAll(this.parseTree,u=>{"parameter"===u.type&&l.add(u.value.toLowerCase())});return Array.from(l)};A._compileMe=function(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",l)).bind(J)};A._extractExpressionInfo=function(l){const u=[],Z=new Set;let ka=!0,ua=!0;this._visitAll(this.parseTree,za=>{switch(za.type){case "column-reference":const Ha=l?.get(za.column);
let Ka,Ia;Ha?Ka=Ia=Ha.name??"":(Ia=za.column,Ka=Ia.toLowerCase());Ha&&Ha.name&&("date"===Ha.type||"esriFieldTypeDate"===Ha.type)&&(this._datefields[Ha.name]=1);Z.has(Ka)||(Z.add(Ka),u.push(Ia));za.column=Ia;break;case "function":const {name:Ua,args:Qa}=za;za=Qa.value.length;ka&&(ka=I.isStandardized(Ua,za));ua&&(ua=T.isAggregate(Ua,za))}});return{referencedFieldNames:Array.from(u),isStandardized:ka,isAggregate:ua}};A._visitAll=function(l,u){if(null!=l)switch(u(l),l.type){case "when-clause":this._visitAll(l.operand,
u);this._visitAll(l.value,u);break;case "case-expression":for(const Z of l.clauses)this._visitAll(Z,u);"simple"===l.format&&this._visitAll(l.operand,u);null!==l.else&&this._visitAll(l.else,u);break;case "expression-list":for(const Z of l.value)this._visitAll(Z,u);break;case "unary-expression":this._visitAll(l.expr,u);break;case "binary-expression":this._visitAll(l.left,u);this._visitAll(l.right,u);break;case "function":this._visitAll(l.args,u)}};A.evaluateNodeToJavaScript=function(l){switch(l.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case-expression":var u="";if("simple"===l.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(l.operand)+")";u="( ";for(let ka=0;ka<l.clauses.length;ka++)u+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(l.clauses[ka].operand)+")) ? ("+this.evaluateNodeToJavaScript(l.clauses[ka].value)+") : "}else for(u="( ",Z=0;Z<l.clauses.length;Z++)u+=" this.makeBool("+
this.evaluateNodeToJavaScript(l.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[Z].value)+") : ";u=null!==l.else?u+this.evaluateNodeToJavaScript(l.else):u+"null";return u+" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":u="[";for(Z of l.value)"["!==u&&(u+=","),u+=this.evaluateNodeToJavaScript(Z);return u+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";
case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")"}throw Error("Not Supported Operator "+l.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "date":return"(new Date("+m(l.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+k(l.value).getTime().toString()+"))";case "current-time":return"date"===l.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+")"}throw Error("Unsupported sql syntax "+l.type);};A._evaluateNode=function(l,u,Z){switch(l.type){case "interval":return u=
this._evaluateNode(l.value,u,Z),I.SqlInterval.createFromValueAndQualifer(u,l.qualifier,l.op);case "case-expression":if("simple"===l.format){var ka=q(this._evaluateNode(l.operand,u,Z));for(var ua=0;ua<l.clauses.length;ua++)if(ka===q(this._evaluateNode(l.clauses[ua].operand,u,Z)))return this._evaluateNode(l.clauses[ua].value,u,Z)}else for(ka=0;ka<l.clauses.length;ka++)if(!0===this._evaluateNode(l.clauses[ka].operand,u,Z))return this._evaluateNode(l.clauses[ka].value,u,Z);return null!==l.else?this._evaluateNode(l.else,
u,Z):null;case "parameter":return this.parameters[l.value.toLowerCase()];case "expression-list":ka=[];for(ua of l.value)ka.push(this._evaluateNode(ua,u,Z));return ka;case "unary-expression":return Y(this._evaluateNode(l.expr,u,Z));case "binary-expression":switch(l.operator){case "AND":return M(this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,u,Z));case "OR":return n(this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,u,Z));case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(l.left,u,Z);case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(l.left,u,Z);case "IN":return ka=G(this._evaluateNode(l.right,u,Z)),w(this._evaluateNode(l.left,u,Z),ka);case "NOT IN":return ka=G(this._evaluateNode(l.right,u,Z)),Y(w(this._evaluateNode(l.left,u,Z),ka));case "BETWEEN":return ka=this._evaluateNode(l.left,u,Z),l=this._evaluateNode(l.right,u,Z),null==ka||null==l[0]||null==l[1]?null:ka>=q(l[0])&&ka<=
q(l[1]);case "NOTBETWEEN":return ka=this._evaluateNode(l.left,u,Z),l=this._evaluateNode(l.right,u,Z),null==ka||null==l[0]||null==l[1]?null:ka<q(l[0])||ka>q(l[1]);case "LIKE":return e(this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,u,Z),l.escape);case "NOT LIKE":return Y(e(this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,u,Z),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return z(l.operator,this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,
u,Z));case "-":case "+":case "*":case "/":case "||":return y(l.operator,this._evaluateNode(l.left,u,Z),this._evaluateNode(l.right,u,Z))}case "null":case "boolean":case "string":case "number":return l.value;case "date":return m(l.value);case "timestamp":return k(l.value);case "current-time":return u=new Date,"date"===l.mode&&u.setHours(0,0,0,0),u;case "column-reference":return B(u,l.column,this._datefields,Z);case "data-type":return l.value;case "function":return u=this._evaluateNode(l.args,u,Z),this.isAggregate?
T.aggregateFunction(l.name,u):I.evaluateFunction(l.name,u)}throw Error("Unsupported sql syntax "+l.type);};d._createClass(H,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||U.has(l.name.toLowerCase()))});
return this._hasDateFunctions}}]);return H}();var Q;(function(H){H[H.Normal=0]="Normal";H[H.Escaped=1]="Escaped"})(Q||(Q={}));const R={getAttribute(H,A){return(H&&"object"===typeof H.attributes?H.attributes:H)[A]}};g.WhereClause=L;g.defaultAttributeAdapter=R;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(g){function d(I){let N=0;for(let E=0;E<I.length;E++)N+=I[E];return N/I.length}function ja(I){const N=d(I),
E=I.length;let t=0;for(const k of I)t+=(k-N)**2;return 1<E?t/(E-1):0}const T={min:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:Math.min.apply(Math,I[0])},max:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:Math.max.apply(Math,I[0])},avg:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:d(I[0])},sum:{minParams:1,maxParams:1,evaluate:I=>{if(null==I[0])I=null;else{I=I[0];let N=0;for(let E=0;E<I.length;E++)N+=I[E];I=N}return I}},stddev:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:
Math.sqrt(ja(I[0]))},count:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:I[0].length},var:{minParams:1,maxParams:1,evaluate:I=>null==I[0]?null:ja(I[0])}};g.aggregateFunction=function(I,N){const E=T[I.toLowerCase()];if(null==E)throw Error("Function Not Recognised");if(N.length<E.minParams||N.length>E.maxParams)throw Error(`Invalid Parameter count for call to ${I.toUpperCase()}`);return E.evaluate(N)};g.isAggregate=function(I,N){I=T[I.toLowerCase()];return null!=I&&N>=I.minParams&&N<=I.maxParams};
Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(g,d,ja,T){function I(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function N(k,m){if(k instanceof Date)return m?I(k):k;if("string"===typeof k||k instanceof String)if(k=T.DateTime.fromSQL(k),k.isValid)return m?I(k.toJSDate()):k.toJSDate();throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);
}let E=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(m){if(null!==m.precision||null!==m.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(m,G){G.includes(".")?(G=G.split("."),m.second=parseFloat(G[0]),m.millis=parseInt(G[1],10)):m.second=parseFloat(G)};k.createFromMilliseconds=function(m){const G=new k;G.second=m/1E3;return G};k.createFromValueAndQualifer=
function(m,G,Y){let M=null;const n=new k;n.op="-"===Y?"-":"+";if("interval-period"===G.type){k._fixDefaults(G);Y=RegExp("^[0-9]{1,}$");if("year"===G.period||"month"===G.period)throw Error("Year-Month Intervals not supported");if("second"===G.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(m))k._parseSecondsComponent(n,m);else throw Error("Illegal Interval");else if(Y.test(m))n[G.period]=parseFloat(m);else throw Error("Illegal Interval");}else{k._fixDefaults(G.start);k._fixDefaults(G.end);if("year"===
G.start.period||"month"===G.start.period)throw Error("Year-Month Intervals not supported");if("year"===G.end.period||"month"===G.end.period)throw Error("Year-Month Intervals not supported");switch(G.start.period){case "day":switch(G.end.period){case "hour":M=RegExp("^[0-9]{1,} [0-9]{1,}$");if(M.test(m))n[G.start.period]=parseFloat(m.split(" ")[0]),n[G.end.period]=parseFloat(m.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":M=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(M.test(m))n[G.start.period]=
parseFloat(m.split(" ")[0]),m=m.split(" ")[1].split(":"),n.hour=parseFloat(m[0]),n.minute=parseFloat(m[1]);else throw Error("Illegal Interval");break;case "second":M=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(m))n[G.start.period]=parseFloat(m.split(" ")[0]),m=m.split(" ")[1].split(":"),n.hour=parseFloat(m[0]),n.minute=parseFloat(m[1]),k._parseSecondsComponent(n,m[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(G.end.period){case "minute":M=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(M.test(m))n.hour=parseFloat(m.split(":")[0]),n.minute=parseFloat(m.split(":")[1]);else throw Error("Illegal Interval");break;case "second":M=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(m))m=m.split(":"),n.hour=parseFloat(m[0]),n.minute=parseFloat(m[1]),k._parseSecondsComponent(n,m[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(G.end.period){case "second":M=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(M.test(m))m=m.split(":"),n.minute=parseFloat(m[0]),k._parseSecondsComponent(n,m[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return n};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const t={extract:{minParams:2,
maxParams:2,evaluate:([k,m])=>{if(null==m)return null;if(m instanceof Date)switch(k.toUpperCase()){case "SECOND":return m.getSeconds();case "MINUTE":return m.getMinutes();case "HOUR":return m.getHours();case "DAY":return m.getDate();case "MONTH":return m.getMonth()+1;case "YEAR":return m.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [m,G]=k;return null==m||null==G?null:m.toString().substring(G-1)}if(3===
k.length){const [m,G,Y]=k;return null==m||null==G||null==Y?null:0>=Y?"":m.toString().substring(G-1,G+Y-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,m])=>null==k||null==m?null:m.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var m=3===k.length,G=m?k[1]:" ";m=m?k[2]:k[1];if(null==G||null==m)return null;G=`(${ja.escapeRegExpString(G)})`;switch(k[0]){case "BOTH":return m.replace(new RegExp(`^${G}*|${G}*$`,"g"),"");case "LEADING":return m.replace(new RegExp(`^${G}*`,"g"),"");case "TRAILING":return m.replace(new RegExp(`${G}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?
null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const m=k[0];k=2===k.length?10**k[1]:1;return null==m?null:Math.round(m*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let m="";for(let G=0;G<k.length;G++){if(null==k[G])return null;m+=k[G].toString()}return m}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const m of k)if(null!==m)return m;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},
sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const m=k[0];k=k[1];return(m instanceof Date?m.valueOf():m)===(k instanceof Date?k.valueOf():k)?null:m}},cast:{minParams:2,maxParams:2,evaluate:k=>{var m=k[0];k=k[1];if(null===m)return null;switch(k.type){case "integer":m=parseInt(m,10);if(isNaN(m))throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);return m;
case "smallint":m=parseInt(m,10);if(isNaN(m))throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);if(32767<m||-32767>m)throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);return m;case "float":case "real":m=parseFloat(m);if(isNaN(m))throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);return m;case "date":return N(m,!0);case "timestamp":return N(m,!1);case "varchar":m=m.toString();if(m.length>k.size)throw new d.SqlError(d.SqlErrorCodes.CannotCastValue);return m;default:throw new d.SqlError(d.SqlErrorCodes.InvalidDataType);
}}}};g.SqlInterval=E;g.evaluateFunction=function(k,m){const G=t[k.toLowerCase()];if(null==G)throw Error("Function Not Recognised");if(m.length<G.minParams||m.length>G.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return G.evaluate(m)};g.isStandardized=function(k,m){k=t[k.toLowerCase()];return null!=k&&m>=k.minParams&&m<=k.maxParams};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(g,d,ja){g.SqlErrorCodes=void 0;(function(t){t.InvalidFunctionParameters="InvalidFunctionParameters";t.UnsupportedSqlFunction="UnsupportedSqlFunction";t.UnsupportedOperator="UnsupportedOperator";t.UnsupportedSyntax="UnsupportedSyntax";t.UnsupportedIsRhs="UnsupportedIsRhs";t.UnsupportedIsLhs="UnsupportedIsLhs";t.InvalidDataType="InvalidDataType";t.CannotCastValue="CannotCastValue";t.MissingStatisticParameters="MissingStatisticParameters"})(g.SqlErrorCodes||
(g.SqlErrorCodes={}));const T={[g.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[g.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[g.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[g.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[g.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[g.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[g.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[g.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[g.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let I=function(t){function k(m,G){m=t.call(this,ja.doSubstitutions(T[m],G))||this;m.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(m),k);return m}d._inheritsLoose(k,t);return k}(d._wrapNativeSuper(Error));
g.FeatureSetErrorCodes=void 0;(function(t){t.NeverReach="NeverReach";t.NotImplemented="NotImplemented";t.Cancelled="Cancelled";t.InvalidStatResponse="InvalidStatResponse";t.InvalidRequest="InvalidRequest";t.RequestFailed="RequestFailed";t.MissingFeatures="MissingFeatures";t.AggregationFieldNotFound="AggregationFieldNotFound";t.DataElementsNotFound="DataElementsNotFound"})(g.FeatureSetErrorCodes||(g.FeatureSetErrorCodes={}));const N={[g.FeatureSetErrorCodes.Cancelled]:"Cancelled",[g.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[g.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[g.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[g.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[g.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[g.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[g.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[g.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let E=function(t){function k(m,
G){m=t.call(this,ja.doSubstitutions(N[m],G))||this;m.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(m),k);return m}d._inheritsLoose(k,t);return k}(d._wrapNativeSuper(Error));g.FeatureSetError=E;g.FeatureSetErrorMessages=N;g.SqlError=I;g.SqlErrorMessages=T;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(g,d){function ja(M){return M&&M.loc?`Line : ${M.loc.start?.line}, ${M.loc.start?.column}: `:""}function T(M,n){try{if(!n)return M;for(const w in n){let e=n[w];e||(e="");M=M.replace("{"+w+"}",n[w])}}catch(w){}return M}g.ExecutionErrorCodes=void 0;(function(M){M.AsyncNotEnabled="AsyncNotEnabled";M.ModulesNotSupported="ModulesNotSupported";M.CircularModules="CircularModules";M.NeverReach="NeverReach";M.UnsupportedHashType="UnsupportedHashType";M.InvalidParameter="InvalidParameter";M.UnexpectedToken=
"UnexpectedToken";M.Unrecognised="Unrecognised";M.UnrecognisedType="UnrecognisedType";M.MaximumCallDepth="MaximumCallDepth";M.BooleanConditionRequired="BooleanConditionRequired";M.TypeNotAllowedInFeature="TypeNotAllowedInFeature";M.KeyMustBeString="KeyMustBeString";M.WrongNumberOfParameters="WrongNumberOfParameters";M.CallNonFunction="CallNonFunction";M.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";M.NoFunctionInDictionary="NoFunctionInDictionary";M.NoFunctionInArray="NoFunctionInArray";
M.AssignModuleFunction="AssignModuleFunction";M.LogicExpressionOrAnd="LogicExpressionOrAnd";M.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";M.FuncionNotFound="FunctionNotFound";M.InvalidMemberAccessKey="InvalidMemberAccessKey";M.UnsupportedUnaryOperator="UnsupportUnaryOperator";M.InvalidIdentifier="InvalidIdentifier";M.MemberOfNull="MemberOfNull";M.UnsupportedOperator="UnsupportedOperator";M.Cancelled="Cancelled";M.ModuleAccessorMustBeString="ModuleAccessorMustBeString";M.ModuleExportNotFound=
"ModuleExportNotFound";M.Immutable="Immutable";M.OutOfBounds="OutOfBounds";M.IllegalResult="IllegalResult";M.FieldNotFound="FieldNotFound";M.PortalRequired="PortalRequired";M.LogicError="LogicError";M.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";M.KeyAccessorMustBeString="KeyAccessorMustBeString";M.WrongSpatialReference="WrongSpatialReference"})(g.ExecutionErrorCodes||(g.ExecutionErrorCodes={}));const I={[g.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[g.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[g.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[g.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[g.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[g.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[g.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[g.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[g.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[g.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[g.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[g.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[g.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[g.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[g.ExecutionErrorCodes.PortalRequired]:"Portal is required",[g.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[g.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[g.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[g.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[g.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[g.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[g.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[g.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[g.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[g.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[g.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[g.ExecutionErrorCodes.Immutable]:"Object is immutable",[g.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[g.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[g.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[g.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[g.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[g.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[g.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[g.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[g.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[g.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[g.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[g.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[g.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[g.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let N=function(M){function n(...w){return M.call(this,...w)||this}d._inheritsLoose(n,M);return n}(d._wrapNativeSuper(Error)),E=function(M){function n(w,e){w=
M.call(this,ja(e)+w.message,{cause:w})||this;w.loc=null;Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(w),n);e&&e.loc&&(w.loc=e.loc);return w}d._inheritsLoose(n,M);return n}(N),t=function(M){function n(w,e,q,z){w=M.call(this,"Execution error - "+ja(q)+T(I[e],z))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(w),n);q&&q.loc&&(w.loc=q.loc);return w}d._inheritsLoose(n,M);return n}(d._wrapNativeSuper(Error)),
k=function(M){function n(w,e,q,z){w=M.call(this,"Compilation error - "+ja(q)+T(I[e],z))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(w),n);q&&q.loc&&(w.loc=q.loc);return w}d._inheritsLoose(n,M);return n}(d._wrapNativeSuper(Error)),m=function(M){function n(){var w=M.call(this,"Uncompilable code structures")||this;w.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(w),
n);return w}d._inheritsLoose(n,M);return n}(d._wrapNativeSuper(Error));g.ModuleErrorCodes=void 0;(function(M){M.UnrecognisedUri="UnrecognisedUri";M.UnsupportedUriProtocol="UnsupportedUriProtocol"})(g.ModuleErrorCodes||(g.ModuleErrorCodes={}));const G={[g.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[g.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let Y=function(M){function n(w,e){w=M.call(this,T(G[w],e))||this;w.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(d._assertThisInitialized(w),n);return w}d._inheritsLoose(n,M);return n}(d._wrapNativeSuper(Error));g.ArcadeCompilationError=k;g.ArcadeExecutionError=t;g.ArcadeUncompilableError=m;g.ErrorWithCause=N;g.ExecutionErrorMessages=I;g.LocatableArcadeExecutionError=E;g.ModuleError=Y;g.ModuleErrorMessages=G;g.doSubstitutions=T;g.ensureArcadeExecutionError=function(M,n,w){return"esri.arcade.arcadeexecutionerror"===w.declaredRootClass||"esri.arcade.arcadecompilationerror"===
w.declaredRootClass?null===w.loc&&n&&n.loc?new E(w,{cause:w}):w:n&&n.loc?new E(w,{cause:w}):w};g.parsingValidationMessage=function(M,n,w){return"Parsing error - "+ja(M)+T(I[n],w)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(g){function d(a,h={}){const P=JSON.stringify([a,h]);let fa=gd[P];fa||(fa=new Intl.ListFormat(a,h),gd[P]=fa);return fa}function ja(a,h={}){const P=JSON.stringify([a,h]);let fa=Hc[P];fa||(fa=new Intl.DateTimeFormat(a,
h),Hc[P]=fa);return fa}function T(a,h={}){const P=JSON.stringify([a,h]);let fa=Ic[P];fa||(fa=new Intl.NumberFormat(a,h),Ic[P]=fa);return fa}function I(a,h={}){const {base:P,...fa}=h,ma=JSON.stringify([a,fa]);let sa=Jc[ma];sa||(sa=new Intl.RelativeTimeFormat(a,h),Jc[ma]=sa);return sa}function N(a){const h=[];for(let P=1;12>=P;P++){const fa=cb.utc(2016,P,1);h.push(a(fa))}return h}function E(a){const h=[];for(let P=1;7>=P;P++){const fa=cb.utc(2016,11,13+P);h.push(a(fa))}return h}function t(a,h,P,fa,
ma){a=a.listingMode(P);return"error"===a?null:"en"===a?fa(h):ma(h)}function k(a,h){if(m(a)||null===a)return h;if(a instanceof ic)return a;if("string"===typeof a){const P=a.toLowerCase();return"default"===P?h:"local"===P||"system"===P?nc.instance:"utc"===P||"gmt"===P?Eb.utcInstance:Eb.parseSpecifier(P)||Tb.create(a)}return G(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new hd(a)}function m(a){return"undefined"===typeof a}function G(a){return"number"===typeof a}function Y(a){return"number"===
typeof a&&0===a%1}function M(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function n(a,h,P){if(0!==a.length)return a.reduce((fa,ma)=>{ma=[h(ma),ma];return fa?P(fa[0],ma[0])===fa[0]?fa:ma:ma},null)[1]}function w(a,h){return h.reduce((P,fa)=>{P[fa]=a[fa];return P},{})}function e(a,h){return Object.prototype.hasOwnProperty.call(a,h)}function q(a,h,P){return Y(a)&&a>=h&&a<=P}function z(a,h=2){return 0>a?"-"+(""+-a).padStart(h,"0"):(""+a).padStart(h,"0")}function y(a){if(!m(a)&&
null!==a&&""!==a)return parseInt(a,10)}function B(a){if(!m(a)&&null!==a&&""!==a)return parseFloat(a)}function S(a){if(!m(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function F(a,h,P=!1){h=10**h;return(P?Math.trunc:Math.round)(a*h)/h}function r(a){return 0===a%4&&(0!==a%100||0===a%400)}function C(a,h){var P=h-1;P=P-12*Math.floor(P/12)+1;return 2===P?r(a+(h-P)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][P-1]}function K(a){let h=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,
a.second,a.millisecond);100>a.year&&0<=a.year&&(h=new Date(h),h.setUTCFullYear(h.getUTCFullYear()-1900));return+h}function U(a){var h=a-1;h=(h+Math.floor(h/4)-Math.floor(h/100)+Math.floor(h/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===h?53:52}function J(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function L(a,h,P,fa=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fa&&(ma.timeZone=
fa);return(h=(new Intl.DateTimeFormat(P,{timeZoneName:h,...ma})).formatToParts(a).find(sa=>"timezonename"===sa.type.toLowerCase()))?h.value:null}function Q(a,h){a=parseInt(a,10);Number.isNaN(a)&&(a=0);h=parseInt(h,10)||0;h=0>a||Object.is(a,-0)?-h:h;return 60*a+h}function R(a){const h=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(h))throw new qa(`Invalid unit value ${a}`);return h}function H(a,h){const P={};for(const fa in a)if(e(a,fa)){const ma=a[fa];void 0!==ma&&null!==ma&&(P[h(fa)]=R(ma))}return P}
function A(a,h){const P=Math.trunc(Math.abs(a/60)),fa=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(h){case "short":return`${a}${z(P,2)}:${z(fa,2)}`;case "narrow":return`${a}${P}${0<fa?`:${fa}`:""}`;case "techie":return`${a}${z(P,2)}${z(fa,2)}`;default:throw new RangeError(`Value format ${h} is out of range for property format`);}}function l(a){return w(a,["hour","minute","second","millisecond"])}function u(a){switch(a){case "narrow":return[...id];case "short":return[...jd];case "long":return[...kd];
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Z(a){switch(a){case "narrow":return[...oe];case "short":return[...ld];case "long":return[...md];case "numeric":return"1234567".split("");default:return null}}function ka(a){switch(a){case "narrow":return[...Kc];case "short":return[...pe];case "long":return[...qe];default:return null}}function ua(a,h,P="always",fa=!1){const ma={years:["year",
"yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var sa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===P&&sa)switch(P="days"===a,h){case 1:return P?"tomorrow":`next ${ma[a][0]}`;case -1:return P?"yesterday":`last ${ma[a][0]}`;case 0:return P?"today":`this ${ma[a][0]}`}P=Object.is(h,-0)||0>h;h=Math.abs(h);sa=1===h;const Ba=ma[a];a=fa?sa?Ba[1]:Ba[2]||Ba[1]:sa?
ma[a][0]:a;return P?`${h} ${a} ago`:`in ${h} ${a}`}function za(a,h){let P="";for(const fa of a)P=fa.literal?P+fa.val:P+h(fa.val);return P}function Ha(...a){a=a.reduce((h,P)=>h+P.source,"");return RegExp(`^${a}$`)}function Ka(...a){return h=>a.reduce(([P,fa,ma],sa)=>{const [Ba,La,Pa]=sa(h,ma);return[{...P,...Ba},La||fa,Pa]},[{},null,1]).slice(0,2)}function Ia(a,...h){if(null==a)return[null,null];for(const [P,fa]of h)if(h=P.exec(a))return fa(h);return[null,null]}function Ua(...a){return(h,P)=>{const fa=
{};let ma;for(ma=0;ma<a.length;ma++)fa[a[ma]]=y(h[P+ma]);return[fa,null,P+ma]}}function Qa(a,h,P){a=a[h];return m(a)?P:y(a)}function Sa(a,h){return[{hours:Qa(a,h,0),minutes:Qa(a,h+1,0),seconds:Qa(a,h+2,0),milliseconds:S(a[h+3])},null,h+4]}function bb(a,h){const P=!a[h]&&!a[h+1];a=Q(a[h+1],a[h+2]);return[{},P?null:Eb.instance(a),h+3]}function Xa(a,h){return[{},a[h]?Tb.create(a[h]):null,h+1]}function Aa(a){const [h,P,fa,ma,sa,Ba,La,Pa,f]=a,Za="-"===h[0];a=Pa&&"-"===Pa[0];const $a=(eb,va=!1)=>void 0!==
eb&&(va||eb&&Za)?-eb:eb;return[{years:$a(B(P)),months:$a(B(fa)),weeks:$a(B(ma)),days:$a(B(sa)),hours:$a(B(Ba)),minutes:$a(B(La)),seconds:$a(B(Pa),"-0"===Pa),milliseconds:$a(S(f),a)}]}function Da(a,h,P,fa,ma,sa,Ba){h={year:2===h.length?J(y(h)):y(h),month:jd.indexOf(P)+1,day:y(fa),hour:y(ma),minute:y(sa)};Ba&&(h.second=y(Ba));a&&(h.weekday=3<a.length?md.indexOf(a)+1:ld.indexOf(a)+1);return h}function Fa(a){const [,h,P,fa,ma,sa,Ba,La,Pa,f,Za,$a]=a;a=Da(h,ma,fa,P,sa,Ba,La);let eb;eb=Pa?re[Pa]:f?0:Q(Za,
$a);return[a,new Eb(eb)]}function c(a){const [,h,P,fa,ma,sa,Ba,La]=a;return[Da(h,ma,fa,P,sa,Ba,La),Eb.utcInstance]}function p(a){const [,h,P,fa,ma,sa,Ba,La]=a;return[Da(h,La,P,fa,ma,sa,Ba),Eb.utcInstance]}function V(a,h,P=!1){a={values:P?h.values:{...a.values,...(h.values||{})},loc:a.loc.clone(h.loc),conversionAccuracy:h.conversionAccuracy||a.conversionAccuracy,matrix:h.matrix||a.matrix};return new hb(a)}function la(a,h,P,fa,ma){a=a[ma][P];var sa=h[P]/a;sa=Math.sign(sa)!==Math.sign(fa[ma])&&0!==fa[ma]&&
1>=Math.abs(sa)?0>sa?Math.floor(sa):Math.ceil(sa):Math.trunc(sa);fa[ma]+=sa;h[P]-=sa*a}function ta(a,h){se.reduce((P,fa)=>{if(m(h[fa]))return P;P&&la(a,h,P,h,fa);return fa},null)}function x(a,h){a=h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(hb.fromMillis(a).as("days"))}function O(a,h,P){const fa=[["years",(Pa,f)=>f.year-Pa.year],["quarters",(Pa,f)=>f.quarter-Pa.quarter+4*(f.year-Pa.year)],["months",(Pa,f)=>f.month-
Pa.month+12*(f.year-Pa.year)],["weeks",(Pa,f)=>{Pa=x(Pa,f);return(Pa-Pa%7)/7}],["days",x]],ma={},sa=a;let Ba,La;for(const [Pa,f]of fa)0<=P.indexOf(Pa)&&(Ba=Pa,ma[Pa]=f(a,h),La=sa.plus(ma),La>h?(ma[Pa]--,a=sa.plus(ma)):a=La);return[a,ma,La,Ba]}function da(a,h,P,fa){let [ma,sa,Ba,La]=O(a,h,P);a=h-ma;P=P.filter(Pa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Pa));0===P.length&&(Ba<h&&(Ba=ma.plus({[La]:1})),Ba!==ma&&(sa[La]=(sa[La]||0)+a/(Ba-ma)));h=hb.fromObject(sa,fa);return 0<P.length?
hb.fromMillis(a,fa).shiftTo(...P).plus(h):h}function aa({numberingSystem:a},h=""){return new RegExp(`${Lc[a||"latn"]}${h}`)}function ia(a,h=P=>P){return{regex:a,deser:([P])=>{{let fa=parseInt(P,10);if(isNaN(fa)){fa="";for(let ma=0;ma<P.length;ma++){const sa=P.charCodeAt(ma);if(-1!==P[ma].search(Lc.hanidec))fa+=te.indexOf(P[ma]);else for(const Ba in nd){const [La,Pa]=nd[Ba];sa>=La&&sa<=Pa&&(fa+=sa-La)}}P=parseInt(fa,10)}else P=fa}return h(P)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,
od)}function ra(a,h){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([P])=>a.findIndex(fa=>P.replace(/\./g,"").replace(Mc," ").toLowerCase()===fa.replace(/\./g,"").replace(Mc," ").toLowerCase())+h}}function W(a,h){return{regex:a,deser:([,P,fa])=>Q(P,fa),groups:h}}function ea(a){return{regex:a,deser:([h])=>h}}function pa(a,h){const P=aa(h),fa=aa(h,"{2}"),ma=aa(h,"{3}"),sa=aa(h,"{4}"),Ba=aa(h,"{6}"),La=aa(h,"{1,2}"),Pa=aa(h,"{1,3}"),f=aa(h,"{1,6}"),Za=aa(h,"{1,9}"),$a=aa(h,"{2,4}"),eb=
aa(h,"{4,6}"),va=v=>({regex:RegExp(v.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([D])=>D,literal:!0}),$b=(v=>{if(a.literal)return va(v);switch(v.val){case "G":return ra(h.eras("short",!1),0);case "GG":return ra(h.eras("long",!1),0);case "y":return ia(f);case "yy":return ia($a,J);case "yyyy":return ia(sa);case "yyyyy":return ia(eb);case "yyyyyy":return ia(Ba);case "M":return ia(La);case "MM":return ia(fa);case "MMM":return ra(h.months("short",!0,!1),1);case "MMMM":return ra(h.months("long",
!0,!1),1);case "L":return ia(La);case "LL":return ia(fa);case "LLL":return ra(h.months("short",!1,!1),1);case "LLLL":return ra(h.months("long",!1,!1),1);case "d":return ia(La);case "dd":return ia(fa);case "o":return ia(Pa);case "ooo":return ia(ma);case "HH":return ia(fa);case "H":return ia(La);case "hh":return ia(fa);case "h":return ia(La);case "mm":return ia(fa);case "m":return ia(La);case "q":return ia(La);case "qq":return ia(fa);case "s":return ia(La);case "ss":return ia(fa);case "S":return ia(Pa);
case "SSS":return ia(ma);case "u":return ea(Za);case "uu":return ea(La);case "uuu":return ia(P);case "a":return ra(h.meridiems(),0);case "kkkk":return ia(sa);case "kk":return ia($a,J);case "W":return ia(La);case "WW":return ia(fa);case "E":case "c":return ia(P);case "EEE":return ra(h.weekdays("short",!1,!1),1);case "EEEE":return ra(h.weekdays("long",!1,!1),1);case "ccc":return ra(h.weekdays("short",!0,!1),1);case "cccc":return ra(h.weekdays("long",!0,!1),1);case "Z":case "ZZ":return W(new RegExp(`([+-]${La.source})(?::(${fa.source}))?`),
2);case "ZZZ":return W(new RegExp(`([+-]${La.source})(${fa.source})?`),2);case "z":return ea(/[a-z_+-/]{1,256}?/i);default:return va(v)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};$b.token=a;return $b}function wa(a){return[`^${a.map(h=>h.regex).reduce((h,P)=>`${h}(${P.source})`,"")}$`,a]}function Ca(a,h,P){if(a=a.match(h)){h={};let fa=1;for(const ma in P)if(e(P,ma)){const sa=P[ma],Ba=sa.groups?sa.groups+1:1;!sa.literal&&sa.token&&(h[sa.token.val[0]]=sa.deser(a.slice(fa,
fa+Ba)));fa+=Ba}return[a,h]}return[a,{}]}function Oa(a){const h=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let P=null,fa;m(a.z)||(P=Tb.create(a.z));m(a.Z)||(P||(P=new Eb(a.Z)),fa=a.Z);m(a.q)||
(a.M=3*(a.q-1)+1);m(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);m(a.u)||(a.S=S(a.u));return[Object.keys(a).reduce((ma,sa)=>{const Ba=h(sa);Ba&&(ma[Ba]=a[sa]);return ma},{}),P,fa]}function Ma(a,h){return Array.prototype.concat(...a.map(P=>{if(!P.literal){var fa=Fb.macroTokenToFormatOpts(P.val);fa=Va(fa,h);P=null==fa||fa.includes(void 0)?P:fa}return P}))}function Ta(a,h,P){P=Ma(Fb.parseFormat(P),a);var fa=P.map(eb=>pa(eb,a));const ma=fa.find(eb=>eb.invalidReason);
if(ma)return{input:h,tokens:P,invalidReason:ma.invalidReason};const [sa,Ba]=wa(fa);fa=RegExp(sa,"i");const [La,Pa]=Ca(h,fa,Ba),[f,Za,$a]=Pa?Oa(Pa):[null,null,void 0];if(e(Pa,"a")&&e(Pa,"H"))throw new ha("Can't include meridiem when specifying 24-hour format");return{input:h,tokens:P,regex:fa,rawMatches:La,matches:Pa,result:f,zone:Za,specificOffset:$a}}function Va(a,h){if(!a)return null;h=Fb.create(h,a);var P=h.formatDateTimeParts;Nc||(Nc=cb.fromMillis(1555555555555));return P.call(h,Nc).map(fa=>{{const {type:sa,
value:Ba}=fa;if("literal"===sa)fa={literal:!0,val:Ba};else{fa=a[sa];var ma=ue[sa];"object"===typeof ma&&(ma=ma[fa]);fa=ma?{literal:!1,val:ma}:void 0}}return fa})}function Ja(a,h){return new Qb("unit out of range",`you specified ${h} (of type ${typeof h}) as a ${a}, which is invalid`)}function Wa(a,h,P){h=new Date(Date.UTC(a,h-1,P));100>a&&0<=a&&h.setUTCFullYear(h.getUTCFullYear()-1900);a=h.getUTCDay();return 0===a?7:a}function xa(a,h){a=r(a)?Oc:Pc;const P=a.findIndex(fa=>fa<h);return{month:P+1,day:h-
a[P]}}function vb(a){const {year:h,month:P,day:fa}=a;var ma=fa+(r(h)?Oc:Pc)[P-1];const sa=Wa(h,P,fa);ma=Math.floor((ma-sa+10)/7);let Ba;1>ma?(Ba=h-1,ma=U(Ba)):ma>U(h)?(Ba=h+1,ma=1):Ba=h;return{weekYear:Ba,weekNumber:ma,weekday:sa,...l(a)}}function ub(a){const {weekYear:h,weekNumber:P,weekday:fa}=a;var ma=Wa(h,1,4),sa=r(h)?366:365;ma=7*P+fa-ma-3;1>ma?(sa=h-1,ma+=r(sa)?366:365):ma>sa?(sa=h+1,ma-=r(h)?366:365):sa=h;const {month:Ba,day:La}=xa(sa,ma);return{year:sa,month:Ba,day:La,...l(a)}}function qb(a){const {year:h,
month:P,day:fa}=a;var ma=fa+(r(h)?Oc:Pc)[P-1];return{year:h,ordinal:ma,...l(a)}}function b(a){const {year:h,ordinal:P}=a,{month:fa,day:ma}=xa(h,P);return{year:h,month:fa,day:ma,...l(a)}}function jb(a){const h=Y(a.year),P=q(a.month,1,12),fa=q(a.day,1,C(a.year,a.month));return h?P?fa?!1:Ja("day",a.day):Ja("month",a.month):Ja("year",a.year)}function gb(a){const {hour:h,minute:P,second:fa,millisecond:ma}=a;a=q(h,0,23)||24===h&&0===P&&0===fa&&0===ma;const sa=q(P,0,59),Ba=q(fa,0,59),La=q(ma,0,999);return a?
sa?Ba?La?!1:Ja("millisecond",ma):Ja("second",fa):Ja("minute",P):Ja("hour",h)}function Gb(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Pb(a){null===a.weekData&&(a.weekData=vb(a.c));return a.weekData}function nb(a,h){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new cb({...a,...h,old:a})}function Wb(a,h,P){let fa=a-6E4*h;const ma=P.offset(fa);if(h===ma)return[fa,h];fa-=6E4*(ma-h);h=P.offset(fa);return ma===h?[fa,ma]:[a-6E4*Math.min(ma,
h),Math.max(ma,h)]}function oa(a,h){a=new Date(a+6E4*h);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Yb(a,h,P){return Wb(K(a),h,P)}function Sb(a,h){const P=a.o;var fa=a.c.year+Math.trunc(h.years);const ma=a.c.month+Math.trunc(h.months)+3*Math.trunc(h.quarters);fa={...a.c,year:fa,month:ma,day:Math.min(a.c.day,C(fa,ma))+Math.trunc(h.days)+7*Math.trunc(h.weeks)};
h=hb.fromObject({years:h.years-Math.trunc(h.years),quarters:h.quarters-Math.trunc(h.quarters),months:h.months-Math.trunc(h.months),weeks:h.weeks-Math.trunc(h.weeks),days:h.days-Math.trunc(h.days),hours:h.hours,minutes:h.minutes,seconds:h.seconds,milliseconds:h.milliseconds}).as("milliseconds");fa=K(fa);let [sa,Ba]=Wb(fa,P,a.zone);0!==h&&(sa+=h,Ba=a.zone.offset(sa));return{ts:sa,o:Ba}}function zb(a,h,P,fa,ma,sa){const {setZone:Ba,zone:La}=P;return a&&0!==Object.keys(a).length?(a=cb.fromObject(a,{...P,
zone:h||La,specificOffset:sa}),Ba?a:a.setZone(La)):cb.invalid(new Qb("unparsable",`the input "${ma}" can't be parsed as ${fa}`))}function Kb(a,h,P=!0){return a.isValid?Fb.create(rb.create("en-US"),{allowZ:P,forceSimple:!0}).formatDateTimeFromString(a,h):null}function Zb(a,h){const P=9999<a.c.year||0>a.c.year;let fa="";P&&0<=a.c.year&&(fa+="+");fa+=z(a.c.year,P?6:4);h?(fa=fa+"-"+z(a.c.month),fa=fa+"-"+z(a.c.day)):(fa+=z(a.c.month),fa+=z(a.c.day));return fa}function Xb(a,h,P,fa,ma,sa){let Ba=z(a.c.hour);
h?(Ba=Ba+":"+z(a.c.minute),0===a.c.second&&P||(Ba+=":")):Ba+=z(a.c.minute);0===a.c.second&&P||(Ba+=z(a.c.second),0===a.c.millisecond&&fa||(Ba=Ba+"."+z(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!sa?Ba+="Z":0>a.o?(Ba=Ba+"-"+z(Math.trunc(-a.o/60)),Ba=Ba+":"+z(Math.trunc(-a.o%60))):(Ba=Ba+"+"+z(Math.trunc(a.o/60)),Ba=Ba+":"+z(Math.trunc(a.o%60))));sa&&(Ba+="["+a.zone.ianaName+"]");return Ba}function kc(a){const h={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",
hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!h)throw new ba(a);return h}function Hb(a,h){const P=k(h.zone,yb.defaultZone);h=rb.fromObject(h);const fa=yb.now();var ma;if(m(a.year))a=
fa;else{for(const sa of pd)m(a[sa])&&(a[sa]=qd[sa]);if(ma=jb(a)||gb(a))return cb.invalid(ma);ma=P.offset(fa);[a,ma]=Yb(a,ma,P)}return new cb({ts:a,zone:P,loc:h,o:ma})}function Rb(a,h,P){const fa=m(P.round)?!0:P.round,ma=(Ba,La)=>{Ba=F(Ba,fa||P.calendary?0:2,!0);return h.loc.clone(P).relFormatter(P).format(Ba,La)},sa=Ba=>P.calendary?h.hasSame(a,Ba)?0:h.startOf(Ba).diff(a.startOf(Ba),Ba).get(Ba):h.diff(a,Ba).get(Ba);if(P.unit)return ma(sa(P.unit),P.unit);for(const Ba of P.units){const La=sa(Ba);if(1<=
Math.abs(La))return ma(La,Ba)}return ma(a>h?-0:0,P.units[P.units.length-1])}function ib(a){let h={};0<a.length&&"object"===typeof a[a.length-1]?(h=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[h,a]}function Ab(a){if(cb.isDateTime(a))return a;if(a&&a.valueOf&&G(a.valueOf()))return cb.fromJSDate(a);if(a&&"object"===typeof a)return cb.fromObject(a);throw new qa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Bb extends Error{}class ab extends Bb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}
class hc extends Bb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class X extends Bb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class ha extends Bb{}class ba extends Bb{constructor(a){super(`Invalid unit ${a}`)}}class qa extends Bb{}class Ea extends Bb{constructor(){super("Zone is an abstract class")}}const Ga={year:"numeric",month:"numeric",day:"numeric"},Ra={year:"numeric",month:"short",day:"numeric"},Ya={year:"numeric",month:"short",day:"numeric",weekday:"short"},
mb={year:"numeric",month:"long",day:"numeric"},lb={year:"numeric",month:"long",day:"numeric",weekday:"long"},kb={hour:"numeric",minute:"numeric"},xb={hour:"numeric",minute:"numeric",second:"numeric"},Ib={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sd={hour:"numeric",minute:"numeric",hourCycle:"h23"},td={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},wd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},yd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},zd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
ve={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ad={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Bd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Dd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Ea;}get name(){throw new Ea;}get ianaName(){return this.name}get isUniversal(){throw new Ea;}offsetName(a,h){throw new Ea;}formatOffset(a,h){throw new Ea;}offset(a){throw new Ea;}equals(a){throw new Ea;}get isValid(){throw new Ea;}}let Qc=null;class nc extends ic{static get instance(){null===Qc&&(Qc=new nc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:h,locale:P}){return L(a,h,P)}formatOffset(a,h){return A(this.offset(a),h)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const we={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Tb extends ic{static create(a){pc[a]||(pc[a]=new Tb(a));return pc[a]}static resetCache(){pc={};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(h){return!1}}constructor(a){super();this.zoneName=a;this.valid=Tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:h,locale:P}){return L(a,h,P,this.name)}formatOffset(a,h){return A(this.offset(a),h)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var h=this.name;oc[h]||(oc[h]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:h,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));h=oc[h];if(h.formatToParts){h=h.formatToParts(a);var P=[];for(let Za=0;Za<h.length;Za++){const {type:$a,value:eb}=h[Za],va=we[$a];"era"===$a?P[va]=eb:m(va)||(P[va]=parseInt(eb,10))}h=P}else{h=h.format(a).replace(/\u200E/g,"");h=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(h);const [,Za,$a,eb,va,$b,v,D]=h;h=[eb,Za,$a,va,$b,v,D]}let [fa,ma,sa,Ba,La,Pa,f]=h;"BC"===Ba&&(fa=-Math.abs(fa)+1);h=K({year:fa,month:ma,day:sa,hour:24===La?0:La,minute:Pa,second:f,millisecond:0});
a=+a;P=a%1E3;return(h-(a-(0<=P?P:1E3+P)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Hc={},Ic={},Jc={},qc=null;class xe{constructor(a,h,P){this.padTo=P.padTo||0;this.floor=P.floor||!1;const {padTo:fa,floor:ma,...sa}=P;if(!h||0<Object.keys(sa).length)h={useGrouping:!1,...P},0<P.padTo&&(h.minimumIntegerDigits=P.padTo),this.inf=T(a,h)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):F(a,3);return z(a,
this.padTo)}}class ye{constructor(a,h,P){this.opts=P;var fa=void 0;a.zone.isUniversal?(fa=a.offset/60*-1,fa=0<=fa?`Etc/GMT+${fa}`:`Etc/GMT${fa}`,0!==a.offset&&Tb.create(fa).valid?this.dt=a:(fa="UTC",this.dt=P.timeZoneName?a:0===a.offset?a:cb.fromMillis(a.ts+6E4*a.offset))):"system"===a.zone.type?this.dt=a:(this.dt=a,fa=a.zone.name);a={...this.opts};a.timeZone=a.timeZone||fa;this.dtf=ja(h,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class ze{constructor(a,h,P){this.opts={style:"long",...P};!h&&M()&&(this.rtf=I(a,P))}format(a,h){return this.rtf?this.rtf.format(a,h):ua(h,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,h){return this.rtf?this.rtf.formatToParts(a,h):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,h,P,fa=!1){a=a||yb.defaultLocale;var ma;(ma=a)||(fa?fa="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),fa=qc),
ma=fa);return new rb(ma,h||yb.defaultNumberingSystem,P||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:h,outputCalendar:P}={}){return rb.create(a,h,P)}constructor(a,h,P,fa){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var sa=[a];else{try{sa=ja(a).resolvedOptions();var Ba=a}catch(eb){Ba=a.substring(0,ma),sa=ja(Ba).resolvedOptions()}const {numberingSystem:Za,calendar:$a}=sa;sa=[Ba,Za,$a]}const [La,
Pa,f]=sa;this.locale=La;this.numberingSystem=h||Pa||null;this.outputCalendar=P||f||null;h=this.locale;P=this.numberingSystem;if((sa=this.outputCalendar)||P)h.includes("-u-")||(h+="-u"),sa&&(h+=`-ca-${sa}`),P&&(h+=`-nu-${P}`);this.intl=h;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=fa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==
this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),h=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&h?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||
this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,h=!1,P=!0){return t(this,a,P,u,()=>{const fa=h?{month:a,day:"numeric"}:{month:a},ma=h?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=N(sa=>this.extract(sa,fa,"month")));return this.monthsCache[ma][a]})}weekdays(a,h=!1,
P=!0){return t(this,a,P,Z,()=>{const fa=h?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=h?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=E(sa=>this.extract(sa,fa,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return t(this,void 0,a,()=>Ed,()=>{if(!this.meridiemCache){const h={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[cb.utc(2016,11,13,9),cb.utc(2016,11,13,19)].map(P=>this.extract(P,h,"dayperiod"))}return this.meridiemCache})}eras(a,
h=!0){return t(this,a,h,ka,()=>{const P={era:a};this.eraCache[a]||(this.eraCache[a]=[cb.utc(-40,1,1),cb.utc(2017,1,1)].map(fa=>this.extract(fa,P,"era")));return this.eraCache[a]})}extract(a,h,P){return(a=this.dtFormatter(a,h).formatToParts().find(fa=>fa.type.toLowerCase()===P))?a.value:null}numberFormatter(a={}){return new xe(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,h={}){return new ye(a,this.intl,h)}relFormatter(a={}){return new ze(this.intl,this.isEnglish(),a)}listFormatter(a=
{}){return d(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(Q(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${A(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${A(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,h){return A(this.fixed,h)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class hd extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Fd=()=>Date.now(),Gd="system",Hd=null,Sc=null,Id=null,Jd=60,Kd;class yb{static get now(){return Fd}static set now(a){Fd=a}static set defaultZone(a){Gd=a}static get defaultZone(){return k(Gd,nc.instance)}static get defaultLocale(){return Hd}static set defaultLocale(a){Hd=a}static get defaultNumberingSystem(){return Sc}static set defaultNumberingSystem(a){Sc=
a}static get defaultOutputCalendar(){return Id}static set defaultOutputCalendar(a){Id=a}static get twoDigitCutoffYear(){return Jd}static set twoDigitCutoffYear(a){Jd=a%100}static get throwOnInvalid(){return Kd}static set throwOnInvalid(a){Kd=a}static resetCaches(){rb.resetCache();Tb.resetCache()}}const kd="January February March April May June July August September October November December".split(" "),jd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),md=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ld="Mon Tue Wed Thu Fri Sat Sun".split(" "),oe="MTWTFSS".split(""),Ed=["AM","PM"],qe=["Before Christ","Anno Domini"],pe=["BC","AD"],Kc=["B","A"],Tc={D:Ga,DD:Ra,DDD:mb,DDDD:lb,t:kb,tt:xb,ttt:Ib,tttt:rd,T:sd,TT:td,TTT:ud,TTTT:vd,f:wd,ff:yd,fff:Ad,ffff:Cd,F:xd,FF:zd,FFF:Bd,FFFF:Dd};class Fb{static create(a,h={}){return new Fb(a,h)}static parseFormat(a){let h=null,P="",fa=!1;const ma=[];for(let sa=0;sa<a.length;sa++){const Ba=a.charAt(sa);
"'"===Ba?(0<P.length&&ma.push({literal:fa,val:P}),h=null,P="",fa=!fa):fa?P+=Ba:Ba===h?P+=Ba:(0<P.length&&ma.push({literal:!1,val:P}),h=P=Ba)}0<P.length&&ma.push({literal:fa,val:P});return ma}static macroTokenToFormatOpts(a){return Tc[a]}constructor(a,h){this.opts=h;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,h){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...h}).format()}formatDateTime(a,h={}){return this.loc.dtFormatter(a,
{...this.opts,...h}).format()}formatDateTimeParts(a,h={}){return this.loc.dtFormatter(a,{...this.opts,...h}).formatToParts()}formatInterval(a,h={}){return this.loc.dtFormatter(a.start,{...this.opts,...h}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,h={}){return this.loc.dtFormatter(a,{...this.opts,...h}).resolvedOptions()}num(a,h=0){if(this.opts.forceSimple)return z(a,h);const P={...this.opts};0<h&&(P.padTo=h);return this.loc.numberFormatter(P).format(a)}formatDateTimeFromString(a,
h){const P="en"===this.loc.listingMode(),fa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(Za,$a)=>this.loc.extract(a,Za,$a),sa=Za=>a.isOffsetFixed&&0===a.offset&&Za.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Za.format):"",Ba=(Za,$a)=>P?u(Za)[a.month-1]:ma($a?{month:Za}:{month:Za,day:"numeric"},"month"),La=(Za,$a)=>P?Z(Za)[a.weekday-1]:ma($a?{weekday:Za}:{weekday:Za,month:"long",day:"numeric"},"weekday"),Pa=Za=>{const $a=Fb.macroTokenToFormatOpts(Za);return $a?this.formatWithSystemDefault(a,
$a):Za},f=Za=>P?ka(Za)[0>a.year?0:1]:ma({era:Za},"era");return za(Fb.parseFormat(h),Za=>{switch(Za){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%
12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return sa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return sa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return sa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return P?Ed[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return fa?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return fa?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return La("short",!0);case "cccc":return La("long",!0);case "ccccc":return La("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return La("short",!1);case "EEEE":return La("long",!1);case "EEEEE":return La("narrow",!1);case "L":return fa?
ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return fa?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Ba("short",!0);case "LLLL":return Ba("long",!0);case "LLLLL":return Ba("narrow",!0);case "M":return fa?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return fa?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Ba("short",!1);case "MMMM":return Ba("long",!1);case "MMMMM":return Ba("narrow",!1);case "y":return fa?
ma({year:"numeric"},"year"):this.num(a.year);case "yy":return fa?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return fa?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return f("short");case "GG":return f("long");case "GGGGG":return f("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Pa(Za)}})}formatDurationFromString(a,h){const P=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};h=Fb.parseFormat(h);const fa=h.reduce((ma,{literal:sa,val:Ba})=>sa?ma:ma.concat(Ba),[]);a=a.shiftTo(...fa.map(P).filter(ma=>ma));return za(h,(ma=>sa=>{const Ba=P(sa);return Ba?this.num(ma.get(Ba),sa.length):sa})(a))}}class Qb{constructor(a,h){this.reason=a;this.explanation=h}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ld=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Md=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Uc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nd=RegExp(`${Uc.source}${`(?:${Md.source}?(?:\\[(${Ld.source})\\])?)?`}`),Vc=RegExp(`(?:T${Nd.source})?`),Od=Ua("weekYear","weekNumber","weekDay"),Ae=Ua("year","ordinal"),Wc=RegExp(`${Uc.source} ?(?:${Md.source}|(${Ld.source}))?`),Pd=RegExp(`(?: ${Wc.source})?`),Be=RegExp(`^T?${Uc.source}$`),Ce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},De=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Ee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,He=Ha(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vc),Ie=Ha(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vc),Je=Ha(/(\d{4})-?(\d{3})/,Vc),Ke=Ha(Nd),Qd=Ka(function(a,h){return[{year:Qa(a,h),month:Qa(a,h+1,1),day:Qa(a,h+2,1)},null,h+3]},Sa,bb,Xa),Le=Ka(Od,Sa,bb,Xa),Me=Ka(Ae,Sa,bb,Xa),Ne=Ka(Sa,bb,Xa),Oe=Ka(Sa),Pe=Ha(/(\d{4})-(\d\d)-(\d\d)/,Pd),Qe=Ha(Wc),Re=Ka(Sa,bb,Xa),Rd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Se={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Rd},Te={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Rd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),se=cc.slice(0).reverse();
class hb{constructor(a){const h="longterm"===a.conversionAccuracy||!1;let P=h?Te:Se;a.matrix&&(P=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=h?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=P;this.isLuxonDuration=!0}static fromMillis(a,h){return hb.fromObject({milliseconds:a},h)}static fromObject(a,h={}){if(null==a||"object"!==typeof a)throw new qa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new hb({values:H(a,
hb.normalizeUnit),loc:rb.fromObject(h),conversionAccuracy:h.conversionAccuracy,matrix:h.matrix})}static fromDurationLike(a){if(G(a))return hb.fromMillis(a);if(hb.isDuration(a))return a;if("object"===typeof a)return hb.fromObject(a);throw new qa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,h){const [P]=Ia(a,[Ce,Aa]);return P?hb.fromObject(P,h):hb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,h){const [P]=Ia(a,[Be,Oe]);return P?
hb.fromObject(P,h):hb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new X(a);return new hb({invalid:a})}static normalizeUnit(a){const h={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!h)throw new ba(a);return h}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,h={}){h={...h,floor:!1!==h.round&&!1!==h.floor};return this.isValid?Fb.create(this.loc,h).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const h=cc.map(P=>{const fa=this.values[P];return m(fa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:P.slice(0,-1)}).format(fa)}).filter(P=>P);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(h)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=F(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var h=this.toMillis();if(0>h||864E5<=h)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
h=this.shiftTo("hours","minutes","seconds","milliseconds");let P="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===h.seconds&&0===h.milliseconds||(P+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===h.milliseconds||(P+=".SSS"));h=h.toFormat(P);a.includePrefix&&(h="T"+h);return h}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);const h=
{};for(const P of cc)if(e(a.values,P)||e(this.values,P))h[P]=a.get(P)+this.get(P);return V(this,{values:h},!0)}minus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const h={};for(const P of Object.keys(this.values))h[P]=R(a(this.values[P],P));return V(this,{values:h},!0)}get(a){return this[hb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...H(a,hb.normalizeUnit)};return V(this,{values:a})}reconfigure({locale:a,
numberingSystem:h,conversionAccuracy:P,matrix:fa}={}){a={loc:this.loc.clone({locale:a,numberingSystem:h}),matrix:fa,conversionAccuracy:P};return V(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ta(this.matrix,a);return V(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const h={};for(const [P,fa]of Object.entries(a))0!==fa&&(h[P]=fa);return V(this,{values:h},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(sa=>hb.normalizeUnit(sa));const h={},P={},fa=this.toObject();let ma;for(const sa of cc)if(0<=a.indexOf(sa)){ma=sa;let Ba=0;for(const Pa in P)Ba+=this.matrix[Pa][sa]*P[Pa],P[Pa]=0;G(fa[sa])&&(Ba+=fa[sa]);const La=Math.trunc(Ba);h[sa]=La;P[sa]=(1E3*Ba-1E3*La)/1E3;for(const Pa in fa)cc.indexOf(Pa)>cc.indexOf(sa)&&la(this.matrix,fa,Pa,h,sa)}else G(fa[sa])&&(P[sa]=fa[sa]);for(const sa in P)0!==P[sa]&&(h[ma]+=sa===ma?P[sa]:P[sa]/this.matrix[ma][sa]);return V(this,{values:h},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const h of Object.keys(this.values))a[h]=0===this.values[h]?0:-this.values[h];return V(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const fa of cc){var h=this.values[fa];var P=a.values[fa];h=void 0===h||0===h?void 0===P||0===P:h===P;if(!h)return!1}return!0}}class wb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new hc(a);return new wb({invalid:a})}static fromDateTimes(a,
h){a=Ab(a);h=Ab(h);var P=a&&a.isValid?h&&h.isValid?h<a?wb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${h.toISO()}`):null:wb.invalid("missing or invalid end"):wb.invalid("missing or invalid start");return null==P?new wb({start:a,end:h}):P}static after(a,h){h=hb.fromDurationLike(h);a=Ab(a);return wb.fromDateTimes(a,a.plus(h))}static before(a,h){h=hb.fromDurationLike(h);a=Ab(a);return wb.fromDateTimes(a.minus(h),a)}static fromISO(a,
h){const [P,fa]=(a||"").split("/",2);if(P&&fa){let Ba;try{var ma=cb.fromISO(P,h);Ba=ma.isValid}catch(Pa){Ba=!1}let La;try{var sa=cb.fromISO(fa,h);La=sa.isValid}catch(Pa){La=!1}if(Ba&&La)return wb.fromDateTimes(ma,sa);if(Ba){if(sa=hb.fromISO(fa,h),sa.isValid)return wb.after(ma,sa)}else if(La&&(ma=hb.fromISO(P,h),ma.isValid))return wb.before(sa,ma)}return wb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const h=this.start.startOf(a),P=this.end.startOf(a);return Math.floor(P.diff(h,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:h}={}){return this.isValid?wb.fromDateTimes(a||this.s,h||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ab).filter(sa=>this.contains(sa)).sort();const h=[];let {s:P}=this,fa=0;for(;P<this.e;){var ma=a[fa]||this.e;ma=+ma>+this.e?this.e:ma;
h.push(wb.fromDateTimes(P,ma));P=ma;fa+=1}return h}splitBy(a){a=hb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:h}=this,P=1;const fa=[];for(;h<this.e;){var ma=this.start.plus(a.mapUnits(sa=>sa*P));ma=+ma>+this.e?this.e:ma;fa.push(wb.fromDateTimes(h,ma));h=ma;P+=1}return fa}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?
+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const h=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return h>=a?null:wb.fromDateTimes(h,a)}union(a){return this.isValid?wb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [h,P]=a.sort((fa,ma)=>fa.s-ma.s).reduce(([fa,ma],sa)=>ma?ma.overlaps(sa)||ma.abutsStart(sa)?
[fa,ma.union(sa)]:[fa.concat([ma]),sa]:[fa,sa],[[],null]);P&&h.push(P);return h}static xor(a){let h=null,P=0;const fa=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,sa)=>ma.time-sa.time);for(const ma of a)P+="s"===ma.type?1:-1,1===P?h=ma.time:(h&&+h!==+ma.time&&fa.push(wb.fromDateTimes(h,ma.time)),h=null);return wb.merge(fa)}difference(...a){return wb.xor([this].concat(a)).map(h=>this.intersection(h)).filter(h=>h&&!h.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Ga,h={}){return this.isValid?Fb.create(this.s.loc.clone(h),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:h=" \u2013 "}=
{}){return this.isValid?`${this.s.toFormat(a)}${h}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,h){return this.isValid?this.e.diff(this.s,a,h):hb.invalid(this.invalidReason)}mapEndpoints(a){return wb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const h=cb.now().setZone(a).set({month:12});return!a.isUniversal&&h.offset!==h.set({month:6}).offset}static isValidIANAZone(a){return Tb.isValidZone(a)}static normalizeZone(a){return k(a,yb.defaultZone)}static months(a=
"long",{locale:h=null,numberingSystem:P=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(h,P,ma)).months(a)}static monthsFormat(a="long",{locale:h=null,numberingSystem:P=null,locObj:fa=null,outputCalendar:ma="gregory"}={}){return(fa||rb.create(h,P,ma)).months(a,!0)}static weekdays(a="long",{locale:h=null,numberingSystem:P=null,locObj:fa=null}={}){return(fa||rb.create(h,P,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:h=null,numberingSystem:P=null,locObj:fa=null}=
{}){return(fa||rb.create(h,P,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:h=null}={}){return rb.create(h,null,"gregory").eras(a)}static features(){return{relative:M()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},nd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},te=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),od=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(od,"g"),ue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],qd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pd="year month day hour minute second millisecond".split(" "),We="weekYear weekNumber weekday hour minute second millisecond".split(" "),Xe="year ordinal hour minute second millisecond".split(" ");
class cb{constructor(a){const h=a.zone||yb.defaultZone;let P=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(h.isValid?null:Gb(h));this.ts=m(a.ts)?yb.now():a.ts;let fa=null;var ma=null;P||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(h)?[fa,ma]=[a.old.c,a.old.o]:(ma=h.offset(this.ts),fa=oa(this.ts,ma),fa=(P=Number.isNaN(fa.year)?new Qb("invalid input"):null)?null:fa,ma=P?null:ma));this._zone=h;this.loc=a.loc||rb.create();this.invalid=P;this.weekData=null;this.c=fa;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new cb({})}static local(){const [a,h]=ib(arguments),[P,fa,ma,sa,Ba,La,Pa]=h;return Hb({year:P,month:fa,day:ma,hour:sa,minute:Ba,second:La,millisecond:Pa},a)}static utc(){const [a,h]=ib(arguments),[P,fa,ma,sa,Ba,La,Pa]=h;a.zone=Eb.utcInstance;return Hb({year:P,month:fa,day:ma,hour:sa,minute:Ba,second:La,millisecond:Pa},a)}static fromJSDate(a,h={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return cb.invalid("invalid input");const P=
k(h.zone,yb.defaultZone);return P.isValid?new cb({ts:a,zone:P,loc:rb.fromObject(h)}):cb.invalid(Gb(P))}static fromMillis(a,h={}){if(G(a))return-864E13>a||864E13<a?cb.invalid("Timestamp out of range"):new cb({ts:a,zone:k(h.zone,yb.defaultZone),loc:rb.fromObject(h)});throw new qa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,h={}){if(G(a))return new cb({ts:1E3*a,zone:k(h.zone,yb.defaultZone),loc:rb.fromObject(h)});throw new qa("fromSeconds requires a numerical input");
}static fromObject(a,h={}){a=a||{};var P=k(h.zone,yb.defaultZone);if(!P.isValid)return cb.invalid(Gb(P));var fa=yb.now();const ma=m(h.specificOffset)?P.offset(fa):h.specificOffset,sa=H(a,kc);var Ba=!m(sa.ordinal),La=!m(sa.year),Pa=!m(sa.month)||!m(sa.day);La=La||Pa;var f=sa.weekYear||sa.weekNumber;h=rb.fromObject(h);if((La||Ba)&&f)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Pa&&Ba)throw new ha("Can't mix ordinal dates with month/day");Pa=f||sa.weekday&&!La;
let Za=oa(fa,ma);Pa?(fa=We,f=Ue,Za=vb(Za)):Ba?(fa=Xe,f=Ve,Za=qb(Za)):(fa=pd,f=qd);let $a=!1;for(var eb of fa)m(sa[eb])?sa[eb]=$a?f[eb]:Za[eb]:$a=!0;Pa?(eb=Y(sa.weekYear),fa=q(sa.weekNumber,1,U(sa.weekYear)),f=q(sa.weekday,1,7),eb=eb?fa?f?!1:Ja("weekday",sa.weekday):Ja("week",sa.week):Ja("weekYear",sa.weekYear)):Ba?(eb=Y(sa.year),fa=q(sa.ordinal,1,r(sa.year)?366:365),eb=eb?fa?!1:Ja("ordinal",sa.ordinal):Ja("year",sa.year)):eb=jb(sa);if(eb=eb||gb(sa))return cb.invalid(eb);Ba=Pa?ub(sa):Ba?b(sa):sa;const [va,
$b]=Yb(Ba,ma,P);P=new cb({ts:va,zone:P,o:$b,loc:h});return sa.weekday&&La&&a.weekday!==P.weekday?cb.invalid("mismatched weekday",`you can't specify both a weekday of ${sa.weekday} and a date of ${P.toISO()}`):P}static fromISO(a,h={}){const [P,fa]=Ia(a,[He,Qd],[Ie,Le],[Je,Me],[Ke,Ne]);return zb(P,fa,h,"ISO 8601",a)}static fromRFC2822(a,h={}){const [P,fa]=Ia(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[De,Fa]);return zb(P,fa,h,"RFC 2822",a)}static fromHTTP(a,h={}){const [P,fa]=
Ia(a,[Ee,c],[Fe,c],[Ge,p]);return zb(P,fa,h,"HTTP",h)}static fromFormat(a,h,P={}){if(m(a)||m(h))throw new qa("fromFormat requires an input string and a format");const {locale:fa=null,numberingSystem:ma=null}=P,sa=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0}),{result:Ba,zone:La,specificOffset:Pa,invalidReason:f}=Ta(sa,a,h),[Za,$a,eb,va]=[Ba,La,Pa,f];return va?cb.invalid(va):zb(Za,$a,P,`format ${h}`,a,eb)}static fromString(a,h,P={}){return cb.fromFormat(a,h,P)}static fromSQL(a,h={}){const [P,
fa]=Ia(a,[Pe,Qd],[Qe,Re]);return zb(P,fa,h,"SQL",a)}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new ab(a);return new cb({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,h={}){return(a=Va(a,rb.fromObject(h)))?a.map(P=>P?P.val:null).join(""):null}static expandFormat(a,h={}){return Ma(Fb.parseFormat(a),rb.fromObject(h)).map(P=>P.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pb(this).weekYear:NaN}get weekNumber(){return this.isValid?Pb(this).weekNumber:NaN}get weekday(){return this.isValid?Pb(this).weekday:
NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return r(this.year)}get daysInMonth(){return C(this.year,this.month)}get daysInYear(){return this.isValid?
r(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?U(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:h,numberingSystem:P,calendar:fa}=Fb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:h,numberingSystem:P,outputCalendar:fa}}toUTC(a=0,h={}){return this.setZone(Eb.instance(a),h)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:h=!1,keepCalendarTime:P=!1}={}){a=k(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let fa=
this.ts;if(h||P)h=a.offset(this.ts),P=this.toObject(),[fa]=Yb(P,h,a);return nb(this,{ts:fa,zone:a})}return cb.invalid(Gb(a))}reconfigure({locale:a,numberingSystem:h,outputCalendar:P}={}){a=this.loc.clone({locale:a,numberingSystem:h,outputCalendar:P});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=H(a,kc);var h=!m(a.weekYear)||!m(a.weekNumber)||!m(a.weekday);const P=!m(a.ordinal),fa=!m(a.year),ma=!m(a.month)||!m(a.day),sa=a.weekYear||
a.weekNumber;if((fa||ma||P)&&sa)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&P)throw new ha("Can't mix ordinal dates with month/day");h?h=ub({...vb(this.c),...a}):m(a.ordinal)?(h={...this.toObject(),...a},m(a.day)&&(h.day=Math.min(C(h.year,h.month),h.day))):h=b({...qb(this.c),...a});const [Ba,La]=Yb(h,this.o,this.zone);return nb(this,{ts:Ba,o:La})}plus(a){if(!this.isValid)return this;a=hb.fromDurationLike(a);return nb(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=hb.fromDurationLike(a).negate();return nb(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const h={};a=hb.normalizeUnit(a);switch(a){case "years":h.month=1;case "quarters":case "months":h.day=1;case "weeks":case "days":h.hour=0;case "hours":h.minute=0;case "minutes":h.second=0;case "seconds":h.millisecond=0}"weeks"===a&&(h.weekday=1);"quarters"===a&&(h.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(h)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
h={}){return this.isValid?Fb.create(this.loc.redefaultToEN(h)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ga,h={}){return this.isValid?Fb.create(this.loc.clone(h),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Fb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:h=!1,suppressMilliseconds:P=!1,includeOffset:fa=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let sa=
Zb(this,a);return sa=sa+"T"+Xb(this,a,h,P,fa,ma)}toISODate({format:a="extended"}={}){return this.isValid?Zb(this,"extended"===a):null}toISOWeekDate(){return Kb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:h=!1,includeOffset:P=!0,includePrefix:fa=!1,extendedZone:ma=!1,format:sa="extended"}={}){return this.isValid?(fa?"T":"")+Xb(this,"extended"===sa,h,a,P,ma):null}toRFC2822(){return Kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Zb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:h=!1,includeOffsetSpace:P=!0}={}){let fa="HH:mm:ss.SSS";if(h||a)P&&(fa+=" "),h?fa+="z":a&&(fa+="ZZ");return Kb(this,fa,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const h={...this.c};a.includeConfig&&(h.outputCalendar=this.outputCalendar,h.numberingSystem=this.loc.numberingSystem,h.locale=this.loc.locale);return h}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,h="milliseconds",P={}){if(!this.isValid||!a.isValid)return hb.invalid("created by diffing an invalid DateTime");P={locale:this.locale,numberingSystem:this.numberingSystem,...P};
const fa=(Array.isArray(h)?h:[h]).map(hb.normalizeUnit);h=a.valueOf()>this.valueOf();a=da(h?this:a,h?a:this,fa,P);return h?a.negate():a}diffNow(a="milliseconds",h={}){return this.diff(cb.now(),a,h)}until(a){return this.isValid?wb.fromDateTimes(this,a):this}hasSame(a,h){if(!this.isValid)return!1;const P=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(h)<=P&&P<=a.endOf(h)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const h=a.base||cb.fromObject({},{zone:this.zone}),P=a.padding?this<h?-a.padding:a.padding:0;let fa="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(fa=a.unit,ma=void 0);return Rb(h,this.plus(P),{...a,numeric:"always",units:fa,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Rb(a.base||cb.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(cb.isDateTime))throw new qa("min requires all arguments be DateTimes");
return n(a,h=>h.valueOf(),Math.min)}static max(...a){if(!a.every(cb.isDateTime))throw new qa("max requires all arguments be DateTimes");return n(a,h=>h.valueOf(),Math.max)}static fromFormatExplain(a,h,P={}){const {locale:fa=null,numberingSystem:ma=null}=P;P=rb.fromOpts({locale:fa,numberingSystem:ma,defaultToEN:!0});return Ta(P,a,h)}static fromStringExplain(a,h,P={}){return cb.fromFormatExplain(a,h,P)}static get DATE_SHORT(){return Ga}static get DATE_MED(){return Ra}static get DATE_MED_WITH_WEEKDAY(){return Ya}static get DATE_FULL(){return mb}static get DATE_HUGE(){return lb}static get TIME_SIMPLE(){return kb}static get TIME_WITH_SECONDS(){return xb}static get TIME_WITH_SHORT_OFFSET(){return Ib}static get TIME_WITH_LONG_OFFSET(){return rd}static get TIME_24_SIMPLE(){return sd}static get TIME_24_WITH_SECONDS(){return td}static get TIME_24_WITH_SHORT_OFFSET(){return ud}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return wd}static get DATETIME_SHORT_WITH_SECONDS(){return xd}static get DATETIME_MED(){return yd}static get DATETIME_MED_WITH_SECONDS(){return zd}static get DATETIME_MED_WITH_WEEKDAY(){return ve}static get DATETIME_FULL(){return Ad}static get DATETIME_FULL_WITH_SECONDS(){return Bd}static get DATETIME_HUGE(){return Cd}static get DATETIME_HUGE_WITH_SECONDS(){return Dd}}
g.DateTime=cb;g.Duration=hb;g.FixedOffsetZone=Eb;g.IANAZone=Tb;g.Info=lc;g.Interval=wb;g.SystemZone=nc;g.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(g,d){var ja={};(function(I){(function(N,E){I.exports&&(I.exports=E())})(d.commonjsGlobal,function(){function N(t,k,m,G){t=Error.call(this,t);Object.setPrototypeOf&&Object.setPrototypeOf(t,N.prototype);t.expected=k;t.found=m;t.location=G;t.name="SyntaxError";return t}function E(t,k,m){m=
m||" ";if(t.length>k)return t;k-=t.length;m+=m.repeat(k);return t+m.slice(0,k)}(function(t,k){function m(){this.constructor=t}m.prototype=k.prototype;t.prototype=new m})(N,Error);N.prototype.format=function(t){var k="Error: "+this.message;if(this.location){var m=null,G;for(G=0;G<t.length;G++)if(t[G].source===this.location.source){m=t[G].text.split(/\r\n|\n|\r/g);break}t=this.location.start;G=this.location.source+":"+t.line+":"+t.column;if(m){var Y=this.location.end,M=E("",t.line.toString().length,
" ");m=m[t.line-1];Y=(t.line===Y.line?Y.column:m.length+1)-t.column||1;k+="\n --\x3e "+G+"\n"+M+" |\n"+t.line+" | "+m+"\n"+M+" | "+E("",t.column-1," ")+E("",Y,"^")}else k+="\n at "+G}return k};N.buildMessage=function(t,k){function m(w){return w.charCodeAt(0).toString(16).toUpperCase()}function G(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+m(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(e){return"\\x"+m(e)})}function Y(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+m(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+m(e)})}function M(w){return n[w.type](w)}var n={literal:function(w){return'"'+G(w.text)+'"'},class:function(w){var e=w.parts.map(function(q){return Array.isArray(q)?Y(q[0])+
"-"+Y(q[1]):Y(q)});return"["+(w.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};return"Expected "+function(w){w=w.map(M);var e,q;w.sort();if(0<w.length){for(q=e=1;e<w.length;e++)w[e-1]!==w[e]&&(w[q]=w[e],q++);w.length=q}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}(t)+" but "+(k?'"'+G(k)+'"':"end of input")+" found."};
return{SyntaxError:N,parse:function(t,k){function m(v,D){return{type:"literal",text:v,ignoreCase:D}}function G(v,D,ca){return{type:"class",parts:v,inverted:D,ignoreCase:ca}}function Y(v){var D=Za[v],ca;if(!D){for(ca=v-1;!Za[ca];)ca--;D=Za[ca];for(D={line:D.line,column:D.column};ca<v;)10===t.charCodeAt(ca)?(D.line++,D.column=1):D.column++,ca++;Za[v]=D}return D}function M(v,D){var ca=Y(v),ya=Y(D);return{source:jb,start:{offset:v,line:ca.line,column:ca.column},end:{offset:D,line:ya.line,column:ya.column}}}
function n(v){f<$a||(f>$a&&($a=f,eb=[]),eb.push(v))}function w(){var v=f;xa();var D=q();D!==b?(xa(),v=D):(f=v,v=b);return v}function e(){var v=f;var D=q();if(D!==b){v=[];var ca=f;var ya=xa();var Na=Va();if(Na!==b){var db=xa();var fb=q();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)v.push(ca),ca=f,ya=xa(),Na=Va(),Na!==b?(db=xa(),fb=q(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)):(f=ca,ca=b);ca={type:"expression-list"};D=[D];for(ya=0;ya<v.length;ya++)D.push(v[ya][3]);ca.value=D;v=
ca}else f=v,v=b;return v}function q(){var v=f;var D=z();if(D!==b){v=[];var ca=f;var ya=xa();var Na=la();if(Na!==b){var db=xa();var fb=z();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)v.push(ca),ca=f,ya=xa(),Na=la(),Na!==b?(db=xa(),fb=z(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)):(f=ca,ca=b);v=qb(D,v)}else f=v,v=b;return v}function z(){var v=f;var D=y();if(D!==b){v=[];var ca=f;var ya=xa();var Na=V();if(Na!==b){var db=xa();var fb=y();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=
ca,ca=b;for(;ca!==b;)v.push(ca),ca=f,ya=xa(),Na=V(),Na!==b?(db=xa(),fb=y(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)):(f=ca,ca=b);v=qb(D,v)}else f=v,v=b;return v}function y(){var v=f;var D=p();if(D===b){D=f;if(33===t.charCodeAt(f)){var ca=Pb;f++}else ca=b,0===va&&n(jd);if(ca!==b){var ya=f;va++;if(61===t.charCodeAt(f)){var Na=nb;f++}else Na=b,0===va&&n(id);va--;Na===b?ya=void 0:(f=ya,ya=b);ya!==b?D=ca=[ca,ya]:(f=D,D=b)}else f=D,D=b}D!==b?(ca=xa(),ya=y(),ya!==b?v={type:"unary-expression",operator:"NOT",
expr:ya}:(f=v,v=b)):(f=v,v=b);if(v===b){D=f;v=r();if(v!==b){xa();D=[];ca=f;ya=xa();Na=B();if(Na!==b){var db=xa();var fb=r();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=ca,ca=b;if(ca!==b)for(;ca!==b;)D.push(ca),ca=f,ya=xa(),Na=B(),Na!==b?(db=xa(),fb=r(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)):(f=ca,ca=b);else D=b;D!==b&&(D={type:"arithmetic",tail:D});D===b&&(D=f,ca=F(),ca!==b?(xa(),ya=Ja(),ya!==b?(xa(),ya=e(),ya!==b?(xa(),Na=Wa(),Na!==b?D={op:ca,right:ya}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b)):(f=D,D=
b),D===b&&(D=f,ca=F(),ca!==b?(xa(),ya=Ja(),ya!==b?(xa(),ya=Wa(),ya!==b?D={op:ca,right:{type:"expression-list",value:[]}}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b),D===b&&(D=f,ca=F(),ca!==b?(xa(),ya=A(),ya!==b?D={op:ca,right:ya}:(f=D,D=b)):(f=D,D=b))),D===b&&(D=f,Na=p(),Na!==b?(xa(),ca=ta(),ca!==b?(xa(),ya=r(),ya!==b?(xa(),db=V(),db!==b?(xa(),Na=r(),Na!==b?D={op:"NOT"+ca,right:{type:"expression-list",value:[ya,Na]}}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b)):(f=D,D=b)):(f=D,D=b),D===b&&(D=f,Na=ta(),Na!==b?(xa(),ca=r(),
ca!==b?(xa(),ya=V(),ya!==b?(xa(),db=r(),db!==b?D={op:Na,right:{type:"expression-list",value:[ca,db]}}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b)):(f=D,D=b)),D===b&&(D=f,ca=Fa(),ca!==b?(xa(),ya=p(),ya!==b?(xa(),ya=r(),ya!==b?D={op:ca+"NOT",right:ya}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b),D===b&&(D=f,ca=Fa(),ca!==b?(xa(),ya=r(),ya!==b?D={op:ca,right:ya}:(f=D,D=b)):(f=D,D=b)),D===b&&(D=f,ca=S(),ca!==b?(xa(),ya=za(),ya!==b?(xa(),Na=f,t.substr(f,6).toLowerCase()===Ra?(db=t.substr(f,6),f+=6):(db=b,0===va&&n(Ke)),db!==b?
(db=f,va++,fb=R(),va--,fb===b?db=void 0:(f=db,db=b),db!==b?Na="ESCAPE":(f=Na,Na=b)):(f=Na,Na=b),Na!==b?(xa(),Na=Ha(),Na!==b?D={op:ca,right:ya,escape:Na.value}:(f=D,D=b)):(f=D,D=b)):(f=D,D=b)):(f=D,D=b),D===b&&(D=f,ca=S(),ca!==b?(xa(),ya=za(),ya!==b?D={op:ca,right:ya,escape:""}:(f=D,D=b)):(f=D,D=b))))));D===b&&(D=null);""==D||void 0==D||null==D?D=v:(ca=null,D=ca="arithmetic"==D.type?qb(v,D.tail):ub(D.op,v,D.right,D.escape))}else f=D,D=b;v=D}return v}function B(){if(t.substr(f,2)===Wb){var v=Wb;f+=
2}else v=b,0===va&&n(md);v===b&&(62===t.charCodeAt(f)?(v=oa,f++):(v=b,0===va&&n(ld)),v===b&&(t.substr(f,2)===Yb?(v=Yb,f+=2):(v=b,0===va&&n(oe)),v===b&&(t.substr(f,2)===Sb?(v=Sb,f+=2):(v=b,0===va&&n(Ed)),v===b&&(60===t.charCodeAt(f)?(v=zb,f++):(v=b,0===va&&n(qe)),v===b&&(61===t.charCodeAt(f)?(v=nb,f++):(v=b,0===va&&n(id)),v===b&&(t.substr(f,2)===Kb?(v=Kb,f+=2):(v=b,0===va&&n(pe))))))));return v}function S(){var v=v=f;var D=p();if(D!==b){var ca=xa();var ya=c();ya!==b?v=D=[D,ca,ya]:(f=v,v=b)}else f=
v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=c());return v}function F(){var v=v=f;var D=p();if(D!==b){var ca=xa();var ya=Da();ya!==b?v=D=[D,ca,ya]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=Da());return v}function r(){var v=f;var D=K();if(D!==b){v=[];var ca=f;var ya=xa();var Na=C();if(Na!==b){var db=xa();var fb=K();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)v.push(ca),ca=f,ya=xa(),Na=C(),Na!==b?(db=xa(),fb=K(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)):(f=ca,ca=b);
v=qb(D,v)}else f=v,v=b;return v}function C(){if(43===t.charCodeAt(f)){var v=Zb;f++}else v=b,0===va&&n(Kc);v===b&&(45===t.charCodeAt(f)?(v=Xb,f++):(v=b,0===va&&n(Tc)),v===b&&(t.substr(f,2)===kc?(v=kc,f+=2):(v=b,0===va&&n(Fb))));return v}function K(){var v=f;var D=J();if(D!==b){v=[];var ca=f;var ya=xa();var Na=U();if(Na!==b){var db=xa();var fb=J();fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,ca=b)}else f=ca,ca=b;for(;ca!==b;)v.push(ca),ca=f,ya=xa(),Na=U(),Na!==b?(db=xa(),fb=J(),fb!==b?ca=ya=[ya,Na,db,fb]:(f=ca,
ca=b)):(f=ca,ca=b);v=qb(D,v)}else f=v,v=b;return v}function U(){if(42===t.charCodeAt(f)){var v=Hb;f++}else v=b,0===va&&n(Qb);v===b&&(47===t.charCodeAt(f)?(v=Rb,f++):(v=b,0===va&&n(Ld)));return v}function J(){var v=Ha();if(v===b){var D=f;var ca=f;var ya=Qa();if(ya!==b){var Na=Sa();if(Na!==b){var db=bb();db!==b?ca=parseFloat(ya+Na+db):(f=ca,ca=b)}else f=ca,ca=b}else f=ca,ca=b;ca===b&&(ca=f,ya=Qa(),ya!==b?(Na=Sa(),Na!==b?ca=parseFloat(ya+Na):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ya=Qa(),ya!==b?(Na=
bb(),Na!==b?ca=parseFloat(ya+Na):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ya=Qa(),ya!==b&&(ya=parseFloat(ya)),ca=ya)));var fb=ca;if(fb!==b){var Sd=f;va++;var Kf=Q();va--;Kf===b?Sd=void 0:(f=Sd,Sd=b);Sd!==b?D={type:"number",value:fb}:(f=D,D=b)}else f=D,D=b;v=D;if(v===b){var Xc=f;var rc=f;if(t.substr(f,4).toLowerCase()===ha){var Td=t.substr(f,4);f+=4}else Td=b,0===va&&n(Fe);if(Td!==b){var Yc=f;va++;var Lf=R();va--;Lf===b?Yc=void 0:(f=Yc,Yc=b);Yc!==b?rc=Td=[Td,Yc]:(f=rc,rc=b)}else f=rc,rc=b;var mc=rc;
mc!==b&&(mc={type:"boolean",value:!0});Xc=mc;if(Xc===b){Xc=f;var sc=f;if(t.substr(f,5).toLowerCase()===ba){var Ud=t.substr(f,5);f+=5}else Ud=b,0===va&&n(Ge);if(Ud!==b){var Zc=f;va++;var Mf=R();va--;Mf===b?Zc=void 0:(f=Zc,Zc=b);Zc!==b?sc=Ud=[Ud,Zc]:(f=sc,sc=b)}else f=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Xc=mc}v=Xc;if(v===b){var tc=f;if(t.substr(f,4).toLowerCase()===X){var Vd=t.substr(f,4);f+=4}else Vd=b,0===va&&n(Ee);if(Vd!==b){var $c=f;va++;var Nf=R();va--;Nf===b?$c=void 0:(f=$c,$c=
b);$c!==b?tc=Vd=[Vd,$c]:(f=tc,tc=b)}else f=tc,tc=b;var Ye=tc;Ye!==b&&(Ye={type:"null",value:null});v=Ye;if(v===b){var uc=f;if(aa()!==b){xa();var kf=za();kf!==b?uc={type:"date",value:kf.value}:(f=uc,uc=b)}else f=uc,uc=b;v=uc;if(v===b){var vc=f;if(da()!==b){xa();var lf=za();lf!==b?vc={type:"timestamp",value:lf.value}:(f=vc,vc=b)}else f=vc,vc=b;v=vc;if(v===b){var Cb=f;var Ze=ia();if(Ze!==b){xa();if(45===t.charCodeAt(f)){var dc=Xb;f++}else dc=b,0===va&&n(Tc);dc===b&&(43===t.charCodeAt(f)?(dc=Zb,f++):
(dc=b,0===va&&n(Kc)));if(dc!==b){xa();var ad=za();if(ad!==b){xa();var mf=u();mf!==b?Cb={type:"interval",value:ad,qualifier:mf,op:dc}:(f=Cb,Cb=b)}else f=Cb,Cb=b}else f=Cb,Cb=b}else f=Cb,Cb=b;Cb===b&&(Cb=f,Ze=ia(),Ze!==b?(xa(),dc=za(),dc!==b?(xa(),ad=u(),ad!==b?Cb={type:"interval",value:dc,qualifier:ad,op:""}:(f=Cb,Cb=b)):(f=Cb,Cb=b)):(f=Cb,Cb=b));v=Cb}}}}}}var ob=v;if(ob===b){var Lb=f;var wc=f;if(t.substr(f,7).toLowerCase()===sd){var nf=t.substr(f,7);f+=7}else nf=b,0===va&&n(Re);if(nf!==b){var Wd=
f;va++;var Of=R();va--;Of===b?Wd=void 0:(f=Wd,Wd=b);Wd!==b?wc="EXTRACT":(f=wc,wc=b)}else f=wc,wc=b;if(wc!==b){xa();var Pf=Ja();if(Pf!==b){xa();var Ub=na();Ub===b&&(Ub=ra(),Ub===b&&(Ub=W(),Ub===b&&(Ub=ea(),Ub===b&&(Ub=pa(),Ub===b&&(Ub=wa())))));var of=Ub;if(of!==b){xa();var Qf=x();if(Qf!==b){xa();var pf=q();if(pf!==b){xa();var Rf=Wa();Rf!==b?Lb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:of},pf]}}:(f=Lb,Lb=b)}else f=Lb,Lb=b}else f=Lb,Lb=b}else f=Lb,Lb=b}else f=
Lb,Lb=b}else f=Lb,Lb=b;ob=Lb;if(ob===b){var Mb=f;var xc=f;if(t.substr(f,9).toLowerCase()===rd){var qf=t.substr(f,9);f+=9}else qf=b,0===va&&n(Qe);if(qf!==b){var Xd=f;va++;var Sf=R();va--;Sf===b?Xd=void 0:(f=Xd,Xd=b);Xd!==b?xc="SUBSTRING":(f=xc,xc=b)}else f=xc,xc=b;if(xc!==b){xa();var Tf=Ja();if(Tf!==b){xa();var $e=q();if($e!==b){xa();var Uf=x();if(Uf!==b){xa();var af=q();if(af!==b){xa();var ec=f;var yc=f;if(t.substr(f,3).toLowerCase()===Ib){var rf=t.substr(f,3);f+=3}else rf=b,0===va&&n(Pe);if(rf!==
b){var Yd=f;va++;var Vf=R();va--;Vf===b?Yd=void 0:(f=Yd,Yd=b);Yd!==b?yc="FOR":(f=yc,yc=b)}else f=yc,yc=b;var bd=yc;if(bd!==b){var Wf=xa();var sf=q();if(sf!==b){var Xf=xa();ec=bd=[bd,Wf,sf,Xf]}else f=ec,ec=b}else f=ec,ec=b;ec===b&&(ec=null);bd=Wa();bd!==b?Mb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[$e,af,ec[2]]:[$e,af]}}:(f=Mb,Mb=b)}else f=Mb,Mb=b}else f=Mb,Mb=b}else f=Mb,Mb=b}else f=Mb,Mb=b}else f=Mb,Mb=b;ob=Mb;if(ob===b){var sb=f;var bf=O();if(bf!==b){xa();var cf=
Ja();if(cf!==b){xa();var fc=l();fc===b&&(fc=null);xa();var cd=q();if(cd!==b){xa();var df=x();if(df!==b){xa();var tf=q();if(tf!==b){xa();var Yf=Wa();Yf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd,tf]}}:(f=sb,sb=b)}else f=sb,sb=b}else f=sb,sb=b}else f=sb,sb=b}else f=sb,sb=b}else f=sb,sb=b;sb===b&&(sb=f,bf=O(),bf!==b?(xa(),cf=Ja(),cf!==b?(xa(),fc=l(),fc===b&&(fc=null),xa(),cd=q(),cd!==b?(xa(),df=Wa(),df!==b?sb={type:"function",name:"trim",
args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd]}}:(f=sb,sb=b)):(f=sb,sb=b)):(f=sb,sb=b)):(f=sb,sb=b));ob=sb;if(ob===b){var Nb=f;var zc=f;if(t.substr(f,8).toLowerCase()===ud){var uf=t.substr(f,8);f+=8}else uf=b,0===va&&n(Se);if(uf!==b){var Zd=f;va++;var Zf=R();va--;Zf===b?Zd=void 0:(f=Zd,Zd=b);Zd!==b?zc="POSITION":(f=zc,zc=b)}else f=zc,zc=b;if(zc!==b){xa();var $f=Ja();if($f!==b){xa();var vf=q();if(vf!==b){xa();var ag=Da();if(ag!==b){xa();var wf=q();if(wf!==b){xa();
var bg=Wa();bg!==b?Nb={type:"function",name:"position",args:{type:"expression-list",value:[vf,wf]}}:(f=Nb,Nb=b)}else f=Nb,Nb=b}else f=Nb,Nb=b}else f=Nb,Nb=b}else f=Nb,Nb=b}else f=Nb,Nb=b;ob=Nb;if(ob===b){var Ob=f;var Ac=f;if(t.substr(f,4).toLowerCase()===ve){var xf=t.substr(f,4);f+=4}else xf=b,0===va&&n(lc);if(xf!==b){var $d=f;va++;var cg=R();va--;cg===b?$d=void 0:(f=$d,$d=b);$d!==b?Ac="CAST":(f=Ac,Ac=b)}else f=Ac,Ac=b;if(Ac!==b){xa();var dg=Ja();if(dg!==b){xa();var yf=q();if(yf!==b){xa();var Bc=
f;if(t.substr(f,2).toLowerCase()===Ad){var zf=t.substr(f,2);f+=2}else zf=b,0===va&&n(Lc);if(zf!==b){var ae=f;va++;var eg=R();va--;eg===b?ae=void 0:(f=ae,ae=b);ae!==b?Bc="AS":(f=Bc,Bc=b)}else f=Bc,Bc=b;var fg=Bc;if(fg!==b){xa();var pb=f;var Cc=f;if(t.substr(f,7).toLowerCase()===Bd){var Af=t.substr(f,7);f+=7}else Af=b,0===va&&n(nd);if(Af!==b){var be=f;va++;var gg=R();va--;gg===b?be=void 0:(f=be,be=b);be!==b?Cc="INTEGER":(f=Cc,Cc=b)}else f=Cc,Cc=b;var tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});
pb=tb;if(pb===b){pb=f;var Dc=f;if(t.substr(f,8).toLowerCase()===Cd){var Bf=t.substr(f,8);f+=8}else Bf=b,0===va&&n(te);if(Bf!==b){var ce=f;va++;var hg=R();va--;hg===b?ce=void 0:(f=ce,ce=b);ce!==b?Dc="SMALLINT":(f=Dc,Dc=b)}else f=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});pb=tb;if(pb===b){pb=f;var Ec=f;if(t.substr(f,5).toLowerCase()===Dd){var Cf=t.substr(f,5);f+=5}else Cf=b,0===va&&n(od);if(Cf!==b){var de=f;va++;var ig=R();va--;ig===b?de=void 0:(f=de,de=b);de!==b?Ec="FLOAT":
(f=Ec,Ec=b)}else f=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"float"}});pb=tb;if(pb===b){pb=f;var Fc=f;if(t.substr(f,4).toLowerCase()===ic){var Df=t.substr(f,4);f+=4}else Df=b,0===va&&n(Mc);if(Df!==b){var ee=f;va++;var jg=R();va--;jg===b?ee=void 0:(f=ee,ee=b);ee!==b?Fc="REAL":(f=Fc,Fc=b)}else f=Fc,Fc=b;tb=Fc;tb!==b&&(tb={type:"data-type",value:{type:"real"}});pb=tb;if(pb===b&&(pb=f,tb=aa(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),pb=tb,pb===b&&(pb=f,tb=da(),tb!==b&&(tb={type:"data-type",
value:{type:"timestamp"}}),pb=tb,pb===b))){pb=f;var Gc=f;if(t.substr(f,7).toLowerCase()===Qc){var Ef=t.substr(f,7);f+=7}else Ef=b,0===va&&n(ue);if(Ef!==b){var fe=f;va++;var kg=R();va--;kg===b?fe=void 0:(f=fe,fe=b);fe!==b?Gc="VARCHAR":(f=Gc,Gc=b)}else f=Gc,Gc=b;tb=Gc;if(tb!==b){xa();var lg=Ja();if(lg!==b){xa();var Ff=Xa();if(Ff!==b){xa();var mg=Wa();mg!==b?pb={type:"data-type",value:{type:"varchar",size:parseInt(Ff)}}:(f=pb,pb=b)}else f=pb,pb=b}else f=pb,pb=b}else f=pb,pb=b}}}}var Gf=pb;if(Gf!==b){xa();
var ng=Wa();ng!==b?Ob={type:"function",name:"cast",args:{type:"expression-list",value:[yf,Gf]}}:(f=Ob,Ob=b)}else f=Ob,Ob=b}else f=Ob,Ob=b}else f=Ob,Ob=b}else f=Ob,Ob=b}else f=Ob,Ob=b;ob=Ob;if(ob===b){var jc=f;var ge;var Vb=f;Vb=ge=L();if(Vb===b)if(Vb=f,96===t.charCodeAt(f)?(ge=hd,f++):(ge=b,0===va&&n(La)),ge!==b){var he=[];if(kd.test(t.charAt(f))){var gc=t.charAt(f);f++}else gc=b,0===va&&n(Pa);if(gc!==b)for(;gc!==b;)he.push(gc),kd.test(t.charAt(f))?(gc=t.charAt(f),f++):(gc=b,0===va&&n(Pa));else he=
b;he!==b?(96===t.charCodeAt(f)?(gc=hd,f++):(gc=b,0===va&&n(La)),gc!==b?Vb=he.join(""):(f=Vb,Vb=b)):(f=Vb,Vb=b)}else f=Vb,Vb=b;var Hf=Vb;if(Hf!==b){xa();var og=Ja();if(og!==b){xa();var ie=e();ie===b&&(ie=null);xa();var pg=Wa();pg!==b?jc={type:"function",name:Hf,args:ie?ie:{type:"expression-list",value:[]}}:(f=jc,jc=b)}else f=jc,jc=b}else f=jc,jc=b;ob=jc;if(ob===b){var ac;var Db=f;var ef=Ca();if(ef!==b){xa();var dd=q();if(dd!==b){xa();var ed=[];for(ac=Ia();ac!==b;)ed.push(ac),ac=Ia();ac=xa();var je=
Oa();je!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(f=Db,Db=b)}else f=Db,Db=b}else f=Db,Db=b;if(Db===b)if(Db=f,ef=Ca(),ef!==b)if(xa(),dd=q(),dd!==b){xa();ed=[];for(ac=Ia();ac!==b;)ed.push(ac),ac=Ia();ac=xa();je=Ua();if(je!==b){xa();var qg=Oa();qg!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:je.value}:(f=Db,Db=b)}else f=Db,Db=b}else f=Db,Db=b;else f=Db,Db=b;var ff=Db;if(ff===b){var bc;var Jb=f;var gf=Ca();if(gf!==b){xa();var fd=[];for(bc=
Ka();bc!==b;)fd.push(bc),bc=Ka();bc=xa();var ke=Oa();ke!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:null}:(f=Jb,Jb=b)}else f=Jb,Jb=b;if(Jb===b)if(Jb=f,gf=Ca(),gf!==b){xa();fd=[];for(bc=Ka();bc!==b;)fd.push(bc),bc=Ka();bc=xa();ke=Ua();if(ke!==b){xa();var rg=Oa();rg!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:ke.value}:(f=Jb,Jb=b)}else f=Jb,Jb=b}else f=Jb,Jb=b;ff=Jb}ob=ff;if(ob===b){var le;var me=f;var If=Q();if(If!==b){var Jf=[];for(le=H();le!==b;)Jf.push(le),
le=H();me=If+Jf.join("")}else f=me,me=b;var ne=me;if(ne!==b){var hf=ne;ne=/^CURRENT_DATE$/i.test(hf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:hf}}ob=ne;if(ob===b&&(ob=A(),ob===b)){ob=f;var sg=Ja();if(sg!==b){xa();var jf=q();if(jf!==b){xa();var tg=Wa();tg!==b?(jf.paren=!0,ob=jf):(f=ob,ob=b)}else f=ob,ob=b}else f=ob,ob=b}}}}}}}}}return ob}function L(){var v;var D=f;var ca=Q();if(ca!==b){D=[];for(v=
R();v!==b;)D.push(v),v=R();D=ca+D.join("")}else f=D,D=b;return D}function Q(){if(Fd.test(t.charAt(f))){var v=t.charAt(f);f++}else v=b,0===va&&n(Md);return v}function R(){if(Gd.test(t.charAt(f))){var v=t.charAt(f);f++}else v=b,0===va&&n(Uc);return v}function H(){if(Hd.test(t.charAt(f))){var v=t.charAt(f);f++}else v=b,0===va&&n(Nd);return v}function A(){var v=f;if(64===t.charCodeAt(f)){var D=ib;f++}else D=b,0===va&&n(Vc);if(D!==b){var ca=L();ca!==b?v=D=[D,ca]:(f=v,v=b)}else f=v,v=b;v!==b&&(v={type:"parameter",
value:v[1]});return v}function l(){var v=f;if(t.substr(f,7).toLowerCase()===xd){var D=t.substr(f,7);f+=7}else D=b,0===va&&n(se);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="LEADING":(f=v,v=b)}else f=v,v=b;v===b&&(v=f,t.substr(f,8).toLowerCase()===yd?(D=t.substr(f,8),f+=8):(D=b,0===va&&n(hb)),D!==b?(D=f,va++,ca=R(),va--,ca===b?D=void 0:(f=D,D=b),D!==b?v="TRAILING":(f=v,v=b)):(f=v,v=b),v===b&&(v=f,t.substr(f,4).toLowerCase()===zd?(D=t.substr(f,4),f+=4):(D=b,0===va&&n(wb)),D!==
b?(D=f,va++,ca=R(),va--,ca===b?D=void 0:(f=D,D=b),D!==b?v="BOTH":(f=v,v=b)):(f=v,v=b)));return v}function u(){var v=f;var D=f;var ca=Z();if(ca!==b){xa();var ya=Ja();if(ya!==b)if(xa(),ya=ua(),ya!==b){xa();var Na=Wa();Na!==b?D={type:"interval-period",period:ca.value,precision:ya,secondary:null}:(f=D,D=b)}else f=D,D=b;else f=D,D=b}else f=D,D=b;D===b&&(D=f,ca=Z(),ca!==b&&(ca={type:"interval-period",period:ca.value,precision:null,secondary:null}),D=ca);if(D!==b)if(xa(),ca=f,t.substr(f,2).toLowerCase()===
nc?(ya=t.substr(f,2),f+=2):(ya=b,0===va&&n(Nc)),ya!==b?(ya=f,va++,Na=R(),va--,Na===b?ya=void 0:(f=ya,ya=b),ya!==b?ca="TO":(f=ca,ca=b)):(f=ca,ca=b),ca!==b){xa();ca=f;ya=Z();ya!==b&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});ca=ya;if(ca===b){ca=f;ya=wa();if(ya!==b)if(xa(),ya=Ja(),ya!==b)if(xa(),ya=ua(),ya!==b)if(xa(),Na=Va(),Na!==b)if(xa(),Na=ka(),Na!==b){xa();var db=Wa();db!==b?ca={type:"interval-period",period:"second",precision:ya,secondary:Na}:(f=ca,ca=b)}else f=
ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;else f=ca,ca=b;ca===b&&(ca=f,ya=wa(),ya!==b?(xa(),ya=Ja(),ya!==b?(xa(),ya=ua(),ya!==b?(xa(),Na=Wa(),Na!==b?ca={type:"interval-period",period:"second",precision:ya,secondary:null}:(f=ca,ca=b)):(f=ca,ca=b)):(f=ca,ca=b)):(f=ca,ca=b),ca===b&&(ca=f,ya=wa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),ca=ya))}ca!==b?v={type:"interval-qualifier",start:D,end:ca}:(f=v,v=b)}else f=v,v=b;else f=v,v=b;v===b&&(v=f,ca=Z(),
ca!==b?(xa(),D=Ja(),D!==b?(xa(),D=ka(),D!==b?(xa(),ya=Wa(),ya!==b?v={type:"interval-period",period:ca.value,precision:D,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,ca=Z(),ca!==b&&(ca={type:"interval-period",period:ca.value,precision:null,secondary:null}),v=ca,v===b&&(v=f,ca=wa(),ca!==b?(xa(),D=Ja(),D!==b?(xa(),D=ua(),D!==b?(xa(),ya=Va(),ya!==b?(xa(),ca=ka(),ca!==b?(xa(),ya=Wa(),ya!==b?v={type:"interval-period",period:"second",precision:D,secondary:ca}:(f=v,v=b)):(f=v,v=
b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,ca=wa(),ca!==b?(xa(),D=Ja(),D!==b?(xa(),D=ka(),D!==b?(xa(),ya=Wa(),ya!==b?v={type:"interval-period",period:"second",precision:D,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,ca=wa(),ca!==b&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),v=ca)))));return v}function Z(){var v=f;v=W();v!==b&&(v={type:"string",value:"day"});v===b&&(v=f,v=ea(),v!==b&&(v={type:"string",value:"hour"}),v===b&&
(v=f,v=pa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=f,v=ra(),v!==b&&(v={type:"string",value:"month"}),v===b&&(v=f,v=na(),v!==b&&(v={type:"string",value:"year"})))));return v}function ka(){var v=Xa();v!==b&&(v=parseFloat(v));return v}function ua(){var v=Xa();v!==b&&(v=parseFloat(v));return v}function za(){var v=Ha();v===b&&(v=A());return v}function Ha(){var v=f;if(39===t.charCodeAt(f)){var D=Ab;f++}else D=b,0===va&&n(Od);D===b&&(t.substr(f,2)===Bb?(D=Bb,f+=2):(D=b,0===va&&n(Ae)));if(D!==
b){D=[];var ca=f;t.substr(f,2)===ab?(ca=ab,f+=2):(ca=b,0===va&&n(Wc));ca!==b&&(ca="'");ca===b&&(Sc.test(t.charAt(f))?(ca=t.charAt(f),f++):(ca=b,0===va&&n(Pd)));for(;ca!==b;)D.push(ca),ca=f,t.substr(f,2)===ab?(ca=ab,f+=2):(ca=b,0===va&&n(Wc)),ca!==b&&(ca="'"),ca===b&&(Sc.test(t.charAt(f))?(ca=t.charAt(f),f++):(ca=b,0===va&&n(Pd)));39===t.charCodeAt(f)?(ca=Ab,f++):(ca=b,0===va&&n(Od));ca!==b?v={type:"string",value:D.join("")}:(f=v,v=b)}else f=v,v=b;return v}function Ka(){var v=f;if(Ma()!==b){xa();var D=
q();if(D!==b){xa();var ca=Ta();ca!==b?(xa(),ca=q(),ca!==b?v={type:"when-clause",operand:D,value:ca}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function Ia(){var v=f;if(Ma()!==b){xa();var D=q();if(D!==b){xa();var ca=Ta();ca!==b?(xa(),ca=q(),ca!==b?v={type:"when-clause",operand:D,value:ca}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function Ua(){var v=f;var D=f;if(t.substr(f,4).toLowerCase()===ze){var ca=t.substr(f,4);f+=4}else ca=b,0===va&&n(P);if(ca!==b){ca=f;va++;var ya=
R();va--;ya===b?ca=void 0:(f=ca,ca=b);ca!==b?D="ELSE":(f=D,D=b)}else f=D,D=b;D!==b?(xa(),D=q(),D!==b?v={type:"else-clause",value:D}:(f=v,v=b)):(f=v,v=b);return v}function Qa(){var v=Xa();if(v===b){v=f;if(45===t.charCodeAt(f)){var D=Xb;f++}else D=b,0===va&&n(Tc);D===b&&(43===t.charCodeAt(f)?(D=Zb,f++):(D=b,0===va&&n(Kc)));if(D!==b){var ca=Xa();ca!==b?v=D[0]+ca:(f=v,v=b)}else f=v,v=b}return v}function Sa(){var v=f;if(46===t.charCodeAt(f)){var D=hc;f++}else D=b,0===va&&n(Be);D!==b?(v=Xa(),v===b&&(v=
null),v="."+(null!=v?v:"")):(f=v,v=b);return v}function bb(){var v;var D=v=f;if(Jd.test(t.charAt(f))){var ca=t.charAt(f);f++}else ca=b,0===va&&n(re);ca!==b?(Kd.test(t.charAt(f))?(D=t.charAt(f),f++):(D=b,0===va&&n(De)),D===b&&(D=null),D="e"+(null===D?"":D)):(f=D,D=b);D!==b?(ca=Xa(),ca!==b?v=D+ca:(f=v,v=b)):(f=v,v=b);return v}function Xa(){var v=[];var D=Aa();if(D!==b)for(;D!==b;)v.push(D),D=Aa();else v=b;v!==b&&(v=v.join(""));return v}function Aa(){if(Id.test(t.charAt(f))){var v=t.charAt(f);f++}else v=
b,0===va&&n(Ce);return v}function Da(){var v=f;if(t.substr(f,2).toLowerCase()===qa){var D=t.substr(f,2);f+=2}else D=b,0===va&&n(He);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="IN":(f=v,v=b)}else f=v,v=b;return v}function Fa(){var v=f;if(t.substr(f,2).toLowerCase()===Ea){var D=t.substr(f,2);f+=2}else D=b,0===va&&n(Ie);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="IS":(f=v,v=b)}else f=v,v=b;return v}function c(){var v=f;if(t.substr(f,4).toLowerCase()===
Ga){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Je);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="LIKE":(f=v,v=b)}else f=v,v=b;return v}function p(){var v=f;if(t.substr(f,3).toLowerCase()===Ya){var D=t.substr(f,3);f+=3}else D=b,0===va&&n(Qd);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="NOT":(f=v,v=b)}else f=v,v=b;return v}function V(){var v=f;if(t.substr(f,3).toLowerCase()===mb){var D=t.substr(f,3);f+=3}else D=b,0===va&&n(Le);if(D!==b){D=f;va++;var ca=
R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="AND":(f=v,v=b)}else f=v,v=b;return v}function la(){var v=f;if(t.substr(f,2).toLowerCase()===lb){var D=t.substr(f,2);f+=2}else D=b,0===va&&n(Me);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="OR":(f=v,v=b)}else f=v,v=b;return v}function ta(){var v=f;if(t.substr(f,7).toLowerCase()===kb){var D=t.substr(f,7);f+=7}else D=b,0===va&&n(Ne);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="BETWEEN":(f=v,v=b)}else f=v,v=
b;return v}function x(){var v=f;if(t.substr(f,4).toLowerCase()===xb){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Oe);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="FROM":(f=v,v=b)}else f=v,v=b;return v}function O(){var v=f;if(t.substr(f,4).toLowerCase()===td){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Rd);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="TRIM":(f=v,v=b)}else f=v,v=b;return v}function da(){var v=f;if(t.substr(f,9).toLowerCase()===vd){var D=
t.substr(f,9);f+=9}else D=b,0===va&&n(Te);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="TIMESTAMP":(f=v,v=b)}else f=v,v=b;return v}function aa(){var v=f;if(t.substr(f,4).toLowerCase()===wd){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(cc);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="DATE":(f=v,v=b)}else f=v,v=b;return v}function ia(){var v=f;if(t.substr(f,8).toLowerCase()===oc){var D=t.substr(f,8);f+=8}else D=b,0===va&&n(Pc);if(D!==b){D=f;va++;var ca=
R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="INTERVAL":(f=v,v=b)}else f=v,v=b;return v}function na(){var v=f;if(t.substr(f,4).toLowerCase()===we){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Oc);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="YEAR":(f=v,v=b)}else f=v,v=b;return v}function ra(){var v=f;if(t.substr(f,5).toLowerCase()===pc){var D=t.substr(f,5);f+=5}else D=b,0===va&&n(qd);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="MONTH":(f=v,v=b)}else f=
v,v=b;return v}function W(){var v=f;if(t.substr(f,3).toLowerCase()===Tb){var D=t.substr(f,3);f+=3}else D=b,0===va&&n(Ue);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="DAY":(f=v,v=b)}else f=v,v=b;return v}function ea(){var v=f;if(t.substr(f,4).toLowerCase()===gd){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Ve);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="HOUR":(f=v,v=b)}else f=v,v=b;return v}function pa(){var v=f;if(t.substr(f,6).toLowerCase()===Hc){var D=
t.substr(f,6);f+=6}else D=b,0===va&&n(pd);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="MINUTE":(f=v,v=b)}else f=v,v=b;return v}function wa(){var v=f;if(t.substr(f,6).toLowerCase()===Ic){var D=t.substr(f,6);f+=6}else D=b,0===va&&n(We);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="SECOND":(f=v,v=b)}else f=v,v=b;return v}function Ca(){var v=f;if(t.substr(f,4).toLowerCase()===Jc){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(Xe);if(D!==b){D=f;va++;var ca=
R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="CASE":(f=v,v=b)}else f=v,v=b;return v}function Oa(){var v=f;if(t.substr(f,3).toLowerCase()===qc){var D=t.substr(f,3);f+=3}else D=b,0===va&&n(cb);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="END":(f=v,v=b)}else f=v,v=b;return v}function Ma(){var v=f;if(t.substr(f,4).toLowerCase()===xe){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(a);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="WHEN":(f=v,v=b)}else f=v,v=b;
return v}function Ta(){var v=f;if(t.substr(f,4).toLowerCase()===ye){var D=t.substr(f,4);f+=4}else D=b,0===va&&n(h);if(D!==b){D=f;va++;var ca=R();va--;ca===b?D=void 0:(f=D,D=b);D!==b?v="THEN":(f=v,v=b)}else f=v,v=b;return v}function Va(){if(44===t.charCodeAt(f)){var v=rb;f++}else v=b,0===va&&n(fa);return v}function Ja(){if(40===t.charCodeAt(f)){var v=Rc;f++}else v=b,0===va&&n(ma);return v}function Wa(){if(41===t.charCodeAt(f)){var v=Eb;f++}else v=b,0===va&&n(sa);return v}function xa(){var v;var D=
[];for(v=vb();v!==b;)D.push(v),v=vb();return D}function vb(){if(yb.test(t.charAt(f))){var v=t.charAt(f);f++}else v=b,0===va&&n(Ba);return v}function ub(v,D,ca,ya){v={type:"binary-expression",operator:v,left:D,right:ca};void 0!==ya&&(v.escape=ya);return v}function qb(v,D){for(var ca=0;ca<D.length;ca++)v=ub(D[ca][1],v,D[ca][3]);return v}k=void 0!==k?k:{};var b={},jb=k.grammarSource,gb={start:w},Gb=w,Pb="!",nb="\x3d",Wb="\x3e\x3d",oa="\x3e",Yb="\x3c\x3d",Sb="\x3c\x3e",zb="\x3c",Kb="!\x3d",Zb="+",Xb=
"-",kc="||",Hb="*",Rb="/",ib="@",Ab="'",Bb="N'",ab="''",hc=".",X="null",ha="true",ba="false",qa="in",Ea="is",Ga="like",Ra="escape",Ya="not",mb="and",lb="or",kb="between",xb="from",Ib="for",rd="substring",sd="extract",td="trim",ud="position",vd="timestamp",wd="date",xd="leading",yd="trailing",zd="both",ve="cast",Ad="as",Bd="integer",Cd="smallint",Dd="float",ic="real",Qc="varchar",nc="to",oc="interval",we="year",pc="month",Tb="day",gd="hour",Hc="minute",Ic="second",Jc="case",qc="end",xe="when",ye="then",
ze="else",rb=",",Rc="(",Eb=")",hd="`",Fd=/^[A-Za-z_\x80-\uFFFF]/,Gd=/^[A-Za-z0-9_]/,Hd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sc=/^[^']/,Id=/^[0-9]/,Jd=/^[eE]/,Kd=/^[+\-]/,yb=/^[ \t\n\r]/,kd=/^[^`]/,jd=m("!",!1),id=m("\x3d",!1),md=m("\x3e\x3d",!1),ld=m("\x3e",!1),oe=m("\x3c\x3d",!1),Ed=m("\x3c\x3e",!1),qe=m("\x3c",!1),pe=m("!\x3d",!1),Kc=m("+",!1),Tc=m("-",!1),Fb=m("||",!1),Qb=m("*",!1),Ld=m("/",!1),Md=G([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Uc=G([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=
G([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Vc=m("@",!1),Od=m("'",!1),Ae=m("N'",!1),Wc=m("''",!1),Pd=G(["'"],!0,!1),Be=m(".",!1),Ce=G([["0","9"]],!1,!1),re=G(["e","E"],!1,!1),De=G(["+","-"],!1,!1),Ee=m("NULL",!0),Fe=m("TRUE",!0),Ge=m("FALSE",!0),He=m("IN",!0),Ie=m("IS",!0),Je=m("LIKE",!0),Ke=m("ESCAPE",!0),Qd=m("NOT",!0),Le=m("AND",!0),Me=m("OR",!0),Ne=m("BETWEEN",!0),Oe=m("FROM",!0),Pe=m("FOR",!0),Qe=m("SUBSTRING",!0),Re=m("EXTRACT",!0),Rd=m("TRIM",!0),Se=m("POSITION",!0),
Te=m("TIMESTAMP",!0),cc=m("DATE",!0),se=m("LEADING",!0),hb=m("TRAILING",!0),wb=m("BOTH",!0),lc=m("CAST",!0),Lc=m("AS",!0),nd=m("INTEGER",!0),te=m("SMALLINT",!0),od=m("FLOAT",!0),Mc=m("REAL",!0),ue=m("VARCHAR",!0),Nc=m("TO",!0),Pc=m("INTERVAL",!0),Oc=m("YEAR",!0),qd=m("MONTH",!0),Ue=m("DAY",!0),Ve=m("HOUR",!0),pd=m("MINUTE",!0),We=m("SECOND",!0),Xe=m("CASE",!0),cb=m("END",!0),a=m("WHEN",!0),h=m("THEN",!0),P=m("ELSE",!0),fa=m(",",!1),ma=m("(",!1),sa=m(")",!1),Ba=G([" ","\t","\n","\r"],!1,!1),La=m("`",
!1),Pa=G(["`"],!0,!1),f=0,Za=[{line:1,column:1}],$a=0,eb=[],va=0;if("startRule"in k){if(!(k.startRule in gb))throw Error("Can't start parsing from rule \""+k.startRule+'".');Gb=gb[k.startRule]}var $b=Gb();if($b!==b&&f===t.length)return $b;$b!==b&&f<t.length&&n({type:"end"});throw function(v,D,ca){return new N(N.buildMessage(v,D),v,D,ca)}(eb,$a<t.length?t.charAt($a):null,$a<t.length?M($a,$a+1):M($a,$a));}}})})({get exports(){return ja},set exports(I){ja=I}});let T=function(){function I(){}I.parse=
function(N){return ja.parse(N)};return I}();g.WhereGrammar=T;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(g){g.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};g.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(g){g.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y,M,n,w){function e(B,S,F,r){const C=r.x-F.x;r=r.y-F.y;S=Math.min(1,Math.max(0,((S.x-F.x)*C+(S.y-F.y)*r)/(C*C+r*r)));B.x=F.x+C*S;B.y=F.y+r*S}function q(B,S){return B?S?4:3:S?3:2}let z=function(){function B(F,r,C){this.items=F;this.query=r;this.geometryType=C.geometryType;this.hasM=C.hasM;this.hasZ=C.hasZ;this.fieldsIndex=C.fieldsIndex;this.objectIdField=C.objectIdField;this.spatialReference=C.spatialReference;this.featureAdapter=C.featureAdapter}var S=B.prototype;S.createQueryResponseForCount=
function(){const F=new k(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return F.countDistinctValues(this.items);const {groupByFieldsForStatistics:r,having:C,outStatistics:K}=this.query;if(!r?.length)return 1;const U=new Map,J=new Map,L=new Set;for(const H of K){var {statisticType:Q}=H;Q="exceedslimit"!==Q?H.onStatisticField:void 0;if(!J.has(Q)){var R=[];for(const A of r){const l=this._getAttributeValues(F,A,U);R.push(l)}J.set(Q,this._calculateUniqueValues(R,F.returnDistinctValues))}Q=
J.get(Q);for(const A in Q){const {data:l,items:u}=Q[A];R=l.join(",");C&&!F.validateItems(u,C)||L.add(R)}}return L.size};S.createQueryResponse=function(){var F=ja._asyncToGenerator(function*(){let r;r=this.query.outStatistics?this.query.outStatistics.some(C=>"exceedslimit"===C.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const C=this.query.geometry;
t.isValid(this.query.outSR)&&!t.equals(C.spatialReference,this.query.outSR)?r.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...m.project(C,C.spatialReference,this.query.outSR)}):r.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...C})}return r});return function(){return F.apply(this,arguments)}}();S.createSnappingResponse=function(F,r){const C=this.featureAdapter,K=q(this.hasZ,this.hasM),{point:U,mode:J}=F,L="number"===typeof F.distance?F.distance:
F.distance.x,Q="number"===typeof F.distance?F.distance:F.distance.y,R={candidates:[]},H="esriGeometryPolygon"===this.geometryType;r=this._getPointCreator(J,this.spatialReference,r);const A=new y(null,0),l=new y(null,0),u={x:0,y:0,z:0};for(const Ia of this.items){var Z=C.getGeometry(Ia);if(T.isNone(Z))continue;const {coords:Ua,lengths:Qa}=Z;A.coords=Ua;l.coords=Ua;if(F.types&d.SnappingTypes.EDGE){Z=0;for(var ka=0;ka<Qa.length;ka++){var ua=Qa[ka];for(var za=0;za<ua;za++,Z+=K){var Ha=A;Ha.coordsIndex=
Z;if(za!==ua-1){const Sa=l;Sa.coordsIndex=Z+K;const bb=u;e(u,U,Ha,Sa);var Ka=(U.x-bb.x)/L;const Xa=(U.y-bb.y)/Q;Ka=Ka*Ka+Xa*Xa;1>=Ka&&R.candidates.push(G.makeEdgeCandidate(C.getObjectId(Ia),r(bb),Math.sqrt(Ka),r(Ha),r(Sa)))}}}}if(F.types&d.SnappingTypes.VERTEX)for(Z=H?Ua.length-K:Ua.length,ka=0;ka<Z;ka+=K)ua=A,ua.coordsIndex=ka,za=(U.x-ua.x)/L,Ha=(U.y-ua.y)/Q,za=za*za+Ha*Ha,1>=za&&R.candidates.push(G.makeVertexCandidate(C.getObjectId(Ia),r(ua),Math.sqrt(za)))}R.candidates.sort((Ia,Ua)=>Ia.distance-
Ua.distance);return R};S._getPointCreator=function(F,r,C){const K=T.isSome(C)&&!t.equals(r,C)?J=>m.project(J,r,C):J=>J,{hasZ:U}=this;return"3d"===F?U?({x:J,y:L,z:Q})=>K({x:J,y:L,z:Q}):({x:J,y:L})=>K({x:J,y:L,z:0}):({x:J,y:L})=>K({x:J,y:L})};S.createSummaryStatisticsResponse=function(){var F=ja._asyncToGenerator(function*(r){const {field:C,valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,minValue:Q,maxValue:R,scale:H}=r;r=this.fieldsIndex.isDateField(C);var A=yield this._getDataValues({field:C,
valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,scale:H});const l=n.isNullCountSupported({normalizationType:J,normalizationField:U,minValue:Q,maxValue:R}),u=this.fieldsIndex.get(C),Z={value:.5,fieldType:u?.type};A=M.isStringField(u)?n.calculateStringStatistics({values:A,supportsNullCount:l,percentileParams:Z}):n.calculateStatistics({values:A,minValue:Q,maxValue:R,useSampleStdDev:!J,supportsNullCount:l,percentileParams:Z});return n.processSummaryStatisticsResult(A,r)});
return function(r){return F.apply(this,arguments)}}();S.createUniqueValuesResponse=function(){var F=ja._asyncToGenerator(function*(r){const {field:C,valueExpression:K,domains:U,returnAllCodedValues:J,scale:L}=r;var Q=yield this._getDataValues({field:C,field2:r.field2,field3:r.field3,fieldDelimiter:r.fieldDelimiter,valueExpression:K,scale:L});Q=n.calculateUniqueValuesCount(Q);return n.createUVResult(Q,U,J,r.fieldDelimiter)});return function(r){return F.apply(this,arguments)}}();S.createClassBreaksResponse=
function(){var F=ja._asyncToGenerator(function*(r){const {field:C,valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,classificationMethod:Q,standardDeviationInterval:R,minValue:H,maxValue:A,numClasses:l,scale:u}=r;r=yield this._getDataValues({field:C,valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,scale:u});r=n.calculateClassBreaks(r,{field:C,normalizationField:U,normalizationType:J,normalizationTotal:L,classificationMethod:Q,standardDeviationInterval:R,
minValue:H,maxValue:A,numClasses:l});return n.resolveCBResult(r,Q)});return function(r){return F.apply(this,arguments)}}();S.createHistogramResponse=function(){var F=ja._asyncToGenerator(function*(r){const {field:C,valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,classificationMethod:Q,standardDeviationInterval:R,minValue:H,maxValue:A,numBins:l,scale:u}=r;r=yield this._getDataValues({field:C,valueExpression:K,normalizationField:U,normalizationType:J,normalizationTotal:L,
scale:u});return n.calculateHistogram(r,{field:C,normalizationField:U,normalizationType:J,normalizationTotal:L,classificationMethod:Q,standardDeviationInterval:R,minValue:H,maxValue:A,numBins:l})});return function(r){return F.apply(this,arguments)}}();S._sortFeatures=function(F,r,C){if(1<F.length&&r&&r.length)for(const K of r.reverse()){r=K.split(" ");const U=r[0],J=this.fieldsIndex.get(U);r=r[1]?"desc"===r[1].toLowerCase():!1;const L=n.getAttributeComparator(J?.type,r);F.sort((Q,R)=>{Q=C(Q,U,J);
R=C(R,U,J);return L(Q,R)})}};S._createFeatureQueryResponse=function(F){const r=this.items,{geometryType:C,hasM:K,hasZ:U,objectIdField:J,spatialReference:L}=this,{outFields:Q,outSR:R,quantizationParameters:H,resultRecordCount:A,resultOffset:l,returnZ:u,returnM:Z}=F,ka=null!=A?r.length>(l||0)+A:!1,ua=Q&&(Q.includes("*")?[...this.fieldsIndex.fields]:Q.map(za=>this.fieldsIndex.get(za)));return{exceededTransferLimit:ka,features:this._createFeatures(F,r),fields:ua,geometryType:C,hasM:K&&Z,hasZ:U&&u,objectIdFieldName:J,
spatialReference:Y.cleanFromGeometryEngine(R?R:L),transform:H&&E.toQuantizationTransform(H)||null}};S._createFeatures=function(F,r){const C=new k(F,this.featureAdapter,this.fieldsIndex),{hasM:K,hasZ:U}=this,{orderByFields:J,quantizationParameters:L,returnGeometry:Q,returnCentroid:R,maxAllowableOffset:H,resultOffset:A,resultRecordCount:l,returnZ:u=!1,returnM:Z=!1}=F,ka=U&&u,ua=K&&Z;F=[];var za=0;r=[...r];this._sortFeatures(r,J,(Ia,Ua,Qa)=>C.getFieldValue(Ia,Ua,Qa));if(Q||R){var Ha=E.toQuantizationTransform(L)??
void 0;if(Q&&!R)for(var Ka of r)F[za++]={attributes:C.getAttributes(Ka),geometry:Y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ka),H,Ha,ka,ua)};else if(!Q&&R)for(const Ia of r)F[za++]={attributes:C.getAttributes(Ia),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(Ia,this),Ha)};else for(const Ia of r)F[za++]={attributes:C.getAttributes(Ia),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(Ia,this),Ha),geometry:Y.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ia),H,Ha,ka,ua)}}else for(Ha of r)(Ka=C.getAttributes(Ha))&&(F[za++]={attributes:Ka});za=A||0;null!=l&&(F=F.slice(za,Math.min(F.length,za+l)));return F};S._createExceedsLimitQueryResponse=function(F){var r=!1;let C=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY;r=Number.POSITIVE_INFINITY;for(const U of F.outStatistics??[])if("exceedslimit"===U.statisticType){C=null!=U.maxPointCount?U.maxPointCount:Number.POSITIVE_INFINITY;K=null!=U.maxRecordCount?
U.maxRecordCount:Number.POSITIVE_INFINITY;r=null!=U.maxVertexCount?U.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)r=this.items.length>C;else if(this.items.length>K)r=!0;else{F=q(this.hasZ,this.hasM);const U=this.featureAdapter;r=this.items.reduce((J,L)=>{L=U.getGeometry(L);return J+(T.isSome(L)&&L.coords.length||0)},0)/F>r}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(r)}}]}};S._createStatisticsQueryResponse=function(){var F=ja._asyncToGenerator(function*(r){var C={attributes:{}};const K=[],U=new Map,J=new Map,L=new Map,Q=new Map,R=new k(r,this.featureAdapter,this.fieldsIndex);var H=r.outStatistics;const {groupByFieldsForStatistics:A,having:l,orderByFields:u}=r;r=A&&A.length;const Z=!!r,ka=Z?A[0]:null,ua=Z&&!this.fieldsIndex.get(ka);for(const Ua of H??[]){const {outStatisticFieldName:Qa,statisticType:Sa}=Ua;H=Ua;var za=
"exceedslimit"!==Sa?Ua.onStatisticField:void 0;const bb="percentile_disc"===Sa||"percentile_cont"===Sa,Xa="EnvelopeAggregate"===Sa||"CentroidAggregate"===Sa||"ConvexHullAggregate"===Sa,Aa=Z&&1===r&&(za===ka||ua)&&"count"===Sa;if(Z){if(!L.has(za)){var Ha=[];for(const Da of A){var Ka=this._getAttributeValues(R,Da,U);Ha.push(Ka)}L.set(za,this._calculateUniqueValues(Ha,Xa?!1:R.returnDistinctValues))}Ha=L.get(za);for(const Da in Ha){const {count:Fa,data:c,items:p,itemPositions:V}=Ha[Da];Ka=c.join(",");
if(!l||R.validateItems(p,l)){const la=Q.get(Ka)||{attributes:{}};if(Xa){la.aggregateGeometries||(la.aggregateGeometries={});const {aggregateGeometries:x,outStatisticFieldName:O}=yield this._getAggregateGeometry(H,p);la.aggregateGeometries[O]=x}else{var Ia=null;if(Aa)Ia=Fa;else{const x=this._getAttributeValues(R,za,U);Ia=V.map(O=>x[O]);Ia=bb&&"statisticParameters"in H?this._getPercentileValue(H,Ia):this._getStatisticValue(H,Ia,null,R.returnDistinctValues)}la.attributes[Qa]=Ia}let ta=0;A.forEach((x,
O)=>la.attributes[this.fieldsIndex.get(x)?x:`EXPR_${++ta}`]=c[O]);Q.set(Ka,la)}}}else if(Xa){C.aggregateGeometries||(C.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Fa}=yield this._getAggregateGeometry(H,this.items);C.aggregateGeometries[Fa]=Da}else za=this._getAttributeValues(R,za,U),C.attributes[Qa]=bb&&"statisticParameters"in H?this._getPercentileValue(H,za):this._getStatisticValue(H,za,J,R.returnDistinctValues);K.push({name:Qa,alias:Qa,type:"esriFieldTypeDouble"})}C=
Z?Array.from(Q.values()):[C];this._sortFeatures(C,u,(Ua,Qa)=>Ua.attributes[Qa]);return{fields:K,features:C}});return function(r){return F.apply(this,arguments)}}();S._getAggregateGeometry=function(){var F=ja._asyncToGenerator(function*(r,C){var K=yield new Promise((u,Z)=>g(["../../../geometry/geometryEngineJSON"],u,Z));const {statisticType:U,outStatisticFieldName:J}=r,{featureAdapter:L,spatialReference:Q,geometryType:R,hasZ:H,hasM:A}=this;C=C.map(u=>Y.getGeometry(R,H,A,L.getGeometry(u)));const l=
K.convexHull(Q,C,!0)[0];r={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===U?(K=l?N.getPolygonExtent(l):N.getGeometryExtent(K.union(Q,C)),r.aggregateGeometries={...K,spatialReference:Q},r.outStatisticFieldName=J||"extent"):"CentroidAggregate"===U?(K=l?I.polygonCentroid(l):I.extentCentroid(N.getGeometryExtent(K.union(Q,C))),r.aggregateGeometries={x:K[0],y:K[1],spatialReference:Q},r.outStatisticFieldName=J||"centroid"):"ConvexHullAggregate"===U&&(r.aggregateGeometries=l,r.outStatisticFieldName=
J||"convexHull");return r});return function(r,C){return F.apply(this,arguments)}}();S._getStatisticValue=function(F,r,C,K){const {onStatisticField:U,statisticType:J}=F;F=null;F=C?.has(U)?C.get(U):M.isStringField(this.fieldsIndex.get(U))?n.calculateStringStatistics({values:r,returnDistinct:K}):n.calculateStatistics({values:K?[...(new Set(r))]:r,minValue:null,maxValue:null,useSampleStdDev:!0});C&&C.set(U,F);return F["var"===J?"variance":J]};S._getPercentileValue=function(F,r){const {onStatisticField:C,
statisticParameters:K,statisticType:U}=F,{value:J,orderBy:L}=K;F=this.fieldsIndex.get(C);return n.calculatePercentile(r,{value:J,orderBy:L,fieldType:F?.type,isDiscrete:"percentile_disc"===U})};S._getAttributeValues=function(F,r,C){if(C.has(r))return C.get(r);const K=this.fieldsIndex.get(r),U=this.items.map(J=>F.getFieldValue(J,r,K));C.set(r,U);return U};S._getAttributeDataValues=function(F,r){return this.items.map(C=>F.getDataValue(C,{field:r.field,field2:r.field2,field3:r.field3,fieldDelimiter:r.fieldDelimiter,
normalizationField:r.normalizationField,normalizationType:r.normalizationType,normalizationTotal:r.normalizationTotal}))};S._getAttributeExpressionValues=function(){var F=ja._asyncToGenerator(function*(r,C,K){const {arcadeUtils:U}=yield w.loadArcade();C=U.createFunction(C);K=K&&U.getViewInfo(K);return r.getExpressionValues(this.items,C,K,U)});return function(r,C,K){return F.apply(this,arguments)}}();S._calculateUniqueValues=function(F,r){const C={},K=this.items,U=K.length;for(let J=0;J<U;J++){const L=
K[J],Q=[];for(const H of F)Q.push(H[J]);const R=Q.join(",");null==C[R]?C[R]={count:1,data:Q,items:[L],itemPositions:[J]}:(r||C[R].count++,C[R].items.push(L),C[R].itemPositions.push(J))}return C};S._getDataValues=function(){var F=ja._asyncToGenerator(function*(r){const C=new k(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:K,field:U,normalizationField:J,normalizationType:L,normalizationTotal:Q,scale:R}=r,H=K?{viewingMode:"map",scale:R,spatialReference:this.query.outSR||this.spatialReference}:
null;return K?this._getAttributeExpressionValues(C,K,H):this._getAttributeDataValues(C,{field:U,field2:r.field2,field3:r.field3,fieldDelimiter:r.fieldDelimiter,normalizationField:J,normalizationType:L,normalizationTotal:Q})});return function(r){return F.apply(this,arguments)}}();ja._createClass(B,[{key:"size",get:function(){return this.items.length}}]);return B}();d.SnappingTypes=void 0;(function(B){B[B.NONE=0]="NONE";B[B.EDGE=1]="EDGE";B[B.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));
let y=function(){function B(S,F){this.coords=S;this.coordsIndex=F}ja._createClass(B,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return B}();d.QueryEngineResult=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(g,d,ja){function T({scale:J,
translate:L},Q){return Math.round((Q-L[0])/J[0])}function I({scale:J,translate:L},Q){return Math.round((L[1]-Q)/J[1])}function N(J,L,Q){const R=[];let H,A,l,u;for(let Z=0;Z<Q.length;Z++){const ka=Q[Z];if(0<Z){if(l=T(J,ka[0]),u=I(J,ka[1]),l!==H||u!==A)R.push(L(ka,l-H,u-A)),H=l,A=u}else H=T(J,ka[0]),A=I(J,ka[1]),R.push(L(ka,H,A))}return 0<R.length?R:null}function E(J,L,Q,R){return N(J,Q?R?U:K:R?K:C,L)}function t(J,L,Q,R){const H=[];Q=Q?R?U:K:R?K:C;for(R=0;R<L.length;R++){const A=N(J,Q,L[R]);A&&3<=A.length&&
H.push(A)}return H.length?H:null}function k(J,L,Q,R){const H=[];Q=Q?R?U:K:R?K:C;for(R=0;R<L.length;R++){const A=N(J,Q,L[R]);A&&2<=A.length&&H.push(A)}return H.length?H:null}function m({scale:J,translate:L},Q){return Q*J[0]+L[0]}function G({scale:J,translate:L},Q){return L[1]-Q*J[1]}function Y(J,L,Q){const R=Array(Q.length);if(!Q.length)return R;const [H,A]=J.scale;let l=m(J,Q[0][0]);J=G(J,Q[0][1]);R[0]=L(Q[0],l,J);for(let u=1;u<Q.length;u++){const Z=Q[u];l+=Z[0]*H;J-=Z[1]*A;R[u]=L(Z,l,J)}return R}
function M(J,L,Q){const R=Array(Q.length);for(let H=0;H<Q.length;H++)R[H]=Y(J,L,Q[H]);return R}function n(J,L,Q,R){return Y(J,Q?R?U:K:R?K:C,L)}function w(J,L,Q,R){return M(J,Q?R?U:K:R?K:C,L)}function e(J,L,Q,R){return M(J,Q?R?U:K:R?K:C,L)}function q(J,L,Q){let [R,H]=Q[0],A=Math.min(R,L[0]),l=Math.min(H,L[1]),u=Math.max(R,L[2]);L=Math.max(H,L[3]);for(let Z=1;Z<Q.length;Z++){const [ka,ua]=Q[Z];R+=ka;H+=ua;0>ka&&(A=Math.min(A,R));0<ka&&(u=Math.max(u,R));0>ua?l=Math.min(l,H):0<ua&&(L=Math.max(L,H))}J[0]=
A;J[1]=l;J[2]=u;J[3]=L;return J}function z(J,L){if(!L.length)return null;J[0]=J[1]=Number.POSITIVE_INFINITY;J[2]=J[3]=Number.NEGATIVE_INFINITY;for(let Q=0;Q<L.length;Q++)q(J,J,L[Q]);return J}function y(J,L,Q,R,H){L.xmin=T(J,Q.xmin);L.ymin=I(J,Q.ymin);L.xmax=T(J,Q.xmax);L.ymax=I(J,Q.ymax);L!==Q&&(R&&(L.zmin=Q.zmin,L.zmax=Q.zmax),H&&(L.mmin=Q.mmin,L.mmax=Q.mmax));return L}function B(J,L,Q,R,H){L.points=E(J,Q.points,R,H)??[];return L}function S(J,L,Q,R,H){L.x=T(J,Q.x);L.y=I(J,Q.y);L!==Q&&(R&&(L.z=Q.z),
H&&(L.m=Q.m));return L}function F(J,L,Q,R,H){J=t(J,Q.rings,R,H);if(!J)return null;L.rings=J;return L}function r(J,L,Q,R,H){J=k(J,Q.paths,R,H);if(!J)return null;L.paths=J;return L}const C=(J,L,Q)=>[L,Q],K=(J,L,Q)=>[L,Q,J[2]],U=(J,L,Q)=>[L,Q,J[2],J[3]];g.equals=function(J,L){if(J===L||null==J&&null==L)return!0;if(null==J||null==L)return!1;let Q,R,H,A;J&&"upperLeft"===J.originPosition?(Q=J.translate[0],R=J.translate[1],J=J.scale[0]):(Q=d.isSome(J.extent)?J.extent.xmin:0,R=d.isSome(J.extent)?J.extent.ymax:
0,J=J.tolerance);L&&"upperLeft"===L.originPosition?(H=L.translate[0],A=L.translate[1],L=L.scale[0]):(H=d.isSome(L.extent)?L.extent.xmin:0,A=d.isSome(L.extent)?L.extent.ymax:0,L=L.tolerance);return Q===H&&R===A&&J===L};g.getQuantizedBoundsCoordsArray=q;g.getQuantizedBoundsCoordsArrayArray=z;g.getQuantizedBoundsPaths=function(J){return z([0,0,0,0],J)};g.getQuantizedBoundsPoints=function(J){const L=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return q(L,L,J)};g.getQuantizedBoundsRings=function(J){return z([0,0,0,0],J)};g.quantizeBounds=function(J,L,Q){L[0]=T(J,Q[0]);L[3]=I(J,Q[1]);L[2]=T(J,Q[2]);L[1]=I(J,Q[3]);return L};g.quantizeExtent=y;g.quantizeGeometry=function(J,L){return J&&L?ja.isPoint(L)?S(J,{},L,!1,!1):ja.isPolyline(L)?r(J,{},L,!1,!1):ja.isPolygon(L)?F(J,{},L,!1,!1):ja.isMultipoint(L)?B(J,{},L,!1,!1):ja.isExtent(L)?y(J,{},L,!1,!1):null:null};g.quantizeMultipoint=B;g.quantizePaths=k;g.quantizePoint=S;g.quantizePoints=E;g.quantizePolygon=
F;g.quantizePolyline=r;g.quantizeRings=t;g.quantizeX=T;g.quantizeY=I;g.toQuantizationTransform=function(J){return J?{originPosition:"upper-left"===J.originPosition?"upperLeft":"lower-left"===J.originPosition?"lowerLeft":J.originPosition,scale:J.tolerance?[J.tolerance,J.tolerance]:[1,1],translate:d.isSome(J.extent)?[J.extent.xmin,J.extent.ymax]:[0,0]}:null};g.unquantizeBounds=function(J,L,Q){return Q?(L[0]=m(J,Q[0]),L[1]=G(J,Q[3]),L[2]=m(J,Q[2]),L[3]=G(J,Q[1]),L):[m(J,L[0]),G(J,L[3]),m(J,L[2]),G(J,
L[1])]};g.unquantizeCoordsArray=Y;g.unquantizeCoordsArrayArray=M;g.unquantizeExtent=function(J,L,Q,R,H){L.xmin=m(J,Q.xmin);L.ymin=G(J,Q.ymin);L.xmax=m(J,Q.xmax);L.ymax=G(J,Q.ymax);L!==Q&&(R&&(L.zmin=Q.zmin,L.zmax=Q.zmax),H&&(L.mmin=Q.mmin,L.mmax=Q.mmax));return L};g.unquantizeMultipoint=function(J,L,Q,R,H){d.isSome(Q)&&(L.points=n(J,Q.points,R,H));return L};g.unquantizePaths=w;g.unquantizePoint=function(J,L,Q,R,H){if(d.isNone(Q))return L;L.x=m(J,Q.x);L.y=G(J,Q.y);L!==Q&&(R&&(L.z=Q.z),H&&(L.m=Q.m));
return L};g.unquantizePoints=n;g.unquantizePolygon=function(J,L,Q,R,H){d.isSome(Q)&&(L.rings=e(J,Q.rings,R,H));return L};g.unquantizePolyline=function(J,L,Q,R,H){d.isSome(Q)&&(L.paths=w(J,Q.paths,R,H));return L};g.unquantizeRings=e;g.unquantizeX=m;g.unquantizeY=G;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(g,d,ja){return function(){function T(N,
E,t){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=N.returnDistinctValues??!1;this.fieldsIndex=t;this.featureAdapter=E;if((E=N.outFields)&&!E.includes("*")){this.outFields=E;N=0;for(const m of E){var k=d.getExpressionFromFieldName(m);k=(E=this.fieldsIndex.get(k))?null:d.getWhereClause(k,t);E=E?E.name:d.getAliasFromFieldName(m)||`FIELD_EXP_${N++}`;this._fieldDataCache.set(m,{alias:E,clause:k})}}}var I=T.prototype;I.countDistinctValues=function(N){if(!this.returnDistinctValues)return N.length;
N.forEach(E=>this.getAttributes(E));return this._returnDistinctMap.size};I.getAttributes=function(N){N=this._processAttributesForOutFields(N);return this._processAttributesForDistinctValues(N)};I.getFieldValue=function(N,E,t){const k=t?t.name:E;let m=null;this._fieldDataCache.has(k)?m=this._fieldDataCache.get(k)?.clause:t||(m=d.getWhereClause(E,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:m}));return t?this.featureAdapter.getAttribute(N,k):m?.calculateValue(N,this.featureAdapter)};
I.getDataValue=function(N,E){const t=E.normalizationType,k=E.normalizationTotal;let m=E.field&&this.getFieldValue(N,E.field,this.fieldsIndex.get(E.field));E.field2&&(m=`${ja.processNullValue(m)}${E.fieldDelimiter}${ja.processNullValue(this.getFieldValue(N,E.field2,this.fieldsIndex.get(E.field2)))}`,E.field3&&(m=`${m}${E.fieldDelimiter}${ja.processNullValue(this.getFieldValue(N,E.field3,this.fieldsIndex.get(E.field3)))}`));t&&Number.isFinite(m)&&(N="field"===t&&E.normalizationField?this.getFieldValue(N,
E.normalizationField,this.fieldsIndex.get(E.normalizationField)):null,m=ja.getNormalizedValue(m,t,N,k));return m};I.getExpressionValue=function(N,E,t,k){N={attributes:this.featureAdapter.getAttributes(N),layer:{fields:this.fieldsIndex.fields}};t=k.createExecContext(N,t);return k.executeFunction(E,t)};I.getExpressionValues=function(N,E,t,k){const m={fields:this.fieldsIndex.fields};return N.map(G=>{G={attributes:this.featureAdapter.getAttributes(G),layer:m};G=k.createExecContext(G,t);return k.executeFunction(E,
G)})};I.validateItem=function(N,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:d.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E)?.clause?.testFeature(N,this.featureAdapter)??!1};I.validateItems=function(N,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:d.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E)?.clause?.testSet(N,this.featureAdapter)??!1};I._processAttributesForOutFields=function(N){const E=
this.outFields;if(!E||!E.length)return this.featureAdapter.getAttributes(N);const t={};for(const k of E){const {alias:m,clause:G}=this._fieldDataCache.get(k);t[m]=G?G.calculateValue(N,this.featureAdapter):this.featureAdapter.getAttribute(N,m)}return t};I._processAttributesForDistinctValues=function(N){if(g.isNone(N)||!this.returnDistinctValues)return N;var E=this.outFields,t=[];if(E)for(const m of E){var {alias:k}=this._fieldDataCache.get(m);t.push(N[k])}else for(k in N)t.push(N[k]);E=`${(E||["*"]).join(",")}=${t.join(",")}`;
t=this._returnDistinctMap.get(E)||0;this._returnDistinctMap.set(E,++t);return 1<t?null:N};return T}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(g,d,ja){function T(r){return null==r||"string"===typeof r&&!r?"\x3cNull\x3e":r}function I(r){const C=null!=r.minValue||null!=r.maxValue,K=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!C&&!K}function N(r){const {values:C,
useSampleStdDev:K,supportsNullCount:U}=r;var J=Number.POSITIVE_INFINITY;let L=Number.NEGATIVE_INFINITY,Q=null,R=null;var H=null;let A=null,l=0;const u=null==r.minValue?-Infinity:r.minValue,Z=null==r.maxValue?Infinity:r.maxValue;for(const ka of C)Number.isFinite(ka)?ka>=u&&ka<=Z&&(Q=null===Q?ka:Q+ka,J=Math.min(J,ka),L=Math.max(L,ka),l++):"string"===typeof ka&&l++;if(l&&null!=Q){R=Q/l;H=0;for(const ka of C)Number.isFinite(ka)&&ka>=u&&ka<=Z&&(H+=(ka-R)**2);A=K?1<l?H/(l-1):0:0<l?H/l:0;H=Math.sqrt(A)}else L=
J=null;J={avg:R,count:l,max:L,min:J,stddev:H,sum:Q,variance:A};U&&(J.nullcount=C.length-l);r.percentileParams&&(J.median=E(C,r.percentileParams));return J}function E(r,C){const {fieldType:K,value:U,orderBy:J,isDiscrete:L}=C,Q=t(K,"desc"===J);r=[...r].filter(l=>null!=l).sort((l,u)=>Q(l,u));if(0===r.length)return null;if(0>=U)return r[0];if(1<=U)return r[r.length-1];var R=(r.length-1)*U,H=Math.floor(R);C=H+1;R%=1;H=r[H];const A=r[C];return C>=r.length||L||"string"===typeof H||"string"===typeof A?H:
H*(1-R)+A*R}function t(r,C){const K=C?1:-1,U=G(C),J=m(C);if(!r||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...S].includes(r))return(L,Q)=>"number"===typeof L&&"number"===typeof Q?U(L,Q):"string"===typeof L&&"string"===typeof Q?J(L,Q):K;if("esriFieldTypeDate"===r)return(L,Q)=>{L=(new Date(L)).getTime();Q=(new Date(Q)).getTime();return isNaN(L)||isNaN(Q)?K:U(L,Q)};if(S.has(r))return(L,Q)=>U(L,Q);if("esriFieldTypeString"===r)return(L,Q)=>J(L,Q);if("esriFieldTypeGUID"===
r||"esriFieldTypeGlobalID"===r){const L=m(C);return(Q,R)=>L(Y(Q),Y(R))}return C?(L,Q)=>1:(L,Q)=>-1}function k(r,C,K){if(K){if(null==r)return null==C?0:1;if(null==C)return-1}else{if(null==r)return null==C?0:-1;if(null==C)return 1}return null}function m(r){return r?(C,K)=>{const U=k(C,K,!0);if(null!=U)return U;C=C.toUpperCase();K=K.toUpperCase();return C>K?-1:C<K?1:0}:(C,K)=>{const U=k(C,K,!1);if(null!=U)return U;C=C.toUpperCase();K=K.toUpperCase();return C<K?-1:C>K?1:0}}function G(r){return r?(C,K)=>
{const U=k(C,K,!0);return null!=U?U:K-C}:(C,K)=>{const U=k(C,K,!1);return null!=U?U:C-K}}function Y(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function M(r){return"coded-value"!==r?.type?[]:r.codedValues.map(C=>C.code)}function n(r,C){const K=e({field:C.field,normalizationType:C.normalizationType,normalizationField:C.normalizationField,classificationMethod:C.classificationMethod,standardDeviationInterval:C.standardDeviationInterval,
breakCount:C.numClasses||5});r=w(r,C.minValue,C.maxValue);return ja.createGenerateRendererClassBreaks({definition:K,values:r,normalizationTotal:C.normalizationTotal})}function w(r,C,K){const U=null==C?-Infinity:C,J=null==K?Infinity:K;return r.filter(L=>Number.isFinite(L)&&L>=U&&L<=J)}function e(r){const {breakCount:C,field:K,normalizationField:U,normalizationType:J}=r,L=r.classificationMethod||"equal-interval";return new d({breakCount:C,classificationField:K,classificationMethod:L,normalizationField:"field"===
J?U:void 0,normalizationType:J,standardDeviationInterval:"standard-deviation"===L?r.standardDeviationInterval||1:void 0})}function q(r,C){const {field:K,classificationMethod:U,standardDeviationInterval:J,normalizationType:L,normalizationField:Q,normalizationTotal:R,minValue:H,maxValue:A}=C,l=C.numBins||10;let u=C=null,Z=null;U&&"equal-interval"!==U||L?({classBreaks:r}=n(r,{field:K,normalizationType:L,normalizationField:Q,normalizationTotal:R,classificationMethod:U,standardDeviationInterval:J,minValue:H,
maxValue:A,numClasses:l}),C=r[0].minValue,u=r[r.length-1].maxValue,Z=r.map(ka=>[ka.minValue,ka.maxValue])):(null!=H&&null!=A?(C=H,u=A):(r=N({values:r,minValue:H,maxValue:A,useSampleStdDev:!L,supportsNullCount:I({normalizationType:L,normalizationField:Q,minValue:H,maxValue:A})}),C=r.min??null,u=r.max??null),Z=y(C??0,u??0,l));return{min:C,max:u,intervals:Z}}function z(r,C){let K=-1;for(let U=r.length-1;0<=U;U--)if(C>=r[U][0]){K=U;break}return K}function y(r,C,K){const U=(C-r)/K,J=[];let L;for(let Q=
1;Q<=K;Q++)L=r+U,L=Number(L.toFixed(16)),J.push([r,Q===K?C:L]),r=L;return J}const B=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,S=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),F="min max avg stddev count sum variance nullcount median".split(" ");g.calculateClassBreaks=n;g.calculateHistogram=function(r,C){var K=q(r,C);const U=K.intervals,J=K.min??0;K=K.max??0;const L=U.map((Q,R)=>({minValue:U[R][0],maxValue:U[R][1],count:0}));for(const Q of r)null!=
Q&&Q>=J&&Q<=K&&(r=z(U,Q),-1<r&&L[r].count++);return{bins:L,minValue:J,maxValue:K,normalizationTotal:C.normalizationTotal}};g.calculatePercentile=E;g.calculateStatistics=N;g.calculateStringStatistics=function(r){const C=r.returnDistinct?[...(new Set(r.values))]:r.values,K=C.filter(J=>null!=J).length,U={count:K};r.supportsNullCount&&(U.nullcount=C.length-K);r.percentileParams&&(U.median=E(C,r.percentileParams));return U};g.calculateUniqueValuesCount=function(r){const C={};for(let K of r){if(null==K||
"string"===typeof K&&""===K.trim())K=null;null==C[K]?C[K]={count:1,data:K}:C[K].count++}return{count:C}};g.createClassBreaksDefinition=e;g.createUVResult=function(r,C,K,U){r=r.count;const J=[];if(K&&C){K=[];var L=M(C[0]);for(const Q of L)if(C[1]){L=M(C[1]);for(const R of L)if(C[2]){L=M(C[2]);for(const H of L)K.push(`${T(Q)}${U}${T(R)}${U}${T(H)}`)}else K.push(`${T(Q)}${U}${T(R)}`)}else K.push(Q);for(const Q of K)r.hasOwnProperty(Q)||(r[Q]={data:Q,count:0})}for(const Q in r)C=r[Q],J.push({value:C.data,
count:C.count,label:C.label});return{uniqueValueInfos:J}};g.getAttributeComparator=t;g.getEqualIntervalBins=y;g.getNormalizedValue=function(r,C,K,U){let J=null;switch(C){case "log":0!==r&&(J=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(U)&&0!==U&&(J=r/U*100);break;case "field":Number.isFinite(K)&&0!==K&&(J=r/K);break;case "natural-log":0<r&&(J=Math.log(r));break;case "square-root":0<r&&(J=r**.5)}return J};g.isNullCountSupported=I;g.processNullValue=T;g.processSummaryStatisticsResult=
function(r,C){let K;for(K in r)F.includes(K)&&(Number.isFinite(r[K])||(r[K]=null));if(!C)return r;["avg","stddev","variance"].forEach(U=>{null!=r[U]&&(r[U]=Math.ceil(r[U]))});return r};g.resolveCBResult=function(r,C){let K=r.classBreaks;const U=K[0].minValue,J=K[K.length-1].maxValue,L="standard-deviation"===C;K=K.map(Q=>{const R=Q.label;Q={minValue:Q.minValue,maxValue:Q.maxValue,label:R};if(L&&R){const H=R.match(B)?.map(A=>+A.trim())??[];2===H.length?(Q.minStdDev=H[0],Q.maxStdDev=H[1],0>H[0]&&0<H[1]&&
(Q.hasAvg=!0)):1===H.length&&(R.includes("\x3c")?(Q.minStdDev=null,Q.maxStdDev=H[0]):R.includes("\x3e")&&(Q.minStdDev=H[0],Q.maxStdDev=null))}return Q});return{minValue:U,maxValue:J,classBreakInfos:K,normalizationTotal:r.normalizationTotal}};g.statisticTypes=F;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,d,ja,T,I,N,E,t,k){N=new ja.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ja=new ja.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});T=function(m){function G(Y){Y=m.call(this,Y)||this;Y.type="class-breaks-definition";
Y.breakCount=null;Y.classificationField=null;Y.classificationMethod=null;Y.normalizationField=null;Y.normalizationType=null;return Y}g._inheritsLoose(G,m);g._createClass(G,[{key:"standardDeviationInterval",set:function(Y){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",Y)}},{key:"definedInterval",set:function(Y){"defined-interval"===this.classificationMethod&&this._set("definedInterval",Y)}}]);return G}(T.JSONSupport);d.__decorate([t.enumeration({classBreaksDef:"class-breaks-definition"})],
T.prototype,"type",void 0);d.__decorate([I.property({json:{write:!0}})],T.prototype,"breakCount",void 0);d.__decorate([I.property({json:{write:!0}})],T.prototype,"classificationField",void 0);d.__decorate([I.property({type:String,json:{read:N.read,write:N.write}})],T.prototype,"classificationMethod",void 0);d.__decorate([I.property({json:{write:!0}})],T.prototype,"normalizationField",void 0);d.__decorate([I.property({json:{read:ja.read,write:ja.write}})],T.prototype,"normalizationType",void 0);d.__decorate([I.property({value:null,
json:{write:!0}})],T.prototype,"standardDeviationInterval",null);d.__decorate([I.property({value:null,json:{write:!0}})],T.prototype,"definedInterval",null);return T=d.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],T)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(g,d,ja){g.enumeration=function(T,I={}){T=T instanceof d.JSONMap?T:new d.JSONMap(T,I);T={type:I?.ignoreUnknown??!0?T.apiValues:String,json:{type:T.jsonValues,
read:I?.readOnly?!1:{reader:T.read},write:{writer:T.write}}};void 0!==I?.readOnly&&(T.readOnly=!!I.readOnly);void 0!==I?.default&&(T.json.default=I.default);void 0!==I?.name&&(T.json.name=I.name);void 0!==I?.nonNullable&&(T.nonNullable=I.nonNullable);return ja.property(T)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(g,d){function ja(M){var n=M.definition;const {classificationMethod:w,
normalizationType:e,definedInterval:q}=n;n=n.breakCount??1;const z=[];var y=M.values;if(0===y.length)return[];y=y.sort((K,U)=>K-U);var B=y[0],S=y[y.length-1];if("equal-interval"===w)if(y.length>=n){y=(S-B)/n;M=B;for(var F=1;F<n;F++){var r=Number((B+F*y).toFixed(6));z.push({minValue:M,maxValue:r,label:T(M,r,e)});M=r}z.push({minValue:M,maxValue:S,label:T(M,S,e)})}else y.forEach(K=>{z.push({minValue:K,maxValue:K,label:T(K,K,e)})});else if("natural-breaks"===w){y=I(y);M=N(y.uniqueValues,M.valueFrequency||
y.valueFrequency,n);for(F=1;F<n;F++)y.uniqueValues.length>F&&(r=Number(y.uniqueValues[M[F]].toFixed(6)),z.push({minValue:B,maxValue:r,label:T(B,r,e)}),B=r);z.push({minValue:B,maxValue:S,label:T(B,S,e)})}else if("quantile"===w)if(y.length>=n&&B!==S){M=Math.ceil(y.length/n);F=0;for(r=1;r<n;r++){var C=M+F-1;C>y.length&&(C=y.length-1);0>C&&(C=0);z.push({minValue:B,maxValue:y[C],label:T(B,y[C],e)});B=y[C];F+=M;M=Math.ceil((y.length-F)/(n-r))}z.push({minValue:B,maxValue:S,label:T(B,S,e)})}else for(n=-1,
S=0;S<y.length;S++)B=y[S],B!==n&&(n=B,z.push({minValue:n,maxValue:B,label:T(n,B,e)}),n=B);else if("standard-deviation"===w)if(M=k(y),F=m(y,M),0===F)z.push({minValue:y[0],maxValue:y[0],label:T(y[0],y[0],e)});else{y=t(B,S,n,M,F)*F;F=0;for(r=n;1<=r;r--)C=Number((M-(r-.5)*y).toFixed(6)),z.push({minValue:B,maxValue:C,label:T(B,C,e)}),B=C,F++;r=Number((M+.5*y).toFixed(6));z.push({minValue:B,maxValue:r,label:T(B,r,e)});B=r;F++;for(C=1;C<=n;C++)r=F===2*n?S:Number((M+(C+.5)*y).toFixed(6)),z.push({minValue:B,
maxValue:r,label:T(B,r,e)}),B=r,F++}else if("defined-interval"===w){if(!q)return z;n=y[0];S=y[y.length-1];y=Math.ceil((S-n)/q);B=n;for(M=1;M<y;M++)F=Number((n+M*q).toFixed(6)),z.push({minValue:B,maxValue:F,label:T(B,F,e)}),B=F;z.push({minValue:B,maxValue:S,label:T(B,S,e)})}return z}function T(M,n,w){let e=null;return e=M===n?w&&"percent-of-total"===w?M+"%":M.toString():w&&"percent-of-total"===w?M+"% - "+n+"%":M+" - "+n}function I(M){const n=[],w=[];let e=Number.MIN_VALUE,q=1,z=-1;for(let y=0;y<M.length;y++){const B=
M[y];B===e?(q++,w[z]=q):null!==B&&(n.push(B),e=B,q=1,w.push(q),z++)}return{uniqueValues:n,valueFrequency:w}}function N(M,n,w){var e=M.length;const q=[];w>e&&(w=e);for(var z=0;z<w;z++)q.push(Math.round(z*e/w-1));q.push(e-1);z=E(q,M,n,w);e=z.mean;z=z.sdcm;var y=w,B=0,S=0;let F=0,r=0,C=!0;for(let U=0;2>U&&C;U++){0===U&&(C=!1);for(var K=0;K<y-1;K++)for(;q[K+1]+1!==q[K+2];)if(q[K+1]+=1,B=G(K,q,M,n),F=B.sbMean,B=B.sbSdcm,S=G(K+1,q,M,n),r=S.sbMean,S=S.sbSdcm,B+S<z[K]+z[K+1])z[K]=B,z[K+1]=S,e[K]=F,e[K+1]=
r,C=!0;else{--q[K+1];break}for(K=y-1;0<K;K--)for(;q[K]!==q[K-1]+1;)if(--q[K],B=G(K-1,q,M,n),F=B.sbMean,B=B.sbSdcm,S=G(K,q,M,n),r=S.sbMean,S=S.sbSdcm,B+S<z[K-1]+z[K])z[K-1]=B,z[K]=S,e[K-1]=F,e[K]=r,C=!0;else{q[K]+=1;break}}C&&(z=E(q,M,n,w));return q}function E(M,n,w,e){let q=[];var z=[],y=[];let B=0;const S=[],F=[];for(var r=0;r<e;r++){var C=G(r,M,n,w);S.push(C.sbMean);F.push(C.sbSdcm);B+=F[r]}C=B;for(r=!0;r||B<C;){r=!1;q=[];for(z=0;z<e;z++)q.push(M[z]);for(y=0;y<e;y++)for(C=M[y]+1;C<=M[y+1];C++)if(z=
n[C],0<y&&C!==M[y+1]&&Math.abs(z-S[y])>Math.abs(z-S[y-1]))M[y]=C;else if(y<e-1&&M[y]!==C-1&&Math.abs(z-S[y])>Math.abs(z-S[y+1])){M[y+1]=C-1;break}C=B;B=0;z=[];y=[];for(let K=0;K<e;K++){z.push(S[K]);y.push(F[K]);const U=G(K,M,n,w);S[K]=U.sbMean;F[K]=U.sbSdcm;B+=F[K]}}if(B>C){for(n=0;n<e;n++)M[n]=q[n],S[n]=z[n],F[n]=y[n];B=C}return{mean:S,sdcm:F}}function t(M,n,w,e,q){M=Math.max(e-M,n-e)/q/w;return 1<=M?1:.5<=M?.5:.25}function k(M){let n=0;for(let w=0;w<M.length;w++)n+=M[w];return n/=M.length}function m(M,
n){let w=0;for(let e=0;e<M.length;e++){const q=M[e];w+=(q-n)*(q-n)}w/=M.length;return Math.sqrt(w)}function G(M,n,w,e){var q=0,z=0;for(var y=n[M]+1;y<=n[M+1];y++){const B=e[y];q+=w[y]*B;z+=B}0>=z&&Y.warn("Exception in Natural Breaks calculation");q/=z;z=0;for(y=n[M]+1;y<=n[M+1];y++)z+=e[y]*(w[y]-q)**2;return{sbMean:q,sbSdcm:z}}const Y=d.getLogger("esri.rest.support.generateRendererUtils");g.createGenerateRendererClassBreaks=function(M){const {normalizationTotal:n}=M;return{classBreaks:ja(M),normalizationTotal:n}};
g.createGenerateRendererUniqueValues=function(M){M=I(M);const n=[],w=M.uniqueValues.length;for(let e=0;e<w;e++){const q=M.uniqueValues[e];n.push({value:q,count:M.valueFrequency[e],label:q.toString()})}return{uniqueValues:n}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(g){g.makeEdgeCandidate=function(d,ja,T,I,N,E=!1){return{objectId:d,target:ja,distance:T,type:"edge",start:I,end:N,draped:E}};g.makeVertexCandidate=
function(d,ja,T){return{objectId:d,target:ja,distance:T,type:"vertex"}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(g,d,ja,T,I,N,E,t){function k(W,ea,pa){if(W)for(const wa of W)(W=(W=N.getDeepValue(wa,ea))&&"function"!==typeof W&&pa.get(W))&&N.setDeepValue(wa,
W.name,ea)}function m(W,ea){if(!W||!ea)return[];ta.clear();G(ta,W,ea);return Array.from(ta).sort()}function G(W,ea,pa){if(pa)if(ea?.fields?.length)if(pa.includes("*"))for(const {name:wa}of ea.fields)W.add(wa);else for(const wa of pa)Y(W,ea,wa);else if(pa.includes("*"))W.clear(),W.add("*");else for(const wa of pa)null!=wa&&W.add(wa)}function Y(W,ea,pa){"string"===typeof pa&&(ea?(ea=ea.get(pa))&&W.add(ea.name):W.add(pa))}function M(W,ea,pa){return n.apply(this,arguments)}function n(){n=ja._asyncToGenerator(function*(W,
ea,pa){if(pa){var {arcadeUtils:wa}=yield t.loadArcade();pa=wa.extractFieldNames(pa,ea?.fields?.map(Ca=>Ca.name));for(const Ca of pa)Y(W,ea,Ca)}});return n.apply(this,arguments)}function w(W,ea,pa){return e.apply(this,arguments)}function e(){e=ja._asyncToGenerator(function*(W,ea,pa){if(pa&&"1\x3d1"!==pa){const wa=(yield new Promise((Ca,Oa)=>g(["../../core/sql/WhereClause"],Ca,Oa))).WhereClause.create(pa,ea);if(!wa.isStandardized)throw new T("fieldUtils:collectFilterFields","Where clause is not standardized",
{where:pa});G(W,ea,wa.fieldNames)}});return e.apply(this,arguments)}function q(W,ea){for(const pa of W)if(pa&&pa.valueType&&pa.valueType===ea)return pa.name;return null}function z(){z=ja._asyncToGenerator(function*(W){if(!W)return[];const ea=new Set;yield y(ea,W);return Array.from(ea).sort()});return z.apply(this,arguments)}function y(W,ea){return B.apply(this,arguments)}function B(){B=ja._asyncToGenerator(function*(W,ea){if(ea){var pa=ea.elevationInfo?.featureExpressionInfo;if(pa)return pa.collectRequiredFields(W,
ea.fieldsIndex)}});return B.apply(this,arguments)}function S(){S=ja._asyncToGenerator(function*(W,ea,pa){if(ea&&pa&&"fields"in pa){var wa=[];wa.push(F(W,ea,pa.popupTemplate));pa.fields&&wa.push(...pa.fields.map(function(){var Ca=ja._asyncToGenerator(function*(Oa){Oa.onStatisticExpression?M(W,ea.fieldsIndex,Oa.onStatisticExpression.expression):W.add(Oa.onStatisticField)});return function(Oa){return Ca.apply(this,arguments)}}()));yield Promise.all(wa)}});return S.apply(this,arguments)}function F(W,
ea,pa){return r.apply(this,arguments)}function r(){r=ja._asyncToGenerator(function*(W,ea,pa){const wa=[];pa?.expressionInfos&&wa.push(...pa.expressionInfos.map(Ca=>M(W,ea.fieldsIndex,Ca.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ca of pa)"expression"===Ca.type&&Ca.expressionInfo&&wa.push(M(W,ea.fieldsIndex,Ca.expressionInfo.expression));yield Promise.all(wa)});return r.apply(this,arguments)}function C(){C=ja._asyncToGenerator(function*(W,ea,pa){ea&&(ea.timeInfo&&I.isSome(pa)&&pa.timeExtent&&
G(W,ea.fieldsIndex,[ea.timeInfo.startField,ea.timeInfo.endField]),ea.floorInfo&&G(W,ea.fieldsIndex,[ea.floorInfo.floorField]),I.isSome(pa)&&I.isSome(pa.where)&&(yield w(W,ea.fieldsIndex,pa.where)))});return C.apply(this,arguments)}function K(){K=ja._asyncToGenerator(function*(W,ea,pa){ea&&pa&&(yield Promise.all(pa.map(wa=>U(W,ea,wa))))});return K.apply(this,arguments)}function U(W,ea,pa){return J.apply(this,arguments)}function J(){J=ja._asyncToGenerator(function*(W,ea,pa){ea&&pa&&(pa.valueExpression?
yield M(W,ea.fieldsIndex,pa.valueExpression):pa.field&&Y(W,ea.fieldsIndex,pa.field))});return J.apply(this,arguments)}function L(){L=ja._asyncToGenerator(function*(W){if(!W)return[];const ea="timeInfo"in W&&W.timeInfo;return ea?m(W.fieldsIndex,[W.trackIdField,ea.startField,ea.endField]):[]});return L.apply(this,arguments)}function Q(){Q=ja._asyncToGenerator(function*(W){if(!W)return[];const ea=new Set;yield R(ea,W);return Array.from(ea).sort()});return Q.apply(this,arguments)}function R(W,ea){return H.apply(this,
arguments)}function H(){H=ja._asyncToGenerator(function*(W,ea){const {labelingInfo:pa,fieldsIndex:wa}=ea;pa&&pa.length&&(yield Promise.all(pa.map(Ca=>A(W,wa,Ca))))});return H.apply(this,arguments)}function A(W,ea,pa){return l.apply(this,arguments)}function l(){l=ja._asyncToGenerator(function*(W,ea,pa){if(pa){var wa=pa.getLabelExpression();pa=pa.where;"arcade"===wa.type?yield M(W,ea,wa.expression):(wa=wa.expression.match(/{[^}]*}/g))&&wa.forEach(Ca=>{Y(W,ea,Ca.slice(1,-1))});yield w(W,ea,pa)}});return l.apply(this,
arguments)}function u(W){return"number"===typeof W&&!isNaN(W)&&isFinite(W)}function Z(W){return null===W||u(W)}function ka(W){return null===W||x(W)}function ua(W){return null!=W&&"string"===typeof W}function za(W){return null===W||ua(W)}function Ha(){return!0}function Ka(W,ea){let pa;switch(W.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=W.nullable?ka:x;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=
W.nullable?Z:u;break;case "string":case "esriFieldTypeString":pa=W.nullable?za:ua;break;default:pa=Ha}return 1===arguments.length?pa:pa(ea)}function Ia(W){return null!=W&&da.has(W.type)}function Ua(W,ea){return null==W||W.nullable&&null===ea?null:Ia(W)&&!Qa(W.type,Number(ea))?d.NumericRangeValidationError.OUT_OF_RANGE:Ka(W,ea)?W.domain?E.validateDomainValue(W.domain,ea):null:d.TypeValidationError.INVALID_TYPE}function Qa(W,ea){W="string"===typeof W?Sa(W):W;if(!W)return!1;const pa=W.min,wa=W.max;return W.isInteger?
x(ea)&&ea>=pa&&ea<=wa:ea>=pa&&ea<=wa}function Sa(W){switch(W){case "esriFieldTypeSmallInteger":case "small-integer":return aa;case "esriFieldTypeInteger":case "integer":return ia;case "esriFieldTypeSingle":case "single":return na;case "esriFieldTypeDouble":case "double":return ra}}function bb(W,ea,pa){if(!ea||!ea.attributes||!W){if(I.isSome(pa))for(var wa of W??[])pa.add(wa);return!0}ea=ea.attributes;wa=!1;for(const Ca of W)if(!(Ca in ea))if(wa=!0,I.isSome(pa))pa.add(Ca);else break;return wa}function Xa(){Xa=
ja._asyncToGenerator(function*(W,ea){const pa=new Set;for(const wa of ea)yield M(pa,W.fieldsIndex,wa);return Array.from(pa).sort()});return Xa.apply(this,arguments)}const Aa=/^([0-9])/,Da=/[^a-z0-9_\u0080-\uffff]/gi,Fa=/_{2,}/g,c=/^_/,p=/_$/,V="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),la=["field","normalizationField"],ta=new Set,x=(()=>"isInteger"in Number?
Number.isInteger:W=>"number"===typeof W&&isFinite(W)&&Math.floor(W)===W)(),O=["integer","small-integer","single","double"],da=new Set([...O,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const aa={min:-32768,max:32767,isInteger:!0},ia={min:-2147483648,max:2147483647,isInteger:!0},na={min:-3.4E38,max:1.2E38,isInteger:!1},ra={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=M;d.collectElevationFields=y;d.collectFeatureReductionFields=function(W,ea,pa){return S.apply(this,arguments)};d.collectField=Y;d.collectFields=G;d.collectFilterFields=function(W,ea,pa){return C.apply(this,arguments)};d.collectLabelingFields=R;d.collectOrderByInfos=function(W,ea,
pa){return K.apply(this,arguments)};d.collectPopupTemplateFields=F;d.doubleRange=ra;d.featureHasFields=function(W,ea){return!bb(W,ea,null)};d.fixFields=m;d.fixRendererFields=function(W,ea){if(null!=W&&null!=ea)for(const pa of Array.isArray(W)?W:[W])if(k(V,pa,ea),"visualVariables"in pa&&pa.visualVariables)for(const wa of pa.visualVariables)k(la,wa,ea)};d.fixTimeInfoFields=function(W,ea){if(null!=W&&ea?.fields?.length)if("startField"in W){var pa=ea.get(W.startField);ea=ea.get(W.endField);W.startField=
pa?.name??null;W.endField=ea?.name??null}else pa=ea.get(W.startTimeField),ea=ea.get(W.endTimeField),W.startTimeField=pa?.name??null,W.endTimeField=ea?.name??null};d.getDisplayFieldName=function({displayField:W,fields:ea}){if(W)return W;if(!ea||!ea.length)return null;if(!(W=q(ea,"name-or-title")||q(ea,"unique-identifier")||q(ea,"type-or-category")))a:{for(const pa of ea)if(pa&&pa.name&&(ea=pa.name.toLowerCase(),ea.includes("name")||ea.includes("title"))){W=pa.name;break a}W=null}return W};d.getElevationFields=
function(W){return z.apply(this,arguments)};d.getExpressionFields=function(W,ea){return Xa.apply(this,arguments)};d.getFeatureEditFields=function(W){if(!W)return[];const ea="editFieldsInfo"in W&&W.editFieldsInfo;return ea?m(W.fieldsIndex,[ea&&ea.creatorField,ea&&ea.creationDateField,ea&&ea.editorField,ea&&ea.editDateField]):[]};d.getFeatureGeometryFields=function(W){if(!W)return[];const ea=W.geometryFieldsInfo;return ea?m(W.fieldsIndex,[ea.shapeAreaField,ea.shapeLengthField]):[]};d.getFieldDefaultValue=
function(W){const ea=W.defaultValue;if(void 0!==ea&&Ka(W,ea))return ea;if(W.nullable)return null};d.getFieldRange=function(W){const ea=E.getDomainRange(W.domain);if(ea)return ea;if(Ia(W))return Sa(W.type)};d.getLabelingFields=function(W){return Q.apply(this,arguments)};d.getNumericTypeForValue=function(W){if(!u(W))return null;if(x(W)){if(W>=aa.min&&W<=aa.max)return"esriFieldTypeSmallInteger";if(W>=ia.min&&W<=ia.max)return"esriFieldTypeInteger"}return W>=na.min&&W<=na.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};
d.getTimeFields=function(W){return L.apply(this,arguments)};d.integerRange=ia;d.isDateField=function(W){return null!=W&&("date"===W.type||"esriFieldTypeDate"===W.type)};d.isNumberInRange=Qa;d.isNumericField=Ia;d.isRasterPixelValueField=function(W){return W?["raster.itempixelvalue","raster.servicepixelvalue"].some(ea=>W.toLowerCase().startsWith(ea)):!1};d.isStringField=function(W){return null!=W&&("string"===W.type||"esriFieldTypeString"===W.type)};d.isValidFieldValue=function(W,ea){return null===
Ua(W,ea)};d.isValueMatchingFieldType=Ka;d.normalizeFieldName=function(W){return null==W?null:(W=W.trim().replace(Da,"_").replace(Fa,"_").replace(c,"").replace(p,"").replace(Aa,"F$1"))?W:null};d.numericTypes=O;d.packFields=function(W,ea,pa=1){if(!ea||!W)return[];if(ea.includes("*"))return["*"];ea=m(W,ea);return ea.length/W.fields.length>=pa?["*"]:ea};d.populateMissingFields=bb;d.rendererFields=V;d.sanitizeNullFieldValue=function(W){return null==W||"number"===typeof W&&isNaN(W)?null:W};d.singleRange=
na;d.smallIntegerRange=aa;d.unpackFieldNames=function(W,ea){return I.isNone(ea)||I.isNone(W)?[]:ea.includes("*")?(W.fields??[]).map(pa=>pa.name):ea};d.validateFieldValue=Ua;d.validationErrorToString=function(W,ea,pa){switch(W){case E.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;case E.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;
case d.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${ea.name}, type: ${ea.type}, nullable: ${ea.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:const {min:wa,max:Ca}=Sa(ea.type);return`Value ${pa} is out of range for the number type - field: ${ea.name}, type: ${ea.type}, value range is ${wa} to ${Ca}`}};d.visualVariableFields=la;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(g){g.DomainValidationError=void 0;(function(d){d.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";d.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(g.DomainValidationError||(g.DomainValidationError={}));g.getDomainRange=function(d){if(d&&"range"===d.type)return{min:"range"in d?d.range[0]:d.minValue,max:"range"in d?d.range[1]:d.maxValue}};g.validateDomainValue=function(d,ja){switch(d.type){case "range":const T="range"in d?d.range[0]:d.minValue;d="range"in
d?d.range[1]:d.maxValue;if(null!=T&&+ja<T||null!=d&&+ja>d)return g.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==d.codedValues||d.codedValues.every(I=>null==I||I.code!==ja))return g.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==d.codedValues||d.codedValues.every(I=>null==I||I.code!==ja))return g.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(g,d,ja,T,I,N,E,t){function k(){G||(G=ja._asyncToGenerator(function*(){const M=yield new Promise((n,w)=>g(["./arcadeUtils"],n,w));return{arcade:M.arcade,arcadeUtils:M,Dictionary:M.Dictionary,Feature:M.arcadeFeature}})());return G}const m=N.getLogger("esri.support.arcadeOnDemand");let G;T=(M,n,w)=>Y.create(M,n,w,null,["$feature","$view"]);let Y=function(){function M(w,e,q,z,y,B,S){this.script=w;this.evaluate=z;this.fields=Array.isArray(B)?B:B.fields;this._syntaxTree=q;this._arcade=e;this._arcadeFeature=
y;this._spatialReference=S;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}M.create=function(){var w=ja._asyncToGenerator(function*(e,q,z,y,B,S){const {arcade:F,Feature:r,Dictionary:C}=yield k(),K=t.fromJSON(q);let U;try{U=F.parseScript(e,S)}catch(A){return m.error(new I("arcade-bad-expression","Failed to parse arcade script",{script:e,error:A})),null}B=B.reduce((A,l)=>({...A,[l]:null}),{});let J=null;
E.isSome(y)&&(J=new C(y),J.immutable=!0,B.$config=null);S=(y=F.scriptUsesGeometryEngine(U))&&F.enableGeometrySupport();const L=F.scriptUsesFeatureSet(U)&&F.enableFeatureSetSupport(),Q=(q=F.scriptIsAsync(U))&&F.enableAsyncSupport();B={vars:B,spatialReference:K,useAsync:!!Q};yield Promise.all([S,L,Q]);S=new Set;yield F.loadDependentModules(S,U,null,q,y);const R=new C;R.immutable=!1;R.setField("scale",0);const H=F.compileScript(U,B);return new M(e,F,U,A=>{"$view"in A&&A.$view&&(R.setField("scale","object"===
typeof A.$view?A.$view.scale:void 0),A.$view=R);J&&(A.$config=J);return H({vars:A,spatialReference:K})},new r,z,K)});return function(e,q,z,y,B,S){return w.apply(this,arguments)}}();var n=M.prototype;n.repurposeFeature=function(w){w.geometry&&!w.geometry.spatialReference&&(w.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(w.geometry,w.attributes,{fields:this.fields});return this._arcadeFeature};n.referencesGeometry=function(){return this._referencesGeometry};
n.referencesScale=function(){return this._referencesScale};return M}();d.ArcadeExpression=Y;d.createDictionaryExpression=(M,n,w,e)=>Y.create(M,n,w,e,["$feature","$view"]);d.createLabelExpression=(M,n,w)=>Y.create(M,n,w,null,["$feature"]);d.createRendererExpression=T;d.createVVExpression=T;d.loadArcade=k;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y,M){function n(){return new Promise((z,y)=>g(["../../../geometry/geometryEngineJSON"],z,y))}function w(){w=ja._asyncToGenerator(function*(z,y,B){const {spatialRel:S,geometry:F}=z;if(F){if(null==S||!0!==q.spatialRelationship[S])throw new T("feature-store:unsupported-query","Unsupported query spatial relationship",{query:z});if(t.isValid(F.spatialReference)&&t.isValid(B)){if(null==F||!0!==q.queryGeometry[E.getJsonType(F)])throw new T("feature-store:unsupported-query",
"Unsupported query geometry type",{query:z});if(null==y||!0!==q.layerGeometry[y])throw new T("feature-store:unsupported-query","Unsupported layer geometry type",{query:z});if(z.outSR)return Y.checkProjectionSupport(z.geometry&&z.geometry.spatialReference,z.outSR)}}});return w.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},q={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(z){if(E.isExtent(z))return!0;if(E.isPolygon(z)){for(const y of z.rings)if(5!==y.length||y[0][0]!==y[1][0]||y[0][0]!==y[4][0]||y[2][0]!==y[3][0]||y[0][1]!==y[3][1]||y[0][1]!==y[4][1]||y[1][1]!==y[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(z,y,B){return w.apply(this,
arguments)};d.getSpatialQueryOperator=function(z,y,B,S,F){if(E.isPolygon(y)&&"esriGeometryPoint"===B&&("esriSpatialRelIntersects"===z||"esriSpatialRelContains"===z)){const r=m.convertFromPolygon(new G,y,!1,!1);return Promise.resolve(C=>k.polygonContainsPoint(r,!1,!1,C))}if(E.isPolygon(y)&&"esriGeometryMultipoint"===B){const r=m.convertFromPolygon(new G,y,!1,!1);if("esriSpatialRelContains"===z)return Promise.resolve(C=>k.polygonContainsMultipoint(r,!1,!1,C,S,F))}if(E.isExtent(y)&&"esriGeometryPoint"===
B&&("esriSpatialRelIntersects"===z||"esriSpatialRelContains"===z))return Promise.resolve(r=>I.extentContainsPoint(y,M.getGeometry(B,S,F,r)));if(E.isExtent(y)&&"esriGeometryMultipoint"===B&&"esriSpatialRelContains"===z)return Promise.resolve(r=>I.extentContainsMultipoint(y,M.getGeometry(B,S,F,r)));if(E.isExtent(y)&&"esriSpatialRelIntersects"===z){const r=N.getExtentIntersector(B);return Promise.resolve(C=>r(y,M.getGeometry(B,S,F,C)))}return n().then(r=>{const C=r[e[z]].bind(null,y.spatialReference,
y);return K=>C(M.getGeometry(B,S,F,K))})};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(g,d){g.extentIntersectsExtent=d.extentIntersectsExtent;g.extentIntersectsMultipoint=d.extentIntersectsMultipoint;g.extentIntersectsPoint=d.extentIntersectsPoint;g.extentIntersectsPolygon=d.extentIntersectsPolygon;g.extentIntersectsPolyline=d.extentIntersectsPolyline;g.extentIntersectsRings=d.extentIntersectsRings;
g.getFeatureExtentIntersector=d.getFeatureExtentIntersector;g.isSelfIntersecting=d.isSelfIntersecting;g.segmentIntersects=d.segmentIntersects;g.getExtentIntersector=function(ja){return"mesh"===ja?d.extentIntersectsExtent:d.getFeatureExtentIntersector(ja)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(g){function d(ja,T,I,N,E){if(!ja)return!1;T=T?I?4:3:I?3:2;const {coords:t,lengths:k}=ja;I=!1;ja=0;for(const G of k){var m=
ja;for(let Y=ja,M=ja+G*T;Y<M;Y+=T){m=Y+T;m===M&&(m=ja);const n=t[Y],w=t[Y+1],e=t[m];m=t[m+1];(w<E&&m>=E||m<E&&w>=E)&&n+(E-w)/(m-w)*(e-n)<N&&(I=!I)}ja+=G*T}return I}g.polygonContainsCoords=d;g.polygonContainsMultipoint=function(ja,T,I,N,E,t){E=E?t?4:3:t?3:2;const {coords:k,lengths:m}=N;if(!m)return!1;for(let G=0,Y=0;G<m.length;G++,Y+=E)if(!d(ja,T,I,k[Y],k[Y+1]))return!1;return!0};g.polygonContainsPoint=function(ja,T,I,N){return d(ja,T,I,N.coords[0],N.coords[1])};Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(g,d){function ja(){ja=d._asyncToGenerator(function*(E,t){if(!E)return null;const k=t.featureAdapter,{startTimeField:m,endTimeField:G}=E;let Y=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY;if(m&&G)yield t.forEach(n=>{const w=k.getAttribute(n,m);n=k.getAttribute(n,G);null==w||isNaN(w)||(Y=Math.min(Y,w));null==n||isNaN(n)||(M=Math.max(M,n))});else{const n=
m||G;yield t.forEach(w=>{w=k.getAttribute(w,n);null==w||isNaN(w)||(Y=Math.min(Y,w),M=Math.max(M,w))})}return{start:Y,end:M}});return ja.apply(this,arguments)}function T(E,t,k,m,G){if(null!=m&&null!=G)return Y=>{const M=E.getAttribute(Y,t);Y=E.getAttribute(Y,k);return(null==M||M<=G)&&(null==Y||Y>=m)};if(null!=m)return Y=>{Y=E.getAttribute(Y,k);return null==Y||Y>=m};if(null!=G)return Y=>{Y=E.getAttribute(Y,t);return null==Y||Y<=G}}function I(E,t,k,m){if(null!=k&&null!=m&&k===m)return G=>E.getAttribute(G,
t)===k;if(null!=k&&null!=m)return G=>{G=E.getAttribute(G,t);return G>=k&&G<=m};if(null!=k)return G=>E.getAttribute(G,t)>=k;if(null!=m)return G=>E.getAttribute(G,t)<=m}function N(){return()=>!1}g.getTimeExtent=function(E,t){return ja.apply(this,arguments)};g.getTimeOperator=function(E,t,k){if(!t||!E)return null;const {startTimeField:m,endTimeField:G}=E;if(!m&&!G)return null;const {start:Y,end:M}=t;return null===Y&&null===M?null:void 0===Y&&void 0===M?N():m&&G?T(k,m,G,Y,M):I(k,m||G,Y,M)};Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(g,d){function ja(I){return"oid"===I.type||"esriFieldTypeOID"===I.type}function T(I){return"global-id"===I.type||"esriFieldTypeGlobalID"===I.type}return function(){function I(E=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=
[];this._requiredFields=null;if(E){this.fields=E;var t=[];for(const k of E){E=k?.name;const m=d.normalizeFieldName(k?.name)?.toLowerCase()??"";if(E&&m){const G=E.trim().toLowerCase();this._fieldsMap.set(E,k);this._fieldsMap.set(G,k);this._normalizedFieldsMap.set(m,k);t.push(G);"date"===k.type||"esriFieldTypeDate"===k.type?(this.dateFields.push(k),this._dateFieldsSet.add(k)):d.isNumericField(k)&&(this._numericFieldsSet.add(k),this.numericFields.push(k));ja(k)||T(k)||(k.editable=null==k.editable?!0:
!!k.editable,k.nullable=null==k.nullable?!0:!!k.nullable)}}t.sort();this.uid=t.join(",")}}var N=I.prototype;N.destroy=function(){this._fieldsMap.clear()};N.has=function(E){return null!=this.get(E)};N.get=function(E){if(E){var t=this._fieldsMap.get(E);if(t)return t;(t=this._fieldsMap.get(E.trim().toLowerCase())??this._normalizedFieldsMap.get(d.normalizeFieldName(E)?.toLowerCase()??""))&&this._fieldsMap.set(E,t);return t}};N.isDateField=function(E){return this._dateFieldsSet.has(this.get(E))};N.isNumericField=
function(E){return this._numericFieldsSet.has(this.get(E))};N.normalizeFieldName=function(E){if(E=this.get(E))return E.name??void 0};g._createClass(I,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const E of this.fields)ja(E)||T(E)||E.nullable||void 0!==d.getFieldDefaultValue(E)||this._requiredFields.push(E)}return this._requiredFields}}]);return I}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y,M,n,w){function e(U){return q.has(U)?q.get(U):"number"===typeof U?U:1}g.Task=void 0;(function(U){U[U.YIELD=1]="YIELD"})(g.Task||(g.Task={}));g.TaskPriority=void 0;(function(U){U.RESOURCE_CONTROLLER_IMMEDIATE="immediate";U.RESOURCE_CONTROLLER="schedule";U.SLIDE="slide";U.STREAM_DATA_LOADER="stream loader";U.ELEVATION_QUERY="elevation query";U.TERRAIN_SURFACE="terrain";U.SURFACE_GEOMETRY_UPDATES="surface geometry updates";U.LOD_RENDERER="LoD renderer";U.GRAPHICS_CORE=
"Graphics3D";U.I3S_CONTROLLER="I3S";U.POINT_CLOUD_LAYER="point cloud";U.FEATURE_TILE_FETCHER="feature fetcher";U.OVERLAY="overlay";U.STAGE="stage";U.GRAPHICS_DECONFLICTOR="graphics deconflictor";U.FILTER_VISIBILITY="Graphics3D filter visibility";U.SCALE_VISIBILITY="Graphics3D scale visibility";U.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";U.POINT_OF_INTEREST_FREQUENT="POI frequent";U.POINT_OF_INTEREST_INFREQUENT="POI infrequent";U.LABELER="labeler";U.FEATURE_QUERY_ENGINE="feature query";U.FEATURE_TILE_TREE=
"feature tile tree";U.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";U.ELEVATION_ALIGNMENT="elevation alignment";U.TEXT_TEXTURE_ATLAS="text texture atlas";U.TEXTURE_UNLOAD="texture unload";U.LINE_OF_SIGHT_TOOL="line of sight tool";U.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";U.ELEVATION_PROFILE="elevation profile";U.SNAPPING="snapping";U.SHADOW_ACCUMULATOR="shadow accumulator";U.CLOUDS_GENERATOR="clouds generator";U[U.TEST_PRIO=1]="TEST_PRIO"})(g.TaskPriority||(g.TaskPriority=
{}));const q=new Map([[g.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[g.TaskPriority.RESOURCE_CONTROLLER,4],[g.TaskPriority.SLIDE,0],[g.TaskPriority.STREAM_DATA_LOADER,0],[g.TaskPriority.ELEVATION_QUERY,0],[g.TaskPriority.TERRAIN_SURFACE,1],[g.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[g.TaskPriority.LOD_RENDERER,2],[g.TaskPriority.GRAPHICS_CORE,2],[g.TaskPriority.I3S_CONTROLLER,2],[g.TaskPriority.POINT_CLOUD_LAYER,2],[g.TaskPriority.FEATURE_TILE_FETCHER,2],[g.TaskPriority.OVERLAY,4],[g.TaskPriority.STAGE,
4],[g.TaskPriority.GRAPHICS_DECONFLICTOR,4],[g.TaskPriority.FILTER_VISIBILITY,4],[g.TaskPriority.SCALE_VISIBILITY,4],[g.TaskPriority.FRUSTUM_VISIBILITY,4],[g.TaskPriority.CLOUDS_GENERATOR,4],[g.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[g.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[g.TaskPriority.LABELER,8],[g.TaskPriority.FEATURE_QUERY_ENGINE,8],[g.TaskPriority.FEATURE_TILE_TREE,16],[g.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[g.TaskPriority.ELEVATION_ALIGNMENT,12],[g.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[g.TaskPriority.TEXTURE_UNLOAD,12],[g.TaskPriority.LINE_OF_SIGHT_TOOL,16],[g.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[g.TaskPriority.SNAPPING,0],[g.TaskPriority.SHADOW_ACCUMULATOR,30]]),z=G.Milliseconds(6.5),y=G.Milliseconds(1),B=G.Milliseconds(30),S=G.Milliseconds(1E3/30),F=G.Milliseconds(100);var r;(function(U){let J=function(){function R(){this._updating=new Y.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new E("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new Q;this._state=w.RenderState.INTERACTING;this._tasks=new t;this._runQueue=new t;this._load=0;this._idleStateCallbacks=new t;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=m.watch(()=>n.SCHEDULER_LOG_SLOW_TASKS,l=>this._debug=l,m.initial);for(const l of Object.keys(g.TaskPriority))this.performanceInfo.tasks.set(g.TaskPriority[l],new E(g.TaskPriority[l]));const A=this;this._test={FRAME_SAFETY_BUDGET:z,INTERACTING_BUDGET:S,IDLE_BUDGET:F,get availableBudget(){return A._budget.budget},
usedBudget:0,getBudget:()=>A._budget,setBudget:l=>A._budget=l,updateTask:l=>this._updateTask(l),getState:l=>this._getState(l),getRuntime:l=>this._getRuntime(l),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var H=R.prototype;H._updatingChanged=function(){this._updating.set(this._tasks.some(A=>A.needsUpdate))};H.destroy=function(){this._tasks.toArray().forEach(A=>A.remove());this._tasks.clear();N.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};H.taskRunningChanged=function(A){this._updatingChanged();A&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};H.registerTask=function(A,l){const u=e(A);l=new L(this,A,l,u);this._tasks.push(l);this._updatingChanged();this.performanceInfo.tasks.has(A)||this.performanceInfo.tasks.set(A,new E(A));return l};H.registerIdleStateCallbacks=
function(A,l){const u={idleBegin:A,idleEnd:l};this._idleStateCallbacks.push(u);this.state===w.RenderState.IDLE&&this._idleUpdatesStartFired&&u.idleBegin();const Z=this;return{remove:()=>this._removeIdleStateCallbacks(u),set idleBegin(ka){Z._idleUpdatesStartFired&&(u.idleEnd(),Z._state===w.RenderState.IDLE&&ka());u.idleBegin=ka},set idleEnd(ka){u.idleEnd=ka}}};H.updateBudget=function(A){this._test.usedBudget=0;++this._frameNumber;let l=z,u=A.frameDuration,Z=y;switch(this.state){case w.RenderState.IDLE:l=
G.Milliseconds(0);u=G.Milliseconds(Math.max(F,A.frameDuration));Z=B;break;case w.RenderState.INTERACTING:u=G.Milliseconds(Math.max(S,A.frameDuration))}u=G.Milliseconds(u-A.elapsedFrameTime-l);if(this.state!==w.RenderState.IDLE&&u<y&&!this._forceTask)return this._forceTask=!0,!1;u=G.Milliseconds(Math.max(u,Z));this._budget.reset(u,this.state);this._updateLoad();return this._schedule()};H.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case w.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(A=>A.idleBegin()));this._runIdle();break;case w.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};H.stopFrame=function(){this._budget.reset(G.Milliseconds(0),this._state);this._budget.madeProgress()};H._removeIdleStateCallbacks=function(A){this._idleUpdatesStartFired&&A.idleEnd();this._idleStateCallbacks.removeUnordered(A)};H.removeTask=function(A){this._tasks.removeUnordered(A);
this._runQueue.removeUnordered(A);this._updatingChanged()};H._updateTask=function(A){this._tasks.forAll(l=>{l.name===A&&l.setPriority(A)})};H._getState=function(A){if(this._runQueue.some(u=>u.name===A))return g.TaskState.SCHEDULED;let l=g.TaskState.IDLE;this._tasks.forAll(u=>{u.name===A&&u.needsUpdate&&(1>=u.schedulePriority?l=g.TaskState.READY:l!==g.TaskState.READY&&(l=g.TaskState.WAITING))});return l};H._getRuntime=function(A){let l=0;this._tasks.forAll(u=>{u.name===A&&(l+=u.runtime)});return l};
H._resetRuntimes=function(){this._tasks.forAll(A=>A.runtime=0)};H._getRunning=function(){const A=new Map;this._tasks.forAll(u=>{u.needsUpdate&&A.set(u.name,(A.get(u.name)||0)+1)});if(0===A.size)return null;let l="";A.forEach((u,Z)=>{l=1<u?l+` ${u}x ${Z}`:l+` ${Z}`});return l};H._runIdle=function(){this._run()};H._runInteracting=function(){this._run()};H._runAnimating=function(){this._run()};H._updateLoad=function(){const A=this._tasks.reduce((l,u)=>u.needsUpdate?++l:l,0);this._load=.9*this._load+
A*(1-.9)};H._schedule=function(){this._runQueue.filterInPlace(A=>{if(A.needsUpdate)return!0;A.schedulePriority=A.basePriority;return!1});for(this._tasks.forAll(A=>{0===A.basePriority&&A.needsUpdate&&!this._runQueue.includes(A)&&A.blockFrame!==this._frameNumber&&this._runQueue.unshift(A)});0===this._runQueue.length;){let A=!1;this._tasks.forAll(l=>{if(l.needsUpdate&&0!==l.schedulePriority&&0!==l.basePriority&&l.blockFrame!==this._frameNumber)switch(A=!0,l.schedulePriority){case 1:l.schedulePriority=
0;this._runQueue.push(l);break;default:--l.schedulePriority}});if(!A)return this._updatingChanged(),!1}this._updatingChanged();return!0};H._run=function(){const A=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var l=this._budget.now();const u=this._runQueue.pop();this._budget.resetProgress();try{u.task.runTask(this._budget)===g.Task.YIELD&&(u.blockFrame=this._frameNumber)}catch(Z){I.getLogger("esri.views.support.Scheduler").error(`Exception in task "${u.name}"`,Z)}!this._budget.hasProgressed&&
u.blockFrame!==this._frameNumber&&u.needsUpdate&&(u.blockFrame=this._frameNumber);u.schedulePriority=u.basePriority;l=this._budget.now()-l;u.runtime+=l;this._frameTaskTimes.set(u.priority,this._frameTaskTimes.get(u.priority)+l);this._debug&&l>2*this._budget.budget&&console.log("Task",u.name,"used",l,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-A);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
A)};H._startFrameTaskTimes=function(){for(const A of Object.keys(g.TaskPriority))this._frameTaskTimes.set(g.TaskPriority[A],0)};H._recordFrameTaskTimes=function(A){this._frameTaskTimes.forEach((l,u)=>this.performanceInfo.tasks.get(u).record(l));this.performanceInfo.total.record(A)};d._createClass(R,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(A){this._state!==A&&(this._state=
A,this.state!==w.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(l=>l.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return R}();U.Scheduler=J;let L=function(){function R(A,l,u,Z){this._scheduler=A;this.name=l;this._basePriority=Z;this.runtime=this.blockFrame=0;this._queue=new M.PromiseQueue;this._handles=new ja;this.schedulePriority=this._basePriority;this._task=new Y.ObservableValue(N.isSome(u)?u:this._queue);this._handles.add(m.when(()=>
this.task.running,ka=>A.taskRunningChanged(ka)))}var H=R.prototype;H.remove=function(){this.processQueue(C);this._scheduler.removeTask(this);this.schedule=K.schedule;this.reschedule=K.reschedule;this._handles.destroy()};H.setPriority=function(A){this.name=A;A=e(A);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=A;this._basePriority=A};H.schedule=function(A,l,u){return this._queue.push(A,l,u)};H.reschedule=function(A,l,u){return this._queue.unshift(A,l,u)};H.processQueue=
function(A){this._queue.runTask(A)};d._createClass(R,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(A){this.setPriority(A)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return R}(),Q=function(){function R(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=w.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var H=R.prototype;H.run=function(A){if(this.done)return!1;!0===A()&&this.madeProgress();return!0};H.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};H.reset=function(A,l){this._begin=this.now();this._budget=A;this._state=l;this.resetProgress()};H.now=function(){return performance.now()};H.resetProgress=function(){this._done=this._progressed=!1};d._createClass(R,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(A){this._enabled=A}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return R}();U.Budget=Q})(r||(r={}));g.TaskState=void 0;
(function(U){U.SCHEDULED="s";U.READY="r";U.WAITING="w";U.IDLE="i"})(g.TaskState||(g.TaskState={}));const C=(()=>{const U=new r.Budget;U.enabled=!1;return U})(),K=new (function(){function U(){}var J=U.prototype;J.remove=function(){};J.processQueue=function(){};J.schedule=function(L,Q,R){try{if(k.isAborted(Q)){const H=k.createAbortError();return R?Promise.resolve(R(H)):Promise.reject(H)}return k.when(L(C))}catch(H){return Promise.reject(H)}};J.reschedule=function(L,Q,R){return this.schedule(L,Q,R)};
return U}());g.ImmediateTask=K;g.getTaskPriority=e;g.newScheduler=function(){return new r.Scheduler};g.noBudget=C;g.taskPriorities=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(g,d,ja,T,I,N,E){function t(M,n,w={}){return k(M,n,w,G)}function k(M,n,w={},e){let q=null;const z=w.once?(y,B)=>{e(y)&&(T.removeMaybe(q),
n(y,B))}:(y,B)=>{e(y)&&n(y,B)};q=N.watchTracked(M,z,w.sync,w.equals);w.initial&&(M=M(),z(M,M));return q}function m(M,n,w){if(I.isAborted(w))return Promise.reject(I.createAbortError());const e=M();if(n?.(e))return Promise.resolve(e);let q=null;return new Promise((z,y)=>{q=ja.handlesGroup([I.onAbort(w,()=>{q=T.removeMaybe(q);y(I.createAbortError())}),k(M,B=>{q=T.removeMaybe(q);z(B)},{sync:!1,once:!0},n??G)])})}function G(M){return!0}function Y(M){return!!M}g.autorun=E.autorun;g.initial={initial:!0};
g.on=function(M,n,w,e={}){function q(){y&&B&&(B.remove(),e.onListenerRemove?.(y),B=y=null)}function z(r){e.once&&e.once&&T.removeMaybe(S);w(r)}let y=null,B=null,S=null;const F=t(M,(r,C)=>{q();d.isEventTarget(r)&&(y=r,B=d.on(r,n,z),e.onListenerAdd?.(r))},{sync:e.sync,initial:!0});return S=ja.makeHandle(()=>{F.remove();q()})};g.once=function(M,n){return m(M,null,n)};g.pausable=function(M,n,w={}){let e=!1;const q=t(M,(z,y)=>{e||n(z,y)},w);return{remove(){q.remove()},pause(){e=!0},resume(){e=!1}}};g.sync=
{sync:!0};g.syncAndInitial={sync:!0,initial:!0};g.watch=t;g.when=function(M,n,w={}){return k(M,n,w,Y)};g.whenOnce=function(M,n){return m(M,Y,n)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],function(g,d,ja){let T=function(){function I(E){this._observable=new ja.SimpleObservable;this._value=E}var N=I.prototype;N.get=function(){d.trackAccess(this._observable);return this._value};
N.set=function(E){E!==this._value&&(this._value=E,this._observable.notify())};return I}();g.ObservableValue=T;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(g,d,ja,T){let I=function(){function E(){this._tasks=[];this._running=new T.ObservableValue(!1)}var t=E.prototype;t.destroy=function(){this.cancelAll()};
t.runTask=function(k){for(;!k.done&&this._process(k);)k.madeProgress()};t.push=function(k,m,G){this._running.set(!0);return new Promise((Y,M)=>this._tasks.push(new N(Y,M,k,m,G)))};t.unshift=function(k,m,G){this._running.set(!0);return new Promise((Y,M)=>this._tasks.unshift(new N(Y,M,k,m,G)))};t._process=function(k){if(0===this._tasks.length)return!1;const m=this._tasks.shift();try{const G=ja.isAborted(m.signal);if(G&&!m.abortCallback)m.reject(ja.createAbortError());else{const Y=G?m.abortCallback?.(ja.createAbortError()):
m.callback(k);ja.isPromiseLike(Y)?Y.then(m.resolve,m.reject):m.resolve(Y)}}catch(G){m.reject(G)}this._running.set(0<this._tasks.length);return!0};t.cancelAll=function(){const k=ja.createAbortError();for(const m of this._tasks)if(m.abortCallback){const G=m.abortCallback(k);m.resolve(G)}else m.reject(k);this._tasks.length=0;this._running.set(!1)};d._createClass(E,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return E}(),N=function(E,
t,k,m,G){this.resolve=E;this.reject=t;this.callback=k;this.signal=m;this.abortCallback=G};g.PromiseQueue=I;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(g,d,ja,T,I,N,E){ja=function(t){function k(){var m=
t.apply(this,arguments)||this;m.SCHEDULER_LOG_SLOW_TASKS=!1;m.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return m}g._inheritsLoose(k,t);return k}(ja);d.__decorate([T.property()],ja.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([T.property()],ja.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ja=d.__decorate([E.subclass("esri.views.support.DebugFlags")],ja);return new ja})},"esri/views/support/RenderState":function(){define(["exports"],function(g){g.RenderState=
void 0;var d=g.RenderState||(g.RenderState={});d[d.ANIMATING=0]="ANIMATING";d[d.INTERACTING=1]="INTERACTING";d[d.IDLE=2]="IDLE";Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(g,d,ja,T,I){function*N(y){switch(y.type){case "Feature":yield y;break;case "FeatureCollection":for(const B of y.features)B&&
(yield B)}}function*E(y){if(y)switch(y.type){case "Point":yield y.coordinates;break;case "LineString":case "MultiPoint":yield*y.coordinates;break;case "MultiLineString":case "Polygon":for(const B of y.coordinates)yield*B;break;case "MultiPolygon":for(const B of y.coordinates)for(const S of B)yield*S}}function*t(y,B={}){const {geometryType:S,objectIdField:F}=B;for(const r of y){const {geometry:C,properties:K,id:U}=r;if(C&&z[C.type]!==S)continue;y=K||{};let J=void 0;F&&(J=y[F],null==U||J||(y[F]=J=U));
yield new ja.OptimizedFeature(C?Y(new T,C,B):null,y,null,J??void 0)}}function k(y){for(const B of y)if(2<B.length)return!0;return!1}function m(y){let B=0;for(let S=0;S<y.length;S++){const F=y[S],r=y[(S+1)%y.length];B+=F[0]*r[1]-r[0]*F[1]}return 0>=B}function G(y){const B=y[0],S=y[y.length-1];B[0]===S[0]&&B[1]===S[1]&&B[2]===S[2]||y.push(B);return y}function Y(y,B,S){switch(B.type){case "LineString":return w(y,B.coordinates,S),y;case "MultiLineString":for(const r of B.coordinates)w(y,r,S);return y;
case "MultiPoint":return w(y,B.coordinates,S),y;case "MultiPolygon":for(var F of B.coordinates)for(M(y,F[0],S),B=1;B<F.length;B++)n(y,F[B],S);return y;case "Point":return q(y,B.coordinates,S),y;case "Polygon":F=B.coordinates;M(y,F[0],S);for(B=1;B<F.length;B++)n(y,F[B],S);return y}}function M(y,B,S){B=G(B);m(B)?w(y,B,S):e(y,B,S)}function n(y,B,S){B=G(B);m(B)?e(y,B,S):w(y,B,S)}function w(y,B,S){for(const F of B)q(y,F,S);y.lengths.push(B.length)}function e(y,B,S){for(let F=B.length-1;0<=F;F--)q(y,B[F],
S);y.lengths.push(B.length)}function q(y,B,S){const [F,r,C]=B;y.coords.push(F,r);S.hasZ&&y.coords.push(C||0)}const z={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};g.createOptimizedFeatures=function(y,B){return Array.from(t(N(y),B))};g.getGeometryType=function(y){return z[y]};g.inferLayerProperties=function(y,B={}){const S=[];var F=new Set;const r=
new Set;var C=!1;let K=null,U=!1,J=void 0;({geometryType:B=null}=B);var L=!1;for(const Q of N(y)){const {geometry:R,properties:H,id:A}=Q;if(R&&(B||(B=z[R.type]),z[R.type]!==B))continue;C||(C=E(R),C=k(C));!U&&(U=null!=A)&&(J=typeof A,H&&(K=Object.keys(H).filter(l=>H[l]===A)));H&&K&&U&&null!=A&&(1<K.length?K=K.filter(l=>H[l]===A):1===K.length&&(K=H[K[0]]===A?K:[]));if(!L&&H){y=!0;for(const l in H){if(F.has(l))continue;L=H[l];if(null==L){y=!1;r.add(l);continue}a:switch(typeof L){case "string":L="esriFieldTypeString";
break a;case "number":L="esriFieldTypeDouble";break a;default:L="unknown"}if("unknown"===L){r.add(l);continue}r.delete(l);F.add(l);const u=I.normalizeFieldName(l);u&&S.push({name:u,alias:l,type:L})}L=y}}if(F=I.normalizeFieldName(1===K?.length&&K[0]||null)??void 0)for(const Q of S)if(Q.name===F&&I.isNumericField(Q)){Q.type="esriFieldTypeOID";break}return{fields:S,geometryType:B,hasZ:C,objectIdFieldName:F,objectIdFieldType:J,unknownFields:Array.from(r)}};g.validateGeoJSON=function(y){if(!y)throw new d("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==y.type&&"FeatureCollection"!==y.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:y});({crs:y}=y);if(y){var B="string"===typeof y?y:"name"===y.type?y.properties.name:"EPSG"===y.type?y.properties.code:null,S=RegExp(".*(CRS84H?|4326)$","i");if(!B||!S.test(B))throw new d("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:y});}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(g,d,ja,T,I,N){function E(e){return new Y(e)}function t(){return k.apply(this,arguments)}function k(){k=ja._asyncToGenerator(function*(){T.isNone(w)&&(w=yield new Promise((e,q)=>g(["../../../../geometry/geometryEngineJSON"],e,q)));return w});return k.apply(this,
arguments)}function m(){m=ja._asyncToGenerator(function*(e,q){!I.isValid(e)||"esriGeometryPolygon"!==q&&"esriGeometryPolyline"!==q||(yield t())});return m.apply(this,arguments)}let G=function(){this.description=this.code=null},Y=function(e){this.error=new G;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=e},M=function(e){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=e};const n=new Set;let w;d.createFeatureEditErrorResult=E;d.createFeatureEditSuccessResult=
function(e){return new M(e)};d.loadGeometryEngineForSimplify=function(e,q){return m.apply(this,arguments)};d.mixAttributes=function(e,q,z,y=!1,B){n.clear();for(const C in z){const K=e.get(C);if(!K)continue;var S=z[C],F=K,r=S;let U=r;"string"===typeof r&&N.isNumericField(F)?U=parseFloat(r):null!=r&&N.isStringField(F)&&"string"!==typeof r&&(U=String(r));F=N.sanitizeNullFieldValue(U);F!==S&&B&&B.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:K,
originalValue:S,sanitizedValue:F}});n.add(K.name);if(K&&(y||K.editable)){if(S=N.validateFieldValue(K,F))return E(N.validationErrorToString(S,K,F));q[K.name]=F}}for(const C of e?.requiredFields??[])if(!n.has(C.name))return E(`missing required field "${C.name}"`);return null};d.simplify=function(e,q){if(!e||!I.isValid(q))return e;if("rings"in e||"paths"in e){if(T.isNone(w))throw new TypeError("geometry engine not loaded");return w.simplify(q,e)}return e};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(g,d,ja,T,I,N,E,t,k,m,
G,Y,M,n,w,e,q,z){function y(){y=d._asyncToGenerator(function*(Aa,Da){Da=yield T(Aa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...Da?.customParameters},signal:Da?.signal});Da=B(Da.data);k.isHTTPSProtocol(Aa)&&(k.hasSameOrigin(Aa,Da.operations.DescribeFeatureType.url,!0)&&(Da.operations.DescribeFeatureType.url=k.toHTTPS(Da.operations.DescribeFeatureType.url)),k.hasSameOrigin(Aa,Da.operations.GetFeature.url,!0)&&(Da.operations.GetFeature.url=k.toHTTPS(Da.operations.GetFeature.url)));
return Da});return y.apply(this,arguments)}function B(Aa){Aa=Ia(Aa);Qa(Aa);Sa(Aa);Aa=Aa.firstElementChild;const Da=N.cache(F(Aa));return{operations:S(Aa),get featureTypes(){return Array.from(Da())},readFeatureTypes:Da}}function S(Aa){let Da=!1;const Fa={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};w.visitXML(Aa,{OperationsMetadata:{Operation:c=>{switch(c.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:p=>{Fa.GetCapabilities.url=
p.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:p=>{Fa.DescribeFeatureType.url=p.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:p=>{Fa.GetFeature.url=p.getAttribute("xlink:href")}}},Parameter:p=>{if("outputFormat"===p.getAttribute("name"))return{AllowedValues:{Value:V=>{(V=V.textContent)&&bb.has(V.toLowerCase())&&(Fa.GetFeature.outputFormat=V)}}}}}}},Constraint:c=>{switch(c.getAttribute("name")){case "KVPEncoding":return{DefaultValue:p=>{Da=
"true"===p.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:p=>{Fa.GetFeature.supportsPagination="true"===p.textContent.toLowerCase()}}}}}});if(!Da)throw new I("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(E.isNone(Fa.GetFeature.outputFormat))throw new I("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return Fa}function F(Aa){return w.iterateXML(Aa,{FeatureTypeList:{FeatureType:Da=>
{const Fa={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},c=new Set([4326]),p=V=>{V=parseInt(V.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);Number.isNaN(V)||c.add(V)};w.visitXML(Da,{Name:V=>{const {name:la,prefix:ta}=Ua(V.textContent);Fa.typeName=`${ta}:${la}`;Fa.name=la;Fa.namespacePrefix=ta;Fa.namespaceUri=V.lookupNamespaceURI(ta)},Abstract:V=>{Fa.description=V.textContent},Title:V=>{Fa.title=
V.textContent},WGS84BoundingBox:V=>{Fa.extent=r(V)},DefaultSRS:p,DefaultCRS:p,OtherSRS:p,OtherCRS:p});Fa.title||(Fa.title=Fa.name);Fa.supportedSpatialReferences.push(...c);return Fa}}})}function r(Aa){let Da,Fa,c,p;for(const V of Aa.children)switch(V.localName){case "LowerCorner":[Da,Fa]=V.textContent.split(" ").map(la=>Number.parseFloat(la));break;case "UpperCorner":[c,p]=V.textContent.split(" ").map(la=>Number.parseFloat(la))}return{xmin:Da,ymin:Fa,xmax:c,ymax:p,spatialReference:G.WGS84}}function C(Aa,
Da,Fa){return N.find(Aa,c=>Fa?c.name===Da&&c.namespaceUri===Fa:c.typeName===Da||c.name===Da)}function K(){K=d._asyncToGenerator(function*(Aa,Da,Fa,c={}){const {featureType:p,extent:V}=yield U(Aa,Da,Fa,c),{fields:la,geometryType:ta,swapXY:x,objectIdField:O,geometryField:da}=yield L(Aa,p.typeName,c);return{url:Aa.operations.GetCapabilities.url,name:p.name,namespaceUri:p.namespaceUri,fields:la,geometryField:da,geometryType:ta,objectIdField:O,spatialReference:c.spatialReference??q.WGS84,extent:V,swapXY:x,
wfsCapabilities:Aa,customParameters:c.customParameters}});return K.apply(this,arguments)}function U(Aa,Da,Fa){return J.apply(this,arguments)}function J(){J=d._asyncToGenerator(function*(Aa,Da,Fa,c={}){const {spatialReference:p=q.WGS84}=c;Aa=Aa.readFeatureTypes();Fa=Da?C(Aa,Da,Fa):Aa.next().value;if(E.isNone(Fa)){if(Da)throw new I("wfs-layer:feature-type-not-found",`The type '${Da}' could not be found in the service`);throw new I("wfs-layer:empty-service","The service is empty");}Da=new z({...Fa.extent,
spatialReference:p});if(!G.equals(p,G.WGS84))try{yield m.initializeProjection(G.WGS84,p,void 0,c),Da=m.project(Da,G.WGS84)}catch{throw new I("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:Da,spatialReference:p,featureType:Fa}});return J.apply(this,arguments)}function L(Aa,Da){return Q.apply(this,arguments)}function Q(){Q=d._asyncToGenerator(function*(Aa,Da,Fa={}){const [c,p]=yield t.eachAlways([l(Aa.operations.DescribeFeatureType.url,Da,Fa),H(Aa,Da,Fa)]);if(c.error||
p.error)throw new I("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${Da}'`,{error:c.error||p.error});const {fields:V,errors:la}=c.value??{};Aa=c.value?.geometryType||p.value?.geometryType;Fa=p.value?.swapXY??!1;if(E.isNone(Aa))throw new I("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${Da}`,{typeName:Da,geometryType:Aa,fields:V,errors:la});return{...R(V??[]),geometryType:Aa,swapXY:Fa}});return Q.apply(this,
arguments)}function R(Aa){const Da=Aa.find(c=>"geometry"===c.type);let Fa=Aa.find(c=>"oid"===c.type);Aa=Aa.filter(c=>"geometry"!==c.type);Fa||(Fa=new e({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),Aa.unshift(Fa));return{geometryField:Da?.name??null,objectIdField:Fa.name,fields:Aa}}function H(Aa,Da){return A.apply(this,arguments)}function A(){A=d._asyncToGenerator(function*(Aa,Da,Fa={}){let c,p=!1;const [V,la]=yield Promise.all([ua(Aa.operations.GetFeature.url,Da,Aa.operations.GetFeature.outputFormat,
{...Fa,count:1}),T(Aa.operations.GetFeature.url,{responseType:"text",query:Ha(Da,void 0,{...Fa,count:1}),signal:Fa?.signal})]);if(Aa="FeatureCollection"===V.type&&V.features[0]?.geometry){c=Y.featureGeometryTypeKebabDictionary.fromJSON(M.getGeometryType(Aa.type));switch(Aa.type){case "Point":var ta=Aa.coordinates;break;case "LineString":case "MultiPoint":ta=Aa.coordinates[0];break;case "MultiLineString":case "Polygon":ta=Aa.coordinates[0][0];break;case "MultiPolygon":ta=Aa.coordinates[0][0][0]}if(Da=
/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(la.data))Aa=ta[0].toFixed(3),ta=ta[1].toFixed(3),Fa=parseFloat(Da[1]).toFixed(3),Da=parseFloat(Da[2]).toFixed(3),Aa===Da&&ta===Fa&&(p=!0)}return{geometryType:c,swapXY:p}});return A.apply(this,arguments)}function l(Aa,Da,Fa){return u.apply(this,arguments)}function u(){u=d._asyncToGenerator(function*(Aa,Da,Fa){Aa=yield T(Aa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:Da,...Fa?.customParameters},
signal:Fa?.signal});return Z(Da,Aa.data)});return u.apply(this,arguments)}function Z(Aa,Da){const {name:Fa}=Ua(Aa);Da=Ia(Da);Sa(Da);const c=N.find(w.iterateXML(Da.firstElementChild,{element:p=>({name:p.getAttribute("name"),typeName:Ua(p.getAttribute("type")).name})}),({name:p})=>p===Fa);if(E.isSome(c)){const p=N.find(w.iterateXML(Da.firstElementChild,{complexType:V=>V}),V=>V.getAttribute("name")===c.typeName);if(E.isSome(p))return ka(p)}throw new I("wfs-layer:feature-type-not-found",`Type '${Aa}' not found in document`,
{document:(new XMLSerializer).serializeToString(Da)});}function ka(Aa){const Da=[],Fa=[];let c=void 0;var p=w.iterateXML(Aa,{complexContent:{extension:{sequence:{element:V=>V}}}});for(const V of p){p=V.getAttribute("name");if(!p)continue;let la,ta;V.hasAttribute("type")?la=Ua(V.getAttribute("type")).name:w.visitXML(V,{simpleType:{restriction:da=>{la=Ua(da.getAttribute("base")).name;return{maxLength:aa=>{ta=+aa.getAttribute("value")}}}}});if(!la)continue;const x="true"===V.getAttribute("nillable");
let O=!1;switch(la.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":Fa.push(new e({name:p,alias:p,type:"integer",nullable:x}));break;case "float":case "double":case "decimal":Fa.push(new e({name:p,alias:p,type:"double",nullable:x}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":Fa.push(new e({name:p,
alias:p,type:"string",nullable:x,length:ta??255}));break;case "datetime":case "date":Fa.push(new e({name:p,alias:p,type:"date",nullable:x,length:ta??36}));break;case "pointpropertytype":c="point";O=!0;break;case "multipointpropertytype":c="multipoint";O=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":c="polyline";O=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":c="polygon";O=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":O=
!0;Da.push(new I("wfs-layer:unknown-geometry-type",`geometry type '${la}' is not supported`,{type:(new XMLSerializer).serializeToString(Aa)}));break;default:Da.push(new I("wfs-layer:unknown-field-type",`Unknown field type '${la}'`,{type:(new XMLSerializer).serializeToString(Aa)}))}O&&Fa.push(new e({name:p,alias:p,type:"geometry",nullable:x}))}for(const V of Fa)if("integer"===V.type&&!V.nullable&&Xa.has(V.name.toLowerCase())){V.type="oid";break}return{geometryType:c,fields:Fa,errors:Da}}function ua(Aa,
Da,Fa,c){return za.apply(this,arguments)}function za(){za=d._asyncToGenerator(function*(Aa,Da,Fa,c){({data:Aa}=yield T(Aa,{responseType:"text",query:Ha(Da,Fa,c),signal:c?.signal}));Aa=Aa.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{if(c?.dateFields?.length){const p=new Set(c.dateFields);return JSON.parse(Aa,(V,la)=>p.has(V)?n.parseDate(la):la)}return JSON.parse(Aa)}catch(p){throw new I("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:Aa,error:p});}});return za.apply(this,
arguments)}function Ha(Aa,Da,Fa){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:Aa,OUTPUTFORMAT:Da,SRSNAME:"EPSG:4326",STARTINDEX:Fa?.startIndex,COUNT:Fa?.count,...Fa?.customParameters}}function Ka(){Ka=d._asyncToGenerator(function*(Aa,Da,Fa){Aa=yield T(Aa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:Da,RESULTTYPE:"hits",...Fa?.customParameters},signal:Fa?.signal});Aa=Ia(Aa.data);Sa(Aa);Aa=Number.parseFloat(Aa.firstElementChild.getAttribute("numberMatched"));
return Number.isNaN(Aa)?0:Aa});return Ka.apply(this,arguments)}function Ia(Aa){return(new DOMParser).parseFromString(Aa.trim(),"text/xml")}function Ua(Aa){const [Da,Fa]=Aa.split(":");return{prefix:Fa?Da:"",name:Fa??Da}}function Qa(Aa){if((Aa=Aa.firstElementChild?.getAttribute("version"))&&"2.0.0"!==Aa)throw new I("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${Aa}. Supported version: ${"2.0.0"}`);}function Sa(Aa){let Da="",Fa="";w.visitXML(Aa.firstElementChild,{Exception:c=>{Da=c.getAttribute("exceptionCode");
return{ExceptionText:p=>{Fa=p.textContent}}}});if(Da)throw new I(`wfs-layer:${Da}`,Fa);}const bb=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),Xa=new Set(["objectid","fid"]);g.WFS_OID_FIELD_NAME="__esri_wfs_id__";g.describeFeatureType=l;g.findFeatureType=C;g.getCapabilities=function(Aa,Da){return y.apply(this,arguments)};g.getFeature=ua;g.getFeatureCount=function(Aa,Da,Fa){return Ka.apply(this,arguments)};g.getFeatureTypeInfo=U;g.getWFSLayerInfo=function(Aa,
Da,Fa){return K.apply(this,arguments)};g.parseDescribeFeatureTypeResponse=Z;g.parseGetCapabilitiesResponse=B;g.prepareWFSLayerFields=R;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(g){function d(T){T=(new Date(T)).getTime();return Number.isNaN(T)?null:T}const ja=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
g.parseDate=function(T){var I=ja.exec(T);if(I?.groups){I=I.groups;var N=+I.year,E=+I.month-1,t=+I.day,k=+(I.hours??0),m=+(I.minutes??0),G=+(I.seconds??0);if(23<k||59<m||59<G)I=null;else{var Y=I.ms??"0";Y=Y?+Y.padEnd(3,"0").substring(0,3):0;I=I.isUTC?Date.UTC(N,E,t,k,m,G,Y):I.offsetSign?6E4*("+"===I.offsetSign?-1:1)*(60*+I.offsetHours+ +I.offsetMinutes)+Date.UTC(N,E,t,k,m,G,Y):(new Date(N,E,t,k,m,G,Y)).getTime();I=Number.isNaN(I)?null:I}}else I=null;return I??d(T)};g.parseJSDate=d;Object.defineProperty(g,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(g){function d(T,I){if(T&&I)for(const N of T.children)N.localName in I&&(T=I[N.localName],"function"===typeof T?(T=T(N))&&d(N,T):d(N,T))}function*ja(T,I){for(const N of T.children)N.localName in I&&(T=I[N.localName],"function"===typeof T?yield T(N):yield*ja(N,T))}g.iterateXML=ja;g.visitXML=d;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(g,d,ja,T,I,N,E,t,k,m,G,Y){var M;const n=new ja.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});ja=M=function(w){function e(z){z=w.call(this,z)||this;
z.alias=null;z.defaultValue=void 0;z.description=null;z.domain=null;z.editable=!0;z.length=-1;z.name=null;z.nullable=!0;z.type=null;z.valueType=null;z.visible=!0;return z}g._inheritsLoose(e,w);var q=e.prototype;q.readDescription=function(z,{description:y}){z=null;try{z=y?JSON.parse(y):null}catch(B){}return z?.value??null};q.readValueType=function(z,{description:y}){z=null;try{z=y?JSON.parse(y):null}catch(B){}return z?n.fromJSON(z.fieldValueType):null};q.clone=function(){return new M({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return e}(T.JSONSupport);d.__decorate([I.property({type:String,json:{write:!0}})],ja.prototype,"alias",void 0);d.__decorate([I.property({type:[String,Number],json:{write:{allowNull:!0}}})],ja.prototype,"defaultValue",void 0);d.__decorate([I.property()],
ja.prototype,"description",void 0);d.__decorate([k.reader("description")],ja.prototype,"readDescription",null);d.__decorate([I.property({types:G.types,json:{read:{reader:G.fromJSON},write:!0}})],ja.prototype,"domain",void 0);d.__decorate([I.property({type:Boolean,json:{write:!0}})],ja.prototype,"editable",void 0);d.__decorate([I.property({type:N.Integer,json:{write:!0}})],ja.prototype,"length",void 0);d.__decorate([I.property({type:String,json:{write:!0}})],ja.prototype,"name",void 0);d.__decorate([I.property({type:Boolean,
json:{write:!0}})],ja.prototype,"nullable",void 0);d.__decorate([t.enumeration(Y.kebabDict)],ja.prototype,"type",void 0);d.__decorate([I.property()],ja.prototype,"valueType",void 0);d.__decorate([k.reader("valueType",["description"])],ja.prototype,"readValueType",null);d.__decorate([I.property({type:Boolean,json:{read:!1}})],ja.prototype,"visible",void 0);return ja=M=d.__decorate([m.subclass("esri.layers.support.Field")],ja)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(g,d,ja,T,I,N){d={key:"type",base:T,typeMap:{range:N,"coded-value":ja,inherited:I}};g.CodedValueDomain=ja;g.DomainBase=T;g.InheritedDomain=I;g.RangeDomain=N;g.fromJSON=function(E){if(!E||!E.type)return null;switch(E.type){case "range":return N.fromJSON(E);case "codedValue":return ja.fromJSON(E);case "inherited":return I.fromJSON(E)}return null};g.types=d;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(g,d,ja,T,I,N,E,t,k){var m;I=m=function(G){function Y(n){n=G.call(this,n)||this;n.codedValues=null;n.type="coded-value";return n}g._inheritsLoose(Y,G);var M=Y.prototype;M.getName=function(n){let w=null;if(this.codedValues){const e=String(n);this.codedValues.some(q=>{String(q.code)===e&&(w=q.name);return!!w})}return w};M.clone=function(){return new m({codedValues:ja.clone(this.codedValues),name:this.name})};return Y}(k);d.__decorate([T.property({type:[t.CodedValue],json:{write:!0}})],I.prototype,
"codedValues",void 0);d.__decorate([N.enumeration({codedValue:"coded-value"})],I.prototype,"type",void 0);return I=m=d.__decorate([E.subclass("esri.layers.support.CodedValueDomain")],I)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(g,
d,ja,T,I,N,E,t){var k;g.CodedValue=k=function(m){function G(Y){Y=m.call(this,Y)||this;Y.name=null;Y.code=null;return Y}d._inheritsLoose(G,m);G.prototype.clone=function(){return new k({name:this.name,code:this.code})};return G}(T.JSONSupport);ja.__decorate([I.property({type:String,json:{write:!0}})],g.CodedValue.prototype,"name",void 0);ja.__decorate([I.property({type:[String,Number],json:{write:!0}})],g.CodedValue.prototype,"code",void 0);g.CodedValue=k=ja.__decorate([t.subclass("esri.layers.support.CodedValue")],
g.CodedValue);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(g,d,ja,T,I,N,E,t,k){ja=new ja.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});T=function(m){function G(Y){Y=m.call(this,Y)||this;Y.name=null;Y.type=null;return Y}g._inheritsLoose(G,m);return G}(T.JSONSupport);d.__decorate([I.property({type:String,json:{write:!0}})],T.prototype,"name",void 0);d.__decorate([t.enumeration(ja)],T.prototype,"type",void 0);return T=d.__decorate([k.subclass("esri.layers.support.Domain")],T)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(g,d,ja,T,I,N,E,t,k,m){var G;ja=G=function(Y){function M(n){n=Y.call(this,n)||this;n.type="inherited";return n}g._inheritsLoose(M,Y);M.prototype.clone=function(){return new G};return M}(m);d.__decorate([t.enumeration({inherited:"inherited"})],ja.prototype,"type",void 0);return ja=G=d.__decorate([k.subclass("esri.layers.support.InheritedDomain")],ja)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(g,d,ja,T,I,N,E,t){var k;T=k=function(m){function G(Y){Y=m.call(this,Y)||this;Y.maxValue=null;Y.minValue=null;Y.type="range";return Y}g._inheritsLoose(G,m);G.prototype.clone=function(){return new k({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return G}(t);d.__decorate([ja.property({type:Number,json:{type:[Number],read:{source:"range",reader(m,G){return G.range&&G.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(m,G,Y){G[Y]=[this.minValue||0,m]}}}})],T.prototype,"maxValue",void 0);d.__decorate([ja.property({type:Number,json:{type:[Number],read:{source:"range",reader(m,G){return G.range&&G.range[0]}},write:{target:"range",writer(m,G,Y){G[Y]=[m,this.maxValue||0]}}}})],T.prototype,"minValue",void 0);d.__decorate([N.enumeration({range:"range"})],T.prototype,"type",void 0);return T=k=d.__decorate([E.subclass("esri.layers.support.RangeDomain")],T)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(g,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});g.kebabDict=d;Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(g,d,ja,T,I,N,E,t,k,m,G,Y,M,n,w){return function(){function e(){var z=this;this._customParameters=
this._queryEngine=null;this._snapshotFeatures=function(){var y=g._asyncToGenerator(function*(B){const {objectIdField:S}=z._queryEngine;var F=yield n.getFeature(z._getFeatureUrl??"",z._featureType.typeName,z._getFeatureOutputFormat,{customParameters:z._customParameters,dateFields:z._queryEngine.fieldsIndex.dateFields.map(C=>C.name),signal:B});yield Y.validateGeoJSON(F);N.throwIfAborted(B);B=Y.createOptimizedFeatures(F,{geometryType:z._queryEngine.geometryType,hasZ:!1,objectIdField:S});if(!E.equals(z._queryEngine.spatialReference,
E.WGS84))for(var r of B)I.isSome(r.geometry)&&(r.geometry=t.convertFromGeometry(m.project(t.convertToGeometry(r.geometry,z._queryEngine.geometryType,!1,!1),E.WGS84,z._queryEngine.spatialReference)));r=1;for(const C of B)F={},M.mixAttributes(z._fieldsIndex,F,C.attributes,!0),C.attributes=F,null==C.attributes[S]&&(C.objectId=C.attributes[S]=r++);return B});return function(B){return y.apply(this,arguments)}}()}var q=e.prototype;q.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};
q.load=function(){var z=g._asyncToGenerator(function*(y,B){const {getFeatureUrl:S,getFeatureOutputFormat:F,spatialReference:r,fields:C,geometryType:K,featureType:U,objectIdField:J,customParameters:L}=y;this._featureType=U;this._customParameters=L;this._getFeatureUrl=S;this._getFeatureOutputFormat=F;this._fieldsIndex=new w(C);yield this._checkProjection(r);N.throwIfAborted(B);this._queryEngine=new G.QueryEngine({fields:C,geometryType:K,hasM:!1,hasZ:!1,objectIdField:J,spatialReference:r,timeInfo:null,
featureStore:new k({geometryType:K,hasM:!1,hasZ:!1})});y=yield this._snapshotFeatures(I.unwrap(B.signal));this._queryEngine.featureStore.addMany(y);return{extent:(yield this._queryEngine.fetchRecomputedExtents()).fullExtent}});return function(y,B){return z.apply(this,arguments)}}();q.applyEdits=function(){var z=g._asyncToGenerator(function*(){throw new ja("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return z.apply(this,arguments)}}();q.queryFeatures=
function(){var z=g._asyncToGenerator(function*(y={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(y,B.signal)});return function(){return z.apply(this,arguments)}}();q.queryFeatureCount=function(){var z=g._asyncToGenerator(function*(y={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(y,B.signal)});return function(){return z.apply(this,arguments)}}();q.queryObjectIds=function(){var z=g._asyncToGenerator(function*(y={},B={}){yield this._waitSnapshotComplete();
return this._queryEngine.executeQueryForIds(y,B.signal)});return function(){return z.apply(this,arguments)}}();q.queryExtent=function(){var z=g._asyncToGenerator(function*(y={},B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(y,B.signal)});return function(){return z.apply(this,arguments)}}();q.querySnapping=function(){var z=g._asyncToGenerator(function*(y,B={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(y,B.signal)});
return function(y){return z.apply(this,arguments)}}();q.refresh=function(){var z=g._asyncToGenerator(function*(y){this._customParameters=y;this._snapshotTask?.abort();this._snapshotTask=d.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(B=>{this._queryEngine.featureStore.clear();B&&this._queryEngine.featureStore.addMany(B)},B=>{this._queryEngine.featureStore.clear();N.isAbortError(B)||T.getLogger("esri.layers.WFSLayer").error(new ja("wfs-layer:getfeature-error","An error occurred during the GetFeature request",
{error:B}))});yield this._waitSnapshotComplete();return{extent:(yield this._queryEngine.fetchRecomputedExtents()).fullExtent}});return function(y){return z.apply(this,arguments)}}();q._waitSnapshotComplete=function(){var z=g._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return z.apply(this,arguments)}}();q._checkProjection=function(){var z=g._asyncToGenerator(function*(y){try{yield m.checkProjectionSupport(E.WGS84,
y)}catch{throw new ja("unsupported-projection","Projection not supported",{spatialReference:y});}});return function(y){return z.apply(this,arguments)}}();return e}()});