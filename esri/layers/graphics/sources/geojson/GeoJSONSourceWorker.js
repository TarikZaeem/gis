// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/ensureType ./arrayUtils ./accessorSupport/decorators/subclass".split(" "),function(k,f,ma,aa,S,R,I,v,l,n){function K(){K=f._asyncToGenerator(function*(G,H,T){return(yield R.eachAlways(G.map((B,p)=>H.apply(T,[B,p])))).map(B=>B.value)});return K.apply(this,arguments)}function ca(G){return{ok:!0,
value:G}}function L(G){return{ok:!1,error:G}}function m(G){return S.isSome(G)&&!0===G.ok?G.value:null}function x(G){return S.isSome(G)&&!1===G.ok?G.error:null}function d(){d=f._asyncToGenerator(function*(G){if(S.isNone(G))return{ok:!1,error:Error("no promise provided")};try{return ca(yield G)}catch(H){return L(H)}});return d.apply(this,arguments)}function q(){q=f._asyncToGenerator(function*(G){try{return ca(yield G)}catch(H){return R.throwIfAbortError(H),L(H)}});return q.apply(this,arguments)}let J=
function(G){function H(B,p){var t=G.call(this,{})||this;t._result=null;t._abortHandle=null;t.abort=()=>{t._abortController=S.abortMaybe(t._abortController)};t.remove=t.abort;t._abortController=new AbortController;const {signal:z}=t._abortController;t.promise=B(z);t.promise.then(O=>{t._result=ca(O);t._cleanup()},O=>{t._result=L(O);t._cleanup()});t._abortHandle=R.onAbort(p,t.abort);return t}f._inheritsLoose(H,G);var T=H.prototype;T.normalizeCtorArgs=function(){return{}};T.destroy=function(){this.abort()};
T._cleanup=function(){this._abortHandle=S.removeMaybe(this._abortHandle);this._abortController=null};f._createClass(H,[{key:"value",get:function(){return m(this._result)}},{key:"error",get:function(){return x(this._result)}},{key:"finished",get:function(){return S.isSome(this._result)}}]);return H}(aa);ma.__decorate([I.property()],J.prototype,"value",null);ma.__decorate([I.property()],J.prototype,"error",null);ma.__decorate([I.property()],J.prototype,"finished",null);ma.__decorate([I.property()],
J.prototype,"promise",void 0);ma.__decorate([I.property()],J.prototype,"_result",void 0);J=ma.__decorate([n.subclass("esri.core.asyncUtils.ReactiveTask")],J);k.assertResult=function(G){if(!0===G.ok)return G.value;throw G.error;};k.createTask=function(G,H){return new J(G,H)};k.forEach=function(G,H,T){return R.eachAlways(G.map((B,p)=>H.apply(T,[B,p])))};k.makeResultError=L;k.makeResultOk=ca;k.map=function(G,H,T){return K.apply(this,arguments)};k.result=function(G){return d.apply(this,arguments)};k.resultError=
x;k.resultOrAbort=function(G){return q.apply(this,arguments)};k.resultValue=m;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,f,ma,aa,S,R,I,v,l,n){function K(y,N){return y?
N?4:3:N?3:2}function ca(y,N,da,X){if(y){if(da)return N&&X?u:lb;if(N&&X)return c}else if(N&&X)return lb;return ib}function L({scale:y,translate:N},da){return Math.round((da-N[0])/y[0])}function m({scale:y,translate:N},da){return Math.round((N[1]-da)/y[1])}function x({scale:y,translate:N},da,X){return da*y[X]+N[X]}function d(y){y=y.coords;return{x:y[0],y:y[1]}}function q(y,N){y.coords[0]=N.x;y.coords[1]=N.y;return y}function J(y){y=y.coords;return{x:y[0],y:y[1],z:y[2]}}function G(y,N){y.coords[0]=N.x;
y.coords[1]=N.y;y.coords[2]=N.z;return y}function H(y){y=y.coords;return{x:y[0],y:y[1],m:y[2]}}function T(y,N){y.coords[0]=N.x;y.coords[1]=N.y;y.coords[2]=N.m;return y}function B(y){y=y.coords;return{x:y[0],y:y[1],z:y[2],m:y[3]}}function p(y,N){y.coords[0]=N.x;y.coords[1]=N.y;y.coords[2]=N.z;y.coords[3]=N.m;return y}function t(y,N){return y&&N?p:y?G:N?T:q}function z(y,N,da,X,ia){da=t(da,X);for(const {geometry:na,attributes:ra}of N)N=aa.isSome(na)?da(new n,na):null,y.push(new v.OptimizedFeature(N,
ra,null,ia?ra[ia]:void 0));return y}function O(y,N,da,X){for(const {geometry:ia,attributes:na}of N)y.push({attributes:na,geometry:aa.isSome(ia)?D(ia,da,X):null});return y}function D(y,N,da){if(aa.isNone(y))return null;const X=K(N,da),ia=[];for(let na=0;na<y.coords.length;na+=X){const ra=[];for(let U=0;U<X;U++)ra.push(y.coords[na+U]);ia.push(ra)}return N?da?{points:ia,hasZ:N,hasM:da}:{points:ia,hasZ:N}:da?{points:ia,hasM:da}:{points:ia}}function F(y,N,da,X,ia){da=K(da,X);for(const {geometry:na,attributes:ra}of N)N=
aa.isSome(na)?P(new n,na,da):null,y.push(new v.OptimizedFeature(N,ra,null,ia?ra[ia]:void 0));return y}function P(y,N,da=K(N.hasZ,N.hasM)){y.lengths[0]=N.points.length;const X=y.coords;let ia=0;for(const na of N.points)for(N=0;N<da;N++)X[ia++]=na[N];return y}function Q(y,N,da){if(!y)return null;const X=K(N,da),{coords:ia,lengths:na}=y;y=[];let ra=0;for(const U of na){const ba=[];for(let pa=0;pa<U;pa++){const wa=[];for(let Ba=0;Ba<X;Ba++)wa.push(ia[ra++]);ba.push(wa)}y.push(ba)}return N?da?{paths:y,
hasZ:N,hasM:da}:{paths:y,hasZ:N}:da?{paths:y,hasM:da}:{paths:y}}function C(y,N,da,X,ia){da=K(da,X);for(const {geometry:na,attributes:ra}of N)N=aa.isSome(na)?A(new n,na,da):null,y.push(new v.OptimizedFeature(N,ra,null,ia?ra[ia]:void 0));return y}function A(y,N,da=K(N.hasZ,N.hasM)){const {lengths:X,coords:ia}=y;let na=0;for(const ra of N.paths){for(const U of ra)for(N=0;N<da;N++)ia[na++]=U[N];X.push(ra.length)}return y}function g(y,N,da){if(!y)return null;const X=K(N,da),{coords:ia,lengths:na}=y;y=
[];let ra=0;for(const U of na){const ba=[];for(let pa=0;pa<U;pa++){const wa=[];for(let Ba=0;Ba<X;Ba++)wa.push(ia[ra++]);ba.push(wa)}y.push(ba)}return N?da?{rings:y,hasZ:N,hasM:da}:{rings:y,hasZ:N}:da?{rings:y,hasM:da}:{rings:y}}function r(y,N,da,X,ia){for(const {geometry:na,centroid:ra,attributes:U}of N){N=aa.isSome(na)?W(new n,na,da,X):null;const ba=ia?U[ia]:void 0;aa.isSome(ra)?y.push(new v.OptimizedFeature(N,U,q(new n,ra),ba)):y.push(new v.OptimizedFeature(N,U,null,ba))}return y}function W(y,N,
da=N.hasZ,X=N.hasM){ja(y,N.rings,da,X);return y}function ja(y,N,da,X){da=K(da,X);const {lengths:ia,coords:na}=y;X=0;Sa(y);for(const ra of N){for(const U of ra)for(N=0;N<da;N++)na[X++]=U[N];ia.push(ra.length)}return y}function ta(y,N,da,X,ia,na){$a(y);if(!da){for(const ra of N)y.push(new v.OptimizedFeature(null,ra.attributes,null,na?ra.attributes[na]:void 0));return y}switch(da){case "esriGeometryPoint":return z(y,N,X,ia,na);case "esriGeometryMultipoint":return F(y,N,X,ia,na);case "esriGeometryPolyline":return C(y,
N,X,ia,na);case "esriGeometryPolygon":return r(y,N,X,ia,na);default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`)),$a(y)}return y}function za(y,N,da,X){y=y&&("coords"in y?y:y.geometry);if(aa.isNone(y))return null;switch(N){case "esriGeometryPoint":return N=d,da&&X?N=B:da?N=J:X&&(N=H),N(y);case "esriGeometryMultipoint":return D(y,da,X);case "esriGeometryPolyline":return Q(y,da,X);case "esriGeometryPolygon":return g(y,da,X);default:return Ta.error("convertToGeometry:unknown-geometry",
new f(`Unable to parse unknown geometry type '${N}'`)),null}}function Ea(y,N,da,X,ia){$a(y);if(aa.isNone(da)){for(const ra of N)y.push({attributes:ra.attributes});return y}switch(da){case "esriGeometryPoint":da=d;X&&ia?da=B:X?da=J:ia&&(da=H);for(var na of N){const {geometry:ra,attributes:U}=na;X=aa.isSome(ra)?da(ra):null;y.push({attributes:U,geometry:X})}break;case "esriGeometryMultipoint":return O(y,N,X,ia);case "esriGeometryPolyline":for(const {geometry:ra,attributes:U}of N)y.push({attributes:U,
geometry:aa.isSome(ra)?Q(ra,X,ia):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:U,centroid:ba}of N)na=aa.isSome(ra)?g(ra,X,ia):null,aa.isSome(ba)?(N=d(ba),y.push({attributes:U,centroid:N,geometry:na})):y.push({attributes:U,geometry:na});break;default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}return y}function Ha(y,N,da,X,ia,na,ra=da,U=X){Sa(y);if(aa.isNone(N)||!N.coords.length)return null;ia=jb[ia];const {coords:ba,
lengths:pa}=N;N=K(da,X);const wa=K(da&&ra,X&&U);da=ca(da,X,ra,U);if(!pa.length)return da(y.coords,ba,0,0,L(na,ba[0]),m(na,ba[1])),Sa(y,N,0),y;let Ba,La=0,Ja,Pa=0;for(const Qa of pa){if(Qa<ia)continue;let Ga=0;Ja=Pa;U=X=L(na,ba[La]);Ba=ra=m(na,ba[La+1]);da(y.coords,ba,Ja,La,U,Ba);Ga++;La+=N;Ja+=wa;for(let Ra=1;Ra<Qa;Ra++,La+=N)if(U=L(na,ba[La]),Ba=m(na,ba[La+1]),U!==X||Ba!==ra)da(y.coords,ba,Ja,La,U-X,Ba-ra),Ja+=wa,Ga++,X=U,ra=Ba;Ga>=ia&&(y.lengths.push(Ga),Pa=Ja)}$a(y.coords,Pa);return y.coords.length?
y:null}function Fa(y,N,da,X,ia,na,ra){let U=X,ba=0;for(let wa=na+da;wa<ra;wa+=da){var pa=N[wa];const Ba=N[wa+1],La=N[ra],Ja=N[ra+1];let Pa=N[na],Qa=N[na+1],Ga=La-Pa,Ra=Ja-Qa;if(0!==Ga||0!==Ra){const xa=((pa-Pa)*Ga+(Ba-Qa)*Ra)/(Ga*Ga+Ra*Ra);1<xa?(Pa=La,Qa=Ja):0<xa&&(Pa+=Ga*xa,Qa+=Ra*xa)}Ga=pa-Pa;Ra=Ba-Qa;pa=Ga*Ga+Ra*Ra;pa>U&&(ba=wa,U=pa)}U>X&&(ba-na>da&&Fa(y,N,da,X,ia,na,ba),ia(y,N,y.length,ba,N[ba],N[ba+1]),ra-ba>da&&Fa(y,N,da,X,ia,ba,ra))}function Ua(y,N,da,X,ia){const {coords:na,lengths:ra}=N;da=
K(da,X);if(!na.length)return y!==N&&Sa(y),y;aa.assertIsSome(ia);const {originPosition:U,scale:ba,translate:pa}=ia;ia=va;ia.originPosition=U;X=ia.scale;X[0]=ba[0]??1;X[1]=-(ba[1]??1);X[2]=ba[2]??1;X[3]=ba[3]??1;var wa=ia.translate;wa[0]=pa[0]??0;wa[1]=pa[1]??0;wa[2]=pa[2]??0;wa[3]=pa[3]??0;if(!ra.length){for(X=0;X<da;++X)y.coords[X]=x(ia,na[X],X);y!==N&&Sa(y,da,0);return y}wa=0;for(let La=0;La<ra.length;La++){const Ja=ra[La];y.lengths[La]=Ja;for(var Ba=0;Ba<da;++Ba)y.coords[wa+Ba]=x(ia,na[wa+Ba],Ba);
Ba=y.coords[wa];let Pa=y.coords[wa+1];wa+=da;for(let Qa=1;Qa<Ja;Qa++,wa+=da){Ba+=na[wa]*X[0];Pa+=na[wa+1]*X[1];y.coords[wa]=Ba;y.coords[wa+1]=Pa;for(let Ga=2;Ga<da;++Ga)y.coords[wa+Ga]=x(ia,na[wa+Ga],Ga)}}y!==N&&Sa(y,na.length,ra.length);return y}function Oa(y,N,da,X){let ia=0,na=y[X*N],ra=y[X*(N+1)];for(let U=1;U<da;U++){const ba=na+y[X*(N+U)],pa=ra+y[X*(N+U)+1],wa=(ba-na)*(pa+ra);na=ba;ra=pa;ia+=wa}return.5*ia}function Sa(y,N=0,da=0){$a(y.lengths,da);$a(y.coords,N)}function $a(y,N=0){y.length!==
N&&(y.length=N)}const Ta=ma.getLogger("esri.layers.graphics.featureConversionUtils"),jb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ib=(y,N,da,X,ia,na)=>{y[da]=ia;y[da+1]=na},lb=(y,N,da,X,ia,na)=>{y[da]=ia;y[da+1]=na;y[da+2]=N[X+2]},c=(y,N,da,X,ia,na)=>{y[da]=ia;y[da+1]=na;y[da+2]=N[X+3]},u=(y,N,da,X,ia,na)=>{y[da]=ia;y[da+1]=na;y[da+2]=N[X+2];y[da+3]=N[X+3]},ea=[],ka=[],va={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};k.convertFromFeature=
function(y,N,da,X,ia){ea[0]=y;[y]=ta(ka,ea,N,da,X,ia);$a(ea);$a(ka);return y};k.convertFromFeatureSet=function(y,N){const da=new l,{hasM:X,hasZ:ia,features:na,objectIdFieldName:ra,spatialReference:U,geometryType:ba,exceededTransferLimit:pa,transform:wa,fields:Ba}=y;Ba&&(da.fields=Ba);da.geometryType=ba??null;da.objectIdFieldName=ra??N??null;da.spatialReference=U??null;if(!da.objectIdFieldName)return Ta.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),da;
na&&ta(da.features,na,ba,ia,X,da.objectIdFieldName);pa&&(da.exceededTransferLimit=pa);X&&(da.hasM=X);ia&&(da.hasZ=ia);wa&&(da.transform=wa);return da};k.convertFromFeatures=ta;k.convertFromGeometry=function(y,N,da){if(aa.isNone(y))return null;const X=new n;"hasZ"in y&&null==N&&(N=y.hasZ);"hasM"in y&&null==da&&(da=y.hasM);if(I.isPoint(y))return t(null!=N?N:null!=y.z,null!=da?da:null!=y.m)(X,y);if(I.isPolygon(y))return W(X,y,N,da);if(I.isPolyline(y))return A(X,y,K(N,da));if(I.isMultipoint(y))return P(X,
y,K(N,da));Ta.error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${y}'`))};k.convertFromGraphics=function(y,N,da,X,ia,na){const ra=y.length;switch(da){case "esriGeometryPoint":z(y,N,X,ia,na);break;case "esriGeometryMultipoint":F(y,N,X,ia,na);break;case "esriGeometryPolyline":C(y,N,X,ia,na);break;case "esriGeometryPolygon":r(y,N,X,ia,na);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${da}'`))}for(X=
0;X<N.length;X++)y[X+ra].geometryType=da,y[X+ra].insertAfter=N[X].insertAfter,y[X+ra].groupId=N[X].groupId;return y};k.convertFromMultipoint=P;k.convertFromMultipointFeatures=F;k.convertFromNestedArray=ja;k.convertFromPoint=function(y,N,da=t(null!=N.z,null!=N.m)){return da(y,N)};k.convertFromPointFeatures=z;k.convertFromPolygon=W;k.convertFromPolyline=A;k.convertFromPolylineFeatures=C;k.convertToFeature=function(y,N,da,X){ka[0]=y;Ea(ea,ka,N,da,X);y=ea[0];$a(ea);$a(ka);return y};k.convertToFeatureSet=
function(y){const {objectIdFieldName:N,spatialReference:da,transform:X,fields:ia,hasM:na,hasZ:ra,features:U,geometryType:ba,exceededTransferLimit:pa,uniqueIdField:wa,queryGeometry:Ba,queryGeometryType:La}=y;y=Ea([],U,ba,ra,na);const Ja=za(Ba,La,!1,!1);y={features:y,fields:ia,geometryType:ba,objectIdFieldName:N,spatialReference:da,uniqueIdField:wa,queryGeometry:Ja};X&&(y.transform=X);pa&&(y.exceededTransferLimit=pa);na&&(y.hasM=na);ra&&(y.hasZ=ra);return y};k.convertToFeatures=Ea;k.convertToGeometry=
za;k.convertToMultipoint=D;k.convertToMultipointFeatures=O;k.convertToPoint=function(y,N,da){return y?N?da?B(y):J(y):da?H(y):d(y):null};k.convertToPolygon=g;k.convertToPolyline=Q;k.deltaDecodeGeometry=function(y,N){if(aa.isNone(y))return null;const da=y.clone(),X=y.coords;y=y.lengths;let ia=0;for(let U=0;U<y.length;U++){const ba=y[U];var na=X[N*ia],ra=X[N*ia+1];for(let pa=1;pa<ba;pa++)na+=X[N*(ia+pa)],ra+=X[N*(ia+pa)+1],da.coords[N*(ia+pa)]=na,da.coords[N*(ia+pa)+1]=ra;ia+=ba}return da};k.deltaEncodeGeometry=
function(y,N){const da=y.clone(),X=y.coords;y=y.lengths;let ia=0;for(let ra=0;ra<y.length;ra++){const U=y[ra];let ba=X[N*ia];var na=X[N*ia+1];for(let pa=1;pa<U;pa++){const wa=X[N*(ia+pa)],Ba=X[N*(ia+pa)+1];na=Ba-na;da.coords[N*(ia+pa)]=wa-ba;da.coords[N*(ia+pa)+1]=na;ba=wa;na=Ba}ia+=U}return da};k.generalizeOptimizedGeometry=function(y,N,da,X,ia,na,ra=da,U=X){Sa(y);if(!N||!N.coords.length)return null;ia=jb[ia];const {coords:ba,lengths:pa}=N;N=K(da,X);const wa=K(da&&ra,X&&U);da=ca(da,X,ra,U);if(!pa.length)return da(y.coords,
ba,0,0,ba[0],ba[1]),Sa(y,N,0),y;X=0;na*=na;for(const Ba of pa){if(Ba<ia){X+=Ba*N;continue}ra=y.coords.length/wa;U=X;const La=X+(Ba-1)*N;da(y.coords,ba,y.coords.length,U,ba[U],ba[U+1]);Fa(y.coords,ba,N,na,da,U,La);da(y.coords,ba,y.coords.length,La,ba[La],ba[La+1]);U=y.coords.length/wa-ra;U>=ia?y.lengths.push(U):$a(y.coords,ra*wa);X+=Ba*N}return y.coords.length?y:null};k.getBoundsOptimizedGeometry=function(y,N,da,X){if(aa.isNone(N)||!N.coords||!N.coords.length)return null;da=K(da,X);let ia=X=Number.POSITIVE_INFINITY,
na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(N&&N.coords){N=N.coords;for(let U=0;U<N.length;U+=da){const ba=N[U],pa=N[U+1];X=Math.min(X,ba);na=Math.max(na,ba);ia=Math.min(ia,pa);ra=Math.max(ra,pa)}}S.is(y)?S.fromRectValues(y,X,ia,na,ra):R.fromValues(X,ia,na,ra,y);return y};k.getQuantizedArea=function(y,N){const {coords:da,lengths:X}=y;let ia=y=0;for(let na=0;na<X.length;na++){const ra=X[na];ia+=Oa(da,y,ra,N);y+=ra}return Math.abs(ia)};k.getQuantizedBoundsOptimizedGeometry=function(y,
N,da,X){da=K(da,X);const {lengths:ia,coords:na}=N;X=N=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY,ba=0;for(const pa of ia){let wa=na[ba],Ba=na[ba+1];N=Math.min(wa,N);X=Math.min(Ba,X);ra=Math.max(wa,ra);U=Math.max(Ba,U);ba+=da;for(let La=1;La<pa;La++,ba+=da){const Ja=na[ba],Pa=na[ba+1];wa+=Ja;Ba+=Pa;0>Ja&&(N=Math.min(N,wa));0<Ja&&(ra=Math.max(ra,wa));0>Pa?X=Math.min(X,Ba):0<Pa&&(U=Math.max(U,Ba))}}y[0]=N;y[1]=X;y[2]=ra;y[3]=U;return y};k.getSignedQuantizedRingArea=
Oa;k.quantizeOptimizedFeatureSet=function(y,N){const {geometryType:da,features:X,hasM:ia,hasZ:na}=N;if(!y)return N;for(let ra=0;ra<X.length;ra++){const U=X[ra],ba=U.weakClone();ba.geometry=new n;Ha(ba.geometry,U.geometry,ia,na,da,y);U.centroid&&(ba.centroid=new n,Ha(ba.centroid,U.centroid,ia,na,"esriGeometryPoint",y));X[ra]=ba}N.transform=y;return N};k.quantizeOptimizedGeometry=Ha;k.quantizeX=L;k.quantizeY=m;k.removeCollinearVectices=function(y,N,da,X,ia){if(!N||!N.coords||!N.coords.length)return null;
da=jb[da];const {coords:na,lengths:ra}=N;N=ca(X,ia,X,ia);X=K(X,ia);let U=ia=0,ba=0,pa=0;for(const La of ra){U=pa;N(y.coords,na,U,ia,na[ia],na[ia+1]);ia+=X;var wa=na[ia];let Ja=na[ia+1],Pa=wa,Qa=Ja;var Ba=Ja/wa;U+=X;N(y.coords,na,U,ia,Pa,Qa);ia+=X;for(let Ga=2;Ga<La;Ga++){wa=na[ia];Ja=na[ia+1];const Ra=Ja/wa,xa=Ba===Ra||!isFinite(Ba)&&!isFinite(Ra);Ba=xa&&isFinite(Ra)?0<=Ba&&0<=Ra||0>=Ba&&0>=Ra:0<=Qa&&0<=Ja||0>=Qa&&0>=Ja;xa&&Ba?(Pa+=wa,Qa+=Ja):(Pa=wa,Qa=Ja,U+=X);N(y.coords,na,U,ia,Pa,Qa);ia+=X;Ba=
Ra}U+=X;wa=(U-pa)/X;wa>=da&&(y.lengths[ba]=wa,pa=U,ba++)}y.coords.length>pa&&(y.coords.length=pa);y.lengths.length>ba&&(y.lengths.length=ba);return y.coords.length&&y.lengths.length?y:null};k.removeZMValues=function(y,N,da,X,ia,na){Sa(y);y.lengths.push(...N.lengths);if(da===ia&&X===na)for(var ra=0;ra<N.coords.length;ra++)y.coords.push(N.coords[ra]);else for(ra=K(da,X),da=ca(da,X,ia,na),N=N.coords,X=0;X<N.length;X+=ra)da(y.coords,N,y.coords.length,X,N[X],N[X+1]);return y};k.unquantizeOptimizedFeatureSet=
function(y){const {transform:N,features:da,hasM:X,hasZ:ia}=y;if(!N)return y;for(const na of da)aa.isSome(na.geometry)&&Ua(na.geometry,na.geometry,X,ia,N),aa.isSome(na.centroid)&&Ua(na.centroid,na.centroid,X,ia,N);y.transform=null;return y};k.unquantizeOptimizedGeometry=Ua;k.unquantizeValue=x;k.unquantizeX=function(y,N){return x(y,N,0)};k.unquantizeY=function(y,N){return x(y,-N,1)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,f,ma,aa){function S(d=m){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function R(d,q,J,G,H,T,B=S()){B[0]=d;B[1]=q;B[2]=J;B[3]=G;B[4]=H;B[5]=T;return B}function I(d){return d[0]>=d[3]?0:d[3]-d[0]}function v(d){return d[1]>=d[4]?0:d[4]-d[1]}function l(d){return d[2]>=d[5]?0:d[5]-d[2]}function n(d,q){return Math.max(q[0],d[0])<=Math.min(q[3],d[3])&&Math.max(q[1],d[1])<=Math.min(q[4],d[4])&&Math.max(q[2],d[2])<=Math.min(q[5],d[5])}function K(d,q){d[0]=
q[0];d[1]=q[1];d[2]=q[2];d[3]=q[3];d[4]=q[4];d[5]=q[5];return d}function ca(d){return 6===d.length}const L=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],m=[0,0,0,0,0,0],x=S();k.NEGATIVE_INFINITY=L;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=m;k.allFinite=function(d){for(let q=0;6>q;q++)if(!isFinite(d[q]))return!1;return!0};k.center=function(d,q=[0,0,0]){q[0]=d[0]+I(d)/2;q[1]=d[1]+v(d)/2;q[2]=d[2]+l(d)/2;return q};k.contains=function(d,q){return q[0]>=
d[0]&&q[1]>=d[1]&&q[2]>=d[2]&&q[3]<=d[3]&&q[4]<=d[4]&&q[5]<=d[5]};k.containsPoint=function(d,q){return q[0]>=d[0]&&q[1]>=d[1]&&q[2]>=d[2]&&q[0]<=d[3]&&q[1]<=d[4]&&q[2]<=d[5]};k.containsPointWithMargin=function(d,q,J){return q[0]>=d[0]-J&&q[1]>=d[1]-J&&q[2]>=d[2]-J&&q[0]<=d[3]+J&&q[1]<=d[4]+J&&q[2]<=d[5]+J};k.create=S;k.depth=v;k.diameter=function(d){const q=I(d),J=l(d);d=v(d);return Math.sqrt(q*q+J*J+d*d)};k.empty=function(d){return d?K(d,L):S(L)};k.equals=function(d,q,J){if(f.isNone(d)||f.isNone(q))return d===
q;if(!ca(d)||!ca(q))return!1;if(J)for(let G=0;G<d.length;G++){if(!J(d[G],q[G]))return!1}else for(J=0;J<d.length;J++)if(d[J]!==q[J])return!1;return!0};k.expandWithAABB=function(d,q){d[0]=Math.min(d[0],q[0]);d[1]=Math.min(d[1],q[1]);d[2]=Math.min(d[2],q[2]);d[3]=Math.max(d[3],q[3]);d[4]=Math.max(d[4],q[4]);d[5]=Math.max(d[5],q[5])};k.expandWithBuffer=function(d,q,J=0,G=q.length/3){let H=d[0],T=d[1],B=d[2],p=d[3],t=d[4],z=d[5];for(let O=0;O<G;O++)H=Math.min(H,q[J+3*O]),T=Math.min(T,q[J+3*O+1]),B=Math.min(B,
q[J+3*O+2]),p=Math.max(p,q[J+3*O]),t=Math.max(t,q[J+3*O+1]),z=Math.max(z,q[J+3*O+2]);d[0]=H;d[1]=T;d[2]=B;d[3]=p;d[4]=t;d[5]=z};k.expandWithNestedArray=function(d,q,J){const G=q.length;let H=d[0],T=d[1],B=d[2],p=d[3],t=d[4],z=d[5];if(J)for(J=0;J<G;J++){var O=q[J];H=Math.min(H,O[0]);T=Math.min(T,O[1]);B=Math.min(B,O[2]);p=Math.max(p,O[0]);t=Math.max(t,O[1]);z=Math.max(z,O[2])}else for(J=0;J<G;J++)O=q[J],H=Math.min(H,O[0]),T=Math.min(T,O[1]),p=Math.max(p,O[0]),t=Math.max(t,O[1]);d[0]=H;d[1]=T;d[2]=
B;d[3]=p;d[4]=t;d[5]=z};k.expandWithOffset=function(d,q,J,G){d[0]=Math.min(d[0],d[0]+q);d[3]=Math.max(d[3],d[3]+q);d[1]=Math.min(d[1],d[1]+J);d[4]=Math.max(d[4],d[4]+J);d[2]=Math.min(d[2],d[2]+G);d[5]=Math.max(d[5],d[5]+G)};k.expandWithRect=function(d,q){d[0]=Math.min(d[0],q[0]);d[1]=Math.min(d[1],q[1]);d[3]=Math.max(d[3],q[2]);d[4]=Math.max(d[4],q[3])};k.expandWithVec3=function(d,q){d[0]=Math.min(d[0],q[0]);d[1]=Math.min(d[1],q[1]);d[2]=Math.min(d[2],q[2]);d[3]=Math.max(d[3],q[0]);d[4]=Math.max(d[4],
q[1]);d[5]=Math.max(d[5],q[2])};k.fromExtent=function(d,q=S()){q[0]=d.xmin;q[1]=d.ymin;q[2]=d.hasZ?d.zmin:-Infinity;q[3]=d.xmax;q[4]=d.ymax;q[5]=d.hasZ?d.zmax:Infinity;return q};k.fromMinMax=function(d,q,J=S()){J[0]=d[0];J[1]=d[1];J[2]=d[2];J[3]=q[0];J[4]=q[1];J[5]=q[2];return J};k.fromRect=function(d,q){d[0]=q[0];d[1]=q[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=q[2];d[4]=q[3];d[5]=Number.POSITIVE_INFINITY;return d};k.fromRectValues=function(d,q,J,G,H){d[0]=q;d[1]=J;d[2]=Number.NEGATIVE_INFINITY;d[3]=
G;d[4]=H;d[5]=Number.POSITIVE_INFINITY;return d};k.fromValues=R;k.getMax=function(d,q){q[0]=d[3];q[1]=d[4];q[2]=d[5];return q};k.getMin=function(d,q){q[0]=d[0];q[1]=d[1];q[2]=d[2];return q};k.height=l;k.intersects=n;k.intersectsClippingArea=function(d,q){return f.isNone(q)?!0:n(d,q)};k.is=ca;k.isPoint=function(d){return 0===I(d)&&0===v(d)&&0===l(d)};k.maximumDimension=function(d){return Math.max(I(d),l(d),v(d))};k.offset=function(d,q,J,G,H=d){H[0]=d[0]+q;H[1]=d[1]+J;H[2]=d[2]+G;H[3]=d[3]+q;H[4]=d[4]+
J;H[5]=d[5]+G;return H};k.scale=function(d,q,J=d){const G=d[0]+I(d)/2,H=d[1]+v(d)/2,T=d[2]+l(d)/2;J[0]=G+(d[0]-G)*q;J[1]=H+(d[1]-H)*q;J[2]=T+(d[2]-T)*q;J[3]=G+(d[3]-G)*q;J[4]=H+(d[4]-H)*q;J[5]=T+(d[5]-T)*q;return J};k.set=K;k.setMax=function(d,q,J=d){J[3]=q[0];J[4]=q[1];J[5]=q[2];J!==d&&(J[0]=d[0],J[1]=d[1],J[2]=d[2]);return d};k.setMin=function(d,q,J=d){J[0]=q[0];J[1]=q[1];J[2]=q[2];J!==d&&(J[3]=d[3],J[4]=d[4],J[5]=d[5]);return J};k.size=function(d,q=[0,0,0]){q[0]=I(d);q[1]=v(d);q[2]=l(d);return q};
k.toExtent=function(d,q){return isFinite(d[2])||isFinite(d[5])?new ma({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:q}):new ma({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:q})};k.toRect=function(d,q){q||(q=aa.create());q[0]=d[0];q[1]=d[1];q[2]=d[3];q[3]=d[4];return q};k.width=I;k.wrap=function(d,q,J,G,H,T){return R(d,q,J,G,H,T,x)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports",
"../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,f,ma,aa,S){function R(m=L){return[m[0],m[1],m[2],m[3]]}function I(m,x){m!==x&&(m[0]=x[0],m[1]=x[1],m[2]=x[2],m[3]=x[3]);return m}function v(m){return aa.isNone(m)||m[0]>=m[2]?0:m[2]-m[0]}function l(m){return m[1]>=m[3]?0:m[3]-m[1]}function n(m,x,d){return x>=m[0]&&d>=m[1]&&x<=m[2]&&d<=m[3]}function K(m){return null!=m&&4===m.length}const ca=[Infinity,Infinity,-Infinity,-Infinity],L=[0,0,0,0];k.NEGATIVE_INFINITY=ca;
k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=L;k.allFinite=function(m){for(let x=0;4>x;x++)if(!isFinite(m[x]))return!1;return!0};k.area=function(m){return v(m)*l(m)};k.center=function(m,x=[0,0]){x[0]=(m[0]+m[2])/2;x[1]=(m[1]+m[3])/2;return x};k.clone=function(m){return[m[0],m[1],m[2],m[3]]};k.contains=function(m,x){return x[0]>=m[0]&&x[2]<=m[2]&&x[1]>=m[1]&&x[3]<=m[3]};k.containsPoint=function(m,x){return n(m,x[0],x[1])};k.containsPointObject=function(m,x){return n(m,
x.x,x.y)};k.containsPointWithMargin=function(m,x,d){return x[0]>=m[0]-d&&x[1]>=m[1]-d&&x[0]<=m[2]+d&&x[1]<=m[3]+d};k.containsXY=n;k.containsXYWithMargin=function(m,x,d,q){return x>=m[0]-q&&d>=m[1]-q&&x<=m[2]+q&&d<=m[3]+q};k.copy=I;k.create=R;k.distance=function(m,x){const d=(m[1]+m[3])/2,q=Math.max(Math.abs(x[0]-(m[0]+m[2])/2)-v(m)/2,0);m=Math.max(Math.abs(x[1]-d)-l(m)/2,0);return Math.sqrt(q*q+m*m)};k.empty=function(m){return m?I(m,ca):R(ca)};k.equals=function(m,x){return K(m)&&K(x)?m[0]===x[0]&&
m[1]===x[1]&&m[2]===x[2]&&m[3]===x[3]:m===x};k.expand=function(m,x,d){if(aa.isNone(x))I(d,m);else if("length"in x)if(K(x))d[0]=Math.min(m[0],x[0]),d[1]=Math.min(m[1],x[1]),d[2]=Math.max(m[2],x[2]),d[3]=Math.max(m[3],x[3]);else{if(2===x.length||3===x.length)d[0]=Math.min(m[0],x[0]),d[1]=Math.min(m[1],x[1]),d[2]=Math.max(m[2],x[0]),d[3]=Math.max(m[3],x[1])}else switch(x.type){case "extent":d[0]=Math.min(m[0],x.xmin);d[1]=Math.min(m[1],x.ymin);d[2]=Math.max(m[2],x.xmax);d[3]=Math.max(m[3],x.ymax);break;
case "point":d[0]=Math.min(m[0],x.x),d[1]=Math.min(m[1],x.y),d[2]=Math.max(m[2],x.x),d[3]=Math.max(m[3],x.y)}};k.expandPointInPlace=function(m,x){x[0]<m[0]&&(m[0]=x[0]);x[0]>m[2]&&(m[2]=x[0]);x[1]<m[1]&&(m[1]=x[1]);x[1]>m[3]&&(m[3]=x[1])};k.expandWithNestedArray=function(m,x,d=m){const q=x.length;let J=m[0],G=m[1],H=m[2];m=m[3];for(let T=0;T<q;T++){const B=x[T];J=Math.min(J,B[0]);G=Math.min(G,B[1]);H=Math.max(H,B[0]);m=Math.max(m,B[1])}d[0]=J;d[1]=G;d[2]=H;d[3]=m;return d};k.fromExtent=function(m,
x=R()){x[0]=m.xmin;x[1]=m.ymin;x[2]=m.xmax;x[3]=m.ymax;return x};k.fromValues=function(m,x,d,q,J=R()){J[0]=m;J[1]=x;J[2]=d;J[3]=q;return J};k.height=l;k.intersection=function(m,x,d){if(aa.isNone(x))return I(d,m);const q=x[0],J=x[1],G=x[2];x=x[3];d[0]=ma.clamp(m[0],q,G);d[1]=ma.clamp(m[1],J,x);d[2]=ma.clamp(m[2],q,G);d[3]=ma.clamp(m[3],J,x);return d};k.intersects=function(m,x){return Math.max(x[0],m[0])<=Math.min(x[2],m[2])&&Math.max(x[1],m[1])<=Math.min(x[3],m[3])};k.intersectsSegment=function(m,
x,d){const q=m[0],J=m[1],G=m[2];m=m[3];const {x:H,y:T}=x,{x:B,y:p}=d;var t=(O,D)=>0>(p-T)*O+(H-B)*D+(B*T-H*p);x=t(q,m);d=t(G,m);const z=t(G,J);t=t(q,J);return x===d&&d===z&&z===t&&t===x||H<q&&B<q||H>G&&B>G||T>m&&p>m||T<J&&p<J?!1:!0};k.intersectsSphere=function(m,x){const d=x[3];var q=Math.abs(x[0]-.5*(m[0]+m[2]));const J=.5*(m[2]-m[0]);if(q>d+J)return!1;var G=.5*(m[3]-m[1]);m=Math.abs(x[1]-.5*(m[1]+m[3]));if(m>d+G)return!1;if(q<J||m<G)return!0;q-=J;G=m-G;return q*q+G*G<=d*d};k.is=K;k.isPoint=function(m){return(0===
v(m)||!isFinite(m[0]))&&(0===l(m)||!isFinite(m[1]))};k.offset=function(m,x,d,q=m){q[0]=m[0]+x;q[1]=m[1]+d;q[2]=m[2]+x;q[3]=m[3]+d;return q};k.pad=function(m,x,d=m){d[0]=m[0]-x;d[1]=m[1]-x;d[2]=m[2]+x;d[3]=m[3]+x;return d};k.setMax=function(m,x,d=m){d[2]=x[0];d[3]=x[1];d!==m&&(d[0]=m[0],d[1]=m[1]);return m};k.setMin=function(m,x,d=m){d[0]=x[0];d[1]=x[1];d!==m&&(d[2]=m[2],d[3]=m[3]);return d};k.size=function(m,x){x[0]=m[2]-m[0];x[1]=m[3]-m[1]};k.toExtent=function(m,x){return new S({xmin:m[0],ymin:m[1],
xmax:m[2],ymax:m[3],spatialReference:x})};k.width=v;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,f,ma){let aa=function(){function R(I=null,v={},l,n){this.geometry=I;this.attributes=v;this.centroid=l;this.objectId=n;this.geohashY=this.geohashX=this.displayId=0}R.prototype.weakClone=function(){const I=new R(this.geometry,this.attributes,this.centroid,
this.objectId);I.displayId=this.displayId;I.geohashX=this.geohashX;I.geohashY=this.geohashY;return I};return R}(),S=function(R){function I(){return R.apply(this,arguments)||this}f._inheritsLoose(I,R);return I}(aa);k.OptimizedFeature=aa;k.OptimizedFeatureWithGeometry=S;k.hasGeometry=function(R){return!(ma.isNone(R.geometry)||!R.geometry.coords||!R.geometry.coords.length)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const f=new k;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;
f.geometryType=this.geometryType;f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function f(aa=
[],S=[],R=!1){this.lengths=aa??[];this.coords=S??[];this.hasIndeterminateRingOrder=R}f.fromRect=function(aa){const [S,R,I,v]=aa;aa=I-S;const l=v-R;return new f([5],[S,R,aa,0,0,l,-aa,0,0,-l])};var ma=f.prototype;ma.forEachVertex=function(aa){let S=0;this.lengths.length||aa(this.coords[0],this.coords[1]);for(let R=0;R<this.lengths.length;R++){const I=this.lengths[R];for(let v=0;v<I;v++)aa(this.coords[2*(v+S)],this.coords[2*(v+S)+1]);S+=I}};ma.clone=function(aa){return aa?(aa.set(this.coords),new f(this.lengths.slice(),
aa,this.hasIndeterminateRingOrder)):new f(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(f,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((aa,S)=>aa+S)}}]);return f}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K){const ca=R.create();return function(){function L(x){this.geometryInfo=x;this._boundsStore=new l.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ma;this.featureAdapter=n.optimizedFeatureQueryEngineAdapter}var m=L.prototype;m.getFullExtent=function(x){if(S.isNone(this.fullBounds))return null;const [d,q,J,G]=this.fullBounds;return{xmin:d,ymin:q,xmax:J,ymax:G,spatialReference:K.cleanFromGeometryEngine(x)}};m.add=function(x){this._add(x);
this._emitChanged()};m.addMany=function(x){for(const d of x)this._add(d);this._emitChanged()};m.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};m.removeById=function(x){x=this._featuresById.get(x);if(!x)return null;this._remove(x);this._emitChanged();return x};m.removeManyById=function(x){this._boundsStore.invalidateIndex();for(const d of x)(x=this._featuresById.get(d))&&this._remove(x);this._emitChanged()};m.forEachBounds=function(x,d){for(const q of x)(x=
this._boundsStore.get(q.objectId))&&d(R.fromRect(ca,x))};m.getFeature=function(x){return this._featuresById.get(x)};m.has=function(x){return this._featuresById.has(x)};m.forEach=function(x){this._featuresById.forEach(d=>x(d))};m.forEachInBounds=function(x,d){this._boundsStore.forEachInBounds(x,q=>{d(this._featuresById.get(q))})};m.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};m.sweep=function(){let x=!1;this._featuresById.forEach((d,q)=>{this._markedIds.has(q)||
(x=!0,this._remove(d))});this._markedIds.clear();x&&this._emitChanged()};m._emitChanged=function(){this.events.emit("changed",void 0)};m._add=function(x){if(x){var d=x.objectId;if(null==d)aa.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:x}));else{var q=this._featuresById.get(d);this._markedIds.add(d);if(q){x.displayId=q.displayId;var J=this._boundsStore.get(d);this._boundsStore.delete(d)}else if(S.isSome(this.onFeatureAdd))this.onFeatureAdd(x);
!S.isNone(x.geometry)&&x.geometry.coords&&x.geometry.coords.length?(J=v.getBoundsOptimizedGeometry(S.isSome(J)?J:I.create(),x.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),S.isSome(J)&&this._boundsStore.set(d,J)):this._boundsStore.set(d,null);this._featuresById.set(d,x)}}};m._remove=function(x){if(S.isSome(this.onFeatureRemove))this.onFeatureRemove(x);const d=x.objectId;this._markedIds.delete(d);this._boundsStore.delete(d);this._featuresById.delete(d);return x};k._createClass(L,[{key:"geometryType",
get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let x=0;this._featuresById.forEach(d=>{S.isSome(d.geometry)&&d.geometry.coords&&(x+=d.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:x/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return L}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,f,ma,aa,S){let R=function(){function I(){this._emitter=new I.EventEmitter(this)}var v=I.prototype;v.emit=function(l,n){return this._emitter.emit(l,n)};v.on=function(l,n){return this._emitter.on(l,n)};v.once=function(l,n){return this._emitter.once(l,
n)};v.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return I}();(function(I){let v=function(){function n(ca=null){this._target=ca;this._listenersMap=null}var K=n.prototype;K.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};K.emit=function(ca,L){ca=this._listenersMap&&this._listenersMap.get(ca);if(!ca)return!1;const m=this._target||this;[...ca].forEach(x=>{x.call(m,L)});return 0<ca.length};K.on=function(ca,L){if(Array.isArray(ca)){var m=
ca.map(x=>this.on(x,L));return aa.handlesGroup(m)}if(ca.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);m=this._listenersMap.get(ca)||[];m.push(L);this._listenersMap.set(ca,m);return{remove:()=>{const x=this._listenersMap&&this._listenersMap.get(ca)||[],d=x.indexOf(L);0<=d&&x.splice(d,1)}}};K.once=function(ca,L){const m=this.on(ca,x=>{m.remove();L.call(null,x)});return m};K.hasEventListener=
function(ca){ca=this._listenersMap&&this._listenersMap.get(ca);return null!=ca&&0<ca.length};return n}();I.EventEmitter=v;I.EventedMixin=n=>{n=function(K){function ca(){var m=K.apply(this,arguments)||this;m._emitter=new v;return m}k._inheritsLoose(ca,K);var L=ca.prototype;L.destroy=function(){this._emitter.clear()};L.emit=function(m,x){return this._emitter.emit(m,x)};L.on=function(m,x){return this._emitter.on(m,x)};L.once=function(m,x){return this._emitter.once(m,x)};L.hasEventListener=function(m){return this._emitter.hasEventListener(m)};
return ca}(n);return n=f.__decorate([S.subclass("esri.core.Evented")],n)};let l=function(n){function K(){var L=n.apply(this,arguments)||this;L._emitter=new R.EventEmitter(k._assertThisInitialized(L));return L}k._inheritsLoose(K,n);var ca=K.prototype;ca.destroy=function(){this._emitter.clear()};ca.emit=function(L,m){return this._emitter.emit(L,m)};ca.on=function(L,m){return this._emitter.on(L,m)};ca.once=function(L,m){return this._emitter.once(L,m)};ca.hasEventListener=function(L){return this._emitter.hasEventListener(L)};
return K}(ma);l=f.__decorate([S.subclass("esri.core.Evented")],l);I.EventedAccessor=l})(R||(R={}));return R})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(k,f,ma,aa,S){function R(l,n,K){I.minX=n[0];I.minY=n[1];I.maxX=n[2];I.maxY=n[3];l.search(I,K)}const I={minX:0,minY:0,maxX:0,maxY:0};let v=function(){function l(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new aa.PooledRBush(9,ma("esri-csp-restrictions")?K=>({minX:K[0],minY:K[1],maxX:K[2],maxY:K[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const K=Array(this._idByBounds.size);let ca=0;this._idByBounds.forEach((L,m)=>{K[ca++]=m});this._indexInvalid=!1;this._index.clear();this._index.load(K)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(K=>
this._idByBounds.has(K))))),this._boundsToLoad.length=0)}}var n=l.prototype;n.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};n.delete=function(K){const ca=this._boundsById.get(K);this._boundsById.delete(K);ca&&(this._idByBounds.delete(ca),this._indexInvalid||this._index.remove(ca))};n.forEachInBounds=function(K,ca){this._loadIndex();R(this._index,K,L=>ca(this._idByBounds.get(L)))};n.get=function(K){return this._boundsById.get(K)};
n.has=function(K){return this._boundsById.has(K)};n.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};n.set=function(K,ca){if(!this._indexInvalid){const L=this._boundsById.get(K);L&&(this._index.remove(L),this._idByBounds.delete(L))}this._boundsById.set(K,ca);ca&&(this._idByBounds.set(ca,K),this._indexInvalid||(this._boundsToLoad.push(ca),5E4<this._boundsToLoad.length&&this._loadIndex()))};f._createClass(l,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;
const K=S.empty();for(const ca of this._boundsById.values())ca&&(K[0]=Math.min(ca[0],K[0]),K[1]=Math.min(ca[1],K[1]),K[2]=Math.max(ca[2],K[2]),K[3]=Math.max(ca[3],K[3]));return K}},{key:"valid",get:function(){return!this._indexInvalid}}]);return l}();k.BoundsStore=v;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(k,f,ma,aa,S,R){function I(z,O){v(z,0,z.children.length,O,z)}function v(z,O,D,F,P){P||(P=new p([]));P.minX=Infinity;P.minY=Infinity;P.maxX=-Infinity;P.maxY=-Infinity;for(let Q=O,C;Q<D;Q++)C=z.children[Q],l(P,z.leaf?F(C):C);return P}function l(z,O){z.minX=Math.min(z.minX,O.minX);z.minY=Math.min(z.minY,O.minY);z.maxX=Math.max(z.maxX,O.maxX);z.maxY=Math.max(z.maxY,O.maxY)}function n(z,O){return z.minX-O.minX}function K(z,O){return z.minY-O.minY}function ca(z){return(z.maxX-z.minX)*(z.maxY-z.minY)}
function L(z){return z.maxX-z.minX+(z.maxY-z.minY)}function m(z,O){return z.minX<=O.minX&&z.minY<=O.minY&&O.maxX<=z.maxX&&O.maxY<=z.maxY}function x(z,O){return O.minX<=z.maxX&&O.minY<=z.maxY&&O.maxX>=z.minX&&O.maxY>=z.minY}function d(z,O,D,F,P){for(O=[O,D];O.length;){D=aa.assumeNonNull(O.pop());const Q=aa.assumeNonNull(O.pop());if(D-Q<=F)continue;const C=Q+Math.ceil((D-Q)/F/2)*F;R.quickselect(z,C,Q,D,P);O.push(Q,C,C,D)}}let q=function(){function z(D=9,F){this._compareMinX=n;this._compareMinY=K;this._toBBox=
P=>P;this._maxEntries=Math.max(4,D||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));F&&("function"===typeof F?this._toBBox=F:this._initFormat(F));this.clear()}var O=z.prototype;O.destroy=function(){this.clear();J.prune();G.prune();H.prune();T.prune()};O.all=function(D){this._all(this._data,D)};O.search=function(D,F){let P=this._data;const Q=this._toBBox;if(x(D,P))for(J.clear();P;){for(let C=0,A=P.children.length;C<A;C++){const g=P.children[C],r=P.leaf?Q(g):g;x(D,r)&&(P.leaf?F(g):m(D,
r)?this._all(g,F):J.push(g))}P=J.pop()}};O.collides=function(D){let F=this._data;const P=this._toBBox;if(!x(D,F))return!1;for(J.clear();F;){for(let Q=0,C=F.children.length;Q<C;Q++){const A=F.children[Q],g=F.leaf?P(A):A;if(x(D,g)){if(F.leaf||m(D,g))return!0;J.push(A)}}F=J.pop()}return!1};O.load=function(D){if(!D.length)return this;if(D.length<this._minEntries){for(let F=0,P=D.length;F<P;F++)this.insert(D[F]);return this}D=this._build(D.slice(0,D.length),0,D.length-1,0);if(this._data.children.length)if(this._data.height===
D.height)this._splitRoot(this._data,D);else{if(this._data.height<D.height){const F=this._data;this._data=D;D=F}this._insert(D,this._data.height-D.height-1,!0)}else this._data=D;return this};O.insert=function(D){D&&this._insert(D,this._data.height-1);return this};O.clear=function(){this._data=new p([]);return this};O.remove=function(D){if(!D)return this;let F=this._data,P=null,Q=0,C=!1,A;const g=this._toBBox(D);H.clear();for(T.clear();F||0<H.length;){F||(F=aa.assumeNonNull(H.pop()),P=H.data[H.length-
1],Q=T.pop()??0,C=!0);if(F.leaf&&(A=ma.indexOf(F.children,D,F.children.length,F.indexHint),-1!==A)){F.children.splice(A,1);H.push(F);this._condense(H);break}C||F.leaf||!m(F,g)?P?(Q++,F=P.children[Q],C=!1):F=null:(H.push(F),T.push(Q),Q=0,P=F,F=F.children[0])}return this};O.toJSON=function(){return this._data};O.fromJSON=function(D){this._data=D;return this};O._all=function(D,F){for(G.clear();D;){if(!0===D.leaf)for(const P of D.children)F(P);else G.pushArray(D.children);D=G.pop()??null}};O._build=function(D,
F,P,Q){var C=P-F+1,A=this._maxEntries;if(C<=A)return D=new p(D.slice(F,P+1)),I(D,this._toBBox),D;Q||(Q=Math.ceil(Math.log(C)/Math.log(A)),A=Math.ceil(C/A**(Q-1)));const g=new t([]);g.height=Q;C=Math.ceil(C/A);A=C*Math.ceil(Math.sqrt(A));for(d(D,F,P,A,this._compareMinX);F<=P;F+=A){const r=Math.min(F+A-1,P);d(D,F,r,C,this._compareMinY);for(let W=F;W<=r;W+=C)g.children.push(this._build(D,W,Math.min(W+C-1,r),Q-1))}I(g,this._toBBox);return g};O._chooseSubtree=function(D,F,P,Q){for(;;){Q.push(F);if(!0===
F.leaf||Q.length-1===P)break;let C=Infinity,A=Infinity,g=void 0;for(let r=0,W=F.children.length;r<W;r++){const ja=F.children[r],ta=ca(ja),za=(Math.max(ja.maxX,D.maxX)-Math.min(ja.minX,D.minX))*(Math.max(ja.maxY,D.maxY)-Math.min(ja.minY,D.minY))-ta;za<A?(A=za,C=ta<C?ta:C,g=ja):za===A&&ta<C&&(C=ta,g=ja)}F=g||F.children[0]}return F};O._insert=function(D,F,P){var Q=this._toBBox;P=P?D:Q(D);H.clear();Q=this._chooseSubtree(P,this._data,F,H);Q.children.push(D);for(l(Q,P);0<=F;)if(H.data[F].children.length>
this._maxEntries)this._split(H,F),F--;else break;this._adjustParentBBoxes(P,H,F)};O._split=function(D,F){const P=D.data[F];var Q=P.children.length;const C=this._minEntries;this._chooseSplitAxis(P,C,Q);(Q=this._chooseSplitIndex(P,C,Q))?(Q=P.children.splice(Q,P.children.length-Q),Q=P.leaf?new p(Q):new t(Q),Q.height=P.height,I(P,this._toBBox),I(Q,this._toBBox),F?D.data[F-1].children.push(Q):this._splitRoot(P,Q)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};O._splitRoot=
function(D,F){this._data=new t([D,F]);this._data.height=D.height+1;I(this._data,this._toBBox)};O._chooseSplitIndex=function(D,F,P){let Q,C,A=void 0;Q=C=Infinity;for(let r=F;r<=P-F;r++){var g=v(D,0,r,this._toBBox);const W=v(D,r,P,this._toBBox),ja=Math.max(0,Math.min(g.maxX,W.maxX)-Math.max(g.minX,W.minX))*Math.max(0,Math.min(g.maxY,W.maxY)-Math.max(g.minY,W.minY));g=ca(g)+ca(W);ja<Q?(Q=ja,A=r,C=g<C?g:C):ja===Q&&g<C&&(C=g,A=r)}return A};O._chooseSplitAxis=function(D,F,P){const Q=D.leaf?this._compareMinX:
n,C=D.leaf?this._compareMinY:K,A=this._allDistMargin(D,F,P,Q);F=this._allDistMargin(D,F,P,C);A<F&&D.children.sort(Q)};O._allDistMargin=function(D,F,P,Q){D.children.sort(Q);Q=this._toBBox;var C=v(D,0,F,Q);const A=v(D,P-F,P,Q);let g=L(C)+L(A);for(let r=F;r<P-F;r++){const W=D.children[r];l(C,D.leaf?Q(W):W);g+=L(C)}for(P=P-F-1;P>=F;P--)C=D.children[P],l(A,D.leaf?Q(C):C),g+=L(A);return g};O._adjustParentBBoxes=function(D,F,P){for(;0<=P;P--)l(F.data[P],D)};O._condense=function(D){for(let F=D.length-1;0<=
F;F--){const P=D.data[F];if(0===P.children.length)if(0<F){const Q=D.data[F-1],C=Q.children;C.splice(ma.indexOf(C,P,C.length,Q.indexHint),1)}else this.clear();else I(P,this._toBBox)}};O._initFormat=function(D){const F=["return a"," - b",";"];this._compareMinX=new Function("a","b",F.join(D[0]));this._compareMinY=new Function("a","b",F.join(D[1]));this._toBBox=new Function("a","return {minX: a"+D[0]+", minY: a"+D[1]+", maxX: a"+D[2]+", maxY: a"+D[3]+"};")};return z}();const J=new S,G=new S,H=new S,T=
new S({deallocator:void 0});S=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let B=function(z){function O(){var D=z.apply(this,arguments)||this;D.height=1;D.indexHint=new ma.PositionHint;return D}f._inheritsLoose(O,z);return O}(S),p=function(z){function O(D){var F=z.call(this)||this;F.children=D;F.leaf=!0;return F}f._inheritsLoose(O,z);return O}(B),t=function(z){function O(D){var F=z.call(this)||this;F.children=D;F.leaf=!1;return F}f._inheritsLoose(O,z);return O}(B);k.BBox=
S;k.PooledRBush=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var f={};(function(ma){(function(aa){aa=aa();void 0!==aa&&(ma.exports=aa)})(function(){function aa(I,v,l,n,K){for(;n>l;){if(600<n-l){var ca=n-l+1,L=v-l+1,m=Math.log(ca),x=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*x*(ca-x)/ca)*(0>L-ca/2?-1:1);aa(I,v,Math.max(l,Math.floor(v-L*x/ca+m)),Math.min(n,Math.floor(v+(ca-L)*x/ca+m)),K)}ca=I[v];L=l;x=n;S(I,l,v);for(0<
K(I[n],ca)&&S(I,l,n);L<x;){S(I,L,x);L++;for(x--;0>K(I[L],ca);)L++;for(;0<K(I[x],ca);)x--}0===K(I[l],ca)?S(I,l,x):(x++,S(I,x,n));x<=v&&(l=x+1);v<=x&&(n=x-1)}}function S(I,v,l){var n=I[v];I[v]=I[l];I[l]=n}function R(I,v){return I<v?-1:I>v?1:0}return function(I,v,l,n,K){aa(I,v,l||0,n||I.length-1,K||R)}})})({get exports(){return f},set exports(ma){f=ma}});k.quickselect=f})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid",
"../OptimizedFeature","../OptimizedGeometry"],function(k,f,ma,aa,S){k.optimizedFeatureQueryEngineAdapter={getObjectId(R){return R.objectId},getAttributes(R){return R.attributes},getAttribute(R,I){return R.attributes[I]},cloneWithGeometry(R,I){return new aa.OptimizedFeature(I,R.attributes,null,R.objectId)},getGeometry(R){return R.geometry},getCentroid(R,I){f.isNone(R.centroid)&&(R.centroid=ma.getCentroidOptimizedGeometry(new S,R.geometry,I.hasZ,I.hasM));return R.centroid}};Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,f){function ma(S,R,I,v,l,n,K=1){n=l?n?4:3:n?3:2;let ca=I,L=I+n,m=0,x=0,d=I=0,q=0;for(let J=0,G=v-1;J<G;J++,ca+=n,L+=n){v=R[ca];const H=R[ca+1],T=R[ca+2],B=R[L],p=R[L+1],t=R[L+2];let z=v*p-B*H;d+=z;m+=(v+B)*z;x+=(H+p)*z;l&&(z=v*t-B*T,I+=(T+t)*z,q+=z);v<S[0]&&(S[0]=v);v>S[1]&&(S[1]=v);H<S[2]&&(S[2]=H);H>S[3]&&(S[3]=H);l&&(T<S[4]&&(S[4]=T),T>S[5]&&(S[5]=T))}0<d*K&&(d*=-1);
0<q*K&&(q*=-1);if(!d)return null;S=[m,x,.5*d];l&&(S[3]=I,S[4]=.5*q);return S}function aa(S,R,I,v,l){l=v?l?4:3:l?3:2;let n=R,K=R+l,ca=0,L=0,m=0,x=0;for(let G=0,H=I-1;G<H;G++,n+=l,K+=l){var d=S[n];const T=S[n+1],B=S[n+2],p=S[K],t=S[K+1],z=S[K+2];if(v){var q=p-d;var J=t-T;const O=z-B;q=Math.sqrt(q*q+J*J+O*O)}else q=p-d,J=t-T,q=Math.sqrt(q*q+J*J);q&&(ca+=q,v?(d=[d+.5*(p-d),T+.5*(t-T),B+.5*(z-B)],L+=q*d[0],m+=q*d[1],x+=q*d[2]):(d=[d+.5*(p-d),T+.5*(t-T)],L+=q*d[0],m+=q*d[1]))}return 0<ca?v?[L/ca,m/ca,x/
ca]:[L/ca,m/ca]:0<I?v?[S[R],S[R+1],S[R+2]]:[S[R],S[R+1]]:null}k.getCentroidOptimizedGeometry=function(S,R,I,v,l){if(f.isNone(R)||!R.lengths.length)return null;const n="upperLeft"===l?.originPosition?-1:1;S.lengths.length&&(S.lengths.length=0);S.coords.length&&(S.coords.length=0);l=S.coords;const K=[],ca=I?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:L,coords:m}=R,x=I?v?4:3:v?3:2;let d=0;for(var q of L){const J=ma(ca,m,d,q,I,v,n);J&&K.push(J);d+=q*x}K.sort((J,G)=>{let H=n*J[2]-n*G[2];0===H&&I&&(H=J[4]-G[4]);return H});K.length&&(q=6*K[0][2],l[0]=K[0][0]/q,l[1]=K[0][1]/q,I&&(q=6*K[0][4],l[2]=0!==q?K[0][3]/q:0),l[0]<ca[0]||l[0]>ca[1]||l[1]<ca[2]||l[1]>ca[3]||I&&(l[2]<ca[4]||l[2]>ca[5]))&&(l.length=0);if(!l.length)if(R=R.lengths[0]?aa(m,0,L[0],I,v):null)l[0]=R[0],l[1]=R[1],I&&2<R.length&&
(l[2]=R[2]);else return null;return S};k.lineCentroid=aa;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L,m){function x(){x=ma._asyncToGenerator(function*(Q,C,A){const {outFields:g,orderByFields:r,groupByFieldsForStatistics:W,outStatistics:ja}=Q;if(g)for(var ta=0;ta<g.length;ta++)g[ta]=g[ta].trim();if(r)for(ta=0;ta<r.length;ta++)r[ta]=r[ta].trim();if(W)for(ta=0;ta<W.length;ta++)W[ta]=W[ta].trim();if(ja)for(ta=0;ta<ja.length;ta++)ja[ta].onStatisticField&&(ja[ta].onStatisticField=ja[ta].onStatisticField.trim());Q.geometry&&!Q.outSR&&(Q.outSR=Q.geometry.spatialReference);
return d(Q,C,A)});return x.apply(this,arguments)}function d(Q,C,A){return q.apply(this,arguments)}function q(){q=ma._asyncToGenerator(function*(Q,C,A){if(!Q)return null;var {where:g}=Q;Q.where=g=g&&g.trim();if(!g||/^1 *= *1$/.test(g)||C&&C===g)Q.where=null;if(!Q.geometry)return Q;C=yield G(Q);Q.distance=0;Q.units=null;"esriSpatialRelEnvelopeIntersects"===Q.spatialRel&&({spatialReference:g}=Q.geometry,C=v.getGeometryExtent(C),C.spatialReference=g);if(C){yield m.checkProjectionSupport(C.spatialReference,
A);g=C.spatialReference;C=J(C,A)&&l.isExtent(C)?{spatialReference:g,rings:[[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]]]}:C;g=(yield n.normalizeCentralMeridian(l.fromJSON(C)))[0];if(S.isNone(g))throw t;const r="quantizationParameters"in Q&&Q.quantizationParameters?.tolerance||"maxAllowableOffset"in Q&&Q.maxAllowableOffset||0;C=r&&J(C,A)?{densificationStep:8*r}:void 0;g=g.toJSON();C=yield m.project(g,g.spatialReference,A,C);if(!C)throw t;C.spatialReference=A;Q.geometry=
C}return Q});return q.apply(this,arguments)}function J(Q,C){if(!Q)return!1;const A=Q.spatialReference;return(l.isExtent(Q)||l.isPolygon(Q)||l.isPolyline(Q))&&!K.equals(A,C)&&!I.canProjectWithoutEngine(A,C)}function G(Q){return H.apply(this,arguments)}function H(){H=ma._asyncToGenerator(function*(Q){const {distance:C,units:A}=Q,g=Q.geometry;if(null==C||"vertexAttributes"in g)return g;var r=g.spatialReference;Q=A?p.fromJSON(A):R.getUnitString(r);r=r&&(K.isGeographic(r)||K.isWebMercator(r))?g:yield m.checkProjectionSupport(r,
K.WGS84).then(()=>m.project(g,K.WGS84));return(yield T())(r.spatialReference,r,C,Q)});return H.apply(this,arguments)}function T(){return B.apply(this,arguments)}function B(){B=ma._asyncToGenerator(function*(){return(yield new Promise((Q,C)=>k(["../../../geometry/geometryEngineJSON"],Q,C))).geodesicBuffer});return B.apply(this,arguments)}const p=new aa.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),t=Object.freeze({}),z=new L,O=new L,D=new L,F={esriGeometryPoint:ca.convertToPoint,esriGeometryPolyline:ca.convertToPolyline,esriGeometryPolygon:ca.convertToPolygon,esriGeometryMultipoint:ca.convertToMultipoint},P=(Q,C)=>"_geVersion"!==Q?C:void 0;f.QUERY_ENGINE_EMPTY_RESULT=t;f.cleanFromGeometryEngine=function(Q){return Q&&"_geVersion"in Q?JSON.parse(JSON.stringify(Q,P)):Q};f.getGeometry=function(Q,C,A,g,r,W,ja=C,ta=A){const za=C&&ja,Ea=A&&ta;g=S.isSome(g)?
"coords"in g?g:g.geometry:null;if(S.isNone(g))return null;if(r)return C=ca.generalizeOptimizedGeometry(O,g,C,A,Q,r,ja,ta),W&&(C=ca.quantizeOptimizedGeometry(D,C,za,Ea,Q,W)),F[Q]?.(C,za,Ea)??null;if(W)return W=ca.quantizeOptimizedGeometry(D,g,C,A,Q,W,ja,ta),F[Q]?.(W,za,Ea)??null;ca.removeZMValues(z,g,C,A,ja,ta);return F[Q]?.(z,za,Ea)??null};f.normalizeQuery=function(Q,C,A){return x.apply(this,arguments)};f.normalizeQueryLike=d;f.transformCentroid=function(Q,C,A,g=Q.hasZ,r=Q.hasM){if(S.isNone(C))return null;
const W=Q.hasZ&&g,ja=Q.hasM&&r;return A?(Q=ca.quantizeOptimizedGeometry(D,C,Q.hasZ,Q.hasM,"esriGeometryPoint",A,g,r),ca.convertToPoint(Q,W,ja)):ca.convertToPoint(C,W,ja)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L,m,x,d,q,J,G,H,T,B,p,t,z,O,D){function F(){return!!gb&&q.isLoaded()}function P(V){R.isNone(Gb)&&(Gb=Promise.all([q.load(),(new Promise((ha,Y)=>k(["../chunks/geometryEngineBase"],ha,Y))).then(ha=>ha.geometryEngineBase),new Promise((ha,Y)=>k(["./geometryAdapters/hydrated"],ha,Y))]));return Gb.then(([,ha,{hydratedAdapter:Y}])=>{I.throwIfAborted(V);db=Y;gb=ha.default;gb._enableProjection(q.pe);nb.notify()})}function Q(V,ha,Y=null,qa=null){return Array.isArray(V)?0===
V.length?[]:C(db,V,V[0].spatialReference,ha,Y,qa):C(db,[V],V.spatialReference,ha,Y,qa)[0]}function C(V,ha,Y,qa,Ca=null,Da=null){if(R.isNone(Y)||R.isNone(qa))return ha;if(W(Y,qa,Ca))return ha.map(Na=>R.unwrap(ta(Na,Y,qa)));if(R.isNone(Ca)){const Na=t.cacheKey(Y,qa);void 0!==Pb[Na]?Ca=Pb[Na]:(Ca=g(Y,qa,void 0),R.isNone(Ca)&&(Ca=new t),Pb[Na]=Ca)}if(R.isNone(gb)||R.isNone(V))throw new Wb;return R.isSome(Da)?gb._project(V,ha,Y,qa,Ca,Da):gb._project(V,ha,Y,qa,Ca)}function A(V,ha){if(!F())for(const Y of V)if(R.isSome(Y)&&
!z.equals(Y.spatialReference,ha)&&z.isValid(Y.spatialReference)&&z.isValid(ha)&&!W(Y.spatialReference,ha))return l.trackAccess(nb),{pending:P(),geometries:null};return{pending:null,geometries:V.map(Y=>R.isNone(Y)?null:z.equals(Y.spatialReference,ha)?Y:z.isValid(Y.spatialReference)&&z.isValid(ha)?r(Y,ha):null)}}function g(V,ha,Y=null){if(R.isNone(V)||R.isNone(ha))return null;if(R.isNone(gb)||R.isNone(db))throw new Wb;V=gb._getTransformation(db,V,ha,Y,Y?.spatialReference);return null!==V?t.fromGE(V):
null}function r(V,ha){try{const Y=Q(V,ha);if(null==Y)return null;"xmin"in V&&"xmin"in Y&&(Y.zmin=V.zmin,Y.zmax=V.zmax);const qa=D.getGeometryZScaler(Y.type,V.spatialReference,ha);R.isSome(qa)&&qa(Y);return Y}catch(Y){if(!(Y instanceof Wb))throw Y;return null}}function W(V,ha,Y){return Y?!1:z.equals(V,ha)?!0:z.isValid(V)&&z.isValid(ha)&&!!ub(V,ha,Xb)}function ja(){ja=ma._asyncToGenerator(function*(V,ha,Y,qa){if(F())return I.waitTick(qa);if(Array.isArray(V))for(const {source:Ca,dest:Da,geographicTransformation:Na}of V){if(!W(Ca,
Da,Na))return P(qa)}else if(!W(V,ha,Y))return P(qa);return I.waitTick(qa)});return ja.apply(this,arguments)}function ta(V,ha,Y){return V?"x"in V?za(V,ha,new J,Y,0):"xmin"in V?Ua(V,ha,new x,Y,0):"rings"in V?Fa(V,ha,new G,Y,0):"paths"in V?Ha(V,ha,new H,Y,0):"points"in V?Ea(V,ha,new d,Y,0):null:null}function za(V,ha,Y,qa,Ca){Ya[0]=V.x;Ya[1]=V.y;const Da=V.z;Ya[2]=void 0!==Da?Da:Ca;if(!Ta(Ya,ha,0,Ya,qa,0,1))return null;Y.x=Ya[0];Y.y=Ya[1];Y.spatialReference=qa;void 0===Da?(Y.z=void 0,Y.hasZ=!1):(Y.z=
Ya[2],Y.hasZ=!0);void 0===V.m?(Y.m=void 0,Y.hasM=!1):(Y.m=V.m,Y.hasM=!0);return Y}function Ea(V,ha,Y,qa,Ca){const {points:Da,hasZ:Na,hasM:Va}=V;V=[];const mb=Da.length,kb=[];for(var hb of Da)kb.push(hb[0],hb[1],Na?hb[2]:Ca);if(!Ta(kb,ha,0,kb,qa,0,mb))return null;for(ha=0;ha<mb;++ha){Ca=3*ha;hb=kb[Ca];const xb=kb[Ca+1];Na&&Va?V.push([hb,xb,kb[Ca+2],Da[ha][3]]):Na?V.push([hb,xb,kb[Ca+2]]):Va?V.push([hb,xb,Da[ha][2]]):V.push([hb,xb])}Y.points=V;Y.spatialReference=qa;Y.hasZ=Na;Y.hasM=Va;return Y}function Ha(V,
ha,Y,qa,Ca){const {paths:Da,hasZ:Na,hasM:Va}=V;V=[];if(!jb(Da,Na??!1,Va??!1,ha,V,qa,Ca))return null;Y.paths=V;Y.spatialReference=qa;Y.hasZ=Na;Y.hasM=Va;return Y}function Fa(V,ha,Y,qa,Ca){const {rings:Da,hasZ:Na,hasM:Va}=V;V=[];if(!jb(Da,Na??!1,Va??!1,ha,V,qa,Ca))return null;Y.rings=V;Y.spatialReference=qa;Y.hasZ=Na;Y.hasM=Va;return Y}function Ua(V,ha,Y,qa,Ca){const {xmin:Da,ymin:Na,xmax:Va,ymax:mb,hasZ:kb,hasM:hb}=V;if(!Oa(Da,Na,kb?V.zmin:Ca,ha,Ya,qa))return null;Y.xmin=Ya[0];Y.ymin=Ya[1];kb&&(Y.zmin=
Ya[2]);if(!Oa(Va,mb,kb?V.zmax:Ca,ha,Ya,qa))return null;Y.xmax=Ya[0];Y.ymax=Ya[1];kb&&(Y.zmax=Ya[2]);hb&&(Y.mmin=V.mmin,Y.mmax=V.mmax);Y.spatialReference=qa;return Y}function Oa(V,ha,Y,qa,Ca,Da){fb[0]=V;fb[1]=ha;fb[2]=Y;return Ta(fb,qa,0,Ca,Da,0,1)}function Sa(V,ha,Y,qa){if(R.isNone(ha)||R.isNone(qa)||2>V.length)return!1;2===V.length&&(fb[0]=V[0],fb[1]=V[1],fb[2]=0,V=fb);return Ta(V,ha,0,Y,qa,0,1)}function $a(V,ha,Y){if(R.isNone(ha))return!1;ha=u(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(R.isNone(ha))return!1;
ha(V,0,fb,0);Y!==fb&&(Y[0]=fb[0],Y[1]=fb[1],2<Y.length&&(Y[2]=fb[2]));return!0}function Ta(V,ha,Y,qa,Ca,Da,Na=1){ha=ub(ha,Ca,Xb);if(R.isNone(ha))return!1;if(ha===ea){if(V===qa&&Y===Da)return!0;Na=Y+3*Na;for(let Va=Y,mb=Da;Va<Na;Va++,mb++)qa[mb]=V[Va];return!0}Na=Y+3*Na;for(let Va=Y,mb=Da;Va<Na;Va+=3,mb+=3)ha(V,Va,qa,mb);return!0}function jb(V,ha,Y,qa,Ca,Da,Na=0){const Va=[];for(const mb of V)for(const kb of mb)Va.push(kb[0],kb[1],ha?kb[2]:Na);if(!Ta(Va,qa,0,Va,Da,0,Va.length/3))return!1;qa=0;Ca.length=
0;for(const mb of V){V=[];for(const kb of mb)ha&&Y?V.push([Va[qa++],Va[qa++],Va[qa++],kb[3]]):ha?V.push([Va[qa++],Va[qa++],Va[qa++]]):(Y?V.push([Va[qa++],Va[qa++],kb[2]]):V.push([Va[qa++],Va[qa++]]),qa++);Ca.push(V)}return!0}function ib(V,ha,Y,qa){ha=qa+ha;if(ha<qa/2||Y>ha)return Number.MAX_VALUE;V=Math.abs(Hb*V)+Math.asin(Y/ha);return V>=Math.PI/2?Number.MAX_VALUE:Y/Math.cos(V)}function lb(V,ha,Y){const qa=Math.sin(V);V=Math.cos(V);const Ca=Math.sin(ha);ha=Math.cos(ha);Y[0]=-qa;Y[4]=-Ca*V;Y[8]=ha*
V;Y[12]=0;Y[1]=V;Y[5]=-Ca*qa;Y[9]=ha*qa;Y[13]=0;Y[2]=0;Y[6]=ha;Y[10]=Ca;Y[14]=0;Y[3]=0;Y[7]=0;Y[11]=0;Y[15]=1;return Y}function c(V,ha,Y){lb(V,ha,Y);K.transpose(Y,Y);return Y}function u(V,ha){if(!V)return oa.UNKNOWN;if(ha.spatialReference===V)return ha.spatialReferenceId;ha.spatialReference=V;"metersPerUnit"in ha&&(ha.metersPerUnit=v.getMetersPerUnitForSR(V,1));return V.wkt===m.SphericalECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_ECEF:z.isWGS84(V)?ha.spatialReferenceId=oa.WGS84:
z.isWebMercator(V)?ha.spatialReferenceId=oa.WEB_MERCATOR:z.isPlateCarree(V)?ha.spatialReferenceId=oa.PLATE_CARREE:V.wkt===m.WGS84ECEFSpatialReferenceLike.wkt?ha.spatialReferenceId=oa.WGS84_ECEF:V.wkid===O.SupportedGCSWkids.CGCS2000?ha.spatialReferenceId=oa.CGCS2000:V.wkt===m.SphericalPCPFMarsLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:V.wkt===m.SphericalPCPFMoonLike.wkt?ha.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:z.isMars(V)?ha.spatialReferenceId=oa.GCSMARS2000:z.isMoon(V)?ha.spatialReferenceId=
oa.GCSMOON2000:ha.spatialReferenceId=oa.UNKNOWN}function ea(V,ha,Y,qa){V!==Y&&(Y[qa++]=V[ha++],Y[qa++]=V[ha++],Y[qa]=V[ha])}function ka(V,ha,Y,qa){Y[qa++]=Rb*(V[ha++]/B.earth.radius);Y[qa++]=Rb*(Math.PI/2-2*Math.atan(Math.exp(-V[ha++]/B.earth.radius)));Y[qa]=V[ha]}function va(V,ha,Y,qa){ka(V,ha,Y,qa);pa(Y,qa,Y,qa)}function y(V,ha,Y,qa){ka(V,ha,Y,qa);Ga(Y,qa,Y,qa)}function N(V,ha,Y,qa,Ca){var Da=.4999999*Math.PI;Da=S.clamp(Hb*V[ha+1],-Da,Da);Da=Math.sin(Da);Y[qa++]=Hb*V[ha]*Ca.radius;Y[qa++]=Ca.halfSemiMajorAxis*
Math.log((1+Da)/(1-Da));Y[qa]=V[ha+2]}function da(V,ha,Y,qa){N(V,ha,Y,qa,B.earth)}function X(V,ha,Y,qa){Y[qa]=V[ha]*Yb;Y[qa+1]=V[ha+1]*Yb;Y[qa+2]=V[ha+2]}function ia(V,ha,Y,qa){Y[qa]=V[ha]*Sb;Y[qa+1]=V[ha+1]*Sb;Y[qa+2]=V[ha+2]}function na(V,ha,Y,qa){ka(V,ha,Y,qa);X(Y,qa,Y,qa)}function ra(V,ha,Y,qa,Ca){Ca+=V[ha+2];const Da=Hb*V[ha+1];V=Hb*V[ha];ha=Math.cos(Da);Y[qa++]=Math.cos(V)*ha*Ca;Y[qa++]=Math.sin(V)*ha*Ca;Y[qa]=Math.sin(Da)*Ca}function U(V,ha,Y,qa){ra(V,ha,Y,qa,B.moon.radius)}function ba(V,ha,
Y,qa){ra(V,ha,Y,qa,B.mars.radius)}function pa(V,ha,Y,qa){ra(V,ha,Y,qa,B.earth.radius)}function wa(V,ha,Y,qa,Ca){var Da=V[ha];const Na=V[ha+1];ha=V[ha+2];V=Math.sqrt(Da*Da+Na*Na+ha*ha);ha=S.asinClamped(ha/(0===V?1:V));Da=Math.atan2(Na,Da);Y[qa++]=Rb*Da;Y[qa++]=Rb*ha;Y[qa]=V-Ca}function Ba(V,ha,Y,qa){wa(V,ha,Y,qa,B.moon.radius)}function La(V,ha,Y,qa){wa(V,ha,Y,qa,B.mars.radius)}function Ja(V,ha,Y,qa){wa(V,ha,Y,qa,B.earth.radius)}function Pa(V,ha,Y,qa){Ja(V,ha,Y,qa);da(Y,qa,Y,qa)}function Qa(V,ha,Y,
qa){Ja(V,ha,Y,qa);Ga(Y,qa,Y,qa)}function Ga(V,ha,Y,qa){var Ca=B.earth;const Da=Hb*V[ha];var Na=Hb*V[ha+1];V=V[ha+2];ha=Math.sin(Na);Na=Math.cos(Na);const Va=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ha*ha);Y[qa++]=(Va+V)*Na*Math.cos(Da);Y[qa++]=(Va+V)*Na*Math.sin(Da);Y[qa++]=(Va*(1-Ca.eccentricitySquared)+V)*ha}function Ra(V,ha,Y,qa){var Ca=p.earthEllipsoidConstants,Da=V[ha],Na=V[ha+1];V=V[ha+2];let Va;ha=Math.abs(V);var mb=Da*Da+Na*Na;var kb=Math.sqrt(mb);var hb=mb+V*V;var xb=Math.sqrt(hb);Da=
Math.atan2(Na,Da);var Ib=V*V/hb;hb=mb/hb;Na=Ca.a2/xb;mb=Ca.a3-Ca.a4/xb;.3<hb?(Ib=ha/xb*(1+hb*(Ca.a1+Na+Ib*mb)/xb),xb=Math.asin(Ib),Na=Ib*Ib,hb=Math.sqrt(1-Na)):(hb=kb/xb*(1-Ib*(Ca.a5-Na-hb*mb)/xb),xb=Math.acos(hb),Na=1-hb*hb,Ib=Math.sqrt(Na));Va=1-B.earth.eccentricitySquared*Na;Na=B.earth.radius/Math.sqrt(Va);Ca=Ca.a6*Na;Na=kb-Na*hb;mb=ha-Ca*Ib;ha=hb*Na+Ib*mb;kb=hb*mb-Ib*Na;Ca=kb/(Ca/Va+ha);xb+=Ca;0>V&&(xb=-xb);Y[qa++]=Rb*Da;Y[qa++]=Rb*xb;Y[qa]=ha+kb*Ca/2}function xa(V,ha,Y,qa){Ra(V,ha,Y,qa);pa(Y,
qa,Y,qa)}function vb(V,ha,Y,qa){Ra(V,ha,Y,qa);da(Y,qa,Y,qa)}function ub(V,ha,Y=b()){return R.isNone(V)||R.isNone(ha)?null:qb(V,ha,Y).projector}function qb(V,ha,Y){if(R.isNone(V)||R.isNone(ha)||Y.source.spatialReference===V&&Y.dest.spatialReference===ha)return Y;const qa=u(V,Y.source),Ca=u(ha,Y.dest);qa===oa.UNKNOWN&&Ca===oa.UNKNOWN?z.equals(V,ha)?Y.projector=ea:Y.projector=null:Y.projector=zb[qa][Ca];return Y}function b(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},
dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:ea}}let gb=null,db=null,Gb=null,Pb={};const nb=new n.SimpleObservable;let Wb=function(V){function ha(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ma._inheritsLoose(ha,V);return ha}(aa);var oa;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";
V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(oa||(oa={}));const Yb=B.earth.radius*Math.PI/180,Sb=180/(B.earth.radius*Math.PI),zb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,
[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.CGCS2000]:{[oa.CGCS2000]:ea,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:X,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ga},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ba,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:U,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ka,[oa.WGS84_COMPARABLE_LON_LAT]:ka,[oa.SPHERICAL_ECEF]:va,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ea,[oa.PLATE_CARREE]:na,[oa.WGS84]:ka,[oa.WGS84_ECEF]:y},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Ra,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ra,[oa.WGS84_COMPARABLE_LON_LAT]:Ra,
[oa.SPHERICAL_ECEF]:xa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:vb,[oa.PLATE_CARREE]:function(V,ha,Y,qa){Ra(V,ha,Y,qa);X(Y,qa,Y,qa)},[oa.WGS84]:Ra,[oa.WGS84_ECEF]:ea},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ja,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ja,[oa.WGS84_COMPARABLE_LON_LAT]:Ja,[oa.SPHERICAL_ECEF]:ea,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Pa,[oa.PLATE_CARREE]:function(V,
ha,Y,qa){Ja(V,ha,Y,qa);X(Y,qa,Y,qa)},[oa.WGS84]:Ja,[oa.WGS84_ECEF]:Qa},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:La,[oa.GCSMOON2000]:null,[oa.LON_LAT]:La,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:ea,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ba,[oa.LON_LAT]:Ba,[oa.WGS84_COMPARABLE_LON_LAT]:null,
[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:ea,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:ea,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:ea,
[oa.GCSMARS2000]:ea,[oa.GCSMOON2000]:ea,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:ba,[oa.SPHERICAL_MOON_PCPF]:U,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:da,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ea,[oa.WGS84_COMPARABLE_LON_LAT]:ea,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:X,[oa.WGS84]:ea,[oa.WGS84_ECEF]:Ga},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ia,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ia,[oa.WGS84_COMPARABLE_LON_LAT]:ia,[oa.SPHERICAL_ECEF]:function(V,ha,Y,qa){ia(V,ha,Y,qa);pa(Y,qa,Y,qa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(V,ha,Y,qa){ia(V,ha,Y,qa);da(Y,qa,Y,qa)},[oa.PLATE_CARREE]:ea,[oa.WGS84]:ia,[oa.WGS84_ECEF]:function(V,ha,Y,qa){ia(V,ha,Y,
qa);Ga(Y,qa,Y,qa)}}},Kb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Zb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Xb=b(),kc=b(),Hb=S.deg2rad(1),Rb=S.rad2deg(1),fb=L.create(),Ab=L.create(),Bb=L.create(),Ya=L.create(),hc=L.create();f.canProjectToWGS84ComparableLonLat=function(V){if(R.isNone(V))return!1;V=u(V,Kb);return!!zb[V][oa.WGS84_COMPARABLE_LON_LAT]};f.canProjectWithoutEngine=W;f.computeENUToSphericalPCPFLocalRotation=lb;f.computeSphericalPCPFToENULocalRotation=c;f.computeTranslationToOriginAndRotation=
function(V,ha,Y,qa){if(R.isNone(V)||R.isNone(qa))return!1;var Ca=u(V,Kb),Da=u(qa,Zb);if(Ca===Da&&Da!==oa.SPHERICAL_ECEF&&Da!==oa.SPHERICAL_MARS_PCPF&&Da!==oa.SPHERICAL_MOON_PCPF&&(Ca!==oa.UNKNOWN||z.equals(V,qa)))return K.fromTranslation(Y,ha),!0;if(Da===oa.SPHERICAL_ECEF||Da===oa.SPHERICAL_MARS_PCPF||Da===oa.SPHERICAL_MOON_PCPF){Ca=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(R.isNone(Ca)||R.isNone(Da))return!1;Ca(ha,0,Ab,0);Da(Ab,0,Bb,0);lb(Hb*Ab[0],Hb*Ab[1],Y);Y[12]=Bb[0];Y[13]=Bb[1];Y[14]=Bb[2];
return!0}if((Da===oa.WEB_MERCATOR||Da===oa.PLATE_CARREE)&&(Ca===oa.WGS84||Ca===oa.CGCS2000&&Da===oa.PLATE_CARREE||Ca===oa.SPHERICAL_ECEF||Ca===oa.WEB_MERCATOR)){V=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(R.isNone(V)||R.isNone(Da))return!1;V(ha,0,Ab,0);Da(Ab,0,Bb,0);Ca===oa.SPHERICAL_ECEF?c(Hb*Ab[0],Hb*Ab[1],Y):K.identity(Y);Y[12]=Bb[0];Y[13]=Bb[1];Y[14]=Bb[2];return!0}return!1};f.getProjectorName=function(V,ha){switch(ub(V,ha,Xb)){case ea:return"copy3";case pa:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";
case X:return"wgs84ToPlateCarree";case Ga:return"wgs84ToWGS84ECEF";case ka:return"webMercatorToWGS84";case va:return"webMercatorToSphericalECEF";case y:return"webMercatorToWGS84ECEF";case na:return"webMercatorToPlateCarree";case Ra:return"wgs84ECEFToWGS84";case xa:return"wgs84ECEFToSphericalECEF";case vb:return"wgs84ECEFToWebMercator";case Ja:return"sphericalECEFToWGS84";case Pa:return"sphericalECEFToWebMercator";case La:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";
case Qa:return"sphericalECEFToWGS84ECEF";case ba:return"mars2000ToSphericalPCPF";case U:return"moon2000ToSphericalPCPF";default:return null}};f.getTransformation=g;f.getTransformations=function(V,ha,Y=null){if(R.isNone(gb)||R.isNone(db))throw new Wb;V=gb._getTransformationBySuitability(db,V,ha,Y,Y?.spatialReference);if(null!==V){ha=[];for(const qa of V)ha.push(t.fromGE(qa));return ha}return[]};f.initializeProjection=function(V,ha,Y,qa){return ja.apply(this,arguments)};f.isLoaded=F;f.load=P;f.localLinearScaleFactors=
function(V,ha,Y,qa){if(R.isNone(ha)||R.isNone(qa))return!1;const Ca=u(ha,Kb);var Da=u(qa,Zb);if(Ca===Da&&Ca!==oa.UNKNOWN||z.equals(ha,qa))return Y[0]=1,Y[1]=1,Y[2]=1,!0;if(Ca===oa.SPHERICAL_ECEF){ha=ca.length(V);V=ha/Math.sqrt(V[0]*V[0]+V[1]*V[1]);ha/=B.earth.radius;if(Da===oa.WEB_MERCATOR)return Y[0]=V*ha,Y[1]=V*ha,Y[2]=1,!0;if(Da===oa.WGS84||Da===oa.CGCS2000)return Da=Sb,Y[0]=Da*V*ha,Y[1]=Da*ha,Y[2]=1,!0}else if(Ca===oa.PLATE_CARREE){if(Da===oa.WGS84||Da===oa.CGCS2000)return Y[0]=Sb,Y[1]=Sb,Y[2]=
1,!0;if(Da===oa.WEB_MERCATOR)return Da=V[1]/B.earth.radius,Y[0]=1,Y[1]=1/Math.cos(Da),Y[2]=1,!0}return!1};f.lonLatToSphericalPCPF=function(V,ha,Y,qa){const Ca=Math.cos(Y);V[0]=Math.cos(ha)*Ca*qa;V[1]=Math.sin(ha)*Ca*qa;V[2]=Math.sin(Y)*qa};f.lonLatToWebMercatorComparable=N;f.project=Q;f.projectBoundingRect=function(V,ha,Y,qa){if(null==V)return!1;if(z.equals(ha,qa))return T.copy(Y,V),!0;fb[0]=V[0];fb[1]=V[1];fb[2]=0;if(!Ta(fb,ha,0,fb,qa,0,1))return!1;Y[0]=fb[0];Y[1]=fb[1];fb[0]=V[2];fb[1]=V[3];fb[2]=
0;if(!Ta(fb,ha,0,fb,qa,0,1))return!1;Y[2]=fb[0];Y[3]=fb[1];return!0};f.projectBoundingSphere=function(V,ha,Y,qa){if(R.isNone(ha)||R.isNone(qa))return!1;ha=qb(ha,qa,kc);if(ha.projector===ea)return Y[0]=V[0],Y[1]=V[1],Y[2]=V[2],Y[3]=V[3],!0;if(R.isNone(ha.projector))return!1;const {source:Ca,dest:Da}=ha;if(Da.spatialReferenceId===oa.WEB_MERCATOR){ha=zb[Ca.spatialReferenceId][oa.WGS84];if(R.isNone(ha))return!1;ha(V,0,Ab,0);da(Ab,0,Y,0);Y[3]=ib(Ab[1],V[2],V[3],B.earth.radius);return!0}if(Ca.spatialReferenceId!==
oa.WGS84&&Ca.spatialReferenceId!==oa.CGCS2000||Da.spatialReferenceId!==oa.PLATE_CARREE)ha.projector(V,0,Y,0),Y[3]=V[3]*(Ca.metersPerUnit??1)/(Da.metersPerUnit??1);else{qa=zb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Na=V[3];R.isSome(zb[Ca.spatialReferenceId][oa.SPHERICAL_ECEF])&&R.isSome(qa)&&(Na=ib(V[1],V[2],V[3],B.earth.radius));ha.projector(V,0,Y,0);Y[3]=Na}return!0};f.projectBuffer=Ta;f.projectDirection=function(V,ha,Y,qa,Ca){ca.copy(Ya,V);ca.add(hc,V,ha);Sa(Ya,Y,Ya,Ca);Sa(hc,Y,hc,Ca);ca.subtract(qa,
hc,Ya);ca.normalize(qa,qa)};f.projectExtent=function(V,ha,Y=ha.spatialReference,qa=0){return R.isSome(V.spatialReference)&&R.isSome(Y)&&R.isSome(Ua(V,V.spatialReference,ha,Y,qa))};f.projectMany=C;f.projectMultipoint=function(V,ha,Y=ha.spatialReference,qa=0){return R.isSome(V.spatialReference)&&R.isSome(Y)&&R.isSome(Ea(V,V.spatialReference,ha,Y,qa))};f.projectOrLoad=function(V,ha){V=A([V],ha);return R.isSome(V.pending)?{pending:V.pending,geometry:null}:R.isSome(V.geometries)?{pending:null,geometry:V.geometries[0]}:
{pending:null,geometry:null}};f.projectOrLoadMany=A;f.projectPoint=function(V,ha,Y=ha.spatialReference,qa=0){return R.isSome(Y)&&R.isSome(V.spatialReference)&&R.isSome(za(V,V.spatialReference,ha,Y,qa))};f.projectPointToVector=function(V,ha,Y,qa=0){Ya[0]=V.x;Ya[1]=V.y;const Ca=V.z;Ya[2]=void 0!==Ca?Ca:qa;return Ta(Ya,V.spatialReference,0,ha,Y,0,1)};f.projectPointToWGS84ComparableLonLat=function(V,ha){Ya[0]=V.x;Ya[1]=V.y;const Y=V.z;Ya[2]=void 0!==Y?Y:0;return $a(Ya,V.spatialReference,ha)};f.projectPolygon=
function(V,ha,Y=ha.spatialReference,qa=0){return R.isSome(V.spatialReference)&&R.isSome(Y)&&R.isSome(Fa(V,V.spatialReference,ha,Y,qa))};f.projectPolygonToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ha,rings:Y},qa,Ca=0){ha=u(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(R.isNone(ha))return!1;V=V?Da=>Da:Da=>ca.set(Ya,Da[0],Da[1],Ca);for(const Da of Y){Y=[];for(const Na of Da){const Va=[0,0,Ca];ha(V(Na),0,Va,0);Y.push(Va)}qa.push(Y)}return!0};f.projectPolyline=function(V,ha,Y=ha.spatialReference,
qa=0){return R.isSome(V.spatialReference)&&R.isSome(Y)&&R.isSome(Ha(V,V.spatialReference,ha,Y,qa))};f.projectPolylineToWGS84ComparableLonLat=function({hasZ:V,spatialReference:ha,paths:Y},qa,Ca=0){ha=u(ha,Kb);ha=zb[ha][oa.WGS84_COMPARABLE_LON_LAT];if(R.isNone(ha))return!1;V=V?Da=>Da:Da=>ca.set(Ya,Da[0],Da[1],Ca);for(const Da of Y){Y=[];for(const Na of Da){const Va=[0,0,Ca];ha(V(Na),0,Va,0);Y.push(Va)}qa.push(Y)}return!0};f.projectVectorToDehydratedPoint=function(V,ha,Y){return Ta(V,ha,0,Ya,Y.spatialReference,
0,1)?(Y.x=Ya[0],Y.y=Ya[1],Y.z=Ya[2],Y):null};f.projectVectorToPoint=function(V,ha,Y){if(R.isNone(ha)||R.isNone(Y))return null;const qa=new J({spatialReference:Y});return Ta(V,ha,0,Ya,Y,0,1)?(qa.x=Ya[0],qa.y=Ya[1],qa.z=Ya[2],qa):null};f.projectVectorToVector=Sa;f.projectVectorToWGS84ComparableLonLat=function(V,ha,Y){return $a(V,ha,Y)};f.projectWithoutEngine=ta;f.projectXYZToVector=Oa;f.sphericalPCPFtoLonLatElevation=wa;f.test={get loadPromise(){return Gb}};f.tryProjectWithZConversion=r;f.unload=function(){Gb=
db=gb=null;Pb={}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(k,f,ma){ma=function(aa){function S(){return aa.apply(this,arguments)||this}f._inheritsLoose(S,aa);S.prototype.notify=function(){var R=this._observers;if(R&&0<R.length){R=R.slice();for(const I of R)I.onInvalidated(),I.onCommitted()}};return S}(ma.ObservableBase);
k.SimpleObservable=ma;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,f,ma){function aa(c,u){c[0]=u[0];c[1]=u[1];c[2]=u[2];c[3]=u[3];c[4]=u[4];c[5]=u[5];c[6]=u[6];c[7]=u[7];c[8]=u[8];c[9]=u[9];c[10]=u[10];c[11]=u[11];c[12]=u[12];c[13]=u[13];c[14]=u[14];c[15]=u[15];return c}function S(c,u,ea,ka,va,y,N,da,X,ia,na,ra,U,ba,pa,wa,Ba){c[0]=u;c[1]=ea;c[2]=ka;c[3]=va;c[4]=y;c[5]=N;c[6]=da;c[7]=X;c[8]=ia;c[9]=
na;c[10]=ra;c[11]=U;c[12]=ba;c[13]=pa;c[14]=wa;c[15]=Ba;return c}function R(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function I(c,u){if(c===u){const ea=u[1],ka=u[2],va=u[3],y=u[6],N=u[7],da=u[11];c[1]=u[4];c[2]=u[8];c[3]=u[12];c[4]=ea;c[6]=u[9];c[7]=u[13];c[8]=ka;c[9]=y;c[11]=u[14];c[12]=va;c[13]=N;c[14]=da}else c[0]=u[0],c[1]=u[4],c[2]=u[8],c[3]=u[12],c[4]=u[1],c[5]=u[5],c[6]=u[9],c[7]=u[13],c[8]=u[2],c[9]=u[6],
c[10]=u[10],c[11]=u[14],c[12]=u[3],c[13]=u[7],c[14]=u[11],c[15]=u[15];return c}function v(c,u){l(c,u)||R(c);return c}function l(c,u){const ea=u[0],ka=u[1],va=u[2],y=u[3],N=u[4],da=u[5],X=u[6],ia=u[7],na=u[8],ra=u[9],U=u[10],ba=u[11],pa=u[12],wa=u[13],Ba=u[14];u=u[15];const La=ea*da-ka*N,Ja=ea*X-va*N,Pa=ea*ia-y*N,Qa=ka*X-va*da,Ga=ka*ia-y*da,Ra=va*ia-y*X,xa=na*wa-ra*pa,vb=na*Ba-U*pa,ub=na*u-ba*pa,qb=ra*Ba-U*wa,b=ra*u-ba*wa,gb=U*u-ba*Ba;let db=La*gb-Ja*b+Pa*qb+Qa*ub-Ga*vb+Ra*xa;if(!db)return null;db=
1/db;c[0]=(da*gb-X*b+ia*qb)*db;c[1]=(va*b-ka*gb-y*qb)*db;c[2]=(wa*Ra-Ba*Ga+u*Qa)*db;c[3]=(U*Ga-ra*Ra-ba*Qa)*db;c[4]=(X*ub-N*gb-ia*vb)*db;c[5]=(ea*gb-va*ub+y*vb)*db;c[6]=(Ba*Pa-pa*Ra-u*Ja)*db;c[7]=(na*Ra-U*Pa+ba*Ja)*db;c[8]=(N*b-da*ub+ia*xa)*db;c[9]=(ka*ub-ea*b-y*xa)*db;c[10]=(pa*Ga-wa*Pa+u*La)*db;c[11]=(ra*Pa-na*Ga-ba*La)*db;c[12]=(da*vb-N*qb-X*xa)*db;c[13]=(ea*qb-ka*vb+va*xa)*db;c[14]=(wa*Ja-pa*Qa-Ba*La)*db;c[15]=(na*Qa-ra*Ja+U*La)*db;return c}function n(c,u){const ea=u[0],ka=u[1],va=u[2],y=u[3],
N=u[4],da=u[5],X=u[6],ia=u[7],na=u[8],ra=u[9],U=u[10],ba=u[11],pa=u[12],wa=u[13],Ba=u[14];u=u[15];c[0]=da*(U*u-ba*Ba)-ra*(X*u-ia*Ba)+wa*(X*ba-ia*U);c[1]=-(ka*(U*u-ba*Ba)-ra*(va*u-y*Ba)+wa*(va*ba-y*U));c[2]=ka*(X*u-ia*Ba)-da*(va*u-y*Ba)+wa*(va*ia-y*X);c[3]=-(ka*(X*ba-ia*U)-da*(va*ba-y*U)+ra*(va*ia-y*X));c[4]=-(N*(U*u-ba*Ba)-na*(X*u-ia*Ba)+pa*(X*ba-ia*U));c[5]=ea*(U*u-ba*Ba)-na*(va*u-y*Ba)+pa*(va*ba-y*U);c[6]=-(ea*(X*u-ia*Ba)-N*(va*u-y*Ba)+pa*(va*ia-y*X));c[7]=ea*(X*ba-ia*U)-N*(va*ba-y*U)+na*(va*ia-
y*X);c[8]=N*(ra*u-ba*wa)-na*(da*u-ia*wa)+pa*(da*ba-ia*ra);c[9]=-(ea*(ra*u-ba*wa)-na*(ka*u-y*wa)+pa*(ka*ba-y*ra));c[10]=ea*(da*u-ia*wa)-N*(ka*u-y*wa)+pa*(ka*ia-y*da);c[11]=-(ea*(da*ba-ia*ra)-N*(ka*ba-y*ra)+na*(ka*ia-y*da));c[12]=-(N*(ra*Ba-U*wa)-na*(da*Ba-X*wa)+pa*(da*U-X*ra));c[13]=ea*(ra*Ba-U*wa)-na*(ka*Ba-va*wa)+pa*(ka*U-va*ra);c[14]=-(ea*(da*Ba-X*wa)-N*(ka*Ba-va*wa)+pa*(ka*X-va*da));c[15]=ea*(da*U-X*ra)-N*(ka*U-va*ra)+na*(ka*X-va*da);return c}function K(c){const u=c[0],ea=c[1],ka=c[2],va=c[3],
y=c[4],N=c[5],da=c[6],X=c[7],ia=c[8],na=c[9],ra=c[10],U=c[11],ba=c[12],pa=c[13],wa=c[14];c=c[15];return(u*N-ea*y)*(ra*c-U*wa)-(u*da-ka*y)*(na*c-U*pa)+(u*X-va*y)*(na*wa-ra*pa)+(ea*da-ka*N)*(ia*c-U*ba)-(ea*X-va*N)*(ia*wa-ra*ba)+(ka*X-va*da)*(ia*pa-na*ba)}function ca(c,u,ea){const ka=u[0],va=u[1],y=u[2],N=u[3],da=u[4],X=u[5],ia=u[6],na=u[7],ra=u[8],U=u[9],ba=u[10],pa=u[11],wa=u[12],Ba=u[13],La=u[14];u=u[15];let Ja=ea[0],Pa=ea[1],Qa=ea[2],Ga=ea[3];c[0]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[1]=Ja*va+Pa*X+Qa*U+Ga*
Ba;c[2]=Ja*y+Pa*ia+Qa*ba+Ga*La;c[3]=Ja*N+Pa*na+Qa*pa+Ga*u;Ja=ea[4];Pa=ea[5];Qa=ea[6];Ga=ea[7];c[4]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[5]=Ja*va+Pa*X+Qa*U+Ga*Ba;c[6]=Ja*y+Pa*ia+Qa*ba+Ga*La;c[7]=Ja*N+Pa*na+Qa*pa+Ga*u;Ja=ea[8];Pa=ea[9];Qa=ea[10];Ga=ea[11];c[8]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[9]=Ja*va+Pa*X+Qa*U+Ga*Ba;c[10]=Ja*y+Pa*ia+Qa*ba+Ga*La;c[11]=Ja*N+Pa*na+Qa*pa+Ga*u;Ja=ea[12];Pa=ea[13];Qa=ea[14];Ga=ea[15];c[12]=Ja*ka+Pa*da+Qa*ra+Ga*wa;c[13]=Ja*va+Pa*X+Qa*U+Ga*Ba;c[14]=Ja*y+Pa*ia+Qa*ba+Ga*La;c[15]=Ja*N+Pa*na+Qa*
pa+Ga*u;return c}function L(c,u,ea){const ka=ea[0],va=ea[1];ea=ea[2];if(u===c)c[12]=u[0]*ka+u[4]*va+u[8]*ea+u[12],c[13]=u[1]*ka+u[5]*va+u[9]*ea+u[13],c[14]=u[2]*ka+u[6]*va+u[10]*ea+u[14],c[15]=u[3]*ka+u[7]*va+u[11]*ea+u[15];else{const y=u[0],N=u[1],da=u[2],X=u[3],ia=u[4],na=u[5],ra=u[6],U=u[7],ba=u[8],pa=u[9],wa=u[10],Ba=u[11];c[0]=y;c[1]=N;c[2]=da;c[3]=X;c[4]=ia;c[5]=na;c[6]=ra;c[7]=U;c[8]=ba;c[9]=pa;c[10]=wa;c[11]=Ba;c[12]=y*ka+ia*va+ba*ea+u[12];c[13]=N*ka+na*va+pa*ea+u[13];c[14]=da*ka+ra*va+wa*
ea+u[14];c[15]=X*ka+U*va+Ba*ea+u[15]}return c}function m(c,u,ea){const ka=ea[0],va=ea[1];ea=ea[2];c[0]=u[0]*ka;c[1]=u[1]*ka;c[2]=u[2]*ka;c[3]=u[3]*ka;c[4]=u[4]*va;c[5]=u[5]*va;c[6]=u[6]*va;c[7]=u[7]*va;c[8]=u[8]*ea;c[9]=u[9]*ea;c[10]=u[10]*ea;c[11]=u[11]*ea;c[12]=u[12];c[13]=u[13];c[14]=u[14];c[15]=u[15];return c}function x(c,u,ea,ka){let va=ka[0],y=ka[1];ka=ka[2];let N=Math.sqrt(va*va+y*y+ka*ka);var da=void 0,X=void 0;let ia=void 0,na=void 0,ra=void 0,U=void 0,ba=void 0,pa=void 0,wa=void 0,Ba=void 0,
La=void 0,Ja=void 0,Pa=void 0,Qa=void 0,Ga=void 0,Ra=void 0,xa=void 0,vb=void 0,ub=void 0,qb=void 0,b=void 0,gb=void 0;X=da=void 0;if(N<ma.getEpsilon())return null;N=1/N;va*=N;y*=N;ka*=N;da=Math.sin(ea);X=Math.cos(ea);ia=1-X;na=u[0];ra=u[1];U=u[2];ba=u[3];pa=u[4];wa=u[5];Ba=u[6];La=u[7];Ja=u[8];Pa=u[9];Qa=u[10];Ga=u[11];Ra=va*va*ia+X;xa=y*va*ia+ka*da;vb=ka*va*ia-y*da;ub=va*y*ia-ka*da;qb=y*y*ia+X;b=ka*y*ia+va*da;gb=va*ka*ia+y*da;da=y*ka*ia-va*da;X=ka*ka*ia+X;c[0]=na*Ra+pa*xa+Ja*vb;c[1]=ra*Ra+wa*xa+
Pa*vb;c[2]=U*Ra+Ba*xa+Qa*vb;c[3]=ba*Ra+La*xa+Ga*vb;c[4]=na*ub+pa*qb+Ja*b;c[5]=ra*ub+wa*qb+Pa*b;c[6]=U*ub+Ba*qb+Qa*b;c[7]=ba*ub+La*qb+Ga*b;c[8]=na*gb+pa*da+Ja*X;c[9]=ra*gb+wa*da+Pa*X;c[10]=U*gb+Ba*da+Qa*X;c[11]=ba*gb+La*da+Ga*X;u!==c&&(c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]);return c}function d(c,u,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=u[4],y=u[5],N=u[6],da=u[7],X=u[8],ia=u[9],na=u[10],ra=u[11];u!==c&&(c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[12]=u[12],c[13]=u[13],c[14]=u[14],
c[15]=u[15]);c[4]=va*ea+X*ka;c[5]=y*ea+ia*ka;c[6]=N*ea+na*ka;c[7]=da*ea+ra*ka;c[8]=X*ea-va*ka;c[9]=ia*ea-y*ka;c[10]=na*ea-N*ka;c[11]=ra*ea-da*ka;return c}function q(c,u,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=u[0],y=u[1],N=u[2],da=u[3],X=u[8],ia=u[9],na=u[10],ra=u[11];u!==c&&(c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]);c[0]=va*ea-X*ka;c[1]=y*ea-ia*ka;c[2]=N*ea-na*ka;c[3]=da*ea-ra*ka;c[8]=va*ka+X*ea;c[9]=y*ka+ia*ea;c[10]=N*ka+na*ea;c[11]=da*ka+
ra*ea;return c}function J(c,u,ea){const ka=Math.sin(ea);ea=Math.cos(ea);const va=u[0],y=u[1],N=u[2],da=u[3],X=u[4],ia=u[5],na=u[6],ra=u[7];u!==c&&(c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15]);c[0]=va*ea+X*ka;c[1]=y*ea+ia*ka;c[2]=N*ea+na*ka;c[3]=da*ea+ra*ka;c[4]=X*ea-va*ka;c[5]=ia*ea-y*ka;c[6]=na*ea-N*ka;c[7]=ra*ea-da*ka;return c}function G(c,u){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=u[0];c[13]=u[1];
c[14]=u[2];c[15]=1;return c}function H(c,u){c[0]=u[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=u[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=u[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function T(c,u,ea){if(0===u)return R(c);let ka=ea[0],va=ea[1];ea=ea[2];let y=Math.sqrt(ka*ka+va*va+ea*ea),N=void 0,da=void 0,X=void 0;if(y<ma.getEpsilon())return null;y=1/y;ka*=y;va*=y;ea*=y;N=Math.sin(u);da=Math.cos(u);X=1-da;c[0]=ka*ka*X+da;c[1]=va*ka*X+ea*N;c[2]=ea*ka*X-va*N;c[3]=0;c[4]=ka*va*X-ea*N;c[5]=va*va*X+da;c[6]=
ea*va*X+ka*N;c[7]=0;c[8]=ka*ea*X+va*N;c[9]=va*ea*X-ka*N;c[10]=ea*ea*X+da;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,u){const ea=Math.sin(u);u=Math.cos(u);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=u;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=u;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function p(c,u){const ea=Math.sin(u);u=Math.cos(u);c[0]=u;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=u;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function t(c,u){const ea=
Math.sin(u);u=Math.cos(u);c[0]=u;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=u;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,u,ea){var ka=u[0],va=u[1],y=u[2],N=u[3],da=ka+ka,X=va+va;const ia=y+y;u=ka*da;const na=ka*X;ka*=ia;const ra=va*X;va*=ia;y*=ia;da*=N;X*=N;N*=ia;c[0]=1-(ra+y);c[1]=na+N;c[2]=ka-X;c[3]=0;c[4]=na-N;c[5]=1-(u+y);c[6]=va+da;c[7]=0;c[8]=ka+X;c[9]=va-da;c[10]=1-(u+ra);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function O(c,
u){const ea=lb,ka=-u[0],va=-u[1],y=-u[2],N=u[3],da=u[4],X=u[5],ia=u[6],na=u[7],ra=ka*ka+va*va+y*y+N*N;0<ra?(ea[0]=2*(da*N+na*ka+X*y-ia*va)/ra,ea[1]=2*(X*N+na*va+ia*ka-da*y)/ra,ea[2]=2*(ia*N+na*y+da*va-X*ka)/ra):(ea[0]=2*(da*N+na*ka+X*y-ia*va),ea[1]=2*(X*N+na*va+ia*ka-da*y),ea[2]=2*(ia*N+na*y+da*va-X*ka));z(c,u,ea);return c}function D(c,u){c[0]=u[12];c[1]=u[13];c[2]=u[14];return c}function F(c,u){const ea=u[0],ka=u[1],va=u[2],y=u[4],N=u[5],da=u[6],X=u[8],ia=u[9];u=u[10];c[0]=Math.sqrt(ea*ea+ka*ka+
va*va);c[1]=Math.sqrt(y*y+N*N+da*da);c[2]=Math.sqrt(X*X+ia*ia+u*u);return c}function P(c,u){const ea=u[0]+u[5]+u[10];let ka=0;0<ea?(ka=2*Math.sqrt(ea+1),c[3]=.25*ka,c[0]=(u[6]-u[9])/ka,c[1]=(u[8]-u[2])/ka,c[2]=(u[1]-u[4])/ka):u[0]>u[5]&&u[0]>u[10]?(ka=2*Math.sqrt(1+u[0]-u[5]-u[10]),c[3]=(u[6]-u[9])/ka,c[0]=.25*ka,c[1]=(u[1]+u[4])/ka,c[2]=(u[8]+u[2])/ka):u[5]>u[10]?(ka=2*Math.sqrt(1+u[5]-u[0]-u[10]),c[3]=(u[8]-u[2])/ka,c[0]=(u[1]+u[4])/ka,c[1]=.25*ka,c[2]=(u[6]+u[9])/ka):(ka=2*Math.sqrt(1+u[10]-u[0]-
u[5]),c[3]=(u[1]-u[4])/ka,c[0]=(u[8]+u[2])/ka,c[1]=(u[6]+u[9])/ka,c[2]=.25*ka);return c}function Q(c,u,ea,ka){var va=u[0],y=u[1],N=u[2],da=u[3],X=va+va,ia=y+y,na=N+N;u=va*X;const ra=va*ia;va*=na;const U=y*ia;y*=na;N*=na;X*=da;ia*=da;da*=na;na=ka[0];const ba=ka[1];ka=ka[2];c[0]=(1-(U+N))*na;c[1]=(ra+da)*na;c[2]=(va-ia)*na;c[3]=0;c[4]=(ra-da)*ba;c[5]=(1-(u+N))*ba;c[6]=(y+X)*ba;c[7]=0;c[8]=(va+ia)*ka;c[9]=(y-X)*ka;c[10]=(1-(u+U))*ka;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function C(c,
u,ea,ka,va){var y=u[0],N=u[1],da=u[2],X=u[3],ia=y+y,na=N+N,ra=da+da;u=y*ia;var U=y*na,ba=y*ra;y=N*na;N*=ra;var pa=da*ra;da=X*ia;na*=X;const wa=X*ra;var Ba=ka[0],La=ka[1];ra=ka[2];ka=va[0];X=va[1];va=va[2];ia=(1-(y+pa))*Ba;const Ja=(U+wa)*Ba;Ba*=ba-na;U=(U-wa)*La;pa=(1-(u+pa))*La;La*=N+da;ba=(ba+na)*ra;N=(N-da)*ra;u=(1-(u+y))*ra;c[0]=ia;c[1]=Ja;c[2]=Ba;c[3]=0;c[4]=U;c[5]=pa;c[6]=La;c[7]=0;c[8]=ba;c[9]=N;c[10]=u;c[11]=0;c[12]=ea[0]+ka-(ia*ka+U*X+ba*va);c[13]=ea[1]+X-(Ja*ka+pa*X+N*va);c[14]=ea[2]+va-
(Ba*ka+La*X+u*va);c[15]=1;return c}function A(c,u){var ea=u[0],ka=u[1],va=u[2];u=u[3];var y=ea+ea,N=ka+ka;const da=va+va;ea*=y;const X=ka*y;ka*=N;const ia=va*y,na=va*N;va*=da;y*=u;N*=u;u*=da;c[0]=1-ka-va;c[1]=X+u;c[2]=ia-N;c[3]=0;c[4]=X-u;c[5]=1-ea-va;c[6]=na+y;c[7]=0;c[8]=ia+N;c[9]=na-y;c[10]=1-ea-ka;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function g(c,u,ea,ka,va,y,N){const da=1/(ea-u),X=1/(va-ka),ia=1/(y-N);c[0]=2*y*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*y*X;c[6]=0;c[7]=0;c[8]=(ea+u)*da;
c[9]=(va+ka)*X;c[10]=(N+y)*ia;c[11]=-1;c[12]=0;c[13]=0;c[14]=N*y*2*ia;c[15]=0;return c}function r(c,u,ea,ka,va){u=1/Math.tan(u/2);let y=void 0;c[0]=u/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=u;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=va&&Infinity!==va?(y=1/(ka-va),c[10]=(va+ka)*y,c[14]=2*va*ka*y):(c[10]=-1,c[14]=-2*ka);return c}function W(c,u,ea,ka){const va=Math.tan(u.upDegrees*Math.PI/180),y=Math.tan(u.downDegrees*Math.PI/180),N=Math.tan(u.leftDegrees*Math.PI/180);u=Math.tan(u.rightDegrees*
Math.PI/180);const da=2/(N+u),X=2/(va+y);c[0]=da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=X;c[6]=0;c[7]=0;c[8]=-((N-u)*da*.5);c[9]=(va-y)*X*.5;c[10]=ka/(ea-ka);c[11]=-1;c[12]=0;c[13]=0;c[14]=ka*ea/(ea-ka);c[15]=0;return c}function ja(c,u,ea,ka,va,y,N){const da=1/(u-ea),X=1/(ka-va),ia=1/(y-N);c[0]=-2*da;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*X;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ia;c[11]=0;c[12]=(u+ea)*da;c[13]=(va+ka)*X;c[14]=(N+y)*ia;c[15]=1;return c}function ta(c,u,ea,ka){var va=void 0;let y=void 0;var N=
void 0,da=void 0;let X=void 0,ia=void 0;var na=void 0,ra=void 0;let U=void 0,ba=void 0;const pa=u[0],wa=u[1];u=u[2];N=ka[0];da=ka[1];ka=ka[2];na=ea[0];ra=ea[1];ea=ea[2];va=ma.getEpsilon();if(Math.abs(pa-na)<va&&Math.abs(wa-ra)<va&&Math.abs(u-ea)<va)return R(c);na=pa-na;ra=wa-ra;U=u-ea;ba=1/Math.sqrt(na*na+ra*ra+U*U);na*=ba;ra*=ba;U*=ba;va=da*U-ka*ra;y=ka*na-N*U;N=N*ra-da*na;(ba=Math.sqrt(va*va+y*y+N*N))?(ba=1/ba,va*=ba,y*=ba,N*=ba):N=y=va=0;da=ra*N-U*y;X=U*va-na*N;ia=na*y-ra*va;(ba=Math.sqrt(da*da+
X*X+ia*ia))?(ba=1/ba,da*=ba,X*=ba,ia*=ba):ia=X=da=0;c[0]=va;c[1]=da;c[2]=na;c[3]=0;c[4]=y;c[5]=X;c[6]=ra;c[7]=0;c[8]=N;c[9]=ia;c[10]=U;c[11]=0;c[12]=-(va*pa+y*wa+N*u);c[13]=-(da*pa+X*wa+ia*u);c[14]=-(na*pa+ra*wa+U*u);c[15]=1;return c}function za(c,u,ea,ka){const va=u[0],y=u[1];u=u[2];var N=ka[0];const da=ka[1];var X=ka[2];ka=va-ea[0];let ia=y-ea[1];ea=u-ea[2];let na=ka*ka+ia*ia+ea*ea;0<na&&(na=1/Math.sqrt(na),ka*=na,ia*=na,ea*=na);let ra=da*ea-X*ia;X=X*ka-N*ea;N=N*ia-da*ka;na=ra*ra+X*X+N*N;0<na&&
(na=1/Math.sqrt(na),ra*=na,X*=na,N*=na);c[0]=ra;c[1]=X;c[2]=N;c[3]=0;c[4]=ia*N-ea*X;c[5]=ea*ra-ka*N;c[6]=ka*X-ia*ra;c[7]=0;c[8]=ka;c[9]=ia;c[10]=ea;c[11]=0;c[12]=va;c[13]=y;c[14]=u;c[15]=1;return c}function Ea(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ha(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**
2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function Fa(c,u,ea){c[0]=u[0]+ea[0];c[1]=u[1]+ea[1];c[2]=u[2]+ea[2];c[3]=u[3]+ea[3];c[4]=u[4]+ea[4];c[5]=u[5]+ea[5];c[6]=u[6]+ea[6];c[7]=u[7]+ea[7];c[8]=u[8]+ea[8];c[9]=u[9]+ea[9];c[10]=u[10]+ea[10];c[11]=u[11]+ea[11];c[12]=u[12]+ea[12];c[13]=u[13]+ea[13];c[14]=u[14]+ea[14];c[15]=u[15]+ea[15];return c}function Ua(c,u,ea){c[0]=u[0]-ea[0];c[1]=u[1]-ea[1];c[2]=u[2]-ea[2];c[3]=u[3]-ea[3];c[4]=u[4]-ea[4];c[5]=u[5]-ea[5];c[6]=u[6]-ea[6];c[7]=u[7]-
ea[7];c[8]=u[8]-ea[8];c[9]=u[9]-ea[9];c[10]=u[10]-ea[10];c[11]=u[11]-ea[11];c[12]=u[12]-ea[12];c[13]=u[13]-ea[13];c[14]=u[14]-ea[14];c[15]=u[15]-ea[15];return c}function Oa(c,u,ea){c[0]=u[0]*ea;c[1]=u[1]*ea;c[2]=u[2]*ea;c[3]=u[3]*ea;c[4]=u[4]*ea;c[5]=u[5]*ea;c[6]=u[6]*ea;c[7]=u[7]*ea;c[8]=u[8]*ea;c[9]=u[9]*ea;c[10]=u[10]*ea;c[11]=u[11]*ea;c[12]=u[12]*ea;c[13]=u[13]*ea;c[14]=u[14]*ea;c[15]=u[15]*ea;return c}function Sa(c,u,ea,ka){c[0]=u[0]+ea[0]*ka;c[1]=u[1]+ea[1]*ka;c[2]=u[2]+ea[2]*ka;c[3]=u[3]+ea[3]*
ka;c[4]=u[4]+ea[4]*ka;c[5]=u[5]+ea[5]*ka;c[6]=u[6]+ea[6]*ka;c[7]=u[7]+ea[7]*ka;c[8]=u[8]+ea[8]*ka;c[9]=u[9]+ea[9]*ka;c[10]=u[10]+ea[10]*ka;c[11]=u[11]+ea[11]*ka;c[12]=u[12]+ea[12]*ka;c[13]=u[13]+ea[13]*ka;c[14]=u[14]+ea[14]*ka;c[15]=u[15]+ea[15]*ka;return c}function $a(c,u){return c[0]===u[0]&&c[1]===u[1]&&c[2]===u[2]&&c[3]===u[3]&&c[4]===u[4]&&c[5]===u[5]&&c[6]===u[6]&&c[7]===u[7]&&c[8]===u[8]&&c[9]===u[9]&&c[10]===u[10]&&c[11]===u[11]&&c[12]===u[12]&&c[13]===u[13]&&c[14]===u[14]&&c[15]===u[15]}
function Ta(c,u){if(c===u)return!0;const ea=c[0],ka=c[1],va=c[2],y=c[3],N=c[4],da=c[5],X=c[6],ia=c[7],na=c[8],ra=c[9],U=c[10],ba=c[11],pa=c[12],wa=c[13],Ba=c[14];c=c[15];const La=u[0],Ja=u[1],Pa=u[2],Qa=u[3],Ga=u[4],Ra=u[5],xa=u[6],vb=u[7],ub=u[8],qb=u[9],b=u[10],gb=u[11],db=u[12],Gb=u[13],Pb=u[14];u=u[15];const nb=ma.getEpsilon();return Math.abs(ea-La)<=nb*Math.max(1,Math.abs(ea),Math.abs(La))&&Math.abs(ka-Ja)<=nb*Math.max(1,Math.abs(ka),Math.abs(Ja))&&Math.abs(va-Pa)<=nb*Math.max(1,Math.abs(va),
Math.abs(Pa))&&Math.abs(y-Qa)<=nb*Math.max(1,Math.abs(y),Math.abs(Qa))&&Math.abs(N-Ga)<=nb*Math.max(1,Math.abs(N),Math.abs(Ga))&&Math.abs(da-Ra)<=nb*Math.max(1,Math.abs(da),Math.abs(Ra))&&Math.abs(X-xa)<=nb*Math.max(1,Math.abs(X),Math.abs(xa))&&Math.abs(ia-vb)<=nb*Math.max(1,Math.abs(ia),Math.abs(vb))&&Math.abs(na-ub)<=nb*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(ra-qb)<=nb*Math.max(1,Math.abs(ra),Math.abs(qb))&&Math.abs(U-b)<=nb*Math.max(1,Math.abs(U),Math.abs(b))&&Math.abs(ba-gb)<=nb*Math.max(1,
Math.abs(ba),Math.abs(gb))&&Math.abs(pa-db)<=nb*Math.max(1,Math.abs(pa),Math.abs(db))&&Math.abs(wa-Gb)<=nb*Math.max(1,Math.abs(wa),Math.abs(Gb))&&Math.abs(Ba-Pb)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Pb))&&Math.abs(c-u)<=nb*Math.max(1,Math.abs(c),Math.abs(u))}function jb(c){const u=ma.getEpsilon(),ea=c[0],ka=c[1],va=c[2],y=c[4],N=c[5],da=c[6],X=c[8],ia=c[9];c=c[10];return Math.abs(1-(ea*ea+y*y+X*X))<=u&&Math.abs(1-(ka*ka+N*N+ia*ia))<=u&&Math.abs(1-(va*va+da*da+c*c))<=u}function ib(c){return 1===c[0]&&
0===c[1]&&0===c[2]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[8]&&0===c[9]&&1===c[10]}const lb=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:Fa,adjoint:n,copy:aa,determinant:K,equals:Ta,exactEquals:$a,frob:Ha,fromQuat:A,fromQuat2:O,fromRotation:T,fromRotationTranslation:z,fromRotationTranslationScale:Q,fromRotationTranslationScaleOrigin:C,fromScaling:H,fromTranslation:G,fromXRotation:B,fromYRotation:p,fromZRotation:t,frustum:g,getRotation:P,getScaling:F,getTranslation:D,hasIdentityRotation:ib,
identity:R,invert:l,invertOrIdentity:v,isOrthoNormal:jb,lookAt:ta,mul:ca,multiply:ca,multiplyScalar:Oa,multiplyScalarAndAdd:Sa,ortho:ja,perspective:r,perspectiveFromFieldOfView:W,rotate:x,rotateX:d,rotateY:q,rotateZ:J,scale:m,set:S,str:Ea,sub:Ua,subtract:Ua,targetTo:za,translate:L,transpose:I},Symbol.toStringTag,{value:"Module"}));k.add=Fa;k.adjoint=n;k.copy=aa;k.determinant=K;k.equals=Ta;k.exactEquals=$a;k.frob=Ha;k.fromQuat=A;k.fromQuat2=O;k.fromRotation=T;k.fromRotationTranslation=z;k.fromRotationTranslationScale=
Q;k.fromRotationTranslationScaleOrigin=C;k.fromScaling=H;k.fromTranslation=G;k.fromXRotation=B;k.fromYRotation=p;k.fromZRotation=t;k.frustum=g;k.getRotation=P;k.getScaling=F;k.getTranslation=D;k.hasIdentityRotation=ib;k.identity=R;k.invert=l;k.invertOrIdentity=v;k.isOrthoNormal=jb;k.lookAt=ta;k.mat4=f;k.mul=ca;k.multiply=ca;k.multiplyScalar=Oa;k.multiplyScalarAndAdd=Sa;k.ortho=ja;k.perspective=r;k.perspectiveFromFieldOfView=W;k.rotate=x;k.rotateX=d;k.rotateY=q;k.rotateZ=J;k.scale=m;k.set=S;k.str=
Ea;k.sub=Ua;k.subtract=Ua;k.targetTo=za;k.translate=L;k.transpose=I})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,f,ma,aa,S){function R(){return!!f._pe}function I(){return!!S("esri-wasm")}function v(){return m?m:m=(new Promise((d,q)=>k(["./pe-wasm"],d,q))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:q=>aa.getAssetUrl(`esri/geometry/support/${q}`)})).then(d=>{l(d)})}function l(d){function q(H,T,B){H[T]=B(H[T])}
f._pe=d;f.PeDefs.init();f.PeGTlistExtended.init();f.PeNotationMgrs.init();f.PeNotationUtm.init();f.PePCSInfo.init();f.PeGCSExtent=function(H){function T(){return H.apply(this,arguments)||this}ma._inheritsLoose(T,H);T.prototype.destroy=function(){f._pe.destroy(this)};return T}(f._pe.PeGCSExtent);d=[f._pe.PeDatum,f._pe.PeGeogcs,f._pe.PeGeogtran,f._pe.PeObject,f._pe.PeParameter,f._pe.PePrimem,f._pe.PeProjcs,f._pe.PeSpheroid,f._pe.PeUnit];for(var J of d)q(J.prototype,"getName",H=>function(){return H.call(this,
Array(f.PeDefs.PE_NAME_MAX))});for(const H of[f._pe.PeGeogtran,f._pe.PeProjcs])q(H.prototype,"getParameters",T=>function(){const B=Array(f.PeDefs.PE_PARM_MAX);let p=T.call(this);for(let t=0;t<B.length;t++){const z=f._pe.getValue(p,"*");B[t]=z?f._pe.wrapPointer(z,f._pe.PeParameter):null;p+=Int32Array.BYTES_PER_ELEMENT}return B});q(f._pe.PeHorizon.prototype,"getCoord",H=>function(){const T=this.getSize();if(!T)return null;const B=[],p=H.call(this);L(B,T,p);return B});q(f._pe.PeGTlistExtendedEntry.prototype,
"getEntries",H=>{const T=f._pe._pe_getPeGTlistExtendedGTsSize();return function(){let B=null;var p=H.call(this);if(!f._pe.compare(p,f._pe.NULL)){B=[p];const t=this.getSteps();if(1<t){p=f._pe.getPointer(p);for(let z=1;z<t;z++)B.push(f._pe.wrapPointer(p+T*z,f._pe.PeGTlistExtendedGTs))}}return B}});const G=f._pe._pe_getPeHorizonSize();J=H=>function(){let T=this._cache;T||(this._cache=T=new Map);if(T.has(H))return T.get(H);let B=null;var p=H.call(this);if(!f._pe.compare(p,f._pe.NULL)){B=[p];const t=p.getNump();
if(1<t){p=f._pe.getPointer(p);for(let z=1;z<t;z++)B.push(f._pe.wrapPointer(p+G*z,f._pe.PeHorizon))}}T.set(H,B);return B};q(f._pe.PeProjcs.prototype,"horizonGcsGenerate",J);q(f._pe.PeProjcs.prototype,"horizonPcsGenerate",J);f._pe.PeObject.prototype.toString=function(H=f.PeDefs.PE_STR_OPTS_NONE){f._pe.ensureCache.prepare();const T=f._pe.getPointer(this),B=f._pe.ensureInt8(Array(f.PeDefs.PE_BUFFER_MAX));return f._pe.UTF8ToString(f._pe._pe_object_to_string_ext(T,H,B))}}function n(d){if(d){var q=f._pe.getClass(d);
q&&(q=f._pe.getCache(q))&&(d=f._pe.getPointer(d))&&delete q[d]}}function K(d,q){const J=[];q=Array(q);for(let G=0;G<d;G++)J.push(f._pe.ensureInt8(q));return J}function ca(d){let q;Array.isArray(d[0])?(q=[],d.forEach(J=>{q.push(J[0],J[1])})):q=d;return q}function L(d,q,J,G=!1){if(G)for(G=0;G<2*q;G++)d[G]=f._pe.getValue(J+G*Float64Array.BYTES_PER_ELEMENT,"double");else{G=0===d.length;for(let H=0;H<q;H++)G&&(d[H]=Array(2)),d[H][0]=f._pe.getValue(J,"double"),d[H][1]=f._pe.getValue(J+Float64Array.BYTES_PER_ELEMENT,
"double"),J+=2*Float64Array.BYTES_PER_ELEMENT}}let m;f._pe=null;f.PeCSTransformations=void 0;(function(d){function q(H,T,B){f._pe.ensureCache.prepare();var p=ca(B);const t=B===p;p=f._pe.ensureFloat64(p);(H=f._pe._pe_geog_to_proj(f._pe.getPointer(H),T,p))&&L(B,T,p,t);return H}function J(H,T,B){return G(H,T,B,0)}function G(H,T,B,p){f._pe.ensureCache.prepare();var t=ca(B);const z=B===t;t=f._pe.ensureFloat64(t);(H=f._pe._pe_proj_to_geog_center(f._pe.getPointer(H),T,t,p))&&L(B,T,t,z);return H}d.geogToProj=
q;d.projGeog=function(H,T,B,p){switch(p){case f.PeDefs.PE_TRANSFORM_P_TO_G:return J(H,T,B);case f.PeDefs.PE_TRANSFORM_G_TO_P:return q(H,T,B)}return 0};d.projToGeog=J;d.projToGeogCenter=G})(f.PeCSTransformations||(f.PeCSTransformations={}));f.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=f._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=f._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=f._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=f._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=f._pe.PeDefs.prototype.PE_DD_MAX;
d.PE_DDM_MAX=f._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=f._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=f._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=f._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=f._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=f._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=f._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=f._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=f._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=f._pe.PeDefs.prototype.PE_TYPE_UNIT;
d.PE_TYPE_LINUNIT=f._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=f._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=f._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=f._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=f._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=f._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=f._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=f._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=f._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
d.PE_TRANSFORM_P_TO_G=f._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=f._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=f._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=f._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=f._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=f._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(f.PeDefs||(f.PeDefs={}));f.PeFactory=void 0;(function(d){function q(T,B){let p=null,t=J[T];t||(t={},J[T]=t);t.hasOwnProperty(String(B))?p=
t[B]:(T=f._pe.PeFactory.prototype.factoryByType(T,B),f._pe.compare(T,f._pe.NULL)||(p=T,t[B]=p));return p=H(p)}const J={},G={},H=T=>{if(T){const B=T.getType();switch(B){case f.PeDefs.PE_TYPE_GEOGCS:T=f._pe.castObject(T,f._pe.PeGeogcs);break;case f.PeDefs.PE_TYPE_PROJCS:T=f._pe.castObject(T,f._pe.PeProjcs);break;case f.PeDefs.PE_TYPE_GEOGTRAN:T=f._pe.castObject(T,f._pe.PeGeogtran);break;default:B&f.PeDefs.PE_TYPE_UNIT&&(T=f._pe.castObject(T,f._pe.PeUnit))}}return T};d.initialize=function(){f._pe.PeFactory.prototype.initialize(null)};
d.coordsys=function(T){return q(f.PeDefs.PE_TYPE_COORDSYS,T)};d.factoryByType=q;d.fromString=function(T,B){let p=null,t=G[T];t||(t={},G[T]=t);t.hasOwnProperty(B)?p=t[B]:(T=f._pe.PeFactory.prototype.fromString(T,B),f._pe.compare(T,f._pe.NULL)||(p=T,t[B]=p));return p=H(p)};d.geogcs=function(T){return q(f.PeDefs.PE_TYPE_GEOGCS,T)};d.geogtran=function(T){return q(f.PeDefs.PE_TYPE_GEOGTRAN,T)};d.getCode=function(T){return f._pe.PeFactory.prototype.getCode(T)};d.projcs=function(T){return q(f.PeDefs.PE_TYPE_PROJCS,
T)};d.unit=function(T){return q(f.PeDefs.PE_TYPE_UNIT,T)}})(f.PeFactory||(f.PeFactory={}));f.PeGCSExtent=null;f.PeGTlistExtended=void 0;(function(d){let q;d.init=function(){d.PE_GTLIST_OPTS_COMMON=f._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;q=f._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(J,G,H,T,B,p){let t=null;const z=new f._pe.PeInteger(p);try{const O=f._pe.PeGTlistExtended.prototype.getGTlist(J,G,H,T,B,z);if(p=z.val)if(t=[O],1<p){const D=f._pe.getPointer(O);for(J=1;J<
p;J++)t.push(f._pe.wrapPointer(D+q*J,f._pe.PeGTlistExtendedEntry))}}finally{f._pe.destroy(z)}return t}})(f.PeGTlistExtended||(f.PeGTlistExtended={}));f.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(q){if(q&&q.length){for(const J of q)n(J),J.getEntries().forEach(G=>{n(G);G=G.getGeogtran();n(G);G.getParameters().forEach(n);[G.getGeogcs1(),G.getGeogcs2()].forEach(H=>{n(H);const T=H.getDatum();n(T);n(T.getSpheroid());n(H.getPrimem());n(H.getUnit())})});f._pe.PeGTlistExtendedEntry.prototype.Delete(q[0])}}})(f.PeGTlistExtendedEntry||
(f.PeGTlistExtendedEntry={}));f.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(q,J,G,H,T){f._pe.ensureCache.prepare();var B=ca(G);const p=G===B;B=f._pe.ensureFloat64(B);let t=0;H&&(t=f._pe.ensureFloat64(H));(q=f._pe._pe_geog_to_geog(f._pe.getPointer(q),J,B,t,T))&&L(G,J,B,p);return q}})(f.PeGTTransformations||(f.PeGTTransformations={}));f.PeNotationDms=void 0;(function(d){const q=(G,H,T,B,p,t)=>{f._pe.ensureCache.prepare();switch(G){case "dd":var z=f._pe._pe_geog_to_dd;var O=f.PeDefs.PE_DD_MAX;
break;case "ddm":z=f._pe._pe_geog_to_ddm;O=f.PeDefs.PE_DDM_MAX;break;case "dms":z=f._pe._pe_geog_to_dms,O=f.PeDefs.PE_DMS_MAX}G=0;H&&(G=f._pe.getPointer(H));H=ca(B);H=f._pe.ensureFloat64(H);O=K(T,O);B=f._pe.ensureInt32(O);if(p=z(G,T,H,p,B))for(z=0;z<T;z++)t[z]=f._pe.UTF8ToString(O[z]);return p},J=(G,H,T,B,p)=>{f._pe.ensureCache.prepare();switch(G){case "dd":var t=f._pe._pe_dd_to_geog;break;case "ddm":t=f._pe._pe_ddm_to_geog;break;case "dms":t=f._pe._pe_dms_to_geog}G=0;H&&(G=f._pe.getPointer(H));H=
B.map(z=>f._pe.ensureString(z));B=f._pe.ensureInt32(H);H=f._pe.ensureFloat64(Array(2*T));(t=t(G,T,B,H))&&L(p,T,H);return t};d.geogToDms=function(G,H,T,B,p){return q("dms",G,H,T,B,p)};d.dmsToGeog=function(G,H,T,B){return J("dms",G,H,T,B)};d.geogToDdm=function(G,H,T,B,p){return q("ddm",G,H,T,B,p)};d.ddmToGeog=function(G,H,T,B){return J("ddm",G,H,T,B)};d.geogToDd=function(G,H,T,B,p){return q("dd",G,H,T,B,p)};d.ddToGeog=function(G,H,T,B){return J("dd",G,H,T,B)}})(f.PeNotationDms||(f.PeNotationDms={}));
f.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=f._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=f._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=f._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(q,J,G,H,T,B,p){f._pe.ensureCache.prepare();let t=0;q&&
(t=f._pe.getPointer(q));q=ca(G);G=f._pe.ensureFloat64(q);q=K(J,f.PeDefs.PE_MGRS_MAX);const z=f._pe.ensureInt32(q);if(H=f._pe._pe_geog_to_mgrs_extended(t,J,G,H,T,B,z))for(T=0;T<J;T++)p[T]=f._pe.UTF8ToString(q[T]);return H};d.mgrsToGeogExtended=function(q,J,G,H,T){f._pe.ensureCache.prepare();let B=0;q&&(B=f._pe.getPointer(q));q=G.map(p=>f._pe.ensureString(p));G=f._pe.ensureInt32(q);q=f._pe.ensureFloat64(Array(2*J));(H=f._pe._pe_mgrs_to_geog_extended(B,J,G,H,q))&&L(T,J,q);return H}})(f.PeNotationMgrs||
(f.PeNotationMgrs={}));f.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(q,J,G,H,T,B,p){f._pe.ensureCache.prepare();let t=0;q&&(t=f._pe.getPointer(q));q=ca(G);G=f._pe.ensureFloat64(q);q=K(J,f.PeDefs.PE_MGRS_MAX);const z=f._pe.ensureInt32(q);if(H=f._pe._pe_geog_to_usng(t,J,G,H,T,B,z))for(T=0;T<J;T++)p[T]=f._pe.UTF8ToString(q[T]);return H};d.usngToGeog=function(q,J,G,H){f._pe.ensureCache.prepare();var T=0;q&&(T=f._pe.getPointer(q));q=G.map(B=>f._pe.ensureString(B));G=f._pe.ensureInt32(q);q=
f._pe.ensureFloat64(Array(2*J));(T=f._pe._pe_usng_to_geog(T,J,G,q))&&L(H,J,q);return T}})(f.PeNotationUsng||(f.PeNotationUsng={}));f.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=f._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(q,J,G,H,T){f._pe.ensureCache.prepare();var B=0;q&&(B=f._pe.getPointer(q));q=ca(G);G=f._pe.ensureFloat64(q);
q=K(J,f.PeDefs.PE_UTM_MAX);const p=f._pe.ensureInt32(q);if(H=f._pe._pe_geog_to_utm(B,J,G,H,p))for(B=0;B<J;B++)T[B]=f._pe.UTF8ToString(q[B]);return H};d.utmToGeog=function(q,J,G,H,T){f._pe.ensureCache.prepare();let B=0;q&&(B=f._pe.getPointer(q));q=G.map(p=>f._pe.ensureString(p));G=f._pe.ensureInt32(q);q=f._pe.ensureFloat64(Array(2*J));(H=f._pe._pe_utm_to_geog(B,J,G,H,q))&&L(T,J,q);return H}})(f.PeNotationUtm||(f.PeNotationUtm={}));f.PePCSInfo=void 0;(function(d){const q=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=
f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=f._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=f._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=f._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(J,G=d.PE_PCSINFO_OPTION_DOMAIN){let H=null,T=null;q.has(J)&&(T=q.get(J),T[G]&&(H=T[G]));H||(H=f._pe.PePCSInfo.prototype.generate(J,G),T||(T=[],q.set(J,T)),T[G]=H);return H}})(f.PePCSInfo||(f.PePCSInfo={}));f.PeVersion=void 0;
(function(d){d.versionString=function(){return f._pe.PeVersion.prototype.version_string()}})(f.PeVersion||(f.PeVersion={}));const x=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return f.PeCSTransformations},get PeDefs(){return f.PeDefs},get PeFactory(){return f.PeFactory},get PeGCSExtent(){return f.PeGCSExtent},get PeGTTransformations(){return f.PeGTTransformations},get PeGTlistExtended(){return f.PeGTlistExtended},get PeGTlistExtendedEntry(){return f.PeGTlistExtendedEntry},
get PeNotationDms(){return f.PeNotationDms},get PeNotationMgrs(){return f.PeNotationMgrs},get PeNotationUsng(){return f.PeNotationUsng},get PeNotationUtm(){return f.PeNotationUtm},get PePCSInfo(){return f.PePCSInfo},get PeVersion(){return f.PeVersion},_init:l,get _pe(){return f._pe},isLoaded:R,isSupported:I,load:v},Symbol.toStringTag,{value:"Module"}));f._init=l;f.isLoaded=R;f.isSupported=I;f.load=v;f.pe=x})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,
f){const ma=Math.PI/180;var aa=f.earth.radius;const S=f.earth.eccentricitySquared;aa={a1:aa*S,a2:aa*S*aa*S,a3:aa*S*S/2,a4:aa*S*aa*S*2.5,a5:aa*S+aa*S*S/2,a6:1-S};f={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:f.earth.radius,f:f.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:f.moon.radius,f:f.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:f.mars.radius,f:f.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,
f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,
f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},
104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:f.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=
/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=aa;k.spheroids=f;k.toRadians=ma;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(k){return function(){function f(aa){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(aa&&aa.steps)for(const S of aa.steps)S instanceof k?this.steps.push(S):this.steps.push(new k({wkid:S.wkid,wkt:S.wkt,isInverse:S.isInverse}))}
f.cacheKey=function(aa,S){return[void 0!==aa.wkid&&null!==aa.wkid?aa.wkid.toString():"-1",void 0!==aa.wkt&&null!==aa.wkt?aa.wkt.toString():"",void 0!==S.wkid&&null!==S.wkid?S.wkid.toString():"-1",void 0!==S.wkt&&null!==S.wkt?S.wkt.toString():""].join()};f.fromGE=function(aa){const S=new f;let R="";for(const I of aa.steps)aa=k.fromGE(I),S.steps.push(aa),R+=aa.uid.toString()+",";S._cachedProjection={};S._gtlistentry=null;S._chain=R;return S};var ma=f.prototype;ma.getInverse=function(){const aa=new f;
aa.steps=[];for(let S=this.steps.length-1;0<=S;S--)aa.steps.push(this.steps[S].getInverse());return aa};ma.getGTListEntry=function(){let aa="";for(const S of this.steps)aa+=S.uid.toString()+",";aa!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=aa);return this._gtlistentry};ma.assignCachedGe=function(aa,S,R){this._cachedProjection[f.cacheKey(aa,S)]=R};ma.getCachedGeTransformation=function(aa,S){let R="";for(const I of this.steps)R+=I.uid.toString()+",";R!==this._chain&&
(this._gtlistentry=null,this._cachedProjection={},this._chain=R);aa=this._cachedProjection[f.cacheKey(aa,S)];return void 0===aa?null:aa};return f}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let f=0;return function(){function ma(aa){this.uid=f++;aa?(this._wkt=null!=aa.wkt?aa.wkt:null,this._wkid=null!=aa.wkid?aa.wkid:-1,this._isInverse=null!=aa.isInverse?!0===aa.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=
!1)}ma.fromGE=function(aa){const S=new ma;S._wkt=aa.wkt;S._wkid=aa.wkid;S._isInverse=aa.isInverse;return S};ma.prototype.getInverse=function(){const aa=new ma;aa._wkt=this.wkt;aa._wkid=this._wkid;aa._isInverse=!this.isInverse;return aa};k._createClass(ma,[{key:"wkt",get:function(){return this._wkt},set:function(aa){this._wkt=aa;this.uid=f++}},{key:"wkid",get:function(){return this._wkid},set:function(aa){this._wkid=aa;this.uid=f++}},{key:"isInverse",get:function(){return this._isInverse},set:function(aa){this._isInverse=
aa;this.uid=f++}}]);return ma}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,f,ma,aa){k.getGeometryZScaler=function(S,R,I){if(f.isNone(R)||f.isNone(I)||I.vcsWkid||aa.equals(R,I))return null;R=ma.getMetersPerVerticalUnitForSR(R);I=ma.getMetersPerVerticalUnitForSR(I);const v=R/I;if(1===v)return null;switch(S){case "point":case "esriGeometryPoint":return l=>{l&&null!=l.z&&(l.z*=v)};case "polyline":case "esriGeometryPolyline":return l=>
{if(l)for(const n of l.paths)for(const K of n)2<K.length&&(K[2]*=v)};case "polygon":case "esriGeometryPolygon":return l=>{if(l)for(const n of l.rings)for(const K of n)2<K.length&&(K[2]*=v)};case "multipoint":case "esriGeometryMultipoint":return l=>{if(l)for(const n of l.points)2<n.length&&(n[2]*=v)};case "extent":case "esriGeometryExtent":return l=>{l&&null!=l.zmin&&null!=l.zmax&&(l.zmin*=v,l.zmax*=v)};default:return null}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L){function m(B){const p=[];let t=0,z=0;for(let O=0;O<B.length;O++){const D=B[O];let F=null;for(let P=0;P<D.length;P++)F=D[P],p.push(F),0===P?z=t=F[0]:(t=Math.min(t,F[0]),z=Math.max(z,F[0]));F&&p.push([(t+z)/2,0])}return p}function x(B,p){if(!(B instanceof v||B instanceof I))throw T.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new aa("straightLineDensify: the input geometry is neither polyline nor polygon");var t=l.getGeometryParts(B);
const z=[];for(const D of t){t=[];z.push(t);t.push([D[0][0],D[0][1]]);for(let F=0;F<D.length-1;F++){const P=D[F][0],Q=D[F][1],C=D[F+1][0],A=D[F+1][1];var O=Math.sqrt((C-P)*(C-P)+(A-Q)*(A-Q));const g=(A-Q)/O,r=(C-P)/O,W=O/p;if(1<W){for(let ja=1;ja<=W-1;ja++){const ta=ja*p;t.push([r*ta+P,g*ta+Q])}O=(O+Math.floor(W-1)*p)/2;t.push([r*O+P,g*O+Q])}t.push([C,A])}}return"polygon"===B.type?new I({rings:z,spatialReference:B.spatialReference}):new v({paths:z,spatialReference:B.spatialReference})}function d(B,
p,t){p&&(B=x(B,1E6),B=K.webMercatorToGeographic(B,!0));t&&(B=l.updatePolyGeometry(B,t));return B}function q(B,p,t){if(Array.isArray(B)){var z=B[0];z>p?(t=l.offsetMagnitude(z,p),B[0]=z+-2*t*p):z<t&&(p=l.offsetMagnitude(z,t),B[0]=z+-2*p*t)}else z=B.x,z>p?(t=l.offsetMagnitude(z,p),B=B.clone().offset(-2*t*p,0)):z<t&&(p=l.offsetMagnitude(z,t),B=B.clone().offset(-2*p*t,0));return B}function J(B,p){let t=-1;for(let z=0;z<p.cutIndexes.length;z++){const O=p.cutIndexes[z],D=p.geometries[z],F=l.getGeometryParts(D);
for(let P=0;P<F.length;P++){const Q=F[P];Q.some(C=>{if(180>C[0])return!0;C=0;for(var A=0;A<Q.length;A++){var g=Q[A][0];C=g>C?g:C}C=Number(C.toFixed(9));C=-360*l.offsetMagnitude(C,180);for(A=0;A<Q.length;A++)g=D.getPoint(P,A),D.setPoint(P,A,g.clone().offset(C,0));return!0})}if(O===t)if("polygon"===B[0].type)for(const P of l.getGeometryParts(D))B[O]=B[O].addRing(P);else{if("polyline"===B[0].type)for(const P of l.getGeometryParts(D))B[O]=B[O].addPath(P)}else t=O,B[O]=D}return B}function G(B,p,t){return H.apply(this,
arguments)}function H(){H=f._asyncToGenerator(function*(B,p,t){if(!Array.isArray(B))return G([B],p);p&&"string"!==typeof p&&T.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var z="string"===typeof p?p:p?.url??ma.geometryServiceUrl;let O,D,F;let P=0;var Q=[];p=[];for(var C of B)if(R.isNone(C))p.push(C);else{if(!A){var A=C.spatialReference;var g=n.getInfo(A);var r=(O=A.isWebMercator)?102100:4326;D=l.cutParams[r].maxX;F=l.cutParams[r].minX;var W=l.cutParams[r].plus180Line;
r=l.cutParams[r].minus180Line}if(g)if("mesh"===C.type)p.push(C);else if("point"===C.type)p.push(q(C.clone(),D,F));else if("multipoint"===C.type){var ja=C.clone();ja.points=ja.points.map(ta=>q(ta,D,F));p.push(ja)}else if("extent"===C.type)ja=C.clone()._normalize(!1,!1,g),p.push(ja.rings?new I(ja):ja);else if(C.extent){ja=C.extent;const ta=2*l.offsetMagnitude(ja.xmin,F)*D;let za=0===ta?C.clone():l.updatePolyGeometry(C.clone(),ta);ja.offset(ta,0);ja.intersects(W)&&ja.xmax!==D?(P=ja.xmax>P?ja.xmax:P,
za=d(za,O),Q.push(za),p.push("cut")):ja.intersects(r)&&ja.xmin!==F?(P=2*ja.xmax*D>P?2*ja.xmax*D:P,za=d(za,O,360),Q.push(za),p.push("cut")):p.push(za)}else p.push(C.clone());else p.push(C)}A=l.offsetMagnitude(P,D);g=-90;W=A;for(C=new v;0<A;)r=-180+360*A,C.addPath([[r,g],[r,-1*g]]),g*=-1,A--;if(0<Q.length&&0<W){A=yield ca.cut(z,Q,C,t);A=J(Q,A);g=[];Q=[];for(W=0;W<p.length;W++)C=p[W],"cut"!==C?Q.push(C):(C=A.shift(),r=B[W],R.isSome(r)&&"polygon"===r.type&&r.rings&&1<r.rings.length&&C.rings.length>=r.rings.length?
(g.push(C),Q.push("simplify")):Q.push(O?K.geographicToWebMercator(C):C));if(!g.length)return Q;p=yield L.simplify(z,g,t);B=[];for(t=0;t<Q.length;t++)z=Q[t],"simplify"!==z?B.push(z):B.push(O?K.geographicToWebMercator(p.shift()):p.shift());return B}B=[];for(t=0;t<p.length;t++)z=p[t],"cut"!==z?B.push(z):(z=Q.shift(),B.push(!0===O?K.geographicToWebMercator(z):z));return B});return H.apply(this,arguments)}const T=S.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(B){if(!B)return null;
const p=B.extent;if(!p)return null;var t=B.spatialReference&&n.getInfo(B.spatialReference);if(!t)return p;const [z,O]=t.valid;({width:t}=p);let {xmin:D,xmax:F}=p;[D,F]=[F,D];if("extent"===B.type||0===t||t<=O||t>2*O||D<z||F>O)return p;let P;switch(B.type){case "polygon":if(1<B.rings.length)P=m(B.rings);else return p;break;case "polyline":if(1<B.paths.length)P=m(B.paths);else return p;break;case "multipoint":P=B.points}B=p.clone();for(let Q=0;Q<P.length;Q++){let C=P[Q][0];0>C?(C+=O,F=Math.max(C,F)):
(C-=O,D=Math.min(C,D))}B.xmin=D;B.xmax=F;return B.width<t?(B.xmin-=O,B.xmax-=O,B):p};k.normalizeCentralMeridian=G;k.normalizeMapX=function(B,p){if(p=n.getInfo(p)){const [t,z]=p.valid;p=z-t;if(B<t)for(;B<t;)B+=p;if(B>z)for(;B>z;)B-=p}return B};k.straightLineDensify=x;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,f,ma,aa){function S(R){return aa.isPolygon(R)?
R.rings:R.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ma.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ma.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:ma.WGS84}),minus180Line:new f({paths:[[[-180,
-180],[-180,180]]],spatialReference:ma.WGS84})}};k.cutParams=f;k.getGeometryParts=S;k.offsetMagnitude=function(R,I){return Math.ceil((R-I)/(2*I))};k.updatePolyGeometry=function(R,I){const v=S(R);for(const l of v)for(const n of l)n[0]+=I;return R};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(k,
f,ma,aa,S,R){function I(){I=f._asyncToGenerator(function*(v,l,n,K){v=R.parseUrl(v);const ca=l[0].spatialReference;l={...K,query:{...v.query,f:"json",sr:JSON.stringify(ca),target:JSON.stringify({geometryType:S.getJsonType(l[0]),geometries:l}),cutter:JSON.stringify(n)}};l=yield aa(v.path+"/cut",l);const {cutIndexes:L,geometries:m=[]}=l.data;return{cutIndexes:L,geometries:m.map(x=>{x=S.fromJSON(x);x.spatialReference=ca;return x})}});return I.apply(this,arguments)}k.cut=function(v,l,n,K){return I.apply(this,
arguments)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(k,f,ma,aa,S,R){function I(v,l,n){const K={};for(const L in v)if("declaredClass"!==L){var ca=v[L];if(null!=ca&&"function"!==typeof ca)if(Array.isArray(ca)){K[L]=[];for(let m=0;m<ca.length;m++)K[L][m]=I(ca[m])}else"object"===typeof ca?ca.toJSON?(ca=ca.toJSON(n&&n[L]),K[L]=l?ca:JSON.stringify(ca)):
K[L]=l?ca:JSON.stringify(ca):K[L]=ca}return K}k.asValidOptions=function(v,l){return l?{...l,query:{...(v??{}),...l.query}}:{query:v}};k.encode=I;k.getToken=function(v,l){return R.supportsApiKey(v)&&(l||f.apiKey)?l||f.apiKey:ma.id?.findCredential(v)?.token};k.parseUrl=function(v){return"string"===typeof v?S.urlToObject(v):aa.clone(v)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(k,f,ma,aa,S,R){function I(){I=f._asyncToGenerator(function*(v,l,n){const K="string"===typeof v?aa.urlToObject(v):v;v=l[0].spatialReference;const ca=S.getJsonType(l[0]);l={...n,query:{...K.query,f:"json",sr:v.wkid?v.wkid:JSON.stringify(v),geometries:JSON.stringify(R.encodeGeometries(l))}};({data:l}=yield ma(K.path+"/simplify",l));return R.decodeGeometries(l.geometries,ca,v)});return I.apply(this,arguments)}k.simplify=function(v,l,n){return I.apply(this,arguments)};Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(k,f){k.decodeGeometries=function(ma,aa,S){const R=f.getGeometryType(aa);return ma.map(I=>{I=R.fromJSON(I);I.spatialReference=S;return I})};k.encodeGeometries=function(ma){return{geometryType:f.getJsonType(ma[0]),geometries:ma.map(aa=>aa.toJSON())}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,f,ma,aa,S,R,I){function v(d,q){if(!q)return null;if("x"in q){var J={x:0,y:0};[J.x,J.y]=d(q.x,q.y,ca);null!=q.z&&(J.z=q.z);null!=q.m&&(J.m=q.m);return J}return"xmin"in q?(J={xmin:0,ymin:0,xmax:0,ymax:0},[J.xmin,J.ymin]=d(q.xmin,q.ymin,ca),[J.xmax,J.ymax]=d(q.xmax,q.ymax,ca),q.hasZ&&(J.zmin=q.zmin,J.zmax=q.zmax,J.hasZ=!0),q.hasM&&(J.mmin=q.mmin,J.mmax=q.mmax,J.hasM=!0),J):"rings"in q?{rings:l(q.rings,d),hasM:q.hasM,hasZ:q.hasZ}:"paths"in q?{paths:l(q.paths,d),hasM:q.hasM,hasZ:q.hasZ}:"points"in
q?{points:n(q.points,d),hasM:q.hasM,hasZ:q.hasZ}:null}function l(d,q){const J=[];for(const G of d)J.push(n(G,q));return J}function n(d,q){const J=[];for(const G of d)d=q(G[0],G[1],[0,0]),J.push(d),2<G.length&&d.push(G[2]),3<G.length&&d.push(G[3]);return J}function K(){K=f._asyncToGenerator(function*(d,q){d&&q&&(d=Array.isArray(d)?d.map(J=>ma.isSome(J.geometry)?J.geometry.spatialReference:null).filter(ma.isSome):[d],yield aa.initializeProjection(d.map(J=>({source:J,dest:q}))))});return K.apply(this,
arguments)}const ca=[0,0],L=v.bind(null,I.lngLatToXY),m=v.bind(null,I.xyToLngLat),x=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var q=d.prototype;q.push=function(){var J=f._asyncToGenerator(function*(G,H,T){if(!(G&&G.length&&H&&T)||R.equals(H,T))return G;const B={geometries:G,inSpatialReference:H,outSpatialReference:T,resolve:null};this._jobs.push(B);return new Promise(p=>{B.resolve=p;null===this._timer&&(this._timer=setTimeout(this._process,
10))})});return function(G,H,T){return J.apply(this,arguments)}}();q._process=function(){this._timer=null;const J=this._jobs.shift();if(J){var {geometries:G,inSpatialReference:H,outSpatialReference:T,resolve:B}=J;I.canProject(H,T)?R.isWebMercator(T)?B(G.map(L)):B(G.map(m)):B(aa.projectMany(S.jsonAdapter,G,H,T,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());k.checkProjectionSupport=function(d,q){return K.apply(this,arguments)};k.project=function(d,q,J,G){if(!d)return d;
J||(J=q,q=d.spatialReference);return R.isValid(q)&&R.isValid(J)&&!R.equals(q,J)?I.canProject(q,J)?(d=R.isWebMercator(J)?L(d):m(d),d.spatialReference=J,d):aa.projectMany(S.jsonAdapter,[d],q,J,null,G)[0]:d};k.projectMany=function(d,q,J){return x.push(d,q,J)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let f=function(I,v,l){this.x=I;this.y=v;this.spatialReference=l;this.m=this.z=void 0},ma=function(I,
v,l,n){this.rings=I;this.spatialReference=v;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)},aa=function(I,v,l,n){this.paths=I;this.spatialReference=v;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)},S=function(I,v,l,n){this.points=I;this.spatialReference=v;this.hasM=this.hasZ=void 0;l&&(this.hasZ=l);n&&(this.hasM=n)},R=function(I,v,l,n,K){this.xmin=I;this.ymin=v;this.xmax=l;this.ymax=n;this.spatialReference=K;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter=
{convertToGEGeometry:function(I,v){return null==v?null:I.convertJSONToGeometry(v)},exportPoint:function(I,v,l){l=new f(I.getPointX(v),I.getPointY(v),l);const n=I.hasZ(v),K=I.hasM(v);n&&(l.z=I.getPointZ(v));K&&(l.m=I.getPointM(v));return l},exportPolygon:function(I,v,l){return new ma(I.exportPaths(v),l,I.hasZ(v),I.hasM(v))},exportPolyline:function(I,v,l){return new aa(I.exportPaths(v),l,I.hasZ(v),I.hasM(v))},exportMultipoint:function(I,v,l){return new S(I.exportPoints(v),l,I.hasZ(v),I.hasM(v))},exportExtent:function(I,
v,l){var n=I.hasZ(v);const K=I.hasM(v);l=new R(I.getXMin(v),I.getYMin(v),I.getXMax(v),I.getYMax(v),l);n&&(n=I.getZExtent(v),l.zmin=n.vmin,l.zmax=n.vmax);K&&(I=I.getMExtent(v),l.mmin=I.vmin,l.mmax=I.vmax);return l}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L,m,x,d,q,J,G,H,T,B,p,t,z,O){function D(C){return null!=C&&C.every(A=>"exceedslimit"!==A.statisticType)}const F=new I.MemCacheStorage(2E6);let P=0,Q=function(){function C(g){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:G.queryCapabilities};this.geometryType=g.geometryType;this.hasM=!!g.hasM;this.hasZ=!!g.hasZ;this.objectIdField=g.objectIdField;this.spatialReference=g.spatialReference;this.definitionExpression=g.definitionExpression;
this.featureStore=g.featureStore;this.aggregateAdapter=g.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=g.timeInfo;g.cacheSpatialQueries&&(this._geometryQueryCache=new I.MemCache(P++ +"$$",F));this.fieldsIndex=new t(g.fields);g.scheduler&&g.priority&&(this._frameTask=g.scheduler.registerTask(g.priority))}var A=C.prototype;A.destroy=function(){this._frameTask=R.removeMaybe(this._frameTask);this.clearCache();R.destroyMaybe(this._geometryQueryCache);
this._changeHandle=R.removeMaybe(this._changeHandle);R.destroyMaybe(this.fieldsIndex)};A.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};A.executeQuery=function(){var g=f._asyncToGenerator(function*(r,W){try{return(yield this._executeQuery(r,{},W)).createQueryResponse()}catch(ja){if(ja!==p.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new H.QueryEngineResult([],r,this)).createQueryResponse()}});return function(r,W){return g.apply(this,arguments)}}();
A.executeQueryForCount=function(){var g=f._asyncToGenerator(function*(r={},W){try{return(yield this._executeQuery(r,{returnGeometry:!1,returnCentroid:!1,outSR:null},W)).createQueryResponseForCount()}catch(ja){if(ja!==p.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return g.apply(this,arguments)}}();A.executeQueryForExtent=function(){var g=f._asyncToGenerator(function*(r,W){const ja=r.outSR;try{const ta=yield this._executeQuery(r,{returnGeometry:!0,returnCentroid:!1,outSR:null},
W),za=ta.size;if(!za)return{count:0,extent:null};const Ea=yield this._getBounds(ta.items,ta.spatialReference,ja||this.spatialReference);return{count:za,extent:Ea}}catch(ta){if(ta===p.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ta;}});return function(r,W){return g.apply(this,arguments)}}();A.executeQueryForIds=function(){var g=f._asyncToGenerator(function*(r,W){return this.executeQueryForIdSet(r,W).then(ja=>Array.from(ja))});return function(r,W){return g.apply(this,arguments)}}();A.executeQueryForIdSet=
function(){var g=f._asyncToGenerator(function*(r,W){try{const ja=yield this._executeQuery(r,{returnGeometry:!0,returnCentroid:!1,outSR:null},W),ta=ja.items,za=new Set;yield this._reschedule(()=>{for(const Ea of ta)za.add(ja.featureAdapter.getObjectId(Ea))},W);return za}catch(ja){if(ja===p.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}});return function(r,W){return g.apply(this,arguments)}}();A.executeQueryForSnapping=function(){var g=f._asyncToGenerator(function*(r,W){const {point:ja,distance:ta,
types:za}=r;if(za===H.SnappingTypes.NONE)return{candidates:[]};const Ea=yield this._reschedule(()=>this._checkQuerySupport(r.query),W),Ha=!x.equals(ja.spatialReference,this.spatialReference);Ha&&(yield J.checkProjectionSupport(ja.spatialReference,this.spatialReference));var Fa="number"===typeof ta?ta:ta.x,Ua="number"===typeof ta?ta:ta.y;Fa={xmin:ja.x-Fa,xmax:ja.x+Fa,ymin:ja.y-Ua,ymax:ja.y+Ua,spatialReference:ja.spatialReference};Fa=Ha?J.project(Fa,this.spatialReference):Fa;if(!Fa)return{candidates:[]};
Ua=(yield m.normalizeCentralMeridian(L.fromJSON(ja),null,{signal:W}))[0];const Oa=(yield m.normalizeCentralMeridian(L.fromJSON(Fa),null,{signal:W}))[0];if(R.isNone(Ua)||R.isNone(Oa))return{candidates:[]};const Sa=new H.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Oa.toJSON())),W),Ea,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Sa),W);yield this._reschedule(()=>this._executeTimeQuery(Sa),W);yield this._reschedule(()=>this._executeAttributesQuery(Sa),
W);W=Ua.toJSON();W=Ha?J.project(W,this.spatialReference):W;return Sa.createSnappingResponse({...r,point:W,distance:Ha?Math.max(Fa.xmax-Fa.xmin,Fa.ymax-Fa.ymin)/2:ta},ja.spatialReference)});return function(r,W){return g.apply(this,arguments)}}();A.executeQueryForLatestObservations=function(){var g=f._asyncToGenerator(function*(r,W){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new aa("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:r,timeInfo:this.timeInfo});
try{const ja=yield this._executeQuery(r,{},W);yield this._reschedule(()=>this._filterLatest(ja),W);return ja.createQueryResponse()}catch(ja){if(ja!==p.QUERY_ENGINE_EMPTY_RESULT)throw ja;return(new H.QueryEngineResult([],r,this)).createQueryResponse()}});return function(r,W){return g.apply(this,arguments)}}();A.executeQueryForSummaryStatistics=function(){var g=f._asyncToGenerator(function*(r={},W,ja){const {field:ta,normalizationField:za,valueExpression:Ea}=W;return(yield this._getQueryEngineResultForStats(r,
{field:ta,normalizationField:za,valueExpression:Ea},ja)).createSummaryStatisticsResponse(W)});return function(){return g.apply(this,arguments)}}();A.executeQueryForUniqueValues=function(){var g=f._asyncToGenerator(function*(r={},W,ja){const {field:ta,field2:za,field3:Ea,valueExpression:Ha}=W;return(yield this._getQueryEngineResultForStats(r,{field:ta,field2:za,field3:Ea,valueExpression:Ha},ja)).createUniqueValuesResponse(W)});return function(){return g.apply(this,arguments)}}();A.executeQueryForClassBreaks=
function(){var g=f._asyncToGenerator(function*(r={},W,ja){const {field:ta,normalizationField:za,valueExpression:Ea}=W;return(yield this._getQueryEngineResultForStats(r,{field:ta,normalizationField:za,valueExpression:Ea},ja)).createClassBreaksResponse(W)});return function(){return g.apply(this,arguments)}}();A.executeQueryForHistogram=function(){var g=f._asyncToGenerator(function*(r={},W,ja){const {field:ta,normalizationField:za,valueExpression:Ea}=W;return(yield this._getQueryEngineResultForStats(r,
{field:ta,normalizationField:za,valueExpression:Ea},ja)).createHistogramResponse(W)});return function(){return g.apply(this,arguments)}}();A.fetchRecomputedExtents=function(){var g=f._asyncToGenerator(function*(r){const [W,ja]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),R.isSome(this._timeExtentPromise)?
this._timeExtentPromise:this._timeExtentPromise=B.getTimeExtent(this.timeInfo,this.featureStore)]);v.throwIfAborted(r);return{fullExtent:W,timeExtent:ja}});return function(r){return g.apply(this,arguments)}}();A._getBounds=function(){var g=f._asyncToGenerator(function*(r,W,ja){const ta=n.set(n.create(),n.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(r,za=>n.expandWithAABB(ta,za));r={xmin:ta[0],ymin:ta[1],xmax:ta[3],ymax:ta[4],spatialReference:p.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(ta[2])&&isFinite(ta[5])&&(r.zmin=ta[2],r.zmax=ta[5]);W=J.project(r,W,ja);W.spatialReference=p.cleanFromGeometryEngine(ja);0===W.xmax-W.xmin&&(ja=l.getMetersPerUnitForSR(W.spatialReference),W.xmin-=ja,W.xmax+=ja);0===W.ymax-W.ymin&&(ja=l.getMetersPerUnitForSR(W.spatialReference),W.ymin-=ja,W.ymax+=ja);this.hasZ&&null!=W.zmin&&null!=W.zmax&&0===W.zmax-W.zmin&&(ja=l.getMetersPerUnitForSR(W.spatialReference),W.zmin-=ja,W.zmax+=ja);return W});return function(r,W,ja){return g.apply(this,
arguments)}}();A._schedule=function(){var g=f._asyncToGenerator(function*(r,W){return R.isSome(this._frameTask)?this._frameTask.schedule(r,W):r(O.noBudget)});return function(r,W){return g.apply(this,arguments)}}();A._reschedule=function(){var g=f._asyncToGenerator(function*(r,W){return R.isSome(this._frameTask)?this._frameTask.reschedule(r,W):r(O.noBudget)});return function(r,W){return g.apply(this,arguments)}}();A._getAllFeaturesQueryEngineResult=function(){var g=f._asyncToGenerator(function*(r){return new H.QueryEngineResult(yield this._getAllFeatures(),
r,this)});return function(r){return g.apply(this,arguments)}}();A._getAllFeatures=function(){var g=f._asyncToGenerator(function*(){var r=this;if(R.isNone(this._allFeaturesPromise)){const ta=[];this._allFeaturesPromise=f._asyncToGenerator(function*(){yield r.featureStore.forEach(za=>ta.push(za))})().then(()=>ta)}const W=this._allFeaturesPromise,ja=yield W;return W===this._allFeaturesPromise?ja.slice():this._getAllFeatures()});return function(){return g.apply(this,arguments)}}();A._executeQuery=function(){var g=
f._asyncToGenerator(function*(r,W,ja){r=S.clone(r);r=yield this._schedule(()=>p.normalizeQuery(r,this.definitionExpression,this.spatialReference),ja);r=yield this._reschedule(()=>this._checkQuerySupport(r),ja);r={...r,...W};const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(r,ja),ja),za=yield this._reschedule(()=>this._executeGeometryQuery(r,ta,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ja);yield this._reschedule(()=>
this._executeTimeQuery(za),ja);yield this._reschedule(()=>this._executeAttributesQuery(za),ja);return za});return function(r,W,ja){return g.apply(this,arguments)}}();A._executeSceneFilterQuery=function(){var g=f._asyncToGenerator(function*(r,W){var ja=this;if(R.isNone(r.sceneFilter))return null;const {outSR:ta,returnGeometry:za,returnCentroid:Ea}=r;var Ha=this.featureStore.featureSpatialReference,Fa=r.sceneFilter.geometry;const Ua=R.isNone(Ha)||x.equals(Ha,Fa.spatialReference)?Fa:J.project(Fa,Ha);
if(!Ua)return null;Ha=za||Ea;Ha=x.isValid(ta)&&!x.equals(this.spatialReference,ta)&&Ha?function(){var Ta=f._asyncToGenerator(function*(jb){return ja._project(jb,ta)});return function(jb){return Ta.apply(this,arguments)}}():Ta=>Ta;const Oa=this.featureAdapter;Fa=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ua)),W);if("disjoint"===r.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Ta=new Set;for(var Sa of Fa)Ta.add(Oa.getObjectId(Sa));const jb=yield this._reschedule(()=>
this._getAllFeatures(),W);Sa=yield this._reschedule(f._asyncToGenerator(function*(){const ib=yield T.getSpatialQueryOperator("esriSpatialRelDisjoint",Ua,ja.geometryType,ja.hasZ,ja.hasM),lb=yield ja._runSpatialFilter(jb,c=>!Ta.has(Oa.getObjectId(c))||ib(Oa.getGeometry(c)),W);return new H.QueryEngineResult(lb,r,ja)}),W);return Ha(Sa)}if(!Fa.length)return new H.QueryEngineResult([],r,this);if(this._canExecuteSinglePass(Ua,r))return Ha(new H.QueryEngineResult(Fa,r,this));const $a=yield T.getSpatialQueryOperator("esriSpatialRelContains",
Ua,this.geometryType,this.hasZ,this.hasM);Sa=yield this._runSpatialFilter(Fa,Ta=>$a(Oa.getGeometry(Ta)),W);return Ha(new H.QueryEngineResult(Sa,r,this))});return function(r,W){return g.apply(this,arguments)}}();A._executeGeometryQuery=function(){var g=f._asyncToGenerator(function*(r,W,ja){var ta=this;if(R.isSome(W)&&0===W.items.length)return W;r=R.isSome(W)?W.query:r;const {geometry:za,outSR:Ea,spatialRel:Ha,returnGeometry:Fa,returnCentroid:Ua}=r;var Oa=this.featureStore.featureSpatialReference;const Sa=
!za||R.isNone(Oa)||x.equals(Oa,za.spatialReference)?za:J.project(za,Oa),$a=Fa||Ua,Ta=x.isValid(Ea)&&!x.equals(this.spatialReference,Ea),jb=this._geometryQueryCache&&R.isNone(W)?Ta&&$a?JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha,outSpatialReference:Ea}):JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha}):null;Oa=jb?this._geometryQueryCache.get(jb):null;if(R.isSome(Oa))return new H.QueryEngineResult(Oa,r,this);Oa=function(){var ea=f._asyncToGenerator(function*(ka){Ta&&
$a&&(yield ta._project(ka,Ea));jb&&ta._geometryQueryCache.put(jb,ka.items,ka.items.length+1);return ka});return function(ka){return ea.apply(this,arguments)}}();if(!Sa)return Oa(R.isSome(W)?W:yield this._getAllFeaturesQueryEngineResult(r));const ib=this.featureAdapter;let lb=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(za)),ja);if("esriSpatialRelDisjoint"===Ha){if(!lb.length)return Oa(R.isSome(W)?W:yield this._getAllFeaturesQueryEngineResult(r));const ea=new Set;for(var c of lb)ea.add(ib.getObjectId(c));
const ka=R.isSome(W)?W.items:yield this._reschedule(()=>this._getAllFeatures(),ja);c=yield this._reschedule(f._asyncToGenerator(function*(){const va=yield T.getSpatialQueryOperator(Ha,Sa,ta.geometryType,ta.hasZ,ta.hasM),y=yield ta._runSpatialFilter(ka,N=>!ea.has(ib.getObjectId(N))||va(ib.getGeometry(N)),ja);return new H.QueryEngineResult(y,r,ta)}),ja);return Oa(c)}if(R.isSome(W)){const ea=new ma.PositionHint;lb=lb.filter(ka=>0<=ma.indexOf(W.items,ka,W.items.length,ea))}if(!lb.length)return Oa=new H.QueryEngineResult([],
r,this),jb&&this._geometryQueryCache.put(jb,Oa.items,1),Oa;if(this._canExecuteSinglePass(Sa,r))return Oa(new H.QueryEngineResult(lb,r,this));const u=yield T.getSpatialQueryOperator(Ha,Sa,this.geometryType,this.hasZ,this.hasM);c=yield this._runSpatialFilter(lb,ea=>u(ib.getGeometry(ea)),ja);return Oa(new H.QueryEngineResult(c,r,this))});return function(r,W,ja){return g.apply(this,arguments)}}();A._executeAggregateIdsQuery=function(g){if(0!==g.items.length&&g.query.aggregateIds&&g.query.aggregateIds.length&&
!R.isNone(this.aggregateAdapter)){var r=new Set;for(const ja of g.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ja).forEach(ta=>r.add(ta));var W=this.featureAdapter.getObjectId;g.items=g.items.filter(ja=>r.has(W(ja)))}};A._executeObjectIdsQuery=function(g){if(0!==g.items.length&&g.query.objectIds&&g.query.objectIds.length){var r=new Set(g.query.objectIds),W=this.featureAdapter.getObjectId;g.items=g.items.filter(ja=>r.has(W(ja)))}};A._executeTimeQuery=function(g){if(0!==g.items.length){var r=
B.getTimeOperator(this.timeInfo,g.query.timeExtent,this.featureAdapter);R.isNone(r)||(g.items=g.items.filter(r))}};A._executeAttributesQuery=function(g){if(0!==g.items.length){var r=q.getWhereClause(g.query.where,this.fieldsIndex);if(r){if(!r.isStandardized)throw new TypeError("Where clause is not standardized");g.items=g.items.filter(W=>r.testFeature(W,this.featureAdapter))}}};A._runSpatialFilter=function(){var g=f._asyncToGenerator(function*(r,W,ja){var ta=this;if(!W)return r;if(R.isNone(this._frameTask))return r.filter(Fa=>
W(Fa));let za=0;const Ea=[],Ha=function(){var Fa=f._asyncToGenerator(function*(Ua){for(;za<r.length;){const Oa=r[za++];W(Oa)&&(Ea.push(Oa),Ua.madeProgress());Ua.done&&(yield ta._reschedule(Sa=>Ha(Sa),ja))}});return function(Ua){return Fa.apply(this,arguments)}}();return this._reschedule(Fa=>Ha(Fa),ja).then(()=>Ea)});return function(r,W,ja){return g.apply(this,arguments)}}();A._filterLatest=function(g){const {trackIdField:r,startTimeField:W,endTimeField:ja}=this.timeInfo,ta=ja||W,za=new Map,Ea=this.featureAdapter.getAttribute;
for(const Ha of g.items){const Fa=Ea(Ha,r),Ua=Ea(Ha,ta),Oa=za.get(Fa);(!Oa||Ua>Ea(Oa,ta))&&za.set(Fa,Ha)}g.items=Array.from(za.values())};A._canExecuteSinglePass=function(g,r){({spatialRel:r}=r);return T.canQueryWithRBush(g)&&("esriSpatialRelEnvelopeIntersects"===r||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r||"esriSpatialRelWithin"===r))};A._project=function(){var g=f._asyncToGenerator(function*(r,W){if(!W||x.equals(this.spatialReference,
W))return r;const ja=this.featureAdapter;W=yield J.projectMany(r.items.map(ta=>p.getGeometry(this.geometryType,this.hasZ,this.hasM,ja.getGeometry(ta))),this.spatialReference,W);r.items=W.map((ta,za)=>ja.cloneWithGeometry(r.items[za],d.convertFromGeometry(ta,this.hasZ,this.hasM)));return r});return function(r,W){return g.apply(this,arguments)}}();A._getQueryBBoxes=function(g){if(T.canQueryWithRBush(g)){if(L.isExtent(g))return[K.fromValues(g.xmin,g.ymin,g.xmax,g.ymax)];if(L.isPolygon(g))return g.rings.map(r=>
K.fromValues(Math.min(r[0][0],r[2][0]),Math.min(r[0][1],r[2][1]),Math.max(r[0][0],r[2][0]),Math.max(r[0][1],r[2][1])))}return[ca.getBoundsXY(K.create(),g)]};A._searchFeatures=function(){var g=f._asyncToGenerator(function*(r){const W=new Set;yield Promise.all(r.map(ja=>this.featureStore.forEachInBounds(ja,ta=>W.add(ta))));r=Array.from(W.values());W.clear();return r});return function(r){return g.apply(this,arguments)}}();A._checkStatisticsSupport=function(){var g=f._asyncToGenerator(function*(r,W){if(0>
(r.distance??0)||null!=r.geometryPrecision||r.multipatchOption||r.pixelSize||r.relationParam||r.text||r.outStatistics||r.groupByFieldsForStatistics||r.having||r.orderByFields)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:r});this._checkAttributesQuerySupport(r);return Promise.all([this._checkStatisticsParamsSupport(W),T.checkSpatialQuerySupport(r,this.geometryType,this.spatialReference),J.checkProjectionSupport(this.spatialReference,r.outSR)]).then(()=>r)});return function(r,
W){return g.apply(this,arguments)}}();A._checkStatisticsParamsSupport=function(){var g=f._asyncToGenerator(function*(r){var W=[];r.valueExpression&&({arcadeUtils:W}=yield z.loadArcade(),W=W.extractFieldNames(r.valueExpression));r.field&&W.push(r.field);r.field2&&W.push(r.field2);r.field3&&W.push(r.field3);r.normalizationField&&W.push(r.normalizationField);if(!W.length)throw new aa("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:r});q.validateFields(this.fieldsIndex,
W,"params contains missing fields")});return function(r){return g.apply(this,arguments)}}();A._checkQuerySupport=function(){var g=f._asyncToGenerator(function*(r){if(0>(r.distance??0)||null!=r.geometryPrecision||r.multipatchOption||r.pixelSize||r.relationParam||r.text)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:r});this._checkAttributesQuerySupport(r);this._checkStatisticsQuerySupport(r);return Promise.all([T.checkSpatialQuerySupport(r,this.geometryType,this.spatialReference),
J.checkProjectionSupport(this.spatialReference,r.outSR)]).then(()=>r)});return function(r){return g.apply(this,arguments)}}();A._checkAttributesQuerySupport=function(g){const {outFields:r,orderByFields:W,returnDistinctValues:ja,outStatistics:ta}=g,za=ta?ta.map(Ea=>Ea.outStatisticFieldName&&Ea.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(W&&0<W.length){const Ea=W.map(Ha=>{const Fa=Ha.toLowerCase();return Fa.includes(" asc")?Fa.split(" asc")[0]:Fa.includes(" desc")?Fa.split(" desc")[0]:
Ha}).filter(Ha=>!za.includes(Ha));q.validateFields(this.fieldsIndex,Ea,"orderByFields contains missing fields")}if(r&&0<r.length)q.validateFields(this.fieldsIndex,r,"outFields contains missing fields");else if(ja)throw new aa("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:g});q.validateWhere(this.fieldsIndex,g.where)};A._checkStatisticsQuerySupport=function(g){const {outStatistics:r,groupByFieldsForStatistics:W,having:ja}=g;var ta=W&&W.length,za=
r&&r.length;if(ja){if(!ta||!za)throw new aa("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:g});q.validateHaving(this.fieldsIndex,ja,r)}if(za&&D(r)){za=r.map(Ea=>Ea.onStatisticField).filter(Boolean);q.validateFields(this.fieldsIndex,za,"onStatisticFields contains missing fields");ta&&q.validateFields(this.fieldsIndex,W,"groupByFieldsForStatistics contains missing fields");for(const Ea of r){const {onStatisticField:Ha,statisticType:Fa}=
Ea;if(("percentile_disc"===Fa||"percentile_cont"===Fa)&&"statisticParameters"in Ea){if({statisticParameters:ta}=Ea,!ta)throw new aa("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ea,query:g});}else if("count"!==Fa&&Ha&&q.hasInvalidFieldType(Ha,this.fieldsIndex))throw new aa("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ea,query:g});}}};A._getQueryEngineResultForStats=function(){var g=f._asyncToGenerator(function*(r,
W,ja){r=S.clone(r);try{r=yield this._schedule(()=>p.normalizeQuery(r,this.definitionExpression,this.spatialReference),ja);r=yield this._reschedule(()=>this._checkStatisticsSupport(r,W),ja);const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(r,ja),ja),za=yield this._reschedule(()=>this._executeGeometryQuery(r,ta,ja),ja);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ja);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ja);yield this._reschedule(()=>this._executeTimeQuery(za),
ja);yield this._reschedule(()=>this._executeAttributesQuery(za),ja);return za}catch(ta){if(ta!==p.QUERY_ENGINE_EMPTY_RESULT)throw ta;return new H.QueryEngineResult([],r,this)}});return function(r,W,ja){return g.apply(this,arguments)}}();f._createClass(C,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return C}();k.Feature=function(C,A=null,g,r,W){this.attributes=C;this.geometry=g;this.centroid=r;this.filterFlags=W;this.groupId=-1;this.displayId=A};k.QueryEngine=Q;
Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(k,f,ma,aa){k.RemoveMode=void 0;(function(I){I[I.ALL=0]="ALL";I[I.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let S=function(){function I(l,n,K){this._namespace=l;this._storage=n;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";K&&(this._storage.registerRemoveFunc(this._namespace,
K),this._removeFunc=!0)}var v=I.prototype;v.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};v.resetHitRate=function(){this._hit=this._miss=0};v.put=function(l,n,K,ca=0){this._storage.put(this._namespace+l,n,K,ca)};v.get=function(l){l=this._storage.get(this._namespace+l);void 0===l?++this._miss:++this._hit;return l};v.pop=function(l){l=this._storage.pop(this._namespace+l);
void 0===l?++this._miss:++this._hit;return l};v.updateSize=function(l,n,K){this._storage.updateSize(this._namespace+l,n,K)};v.clear=function(){this._storage.clear(this._namespace)};v.clearAll=function(){this._storage.clearAll()};v.getStats=function(){return this._storage.getStats()};v.resetStats=function(){this._storage.resetStats()};f._createClass(I,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return I}(),R=function(){function I(l=10485760){this._maxSize=l;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new aa;this._users=new aa}var v=I.prototype;v.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};v.register=function(l){this._users.push(l)};v.deregister=function(l){this._users.removeUnordered(l)};v.registerRemoveFunc=
function(l,n){this._removeFuncs.push([l,n])};v.deregisterRemoveFunc=function(l){this._removeFuncs.filterInPlace(n=>n[0]!==l)};v.put=function(l,n,K,ca){const L=this._db.get(l);L&&(this._size-=L.size,this._db.delete(l),L.entry!==n&&this._notifyRemove(l,L.entry,k.RemoveMode.ALL));K>this._maxSize?this._notifyRemove(l,n,k.RemoveMode.ALL):void 0===n?console.warn("Refusing to cache undefined entry "):!K||0>K?console.warn("Refusing to cache entry with invalid size "+K):(ca=1+Math.max(ca,-3)- -3,this._db.set(l,
{entry:n,size:K,lifetime:ca,lives:ca}),this._size+=K,this._checkSizeLimit())};v.updateSize=function(l,n,K){const ca=this._db.get(l);if(ca&&ca.entry===n){for(this._size-=ca.size;K>this._maxSize;)if(K=this._notifyRemove(l,n,k.RemoveMode.SOME),!(ma.isSome(K)&&0<K)){this._db.delete(l);return}ca.size=K;this._size+=K;this._checkSizeLimit()}};v.pop=function(l){const n=this._db.get(l);if(n)return this._size-=n.size,this._db.delete(l),++this._hit,n.entry;++this._miss};v.get=function(l){const n=this._db.get(l);
if(void 0===n)++this._miss;else return this._db.delete(l),n.lives=n.lifetime,this._db.set(l,n),++this._hit,n.entry};v.getStats=function(){const l={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},K=[];this._db.forEach((m,x)=>{const d=m.lifetime;K[d]=(K[d]||0)+m.size;this._users.forAll(q=>{q=q.namespace;x.startsWith(q)&&(n[q]=(n[q]||0)+m.size)})});const ca={};this._users.forAll(m=>
{const x=m.namespace;!isNaN(m.hitRate)&&0<m.hitRate?(n[x]=n[x]||0,ca[x]=Math.round(100*m.hitRate)+"%"):ca[x]="0%"});var L=Object.keys(n);L.sort((m,x)=>n[x]-n[m]);L.forEach(m=>l[m]=Math.round(n[m]/2**20)+"MB / "+ca[m]);for(L=K.length-1;0<=L;--L){const m=K[L];m&&(l["Priority "+(L+-3-1)]=Math.round(m/this.size*100)+"%")}return l};v.resetStats=function(){this._hit=this._miss=0;this._users.forAll(l=>l.resetHitRate())};v.clear=function(l){this._db.forEach((n,K)=>{K.startsWith(l)&&(this._size-=n.size,this._db.delete(K),
this._notifyRemove(K,n.entry,k.RemoveMode.ALL))})};v.clearAll=function(){this._db.forEach((l,n)=>this._notifyRemove(n,l.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};v._getHitRate=function(){return this._hit/(this._hit+this._miss)};v._notifyRemove=function(l,n,K){let ca;this._removeFuncs.some(L=>l.startsWith(L[0])?(L=L[1](n,K),"number"===typeof L&&(ca=L),!0):!1);return ca};v._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [l,n]of this._db){this._db.delete(l);if(1>=n.lives){this._size-=
n.size;const K=this._notifyRemove(l,n.entry,k.RemoveMode.SOME);ma.isSome(K)&&0<K&&(this._size+=K,n.lives=n.lifetime,n.size=K,this._db.set(l,n))}else--n.lives,this._db.set(l,n);if(this._size<=.9*this.maxSize)break}};f._createClass(I,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(l){this._maxSize=Math.max(l,0);this._checkSizeLimit()}}]);return I}();k.MIN_PRIORITY=-3;k.MemCache=S;k.MemCacheStorage=R;Object.defineProperty(k,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,f,ma){function aa(l,n){return l?I.get(l,n):null}function S(l,n,K,ca=!0){const L=[];for(const m of n)if("*"!==m&&!l.has(m))if(ca){n=R(m);try{const x=aa(n,l);if(!x)throw new f("feature-store:unsupported-query","invalid SQL expression",{where:n});if(!x.isStandardized)throw new f("feature-store:unsupported-query","expression is not standard",
{clause:x});S(l,x.fieldNames,"expression contains missing fields")}catch(x){if((n=x&&x.details)&&(n.clause||n.where))throw x;n&&n.missingFields?L.push(...n.missingFields):L.push(m)}}else L.push(m);if(L.length)throw new f("feature-store:unsupported-query",K,{missingFields:L});}function R(l){return l.split(" as ")[0]}const I=new ma.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
k.getAliasFromFieldName=function(l){return l.split(" as ")[1]};k.getExpressionFromFieldName=R;k.getWhereClause=aa;k.hasInvalidFieldType=function(l,n){return(l=n.get(l))?!v.has(l.type):!1};k.validateFields=S;k.validateHaving=function(l,n,K){if(!n)return!0;const ca=I.get(n,l);if(!ca)throw new f("feature-store:unsupported-query","invalid SQL expression",{having:n});if(!ca.isAggregate)throw new f("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:n});S(l,ca.fieldNames,
"having contains missing fields");if(!ca.getExpressions().every(L=>{const {aggregateType:m,field:x}=L,d=l.get(x)?.name;return K.some(q=>{const {onStatisticField:J,statisticType:G}=q;return l.get(J)?.name===d&&G.toLowerCase().trim()===m})}))throw new f("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:n});return!0};k.validateWhere=function(l,n){if(!n)return!0;const K=I.get(n,l);if(!K)throw new f("feature-store:unsupported-query","invalid SQL expression",
{where:n});if(!K.isStandardized)throw new f("feature-store:unsupported-query","where clause is not standard",{where:n});S(l,K.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,f,ma){let aa=function(){function S(R,I){this._cache=new f(R);this._invalidCache=new f(I)}S.prototype.get=function(R,I){const v=`${I.uid}:${R}`,l=
this._cache.get(v);if(l)return l;if(void 0!==this._invalidCache.get(v))return null;try{const n=ma.WhereClause.create(R,I);this._cache.put(v,n);return n}catch{return this._invalidCache.put(v,null),null}};return S}();k.WhereClauseCache=aa;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function f(aa,S){this._storage=new k.MemCacheStorage;this._storage.maxSize=aa;S&&this._storage.registerRemoveFunc("",
S)}var ma=f.prototype;ma.put=function(aa,S){this._storage.put(aa,S,1,1)};ma.pop=function(aa){return this._storage.pop(aa)};ma.get=function(aa){return this._storage.get(aa)};ma.clear=function(){this._storage.clearAll()};ma.destroy=function(){this._storage.destroy()};return f}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,f,ma,aa,S,R){function I(C,A){C+="";return C.length>=
A?C:Array(A-C.length+1).join("0")+C}function v(C,A,g="0",r="0",W="0",ja="0",ta="",za="0",Ea="0"){return"+"===ta||"-"===ta?(C=`${I(parseInt(C,10),4)}-${I(parseInt(A,10),2)}-${I(parseInt(g,10),2)}`,A="",10>parseFloat(ja)&&(A="0"),r=`${I(parseInt(r,10),2)}:${I(parseInt(W,10),2)}:${A+parseFloat(ja).toString()}`,ta=`${ta}${I(parseInt(za,10),2)}:${I(parseInt(Ea,10),2)}`,new Date(C+"T"+r+ta)):new Date(parseInt(C,10),parseInt(A,10)-1,parseInt(g,10),parseInt(r,10),parseInt(W,10),parseFloat(ja))}function l(C){let A=
B.exec(C);if(null!==A){const [,g,r,W,ja,ta,za]=A;return v(g,r,W,ja,ta,za)}A=p.exec(C);if(null!==A){const [,g,r,W,ja,ta,za,Ea,Ha,Fa]=A;return v(g,r,W,ja,ta,za,Ea,Ha,Fa)}A=t.exec(C);if(null!==A){const [,g,r,W,ja,ta,za,Ea,Ha]=A;return v(g,r,W,ja,ta,"0",za,Ea,Ha)}A=z.exec(C);if(null!==A){const [,g,r,W,ja,ta]=A;return v(g,r,W,ja,ta)}A=T.exec(C);if(null!==A){const [,g,r,W]=A;return v(g,r,W)}throw Error("SQL Invalid Timestamp");}function n(C){const A=T.exec(C);if(null===A)try{return l(C)}catch{throw Error("SQL Invalid Date");
}const [,g,r,W]=A;return new Date(parseInt(g,10),parseInt(r,10)-1,parseInt(W,10))}function K(C){return Array.isArray(C)?C:[C]}function ca(C){return null!==C?!0!==C:null}function L(C,A){return null!=C&&null!=A?!0===C&&!0===A:!1===C||!1===A?!1:null}function m(C,A){return null!=C&&null!=A?!0===C||!0===A:!0===C||!0===A?!0:null}function x(C,A){if(null==C)return null;let g=!1;for(const r of A)if(null==r)g=null;else if(C===r){g=!0;break}return g}function d(C,A,g){if(null==C)return null;let r="",W=P.Normal;
for(let ja=0;ja<A.length;ja++){const ta=A.charAt(ja);switch(W){case P.Normal:ta===g?W=P.Escaped:r="-[]/{}()*+?.\\^$|".includes(ta)?r+("\\"+ta):"%"===ta?r+".*":"_"===ta?r+".":r+ta;break;case P.Escaped:r="-[]/{}()*+?.\\^$|".includes(ta)?r+("\\"+ta):r+ta,W=P.Normal}}return(new RegExp("^"+r+"$","m")).test(C)}function q(C){return C instanceof Date?C.valueOf():C}function J(C,A,g){if(null==A||null==g)return null;A=q(A);g=q(g);switch(C){case "\x3c\x3e":return A!==g;case "\x3d":return A===g;case "\x3e":return A>
g;case "\x3c":return A<g;case "\x3e\x3d":return A>=g;case "\x3c\x3d":return A<=g}}function G(C,A,g){if("||"===C)return S.evaluateFunction("concat",[A,g]);if(A instanceof S.SqlInterval)if(g instanceof Date)switch(C){case "+":return new Date(A.valueInMilliseconds()+g.getTime());case "-":return A.valueInMilliseconds()-g.getTime();case "*":return A.valueInMilliseconds()*g.getTime();case "/":return A.valueInMilliseconds()/g.getTime()}else if(g instanceof S.SqlInterval)switch(C){case "+":return S.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+
g.valueInMilliseconds());case "-":return S.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-g.valueInMilliseconds());case "*":return A.valueInMilliseconds()*g.valueInMilliseconds();case "/":return A.valueInMilliseconds()/g.valueInMilliseconds()}else A=A.valueInMilliseconds();else if(g instanceof S.SqlInterval)if(A instanceof Date)switch(C){case "+":return new Date(g.valueInMilliseconds()+A.getTime());case "-":return new Date(A.getTime()-g.valueInMilliseconds());case "*":return A.getTime()*
g.valueInMilliseconds();case "/":return A.getTime()/g.valueInMilliseconds()}else g=g.valueInMilliseconds();else if(A instanceof Date&&"number"===typeof g)switch(g*=864E5,A=A.getTime(),C){case "+":return new Date(A+g);case "-":return new Date(A-g);case "*":return new Date(A*g);case "/":return new Date(A/g)}else if(g instanceof Date&&"number"===typeof A)switch(A*=864E5,g=g.getTime(),C){case "+":return new Date(A+g);case "-":return new Date(A-g);case "*":return new Date(A*g);case "/":return new Date(A/
g)}switch(C){case "+":return A+g;case "-":return A-g;case "*":return A*g;case "/":return A/g}}function H(C,A,g,r){C=r.getAttribute(C,A);return null!=C&&1===g[A]?new Date(C):C}const T=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
O=new Set(["current_timestamp","current_date","current_time"]);let D=function(){function C(){}C.makeBool=function(A){return!0===A};C.featureValue=function(A,g,r,W){return H(A,g,r,W)};C.equalsNull=function(A){return null===A};C.applyLike=function(A,g,r){return d(A,g,r)};C.ensureArray=function(A){return K(A)};C.applyIn=function(A,g){return x(A,g)};C.currentDate=function(){const A=new Date;A.setHours(0,0,0,0);return A};C.makeSqlInterval=function(A,g,r){return S.SqlInterval.createFromValueAndQualifer(A,
g,r)};C.convertInterval=function(A){return A instanceof S.SqlInterval?A.valueInMilliseconds():A};C.currentTimestamp=function(){return new Date};C.compare=function(A,g,r){return J(A,g,r)};C.calculate=function(A,g,r){return G(A,g,r)};C.makeComparable=function(A){return q(A)};C.evaluateFunction=function(A,g){return S.evaluateFunction(A,g)};C.lookup=function(A,g){A=g[A];return void 0===A?null:A};C.between=function(A,g){return null==A||null==g[0]||null==g[1]?null:A>=g[0]&&A<=g[1]};C.notbetween=function(A,
g){return null==A||null==g[0]||null==g[1]?null:A<g[0]||A>g[1]};C.ternaryNot=function(A){return ca(A)};C.ternaryAnd=function(A,g){return L(A,g)};C.ternaryOr=function(A,g){return m(A,g)};return C}(),F=function(){function C(g,r){this.fieldsIndex=r;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=R.WhereGrammar.parse(g);const {isStandardized:W,isAggregate:ja,referencedFieldNames:ta}=this._extractExpressionInfo(r);this._referencedFieldNames=ta;this.isStandardized=W;this.isAggregate=
ja}C.create=function(g,r){return new C(g,r)};var A=C.prototype;A.testSet=function(g,r=Q){const W={};for(const ja of this.fieldNames)W[ja]=g.map(ta=>r.getAttribute(ta,ja));return!!this._evaluateNode(this.parseTree,{attributes:W},Q)};A.calculateValue=function(g,r=Q){g=this._evaluateNode(this.parseTree,g,r);return g instanceof S.SqlInterval?g.valueInMilliseconds()/864E5:g};A.calculateValueCompiled=function(g,r=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(g,this.parameters,
r,this._datefields);if(ma("esri-csp-restrictions"))return this.calculateValue(g,r);this._compileMe();return this.parseTree._compiledVersion(g,this.parameters,r,this._datefields)};A.testFeature=function(g,r=Q){return!!this._evaluateNode(this.parseTree,g,r)};A.testFeatureCompiled=function(g,r=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(g,this.parameters,r,this._datefields);if(ma("esri-csp-restrictions"))return this.testFeature(g,r);this._compileMe();return!!this.parseTree._compiledVersion(g,
this.parameters,r,this._datefields)};A.getFunctions=function(){const g=new Set;this._visitAll(this.parseTree,r=>{"function"===r.type&&g.add(r.name.toLowerCase())});return Array.from(g)};A.getExpressions=function(){const g=new Map;this._visitAll(this.parseTree,r=>{if("function"===r.type){const W=r.name.toLowerCase();r=r.args.value[0];if("column-reference"===r.type){r=r.column;const ja=`${W}-${r}`;g.has(ja)||g.set(ja,{aggregateType:W,field:r})}}});return[...g.values()]};A.getVariables=function(){const g=
new Set;this._visitAll(this.parseTree,r=>{"parameter"===r.type&&g.add(r.value.toLowerCase())});return Array.from(g)};A._compileMe=function(){const g="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",g)).bind(D)};A._extractExpressionInfo=function(g){const r=[],W=new Set;let ja=!0,ta=!0;this._visitAll(this.parseTree,za=>{switch(za.type){case "column-reference":const Ea=g?.get(za.column);
let Ha,Fa;Ea?Ha=Fa=Ea.name??"":(Fa=za.column,Ha=Fa.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);W.has(Ha)||(W.add(Ha),r.push(Fa));za.column=Fa;break;case "function":const {name:Ua,args:Oa}=za;za=Oa.value.length;ja&&(ja=S.isStandardized(Ua,za));ta&&(ta=aa.isAggregate(Ua,za))}});return{referencedFieldNames:Array.from(r),isStandardized:ja,isAggregate:ta}};A._visitAll=function(g,r){if(null!=g)switch(r(g),g.type){case "when-clause":this._visitAll(g.operand,
r);this._visitAll(g.value,r);break;case "case-expression":for(const W of g.clauses)this._visitAll(W,r);"simple"===g.format&&this._visitAll(g.operand,r);null!==g.else&&this._visitAll(g.else,r);break;case "expression-list":for(const W of g.value)this._visitAll(W,r);break;case "unary-expression":this._visitAll(g.expr,r);break;case "binary-expression":this._visitAll(g.left,r);this._visitAll(g.right,r);break;case "function":this._visitAll(g.args,r)}};A.evaluateNodeToJavaScript=function(g){switch(g.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(g.value)+", "+JSON.stringify(g.qualifier)+","+JSON.stringify(g.op)+")";case "case-expression":var r="";if("simple"===g.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(g.operand)+")";r="( ";for(let ja=0;ja<g.clauses.length;ja++)r+=" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(g.clauses[ja].operand)+")) ? ("+this.evaluateNodeToJavaScript(g.clauses[ja].value)+") : "}else for(r="( ",W=0;W<g.clauses.length;W++)r+=" this.makeBool("+
this.evaluateNodeToJavaScript(g.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(g.clauses[W].value)+") : ";r=null!==g.else?r+this.evaluateNodeToJavaScript(g.else):r+"null";return r+" )";case "parameter":return"this.lookup("+JSON.stringify(g.value.toLowerCase())+",lookups)";case "expression-list":r="[";for(W of g.value)"["!==r&&(r+=","),r+=this.evaluateNodeToJavaScript(W);return r+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(g.expr)+")";
case "binary-expression":switch(g.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")";case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")"}throw Error("Not Supported Operator "+g.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(g.value);case "date":return"(new Date("+n(g.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+l(g.value).getTime().toString()+"))";case "current-time":return"date"===g.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(g.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(g.name)+","+this.evaluateNodeToJavaScript(g.args)+")"}throw Error("Unsupported sql syntax "+g.type);};A._evaluateNode=function(g,r,W){switch(g.type){case "interval":return r=
this._evaluateNode(g.value,r,W),S.SqlInterval.createFromValueAndQualifer(r,g.qualifier,g.op);case "case-expression":if("simple"===g.format){var ja=q(this._evaluateNode(g.operand,r,W));for(var ta=0;ta<g.clauses.length;ta++)if(ja===q(this._evaluateNode(g.clauses[ta].operand,r,W)))return this._evaluateNode(g.clauses[ta].value,r,W)}else for(ja=0;ja<g.clauses.length;ja++)if(!0===this._evaluateNode(g.clauses[ja].operand,r,W))return this._evaluateNode(g.clauses[ja].value,r,W);return null!==g.else?this._evaluateNode(g.else,
r,W):null;case "parameter":return this.parameters[g.value.toLowerCase()];case "expression-list":ja=[];for(ta of g.value)ja.push(this._evaluateNode(ta,r,W));return ja;case "unary-expression":return ca(this._evaluateNode(g.expr,r,W));case "binary-expression":switch(g.operator){case "AND":return L(this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,r,W));case "OR":return m(this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,r,W));case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(g.left,r,W);case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(g.left,r,W);case "IN":return ja=K(this._evaluateNode(g.right,r,W)),x(this._evaluateNode(g.left,r,W),ja);case "NOT IN":return ja=K(this._evaluateNode(g.right,r,W)),ca(x(this._evaluateNode(g.left,r,W),ja));case "BETWEEN":return ja=this._evaluateNode(g.left,r,W),g=this._evaluateNode(g.right,r,W),null==ja||null==g[0]||null==g[1]?null:ja>=q(g[0])&&ja<=
q(g[1]);case "NOTBETWEEN":return ja=this._evaluateNode(g.left,r,W),g=this._evaluateNode(g.right,r,W),null==ja||null==g[0]||null==g[1]?null:ja<q(g[0])||ja>q(g[1]);case "LIKE":return d(this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,r,W),g.escape);case "NOT LIKE":return ca(d(this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,r,W),g.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return J(g.operator,this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,
r,W));case "-":case "+":case "*":case "/":case "||":return G(g.operator,this._evaluateNode(g.left,r,W),this._evaluateNode(g.right,r,W))}case "null":case "boolean":case "string":case "number":return g.value;case "date":return n(g.value);case "timestamp":return l(g.value);case "current-time":return r=new Date,"date"===g.mode&&r.setHours(0,0,0,0),r;case "column-reference":return H(r,g.column,this._datefields,W);case "data-type":return g.value;case "function":return r=this._evaluateNode(g.args,r,W),this.isAggregate?
aa.aggregateFunction(g.name,r):S.evaluateFunction(g.name,r)}throw Error("Unsupported sql syntax "+g.type);};f._createClass(C,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,g=>{"current-time"===g.type?this._hasDateFunctions=!0:"function"===g.type&&(this._hasDateFunctions=this._hasDateFunctions||O.has(g.name.toLowerCase()))});
return this._hasDateFunctions}}]);return C}();var P;(function(C){C[C.Normal=0]="Normal";C[C.Escaped=1]="Escaped"})(P||(P={}));const Q={getAttribute(C,A){return(C&&"object"===typeof C.attributes?C.attributes:C)[A]}};k.WhereClause=F;k.defaultAttributeAdapter=Q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function f(S){let R=0;for(let I=0;I<S.length;I++)R+=S[I];return R/S.length}function ma(S){const R=f(S),
I=S.length;let v=0;for(const l of S)v+=(l-R)**2;return 1<I?v/(I-1):0}const aa={min:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:Math.min.apply(Math,S[0])},max:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:Math.max.apply(Math,S[0])},avg:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:f(S[0])},sum:{minParams:1,maxParams:1,evaluate:S=>{if(null==S[0])S=null;else{S=S[0];let R=0;for(let I=0;I<S.length;I++)R+=S[I];S=R}return S}},stddev:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?
null:Math.sqrt(ma(S[0]))},count:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:S[0].length},var:{minParams:1,maxParams:1,evaluate:S=>null==S[0]?null:ma(S[0])}};k.aggregateFunction=function(S,R){const I=aa[S.toLowerCase()];if(null==I)throw Error("Function Not Recognised");if(R.length<I.minParams||R.length>I.maxParams)throw Error(`Invalid Parameter count for call to ${S.toUpperCase()}`);return I.evaluate(R)};k.isAggregate=function(S,R){S=aa[S.toLowerCase()];return null!=S&&R>=S.minParams&&R<=
S.maxParams};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(k,f,ma,aa){function S(l){l=new Date(l.getTime());l.setHours(0,0,0,0);return l}function R(l,n){if(l instanceof Date)return n?S(l):l;if("string"===typeof l||l instanceof String)if(l=aa.DateTime.fromSQL(l),l.isValid)return n?S(l.toJSDate()):l.toJSDate();throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
}let I=function(){function l(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}l._fixDefaults=function(n){if(null!==n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};l._parseSecondsComponent=function(n,K){K.includes(".")?(K=K.split("."),n.second=parseFloat(K[0]),n.millis=parseInt(K[1],10)):n.second=parseFloat(K)};l.createFromMilliseconds=function(n){const K=new l;K.second=n/1E3;return K};l.createFromValueAndQualifer=
function(n,K,ca){let L=null;const m=new l;m.op="-"===ca?"-":"+";if("interval-period"===K.type){l._fixDefaults(K);ca=RegExp("^[0-9]{1,}$");if("year"===K.period||"month"===K.period)throw Error("Year-Month Intervals not supported");if("second"===K.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))l._parseSecondsComponent(m,n);else throw Error("Illegal Interval");else if(ca.test(n))m[K.period]=parseFloat(n);else throw Error("Illegal Interval");}else{l._fixDefaults(K.start);l._fixDefaults(K.end);if("year"===
K.start.period||"month"===K.start.period)throw Error("Year-Month Intervals not supported");if("year"===K.end.period||"month"===K.end.period)throw Error("Year-Month Intervals not supported");switch(K.start.period){case "day":switch(K.end.period){case "hour":L=RegExp("^[0-9]{1,} [0-9]{1,}$");if(L.test(n))m[K.start.period]=parseFloat(n.split(" ")[0]),m[K.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":L=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(L.test(n))m[K.start.period]=
parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":L=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(L.test(n))m[K.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]),l._parseSecondsComponent(m,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(K.end.period){case "minute":L=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(L.test(n))m.hour=parseFloat(n.split(":")[0]),m.minute=parseFloat(n.split(":")[1]);else throw Error("Illegal Interval");break;case "second":L=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(L.test(n))n=n.split(":"),m.hour=parseFloat(n[0]),m.minute=parseFloat(n[1]),l._parseSecondsComponent(m,n[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(K.end.period){case "second":L=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(L.test(n))n=n.split(":"),m.minute=parseFloat(n[0]),l._parseSecondsComponent(m,n[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return m};l.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return l}();const v={extract:{minParams:2,
maxParams:2,evaluate:([l,n])=>{if(null==n)return null;if(n instanceof Date)switch(l.toUpperCase()){case "SECOND":return n.getSeconds();case "MINUTE":return n.getMinutes();case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(2===l.length){const [n,K]=l;return null==n||null==K?null:n.toString().substring(K-1)}if(3===
l.length){const [n,K,ca]=l;return null==n||null==K||null==ca?null:0>=ca?"":n.toString().substring(K-1,K+ca-1)}}},position:{minParams:2,maxParams:2,evaluate:([l,n])=>null==l||null==n?null:n.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{var n=3===l.length,K=n?l[1]:" ";n=n?l[2]:l[1];if(null==K||null==n)return null;K=`(${ma.escapeRegExpString(K)})`;switch(l[0]){case "BOTH":return n.replace(new RegExp(`^${K}*|${K}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${K}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${K}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?
null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cos(l[0])},tan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:0<l[0]?1:0>l[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:l=>null==l[0]||null==l[1]?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>null==l[0]||null==l[1]?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const n=l[0];l=2===l.length?10**l[1]:1;return null==n?null:Math.round(n*l)/l}},truncate:{minParams:1,maxParams:2,evaluate:l=>null==l[0]?null:1===l.length?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>"string"===typeof l[0]||l[0]instanceof String?l[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:l=>{let n="";for(let K=0;K<l.length;K++){if(null==l[K])return null;n+=l[K].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:l[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:l=>{for(const n of l)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.cosh(l[0])},
sinh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.sinh(l[0])},tanh:{minParams:1,maxParams:1,evaluate:l=>null==l[0]?null:Math.tanh(l[0])},nullif:{minParams:2,maxParams:2,evaluate:l=>{const n=l[0];l=l[1];return(n instanceof Date?n.valueOf():n)===(l instanceof Date?l.valueOf():l)?null:n}},cast:{minParams:2,maxParams:2,evaluate:l=>{var n=l[0];l=l[1];if(null===n)return null;switch(l.type){case "integer":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;
case "smallint":n=parseInt(n,10);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(32767<n||-32767>n)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "float":case "real":n=parseFloat(n);if(isNaN(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;case "date":return R(n,!0);case "timestamp":return R(n,!1);case "varchar":n=n.toString();if(n.length>l.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return n;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};k.SqlInterval=I;k.evaluateFunction=function(l,n){const K=v[l.toLowerCase()];if(null==K)throw Error("Function Not Recognised");if(n.length<K.minParams||n.length>K.maxParams)throw Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return K.evaluate(n)};k.isStandardized=function(l,n){l=v[l.toLowerCase()];return null!=l&&n>=l.minParams&&n<=l.maxParams};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(k,f,ma){k.SqlErrorCodes=void 0;(function(v){v.InvalidFunctionParameters="InvalidFunctionParameters";v.UnsupportedSqlFunction="UnsupportedSqlFunction";v.UnsupportedOperator="UnsupportedOperator";v.UnsupportedSyntax="UnsupportedSyntax";v.UnsupportedIsRhs="UnsupportedIsRhs";v.UnsupportedIsLhs="UnsupportedIsLhs";v.InvalidDataType="InvalidDataType";v.CannotCastValue="CannotCastValue";v.MissingStatisticParameters="MissingStatisticParameters"})(k.SqlErrorCodes||
(k.SqlErrorCodes={}));const aa={[k.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[k.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[k.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[k.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[k.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[k.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[k.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[k.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[k.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let S=function(v){function l(n,K){n=v.call(this,ma.doSubstitutions(aa[n],K))||this;n.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),l);return n}f._inheritsLoose(l,v);return l}(f._wrapNativeSuper(Error));
k.FeatureSetErrorCodes=void 0;(function(v){v.NeverReach="NeverReach";v.NotImplemented="NotImplemented";v.Cancelled="Cancelled";v.InvalidStatResponse="InvalidStatResponse";v.InvalidRequest="InvalidRequest";v.RequestFailed="RequestFailed";v.MissingFeatures="MissingFeatures";v.AggregationFieldNotFound="AggregationFieldNotFound";v.DataElementsNotFound="DataElementsNotFound"})(k.FeatureSetErrorCodes||(k.FeatureSetErrorCodes={}));const R={[k.FeatureSetErrorCodes.Cancelled]:"Cancelled",[k.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[k.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[k.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[k.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[k.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[k.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[k.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[k.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let I=function(v){function l(n,
K){n=v.call(this,ma.doSubstitutions(R[n],K))||this;n.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(n),l);return n}f._inheritsLoose(l,v);return l}(f._wrapNativeSuper(Error));k.FeatureSetError=I;k.FeatureSetErrorMessages=R;k.SqlError=S;k.SqlErrorMessages=aa;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(k,f){function ma(L){return L&&L.loc?`Line : ${L.loc.start?.line}, ${L.loc.start?.column}: `:""}function aa(L,m){try{if(!m)return L;for(const x in m){let d=m[x];d||(d="");L=L.replace("{"+x+"}",m[x])}}catch(x){}return L}k.ExecutionErrorCodes=void 0;(function(L){L.AsyncNotEnabled="AsyncNotEnabled";L.ModulesNotSupported="ModulesNotSupported";L.CircularModules="CircularModules";L.NeverReach="NeverReach";L.UnsupportedHashType="UnsupportedHashType";L.InvalidParameter="InvalidParameter";L.UnexpectedToken=
"UnexpectedToken";L.Unrecognised="Unrecognised";L.UnrecognisedType="UnrecognisedType";L.MaximumCallDepth="MaximumCallDepth";L.BooleanConditionRequired="BooleanConditionRequired";L.TypeNotAllowedInFeature="TypeNotAllowedInFeature";L.KeyMustBeString="KeyMustBeString";L.WrongNumberOfParameters="WrongNumberOfParameters";L.CallNonFunction="CallNonFunction";L.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";L.NoFunctionInDictionary="NoFunctionInDictionary";L.NoFunctionInArray="NoFunctionInArray";
L.AssignModuleFunction="AssignModuleFunction";L.LogicExpressionOrAnd="LogicExpressionOrAnd";L.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";L.FuncionNotFound="FunctionNotFound";L.InvalidMemberAccessKey="InvalidMemberAccessKey";L.UnsupportedUnaryOperator="UnsupportUnaryOperator";L.InvalidIdentifier="InvalidIdentifier";L.MemberOfNull="MemberOfNull";L.UnsupportedOperator="UnsupportedOperator";L.Cancelled="Cancelled";L.ModuleAccessorMustBeString="ModuleAccessorMustBeString";L.ModuleExportNotFound=
"ModuleExportNotFound";L.Immutable="Immutable";L.OutOfBounds="OutOfBounds";L.IllegalResult="IllegalResult";L.FieldNotFound="FieldNotFound";L.PortalRequired="PortalRequired";L.LogicError="LogicError";L.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";L.KeyAccessorMustBeString="KeyAccessorMustBeString";L.WrongSpatialReference="WrongSpatialReference"})(k.ExecutionErrorCodes||(k.ExecutionErrorCodes={}));const S={[k.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[k.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[k.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[k.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[k.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[k.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[k.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[k.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[k.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[k.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[k.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[k.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[k.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[k.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[k.ExecutionErrorCodes.PortalRequired]:"Portal is required",[k.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[k.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[k.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[k.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[k.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[k.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[k.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[k.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[k.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[k.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[k.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[k.ExecutionErrorCodes.Immutable]:"Object is immutable",[k.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[k.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[k.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[k.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[k.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[k.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[k.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[k.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[k.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[k.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[k.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[k.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[k.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[k.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let R=function(L){function m(...x){return L.call(this,...x)||this}f._inheritsLoose(m,L);return m}(f._wrapNativeSuper(Error)),I=function(L){function m(x,d){x=
L.call(this,ma(d)+x.message,{cause:x})||this;x.loc=null;Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(x),m);d&&d.loc&&(x.loc=d.loc);return x}f._inheritsLoose(m,L);return m}(R),v=function(L){function m(x,d,q,J){x=L.call(this,"Execution error - "+ma(q)+aa(S[d],J))||this;x.loc=null;x.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(x),m);q&&q.loc&&(x.loc=q.loc);return x}f._inheritsLoose(m,L);return m}(f._wrapNativeSuper(Error)),
l=function(L){function m(x,d,q,J){x=L.call(this,"Compilation error - "+ma(q)+aa(S[d],J))||this;x.loc=null;x.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(x),m);q&&q.loc&&(x.loc=q.loc);return x}f._inheritsLoose(m,L);return m}(f._wrapNativeSuper(Error)),n=function(L){function m(){var x=L.call(this,"Uncompilable code structures")||this;x.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&
Error.captureStackTrace(f._assertThisInitialized(x),m);return x}f._inheritsLoose(m,L);return m}(f._wrapNativeSuper(Error));k.ModuleErrorCodes=void 0;(function(L){L.UnrecognisedUri="UnrecognisedUri";L.UnsupportedUriProtocol="UnsupportedUriProtocol"})(k.ModuleErrorCodes||(k.ModuleErrorCodes={}));const K={[k.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[k.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let ca=function(L){function m(x,d){x=L.call(this,aa(K[x],d))||
this;x.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(f._assertThisInitialized(x),m);return x}f._inheritsLoose(m,L);return m}(f._wrapNativeSuper(Error));k.ArcadeCompilationError=l;k.ArcadeExecutionError=v;k.ArcadeUncompilableError=n;k.ErrorWithCause=R;k.ExecutionErrorMessages=S;k.LocatableArcadeExecutionError=I;k.ModuleError=ca;k.ModuleErrorMessages=K;k.doSubstitutions=aa;k.ensureArcadeExecutionError=function(L,m,x){return"esri.arcade.arcadeexecutionerror"===
x.declaredRootClass||"esri.arcade.arcadecompilationerror"===x.declaredRootClass?null===x.loc&&m&&m.loc?new I(x,{cause:x}):x:m&&m.loc?new I(x,{cause:x}):x};k.parsingValidationMessage=function(L,m,x){return"Parsing error - "+ma(L)+aa(S[m],x)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(k){function f(a,h={}){const M=JSON.stringify([a,h]);let fa=gd[M];fa||(fa=new Intl.ListFormat(a,h),gd[M]=fa);return fa}function ma(a,h=
{}){const M=JSON.stringify([a,h]);let fa=Hc[M];fa||(fa=new Intl.DateTimeFormat(a,h),Hc[M]=fa);return fa}function aa(a,h={}){const M=JSON.stringify([a,h]);let fa=Ic[M];fa||(fa=new Intl.NumberFormat(a,h),Ic[M]=fa);return fa}function S(a,h={}){const {base:M,...fa}=h,la=JSON.stringify([a,fa]);let sa=Jc[la];sa||(sa=new Intl.RelativeTimeFormat(a,h),Jc[la]=sa);return sa}function R(a){const h=[];for(let M=1;12>=M;M++){const fa=Za.utc(2016,M,1);h.push(a(fa))}return h}function I(a){const h=[];for(let M=1;7>=
M;M++){const fa=Za.utc(2016,11,13+M);h.push(a(fa))}return h}function v(a,h,M,fa,la){a=a.listingMode(M);return"error"===a?null:"en"===a?fa(h):la(h)}function l(a,h){if(n(a)||null===a)return h;if(a instanceof ic)return a;if("string"===typeof a){const M=a.toLowerCase();return"default"===M?h:"local"===M||"system"===M?nc.instance:"utc"===M||"gmt"===M?Eb.utcInstance:Eb.parseSpecifier(M)||Tb.create(a)}return K(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new hd(a)}function n(a){return"undefined"===
typeof a}function K(a){return"number"===typeof a}function ca(a){return"number"===typeof a&&0===a%1}function L(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function m(a,h,M){if(0!==a.length)return a.reduce((fa,la)=>{la=[h(la),la];return fa?M(fa[0],la[0])===fa[0]?fa:la:la},null)[1]}function x(a,h){return h.reduce((M,fa)=>{M[fa]=a[fa];return M},{})}function d(a,h){return Object.prototype.hasOwnProperty.call(a,h)}function q(a,h,M){return ca(a)&&a>=h&&a<=M}function J(a,
h=2){return 0>a?"-"+(""+-a).padStart(h,"0"):(""+a).padStart(h,"0")}function G(a){if(!n(a)&&null!==a&&""!==a)return parseInt(a,10)}function H(a){if(!n(a)&&null!==a&&""!==a)return parseFloat(a)}function T(a){if(!n(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function B(a,h,M=!1){h=10**h;return(M?Math.trunc:Math.round)(a*h)/h}function p(a){return 0===a%4&&(0!==a%100||0===a%400)}function t(a,h){var M=h-1;M=M-12*Math.floor(M/12)+1;return 2===M?p(a+(h-M)/12)?29:28:[31,null,31,30,31,
30,31,31,30,31,30,31][M-1]}function z(a){let h=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(h=new Date(h),h.setUTCFullYear(h.getUTCFullYear()-1900));return+h}function O(a){var h=a-1;h=(h+Math.floor(h/4)-Math.floor(h/100)+Math.floor(h/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===h?53:52}function D(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function F(a,h,M,fa=null){a=new Date(a);const la={hourCycle:"h23",
year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};fa&&(la.timeZone=fa);return(h=(new Intl.DateTimeFormat(M,{timeZoneName:h,...la})).formatToParts(a).find(sa=>"timezonename"===sa.type.toLowerCase()))?h.value:null}function P(a,h){a=parseInt(a,10);Number.isNaN(a)&&(a=0);h=parseInt(h,10)||0;h=0>a||Object.is(a,-0)?-h:h;return 60*a+h}function Q(a){const h=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(h))throw new qa(`Invalid unit value ${a}`);return h}function C(a,
h){const M={};for(const fa in a)if(d(a,fa)){const la=a[fa];void 0!==la&&null!==la&&(M[h(fa)]=Q(la))}return M}function A(a,h){const M=Math.trunc(Math.abs(a/60)),fa=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(h){case "short":return`${a}${J(M,2)}:${J(fa,2)}`;case "narrow":return`${a}${M}${0<fa?`:${fa}`:""}`;case "techie":return`${a}${J(M,2)}${J(fa,2)}`;default:throw new RangeError(`Value format ${h} is out of range for property format`);}}function g(a){return x(a,["hour","minute","second","millisecond"])}
function r(a){switch(a){case "narrow":return[...id];case "short":return[...jd];case "long":return[...kd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function W(a){switch(a){case "narrow":return[...oe];case "short":return[...ld];case "long":return[...md];case "numeric":return"1234567".split("");default:return null}}function ja(a){switch(a){case "narrow":return[...Kc];case "short":return[...pe];
case "long":return[...qe];default:return null}}function ta(a,h,M="always",fa=!1){const la={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var sa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===M&&sa)switch(M="days"===a,h){case 1:return M?"tomorrow":`next ${la[a][0]}`;case -1:return M?"yesterday":`last ${la[a][0]}`;case 0:return M?"today":`this ${la[a][0]}`}M=
Object.is(h,-0)||0>h;h=Math.abs(h);sa=1===h;const Aa=la[a];a=fa?sa?Aa[1]:Aa[2]||Aa[1]:sa?la[a][0]:a;return M?`${h} ${a} ago`:`in ${h} ${a}`}function za(a,h){let M="";for(const fa of a)M=fa.literal?M+fa.val:M+h(fa.val);return M}function Ea(...a){a=a.reduce((h,M)=>h+M.source,"");return RegExp(`^${a}$`)}function Ha(...a){return h=>a.reduce(([M,fa,la],sa)=>{const [Aa,Ia,Ma]=sa(h,la);return[{...M,...Aa},Ia||fa,Ma]},[{},null,1]).slice(0,2)}function Fa(a,...h){if(null==a)return[null,null];for(const [M,fa]of h)if(h=
M.exec(a))return fa(h);return[null,null]}function Ua(...a){return(h,M)=>{const fa={};let la;for(la=0;la<a.length;la++)fa[a[la]]=G(h[M+la]);return[fa,null,M+la]}}function Oa(a,h,M){a=a[h];return n(a)?M:G(a)}function Sa(a,h){return[{hours:Oa(a,h,0),minutes:Oa(a,h+1,0),seconds:Oa(a,h+2,0),milliseconds:T(a[h+3])},null,h+4]}function $a(a,h){const M=!a[h]&&!a[h+1];a=P(a[h+1],a[h+2]);return[{},M?null:Eb.instance(a),h+3]}function Ta(a,h){return[{},a[h]?Tb.create(a[h]):null,h+1]}function jb(a){const [h,M,
fa,la,sa,Aa,Ia,Ma,e]=a,Wa="-"===h[0];a=Ma&&"-"===Ma[0];const Xa=(bb,ua=!1)=>void 0!==bb&&(ua||bb&&Wa)?-bb:bb;return[{years:Xa(H(M)),months:Xa(H(fa)),weeks:Xa(H(la)),days:Xa(H(sa)),hours:Xa(H(Aa)),minutes:Xa(H(Ia)),seconds:Xa(H(Ma),"-0"===Ma),milliseconds:Xa(T(e),a)}]}function ib(a,h,M,fa,la,sa,Aa){h={year:2===h.length?D(G(h)):G(h),month:jd.indexOf(M)+1,day:G(fa),hour:G(la),minute:G(sa)};Aa&&(h.second=G(Aa));a&&(h.weekday=3<a.length?md.indexOf(a)+1:ld.indexOf(a)+1);return h}function lb(a){const [,
h,M,fa,la,sa,Aa,Ia,Ma,e,Wa,Xa]=a;a=ib(h,la,fa,M,sa,Aa,Ia);let bb;bb=Ma?re[Ma]:e?0:P(Wa,Xa);return[a,new Eb(bb)]}function c(a){const [,h,M,fa,la,sa,Aa,Ia]=a;return[ib(h,la,fa,M,sa,Aa,Ia),Eb.utcInstance]}function u(a){const [,h,M,fa,la,sa,Aa,Ia]=a;return[ib(h,Ia,M,fa,la,sa,Aa),Eb.utcInstance]}function ea(a,h,M=!1){a={values:M?h.values:{...a.values,...(h.values||{})},loc:a.loc.clone(h.loc),conversionAccuracy:h.conversionAccuracy||a.conversionAccuracy,matrix:h.matrix||a.matrix};return new eb(a)}function ka(a,
h,M,fa,la){a=a[la][M];var sa=h[M]/a;sa=Math.sign(sa)!==Math.sign(fa[la])&&0!==fa[la]&&1>=Math.abs(sa)?0>sa?Math.floor(sa):Math.ceil(sa):Math.trunc(sa);fa[la]+=sa;h[M]-=sa*a}function va(a,h){se.reduce((M,fa)=>{if(n(h[fa]))return M;M&&ka(a,h,M,h,fa);return fa},null)}function y(a,h){a=h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(eb.fromMillis(a).as("days"))}function N(a,h,M){const fa=[["years",(Ma,e)=>e.year-Ma.year],
["quarters",(Ma,e)=>e.quarter-Ma.quarter+4*(e.year-Ma.year)],["months",(Ma,e)=>e.month-Ma.month+12*(e.year-Ma.year)],["weeks",(Ma,e)=>{Ma=y(Ma,e);return(Ma-Ma%7)/7}],["days",y]],la={},sa=a;let Aa,Ia;for(const [Ma,e]of fa)0<=M.indexOf(Ma)&&(Aa=Ma,la[Ma]=e(a,h),Ia=sa.plus(la),Ia>h?(la[Ma]--,a=sa.plus(la)):a=Ia);return[a,la,Ia,Aa]}function da(a,h,M,fa){let [la,sa,Aa,Ia]=N(a,h,M);a=h-la;M=M.filter(Ma=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ma));0===M.length&&(Aa<h&&(Aa=la.plus({[Ia]:1})),
Aa!==la&&(sa[Ia]=(sa[Ia]||0)+a/(Aa-la)));h=eb.fromObject(sa,fa);return 0<M.length?eb.fromMillis(a,fa).shiftTo(...M).plus(h):h}function X({numberingSystem:a},h=""){return new RegExp(`${Lc[a||"latn"]}${h}`)}function ia(a,h=M=>M){return{regex:a,deser:([M])=>{{let fa=parseInt(M,10);if(isNaN(fa)){fa="";for(let la=0;la<M.length;la++){const sa=M.charCodeAt(la);if(-1!==M[la].search(Lc.hanidec))fa+=te.indexOf(M[la]);else for(const Aa in nd){const [Ia,Ma]=nd[Aa];sa>=Ia&&sa<=Ma&&(fa+=sa-Ia)}}M=parseInt(fa,10)}else M=
fa}return h(M)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,od)}function ra(a,h){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([M])=>a.findIndex(fa=>M.replace(/\./g,"").replace(Mc," ").toLowerCase()===fa.replace(/\./g,"").replace(Mc," ").toLowerCase())+h}}function U(a,h){return{regex:a,deser:([,M,fa])=>P(M,fa),groups:h}}function ba(a){return{regex:a,deser:([h])=>h}}function pa(a,h){const M=X(h),fa=X(h,"{2}"),la=X(h,"{3}"),sa=X(h,"{4}"),Aa=X(h,"{6}"),Ia=X(h,"{1,2}"),
Ma=X(h,"{1,3}"),e=X(h,"{1,6}"),Wa=X(h,"{1,9}"),Xa=X(h,"{2,4}"),bb=X(h,"{4,6}"),ua=w=>({regex:RegExp(w.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([E])=>E,literal:!0}),$b=(w=>{if(a.literal)return ua(w);switch(w.val){case "G":return ra(h.eras("short",!1),0);case "GG":return ra(h.eras("long",!1),0);case "y":return ia(e);case "yy":return ia(Xa,D);case "yyyy":return ia(sa);case "yyyyy":return ia(bb);case "yyyyyy":return ia(Aa);case "M":return ia(Ia);case "MM":return ia(fa);case "MMM":return ra(h.months("short",
!0,!1),1);case "MMMM":return ra(h.months("long",!0,!1),1);case "L":return ia(Ia);case "LL":return ia(fa);case "LLL":return ra(h.months("short",!1,!1),1);case "LLLL":return ra(h.months("long",!1,!1),1);case "d":return ia(Ia);case "dd":return ia(fa);case "o":return ia(Ma);case "ooo":return ia(la);case "HH":return ia(fa);case "H":return ia(Ia);case "hh":return ia(fa);case "h":return ia(Ia);case "mm":return ia(fa);case "m":return ia(Ia);case "q":return ia(Ia);case "qq":return ia(fa);case "s":return ia(Ia);
case "ss":return ia(fa);case "S":return ia(Ma);case "SSS":return ia(la);case "u":return ba(Wa);case "uu":return ba(Ia);case "uuu":return ia(M);case "a":return ra(h.meridiems(),0);case "kkkk":return ia(sa);case "kk":return ia(Xa,D);case "W":return ia(Ia);case "WW":return ia(fa);case "E":case "c":return ia(M);case "EEE":return ra(h.weekdays("short",!1,!1),1);case "EEEE":return ra(h.weekdays("long",!1,!1),1);case "ccc":return ra(h.weekdays("short",!0,!1),1);case "cccc":return ra(h.weekdays("long",!0,
!1),1);case "Z":case "ZZ":return U(new RegExp(`([+-]${Ia.source})(?::(${fa.source}))?`),2);case "ZZZ":return U(new RegExp(`([+-]${Ia.source})(${fa.source})?`),2);case "z":return ba(/[a-z_+-/]{1,256}?/i);default:return ua(w)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};$b.token=a;return $b}function wa(a){return[`^${a.map(h=>h.regex).reduce((h,M)=>`${h}(${M.source})`,"")}$`,a]}function Ba(a,h,M){if(a=a.match(h)){h={};let fa=1;for(const la in M)if(d(M,la)){const sa=M[la],
Aa=sa.groups?sa.groups+1:1;!sa.literal&&sa.token&&(h[sa.token.val[0]]=sa.deser(a.slice(fa,fa+Aa)));fa+=Aa}return[a,h]}return[a,{}]}function La(a){const h=la=>{switch(la){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};
let M=null,fa;n(a.z)||(M=Tb.create(a.z));n(a.Z)||(M||(M=new Eb(a.Z)),fa=a.Z);n(a.q)||(a.M=3*(a.q-1)+1);n(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);n(a.u)||(a.S=T(a.u));return[Object.keys(a).reduce((la,sa)=>{const Aa=h(sa);Aa&&(la[Aa]=a[sa]);return la},{}),M,fa]}function Ja(a,h){return Array.prototype.concat(...a.map(M=>{if(!M.literal){var fa=Fb.macroTokenToFormatOpts(M.val);fa=Qa(fa,h);M=null==fa||fa.includes(void 0)?M:fa}return M}))}function Pa(a,h,M){M=
Ja(Fb.parseFormat(M),a);var fa=M.map(bb=>pa(bb,a));const la=fa.find(bb=>bb.invalidReason);if(la)return{input:h,tokens:M,invalidReason:la.invalidReason};const [sa,Aa]=wa(fa);fa=RegExp(sa,"i");const [Ia,Ma]=Ba(h,fa,Aa),[e,Wa,Xa]=Ma?La(Ma):[null,null,void 0];if(d(Ma,"a")&&d(Ma,"H"))throw new ha("Can't include meridiem when specifying 24-hour format");return{input:h,tokens:M,regex:fa,rawMatches:Ia,matches:Ma,result:e,zone:Wa,specificOffset:Xa}}function Qa(a,h){if(!a)return null;h=Fb.create(h,a);var M=
h.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return M.call(h,Nc).map(fa=>{{const {type:sa,value:Aa}=fa;if("literal"===sa)fa={literal:!0,val:Aa};else{fa=a[sa];var la=ue[sa];"object"===typeof la&&(la=la[fa]);fa=la?{literal:!1,val:la}:void 0}}return fa})}function Ga(a,h){return new Qb("unit out of range",`you specified ${h} (of type ${typeof h}) as a ${a}, which is invalid`)}function Ra(a,h,M){h=new Date(Date.UTC(a,h-1,M));100>a&&0<=a&&h.setUTCFullYear(h.getUTCFullYear()-1900);a=h.getUTCDay();
return 0===a?7:a}function xa(a,h){a=p(a)?Oc:Pc;const M=a.findIndex(fa=>fa<h);return{month:M+1,day:h-a[M]}}function vb(a){const {year:h,month:M,day:fa}=a;var la=fa+(p(h)?Oc:Pc)[M-1];const sa=Ra(h,M,fa);la=Math.floor((la-sa+10)/7);let Aa;1>la?(Aa=h-1,la=O(Aa)):la>O(h)?(Aa=h+1,la=1):Aa=h;return{weekYear:Aa,weekNumber:la,weekday:sa,...g(a)}}function ub(a){const {weekYear:h,weekNumber:M,weekday:fa}=a;var la=Ra(h,1,4),sa=p(h)?366:365;la=7*M+fa-la-3;1>la?(sa=h-1,la+=p(sa)?366:365):la>sa?(sa=h+1,la-=p(h)?
366:365):sa=h;const {month:Aa,day:Ia}=xa(sa,la);return{year:sa,month:Aa,day:Ia,...g(a)}}function qb(a){const {year:h,month:M,day:fa}=a;var la=fa+(p(h)?Oc:Pc)[M-1];return{year:h,ordinal:la,...g(a)}}function b(a){const {year:h,ordinal:M}=a,{month:fa,day:la}=xa(h,M);return{year:h,month:fa,day:la,...g(a)}}function gb(a){const h=ca(a.year),M=q(a.month,1,12),fa=q(a.day,1,t(a.year,a.month));return h?M?fa?!1:Ga("day",a.day):Ga("month",a.month):Ga("year",a.year)}function db(a){const {hour:h,minute:M,second:fa,
millisecond:la}=a;a=q(h,0,23)||24===h&&0===M&&0===fa&&0===la;const sa=q(M,0,59),Aa=q(fa,0,59),Ia=q(la,0,999);return a?sa?Aa?Ia?!1:Ga("millisecond",la):Ga("second",fa):Ga("minute",M):Ga("hour",h)}function Gb(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Pb(a){null===a.weekData&&(a.weekData=vb(a.c));return a.weekData}function nb(a,h){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Za({...a,...h,old:a})}function Wb(a,h,M){let fa=a-6E4*
h;const la=M.offset(fa);if(h===la)return[fa,h];fa-=6E4*(la-h);h=M.offset(fa);return la===h?[fa,la]:[a-6E4*Math.min(la,h),Math.max(la,h)]}function oa(a,h){a=new Date(a+6E4*h);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Yb(a,h,M){return Wb(z(a),h,M)}function Sb(a,h){const M=a.o;var fa=a.c.year+Math.trunc(h.years);const la=a.c.month+Math.trunc(h.months)+3*
Math.trunc(h.quarters);fa={...a.c,year:fa,month:la,day:Math.min(a.c.day,t(fa,la))+Math.trunc(h.days)+7*Math.trunc(h.weeks)};h=eb.fromObject({years:h.years-Math.trunc(h.years),quarters:h.quarters-Math.trunc(h.quarters),months:h.months-Math.trunc(h.months),weeks:h.weeks-Math.trunc(h.weeks),days:h.days-Math.trunc(h.days),hours:h.hours,minutes:h.minutes,seconds:h.seconds,milliseconds:h.milliseconds}).as("milliseconds");fa=z(fa);let [sa,Aa]=Wb(fa,M,a.zone);0!==h&&(sa+=h,Aa=a.zone.offset(sa));return{ts:sa,
o:Aa}}function zb(a,h,M,fa,la,sa){const {setZone:Aa,zone:Ia}=M;return a&&0!==Object.keys(a).length?(a=Za.fromObject(a,{...M,zone:h||Ia,specificOffset:sa}),Aa?a:a.setZone(Ia)):Za.invalid(new Qb("unparsable",`the input "${la}" can't be parsed as ${fa}`))}function Kb(a,h,M=!0){return a.isValid?Fb.create(rb.create("en-US"),{allowZ:M,forceSimple:!0}).formatDateTimeFromString(a,h):null}function Zb(a,h){const M=9999<a.c.year||0>a.c.year;let fa="";M&&0<=a.c.year&&(fa+="+");fa+=J(a.c.year,M?6:4);h?(fa=fa+
"-"+J(a.c.month),fa=fa+"-"+J(a.c.day)):(fa+=J(a.c.month),fa+=J(a.c.day));return fa}function Xb(a,h,M,fa,la,sa){let Aa=J(a.c.hour);h?(Aa=Aa+":"+J(a.c.minute),0===a.c.second&&M||(Aa+=":")):Aa+=J(a.c.minute);0===a.c.second&&M||(Aa+=J(a.c.second),0===a.c.millisecond&&fa||(Aa=Aa+"."+J(a.c.millisecond,3)));la&&(a.isOffsetFixed&&0===a.offset&&!sa?Aa+="Z":0>a.o?(Aa=Aa+"-"+J(Math.trunc(-a.o/60)),Aa=Aa+":"+J(Math.trunc(-a.o%60))):(Aa=Aa+"+"+J(Math.trunc(a.o/60)),Aa=Aa+":"+J(Math.trunc(a.o%60))));sa&&(Aa+="["+
a.zone.ianaName+"]");return Aa}function kc(a){const h={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!h)throw new Y(a);
return h}function Hb(a,h){const M=l(h.zone,yb.defaultZone);h=rb.fromObject(h);const fa=yb.now();var la;if(n(a.year))a=fa;else{for(const sa of pd)n(a[sa])&&(a[sa]=qd[sa]);if(la=gb(a)||db(a))return Za.invalid(la);la=M.offset(fa);[a,la]=Yb(a,la,M)}return new Za({ts:a,zone:M,loc:h,o:la})}function Rb(a,h,M){const fa=n(M.round)?!0:M.round,la=(Aa,Ia)=>{Aa=B(Aa,fa||M.calendary?0:2,!0);return h.loc.clone(M).relFormatter(M).format(Aa,Ia)},sa=Aa=>M.calendary?h.hasSame(a,Aa)?0:h.startOf(Aa).diff(a.startOf(Aa),
Aa).get(Aa):h.diff(a,Aa).get(Aa);if(M.unit)return la(sa(M.unit),M.unit);for(const Aa of M.units){const Ia=sa(Aa);if(1<=Math.abs(Ia))return la(Ia,Aa)}return la(a>h?-0:0,M.units[M.units.length-1])}function fb(a){let h={};0<a.length&&"object"===typeof a[a.length-1]?(h=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[h,a]}function Ab(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&K(a.valueOf()))return Za.fromJSDate(a);if(a&&"object"===typeof a)return Za.fromObject(a);throw new qa(`Unknown datetime argument: ${a}, of type ${typeof a}`);
}class Bb extends Error{}class Ya extends Bb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class hc extends Bb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class V extends Bb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class ha extends Bb{}class Y extends Bb{constructor(a){super(`Invalid unit ${a}`)}}class qa extends Bb{}class Ca extends Bb{constructor(){super("Zone is an abstract class")}}const Da={year:"numeric",month:"numeric",day:"numeric"},Na={year:"numeric",
month:"short",day:"numeric"},Va={year:"numeric",month:"short",day:"numeric",weekday:"short"},mb={year:"numeric",month:"long",day:"numeric"},kb={year:"numeric",month:"long",day:"numeric",weekday:"long"},hb={hour:"numeric",minute:"numeric"},xb={hour:"numeric",minute:"numeric",second:"numeric"},Ib={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sd={hour:"numeric",minute:"numeric",hourCycle:"h23"},td={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},wd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},yd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},zd={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},ve={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ad={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Bd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
Dd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Ca;}get name(){throw new Ca;}get ianaName(){return this.name}get isUniversal(){throw new Ca;}offsetName(a,h){throw new Ca;}formatOffset(a,h){throw new Ca;}offset(a){throw new Ca;}equals(a){throw new Ca;}get isValid(){throw new Ca;}}let Qc=null;class nc extends ic{static get instance(){null===Qc&&(Qc=new nc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:h,locale:M}){return F(a,h,M)}formatOffset(a,h){return A(this.offset(a),h)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const we={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Tb extends ic{static create(a){pc[a]||(pc[a]=new Tb(a));return pc[a]}static resetCache(){pc={};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(h){return!1}}constructor(a){super();this.zoneName=a;this.valid=Tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:h,locale:M}){return F(a,h,M,this.name)}formatOffset(a,h){return A(this.offset(a),h)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var h=this.name;oc[h]||(oc[h]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:h,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));h=oc[h];if(h.formatToParts){h=h.formatToParts(a);var M=[];for(let Wa=0;Wa<h.length;Wa++){const {type:Xa,value:bb}=h[Wa],ua=we[Xa];"era"===Xa?M[ua]=bb:n(ua)||(M[ua]=parseInt(bb,10))}h=M}else{h=h.format(a).replace(/\u200E/g,"");h=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(h);const [,Wa,Xa,bb,ua,$b,w,E]=h;h=[bb,Wa,Xa,ua,$b,w,E]}let [fa,la,sa,Aa,Ia,Ma,e]=h;"BC"===Aa&&(fa=-Math.abs(fa)+1);h=z({year:fa,month:la,day:sa,hour:24===Ia?0:Ia,minute:Ma,second:e,millisecond:0});
a=+a;M=a%1E3;return(h-(a-(0<=M?M:1E3+M)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Hc={},Ic={},Jc={},qc=null;class xe{constructor(a,h,M){this.padTo=M.padTo||0;this.floor=M.floor||!1;const {padTo:fa,floor:la,...sa}=M;if(!h||0<Object.keys(sa).length)h={useGrouping:!1,...M},0<M.padTo&&(h.minimumIntegerDigits=M.padTo),this.inf=aa(a,h)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):B(a,3);return J(a,
this.padTo)}}class ye{constructor(a,h,M){this.opts=M;var fa=void 0;a.zone.isUniversal?(fa=a.offset/60*-1,fa=0<=fa?`Etc/GMT+${fa}`:`Etc/GMT${fa}`,0!==a.offset&&Tb.create(fa).valid?this.dt=a:(fa="UTC",this.dt=M.timeZoneName?a:0===a.offset?a:Za.fromMillis(a.ts+6E4*a.offset))):"system"===a.zone.type?this.dt=a:(this.dt=a,fa=a.zone.name);a={...this.opts};a.timeZone=a.timeZone||fa;this.dtf=ma(h,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class ze{constructor(a,h,M){this.opts={style:"long",...M};!h&&L()&&(this.rtf=S(a,M))}format(a,h){return this.rtf?this.rtf.format(a,h):ta(h,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,h){return this.rtf?this.rtf.formatToParts(a,h):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,h,M,fa=!1){a=a||yb.defaultLocale;var la;(la=a)||(fa?fa="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),fa=qc),
la=fa);return new rb(la,h||yb.defaultNumberingSystem,M||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:h,outputCalendar:M}={}){return rb.create(a,h,M)}constructor(a,h,M,fa){var la=a.indexOf("-x-");-1!==la&&(a=a.substring(0,la));la=a.indexOf("-u-");if(-1===la)var sa=[a];else{try{sa=ma(a).resolvedOptions();var Aa=a}catch(bb){Aa=a.substring(0,la),sa=ma(Aa).resolvedOptions()}const {numberingSystem:Wa,calendar:Xa}=sa;sa=[Aa,Wa,Xa]}const [Ia,
Ma,e]=sa;this.locale=Ia;this.numberingSystem=h||Ma||null;this.outputCalendar=M||e||null;h=this.locale;M=this.numberingSystem;if((sa=this.outputCalendar)||M)h.includes("-u-")||(h+="-u"),sa&&(h+=`-ca-${sa}`),M&&(h+=`-nu-${M}`);this.intl=h;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=fa;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==
this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),h=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&h?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||
this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,h=!1,M=!0){return v(this,a,M,r,()=>{const fa=h?{month:a,day:"numeric"}:{month:a},la=h?"format":"standalone";this.monthsCache[la][a]||(this.monthsCache[la][a]=R(sa=>this.extract(sa,fa,"month")));return this.monthsCache[la][a]})}weekdays(a,h=!1,
M=!0){return v(this,a,M,W,()=>{const fa=h?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},la=h?"format":"standalone";this.weekdaysCache[la][a]||(this.weekdaysCache[la][a]=I(sa=>this.extract(sa,fa,"weekday")));return this.weekdaysCache[la][a]})}meridiems(a=!0){return v(this,void 0,a,()=>Ed,()=>{if(!this.meridiemCache){const h={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,9),Za.utc(2016,11,13,19)].map(M=>this.extract(M,h,"dayperiod"))}return this.meridiemCache})}eras(a,
h=!0){return v(this,a,h,ja,()=>{const M={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(fa=>this.extract(fa,M,"era")));return this.eraCache[a]})}extract(a,h,M){return(a=this.dtFormatter(a,h).formatToParts().find(fa=>fa.type.toLowerCase()===M))?a.value:null}numberFormatter(a={}){return new xe(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,h={}){return new ye(a,this.intl,h)}relFormatter(a={}){return new ze(this.intl,this.isEnglish(),a)}listFormatter(a=
{}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(P(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${A(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${A(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,h){return A(this.fixed,h)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class hd extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Fd=()=>Date.now(),Gd="system",Hd=null,Sc=null,Id=null,Jd=60,Kd;class yb{static get now(){return Fd}static set now(a){Fd=a}static set defaultZone(a){Gd=a}static get defaultZone(){return l(Gd,nc.instance)}static get defaultLocale(){return Hd}static set defaultLocale(a){Hd=a}static get defaultNumberingSystem(){return Sc}static set defaultNumberingSystem(a){Sc=
a}static get defaultOutputCalendar(){return Id}static set defaultOutputCalendar(a){Id=a}static get twoDigitCutoffYear(){return Jd}static set twoDigitCutoffYear(a){Jd=a%100}static get throwOnInvalid(){return Kd}static set throwOnInvalid(a){Kd=a}static resetCaches(){rb.resetCache();Tb.resetCache()}}const kd="January February March April May June July August September October November December".split(" "),jd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),md=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ld="Mon Tue Wed Thu Fri Sat Sun".split(" "),oe="MTWTFSS".split(""),Ed=["AM","PM"],qe=["Before Christ","Anno Domini"],pe=["BC","AD"],Kc=["B","A"],Tc={D:Da,DD:Na,DDD:mb,DDDD:kb,t:hb,tt:xb,ttt:Ib,tttt:rd,T:sd,TT:td,TTT:ud,TTTT:vd,f:wd,ff:yd,fff:Ad,ffff:Cd,F:xd,FF:zd,FFF:Bd,FFFF:Dd};class Fb{static create(a,h={}){return new Fb(a,h)}static parseFormat(a){let h=null,M="",fa=!1;const la=[];for(let sa=0;sa<a.length;sa++){const Aa=a.charAt(sa);
"'"===Aa?(0<M.length&&la.push({literal:fa,val:M}),h=null,M="",fa=!fa):fa?M+=Aa:Aa===h?M+=Aa:(0<M.length&&la.push({literal:!1,val:M}),h=M=Aa)}0<M.length&&la.push({literal:fa,val:M});return la}static macroTokenToFormatOpts(a){return Tc[a]}constructor(a,h){this.opts=h;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,h){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...h}).format()}formatDateTime(a,h={}){return this.loc.dtFormatter(a,
{...this.opts,...h}).format()}formatDateTimeParts(a,h={}){return this.loc.dtFormatter(a,{...this.opts,...h}).formatToParts()}formatInterval(a,h={}){return this.loc.dtFormatter(a.start,{...this.opts,...h}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,h={}){return this.loc.dtFormatter(a,{...this.opts,...h}).resolvedOptions()}num(a,h=0){if(this.opts.forceSimple)return J(a,h);const M={...this.opts};0<h&&(M.padTo=h);return this.loc.numberFormatter(M).format(a)}formatDateTimeFromString(a,
h){const M="en"===this.loc.listingMode(),fa=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,la=(Wa,Xa)=>this.loc.extract(a,Wa,Xa),sa=Wa=>a.isOffsetFixed&&0===a.offset&&Wa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Wa.format):"",Aa=(Wa,Xa)=>M?r(Wa)[a.month-1]:la(Xa?{month:Wa}:{month:Wa,day:"numeric"},"month"),Ia=(Wa,Xa)=>M?W(Wa)[a.weekday-1]:la(Xa?{weekday:Wa}:{weekday:Wa,month:"long",day:"numeric"},"weekday"),Ma=Wa=>{const Xa=Fb.macroTokenToFormatOpts(Wa);return Xa?this.formatWithSystemDefault(a,
Xa):Wa},e=Wa=>M?ja(Wa)[0>a.year?0:1]:la({era:Wa},"era");return za(Fb.parseFormat(h),Wa=>{switch(Wa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%
12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return sa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return sa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return sa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return M?Ed[12>a.hour?0:1]:la({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return fa?la({day:"numeric"},"day"):this.num(a.day);case "dd":return fa?la({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",!1);case "EEEEE":return Ia("narrow",!1);case "L":return fa?
la({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return fa?la({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return fa?la({month:"numeric"},"month"):this.num(a.month);case "MM":return fa?la({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return fa?
la({year:"numeric"},"year"):this.num(a.year);case "yy":return fa?la({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return fa?la({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return fa?la({year:"numeric"},"year"):this.num(a.year,6);case "G":return e("short");case "GG":return e("long");case "GGGGG":return e("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ma(Wa)}})}formatDurationFromString(a,h){const M=la=>{switch(la[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};h=Fb.parseFormat(h);const fa=h.reduce((la,{literal:sa,val:Aa})=>sa?la:la.concat(Aa),[]);a=a.shiftTo(...fa.map(M).filter(la=>la));return za(h,(la=>sa=>{const Aa=M(sa);return Aa?this.num(la.get(Aa),sa.length):sa})(a))}}class Qb{constructor(a,h){this.reason=a;this.explanation=h}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ld=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Md=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Uc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nd=RegExp(`${Uc.source}${`(?:${Md.source}?(?:\\[(${Ld.source})\\])?)?`}`),Vc=RegExp(`(?:T${Nd.source})?`),Od=Ua("weekYear","weekNumber","weekDay"),Ae=Ua("year","ordinal"),Wc=RegExp(`${Uc.source} ?(?:${Md.source}|(${Ld.source}))?`),Pd=RegExp(`(?: ${Wc.source})?`),Be=RegExp(`^T?${Uc.source}$`),Ce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},De=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Ee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,He=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vc),Ie=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vc),Je=Ea(/(\d{4})-?(\d{3})/,Vc),Ke=Ea(Nd),Qd=Ha(function(a,h){return[{year:Oa(a,h),month:Oa(a,h+1,1),day:Oa(a,h+2,1)},null,h+3]},Sa,$a,Ta),Le=Ha(Od,Sa,$a,Ta),Me=Ha(Ae,Sa,$a,Ta),Ne=Ha(Sa,$a,Ta),Oe=Ha(Sa),Pe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Pd),Qe=Ea(Wc),Re=Ha(Sa,$a,Ta),Rd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Se={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Rd},Te={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Rd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),se=cc.slice(0).reverse();
class eb{constructor(a){const h="longterm"===a.conversionAccuracy||!1;let M=h?Te:Se;a.matrix&&(M=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=h?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=M;this.isLuxonDuration=!0}static fromMillis(a,h){return eb.fromObject({milliseconds:a},h)}static fromObject(a,h={}){if(null==a||"object"!==typeof a)throw new qa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new eb({values:C(a,
eb.normalizeUnit),loc:rb.fromObject(h),conversionAccuracy:h.conversionAccuracy,matrix:h.matrix})}static fromDurationLike(a){if(K(a))return eb.fromMillis(a);if(eb.isDuration(a))return a;if("object"===typeof a)return eb.fromObject(a);throw new qa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,h){const [M]=Fa(a,[Ce,jb]);return M?eb.fromObject(M,h):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,h){const [M]=Fa(a,[Be,Oe]);return M?
eb.fromObject(M,h):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new V(a);return new eb({invalid:a})}static normalizeUnit(a){const h={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!h)throw new Y(a);return h}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,h={}){h={...h,floor:!1!==h.round&&!1!==h.floor};return this.isValid?Fb.create(this.loc,h).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const h=cc.map(M=>{const fa=this.values[M];return n(fa)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:M.slice(0,-1)}).format(fa)}).filter(M=>M);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(h)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=B(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var h=this.toMillis();if(0>h||864E5<=h)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
h=this.shiftTo("hours","minutes","seconds","milliseconds");let M="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===h.seconds&&0===h.milliseconds||(M+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===h.milliseconds||(M+=".SSS"));h=h.toFormat(M);a.includePrefix&&(h="T"+h);return h}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);const h=
{};for(const M of cc)if(d(a.values,M)||d(this.values,M))h[M]=a.get(M)+this.get(M);return ea(this,{values:h},!0)}minus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const h={};for(const M of Object.keys(this.values))h[M]=Q(a(this.values[M],M));return ea(this,{values:h},!0)}get(a){return this[eb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...C(a,eb.normalizeUnit)};return ea(this,{values:a})}reconfigure({locale:a,
numberingSystem:h,conversionAccuracy:M,matrix:fa}={}){a={loc:this.loc.clone({locale:a,numberingSystem:h}),matrix:fa,conversionAccuracy:M};return ea(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();va(this.matrix,a);return ea(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const h={};for(const [M,fa]of Object.entries(a))0!==fa&&(h[M]=fa);return ea(this,{values:h},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(sa=>eb.normalizeUnit(sa));const h={},M={},fa=this.toObject();let la;for(const sa of cc)if(0<=a.indexOf(sa)){la=sa;let Aa=0;for(const Ma in M)Aa+=this.matrix[Ma][sa]*M[Ma],M[Ma]=0;K(fa[sa])&&(Aa+=fa[sa]);const Ia=Math.trunc(Aa);h[sa]=Ia;M[sa]=(1E3*Aa-1E3*Ia)/1E3;for(const Ma in fa)cc.indexOf(Ma)>cc.indexOf(sa)&&ka(this.matrix,fa,Ma,h,sa)}else K(fa[sa])&&(M[sa]=fa[sa]);for(const sa in M)0!==M[sa]&&(h[la]+=sa===la?M[sa]:M[sa]/this.matrix[la][sa]);return ea(this,{values:h},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const h of Object.keys(this.values))a[h]=0===this.values[h]?0:-this.values[h];return ea(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const fa of cc){var h=this.values[fa];var M=a.values[fa];h=void 0===h||0===h?void 0===M||0===M:h===M;if(!h)return!1}return!0}}class wb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new hc(a);return new wb({invalid:a})}static fromDateTimes(a,
h){a=Ab(a);h=Ab(h);var M=a&&a.isValid?h&&h.isValid?h<a?wb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${h.toISO()}`):null:wb.invalid("missing or invalid end"):wb.invalid("missing or invalid start");return null==M?new wb({start:a,end:h}):M}static after(a,h){h=eb.fromDurationLike(h);a=Ab(a);return wb.fromDateTimes(a,a.plus(h))}static before(a,h){h=eb.fromDurationLike(h);a=Ab(a);return wb.fromDateTimes(a.minus(h),a)}static fromISO(a,
h){const [M,fa]=(a||"").split("/",2);if(M&&fa){let Aa;try{var la=Za.fromISO(M,h);Aa=la.isValid}catch(Ma){Aa=!1}let Ia;try{var sa=Za.fromISO(fa,h);Ia=sa.isValid}catch(Ma){Ia=!1}if(Aa&&Ia)return wb.fromDateTimes(la,sa);if(Aa){if(sa=eb.fromISO(fa,h),sa.isValid)return wb.after(la,sa)}else if(Ia&&(la=eb.fromISO(M,h),la.isValid))return wb.before(sa,la)}return wb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const h=this.start.startOf(a),M=this.end.startOf(a);return Math.floor(M.diff(h,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:h}={}){return this.isValid?wb.fromDateTimes(a||this.s,h||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ab).filter(sa=>this.contains(sa)).sort();const h=[];let {s:M}=this,fa=0;for(;M<this.e;){var la=a[fa]||this.e;la=+la>+this.e?this.e:la;
h.push(wb.fromDateTimes(M,la));M=la;fa+=1}return h}splitBy(a){a=eb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:h}=this,M=1;const fa=[];for(;h<this.e;){var la=this.start.plus(a.mapUnits(sa=>sa*M));la=+la>+this.e?this.e:la;fa.push(wb.fromDateTimes(h,la));h=la;M+=1}return fa}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?
+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const h=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return h>=a?null:wb.fromDateTimes(h,a)}union(a){return this.isValid?wb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [h,M]=a.sort((fa,la)=>fa.s-la.s).reduce(([fa,la],sa)=>la?la.overlaps(sa)||la.abutsStart(sa)?
[fa,la.union(sa)]:[fa.concat([la]),sa]:[fa,sa],[[],null]);M&&h.push(M);return h}static xor(a){let h=null,M=0;const fa=[];a=a.map(la=>[{time:la.s,type:"s"},{time:la.e,type:"e"}]);a=Array.prototype.concat(...a).sort((la,sa)=>la.time-sa.time);for(const la of a)M+="s"===la.type?1:-1,1===M?h=la.time:(h&&+h!==+la.time&&fa.push(wb.fromDateTimes(h,la.time)),h=null);return wb.merge(fa)}difference(...a){return wb.xor([this].concat(a)).map(h=>this.intersection(h)).filter(h=>h&&!h.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Da,h={}){return this.isValid?Fb.create(this.s.loc.clone(h),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:h=" \u2013 "}=
{}){return this.isValid?`${this.s.toFormat(a)}${h}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,h){return this.isValid?this.e.diff(this.s,a,h):eb.invalid(this.invalidReason)}mapEndpoints(a){return wb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const h=Za.now().setZone(a).set({month:12});return!a.isUniversal&&h.offset!==h.set({month:6}).offset}static isValidIANAZone(a){return Tb.isValidZone(a)}static normalizeZone(a){return l(a,yb.defaultZone)}static months(a=
"long",{locale:h=null,numberingSystem:M=null,locObj:fa=null,outputCalendar:la="gregory"}={}){return(fa||rb.create(h,M,la)).months(a)}static monthsFormat(a="long",{locale:h=null,numberingSystem:M=null,locObj:fa=null,outputCalendar:la="gregory"}={}){return(fa||rb.create(h,M,la)).months(a,!0)}static weekdays(a="long",{locale:h=null,numberingSystem:M=null,locObj:fa=null}={}){return(fa||rb.create(h,M,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:h=null,numberingSystem:M=null,locObj:fa=null}=
{}){return(fa||rb.create(h,M,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:h=null}={}){return rb.create(h,null,"gregory").eras(a)}static features(){return{relative:L()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},nd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},te=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),od=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(od,"g"),ue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],qd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pd="year month day hour minute second millisecond".split(" "),We="weekYear weekNumber weekday hour minute second millisecond".split(" "),Xe="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const h=a.zone||yb.defaultZone;let M=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(h.isValid?null:Gb(h));this.ts=n(a.ts)?yb.now():a.ts;let fa=null;var la=null;M||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(h)?[fa,la]=[a.old.c,a.old.o]:(la=h.offset(this.ts),fa=oa(this.ts,la),fa=(M=Number.isNaN(fa.year)?new Qb("invalid input"):null)?null:fa,la=M?null:la));this._zone=h;this.loc=a.loc||rb.create();this.invalid=M;this.weekData=null;this.c=fa;this.o=la;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,h]=fb(arguments),[M,fa,la,sa,Aa,Ia,Ma]=h;return Hb({year:M,month:fa,day:la,hour:sa,minute:Aa,second:Ia,millisecond:Ma},a)}static utc(){const [a,h]=fb(arguments),[M,fa,la,sa,Aa,Ia,Ma]=h;a.zone=Eb.utcInstance;return Hb({year:M,month:fa,day:la,hour:sa,minute:Aa,second:Ia,millisecond:Ma},a)}static fromJSDate(a,h={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const M=
l(h.zone,yb.defaultZone);return M.isValid?new Za({ts:a,zone:M,loc:rb.fromObject(h)}):Za.invalid(Gb(M))}static fromMillis(a,h={}){if(K(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:l(h.zone,yb.defaultZone),loc:rb.fromObject(h)});throw new qa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,h={}){if(K(a))return new Za({ts:1E3*a,zone:l(h.zone,yb.defaultZone),loc:rb.fromObject(h)});throw new qa("fromSeconds requires a numerical input");
}static fromObject(a,h={}){a=a||{};var M=l(h.zone,yb.defaultZone);if(!M.isValid)return Za.invalid(Gb(M));var fa=yb.now();const la=n(h.specificOffset)?M.offset(fa):h.specificOffset,sa=C(a,kc);var Aa=!n(sa.ordinal),Ia=!n(sa.year),Ma=!n(sa.month)||!n(sa.day);Ia=Ia||Ma;var e=sa.weekYear||sa.weekNumber;h=rb.fromObject(h);if((Ia||Aa)&&e)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ma&&Aa)throw new ha("Can't mix ordinal dates with month/day");Ma=e||sa.weekday&&!Ia;
let Wa=oa(fa,la);Ma?(fa=We,e=Ue,Wa=vb(Wa)):Aa?(fa=Xe,e=Ve,Wa=qb(Wa)):(fa=pd,e=qd);let Xa=!1;for(var bb of fa)n(sa[bb])?sa[bb]=Xa?e[bb]:Wa[bb]:Xa=!0;Ma?(bb=ca(sa.weekYear),fa=q(sa.weekNumber,1,O(sa.weekYear)),e=q(sa.weekday,1,7),bb=bb?fa?e?!1:Ga("weekday",sa.weekday):Ga("week",sa.week):Ga("weekYear",sa.weekYear)):Aa?(bb=ca(sa.year),fa=q(sa.ordinal,1,p(sa.year)?366:365),bb=bb?fa?!1:Ga("ordinal",sa.ordinal):Ga("year",sa.year)):bb=gb(sa);if(bb=bb||db(sa))return Za.invalid(bb);Aa=Ma?ub(sa):Aa?b(sa):sa;
const [ua,$b]=Yb(Aa,la,M);M=new Za({ts:ua,zone:M,o:$b,loc:h});return sa.weekday&&Ia&&a.weekday!==M.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${sa.weekday} and a date of ${M.toISO()}`):M}static fromISO(a,h={}){const [M,fa]=Fa(a,[He,Qd],[Ie,Le],[Je,Me],[Ke,Ne]);return zb(M,fa,h,"ISO 8601",a)}static fromRFC2822(a,h={}){const [M,fa]=Fa(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[De,lb]);return zb(M,fa,h,"RFC 2822",a)}static fromHTTP(a,h={}){const [M,
fa]=Fa(a,[Ee,c],[Fe,c],[Ge,u]);return zb(M,fa,h,"HTTP",h)}static fromFormat(a,h,M={}){if(n(a)||n(h))throw new qa("fromFormat requires an input string and a format");const {locale:fa=null,numberingSystem:la=null}=M,sa=rb.fromOpts({locale:fa,numberingSystem:la,defaultToEN:!0}),{result:Aa,zone:Ia,specificOffset:Ma,invalidReason:e}=Pa(sa,a,h),[Wa,Xa,bb,ua]=[Aa,Ia,Ma,e];return ua?Za.invalid(ua):zb(Wa,Xa,M,`format ${h}`,a,bb)}static fromString(a,h,M={}){return Za.fromFormat(a,h,M)}static fromSQL(a,h={}){const [M,
fa]=Fa(a,[Pe,Qd],[Qe,Re]);return zb(M,fa,h,"SQL",a)}static invalid(a,h=null){if(!a)throw new qa("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,h);if(yb.throwOnInvalid)throw new Ya(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,h={}){return(a=Qa(a,rb.fromObject(h)))?a.map(M=>M?M.val:null).join(""):null}static expandFormat(a,h={}){return Ja(Fb.parseFormat(a),rb.fromObject(h)).map(M=>M.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pb(this).weekYear:NaN}get weekNumber(){return this.isValid?Pb(this).weekNumber:NaN}get weekday(){return this.isValid?Pb(this).weekday:
NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return p(this.year)}get daysInMonth(){return t(this.year,this.month)}get daysInYear(){return this.isValid?
p(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?O(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:h,numberingSystem:M,calendar:fa}=Fb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:h,numberingSystem:M,outputCalendar:fa}}toUTC(a=0,h={}){return this.setZone(Eb.instance(a),h)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:h=!1,keepCalendarTime:M=!1}={}){a=l(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let fa=
this.ts;if(h||M)h=a.offset(this.ts),M=this.toObject(),[fa]=Yb(M,h,a);return nb(this,{ts:fa,zone:a})}return Za.invalid(Gb(a))}reconfigure({locale:a,numberingSystem:h,outputCalendar:M}={}){a=this.loc.clone({locale:a,numberingSystem:h,outputCalendar:M});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=C(a,kc);var h=!n(a.weekYear)||!n(a.weekNumber)||!n(a.weekday);const M=!n(a.ordinal),fa=!n(a.year),la=!n(a.month)||!n(a.day),sa=a.weekYear||
a.weekNumber;if((fa||la||M)&&sa)throw new ha("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(la&&M)throw new ha("Can't mix ordinal dates with month/day");h?h=ub({...vb(this.c),...a}):n(a.ordinal)?(h={...this.toObject(),...a},n(a.day)&&(h.day=Math.min(t(h.year,h.month),h.day))):h=b({...qb(this.c),...a});const [Aa,Ia]=Yb(h,this.o,this.zone);return nb(this,{ts:Aa,o:Ia})}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return nb(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=eb.fromDurationLike(a).negate();return nb(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const h={};a=eb.normalizeUnit(a);switch(a){case "years":h.month=1;case "quarters":case "months":h.day=1;case "weeks":case "days":h.hour=0;case "hours":h.minute=0;case "minutes":h.second=0;case "seconds":h.millisecond=0}"weeks"===a&&(h.weekday=1);"quarters"===a&&(h.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(h)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
h={}){return this.isValid?Fb.create(this.loc.redefaultToEN(h)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Da,h={}){return this.isValid?Fb.create(this.loc.clone(h),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Fb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:h=!1,suppressMilliseconds:M=!1,includeOffset:fa=!0,extendedZone:la=!1}={}){if(!this.isValid)return null;a="extended"===a;let sa=
Zb(this,a);return sa=sa+"T"+Xb(this,a,h,M,fa,la)}toISODate({format:a="extended"}={}){return this.isValid?Zb(this,"extended"===a):null}toISOWeekDate(){return Kb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:h=!1,includeOffset:M=!0,includePrefix:fa=!1,extendedZone:la=!1,format:sa="extended"}={}){return this.isValid?(fa?"T":"")+Xb(this,"extended"===sa,h,a,M,la):null}toRFC2822(){return Kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Zb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:h=!1,includeOffsetSpace:M=!0}={}){let fa="HH:mm:ss.SSS";if(h||a)M&&(fa+=" "),h?fa+="z":a&&(fa+="ZZ");return Kb(this,fa,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const h={...this.c};a.includeConfig&&(h.outputCalendar=this.outputCalendar,h.numberingSystem=this.loc.numberingSystem,h.locale=this.loc.locale);return h}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,h="milliseconds",M={}){if(!this.isValid||!a.isValid)return eb.invalid("created by diffing an invalid DateTime");M={locale:this.locale,numberingSystem:this.numberingSystem,...M};
const fa=(Array.isArray(h)?h:[h]).map(eb.normalizeUnit);h=a.valueOf()>this.valueOf();a=da(h?this:a,h?a:this,fa,M);return h?a.negate():a}diffNow(a="milliseconds",h={}){return this.diff(Za.now(),a,h)}until(a){return this.isValid?wb.fromDateTimes(this,a):this}hasSame(a,h){if(!this.isValid)return!1;const M=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(h)<=M&&M<=a.endOf(h)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const h=a.base||Za.fromObject({},{zone:this.zone}),M=a.padding?this<h?-a.padding:a.padding:0;let fa="years months days hours minutes seconds".split(" "),la=a.unit;Array.isArray(a.unit)&&(fa=a.unit,la=void 0);return Rb(h,this.plus(M),{...a,numeric:"always",units:fa,unit:la})}toRelativeCalendar(a={}){return this.isValid?Rb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new qa("min requires all arguments be DateTimes");
return m(a,h=>h.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new qa("max requires all arguments be DateTimes");return m(a,h=>h.valueOf(),Math.max)}static fromFormatExplain(a,h,M={}){const {locale:fa=null,numberingSystem:la=null}=M;M=rb.fromOpts({locale:fa,numberingSystem:la,defaultToEN:!0});return Pa(M,a,h)}static fromStringExplain(a,h,M={}){return Za.fromFormatExplain(a,h,M)}static get DATE_SHORT(){return Da}static get DATE_MED(){return Na}static get DATE_MED_WITH_WEEKDAY(){return Va}static get DATE_FULL(){return mb}static get DATE_HUGE(){return kb}static get TIME_SIMPLE(){return hb}static get TIME_WITH_SECONDS(){return xb}static get TIME_WITH_SHORT_OFFSET(){return Ib}static get TIME_WITH_LONG_OFFSET(){return rd}static get TIME_24_SIMPLE(){return sd}static get TIME_24_WITH_SECONDS(){return td}static get TIME_24_WITH_SHORT_OFFSET(){return ud}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return wd}static get DATETIME_SHORT_WITH_SECONDS(){return xd}static get DATETIME_MED(){return yd}static get DATETIME_MED_WITH_SECONDS(){return zd}static get DATETIME_MED_WITH_WEEKDAY(){return ve}static get DATETIME_FULL(){return Ad}static get DATETIME_FULL_WITH_SECONDS(){return Bd}static get DATETIME_HUGE(){return Cd}static get DATETIME_HUGE_WITH_SECONDS(){return Dd}}
k.DateTime=Za;k.Duration=eb;k.FixedOffsetZone=Eb;k.IANAZone=Tb;k.Info=lc;k.Interval=wb;k.SystemZone=nc;k.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,f){var ma={};(function(S){(function(R,I){S.exports&&(S.exports=I())})(f.commonjsGlobal,function(){function R(v,l,n,K){v=Error.call(this,v);Object.setPrototypeOf&&Object.setPrototypeOf(v,R.prototype);v.expected=l;v.found=n;v.location=K;v.name="SyntaxError";return v}function I(v,l,n){n=
n||" ";if(v.length>l)return v;l-=v.length;n+=n.repeat(l);return v+n.slice(0,l)}(function(v,l){function n(){this.constructor=v}n.prototype=l.prototype;v.prototype=new n})(R,Error);R.prototype.format=function(v){var l="Error: "+this.message;if(this.location){var n=null,K;for(K=0;K<v.length;K++)if(v[K].source===this.location.source){n=v[K].text.split(/\r\n|\n|\r/g);break}v=this.location.start;K=this.location.source+":"+v.line+":"+v.column;if(n){var ca=this.location.end,L=I("",v.line.toString().length,
" ");n=n[v.line-1];ca=(v.line===ca.line?ca.column:n.length+1)-v.column||1;l+="\n --\x3e "+K+"\n"+L+" |\n"+v.line+" | "+n+"\n"+L+" | "+I("",v.column-1," ")+I("",ca,"^")}else l+="\n at "+K}return l};R.buildMessage=function(v,l){function n(x){return x.charCodeAt(0).toString(16).toUpperCase()}function K(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(d){return"\\x"+n(d)})}function ca(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function L(x){return m[x.type](x)}var m={literal:function(x){return'"'+K(x.text)+'"'},class:function(x){var d=x.parts.map(function(q){return Array.isArray(q)?ca(q[0])+
"-"+ca(q[1]):ca(q)});return"["+(x.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};return"Expected "+function(x){x=x.map(L);var d,q;x.sort();if(0<x.length){for(q=d=1;d<x.length;d++)x[d-1]!==x[d]&&(x[q]=x[d],q++);x.length=q}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}(v)+" but "+(l?'"'+K(l)+'"':"end of input")+" found."};
return{SyntaxError:R,parse:function(v,l){function n(w,E){return{type:"literal",text:w,ignoreCase:E}}function K(w,E,Z){return{type:"class",parts:w,inverted:E,ignoreCase:Z}}function ca(w){var E=Wa[w],Z;if(!E){for(Z=w-1;!Wa[Z];)Z--;E=Wa[Z];for(E={line:E.line,column:E.column};Z<w;)10===v.charCodeAt(Z)?(E.line++,E.column=1):E.column++,Z++;Wa[w]=E}return E}function L(w,E){var Z=ca(w),ya=ca(E);return{source:gb,start:{offset:w,line:Z.line,column:Z.column},end:{offset:E,line:ya.line,column:ya.column}}}function m(w){e<
Xa||(e>Xa&&(Xa=e,bb=[]),bb.push(w))}function x(){var w=e;xa();var E=q();E!==b?(xa(),w=E):(e=w,w=b);return w}function d(){var w=e;var E=q();if(E!==b){w=[];var Z=e;var ya=xa();var Ka=Qa();if(Ka!==b){var ab=xa();var cb=q();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)w.push(Z),Z=e,ya=xa(),Ka=Qa(),Ka!==b?(ab=xa(),cb=q(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);Z={type:"expression-list"};E=[E];for(ya=0;ya<w.length;ya++)E.push(w[ya][3]);Z.value=E;w=Z}else e=w,w=b;return w}function q(){var w=
e;var E=J();if(E!==b){w=[];var Z=e;var ya=xa();var Ka=ka();if(Ka!==b){var ab=xa();var cb=J();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)w.push(Z),Z=e,ya=xa(),Ka=ka(),Ka!==b?(ab=xa(),cb=J(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);w=qb(E,w)}else e=w,w=b;return w}function J(){var w=e;var E=G();if(E!==b){w=[];var Z=e;var ya=xa();var Ka=ea();if(Ka!==b){var ab=xa();var cb=G();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)w.push(Z),Z=e,ya=xa(),Ka=ea(),Ka!==b?(ab=xa(),
cb=G(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);w=qb(E,w)}else e=w,w=b;return w}function G(){var w=e;var E=u();if(E===b){E=e;if(33===v.charCodeAt(e)){var Z=Pb;e++}else Z=b,0===ua&&m(jd);if(Z!==b){var ya=e;ua++;if(61===v.charCodeAt(e)){var Ka=nb;e++}else Ka=b,0===ua&&m(id);ua--;Ka===b?ya=void 0:(e=ya,ya=b);ya!==b?E=Z=[Z,ya]:(e=E,E=b)}else e=E,E=b}E!==b?(Z=xa(),ya=G(),ya!==b?w={type:"unary-expression",operator:"NOT",expr:ya}:(e=w,w=b)):(e=w,w=b);if(w===b){E=e;w=p();if(w!==b){xa();E=[];Z=e;ya=
xa();Ka=H();if(Ka!==b){var ab=xa();var cb=p();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;if(Z!==b)for(;Z!==b;)E.push(Z),Z=e,ya=xa(),Ka=H(),Ka!==b?(ab=xa(),cb=p(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);else E=b;E!==b&&(E={type:"arithmetic",tail:E});E===b&&(E=e,Z=B(),Z!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=d(),ya!==b?(xa(),Ka=Ra(),Ka!==b?E={op:Z,right:ya}:(e=E,E=b)):(e=E,E=b)):(e=E,E=b)):(e=E,E=b),E===b&&(E=e,Z=B(),Z!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=Ra(),ya!==b?E={op:Z,right:{type:"expression-list",
value:[]}}:(e=E,E=b)):(e=E,E=b)):(e=E,E=b),E===b&&(E=e,Z=B(),Z!==b?(xa(),ya=A(),ya!==b?E={op:Z,right:ya}:(e=E,E=b)):(e=E,E=b))),E===b&&(E=e,Ka=u(),Ka!==b?(xa(),Z=va(),Z!==b?(xa(),ya=p(),ya!==b?(xa(),ab=ea(),ab!==b?(xa(),Ka=p(),Ka!==b?E={op:"NOT"+Z,right:{type:"expression-list",value:[ya,Ka]}}:(e=E,E=b)):(e=E,E=b)):(e=E,E=b)):(e=E,E=b)):(e=E,E=b),E===b&&(E=e,Ka=va(),Ka!==b?(xa(),Z=p(),Z!==b?(xa(),ya=ea(),ya!==b?(xa(),ab=p(),ab!==b?E={op:Ka,right:{type:"expression-list",value:[Z,ab]}}:(e=E,E=b)):(e=
E,E=b)):(e=E,E=b)):(e=E,E=b)),E===b&&(E=e,Z=lb(),Z!==b?(xa(),ya=u(),ya!==b?(xa(),ya=p(),ya!==b?E={op:Z+"NOT",right:ya}:(e=E,E=b)):(e=E,E=b)):(e=E,E=b),E===b&&(E=e,Z=lb(),Z!==b?(xa(),ya=p(),ya!==b?E={op:Z,right:ya}:(e=E,E=b)):(e=E,E=b)),E===b&&(E=e,Z=T(),Z!==b?(xa(),ya=za(),ya!==b?(xa(),Ka=e,v.substr(e,6).toLowerCase()===Na?(ab=v.substr(e,6),e+=6):(ab=b,0===ua&&m(Ke)),ab!==b?(ab=e,ua++,cb=Q(),ua--,cb===b?ab=void 0:(e=ab,ab=b),ab!==b?Ka="ESCAPE":(e=Ka,Ka=b)):(e=Ka,Ka=b),Ka!==b?(xa(),Ka=Ea(),Ka!==b?
E={op:Z,right:ya,escape:Ka.value}:(e=E,E=b)):(e=E,E=b)):(e=E,E=b)):(e=E,E=b),E===b&&(E=e,Z=T(),Z!==b?(xa(),ya=za(),ya!==b?E={op:Z,right:ya,escape:""}:(e=E,E=b)):(e=E,E=b))))));E===b&&(E=null);""==E||void 0==E||null==E?E=w:(Z=null,E=Z="arithmetic"==E.type?qb(w,E.tail):ub(E.op,w,E.right,E.escape))}else e=E,E=b;w=E}return w}function H(){if(v.substr(e,2)===Wb){var w=Wb;e+=2}else w=b,0===ua&&m(md);w===b&&(62===v.charCodeAt(e)?(w=oa,e++):(w=b,0===ua&&m(ld)),w===b&&(v.substr(e,2)===Yb?(w=Yb,e+=2):(w=b,0===
ua&&m(oe)),w===b&&(v.substr(e,2)===Sb?(w=Sb,e+=2):(w=b,0===ua&&m(Ed)),w===b&&(60===v.charCodeAt(e)?(w=zb,e++):(w=b,0===ua&&m(qe)),w===b&&(61===v.charCodeAt(e)?(w=nb,e++):(w=b,0===ua&&m(id)),w===b&&(v.substr(e,2)===Kb?(w=Kb,e+=2):(w=b,0===ua&&m(pe))))))));return w}function T(){var w=w=e;var E=u();if(E!==b){var Z=xa();var ya=c();ya!==b?w=E=[E,Z,ya]:(e=w,w=b)}else e=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=c());return w}function B(){var w=w=e;var E=u();if(E!==b){var Z=xa();var ya=ib();ya!==b?w=E=[E,
Z,ya]:(e=w,w=b)}else e=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=ib());return w}function p(){var w=e;var E=z();if(E!==b){w=[];var Z=e;var ya=xa();var Ka=t();if(Ka!==b){var ab=xa();var cb=z();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)w.push(Z),Z=e,ya=xa(),Ka=t(),Ka!==b?(ab=xa(),cb=z(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);w=qb(E,w)}else e=w,w=b;return w}function t(){if(43===v.charCodeAt(e)){var w=Zb;e++}else w=b,0===ua&&m(Kc);w===b&&(45===v.charCodeAt(e)?(w=Xb,e++):(w=b,
0===ua&&m(Tc)),w===b&&(v.substr(e,2)===kc?(w=kc,e+=2):(w=b,0===ua&&m(Fb))));return w}function z(){var w=e;var E=D();if(E!==b){w=[];var Z=e;var ya=xa();var Ka=O();if(Ka!==b){var ab=xa();var cb=D();cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)}else e=Z,Z=b;for(;Z!==b;)w.push(Z),Z=e,ya=xa(),Ka=O(),Ka!==b?(ab=xa(),cb=D(),cb!==b?Z=ya=[ya,Ka,ab,cb]:(e=Z,Z=b)):(e=Z,Z=b);w=qb(E,w)}else e=w,w=b;return w}function O(){if(42===v.charCodeAt(e)){var w=Hb;e++}else w=b,0===ua&&m(Qb);w===b&&(47===v.charCodeAt(e)?(w=Rb,e++):
(w=b,0===ua&&m(Ld)));return w}function D(){var w=Ea();if(w===b){var E=e;var Z=e;var ya=Oa();if(ya!==b){var Ka=Sa();if(Ka!==b){var ab=$a();ab!==b?Z=parseFloat(ya+Ka+ab):(e=Z,Z=b)}else e=Z,Z=b}else e=Z,Z=b;Z===b&&(Z=e,ya=Oa(),ya!==b?(Ka=Sa(),Ka!==b?Z=parseFloat(ya+Ka):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,ya=Oa(),ya!==b?(Ka=$a(),Ka!==b?Z=parseFloat(ya+Ka):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,ya=Oa(),ya!==b&&(ya=parseFloat(ya)),Z=ya)));var cb=Z;if(cb!==b){var Sd=e;ua++;var Kf=P();ua--;Kf===b?Sd=void 0:(e=Sd,
Sd=b);Sd!==b?E={type:"number",value:cb}:(e=E,E=b)}else e=E,E=b;w=E;if(w===b){var Xc=e;var rc=e;if(v.substr(e,4).toLowerCase()===ha){var Td=v.substr(e,4);e+=4}else Td=b,0===ua&&m(Fe);if(Td!==b){var Yc=e;ua++;var Lf=Q();ua--;Lf===b?Yc=void 0:(e=Yc,Yc=b);Yc!==b?rc=Td=[Td,Yc]:(e=rc,rc=b)}else e=rc,rc=b;var mc=rc;mc!==b&&(mc={type:"boolean",value:!0});Xc=mc;if(Xc===b){Xc=e;var sc=e;if(v.substr(e,5).toLowerCase()===Y){var Ud=v.substr(e,5);e+=5}else Ud=b,0===ua&&m(Ge);if(Ud!==b){var Zc=e;ua++;var Mf=Q();
ua--;Mf===b?Zc=void 0:(e=Zc,Zc=b);Zc!==b?sc=Ud=[Ud,Zc]:(e=sc,sc=b)}else e=sc,sc=b;mc=sc;mc!==b&&(mc={type:"boolean",value:!1});Xc=mc}w=Xc;if(w===b){var tc=e;if(v.substr(e,4).toLowerCase()===V){var Vd=v.substr(e,4);e+=4}else Vd=b,0===ua&&m(Ee);if(Vd!==b){var $c=e;ua++;var Nf=Q();ua--;Nf===b?$c=void 0:(e=$c,$c=b);$c!==b?tc=Vd=[Vd,$c]:(e=tc,tc=b)}else e=tc,tc=b;var Ye=tc;Ye!==b&&(Ye={type:"null",value:null});w=Ye;if(w===b){var uc=e;if(X()!==b){xa();var kf=za();kf!==b?uc={type:"date",value:kf.value}:
(e=uc,uc=b)}else e=uc,uc=b;w=uc;if(w===b){var vc=e;if(da()!==b){xa();var lf=za();lf!==b?vc={type:"timestamp",value:lf.value}:(e=vc,vc=b)}else e=vc,vc=b;w=vc;if(w===b){var Cb=e;var Ze=ia();if(Ze!==b){xa();if(45===v.charCodeAt(e)){var dc=Xb;e++}else dc=b,0===ua&&m(Tc);dc===b&&(43===v.charCodeAt(e)?(dc=Zb,e++):(dc=b,0===ua&&m(Kc)));if(dc!==b){xa();var ad=za();if(ad!==b){xa();var mf=r();mf!==b?Cb={type:"interval",value:ad,qualifier:mf,op:dc}:(e=Cb,Cb=b)}else e=Cb,Cb=b}else e=Cb,Cb=b}else e=Cb,Cb=b;Cb===
b&&(Cb=e,Ze=ia(),Ze!==b?(xa(),dc=za(),dc!==b?(xa(),ad=r(),ad!==b?Cb={type:"interval",value:dc,qualifier:ad,op:""}:(e=Cb,Cb=b)):(e=Cb,Cb=b)):(e=Cb,Cb=b));w=Cb}}}}}}var ob=w;if(ob===b){var Lb=e;var wc=e;if(v.substr(e,7).toLowerCase()===sd){var nf=v.substr(e,7);e+=7}else nf=b,0===ua&&m(Re);if(nf!==b){var Wd=e;ua++;var Of=Q();ua--;Of===b?Wd=void 0:(e=Wd,Wd=b);Wd!==b?wc="EXTRACT":(e=wc,wc=b)}else e=wc,wc=b;if(wc!==b){xa();var Pf=Ga();if(Pf!==b){xa();var Ub=na();Ub===b&&(Ub=ra(),Ub===b&&(Ub=U(),Ub===b&&
(Ub=ba(),Ub===b&&(Ub=pa(),Ub===b&&(Ub=wa())))));var of=Ub;if(of!==b){xa();var Qf=y();if(Qf!==b){xa();var pf=q();if(pf!==b){xa();var Rf=Ra();Rf!==b?Lb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:of},pf]}}:(e=Lb,Lb=b)}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b}else e=Lb,Lb=b;ob=Lb;if(ob===b){var Mb=e;var xc=e;if(v.substr(e,9).toLowerCase()===rd){var qf=v.substr(e,9);e+=9}else qf=b,0===ua&&m(Qe);if(qf!==b){var Xd=e;ua++;var Sf=Q();ua--;Sf===
b?Xd=void 0:(e=Xd,Xd=b);Xd!==b?xc="SUBSTRING":(e=xc,xc=b)}else e=xc,xc=b;if(xc!==b){xa();var Tf=Ga();if(Tf!==b){xa();var $e=q();if($e!==b){xa();var Uf=y();if(Uf!==b){xa();var af=q();if(af!==b){xa();var ec=e;var yc=e;if(v.substr(e,3).toLowerCase()===Ib){var rf=v.substr(e,3);e+=3}else rf=b,0===ua&&m(Pe);if(rf!==b){var Yd=e;ua++;var Vf=Q();ua--;Vf===b?Yd=void 0:(e=Yd,Yd=b);Yd!==b?yc="FOR":(e=yc,yc=b)}else e=yc,yc=b;var bd=yc;if(bd!==b){var Wf=xa();var sf=q();if(sf!==b){var Xf=xa();ec=bd=[bd,Wf,sf,Xf]}else e=
ec,ec=b}else e=ec,ec=b;ec===b&&(ec=null);bd=Ra();bd!==b?Mb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[$e,af,ec[2]]:[$e,af]}}:(e=Mb,Mb=b)}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b}else e=Mb,Mb=b;ob=Mb;if(ob===b){var sb=e;var bf=N();if(bf!==b){xa();var cf=Ga();if(cf!==b){xa();var fc=g();fc===b&&(fc=null);xa();var cd=q();if(cd!==b){xa();var df=y();if(df!==b){xa();var tf=q();if(tf!==b){xa();var Yf=Ra();Yf!==b?sb={type:"function",name:"trim",args:{type:"expression-list",
value:[{type:"string",value:null==fc?"BOTH":fc},cd,tf]}}:(e=sb,sb=b)}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b}else e=sb,sb=b;sb===b&&(sb=e,bf=N(),bf!==b?(xa(),cf=Ga(),cf!==b?(xa(),fc=g(),fc===b&&(fc=null),xa(),cd=q(),cd!==b?(xa(),df=Ra(),df!==b?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd]}}:(e=sb,sb=b)):(e=sb,sb=b)):(e=sb,sb=b)):(e=sb,sb=b));ob=sb;if(ob===b){var Nb=e;var zc=e;if(v.substr(e,8).toLowerCase()===ud){var uf=
v.substr(e,8);e+=8}else uf=b,0===ua&&m(Se);if(uf!==b){var Zd=e;ua++;var Zf=Q();ua--;Zf===b?Zd=void 0:(e=Zd,Zd=b);Zd!==b?zc="POSITION":(e=zc,zc=b)}else e=zc,zc=b;if(zc!==b){xa();var $f=Ga();if($f!==b){xa();var vf=q();if(vf!==b){xa();var ag=ib();if(ag!==b){xa();var wf=q();if(wf!==b){xa();var bg=Ra();bg!==b?Nb={type:"function",name:"position",args:{type:"expression-list",value:[vf,wf]}}:(e=Nb,Nb=b)}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b}else e=Nb,Nb=b;ob=Nb;if(ob===b){var Ob=e;var Ac=
e;if(v.substr(e,4).toLowerCase()===ve){var xf=v.substr(e,4);e+=4}else xf=b,0===ua&&m(lc);if(xf!==b){var $d=e;ua++;var cg=Q();ua--;cg===b?$d=void 0:(e=$d,$d=b);$d!==b?Ac="CAST":(e=Ac,Ac=b)}else e=Ac,Ac=b;if(Ac!==b){xa();var dg=Ga();if(dg!==b){xa();var yf=q();if(yf!==b){xa();var Bc=e;if(v.substr(e,2).toLowerCase()===Ad){var zf=v.substr(e,2);e+=2}else zf=b,0===ua&&m(Lc);if(zf!==b){var ae=e;ua++;var eg=Q();ua--;eg===b?ae=void 0:(e=ae,ae=b);ae!==b?Bc="AS":(e=Bc,Bc=b)}else e=Bc,Bc=b;var fg=Bc;if(fg!==b){xa();
var pb=e;var Cc=e;if(v.substr(e,7).toLowerCase()===Bd){var Af=v.substr(e,7);e+=7}else Af=b,0===ua&&m(nd);if(Af!==b){var be=e;ua++;var gg=Q();ua--;gg===b?be=void 0:(e=be,be=b);be!==b?Cc="INTEGER":(e=Cc,Cc=b)}else e=Cc,Cc=b;var tb=Cc;tb!==b&&(tb={type:"data-type",value:{type:"integer"}});pb=tb;if(pb===b){pb=e;var Dc=e;if(v.substr(e,8).toLowerCase()===Cd){var Bf=v.substr(e,8);e+=8}else Bf=b,0===ua&&m(te);if(Bf!==b){var ce=e;ua++;var hg=Q();ua--;hg===b?ce=void 0:(e=ce,ce=b);ce!==b?Dc="SMALLINT":(e=Dc,
Dc=b)}else e=Dc,Dc=b;tb=Dc;tb!==b&&(tb={type:"data-type",value:{type:"smallint"}});pb=tb;if(pb===b){pb=e;var Ec=e;if(v.substr(e,5).toLowerCase()===Dd){var Cf=v.substr(e,5);e+=5}else Cf=b,0===ua&&m(od);if(Cf!==b){var de=e;ua++;var ig=Q();ua--;ig===b?de=void 0:(e=de,de=b);de!==b?Ec="FLOAT":(e=Ec,Ec=b)}else e=Ec,Ec=b;tb=Ec;tb!==b&&(tb={type:"data-type",value:{type:"float"}});pb=tb;if(pb===b){pb=e;var Fc=e;if(v.substr(e,4).toLowerCase()===ic){var Df=v.substr(e,4);e+=4}else Df=b,0===ua&&m(Mc);if(Df!==
b){var ee=e;ua++;var jg=Q();ua--;jg===b?ee=void 0:(e=ee,ee=b);ee!==b?Fc="REAL":(e=Fc,Fc=b)}else e=Fc,Fc=b;tb=Fc;tb!==b&&(tb={type:"data-type",value:{type:"real"}});pb=tb;if(pb===b&&(pb=e,tb=X(),tb!==b&&(tb={type:"data-type",value:{type:"date"}}),pb=tb,pb===b&&(pb=e,tb=da(),tb!==b&&(tb={type:"data-type",value:{type:"timestamp"}}),pb=tb,pb===b))){pb=e;var Gc=e;if(v.substr(e,7).toLowerCase()===Qc){var Ef=v.substr(e,7);e+=7}else Ef=b,0===ua&&m(ue);if(Ef!==b){var fe=e;ua++;var kg=Q();ua--;kg===b?fe=void 0:
(e=fe,fe=b);fe!==b?Gc="VARCHAR":(e=Gc,Gc=b)}else e=Gc,Gc=b;tb=Gc;if(tb!==b){xa();var lg=Ga();if(lg!==b){xa();var Ff=Ta();if(Ff!==b){xa();var mg=Ra();mg!==b?pb={type:"data-type",value:{type:"varchar",size:parseInt(Ff)}}:(e=pb,pb=b)}else e=pb,pb=b}else e=pb,pb=b}else e=pb,pb=b}}}}var Gf=pb;if(Gf!==b){xa();var ng=Ra();ng!==b?Ob={type:"function",name:"cast",args:{type:"expression-list",value:[yf,Gf]}}:(e=Ob,Ob=b)}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b}else e=Ob,Ob=b;ob=Ob;if(ob===
b){var jc=e;var ge;var Vb=e;Vb=ge=F();if(Vb===b)if(Vb=e,96===v.charCodeAt(e)?(ge=hd,e++):(ge=b,0===ua&&m(Ia)),ge!==b){var he=[];if(kd.test(v.charAt(e))){var gc=v.charAt(e);e++}else gc=b,0===ua&&m(Ma);if(gc!==b)for(;gc!==b;)he.push(gc),kd.test(v.charAt(e))?(gc=v.charAt(e),e++):(gc=b,0===ua&&m(Ma));else he=b;he!==b?(96===v.charCodeAt(e)?(gc=hd,e++):(gc=b,0===ua&&m(Ia)),gc!==b?Vb=he.join(""):(e=Vb,Vb=b)):(e=Vb,Vb=b)}else e=Vb,Vb=b;var Hf=Vb;if(Hf!==b){xa();var og=Ga();if(og!==b){xa();var ie=d();ie===
b&&(ie=null);xa();var pg=Ra();pg!==b?jc={type:"function",name:Hf,args:ie?ie:{type:"expression-list",value:[]}}:(e=jc,jc=b)}else e=jc,jc=b}else e=jc,jc=b;ob=jc;if(ob===b){var ac;var Db=e;var ef=Ba();if(ef!==b){xa();var dd=q();if(dd!==b){xa();var ed=[];for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();var je=La();je!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(e=Db,Db=b)}else e=Db,Db=b}else e=Db,Db=b;if(Db===b)if(Db=e,ef=Ba(),ef!==b)if(xa(),dd=q(),dd!==b){xa();ed=[];
for(ac=Fa();ac!==b;)ed.push(ac),ac=Fa();ac=xa();je=Ua();if(je!==b){xa();var qg=La();qg!==b?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:je.value}:(e=Db,Db=b)}else e=Db,Db=b}else e=Db,Db=b;else e=Db,Db=b;var ff=Db;if(ff===b){var bc;var Jb=e;var gf=Ba();if(gf!==b){xa();var fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();var ke=La();ke!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:null}:(e=Jb,Jb=b)}else e=Jb,Jb=b;if(Jb===b)if(Jb=e,gf=Ba(),gf!==b){xa();
fd=[];for(bc=Ha();bc!==b;)fd.push(bc),bc=Ha();bc=xa();ke=Ua();if(ke!==b){xa();var rg=La();rg!==b?Jb={type:"case-expression",format:"searched",clauses:fd,else:ke.value}:(e=Jb,Jb=b)}else e=Jb,Jb=b}else e=Jb,Jb=b;ff=Jb}ob=ff;if(ob===b){var le;var me=e;var If=P();if(If!==b){var Jf=[];for(le=C();le!==b;)Jf.push(le),le=C();me=If+Jf.join("")}else e=me,me=b;var ne=me;if(ne!==b){var hf=ne;ne=/^CURRENT_DATE$/i.test(hf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hf)?{type:"current-time",mode:"timestamp"}:
{type:"column-reference",table:"",column:hf}}ob=ne;if(ob===b&&(ob=A(),ob===b)){ob=e;var sg=Ga();if(sg!==b){xa();var jf=q();if(jf!==b){xa();var tg=Ra();tg!==b?(jf.paren=!0,ob=jf):(e=ob,ob=b)}else e=ob,ob=b}else e=ob,ob=b}}}}}}}}}return ob}function F(){var w;var E=e;var Z=P();if(Z!==b){E=[];for(w=Q();w!==b;)E.push(w),w=Q();E=Z+E.join("")}else e=E,E=b;return E}function P(){if(Fd.test(v.charAt(e))){var w=v.charAt(e);e++}else w=b,0===ua&&m(Md);return w}function Q(){if(Gd.test(v.charAt(e))){var w=v.charAt(e);
e++}else w=b,0===ua&&m(Uc);return w}function C(){if(Hd.test(v.charAt(e))){var w=v.charAt(e);e++}else w=b,0===ua&&m(Nd);return w}function A(){var w=e;if(64===v.charCodeAt(e)){var E=fb;e++}else E=b,0===ua&&m(Vc);if(E!==b){var Z=F();Z!==b?w=E=[E,Z]:(e=w,w=b)}else e=w,w=b;w!==b&&(w={type:"parameter",value:w[1]});return w}function g(){var w=e;if(v.substr(e,7).toLowerCase()===xd){var E=v.substr(e,7);e+=7}else E=b,0===ua&&m(se);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="LEADING":
(e=w,w=b)}else e=w,w=b;w===b&&(w=e,v.substr(e,8).toLowerCase()===yd?(E=v.substr(e,8),e+=8):(E=b,0===ua&&m(eb)),E!==b?(E=e,ua++,Z=Q(),ua--,Z===b?E=void 0:(e=E,E=b),E!==b?w="TRAILING":(e=w,w=b)):(e=w,w=b),w===b&&(w=e,v.substr(e,4).toLowerCase()===zd?(E=v.substr(e,4),e+=4):(E=b,0===ua&&m(wb)),E!==b?(E=e,ua++,Z=Q(),ua--,Z===b?E=void 0:(e=E,E=b),E!==b?w="BOTH":(e=w,w=b)):(e=w,w=b)));return w}function r(){var w=e;var E=e;var Z=W();if(Z!==b){xa();var ya=Ga();if(ya!==b)if(xa(),ya=ta(),ya!==b){xa();var Ka=
Ra();Ka!==b?E={type:"interval-period",period:Z.value,precision:ya,secondary:null}:(e=E,E=b)}else e=E,E=b;else e=E,E=b}else e=E,E=b;E===b&&(E=e,Z=W(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null}),E=Z);if(E!==b)if(xa(),Z=e,v.substr(e,2).toLowerCase()===nc?(ya=v.substr(e,2),e+=2):(ya=b,0===ua&&m(Nc)),ya!==b?(ya=e,ua++,Ka=Q(),ua--,Ka===b?ya=void 0:(e=ya,ya=b),ya!==b?Z="TO":(e=Z,Z=b)):(e=Z,Z=b),Z!==b){xa();Z=e;ya=W();ya!==b&&(ya={type:"interval-period",period:ya.value,
precision:null,secondary:null});Z=ya;if(Z===b){Z=e;ya=wa();if(ya!==b)if(xa(),ya=Ga(),ya!==b)if(xa(),ya=ta(),ya!==b)if(xa(),Ka=Qa(),Ka!==b)if(xa(),Ka=ja(),Ka!==b){xa();var ab=Ra();ab!==b?Z={type:"interval-period",period:"second",precision:ya,secondary:Ka}:(e=Z,Z=b)}else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;else e=Z,Z=b;Z===b&&(Z=e,ya=wa(),ya!==b?(xa(),ya=Ga(),ya!==b?(xa(),ya=ta(),ya!==b?(xa(),Ka=Ra(),Ka!==b?Z={type:"interval-period",period:"second",precision:ya,secondary:null}:(e=Z,Z=b)):
(e=Z,Z=b)):(e=Z,Z=b)):(e=Z,Z=b),Z===b&&(Z=e,ya=wa(),ya!==b&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),Z=ya))}Z!==b?w={type:"interval-qualifier",start:E,end:Z}:(e=w,w=b)}else e=w,w=b;else e=w,w=b;w===b&&(w=e,Z=W(),Z!==b?(xa(),E=Ga(),E!==b?(xa(),E=ja(),E!==b?(xa(),ya=Ra(),ya!==b?w={type:"interval-period",period:Z.value,precision:E,secondary:null}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,Z=W(),Z!==b&&(Z={type:"interval-period",period:Z.value,precision:null,
secondary:null}),w=Z,w===b&&(w=e,Z=wa(),Z!==b?(xa(),E=Ga(),E!==b?(xa(),E=ta(),E!==b?(xa(),ya=Qa(),ya!==b?(xa(),Z=ja(),Z!==b?(xa(),ya=Ra(),ya!==b?w={type:"interval-period",period:"second",precision:E,secondary:Z}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,Z=wa(),Z!==b?(xa(),E=Ga(),E!==b?(xa(),E=ja(),E!==b?(xa(),ya=Ra(),ya!==b?w={type:"interval-period",period:"second",precision:E,secondary:null}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,Z=wa(),Z!==b&&(Z=
{type:"interval-period",period:"second",precision:null,secondary:null}),w=Z)))));return w}function W(){var w=e;w=U();w!==b&&(w={type:"string",value:"day"});w===b&&(w=e,w=ba(),w!==b&&(w={type:"string",value:"hour"}),w===b&&(w=e,w=pa(),w!==b&&(w={type:"string",value:"minute"}),w===b&&(w=e,w=ra(),w!==b&&(w={type:"string",value:"month"}),w===b&&(w=e,w=na(),w!==b&&(w={type:"string",value:"year"})))));return w}function ja(){var w=Ta();w!==b&&(w=parseFloat(w));return w}function ta(){var w=Ta();w!==b&&(w=
parseFloat(w));return w}function za(){var w=Ea();w===b&&(w=A());return w}function Ea(){var w=e;if(39===v.charCodeAt(e)){var E=Ab;e++}else E=b,0===ua&&m(Od);E===b&&(v.substr(e,2)===Bb?(E=Bb,e+=2):(E=b,0===ua&&m(Ae)));if(E!==b){E=[];var Z=e;v.substr(e,2)===Ya?(Z=Ya,e+=2):(Z=b,0===ua&&m(Wc));Z!==b&&(Z="'");Z===b&&(Sc.test(v.charAt(e))?(Z=v.charAt(e),e++):(Z=b,0===ua&&m(Pd)));for(;Z!==b;)E.push(Z),Z=e,v.substr(e,2)===Ya?(Z=Ya,e+=2):(Z=b,0===ua&&m(Wc)),Z!==b&&(Z="'"),Z===b&&(Sc.test(v.charAt(e))?(Z=v.charAt(e),
e++):(Z=b,0===ua&&m(Pd)));39===v.charCodeAt(e)?(Z=Ab,e++):(Z=b,0===ua&&m(Od));Z!==b?w={type:"string",value:E.join("")}:(e=w,w=b)}else e=w,w=b;return w}function Ha(){var w=e;if(Ja()!==b){xa();var E=q();if(E!==b){xa();var Z=Pa();Z!==b?(xa(),Z=q(),Z!==b?w={type:"when-clause",operand:E,value:Z}:(e=w,w=b)):(e=w,w=b)}else e=w,w=b}else e=w,w=b;return w}function Fa(){var w=e;if(Ja()!==b){xa();var E=q();if(E!==b){xa();var Z=Pa();Z!==b?(xa(),Z=q(),Z!==b?w={type:"when-clause",operand:E,value:Z}:(e=w,w=b)):(e=
w,w=b)}else e=w,w=b}else e=w,w=b;return w}function Ua(){var w=e;var E=e;if(v.substr(e,4).toLowerCase()===ze){var Z=v.substr(e,4);e+=4}else Z=b,0===ua&&m(M);if(Z!==b){Z=e;ua++;var ya=Q();ua--;ya===b?Z=void 0:(e=Z,Z=b);Z!==b?E="ELSE":(e=E,E=b)}else e=E,E=b;E!==b?(xa(),E=q(),E!==b?w={type:"else-clause",value:E}:(e=w,w=b)):(e=w,w=b);return w}function Oa(){var w=Ta();if(w===b){w=e;if(45===v.charCodeAt(e)){var E=Xb;e++}else E=b,0===ua&&m(Tc);E===b&&(43===v.charCodeAt(e)?(E=Zb,e++):(E=b,0===ua&&m(Kc)));
if(E!==b){var Z=Ta();Z!==b?w=E[0]+Z:(e=w,w=b)}else e=w,w=b}return w}function Sa(){var w=e;if(46===v.charCodeAt(e)){var E=hc;e++}else E=b,0===ua&&m(Be);E!==b?(w=Ta(),w===b&&(w=null),w="."+(null!=w?w:"")):(e=w,w=b);return w}function $a(){var w;var E=w=e;if(Jd.test(v.charAt(e))){var Z=v.charAt(e);e++}else Z=b,0===ua&&m(re);Z!==b?(Kd.test(v.charAt(e))?(E=v.charAt(e),e++):(E=b,0===ua&&m(De)),E===b&&(E=null),E="e"+(null===E?"":E)):(e=E,E=b);E!==b?(Z=Ta(),Z!==b?w=E+Z:(e=w,w=b)):(e=w,w=b);return w}function Ta(){var w=
[];var E=jb();if(E!==b)for(;E!==b;)w.push(E),E=jb();else w=b;w!==b&&(w=w.join(""));return w}function jb(){if(Id.test(v.charAt(e))){var w=v.charAt(e);e++}else w=b,0===ua&&m(Ce);return w}function ib(){var w=e;if(v.substr(e,2).toLowerCase()===qa){var E=v.substr(e,2);e+=2}else E=b,0===ua&&m(He);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="IN":(e=w,w=b)}else e=w,w=b;return w}function lb(){var w=e;if(v.substr(e,2).toLowerCase()===Ca){var E=v.substr(e,2);e+=2}else E=b,0===ua&&m(Ie);
if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="IS":(e=w,w=b)}else e=w,w=b;return w}function c(){var w=e;if(v.substr(e,4).toLowerCase()===Da){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Je);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="LIKE":(e=w,w=b)}else e=w,w=b;return w}function u(){var w=e;if(v.substr(e,3).toLowerCase()===Va){var E=v.substr(e,3);e+=3}else E=b,0===ua&&m(Qd);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="NOT":(e=w,w=
b)}else e=w,w=b;return w}function ea(){var w=e;if(v.substr(e,3).toLowerCase()===mb){var E=v.substr(e,3);e+=3}else E=b,0===ua&&m(Le);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="AND":(e=w,w=b)}else e=w,w=b;return w}function ka(){var w=e;if(v.substr(e,2).toLowerCase()===kb){var E=v.substr(e,2);e+=2}else E=b,0===ua&&m(Me);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="OR":(e=w,w=b)}else e=w,w=b;return w}function va(){var w=e;if(v.substr(e,7).toLowerCase()===
hb){var E=v.substr(e,7);e+=7}else E=b,0===ua&&m(Ne);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="BETWEEN":(e=w,w=b)}else e=w,w=b;return w}function y(){var w=e;if(v.substr(e,4).toLowerCase()===xb){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Oe);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="FROM":(e=w,w=b)}else e=w,w=b;return w}function N(){var w=e;if(v.substr(e,4).toLowerCase()===td){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Rd);if(E!==b){E=e;ua++;var Z=
Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="TRIM":(e=w,w=b)}else e=w,w=b;return w}function da(){var w=e;if(v.substr(e,9).toLowerCase()===vd){var E=v.substr(e,9);e+=9}else E=b,0===ua&&m(Te);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="TIMESTAMP":(e=w,w=b)}else e=w,w=b;return w}function X(){var w=e;if(v.substr(e,4).toLowerCase()===wd){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(cc);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="DATE":(e=w,w=b)}else e=w,w=b;
return w}function ia(){var w=e;if(v.substr(e,8).toLowerCase()===oc){var E=v.substr(e,8);e+=8}else E=b,0===ua&&m(Pc);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="INTERVAL":(e=w,w=b)}else e=w,w=b;return w}function na(){var w=e;if(v.substr(e,4).toLowerCase()===we){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Oc);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="YEAR":(e=w,w=b)}else e=w,w=b;return w}function ra(){var w=e;if(v.substr(e,5).toLowerCase()===pc){var E=
v.substr(e,5);e+=5}else E=b,0===ua&&m(qd);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="MONTH":(e=w,w=b)}else e=w,w=b;return w}function U(){var w=e;if(v.substr(e,3).toLowerCase()===Tb){var E=v.substr(e,3);e+=3}else E=b,0===ua&&m(Ue);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="DAY":(e=w,w=b)}else e=w,w=b;return w}function ba(){var w=e;if(v.substr(e,4).toLowerCase()===gd){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Ve);if(E!==b){E=e;ua++;var Z=Q();ua--;
Z===b?E=void 0:(e=E,E=b);E!==b?w="HOUR":(e=w,w=b)}else e=w,w=b;return w}function pa(){var w=e;if(v.substr(e,6).toLowerCase()===Hc){var E=v.substr(e,6);e+=6}else E=b,0===ua&&m(pd);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="MINUTE":(e=w,w=b)}else e=w,w=b;return w}function wa(){var w=e;if(v.substr(e,6).toLowerCase()===Ic){var E=v.substr(e,6);e+=6}else E=b,0===ua&&m(We);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="SECOND":(e=w,w=b)}else e=w,w=b;return w}
function Ba(){var w=e;if(v.substr(e,4).toLowerCase()===Jc){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(Xe);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="CASE":(e=w,w=b)}else e=w,w=b;return w}function La(){var w=e;if(v.substr(e,3).toLowerCase()===qc){var E=v.substr(e,3);e+=3}else E=b,0===ua&&m(Za);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="END":(e=w,w=b)}else e=w,w=b;return w}function Ja(){var w=e;if(v.substr(e,4).toLowerCase()===xe){var E=v.substr(e,
4);e+=4}else E=b,0===ua&&m(a);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="WHEN":(e=w,w=b)}else e=w,w=b;return w}function Pa(){var w=e;if(v.substr(e,4).toLowerCase()===ye){var E=v.substr(e,4);e+=4}else E=b,0===ua&&m(h);if(E!==b){E=e;ua++;var Z=Q();ua--;Z===b?E=void 0:(e=E,E=b);E!==b?w="THEN":(e=w,w=b)}else e=w,w=b;return w}function Qa(){if(44===v.charCodeAt(e)){var w=rb;e++}else w=b,0===ua&&m(fa);return w}function Ga(){if(40===v.charCodeAt(e)){var w=Rc;e++}else w=b,0===ua&&
m(la);return w}function Ra(){if(41===v.charCodeAt(e)){var w=Eb;e++}else w=b,0===ua&&m(sa);return w}function xa(){var w;var E=[];for(w=vb();w!==b;)E.push(w),w=vb();return E}function vb(){if(yb.test(v.charAt(e))){var w=v.charAt(e);e++}else w=b,0===ua&&m(Aa);return w}function ub(w,E,Z,ya){w={type:"binary-expression",operator:w,left:E,right:Z};void 0!==ya&&(w.escape=ya);return w}function qb(w,E){for(var Z=0;Z<E.length;Z++)w=ub(E[Z][1],w,E[Z][3]);return w}l=void 0!==l?l:{};var b={},gb=l.grammarSource,
db={start:x},Gb=x,Pb="!",nb="\x3d",Wb="\x3e\x3d",oa="\x3e",Yb="\x3c\x3d",Sb="\x3c\x3e",zb="\x3c",Kb="!\x3d",Zb="+",Xb="-",kc="||",Hb="*",Rb="/",fb="@",Ab="'",Bb="N'",Ya="''",hc=".",V="null",ha="true",Y="false",qa="in",Ca="is",Da="like",Na="escape",Va="not",mb="and",kb="or",hb="between",xb="from",Ib="for",rd="substring",sd="extract",td="trim",ud="position",vd="timestamp",wd="date",xd="leading",yd="trailing",zd="both",ve="cast",Ad="as",Bd="integer",Cd="smallint",Dd="float",ic="real",Qc="varchar",nc=
"to",oc="interval",we="year",pc="month",Tb="day",gd="hour",Hc="minute",Ic="second",Jc="case",qc="end",xe="when",ye="then",ze="else",rb=",",Rc="(",Eb=")",hd="`",Fd=/^[A-Za-z_\x80-\uFFFF]/,Gd=/^[A-Za-z0-9_]/,Hd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sc=/^[^']/,Id=/^[0-9]/,Jd=/^[eE]/,Kd=/^[+\-]/,yb=/^[ \t\n\r]/,kd=/^[^`]/,jd=n("!",!1),id=n("\x3d",!1),md=n("\x3e\x3d",!1),ld=n("\x3e",!1),oe=n("\x3c\x3d",!1),Ed=n("\x3c\x3e",!1),qe=n("\x3c",!1),pe=n("!\x3d",!1),Kc=n("+",!1),Tc=n("-",!1),Fb=n("||",!1),Qb=n("*",!1),
Ld=n("/",!1),Md=K([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Uc=K([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=K([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Vc=n("@",!1),Od=n("'",!1),Ae=n("N'",!1),Wc=n("''",!1),Pd=K(["'"],!0,!1),Be=n(".",!1),Ce=K([["0","9"]],!1,!1),re=K(["e","E"],!1,!1),De=K(["+","-"],!1,!1),Ee=n("NULL",!0),Fe=n("TRUE",!0),Ge=n("FALSE",!0),He=n("IN",!0),Ie=n("IS",!0),Je=n("LIKE",!0),Ke=n("ESCAPE",!0),Qd=n("NOT",!0),Le=n("AND",!0),Me=n("OR",!0),Ne=
n("BETWEEN",!0),Oe=n("FROM",!0),Pe=n("FOR",!0),Qe=n("SUBSTRING",!0),Re=n("EXTRACT",!0),Rd=n("TRIM",!0),Se=n("POSITION",!0),Te=n("TIMESTAMP",!0),cc=n("DATE",!0),se=n("LEADING",!0),eb=n("TRAILING",!0),wb=n("BOTH",!0),lc=n("CAST",!0),Lc=n("AS",!0),nd=n("INTEGER",!0),te=n("SMALLINT",!0),od=n("FLOAT",!0),Mc=n("REAL",!0),ue=n("VARCHAR",!0),Nc=n("TO",!0),Pc=n("INTERVAL",!0),Oc=n("YEAR",!0),qd=n("MONTH",!0),Ue=n("DAY",!0),Ve=n("HOUR",!0),pd=n("MINUTE",!0),We=n("SECOND",!0),Xe=n("CASE",!0),Za=n("END",!0),
a=n("WHEN",!0),h=n("THEN",!0),M=n("ELSE",!0),fa=n(",",!1),la=n("(",!1),sa=n(")",!1),Aa=K([" ","\t","\n","\r"],!1,!1),Ia=n("`",!1),Ma=K(["`"],!0,!1),e=0,Wa=[{line:1,column:1}],Xa=0,bb=[],ua=0;if("startRule"in l){if(!(l.startRule in db))throw Error("Can't start parsing from rule \""+l.startRule+'".');Gb=db[l.startRule]}var $b=Gb();if($b!==b&&e===v.length)return $b;$b!==b&&e<v.length&&m({type:"end"});throw function(w,E,Z){return new R(R.buildMessage(w,E),w,E,Z)}(bb,Xa<v.length?v.charAt(Xa):null,Xa<v.length?
L(Xa,Xa+1):L(Xa,Xa));}}})})({get exports(){return ma},set exports(S){ma=S}});let aa=function(){function S(){}S.parse=function(R){return ma.parse(R)};return S}();k.WhereGrammar=aa;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.getDefaultExportFromCjs=
function(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f["default"]:f}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,
maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L,m,x){function d(H,T,B,p){const t=p.x-B.x;p=p.y-B.y;T=Math.min(1,Math.max(0,((T.x-B.x)*t+(T.y-B.y)*p)/(t*t+p*p)));H.x=B.x+t*T;H.y=B.y+p*T}function q(H,T){return H?T?4:3:T?3:2}let J=function(){function H(B,p,t){this.items=B;this.query=p;this.geometryType=t.geometryType;this.hasM=t.hasM;this.hasZ=t.hasZ;this.fieldsIndex=t.fieldsIndex;this.objectIdField=t.objectIdField;this.spatialReference=t.spatialReference;this.featureAdapter=t.featureAdapter}var T=H.prototype;
T.createQueryResponseForCount=function(){const B=new l(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return B.countDistinctValues(this.items);const {groupByFieldsForStatistics:p,having:t,outStatistics:z}=this.query;if(!p?.length)return 1;const O=new Map,D=new Map,F=new Set;for(const C of z){var {statisticType:P}=C;P="exceedslimit"!==P?C.onStatisticField:void 0;if(!D.has(P)){var Q=[];for(const A of p){const g=this._getAttributeValues(B,A,O);Q.push(g)}D.set(P,this._calculateUniqueValues(Q,
B.returnDistinctValues))}P=D.get(P);for(const A in P){const {data:g,items:r}=P[A];Q=g.join(",");t&&!B.validateItems(r,t)||F.add(Q)}}return F.size};T.createQueryResponse=function(){var B=ma._asyncToGenerator(function*(){let p;p=this.query.outStatistics?this.query.outStatistics.some(t=>"exceedslimit"===t.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const t=
this.query.geometry;v.isValid(this.query.outSR)&&!v.equals(t.spatialReference,this.query.outSR)?p.queryGeometry=ca.cleanFromGeometryEngine({spatialReference:this.query.outSR,...n.project(t,t.spatialReference,this.query.outSR)}):p.queryGeometry=ca.cleanFromGeometryEngine({spatialReference:this.query.outSR,...t})}return p});return function(){return B.apply(this,arguments)}}();T.createSnappingResponse=function(B,p){const t=this.featureAdapter,z=q(this.hasZ,this.hasM),{point:O,mode:D}=B,F="number"===
typeof B.distance?B.distance:B.distance.x,P="number"===typeof B.distance?B.distance:B.distance.y,Q={candidates:[]},C="esriGeometryPolygon"===this.geometryType;p=this._getPointCreator(D,this.spatialReference,p);const A=new G(null,0),g=new G(null,0),r={x:0,y:0,z:0};for(const Fa of this.items){var W=t.getGeometry(Fa);if(aa.isNone(W))continue;const {coords:Ua,lengths:Oa}=W;A.coords=Ua;g.coords=Ua;if(B.types&f.SnappingTypes.EDGE){W=0;for(var ja=0;ja<Oa.length;ja++){var ta=Oa[ja];for(var za=0;za<ta;za++,
W+=z){var Ea=A;Ea.coordsIndex=W;if(za!==ta-1){const Sa=g;Sa.coordsIndex=W+z;const $a=r;d(r,O,Ea,Sa);var Ha=(O.x-$a.x)/F;const Ta=(O.y-$a.y)/P;Ha=Ha*Ha+Ta*Ta;1>=Ha&&Q.candidates.push(K.makeEdgeCandidate(t.getObjectId(Fa),p($a),Math.sqrt(Ha),p(Ea),p(Sa)))}}}}if(B.types&f.SnappingTypes.VERTEX)for(W=C?Ua.length-z:Ua.length,ja=0;ja<W;ja+=z)ta=A,ta.coordsIndex=ja,za=(O.x-ta.x)/F,Ea=(O.y-ta.y)/P,za=za*za+Ea*Ea,1>=za&&Q.candidates.push(K.makeVertexCandidate(t.getObjectId(Fa),p(ta),Math.sqrt(za)))}Q.candidates.sort((Fa,
Ua)=>Fa.distance-Ua.distance);return Q};T._getPointCreator=function(B,p,t){const z=aa.isSome(t)&&!v.equals(p,t)?D=>n.project(D,p,t):D=>D,{hasZ:O}=this;return"3d"===B?O?({x:D,y:F,z:P})=>z({x:D,y:F,z:P}):({x:D,y:F})=>z({x:D,y:F,z:0}):({x:D,y:F})=>z({x:D,y:F})};T.createSummaryStatisticsResponse=function(){var B=ma._asyncToGenerator(function*(p){const {field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,minValue:P,maxValue:Q,scale:C}=p;p=this.fieldsIndex.isDateField(t);
var A=yield this._getDataValues({field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,scale:C});const g=m.isNullCountSupported({normalizationType:D,normalizationField:O,minValue:P,maxValue:Q}),r=this.fieldsIndex.get(t),W={value:.5,fieldType:r?.type};A=L.isStringField(r)?m.calculateStringStatistics({values:A,supportsNullCount:g,percentileParams:W}):m.calculateStatistics({values:A,minValue:P,maxValue:Q,useSampleStdDev:!D,supportsNullCount:g,percentileParams:W});return m.processSummaryStatisticsResult(A,
p)});return function(p){return B.apply(this,arguments)}}();T.createUniqueValuesResponse=function(){var B=ma._asyncToGenerator(function*(p){const {field:t,valueExpression:z,domains:O,returnAllCodedValues:D,scale:F}=p;var P=yield this._getDataValues({field:t,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:z,scale:F});P=m.calculateUniqueValuesCount(P);return m.createUVResult(P,O,D,p.fieldDelimiter)});return function(p){return B.apply(this,arguments)}}();T.createClassBreaksResponse=
function(){var B=ma._asyncToGenerator(function*(p){const {field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:Q,minValue:C,maxValue:A,numClasses:g,scale:r}=p;p=yield this._getDataValues({field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,scale:r});p=m.calculateClassBreaks(p,{field:t,normalizationField:O,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:Q,
minValue:C,maxValue:A,numClasses:g});return m.resolveCBResult(p,P)});return function(p){return B.apply(this,arguments)}}();T.createHistogramResponse=function(){var B=ma._asyncToGenerator(function*(p){const {field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:Q,minValue:C,maxValue:A,numBins:g,scale:r}=p;p=yield this._getDataValues({field:t,valueExpression:z,normalizationField:O,normalizationType:D,normalizationTotal:F,
scale:r});return m.calculateHistogram(p,{field:t,normalizationField:O,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:Q,minValue:C,maxValue:A,numBins:g})});return function(p){return B.apply(this,arguments)}}();T._sortFeatures=function(B,p,t){if(1<B.length&&p&&p.length)for(const z of p.reverse()){p=z.split(" ");const O=p[0],D=this.fieldsIndex.get(O);p=p[1]?"desc"===p[1].toLowerCase():!1;const F=m.getAttributeComparator(D?.type,p);B.sort((P,Q)=>{P=t(P,O,D);
Q=t(Q,O,D);return F(P,Q)})}};T._createFeatureQueryResponse=function(B){const p=this.items,{geometryType:t,hasM:z,hasZ:O,objectIdField:D,spatialReference:F}=this,{outFields:P,outSR:Q,quantizationParameters:C,resultRecordCount:A,resultOffset:g,returnZ:r,returnM:W}=B,ja=null!=A?p.length>(g||0)+A:!1,ta=P&&(P.includes("*")?[...this.fieldsIndex.fields]:P.map(za=>this.fieldsIndex.get(za)));return{exceededTransferLimit:ja,features:this._createFeatures(B,p),fields:ta,geometryType:t,hasM:z&&W,hasZ:O&&r,objectIdFieldName:D,
spatialReference:ca.cleanFromGeometryEngine(Q?Q:F),transform:C&&I.toQuantizationTransform(C)||null}};T._createFeatures=function(B,p){const t=new l(B,this.featureAdapter,this.fieldsIndex),{hasM:z,hasZ:O}=this,{orderByFields:D,quantizationParameters:F,returnGeometry:P,returnCentroid:Q,maxAllowableOffset:C,resultOffset:A,resultRecordCount:g,returnZ:r=!1,returnM:W=!1}=B,ja=O&&r,ta=z&&W;B=[];var za=0;p=[...p];this._sortFeatures(p,D,(Fa,Ua,Oa)=>t.getFieldValue(Fa,Ua,Oa));if(P||Q){var Ea=I.toQuantizationTransform(F)??
void 0;if(P&&!Q)for(var Ha of p)B[za++]={attributes:t.getAttributes(Ha),geometry:ca.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ha),C,Ea,ja,ta)};else if(!P&&Q)for(const Fa of p)B[za++]={attributes:t.getAttributes(Fa),centroid:ca.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea)};else for(const Fa of p)B[za++]={attributes:t.getAttributes(Fa),centroid:ca.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea),geometry:ca.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Fa),C,Ea,ja,ta)}}else for(Ea of p)(Ha=t.getAttributes(Ea))&&(B[za++]={attributes:Ha});za=A||0;null!=g&&(B=B.slice(za,Math.min(B.length,za+g)));return B};T._createExceedsLimitQueryResponse=function(B){var p=!1;let t=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY;p=Number.POSITIVE_INFINITY;for(const O of B.outStatistics??[])if("exceedslimit"===O.statisticType){t=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;z=null!=O.maxRecordCount?
O.maxRecordCount:Number.POSITIVE_INFINITY;p=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)p=this.items.length>t;else if(this.items.length>z)p=!0;else{B=q(this.hasZ,this.hasM);const O=this.featureAdapter;p=this.items.reduce((D,F)=>{F=O.getGeometry(F);return D+(aa.isSome(F)&&F.coords.length||0)},0)/B>p}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(p)}}]}};T._createStatisticsQueryResponse=function(){var B=ma._asyncToGenerator(function*(p){var t={attributes:{}};const z=[],O=new Map,D=new Map,F=new Map,P=new Map,Q=new l(p,this.featureAdapter,this.fieldsIndex);var C=p.outStatistics;const {groupByFieldsForStatistics:A,having:g,orderByFields:r}=p;p=A&&A.length;const W=!!p,ja=W?A[0]:null,ta=W&&!this.fieldsIndex.get(ja);for(const Ua of C??[]){const {outStatisticFieldName:Oa,statisticType:Sa}=Ua;C=Ua;var za=
"exceedslimit"!==Sa?Ua.onStatisticField:void 0;const $a="percentile_disc"===Sa||"percentile_cont"===Sa,Ta="EnvelopeAggregate"===Sa||"CentroidAggregate"===Sa||"ConvexHullAggregate"===Sa,jb=W&&1===p&&(za===ja||ta)&&"count"===Sa;if(W){if(!F.has(za)){var Ea=[];for(const ib of A){var Ha=this._getAttributeValues(Q,ib,O);Ea.push(Ha)}F.set(za,this._calculateUniqueValues(Ea,Ta?!1:Q.returnDistinctValues))}Ea=F.get(za);for(const ib in Ea){const {count:lb,data:c,items:u,itemPositions:ea}=Ea[ib];Ha=c.join(",");
if(!g||Q.validateItems(u,g)){const ka=P.get(Ha)||{attributes:{}};if(Ta){ka.aggregateGeometries||(ka.aggregateGeometries={});const {aggregateGeometries:y,outStatisticFieldName:N}=yield this._getAggregateGeometry(C,u);ka.aggregateGeometries[N]=y}else{var Fa=null;if(jb)Fa=lb;else{const y=this._getAttributeValues(Q,za,O);Fa=ea.map(N=>y[N]);Fa=$a&&"statisticParameters"in C?this._getPercentileValue(C,Fa):this._getStatisticValue(C,Fa,null,Q.returnDistinctValues)}ka.attributes[Oa]=Fa}let va=0;A.forEach((y,
N)=>ka.attributes[this.fieldsIndex.get(y)?y:`EXPR_${++va}`]=c[N]);P.set(Ha,ka)}}}else if(Ta){t.aggregateGeometries||(t.aggregateGeometries={});const {aggregateGeometries:ib,outStatisticFieldName:lb}=yield this._getAggregateGeometry(C,this.items);t.aggregateGeometries[lb]=ib}else za=this._getAttributeValues(Q,za,O),t.attributes[Oa]=$a&&"statisticParameters"in C?this._getPercentileValue(C,za):this._getStatisticValue(C,za,D,Q.returnDistinctValues);z.push({name:Oa,alias:Oa,type:"esriFieldTypeDouble"})}t=
W?Array.from(P.values()):[t];this._sortFeatures(t,r,(Ua,Oa)=>Ua.attributes[Oa]);return{fields:z,features:t}});return function(p){return B.apply(this,arguments)}}();T._getAggregateGeometry=function(){var B=ma._asyncToGenerator(function*(p,t){var z=yield new Promise((r,W)=>k(["../../../geometry/geometryEngineJSON"],r,W));const {statisticType:O,outStatisticFieldName:D}=p,{featureAdapter:F,spatialReference:P,geometryType:Q,hasZ:C,hasM:A}=this;t=t.map(r=>ca.getGeometry(Q,C,A,F.getGeometry(r)));const g=
z.convexHull(P,t,!0)[0];p={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===O?(z=g?R.getPolygonExtent(g):R.getGeometryExtent(z.union(P,t)),p.aggregateGeometries={...z,spatialReference:P},p.outStatisticFieldName=D||"extent"):"CentroidAggregate"===O?(z=g?S.polygonCentroid(g):S.extentCentroid(R.getGeometryExtent(z.union(P,t))),p.aggregateGeometries={x:z[0],y:z[1],spatialReference:P},p.outStatisticFieldName=D||"centroid"):"ConvexHullAggregate"===O&&(p.aggregateGeometries=g,p.outStatisticFieldName=
D||"convexHull");return p});return function(p,t){return B.apply(this,arguments)}}();T._getStatisticValue=function(B,p,t,z){const {onStatisticField:O,statisticType:D}=B;B=null;B=t?.has(O)?t.get(O):L.isStringField(this.fieldsIndex.get(O))?m.calculateStringStatistics({values:p,returnDistinct:z}):m.calculateStatistics({values:z?[...(new Set(p))]:p,minValue:null,maxValue:null,useSampleStdDev:!0});t&&t.set(O,B);return B["var"===D?"variance":D]};T._getPercentileValue=function(B,p){const {onStatisticField:t,
statisticParameters:z,statisticType:O}=B,{value:D,orderBy:F}=z;B=this.fieldsIndex.get(t);return m.calculatePercentile(p,{value:D,orderBy:F,fieldType:B?.type,isDiscrete:"percentile_disc"===O})};T._getAttributeValues=function(B,p,t){if(t.has(p))return t.get(p);const z=this.fieldsIndex.get(p),O=this.items.map(D=>B.getFieldValue(D,p,z));t.set(p,O);return O};T._getAttributeDataValues=function(B,p){return this.items.map(t=>B.getDataValue(t,{field:p.field,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,
normalizationField:p.normalizationField,normalizationType:p.normalizationType,normalizationTotal:p.normalizationTotal}))};T._getAttributeExpressionValues=function(){var B=ma._asyncToGenerator(function*(p,t,z){const {arcadeUtils:O}=yield x.loadArcade();t=O.createFunction(t);z=z&&O.getViewInfo(z);return p.getExpressionValues(this.items,t,z,O)});return function(p,t,z){return B.apply(this,arguments)}}();T._calculateUniqueValues=function(B,p){const t={},z=this.items,O=z.length;for(let D=0;D<O;D++){const F=
z[D],P=[];for(const C of B)P.push(C[D]);const Q=P.join(",");null==t[Q]?t[Q]={count:1,data:P,items:[F],itemPositions:[D]}:(p||t[Q].count++,t[Q].items.push(F),t[Q].itemPositions.push(D))}return t};T._getDataValues=function(){var B=ma._asyncToGenerator(function*(p){const t=new l(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:z,field:O,normalizationField:D,normalizationType:F,normalizationTotal:P,scale:Q}=p,C=z?{viewingMode:"map",scale:Q,spatialReference:this.query.outSR||this.spatialReference}:
null;return z?this._getAttributeExpressionValues(t,z,C):this._getAttributeDataValues(t,{field:O,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,normalizationField:D,normalizationType:F,normalizationTotal:P})});return function(p){return B.apply(this,arguments)}}();ma._createClass(H,[{key:"size",get:function(){return this.items.length}}]);return H}();f.SnappingTypes=void 0;(function(H){H[H.NONE=0]="NONE";H[H.EDGE=1]="EDGE";H[H.VERTEX=2]="VERTEX"})(f.SnappingTypes||(f.SnappingTypes={}));
let G=function(){function H(T,B){this.coords=T;this.coordsIndex=B}ma._createClass(H,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return H}();f.QueryEngineResult=J;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,f,ma){function aa({scale:D,
translate:F},P){return Math.round((P-F[0])/D[0])}function S({scale:D,translate:F},P){return Math.round((F[1]-P)/D[1])}function R(D,F,P){const Q=[];let C,A,g,r;for(let W=0;W<P.length;W++){const ja=P[W];if(0<W){if(g=aa(D,ja[0]),r=S(D,ja[1]),g!==C||r!==A)Q.push(F(ja,g-C,r-A)),C=g,A=r}else C=aa(D,ja[0]),A=S(D,ja[1]),Q.push(F(ja,C,A))}return 0<Q.length?Q:null}function I(D,F,P,Q){return R(D,P?Q?O:z:Q?z:t,F)}function v(D,F,P,Q){const C=[];P=P?Q?O:z:Q?z:t;for(Q=0;Q<F.length;Q++){const A=R(D,P,F[Q]);A&&3<=
A.length&&C.push(A)}return C.length?C:null}function l(D,F,P,Q){const C=[];P=P?Q?O:z:Q?z:t;for(Q=0;Q<F.length;Q++){const A=R(D,P,F[Q]);A&&2<=A.length&&C.push(A)}return C.length?C:null}function n({scale:D,translate:F},P){return P*D[0]+F[0]}function K({scale:D,translate:F},P){return F[1]-P*D[1]}function ca(D,F,P){const Q=Array(P.length);if(!P.length)return Q;const [C,A]=D.scale;let g=n(D,P[0][0]);D=K(D,P[0][1]);Q[0]=F(P[0],g,D);for(let r=1;r<P.length;r++){const W=P[r];g+=W[0]*C;D-=W[1]*A;Q[r]=F(W,g,
D)}return Q}function L(D,F,P){const Q=Array(P.length);for(let C=0;C<P.length;C++)Q[C]=ca(D,F,P[C]);return Q}function m(D,F,P,Q){return ca(D,P?Q?O:z:Q?z:t,F)}function x(D,F,P,Q){return L(D,P?Q?O:z:Q?z:t,F)}function d(D,F,P,Q){return L(D,P?Q?O:z:Q?z:t,F)}function q(D,F,P){let [Q,C]=P[0],A=Math.min(Q,F[0]),g=Math.min(C,F[1]),r=Math.max(Q,F[2]);F=Math.max(C,F[3]);for(let W=1;W<P.length;W++){const [ja,ta]=P[W];Q+=ja;C+=ta;0>ja&&(A=Math.min(A,Q));0<ja&&(r=Math.max(r,Q));0>ta?g=Math.min(g,C):0<ta&&(F=Math.max(F,
C))}D[0]=A;D[1]=g;D[2]=r;D[3]=F;return D}function J(D,F){if(!F.length)return null;D[0]=D[1]=Number.POSITIVE_INFINITY;D[2]=D[3]=Number.NEGATIVE_INFINITY;for(let P=0;P<F.length;P++)q(D,D,F[P]);return D}function G(D,F,P,Q,C){F.xmin=aa(D,P.xmin);F.ymin=S(D,P.ymin);F.xmax=aa(D,P.xmax);F.ymax=S(D,P.ymax);F!==P&&(Q&&(F.zmin=P.zmin,F.zmax=P.zmax),C&&(F.mmin=P.mmin,F.mmax=P.mmax));return F}function H(D,F,P,Q,C){F.points=I(D,P.points,Q,C)??[];return F}function T(D,F,P,Q,C){F.x=aa(D,P.x);F.y=S(D,P.y);F!==P&&
(Q&&(F.z=P.z),C&&(F.m=P.m));return F}function B(D,F,P,Q,C){D=v(D,P.rings,Q,C);if(!D)return null;F.rings=D;return F}function p(D,F,P,Q,C){D=l(D,P.paths,Q,C);if(!D)return null;F.paths=D;return F}const t=(D,F,P)=>[F,P],z=(D,F,P)=>[F,P,D[2]],O=(D,F,P)=>[F,P,D[2],D[3]];k.equals=function(D,F){if(D===F||null==D&&null==F)return!0;if(null==D||null==F)return!1;let P,Q,C,A;D&&"upperLeft"===D.originPosition?(P=D.translate[0],Q=D.translate[1],D=D.scale[0]):(P=f.isSome(D.extent)?D.extent.xmin:0,Q=f.isSome(D.extent)?
D.extent.ymax:0,D=D.tolerance);F&&"upperLeft"===F.originPosition?(C=F.translate[0],A=F.translate[1],F=F.scale[0]):(C=f.isSome(F.extent)?F.extent.xmin:0,A=f.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);return P===C&&Q===A&&D===F};k.getQuantizedBoundsCoordsArray=q;k.getQuantizedBoundsCoordsArrayArray=J;k.getQuantizedBoundsPaths=function(D){return J([0,0,0,0],D)};k.getQuantizedBoundsPoints=function(D){const F=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return q(F,F,D)};k.getQuantizedBoundsRings=function(D){return J([0,0,0,0],D)};k.quantizeBounds=function(D,F,P){F[0]=aa(D,P[0]);F[3]=S(D,P[1]);F[2]=aa(D,P[2]);F[1]=S(D,P[3]);return F};k.quantizeExtent=G;k.quantizeGeometry=function(D,F){return D&&F?ma.isPoint(F)?T(D,{},F,!1,!1):ma.isPolyline(F)?p(D,{},F,!1,!1):ma.isPolygon(F)?B(D,{},F,!1,!1):ma.isMultipoint(F)?H(D,{},F,!1,!1):ma.isExtent(F)?G(D,{},F,!1,!1):null:null};k.quantizeMultipoint=H;k.quantizePaths=l;k.quantizePoint=T;k.quantizePoints=I;k.quantizePolygon=
B;k.quantizePolyline=p;k.quantizeRings=v;k.quantizeX=aa;k.quantizeY=S;k.toQuantizationTransform=function(D){return D?{originPosition:"upper-left"===D.originPosition?"upperLeft":"lower-left"===D.originPosition?"lowerLeft":D.originPosition,scale:D.tolerance?[D.tolerance,D.tolerance]:[1,1],translate:f.isSome(D.extent)?[D.extent.xmin,D.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(D,F,P){return P?(F[0]=n(D,P[0]),F[1]=K(D,P[3]),F[2]=n(D,P[2]),F[3]=K(D,P[1]),F):[n(D,F[0]),K(D,F[3]),n(D,F[2]),K(D,
F[1])]};k.unquantizeCoordsArray=ca;k.unquantizeCoordsArrayArray=L;k.unquantizeExtent=function(D,F,P,Q,C){F.xmin=n(D,P.xmin);F.ymin=K(D,P.ymin);F.xmax=n(D,P.xmax);F.ymax=K(D,P.ymax);F!==P&&(Q&&(F.zmin=P.zmin,F.zmax=P.zmax),C&&(F.mmin=P.mmin,F.mmax=P.mmax));return F};k.unquantizeMultipoint=function(D,F,P,Q,C){f.isSome(P)&&(F.points=m(D,P.points,Q,C));return F};k.unquantizePaths=x;k.unquantizePoint=function(D,F,P,Q,C){if(f.isNone(P))return F;F.x=n(D,P.x);F.y=K(D,P.y);F!==P&&(Q&&(F.z=P.z),C&&(F.m=P.m));
return F};k.unquantizePoints=m;k.unquantizePolygon=function(D,F,P,Q,C){f.isSome(P)&&(F.rings=d(D,P.rings,Q,C));return F};k.unquantizePolyline=function(D,F,P,Q,C){f.isSome(P)&&(F.paths=x(D,P.paths,Q,C));return F};k.unquantizeRings=d;k.unquantizeX=n;k.unquantizeY=K;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(k,f,ma){return function(){function aa(R,
I,v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=R.returnDistinctValues??!1;this.fieldsIndex=v;this.featureAdapter=I;if((I=R.outFields)&&!I.includes("*")){this.outFields=I;R=0;for(const n of I){var l=f.getExpressionFromFieldName(n);l=(I=this.fieldsIndex.get(l))?null:f.getWhereClause(l,v);I=I?I.name:f.getAliasFromFieldName(n)||`FIELD_EXP_${R++}`;this._fieldDataCache.set(n,{alias:I,clause:l})}}}var S=aa.prototype;S.countDistinctValues=function(R){if(!this.returnDistinctValues)return R.length;
R.forEach(I=>this.getAttributes(I));return this._returnDistinctMap.size};S.getAttributes=function(R){R=this._processAttributesForOutFields(R);return this._processAttributesForDistinctValues(R)};S.getFieldValue=function(R,I,v){const l=v?v.name:I;let n=null;this._fieldDataCache.has(l)?n=this._fieldDataCache.get(l)?.clause:v||(n=f.getWhereClause(I,this.fieldsIndex),this._fieldDataCache.set(l,{alias:l,clause:n}));return v?this.featureAdapter.getAttribute(R,l):n?.calculateValue(R,this.featureAdapter)};
S.getDataValue=function(R,I){const v=I.normalizationType,l=I.normalizationTotal;let n=I.field&&this.getFieldValue(R,I.field,this.fieldsIndex.get(I.field));I.field2&&(n=`${ma.processNullValue(n)}${I.fieldDelimiter}${ma.processNullValue(this.getFieldValue(R,I.field2,this.fieldsIndex.get(I.field2)))}`,I.field3&&(n=`${n}${I.fieldDelimiter}${ma.processNullValue(this.getFieldValue(R,I.field3,this.fieldsIndex.get(I.field3)))}`));v&&Number.isFinite(n)&&(R="field"===v&&I.normalizationField?this.getFieldValue(R,
I.normalizationField,this.fieldsIndex.get(I.normalizationField)):null,n=ma.getNormalizedValue(n,v,R,l));return n};S.getExpressionValue=function(R,I,v,l){R={attributes:this.featureAdapter.getAttributes(R),layer:{fields:this.fieldsIndex.fields}};v=l.createExecContext(R,v);return l.executeFunction(I,v)};S.getExpressionValues=function(R,I,v,l){const n={fields:this.fieldsIndex.fields};return R.map(K=>{K={attributes:this.featureAdapter.getAttributes(K),layer:n};K=l.createExecContext(K,v);return l.executeFunction(I,
K)})};S.validateItem=function(R,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:f.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I)?.clause?.testFeature(R,this.featureAdapter)??!1};S.validateItems=function(R,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:f.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I)?.clause?.testSet(R,this.featureAdapter)??!1};S._processAttributesForOutFields=function(R){const I=
this.outFields;if(!I||!I.length)return this.featureAdapter.getAttributes(R);const v={};for(const l of I){const {alias:n,clause:K}=this._fieldDataCache.get(l);v[n]=K?K.calculateValue(R,this.featureAdapter):this.featureAdapter.getAttribute(R,n)}return v};S._processAttributesForDistinctValues=function(R){if(k.isNone(R)||!this.returnDistinctValues)return R;var I=this.outFields,v=[];if(I)for(const n of I){var {alias:l}=this._fieldDataCache.get(n);v.push(R[l])}else for(l in R)v.push(R[l]);I=`${(I||["*"]).join(",")}=${v.join(",")}`;
v=this._returnDistinctMap.get(I)||0;this._returnDistinctMap.set(I,++v);return 1<v?null:R};return aa}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,f,ma){function aa(p){return null==p||"string"===typeof p&&!p?"\x3cNull\x3e":p}function S(p){const t=null!=p.minValue||null!=p.maxValue,z=!!p.sqlExpression&&p.supportsSQLExpression;return!(null!=p.normalizationField||null!=p.normalizationType)&&!t&&!z}
function R(p){const {values:t,useSampleStdDev:z,supportsNullCount:O}=p;var D=Number.POSITIVE_INFINITY;let F=Number.NEGATIVE_INFINITY,P=null,Q=null;var C=null;let A=null,g=0;const r=null==p.minValue?-Infinity:p.minValue,W=null==p.maxValue?Infinity:p.maxValue;for(const ja of t)Number.isFinite(ja)?ja>=r&&ja<=W&&(P=null===P?ja:P+ja,D=Math.min(D,ja),F=Math.max(F,ja),g++):"string"===typeof ja&&g++;if(g&&null!=P){Q=P/g;C=0;for(const ja of t)Number.isFinite(ja)&&ja>=r&&ja<=W&&(C+=(ja-Q)**2);A=z?1<g?C/(g-
1):0:0<g?C/g:0;C=Math.sqrt(A)}else F=D=null;D={avg:Q,count:g,max:F,min:D,stddev:C,sum:P,variance:A};O&&(D.nullcount=t.length-g);p.percentileParams&&(D.median=I(t,p.percentileParams));return D}function I(p,t){const {fieldType:z,value:O,orderBy:D,isDiscrete:F}=t,P=v(z,"desc"===D);p=[...p].filter(g=>null!=g).sort((g,r)=>P(g,r));if(0===p.length)return null;if(0>=O)return p[0];if(1<=O)return p[p.length-1];var Q=(p.length-1)*O,C=Math.floor(Q);t=C+1;Q%=1;C=p[C];const A=p[t];return t>=p.length||F||"string"===
typeof C||"string"===typeof A?C:C*(1-Q)+A*Q}function v(p,t){const z=t?1:-1,O=K(t),D=n(t);if(!p||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...T].includes(p))return(F,P)=>"number"===typeof F&&"number"===typeof P?O(F,P):"string"===typeof F&&"string"===typeof P?D(F,P):z;if("esriFieldTypeDate"===p)return(F,P)=>{F=(new Date(F)).getTime();P=(new Date(P)).getTime();return isNaN(F)||isNaN(P)?z:O(F,P)};if(T.has(p))return(F,P)=>O(F,P);if("esriFieldTypeString"===
p)return(F,P)=>D(F,P);if("esriFieldTypeGUID"===p||"esriFieldTypeGlobalID"===p){const F=n(t);return(P,Q)=>F(ca(P),ca(Q))}return t?(F,P)=>1:(F,P)=>-1}function l(p,t,z){if(z){if(null==p)return null==t?0:1;if(null==t)return-1}else{if(null==p)return null==t?0:-1;if(null==t)return 1}return null}function n(p){return p?(t,z)=>{const O=l(t,z,!0);if(null!=O)return O;t=t.toUpperCase();z=z.toUpperCase();return t>z?-1:t<z?1:0}:(t,z)=>{const O=l(t,z,!1);if(null!=O)return O;t=t.toUpperCase();z=z.toUpperCase();return t<
z?-1:t>z?1:0}}function K(p){return p?(t,z)=>{const O=l(t,z,!0);return null!=O?O:z-t}:(t,z)=>{const O=l(t,z,!1);return null!=O?O:t-z}}function ca(p){return p.substr(24,12)+p.substr(19,4)+p.substr(16,2)+p.substr(14,2)+p.substr(11,2)+p.substr(9,2)+p.substr(6,2)+p.substr(4,2)+p.substr(2,2)+p.substr(0,2)}function L(p){return"coded-value"!==p?.type?[]:p.codedValues.map(t=>t.code)}function m(p,t){const z=d({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,
standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||5});p=x(p,t.minValue,t.maxValue);return ma.createGenerateRendererClassBreaks({definition:z,values:p,normalizationTotal:t.normalizationTotal})}function x(p,t,z){const O=null==t?-Infinity:t,D=null==z?Infinity:z;return p.filter(F=>Number.isFinite(F)&&F>=O&&F<=D)}function d(p){const {breakCount:t,field:z,normalizationField:O,normalizationType:D}=p,F=p.classificationMethod||"equal-interval";return new f({breakCount:t,classificationField:z,
classificationMethod:F,normalizationField:"field"===D?O:void 0,normalizationType:D,standardDeviationInterval:"standard-deviation"===F?p.standardDeviationInterval||1:void 0})}function q(p,t){const {field:z,classificationMethod:O,standardDeviationInterval:D,normalizationType:F,normalizationField:P,normalizationTotal:Q,minValue:C,maxValue:A}=t,g=t.numBins||10;let r=t=null,W=null;O&&"equal-interval"!==O||F?({classBreaks:p}=m(p,{field:z,normalizationType:F,normalizationField:P,normalizationTotal:Q,classificationMethod:O,
standardDeviationInterval:D,minValue:C,maxValue:A,numClasses:g}),t=p[0].minValue,r=p[p.length-1].maxValue,W=p.map(ja=>[ja.minValue,ja.maxValue])):(null!=C&&null!=A?(t=C,r=A):(p=R({values:p,minValue:C,maxValue:A,useSampleStdDev:!F,supportsNullCount:S({normalizationType:F,normalizationField:P,minValue:C,maxValue:A})}),t=p.min??null,r=p.max??null),W=G(t??0,r??0,g));return{min:t,max:r,intervals:W}}function J(p,t){let z=-1;for(let O=p.length-1;0<=O;O--)if(t>=p[O][0]){z=O;break}return z}function G(p,t,
z){const O=(t-p)/z,D=[];let F;for(let P=1;P<=z;P++)F=p+O,F=Number(F.toFixed(16)),D.push([p,P===z?t:F]),p=F;return D}const H=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,T=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),B="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=m;k.calculateHistogram=function(p,t){var z=q(p,t);const O=z.intervals,D=z.min??0;z=z.max??0;const F=O.map((P,Q)=>({minValue:O[Q][0],maxValue:O[Q][1],
count:0}));for(const P of p)null!=P&&P>=D&&P<=z&&(p=J(O,P),-1<p&&F[p].count++);return{bins:F,minValue:D,maxValue:z,normalizationTotal:t.normalizationTotal}};k.calculatePercentile=I;k.calculateStatistics=R;k.calculateStringStatistics=function(p){const t=p.returnDistinct?[...(new Set(p.values))]:p.values,z=t.filter(D=>null!=D).length,O={count:z};p.supportsNullCount&&(O.nullcount=t.length-z);p.percentileParams&&(O.median=I(t,p.percentileParams));return O};k.calculateUniqueValuesCount=function(p){const t=
{};for(let z of p){if(null==z||"string"===typeof z&&""===z.trim())z=null;null==t[z]?t[z]={count:1,data:z}:t[z].count++}return{count:t}};k.createClassBreaksDefinition=d;k.createUVResult=function(p,t,z,O){p=p.count;const D=[];if(z&&t){z=[];var F=L(t[0]);for(const P of F)if(t[1]){F=L(t[1]);for(const Q of F)if(t[2]){F=L(t[2]);for(const C of F)z.push(`${aa(P)}${O}${aa(Q)}${O}${aa(C)}`)}else z.push(`${aa(P)}${O}${aa(Q)}`)}else z.push(P);for(const P of z)p.hasOwnProperty(P)||(p[P]={data:P,count:0})}for(const P in p)t=
p[P],D.push({value:t.data,count:t.count,label:t.label});return{uniqueValueInfos:D}};k.getAttributeComparator=v;k.getEqualIntervalBins=G;k.getNormalizedValue=function(p,t,z,O){let D=null;switch(t){case "log":0!==p&&(D=Math.log(p)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(O)&&0!==O&&(D=p/O*100);break;case "field":Number.isFinite(z)&&0!==z&&(D=p/z);break;case "natural-log":0<p&&(D=Math.log(p));break;case "square-root":0<p&&(D=p**.5)}return D};k.isNullCountSupported=S;k.processNullValue=
aa;k.processSummaryStatisticsResult=function(p,t){let z;for(z in p)B.includes(z)&&(Number.isFinite(p[z])||(p[z]=null));if(!t)return p;["avg","stddev","variance"].forEach(O=>{null!=p[O]&&(p[O]=Math.ceil(p[O]))});return p};k.resolveCBResult=function(p,t){let z=p.classBreaks;const O=z[0].minValue,D=z[z.length-1].maxValue,F="standard-deviation"===t;z=z.map(P=>{const Q=P.label;P={minValue:P.minValue,maxValue:P.maxValue,label:Q};if(F&&Q){const C=Q.match(H)?.map(A=>+A.trim())??[];2===C.length?(P.minStdDev=
C[0],P.maxStdDev=C[1],0>C[0]&&0<C[1]&&(P.hasAvg=!0)):1===C.length&&(Q.includes("\x3c")?(P.minStdDev=null,P.maxStdDev=C[0]):Q.includes("\x3e")&&(P.minStdDev=C[0],P.maxStdDev=null))}return P});return{minValue:O,maxValue:D,classBreakInfos:z,normalizationTotal:p.normalizationTotal}};k.statisticTypes=B;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,f,ma,aa,S,R,I,v,l){R=new ma.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ma=new ma.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});aa=function(n){function K(ca){ca=n.call(this,ca)||this;ca.type="class-breaks-definition";
ca.breakCount=null;ca.classificationField=null;ca.classificationMethod=null;ca.normalizationField=null;ca.normalizationType=null;return ca}k._inheritsLoose(K,n);k._createClass(K,[{key:"standardDeviationInterval",set:function(ca){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",ca)}},{key:"definedInterval",set:function(ca){"defined-interval"===this.classificationMethod&&this._set("definedInterval",ca)}}]);return K}(aa.JSONSupport);f.__decorate([v.enumeration({classBreaksDef:"class-breaks-definition"})],
aa.prototype,"type",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"breakCount",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"classificationField",void 0);f.__decorate([S.property({type:String,json:{read:R.read,write:R.write}})],aa.prototype,"classificationMethod",void 0);f.__decorate([S.property({json:{write:!0}})],aa.prototype,"normalizationField",void 0);f.__decorate([S.property({json:{read:ma.read,write:ma.write}})],aa.prototype,"normalizationType",void 0);
f.__decorate([S.property({value:null,json:{write:!0}})],aa.prototype,"standardDeviationInterval",null);f.__decorate([S.property({value:null,json:{write:!0}})],aa.prototype,"definedInterval",null);return aa=f.__decorate([l.subclass("esri.rest.support.ClassBreaksDefinition")],aa)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,f,ma){k.enumeration=function(aa,S={}){aa=aa instanceof f.JSONMap?aa:new f.JSONMap(aa,S);aa={type:S?.ignoreUnknown??
!0?aa.apiValues:String,json:{type:aa.jsonValues,read:S?.readOnly?!1:{reader:aa.read},write:{writer:aa.write}}};void 0!==S?.readOnly&&(aa.readOnly=!!S.readOnly);void 0!==S?.default&&(aa.json.default=S.default);void 0!==S?.name&&(aa.json.name=S.name);void 0!==S?.nonNullable&&(aa.nonNullable=S.nonNullable);return ma.property(aa)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(k,f){function ma(L){var m=
L.definition;const {classificationMethod:x,normalizationType:d,definedInterval:q}=m;m=m.breakCount??1;const J=[];var G=L.values;if(0===G.length)return[];G=G.sort((z,O)=>z-O);var H=G[0],T=G[G.length-1];if("equal-interval"===x)if(G.length>=m){G=(T-H)/m;L=H;for(var B=1;B<m;B++){var p=Number((H+B*G).toFixed(6));J.push({minValue:L,maxValue:p,label:aa(L,p,d)});L=p}J.push({minValue:L,maxValue:T,label:aa(L,T,d)})}else G.forEach(z=>{J.push({minValue:z,maxValue:z,label:aa(z,z,d)})});else if("natural-breaks"===
x){G=S(G);L=R(G.uniqueValues,L.valueFrequency||G.valueFrequency,m);for(B=1;B<m;B++)G.uniqueValues.length>B&&(p=Number(G.uniqueValues[L[B]].toFixed(6)),J.push({minValue:H,maxValue:p,label:aa(H,p,d)}),H=p);J.push({minValue:H,maxValue:T,label:aa(H,T,d)})}else if("quantile"===x)if(G.length>=m&&H!==T){L=Math.ceil(G.length/m);B=0;for(p=1;p<m;p++){var t=L+B-1;t>G.length&&(t=G.length-1);0>t&&(t=0);J.push({minValue:H,maxValue:G[t],label:aa(H,G[t],d)});H=G[t];B+=L;L=Math.ceil((G.length-B)/(m-p))}J.push({minValue:H,
maxValue:T,label:aa(H,T,d)})}else for(m=-1,T=0;T<G.length;T++)H=G[T],H!==m&&(m=H,J.push({minValue:m,maxValue:H,label:aa(m,H,d)}),m=H);else if("standard-deviation"===x)if(L=l(G),B=n(G,L),0===B)J.push({minValue:G[0],maxValue:G[0],label:aa(G[0],G[0],d)});else{G=v(H,T,m,L,B)*B;B=0;for(p=m;1<=p;p--)t=Number((L-(p-.5)*G).toFixed(6)),J.push({minValue:H,maxValue:t,label:aa(H,t,d)}),H=t,B++;p=Number((L+.5*G).toFixed(6));J.push({minValue:H,maxValue:p,label:aa(H,p,d)});H=p;B++;for(t=1;t<=m;t++)p=B===2*m?T:Number((L+
(t+.5)*G).toFixed(6)),J.push({minValue:H,maxValue:p,label:aa(H,p,d)}),H=p,B++}else if("defined-interval"===x){if(!q)return J;m=G[0];T=G[G.length-1];G=Math.ceil((T-m)/q);H=m;for(L=1;L<G;L++)B=Number((m+L*q).toFixed(6)),J.push({minValue:H,maxValue:B,label:aa(H,B,d)}),H=B;J.push({minValue:H,maxValue:T,label:aa(H,T,d)})}return J}function aa(L,m,x){let d=null;return d=L===m?x&&"percent-of-total"===x?L+"%":L.toString():x&&"percent-of-total"===x?L+"% - "+m+"%":L+" - "+m}function S(L){const m=[],x=[];let d=
Number.MIN_VALUE,q=1,J=-1;for(let G=0;G<L.length;G++){const H=L[G];H===d?(q++,x[J]=q):null!==H&&(m.push(H),d=H,q=1,x.push(q),J++)}return{uniqueValues:m,valueFrequency:x}}function R(L,m,x){var d=L.length;const q=[];x>d&&(x=d);for(var J=0;J<x;J++)q.push(Math.round(J*d/x-1));q.push(d-1);J=I(q,L,m,x);d=J.mean;J=J.sdcm;var G=x,H=0,T=0;let B=0,p=0,t=!0;for(let O=0;2>O&&t;O++){0===O&&(t=!1);for(var z=0;z<G-1;z++)for(;q[z+1]+1!==q[z+2];)if(q[z+1]+=1,H=K(z,q,L,m),B=H.sbMean,H=H.sbSdcm,T=K(z+1,q,L,m),p=T.sbMean,
T=T.sbSdcm,H+T<J[z]+J[z+1])J[z]=H,J[z+1]=T,d[z]=B,d[z+1]=p,t=!0;else{--q[z+1];break}for(z=G-1;0<z;z--)for(;q[z]!==q[z-1]+1;)if(--q[z],H=K(z-1,q,L,m),B=H.sbMean,H=H.sbSdcm,T=K(z,q,L,m),p=T.sbMean,T=T.sbSdcm,H+T<J[z-1]+J[z])J[z-1]=H,J[z]=T,d[z-1]=B,d[z]=p,t=!0;else{q[z]+=1;break}}t&&(J=I(q,L,m,x));return q}function I(L,m,x,d){let q=[];var J=[],G=[];let H=0;const T=[],B=[];for(var p=0;p<d;p++){var t=K(p,L,m,x);T.push(t.sbMean);B.push(t.sbSdcm);H+=B[p]}t=H;for(p=!0;p||H<t;){p=!1;q=[];for(J=0;J<d;J++)q.push(L[J]);
for(G=0;G<d;G++)for(t=L[G]+1;t<=L[G+1];t++)if(J=m[t],0<G&&t!==L[G+1]&&Math.abs(J-T[G])>Math.abs(J-T[G-1]))L[G]=t;else if(G<d-1&&L[G]!==t-1&&Math.abs(J-T[G])>Math.abs(J-T[G+1])){L[G+1]=t-1;break}t=H;H=0;J=[];G=[];for(let z=0;z<d;z++){J.push(T[z]);G.push(B[z]);const O=K(z,L,m,x);T[z]=O.sbMean;B[z]=O.sbSdcm;H+=B[z]}}if(H>t){for(m=0;m<d;m++)L[m]=q[m],T[m]=J[m],B[m]=G[m];H=t}return{mean:T,sdcm:B}}function v(L,m,x,d,q){L=Math.max(d-L,m-d)/q/x;return 1<=L?1:.5<=L?.5:.25}function l(L){let m=0;for(let x=0;x<
L.length;x++)m+=L[x];return m/=L.length}function n(L,m){let x=0;for(let d=0;d<L.length;d++){const q=L[d];x+=(q-m)*(q-m)}x/=L.length;return Math.sqrt(x)}function K(L,m,x,d){var q=0,J=0;for(var G=m[L]+1;G<=m[L+1];G++){const H=d[G];q+=x[G]*H;J+=H}0>=J&&ca.warn("Exception in Natural Breaks calculation");q/=J;J=0;for(G=m[L]+1;G<=m[L+1];G++)J+=d[G]*(x[G]-q)**2;return{sbMean:q,sbSdcm:J}}const ca=f.getLogger("esri.rest.support.generateRendererUtils");k.createGenerateRendererClassBreaks=function(L){const {normalizationTotal:m}=
L;return{classBreaks:ma(L),normalizationTotal:m}};k.createGenerateRendererUniqueValues=function(L){L=S(L);const m=[],x=L.uniqueValues.length;for(let d=0;d<x;d++){const q=L.uniqueValues[d];m.push({value:q,count:L.valueFrequency[d],label:q.toString()})}return{uniqueValues:m}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(k){k.makeEdgeCandidate=function(f,ma,aa,S,R,I=!1){return{objectId:f,target:ma,
distance:aa,type:"edge",start:S,end:R,draped:I}};k.makeVertexCandidate=function(f,ma,aa){return{objectId:f,target:ma,distance:aa,type:"vertex"}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,f,ma,aa,S,R,I,v){function l(U,ba,pa){if(U)for(const wa of U)(U=(U=R.getDeepValue(wa,
ba))&&"function"!==typeof U&&pa.get(U))&&R.setDeepValue(wa,U.name,ba)}function n(U,ba){if(!U||!ba)return[];va.clear();K(va,U,ba);return Array.from(va).sort()}function K(U,ba,pa){if(pa)if(ba?.fields?.length)if(pa.includes("*"))for(const {name:wa}of ba.fields)U.add(wa);else for(const wa of pa)ca(U,ba,wa);else if(pa.includes("*"))U.clear(),U.add("*");else for(const wa of pa)null!=wa&&U.add(wa)}function ca(U,ba,pa){"string"===typeof pa&&(ba?(ba=ba.get(pa))&&U.add(ba.name):U.add(pa))}function L(U,ba,pa){return m.apply(this,
arguments)}function m(){m=ma._asyncToGenerator(function*(U,ba,pa){if(pa){var {arcadeUtils:wa}=yield v.loadArcade();pa=wa.extractFieldNames(pa,ba?.fields?.map(Ba=>Ba.name));for(const Ba of pa)ca(U,ba,Ba)}});return m.apply(this,arguments)}function x(U,ba,pa){return d.apply(this,arguments)}function d(){d=ma._asyncToGenerator(function*(U,ba,pa){if(pa&&"1\x3d1"!==pa){const wa=(yield new Promise((Ba,La)=>k(["../../core/sql/WhereClause"],Ba,La))).WhereClause.create(pa,ba);if(!wa.isStandardized)throw new aa("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:pa});K(U,ba,wa.fieldNames)}});return d.apply(this,arguments)}function q(U,ba){for(const pa of U)if(pa&&pa.valueType&&pa.valueType===ba)return pa.name;return null}function J(){J=ma._asyncToGenerator(function*(U){if(!U)return[];const ba=new Set;yield G(ba,U);return Array.from(ba).sort()});return J.apply(this,arguments)}function G(U,ba){return H.apply(this,arguments)}function H(){H=ma._asyncToGenerator(function*(U,ba){if(ba){var pa=ba.elevationInfo?.featureExpressionInfo;
if(pa)return pa.collectRequiredFields(U,ba.fieldsIndex)}});return H.apply(this,arguments)}function T(){T=ma._asyncToGenerator(function*(U,ba,pa){if(ba&&pa&&"fields"in pa){var wa=[];wa.push(B(U,ba,pa.popupTemplate));pa.fields&&wa.push(...pa.fields.map(function(){var Ba=ma._asyncToGenerator(function*(La){La.onStatisticExpression?L(U,ba.fieldsIndex,La.onStatisticExpression.expression):U.add(La.onStatisticField)});return function(La){return Ba.apply(this,arguments)}}()));yield Promise.all(wa)}});return T.apply(this,
arguments)}function B(U,ba,pa){return p.apply(this,arguments)}function p(){p=ma._asyncToGenerator(function*(U,ba,pa){const wa=[];pa?.expressionInfos&&wa.push(...pa.expressionInfos.map(Ba=>L(U,ba.fieldsIndex,Ba.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ba of pa)"expression"===Ba.type&&Ba.expressionInfo&&wa.push(L(U,ba.fieldsIndex,Ba.expressionInfo.expression));yield Promise.all(wa)});return p.apply(this,arguments)}function t(){t=ma._asyncToGenerator(function*(U,ba,pa){ba&&(ba.timeInfo&&
S.isSome(pa)&&pa.timeExtent&&K(U,ba.fieldsIndex,[ba.timeInfo.startField,ba.timeInfo.endField]),ba.floorInfo&&K(U,ba.fieldsIndex,[ba.floorInfo.floorField]),S.isSome(pa)&&S.isSome(pa.where)&&(yield x(U,ba.fieldsIndex,pa.where)))});return t.apply(this,arguments)}function z(){z=ma._asyncToGenerator(function*(U,ba,pa){ba&&pa&&(yield Promise.all(pa.map(wa=>O(U,ba,wa))))});return z.apply(this,arguments)}function O(U,ba,pa){return D.apply(this,arguments)}function D(){D=ma._asyncToGenerator(function*(U,ba,
pa){ba&&pa&&(pa.valueExpression?yield L(U,ba.fieldsIndex,pa.valueExpression):pa.field&&ca(U,ba.fieldsIndex,pa.field))});return D.apply(this,arguments)}function F(){F=ma._asyncToGenerator(function*(U){if(!U)return[];const ba="timeInfo"in U&&U.timeInfo;return ba?n(U.fieldsIndex,[U.trackIdField,ba.startField,ba.endField]):[]});return F.apply(this,arguments)}function P(){P=ma._asyncToGenerator(function*(U){if(!U)return[];const ba=new Set;yield Q(ba,U);return Array.from(ba).sort()});return P.apply(this,
arguments)}function Q(U,ba){return C.apply(this,arguments)}function C(){C=ma._asyncToGenerator(function*(U,ba){const {labelingInfo:pa,fieldsIndex:wa}=ba;pa&&pa.length&&(yield Promise.all(pa.map(Ba=>A(U,wa,Ba))))});return C.apply(this,arguments)}function A(U,ba,pa){return g.apply(this,arguments)}function g(){g=ma._asyncToGenerator(function*(U,ba,pa){if(pa){var wa=pa.getLabelExpression();pa=pa.where;"arcade"===wa.type?yield L(U,ba,wa.expression):(wa=wa.expression.match(/{[^}]*}/g))&&wa.forEach(Ba=>
{ca(U,ba,Ba.slice(1,-1))});yield x(U,ba,pa)}});return g.apply(this,arguments)}function r(U){return"number"===typeof U&&!isNaN(U)&&isFinite(U)}function W(U){return null===U||r(U)}function ja(U){return null===U||y(U)}function ta(U){return null!=U&&"string"===typeof U}function za(U){return null===U||ta(U)}function Ea(){return!0}function Ha(U,ba){let pa;switch(U.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=
U.nullable?ja:y;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=U.nullable?W:r;break;case "string":case "esriFieldTypeString":pa=U.nullable?za:ta;break;default:pa=Ea}return 1===arguments.length?pa:pa(ba)}function Fa(U){return null!=U&&da.has(U.type)}function Ua(U,ba){return null==U||U.nullable&&null===ba?null:Fa(U)&&!Oa(U.type,Number(ba))?f.NumericRangeValidationError.OUT_OF_RANGE:Ha(U,ba)?U.domain?I.validateDomainValue(U.domain,ba):null:f.TypeValidationError.INVALID_TYPE}
function Oa(U,ba){U="string"===typeof U?Sa(U):U;if(!U)return!1;const pa=U.min,wa=U.max;return U.isInteger?y(ba)&&ba>=pa&&ba<=wa:ba>=pa&&ba<=wa}function Sa(U){switch(U){case "esriFieldTypeSmallInteger":case "small-integer":return X;case "esriFieldTypeInteger":case "integer":return ia;case "esriFieldTypeSingle":case "single":return na;case "esriFieldTypeDouble":case "double":return ra}}function $a(U,ba,pa){if(!ba||!ba.attributes||!U){if(S.isSome(pa))for(var wa of U??[])pa.add(wa);return!0}ba=ba.attributes;
wa=!1;for(const Ba of U)if(!(Ba in ba))if(wa=!0,S.isSome(pa))pa.add(Ba);else break;return wa}function Ta(){Ta=ma._asyncToGenerator(function*(U,ba){const pa=new Set;for(const wa of ba)yield L(pa,U.fieldsIndex,wa);return Array.from(pa).sort()});return Ta.apply(this,arguments)}const jb=/^([0-9])/,ib=/[^a-z0-9_\u0080-\uffff]/gi,lb=/_{2,}/g,c=/^_/,u=/_$/,ea="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
ka=["field","normalizationField"],va=new Set,y=(()=>"isInteger"in Number?Number.isInteger:U=>"number"===typeof U&&isFinite(U)&&Math.floor(U)===U)(),N=["integer","small-integer","single","double"],da=new Set([...N,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);f.NumericRangeValidationError=void 0;(f.NumericRangeValidationError||(f.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";f.TypeValidationError=void 0;
(f.TypeValidationError||(f.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const X={min:-32768,max:32767,isInteger:!0},ia={min:-2147483648,max:2147483647,isInteger:!0},na={min:-3.4E38,max:1.2E38,isInteger:!1},ra={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};f.collectArcadeFieldNames=L;f.collectElevationFields=G;f.collectFeatureReductionFields=function(U,ba,pa){return T.apply(this,arguments)};f.collectField=ca;f.collectFields=K;f.collectFilterFields=function(U,
ba,pa){return t.apply(this,arguments)};f.collectLabelingFields=Q;f.collectOrderByInfos=function(U,ba,pa){return z.apply(this,arguments)};f.collectPopupTemplateFields=B;f.doubleRange=ra;f.featureHasFields=function(U,ba){return!$a(U,ba,null)};f.fixFields=n;f.fixRendererFields=function(U,ba){if(null!=U&&null!=ba)for(const pa of Array.isArray(U)?U:[U])if(l(ea,pa,ba),"visualVariables"in pa&&pa.visualVariables)for(const wa of pa.visualVariables)l(ka,wa,ba)};f.fixTimeInfoFields=function(U,ba){if(null!=U&&
ba?.fields?.length)if("startField"in U){var pa=ba.get(U.startField);ba=ba.get(U.endField);U.startField=pa?.name??null;U.endField=ba?.name??null}else pa=ba.get(U.startTimeField),ba=ba.get(U.endTimeField),U.startTimeField=pa?.name??null,U.endTimeField=ba?.name??null};f.getDisplayFieldName=function({displayField:U,fields:ba}){if(U)return U;if(!ba||!ba.length)return null;if(!(U=q(ba,"name-or-title")||q(ba,"unique-identifier")||q(ba,"type-or-category")))a:{for(const pa of ba)if(pa&&pa.name&&(ba=pa.name.toLowerCase(),
ba.includes("name")||ba.includes("title"))){U=pa.name;break a}U=null}return U};f.getElevationFields=function(U){return J.apply(this,arguments)};f.getExpressionFields=function(U,ba){return Ta.apply(this,arguments)};f.getFeatureEditFields=function(U){if(!U)return[];const ba="editFieldsInfo"in U&&U.editFieldsInfo;return ba?n(U.fieldsIndex,[ba&&ba.creatorField,ba&&ba.creationDateField,ba&&ba.editorField,ba&&ba.editDateField]):[]};f.getFeatureGeometryFields=function(U){if(!U)return[];const ba=U.geometryFieldsInfo;
return ba?n(U.fieldsIndex,[ba.shapeAreaField,ba.shapeLengthField]):[]};f.getFieldDefaultValue=function(U){const ba=U.defaultValue;if(void 0!==ba&&Ha(U,ba))return ba;if(U.nullable)return null};f.getFieldRange=function(U){const ba=I.getDomainRange(U.domain);if(ba)return ba;if(Fa(U))return Sa(U.type)};f.getLabelingFields=function(U){return P.apply(this,arguments)};f.getNumericTypeForValue=function(U){if(!r(U))return null;if(y(U)){if(U>=X.min&&U<=X.max)return"esriFieldTypeSmallInteger";if(U>=ia.min&&
U<=ia.max)return"esriFieldTypeInteger"}return U>=na.min&&U<=na.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};f.getTimeFields=function(U){return F.apply(this,arguments)};f.integerRange=ia;f.isDateField=function(U){return null!=U&&("date"===U.type||"esriFieldTypeDate"===U.type)};f.isNumberInRange=Oa;f.isNumericField=Fa;f.isRasterPixelValueField=function(U){return U?["raster.itempixelvalue","raster.servicepixelvalue"].some(ba=>U.toLowerCase().startsWith(ba)):!1};f.isStringField=function(U){return null!=
U&&("string"===U.type||"esriFieldTypeString"===U.type)};f.isValidFieldValue=function(U,ba){return null===Ua(U,ba)};f.isValueMatchingFieldType=Ha;f.normalizeFieldName=function(U){return null==U?null:(U=U.trim().replace(ib,"_").replace(lb,"_").replace(c,"").replace(u,"").replace(jb,"F$1"))?U:null};f.numericTypes=N;f.packFields=function(U,ba,pa=1){if(!ba||!U)return[];if(ba.includes("*"))return["*"];ba=n(U,ba);return ba.length/U.fields.length>=pa?["*"]:ba};f.populateMissingFields=$a;f.rendererFields=
ea;f.sanitizeNullFieldValue=function(U){return null==U||"number"===typeof U&&isNaN(U)?null:U};f.singleRange=na;f.smallIntegerRange=X;f.unpackFieldNames=function(U,ba){return S.isNone(ba)||S.isNone(U)?[]:ba.includes("*")?(U.fields??[]).map(pa=>pa.name):ba};f.validateFieldValue=Ua;f.validationErrorToString=function(U,ba,pa){switch(U){case I.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;case I.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${ba.name}, domain: ${JSON.stringify(ba.domain)}`;
case f.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${ba.name}, type: ${ba.type}, nullable: ${ba.nullable}`;case f.NumericRangeValidationError.OUT_OF_RANGE:const {min:wa,max:Ba}=Sa(ba.type);return`Value ${pa} is out of range for the number type - field: ${ba.name}, type: ${ba.type}, value range is ${wa} to ${Ba}`}};f.visualVariableFields=ka;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){k.DomainValidationError=void 0;(function(f){f.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";f.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(f){if(f&&"range"===f.type)return{min:"range"in f?f.range[0]:f.minValue,max:"range"in f?f.range[1]:f.maxValue}};k.validateDomainValue=function(f,ma){switch(f.type){case "range":const aa="range"in f?f.range[0]:f.minValue;f="range"in
f?f.range[1]:f.maxValue;if(null!=aa&&+ma<aa||null!=f&&+ma>f)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==f.codedValues||f.codedValues.every(S=>null==S||S.code!==ma))return k.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==f.codedValues||f.codedValues.every(S=>null==S||S.code!==ma))return k.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,f,ma,aa,S,R,I,v){function l(){K||(K=ma._asyncToGenerator(function*(){const L=yield new Promise((m,x)=>k(["./arcadeUtils"],m,x));return{arcade:L.arcade,arcadeUtils:L,Dictionary:L.Dictionary,Feature:L.arcadeFeature}})());return K}const n=R.getLogger("esri.support.arcadeOnDemand");let K;aa=(L,m,x)=>ca.create(L,m,x,null,["$feature","$view"]);let ca=function(){function L(x,d,q,J,G,H,T){this.script=x;this.evaluate=J;this.fields=Array.isArray(H)?H:H.fields;this._syntaxTree=q;this._arcade=d;this._arcadeFeature=
G;this._spatialReference=T;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}L.create=function(){var x=ma._asyncToGenerator(function*(d,q,J,G,H,T){const {arcade:B,Feature:p,Dictionary:t}=yield l(),z=v.fromJSON(q);let O;try{O=B.parseScript(d,T)}catch(A){return n.error(new S("arcade-bad-expression","Failed to parse arcade script",{script:d,error:A})),null}H=H.reduce((A,g)=>({...A,[g]:null}),{});let D=null;
I.isSome(G)&&(D=new t(G),D.immutable=!0,H.$config=null);T=(G=B.scriptUsesGeometryEngine(O))&&B.enableGeometrySupport();const F=B.scriptUsesFeatureSet(O)&&B.enableFeatureSetSupport(),P=(q=B.scriptIsAsync(O))&&B.enableAsyncSupport();H={vars:H,spatialReference:z,useAsync:!!P};yield Promise.all([T,F,P]);T=new Set;yield B.loadDependentModules(T,O,null,q,G);const Q=new t;Q.immutable=!1;Q.setField("scale",0);const C=B.compileScript(O,H);return new L(d,B,O,A=>{"$view"in A&&A.$view&&(Q.setField("scale","object"===
typeof A.$view?A.$view.scale:void 0),A.$view=Q);D&&(A.$config=D);return C({vars:A,spatialReference:z})},new p,J,z)});return function(d,q,J,G,H,T){return x.apply(this,arguments)}}();var m=L.prototype;m.repurposeFeature=function(x){x.geometry&&!x.geometry.spatialReference&&(x.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(x.geometry,x.attributes,{fields:this.fields});return this._arcadeFeature};m.referencesGeometry=function(){return this._referencesGeometry};
m.referencesScale=function(){return this._referencesScale};return L}();f.ArcadeExpression=ca;f.createDictionaryExpression=(L,m,x,d)=>ca.create(L,m,x,d,["$feature","$view"]);f.createLabelExpression=(L,m,x)=>ca.create(L,m,x,null,["$feature"]);f.createRendererExpression=aa;f.createVVExpression=aa;f.loadArcade=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L){function m(){return new Promise((J,G)=>k(["../../../geometry/geometryEngineJSON"],J,G))}function x(){x=ma._asyncToGenerator(function*(J,G,H){const {spatialRel:T,geometry:B}=J;if(B){if(null==T||!0!==q.spatialRelationship[T])throw new aa("feature-store:unsupported-query","Unsupported query spatial relationship",{query:J});if(v.isValid(B.spatialReference)&&v.isValid(H)){if(null==B||!0!==q.queryGeometry[I.getJsonType(B)])throw new aa("feature-store:unsupported-query",
"Unsupported query geometry type",{query:J});if(null==G||!0!==q.layerGeometry[G])throw new aa("feature-store:unsupported-query","Unsupported layer geometry type",{query:J});if(J.outSR)return ca.checkProjectionSupport(J.geometry&&J.geometry.spatialReference,J.outSR)}}});return x.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},q={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};f.canQueryWithRBush=function(J){if(I.isExtent(J))return!0;if(I.isPolygon(J)){for(const G of J.rings)if(5!==G.length||G[0][0]!==G[1][0]||G[0][0]!==G[4][0]||G[2][0]!==G[3][0]||G[0][1]!==G[3][1]||G[0][1]!==G[4][1]||G[1][1]!==G[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=function(J,G,H){return x.apply(this,
arguments)};f.getSpatialQueryOperator=function(J,G,H,T,B){if(I.isPolygon(G)&&"esriGeometryPoint"===H&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J)){const p=n.convertFromPolygon(new K,G,!1,!1);return Promise.resolve(t=>l.polygonContainsPoint(p,!1,!1,t))}if(I.isPolygon(G)&&"esriGeometryMultipoint"===H){const p=n.convertFromPolygon(new K,G,!1,!1);if("esriSpatialRelContains"===J)return Promise.resolve(t=>l.polygonContainsMultipoint(p,!1,!1,t,T,B))}if(I.isExtent(G)&&"esriGeometryPoint"===
H&&("esriSpatialRelIntersects"===J||"esriSpatialRelContains"===J))return Promise.resolve(p=>S.extentContainsPoint(G,L.getGeometry(H,T,B,p)));if(I.isExtent(G)&&"esriGeometryMultipoint"===H&&"esriSpatialRelContains"===J)return Promise.resolve(p=>S.extentContainsMultipoint(G,L.getGeometry(H,T,B,p)));if(I.isExtent(G)&&"esriSpatialRelIntersects"===J){const p=R.getExtentIntersector(H);return Promise.resolve(t=>p(G,L.getGeometry(H,T,B,t)))}return m().then(p=>{const t=p[d[J]].bind(null,G.spatialReference,
G);return z=>t(L.getGeometry(H,T,B,z))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,f){k.extentIntersectsExtent=f.extentIntersectsExtent;k.extentIntersectsMultipoint=f.extentIntersectsMultipoint;k.extentIntersectsPoint=f.extentIntersectsPoint;k.extentIntersectsPolygon=f.extentIntersectsPolygon;k.extentIntersectsPolyline=f.extentIntersectsPolyline;k.extentIntersectsRings=f.extentIntersectsRings;
k.getFeatureExtentIntersector=f.getFeatureExtentIntersector;k.isSelfIntersecting=f.isSelfIntersecting;k.segmentIntersects=f.segmentIntersects;k.getExtentIntersector=function(ma){return"mesh"===ma?f.extentIntersectsExtent:f.getFeatureExtentIntersector(ma)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function f(ma,aa,S,R,I){if(!ma)return!1;aa=aa?S?4:3:S?3:2;const {coords:v,lengths:l}=ma;S=!1;ma=0;for(const K of l){var n=
ma;for(let ca=ma,L=ma+K*aa;ca<L;ca+=aa){n=ca+aa;n===L&&(n=ma);const m=v[ca],x=v[ca+1],d=v[n];n=v[n+1];(x<I&&n>=I||n<I&&x>=I)&&m+(I-x)/(n-x)*(d-m)<R&&(S=!S)}ma+=K*aa}return S}k.polygonContainsCoords=f;k.polygonContainsMultipoint=function(ma,aa,S,R,I,v){I=I?v?4:3:v?3:2;const {coords:l,lengths:n}=R;if(!n)return!1;for(let K=0,ca=0;K<n.length;K++,ca+=I)if(!f(ma,aa,S,l[ca],l[ca+1]))return!1;return!0};k.polygonContainsPoint=function(ma,aa,S,R){return f(ma,aa,S,R.coords[0],R.coords[1])};Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(k,f){function ma(){ma=f._asyncToGenerator(function*(I,v){if(!I)return null;const l=v.featureAdapter,{startTimeField:n,endTimeField:K}=I;let ca=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY;if(n&&K)yield v.forEach(m=>{const x=l.getAttribute(m,n);m=l.getAttribute(m,K);null==x||isNaN(x)||(ca=Math.min(ca,x));null==m||isNaN(m)||(L=Math.max(L,
m))});else{const m=n||K;yield v.forEach(x=>{x=l.getAttribute(x,m);null==x||isNaN(x)||(ca=Math.min(ca,x),L=Math.max(L,x))})}return{start:ca,end:L}});return ma.apply(this,arguments)}function aa(I,v,l,n,K){if(null!=n&&null!=K)return ca=>{const L=I.getAttribute(ca,v);ca=I.getAttribute(ca,l);return(null==L||L<=K)&&(null==ca||ca>=n)};if(null!=n)return ca=>{ca=I.getAttribute(ca,l);return null==ca||ca>=n};if(null!=K)return ca=>{ca=I.getAttribute(ca,v);return null==ca||ca<=K}}function S(I,v,l,n){if(null!=
l&&null!=n&&l===n)return K=>I.getAttribute(K,v)===l;if(null!=l&&null!=n)return K=>{K=I.getAttribute(K,v);return K>=l&&K<=n};if(null!=l)return K=>I.getAttribute(K,v)>=l;if(null!=n)return K=>I.getAttribute(K,v)<=n}function R(){return()=>!1}k.getTimeExtent=function(I,v){return ma.apply(this,arguments)};k.getTimeOperator=function(I,v,l){if(!v||!I)return null;const {startTimeField:n,endTimeField:K}=I;if(!n&&!K)return null;const {start:ca,end:L}=v;return null===ca&&null===L?null:void 0===ca&&void 0===L?
R():n&&K?aa(l,n,K,ca,L):S(l,n||K,ca,L)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,f){function ma(S){return"oid"===S.type||"esriFieldTypeOID"===S.type}function aa(S){return"global-id"===S.type||"esriFieldTypeGlobalID"===S.type}return function(){function S(I=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;
this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(I){this.fields=I;var v=[];for(const l of I){I=l?.name;const n=f.normalizeFieldName(l?.name)?.toLowerCase()??"";if(I&&n){const K=I.trim().toLowerCase();this._fieldsMap.set(I,l);this._fieldsMap.set(K,l);this._normalizedFieldsMap.set(n,l);v.push(K);"date"===l.type||"esriFieldTypeDate"===l.type?(this.dateFields.push(l),this._dateFieldsSet.add(l)):f.isNumericField(l)&&(this._numericFieldsSet.add(l),this.numericFields.push(l));
ma(l)||aa(l)||(l.editable=null==l.editable?!0:!!l.editable,l.nullable=null==l.nullable?!0:!!l.nullable)}}v.sort();this.uid=v.join(",")}}var R=S.prototype;R.destroy=function(){this._fieldsMap.clear()};R.has=function(I){return null!=this.get(I)};R.get=function(I){if(I){var v=this._fieldsMap.get(I);if(v)return v;(v=this._fieldsMap.get(I.trim().toLowerCase())??this._normalizedFieldsMap.get(f.normalizeFieldName(I)?.toLowerCase()??""))&&this._fieldsMap.set(I,v);return v}};R.isDateField=function(I){return this._dateFieldsSet.has(this.get(I))};
R.isNumericField=function(I){return this._numericFieldsSet.has(this.get(I))};R.normalizeFieldName=function(I){if(I=this.get(I))return I.name??void 0};k._createClass(S,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const I of this.fields)ma(I)||aa(I)||I.nullable||void 0!==f.getFieldDefaultValue(I)||this._requiredFields.push(I)}return this._requiredFields}}]);return S}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(k,f,ma,aa,S,R,I,v,l,n,K,ca,L,m,x){function d(O){return q.has(O)?q.get(O):"number"===typeof O?O:1}k.Task=void 0;(function(O){O[O.YIELD=1]="YIELD"})(k.Task||(k.Task={}));k.TaskPriority=void 0;(function(O){O.RESOURCE_CONTROLLER_IMMEDIATE="immediate";O.RESOURCE_CONTROLLER="schedule";O.SLIDE="slide";O.STREAM_DATA_LOADER="stream loader";O.ELEVATION_QUERY="elevation query";O.TERRAIN_SURFACE="terrain";O.SURFACE_GEOMETRY_UPDATES="surface geometry updates";O.LOD_RENDERER="LoD renderer";O.GRAPHICS_CORE=
"Graphics3D";O.I3S_CONTROLLER="I3S";O.POINT_CLOUD_LAYER="point cloud";O.FEATURE_TILE_FETCHER="feature fetcher";O.OVERLAY="overlay";O.STAGE="stage";O.GRAPHICS_DECONFLICTOR="graphics deconflictor";O.FILTER_VISIBILITY="Graphics3D filter visibility";O.SCALE_VISIBILITY="Graphics3D scale visibility";O.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";O.POINT_OF_INTEREST_FREQUENT="POI frequent";O.POINT_OF_INTEREST_INFREQUENT="POI infrequent";O.LABELER="labeler";O.FEATURE_QUERY_ENGINE="feature query";O.FEATURE_TILE_TREE=
"feature tile tree";O.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";O.ELEVATION_ALIGNMENT="elevation alignment";O.TEXT_TEXTURE_ATLAS="text texture atlas";O.TEXTURE_UNLOAD="texture unload";O.LINE_OF_SIGHT_TOOL="line of sight tool";O.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";O.ELEVATION_PROFILE="elevation profile";O.SNAPPING="snapping";O.SHADOW_ACCUMULATOR="shadow accumulator";O.CLOUDS_GENERATOR="clouds generator";O[O.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority=
{}));const q=new Map([[k.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[k.TaskPriority.RESOURCE_CONTROLLER,4],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.LOD_RENDERER,2],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,
4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.CLOUDS_GENERATOR,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,30]]),J=K.Milliseconds(6.5),G=K.Milliseconds(1),H=K.Milliseconds(30),T=K.Milliseconds(1E3/30),B=K.Milliseconds(100);var p;(function(O){let D=function(){function Q(){this._updating=new ca.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new I("total"),tasks:new Map};
this._frameTaskTimes=new Map;this._budget=new P;this._state=x.RenderState.INTERACTING;this._tasks=new v;this._runQueue=new v;this._load=0;this._idleStateCallbacks=new v;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=n.watch(()=>m.SCHEDULER_LOG_SLOW_TASKS,g=>this._debug=g,n.initial);for(const g of Object.keys(k.TaskPriority))this.performanceInfo.tasks.set(k.TaskPriority[g],new I(k.TaskPriority[g]));const A=this;this._test={FRAME_SAFETY_BUDGET:J,INTERACTING_BUDGET:T,IDLE_BUDGET:B,
get availableBudget(){return A._budget.budget},usedBudget:0,getBudget:()=>A._budget,setBudget:g=>A._budget=g,updateTask:g=>this._updateTask(g),getState:g=>this._getState(g),getRuntime:g=>this._getRuntime(g),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var C=Q.prototype;C._updatingChanged=function(){this._updating.set(this._tasks.some(A=>A.needsUpdate))};C.destroy=function(){this._tasks.toArray().forEach(A=>A.remove());this._tasks.clear();
R.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()};C.taskRunningChanged=function(A){this._updatingChanged();A&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};C.registerTask=function(A,g){const r=d(A);g=new F(this,A,g,r);this._tasks.push(g);this._updatingChanged();this.performanceInfo.tasks.has(A)||this.performanceInfo.tasks.set(A,
new I(A));return g};C.registerIdleStateCallbacks=function(A,g){const r={idleBegin:A,idleEnd:g};this._idleStateCallbacks.push(r);this.state===x.RenderState.IDLE&&this._idleUpdatesStartFired&&r.idleBegin();const W=this;return{remove:()=>this._removeIdleStateCallbacks(r),set idleBegin(ja){W._idleUpdatesStartFired&&(r.idleEnd(),W._state===x.RenderState.IDLE&&ja());r.idleBegin=ja},set idleEnd(ja){r.idleEnd=ja}}};C.updateBudget=function(A){this._test.usedBudget=0;++this._frameNumber;let g=J,r=A.frameDuration,
W=G;switch(this.state){case x.RenderState.IDLE:g=K.Milliseconds(0);r=K.Milliseconds(Math.max(B,A.frameDuration));W=H;break;case x.RenderState.INTERACTING:r=K.Milliseconds(Math.max(T,A.frameDuration))}r=K.Milliseconds(r-A.elapsedFrameTime-g);if(this.state!==x.RenderState.IDLE&&r<G&&!this._forceTask)return this._forceTask=!0,!1;r=K.Milliseconds(Math.max(r,W));this._budget.reset(r,this.state);this._updateLoad();return this._schedule()};C.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case x.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(A=>A.idleBegin()));this._runIdle();break;case x.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};C.stopFrame=function(){this._budget.reset(K.Milliseconds(0),this._state);this._budget.madeProgress()};C._removeIdleStateCallbacks=function(A){this._idleUpdatesStartFired&&A.idleEnd();this._idleStateCallbacks.removeUnordered(A)};C.removeTask=function(A){this._tasks.removeUnordered(A);
this._runQueue.removeUnordered(A);this._updatingChanged()};C._updateTask=function(A){this._tasks.forAll(g=>{g.name===A&&g.setPriority(A)})};C._getState=function(A){if(this._runQueue.some(r=>r.name===A))return k.TaskState.SCHEDULED;let g=k.TaskState.IDLE;this._tasks.forAll(r=>{r.name===A&&r.needsUpdate&&(1>=r.schedulePriority?g=k.TaskState.READY:g!==k.TaskState.READY&&(g=k.TaskState.WAITING))});return g};C._getRuntime=function(A){let g=0;this._tasks.forAll(r=>{r.name===A&&(g+=r.runtime)});return g};
C._resetRuntimes=function(){this._tasks.forAll(A=>A.runtime=0)};C._getRunning=function(){const A=new Map;this._tasks.forAll(r=>{r.needsUpdate&&A.set(r.name,(A.get(r.name)||0)+1)});if(0===A.size)return null;let g="";A.forEach((r,W)=>{g=1<r?g+` ${r}x ${W}`:g+` ${W}`});return g};C._runIdle=function(){this._run()};C._runInteracting=function(){this._run()};C._runAnimating=function(){this._run()};C._updateLoad=function(){const A=this._tasks.reduce((g,r)=>r.needsUpdate?++g:g,0);this._load=.9*this._load+
A*(1-.9)};C._schedule=function(){this._runQueue.filterInPlace(A=>{if(A.needsUpdate)return!0;A.schedulePriority=A.basePriority;return!1});for(this._tasks.forAll(A=>{0===A.basePriority&&A.needsUpdate&&!this._runQueue.includes(A)&&A.blockFrame!==this._frameNumber&&this._runQueue.unshift(A)});0===this._runQueue.length;){let A=!1;this._tasks.forAll(g=>{if(g.needsUpdate&&0!==g.schedulePriority&&0!==g.basePriority&&g.blockFrame!==this._frameNumber)switch(A=!0,g.schedulePriority){case 1:g.schedulePriority=
0;this._runQueue.push(g);break;default:--g.schedulePriority}});if(!A)return this._updatingChanged(),!1}this._updatingChanged();return!0};C._run=function(){const A=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var g=this._budget.now();const r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)===k.Task.YIELD&&(r.blockFrame=this._frameNumber)}catch(W){S.getLogger("esri.views.support.Scheduler").error(`Exception in task "${r.name}"`,W)}!this._budget.hasProgressed&&
r.blockFrame!==this._frameNumber&&r.needsUpdate&&(r.blockFrame=this._frameNumber);r.schedulePriority=r.basePriority;g=this._budget.now()-g;r.runtime+=g;this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+g);this._debug&&g>2*this._budget.budget&&console.log("Task",r.name,"used",g,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-A);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
A)};C._startFrameTaskTimes=function(){for(const A of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[A],0)};C._recordFrameTaskTimes=function(A){this._frameTaskTimes.forEach((g,r)=>this.performanceInfo.tasks.get(r).record(g));this.performanceInfo.total.record(A)};f._createClass(Q,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(A){this._state!==A&&(this._state=
A,this.state!==x.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(g=>g.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return Q}();O.Scheduler=D;let F=function(){function Q(A,g,r,W){this._scheduler=A;this.name=g;this._basePriority=W;this.runtime=this.blockFrame=0;this._queue=new L.PromiseQueue;this._handles=new ma;this.schedulePriority=this._basePriority;this._task=new ca.ObservableValue(R.isSome(r)?r:this._queue);this._handles.add(n.when(()=>
this.task.running,ja=>A.taskRunningChanged(ja)))}var C=Q.prototype;C.remove=function(){this.processQueue(t);this._scheduler.removeTask(this);this.schedule=z.schedule;this.reschedule=z.reschedule;this._handles.destroy()};C.setPriority=function(A){this.name=A;A=d(A);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=A;this._basePriority=A};C.schedule=function(A,g,r){return this._queue.push(A,g,r)};C.reschedule=function(A,g,r){return this._queue.unshift(A,g,r)};C.processQueue=
function(A){this._queue.runTask(A)};f._createClass(Q,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(A){this.setPriority(A)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return Q}(),P=function(){function Q(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=x.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var C=Q.prototype;C.run=function(A){if(this.done)return!1;!0===A()&&this.madeProgress();return!0};C.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};C.reset=function(A,g){this._begin=this.now();this._budget=A;this._state=g;this.resetProgress()};C.now=function(){return performance.now()};C.resetProgress=function(){this._done=this._progressed=!1};f._createClass(Q,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(A){this._enabled=A}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return Q}();O.Budget=P})(p||(p={}));k.TaskState=void 0;
(function(O){O.SCHEDULED="s";O.READY="r";O.WAITING="w";O.IDLE="i"})(k.TaskState||(k.TaskState={}));const t=(()=>{const O=new p.Budget;O.enabled=!1;return O})(),z=new (function(){function O(){}var D=O.prototype;D.remove=function(){};D.processQueue=function(){};D.schedule=function(F,P,Q){try{if(l.isAborted(P)){const C=l.createAbortError();return Q?Promise.resolve(Q(C)):Promise.reject(C)}return l.when(F(t))}catch(C){return Promise.reject(C)}};D.reschedule=function(F,P,Q){return this.schedule(F,P,Q)};
return O}());k.ImmediateTask=z;k.getTaskPriority=d;k.newScheduler=function(){return new p.Scheduler};k.noBudget=t;k.taskPriorities=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,f,ma,aa,S,R,I){function v(L,m,x={}){return l(L,m,x,K)}function l(L,m,x={},d){let q=null;const J=x.once?(G,H)=>{d(G)&&(aa.removeMaybe(q),
m(G,H))}:(G,H)=>{d(G)&&m(G,H)};q=R.watchTracked(L,J,x.sync,x.equals);x.initial&&(L=L(),J(L,L));return q}function n(L,m,x){if(S.isAborted(x))return Promise.reject(S.createAbortError());const d=L();if(m?.(d))return Promise.resolve(d);let q=null;return new Promise((J,G)=>{q=ma.handlesGroup([S.onAbort(x,()=>{q=aa.removeMaybe(q);G(S.createAbortError())}),l(L,H=>{q=aa.removeMaybe(q);J(H)},{sync:!1,once:!0},m??K)])})}function K(L){return!0}function ca(L){return!!L}k.autorun=I.autorun;k.initial={initial:!0};
k.on=function(L,m,x,d={}){function q(){G&&H&&(H.remove(),d.onListenerRemove?.(G),H=G=null)}function J(p){d.once&&d.once&&aa.removeMaybe(T);x(p)}let G=null,H=null,T=null;const B=v(L,(p,t)=>{q();f.isEventTarget(p)&&(G=p,H=f.on(p,m,J),d.onListenerAdd?.(p))},{sync:d.sync,initial:!0});return T=ma.makeHandle(()=>{B.remove();q()})};k.once=function(L,m){return n(L,null,m)};k.pausable=function(L,m,x={}){let d=!1;const q=v(L,(J,G)=>{d||m(J,G)},x);return{remove(){q.remove()},pause(){d=!0},resume(){d=!1}}};k.sync=
{sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=v;k.when=function(L,m,x={}){return l(L,m,x,ca)};k.whenOnce=function(L,m){return n(L,ca,m)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],function(k,f,ma){let aa=function(){function S(I){this._observable=new ma.SimpleObservable;this._value=I}var R=S.prototype;R.get=function(){f.trackAccess(this._observable);return this._value};
R.set=function(I){I!==this._value&&(this._value=I,this._observable.notify())};return S}();k.ObservableValue=aa;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(k,f,ma,aa){let S=function(){function I(){this._tasks=[];this._running=new aa.ObservableValue(!1)}var v=I.prototype;v.destroy=function(){this.cancelAll()};
v.runTask=function(l){for(;!l.done&&this._process(l);)l.madeProgress()};v.push=function(l,n,K){this._running.set(!0);return new Promise((ca,L)=>this._tasks.push(new R(ca,L,l,n,K)))};v.unshift=function(l,n,K){this._running.set(!0);return new Promise((ca,L)=>this._tasks.unshift(new R(ca,L,l,n,K)))};v._process=function(l){if(0===this._tasks.length)return!1;const n=this._tasks.shift();try{const K=ma.isAborted(n.signal);if(K&&!n.abortCallback)n.reject(ma.createAbortError());else{const ca=K?n.abortCallback?.(ma.createAbortError()):
n.callback(l);ma.isPromiseLike(ca)?ca.then(n.resolve,n.reject):n.resolve(ca)}}catch(K){n.reject(K)}this._running.set(0<this._tasks.length);return!0};v.cancelAll=function(){const l=ma.createAbortError();for(const n of this._tasks)if(n.abortCallback){const K=n.abortCallback(l);n.resolve(K)}else n.reject(l);this._tasks.length=0;this._running.set(!1)};f._createClass(I,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return I}(),R=function(I,
v,l,n,K){this.resolve=I;this.reject=v;this.callback=l;this.signal=n;this.abortCallback=K};k.PromiseQueue=S;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(k,f,ma,aa,S,R,I){ma=function(v){function l(){var n=
v.apply(this,arguments)||this;n.SCHEDULER_LOG_SLOW_TASKS=!1;n.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return n}k._inheritsLoose(l,v);return l}(ma);f.__decorate([aa.property()],ma.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);f.__decorate([aa.property()],ma.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ma=f.__decorate([I.subclass("esri.views.support.DebugFlags")],ma);return new ma})},"esri/views/support/RenderState":function(){define(["exports"],function(k){k.RenderState=
void 0;var f=k.RenderState||(k.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(k,f,ma,aa,S){function*R(G){switch(G.type){case "Feature":yield G;break;case "FeatureCollection":for(const H of G.features)H&&
(yield H)}}function*I(G){if(G)switch(G.type){case "Point":yield G.coordinates;break;case "LineString":case "MultiPoint":yield*G.coordinates;break;case "MultiLineString":case "Polygon":for(const H of G.coordinates)yield*H;break;case "MultiPolygon":for(const H of G.coordinates)for(const T of H)yield*T}}function*v(G,H={}){const {geometryType:T,objectIdField:B}=H;for(const p of G){const {geometry:t,properties:z,id:O}=p;if(t&&J[t.type]!==T)continue;G=z||{};let D=void 0;B&&(D=G[B],null==O||D||(G[B]=D=O));
yield new ma.OptimizedFeature(t?ca(new aa,t,H):null,G,null,D??void 0)}}function l(G){for(const H of G)if(2<H.length)return!0;return!1}function n(G){let H=0;for(let T=0;T<G.length;T++){const B=G[T],p=G[(T+1)%G.length];H+=B[0]*p[1]-p[0]*B[1]}return 0>=H}function K(G){const H=G[0],T=G[G.length-1];H[0]===T[0]&&H[1]===T[1]&&H[2]===T[2]||G.push(H);return G}function ca(G,H,T){switch(H.type){case "LineString":return x(G,H.coordinates,T),G;case "MultiLineString":for(const p of H.coordinates)x(G,p,T);return G;
case "MultiPoint":return x(G,H.coordinates,T),G;case "MultiPolygon":for(var B of H.coordinates)for(L(G,B[0],T),H=1;H<B.length;H++)m(G,B[H],T);return G;case "Point":return q(G,H.coordinates,T),G;case "Polygon":B=H.coordinates;L(G,B[0],T);for(H=1;H<B.length;H++)m(G,B[H],T);return G}}function L(G,H,T){H=K(H);n(H)?x(G,H,T):d(G,H,T)}function m(G,H,T){H=K(H);n(H)?d(G,H,T):x(G,H,T)}function x(G,H,T){for(const B of H)q(G,B,T);G.lengths.push(H.length)}function d(G,H,T){for(let B=H.length-1;0<=B;B--)q(G,H[B],
T);G.lengths.push(H.length)}function q(G,H,T){const [B,p,t]=H;G.coords.push(B,p);T.hasZ&&G.coords.push(t||0)}const J={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};k.createOptimizedFeatures=function(G,H){return Array.from(v(R(G),H))};k.getGeometryType=function(G){return J[G]};k.inferLayerProperties=function(G,H={}){const T=[];var B=new Set;const p=
new Set;var t=!1;let z=null,O=!1,D=void 0;({geometryType:H=null}=H);var F=!1;for(const P of R(G)){const {geometry:Q,properties:C,id:A}=P;if(Q&&(H||(H=J[Q.type]),J[Q.type]!==H))continue;t||(t=I(Q),t=l(t));!O&&(O=null!=A)&&(D=typeof A,C&&(z=Object.keys(C).filter(g=>C[g]===A)));C&&z&&O&&null!=A&&(1<z.length?z=z.filter(g=>C[g]===A):1===z.length&&(z=C[z[0]]===A?z:[]));if(!F&&C){G=!0;for(const g in C){if(B.has(g))continue;F=C[g];if(null==F){G=!1;p.add(g);continue}a:switch(typeof F){case "string":F="esriFieldTypeString";
break a;case "number":F="esriFieldTypeDouble";break a;default:F="unknown"}if("unknown"===F){p.add(g);continue}p.delete(g);B.add(g);const r=S.normalizeFieldName(g);r&&T.push({name:r,alias:g,type:F})}F=G}}if(B=S.normalizeFieldName(1===z?.length&&z[0]||null)??void 0)for(const P of T)if(P.name===B&&S.isNumericField(P)){P.type="esriFieldTypeOID";break}return{fields:T,geometryType:H,hasZ:t,objectIdFieldName:B,objectIdFieldType:D,unknownFields:Array.from(p)}};k.validateGeoJSON=function(G){if(!G)throw new f("geojson-layer:empty",
"GeoJSON data is empty");if("Feature"!==G.type&&"FeatureCollection"!==G.type)throw new f("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:G});({crs:G}=G);if(G){var H="string"===typeof G?G:"name"===G.type?G.properties.name:"EPSG"===G.type?G.properties.code:null,T=RegExp(".*(CRS84H?|4326)$","i");if(!H||!T.test(H))throw new f("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:G});}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,f,ma,aa,S){const R=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let I=1;k.createCapabilities=function(v,l){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:v},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:l,supportsExceedsLimitStatistics:!0},query:aa.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:l,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=function(v,l){if(f("esri-csp-restrictions"))return()=>({[l]:null,...v});try{let n=`this.${l} = null;`;for(const ca in v){const L=R.test(ca)?`.${ca}`:`["${ca}"]`;n+=`this${L} = ${JSON.stringify(v[ca])};`}const K=
(new Function(`\n      return class AttributesClass$${I++} {\n        constructor() {\n          ${n};\n        }\n      }\n    `))();return()=>new K}catch(n){return()=>({[l]:null,...v})}};k.createDefaultTemplate=function(v={}){return[{name:"New Feature",description:"",prototype:{attributes:ma.clone(v)}}]};k.createDrawingInfo=function(v){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===v||"esriGeometryMultipoint"===v?S.defaultPointSymbolJSON:"esriGeometryPolyline"===v?S.defaultPolylineSymbolJSON:
S.defaultPolygonSymbolJSON}}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(k){const f=[252,146,31,255],ma={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},aa={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};k.defaultColor=f;k.defaultOutlineColor=[153,153,153,255];k.defaultPointSymbolJSON=ma;k.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=aa;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),
function(k,f,ma,aa,S,R){function I(d){return new ca(d)}function v(){return l.apply(this,arguments)}function l(){l=ma._asyncToGenerator(function*(){aa.isNone(x)&&(x=yield new Promise((d,q)=>k(["../../../../geometry/geometryEngineJSON"],d,q)));return x});return l.apply(this,arguments)}function n(){n=ma._asyncToGenerator(function*(d,q){!S.isValid(d)||"esriGeometryPolygon"!==q&&"esriGeometryPolyline"!==q||(yield v())});return n.apply(this,arguments)}let K=function(){this.description=this.code=null},ca=
function(d){this.error=new K;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=d},L=function(d){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=d};const m=new Set;let x;f.createFeatureEditErrorResult=I;f.createFeatureEditSuccessResult=function(d){return new L(d)};f.loadGeometryEngineForSimplify=function(d,q){return n.apply(this,arguments)};f.mixAttributes=function(d,q,J,G=!1,H){m.clear();for(const t in J){const z=d.get(t);if(!z)continue;var T=
J[t],B=z,p=T;let O=p;"string"===typeof p&&R.isNumericField(B)?O=parseFloat(p):null!=p&&R.isStringField(B)&&"string"!==typeof p&&(O=String(p));B=R.sanitizeNullFieldValue(O);B!==T&&H&&H.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:z,originalValue:T,sanitizedValue:B}});m.add(z.name);if(z&&(G||z.editable)){if(T=R.validateFieldValue(z,B))return I(R.validationErrorToString(T,z,B));q[z.name]=B}}for(const t of d?.requiredFields??[])if(!m.has(t.name))return I(`missing required field "${t.name}"`);
return null};f.simplify=function(d,q){if(!d||!S.isValid(q))return d;if("rings"in d||"paths"in d){if(aa.isNone(x))throw new TypeError("geometry engine not loaded");return x.simplify(q,d)}return d};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(k,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",
esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=f;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(k,
f,ma,aa,S,R,I,v,l,n,K,ca,L,m,x,d,q,J,G){const H={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function T(){var p=this;this._queryEngine=null;this._snapshotFeatures=function(){var t=k._asyncToGenerator(function*(z){z=yield p._fetch(z);return p._createFeatures(z)});return function(z){return t.apply(this,arguments)}}()}var B=T.prototype;B.destroy=function(){this._queryEngine?.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=
null};B.load=function(){var p=k._asyncToGenerator(function*(t,z={}){this._loadOptions={url:t.url,customParameters:t.customParameters};var O=[];yield this._checkProjection(t.spatialReference);var D=null;t.url&&(D=yield this._fetch(z?.signal));var F=m.inferLayerProperties(D,{geometryType:t.geometryType});z=t.fields||F.fields||[];const P=null!=t.hasZ?t.hasZ:F.hasZ,Q=F.geometryType;let C=t.objectIdField||F.objectIdFieldName||"__OBJECTID";const A=t.spatialReference||l.WGS84;t=t.timeInfo;z===F.fields&&
0<F.unknownFields.length&&O.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:F.unknownFields}});let g=(new q(z)).get(C);g?("esriFieldTypeString"!==g.type&&(g.type="esriFieldTypeOID"),g.editable=!1,g.nullable=!1,C=g.name):(g={alias:C,name:C,type:"string"===F.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},z.unshift(g));F={};for(var r of z){null==r.name&&(r.name=
r.alias);null==r.alias&&(r.alias=r.name);if(!r.name)throw new aa("geojson-layer:invalid-field-name","field name is missing",{field:r});if(!J.kebabDict.jsonValues.includes(r.type))throw new aa("geojson-layer:invalid-field-type",`invalid type for field "${r.name}"`,{field:r});if(r.name!==g.name){const ta=G.getFieldDefaultValue(r);void 0!==ta&&(F[r.name]=ta)}}this._fieldsIndex=new q(z);r=this._fieldsIndex.requiredFields.indexOf(g);-1<r&&this._fieldsIndex.requiredFields.splice(r,1);t&&(t.startTimeField&&
((r=this._fieldsIndex.get(t.startTimeField))?(t.startTimeField=r.name,r.type="esriFieldTypeDate"):t.startTimeField=null),t.endTimeField&&((r=this._fieldsIndex.get(t.endTimeField))?(t.endTimeField=r.name,r.type="esriFieldTypeDate"):t.endTimeField=null),t.trackIdField&&((r=this._fieldsIndex.get(t.trackIdField))?t.trackIdField=r.name:(t.trackIdField=null,O.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:t}}))),t.startTimeField||t.endTimeField||
(O.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:t}}),t=null));r=Q?x.createDrawingInfo(Q):void 0;O={warnings:O,featureErrors:[],layerDefinition:{...H,drawingInfo:r??void 0,templates:x.createDefaultTemplate(F),extent:void 0,geometryType:Q,objectIdField:C,fields:z,hasZ:!!P,timeInfo:t}};this._queryEngine=new L.QueryEngine({fields:z,geometryType:Q,hasM:!1,hasZ:P,objectIdField:C,spatialReference:A,timeInfo:t,featureStore:new K({geometryType:Q,
hasM:!1,hasZ:P}),cacheSpatialQueries:!0});this._createDefaultAttributes=x.createDefaultAttributesFunction(F,C);D=yield this._createFeatures(D);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);D=this._normalizeFeatures(D,O.warnings,O.featureErrors);this._queryEngine.featureStore.addMany(D);const {fullExtent:W,timeExtent:ja}=yield this._queryEngine.fetchRecomputedExtents();O.layerDefinition.extent=W;if(ja){const {start:ta,end:za}=ja;O.layerDefinition.timeInfo.timeExtent=[ta,
za]}return O});return function(t){return p.apply(this,arguments)}}();B.applyEdits=function(){var p=k._asyncToGenerator(function*(t){const {spatialReference:z,geometryType:O}=this._queryEngine;yield Promise.all([d.loadGeometryEngineForSimplify(z,O),ca.checkProjectionSupport(t.adds,z),ca.checkProjectionSupport(t.updates,z)]);yield this._waitSnapshotComplete();return this._applyEdits(t)});return function(t){return p.apply(this,arguments)}}();B.queryFeatures=function(){var p=k._asyncToGenerator(function*(t=
{},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(t,z.signal)});return function(){return p.apply(this,arguments)}}();B.queryFeatureCount=function(){var p=k._asyncToGenerator(function*(t={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(t,z.signal)});return function(){return p.apply(this,arguments)}}();B.queryObjectIds=function(){var p=k._asyncToGenerator(function*(t={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(t,
z.signal)});return function(){return p.apply(this,arguments)}}();B.queryExtent=function(){var p=k._asyncToGenerator(function*(t={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(t,z.signal)});return function(){return p.apply(this,arguments)}}();B.querySnapping=function(){var p=k._asyncToGenerator(function*(t,z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(t,z.signal)});return function(t){return p.apply(this,arguments)}}();
B.refresh=function(){var p=k._asyncToGenerator(function*(t){this._loadOptions.customParameters=t;this._snapshotTask?.abort();this._snapshotTask=ma.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(D=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);(D=this._normalizeFeatures(D))&&this._queryEngine.featureStore.addMany(D)},D=>{this._queryEngine.featureStore.clear();I.isAbortError(D)||S.getLogger("esri.layers.GeoJSONLayer").error(new aa("geojson-layer:refresh",
"An error occurred during refresh",{error:D}))});yield this._waitSnapshotComplete();const {fullExtent:z,timeExtent:O}=yield this._queryEngine.fetchRecomputedExtents();return{extent:z,timeExtent:O}});return function(t){return p.apply(this,arguments)}}();B._createFeatures=function(){var p=k._asyncToGenerator(function*(t){if(null==t)return[];const {geometryType:z,hasZ:O,objectIdField:D}=this._queryEngine;t=m.createOptimizedFeatures(t,{geometryType:z,hasZ:O,objectIdField:D});if(!l.equals(this._queryEngine.spatialReference,
l.WGS84))for(const F of t)R.isSome(F.geometry)&&(F.geometry=n.convertFromGeometry(ca.project(n.convertToGeometry(F.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),l.WGS84,this._queryEngine.spatialReference)));return t});return function(t){return p.apply(this,arguments)}}();B._waitSnapshotComplete=function(){var p=k._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});
return function(){return p.apply(this,arguments)}}();B._fetch=function(){var p=k._asyncToGenerator(function*(t){const {url:z,customParameters:O}=this._loadOptions;t=(yield f(z,{responseType:"json",query:{...O},signal:t})).data;yield m.validateGeoJSON(t);return t});return function(t){return p.apply(this,arguments)}}();B._normalizeFeatures=function(p,t,z){const {objectIdField:O}=this._queryEngine,D=[];for(const F of p){p=this._createDefaultAttributes();const P=d.mixAttributes(this._fieldsIndex,p,F.attributes,
!0,t);P?z?.push(P):(this._assignObjectId(p,F.attributes,!0),F.attributes=p,F.objectId=p[O],D.push(F))}return D};B._applyEdits=function(){var p=k._asyncToGenerator(function*(t){const {adds:z,updates:O,deletes:D}=t;t={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};z&&z.length&&this._applyAddEdits(t,z);O&&O.length&&this._applyUpdateEdits(t,O);if(D&&D.length){for(const Q of D)t.deleteResults.push(d.createFeatureEditSuccessResult(Q));this._queryEngine.featureStore.removeManyById(D)}const {fullExtent:F,
timeExtent:P}=yield this._queryEngine.fetchRecomputedExtents();return{extent:F,timeExtent:P,featureEditResults:t}});return function(t){return p.apply(this,arguments)}}();B._applyAddEdits=function(p,t){const {addResults:z}=p,{geometryType:O,hasM:D,hasZ:F,objectIdField:P,spatialReference:Q,featureStore:C}=this._queryEngine,A=[];for(const g of t){if(g.geometry&&O!==v.getJsonType(g.geometry)){z.push(d.createFeatureEditErrorResult("Incorrect geometry type."));continue}t=this._createDefaultAttributes();
const r=d.mixAttributes(this._fieldsIndex,t,g.attributes);r?z.push(r):(this._assignObjectId(t,g.attributes),g.attributes=t,null!=g.uid&&(p.uidToObjectId[g.uid]=g.attributes[P]),R.isSome(g.geometry)&&(t=g.geometry.spatialReference??Q,g.geometry=ca.project(d.simplify(g.geometry,t),t,Q)),A.push(g),z.push(d.createFeatureEditSuccessResult(g.attributes[P])))}C.addMany(n.convertFromFeatures([],A,O,F,D,P))};B._applyUpdateEdits=function({updateResults:p},t){const {geometryType:z,hasM:O,hasZ:D,objectIdField:F,
spatialReference:P,featureStore:Q}=this._queryEngine;for(const A of t){const {attributes:g,geometry:r}=A;t=g&&g[F];if(null==t){p.push(d.createFeatureEditErrorResult(`Identifier field ${F} missing`));continue}if(!Q.has(t)){p.push(d.createFeatureEditErrorResult(`Feature with object id ${t} missing`));continue}const W=n.convertToFeature(Q.getFeature(t),z,D,O);if(R.isSome(r)){if(z!==v.getJsonType(r)){p.push(d.createFeatureEditErrorResult("Incorrect geometry type."));continue}var C=r.spatialReference??
P;W.geometry=ca.project(d.simplify(r,C),C,P)}if(g&&(C=d.mixAttributes(this._fieldsIndex,W.attributes,g))){p.push(C);continue}Q.add(n.convertFromFeature(W,z,D,O,F));p.push(d.createFeatureEditSuccessResult(t))}};B._createObjectIdGenerator=function(p,t){const z=p.fieldsIndex.get(p.objectIdField);if("esriFieldTypeString"===z.type)return()=>z.name+"-"+Date.now().toString(16);let O=Number.NEGATIVE_INFINITY;for(const D of t)D.objectId&&(O=Math.max(O,D.objectId));O=Math.max(0,O)+1;return()=>O++};B._assignObjectId=
function(p,t,z=!1){const O=this._queryEngine.objectIdField;p[O]=z&&O in t?t[O]:this._objectIdGenerator()};B._checkProjection=function(){var p=k._asyncToGenerator(function*(t){try{yield ca.checkProjectionSupport(l.WGS84,t)}catch{throw new aa("geojson-layer","Projection not supported");}});return function(t){return p.apply(this,arguments)}}();return T}()});