// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(Q){return function(){function l(E){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(E&&E.steps)for(const p of E.steps)p instanceof Q?this.steps.push(p):this.steps.push(new Q({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}l.cacheKey=function(E,p){return[void 0!==E.wkid&&null!==E.wkid?E.wkid.toString():"-1",void 0!==E.wkt&&null!==E.wkt?E.wkt.toString():
"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};l.fromGE=function(E){const p=new l;let G="";for(const ca of E.steps)E=Q.fromGE(ca),p.steps.push(E),G+=E.uid.toString()+",";p._cachedProjection={};p._gtlistentry=null;p._chain=G;return p};var J=l.prototype;J.getInverse=function(){const E=new l;E.steps=[];for(let p=this.steps.length-1;0<=p;p--)E.steps.push(this.steps[p].getInverse());return E};J.getGTListEntry=function(){let E="";for(const p of this.steps)E+=
p.uid.toString()+",";E!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=E);return this._gtlistentry};J.assignCachedGe=function(E,p,G){this._cachedProjection[l.cacheKey(E,p)]=G};J.getCachedGeTransformation=function(E,p){let G="";for(const ca of this.steps)G+=ca.uid.toString()+",";G!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=G);E=this._cachedProjection[l.cacheKey(E,p)];return void 0===E?null:E};return l}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(Q){let l=0;return function(){function J(E){this.uid=l++;E?(this._wkt=null!=E.wkt?E.wkt:null,this._wkid=null!=E.wkid?E.wkid:-1,this._isInverse=null!=E.isInverse?!0===E.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}J.fromGE=function(E){const p=new J;p._wkt=E.wkt;p._wkid=E.wkid;p._isInverse=E.isInverse;return p};J.prototype.getInverse=function(){const E=new J;E._wkt=this.wkt;E._wkid=this._wkid;E._isInverse=!this.isInverse;return E};Q._createClass(J,[{key:"wkt",get:function(){return this._wkt},
set:function(E){this._wkt=E;this.uid=l++}},{key:"wkid",get:function(){return this._wkid},set:function(E){this._wkid=E;this.uid=l++}},{key:"isInverse",get:function(){return this._isInverse},set:function(E){this._isInverse=E;this.uid=l++}}]);return J}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u){var B;E=B=function(h){function e(c){c=h.call(this,c)||this;c.width=null;c.height=null;c.pixelType="f32";c.validPixelCount=null;c.mask=null;c.maskIsAlpha=!1;c.premultiplyAlpha=!1;c.statistics=null;c.depthCount=1;return c}Q._inheritsLoose(e,h);e.createEmptyBand=function(c,n){return new (B.getPixelArrayConstructor(c))(n)};e.getPixelArrayConstructor=function(c){let n;switch(c){case "u1":case "u2":case "u4":case "u8":n=Uint8Array;break;case "u16":n=Uint16Array;break;
case "u32":n=Uint32Array;break;case "s8":n=Int8Array;break;case "s16":n=Int16Array;break;case "s32":n=Int32Array;break;case "f32":n=Float32Array;break;case "f64":n=Float64Array;break;case "c64":case "c128":case "unknown":n=Float32Array}return n};var f=e.prototype;f.castPixelType=function(c){if(!c)return"f32";c=c.toLowerCase();["u1","u2","u4"].includes(c)?c="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(c)||(c="f32");return c};f.getPlaneCount=function(){return this.pixels?.length};
f.addData=function(c){if(!c.pixels||c.pixels.length!==this.width*this.height)throw new J("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(c.pixels);this.statistics.push(c.statistics??new F.SimpleBandStatistics)};f.getAsRGBA=function(){const c=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(c);
break;default:this._fillFrom8Bit(c)}return new Uint8ClampedArray(c)};f.getAsRGBAFloat=function(){const c=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(c);return c};f.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(w=>this._calculateBandStatistics(w,this.mask));var c=this.mask,n=0;if(ca.isSome(c))for(let w=0;w<c.length;w++)c[w]&&n++;else n=this.width*this.height;this.validPixelCount=n}};f.clamp=function(c){if(c&&"f64"!==c&&"f32"!==c&&this.pixels){var [n,
w]=u.getPixelValueRange(c),x=this.pixels,b=this.width*this.height,d=x.length,r=[];for(let t=0;t<d;t++){var q=B.createEmptyBand(c,b);var k=x[t];for(let z=0;z<b;z++){var g=k[z];q[z]=g>w?w:g<n?n:g}r.push(q)}this.pixels=r;this.pixelType=c}};f.extractBands=function(c){const {pixels:n,statistics:w}=this;if(ca.isNone(c)||0===c.length||!n||0===n.length)return this;var x=n.length;const b=c.some(d=>d>=n.length);x=x===c.length&&!c.some((d,r)=>d!==r);return b||x?this:new B({pixelType:this.pixelType,width:this.width,
height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:c.map(d=>n[d]),statistics:w&&c.map(d=>w[d])})};f.clone=function(){const c=new B({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});ca.isSome(this.mask)&&(c.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let n;const w=B.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){c.pixels=
[];const x=!!this.pixels[0].slice;for(n=0;n<this.pixels.length;n++)c.pixels[n]=x?this.pixels[n].slice(0,this.pixels[n].length):new w(this.pixels[n])}if(this.statistics)for(c.statistics=[],n=0;n<this.statistics.length;n++)c.statistics[n]=p.clone(this.statistics[n]);c.premultiplyAlpha=this.premultiplyAlpha;return c};f._fillFrom8Bit=function(c){const {mask:n,maskIsAlpha:w,premultiplyAlpha:x,pixels:b}=this;if(c&&b&&b.length){var d,r;var q=d=r=b[0];3<=b.length?(d=b[1],r=b[2]):2===b.length&&(d=b[1]);var k=
new Uint32Array(c),g=this.width*this.height;if(q.length!==g)G.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(ca.isSome(n)&&n.length===g)if(w)for(c=0;c<g;c++){const t=n[c];if(t){const z=t/255;k[c]=x?t<<24|r[c]*z<<16|d[c]*z<<8|q[c]*z:t<<24|r[c]<<16|d[c]<<8|q[c]}}else for(c=0;c<g;c++)n[c]&&(k[c]=-16777216|r[c]<<16|d[c]<<8|q[c]);else for(c=0;c<g;c++)k[c]=-16777216|r[c]<<16|d[c]<<8|q[c]}else G.getLogger(this.declaredClass).error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};f._fillFromNon8Bit=function(c){const {pixels:n,mask:w,statistics:x}=this;if(c&&n&&n.length){var b=this.pixelType,d=1,r=0;d=1;if(x&&0<x.length){for(var q of x)null!=q.minValue&&(r=Math.min(r,q.minValue)),null!=q.maxValue&&null!=q.minValue&&(d=Math.max(d,q.maxValue-q.minValue));d=255/d}else d=255,"s8"===b?(r=-128,d=127):"u16"===b?d=65535:"s16"===b?(r=-32768,d=32767):"u32"===b?d=4294967295:"s32"===b?(r=-2147483648,d=2147483647):"f32"===b?
(r=-3.4*1E39,d=3.4*1E39):"f64"===b&&(r=-Number.MAX_VALUE,d=Number.MAX_VALUE),d=255/(d-r);c=new Uint32Array(c);b=this.width*this.height;var k,g,t;q=k=g=n[0];if(q.length!==b)return G.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=n.length)if(k=n[1],3<=n.length&&(g=n[2]),ca.isSome(w)&&w.length===b)for(t=0;t<b;t++)w[t]&&(c[t]=-16777216|(g[t]-r)*d<<16|(k[t]-r)*d<<8|(q[t]-r)*d);else for(t=0;t<b;t++)c[t]=-16777216|(g[t]-r)*d<<16|(k[t]-r)*
d<<8|(q[t]-r)*d;else if(ca.isSome(w)&&w.length===b)for(t=0;t<b;t++)k=(q[t]-r)*d,w[t]&&(c[t]=-16777216|k<<16|k<<8|k);else for(t=0;t<b;t++)k=(q[t]-r)*d,c[t]=-16777216|k<<16|k<<8|k}else G.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};f._fillFrom32Bit=function(c){const {pixels:n,mask:w}=this;if(!c||!n||!n.length)return G.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let x,b,d,r;x=b=d=n[0];3<=n.length?(b=n[1],d=n[2]):2===n.length&&(b=n[1]);const q=this.width*this.height;if(x.length!==q)return G.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let k=0;if(ca.isSome(w)&&w.length===q)for(r=0;r<q;r++)c[k++]=x[r],c[k++]=b[r],c[k++]=d[r],c[k++]=w[r]&1;else for(r=0;r<q;r++)c[k++]=x[r],c[k++]=b[r],c[k++]=d[r],c[k++]=1};f._calculateBandStatistics=function(c,n){let w=Infinity,x=-Infinity;const b=c.length;let d,
r=0;if(ca.isSome(n))for(d=0;d<b;d++)n[d]&&(r=c[d],w=r<w?r:w,x=r>x?r:x);else for(d=0;d<b;d++)r=c[d],w=r<w?r:w,x=r>x?r:x;return new F.SimpleBandStatistics(w,x)};return e}(E.JSONSupport);l.__decorate([U.property({json:{write:!0}})],E.prototype,"width",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"height",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"pixelType",void 0);l.__decorate([N.cast("pixelType")],E.prototype,"castPixelType",null);l.__decorate([U.property({json:{write:!0}})],
E.prototype,"validPixelCount",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"mask",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"maskIsAlpha",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"pixels",void 0);l.__decorate([U.property()],E.prototype,"premultiplyAlpha",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"statistics",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"depthCount",void 0);l.__decorate([U.property({json:{write:!0}})],
E.prototype,"noDataValues",void 0);l.__decorate([U.property({json:{write:!0}})],E.prototype,"bandMasks",void 0);return E=B=l.__decorate([L.subclass("esri.layers.support.PixelBlock")],E)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],function(Q){Q.SimpleBandStatistics=function(l=null,J=null,E=null){this.minValue=l;this.maxValue=J;this.noDataValue=E};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],
function(Q){function l(E){return J[E]??[-3.4028234663852886E38,3.4028234663852886E38]}const J={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};Q.convertNoDataToMask=function(E,p,G){if(!(E.depthCount&&1<E.depthCount)){var {pixels:ca,statistics:U,pixelType:N}=E,L=ca[0].length,F=E.bandMasks??[],u=E.mask??(new Uint8Array(L)).fill(255),
B="f32"===N||"f64"===N,h=l(N),e=!1;for(let n=0;n<ca.length;n++){const w="number"===typeof p?p:p[n];if(null==w)continue;var f=U?.[n].maxValue??h[1];if((U?.[n].minValue??h[0])>w+Number.EPSILON||f<w-Number.EPSILON)continue;f=F[n]||(new Uint8Array(L)).fill(255);const x=ca[n];var c=G?.customFloatTolerance;if(B&&0!==c){c||(c=9.999999E37<=Math.abs(w)?2E-7*Math.abs(w):"f32"===N?2**-23:Number.EPSILON);for(let b=0;b<x.length;b++)f[b]&&Math.abs(x[b]-w)<c&&(x[b]=0,f[b]=0,u[b]=0,e=!0)}else for(c=0;c<x.length;c++)f[c]&&
x[c]===w&&(x[c]=0,f[c]=0,u[c]=0,e=!0);F[n]=f}e&&(E.bandMasks=F,E.mask=u);e&&"updateStatistics"in E&&E.updateStatistics()}};Q.getPixelValueRange=l;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u,B,h){function e(C,M){return f.apply(this,arguments)}function f(){f=l._asyncToGenerator(function*(C,M){if(!h.isPlatformLittleEndian)throw new J("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield U.load();const {offset:da}=M,{width:qa,height:xa,pixelType:ja,statistics:P,depthCount:O,noDataValues:v,bandMasks:K,pixels:Y,mask:S}=U.decode(C,{inputOffset:da,returnInterleaved:M.returnInterleaved});return new p({width:qa,height:xa,pixelType:ja.toLowerCase(),
pixels:Y,mask:S,statistics:P,bandMasks:K,depthCount:O,noDataValues:v})});return f.apply(this,arguments)}function c(C,M){return n.apply(this,arguments)}function n(){n=l._asyncToGenerator(function*(C,M){C=yield B.decode(C,{...M,noDataValue:null});E.assertIsSome(C);C=new p({width:C.width,height:C.height,pixels:C.pixels,pixelType:C.pixelType.toLowerCase(),mask:C.mask,statistics:null});C.updateStatistics();return C});return n.apply(this,arguments)}function w(C,M){return x.apply(this,arguments)}function x(){x=
l._asyncToGenerator(function*(C,M){C=yield B.decodeTileOrStrip(C,M.customOptions);C=new p({width:C.width,height:C.height,pixels:C.pixels,pixelType:C.pixelType.toLowerCase(),mask:C.mask,statistics:null});C.updateStatistics();return C});return x.apply(this,arguments)}function b(C,M){const da=M.pixelType||"u8",qa=p.getPixelArrayConstructor(da),xa="u8"===da?C:new qa(C.buffer),ja=[],P=M.planes||1;if(1===P)ja.push(xa);else for(let O=0;O<P;O++){const v=(M.width||1)*(M.height||C.length),K=new qa(v);for(let Y=
0;Y<v;Y++)K[Y]=xa[Y*P+O];ja.push(K)}C=new p({width:M.width||1,height:M.height||C.length,pixels:ja,pixelType:da,statistics:null});C.updateStatistics();return C}function d(C,M){C=(new F.Zlib(new Uint8Array(C))).getBytes();return b(C,M)}function r(C,M){C=N.decode(C,M.offset,M.eof,!M.isInputBigEndian);return b(C,M)}function q(C,M){C=ca.decode(C,M.hasNoZlibMask??void 0);C=new p({width:C.width,height:C.height,pixels:C.pixels,pixelType:"U8",mask:C.mask,statistics:null});C.updateStatistics();return C}function k(C,
M){C=new Uint8Array(C);C=new I(C);const {width:da,height:qa}=M;M=da*qa;C=C.decode();let xa=0;var ja=0;let P;ja=new Uint8Array(M);for(xa=0;xa<M;xa++)ja[xa]=C[4*xa+3];const O=new p({width:da,height:qa,pixels:[],pixelType:"U8",mask:ja,statistics:[]});for(xa=0;3>xa;xa++){P=new Uint8Array(M);for(ja=0;ja<M;ja++)P[ja]=C[4*ja+xa];O.addData({pixels:P})}O.updateStatistics();return O}function g(C,M,da,qa){return t.apply(this,arguments)}function t(){t=l._asyncToGenerator(function*(C,M,da,qa){C=yield(new G).decode(C,
{applyJpegMask:!1,format:M,...da},qa);C=new p(C);C.updateStatistics();return C});return t.apply(this,arguments)}function z(C){if(null==C)throw new J("rasterCodec:decode","parameter encodeddata is required.");C=new Uint8Array(C,0,10);let M="";255===C[0]&&216===C[1]?M="jpg":137===C[0]&&80===C[1]&&78===C[2]&&71===C[3]?M="png":67===C[0]&&110===C[1]&&116===C[2]&&90===C[3]&&73===C[4]&&109===C[5]&&97===C[6]&&103===C[7]&&101===C[8]&&32===C[9]?M="lerc":76===C[0]&&101===C[1]&&114===C[2]&&99===C[3]&&50===C[4]&&
32===C[5]?M="lerc2":73===C[0]&&73===C[1]&&42===C[2]&&0===C[3]||77===C[0]&&77===C[1]&&0===C[2]&&42===C[3]||73===C[0]&&73===C[1]&&43===C[2]&&0===C[3]||77===C[0]&&77===C[1]&&0===C[2]&&43===C[3]?M="tiff":71===C[0]&&73===C[1]&&70===C[2]?M="gif":66===C[0]&&77===C[1]?M="bmp":String.fromCharCode.apply(null,C).toLowerCase().includes("error")&&(M="error");return M}function A(C){let M=null;switch(C){case "lerc":case "lerc2":M=e;break;case "jpg":M=q;break;case "png":M=k;break;case "bsq":case "bip":M=(da,qa)=>
{var xa=qa.pixelType,ja=null;let P=null;switch(xa?xa.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":P=255;ja=Uint8Array;break;case "u16":P=P||65535;ja=Uint16Array;break;case "u32":P=P||2**32-1;ja=Uint32Array;break;case "s8":P=P||-128;ja=Int8Array;break;case "s16":P=P||-32768;ja=Int16Array;break;case "s32":P=P||-(2**31);ja=Int32Array;break;default:ja=Float32Array}({pixelTypeCtor:xa}={pixelTypeCtor:ja,noDataValue:P});ja=u.decode;da=ja(da,{width:qa.width,height:qa.height,pixelType:xa,format:C});
qa=new p({width:qa.width,height:qa.height,pixels:da.pixels,pixelType:qa.pixelType,mask:da.mask,statistics:null});qa.updateStatistics();return qa};break;case "tiff":M=c;break;case "deflate":M=d;break;case "lzw":M=r;break;case "error":M=()=>{throw new J("rasterCodec:decode","input data contains error");};break;default:M=()=>{throw new J("rasterCodec:decode","unsupported raster format");}}return M}function y(C,M=1){if(C){var {pixels:da,width:qa,height:xa,mask:ja}=C;if(da&&0!==da.length){var P=da.length,
O=qa-1,v=xa-1,K=[],Y,S,T=null,W=p.getPixelArrayConstructor(C.pixelType);if(0===M){for(M=0;M<P;M++){var ea=da[M];var na=new W(O*v);for(Y=0;Y<v;Y++){var a=Y*qa;for(S=0;S<O;S++)na[Y*O+S]=ea[a+S]}K.push(na)}if(E.isSome(ja))for(T=new Uint8Array(O*v),Y=0;Y<v;Y++)for(a=Y*qa,S=0;S<O;S++)T[Y*O+S]=ja[a+S]}else{for(M=0;M<P;M++){ea=da[M];na=new W(O*v);for(Y=0;Y<v;Y++)for(a=Y*qa,S=0;S<O;S++)na[Y*O+S]=(ea[a+S]+ea[a+S+1]+ea[a+qa+S]+ea[a+qa+S+1])/4;K.push(na)}if(ja)for(T=new Uint8Array(O*v),Y=0;Y<v;Y++)for(a=Y*qa,
S=0;S<O;S++)T[Y*O+S]=Math.min.apply(null,[ja[a+S],ja[a+S+1],ja[a+qa+S],ja[a+qa+S+1]])}C.width=O;C.height=v;C.mask=T;C.pixels=K}}}function D(){D=l._asyncToGenerator(function*(C,M={},da){if(null==C)throw new J("rasterCodec:decode","missing encodeddata parameter.");let qa=M.format&&M.format.toLowerCase();if(!("bsq"!==qa&&"bip"!==qa||null!=M.width&&null!=M.height))throw new J("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===qa&&M.customOptions)return w(C,M);if(!qa||
"bsq"!==qa&&"bip"!==qa&&"deflate"!==qa&&"lzw"!==qa)qa=z(C);if(M.useCanvas&&V.has(qa))return g(C,qa,M,da);da=A(qa);M.isPoint&&(M={...M},null!=M.width&&M.width++,null!=M.height&&M.height++);C=yield da(C,M);if(!C)return C;"jpg"!==qa&&null!=M.noDataValue&&1===C.depthCount&&L.convertNoDataToMask(C,M.noDataValue,{customFloatTolerance:M.tolerance});M.isPoint&&y(C);return C});return D.apply(this,arguments)}var I=function(C){function M(ja){var P,O;this.data=ja;this.pos=8;this.palette=[];this.imgData=[];this.transparency=
{};this.animation=null;this.text={};for(O=null;;){var v=this.readUInt32();var K=ja=void 0;ja=[];for(K=0;4>K;++K)ja.push(String.fromCharCode(this.data[this.pos++]));ja=ja.join("");switch(ja){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),
numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(v);break;case "fcTL":O&&this.animation.frames.push(O);this.pos+=4;O={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};ja=this.readUInt16();v=this.readUInt16()||100;O.delay=1E3*ja/v;O.disposeOp=this.data[this.pos++];O.blendOp=this.data[this.pos++];O.data=[];break;case "IDAT":case "fdAT":"fdAT"===ja&&(this.pos+=4,v-=4);ja=(null!=O?O.data:void 0)||this.imgData;
for(K=0;0<=v?K<v:K>v;0<=v?++K:--K)ja.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(v);v=255-this.transparency.indexed.length;if(0<v)for(ja=0;0<=v?ja<v:ja>v;0<=v?++ja:--ja)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(v)[0];break;case 2:this.transparency.rgb=this.read(v)}break;case "tEXt":K=this.read(v);v=K.indexOf(0);ja=String.fromCharCode.apply(String,K.slice(0,v));this.text[ja]=
String.fromCharCode.apply(String,K.slice(v+1));break;case "IEND":O&&this.animation.frames.push(O);a:{switch(this.colorType){case 0:case 3:case 4:O=1;break a;case 2:case 6:O=3;break a}O=void 0}this.colors=O;this.hasAlphaChannel=4===(P=this.colorType)||6===P;P=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*P;a:{switch(this.colors){case 1:P="DeviceGray";break a;case 3:P="DeviceRGB";break a}P=void 0}this.colorSpace=P;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=
v}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var da;M.load=function(ja,P,O){"function"===typeof P&&(O=P);var v=new XMLHttpRequest;v.open("GET",ja,!0);v.responseType="arraybuffer";v.onload=function(){var K=new Uint8Array(v.response||v.mozResponseArrayBuffer);K=new M(K);"function"===typeof(null!=P?P.getContext:void 0)&&K.render(P);return"function"===typeof O?O(K):void 0};return v.send(null)};M.prototype.read=function(ja){var P;var O=[];for(P=0;0<=ja?P<ja:
P>ja;0<=ja?++P:--P)O.push(this.data[this.pos++]);return O};M.prototype.readUInt32=function(){var ja=this.data[this.pos++]<<24;var P=this.data[this.pos++]<<16;var O=this.data[this.pos++]<<8;var v=this.data[this.pos++];return ja|P|O|v};M.prototype.readUInt16=function(){var ja=this.data[this.pos++]<<8;var P=this.data[this.pos++];return ja|P};M.prototype.decodePixels=function(ja){var P,O,v,K,Y,S,T,W;null==ja&&(ja=this.imgData);if(0===ja.length)return new Uint8Array(0);ja=new F.Zlib(ja);ja=ja.getBytes();
var ea=this.pixelBitlength/8;var na=ea*this.width;var a=new Uint8Array(na*this.height);var m=ja.length;for(O=K=Y=0;K<m;){switch(ja[K++]){case 0:for(v=P=0;P<na;v=P+=1)a[O++]=ja[K++];break;case 1:for(v=S=0;S<na;v=S+=1){P=ja[K++];var H=v<ea?0:a[O-ea];a[O++]=(P+H)%256}break;case 2:for(v=H=0;H<na;v=H+=1){P=ja[K++];var R=(v-v%ea)/ea;S=Y&&a[(Y-1)*na+R*ea+v%ea];a[O++]=(S+P)%256}break;case 3:for(v=W=0;W<na;v=W+=1)P=ja[K++],R=(v-v%ea)/ea,H=v<ea?0:a[O-ea],S=Y&&a[(Y-1)*na+R*ea+v%ea],a[O++]=(P+Math.floor((H+S)/
2))%256;break;case 4:for(v=W=0;W<na;v=W+=1){P=ja[K++];R=(v-v%ea)/ea;H=v<ea?0:a[O-ea];0===Y?S=T=0:(S=a[(Y-1)*na+R*ea+v%ea],T=R&&a[(Y-1)*na+(R-1)*ea+v%ea]);var ha=H+S-T;v=Math.abs(ha-H);R=Math.abs(ha-S);ha=Math.abs(ha-T);H=v<=R&&v<=ha?H:R<=ha?S:T;a[O++]=(P+H)%256}break;default:throw Error("Invalid filter algorithm: "+ja[K-1]);}Y++}return a};M.prototype.decodePalette=function(){var ja,P,O,v;var K=this.palette;var Y=this.transparency.indexed||[];var S=new Uint8Array((Y.length||0)+K.length);var T=0;K.length;
var W=P=ja=0;for(O=K.length;P<O;W=P+=3)S[T++]=K[W],S[T++]=K[W+1],S[T++]=K[W+2],S[T++]=null!=(v=Y[ja++])?v:255;return S};M.prototype.copyToImageData=function(ja,P){var O,v;var K=this.colors;var Y=null;var S=this.hasAlphaChannel;this.palette.length&&(Y=null!=(O=this._decodedPalette)?O:this._decodedPalette=this.decodePalette(),K=4,S=!0);ja=ja.data||ja;var T=ja.length;var W=Y||P;O=v=0;if(1===K)for(;O<T;)K=Y?4*P[O/4]:v,v=W[K++],ja[O++]=v,ja[O++]=v,ja[O++]=v,ja[O++]=S?W[K++]:this.transparency.grayscale&&
this.transparency.grayscale===v?0:255,v=K;else for(;O<T;)K=Y?4*P[O/4]:v,ja[O++]=W[K++],ja[O++]=W[K++],ja[O++]=W[K++],ja[O++]=S?W[K++]:this.transparency.rgb&&this.transparency.rgb[1]===W[K-3]&&this.transparency.rgb[3]===W[K-2]&&this.transparency.rgb[5]===W[K-1]?0:255,v=K};M.prototype.decode=function(){var ja=new Uint8Array(this.width*this.height*4);this.copyToImageData(ja,this.decodePixels());return ja};var qa=(da=C.document&&C.document.createElement("canvas"))&&da.getContext("2d");var xa=function(ja){qa.width=
ja.width;qa.height=ja.height;qa.clearRect(0,0,ja.width,ja.height);qa.putImageData(ja,0,0);ja=new Image;ja.src=da.toDataURL();return ja};M.prototype.decodeFrames=function(ja){var P,O;if(this.animation){var v=this.animation.frames;var K=[];var Y=P=0;for(O=v.length;P<O;Y=++P){Y=v[Y];var S=ja.createImageData(Y.width,Y.height);var T=this.decodePixels(new Uint8Array(Y.data));this.copyToImageData(S,T);Y.imageData=S;K.push(Y.image=xa(S))}return K}};M.prototype.renderFrame=function(ja,P){var O=this.animation.frames;
var v=O[P];O=O[P-1];0===P&&ja.clearRect(0,0,this.width,this.height);1===(null!=O?O.disposeOp:void 0)?ja.clearRect(O.xOffset,O.yOffset,O.width,O.height):2===(null!=O?O.disposeOp:void 0)&&ja.putImageData(O.imageData,O.xOffset,O.yOffset);0===v.blendOp&&ja.clearRect(v.xOffset,v.yOffset,v.width,v.height);return ja.drawImage(v.image,v.xOffset,v.yOffset)};M.prototype.animate=function(ja){var P,O=this;var v=0;var K=this.animation;var Y=K.numFrames;var S=K.frames;var T=K.numPlays;return(P=function(){var W=
v++%Y;var ea=S[W];O.renderFrame(ja,W);if(1<Y&&v/Y<T)return O.animation._timeout=setTimeout(P,ea.delay)})()};M.prototype.stopAnimation=function(){var ja;return clearTimeout(null!=(ja=this.animation)?ja._timeout:void 0)};M.prototype.render=function(ja){ja._png&&ja._png.stopAnimation();ja._png=this;ja.width=this.width;ja.height=this.height;ja=ja.getContext("2d");if(this.animation)return this.decodeFrames(ja),this.animate(ja);var P=ja.createImageData(this.width,this.height);this.copyToImageData(P,this.decodePixels());
return ja.putImageData(P,0,0)};return M}(self);const V=new Set(["jpg","png","bmp","gif"]);Q.decode=function(C){return D.apply(this,arguments)};Q.getFormat=function(C){C=z(C);"lerc2"===C?C="lerc":"error"===C&&(C="");return C};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(Q,l,J){return function(){function E(p){this._ctx=this._canvas=
null;p&&(this._canvas=p.canvas,this._ctx=p.ctx||p.canvas&&p.canvas.getContext("2d"))}E.prototype.decode=function(p,G,ca){if(!p||10>p.byteLength)throw new Q("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:U=0,height:N=0,format:L}=G;const {applyJpegMask:F}=G;if(F&&(!U||!N))throw new Q("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((u,B)=>{let h=null;"jpg"===L&&F&&(h=E._getMask(p,{width:U,height:N}));
const e=new Blob([new Uint8Array(p)],{type:"jpg"==="image/"+L?"jpeg":L}),f=URL.createObjectURL(e),c=new Image;let n;c.src=f;c.onload=()=>{URL.revokeObjectURL(f);if(l.isAborted(ca))B(l.createAbortError());else{U=c.width;N=c.height;if(this._canvas&&this._ctx){if(this._canvas.width!==U||this._canvas.height!==N)this._canvas.width=U,this._canvas.height=N;this._ctx.clearRect(0,0,U,N)}else this._canvas=document.createElement("canvas"),this._canvas.width=U,this._canvas.height=N,this._ctx=this._canvas.getContext("2d");
this._ctx.drawImage(c,0,0);var w=this._ctx.getImageData(0,0,U,N);n=w.data;var x;if(G.renderOnCanvas){if(h)for(x=0;x<h.length;x++)n[4*x+3]=h[x]?255:0;this._ctx.putImageData(w,0,0);u(null)}else{w=U*N;var b=new Uint8Array(w),d=new Uint8Array(w),r=new Uint8Array(w);if(h)for(x=0;x<w;x++)b[x]=n[4*x],d[x]=n[4*x+1],r[x]=n[4*x+2];else for(h=new Uint8Array(w),x=0;x<w;x++)b[x]=n[4*x],d[x]=n[4*x+1],r[x]=n[4*x+2],h[x]=n[4*x+3];u({width:U,height:N,pixels:[b,d,r],mask:h,pixelType:"u8"})}}};c.onerror=()=>{URL.revokeObjectURL(f);
B("cannot load image")}})};E._getMask=function(p,G){let ca=null;try{var U=new Uint8Array(p);p=0;var N=U.length-2;for(p=Math.ceil(U.length/2);p<N&&(255!==U[p]||217!==U[p+1]);p++);p+=2;if(p<U.length-1){const L=(new J.Zlib(U.subarray(p))).getBytes();ca=new Uint8Array(G.width*G.height);G=0;for(U=0;U<L.length;U++)for(N=7;0<=N;N--)ca[G++]=L[U]>>N&1}}catch(L){}return ca};return E}()})},"esri/chunks/Zlib":function(){define(["exports"],function(Q){var l={};(function(J){(function(E){E=E();void 0!==E&&(J.exports=
E)})(function(){var E=function(){function p(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}p.prototype={ensureBuffer:function(G){var ca=this.buffer,U=ca?ca.byteLength:0;if(G<U)return ca;for(var N=512;N<G;)N<<=1;G=new Uint8Array(N);for(N=0;N<U;++N)G[N]=ca[N];return this.buffer=G},getByte:function(){for(var G=this.pos;this.bufferLength<=G;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(G){var ca=this.pos;if(G){this.ensureBuffer(ca+G);for(G=ca+
G;!this.eof&&this.bufferLength<G;)this.readBlock();var U=this.bufferLength;G>U&&(G=U)}else{for(;!this.eof;)this.readBlock();G=this.bufferLength}this.pos=G;return this.buffer.subarray(ca,G)},lookChar:function(){for(var G=this.pos;this.bufferLength<=G;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var G=this.pos;this.bufferLength<=G;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(G,
ca,U){for(var N=G+ca;this.bufferLength<=N&&!this.eof;)this.readBlock();return new Stream(this.buffer,G,ca,U)},skip:function(G){G||(G=1);this.pos+=G},reset:function(){this.pos=0}};return p}();return function(){function p(u){throw Error(u);}function G(u){var B=0,h=u[B++],e=u[B++];-1!=h&&-1!=e||p("Invalid header in flate stream");8!=(h&15)&&p("Unknown compression method in flate stream");0!=((h<<8)+e)%31&&p("Bad FCHECK in flate stream");e&32&&p("FDICT bit set in flate stream");this.bytes=u;this.bytesPos=
B;this.codeBuf=this.codeSize=0;E.call(this)}if(!self||!self.Uint32Array)return null;var ca=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),N=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,
658433,724993,727041,794625,798721,868353,876545]),L=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,
524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,
524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,
524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,
524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,
524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,
524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,
524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],F=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];G.prototype=Object.create(E.prototype);G.prototype.getBits=function(u){for(var B=this.codeSize,h=this.codeBuf,e=this.bytes,f=this.bytesPos,
c;B<u;)"undefined"==typeof(c=e[f++])&&p("Bad encoding in flate stream"),h|=c<<B,B+=8;this.codeBuf=h>>u;this.codeSize=B-=u;this.bytesPos=f;return h&(1<<u)-1};G.prototype.getCode=function(u){var B=u[0],h=u[1];u=this.codeSize;for(var e=this.codeBuf,f=this.bytes,c=this.bytesPos;u<h;){var n;"undefined"==typeof(n=f[c++])&&p("Bad encoding in flate stream");e|=n<<u;u+=8}h=B[e&(1<<h)-1];B=h>>16;h&=65535;(0==u||u<B||0==B)&&p("Bad encoding in flate stream");this.codeBuf=e>>B;this.codeSize=u-B;this.bytesPos=
c;return h};G.prototype.generateHuffmanTable=function(u){for(var B=u.length,h=0,e=0;e<B;++e)u[e]>h&&(h=u[e]);for(var f=1<<h,c=new Uint32Array(f),n=1,w=0,x=2;n<=h;++n,w<<=1,x<<=1)for(var b=0;b<B;++b)if(u[b]==n){var d=0,r=w;for(e=0;e<n;++e)d=d<<1|r&1,r>>=1;for(e=d;e<f;e+=x)c[e]=n<<16|b;++w}return[c,h]};G.prototype.readBlock=function(){function u(d,r,q,k,g){for(d=d.getBits(q)+k;0<d--;)r[w++]=g}var B=this.getBits(3);B&1&&(this.eof=!0);B>>=1;if(0==B){var h=this.bytes,e=this.bytesPos,f;"undefined"==typeof(f=
h[e++])&&p("Bad block header in flate stream");var c=f;"undefined"==typeof(f=h[e++])&&p("Bad block header in flate stream");c|=f<<8;"undefined"==typeof(f=h[e++])&&p("Bad block header in flate stream");B=f;"undefined"==typeof(f=h[e++])&&p("Bad block header in flate stream");(B|f<<8)!=(~c&65535)&&p("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;f=this.bufferLength;B=this.ensureBuffer(f+c);this.bufferLength=c=f+c;for(var n=f;n<c;++n){if("undefined"==typeof(f=h[e++])){this.eof=
!0;break}B[n]=f}this.bytesPos=e}else{if(1==B)e=L,f=F;else if(2==B){B=this.getBits(5)+257;f=this.getBits(5)+1;h=this.getBits(4)+4;e=Array(ca.length);for(var w=0;w<h;)e[ca[w++]]=this.getBits(3);e=this.generateHuffmanTable(e);w=h=0;f=B+f;for(c=Array(f);w<f;)n=this.getCode(e),16==n?u(this,c,2,3,h):17==n?u(this,c,3,3,h=0):18==n?u(this,c,7,11,h=0):c[w++]=h=n;e=this.generateHuffmanTable(c.slice(0,B));f=this.generateHuffmanTable(c.slice(B,f))}else p("Unknown block type in flate stream");c=(B=this.buffer)?
B.length:0;for(n=this.bufferLength;;){var x=this.getCode(e);if(256>x)n+1>=c&&(B=this.ensureBuffer(n+1),c=B.length),B[n++]=x;else{if(256==x){this.bufferLength=n;break}x-=257;x=U[x];var b=x>>16;0<b&&(b=this.getBits(b));h=(x&65535)+b;x=this.getCode(f);x=N[x];b=x>>16;0<b&&(b=this.getBits(b));x=(x&65535)+b;n+h>=c&&(B=this.ensureBuffer(n+h),c=B.length);for(b=0;b<h;++b,++n)B[n]=B[n-x]}}}};return G}()})})({get exports(){return l},set exports(J){l=J}});Q.Zlib=l})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(Q,l){return function(){function J(){}J.decode=function(E,p=!1){const G=new Uint8Array(E);E=new Q.JpegImage;E.parse(G);const {width:ca,height:U,numComponents:N,eof:L}=E,F=E.getData(ca,U,!0),u=ca*U;E=null;let B=0,h=0,e=0;if(!p&&L<G.length-1)try{var f=(new l.Zlib(G.subarray(L))).getBytes();E=new Uint8Array(u);for(B=p=0;B<f.length;B++)for(e=7;0<=e;e--)E[p++]=f[B]>>e&1}catch{}if(1===N&&F.length===ca*U)f=new Uint8Array(F.buffer),f=[f,f,f];else{f=[];for(B=0;3>B;B++)f.push(new Uint8Array(u));
for(h=e=0;h<u;h++)for(B=0;3>B;B++)f[B][h]=F[e++]}return{width:ca,height:U,pixels:f,mask:E}};return J}()})},"esri/chunks/Jpg":function(){define(["exports"],function(Q){var l={};(function(J){(function(E){E=E();void 0!==E&&(J.exports=E)})(function(){var E=function(){function p(G){this.message="JPEG error: "+G}p.prototype=Error();p.prototype.name="JpegError";return p.constructor=p}();return function(){function p(){this.decodeTransform=null;this.colorTransform=-1}function G(F,u){for(var B=0,h=[],e,f,c=
16;0<c&&!F[c-1];)c--;h.push({children:[],index:0});var n=h[0],w;for(e=0;e<c;e++){for(f=0;f<F[e];f++){n=h.pop();for(n.children[n.index]=u[B];0<n.index;)n=h.pop();n.index++;for(h.push(n);h.length<=e;)h.push(w={children:[],index:0}),n.children[n.index]=w.children,n=w;B++}e+1<c&&(h.push(w={children:[],index:0}),n.children[n.index]=w.children,n=w)}return h[0].children}function ca(F,u,B,h,e,f,c,n,w){function x(){if(0<I)return I--,D>>I&1;D=F[u++];if(255===D){var T=F[u++];if(T)throw new E("unexpected marker "+
(D<<8|T).toString(16));}I=7;return D>>>7}function b(T){for(;;){T=T[x()];if("number"===typeof T)return T;if("object"!==typeof T)throw new E("invalid huffman sequence");}}function d(T){for(var W=0;0<T;)W=W<<1|x(),T--;return W}function r(T){if(1===T)return 1===x()?1:-1;var W=d(T);return W>=1<<T-1?W:W+(-1<<T)+1}function q(T,W){var ea=b(T.huffmanTableDC);ea=0===ea?0:r(ea);T.blockData[W]=T.pred+=ea;for(ea=1;64>ea;){var na=b(T.huffmanTableAC),a=na&15;na>>=4;if(0===a){if(15>na)break;ea+=16}else ea+=na,T.blockData[W+
L[ea]]=r(a),ea++}}function k(T,W){var ea=b(T.huffmanTableDC);ea=0===ea?0:r(ea)<<w;T.blockData[W]=T.pred+=ea}function g(T,W){T.blockData[W]|=x()<<w}function t(T,W){if(0<V)V--;else for(var ea=f;ea<=c;){var na=b(T.huffmanTableAC),a=na&15;na>>=4;if(0===a){if(15>na){V=d(na)+(1<<na)-1;break}ea+=16}else ea+=na,T.blockData[W+L[ea]]=r(a)*(1<<w),ea++}}function z(T,W){for(var ea=f,na=0,a;ea<=c;){a=L[ea];switch(C){case 0:na=b(T.huffmanTableAC);a=na&15;na>>=4;if(0===a)15>na?(V=d(na)+(1<<na),C=4):(na=16,C=1);else{if(1!==
a)throw new E("invalid ACn encoding");M=r(a);C=na?2:3}continue;case 1:case 2:T.blockData[W+a]?T.blockData[W+a]+=x()<<w:(na--,0===na&&(C=2===C?3:0));break;case 3:T.blockData[W+a]?T.blockData[W+a]+=x()<<w:(T.blockData[W+a]=M<<w,C=0);break;case 4:T.blockData[W+a]&&(T.blockData[W+a]+=x()<<w)}ea++}4===C&&(V--,0===V&&(C=0))}var A=B.mcusPerLine,y=u,D=0,I=0,V=0,C=0,M,da=h.length,qa,xa,ja,P;n=B.progressive?0===f?0===n?k:g:0===n?t:z:q;var O=0;B=1===da?h[0].blocksPerLine*h[0].blocksPerColumn:A*B.mcusPerColumn;
for(var v,K;O<B;){var Y=e?Math.min(B-O,e):B;for(qa=0;qa<da;qa++)h[qa].pred=0;V=0;if(1===da){var S=h[0];for(P=0;P<Y;P++)n(S,64*((S.blocksPerLine+1)*(O/S.blocksPerLine|0)+O%S.blocksPerLine)),O++}else for(P=0;P<Y;P++){for(qa=0;qa<da;qa++)for(S=h[qa],v=S.h,K=S.v,xa=0;xa<K;xa++)for(ja=0;ja<v;ja++)n(S,64*((S.blocksPerLine+1)*((O/A|0)*S.v+xa)+(O%A*S.h+ja)));O++}I=0;(S=N(F,u))&&S.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+S.invalid),u=S.offset);S=S&&S.marker;if(!S||65280>=
S)throw new E("marker was not found");if(65488<=S&&65495>=S)u+=2;else break}(S=N(F,u))&&S.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+S.invalid),u=S.offset);return u-y}function U(F,u){F=u.blocksPerLine;for(var B=u.blocksPerColumn,h=new Int16Array(64),e=0;e<B;e++)for(var f=0;f<F;f++){var c=void 0,n=void 0,w=void 0,x=void 0,b=void 0,d=void 0,r=void 0,q=void 0,k=b=d=x=n=c=void 0,g=void 0,t=void 0,z=void 0,A=64*((u.blocksPerLine+1)*e+f),y=h,D=u.quantizationTable,I=u.blockData;
if(!D)throw new E("missing required Quantization Table.");for(var V=0;64>V;V+=8)c=I[A+V],q=I[A+V+1],r=I[A+V+2],d=I[A+V+3],b=I[A+V+4],x=I[A+V+5],w=I[A+V+6],n=I[A+V+7],c*=D[V],0===(q|r|d|b|x|w|n)?(c=5793*c+512>>10,y[V]=c,y[V+1]=c,y[V+2]=c,y[V+3]=c,y[V+4]=c,y[V+5]=c,y[V+6]=c,y[V+7]=c):(q*=D[V+1],r*=D[V+2],d*=D[V+3],b*=D[V+4],x*=D[V+5],w*=D[V+6],n*=D[V+7],z=5793*c+128>>8,t=5793*b+128>>8,g=r,k=w,b=2896*(q-n)+128>>8,n=2896*(q+n)+128>>8,d<<=4,x<<=4,z=z+t+1>>1,t=z-t,c=3784*g+1567*k+128>>8,g=1567*g-3784*k+
128>>8,k=c,b=b+x+1>>1,x=b-x,n=n+d+1>>1,d=n-d,z=z+k+1>>1,k=z-k,t=t+g+1>>1,g=t-g,c=2276*b+3406*n+2048>>12,b=3406*b-2276*n+2048>>12,n=c,c=799*d+4017*x+2048>>12,d=4017*d-799*x+2048>>12,x=c,y[V]=z+n,y[V+7]=z-n,y[V+1]=t+x,y[V+6]=t-x,y[V+2]=g+d,y[V+5]=g-d,y[V+3]=k+b,y[V+4]=k-b);for(D=0;8>D;++D)c=y[D],q=y[D+8],r=y[D+16],d=y[D+24],b=y[D+32],x=y[D+40],w=y[D+48],n=y[D+56],0===(q|r|d|b|x|w|n)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,I[A+D]=c,I[A+D+8]=c,I[A+D+16]=c,I[A+D+24]=c,I[A+D+32]=c,I[A+D+40]=
c,I[A+D+48]=c,I[A+D+56]=c):(z=5793*c+2048>>12,t=5793*b+2048>>12,g=r,k=w,b=2896*(q-n)+2048>>12,n=2896*(q+n)+2048>>12,z=(z+t+1>>1)+4112,t=z-t,c=3784*g+1567*k+2048>>12,g=1567*g-3784*k+2048>>12,k=c,b=b+x+1>>1,x=b-x,n=n+d+1>>1,d=n-d,z=z+k+1>>1,k=z-k,t=t+g+1>>1,g=t-g,c=2276*b+3406*n+2048>>12,b=3406*b-2276*n+2048>>12,n=c,c=799*d+4017*x+2048>>12,d=4017*d-799*x+2048>>12,x=c,c=z+n,n=z-n,q=t+x,w=t-x,r=g+d,x=g-d,d=k+b,b=k-b,c=16>c?0:4080<=c?255:c>>4,q=16>q?0:4080<=q?255:q>>4,r=16>r?0:4080<=r?255:r>>4,d=16>d?
0:4080<=d?255:d>>4,b=16>b?0:4080<=b?255:b>>4,x=16>x?0:4080<=x?255:x>>4,w=16>w?0:4080<=w?255:w>>4,n=16>n?0:4080<=n?255:n>>4,I[A+D]=c,I[A+D+8]=q,I[A+D+16]=r,I[A+D+24]=d,I[A+D+32]=b,I[A+D+40]=x,I[A+D+48]=w,I[A+D+56]=n)}return u.blockData}function N(F,u,B){var h=F.length-1;B=B<u?B:u;if(u>=h)return null;var e=F[u]<<8|F[u+1];if(65472<=e&&65534>=e)return{invalid:null,marker:e,offset:u};for(u=F[B]<<8|F[B+1];!(65472<=u&&65534>=u);){if(++B>=h)return null;u=F[B]<<8|F[B+1]}return{invalid:e.toString(16),marker:u,
offset:B}}if(!self||!self.Uint8ClampedArray)return null;var L=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);p.prototype={parse:function(F){function u(){var D=F[e]<<8|F[e+1];e+=2;return D}function B(){var D=u();D=e+D-2;var I=N(F,D,e);I&&I.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+I.invalid),D=I.offset);D=F.subarray(e,
D);e+=D.length;return D}function h(D){for(var I=Math.ceil(D.samplesPerLine/8/D.maxH),V=Math.ceil(D.scanLines/8/D.maxV),C=0;C<D.components.length;C++){y=D.components[C];var M=Math.ceil(Math.ceil(D.samplesPerLine/8)*y.h/D.maxH),da=Math.ceil(Math.ceil(D.scanLines/8)*y.v/D.maxV);y.blockData=new Int16Array(64*V*y.v*(I*y.h+1));y.blocksPerLine=M;y.blocksPerColumn=da}D.mcusPerLine=I;D.mcusPerColumn=V}var e=0,f=null,c=null,n=[],w=[],x=[],b=u();if(65496!==b)throw new E("SOI not found");for(b=u();65497!==b;){switch(b){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var d=
B();65504===b&&74===d[0]&&70===d[1]&&73===d[2]&&70===d[3]&&0===d[4]&&(f={version:{major:d[5],minor:d[6]},densityUnits:d[7],xDensity:d[8]<<8|d[9],yDensity:d[10]<<8|d[11],thumbWidth:d[12],thumbHeight:d[13],thumbData:d.subarray(14,14+3*d[12]*d[13])});65518===b&&65===d[0]&&100===d[1]&&111===d[2]&&98===d[3]&&101===d[4]&&(c={version:d[5]<<8|d[6],flags0:d[7]<<8|d[8],flags1:d[9]<<8|d[10],transformCode:d[11]});break;case 65499:b=u()+e-2;for(var r;e<b;){var q=F[e++],k=new Uint16Array(64);if(0===q>>4)for(d=
0;64>d;d++)r=L[d],k[r]=F[e++];else if(1===q>>4)for(d=0;64>d;d++)r=L[d],k[r]=u();else throw new E("DQT - invalid table spec");n[q&15]=k}break;case 65472:case 65473:case 65474:if(g)throw new E("Only single frame JPEGs supported");u();var g={};g.extended=65473===b;g.progressive=65474===b;g.precision=F[e++];g.scanLines=u();g.samplesPerLine=u();g.components=[];g.componentIds={};d=F[e++];for(b=k=q=0;b<d;b++){r=F[e];var t=F[e+1]>>4;var z=F[e+1]&15;q<t&&(q=t);k<z&&(k=z);t=g.components.push({h:t,v:z,quantizationId:F[e+
2],quantizationTable:null});g.componentIds[r]=t-1;e+=3}g.maxH=q;g.maxV=k;h(g);break;case 65476:r=u();for(b=2;b<r;){q=F[e++];k=new Uint8Array(16);for(d=t=0;16>d;d++,e++)t+=k[d]=F[e];z=new Uint8Array(t);for(d=0;d<t;d++,e++)z[d]=F[e];b+=17+t;(0===q>>4?x:w)[q&15]=G(k,z)}break;case 65501:u();var A=u();break;case 65498:u();r=F[e++];d=[];for(b=0;b<r;b++){q=g.componentIds[F[e++]];var y=g.components[q];q=F[e++];y.huffmanTableDC=x[q>>4];y.huffmanTableAC=w[q&15];d.push(y)}b=F[e++];r=F[e++];q=F[e++];b=ca(F,e,
g,d,A,b,r,q>>4,q&15);e+=b;break;case 65535:255!==F[e]&&e--;break;default:if(255===F[e-3]&&192<=F[e-2]&&254>=F[e-2])e-=3;else throw new E("unknown marker "+b.toString(16));}b=u()}this.width=g.samplesPerLine;this.height=g.scanLines;this.jfif=f;this.eof=e;this.adobe=c;this.components=[];for(b=0;b<g.components.length;b++){y=g.components[b];if(f=n[y.quantizationId])y.quantizationTable=f;this.components.push({output:U(g,y),scaleX:y.h/g.maxH,scaleY:y.v/g.maxV,blocksPerLine:y.blocksPerLine,blocksPerColumn:y.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(F,u){var B=this.width/F,h=this.height/u,e,f,c=0,n=this.components.length,w=F*u*n,x=new Uint8ClampedArray(w),b=new Uint32Array(F);for(f=0;f<n;f++){var d=this.components[f];var r=d.scaleX*B;var q=d.scaleY*h;c=f;var k=d.output;var g=d.blocksPerLine+1<<3;for(e=0;e<F;e++)d=0|e*r,b[e]=(d&4294967288)<<3|d&7;for(r=0;r<u;r++)for(d=0|r*q,d=g*(d&4294967288)|(d&7)<<3,e=0;e<F;e++)x[c]=k[d+b[e]],c+=n}if(u=this.decodeTransform)for(f=0;f<w;)for(F=d=0;d<n;d++,
f++,F+=2)x[f]=(x[f]*u[F]>>8)+u[F+1];return x},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(F){for(var u,B,h,e=0,f=F.length;e<f;e+=3)u=F[e],B=F[e+1],h=F[e+2],F[e]=u-179.456+1.402*h,F[e+1]=u+135.459-.344*B-.714*h,F[e+2]=u-226.816+1.772*B;return F},_convertYcckToRgb:function(F){for(var u,B,h,e,f=0,c=0,n=F.length;c<n;c+=4)u=F[c],B=F[c+1],h=F[c+2],e=F[c+3],F[f++]=
-122.67195406894+B*(-6.60635669420364E-5*B+4.37130475926232E-4*h-5.4080610064599E-5*u+4.8449797120281E-4*e-.154362151871126)+h*(-9.57964378445773E-4*h+8.17076911346625E-4*u-.00477271405408747*e+1.53380253221734)+u*(9.61250184130688E-4*u-.00266257332283933*e+.48357088451265)+e*(-3.36197177618394E-4*e+.484791561490776),F[f++]=107.268039397724+B*(2.19927104525741E-5*B-6.40992018297945E-4*h+6.59397001245577E-4*u+4.26105652938837E-4*e-.176491792462875)+h*(-7.78269941513683E-4*h+.00130872261408275*u+7.70482631801132E-4*
e-.151051492775562)+u*(.00126935368114843*u-.00265090189010898*e+.25802910206845)+e*(-3.18913117588328E-4*e-.213742400323665),F[f++]=-20.810012546947+B*(-5.70115196973677E-4*B-2.63409051004589E-5*h+.0020741088115012*u-.00288260236853442*e+.814272968359295)+h*(-1.53496057440975E-5*h-1.32689043961446E-4*u+5.60833691242812E-4*e-.195152027534049)+u*(.00174418132927582*u-.00255243321439347*e+.116935020465145)+e*(-3.43531996510555E-4*e+.24165260232407);return F},_convertYcckToCmyk:function(F){for(var u,
B,h,e=0,f=F.length;e<f;e+=4)u=F[e],B=F[e+1],h=F[e+2],F[e]=434.456-u-1.402*h,F[e+1]=119.541-u+.344*B+.714*h,F[e+2]=481.816-u-1.772*B;return F},_convertCmykToRgb:function(F){for(var u,B,h,e,f=0,c=1/255,n=0,w=F.length;n<w;n+=4)u=F[n]*c,B=F[n+1]*c,h=F[n+2]*c,e=F[n+3]*c,F[f++]=255+u*(-4.387332384609988*u+54.48615194189176*B+18.82290502165302*h+212.25662451639585*e-285.2331026137004)+B*(1.7149763477362134*B-5.6096736904047315*h-17.873870861415444*e-5.497006427196366)+h*(-2.5217340131683033*h-21.248923337353073*
e+17.5119270841813)-e*(21.86122147463605*e+189.48180835922747),F[f++]=255+u*(8.841041422036149*u+60.118027045597366*B+6.871425592049007*h+31.159100130055922*e-79.2970844816548)+B*(-15.310361306967817*B+17.575251261109482*h+131.35250912493976*e-190.9453302588951)+h*(4.444339102852739*h+9.8632861493405*e-24.86741582555878)-e*(20.737325471181034*e+187.80453709719578),F[f++]=255+u*(.8842522430003296*u+8.078677503112928*B+30.89978309703729*h-.23883238689178934*e-14.183576799673286)+B*(10.49593273432072*
B+63.02378494754052*h+50.606957656360734*e-112.23884253719248)+h*(.03296041114873217*h+115.60384449646641*e-193.58209356861505)-e*(22.33816807309886*e+180.12613974708367);return F},getData:function(F,u,B){if(4<this.numComponents)throw new E("Unsupported color mode");F=this._getLinearizedBlockData(F,u);if(1===this.numComponents&&B){B=F.length;u=new Uint8ClampedArray(3*B);for(var h=0,e=0;e<B;e++){var f=F[e];u[h++]=f;u[h++]=f;u[h++]=f}return u}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(F);
if(4===this.numComponents){if(this._isColorConversionNeeded())return B?this._convertYcckToRgb(F):this._convertYcckToCmyk(F);if(B)return this._convertCmykToRgb(F)}return F}};return p}()})})({get exports(){return l},set exports(J){l=J}});Q.JpegImage=l})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(Q,l,J){function E(L,F,u){u.set(L.slice(F,F+u.length))}function p(L){const {_malloc:F,_free:u,_lerc_getBlobInfo:B,_lerc_getDataRanges:h,_lerc_decode_4D:e,
asm:f}=L;let c;const n=Object.values(f).find(x=>x&&"buffer"in x&&x.buffer===L.HEAPU8.buffer),w=x=>{x=x.map(r=>(r>>3<<3)+16);var b=x.reduce((r,q)=>r+q),d=F(b);c=new Uint8Array(n.buffer);b=x[0];x[0]=d;for(d=1;d<x.length;d++){const r=x[d];x[d]=x[d-1]+b;b=r}return x};N.getBlobInfo=x=>{var b=new Uint8Array(48),d=new Uint8Array(24);const [r,q,k]=w([x.length,b.length,d.length]);c.set(x,r);c.set(b,q);c.set(d,k);var g=B(r,x.length,q,k,12,3);if(g)throw u(r),Error(`lerc-getBlobInfo: error code is ${g}`);c=new Uint8Array(n.buffer);
E(c,q,b);E(c,k,d);b=new Uint32Array(b.buffer);var t=new Float64Array(d.buffer);const [z,A,,y,D,I,V,C,M,da,qa]=b;d={version:z,depthCount:da,width:y,height:D,validPixelCount:V,bandCount:I,blobSize:C,maskCount:M,dataType:A,minValue:t[0],maxValue:t[1],maxZerror:t[2],statistics:[],bandCountWithNoData:qa};if(qa)return d;if(1===da&&1===I)return u(r),d.statistics.push({minValue:t[0],maxValue:t[1]}),d;g=da*I*8;var xa=new Uint8Array(g),ja=new Uint8Array(g);b=r;var P=t=0;let O=!1;c.byteLength<r+2*g?(u(r),O=
!0,[b,t,P]=w([x.length,g,g]),c.set(x,b)):[t,P]=w([g,g]);c.set(xa,t);c.set(ja,P);if(g=h(b,x.length,da,I,t,P))throw u(b),O||u(t),Error(`lerc-getDataRanges: error code is ${g}`);c=new Uint8Array(n.buffer);E(c,t,xa);E(c,P,ja);x=new Float64Array(xa.buffer);g=new Float64Array(ja.buffer);ja=d.statistics;for(xa=0;xa<I;xa++)if(1<da){P=x.slice(xa*da,(xa+1)*da);const v=g.slice(xa*da,(xa+1)*da),K=Math.min.apply(null,P),Y=Math.max.apply(null,v);ja.push({minValue:K,maxValue:Y,depthStats:{minValues:P,maxValues:v}})}else ja.push({minValue:x[xa],
maxValue:g[xa]});u(b);O||u(t);return d};N.decode=(x,b)=>{const {maskCount:d,depthCount:r,bandCount:q,width:k,height:g,dataType:t,bandCountWithNoData:z}=b;var A=G[t],y=k*g;b=new Uint8Array(y*q);A=new Uint8Array(y*r*q*A.size);y=new Uint8Array(q);var D=new Uint8Array(8*q);const [I,V,C,M,da]=w([x.length,b.length,A.length,y.length,D.length]);c.set(x,I);c.set(b,V);c.set(A,C);c.set(y,M);c.set(D,da);if(x=e(I,x.length,d,V,r,k,g,q,t,C,M,da))throw u(I),Error(`lerc-decode: error code is ${x}`);c=new Uint8Array(n.buffer);
E(c,C,A);E(c,V,b);x=null;if(z){E(c,M,y);E(c,da,D);x=[];D=new Float64Array(D.buffer);for(let qa=0;qa<y.length;qa++)x.push(y[qa]?D[qa]:null)}u(I);return{data:A,maskData:b,noDataValues:x}}}const G=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let ca=null,U=!1;const N={getBlobInfo:null,decode:null};l.decode=function(L,F={}){var u=F.inputOffset??0;L=L instanceof Uint8Array?L.subarray(u):new Uint8Array(L,u);u=N.getBlobInfo(L);const {data:B,maskData:h,noDataValues:e}=N.decode(L,u),{width:f,height:c,bandCount:n,
depthCount:w,dataType:x,maskCount:b,statistics:d}=u;var r=G[x],q=new r.ctor(B.buffer);L=[];u=[];const k=f*c;var g=k*w;for(var t=0;t<n;t++){var z=q.subarray(t*g,(t+1)*g);if(F.returnInterleaved)L.push(z);else{a:{var A=k,y=w;if(2>y)break a;const D=new r.ctor(A*y);for(let I=0,V=0;I<A;I++)for(let C=0,M=I;C<y;C++,M+=A)D[M]=z[V++];z=D}L.push(z)}u.push(h.subarray(t*g,(t+1)*g))}q=0===b?null:1===b?u[0]:new Uint8Array(k);if(1<b)for(q.set(u[0]),g=1;g<u.length;g++)for(t=u[g],z=0;z<k;z++)q[z]&=t[z];({noDataValue:F}=
F);g=null!=F&&r.range[0]<=F&&r.range[1]>=F;if(0<b&&g)for(g=0;g<n;g++)for(t=L[g],z=u[g]||q,A=0;A<k;A++)0===z[A]&&(t[A]=F);({pixelType:r}=r);return{width:f,height:c,bandCount:n,pixelType:r,depthCount:w,statistics:d,pixels:L,mask:q,bandMasks:b===n&&1<n?u:null,noDataValues:e}};l.getBlobInfo=function(L,F={}){L=L instanceof Uint8Array?L.subarray(F.inputOffset??0):new Uint8Array(L,F.inputOffset??0);return N.getBlobInfo(L)};l.isLoaded=function(){return U};l.load=function(){return ca?ca:ca=(new Promise((L,
F)=>Q(["../../../chunks/lerc-wasm"],L,F))).then(L=>L.lercWasm).then(({default:L})=>L({locateFile:F=>J.getAssetUrl(`esri/layers/support/rasterFormats/${F}`)})).then(L=>{p(L);U=!0})};l.pixelTypeInfoMap=G;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(Q){function l(G,ca,U,N=!0){if(0!==ca%4||0!==U%4){var L=new ArrayBuffer(4*Math.ceil(U/4));L=new Uint8Array(L);G=new Uint8Array(G,ca,U);if(N)for(N=0;N<L.length;N+=
4)L[N]=G[N+3],L[N+1]=G[N+2],L[N+2]=G[N+1],L[N+3]=G[N];else L.set(G);return new Uint32Array(L.buffer)}if(N){N=new Uint8Array(G,ca,U);L=new Uint8Array(N.length);for(G=0;G<L.length;G+=4)L[G]=N[G+3],L[G+1]=N[G+2],L[G+2]=N[G+1],L[G+3]=N[G];return new Uint32Array(L.buffer)}return new Uint32Array(G,ca,U/4)}function J(){const G=[];for(let ca=0;257>=ca;ca++)G[ca]=[ca];return G}function E(G,ca){for(let U=0;U<ca.length;U++)G.push(ca[U])}const p=new Set;p.add(511);p.add(1023);p.add(2047);p.add(4095);p.add(8191);
Q.decode=function(G,ca,U,N=!0){G=l(G,ca,U,N);ca=9;N=J();let L=32,F=N.length,u=[],B=1,h=G[0],e=0;const f=G.length;U=8*(4*f-U);const c=[];for(;null!=h;){if(L>=ca)L-=ca,e=h>>>32-ca,h<<=ca;else{e=h>>>32-L;h=G[B++];var n=ca-L;L=32-n;e=(e<<n)+(h>>>L);h<<=n}if(257===e)break;if(256===e)ca=9,N=J(),F=N.length,u=[];else{n=N[e];if(null==n){if(e>N.length)throw Error("data integrity issue: code does not exist on code page");u.push(u[0]);N[F++]=u.slice();E(c,u)}else E(c,n),u.push(n[0]),1<u.length&&(N[F++]=u.slice()),
u=n.slice();p.has(F)&&ca++;0===L&&(h=G[B++],L=32);if(B>f||B===f&&L<=U)break}}return new Uint8Array(c)};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const Q=l=>{let J=1;switch(l){case Uint8Array:case Int8Array:J=1;break;case Uint16Array:case Int16Array:J=2;break;case Uint32Array:case Int32Array:case Float32Array:J=4;break;case Float64Array:J=8}return J};return function(){function l(){}l.decode=function(J,E){var p=
E.pixelType;const G=[],ca=E.width*E.height;var U=Math.floor(J.byteLength/(E.width*E.height*Q(E.pixelType)));const {bandIds:N,format:L}=E;E=N&&N.length||Math.floor(J.byteLength/(E.width*E.height*Q(E.pixelType)));var F=J.byteLength-J.byteLength%(ca*Q(p)),u=new p(J,0,ca*U);let B,h,e,f,c=null;if("bip"===L)for(B=0;B<E;B++){e=new p(ca);f=N?N[B]:B;for(h=0;h<ca;h++)e[h]=u[h*U+f];G.push(e)}else if("bsq"===L)for(B=0;B<E;B++)f=N?N[B]:B,G.push(u.subarray(f*ca,(f+1)*ca));if(F<J.byteLength-1)if(J=J.slice(F),8*
J.byteLength<ca)c=null;else{J=new Uint8Array(J,0,Math.ceil(ca/8));p=new Uint8Array(ca);for(F=u=F=E=U=0;F<J.length-1;F++)for(E=J[F],u=7;0<=u;u--)p[U++]=E>>u&1;for(u=7;U<ca-1;)E=J[J.length-1],p[U++]=E>>u&1,u--;c=p}return{pixels:G,mask:c}};return l}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){function F(P,O){let v="unknown";3===P?v=64===O?"f64":"f32":1===P?1===O?v="u1":2===O?v="u2":4===O?v="u4":8>=O?v="u8":16>=O?v="u16":32>=O&&(v="u32"):2===P&&(8>=O?v="s8":16>=O?v="s16":32>=O&&(v="s32"));return v}function u(P){let O=null;switch(P?P.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":O=Uint8Array;break;case "u16":O=Uint16Array;break;case "u32":O=Uint32Array;break;case "s8":O=Int8Array;break;case "s16":O=Int16Array;break;case "s32":O=Int32Array;break;
case "f64":O=Float64Array;break;default:O=Float32Array}return O}function B(P,O){return{x:O[0]*P.x+O[1]*P.y+O[2],y:O[3]*P.x+O[4]*P.y+O[5]}}function h(P,O){return P.get(O)?.values?.[0]}function e(P,O,v,K=0,Y=U.TIFF_TAGS,S=4){var T=8===S;const W=T?A(new DataView(P,v,8),0,O):(new DataView(P,v,2)).getUint16(0,O),ea=4+2*S;var na=T?8:2;T=na+W*ea;if(v+T>P.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:T};const a=v+T+4<=P.byteLength?y(new DataView(P,v+T,8===S?8:4),0,O,8===S):null;v+=
na;na=new Map;let m,H,R,ha=0,ka=0;for(let pa=0;pa<W;pa++){var ra=new DataView(P,v+ea*pa,ea);m=ra.getUint16(0,O);R=ra.getUint16(2,O);H=U.getTagName(m,Y);const la=[];2===S?(ha=ra.getUint16(4,O),ka=ra.getUint16(6,O)):4===S?(ha=ra.getUint32(4,O),ka=ra.getUint32(8,O)):8===S&&(ha=y(ra,4,O,!0),ka=y(ra,12,O,!0),la.push(ra.getUint32(12,O)),la.push(ra.getUint32(16,O)));ra={id:m,type:R,valueCount:ha,valueOffset:ka,valueOffsets:la,values:null};r(P,O,ra,K,!1,S);na.set(H,ra)}return{success:!0,ifd:na,nextIFD:a,
requiredBufferSize:T}}function f(P,O){if(1!==O&&2!==O&&4!==O)return P;const v=new Uint8Array(P),K=8/O;P=new Uint8Array(P.byteLength*K);let Y=0;const S=2**O-1;for(let T=0;T<v.length;T++){const W=v[T];for(let ea=0;ea<K;ea++)P[Y++]=W<<O*ea>>>8-O&S}return P.buffer}function c(P,O,v){const K=new E.JpegImage;K.parse(P);K.colorTransform=6===v?-1:0;P=K.getData(K.width,K.height,1!==O);return new Uint8Array(P.buffer)}function n(P){P=(new L.Zlib(P)).getBytes();var O=new ArrayBuffer(P.length);O=new Uint8Array(O);
O.set(P);return O}function w(P,O,v,K,Y){return x.apply(this,arguments)}function x(){x=l._asyncToGenerator(function*(P,O,v,K,Y){var S=N.isPlatformLittleEndian===O,T=h(v,"BITSPERSAMPLE"),W=h(v,"SAMPLESPERPIXEL");const ea=h(v,"PHOTOMETRICINTERPRETATION");var na=h(v,"SAMPLEFORMAT")??1;const a=F(na,T);var m=h(v,"COMPRESSION")??1;na=u(a);if(34887===m)return yield p.load(),p.decode(P,{inputOffset:K}).pixels[0];if(1===m)W=P.slice(K,K+Y),O=new Uint8Array(W);else if(8===m||32946===m)O=new Uint8Array(P,K,Y),
O=n(O),W=O.buffer;else if(6===m)O=new Uint8Array(P,K,Y),O=c(O,W,ea),W=O.buffer;else if(7===m){m=v.get("JPEGTABLES").values;v=m.length-2;O=new Uint8Array(v+Y-2);for(let H=0;H<v;H++)O[H]=m[H];P=new Uint8Array(P,K+2,Y-2);for(K=0;K<P.length;K++)O[v+K]=P[K];O=c(O,W,ea);W=O.buffer}else if(5===m)O=G.decode(P,K,Y,O),W=O.buffer;else throw Error("tiff-decode: unsupport compression "+m);W=f(W,T);if("u8"!==a&&"s8"!==a&&!S)switch(W=new ArrayBuffer(O.length),S=new Uint8Array(W),a){case "u16":case "s16":for(T=0;T<
O.length;T+=2)S[T]=O[T+1],S[T+1]=O[T];break;case "u32":case "s32":case "f32":for(T=0;T<O.length;T+=4)S[T]=O[T+3],S[T+1]=O[T+2],S[T+2]=O[T+1],S[T+3]=O[T]}return new na(W)});return x.apply(this,arguments)}function b(P,O,v){return d.apply(this,arguments)}function d(){d=l._asyncToGenerator(function*(P,O,v){const K=v.get("TILEOFFSETS")?.values;if(void 0===K)return null;const Y=v.get("TILEBYTECOUNTS")?.values,{width:S,height:T,pixelType:W,tileWidth:ea,tileHeight:na}=q([v]);var a=k(v,O);const m=h(v,"SAMPLESPERPIXEL")||
O.planes;var H=S*T,R=h(v,"BITSPERSAMPLE"),ha=34887===(h(v,"COMPRESSION")??1),ka=u(W);const ra=[];for(var pa=0;pa<m;pa++)ra.push(new ka(H));let la,sa,wa,ya,za,Ba,aa,ma;H=Math.ceil(S/ea);if(0===R%8)if(ha&&a&&1<m)for(a=Math.round(K.length/m),R=0;R<a;R++){var Z=Math.floor(R/H)*na;wa=R%H*ea;ka=Z*S+wa;for(ha=0;ha<m;ha++)if(pa=R*m+ha,0!==Y[pa])for(pa=yield w(P,O.littleEndian,v,K[pa],Y[pa]),za=0,ya=ka,aa=Math.min(ea,S-wa),Ba=Math.min(na,T-Z),ma=ra[ha],la=0;la<Ba;la++)for(ya=ka+la*S,za=la*ea,sa=0;sa<aa;sa++,
ya++,za++)ma[ya]=pa[za]}else for(R=0;R<K.length;R++)if(0!==Y[R])for(Z=Math.floor(R/H)*na,wa=R%H*ea,ka=Z*S+wa,pa=yield w(P,O.littleEndian,v,K[R],Y[R]),za=0,ya=ka,aa=Math.min(ea,S-wa),Ba=Math.min(na,T-Z),Z=0;Z<m;Z++)if(ma=ra[Z],a||ha)for(la=0;la<Ba;la++)for(ya=ka+la*S,za=ea*na*Z+la*ea,sa=0;sa<aa;sa++,ya++,za++)ma[ya]=pa[za];else for(la=0;la<Ba;la++)for(ya=ka+la*S,za=la*ea*m+Z,sa=0;sa<aa;sa++,ya++,za+=m)ma[ya]=pa[za];return{width:S,height:T,pixelType:W,pixels:ra}});return d.apply(this,arguments)}function r(P,
O,v,K=0,Y=!1,S=4){if(v.values)return!0;var T=v.type,W=v.valueCount,ea=v.valueOffset;let na=[];var a=da[T],m=8*a,H=W*a,R=W*da[T]*8,ha=8===S?64:32;S=v.valueOffsets;if(R>ha&&H>(Y?P.byteLength:P?P.byteLength-ea+K:0))return v.offlineOffsetSize=[ea,H],v.values=null,!1;if(R<=ha)if(O||(32>=ha?ea>>>=32-R:(P=S?.length?S[0]:ea>>>0,O=S?.length?S[1]:Math.round((ea-P)/4294967296),32>=R?(ea=P>>>32-R,S[0]=ea):(ea=P*2**(32-R)+(O>>>32-R),S[0]=P,S[1]=O>>>32-R))),1===W&&m===ha)na=[ea];else if(64===ha)for(P=S?.length?
S[0]:ea>>>0,ea=S?.length?S[1]:Math.round((ea-P)/4294967296),O=P,a=32,P=1;P<=W;P++)H=32-m*P%32,a<m?(H=O<<H>>>32-a,R=ea<<32-a>>>32-a,O=ea,na.push(H+R*2**(m-a)),a-=32-(m-a)):(na.push(O<<H>>>32-m),a-=m),0===a&&(a=32,O=ea);else for(P=1;P<=W;P++)na.push(ea<<32-m*P>>>32-m);else for(ea-=K,Y&&(ea=0),W=ea;W<ea+H;W+=a){switch(T){case 1:m=(new DataView(P,W,1)).getUint8(0);break;case 2:m=(new DataView(P,W,1)).getUint8(0);break;case 3:m=(new DataView(P,W,2)).getUint16(0,O);break;case 4:case 13:m=(new DataView(P,
W,4)).getUint32(0,O);break;case 5:m=(new DataView(P,W,4)).getUint32(0,O)/(new DataView(P,W+4,4)).getUint32(0,O);break;case 6:m=(new DataView(P,W,1)).getInt8(0);break;case 7:m=(new DataView(P,W,1)).getUint8(0);break;case 8:m=(new DataView(P,W,2)).getInt16(0,O);break;case 9:m=(new DataView(P,W,4)).getInt32(0,O);break;case 10:m=(new DataView(P,W,4)).getInt32(0,O)/(new DataView(P,W+4,4)).getInt32(0,O);break;case 11:m=(new DataView(P,W,4)).getFloat32(0,O);break;case 12:m=(new DataView(P,W,8)).getFloat64(0,
O);break;case 16:case 18:m=A(new DataView(P,W,8),0,O);break;case 17:S=new DataView(P,W,8);R=(m=O)?S.getInt32(0,m):S.getUint32(0,m);S=m?S.getUint32(4,m):S.getInt32(4,m);ha=0<=(m?R:S)?1:-1;m?R*=ha:S*=ha;m=ha*(m?4294967296*S+R:4294967296*R+S);break;default:m=null}na.push(m)}if(2===T){T="";ea=na;na=[];for(P=0;P<ea.length;P++)0===ea[P]&&""!==T?(na.push(T),T=""):T+=String.fromCharCode(ea[P]);""===T&&0!==na.length||na.push(T)}v.values=na;return!0}function q(P){var O=P[0];const v=h(O,"TILEWIDTH"),K=h(O,"TILELENGTH"),
Y=h(O,"IMAGEWIDTH"),S=h(O,"IMAGELENGTH");var T=h(O,"BITSPERSAMPLE");const W=h(O,"SAMPLESPERPIXEL");var ea=h(O,"SAMPLEFORMAT")??1;const na=F(ea,T),a=k(O);var m=O.get("GDAL_NODATA")?.values;let H=null;m?.length&&(H=m.map(Z=>parseFloat(Z)),H.some(Z=>isNaN(Z))&&(H=null));var R=h(O,"COMPRESSION")??1;switch(R){case 1:m="NONE";break;case 2:case 3:case 4:case 32771:m="CCITT";break;case 5:m="LZW";break;case 6:case 7:m="JPEG";break;case 32773:m="PACKBITS";break;case 8:case 32946:m="DEFLATE";break;case 34712:m=
"JPEG2000";break;case 34887:m="LERC";break;default:m=String(R)}let ha=!0,ka="";qa.has(R)||(ha=!1,ka+="unsupported tag compression "+R);3<ea&&(ha=!1,ka+="unsupported tag sampleFormat "+ea);1!==T&&2!==T&&4!==T&&0!==T%8&&(ha=!1,ka+="unsupported tag bitsPerSample "+T);T=O.get("GEOASCIIPARAMS")?.values?.[0];if(T){var ra=(ra=T.split("|").find(Z=>Z.includes("ESRI PE String \x3d ")))?ra.replace("ESRI PE String \x3d ",""):"";ra=ra.startsWith("COMPD_CS")||ra.startsWith("PROJCS")||ra.startsWith("GEOGCS")?{wkid:null,
wkt:ra}:null}ea=O.get("GEOTIEPOINTS")?.values;T=O.get("GEOPIXELSCALE")?.values;R=O.get("GEOTRANSMATRIX")?.values;var pa=O.has("GEOKEYDIRECTORY")?O.get("GEOKEYDIRECTORY").data:null,la=!1;O=!1;if(pa){la=2===h(pa,"GTRasterTypeGeoKey");var sa=h(pa,"GTModelTypeGeoKey");2===sa?(pa=h(pa,"GeographicTypeGeoKey"),1024<=pa&&32766>=pa&&(ra={wkid:pa}),ra||32767!==pa||(O=!0,ra={wkid:4326})):1===sa&&(pa=h(pa,"ProjectedCSTypeGeoKey"),1024<=pa&&32766>=pa&&(ra={wkid:pa}))}let wa;T&&ea&&6<=ea.length?(wa=[T[0],0,ea[3]-
ea[0]*T[0],0,-Math.abs(T[1]),ea[4]-ea[1]*T[1]],la&&(wa[2]-=.5*wa[0]+.5*wa[1],wa[5]-=.5*wa[3]+.5*wa[4])):R&&16===R.length&&(wa=la?[R[0],R[1],R[3]-.5*R[0],R[4],R[5],R[7]-.5*R[5]]:[R[0],R[1],R[3],R[4],R[5],R[7]]);if(wa){ea=[{x:0,y:S},{x:0,y:0},{x:Y,y:S},{x:Y,y:0}];pa=la=Number.POSITIVE_INFINITY;let Z=sa=Number.NEGATIVE_INFINITY;for(let ua=0;ua<ea.length;ua++)R=B(ea[ua],wa),la=R.x>la?la:R.x,sa=R.x<sa?sa:R.x,pa=R.y>pa?pa:R.y,Z=R.y<Z?Z:R.y;ea={xmin:la,xmax:sa,ymin:pa,ymax:Z,spatialReference:ra}}else ea=
{xmin:-.5,ymin:.5-S,xmax:Y-.5,ymax:.5,spatialReference:ra};O&&(400<ea.xmax-ea.xmin||361<Math.max(Math.abs(ea.xmin),Math.abs(ea.xmax)))&&(ra=null,ea.spatialReference=null);ra=g(P);let ya;let za,Ba;if(0<ra.length){za=Math.round(Math.log(Y/h(ra[0],"IMAGEWIDTH"))/Math.LN2);var aa=ra[ra.length-1];Ba=Math.round(Math.log(Y/h(aa,"IMAGEWIDTH"))/Math.LN2);ya=h(aa,"TILEWIDTH");aa=h(aa,"TILELENGTH")}ya=null!=Ba&&0<Ba?ya||v:null;aa=null!=Ba&&0<Ba?aa||K:null;let ma;v&&(ma=[{maxCol:Math.ceil(Y/v)-1,maxRow:Math.ceil(S/
K)-1,minRow:0,minCol:0}],ra.forEach(Z=>{ma.push({maxCol:Math.ceil(h(Z,"IMAGEWIDTH")/h(Z,"TILEWIDTH"))-1,maxRow:Math.ceil(h(Z,"IMAGELENGTH")/h(Z,"TILELENGTH"))-1,minRow:0,minCol:0})}));R=P[0].get("GDAL_METADATA")?.values?.[0];R=ja(R);ka+=" "+V({width:Y,height:S,tileWidth:v,tileHeight:K,planes:W,ifds:P});P=t(P).length===ra.length+1;return{width:Y,height:S,tileWidth:v,tileHeight:K,planes:W,isBSQ:a,pixelType:na,compression:m,noData:H,hasMaskBand:P,isSupported:ha,message:ka,extent:ea,isPseudoGeographic:O,
affine:T?null:wa,firstPyramidLevel:za,maximumPyramidLevel:Ba,pyramidBlockWidth:ya,pyramidBlockHeight:aa,tileBoundary:ma,metadata:R}}function k(P,O){return(P=P.get("PLANARCONFIGURATION")?.values)?2===P[0]:O?O.isBSQ:!1}function g(P){return P.filter(O=>1===h(O,"NEWSUBFILETYPE"))}function t(P){return P.filter(O=>{const v=4===((h(O,"NEWSUBFILETYPE")??0)&4);O=4===h(O,"PHOTOMETRICINTERPRETATION");return v&&O})}function z(P){const {littleEndian:O,isBigTiff:v,firstIFDPos:K}=D(P);var Y=K;const S=[];do if(Y=
I(P,O,Y,0,U.TIFF_TAGS,v?8:4),Y.success)S.push(Y.ifd),Y=Y.nextIFD;else break;while(0<Y);P=q(S);Y=g(S);const T=t(S);return{...P,littleEndian:O,isBigTiff:v,ifds:S,pyramidIFDs:Y,maskIFDs:T}}function A(P,O,v){const K=P.getUint32(O,v);P=P.getUint32(O+4,v);return v?4294967296*P+K:4294967296*K+P}function y(P,O,v,K){return K?A(P,O,v):P.getUint32(O,v)}function D(P){var O=new DataView(P,0,16),v=O.getUint16(0,!1);P=null;if(18761===v)P=!0;else if(19789===v)P=!1;else throw Error("unexpected endianess byte");var K=
O.getUint16(2,P);if(42!==K&&43!==K)throw Error("unexpected tiff identifier");v=4;if(K=43===K){const Y=O.getUint16(v,P);v+=2;if(8!==Y)throw Error("unsupported bigtiff version");if(0!==O.getUint16(v,P))throw Error("unsupported bigtiff version");v+=2}O=y(O,v,P,K);return{littleEndian:P,isBigTiff:K,firstIFDPos:O}}function I(P,O,v,K=0,Y=U.TIFF_TAGS,S=4){v=e(P,O,v,K,Y,S);let T;const W=v.ifd;W&&(U.ifdTags.forEach((ea,na)=>{W.has(na)&&(T=W.get(na),T.data=e(P,O,T.valueOffset-K,K,ea).ifd)}),W.has("GEOKEYDIRECTORY")&&
(T=W.get("GEOKEYDIRECTORY"),(Y=T.values)&&4<Y.length&&(Y=Y[0]+"."+Y[1]+"."+Y[2],T.data=e(P,O,T.valueOffset+6-K,K,U.GEO_KEYS,2).ifd,T.data&&T.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[Y]}))),W.has("XMP")&&(T=W.get("XMP"),Y=T.values,"number"===typeof Y[0]&&7===T.type&&(T.values=[J.bytesToUTF8(new Uint8Array(Y))])));return v}function V(P){const {width:O,height:v,tileHeight:K,tileWidth:Y}=P,S=P.planes,T=Y?Y*K:O*v;P=h(P.ifds[0],"BITSPERSAMPLE");let W="";T*S>2**30/(8<
P?P/8:1)&&(W=Y?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return W}function C(){C=l._asyncToGenerator(function*(P,O){const {headerInfo:v,ifd:K,offsets:Y,sizes:S}=O;var T=[];for(var W=0;W<Y.length;W++){var ea=yield w(P,v.littleEndian,K,Y[W],S[W]||P.byteLength);T.push(ea)}var na=k(K,v);P=h(K,"BITSPERSAMPLE");W=h(K,"SAMPLEFORMAT")??1;W=F(W,P);var a=h(K,"SAMPLESPERPIXEL")||v.planes;const m=u(W);ea=h(K,"TILEWIDTH");const H=h(K,"TILELENGTH");
var R=h(K,"COMPRESSION")??1;const ha=ea*H;P=[];let ka=T[0];const ra=34887===R;for(let la=0;la<a;la++){R=new m(ha);if(na&&ra){if(ka=T[la],ka.length)for(var pa=0;pa<ha;pa++)R[pa]=ka[la][pa+la]}else if(ka.length)if(na||ra&&!na)R=ka.slice(ha*la,ha*(la+1));else for(pa=0;pa<ha;pa++)R[pa]=ka[pa*a+la];P.push(R)}T=v.noData?v.noData[0]:O.noDataValue;na=(a=v.metadata?v.metadata.statistics:null)?a.map(la=>la.min):null;a=a?a.map(la=>la.max):null;W={pixelType:W,width:ea,height:H,pixels:P,noDataValue:T};null!=T?
ca.convertNoDataToMask(W,T):na&&a&&O.applyMinMaxConstraint&&(W.mask=xa(P,na,a));return W});return C.apply(this,arguments)}function M(){M=l._asyncToGenerator(function*(P,O={}){var v=O.pyramidLevel||0,K=O.headerInfo||z(P);const {ifds:Y,noData:S}=K;if(0===Y.length)throw Error("no valid image file directory");var T=V(K);if(T)throw T;T=null;var W=-1===v?Y[Y.length-1]:Y[v];O=S??O.noDataValue;if(K.tileWidth)T=yield b(P,K,W);else{{const Ba=N.isPlatformLittleEndian===K.littleEndian,aa=W.get("STRIPOFFSETS")?.values;
if(void 0===aa)P=null;else{var {width:ea,height:na,pixelType:a}=q([W]);v=h(W,"SAMPLESPERPIXEL")||K.planes;var m=h(W,"PHOTOMETRICINTERPRETATION");T=ea*na;var H=h(W,"BITSPERSAMPLE"),R=u(a),ha=new R(T*v),ka=W.get("STRIPBYTECOUNTS")?.values,ra=h(W,"ROWSPERSTRIP"),pa=h(W,"COMPRESSION")??1;var la=ra;if(0===H%8)for(W=0;W<aa.length;W++){var sa=W*ra*ea*v;la=(W+1)*ra>na?na-W*ra:ra;if("u8"===a||"s8"===a||Ba)if(8===pa||32946===pa){var wa=new Uint8Array(P,aa[W],ka[W]);wa=n(wa);var ya=wa.buffer}else 6===pa?(wa=
new Uint8Array(P,aa[W],ka[W]),wa=c(wa,v,m),ya=wa.buffer):5===pa?(wa=G.decode(P,aa[W],ka[W],K.littleEndian),ya=wa.buffer):(ka[W]!==la*ea*v*H/8&&console.log("strip byte counts is different than expected"),ya=P.slice(aa[W],aa[W]+ka[W]));else{if(6===pa||8===pa||32946===pa){wa=new Uint8Array(P,aa[W],ka[W]);var za=n(wa);ya=za.buffer}else ka[W]!==la*ea*v*H/8&&console.log("strip byte counts is different than expected"),ya=new ArrayBuffer(ka[W]),wa=new Uint8Array(P,aa[W],ka[W]),za=new Uint8Array(ya);switch(a){case "u16":case "s16":for(la=
0;la<wa.length;la+=2)za[la]=wa[la+1],za[la+1]=wa[la];break;case "u32":case "s32":case "f32":for(la=0;la<wa.length;la+=4)za[la]=wa[la+3],za[la+1]=wa[la+2],za[la+2]=wa[la+1],za[la+3]=wa[la]}}ya=f(ya,H);la=new R(ya);ha.set(la,sa)}m=[];if(1===v)m.push(ha);else for(W=0;W<v;W++){K=new R(T);for(P=0;P<T;P++)K[P]=ha[P*v+W];m.push(K)}P={width:ea,height:na,pixelType:a,pixels:m}}}T=yield P}if(!T)return T;null!=O&&ca.convertNoDataToMask(T,O);return T});return M.apply(this,arguments)}const da=[0,1,1,2,4,8,1,1,
2,4,8,4,8,-1,-1,-1,8,8,8],qa=new Set([1,5,6,7,8,34712,34887]),xa=(P,O,v)=>{if(!(P&&0<P.length&&O&&v))return null;let K,Y,S;const T=P[0].length,W=P.length,ea=new Uint8Array(T);for(let a=0;a<W;a++)if(K=P[a],Y=O[a],S=v[a],0===a)for(var na=0;na<T;na++)ea[na]=K[na]<Y||K[na]>S?0:1;else for(na=0;na<T;na++)ea[na]&&(ea[na]=K[na]<Y||K[na]>S?0:1);return ea},ja=P=>{if(!P)return null;var O=P.match(/<Item(.*?)Item>/gi);if(!O||0===O.length)return null;P=new Map;var v;for(var K=0;K<O.length;K++){var Y=O[K];var S=
Y.slice(6,Y.indexOf("\x3e"));var T=Y.indexOf("sample\x3d");-1<T&&(v=Y.slice(T+8,Y.indexOf('"',T+8)));T=Y.indexOf("name\x3d");-1<T&&(S=Y.slice(T+6,Y.indexOf('"',T+6)));S&&(Y=Y.slice(Y.indexOf("\x3e")+1,Y.indexOf("\x3c/Item\x3e")).trim(),null!=v?P.has(S)?P.get(S)[v]=Y:P.set(S,[Y]):P.set(S,Y));v=null}O=P.get("STATISTICS_MINIMUM");S=P.get("STATISTICS_MAXIMUM");K=P.get("STATISTICS_MEAN");Y=P.get("STATISTICS_STDDEV");v=null;if(O&&S)for(v=[],T=0;T<O.length;T++)v.push({min:parseFloat(O[T]),max:parseFloat(S[T]),
avg:K&&parseFloat(K[T]),stddev:Y&&parseFloat(Y[T])});S=P.get("BandName");K=P.get("WavelengthMin");Y=P.get("WavelengthMax");O=null;if(S)for(O=[],T=0;T<S.length;T++)O.push({BandName:S[T],WavelengthMin:K&&parseFloat(K[T]),WavelengthMax:Y&&parseFloat(Y[T])});S=P.get("DataType");return{statistics:v,bandProperties:O,dataType:S,rawMetadata:P}};Q.decode=function(P){return M.apply(this,arguments)};Q.decodeTileOrStrip=function(P,O){return C.apply(this,arguments)};Q.getImageInfo=q;Q.getMaskIFDs=t;Q.getPyramidIFDs=
g;Q.isBSQConfig=k;Q.parseFieldValues=r;Q.parseHeader=z;Q.parseIFD=I;Q.parseSignature=D;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(Q){Q.bytesToUTF8=function(l,J){let E=0,p="",G=0,ca=0;const U=l.length;for(;E<U;)if(ca=l[E++],G=ca>>4,8>G?G=1:15===G?(G=4,ca=(ca&7)<<18|(l[E++]&63)<<12|(l[E++]&63)<<6|l[E++]&63):14===G?(G=3,ca=(ca&15)<<12|(l[E++]&63)<<6|l[E++]&63):(G=2,ca=(ca&31)<<6|l[E++]&63),
0!==ca||J)p+=String.fromCharCode(ca);return p};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const Q=(()=>{const p=[];p[254]="NEWSUBFILETYPE";p[255]="SUBFILETYPE";p[256]="IMAGEWIDTH";p[257]="IMAGELENGTH";p[258]="BITSPERSAMPLE";p[259]="COMPRESSION";p[262]="PHOTOMETRICINTERPRETATION";p[263]="THRESHHOLDING";p[264]="CELLWIDTH";p[265]="CELLLENGTH";p[266]="FILLORDER";p[269]="DOCUMENTNAME";p[270]="IMAGEDESCRIPTION";
p[271]="MAKE";p[272]="MODEL";p[273]="STRIPOFFSETS";p[274]="ORIENTATION";p[277]="SAMPLESPERPIXEL";p[278]="ROWSPERSTRIP";p[279]="STRIPBYTECOUNTS";p[280]="MINSAMPLEVALUE";p[281]="MAXSAMPLEVALUE";p[282]="XRESOLUTION";p[283]="YRESOLUTION";p[284]="PLANARCONFIGURATION";p[285]="PAGENAME";p[286]="XPOSITION";p[287]="YPOSITION";p[288]="FREEOFFSETS";p[289]="FREEBYTECOUNTS";p[290]="GRAYRESPONSEUNIT";p[291]="GRAYRESPONSECURVE";p[292]="T4OPTIONS";p[293]="T6OPTIONS";p[296]="RESOLUTIONUNIT";p[297]="PAGENUMBER";p[300]=
"COLORRESPONSEUNIT";p[301]="TRANSFERFUNCTION";p[305]="SOFTWARE";p[306]="DATETIME";p[315]="ARTIST";p[316]="HOSTCOMPUTER";p[317]="PREDICTOR";p[318]="WHITEPOINT";p[319]="PRIMARYCHROMATICITIES";p[320]="COLORMAP";p[321]="HALFTONEHINTS";p[322]="TILEWIDTH";p[323]="TILELENGTH";p[324]="TILEOFFSETS";p[325]="TILEBYTECOUNTS";p[326]="BADFAXLINES";p[327]="CLEANFAXDATA";p[328]="CONSECUTIVEBADFAXLINES";p[330]="SUBIFD";p[332]="INKSET";p[333]="INKNAMES";p[334]="NUMBEROFINKS";p[336]="DOTRANGE";p[337]="TARGETPRINTER";
p[338]="EXTRASAMPLES";p[339]="SAMPLEFORMAT";p[340]="SMINSAMPLEVALUE";p[341]="SMAXSAMPLEVALUE";p[342]="TRANSFERRANGE";p[347]="JPEGTABLES";p[512]="JPEGPROC";p[513]="JPEGIFOFFSET";p[514]="JPEGIFBYTECOUNT";p[515]="JPEGRESTARTINTERVAL";p[517]="JPEGLOSSLESSPREDICTORS";p[518]="JPEGPOINTTRANSFORM";p[519]="JPEGQTABLES";p[520]="JPEGDCTABLES";p[521]="JPEGACTABLES";p[529]="YCBCRCOEFFICIENTS";p[530]="YCBCRSUBSAMPLING";p[531]="YCBCRPOSITIONING";p[532]="REFERENCEBLACKWHITE";p[700]="XMP";p[33550]="GEOPIXELSCALE";
p[33922]="GEOTIEPOINTS";p[33432]="COPYRIGHT";p[42112]="GDAL_METADATA";p[42113]="GDAL_NODATA";p[50844]="RPCCOEFFICIENT";p[34264]="GEOTRANSMATRIX";p[34735]="GEOKEYDIRECTORY";p[34736]="GEODOUBLEPARAMS";p[34737]="GEOASCIIPARAMS";p[34665]="EXIFIFD";p[34853]="GPSIFD";p[40965]="INTEROPERABILITYIFD";return p})(),l=(()=>{const p=Q.slice();p[36864]="ExifVersion";p[40960]="FlashpixVersion";p[40961]="ColorSpace";p[42240]="Gamma";p[37121]="ComponentsConfiguration";p[37122]="CompressedBitsPerPixel";p[40962]="PixelXDimension";
p[40963]="PixelYDimension";p[37500]="MakerNote";p[37510]="UserComment";p[40964]="RelatedSoundFile";p[36867]="DateTimeOriginal";p[36868]="DateTimeDigitized";p[36880]="OffsetTime";p[36881]="OffsetTimeOriginal";p[36882]="OffsetTimeDigitized";p[37520]="SubSecTime";p[37521]="SubSecTimeOriginal";p[37522]="SubSecTimeDigitized";p[37888]="Temperature";p[37889]="Humidity";p[37890]="Pressure";p[37891]="WaterDepth";p[37892]="Acceleration";p[37893]="CameraElevationAngle";p[42016]="ImageUniqueID";p[42032]="CameraOwnerName";
p[42033]="BodySerialNumber";p[42034]="LensSpecification";p[42035]="LensMake";p[42036]="LensModel";p[42037]="LensSerialNumber";p[33434]="ExposureTime";p[33437]="FNumber";p[34850]="ExposureProgram";p[34852]="SpectralSensitivity";p[34855]="PhotographicSensitivity";p[34856]="OECF";p[34864]="SensitivityType";p[34865]="StandardOutputSensitivity";p[34866]="RecommendedExposureIndex";p[34867]="ISOSpeed";p[34868]="ISOSpeedLatitudeyyy";p[34869]="ISOSpeedLatitudezzz";p[37377]="ShutterSpeedValue";p[37378]="ApertureValue";
p[37379]="BrightnessValue";p[37380]="ExposureBiasValue";p[37381]="MaxApertureValue";p[37382]="SubjectDistance";p[37383]="MeteringMode";p[37384]="LightSource";p[37385]="Flash";p[37386]="FocalLength";p[37396]="SubjectArea";p[41483]="FlashEnergy";p[41484]="SpatialFrequencyResponse";p[41486]="FocalPlaneXResolution";p[41487]="FocalPlaneYResolution";p[41488]="FocalPlaneResolutionUnit";p[41492]="SubjectLocation";p[41493]="ExposureIndex";p[41495]="SensingMethod";p[41728]="FileSource";p[41729]="SceneType";
p[41730]="CFAPattern";p[41985]="CustomRendered";p[41986]="ExposureMode";p[41987]="WhiteBalance";p[41988]="DigitalZoomRatio";p[41989]="FocalLengthIn35mmFilm";p[41990]="SceneCaptureType";p[41991]="GainControl";p[41992]="Contrast";p[41993]="Saturation";p[41994]="Sharpness";p[41995]="DeviceSettingDescription";p[41996]="SubjectDistanceRange";return p})(),J=(()=>{const p=[];p[1024]="GTModelTypeGeoKey";p[1025]="GTRasterTypeGeoKey";p[1026]="GTCitationGeoKey";p[2048]="GeographicTypeGeoKey";p[2049]="GeogCitationGeoKey";
p[2050]="GeogGeodeticDatumGeoKey";p[2051]="GeogPrimeMeridianGeoKey";p[2052]="GeogLinearUnitsGeoKey";p[2053]="GeogLinearUnitSizeGeoKey";p[2054]="GeogAngularUnitsGeoKey";p[2055]="GeogAngularUnitSizeGeoKey";p[2056]="GeogEllipsoidGeoKey";p[2057]="GeogSemiMajorAxisGeoKey";p[2058]="GeogSemiMinorAxisGeoKey";p[2059]="GeogInvFlatteningGeoKey";p[2061]="GeogPrimeMeridianLongGeoKey";p[2060]="GeogAzimuthUnitsGeoKey";p[3072]="ProjectedCSTypeGeoKey";p[3073]="PCSCitationGeoKey";p[3074]="ProjectionGeoKey";p[3075]=
"ProjCoordTransGeoKey";p[3076]="ProjLinearUnitsGeoKey";p[3077]="ProjLinearUnitSizeGeoKey";p[3078]="ProjStdParallel1GeoKey";p[3079]="ProjStdParallel2GeoKey";p[3080]="ProjNatOriginLongGeoKey";p[3081]="ProjNatOriginLatGeoKey";p[3082]="ProjFalseEastingGeoKey";p[3083]="ProjFalseNorthingGeoKey";p[3084]="ProjFalseOriginLongGeoKey";p[3085]="ProjFalseOriginLatGeoKey";p[3086]="ProjFalseOriginEastingGeoKey";p[3087]="ProjFalseOriginNorthingGeoKey";p[3088]="ProjCenterLongGeoKey";p[3090]="ProjCenterEastingGeoKey";
p[3091]="ProjCenterNorthingGeoKey";p[3092]="ProjScaleAtNatOriginGeoKey";p[3093]="ProjScaleAtCenterGeoKey";p[3094]="ProjAzimuthAngleGeoKey";p[3095]="ProjStraightVertPoleLongGeoKey";p[4096]="VerticalCSTypeGeoKey";p[4097]="VerticalCitationGeoKey";p[4098]="VerticalDatumGeoKey";p[4099]="VerticalUnitsGeoKey";return p})(),E=new Map;E.set("EXIFIFD",l);E.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:Q,ifdTags:E,GEO_KEYS:J,getTagName:(p,G)=>{G=(G||Q)[p];void 0===G&&(G="unknown"+String(p));return G}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(Q){const l=new ArrayBuffer(4),J=new Uint8Array(l);(new Uint32Array(l))[0]=1;Q.isPlatformLittleEndian=1===J[0];Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils"],
function(Q,l,J,E){function p(b){return l.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function G(b,d,r,q,k){const g=b.length;k=J.createEmptyBand(k,g);if(d)for(let t=0;t<g;t++)d[t]&&(k[t]=r[b[t]-q]);else for(d=0;d<g;d++)k[d]=r[b[d]-q];return k}function ca(b,d,r,q){const k=null!=r&&2<=r.length?new Set(r):null;r=1===r?.length?r[0]:null;const g=!!d?.length;for(let t=0;t<b.length;t++)if(q[t]){const z=b[t];if(g){let A=!1;for(let y=0;y<d.length;y+=2)if(z>=d[y]&&
z<=d[y+1]){A=!0;break}A||(q[t]=0)}q[t]&&(z===r||k?.has(z))&&(q[t]=0)}}function U(b,d){const r=b[0].length;for(let q=0;q<r;q++)if(d[q]){let k=!1;for(let g=0;g<b.length;g++)if(b[g][q]){k=!0;break}k||(d[q]=0)}}function N(b,d){const r=b[0].length;for(let q=0;q<r;q++)if(d[q]){let k=!1;for(let g=0;g<b.length;g++)if(0===b[g][q]){k=!0;break}k&&(d[q]=0)}}function L(b,d,r,q,k,g,t,z){return{xmin:k<=r*b?0:k<r*b+b?k-r*b:b,ymin:g<=q*d?0:g<q*d+d?g-q*d:d,xmax:k+t<=r*b?0:k+t<r*b+b?k+t-r*b:b,ymax:g+z<=q*d?0:g+z<q*
d+d?g+z-q*d:d}}function F(b,d,r,q,k,g){const {width:t,height:z}=r.block,{x:A,y}=r.offset,{width:D,height:I}=r.mosaic;r=L(t,z,q,k,A,y,D,I);let V=0;var C=0;if(g){var M=g.hasGCSSShiftTransform?360:g.halfWorldWidth??0,da=t*g.resolutionX;const qa=g.startX+q*da;qa<M&&qa+da>M?C=g.rightPadding:qa>=M&&(V=g.leftMargin-g.rightPadding,C=0)}r.xmax-=C;if("number"===typeof d)for(g=r.ymin;g<r.ymax;g++)for(C=(k*z+g-y)*D+(q*t-A)+V,M=r.xmin;M<r.xmax;M++)b[C+M]=d;else for(g=r.ymin;g<r.ymax;g++)for(C=(k*z+g-y)*D+(q*t-
A)+V,M=g*t,da=r.xmin;da<r.xmax;da++)b[C+da]=d[M+da]}function u(b,d,r={}){const {clipOffset:q,clipSize:k,alignmentInfo:g,blockWidths:t}=r;if(t)return B(b,d,{blockWidths:t});var z=b.find(ja=>p(ja));if(l.isNone(z))return null;r=k?k.width:d.width;const A=k?k.height:d.height;var y=z.width,D=z.height;const I=d.width/y,V=d.height/D;d={offset:q||{x:0,y:0},mosaic:k||d,block:{width:y,height:D}};y=z.pixelType;D=J.getPixelArrayConstructor(y);var C=z.pixels.length;z=[];for(var M=0;M<C;M++){var da=new D(r*A);for(let ja=
0;ja<V;ja++)for(let P=0;P<I;P++){var qa=b[ja*I+P];p(qa)&&(qa=qa.pixels[M],F(da,qa,d,P,ja,g))}z.push(da)}let xa;if(b.some(ja=>l.isNone(ja)||l.isSome(ja.mask)&&0<ja.mask.length))for(xa=new Uint8Array(r*A),D=0;D<V;D++)for(C=0;C<I;C++)da=b[D*I+C],M=l.isSome(da)?da.mask:null,l.isSome(M)?F(xa,M,d,C,D,g):da?F(xa,1,d,C,D,g):F(xa,0,d,C,D,g);b=new J({width:r,height:A,pixels:z,pixelType:y,mask:xa});b.updateStatistics();return b}function B(b,d,r){const q=b.find(C=>l.isSome(C));if(l.isNone(q))return null;var k=
b.some(C=>l.isSome(C)?!!C.mask:!0);const {width:g,height:t}=d;d=k?new Uint8Array(g*t):null;({blockWidths:r}=r);const z=[],A=q.getPlaneCount(),y=J.getPixelArrayConstructor(q.pixelType);if(k)for(let C=0,M=0;C<b.length;M+=r[C],C++)if(k=b[C],p(k)){var D=l.unwrap(k.mask);for(var I=0;I<t;I++)for(var V=0;V<r[C];V++)d[I*g+V+M]=null==D?255:D[I*k.width+V]}for(k=0;k<A;k++){D=new y(g*t);for(let C=0,M=0;C<b.length;M+=r[C],C++)if(I=b[C],p(I)&&(V=I.pixels[k],null!=V))for(let da=0;da<t;da++)for(let qa=0;qa<r[C];qa++)D[da*
g+qa+M]=V[da*I.width+qa];z.push(D)}b=new J({width:g,height:t,mask:d,pixels:z,pixelType:q.pixelType});b.updateStatistics();return b}function h(b){if(!p(b))return null;const d=b.clone(),{width:r,height:q,pixels:k}=b;var g=k[0];const t=d.pixels[0];b=l.unwrap(b.mask);for(let y=2;y<q-1;y++){const D=new Map;for(var z=y-2;z<y+2;z++)for(var A=0;4>A;A++){const I=z*r+A;c(D,g[I],b?b[I]:1)}t[y*r]=e(D);t[y*r+1]=t[y*r+2]=t[y*r];for(z=3;z<r-1;z++)A=(y-2)*r+z+1,c(D,g[A],b?b[A]:1),A=(y-1)*r+z+1,c(D,g[A],b?b[A]:1),
A=y*r+z+1,c(D,g[A],b?b[A]:1),A=(y+1)*r+z+1,c(D,g[A],b?b[A]:1),A=(y-2)*r+z-3,f(D,g[A],b?b[A]:1),A=(y-1)*r+z-3,f(D,g[A],b?b[A]:1),A=y*r+z-3,f(D,g[A],b?b[A]:1),A=(y+1)*r+z-3,f(D,g[A],b?b[A]:1),t[y*r+z]=e(D);t[y*r+z+1]=t[y*r+z]}for(g=0;g<r;g++)t[g]=t[r+g]=t[2*r+g],t[(q-1)*r+g]=t[(q-2)*r+g];d.updateStatistics();return d}function e(b){if(0===b.size)return 0;let d=0,r=-1,q=0;const k=b.keys();let g=k.next();for(;!g.done;)q=b.get(g.value),q>d&&(r=g.value,d=q),g=k.next();return r}function f(b,d,r){0!==r&&(r=
b.get(d),1===r?b.delete(d):b.set(d,r-1))}function c(b,d,r){0!==r&&b.set(d,b.has(d)?b.get(d)+1:1)}function n(b,d,r){let {x:q,y:k}=d;const {width:g,height:t}=r;if(0===q&&0===k&&t===b.height&&g===b.width)return b;const {width:z,height:A}=b;d=Math.max(0,k);const y=Math.max(0,q),D=Math.min(q+g,z),I=Math.min(k+t,A);if(0>D||0>I||!p(b))return null;q=Math.max(0,-q);k=Math.max(0,-k);var {pixels:V}=b,C=g*t,M=V.length;const da=[];for(var qa=0;qa<M;qa++){var xa=V[qa],ja=J.createEmptyBand(b.pixelType,C);for(let P=
d;P<I;P++){const O=P*z;let v=(P+k-d)*g+q;for(let K=y;K<D;K++)ja[v++]=xa[O+K]}da.push(ja)}V=new Uint8Array(C);C=l.unwrap(b.mask);for(M=d;M<I;M++)for(qa=M*z,xa=(M+k-d)*g+q,ja=y;ja<D;ja++)V[xa++]=C?C[qa+ja]:1;b=new J({width:r.width,height:r.height,pixelType:b.pixelType,pixels:da,mask:V});b.updateStatistics();return b}function w(b,d=!0){if(!p(b))return null;const {pixels:r,width:q,height:k,mask:g,pixelType:t}=b;b=[];const z=Math.round(q/2),A=Math.round(k/2),y=k-1,D=q-1;for(var I=0;I<r.length;I++){var V=
r[I],C=J.createEmptyBand(t,z*A),M=0;for(var da=0;da<k;da+=2)for(var qa=0;qa<q;qa+=2){var xa=V[da*q+qa];if(d){var ja=qa===D?xa:V[da*q+qa+1];const P=da===y?xa:V[da*q+qa+q],O=qa===D?P:da===y?ja:V[da*q+qa+q+1];C[M++]=(xa+ja+P+O)/4}else C[M++]=xa}b.push(C)}I=null;if(l.isSome(g))for(I=new Uint8Array(z*A),V=0,C=0;C<k;C+=2)for(M=0;M<q;M+=2)da=g[C*q+M],d?(qa=M===D?da:g[C*q+M+1],xa=C===y?da:g[C*q+M+q],ja=M===D?xa:C===y?qa:g[C*q+M+q+1],I[V++]=da*qa*xa*ja?1:0):I[V++]=da;return new J({width:z,height:A,pixelType:t,
pixels:b,mask:I})}function x(b,d,r,q,k=0){const {width:g,height:t}=b,{width:z,height:A}=d;b=q.cols;q=q.rows;d=Math.ceil(z/b-.1/b);const y=Math.ceil(A/q-.1/q);let D,I,V,C,M;const da=d*b;var qa=da*y*q;const xa=new Float32Array(qa),ja=new Float32Array(qa),P=new Uint32Array(qa),O=new Uint32Array(qa);let v=0,K,Y;for(let W=0;W<y;W++)for(let ea=0;ea<d;ea++){var S=12*(W*d+ea);qa=r[S];D=r[S+1];I=r[S+2];V=r[S+3];C=r[S+4];M=r[S+5];for(var T=0;T<q;T++){v=(W*q+T)*da+ea*b;Y=(T+.5)/q;for(let na=0;na<T;na++)K=(na+
.5)/b,xa[v+na]=(qa*K+D*Y+I)*g+k,ja[v+na]=(V*K+C*Y+M)*t+k,P[v+na]=Math.floor(xa[v+na]),O[v+na]=Math.floor(ja[v+na])}S+=6;qa=r[S];D=r[S+1];I=r[S+2];V=r[S+3];C=r[S+4];M=r[S+5];for(S=0;S<q;S++)for(v=(W*q+S)*da+ea*b,Y=(S+.5)/q,T=S;T<b;T++)K=(T+.5)/b,xa[v+T]=(qa*K+D*Y+I)*g+k,ja[v+T]=(V*K+C*Y+M)*t+k,P[v+T]=Math.floor(xa[v+T]),O[v+T]=Math.floor(ja[v+T])}return{offsets_x:xa,offsets_y:ja,offsets_xi:P,offsets_yi:O,gridWidth:da}}Q.NoDataInterpretation=void 0;(function(b){b[b.matchAny=0]="matchAny";b[b.matchAll=
1]="matchAll"})(Q.NoDataInterpretation||(Q.NoDataInterpretation={}));Q.MissingBandAction=void 0;(function(b){b[b.bestMatch=0]="bestMatch";b[b.fail=1]="fail"})(Q.MissingBandAction||(Q.MissingBandAction={}));Q.MAX_MAP_SIZE_GPU=6;Q.approximateTransform=function(b,d,r,q,k="nearest"){if(!p(b))return null;"majority"===k&&(b=h(b));const {pixels:g,mask:t,pixelType:z}=b,A=b.width;var y=b.height;const D=J.getPixelArrayConstructor(z),I=g.length,{width:V,height:C}=d;b=!1;for(let O=0;O<r.length;O+=3)-1===r[O]&&
-1===r[O+1]&&-1===r[O+2]&&(b=!0);const {offsets_x:M,offsets_y:da,offsets_xi:qa,offsets_yi:xa,gridWidth:ja}=x({width:A,height:y},d,r,q,"majority"===k?.5:0);let P;d=(O,v,K)=>{const Y=O instanceof Float32Array||O instanceof Float64Array?0:.5;for(let S=0;S<C;S++){P=S*ja;for(let T=0;T<V;T++){if(0>M[P]||0>da[P])O[S*V+T]=0;else if(K)O[S*V+T]=v[qa[P]+xa[P]*A];else{const W=Math.floor(M[P]),ea=Math.floor(da[P]),na=Math.ceil(M[P]),a=Math.ceil(da[P]),m=M[P]-W,H=da[P]-ea;O[S*V+T]=!t||t[W+ea*A]&&t[W+ea*A]&&t[W+
a*A]&&t[na+a*A]?(1-H)*((1-m)*v[W+ea*A]+m*v[na+ea*A])+H*((1-m)*v[W+a*A]+m*v[na+a*A])+Y:v[qa[P]+xa[P]*A]}P++}}};r=[];for(y=0;y<I;y++)q=new D(V*C),d(q,g[y],"nearest"===k||"majority"===k),r.push(q);k=new J({width:V,height:C,pixelType:z,pixels:r});if(l.isSome(t))k.mask=new Uint8Array(V*C),d(k.mask,t,!0);else if(b)for(k.mask=new Uint8Array(V*C),b=0;b<V*C;b++)k.mask[b]=0>M[b]||0>da[b]?0:1;k.updateStatistics();return k};Q.clip=n;Q.colorize=function(b,d){if(!p(b)||!d||!d.indexedColormap&&!d.indexed2DColormap)return b;
const r=b.clone();var q=r.pixels;let k=r.mask;const g=r.width*r.height;if(1!==q.length)return b;const {indexedColormap:t,indexed2DColormap:z,offset:A,alphaSpecified:y}=d;b=0;q=q[0];d=new Uint8Array(q.length);const D=new Uint8Array(q.length),I=new Uint8Array(q.length);var V=0;if(t){const C=t.length-1;if(l.isSome(k))for(b=0;b<g;b++)k[b]&&(V=4*(q[b]-A),V<A||V>C?k[b]=0:(d[b]=t[V],D[b]=t[V+1],I[b]=t[V+2],k[b]=t[V+3]));else{k=new Uint8Array(g);for(b=0;b<g;b++)V=4*(q[b]-A),V<A||V>C?k[b]=0:(d[b]=t[V],D[b]=
t[V+1],I[b]=t[V+2],k[b]=t[V+3]);r.mask=k}}else if(z)if(l.isSome(k))for(b=0;b<g;b++)k[b]&&(V=z[q[b]],d[b]=V[0],D[b]=V[1],I[b]=V[2],k[b]=V[3]);else{k=new Uint8Array(g);for(b=0;b<g;b++)V=z[q[b]],d[b]=V[0],D[b]=V[1],I[b]=V[2],k[b]=V[3];r.mask=k}r.pixels=[d,D,I];r.statistics=null;r.pixelType="u8";r.maskIsAlpha=y;return r};Q.compositeBands=function(b){if(!b?.length||b.some(A=>!p(A)))return null;if(1===b.length)return l.isSome(b[0])?b[0].clone():null;const {width:d,height:r,pixelType:q}=b[0];if(b.some(A=>
A.width!==d||A.height!==r))return null;const k=b.map(({mask:A})=>A).filter(A=>null!=A);let g=null;k.length&&(g=new Uint8Array(d*r),g.set(k[0]),1<k.length&&N(k.slice(1),g));const t=[];b.forEach(({pixels:A})=>t.push(...A));const z=[];b.map(({statistics:A})=>A).filter(A=>A?.length).forEach(A=>z.push(...A));return new J({pixelType:q,width:d,height:r,mask:g,pixels:t,statistics:z.length?z:null})};Q.createColormapLUT=function(b){if(b){var d=b.colormap;if(d&&0!==d.length){d=d.sort((y,D)=>y[0]-D[0]);var r=
0;0>d[0][0]&&(r=d[0][0]);var q=Math.max(256,d[d.length-1][0]-r+1),k=new Uint8Array(4*q),g=[],t=0,z=0,A=5===d[0].length;if(65536<q)return d.forEach(y=>{g[y[0]-r]=A?y.slice(1):y.slice(1).concat([255])}),{indexed2DColormap:g,offset:r,alphaSpecified:A};if(b.fillUnspecified)for(b=d[z],t=b[0]-r;t<q;t++)k[4*t]=b[1],k[4*t+1]=b[2],k[4*t+2]=b[3],k[4*t+3]=A?b[4]:255,t===b[0]-r&&(b=z===d.length-1?b:d[++z]);else for(t=0;t<d.length;t++)b=d[t],z=4*(b[0]-r),k[z]=b[1],k[z+1]=b[2],k[z+2]=b[3],k[z+3]=A?b[4]:255;return{indexedColormap:k,
offset:r,alphaSpecified:A}}}};Q.createMaskLUT=function(b,d,r){if("u8"!==b&&"s8"!==b&&"u16"!==b&&"s16"!==b)return null;var q=b.includes("16")?65536:256;b=b.includes("s")?-q/2:0;q=new Uint8Array(q);if(d)for(let g=0;g<d.length;g++){var k=Math.ceil(d[2*g]-b);const t=Math.floor(d[2*g+1]-b);for(;k<=t;k++)q[k]=255}else q.fill(255);if(r)for(d=0;d<r.length;d++)q[r[d]-b]=0;return{lut:q,offset:b}};Q.createRemapLUT=function(b){const {srcPixelType:d,inputRanges:r,outputValues:q,allowUnmatched:k,noDataRanges:g,
isLastInputRangeInclusive:t,outputPixelType:z}=b;if("u8"!==d&&"s8"!==d&&"u16"!==d&&"s16"!==d)return null;var A=d.includes("16")?65536:256;b=d.includes("s")?-A/2:0;const y=J.createEmptyBand(z,A);A=new Uint8Array(A);k&&A.fill(255);const [D,I]=E.getPixelValueRange(z);if(r?.length&&q?.length){var V=r.map(qa=>qa-1E-6);V[0]=r[0];t&&(V[V.length-1]=r[r.length-1]);for(var C=0;C<V.length;C++){var M=q[C]>I?I:q[C]<D?D:q[C],da=Math.ceil(V[2*C]-b);const qa=Math.floor(V[2*C+1]-b);for(;da<=qa;da++)y[da]=M,A[da]=
255}}if(g?.length)for(V=0;V<g.length;V++)for(M=Math.ceil(g[2*V]-b),C=Math.floor(g[2*V+1]-b);M<=C;M++)A[M]=0;return{lut:y,offset:b,mask:A}};Q.extractBands=function(b,d){if(!d?.length||!p(b))return b;const r=b.pixels.length;return d&&d.some(q=>q>=r)||1===r&&1===d.length&&0===d[0]||r===d.length&&!d.some((q,k)=>q!==k)?b:new J({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:d.map(q=>b.pixels[q]),statistics:b.statistics&&
d.map(q=>b.statistics[q])})};Q.getClipBounds=L;Q.getLocalArithmeticNorthRotations=function(b,d){const {coefficients:r,spacing:q}=d,{offsets_x:k,offsets_y:g,gridWidth:t}=x(b,b,r,{rows:q[0],cols:q[1]}),{width:z,height:A}=b;b=new Float32Array(z*A);d=180/Math.PI;for(let I=0;I<A;I++)for(let V=0;V<z;V++){var y=I*t+V,D=0===I?y:y-t;const C=I===A-1?y:y+t;y=k[D]-k[C];D=g[C]-g[D];isNaN(y)||isNaN(D)?b[I*z+V]=90:(D=Math.atan2(D,y)*d,D=(360+D)%360,b[I*z+V]=D)}return b};Q.interpolateOffsets=x;Q.isValidPixelBlock=
p;Q.lookupBandValues=G;Q.lookupPixels=function(b,d){if(!p(b))return null;const {pixels:r,mask:q}=b,k=r.length;let g=d.lut;const {offset:t}=d;g&&1===g[0].length&&(g=r.map(()=>g));const z=[];d=d.outputPixelType||"u8";for(let A=0;A<k;A++){const y=G(r[A],q,g[A],t||0,d);z.push(y)}b=new J({width:b.width,height:b.height,pixels:z,mask:q,pixelType:d});b.updateStatistics();return b};Q.mask=function(b,d){if(!p(b))return null;const {width:r,height:q,pixels:k}=b;var g=r*q;const t=new Uint8Array(g);b.mask?t.set(b.mask):
t.fill(255);b=k.length;const {includedRanges:z,noDataValues:A,outputPixelType:y,matchAll:D,lookups:I}=d;if(I){g=[];for(d=0;d<b;d++){var V=I[d];V=G(k[d],t,V.lut,V.offset||0,"u8");g.push(V)}1===g.length?t.set(g[0]):D?U(g,t):N(g,t)}else if(D){d=[];for(V=0;V<b;V++){const C=new Uint8Array(g);C.set(t);ca(k[V],z?.slice(2*V,2*V+2),A?.[V],C);d.push(C)}1===d.length?t.set(d[0]):U(d,t)}else for(g=0;g<b;g++)ca(k[g],z?.slice(2*g,2*g+2),A?.[g],t);return new J({width:r,height:q,pixelType:y,pixels:k,mask:t})};Q.mosaic=
u;Q.mosaicPixelData=function(b,d){if(!b||0===b.length)return null;var r=b.find(I=>I.pixelBlock);if(!r||l.isNone(r.pixelBlock))return null;var q=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width;const k=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,g=.01*Math.min(q,k),t=b.sort((I,V)=>Math.abs(I.extent.ymax-V.extent.ymax)>g?V.extent.ymax-I.extent.ymax:Math.abs(I.extent.xmin-V.extent.xmin)>g?I.extent.xmin-V.extent.xmin:0);var z=Math.min.apply(null,t.map(I=>I.extent.xmin));const A=Math.min.apply(null,
t.map(I=>I.extent.ymin)),y=Math.max.apply(null,t.map(I=>I.extent.xmax)),D=Math.max.apply(null,t.map(I=>I.extent.ymax));b={x:Math.round((d.xmin-z)/q),y:Math.round((D-d.ymax)/k)};z={width:Math.round((y-z)/q),height:Math.round((D-A)/k)};q={width:Math.round((d.xmax-d.xmin)/q),height:Math.round((d.ymax-d.ymin)/k)};if(Math.round(z.width/r.pixelBlock.width)*Math.round(z.height/r.pixelBlock.height)!==t.length||0>b.x||0>b.y||z.width<q.width||z.height<q.height)return null;r=t.map(I=>I.pixelBlock);r=u(r,z,{clipOffset:b,
clipSize:q});return{extent:d,pixelBlock:r}};Q.remap=function(b,d){if(!p(b))return null;const {width:r,height:q}=b,{inputRanges:k,outputValues:g,outputPixelType:t,noDataRanges:z,allowUnmatched:A,isLastInputRangeInclusive:y}=d;d=b.pixels[0];const D=J.createEmptyBand(t,d.length),I=b.mask,V=new Uint8Array(r*q);I?V.set(I):V.fill(255);const C=b.pixelType.startsWith("f")?1E-6:0;var M=k.map(v=>v-C);M[0]=k[0];M[M.length-1]=k[k.length-1]+(y?1E-6:0);b=k.length/2;const [da,qa]=E.getPixelValueRange(t);for(var xa=
0;xa<q;xa++)for(var ja=0;ja<r;ja++){var P=xa*r+ja;if(V[P]){var O=d[P];let v=!1;for(let K=b-1;0<=K;K--)if(O===M[2*K]||O>M[2*K]&&O<M[2*K+1]){D[P]=g[K];v=!0;break}v||(A?D[P]=O>qa?qa:O<da?da:O:V[P]=0)}}if(z?.length)for(M=0;M<q;M++)for(xa=0;xa<r;xa++)if(ja=M*r+xa,!I||I[ja])for(P=d[ja],O=0;O<b;O+=2)if(P>=z[O]&&P<=z[O+1]){D[ja]=0;V[ja]=0;break}return new J({width:r,height:q,pixelType:t,pixels:[D],mask:V})};Q.remapColor=function(b,d){if(!p(b))return null;b=b.clone();var {pixels:r}=b;const q=b.width*b.height,
k=d.length,g=Math.floor(k/2),t=d[Math.floor(g)];r=r[0];let z,A,y,D,I,V,C=!1;const M=new Uint8Array(q),da=new Uint8Array(q),qa=new Uint8Array(q);let xa=b.mask;const ja=4===d[0].mappedColor.length;xa||(xa=new Uint8Array(q),xa.fill(ja?255:1),b.mask=xa);for(I=0;I<q;I++)if(xa[I]){z=r[I];C=!1;V=g;A=t;y=0;for(D=k-1;1<D-y;){if(z===A.value){C=!0;break}z>A.value?y=V:D=V;V=Math.floor((y+D)/2);A=d[Math.floor(V)]}C||(z===d[y].value?(A=d[y],C=!0):z===d[D].value?(A=d[D],C=!0):z<d[y].value?(C=!1,A=null):z>d[y].value&&
(z<d[D].value?(A=d[y],C=!0):D===k-1?(C=!1,A=null):(A=d[D],C=!0)));C?(M[I]=A.mappedColor[0],da[I]=A.mappedColor[1],qa[I]=A.mappedColor[2],xa[I]=A.mappedColor[3]):M[I]=da[I]=qa[I]=xa[I]=0}b.pixels=[M,da,qa];b.mask=xa;b.pixelType="u8";b.maskIsAlpha=ja;return b};Q.resampleByMajority=h;Q.setValidBoundary=function(b,d,r){if(!p(b))return null;const {width:q,height:k}=b,g=d.x;d=d.y;const t=r.width+g;r=r.height+d;if(0>g||0>d||t>q||r>k||0===g&&0===d&&t===q&&r===k)return b;b.mask||(b.mask=new Uint8Array(q*k));
const z=b.mask;for(let A=0;A<k;A++){const y=A*q;for(let D=0;D<q;D++)z[y+D]=A<d||A>=r||D<g||D>=t?0:1}b.updateStatistics();return b};Q.split=function(b,d,r){if(!p(b))return null;const {width:q,height:k}=d;let {width:g,height:t}=b;const z=new Map,A={x:0,y:0};r=null==r?1:1+r;for(let y=0;y<r;y++){const D=Math.ceil(g/q),I=Math.ceil(t/k);for(let V=0;V<I;V++){A.y=V*k;for(let C=0;C<D;C++){A.x=C*q;const M=n(b,A,d);z.set(`${y}/${V}/${C}`,M)}}y<r-1&&(b=w(b));g=Math.round(g/2);t=Math.round(t/2)}return z};Object.defineProperty(Q,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/rasterFunctionHelper":function(){define("exports ../../../core/colorUtils ../../../core/Error ../../../core/lang ./AspectFunction ./BandArithmeticFunction ./ColormapFunction ./CompositeBandFunction ./ConvolutionFunction ./ExtractBandFunction ./LocalFunction ./MaskFunction ./NDVIFunction ./RemapFunction ./SlopeFunction ./StatisticsHistogramFunction ./StretchFunction".split(" "),function(Q,l,J,E,p,G,ca,U,N,L,F,u,B,h,e,f,c){function n(y,
D){({rasterFunctionArguments:y}=y);y&&(y.rasters||[y.raster]).forEach(I=>{I&&"number"!==typeof I&&("string"===typeof I?I.startsWith("http")&&(D.includes(I)||D.push(I)):"rasterFunctionArguments"in I&&n(I,D))})}function w(y,D){return"rasters"===D[0]&&Array.isArray(y.rasters)?y.rasters:D.map(I=>y[I])}function x(y){return!!(y&&"object"===typeof y&&y.rasterFunction&&y.rasterFunctionArguments)}function b(y){const {rasterFunction:D,rasterFunctionArguments:I}=y,V={};for(const M in I){let da=I[M];var C=M.toLowerCase();
if("rasters"===C&&Array.isArray(da))V.rasters=da.map(qa=>x(qa)?b(qa):qa);else switch(x(da)&&(da=b(da)),C){case "dra":V.dra=da;break;case "pspower":V.psPower=da;break;case "pszfactor":V.psZFactor=da;break;case "bandids":V.bandIds=da;break;default:C=M[0].toLowerCase()+M.slice(1),V[C]=da}}"Local"!==D||V.rasters?.length||(V.rasters=["$$"]);return{...y,rasterFunctionArguments:V}}function d(y,D){const {rasterFunction:I,rasterFunctionArguments:V}=y;var C=y.outputPixelType?.toLowerCase();if(null==I||!A.has(I))throw new J("raster-function-helper",
`unsupported raster function: ${I}`);var M=A.get(I);y=("function"===typeof M.ctor?M.ctor:M.ctor["default"]).fromJSON({...y,outputPixelType:C});({rasterArgumentNames:C}=y);M=[];const da=w(V,C),qa="rasters"===C[0],xa=[];for(let ja=0;ja<da.length;ja++){const P=da[ja];let O;null==P||"string"===typeof P&&P.startsWith("$")?M.push(D?.raster):"string"===typeof P?D[P]&&M.push(D[P]):"number"!==typeof P&&"rasterFunction"in P&&(O=d(P,D),qa||(y.functionArguments[C[ja]]=O),M.push(O));qa&&xa.push(O??P)}qa&&(y.functionArguments.rasters=
xa);D&&(y.sourceRasters=M,D=D.raster?.url)&&(y.mainPrimaryRasterId=D);return y}function r(y,D){if(y&&D)for(const I in y){const V=y[I];V&&"object"===typeof V&&(V.function&&V.arguments?r(V.arguments,D):"RasterFunctionVariable"===V.type&&null!=D[V.name]&&(V.value=D[V.name]))}}function q(y){if(!y||"object"!==typeof y)return y;if(Array.isArray(y)&&0===y.length)return 0===y.length?null:["number","string"].includes(typeof y[0])?y:y.map(D=>q(D));if("value"in y&&["number","string","boolean"].includes(typeof y.value))return y.value;
if(!("type"in y))return y;switch(y.type){case "Scalar":return y.value;case "AlgorithmicColorRamp":return k(y);case "MultiPartColorRamp":return{type:"multipart",colorRamps:y.ArrayOfColorRamp.map(k)};case "ArgumentArray":return y.elements?.length&&"RasterStatistics"!==y.elements[0].type?"RasterFunctionVariable"===y.elements[0].type?y.elements.map(D=>null!=D.value?q(D.value):D.name.toLowerCase().includes("raster")?"$$":null):y:y.elements;default:return y}}function k(y){const D=y.algorithm??"esriHSVAlgorithm";
let {FromColor:I,ToColor:V}=y;if(!Array.isArray(I)){const {r:C,g:M,b:da}=l.toRGB({h:I.Hue,s:I.Saturation,v:I.Value});I=[C,M,da,I.AlphaValue]}if(!Array.isArray(V)){const {r:C,g:M,b:da}=l.toRGB({h:V.Hue,s:V.Saturation,v:V.Value});V=[C,M,da,V.AlphaValue]}return{type:"algorithmic",algorithm:D,fromColor:I,toColor:V}}function g(y,D){if(y&&D){var {function:I,arguments:V}=y;if(I&&V){D.rasterFunction=I.type.replace("Function","");D.outputPixelType=I.pixelType;y={};D.rasterFunctionArguments=y;for(const C in V){const M=
V[C];"object"===typeof M&&("function"in M&&M.function&&M.arguments?(D.rasterFunctionArguments[C]={},g(M,D.rasterFunctionArguments[C])):"value"in M&&(y[C]=q(M.value)))}y.DEM&&!y.Raster&&(y.Raster=y.DEM,delete y.DEM);switch(D.rasterFunction){case "Stretch":t(y);break;case "Colormap":"randomcolorramp"===y.ColorRamp?.type?.toLowerCase()&&(delete y.ColorRamp,y.ColormapName="Random");0===y.ColorSchemeType&&delete y.ColorRamp;break;case "Convolution":null!=y.ConvolutionType&&(y.Type=y.ConvolutionType,delete y.ConvolutionType);
break;case "Mask":z(y)}}}}function t(y){y.Statistics?.length&&"object"===typeof y.Statistics&&(y.Statistics=y.Statistics.map(D=>[D.min,D.max,D.mean,D.standardDeviation]));null!=y.NumberOfStandardDeviation&&(y.NumberOfStandardDeviations=y.NumberOfStandardDeviation,delete y.NumberOfStandardDeviation)}function z(y){y.NoDataValues?.length&&"string"===typeof y.NoDataValues[0]&&(y.NoDataValues=y.NoDataValues.filter(D=>""!==D).map(D=>Number(D)))}const A=new Map;A.set("Aspect",{desc:"Aspect Function",ctor:p,
rasterArgumentNames:["raster"]});A.set("BandArithmetic",{desc:"Band Arithmetic Function",ctor:G,rasterArgumentNames:["raster"]});A.set("Colormap",{desc:"Colormap Function",ctor:ca,rasterArgumentNames:["raster"]});A.set("CompositeBand",{desc:"CompositeBand Function",ctor:U,rasterArgumentNames:["rasters"]});A.set("Convolution",{desc:"Convolution Function",ctor:N,rasterArgumentNames:["raster"]});A.set("ExtractBand",{desc:"ExtractBand Function",ctor:L,rasterArgumentNames:["raster"]});A.set("Local",{desc:"Local Function",
ctor:F,rasterArgumentNames:["rasters"]});A.set("Mask",{desc:"Mask Function",ctor:u,rasterArgumentNames:["raster"]});A.set("NDVI",{desc:"NDVI Function",ctor:B,rasterArgumentNames:["raster"]});A.set("Remap",{desc:"Remap Function",ctor:h,rasterArgumentNames:["raster"]});A.set("Slope",{desc:"Slope Function",ctor:e,rasterArgumentNames:["raster"]});A.set("StatisticsHistogram",{desc:"Statistics Histogram Function",ctor:f,rasterArgumentNames:["raster"]});A.set("Stretch",{desc:"Stretch Function",ctor:c,rasterArgumentNames:["raster"]});
Q.create=function(y,D){D=D??{};y=E.clone(y);if("function"in y&&"arguments"in y&&y.arguments){D&&r(y,D);const I={};g(y,I);y=I}if("rasterFunction"in y)return y=b(y),d(y,D);throw new J("raster-function-helper","unsupported raster function json.");};Q.getPrimaryRasterUrls=n;Q.getRasterValues=w;Q.getSupportedFunctions=function(){const y=new Set;A.forEach((D,I)=>y.add(I));return y};Q.register=function(y,D,I=["raster"],V=""){A.set(y,{desc:V,ctor:D,rasterArgumentNames:I})};Object.defineProperty(Q,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/rasterFunctions/AspectFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./AspectFunctionArguments ./BaseRasterFunction ./surfaceUtils".split(" "),function(Q,l,J,E,p,G,ca,U,N,L){p=function(F){function u(){var h=F.apply(this,arguments)||
this;h.functionName="Aspect";h.functionArguments=null;h.rasterArgumentNames=["raster"];h.isGCS=!1;return h}Q._inheritsLoose(u,F);var B=u.prototype;B._bindSourceRasters=function(){var h=this.sourceRasterInfos[0];this.isGCS=h.spatialReference?.isGeographic??!1;this.outputPixelType=this._getOutputPixelType("f32");h=h.clone();h.pixelType=this.outputPixelType;h.statistics=[{min:0,max:360,avg:180,stddev:30}];h.histograms=null;h.colormap=null;h.attributeTable=null;h.bandCount=1;this.rasterInfo=h;return{success:!0,
supportsGPU:!0}};B._processPixels=function(h){const e=h.pixelBlocks?.[0];if(J.isNone(e))return null;({extent:h}=h);return L.aspect(e,{resolution:h?{x:h.width/e.width,y:h.height/e.height}:{x:1,y:1}})};return u}(N);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:U,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,"rasterArgumentNames",void 0);
l.__decorate([E.property({json:{write:!0}})],p.prototype,"isGCS",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.AspectFunction")],p)})},"esri/layers/support/rasterFunctions/AspectFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U,N){var L;J=L=function(F){function u(){return F.apply(this,arguments)||this}Q._inheritsLoose(u,F);u.prototype.clone=function(){return new L({raster:this.raster})};return u}(N);return J=L=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],J)})},"esri/layers/support/rasterFunctions/BaseFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(Q,l,J,E,p,G,ca){J=function(U){function N(){var L=U.apply(this,arguments)||this;L.raster=void 0;return L}Q._inheritsLoose(N,U);return N}(J.JSONSupport);l.__decorate([E.property({json:{write:!0}})],J.prototype,"raster",void 0);return J=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],J)})},"esri/layers/support/rasterFunctions/BaseRasterFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){J=function(F){function u(){var h=F.apply(this,arguments)||this;h.functionArguments=null;h.readingBufferSize=0;h.id=-1;h.isNoopProcess=!1;h.rawInputBandIds=[];h.isInputBandIdsSwizzled=!1;h.swizzledBandSelection=[];h.isBranch=!1;h._bindingResult=null;return h}Q._inheritsLoose(u,F);var B=u.prototype;B.bind=function(h,e=!1,f=-1){this.id=f+1;f=this._getRasterValues();let c=!0;for(let w=0;w<f.length;w++){var n=f[w];if(E.isSome(n)&&this._isRasterFunctionValue(n)){n=n.bind(h,
e,this.id+w);if(!n.success)return this._bindingResult=n;c=c&&n.supportsGPU}}if(!this.rasterInfo||e)return this.sourceRasterInfos=this._getSourceRasterInfos(h),this._bindingResult=this._bindSourceRasters(),this._bindingResult.supportsGPU=c&&this._bindingResult.supportsGPU,this.processInputBandIds(),this._bindingResult;this._bindingResult={success:!0,supportsGPU:!0};this.processInputBandIds();return this._bindingResult};B.process=function(h){var e=this._getRasterValues();e=0===e.length?h.pixelBlocks??
h.primaryPixelBlocks:e.map(f=>this._readRasterValue(f,h));return this._processPixels({...h,pixelBlocks:e})};B.processInputBandIds=function(){var h=this._getRasterValues().filter(this._isRasterFunctionValue);if(1<h.length)return this.rawInputBandIds=h.map(f=>f.processInputBandIds()[0]),this.isInputBandIdsSwizzled=this.rawInputBandIds.some((f,c)=>f!==c),h=h.filter(f=>"ExtractBand"===f.functionName),h.length&&h.forEach((f,c)=>{f.isInputBandIdsSwizzled=!0;f.swizzledBandSelection=[c,c,c]}),this.rawInputBandIds;
var e=h[0];if(e){if(h=e.processInputBandIds(),e.isInputBandIdsSwizzled)return this.rawInputBandIds=h}else{h=[];({bandCount:e}=this.sourceRasterInfos[0]);for(let f=0;f<e;f++)h.push(f)}h=this._getInputBandIds(h);this.isInputBandIdsSwizzled=h.some((f,c)=>f!==c);return this.rawInputBandIds=h};B.getPrimaryRasters=function(){const h=[],e=[];this._getPrimaryRasters(this,h,e);return{rasters:h,rasterIds:e}};B.getWebGLProcessorDefinition=function(){const h=this._getWebGLParameters(),{raster:e,rasters:f}=this.functionArguments;
f&&Array.isArray(f)&&f.length?(h.rasters=f.map(c=>this._isRasterFunctionValue(c)?c.getWebGLProcessorDefinition():"number"===typeof c?{name:"Constant",parameters:{value:c},pixelType:"f32",id:-1,isNoopProcess:!1}:{name:"Identity",parameters:{value:c},pixelType:"f32",id:-1,isNoopProcess:!1}),h.rasters.some(c=>null!=c)||(h.rasters=null)):this._isRasterFunctionValue(e)&&(h.raster=e.getWebGLProcessorDefinition());return{name:this.functionName,parameters:h,pixelType:this.outputPixelType,id:this.id,isNoopProcess:this.isNoopProcess}};
B.getFlatWebGLFunctionChain=function(){var h=this.getWebGLProcessorDefinition();if(!h)return null;const e=[h];({parameters:h}=h);for(h=h.rasters||h.raster&&[h.raster];h?.length;){e.unshift(...h);var f=[];for(var c=0;c<h.length;c++){var {parameters:n}=h[c];n=n.rasters||n.raster&&[n.raster];n?.length&&f.push(...n)}h=f}for(h=e.length-1;0<=h;h--)e[h].isNoopProcess&&e.splice(h,1);h=!1;for(f=0;f<e.length;f++)c=e[f],c.id=e.length-f-1,{rasters:c}=c.parameters,h=h||null!=c&&1<c.length;return{hasBranches:h,
functions:e}};B._getOutputPixelType=function(h){return"unknown"===this.outputPixelType?h:this.outputPixelType??h};B._getWebGLParameters=function(){return{}};B._getInputBandIds=function(h){return h};B._isOutputRoundingNeeded=function(){const {outputPixelType:h}=this;return(h?.startsWith("u")||h?.startsWith("s"))??!1};B._getRasterValues=function(){const {rasterArgumentNames:h}=this;return"rasters"===h[0]?this.functionArguments.rasters??[]:h.map(e=>this.functionArguments[e])};B._getSourceRasterInfos=
function(h){const e=this._getRasterValues(),{rasterInfos:f,rasterIds:c}=h;if(0===e.length)return f;const n=e.map(x=>{if(x&&"object"===typeof x&&"bind"in x&&x.rasterInfo)return x.rasterInfo;if("string"===typeof x&&c.includes(x))return f[c.indexOf(x)];if("number"!==typeof x)return f[0]}),w=n.find(x=>x)??f[0];n.forEach((x,b)=>{void 0===x&&(n[b]=w)});return n};B._getPrimaryRasterId=function(h){return h?.url};B._getPrimaryRasters=function(h,e=[],f=[]){for(let n=0;n<h.sourceRasters.length;n++){var c=h.sourceRasters[n];
if("number"!==typeof c)if("bind"in c)this._getPrimaryRasters(c,e,f);else{const w=this._getPrimaryRasterId(c);null==w||f.includes(w)||(this.mainPrimaryRasterId===w?(e.unshift(c),f.unshift(w)):(e.push(c),f.push(w)))}}};B._isRasterFunctionValue=function(h){return null!=h&&"object"===typeof h&&"getWebGLProcessorDefinition"in h};B._readRasterValue=function(h,e){var {primaryPixelBlocks:f}=e;if(E.isNone(h)||"$$"===h)return h=f[0],E.isNone(h)?null:h.clone();if("string"===typeof h)return h=e.primaryRasterIds.indexOf(h),
-1===h?null:f[h];if("number"===typeof h){f=f[0];if(E.isNone(f))return null;const {width:c,height:n,pixelType:w,mask:x}=f;f=x?new Uint8Array(x):null;e=new Float32Array(c*n);e.fill(h);h=Array(this.sourceRasterInfos[0].bandCount).fill(e);return new N({width:c,height:n,pixelType:w,pixels:h,mask:f})}return h.process(e)};Q._createClass(u,[{key:"supportsGPU",get:function(){return this._bindingResult.supportsGPU}}]);return u}(J.JSONSupport);l.__decorate([p.property({json:{write:!0}})],J.prototype,"functionName",
void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"functionArguments",void 0);l.__decorate([p.property()],J.prototype,"rasterArgumentNames",void 0);l.__decorate([p.property({json:{write:!0}}),G.cast(F=>F?.toLowerCase())],J.prototype,"outputPixelType",void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"mainPrimaryRasterId",void 0);l.__decorate([p.property()],J.prototype,"sourceRasters",void 0);l.__decorate([p.property({type:[L],json:{write:!0}})],J.prototype,"sourceRasterInfos",
void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"rasterInfo",void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"readingBufferSize",void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"id",void 0);l.__decorate([p.property()],J.prototype,"isNoopProcess",void 0);l.__decorate([p.property()],J.prototype,"supportsGPU",null);l.__decorate([p.property()],J.prototype,"rawInputBandIds",void 0);l.__decorate([p.property()],J.prototype,"isInputBandIdsSwizzled",void 0);
l.__decorate([p.property()],J.prototype,"swizzledBandSelection",void 0);l.__decorate([p.property()],J.prototype,"isBranch",void 0);l.__decorate([p.property()],J.prototype,"_bindingResult",void 0);return J=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.BaseRasterFunction")],J)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F){var u;J=u=function(B){function h(e){e=B.call(this,e)||this;e.attributeTable=null;e.bandCount=null;e.colormap=null;e.extent=null;e.format=void 0;e.height=null;e.width=null;e.histograms=null;e.keyProperties={};e.multidimensionalInfo=null;e.noDataValue=null;e.pixelSize=null;e.pixelType=null;e.isPseudoSpatialReference=!1;e.spatialReference=null;e.statistics=null;e.storageInfo=null;e.transform=null;return e}Q._inheritsLoose(h,B);h.prototype.clone=function(){return new u({attributeTable:E.clone(this.attributeTable),
bandCount:this.bandCount,colormap:E.clone(this.colormap),extent:E.clone(this.extent),nativePixelSize:E.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:E.clone(this.histograms),keyProperties:E.clone(this.keyProperties),multidimensionalInfo:E.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:E.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:E.clone(this.spatialReference),
statistics:E.clone(this.statistics),storageInfo:E.clone(this.storageInfo),transform:E.clone(this.transform)})};Q._createClass(h,[{key:"dataType",get:function(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===e?"standard-time":e}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){if(p.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;
const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}}]);return h}(J.JSONSupport);l.__decorate([G.property({json:{write:!0}})],J.prototype,"attributeTable",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"bandCount",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"colormap",void 0);l.__decorate([G.property({type:String,readOnly:!0})],J.prototype,"dataType",
null);l.__decorate([G.property({type:N,json:{write:!0}})],J.prototype,"extent",void 0);l.__decorate([G.property({type:N,json:{write:!0}})],J.prototype,"nativeExtent",null);l.__decorate([G.property({json:{write:!0}})],J.prototype,"nativePixelSize",null);l.__decorate([G.property({json:{write:!0}})],J.prototype,"format",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"height",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"width",void 0);l.__decorate([G.property({json:{write:!0}})],
J.prototype,"hasMultidimensionalTranspose",null);l.__decorate([G.property({json:{write:!0}})],J.prototype,"histograms",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"keyProperties",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"multidimensionalInfo",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"noDataValue",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"pixelSize",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,
"pixelType",void 0);l.__decorate([G.property()],J.prototype,"isPseudoSpatialReference",void 0);l.__decorate([G.property({type:L,json:{write:!0}})],J.prototype,"spatialReference",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"statistics",void 0);l.__decorate([G.property({type:F,json:{write:!0}})],J.prototype,"storageInfo",void 0);l.__decorate([G.property({json:{write:!0}})],J.prototype,"transform",void 0);return J=u=l.__decorate([U.subclass("esri.layers.support.RasterInfo")],J)})},
"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(Q,l,J,E,p,G,ca,U){var N;J=N=function(L){function F(){var u=L.apply(this,arguments)||this;u.blockWidth=void 0;u.blockHeight=void 0;u.compression=null;u.origin=null;u.firstPyramidLevel=
null;u.maximumPyramidLevel=null;u.pyramidScalingFactor=2;u.pyramidBlockWidth=null;u.pyramidBlockHeight=null;u.isVirtualTileInfo=!1;u.tileInfo=null;u.transposeInfo=null;u.blockBoundary=null;return u}Q._inheritsLoose(F,L);F.prototype.clone=function(){return new N({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:E.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:E.clone(this.pyramidResolutions),
pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:E.clone(this.tileInfo),transposeInfo:E.clone(this.transposeInfo),blockBoundary:E.clone(this.blockBoundary)})};return F}(J.JSONSupport);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"blockWidth",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"blockHeight",void 0);l.__decorate([p.property({type:String,
json:{write:!0}})],J.prototype,"compression",void 0);l.__decorate([p.property({type:U,json:{write:!0}})],J.prototype,"origin",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"firstPyramidLevel",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"maximumPyramidLevel",void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"pyramidResolutions",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"pyramidScalingFactor",
void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"pyramidBlockWidth",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],J.prototype,"pyramidBlockHeight",void 0);l.__decorate([p.property({type:Boolean,json:{write:!0}})],J.prototype,"isVirtualTileInfo",void 0);l.__decorate([p.property({json:{write:!0}})],J.prototype,"tileInfo",void 0);l.__decorate([p.property()],J.prototype,"transposeInfo",void 0);l.__decorate([p.property()],J.prototype,"blockBoundary",void 0);
return J=N=l.__decorate([ca.subclass("esri.layers.support.RasterStorageInfo")],J)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],function(Q,l,J,E){function p(G){let {altitude:ca,azimuth:U}=G;const {hillshadeType:N,pixelSizePower:L=1,pixelSizeFactor:F=1,scalingType:u,isGCS:B,resolution:h}=G;var e="multi-directional"===N?2*G.zFactor:G.zFactor;const {x:f,y:c}=h;G=e/(8*f);var n=e/(8*c);B&&.001<e&&(G/=111E3,n/=111E3);
"adjusted"===u&&(B?(G=111E3*f,n=111E3*c,G=(e+G**L*F)/(8*G),n=(e+n**L*F)/(8*n)):(G=(e+f**L*F)/(8*f),n=(e+c**L*F)/(8*c)));var w=(90-ca)*Math.PI/180;e=Math.cos(w);let x=(360-U+90)*Math.PI/180,b=Math.sin(w)*Math.cos(x);w=Math.sin(w)*Math.sin(x);const d=[315,270,225,360,180,0],r=[60,60,60,60,60,90];var q=new Float32Array([3,5,3,2,1,4]);const k=q.reduce((y,D)=>y+D);q=q.map(y=>y/k);const g="multi-directional"===N?d.length:1,t=new Float32Array(6),z=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===
N)for(let y=0;y<g;y++)ca=r[y],U=d[y],w=(90-ca)*Math.PI/180,e=Math.cos(w),x=(360-U+90)*Math.PI/180,b=Math.sin(w)*Math.cos(x),w=Math.sin(w)*Math.sin(x),t[y]=e,z[y]=b,A[y]=w;else t.fill(e),z.fill(b),A.fill(w);return{resolution:h,factor:[G,n],sinZcosA:b,sinZsinA:w,cosZ:e,sinZcosAs:z,sinZsinAs:A,cosZs:t,weights:q,hillshadeType:["traditional","multi-directional"].indexOf(N)}}Q.aspect=function(G,ca={}){if(!E.isValidPixelBlock(G))return G;const {width:U,height:N,mask:L}=G;var F=G.pixels[0];const u=new Uint8Array(U*
N);l.isSome(L)&&u.set(L);const B=new Float32Array(U*N);var {resolution:h}=ca;ca=h?1/h.x:1;h=h?1/h.y:1;let e;let f,c,n,w;const x=l.isSome(L);for(let q=1;q<N-1;q++){const k=q*U;for(let g=1;g<U-1;g++)if(L&&!L[k+g])B[k+g]=0;else{var b=0;if(x&&(b=L[k-U+g-1]+L[k-U+g]+L[k-U+g+1]+L[k+g-1]+L[k+g+1]+L[k+U+g-1]+L[k+U+g]+L[k+U+g+1],7>b)){B[k+g]=0;u[k+g]=0;continue}if(L&&7===b){b=L[k-U+g-1]?F[k-U+g-1]:F[k+g];var d=L[k-U+g]?F[k-U+g]:F[k+g];e=L[k-U+g+1]?F[k-U+g+1]:F[k+g];var r=L[k+g-1]?F[k+g-1]:F[k+g];f=L[k+g+1]?
F[k+g+1]:F[k+g];c=L[k+U+g-1]?F[k+U+g-1]:F[k+g];n=L[k+U+g]?F[k+U+g]:F[k+g];w=L[k+U+g+1]?F[k+U+g+1]:F[k+g]}else b=F[k-U+g-1],d=F[k-U+g],e=F[k-U+g+1],r=F[k+g-1],f=F[k+g+1],c=F[k+U+g-1],n=F[k+U+g],w=F[k+U+g+1];r=(e+f+f+w-(b+r+r+c))*ca;b=(c+n+n+w-(b+d+d+e))*h;d=-1;if(0!==r||0!==b)d=90-57.29578*Math.atan2(b,-r),0>d&&(d+=360),360===d?d=0:360<d&&(d%=360);B[k+g]=d}}for(F=0;F<N;F++)B[F*U]=B[F*U+1],B[(F+1)*U-1]=B[(F+1)*U-2];for(F=1;F<U-1;F++)B[F]=B[F+U],B[F+(N-1)*U]=B[F+(N-2)*U];return new J({width:U,height:N,
pixels:[B],mask:L?u:null,pixelType:"f32",validPixelCount:G.validPixelCount,statistics:[{minValue:0,maxValue:360}]})};Q.calculateHillshadeParams=p;Q.hillshade=function(G,ca){if(!E.isValidPixelBlock(G))return G;const {width:U,height:N,mask:L}=G,F=new Uint8Array(U*N);var u=1;if(l.isSome(L)){for(var B=0;B<L.length;B++)if(L[B]){u=L[B];break}F.set(L)}const {factor:h,sinZcosA:e,sinZsinA:f,cosZ:c,sinZcosAs:n,sinZsinAs:w,cosZs:x,weights:b}=p(ca),[d,r]=h;({hillshadeType:B}=ca);const q=G.pixels[0];ca=new Uint8Array(U*
N);let k;const g=l.isSome(L);for(let C=1;C<N-1;C++){const M=C*U;for(let da=1;da<U-1;da++)if(L&&!L[M+da])ca[M+da]=0;else{var t=8;if(g&&(t=(L[M-U+da-1]+L[M-U+da]+L[M-U+da+1]+L[M+da-1]+L[M+da+1]+L[M+U+da-1]+L[M+U+da]+L[M+U+da+1])/u,7>t)){ca[M+da]=0;F[M+da]=0;continue}if(L&&7===t){var z=L[M-U+da-1]?q[M-U+da-1]:q[M+da];var A=L[M-U+da]?q[M-U+da]:q[M+da];var y=L[M-U+da+1]?q[M-U+da+1]:q[M+da];t=L[M+da-1]?q[M+da-1]:q[M+da];k=L[M+da+1]?q[M+da+1]:q[M+da];var D=L[M+U+da-1]?q[M+U+da-1]:q[M+da];var I=L[M+U+da]?
q[M+U+da]:q[M+da];var V=L[M+U+da+1]?q[M+U+da+1]:q[M+da]}else z=q[M-U+da-1],A=q[M-U+da],y=q[M-U+da+1],t=q[M+da-1],k=q[M+da+1],D=q[M+U+da-1],I=q[M+U+da],V=q[M+U+da+1];t=(y+k+k+V-(z+t+t+D))*d;z=(D+I+I+V-(z+A+A+y))*r;A=Math.sqrt(1+t*t+z*z);y=0;if("traditional"===B)t=255*(c+f*z-e*t)/A,0>t&&(t=0),y=t;else for(D=w.length,I=0;I<D;I++)V=255*(x[I]+w[I]*z-n[I]*t)/A,0>V&&(V=0),y+=V*b[I];ca[M+da]=y&255}}for(u=0;u<N;u++)ca[u*U]=ca[u*U+1],ca[(u+1)*U-1]=ca[(u+1)*U-2];for(u=1;u<U-1;u++)ca[u]=ca[u+U],ca[u+(N-1)*U]=
ca[u+(N-2)*U];return new J({width:U,height:N,pixels:[ca],mask:L?F:null,pixelType:"u8",validPixelCount:G.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};Q.slope=function(G,ca){if(!E.isValidPixelBlock(G))return G;var U=ca.zFactor,N=ca.pixelSizePower??1,L=ca.pixelSizeFactor??1,F=ca.slopeType,u=ca.isGCS;const {width:B,height:h,mask:e}=G,f=G.pixels[0],c=new Uint8Array(B*h);let n=1;if(l.isSome(e)){for(var w=0;w<e.length;w++)if(e[w]){n=e[w];break}c.set(e)}w=new Float32Array(B*h);const {x,y:b}=
ca.resolution;ca=U/(8*x);let d=U/(8*b);u&&1E-4>Math.abs(U-1)&&(ca/=111E3,d/=111E3);"adjusted"===F&&(ca=(U+x**N*L)/(8*x),d=(U+b**N*L)/(8*b));let r,q;let k,g,t,z;U=l.isSome(e);for(N=1;N<h-1;N++)for(L=N*B,u=1;u<B-1;u++)if(e&&!e[L+u])w[L+u]=0;else{var A=0;if(U&&(A=(e[L-B+u-1]+e[L-B+u]+e[L-B+u+1]+e[L+u-1]+e[L+u+1]+e[L+B+u-1]+e[L+B+u]+e[L+B+u+1])/n,7>A)){w[L+u]=0;c[L+u]=0;continue}if(e&&7===A){A=e[L-B+u-1]?f[L-B+u-1]:f[L+u];r=e[L-B+u]?f[L-B+u]:f[L+u];q=e[L-B+u+1]?f[L-B+u+1]:f[L+u];var y=e[L+u-1]?f[L+u-
1]:f[L+u];k=e[L+u+1]?f[L+u+1]:f[L+u];g=e[L+B+u-1]?f[L+B+u-1]:f[L+u];t=e[L+B+u]?f[L+B+u]:f[L+u];z=e[L+B+u+1]?f[L+B+u+1]:f[L+u]}else A=f[L-B+u-1],r=f[L-B+u],q=f[L-B+u+1],y=f[L+u-1],k=f[L+u+1],g=f[L+B+u-1],t=f[L+B+u],z=f[L+B+u+1];y=(q+k+k+z-(A+y+y+g))*ca;A=(g+t+t+z-(A+r+r+q))*d;A=Math.sqrt(y*y+A*A);w[L+u]="percent-rise"===F?100*A:57.2957795*Math.atan(A)}for(F=0;F<h;F++)w[F*B]=w[F*B+1],w[(F+1)*B-1]=w[(F+1)*B-2];for(F=1;F<B-1;F++)w[F]=w[F+B],w[F+(h-1)*B]=w[F+(h-2)*B];G=new J({width:B,height:h,pixels:[w],
mask:e?c:null,pixelType:"f32",validPixelCount:G.validPixelCount});G.updateStatistics();return G};Q.tintHillshade=function(G,ca,U,N){if(E.isValidPixelBlock(G)&&E.isValidPixelBlock(ca)){var {min:L,max:F}=N;N=G.pixels[0];var {pixels:u,mask:B}=ca;ca=u[0];var h=255.00001/(F-L),e=new Uint8ClampedArray(ca.length),f=new Uint8ClampedArray(ca.length),c=new Uint8ClampedArray(ca.length),n=U.length-1;for(let b=0;b<ca.length;b++){if(B&&0===B[b])continue;var w=Math.floor((ca[b]-L)*h);const [d,r]=U[0>w?0:w>n?n:w];
var x=N[b];w=x*r;const q=w*(1-Math.abs(d%2-1));x-=w;switch(Math.floor(d)){case 0:e[b]=w+x;f[b]=q+x;c[b]=x;break;case 1:e[b]=q+x;f[b]=w+x;c[b]=x;break;case 2:e[b]=x;f[b]=w+x;c[b]=q+x;break;case 3:e[b]=x;f[b]=q+x;c[b]=w+x;break;case 4:e[b]=q+x;f[b]=x;c[b]=w+x;break;case 5:case 6:e[b]=w+x,f[b]=x,c[b]=q+x}}G.pixels=[e,f,c];G.updateStatistics()}};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/BandArithmeticFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BandArithmeticFunctionArguments ./bandIndexUtils ./BaseRasterFunction".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){const F=new Set(["vari","mtvi2","rtvi-core","evi"]);p=function(u){function B(){var e=u.apply(this,arguments)||this;e.functionName="BandArithmetic";e.functionArguments=null;e.rasterArgumentNames=["raster"];return e}Q._inheritsLoose(B,u);var h=B.prototype;h._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const e=this.sourceRasterInfos[0],f=e.clone();f.pixelType=this.outputPixelType;f.statistics=null;f.histograms=null;f.bandCount="sultan"===
this.functionArguments.method?e.bandCount:1;this.rasterInfo=f;return{success:!0,supportsGPU:!["custom","gvitm","sultan"].includes(this.functionArguments.method)}};h._processPixels=function(e){e=e.pixelBlocks?.[0];if(J.isNone(e))return e;const {method:f,bandIndexes:c}=this.functionArguments,n=c.split(" ").map(w=>parseFloat(w));return N.calculateBandIndex(e,{method:f,bandIndexes:n,equation:c})};h._getWebGLParameters=function(){const e=this.functionArguments.bandIndexes.split(" ").map(w=>parseFloat(w)-
1);2===e.length&&e.push(0);var f=this.isInputBandIdsSwizzled?[0,1,2]:e;const c=new Float32Array(3);({method:n}=this.functionArguments);switch(n){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":f=N.getBandMatrix3([f[0],f[1],0]);var n="ndxi";break;case "ndwi":f=N.getBandMatrix3([f[1],f[0],0]);n="ndxi";break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":f=N.getBandMatrix3([f[0],f[1],0]);n="sr";break;case "ci-g":case "ci-re":f=
N.getBandMatrix3([f[0],f[1],0]);n="ci";break;case "savi":f=N.getBandMatrix3([f[0],f[1],0]);n="savi";c[0]=e[2]+1;break;case "tsavi":f=N.getBandMatrix3([f[0],f[1],0]);n="tsavi";c[0]=e[2]+1;c[1]=e[3]+1;c[2]=e[4]+1;break;case "msavi":f=N.getBandMatrix3([f[0],f[1],0]);n="msavi";break;case "gemi":f=N.getBandMatrix3([f[0],f[1],0]);n="gemi";break;case "pvi":f=N.getBandMatrix3([f[0],f[1],0]);n="tsavi";c[0]=e[2]+1;c[1]=e[3]+1;break;case "vari":f=N.getBandMatrix3([f[0],f[1],f[2]]);n="vari";break;case "mtvi2":f=
N.getBandMatrix3([f[0],f[1],f[2]]);n="mtvi2";break;case "rtvi-core":f=N.getBandMatrix3([f[0],f[1],f[2]]);n="rtvicore";break;case "evi":f=N.getBandMatrix3([f[0],f[1],f[2]]);n="evi";break;case "wndwi":f=N.getBandMatrix3([f[0],f[1],0]);n="wndwi";c[0]=e[3]?e[3]+1:.5;break;case "bai":f=N.getBandMatrix3([f[1],f[0],0]);n="bai";break;default:f=N.getBandMatrix3([0,1,2]),n="custom"}return{bandIndexMat3:f,indexType:n,adjustments:c}};h._getInputBandIds=function(e){if("custom"===this.functionArguments.method)return e;
var f=this.functionArguments.bandIndexes.split(" ").map(w=>parseFloat(w)-1);const c=e.length;f=f.map(w=>w>=c?c-1:w);const n=F.has(this.functionArguments.method)?3:2;f=f.slice(0,n).map(w=>e[w]);2===f.length&&f.push(0);return f};return B}(L);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:U,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,
"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunction")],p)})},"esri/layers/support/rasterFunctions/BandArithmeticFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U,N){var L;p=L=function(F){function u(){var B=F.apply(this,arguments)||this;B.method="custom";return B}Q._inheritsLoose(u,F);u.prototype.clone=function(){return new L({method:this.method,bandIndexes:this.bandIndexes,raster:J.clone(this.raster)})};return u}(N);l.__decorate([E.property({json:{type:String,write:!0}})],p.prototype,"bandIndexes",void 0);l.__decorate([G.enumeration(U.bandIndexMethodMap)],p.prototype,"method",void 0);return p=L=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunctionArguments")],
p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(Q,l,J){Q.enumeration=function(E,p={}){E=E instanceof l.JSONMap?E:new l.JSONMap(E,p);E={type:p?.ignoreUnknown??!0?E.apiValues:String,json:{type:E.jsonValues,read:p?.readOnly?!1:{reader:E.read},write:{writer:E.write}}};void 0!==p?.readOnly&&(E.readOnly=!!p.readOnly);void 0!==p?.default&&(E.json.default=p.default);void 0!==p?.name&&(E.json.name=p.name);void 0!==p?.nonNullable&&
(E.nonNullable=p.nonNullable);return J.property(E)};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/bandIndexUtils":function(){define("exports ../../../core/jsonMap ../../../core/maybe ../PixelBlock ./customBandIndexUtils ./pixelUtils".split(" "),function(Q,l,J,E,p,G){function ca(r,q,k){const g=k.length,t=new Float32Array(g);for(let z=0;z<g;z++)if(null==r||r[z]){const A=q[z],y=k[z],D=A+y;D&&(t[z]=(A-y)/D)}return[t]}function U(r,q,k){const g=k.length,
t=new Float32Array(g);for(let z=0;z<g;z++)if(null==r||r[z]){const A=q[z],y=k[z];y&&(t[z]=A/y)}return[t]}function N(r,q,k){const g=q.length,t=new Float32Array(g);for(let z=0;z<g;z++)if(null==r||r[z]){const A=q[z],y=k[z];y&&(t[z]=A/y-1)}return[t]}function L(r,q,k,g){const t=k.length,z=new Float32Array(t);for(let A=0;A<t;A++)if(null==r||r[A]){const y=k[A],D=q[A],I=D+y+g;I&&(z[A]=(D-y)/I*(1+g))}return[z]}function F(r,q,k,g,t,z){const A=k.length,y=new Float32Array(A);z=-t*g+z*(1+g*g);for(let D=0;D<A;D++)if(null==
r||r[D]){const I=k[D],V=q[D],C=t*V+I+z;C&&(y[D]=g*(V-g*I-t)/C)}return[y]}function u(r,q,k){const g=k.length,t=new Float32Array(g);for(let z=0;z<g;z++)if(null==r||r[z]){const A=q[z];t[z]=.5*(2*(A+1)-Math.sqrt((2*A+1)**2-8*(A-k[z])))}return[t]}function B(r,q,k){const g=k.length,t=new Float32Array(g);for(let A=0;A<g;A++)if(null==r||r[A]){const y=k[A];var z=q[A];1!==y&&(z=(2*(z*z-y*y)+1.5*z+.5*y)/(z+y+.5),t[A]=z*(1-.25*z)-(y-.125)/(1-y))}return[t]}function h(r,q,k,g,t){const z=k.length,A=new Float32Array(z),
y=Math.sqrt(1+g*g);for(let D=0;D<z;D++)if(null==r||r[D])A[D]=(q[D]-g*k[D]-t)/y;return[A]}function e(r,q){const [k,g,t,z,A,y]=q;q=k.length;const D=new Float32Array(q);for(let I=0;I<q;I++)if(null==r||r[I])D[I]=-.2848*k[I]-.2435*g[I]-.5436*t[I]+.7243*z[I]+.084*A[I]-1.18*y[I];return[D]}function f(r,q){const [k,,g,t,z,A]=q;q=k.length;const y=new Float32Array(q),D=new Float32Array(q),I=new Float32Array(q);for(let V=0;V<q;V++)if(null==r||r[V])y[V]=A[V]?z[V]/A[V]*100:0,D[V]=k[V]?z[V]/k[V]*100:0,I[V]=t[V]?
g[V]/t[V]*(z[V]/t[V])*100:0;return[y,D,I]}function c(r,q){const [k,g,t]=q;q=k.length;const z=new Float32Array(q);for(let A=0;A<q;A++)if(null==r||r[A])for(A=0;A<q;A++){const y=k[A],D=g[A],I=D+y-t[A];I&&(z[A]=(D-y)/I)}return[z]}function n(r,q){const [k,g,t]=q;q=k.length;const z=new Float32Array(q);for(let A=0;A<q;A++)if(null==r||r[A])for(A=0;A<q;A++){const y=k[A],D=g[A],I=t[A];z[A]=1.5*(1.2*(y-I)-2.5*(D-I))*Math.sqrt((2*y+1)**2-6*y-5*Math.sqrt(D)-.5)}return[z]}function w(r,q){const [k,g,t]=q;q=k.length;
const z=new Float32Array(q);for(let A=0;A<q;A++)if(null==r||r[A])for(A=0;A<q;A++){const y=k[A];z[A]=100*(y-g[A])-10*(y-t[A])}return[z]}function x(r,q){const [k,g,t]=q;q=k.length;const z=new Float32Array(q);for(let A=0;A<q;A++)if(null==r||r[A])for(A=0;A<q;A++){const y=k[A],D=g[A],I=y+6*D-7.5*t[A]+1;I&&(z[A]=2.5*(y-D)/I)}return[z]}function b(r,q,k=.5){const [g,t,z]=q;q=t.length;const A=new Float32Array(q);for(let y=0;y<q;y++)if(null==r||r[y])for(y=0;y<q;y++){const D=g[y],I=t[y],V=z[y],C=D+k*I+(1-k)*
V;C&&(A[y]=(D-k*I-(1-k)*V)/C)}return[A]}function d(r,q,k){const g=k.length,t=new Float32Array(g);for(let z=0;z<g;z++)if(null==r||r[z])for(z=0;z<g;z++){const A=(.1-q[z])**2+(.06-k[z])**2;A&&(t[z]=1/A)}return[t]}l=new l.JSONMap({0:"custom",1:"ndvi",2:"savi",3:"tsavi",4:"msavi",5:"gemi",6:"pvi",7:"gvitm",8:"sultan",9:"vari",10:"gndvi",11:"sr",12:"ndvi-re",13:"sr-re",14:"mtvi2",15:"rtvi-core",16:"ci-re",17:"ci-g",18:"ndwi",19:"evi",20:"iron-oxide",21:"ferrous-minerals",22:"clay-minerals",23:"wndwi",24:"bai",
25:"nbr",26:"ndbi",27:"ndmi",28:"ndsi",29:"mndwi"},{useNumericKeys:!0});Q.bandIndexMethodMap=l;Q.calculateBandIndex=function(r,q){if(!G.isValidPixelBlock(r))return r;const {equation:k,method:g}=q;q=q.bandIndexes.map(y=>y-1);const {pixels:t,mask:z}=r;switch(g){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":q=ca(z,t[q[0]],t[q[1]]);break;case "ndwi":q=ca(z,t[q[1]],t[q[0]]);break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":q=
U(z,t[q[0]],t[q[1]]);break;case "ci-g":case "ci-re":q=N(z,t[q[0]],t[q[1]]);break;case "savi":q=L(z,t[q[0]],t[q[1]],q[2]+1);break;case "tsavi":q=F(z,t[q[0]],t[q[1]],q[2]+1,q[3]+1,q[4]+1);break;case "msavi":q=u(z,t[q[0]],t[q[1]]);break;case "gemi":q=B(z,t[q[0]],t[q[1]]);break;case "pvi":q=h(z,t[q[0]],t[q[1]],q[2]+1,q[3]+1);break;case "gvitm":q=e(z,[t[q[0]],t[q[1]],t[q[2]],t[q[3]],t[q[4]],t[q[5]]]);break;case "sultan":q=f(z,[t[q[0]],t[q[1]],t[q[2]],t[q[3]],t[q[4]],t[q[5]]]);break;case "vari":q=c(z,[t[q[0]],
t[q[1]],t[q[2]]]);break;case "mtvi2":q=n(z,[t[q[0]],t[q[1]],t[q[2]]]);break;case "rtvi-core":q=w(z,[t[q[0]],t[q[1]],t[q[2]]]);break;case "evi":q=x(z,[t[q[0]],t[q[1]],t[q[2]]]);break;case "wndwi":q=b(z,[t[q[0]],t[q[1]],t[q[2]]],q[3]?q[3]+1:.5);break;case "bai":q=d(z,t[q[0]],t[q[1]]);break;case "custom":q=p.calculateCustomBandIndex(z,t,k);break;default:return r}const A=J.isSome(z)?new Uint8Array(z.length):null;J.isSome(z)&&J.isSome(A)&&A.set(z);r=new E({width:r.width,height:r.height,pixelType:"f32",
pixels:q,mask:A});r.updateStatistics();return r};Q.calculateNDVI=function(r,q,k,g){const {mask:t,pixels:z,width:A,height:y}=r;r=z[k];q=z[q];k=q.length;const D=g?new Uint8Array(k):new Float32Array(k),I=g?100:1,V=g?100.5:0;for(let C=0;C<k;C++)if(null==t||t[C]){const M=r[C],da=q[C],qa=M+da;qa&&(D[C]=(M-da)/qa*I+V)}g=new E({width:A,height:y,mask:t,pixelType:g?"u8":"f32",pixels:[D]});g.updateStatistics();return g};Q.getBandMatrix3=function(r){const q=new Float32Array(9);q[3*r[0]]=1;q[3*r[1]+1]=1;q[3*r[2]+
2]=1;return q};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/customBandIndexUtils":function(){define(["exports","../../../core/has"],function(Q,l){const J=new Set("+-*/()".split(""));Q.calculateCustomBandIndex=function(E,p,G){G=G.replace(/ /g,"");G.startsWith("-")&&(G="0"+G);G.startsWith("+")&&(G=G.slice(1,G.length));G=G.split("");var ca=[],U=[],N="";for(let B=0;B<G.length;B++){const h=G[B];J.has(h)?(""!==N&&U.push(parseFloat(N)),ca.push(h),N=
""):"b"===h.toLowerCase()?(B++,N=h.concat(G[B]),U.push(p[parseInt(N[1],10)-1]),N=""):(N=N.concat(h),B===G.length-1&&U.push(parseFloat(N)))}let {ops:L,nums:F}={ops:ca,nums:U};if(0===L.length){E=1===F.length?F[0]:p[0];if(E instanceof Float32Array)return[E];var u=new Float32Array(p[0].length);"number"===typeof E?u.fill(E):u.set(E);return[u]}for(;0<L.length;){u=L;if(1===u.length)u={opIndex:0,numIndex:0};else{ca=G=0;for(p=0;p<u.length;p++)if("("===u[p])G=p;else if(")"===u[p]){ca=p;break}U=0===ca?u:u.slice(G+
1,ca);p=-1;for(N=0;N<U.length;N++)if("*"===U[N]||"/"===U[N]){p=N;break}if(!(-1<p))for(N=0;N<U.length;N++)if("+"===U[N]||"-"===U[N]){p=N;break}0<ca&&(p+=G+1);G=0;for(ca=0;ca<p;ca++)"("===u[ca]&&G++;u={opIndex:p,numIndex:p-G}}const {numIndex:B,opIndex:h}=u;ca=void 0;u=E;N=L[h];p=F[B];G=F[B+1];if("number"===typeof p&&"number"===typeof G)u=p+G;else{"number"===typeof p?(ca=G.length,U=p,p=new Float32Array(ca),p.fill(U)):(ca=p.length,G.constructor===Number&&(U=G,G=new Float32Array(ca),G.fill(U)));U=new Float32Array(ca);
switch(N){case "+":for(N=0;N<ca;N++)if(null==u||u[N])U[N]=p[N]+G[N];break;case "-":for(N=0;N<ca;N++)if(null==u||u[N])U[N]=p[N]-G[N];break;case "*":for(N=0;N<ca;N++)if(null==u||u[N])U[N]=p[N]*G[N];break;case "/":for(N=0;N<ca;N++)(null==u||u[N])&&G[N]&&(U[N]=p[N]/G[N]);break;case "(":case ")":throw Error("encountered error with custom band index equation");}u=U}if(1===L.length)break;else{p=L;p.splice(h,1);ca=G=0;do{ca=G=0;for(U=0;U<p.length;U++)if("("===p[U])G=U;else if(")"===p[U]){ca=U;break}ca===
G+1&&p.splice(G,2)}while(ca===G+1);L=p;F.splice(B,2,u)}}return[u]};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ColormapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ColormapFunctionArguments ./colormaps ../../../renderers/support/colorRampUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){E=function(F){function u(){var h=F.apply(this,arguments)||this;h.functionName="Colormap";h.functionArguments=null;h.rasterArgumentNames=["raster"];h.isNoopProcess=!0;return h}Q._inheritsLoose(u,F);var B=u.prototype;B._bindSourceRasters=function(){var h=this.sourceRasterInfos[0];if(1<h.bandCount)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let {colormap:e,colormapName:f,colorRamp:c,colorRampName:n}=this.functionArguments;
if(!e?.length)if(c)e=L.convertColorRampToColormap(c,{interpolateAlpha:!0});else if(n){const w=L.getColorRampJSON(n);w&&(e=L.convertColorRampToColormap(w))}else f&&(e=N.getColormapByName(f));if(!e?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");h=h.clone();h.pixelType=this.outputPixelType;h.colormap=e;h.bandCount=1;this.rasterInfo=h;return{success:!0,supportsGPU:!0}};B._processPixels=function(h){return h.pixelBlocks?.[0]};
return u}(ca);l.__decorate([J.property({json:{write:!0,name:"rasterFunction"}})],E.prototype,"functionName",void 0);l.__decorate([J.property({type:U,json:{write:!0,name:"rasterFunctionArguments"}})],E.prototype,"functionArguments",void 0);l.__decorate([J.property()],E.prototype,"rasterArgumentNames",void 0);l.__decorate([J.property()],E.prototype,"isNoopProcess",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"indexedColormap",void 0);return E=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],
E)})},"esri/layers/support/rasterFunctions/ColormapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ../../../renderers/support/colorRampUtils ../../../rest/support/colorRamps".split(" "),function(Q,l,J,E,p,G,
ca,U,N,L){var F;U=F=function(u){function B(){return u.apply(this,arguments)||this}Q._inheritsLoose(B,u);var h=B.prototype;h.castColormapName=function(e){if(!e)return null;e=e.toLowerCase();return N.rasterColormapNames.includes(e)?e:null};h.readColorRamp=function(e){return L.fromJSON(e)};h.readColorRampName=function(e,f){return e?(f=N.colorRampDict.jsonValues.find(c=>c.toLowerCase()===e.toLowerCase()))?N.colorRampDict.fromJSON(f):null:null};h.clone=function(){return new F({colormap:J.clone(this.colormap),
colormapName:this.colormapName,colorRamp:this.colorRamp?.clone(),colorRampName:this.colorRampName})};return B}(U);l.__decorate([E.property({type:[[Number]],json:{write:!0}})],U.prototype,"colormap",void 0);l.__decorate([E.property({type:String,json:{write:!0}})],U.prototype,"colormapName",void 0);l.__decorate([p.cast("colormapName")],U.prototype,"castColormapName",null);l.__decorate([E.property({types:L.types,json:{write:!0}})],U.prototype,"colorRamp",void 0);l.__decorate([G.reader("colorRamp")],
U.prototype,"readColorRamp",null);l.__decorate([E.property({type:N.colorRampDict.apiValues,json:{type:N.colorRampDict.jsonValues,write:N.colorRampDict.write}})],U.prototype,"colorRampName",void 0);l.__decorate([G.reader("colorRampName")],U.prototype,"readColorRampName",null);return U=F=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.ColormapFunctionArguments")],U)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils","../../core/jsonMap"],
function(Q,l,J,E){function p(c,n){if(!c||!n||c.length!==n.length)return!1;for(let w=0;w<c.length;w++)if(c[w]>n[w]+2||c[w]<n[w]-2)return!1;return!0}function G(c,n){if(c){n=n?n:h;var w=null;"algorithmic"===c.type?n.some(x=>{if(p(c.fromColor.toRgb(),x.fromColor)&&p(c.toColor.toRgb(),x.toColor))return w=x.id,!0}):"multipart"===c.type&&n.some(x=>{const b=c.colorRamps,d=x.colorRamps;if(b&&d&&b.length===d.length&&!d.some((r,q)=>{if(!p(b[q].fromColor.toRgb(),(new l(r.fromColor)).toRgb())||!p(b[q].toColor.toRgb(),
(new l(r.toColor)).toRgb()))return!0})){if(w)return!0;w=x.id}});return w}}function ca(c){return(c=G(c))?e[c]:null}function U(c){c=c||{};const n=c.numColors||256;return{...c,numColors:n,distanceOffset:c.distanceOffset||0,interpolateAlpha:!!c.interpolateAlpha,distanceInterval:c.distanceInterval||1/(n-1),isCustomInterval:null!=c.isCustomInterval?c.isCustomInterval:null!==c.distanceInterval&&c.distanceInterval!==1/(n-1),weights:c.weights}}function N(c,n){let {fromColor:w,toColor:x}=c;3===w.length&&(w=
w.concat([255]));3===x.length&&(x=x.concat([255]));c=c.algorithm||"esriCIELabAlgorithm";var b=U(n);const {numColors:d,distanceOffset:r,isCustomInterval:q,interpolateAlpha:k}=b;if(1===d&&0===r)return[w];if(2===d&&0===r&&!q)return[w,x];var g={r:w[0],g:w[1],b:w[2]};n={r:x[0],g:x[1],b:x[2]};if("esriCIELabAlgorithm"===c){c=J.toLAB(g);n=J.toLAB(n);const {numColors:y,distanceOffset:D,distanceInterval:I,isCustomInterval:V}=b;let {l:C,a:M,b:da}=c;c=(n.l-C)*I;g=(n.a-M)*I;b=(n.b-da)*I;var t=[];if(D){var z=D/
I;C+=z*c;M+=z*g;da+=z*b}for(z=0;z<y-1;z++)t.push({l:C,a:M,b:da}),C+=c,M+=g,da+=b;t.push(V?{l:C,a:M,b:da}:n);n=t}else if("esriHSVAlgorithm"===c){c=J.toHSV(g);n=J.toHSV(n);const {numColors:y,distanceOffset:D,distanceInterval:I,isCustomInterval:V}=b;t=0===c.s;z=0===n.s;g=c.h;b=n.h;t&&!z?g=b:z&&!t&&(n={...n,h:g},b=g);t=Math.abs(b-g);180>t?b=(b-g)*I:(t=360-t,b=g>b?t*I:-t*I);t=(n.s-c.s)*I;z=(n.v-c.v)*I;let {s:C,v:M}=c;c=g;D&&(g=D/I,c=(c+g*b+360)%360,C+=g*t,M+=g*z);g=[];for(var A=0;A<y-1;A++)g.push({h:c,
s:C,v:M}),c=(c+b+360)%360,C+=t,M+=z;g.push(V?{h:c,s:C,v:M}:n);n=g}else{g=J.toLCH(g);n=J.toLCH(n);const {numColors:y,distanceOffset:D,distanceInterval:I,isCustomInterval:V}=b;b=g.h;t=n.h;c=2*Math.PI;b<=t?(z=t-b,b=t-b-c,b=Math.abs(b)<Math.abs(z)?b:z):(z=t+c-b,b=t-b,b=Math.abs(b)<Math.abs(z)?b:z);b*=I;t=(n.l-g.l)*I;z=(n.c-g.c)*I;let {l:C,c:M,h:da}=g;D&&(g=D/I,C+=g*t,M+=g*z,da=(da+g*b+c)%c);g=[];for(A=0;A<y-1;A++)g.push({l:C,c:M,h:da}),C+=t,M+=z,da=(da+b+c)%c;g.push(V?{l:C,c:M,h:da}:n);n=g}c=[];g=w[3]??
255;b=((x[3]??255)-g)/(d-1);for(t=0;t<d;t++){const {r:y,g:D,b:I}=J.toRGB(n[t]);c.push([y,D,I,k?Math.round(g+b*t):255])}return c}function L(c,n){const {numColors:w,interpolateAlpha:x}=U(n);n=n?.weights;({colorRamps:c}=c);if(n){const t=n.reduce((z,A)=>z+A);n=n.map(z=>z/t)}else{n=[];for(var b=0;b<c.length;b++)n[b]=1/c.length}b=[];let d=0,r=0;const q=1/(w-1);let k=!1;for(let t=0;t<c.length;t++){var g=k?0:d*q-r;let z=t===c.length-1?w-1-d:(n[t]-g)/q;k=Math.ceil(z)===z;z=Math.ceil(z);0!==z&&(g/=n[t],g=N(c[t],
{numColors:z,interpolateAlpha:x,distanceOffset:g,distanceInterval:q/n[t]}),d+=g.length,b.push(...g),r+=n[t])}n=[...c[c.length-1].toColor];3===n.length&&n.push(255);b.push(n);return b}function F(c,n){c="toJSON"in c?c.toJSON():c;return"multipart"===c.type?L(c,n):N(c,n)}function u(c){if(c)return{Algorithm:c.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:B(c.fromColor),ToColor:B(c.toColor)}}function B(c){c=J.toHSV(c);return{type:"HsvColor",Hue:c.h,Saturation:c.s,Value:c.v,
AlphaValue:255}}const h=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",
fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,
85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",
type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",
type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,
255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,
102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},
{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},
{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",
fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,
53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",
type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},
{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",
colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],e={aspect_predefined:"Aspect",
blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",
conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",
partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",
purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",
redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",
yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"},f=new E.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right",
"Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue",
"Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","urple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright",
"Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright",
"Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});
Q.PREDEFINED_COLOR_RAMP_NAME_MAP=e;Q.PREDEFINED_JSON_COLOR_RAMPS=h;Q.colorRampDict=f;Q.convertColorRampToColormap=function(c,n){c=F(c,n);const w=n?.interpolateAlpha;c.forEach((x,b)=>{x.unshift(b);w||x.pop()});return c};Q.convertColorRampToColors=F;Q.getColorRampId=G;Q.getColorRampJSON=function(c){const n=f.toJSON(c),w=Object.entries(e).find(x=>x[1]===n)?.[0];return(c=h.find(x=>x.id===w))?c.colorRamps?{type:"multipart",colorRamps:c.colorRamps.map(x=>({type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:x.fromColor,toColor:x.toColor}))}:{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:c.fromColor,toColor:c.toColor}:null};Q.getColorRampName=ca;Q.getRFxArgColorRampValue=function(c){const n=ca(c);if(c){if("algorithmic"===c.type)return{...u(c),Name:n};if(c.colorRamps)return c=c.colorRamps.map(u),{type:"MultiPartColorRamp",NumColorRamps:c.length,ArrayOfColorRamp:c,Name:n}}};Q.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");Q.rgbaConvertTo32Bit=
function(c){c=c.reverse().map(n=>{n=n.toString(16);return 2>n.length?"0"+n:n});return 4294967295&Number.parseInt(c.join(""),16)};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(Q,l,J,E){J={key:"type",base:J,typeMap:{algorithmic:l,multipart:E}};Q.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?l.fromJSON(p):"multipart"===p.type?E.fromJSON(p):
null:null};Q.types=J;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(Q,l,J,E,p,G,ca,U,N){var L;N=L=function(F){function u(B){B=
F.call(this,B)||this;B.algorithm=null;B.fromColor=null;B.toColor=null;B.type="algorithmic";return B}Q._inheritsLoose(u,F);u.prototype.clone=function(){return new L({fromColor:E.clone(this.fromColor),toColor:E.clone(this.toColor),algorithm:this.algorithm})};return u}(N);l.__decorate([ca.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],N.prototype,"algorithm",void 0);l.__decorate([p.property({type:J,json:{type:[G.Integer],write:!0}})],N.prototype,"fromColor",
void 0);l.__decorate([p.property({type:J,json:{type:[G.Integer],write:!0}})],N.prototype,"toColor",void 0);l.__decorate([p.property({type:["algorithmic"]})],N.prototype,"type",void 0);return N=L=l.__decorate([U.subclass("esri.rest.support.AlgorithmicColorRamp")],N)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(Q,l,J,E,p,G,ca){J=function(U){function N(L){L=U.call(this,L)||this;L.type=null;return L}Q._inheritsLoose(N,U);return N}(J.JSONSupport);l.__decorate([E.property({readOnly:!0,json:{read:!1,write:!0}})],J.prototype,"type",void 0);return J=l.__decorate([ca.subclass("esri.rest.support.ColorRamp")],J)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(Q,l,J,E,p,G,ca,U){var N;p=N=function(L){function F(u){u=L.call(this,u)||this;u.colorRamps=null;u.type="multipart";return u}Q._inheritsLoose(F,L);F.prototype.clone=function(){return new N({colorRamps:J.clone(this.colorRamps)})};return F}(U);l.__decorate([E.property({type:[ca],json:{write:!0}})],p.prototype,"colorRamps",void 0);l.__decorate([E.property({type:["multipart"]})],p.prototype,"type",void 0);return p=N=l.__decorate([G.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/layers/support/rasterFunctions/colormaps":function(){define(["exports",
"../../../renderers/support/colorRampUtils"],function(Q,l){function J(U,N){const L=[],F=[];for(let u=0;u<U.length-1;u++)L.push({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:U[u].slice(1),toColor:U[u+1].slice(1)}),F.push(U[u+1][0]-U[u][0]);U=U[U.length-1][0];N=N??F;return l.convertColorRampToColors({type:"multipart",colorRamps:L},{numColors:U,weights:N})}function E(){const U=J([[0,255,255,255],[70,0,0,255],[80,205,193,173],[100,150,150,150],[110,120,100,51],[130,120,200,100],[140,28,144,
3],[160,6,55,0],[180,10,30,25],[201,6,27,7]]);for(let N=U.length;256>N;N++)U.push([6,27,7]);return U}function p(){const U=[];for(let N=0;256>N;N++){const L=[];for(let F=0;3>F;F++)L.push(Math.round(255*Math.random()));U.push(L)}return U}const G=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[112,75,3],[113,76,3],[114,77,3],[115,77,3],[116,78,3],[117,79,3],[118,79,3],[119,80,3],[121,81,4],[122,82,4],[123,82,4],[124,83,4],[125,84,4],[126,84,4],[127,85,4],[128,86,4],[129,86,4],[130,87,4],[131,88,4],[132,
89,4],[133,89,4],[134,90,4],[135,91,4],[136,91,4],[137,92,4],[138,93,4],[139,94,4],[140,94,4],[142,95,5],[143,96,5],[144,96,5],[145,97,5],[146,98,5],[147,99,5],[148,99,5],[149,100,5],[150,101,5],[151,101,5],[152,102,5],[153,103,5],[154,104,5],[155,104,5],[156,105,5],[157,106,5],[158,106,5],[159,107,5],[160,108,5],[161,108,5],[162,109,5],[164,110,6],[165,111,6],[166,111,6],[167,112,6],[168,113,6],[169,113,6],[170,114,6],[171,115,6],[172,116,6],[173,116,6],[174,117,6],[245,0,0],[245,5,0],[245,10,0],
[246,15,0],[246,20,0],[246,25,0],[246,30,0],[247,35,0],[247,40,0],[247,45,0],[247,50,0],[247,55,0],[248,60,0],[248,65,0],[248,70,0],[248,75,0],[249,81,0],[249,86,0],[249,91,0],[249,96,0],[250,101,0],[250,106,0],[250,111,0],[250,116,0],[250,121,0],[251,126,0],[251,131,0],[251,136,0],[251,141,0],[252,146,0],[252,151,0],[252,156,0],[252,156,0],[251,159,0],[250,162,0],[249,165,0],[248,168,0],[247,171,0],[246,174,0],[245,177,0],[245,179,0],[244,182,0],[243,185,0],[242,188,0],[241,191,0],[240,194,0],[239,
197,0],[238,200,0],[237,203,0],[236,206,0],[235,209,0],[234,212,0],[233,215,0],[232,218,0],[231,221,0],[230,224,0],[230,226,0],[229,229,0],[228,232,0],[227,235,0],[226,238,0],[225,241,0],[224,244,0],[223,247,0],[165,247,0],[163,244,0],[161,240,0],[158,237,0],[156,233,1],[154,230,1],[152,227,1],[149,223,1],[147,220,1],[145,216,1],[143,213,1],[140,210,2],[138,206,2],[136,203,2],[134,200,2],[132,196,2],[129,193,2],[127,189,2],[125,186,3],[123,183,3],[120,179,3],[118,176,3],[116,172,3],[114,169,3],[111,
166,3],[109,162,4],[107,159,4],[105,155,4],[103,152,4],[100,149,4],[98,145,4],[96,142,4],[94,138,5],[91,135,5],[89,132,5],[87,128,5],[85,125,5],[82,121,5],[80,118,5],[78,115,6],[76,111,6],[73,108,6],[71,105,6],[69,101,6],[67,98,6],[65,94,6],[62,91,7],[60,88,7],[58,84,7],[56,81,7],[53,77,7],[51,74,7],[49,71,7],[47,67,8],[44,64,8],[42,60,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],
[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,
57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8]],ca=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[245,20,0],[245,24,0],[245,29,0],[245,31,0],[247,33,0],[247,33,0],[247,37,0],[247,41,0],[247,41,0],[247,41,0],[247,45,0],[247,45,0],[247,47,0],[247,49,0],[247,49,0],[247,54,0],[247,54,0],[247,56,0],[247,58,0],[247,58,0],[250,62,0],[250,62,0],[250,62,0],[250,67,0],[250,67,0],[250,67,0],[250,69,0],[250,71,0],[250,71,0],[250,75,0],[250,75,0],[250,78,0],[250,79,0],[250,79,0],[250,79,0],[250,81,0],
[250,83,0],[250,83,0],[250,87,0],[250,87,0],[250,90,0],[250,92,0],[252,93,0],[252,93,0],[252,97,0],[252,97,0],[252,97,0],[252,97,0],[252,101,0],[252,101,0],[252,101,0],[252,101,0],[252,105,0],[252,105,0],[252,107,0],[252,109,0],[252,109,0],[252,113,13],[255,118,20],[255,119,23],[255,121,25],[255,126,33],[255,132,38],[255,133,40],[255,135,43],[255,141,48],[255,144,54],[255,150,59],[255,152,61],[255,153,64],[255,159,69],[255,163,77],[255,165,79],[255,168,82],[255,174,87],[255,176,92],[255,181,97],[255,
183,99],[255,186,102],[255,191,107],[255,197,115],[255,201,120],[255,203,123],[255,205,125],[255,209,130],[255,214,138],[255,216,141],[255,218,143],[255,224,150],[255,228,156],[255,234,163],[255,236,165],[255,238,168],[255,243,173],[255,248,181],[255,252,186],[253,252,186],[250,252,187],[244,250,180],[238,247,176],[234,246,173],[231,245,169],[223,240,163],[217,237,157],[211,235,150],[205,233,146],[200,230,142],[195,227,136],[189,224,132],[184,222,126],[180,220,123],[174,217,119],[169,214,114],[163,
212,108],[160,210,105],[154,207,101],[148,204,96],[143,201,93],[138,199,88],[134,197,84],[130,194,81],[126,191,77],[117,189,70],[115,186,68],[112,184,64],[106,181,60],[100,179,55],[94,176,49],[92,174,47],[90,173,45],[81,168,37],[75,166,33],[71,163,28],[66,160,24],[62,158,21],[56,156,14],[51,153,0],[51,153,0],[51,153,0],[50,150,0],[50,150,0],[50,150,0],[50,150,0],[49,148,0],[49,148,0],[49,148,0],[48,145,0],[48,145,0],[48,145,0],[48,145,0],[48,143,0],[48,143,0],[48,143,0],[48,143,0],[47,140,0],[47,
140,0],[47,140,0],[47,140,0],[46,138,0],[46,138,0],[46,138,0],[46,138,0],[45,135,0],[45,135,0],[45,135,0],[45,135,0],[44,133,0],[44,133,0],[44,133,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[42,128,0],[42,128,0],[42,128,0],[42,125,0],[42,125,0],[42,125,0],[42,125,0],[41,122,0],[41,122,0],[41,122,0],[41,122,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[39,117,0],[39,117,0],[39,117,0],[39,117,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],
[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,
0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0]];Q.getColormapByName=function(U){let N;switch(U){case "elevation":N=J([[0,0,191,191],[51,0,255,0],[102,255,255,0],[153,255,127,0],[204,191,127,63],[256,20,20,20]]);break;case "gray":N=l.convertColorRampToColors({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:[0,0,0],toColor:[255,255,255]});break;case "hillshade":N=J([[0,38,54,41],[69,79,90,82],[131,156,156,156],[256,253,241,253]],[.268,.238,.495]);break;case "ndvi":N=G;break;case "ndvi2":N=
E();break;case "ndvi3":N=ca;break;case "random":N=p()}return N?N=N.map((L,F)=>[F,...L]):null};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/CompositeBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CompositeBandFunctionArguments ./pixelUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){p=function(F){function u(){var h=F.apply(this,arguments)||this;h.functionName="CompositeBand";h.functionArguments=null;h.rasterArgumentNames=["rasters"];return h}Q._inheritsLoose(u,F);var B=u.prototype;B._bindSourceRasters=function(){const {sourceRasterInfos:h}=this;var e=h[0];this.outputPixelType=this._getOutputPixelType(e.pixelType);e=e.clone();e.attributeTable=null;e.colormap=null;e.pixelType=this.outputPixelType;e.bandCount=h.map(({bandCount:f})=>f).reduce((f,c)=>
f+c);if(h.every(({statistics:f})=>J.isSome(f)&&f.length)){const f=[];h.forEach(({statistics:c})=>J.isSome(c)&&f.push(...c));e.statistics=f}if(h.every(({histograms:f})=>J.isSome(f)&&f.length)){const f=[];h.forEach(({histograms:c})=>J.isSome(c)&&f.push(...c));e.histograms=f}1<e.bandCount&&(e.colormap=null,e.attributeTable=null);this.rasterInfo=e;return{success:!0,supportsGPU:3>=e.bandCount}};B._processPixels=function(h){({pixelBlocks:h}=h);return!h||J.isNone(h?.[0])?null:L.compositeBands(h)};B._getWebGLParameters=
function(){return{bandCount:this.rasterInfo.bandCount}};return u}(U);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.CompositeBandFunction")],p)})},"esri/layers/support/rasterFunctions/CompositeBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U){var N;p=N=function(L){function F(){var B=L.apply(this,arguments)||this;B.rasters=[];return B}Q._inheritsLoose(F,L);var u=F.prototype;u.writeRasters=function(B,h){h.rasters=B.map(e=>"number"===typeof e||"string"===typeof e?e:e.toJSON())};u.clone=function(){return new N({rasters:J.clone(this.rasters)})};return F}(U);l.__decorate([E.property({json:{write:!0}})],p.prototype,"rasters",void 0);l.__decorate([ca.writer("rasters")],p.prototype,"writeRasters",null);return p=N=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.CompositeBandFunctionArguments")],
p)})},"esri/layers/support/rasterFunctions/ConvolutionFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./ConvolutionFunctionArguments ./convolutionUtils".split(" "),function(Q,l,J,E,p,G,
ca,U,N,L,F,u){p=function(B){function h(){var f=B.apply(this,arguments)||this;f.functionName="Convolution";f.rasterArgumentNames=["raster"];return f}Q._inheritsLoose(h,B);var e=h.prototype;e._bindSourceRasters=function(){const {convolutionType:f,rows:c,cols:n,kernel:w}=this.functionArguments;if(!Object.values(U.convolutionKernel).includes(f))return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${f}`};if(f!==U.convolutionKernel.none&&c*n!==w.length)return{success:!1,
supportsGPU:!1,error:"convolution-function: the specified rows and cols do not match the length of the kernel"};var x=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(x.pixelType);x=x.clone();x.pixelType=this.outputPixelType;const b=[U.convolutionKernel.none,U.convolutionKernel.sharpen,U.convolutionKernel.sharpen2,U.convolutionKernel.sharpening3x3,U.convolutionKernel.sharpening5x5];"u8"===this.outputPixelType||b.includes(f)||(x.statistics=null,x.histograms=null);x.colormap=
null;x.attributeTable=null;this.rasterInfo=x;return{success:!0,supportsGPU:25>=w.length}};e._processPixels=function(f){f=f.pixelBlocks?.[0];if(J.isNone(f)||this.functionArguments.convolutionType===U.convolutionKernel.none)return f;let {kernel:c,rows:n,cols:w}=this.functionArguments;const x=c.reduce((b,d)=>b+d);0!==x&&1!==x&&(c=c.map(b=>b/x));return u.convolute(f,{kernel:c,rows:n,cols:w,outputPixelType:this.outputPixelType})};e._getWebGLParameters=function(){let {kernel:f}=this.functionArguments;const c=
f.reduce((w,x)=>w+x);0!==c&&1!==c&&(f=f.map(w=>w/c));const n=new Float32Array(25);n.set(f);return{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:n,clampRange:N.getPixelValueRange(this.outputPixelType)}};return h}(L);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:F,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],
p.prototype,"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.ConvolutionFunction")],p)})},"esri/layers/support/rasterFunctionConstants":function(){define(["exports"],function(Q){const l={plus:1,minus:2,times:3,sqrt:4,power:5,abs:10,divide:23,exp:25,exp10:26,exp2:27,int:30,float:32,ln:35,log10:36,log2:37,mod:44,negate:45,roundDown:48,roundUp:49,square:53,floatDivide:64,floorDivide:65},J={bitwiseAnd:11,bitwiseLeftShift:12,bitwiseNot:13,bitwiseOr:14,
bitwiseRightShift:15,bitwiseXOr:16,booleanAnd:17,booleanNot:18,booleanOr:19,booleanXOr:20,equalTo:24,greaterThan:28,greaterThanEqual:29,lessThan:33,lessThanEqual:34,isNull:31,notEqual:46},E={acos:6,asin:7,atan:8,atanh:9,cos:21,cosh:22,sin:51,sinh:52,tan:56,tanh:57,acosh:59,asinh:60,atan2:61},p={majority:38,max:39,mean:40,med:41,min:42,minority:43,range:47,stddev:54,sum:55,variety:58,majorityIgnoreNoData:66,maxIgnoreNoData:67,meanIgnoreNoData:68,medIgnoreNoData:69,minIgnoreNoData:70,minorityIgnoreNoData:71,
rangeIgnoreNoData:72,stddevIgnoreNoData:73,sumIgnoreNoData:74,varietyIgnoreNoData:75},G={setNull:50,conditional:78},ca={...l,...J,...E,...p,...G};Q.bandIndexType={userDefined:0,NDVI:1,SAVI:2,TSAVI:3,MSAVI:4,GEMI:5,PVI:6,GVITM:7,Sultan:8,VARI:9,GNDVI:10,SR:11,NDVIRe:12,SRRe:13,MTVI2:14,RTVICore:15,CIRe:16,CIG:17,NDWI:18,EVI:19,ironOxide:20,ferrousMinerals:21,clayMinerals:22,WNDWI:23,BAI:24,NBR:25,NDBI:26,NDMI:27,NDSI:28,MNDWI:29};Q.cellStatisticalOperation=p;Q.colorRampName={aspect:"Aspect",blackToWhite:"Black to White",
blueBright:"Blue Bright",blueLightToDark:"Blue Light to Dark",blueGreenBright:"Blue-Green Bright",blueGreenLightToDark:"Blue-Green Light to Dark",brownLightToDark:"Brown Light to Dark",brownToBlueGreenDivergingRight:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDiverging:"Brown to Blue Green Diverging, Dark",coefficientBias:"Coefficient Bias",coldToHotDiverging:"Cold to Hot Diverging",conditionNumber:"Condition Number",cyanToPurple:"Cyan to Purple",cyanLightToBlueDark:"Cyan-Light to Blue-Dark",
distance:"Distance",elevation1:"Elevation #1",elevation2:"Elevation #2",errors:"Errors",grayLightToDark:"Gray Light to Dark",greenBright:"Green Bright",greenLightToDark:"Green Light to Dark",greenToBlue:"Green to Blue",orangeBright:"Orange Bright",orangeLightToDark:"Orange Light to Dark",partialSpectrum:"Partial Spectrum",partialSpectrum1Diverging:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark:"Pink to YellowGreen Diverging, Dark",precipitation:"Precipitation",prediction:"Prediction",purpleBright:"Purple Bright",purpleToGreenDivergingBright:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark:"Purple to Green Diverging, Dark",purpleBlueBright:"Purple-Blue Bright",purpleBlueLightToDark:"Purple-Blue Light to Dark",purpleRedBright:"Purple-Red Bright",purpleRedLightToDark:"Purple-Red Light to Dark",redBright:"Red Bright",redLightToDark:"Red Light to Dark",
redToBlueDivergingBright:"Red to Blue Diverging, Bright",redToBlueDivergingDark:"Red to Blue Diverging, Dark",redToGreen:"Red to Green",redToGreenDivergingBright:"Red to Green Diverging, Bright",redToGreenDivergingDark:"Red to Green Diverging, Dark",slope:"Slope",spectrumFullBright:"Spectrum-Full Bright",spectrumFullDark:"Spectrum-Full Dark",spectrumFullLight:"Spectrum-Full Light",surface:"Surface",temperature:"Temperature",whiteToBlack:"White to Black",yellowToDarkRed:"Yellow to Dark Red",yellowToGreenToDarkBlue:"Yellow to Green to Dark Blue",
yellowToRed:"Yellow to Red",yellowGreenBright:"Yellow-Green Bright",yellowGreenLightToDark:"Yellow-Green Light to Dark"};Q.colormapName={random:"Random",NDVI:"NDVI",NDVI2:"NDVI2",NDVI3:"NDVI3",elevation:"Elevation",gray:"Gray",hillshade:"Hillshade"};Q.convolutionKernel={userDefined:-1,lineDetectionHorizontal:0,lineDetectionVertical:1,lineDetectionLeftDiagonal:2,lineDetectionRightDiagonal:3,gradientNorth:4,gradientWest:5,gradientEast:6,gradientSouth:7,gradientNorthEast:8,gradientNorthWest:9,smoothArithmeticMean:10,
smoothing3x3:11,smoothing5x5:12,sharpening3x3:13,sharpening5x5:14,laplacian3x3:15,laplacian5x5:16,sobelHorizontal:17,sobelVertical:18,sharpen:19,sharpen2:20,pointSpread:21,none:255};Q.localArithmeticOperation=l;Q.localConditionalOperation=G;Q.localLogicalOperation=J;Q.localOperators=ca;Q.localTrigonometricOperation=E;Q.missingBandAction={bestMatch:0,fail:1};Q.noDataInterpretation={matchAny:0,matchAll:1};Q.slopeType={degree:1,percentRise:2,adjusted:3};Q.stretchType={none:0,standardDeviation:3,histogramEqualization:4,
minMax:5,percentClip:6,sigmoid:9};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ConvolutionFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ./BaseFunctionArguments ./convolutionUtils".split(" "),function(Q,
l,J,E,p,G,ca,U,N){var L;p=L=function(F){function u(){var B=F.apply(this,arguments)||this;B.rows=3;B.cols=3;B.kernel=[0,0,0,0,1,0,0,0,0];return B}Q._inheritsLoose(u,F);u.prototype.clone=function(){return new L({cols:this.cols,rows:this.rows,kernel:[...this.kernel],convolutionType:this.convolutionType,raster:J.clone(this.raster)})};Q._createClass(u,[{key:"convolutionType",set:function(B){this._set("convolutionType",B);const h=N.convolutionKernels.get(B);h&&B!==ca.convolutionKernel.userDefined&&B!==
ca.convolutionKernel.none&&(B=Math.sqrt(h.length),this._set("kernel",h),this._set("cols",B),this._set("rows",B))}}]);return u}(U);l.__decorate([E.property({json:{type:Number,write:!0}})],p.prototype,"rows",void 0);l.__decorate([E.property({json:{type:Number,write:!0}})],p.prototype,"cols",void 0);l.__decorate([E.property({json:{name:"type",type:Number,write:!0}})],p.prototype,"convolutionType",null);l.__decorate([E.property({json:{type:[Number],write:!0}})],p.prototype,"kernel",void 0);return p=L=
l.__decorate([G.subclass("esri.layers.support.rasterFunctions.ConvolutionFunctionArguments")],p)})},"esri/layers/support/rasterFunctions/convolutionUtils":function(){define(["exports","../PixelBlock","../rasterFunctionConstants"],function(Q,l,J){function E(L){const F=Math.sqrt(L.length),u=L.slice(0,F),B=[1];for(let h=1;h<F;h++){let e=null;for(let f=0;f<F;f++){const c=L[f+h*F],n=L[f];if(null==e)if(0===n){if(c)return{separable:!1,row:null,col:null}}else e=c/n;else if(c/n!==e)return{separable:!1,row:null,
col:null}}if(null==e)return{separable:!1,row:null,col:null};B.push(e)}return{separable:!0,row:u,col:B}}function p(L,F,u,B,h,e,f){const c=new Float32Array(F*u),n=e.length,w=f?0:B,x=f?B:0;f=f?1:F;for(let b=w;b<u-w;b++){const d=b*F;for(let r=x;r<F-x;r++){if(h&&!h[d+r])continue;let q=0;for(let k=0;k<n;k++)q+=L[d+r+(k-B)*f]*e[k];c[d+r]=q}}return c}function G(L,F,u=!0){const {pixels:B,width:h,height:e,pixelType:f,mask:c}=L;L=B.length;const n=[],{kernel:w,rows:x,cols:b}=F;for(F=0;F<L;F++){var d=B[F],r=h,
q=e,k=x,g=b,t=c,z=w;const A=new Float32Array(r*q),y=Math.floor(k/2),D=Math.floor(g/2);for(let I=y;I<q-y;I++){const V=I*r;for(let C=D;C<r-D;C++){if(t&&!t[V+C])continue;let M=0;for(let da=0;da<k;da++)for(let qa=0;qa<g;qa++)M+=d[V+C+(da-y)*r+qa-D]*z[da*g+qa];A[V+C]=M}}d=A;u&&ca(d,h,e,x,b);n.push(d)}return new l({width:h,height:e,pixelType:f,pixels:n,mask:c})}function ca(L,F,u,B,h){B=Math.floor(B/2);for(var e=0;e<B;e++)for(var f=0;f<F;f++)L[e*F+f]=L[(h-1-e)*F+f],L[(u-1-e)*F+f]=L[(u-h+e)*F+f];B=Math.floor(h/
2);for(e=0;e<u;e++){f=e*F;for(let c=0;c<B;c++)L[f+c]=L[f+h-1-c],L[f+F-c-1]=L[f+F+c-h]}}function U(L,F,u,B=!0){const {pixels:h,width:e,height:f,pixelType:c,mask:n}=L;L=h.length;const w=[],x=F.length,b=u.length,d=Math.floor(x/2),r=Math.floor(b/2);for(let q=0;q<L;q++){let k=p(h[q],e,f,d,n,F,!0);k=p(k,e,f,r,n,u,!1);B&&ca(k,e,f,x,b);w.push(k)}return new l({width:e,height:f,pixelType:c,pixels:w,mask:n})}const N=new Map;N.set(J.convolutionKernel.none,[0,0,0,0,1,0,0,0,0]);N.set(J.convolutionKernel.lineDetectionHorizontal,
[-1,-1,-1,2,2,2,-1,-1,-1]);N.set(J.convolutionKernel.lineDetectionVertical,[-1,2,-1,-1,2,-1,-1,2,-1]);N.set(J.convolutionKernel.lineDetectionLeftDiagonal,[2,-1,-1,-1,2,-1,-1,-1,2]);N.set(J.convolutionKernel.lineDetectionRightDiagonal,[-1,-1,2,-1,2,-1,2,-1,-1]);N.set(J.convolutionKernel.gradientNorth,[-1,-2,-1,0,0,0,1,2,1]);N.set(J.convolutionKernel.gradientWest,[-1,0,1,-2,0,2,-1,0,1]);N.set(J.convolutionKernel.gradientEast,[1,0,-1,2,0,-2,1,0,-1]);N.set(J.convolutionKernel.gradientSouth,[1,2,1,0,0,
0,-1,-2,-1]);N.set(J.convolutionKernel.gradientNorthEast,[0,-1,-2,1,0,-1,2,1,0]);N.set(J.convolutionKernel.gradientNorthWest,[-2,-1,0,-1,0,1,0,1,2]);N.set(J.convolutionKernel.smoothArithmeticMean,[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111]);N.set(J.convolutionKernel.smoothing3x3,[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625]);N.set(J.convolutionKernel.smoothing5x5,[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,
1,1]);N.set(J.convolutionKernel.sharpening3x3,[-1,-1,-1,-1,9,-1,-1,-1,-1]);N.set(J.convolutionKernel.sharpening5x5,[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1]);N.set(J.convolutionKernel.laplacian3x3,[0,-1,0,-1,4,-1,0,-1,0]);N.set(J.convolutionKernel.laplacian5x5,[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]);N.set(J.convolutionKernel.sobelHorizontal,[-1,-2,-1,0,0,0,1,2,1]);N.set(J.convolutionKernel.sobelVertical,[-1,0,1,-2,0,2,-1,0,1]);N.set(J.convolutionKernel.sharpen,
[0,-.25,0,-.25,2,-.25,0,-.25,0]);N.set(J.convolutionKernel.sharpen2,[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25]);N.set(J.convolutionKernel.pointSpread,[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627]);Q.convolute=function(L,F){const u=E(F.kernel),B=!1!==F.mirrorEdges;L=u.separable?U(L,u.row,u.col,B):G(L,F,B);({outputPixelType:F}=F);F&&L.clamp(F);return L};Q.convoluteSeparable=U;Q.convolutionKernels=N;Q.separateKernels=E;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/ExtractBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./ExtractBandFunctionArguments ./pixelUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F){p=function(u){function B(){var e=u.apply(this,arguments)||this;e.functionName="ExtractBand";e.functionArguments=null;e.rasterArgumentNames=["raster"];return e}Q._inheritsLoose(B,u);var h=B.prototype;h._bindSourceRasters=function(){var {sourceRasterInfos:e}=this;e=e[0];const {bandCount:f}=e,{bandIds:c,missingBandAction:n}=this.functionArguments;if(n===F.MissingBandAction.fail&&c.some(b=>0>b||b>=f))return{success:!1,supportsGPU:!1,error:"extract-band-function: invalid bandIds"};
this.outputPixelType=this._getOutputPixelType("f32");e=e.clone();e.pixelType=this.outputPixelType;e.bandCount=c.length;const {statistics:w,histograms:x}=e;J.isSome(w)&&w.length&&(e.statistics=c.map(b=>w[b]||w[w.length-1]));J.isSome(x)&&x.length&&(e.histograms=c.map(b=>x[b]||x[x.length-1]));this.rasterInfo=e;return{success:!0,supportsGPU:3>=e.bandCount}};h._processPixels=function(e){e=e.pixelBlocks?.[0];if(J.isNone(e))return null;const f=e.pixels.length,c=this.functionArguments.bandIds.map(n=>n>=f?
f-1:n);return e.extractBands(c)};h._getWebGLParameters=function(){let e;if(this.isInputBandIdsSwizzled)e=this.swizzledBandSelection.length?this.swizzledBandSelection:[0,1,2];else{e=[...this.functionArguments.bandIds];0===e.length?e=[0,1,2]:3>e.length&&(e[1]=e[1]??e[0],e[2]=e[2]??e[1]);for(let f=0;3>f;f++)e[f]=Math.min(e[f],2)}return{bandIndexMat3:U.getBandMatrix3(e)}};h._getInputBandIds=function(e){const f=e.length;return this.functionArguments.bandIds.map(c=>c>=f?f-1:c).map(c=>e[c])};return B}(N);
l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.ExtractBandFunction")],p)})},"esri/layers/support/rasterFunctions/ExtractBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(Q,l,J,E,p,G,ca,U){var N;E=N=function(L){function F(){var u=L.apply(this,arguments)||this;u.bandIds=[];u.missingBandAction=U.MissingBandAction.bestMatch;return u}Q._inheritsLoose(F,L);F.prototype.clone=function(){return new N({bandIds:[...this.bandIds],missingBandAction:this.missingBandAction})};return F}(ca);l.__decorate([J.property({json:{write:!0}})],E.prototype,"bandIds",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"missingBandAction",void 0);return E=N=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.ExtractBandFunctionArguments")],
E)})},"esri/layers/support/rasterFunctions/LocalFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../rasterFunctionConstants ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./LocalFunctionArguments ./localUtils".split(" "),function(Q,l,J,E,p,G,ca,U,N,L,F,u){p=function(B){function h(){var f=
B.apply(this,arguments)||this;f.functionName="Local";f.functionArguments=null;f.rasterArgumentNames=["rasters"];return f}Q._inheritsLoose(h,B);var e=h.prototype;e._bindSourceRasters=function(){var {sourceRasterInfos:f}=this,c=f[0];const {bandCount:n}=c;var {processAsMultiband:w}=this.functionArguments;if(f.some(d=>d.bandCount!==n))return{success:!1,supportsGPU:!1,error:"local-function: input rasters do not have same band count"};const {operation:x,rasters:b}=this.functionArguments;f=u.operandsCount[x];
if(!(999===f||b.length===f||1>=b.length&&1===f))return{success:!1,supportsGPU:!1,error:`local-function: the length of functionArguments.rasters does not match operation's requirement: ${f}`};this.outputPixelType=this._getOutputPixelType("f32");c=c.clone();c.pixelType=this.outputPixelType;c.statistics=null;c.histograms=null;c.colormap=null;c.attributeTable=null;c.bandCount=999!==f||w?n:1;if(w=u.getOutputDomain(x)){c.statistics=[];for(let d=0;d<c.bandCount;d++)c.statistics[d]={min:w[0],max:w[1],avg:(w[0]+
w[1])/2,stddev:(w[0]+w[1])/10}}this.rasterInfo=c;return{success:!0,supportsGPU:1===c.bandCount&&3>=f&&(11>x||16<x)}};e._processPixels=function(f){({pixelBlocks:f}=f);return J.isNone(f)||f.some(c=>J.isNone(c))?null:u.local(f,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})};e._getWebGLParameters=function(){const {operation:f}=this.functionArguments,c=u.operandsCount[f],n=Object.keys(U.localOperators).find(d=>
U.localOperators[d]===f)?.toLowerCase()??"undefined";var w=this.outputPixelType??"f32";let [x,b]=N.getPixelValueRange(w);if(w=w.startsWith("u")||w.startsWith("s"))x-=1E-4,b+=1E-4;return{imageCount:c,operationName:n,domainRange:[x,b],isOutputRounded:w}};return h}(L);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:F,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],
p.prototype,"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.LocalFunction")],p)})},"esri/layers/support/rasterFunctions/LocalFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U){var N;p=N=function(L){function F(){var B=L.apply(this,arguments)||this;B.rasters=[];B.processAsMultiband=!0;return B}Q._inheritsLoose(F,L);var u=F.prototype;u.writeRasters=function(B,h){h.rasters=B.map(e=>"number"===typeof e||"string"===typeof e?e:e.toJSON())};u.clone=function(){return new N({operation:this.operation,processAsMultiband:this.processAsMultiband,rasters:J.clone(this.rasters)})};return F}(U);l.__decorate([E.property({json:{write:!0}})],p.prototype,"operation",
void 0);l.__decorate([E.property({json:{write:!0}})],p.prototype,"rasters",void 0);l.__decorate([ca.writer("rasters")],p.prototype,"writeRasters",null);l.__decorate([E.property({json:{write:!0}})],p.prototype,"processAsMultiband",void 0);return p=N=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.LocalFunctionArguments")],p)})},"esri/layers/support/rasterFunctions/localUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFunctionConstants","../rasterFormats/pixelRangeUtils"],
function(Q,l,J,E,p){function G(aa,ma=!1){var Z=aa.map(ia=>ia.mask);const ua=Z.filter(ia=>l.isSome(ia));var va=aa[0].pixels[0].length;if(0===ua.length)return(new Uint8Array(va)).fill(255);aa=new Uint8Array(ua[0]);if(1===ua.length)return aa;if(!ma){for(ma=1;ma<ua.length;ma++)for(Z=ua[ma],va=0;va<aa.length;va++)aa[va]&&(aa[va]=Z[va]?255:0);return aa}if(ua.length!==Z.length)return(new Uint8Array(va)).fill(255);for(ma=1;ma<ua.length;ma++)for(Z=ua[ma],va=0;va<aa.length;va++)0===aa[va]&&(aa[va]=Z[va]?255:
0);return aa}function ca(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]+va[ia];return Z}function U(aa,ma,Z){[aa]=aa;ma=J.createEmptyBand("f32",aa.length);ma.set(aa);return ma}function N(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]-va[ia];return Z}function L(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=
ua[ia]*va[ia];return Z}function F(aa,ma,Z){[aa]=aa;const ua=aa.length;Z=J.createEmptyBand(Z,ua);for(let va=0;va<ua;va++)if(!ma||ma[va])Z[va]=Math.sign(aa[va])*Math.floor(Math.abs(aa[va]));return Z}function u(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]/va[ia];return Z}function B(aa,ma,Z){return u(aa,ma,"f32")}function h(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=
Math.floor(ua[ia]/va[ia]);return Z}function e(aa,ma,Z,ua){aa=aa[0];const va=aa.length;Z=J.createEmptyBand(Z,va);if(ua===E.localTrigonometricOperation.atanh){for(ua=0;ua<va;ua++)if(ma[ua]){var ia=aa[ua];1<=Math.abs(ia)?ma[ua]=0:Z[ua]=Math.atanh(ia)}return Z}ua=ua===E.localTrigonometricOperation.asin?Math.asin:Math.acos;for(ia=0;ia<va;ia++)if(ma[ia]){const Aa=aa[ia];1<Math.abs(Aa)?ma[ia]=0:Z[ia]=ua(Aa)}return Z}function f(aa,ma,Z,ua){[aa]=aa;const va=aa.length;Z=J.createEmptyBand(Z,va);for(let ia=0;ia<
va;ia++)if(!ma||ma[ia])Z[ia]=ua(aa[ia]);return Z}function c(aa,ma,Z,ua){const [va,ia]=aa;aa=va.length;Z=J.createEmptyBand(Z,aa);for(let Aa=0;Aa<aa;Aa++)if(!ma||ma[Aa])Z[Aa]=ua(va[Aa],ia[Aa]);return Z}function n(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]&va[ia];return Z}function w(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]<<va[ia];return Z}function x(aa,
ma,Z){[aa]=aa;const ua=aa.length;Z=J.createEmptyBand(Z,ua);for(let va=0;va<ua;va++)if(!ma||ma[va])Z[va]=~aa[va];return Z}function b(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]|va[ia];return Z}function d(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]>>va[ia];return Z}function r(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<
aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]^va[ia];return Z}function q(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]&&va[ia]?1:0;return Z}function k(aa,ma,Z){[aa]=aa;const ua=aa.length;Z=J.createEmptyBand(Z,ua);for(let va=0;va<ua;va++)if(!ma||ma[va])Z[va]=aa[va]?0:1;return Z}function g(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]||va[ia]?1:0;return Z}function t(aa,
ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=(ua[ia]?1:0)^(va[ia]?1:0);return Z}function z(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]===va[ia]?1:0;return Z}function A(aa,ma,Z,ua){[aa]=aa;const va=aa.length;Z=J.createEmptyBand(Z,va);const ia=ua===Math.E;for(let Aa=0;Aa<va;Aa++)if(!ma||ma[Aa])Z[Aa]=ia?Math.exp(aa[Aa]):ua**aa[Aa];return Z}function y(aa,ma,Z){return A(aa,
ma,Z,10)}function D(aa,ma,Z){return A(aa,ma,Z,2)}function I(aa,ma,Z){return A(aa,ma,Z,Math.E)}function V(aa,ma,Z,ua){[aa]=aa;const va=aa.length;Z=J.createEmptyBand(Z,va);for(let ia=0;ia<va;ia++)if(!ma||ma[ia])0>=aa[ia]?ma[ia]=0:Z[ia]=ua(aa[ia]);return Z}function C(aa,ma,Z){return V(aa,ma,Z,Math.log10)}function M(aa,ma,Z){return V(aa,ma,Z,Math.log2)}function da(aa,ma,Z){return V(aa,ma,Z,Math.log)}function qa(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||
ma[ia])Z[ia]=ua[ia]>va[ia]?1:0;return Z}function xa(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]>=va[ia]?1:0;return Z}function ja(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]<va[ia]?1:0;return Z}function P(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]<=va[ia]?1:0;return Z}function O(aa,
ma,Z){[aa]=aa;aa=aa.length;Z=J.createEmptyBand(Z,aa);if(!ma)return Z;for(let ua=0;ua<aa;ua++)Z[ua]=ma[ua]?0:1;return Z}function v(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||ma[ia])Z[ia]=ua[ia]%va[ia];return Z}function K(aa,ma,Z){[aa]=aa;const ua=aa.length;Z=J.createEmptyBand(Z,ua);for(let va=0;va<ua;va++)if(!ma||ma[va])Z[va]=-aa[va];return Z}function Y(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)if(!ma||
ma[ia])Z[ia]=ua[ia]===va[ia]?0:1;return Z}function S(aa,ma,Z){const [ua,va]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);const ia=new Uint8Array(aa);for(let Aa=0;Aa<aa;Aa++)null!=ma&&!ma[Aa]||0!==ua[Aa]||(Z[Aa]=va[Aa],ia[Aa]=255);return{band:Z,mask:ia}}function T(aa,ma,Z){const [ua,va,ia]=aa;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let Aa=0;Aa<aa;Aa++)if(!ma||ma[Aa])Z[Aa]=ua[Aa]?va[Aa]:ia[Aa];return Z}function W(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];const [va]=aa,ia=va.length;Z=J.createEmptyBand(Z,
ia);for(let Aa=0;Aa<ia;Aa++)if(!ma||ma[Aa]){let Ca=va[Aa];for(let Fa=1;Fa<ua;Fa++){const Ga=aa[Fa][Aa];Ca<Ga&&(Ca=Ga)}Z[Aa]=Ca}return Z}function ea(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];const [va]=aa,ia=va.length;Z=J.createEmptyBand(Z,ia);for(let Aa=0;Aa<ia;Aa++)if(!ma||ma[Aa]){let Ca=va[Aa];for(let Fa=1;Fa<ua;Fa++){const Ga=aa[Fa][Aa];Ca>Ga&&(Ca=Ga)}Z[Aa]=Ca}return Z}function na(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];const [va]=aa,ia=va.length;Z=J.createEmptyBand(Z,ia);for(let Aa=
0;Aa<ia;Aa++)if(!ma||ma[Aa]){let Ca=va[Aa],Fa=Ca;for(let Ga=1;Ga<ua;Ga++){const Ja=aa[Ga][Aa];Fa<Ja?Fa=Ja:Ca>Ja&&(Ca=Ja)}Z[Aa]=Fa-Ca}return Z}function a(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];var [va]=aa;va=va.length;Z=J.createEmptyBand(Z,va);for(let ia=0;ia<va;ia++)if(!ma||ma[ia]){let Aa=0;for(let Ca=0;Ca<ua;Ca++)Aa+=aa[Ca][ia];Z[ia]=Aa/ua}return Z}function m(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];var [va]=aa;va=va.length;Z=J.createEmptyBand(Z,va);for(let ia=0;ia<va;ia++)if(!ma||
ma[ia])for(let Aa=0;Aa<ua;Aa++)Z[ia]+=aa[Aa][ia];return Z}function H(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];var [va]=aa;va=va.length;Z=J.createEmptyBand(Z,va);for(let Ca=0;Ca<va;Ca++)if(!ma||ma[Ca]){const Fa=new Float32Array(ua);let Ga=0;for(var ia=0;ia<ua;ia++){var Aa=aa[ia];Ga+=Aa[Ca];Fa[ia]=Aa[Ca]}Ga/=ua;ia=0;for(Aa=0;Aa<ua;Aa++)ia+=(Fa[Aa]-Ga)**2;Z[Ca]=Math.sqrt(ia/ua)}return Z}function R(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];const va=Math.floor(ua/2);var [ia]=aa;ia=ia.length;
Z=J.createEmptyBand(Z,ia);const Aa=new Float32Array(ua),Ca=1===ua%2;for(let Fa=0;Fa<ia;Fa++)if(!ma||ma[Fa]){for(let Ga=0;Ga<ua;Ga++)Aa[Ga]=aa[Ga][Fa];Aa.sort();Z[Fa]=Ca?Aa[va]:(Aa[va]+Aa[va-1])/2}return Z}function ha(aa,ma,Z){const [ua,va]=aa;if(null==va)return ua;aa=ua.length;Z=J.createEmptyBand(Z,aa);for(let ia=0;ia<aa;ia++)ma[ia]&&(ua[ia]===va[ia]?Z[ia]=ua[ia]:ma[ia]=0);return Z}function ka(aa,ma,Z){const ua=aa.length;if(2>=ua)return ha(aa,ma,Z);const va=aa[0].length;Z=J.createEmptyBand(Z,va);
const ia=new Map;for(let Ca=0;Ca<va;Ca++)if(!ma||ma[Ca]){ia.clear();let Fa;for(var Aa=0;Aa<ua;Aa++)Fa=aa[Aa][Ca],ia.set(Fa,ia.has(Fa)?ia.get(Fa)+1:1);let Ga=Aa=0;for(const Ja of ia.keys())Aa=ia.get(Ja),Aa>Ga&&(Ga=Aa,Fa=Ja);Z[Ca]=Fa}return Z}function ra(aa,ma,Z){const ua=aa.length;if(2>=ua)return ha(aa,ma,Z);const va=aa[0].length;Z=J.createEmptyBand(Z,va);const ia=new Map;for(let Ca=0;Ca<va;Ca++)if(!ma||ma[Ca]){ia.clear();let Fa;for(var Aa=0;Aa<ua;Aa++)Fa=aa[Aa][Ca],ia.set(Fa,ia.has(Fa)?ia.get(Fa)+
1:1);Aa=0;let Ga=aa.length;for(const Ja of ia.keys())Aa=ia.get(Ja),Aa<Ga&&(Ga=Aa,Fa=Ja);Z[Ca]=Fa}return Z}function pa(aa,ma,Z){const ua=aa.length;if(2>ua)return aa[0];var [va]=aa;va=va.length;Z=J.createEmptyBand(Z,va);const ia=new Set;for(let Aa=0;Aa<va;Aa++)if(!ma||ma[Aa]){ia.clear();let Ca;for(let Fa=0;Fa<ua;Fa++)Ca=aa[Fa][Aa],ia.add(Ca);Z[Aa]=ia.size}return Z}function la(aa,ma,Z,ua){let [va,ia]=p.getPixelValueRange(Z);if(Z=Z.startsWith("u")||Z.startsWith("s"))va-=1E-5,ia+=1E-5;for(let Aa=0;Aa<
ma.length;Aa++)if(ma[Aa]){const Ca=aa[Aa];isNaN(Ca)||Ca<va||Ca>ia?ma[Aa]=0:ua[Aa]=Z?Math.round(Ca):Ca}}const sa=new Map;sa.set(E.localTrigonometricOperation.acos,[0,Math.PI]);sa.set(E.localTrigonometricOperation.asin,[-Math.PI/2,Math.PI/2]);sa.set(E.localTrigonometricOperation.atan,[-Math.PI/2,Math.PI/2]);sa.set(E.localTrigonometricOperation.cos,[-1,1]);sa.set(E.localTrigonometricOperation.sin,[-1,1]);sa.set(E.localLogicalOperation.booleanAnd,[0,1]);sa.set(E.localLogicalOperation.booleanNot,[0,1]);
sa.set(E.localLogicalOperation.booleanOr,[0,1]);sa.set(E.localLogicalOperation.booleanXOr,[0,1]);sa.set(E.localLogicalOperation.equalTo,[0,1]);sa.set(E.localLogicalOperation.notEqual,[0,1]);sa.set(E.localLogicalOperation.greaterThan,[0,1]);sa.set(E.localLogicalOperation.greaterThanEqual,[0,1]);sa.set(E.localLogicalOperation.lessThan,[0,1]);sa.set(E.localLogicalOperation.lessThanEqual,[0,1]);sa.set(E.localLogicalOperation.isNull,[0,1]);const wa=new Map,ya=new Map,za=new Map,Ba=new Map;Q.getOutputDomain=
function(aa){return sa.get(aa)};Q.local=function(aa,ma,Z={}){wa.size||(wa.set(4,Math.sqrt),wa.set(6,Math.acos),wa.set(7,Math.asin),wa.set(8,Math.atan),wa.set(9,Math.atanh),wa.set(10,Math.abs),wa.set(21,Math.cos),wa.set(22,Math.cosh),wa.set(48,Math.floor),wa.set(49,Math.ceil),wa.set(51,Math.sin),wa.set(52,Math.sinh),wa.set(56,Math.tan),wa.set(57,Math.tanh),wa.set(59,Math.acosh),wa.set(60,Math.asinh),wa.set(65,Math.floor),ya.set(5,Math.pow),ya.set(61,Math.atan2),za.set(1,ca),za.set(2,N),za.set(3,L),
za.set(11,n),za.set(12,w),za.set(12,w),za.set(13,x),za.set(14,b),za.set(15,d),za.set(16,r),za.set(17,q),za.set(18,k),za.set(19,g),za.set(20,t),za.set(23,u),za.set(24,z),za.set(25,I),za.set(26,y),za.set(27,D),za.set(28,qa),za.set(29,xa),za.set(30,F),za.set(31,O),za.set(32,U),za.set(33,ja),za.set(34,P),za.set(35,da),za.set(36,C),za.set(37,M),za.set(44,v),za.set(45,K),za.set(46,Y),za.set(64,B),za.set(65,h),za.set(76,T),za.set(78,T),Ba.set(38,ka),Ba.set(39,W),Ba.set(40,a),Ba.set(41,R),Ba.set(42,ea),Ba.set(43,
ra),Ba.set(47,na),Ba.set(54,H),Ba.set(55,m),Ba.set(58,pa),Ba.set(66,ka),Ba.set(67,W),Ba.set(68,a),Ba.set(69,R),Ba.set(70,ea),Ba.set(71,ra),Ba.set(72,na),Ba.set(73,H),Ba.set(74,m),Ba.set(75,pa));var ua=G(aa,66<=ma&&75>=ma);const {outputPixelType:va="f32"}=Z,ia=!Ba.has(ma)||Z.processAsMultiband,Aa=ia?aa[0].pixels.length:1;Z=[];for(let Ga=0;Ga<Aa;Ga++){var Ca=Ba.has(ma)&&!ia?aa.flatMap(Ja=>Ja.pixels):aa.map(Ja=>Ja.pixels[Ga]),Fa=!0;ma===E.localConditionalOperation.setNull?(ua=S(Ca,ua,va),Ca=ua.band,
ua=ua.mask,Fa=!1):za.has(ma)?Ca=za.get(ma)(Ca,ua,"f64"):wa.has(ma)?Ca=ma===E.localTrigonometricOperation.asin||ma===E.localTrigonometricOperation.acos||ma===E.localTrigonometricOperation.atanh?e(Ca,ua,"f64",ma):f(Ca,ua,"f64",wa.get(ma)):ya.has(ma)?Ca=c(Ca,ua,"f64",ya.get(ma)):Ba.has(ma)?Ca=Ba.get(ma)(Ca,ua,"f64"):(Ca=Ca[0],Fa=!1);Fa&&ma!==E.localLogicalOperation.isNull&&!sa.has(ma)&&(Fa=J.createEmptyBand(va,Ca.length),ua||(ua=(new Uint8Array(Ca.length)).fill(255)),la(Ca,ua,va,Fa),Ca=Fa);Z.push(Ca)}aa=
aa[0];return new J({width:aa.width,height:aa.height,pixelType:va,mask:ma===E.localLogicalOperation.isNull?null:ua,pixels:Z})};Q.operandsCount=[0,2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,2,1,1,1,999,999,1,1,999,1,1,2,999,999,2,2,999,999,999,999,999,999,999,999,999,999,3,999,3];Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/MaskFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./MaskFunctionArguments ./pixelUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F){G=function(u){function B(){var e=u.apply(this,arguments)||this;e.functionName="Mask";e.functionArguments=null;e.rasterArgumentNames=["raster"];return e}Q._inheritsLoose(B,u);var h=B.prototype;h._bindSourceRasters=function(){var e=this.sourceRasterInfos[0].clone();const {pixelType:f}=e;this.outputPixelType=this._getOutputPixelType(f);e.pixelType=this.outputPixelType;this.rasterInfo=e;const {includedRanges:c,normalizedNoDataValues:n}=this.functionArguments;if(!c?.length&&
!n?.length)return{success:!1,supportsGPU:!1,error:"missing includedRanges or noDataValues argument"};let w=[];for(let x=0;x<e.bandCount;x++){const b=F.createMaskLUT(f,c?.slice(2*x,2*x+2),n?.[x]);if(null==b){w=null;break}w.push(b)}this.lookups=w;e=null!=n&&n.every(x=>x?.length===n[0]?.length);return{success:!0,supportsGPU:(!c||c.length<=2*F.MAX_MAP_SIZE_GPU)&&(!n||e&&n[0].length<=F.MAX_MAP_SIZE_GPU)}};h._processPixels=function(e){e=e.pixelBlocks?.[0];if(E.isNone(e))return null;const {outputPixelType:f,
lookups:c}=this,{includedRanges:n,noDataInterpretation:w,normalizedNoDataValues:x}=this.functionArguments;return F.mask(e,{includedRanges:n,noDataValues:x,outputPixelType:f,matchAll:w===F.NoDataInterpretation.matchAll,lookups:c})};h._getWebGLParameters=function(){const {includedRanges:e,normalizedNoDataValues:f}=this.functionArguments,c=new Float32Array(F.MAX_MAP_SIZE_GPU);c.fill(J.NUMBER_MAX_FLOAT32);f?.[0]?.length&&c.set(f[0]);const n=new Float32Array(F.MAX_MAP_SIZE_GPU);for(let w=0;w<n.length;w+=
2)n[w]=e?.[w]??-J.NUMBER_MAX_FLOAT32,n[w+1]=e?.[w+1]??J.NUMBER_MAX_FLOAT32;e&&e.length&&n.set(e);return{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:c,includedRanges:n}};return B}(N);l.__decorate([p.property({json:{write:!0,name:"rasterFunction"}})],G.prototype,"functionName",void 0);l.__decorate([p.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],G.prototype,"functionArguments",void 0);l.__decorate([p.property()],G.prototype,"rasterArgumentNames",void 0);l.__decorate([p.property({json:{write:!0}})],
G.prototype,"lookups",void 0);return G=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.MaskFunction")],G)})},"esri/layers/support/rasterFunctions/MaskFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),function(Q,l,J,E,
p,G,ca,U){var N;E=N=function(L){function F(){var u=L.apply(this,arguments)||this;u.includedRanges=null;u.noDataValues=null;u.noDataInterpretation=U.NoDataInterpretation.matchAny;return u}Q._inheritsLoose(F,L);F.prototype.clone=function(){return new N({includedRanges:this.includedRanges?.slice()??[],noDataValues:this.noDataValues?.slice()??[],noDataInterpretation:this.noDataInterpretation})};Q._createClass(F,[{key:"normalizedNoDataValues",get:function(){var {noDataValues:u}=this;if(!u?.length)return null;
let B=!1;u=u.map(h=>"number"===typeof h?(B=!0,[h]):"string"===typeof h?(h=h.trim().split(" ").filter(e=>""!==e.trim()).map(e=>Number(e)),B=B||0<h.length,0===h.length?null:h):null);return B?u:null}}]);return F}(ca);l.__decorate([J.property({json:{write:!0}})],E.prototype,"includedRanges",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"noDataValues",void 0);l.__decorate([J.property()],E.prototype,"normalizedNoDataValues",null);l.__decorate([J.property({json:{write:!0}})],E.prototype,
"noDataInterpretation",void 0);return E=N=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.MaskFunctionArguments")],E)})},"esri/layers/support/rasterFunctions/NDVIFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){p=function(F){function u(){var h=F.apply(this,arguments)||this;h.functionName="NDVI";h.functionArguments=null;h.rasterArgumentNames=["raster"];return h}Q._inheritsLoose(u,F);var B=u.prototype;B._bindSourceRasters=function(){const {scientificOutput:h}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(h?"f32":"u8");const e=this.sourceRasterInfos[0].clone();e.pixelType=this.outputPixelType;e.colormap=null;e.histograms=null;e.bandCount=1;const [f,c,n,
w]=h?[-1,1,0,.1]:[0,200,100,10];e.statistics=[{min:f,max:c,avg:n,stddev:w}];this.rasterInfo=e;return{success:!0,supportsGPU:!0}};B._processPixels=function(h){h=h.pixelBlocks?.[0];if(J.isNone(h))return null;const {visibleBandID:e,infraredBandID:f,scientificOutput:c}=this.functionArguments;return U.calculateNDVI(h,e,f,!c)};B._getWebGLParameters=function(){const {visibleBandID:h,infraredBandID:e,scientificOutput:f}=this.functionArguments;return{bandIndexMat3:U.getBandMatrix3(this.isInputBandIdsSwizzled?
[0,1,2]:[e,h,0]),scaled:!f}};B._getInputBandIds=function(h){const {visibleBandID:e,infraredBandID:f}=this.functionArguments;return[f,e,0].map(c=>h[c])};return u}(N);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,"rasterArgumentNames",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],
p)})},"esri/layers/support/rasterFunctions/NDVIFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),function(Q,l,J,E,p,G,ca){var U;E=U=function(N){function L(){var F=N.apply(this,arguments)||this;F.visibleBandID=0;F.infraredBandID=1;F.scientificOutput=
!1;return F}Q._inheritsLoose(L,N);L.prototype.clone=function(){const {visibleBandID:F,infraredBandID:u,scientificOutput:B}=this;return new U({visibleBandID:F,infraredBandID:u,scientificOutput:B})};return L}(ca);l.__decorate([J.property({json:{write:!0}})],E.prototype,"visibleBandID",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"infraredBandID",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"scientificOutput",void 0);return E=U=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.NDVIFunctionArguments")],
E)})},"esri/layers/support/rasterFunctions/RemapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/mathUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./pixelUtils ./RemapFunctionArguments".split(" "),function(Q,l,J,E,p,G,ca,U,N,L,F,u){G=function(B){function h(){var f=
B.apply(this,arguments)||this;f.functionName="Remap";f.functionArguments=null;f.rasterArgumentNames=["raster"];f.lookup=null;return f}Q._inheritsLoose(h,B);var e=h.prototype;e._bindSourceRasters=function(){const f=this.sourceRasterInfos[0].clone(),{pixelType:c}=f;this.outputPixelType=this._getOutputPixelType(c);f.pixelType=this.outputPixelType;f.colormap=null;f.histograms=null;f.bandCount=1;f.attributeTable=null;const {statistics:n}=f,{allowUnmatched:w,outputValues:x,inputRanges:b,noDataRanges:d,
isLastInputRangeInclusive:r}=this.functionArguments;if(E.isSome(n)&&n.length&&x?.length)if(w){var q=Math.min.apply(null,[...x,n[0].min]),k=Math.max.apply(null,[...x,n[0].max]);f.statistics=[{...n[0],min:q,max:k}]}else{k=q=x[0];for(let g=0;g<x.length;g++)q=q>x[g]?x[g]:q,k=k>x[g]?k:x[g];f.statistics=[{...n[0],min:q,max:k}]}this.rasterInfo=f;this.lookup=w?null:F.createRemapLUT({srcPixelType:c,inputRanges:b,outputValues:x,noDataRanges:d,allowUnmatched:w,isLastInputRangeInclusive:r,outputPixelType:this.outputPixelType});
return{success:!0,supportsGPU:(!x||x.length<=F.MAX_MAP_SIZE_GPU)&&(!d||d.length<=F.MAX_MAP_SIZE_GPU)}};e._processPixels=function(f){f=f.pixelBlocks?.[0];if(E.isNone(f))return null;const {lookup:c,outputPixelType:n}=this;if(c){const q=F.lookupPixels(f,{lut:[c.lut],offset:c.offset,outputPixelType:n});E.isSome(q)&&c.mask&&(q.mask=F.lookupBandValues(f.pixels[0],f.mask,c.mask,c.offset,"u8"));return q}const {inputRanges:w,outputValues:x,noDataRanges:b,allowUnmatched:d,isLastInputRangeInclusive:r}=this.functionArguments;
return F.remap(f,{inputRanges:w,outputValues:x,noDataRanges:b,outputPixelType:n,allowUnmatched:d,isLastInputRangeInclusive:r})};e._getWebGLParameters=function(){const {allowUnmatched:f,inputRanges:c,outputValues:n,noDataRanges:w,isLastInputRangeInclusive:x}=this.functionArguments,b=new Float32Array(3*F.MAX_MAP_SIZE_GPU);var d=n.length;if(c?.length){var r=0;let q=0;for(let k=0;k<b.length;k+=3)if(b[k]=c[r++]??J.NUMBER_MAX_FLOAT32-1,b[k+1]=c[r++]??J.NUMBER_MAX_FLOAT32,b[k+2]=n[q++]??0,q<=d&&(0<k&&(b[k]-=
1E-5),q<d||!x))b[k+1]-=1E-5}d=new Float32Array(2*F.MAX_MAP_SIZE_GPU);d.fill(J.NUMBER_MAX_FLOAT32);w?.length&&d.set(w);r=N.getPixelValueRange(this.outputPixelType);return{allowUnmatched:f,rangeMaps:b,noDataRanges:d,clampRange:r}};return h}(L);l.__decorate([p.property({json:{write:!0,name:"rasterFunction"}})],G.prototype,"functionName",void 0);l.__decorate([p.property({type:u,json:{write:!0,name:"rasterFunctionArguments"}})],G.prototype,"functionArguments",void 0);l.__decorate([p.property()],G.prototype,
"rasterArgumentNames",void 0);l.__decorate([p.property({json:{write:!0}})],G.prototype,"lookup",void 0);return G=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.RemapFunction")],G)})},"esri/layers/support/rasterFunctions/RemapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca){var U;E=U=function(N){function L(){var F=N.apply(this,arguments)||this;F.inputRanges=null;F.outputValues=null;F.noDataRanges=null;F.allowUnmatched=!1;F.isLastInputRangeInclusive=!1;return F}Q._inheritsLoose(L,N);L.prototype.clone=function(){return new U({inputRanges:[...this.inputRanges],outputValues:[...this.outputValues],noDataRanges:[...this.noDataRanges],allowUnmatched:this.allowUnmatched,isLastInputRangeInclusive:this.isLastInputRangeInclusive})};return L}(ca);l.__decorate([J.property({json:{write:!0}})],
E.prototype,"inputRanges",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"outputValues",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"noDataRanges",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"allowUnmatched",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"isLastInputRangeInclusive",void 0);return E=U=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.RemapFunctionArguments")],E)})},"esri/layers/support/rasterFunctions/SlopeFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./SlopeFunctionArguments ./surfaceUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L){const F=1/111E3;p=function(u){function B(){var e=u.apply(this,arguments)||this;e.functionName="Slope";e.functionArguments=null;e.rasterArgumentNames=["raster"];e.isGCS=!1;return e}Q._inheritsLoose(B,u);var h=B.prototype;h._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const e=this.sourceRasterInfos[0].clone();e.pixelType=this.outputPixelType;e.statistics="percent-rise"!==this.functionArguments.slopeType?[{min:0,max:90,avg:1,stddev:1}]:
null;e.histograms=null;e.colormap=null;e.attributeTable=null;e.bandCount=1;this.rasterInfo=e;this.isGCS=e.spatialReference?.isGeographic??!1;return{success:!0,supportsGPU:!0}};h._processPixels=function(e){const f=e.pixelBlocks?.[0];if(J.isNone(f))return null;const {zFactor:c,slopeType:n,pixelSizePower:w,pixelSizeFactor:x}=this.functionArguments,{isGCS:b}=this;({extent:e}=e);return L.slope(f,{zFactor:c,slopeType:n,pixelSizePower:w,pixelSizeFactor:x,isGCS:b,resolution:e?{x:e.width/f.width,y:e.height/
f.height}:{x:1,y:1}})};h._getWebGLParameters=function(){const {zFactor:e,slopeType:f,pixelSizeFactor:c,pixelSizePower:n}=this.functionArguments;return{zFactor:this.isGCS&&1<=e?e*F:e,slopeType:f,pixelSizeFactor:c??0,pixelSizePower:n??0}};return B}(U);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:N,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],
p.prototype,"rasterArgumentNames",void 0);l.__decorate([E.property({json:{write:!0}})],p.prototype,"isGCS",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.SlopeFunction")],p)})},"esri/layers/support/rasterFunctions/SlopeFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U,N){var L;J=new J.JSONMap({1:"degree",2:"percent-rise",3:"adjusted"},{useNumericKeys:!0});N=L=function(F){function u(){var B=F.apply(this,arguments)||this;B.slopeType="degree";B.zFactor=1;B.pixelSizePower=.664;B.pixelSizeFactor=.024;B.removeEdgeEffect=!1;return B}Q._inheritsLoose(u,F);u.prototype.clone=function(){return new L({slopeType:this.slopeType,zFactor:this.zFactor,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,removeEdgeEffect:this.removeEdgeEffect,
raster:this.raster})};return u}(N);l.__decorate([ca.enumeration(J)],N.prototype,"slopeType",void 0);l.__decorate([E.property({type:Number,json:{write:!0}})],N.prototype,"zFactor",void 0);l.__decorate([E.property({type:Number,json:{name:"psPower",write:!0}})],N.prototype,"pixelSizePower",void 0);l.__decorate([E.property({type:Number,json:{name:"psZFactor",write:!0}})],N.prototype,"pixelSizeFactor",void 0);l.__decorate([E.property({type:Boolean,json:{write:!0}})],N.prototype,"removeEdgeEffect",void 0);
return N=L=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.SlopeFunctionArguments")],N)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./StatisticsHistogramFunctionArguments".split(" "),function(Q,
l,J,E,p,G,ca,U){E=function(N){function L(){var u=N.apply(this,arguments)||this;u.functionName="StatisticsHistogram";u.functionArguments=null;u.rasterArgumentNames=["raster"];u.isNoopProcess=!0;return u}Q._inheritsLoose(L,N);var F=L.prototype;F._bindSourceRasters=function(){var u=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType("u8");u=u.clone();const {statistics:B,histograms:h}=this.functionArguments;h&&(u.histograms=h);B&&(u.statistics=B);this.rasterInfo=u;return{success:!0,
supportsGPU:!0}};F._processPixels=function(u){return u.pixelBlocks?.[0]};return L}(ca);l.__decorate([J.property({json:{write:!0,name:"rasterFunction"}})],E.prototype,"functionName",void 0);l.__decorate([J.property({type:U,json:{write:!0,name:"rasterFunctionArguments"}})],E.prototype,"functionArguments",void 0);l.__decorate([J.property()],E.prototype,"rasterArgumentNames",void 0);l.__decorate([J.property({json:{write:!0}})],E.prototype,"indexedColormap",void 0);l.__decorate([J.property()],E.prototype,
"isNoopProcess",void 0);return E=l.__decorate([G.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunction")],E)})},"esri/layers/support/rasterFunctions/StatisticsHistogramFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(Q,l,J,E,p,G,ca,U,N){var L;p=L=function(F){function u(){var h=F.apply(this,arguments)||this;h.statistics=null;h.histograms=null;return h}Q._inheritsLoose(u,F);var B=u.prototype;B.readStatistics=function(h,e){if(!h?.length)return null;const f=[];h.forEach(c=>{f.push({min:c.min,max:c.max,avg:c.avg??c.mean,stddev:c.stddev??c.standardDeviation})});return f};B.writeStatistics=function(h,e,f){if(h?.length){var c=[];h.forEach(n=>{n={...n,mean:n.avg,standardDeviation:n.stddev};delete n.avg;delete n.stddev;
c.push(n)});e[f]=c}};B.clone=function(){return new L({statistics:J.clone(this.statistics),histograms:J.clone(this.histograms)})};return u}(N);l.__decorate([E.property({json:{write:!0}})],p.prototype,"statistics",void 0);l.__decorate([G.reader("statistics")],p.prototype,"readStatistics",null);l.__decorate([U.writer("statistics")],p.prototype,"writeStatistics",null);l.__decorate([E.property({json:{write:!0}})],p.prototype,"histograms",void 0);return p=L=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramFunctionArguments")],
p)})},"esri/layers/support/rasterFunctions/StretchFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./pixelUtils ./StretchFunctionArguments ./stretchUtils".split(" "),function(Q,l,J,E,p,G,ca,U,N,L,F){p=function(u){function B(){var e=u.apply(this,arguments)||
this;e.functionName="Stretch";e.functionArguments=null;e.rasterArgumentNames=["raster"];e.lookup=null;e.cutOffs=null;return e}Q._inheritsLoose(B,u);var h=B.prototype;h._bindSourceRasters=function(){this.cutOffs=this.lookup=null;var e=this.sourceRasterInfos[0];const {pixelType:f}=e;var {functionArguments:c}=this;const {dynamicRangeAdjustment:n,gamma:w,useGamma:x}=c;if(!n&&["u8","u16","s8","s16"].includes(f)){c=F.getStretchCutoff(c.toJSON(),{rasterInfo:e});const b=this._isOutputRoundingNeeded()?"round":
"float";this.lookup=F.createStretchLUT({pixelType:f,...c,gamma:x?w:null,rounding:b});this.cutOffs=c}else n||(this.cutOffs=F.getStretchCutoff(c.toJSON(),{rasterInfo:e}));this.outputPixelType=this._getOutputPixelType(f);e=e.clone();e.pixelType=this.outputPixelType;e.statistics=null;e.histograms=null;e.colormap=null;e.attributeTable=null;"u8"===this.outputPixelType&&(e.keyProperties.DataType="processed");this.rasterInfo=e;return{success:!0,supportsGPU:!n}};h._processPixels=function(e){e=e.pixelBlocks?.[0];
if(J.isNone(e))return e;var {lookup:f}=this;if(f)return N.lookupPixels(e,{...f,outputPixelType:this.rasterInfo.pixelType});({functionArguments:f}=this);const c=this.cutOffs||F.getStretchCutoff(f.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:e});return F.stretch(e,{...c,gamma:f.useGamma?f.gamma:null,outputPixelType:this.outputPixelType})};h._getWebGLParameters=function(){const {outputMin:e=0,outputMax:f=255,gamma:c,useGamma:n}=this.functionArguments,w=2<=this.rasterInfo.bandCount?3:1,x=
n&&c&&c.length?F.computeGammaCorrection(w,c):[1,1,1],{minCutOff:b,maxCutOff:d}=this.cutOffs??{minCutOff:[0,0,0],maxCutOff:[255,255,255]};1===b.length&&(b[1]=b[2]=b[0],d[1]=d[2]=d[0]);const r=new Float32Array(w);var q;for(q=0;q<w;q++)r[q]=(f-e)/(d[q]-b[q]);q=this._isOutputRoundingNeeded();return{bandCount:w,outMin:e,outMax:f,minCutOff:b,maxCutOff:d,factor:r,useGamma:n,gamma:n&&c?c:[1,1,1],gammaCorrection:n&&x?x:[1,1,1],stretchType:this.functionArguments.stretchType,isOutputRounded:q,type:"stretch"}};
return B}(U);l.__decorate([E.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0);l.__decorate([E.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0);l.__decorate([E.property()],p.prototype,"rasterArgumentNames",void 0);l.__decorate([E.property({json:{write:!0}})],p.prototype,"lookup",void 0);l.__decorate([E.property({json:{write:!0}})],p.prototype,"cutOffs",void 0);return p=l.__decorate([ca.subclass("esri.layers.support.rasterFunctions.StretchFunction")],
p)})},"esri/layers/support/rasterFunctions/StretchFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),function(Q,l,J,E,p,G,ca,U,
N,L){var F;J=new J.JSONMap({0:"none",3:"standard-deviation",4:"histogram-equalization",5:"min-max",6:"percent-clip",9:"sigmoid"},{useNumericKeys:!0});L=F=function(u){function B(){var e=u.apply(this,arguments)||this;e.computeGamma=!1;e.dynamicRangeAdjustment=!1;e.gamma=[];e.histograms=null;e.statistics=null;e.stretchType="none";e.useGamma=!1;return e}Q._inheritsLoose(B,u);var h=B.prototype;h.writeStatistics=function(e,f,c){e?.length&&(Array.isArray(e[0])||(e=e.map(n=>[n.min,n.max,n.avg,n.stddev])),
f[c]=e)};h.clone=function(){return new F({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:E.clone(this.statistics),gamma:E.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,histograms:E.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment,raster:this.raster})};
return B}(L);l.__decorate([p.property({type:Boolean,json:{write:!0}})],L.prototype,"computeGamma",void 0);l.__decorate([p.property({type:Boolean,json:{name:"dra",write:!0}})],L.prototype,"dynamicRangeAdjustment",void 0);l.__decorate([p.property({type:[Number],json:{write:!0}})],L.prototype,"gamma",void 0);l.__decorate([p.property()],L.prototype,"histograms",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],L.prototype,"maxPercent",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],
L.prototype,"minPercent",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],L.prototype,"numberOfStandardDeviations",void 0);l.__decorate([p.property({type:Number,json:{name:"max",write:!0}})],L.prototype,"outputMax",void 0);l.__decorate([p.property({type:Number,json:{name:"min",write:!0}})],L.prototype,"outputMin",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],L.prototype,"sigmoidStrengthLevel",void 0);l.__decorate([p.property({json:{type:[[Number]],write:!0}})],L.prototype,
"statistics",void 0);l.__decorate([N.writer("statistics")],L.prototype,"writeStatistics",null);l.__decorate([ca.enumeration(J)],L.prototype,"stretchType",void 0);l.__decorate([p.property({type:Boolean,json:{write:!0}})],L.prototype,"useGamma",void 0);return L=F=l.__decorate([U.subclass("esri.layers.support.rasterFunctions.StretchFunctionArguments")],L)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils",
"../../../renderers/support/stretchRendererUtils"],function(Q,l,J,E,p){function G(u,B=256){B=Math.min(B,256);const {size:h,counts:e}=u;u=new Uint8Array(h);var f=e.reduce((b,d)=>b+d/B,0);let c=0;var n=0;let w=0,x=f;for(let b=0;b<h;b++)if(w+=e[b],!(b<h-1&&w+e[b+1]<x)){for(;c<B-1&&x<w;)c++,x+=f;for(;n<=b;n++)u[n]=c;n=b+1}for(f=n;f<h;f++)u[f]=B-1;return u}function ca(u,B){u=Math.min(Math.max(u,-100),100);B=Math.min(Math.max(B??0,-100),100);let h=0,e=0;const f=new Uint8Array(256);for(h=0;256>h;h++)0<u&&
100>u?e=(200*h-25500+510*B)/(2*(100-u))+128:0>=u&&-100<u?e=(200*h-25500+510*B)*(100+u)/2E4+128:100===u?(e=200*h-25500+256*(100-u)+510*B,e=0<e?255:0):-100===u&&(e=128),f[h]=255<e?255:0>e?0:e;return f}function U(u){if(l.isNone(u)||!u.pixels?.length)return null;const {pixels:B,mask:h,pixelType:e}=u,f=u.width*u.height,c=B.length;let n,w;let x;var b;const d=[],r=[];for(x=0;x<c;x++){var q=new Uint32Array(256);var k=B[x];if("u8"===e)if(n=-.5,w=255.5,h)for(b=0;b<f;b++)h[b]&&q[k[b]]++;else for(b=0;b<f;b++)q[k[b]]++;
else{b=!1;u.statistics||(u.updateStatistics(),b=!0);var g=u.statistics;n=g[x].minValue;w=g[x].maxValue;var t=(w-n)/256;if(0===t)for(!g||u.validPixelCount||b||u.updateStatistics(),t=(u.validPixelCount||u.width*u.height)/256,b=0;256>b;b++)q[b]=Math.round(t*(b+1))-Math.round(t*b);else{g=new Uint32Array(257);for(b=0;b<f;b++)h&&!h[b]||g[Math.floor((k[b]-n)/t)]++;for(b=0;255>b;b++)q[b]=g[b];q[255]=g[255]+g[256]}}d.push({min:n,max:w,size:256,counts:q});for(b=g=k=t=0;256>b;b++)t+=q[b],k+=b*q[b];k/=t;for(b=
0;256>b;b++)g+=q[b]*(b-k)**2;b=Math.sqrt(g/(t-1));t=(w-n)/256;q=(k+.5)*t+n;t*=b;r.push({min:n,max:w,avg:q,stddev:t})}return{statistics:r,histograms:d}}function N(u,B){if(null==B||0===B.length)return u;const h=Math.max.apply(null,B),{minCutOff:e,maxCutOff:f,outMin:c,outMax:n,histogramLut:w}=u;return e.length===B.length||e.length<=h?u:{minCutOff:B.map(x=>e[x]),maxCutOff:B.map(x=>f[x]),histogramLut:w?B.map(x=>w[x]):null,outMin:c,outMax:n}}function L(u,B){const h=new Float32Array(u);for(let e=0;e<u;e++)h[e]=
1<B[e]?2<B[e]?6.5+(B[e]-2)**2.5:6.5+100*(2-B[e])**4:1;return h}const F=[.299,.587,.114];Q.computeGammaCorrection=L;Q.computeGammaValues=function(u,B,h){const e=[];for(let x=0;x<B.length;x++){var f=0,c=0,n=0;"min"in B[x]?{min:f,max:c,avg:n}=B[x]:[f,c,n]=B[x];n=n??0;"u8"!==u&&(n=255*(n-f)/(c-f));h&&(n*=F[x]);f=e;c=f.push;if(0>=n||255<=n)n=1;else{var w=0;150!==n&&(w=150>=n?45*Math.cos(.01047*n):17*Math.sin(.021*n));w=Math.log((n+w)/255);0===w?n=1:(n=Math.log(n/255)/w,n=isNaN(n)?1:Math.min(9.9,Math.max(.01,
n)))}c.call(f,n)}return e};Q.createContrastBrightnessLUT=ca;Q.createHistogramEqualizationLUT=G;Q.createStretchLUT=function(u){const {minCutOff:B,maxCutOff:h,gamma:e,pixelType:f,rounding:c}=u,n=u.outMin||0,w=u.outMax||255;if(!["u8","u16","s8","s16"].includes(f))return null;const x=B.length;let b,d,r=0;"s8"===f?r=-127:"s16"===f&&(r=-32767);let q=256;["u16","s16"].includes(f)&&(q=65536);var k=[],g=[];const t=w-n;for(b=0;b<x;b++)g[b]=h[b]-B[b],k[b]=0===g[b]?0:t/g[b];let z;const A=[];let y,D;if(e&&e.length>=
x)for(k=L(x,e),b=0;b<x;b++){D=[];for(d=0;d<q;d++)if(0===g[b])D[d]=n;else{var I=d+r;z=(I-B[b])/g[b];y=1;1<e[b]&&(y-=(1/t)**(z*k[b]));I<h[b]&&I>B[b]?(I=y*t*z**(1/e[b])+n,D[d]="floor"===c?Math.floor(I):"round"===c?Math.round(I):I):D[d]=I>=h[b]?w:n}A[b]=D}else for(b=0;b<x;b++){D=[];for(d=0;d<q;d++)I=d+r,I<=B[b]?D[d]=n:I>=h[b]?D[d]=w:(g=(I-B[b])*k[b]+n,D[d]="floor"===c?Math.floor(g):"round"===c?Math.round(g):g);A[b]=D}if(null!=u.contrastOffset)for(u=ca(u.contrastOffset,u.brightnessOffset),b=0;b<x;b++)for(D=
A[b],d=0;d<q;d++)D[d]=u[D[d]];return{lut:A,offset:r}};Q.estimateStatisticsFromHistograms=function(u){const B=[];for(let c=0;c<u.length;c++){const {min:n,max:w,size:x,counts:b}=u[c];let d=0;var h=0;for(var e=0;e<x;e++)d+=b[e],h+=e*b[e];h/=d;e=0;for(var f=0;f<x;f++)e+=b[f]*(f-h)**2;f=(w-n)/x;B.push({min:n,max:w,avg:(h+.5)*f+n,stddev:Math.sqrt(e/(d-1))*f})}return B};Q.estimateStatisticsHistograms=U;Q.getStretchCutoff=function(u,B){const {pixelBlock:h,bandIds:e,returnHistogramLut:f,rasterInfo:c}=B;var n=
null;B=null;var w=u.stretchType;"number"===typeof w&&(w=p.stretchTypeFunctionEnum[w]);u.dra?"minMax"===w&&l.isSome(h)&&h.statistics?n=h.statistics.map(I=>[I.minValue,I.maxValue,0,0]):(B=U(h),n=l.isSome(B)?B.statistics:null,B=l.isSome(B)?B.histograms:null):(n=0<u.statistics?.length?u.statistics:l.unwrap(c.statistics),B=u.histograms||l.unwrap(c.histograms));"percentClip"!==w&&"histogramEqualization"!==w||B?.length||(w="minMax");var x=n?.length||B?.length||c.bandCount;const b=[],d=[];let r;let q,k,g,
t;n&&!Array.isArray(n[0])&&(n=n.map(I=>[I.min,I.max,I.avg,I.stddev]));const [z,A]=E.getPixelValueRange(c.pixelType);if(!n?.length){n=[];for(g=0;g<x;g++)n.push([z,A,1,1]);"standardDeviation"===w&&(w="minMax")}switch(w){case "none":for(g=0;g<x;g++)b[g]=z,d[g]=A;break;case "minMax":for(g=0;g<x;g++)b[g]=n[g][0],d[g]=n[g][1];break;case "standardDeviation":for(g=0;g<x;g++)b[g]=n[g][2]-u.numberOfStandardDeviations*n[g][3],d[g]=n[g][2]+u.numberOfStandardDeviations*n[g][3],b[g]<n[g][0]&&(b[g]=n[g][0]),d[g]>
n[g][1]&&(d[g]=n[g][1]);break;case "histogramEqualization":l.assertIsSome(B);for(g=0;g<x;g++)b[g]=B[g].min,d[g]=B[g].max;break;case "percentClip":l.assertIsSome(B);for(g=0;g<B.length;g++){n=B[g];q=new Uint32Array(n.size);var y=[...n.counts];20<=y.length&&(y[0]=y[1]=y[2]=y[y.length-1]=y[y.length-2]=0);r=0;x=(n.max-n.min)/n.size;k=-.5===n.min&&1===x?.5:0;for(t=0;t<n.size;t++)r+=y[t],q[t]=r;y=(u.minPercent||0)*r/100;b[g]=n.min+k;for(t=0;t<n.size;t++)if(q[t]>y){b[g]=n.min+x*(t+k);break}y=(1-(u.maxPercent||
0)/100)*r;d[g]=n.max+k;for(t=n.size-2;0<=t;t--)if(q[t]<y){d[g]=n.min+x*(t+2-k);break}d[g]<b[g]&&(n=b[g],b[g]=d[g],d[g]=n)}break;default:for(g=0;g<x;g++)b[g]=n[g][0],d[g]=n[g][1]}let D;"histogramEqualization"===w?(l.assertIsSome(B),w=B[0].size||256,u=0,f&&(D=B.map(I=>G(I)))):(w=u.max||255,u=u.min||0);return N({minCutOff:b,maxCutOff:d,outMax:w,outMin:u,histogramLut:D},e)};Q.stretch=function(u,B){if(l.isNone(u)||!u.pixels?.length)return u;const {mask:h,width:e,height:f,pixels:c}=u,{minCutOff:n,maxCutOff:w,
gamma:x}=B;var b=B.outMin||0;const d=B.outMax||255,r=e*f,q=B.outputPixelType||"u8";u=u.pixels.map(()=>J.createEmptyBand(q,r));const k=u.length;let g;let t,z;var A=d-b,y=[];const D=[];for(g=0;g<k;g++)D[g]=w[g]-n[g],y[g]=0===D[g]?0:A/D[g];const I=q.startsWith("u")||q.startsWith("s"),V=!!B.isRenderer;if(x&&x.length>=k)for(y=L(k,x),B=0;B<r;B++){if(null==h||h[B])for(g=0;g<k;g++)if(0===D[g])u[g][B]=b;else{var C=c[g][B];z=(C-n[g])/D[g];t=1;1<x[g]&&(t-=(1/A)**(z*y[g]));C<w[g]&&C>n[g]?(C=t*A*z**(1/x[g])+b,
u[g][B]=V?Math.floor(C):I?Math.round(C):C):u[g][B]=C>=w[g]?d:b}}else for(B=0;B<r;B++)if(null==h||h[B])for(g=0;g<k;g++)C=c[g][B],C<w[g]&&C>n[g]?(A=(C-n[g])*y[g]+b,u[g][B]=V?Math.floor(A):I?Math.round(A):A):u[g][B]=C>=w[g]?d:b;b=new J({width:e,height:f,mask:h,pixels:u,pixelType:q});b.updateStatistics();return b};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(Q,l){l=new l.JSONMap({none:"none",
standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});Q.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};Q.stretchTypeJSONDict=l;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u){function B(v,K,Y){return!U.canProjectWithoutEngine(v,K,Y)}function h(v,K,Y){if((v=B(v,K,Y))&&!U.isLoaded())throw new E("rasterprojectionhelper-project","projection engine is not loaded");return v}function e(){e=l._asyncToGenerator(function*(){U.isLoaded()||(yield U.load())});return e.apply(this,arguments)}function f(v,K,Y,S=null){const T=v.spatialReference;if(T.equals(K))return v;h(T,K,S);Y=Y.center;Y=new N({xmin:Y.x-v.x/2,xmax:Y.x+v.x/2,ymin:Y.y-v.y/2,ymax:Y.y+
v.y/2,spatialReference:T});S=U.project(Y,K,S);Y=D(K);p.isNone(S)||p.isSome(Y)&&S.width>=Y?(K=G.getMetersPerUnitForSR(T)/G.getMetersPerUnitForSR(K),v={x:v.x*K,y:v.y*K}):v={x:S.width,y:S.height};return v}function c(v,K=.01){return G.getMetersPerUnitForSR(v)?K/G.getMetersPerUnitForSR(v):0}function n(v,K,Y=null,S=!0){const T=v.spatialReference;if(T.equals(K))return v;h(T,K,Y);Y=U.project(v,K,Y);if(!S||!Y)return Y;w([v],[Y],T,K);return Y}function w(v,K,Y,S){const T=I(Y,!0),W=I(S,!0);Y=c(Y,500);S=c(S,500);
if(Y&&p.isSome(T)&&p.isSome(W))for(let ea=0;ea<v.length;ea++){const na=K[ea];if(!na)continue;const {x:a}=v[ea],{x:m}=na;m>=W[1]-S&&Math.abs(a-T[0])<Y?na.x-=W[1]-W[0]:m<=W[0]+S&&Math.abs(a-T[1])<Y&&(na.x+=W[1]-W[0])}}function x(v){const {inSR:K,outSR:Y,datumTransformation:S,preferPE:T}=v;if(K.equals(Y))return{points:v}=k(v,null),v;if(K.isWebMercator&&Y.isWGS84||K.isWGS84&&Y.isWebMercator){const {cols:m,rows:H,xres:R,yres:ha,usePixelCenter:ka,inSR:ra,outSR:pa}=v;let {xmin:la,ymax:sa}=v;ka&&(la+=R/2,
sa-=ha/2);v=[];var W=[],ea=Math.max(m,H);for(var na=0;na<ea;na++){var a=U.project(new L({x:la+R*Math.min(m,na),y:sa-ha*Math.min(H,na),spatialReference:ra}),pa);na<=m&&v.push(a.x);na<=H&&W.push(a.y)}ea=[];for(na=0;na<m;na++)for(a=0;a<H;a++)ea.push([v[na],W[a]]);return ea}if(h(K,Y,S)&&T){if(K.isGeographic)return d(v);W=r(K);if(p.isSome(W))return d(v)}return b(v)}function b(v){var {points:K}=k(v,null);const {inSR:Y,outSR:S,datumTransformation:T}=v;v=K.map(W=>new L(W[0],W[1],Y));K=U.project(v,S,T);T&&
w(v,K,Y,S);return K.map(W=>W?[W.x,W.y]:[NaN,NaN])}function d(v){const {inSR:K,outSR:Y,datumTransformation:S}=v;var T=r(K);const {points:W,mask:ea}=k(v,T);K.isGeographic||(v=K.wkid?ca.PeFactory.coordsys(K.wkid):ca.PeFactory.fromString(K.isGeographic?ca.PeDefs.PE_TYPE_GEOGCS:ca.PeDefs.PE_TYPE_PROJCS,K.wkt),ca.PeCSTransformations.projToGeog(v,W.length,W));if(p.isSome(S)&&S.steps.length){var na;Y.isGeographic&&(na=W.map(([a])=>179.9955<a?1:-179.9955>a?-1:0));S.steps.forEach(a=>{const m=a.wkid?ca.PeFactory.geogtran(a.wkid):
ca.PeFactory.fromString(ca.PeDefs.PE_TYPE_GEOGTRAN,a.wkt);ca.PeGTTransformations.geogToGeog(m,W.length,W,null,a.isInverse?ca.PeDefs.PE_TRANSFORM_2_TO_1:ca.PeDefs.PE_TRANSFORM_1_TO_2)});if(na)for(v=0;v<W.length;v++){T=na[v];const a=W[v][0],m=179.9955<a?1:-179.9955>a?-1:0;T&&m&&T!==m&&(W[v][0]=0<T?a+360:a-360)}}Y.isGeographic||(na=r(Y,!0),na=p.isSome(na)&&na.isEnvelope?[na.bbox[1],na.bbox[3]]:[-90,90],g(W,na),na=Y.wkid?ca.PeFactory.coordsys(Y.wkid):ca.PeFactory.fromString(Y.isGeographic?ca.PeDefs.PE_TYPE_GEOGCS:
ca.PeDefs.PE_TYPE_PROJCS,Y.wkt),ca.PeCSTransformations.geogToProj(na,W.length,W));na=W;if(ea&&W.length!==ea.length){na=[];for(let a=0,m=0;a<ea.length;a++)ea[a]?na.push(W[m++]):na.push([NaN,NaN])}return na}function r(v,K=!1){var Y=v.wkid||v.wkt;if(!Y||v.isGeographic)return null;Y=String(Y);if(P.has(Y))return Y=P.get(Y),K?Y?.gcs:Y?.pcs;var S=v.wkid?ca.PeFactory.coordsys(v.wkid):ca.PeFactory.fromString(v.isGeographic?ca.PeDefs.PE_TYPE_GEOGCS:ca.PeDefs.PE_TYPE_PROJCS,v.wkt);v=c(v,1E-4);v=q(S,v);S=q(S,
0,!0);P.set(Y,{pcs:v,gcs:S});return K?S:v}function q(v,K=0,Y=!1){var S=ca.PePCSInfo.generate(v),T=Y?v.horizonGcsGenerate():v.horizonPcsGenerate();if(!S||!T?.length)return null;v=!1;var W=T.find(H=>1===H.getInclusive()&&1===H.getKind());if(!W){W=T.find(H=>1===H.getInclusive()&&0===H.getKind());if(!W)return null;v=!0}Y=Y?0:(2===S.getNorthPoleLocation()?1:0)|(2===S.getSouthPoleLocation()?2:0);S=S.isPannableRectangle();W=W.getCoord();if(v)return{isEnvelope:v,isPannable:S,vertices:W,coef:null,bbox:[W[0][0]-
K,W[0][1]-K,W[1][0]+K,W[1][1]+K],poleLocation:Y};K=0;v=[];let [ea,na]=W[0],[a,m]=W[0];for(let H=0,R=W.length;H<R;H++){K++;K===R&&(K=0);const [ha,ka]=W[H],[ra,pa]=W[K];if(pa===ka)v.push([ha,ra,ka,pa,2]);else{T=(ra-ha)/(pa-ka||1E-4);const la=ha-T*ka;ka<pa?v.push([T,la,ka,pa,0]):v.push([T,la,pa,ka,1])}ea=ea<ha?ea:ha;na=na<ka?na:ka;a=a>ha?a:ha;m=m>ka?m:ka}return{isEnvelope:!1,isPannable:S,vertices:W,coef:v,bbox:[ea,na,a,m],poleLocation:Y}}function k(v,K){const Y=[],{cols:S,rows:T,xres:W,yres:ea,usePixelCenter:na}=
v;let {xmin:a,ymax:m}=v;na&&(a+=W/2,m-=ea/2);if(p.isNone(K)){for(v=0;v<S;v++)for(K=0;K<T;K++)Y.push([a+W*v,m-ea*K]);return{points:Y}}v=new Uint8Array(S*T);if(K.isEnvelope){const {bbox:[la,sa,wa,ya]}=K;for(let za=0,Ba=0;za<S;za++){var H=a+W*za,R=K.isPannable||H>=la&&H<=wa;for(var ha=0;ha<T;ha++,Ba++){var ka=m-ea*ha;R&&ka>=sa&&ka<=ya&&(Y.push([H,ka]),v[Ba]=1)}}return{points:Y,mask:v}}H=K.coef;K=[];for(R=0;R<T;R++){var ra=m-ea*R;ha=[];ka=[];for(var pa=0;pa<H.length;pa++){const [la,sa,wa,ya,za]=H[pa];
ra===wa&&wa===ya?(ha.push(la),ha.push(sa),ka.push(2),ka.push(2)):ra>=wa&&ra<=ya&&(ha.push(la*ra+sa),ka.push(za))}ra=ha;if(2<ha.length){pa=2===ka[0]?0:ka[0];let la=ha[0];ra=[];for(let sa=1;sa<ka.length;sa++)if(2!==ka[sa]||sa===ka.length-1)ka[sa]!==pa&&(ra.push(0===pa?Math.min(la,ha[sa-1]):Math.max(la,ha[sa-1])),pa=ka[sa],la=ha[sa]),sa===ka.length-1&&ra.push(0===ka[sa]?Math.min(la,ha[sa]):Math.max(la,ha[sa]));ra.sort((sa,wa)=>sa-wa)}else ha[0]>ha[1]&&(ra=[ha[1],ha[0]]);K.push(ra)}for(let la=0,sa=0;la<
S;la++)for(H=a+W*la,R=0;R<T;R++,sa++)if(ha=m-ea*R,ka=K[R],2===ka.length)H>=ka[0]&&H<=ka[1]&&(Y.push([H,ha]),v[sa]=1);else if(2<ka.length){ra=!1;for(pa=0;pa<ka.length;pa+=2)if(H>=ka[pa]&&H<=ka[pa+1]){ra=!0;break}ra&&(Y.push([H,ha]),v[sa]=1)}return{points:Y,mask:v}}function g(v,K){const [Y,S]=K;for(K=0;K<v.length;K++){const T=v[K][1];if(T<Y||T>S)v[K]=[NaN,NaN]}}function t(v){const K=D(v[0].spatialReference);if(2>v.length||p.isNone(K))return v[0];let {xmin:Y,xmax:S,ymin:T,ymax:W}=v[0];for(let ea=1;ea<
v.length;ea++){const na=v[ea];S=na.xmax+K*ea;T=Math.min(T,na.ymin);W=Math.max(W,na.ymax)}return new N({xmin:Y,xmax:S,ymin:T,ymax:W,spatialReference:v[0].spatialReference})}function z(v,K,Y=null,S=!0){var T=v.spatialReference;if(T.equals(K))return v;var W=C(v);const ea=D(T,!0);var na=D(K);if(0===W||p.isNone(ea)||p.isNone(na))return W=y(v,K,Y,S),p.isNone(ea)&&p.isSome(na)&&Math.abs(W.width-na)<c(K)&&U.isLoaded()&&(T=r(T),p.isSome(T)&&T.poleLocation===qa.None&&v.width<(T.bbox[2]-T.bbox[0])/2)?A(v,K)||
W:W;na=v.clone().normalize();if(1===na.length&&v.xmax<ea&&v.xmax-ea/2>c(T)){const {xmin:a,xmax:m}=v;for(let H=0;H<=W;H++)na[H]=new N({xmin:0===H?a:-ea/2,xmax:H===W?m-ea*H:ea/2,ymin:v.ymin,ymax:v.ymax,spatialReference:T})}v=na.map(a=>y(a,K,Y,S));return t(v.filter(p.isSome))}function A(v,K){const Y=D(K);if(p.isNone(Y))return null;let {xmin:S,ymin:T,xmax:W,ymax:ea}=v;var na=v.spatialReference;v=new F({spatialReference:na,rings:[[[S,T],[W,T],[W,ea],[S,ea],[S,T]]]});v=U.project(v,K);if(2!==v.rings.length||
!v.rings[0].length||!v.rings[1].length)return null;({rings:v}=v);na=c(na);K=new N({spatialReference:K});for(let a=0;2>a;a++){S=W=v[a][0][0];T=ea=v[a][0][1];for(let m=0;m<v[a].length;m++)S=S>v[a][m][0]?v[a][m][0]:S,W=W<v[a][m][0]?v[a][m][0]:W,T=T>v[a][m][1]?v[a][m][1]:T,ea=ea<v[a][m][1]?v[a][m][1]:ea;if(0===a)K.ymin=T,K.ymax=ea,K.xmin=S,K.xmax=W;else if(K.ymin=Math.min(K.ymin,T),K.ymax=Math.max(K.ymax,ea),Math.abs(W-Y/2)<na)K.xmin=S,K.xmax+=Y;else if(Math.abs(S+Y/2)<na)K.xmax=W+Y;else return null}return K}
function y(v,K,Y=null,S=!0,T=!0){const W=v.spatialReference;if(W.equals(K)||!K)return v;h(W,K,Y);const ea=U.project(v,K,Y);if(T&&K.isWebMercator&&ea&&(ea.ymax=Math.min(2.0037508342787E7,ea.ymax),ea.ymin=Math.max(-2.0037508342787E7,ea.ymin),ea.ymin>=ea.ymax))return null;if(!S||!ea)return ea;var na=I(W,!0);S=I(K,!0);if(p.isNone(na)||p.isNone(S))return ea;T=c(W,.001);const a=c(W,500);var m=c(K,.001);if(Math.abs(ea.xmin-S[0])<m&&Math.abs(ea.xmax-S[1])<m){m=Math.abs(v.xmin-na[0]);na=Math.abs(na[1]-v.xmax);
if(m<T&&na>a){ea.xmin=S[0];var H=[];H.push(new L(v.xmax,v.ymin,W));H.push(new L(v.xmax,(v.ymin+v.ymax)/2,W));H.push(new L(v.xmax,v.ymax,W));H=H.map(R=>n(R,K,Y)).filter(R=>!isNaN(R?.x)).map(R=>R.x);ea.xmax=Math.max.apply(null,H)}na<T&&m>a&&(ea.xmax=S[1],S=[],S.push(new L(v.xmin,v.ymin,W)),S.push(new L(v.xmin,(v.ymin+v.ymax)/2,W)),S.push(new L(v.xmin,v.ymax,W)),v=S.map(R=>n(R,K,Y)).filter(R=>!isNaN(R?.x)).map(R=>R.x),ea.xmin=Math.min.apply(null,v))}else v=c(K,.001),Math.abs(ea.xmin-S[0])<v&&(ea.xmin=
S[0]),Math.abs(ea.xmax-S[1])<v&&(ea.xmax=S[1]);return ea}function D(v,K=!1){return v?v.isWebMercator?2*(K?2.0037508342787E7:2.0037508342788905E7):v.wkid&&v.isGeographic?360:2*ja[v.wkid]||null:null}function I(v,K=!1){if(v.isGeographic)return[-180,180];v=D(v,K);return p.isSome(v)?[-v/2,v/2]:null}function V(v,K,Y,S){v=(v-K)/Y;0!==v-Math.floor(v)?v=Math.floor(v):S&&--v;return v}function C(v,K=!1){var Y=D(v.spatialReference);if(p.isNone(Y))return 0;const S=K?0:-(Y/2),T=c(v.spatialReference),W=!K&&Math.abs(v.xmin+
Y/2)<T?-Y/2:v.xmin;v=V(!K&&Math.abs(v.xmax-Y/2)<T?Y/2:v.xmax,S,Y,!0);Y=V(W,S,Y,!1);return v-Y}function M(v){const {projectedExtent:K,srcBufferExtent:Y,pixelSize:S,datumTransformation:T,rasterTransform:W}=v;var ea=K.spatialReference;const na=Y.spatialReference;var a=h(ea,na);const {xmin:m,ymin:H,xmax:R,ymax:ha}=K,ka=D(na),ra=p.isSome(ka)&&(v.hasWrapAround||"gcs-shift"===W?.type);v=v.spacing||[32,32];var pa=v[0]*S.x,la=v[1]*S.y;const sa=1===v[0],wa=Math.ceil((R-m)/pa-.1/v[0])+(sa?0:1),ya=Math.ceil((ha-
H)/la-.1/v[1])+(sa?0:1);pa=x({cols:wa,rows:ya,xmin:m,ymax:ha,xres:pa,yres:la,inSR:ea,outSR:na,datumTransformation:T,preferPE:4>=v[0],usePixelCenter:sa});la=[];let za,Ba=0;const aa=sa?-1:NaN,{xmin:ma,xmax:Z,ymax:ua,width:va,height:ia}=Y,Aa=c(na,500),Ca=p.isSome(ka)&&0<ma&&Z>ka/2;var Fa=!1;a&&(Fa=r(ea),Fa=p.isSome(Fa)&&0<Fa.poleLocation);for(ea=0;ea<wa;ea++){a=[];for(let Ja=0;Ja<ya;Ja++){var Ga=pa[ea*ya+Ja];ra&&Ga[0]>Z&&Ga[0]>ka/2-Aa?Ga[0]-=ka:ra&&0===ea&&0>Ga[0]&&Ca&&!W&&(Ga[0]+=ka);!Ga||isNaN(Ga[0])||
isNaN(Ga[1])?(la.push(aa),la.push(aa),a.push(null),Ba++):(W&&(Ga=W.inverseTransform(new L({x:Ga[0],y:Ga[1],spatialReference:na})),Ga=[Ga.x,Ga.y]),a.push(Ga),0<ea&&ra&&za[Ja]&&Ga[0]<za[Ja][0]&&(Ga[0]+=ka,Fa&&Ga[0]>Z&&Ga[0]>ka&&(Ga[0]-=ka)),la.push((Ga[0]-ma)/va),la.push((ua-Ga[1])/ia))}za=a}return{offsets:la,error:null,coefficients:null,outofBoundPointCount:Ba,spacing:v,size:sa?[wa,ya]:[wa-1,ya-1]}}function da(v,K,Y){const {cols:S,rows:T}=K;K=new Float32Array((S-1)*(T-1)*12);const W=new Float32Array([-0,
-1,1,-1,1,-0,1,-0,-0]),ea=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let ha=0;ha<S-1;ha++){for(var na=0;na<T-1;na++){var a=ha*T*2+2*na,m=v[a];const ka=v[a+1];var H=v[a+2],R=v[a+3];a+=2*T;const ra=v[a],pa=v[a+1],la=v[a+2];a=v[a+3];let sa=0,wa=12*(na*(S-1)+ha);for(let ya=0;3>ya;ya++)K[wa++]=W[sa++]*m+W[sa++]*H+W[sa++]*la;sa=0;for(H=0;3>H;H++)K[wa++]=W[sa++]*ka+W[sa++]*R+W[sa++]*a;sa=0;for(R=0;3>R;R++)K[wa++]=ea[sa++]*m+ea[sa++]*ra+ea[sa++]*la;sa=0;for(m=0;3>m;m++)K[wa++]=ea[sa++]*ka+ea[sa++]*pa+ea[sa++]*
a}if(Y)for(na=0;na<K.length;na++)isNaN(K[na])&&(K[na]=-1)}return K}var qa;(function(v){v[v.None=0]="None";v[v.North=1]="North";v[v.South=2]="South";v[v.Both=3]="Both"})(qa||(qa={}));const xa=(v,K,Y,S=0)=>{if(1===Y[0])return[0,0];var T=1,W=-1,ea=1,na=-1;for(var a=0;a<v.length;a+=2)isNaN(v[a])||(T=T>v[a]?v[a]:T,W=W>v[a]?W:v[a],ea=ea>v[a+1]?v[a+1]:ea,na=na>v[a+1]?na:v[a+1]);const {cols:m,rows:H}=K;K=(W-T)/m/Y[0];Y=(na-ea)/H/Y[1];S*=2;ea=0;na=!1;T=[0,0];for(W=0;W<m-3;W++){for(a=0;a<H-3;a++){var R=W*H*
2+2*a;const ha=Math.abs(((v[R]+v[R+4]+v[R+4*H]+v[R+4*H+4])/4-v[R+2*H+2])/K);R=Math.abs(((v[R+1]+v[R+5]+v[R+4*H+1]+v[R+4*H+5])/4-v[R+2*H+3])/Y);ha+R>ea&&(ea=ha+R,T=[ha,R]);if(S&&ea>S){na=!0;break}}if(na)break}return T},ja={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,
53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},P=new Map,O=new Map;Q.computeProjectedScales=
function(v,K,Y=512,S=!0){const {extent:T,spatialReference:W,pixelSize:ea}=v,na=f(new L({x:ea.x,y:ea.y,spatialReference:W}),K,T);if(null==na)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const a=(na.x+na.y)/2,m=G.getMetersPerUnitForSR(K);var H=a*m*96*39.37,R=K.isGeographic?256/Y*2.958287637958547E8:256/Y*5.91657527591555E8,ha="vector-magdir"===v.dataType||"vector-uv"===v.dataType,ka=z(T,K),ra=Math.min(Math.ceil(Math.log(Math.min(v.width,v.height)/32)/Math.LN2),
Math.ceil(Math.log(R/2/H)/Math.LN2));!ha&&S&&(K.isGeographic||K.isWebMercator)&&(ha=0>ka.xmin*ka.xmax,!ha&&3>ra&&(S=D(K),p.isSome(S)&&(ha=2**ra*a*Y,Y=Math.ceil(S/ha),ha=1===Y||2===Y&&S/2-ka.xmax<ha)));S=H;v=Math.min(2,Math.max(1.414,v.storageInfo?.pyramidScalingFactor||2));if(ha)S=R,R=K.isGeographic?1.341104507446289E-6:.29858214164761665,ra=96*R*m*39.37,K=f(new L({x:R,y:R,spatialReference:{wkid:K.isGeographic?4326:3857}}),W,ka),K.x*=S/ra,K.y*=S/ra;else{K={x:ea.x,y:ea.y};for(ka=0;S<.5005*R&&ka<ra;)ka++,
S*=v,K.x*=v,K.y*=v;1.001>=Math.max(S,R)/Math.min(S,R)&&(S=R)}R=[S];ka=[{x:K.x,y:K.y}];for(H=Math.min(70.5310735,H)/1.001;S>=H;)S/=v,K.x/=v,K.y/=v,R.push(S),ka.push({x:K.x,y:K.y});return{projectedPixelSize:na,scales:R,srcResolutions:ka,isCustomTilingScheme:!ha}};Q.defaultGridSpacing=32;Q.defaultProjectionToleranceInPixels=4;Q.getDefaultDatumTransformationForDataset=function(v,K,Y){return h(v.spatialReference,K)?Y?U.getTransformation(K,v.spatialReference,v):U.getTransformation(v.spatialReference,K,
v):null};Q.getProjectedGridPoints=x;Q.getProjectionOffsetGrid=function(v){var K=v.isAdaptive&&null==v.spacing;let Y=v.spacing||[32,32],S=M(v);var T={cols:S.size[0]+1,rows:S.size[1]+1};const W=0<S.outofBoundPointCount&&S.outofBoundPointCount<S.offsets.length/2;let ea=S.outofBoundPointCount===S.offsets.length/2||K&&W?[0,0]:xa(S.offsets,T,Y,4);const na=(ea[0]+ea[1])/2;var a=v.projectedExtent.spatialReference;const m=v.srcBufferExtent.spatialReference;K&&(W||4<na)&&(B(a,m,v.datumTransformation)&&(a.isGeographic||
p.isSome(r(a))),Y=[4,4],S=M({...v,spacing:Y}),T={cols:S.size[0]+1,rows:S.size[1]+1},ea=xa(S.offsets,T,Y,4));S.error=ea;1<Y[0]&&(S.coefficients=da(S.offsets,T,W));!v.includeGCSGrid||a.isGeographic||a.isWebMercator||(m.isGeographic?S.gcsGrid={offsets:S.offsets,coefficients:S.coefficients,spacing:Y}:(K=r(a),p.isSome(K)&&!K.isEnvelope&&(a&&!a.isGeographic&&(K=String(a.wkid||a.wkt),O.has(K)?a=O.get(K):(a=(a.wkid?ca.PeFactory.coordsys(a.wkid):ca.PeFactory.fromString(ca.PeDefs.PE_TYPE_PROJCS,a.wkt)).getGeogcs().getCode(),
O.set(K,a)),a=new u({wkid:a})),a=z(v.projectedExtent,a),{offsets:v}=M({...v,srcBufferExtent:a,spacing:Y}),T=da(v,T,W),S.gcsGrid={offsets:v,coefficients:T,spacing:Y})));return S};Q.getRasterDatasetAlignmentInfo=function(v){const K=v.storageInfo.origin.x;var Y=D(v.spatialReference,!0);if(p.isNone(Y))return{originX:K,halfWorldWidth:null,pyramidsInfo:null};const S=Y/2,{nativePixelSize:T,storageInfo:W,extent:ea}=v,{maximumPyramidLevel:na,blockWidth:a,pyramidScalingFactor:m}=W;let H=T.x;const R=[];v=p.isSome(v.transform)&&
"gcs-shift"===v.transform.type;const ha=K+(v?0:S);Y=v?Y-K:S-K;for(let ka=0;ka<=na;ka++){const ra=(ea.xmax-K)/H/a,pa=Y/H/a;R.push({resolutionX:H,blockWidth:a,datsetColumnCount:0===ra-Math.floor(ra)?ra:Math.ceil(ra),worldColumnCountFromOrigin:0===pa-Math.floor(pa)?pa:Math.ceil(pa),leftMargin:Math.round(ha/H)%a,rightPadding:(a-Math.round(Y/H)%a)%a,originColumnOffset:Math.floor(ha/H/a)});H*=m}return{originX:K,halfWorldWidth:S,pyramidsInfo:R,hasGCSSShiftTransform:v}};Q.getWorldWidth=D;Q.getWorldWrapCount=
C;Q.load=function(){return e.apply(this,arguments)};Q.minimumGridSpacing=4;Q.projectExtent=z;Q.projectPoint=n;Q.projectResolution=f;Q.requirePE=B;Q.snapExtent=function(v){v=v.clone().normalize();return 1===v.length?v[0]:t(v)};Q.snapPyramid=function(v,K,Y){const {storageInfo:S,pixelSize:T}=K;var W=0;let ea=!1;var {pyramidResolutions:na}=S;if(p.isSome(na)&&na.length){v=(v.x+v.y)/2;var a=na[na.length-1];a=(a.x+a.y)/2;var m=(T.x+T.y)/2;if(v<=m)W=0;else if(v>=a)W=na.length,ea=8<v/a;else{a=m;for(let H=
1;H<=na.length;H++){m=(na[H-1].x+na[H-1].y)/2;if(v<=m){v===m?W=H:"down"===Y?(W=H-1,ea=8<v/a):W="up"===Y?H:v-a>m-v||2<v/a?H:H-1;break}a=m}}Y=0===W?T:na[W-1];ea&&(na=Math.min(Y.x,Y.y),v=G.getMetersPerUnitForSR(K.spatialReference),19567<na*v&&(ea=!1));return{pyramidLevel:W,pyramidResolution:new L({x:Y.x,y:Y.y,spatialReference:K.spatialReference}),excessiveReading:ea}}W=Math.log(v.x/T.x)/Math.LN2;v=Math.log(v.y/T.y)/Math.LN2;na=K.storageInfo.maximumPyramidLevel||0;W="down"===Y?Math.floor(Math.min(W,v)):
"up"===Y?Math.ceil(Math.max(W,v)):Math.round((W+v)/2);0>W?W=0:W>na&&(ea=W>na+3,W=na);Y=2**W;K=new L({x:Y*K.nativePixelSize.x,y:Y*K.nativePixelSize.y,spatialReference:K.spatialReference});return{pyramidLevel:W,pyramidResolution:K,excessiveReading:ea}};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(Q,l,J,E,p){function G(){return!!l._pe}function ca(){return!!p("esri-wasm")}
function U(){return h?h:h=(new Promise((f,c)=>Q(["./pe-wasm"],f,c))).then(f=>f.peWasm).then(({default:f})=>f({locateFile:c=>E.getAssetUrl(`esri/geometry/support/${c}`)})).then(f=>{N(f)})}function N(f){function c(x,b,d){x[b]=d(x[b])}l._pe=f;l.PeDefs.init();l.PeGTlistExtended.init();l.PeNotationMgrs.init();l.PeNotationUtm.init();l.PePCSInfo.init();l.PeGCSExtent=function(x){function b(){return x.apply(this,arguments)||this}J._inheritsLoose(b,x);b.prototype.destroy=function(){l._pe.destroy(this)};return b}(l._pe.PeGCSExtent);
f=[l._pe.PeDatum,l._pe.PeGeogcs,l._pe.PeGeogtran,l._pe.PeObject,l._pe.PeParameter,l._pe.PePrimem,l._pe.PeProjcs,l._pe.PeSpheroid,l._pe.PeUnit];for(var n of f)c(n.prototype,"getName",x=>function(){return x.call(this,Array(l.PeDefs.PE_NAME_MAX))});for(const x of[l._pe.PeGeogtran,l._pe.PeProjcs])c(x.prototype,"getParameters",b=>function(){const d=Array(l.PeDefs.PE_PARM_MAX);let r=b.call(this);for(let q=0;q<d.length;q++){const k=l._pe.getValue(r,"*");d[q]=k?l._pe.wrapPointer(k,l._pe.PeParameter):null;
r+=Int32Array.BYTES_PER_ELEMENT}return d});c(l._pe.PeHorizon.prototype,"getCoord",x=>function(){const b=this.getSize();if(!b)return null;const d=[],r=x.call(this);B(d,b,r);return d});c(l._pe.PeGTlistExtendedEntry.prototype,"getEntries",x=>{const b=l._pe._pe_getPeGTlistExtendedGTsSize();return function(){let d=null;var r=x.call(this);if(!l._pe.compare(r,l._pe.NULL)){d=[r];const q=this.getSteps();if(1<q){r=l._pe.getPointer(r);for(let k=1;k<q;k++)d.push(l._pe.wrapPointer(r+b*k,l._pe.PeGTlistExtendedGTs))}}return d}});
const w=l._pe._pe_getPeHorizonSize();n=x=>function(){let b=this._cache;b||(this._cache=b=new Map);if(b.has(x))return b.get(x);let d=null;var r=x.call(this);if(!l._pe.compare(r,l._pe.NULL)){d=[r];const q=r.getNump();if(1<q){r=l._pe.getPointer(r);for(let k=1;k<q;k++)d.push(l._pe.wrapPointer(r+w*k,l._pe.PeHorizon))}}b.set(x,d);return d};c(l._pe.PeProjcs.prototype,"horizonGcsGenerate",n);c(l._pe.PeProjcs.prototype,"horizonPcsGenerate",n);l._pe.PeObject.prototype.toString=function(x=l.PeDefs.PE_STR_OPTS_NONE){l._pe.ensureCache.prepare();
const b=l._pe.getPointer(this),d=l._pe.ensureInt8(Array(l.PeDefs.PE_BUFFER_MAX));return l._pe.UTF8ToString(l._pe._pe_object_to_string_ext(b,x,d))}}function L(f){if(f){var c=l._pe.getClass(f);c&&(c=l._pe.getCache(c))&&(f=l._pe.getPointer(f))&&delete c[f]}}function F(f,c){const n=[];c=Array(c);for(let w=0;w<f;w++)n.push(l._pe.ensureInt8(c));return n}function u(f){let c;Array.isArray(f[0])?(c=[],f.forEach(n=>{c.push(n[0],n[1])})):c=f;return c}function B(f,c,n,w=!1){if(w)for(w=0;w<2*c;w++)f[w]=l._pe.getValue(n+
w*Float64Array.BYTES_PER_ELEMENT,"double");else{w=0===f.length;for(let x=0;x<c;x++)w&&(f[x]=Array(2)),f[x][0]=l._pe.getValue(n,"double"),f[x][1]=l._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}let h;l._pe=null;l.PeCSTransformations=void 0;(function(f){function c(x,b,d){l._pe.ensureCache.prepare();var r=u(d);const q=d===r;r=l._pe.ensureFloat64(r);(x=l._pe._pe_geog_to_proj(l._pe.getPointer(x),b,r))&&B(d,b,r,q);return x}function n(x,b,d){return w(x,b,d,
0)}function w(x,b,d,r){l._pe.ensureCache.prepare();var q=u(d);const k=d===q;q=l._pe.ensureFloat64(q);(x=l._pe._pe_proj_to_geog_center(l._pe.getPointer(x),b,q,r))&&B(d,b,q,k);return x}f.geogToProj=c;f.projGeog=function(x,b,d,r){switch(r){case l.PeDefs.PE_TRANSFORM_P_TO_G:return n(x,b,d);case l.PeDefs.PE_TRANSFORM_G_TO_P:return c(x,b,d)}return 0};f.projToGeog=n;f.projToGeogCenter=w})(l.PeCSTransformations||(l.PeCSTransformations={}));l.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=l._pe.PeDefs.prototype.PE_BUFFER_MAX;
f.PE_NAME_MAX=l._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=l._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=l._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=l._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=l._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=l._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=l._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=l._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=l._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=l._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=
l._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=l._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=l._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=l._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_TYPE_LINUNIT=l._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=l._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=l._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=l._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=l._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=
l._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=l._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=l._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=l._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=l._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=l._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=l._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=l._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=l._pe.PeDefs.prototype.PE_HORIZON_LINE;
f.PE_HORIZON_DELTA=l._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(l.PeDefs||(l.PeDefs={}));l.PeFactory=void 0;(function(f){function c(b,d){let r=null,q=n[b];q||(q={},n[b]=q);q.hasOwnProperty(String(d))?r=q[d]:(b=l._pe.PeFactory.prototype.factoryByType(b,d),l._pe.compare(b,l._pe.NULL)||(r=b,q[d]=r));return r=x(r)}const n={},w={},x=b=>{if(b){const d=b.getType();switch(d){case l.PeDefs.PE_TYPE_GEOGCS:b=l._pe.castObject(b,l._pe.PeGeogcs);break;case l.PeDefs.PE_TYPE_PROJCS:b=l._pe.castObject(b,l._pe.PeProjcs);
break;case l.PeDefs.PE_TYPE_GEOGTRAN:b=l._pe.castObject(b,l._pe.PeGeogtran);break;default:d&l.PeDefs.PE_TYPE_UNIT&&(b=l._pe.castObject(b,l._pe.PeUnit))}}return b};f.initialize=function(){l._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(b){return c(l.PeDefs.PE_TYPE_COORDSYS,b)};f.factoryByType=c;f.fromString=function(b,d){let r=null,q=w[b];q||(q={},w[b]=q);q.hasOwnProperty(d)?r=q[d]:(b=l._pe.PeFactory.prototype.fromString(b,d),l._pe.compare(b,l._pe.NULL)||(r=b,q[d]=r));return r=x(r)};
f.geogcs=function(b){return c(l.PeDefs.PE_TYPE_GEOGCS,b)};f.geogtran=function(b){return c(l.PeDefs.PE_TYPE_GEOGTRAN,b)};f.getCode=function(b){return l._pe.PeFactory.prototype.getCode(b)};f.projcs=function(b){return c(l.PeDefs.PE_TYPE_PROJCS,b)};f.unit=function(b){return c(l.PeDefs.PE_TYPE_UNIT,b)}})(l.PeFactory||(l.PeFactory={}));l.PeGCSExtent=null;l.PeGTlistExtended=void 0;(function(f){let c;f.init=function(){f.PE_GTLIST_OPTS_COMMON=l._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=l._pe._pe_getPeGTlistExtendedEntrySize()};
f.getGTlist=function(n,w,x,b,d,r){let q=null;const k=new l._pe.PeInteger(r);try{const g=l._pe.PeGTlistExtended.prototype.getGTlist(n,w,x,b,d,k);if(r=k.val)if(q=[g],1<r){const t=l._pe.getPointer(g);for(n=1;n<r;n++)q.push(l._pe.wrapPointer(t+c*n,l._pe.PeGTlistExtendedEntry))}}finally{l._pe.destroy(k)}return q}})(l.PeGTlistExtended||(l.PeGTlistExtended={}));l.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(c){if(c&&c.length){for(const n of c)L(n),n.getEntries().forEach(w=>{L(w);w=w.getGeogtran();
L(w);w.getParameters().forEach(L);[w.getGeogcs1(),w.getGeogcs2()].forEach(x=>{L(x);const b=x.getDatum();L(b);L(b.getSpheroid());L(x.getPrimem());L(x.getUnit())})});l._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(l.PeGTlistExtendedEntry||(l.PeGTlistExtendedEntry={}));l.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(c,n,w,x,b){l._pe.ensureCache.prepare();var d=u(w);const r=w===d;d=l._pe.ensureFloat64(d);let q=0;x&&(q=l._pe.ensureFloat64(x));(c=l._pe._pe_geog_to_geog(l._pe.getPointer(c),
n,d,q,b))&&B(w,n,d,r);return c}})(l.PeGTTransformations||(l.PeGTTransformations={}));l.PeNotationDms=void 0;(function(f){const c=(w,x,b,d,r,q)=>{l._pe.ensureCache.prepare();switch(w){case "dd":var k=l._pe._pe_geog_to_dd;var g=l.PeDefs.PE_DD_MAX;break;case "ddm":k=l._pe._pe_geog_to_ddm;g=l.PeDefs.PE_DDM_MAX;break;case "dms":k=l._pe._pe_geog_to_dms,g=l.PeDefs.PE_DMS_MAX}w=0;x&&(w=l._pe.getPointer(x));x=u(d);x=l._pe.ensureFloat64(x);g=F(b,g);d=l._pe.ensureInt32(g);if(r=k(w,b,x,r,d))for(k=0;k<b;k++)q[k]=
l._pe.UTF8ToString(g[k]);return r},n=(w,x,b,d,r)=>{l._pe.ensureCache.prepare();switch(w){case "dd":var q=l._pe._pe_dd_to_geog;break;case "ddm":q=l._pe._pe_ddm_to_geog;break;case "dms":q=l._pe._pe_dms_to_geog}w=0;x&&(w=l._pe.getPointer(x));x=d.map(k=>l._pe.ensureString(k));d=l._pe.ensureInt32(x);x=l._pe.ensureFloat64(Array(2*b));(q=q(w,b,d,x))&&B(r,b,x);return q};f.geogToDms=function(w,x,b,d,r){return c("dms",w,x,b,d,r)};f.dmsToGeog=function(w,x,b,d){return n("dms",w,x,b,d)};f.geogToDdm=function(w,
x,b,d,r){return c("ddm",w,x,b,d,r)};f.ddmToGeog=function(w,x,b,d){return n("ddm",w,x,b,d)};f.geogToDd=function(w,x,b,d,r){return c("dd",w,x,b,d,r)};f.ddToGeog=function(w,x,b,d){return n("dd",w,x,b,d)}})(l.PeNotationDms||(l.PeNotationDms={}));l.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
f.PE_MGRS_180_ZONE_1_PLUS=l._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=l._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geogToMgrsExtended=function(c,n,w,x,b,d,r){l._pe.ensureCache.prepare();let q=0;c&&(q=l._pe.getPointer(c));c=u(w);w=l._pe.ensureFloat64(c);c=F(n,l.PeDefs.PE_MGRS_MAX);const k=l._pe.ensureInt32(c);if(x=l._pe._pe_geog_to_mgrs_extended(q,n,w,x,b,d,k))for(b=0;b<n;b++)r[b]=l._pe.UTF8ToString(c[b]);return x};f.mgrsToGeogExtended=function(c,n,w,x,b){l._pe.ensureCache.prepare();
let d=0;c&&(d=l._pe.getPointer(c));c=w.map(r=>l._pe.ensureString(r));w=l._pe.ensureInt32(c);c=l._pe.ensureFloat64(Array(2*n));(x=l._pe._pe_mgrs_to_geog_extended(d,n,w,x,c))&&B(b,n,c);return x}})(l.PeNotationMgrs||(l.PeNotationMgrs={}));l.PeNotationUsng=void 0;(function(f){f.geogToUsng=function(c,n,w,x,b,d,r){l._pe.ensureCache.prepare();let q=0;c&&(q=l._pe.getPointer(c));c=u(w);w=l._pe.ensureFloat64(c);c=F(n,l.PeDefs.PE_MGRS_MAX);const k=l._pe.ensureInt32(c);if(x=l._pe._pe_geog_to_usng(q,n,w,x,b,d,
k))for(b=0;b<n;b++)r[b]=l._pe.UTF8ToString(c[b]);return x};f.usngToGeog=function(c,n,w,x){l._pe.ensureCache.prepare();var b=0;c&&(b=l._pe.getPointer(c));c=w.map(d=>l._pe.ensureString(d));w=l._pe.ensureInt32(c);c=l._pe.ensureFloat64(Array(2*n));(b=l._pe._pe_usng_to_geog(b,n,w,c))&&B(x,n,c);return b}})(l.PeNotationUsng||(l.PeNotationUsng={}));l.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
f.PE_UTM_OPTS_NS=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geogToUtm=function(c,n,w,x,b){l._pe.ensureCache.prepare();var d=0;c&&(d=l._pe.getPointer(c));c=u(w);w=l._pe.ensureFloat64(c);c=F(n,l.PeDefs.PE_UTM_MAX);const r=l._pe.ensureInt32(c);if(x=l._pe._pe_geog_to_utm(d,n,w,x,r))for(d=0;d<n;d++)b[d]=l._pe.UTF8ToString(c[d]);return x};f.utmToGeog=function(c,n,w,x,b){l._pe.ensureCache.prepare();let d=0;c&&(d=l._pe.getPointer(c));c=w.map(r=>l._pe.ensureString(r));w=l._pe.ensureInt32(c);c=l._pe.ensureFloat64(Array(2*
n));(x=l._pe._pe_utm_to_geog(d,n,w,x,c))&&B(b,n,c);return x}})(l.PeNotationUtm||(l.PeNotationUtm={}));l.PePCSInfo=void 0;(function(f){const c=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=l._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=l._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(n,w=f.PE_PCSINFO_OPTION_DOMAIN){let x=
null,b=null;c.has(n)&&(b=c.get(n),b[w]&&(x=b[w]));x||(x=l._pe.PePCSInfo.prototype.generate(n,w),b||(b=[],c.set(n,b)),b[w]=x);return x}})(l.PePCSInfo||(l.PePCSInfo={}));l.PeVersion=void 0;(function(f){f.versionString=function(){return l._pe.PeVersion.prototype.version_string()}})(l.PeVersion||(l.PeVersion={}));const e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return l.PeCSTransformations},get PeDefs(){return l.PeDefs},get PeFactory(){return l.PeFactory},get PeGCSExtent(){return l.PeGCSExtent},
get PeGTTransformations(){return l.PeGTTransformations},get PeGTlistExtended(){return l.PeGTlistExtended},get PeGTlistExtendedEntry(){return l.PeGTlistExtendedEntry},get PeNotationDms(){return l.PeNotationDms},get PeNotationMgrs(){return l.PeNotationMgrs},get PeNotationUsng(){return l.PeNotationUsng},get PeNotationUtm(){return l.PeNotationUtm},get PePCSInfo(){return l.PePCSInfo},get PeVersion(){return l.PeVersion},_init:N,get _pe(){return l._pe},isLoaded:G,isSupported:ca,load:U},Symbol.toStringTag,
{value:"Module"}));l._init=N;l.isLoaded=G;l.isSupported=ca;l.load=U;l.pe=e})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u,B,h,e,f,c,n,w,x,b,d,r,q,k,g,t){function z(){return!!Na&&c.isLoaded()}function A(X){G.isNone($a)&&($a=Promise.all([c.load(),(new Promise((fa,ba)=>Q(["../chunks/geometryEngineBase"],fa,ba))).then(fa=>fa.geometryEngineBase),new Promise((fa,ba)=>Q(["./geometryAdapters/hydrated"],fa,ba))]));return $a.then(([,fa,{hydratedAdapter:ba}])=>{ca.throwIfAborted(X);La=ba;Na=fa.default;Na._enableProjection(c.pe);Ra.notify()})}function y(X,fa,ba=null,ta=null){return Array.isArray(X)?
0===X.length?[]:D(La,X,X[0].spatialReference,fa,ba,ta):D(La,[X],X.spatialReference,fa,ba,ta)[0]}function D(X,fa,ba,ta,Da=null,Ea=null){if(G.isNone(ba)||G.isNone(ta))return fa;if(M(ba,ta,Da))return fa.map(Ha=>G.unwrap(qa(Ha,ba,ta)));if(G.isNone(Da)){const Ha=q.cacheKey(ba,ta);void 0!==bb[Ha]?Da=bb[Ha]:(Da=V(ba,ta,void 0),G.isNone(Da)&&(Da=new q),bb[Ha]=Da)}if(G.isNone(Na)||G.isNone(X))throw new fb;return G.isSome(Ea)?Na._project(X,fa,ba,ta,Da,Ea):Na._project(X,fa,ba,ta,Da)}function I(X,fa){if(!z())for(const ba of X)if(G.isSome(ba)&&
!k.equals(ba.spatialReference,fa)&&k.isValid(ba.spatialReference)&&k.isValid(fa)&&!M(ba.spatialReference,fa))return N.trackAccess(Ra),{pending:A(),geometries:null};return{pending:null,geometries:X.map(ba=>G.isNone(ba)?null:k.equals(ba.spatialReference,fa)?ba:k.isValid(ba.spatialReference)&&k.isValid(fa)?C(ba,fa):null)}}function V(X,fa,ba=null){if(G.isNone(X)||G.isNone(fa))return null;if(G.isNone(Na)||G.isNone(La))throw new fb;X=Na._getTransformation(La,X,fa,ba,ba?.spatialReference);return null!==
X?q.fromGE(X):null}function C(X,fa){try{const ba=y(X,fa);if(null==ba)return null;"xmin"in X&&"xmin"in ba&&(ba.zmin=X.zmin,ba.zmax=X.zmax);const ta=t.getGeometryZScaler(ba.type,X.spatialReference,fa);G.isSome(ta)&&ta(ba);return ba}catch(ba){if(!(ba instanceof fb))throw ba;return null}}function M(X,fa,ba){return ba?!1:k.equals(X,fa)?!0:k.isValid(X)&&k.isValid(fa)&&!!Sa(X,fa,hb)}function da(){da=J._asyncToGenerator(function*(X,fa,ba,ta){if(z())return ca.waitTick(ta);if(Array.isArray(X))for(const {source:Da,
dest:Ea,geographicTransformation:Ha}of X){if(!M(Da,Ea,Ha))return A(ta)}else if(!M(X,fa,ba))return A(ta);return ca.waitTick(ta)});return da.apply(this,arguments)}function qa(X,fa,ba){return X?"x"in X?xa(X,fa,new n,ba,0):"xmin"in X?v(X,fa,new e,ba,0):"rings"in X?O(X,fa,new w,ba,0):"paths"in X?P(X,fa,new x,ba,0):"points"in X?ja(X,fa,new f,ba,0):null:null}function xa(X,fa,ba,ta,Da){Ka[0]=X.x;Ka[1]=X.y;const Ea=X.z;Ka[2]=void 0!==Ea?Ea:Da;if(!T(Ka,fa,0,Ka,ta,0,1))return null;ba.x=Ka[0];ba.y=Ka[1];ba.spatialReference=
ta;void 0===Ea?(ba.z=void 0,ba.hasZ=!1):(ba.z=Ka[2],ba.hasZ=!0);void 0===X.m?(ba.m=void 0,ba.hasM=!1):(ba.m=X.m,ba.hasM=!0);return ba}function ja(X,fa,ba,ta,Da){const {points:Ea,hasZ:Ha,hasM:Ia}=X;X=[];const Qa=Ea.length,Pa=[];for(var Oa of Ea)Pa.push(Oa[0],Oa[1],Ha?Oa[2]:Da);if(!T(Pa,fa,0,Pa,ta,0,Qa))return null;for(fa=0;fa<Qa;++fa){Da=3*fa;Oa=Pa[Da];const Ua=Pa[Da+1];Ha&&Ia?X.push([Oa,Ua,Pa[Da+2],Ea[fa][3]]):Ha?X.push([Oa,Ua,Pa[Da+2]]):Ia?X.push([Oa,Ua,Ea[fa][2]]):X.push([Oa,Ua])}ba.points=X;ba.spatialReference=
ta;ba.hasZ=Ha;ba.hasM=Ia;return ba}function P(X,fa,ba,ta,Da){const {paths:Ea,hasZ:Ha,hasM:Ia}=X;X=[];if(!W(Ea,Ha??!1,Ia??!1,fa,X,ta,Da))return null;ba.paths=X;ba.spatialReference=ta;ba.hasZ=Ha;ba.hasM=Ia;return ba}function O(X,fa,ba,ta,Da){const {rings:Ea,hasZ:Ha,hasM:Ia}=X;X=[];if(!W(Ea,Ha??!1,Ia??!1,fa,X,ta,Da))return null;ba.rings=X;ba.spatialReference=ta;ba.hasZ=Ha;ba.hasM=Ia;return ba}function v(X,fa,ba,ta,Da){const {xmin:Ea,ymin:Ha,xmax:Ia,ymax:Qa,hasZ:Pa,hasM:Oa}=X;if(!K(Ea,Ha,Pa?X.zmin:Da,
fa,Ka,ta))return null;ba.xmin=Ka[0];ba.ymin=Ka[1];Pa&&(ba.zmin=Ka[2]);if(!K(Ia,Qa,Pa?X.zmax:Da,fa,Ka,ta))return null;ba.xmax=Ka[0];ba.ymax=Ka[1];Pa&&(ba.zmax=Ka[2]);Oa&&(ba.mmin=X.mmin,ba.mmax=X.mmax);ba.spatialReference=ta;return ba}function K(X,fa,ba,ta,Da,Ea){Ma[0]=X;Ma[1]=fa;Ma[2]=ba;return T(Ma,ta,0,Da,Ea,0,1)}function Y(X,fa,ba,ta){if(G.isNone(fa)||G.isNone(ta)||2>X.length)return!1;2===X.length&&(Ma[0]=X[0],Ma[1]=X[1],Ma[2]=0,X=Ma);return T(X,fa,0,ba,ta,0,1)}function S(X,fa,ba){if(G.isNone(fa))return!1;
fa=m(fa,cb);fa=Wa[fa][oa.WGS84_COMPARABLE_LON_LAT];if(G.isNone(fa))return!1;fa(X,0,Ma,0);ba!==Ma&&(ba[0]=Ma[0],ba[1]=Ma[1],2<ba.length&&(ba[2]=Ma[2]));return!0}function T(X,fa,ba,ta,Da,Ea,Ha=1){fa=Sa(fa,Da,hb);if(G.isNone(fa))return!1;if(fa===H){if(X===ta&&ba===Ea)return!0;Ha=ba+3*Ha;for(let Ia=ba,Qa=Ea;Ia<Ha;Ia++,Qa++)ta[Qa]=X[Ia];return!0}Ha=ba+3*Ha;for(let Ia=ba,Qa=Ea;Ia<Ha;Ia+=3,Qa+=3)fa(X,Ia,ta,Qa);return!0}function W(X,fa,ba,ta,Da,Ea,Ha=0){const Ia=[];for(const Qa of X)for(const Pa of Qa)Ia.push(Pa[0],
Pa[1],fa?Pa[2]:Ha);if(!T(Ia,ta,0,Ia,Ea,0,Ia.length/3))return!1;ta=0;Da.length=0;for(const Qa of X){X=[];for(const Pa of Qa)fa&&ba?X.push([Ia[ta++],Ia[ta++],Ia[ta++],Pa[3]]):fa?X.push([Ia[ta++],Ia[ta++],Ia[ta++]]):(ba?X.push([Ia[ta++],Ia[ta++],Pa[2]]):X.push([Ia[ta++],Ia[ta++]]),ta++);Da.push(X)}return!0}function ea(X,fa,ba,ta){fa=ta+fa;if(fa<ta/2||ba>fa)return Number.MAX_VALUE;X=Math.abs(Xa*X)+Math.asin(ba/fa);return X>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(X)}function na(X,fa,ba){const ta=Math.sin(X);
X=Math.cos(X);const Da=Math.sin(fa);fa=Math.cos(fa);ba[0]=-ta;ba[4]=-Da*X;ba[8]=fa*X;ba[12]=0;ba[1]=X;ba[5]=-Da*ta;ba[9]=fa*ta;ba[13]=0;ba[2]=0;ba[6]=fa;ba[10]=Da;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function a(X,fa,ba){na(X,fa,ba);F.transpose(ba,ba);return ba}function m(X,fa){if(!X)return oa.UNKNOWN;if(fa.spatialReference===X)return fa.spatialReferenceId;fa.spatialReference=X;"metersPerUnit"in fa&&(fa.metersPerUnit=U.getMetersPerUnitForSR(X,1));return X.wkt===h.SphericalECEFSpatialReferenceLike.wkt?
fa.spatialReferenceId=oa.SPHERICAL_ECEF:k.isWGS84(X)?fa.spatialReferenceId=oa.WGS84:k.isWebMercator(X)?fa.spatialReferenceId=oa.WEB_MERCATOR:k.isPlateCarree(X)?fa.spatialReferenceId=oa.PLATE_CARREE:X.wkt===h.WGS84ECEFSpatialReferenceLike.wkt?fa.spatialReferenceId=oa.WGS84_ECEF:X.wkid===g.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=oa.CGCS2000:X.wkt===h.SphericalPCPFMarsLike.wkt?fa.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:X.wkt===h.SphericalPCPFMoonLike.wkt?fa.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:
k.isMars(X)?fa.spatialReferenceId=oa.GCSMARS2000:k.isMoon(X)?fa.spatialReferenceId=oa.GCSMOON2000:fa.spatialReferenceId=oa.UNKNOWN}function H(X,fa,ba,ta){X!==ba&&(ba[ta++]=X[fa++],ba[ta++]=X[fa++],ba[ta]=X[fa])}function R(X,fa,ba,ta){ba[ta++]=db*(X[fa++]/d.earth.radius);ba[ta++]=db*(Math.PI/2-2*Math.atan(Math.exp(-X[fa++]/d.earth.radius)));ba[ta]=X[fa]}function ha(X,fa,ba,ta){R(X,fa,ba,ta);aa(ba,ta,ba,ta)}function ka(X,fa,ba,ta){R(X,fa,ba,ta);Ca(ba,ta,ba,ta)}function ra(X,fa,ba,ta,Da){var Ea=.4999999*
Math.PI;Ea=p.clamp(Xa*X[fa+1],-Ea,Ea);Ea=Math.sin(Ea);ba[ta++]=Xa*X[fa]*Da.radius;ba[ta++]=Da.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));ba[ta]=X[fa+2]}function pa(X,fa,ba,ta){ra(X,fa,ba,ta,d.earth)}function la(X,fa,ba,ta){ba[ta]=X[fa]*ib;ba[ta+1]=X[fa+1]*ib;ba[ta+2]=X[fa+2]}function sa(X,fa,ba,ta){ba[ta]=X[fa]*eb;ba[ta+1]=X[fa+1]*eb;ba[ta+2]=X[fa+2]}function wa(X,fa,ba,ta){R(X,fa,ba,ta);la(ba,ta,ba,ta)}function ya(X,fa,ba,ta,Da){Da+=X[fa+2];const Ea=Xa*X[fa+1];X=Xa*X[fa];fa=Math.cos(Ea);ba[ta++]=
Math.cos(X)*fa*Da;ba[ta++]=Math.sin(X)*fa*Da;ba[ta]=Math.sin(Ea)*Da}function za(X,fa,ba,ta){ya(X,fa,ba,ta,d.moon.radius)}function Ba(X,fa,ba,ta){ya(X,fa,ba,ta,d.mars.radius)}function aa(X,fa,ba,ta){ya(X,fa,ba,ta,d.earth.radius)}function ma(X,fa,ba,ta,Da){var Ea=X[fa];const Ha=X[fa+1];fa=X[fa+2];X=Math.sqrt(Ea*Ea+Ha*Ha+fa*fa);fa=p.asinClamped(fa/(0===X?1:X));Ea=Math.atan2(Ha,Ea);ba[ta++]=db*Ea;ba[ta++]=db*fa;ba[ta]=X-Da}function Z(X,fa,ba,ta){ma(X,fa,ba,ta,d.moon.radius)}function ua(X,fa,ba,ta){ma(X,
fa,ba,ta,d.mars.radius)}function va(X,fa,ba,ta){ma(X,fa,ba,ta,d.earth.radius)}function ia(X,fa,ba,ta){va(X,fa,ba,ta);pa(ba,ta,ba,ta)}function Aa(X,fa,ba,ta){va(X,fa,ba,ta);Ca(ba,ta,ba,ta)}function Ca(X,fa,ba,ta){var Da=d.earth;const Ea=Xa*X[fa];var Ha=Xa*X[fa+1];X=X[fa+2];fa=Math.sin(Ha);Ha=Math.cos(Ha);const Ia=Da.radius/Math.sqrt(1-Da.eccentricitySquared*fa*fa);ba[ta++]=(Ia+X)*Ha*Math.cos(Ea);ba[ta++]=(Ia+X)*Ha*Math.sin(Ea);ba[ta++]=(Ia*(1-Da.eccentricitySquared)+X)*fa}function Fa(X,fa,ba,ta){var Da=
r.earthEllipsoidConstants,Ea=X[fa],Ha=X[fa+1];X=X[fa+2];let Ia;fa=Math.abs(X);var Qa=Ea*Ea+Ha*Ha;var Pa=Math.sqrt(Qa);var Oa=Qa+X*X;var Ua=Math.sqrt(Oa);Ea=Math.atan2(Ha,Ea);var Za=X*X/Oa;Oa=Qa/Oa;Ha=Da.a2/Ua;Qa=Da.a3-Da.a4/Ua;.3<Oa?(Za=fa/Ua*(1+Oa*(Da.a1+Ha+Za*Qa)/Ua),Ua=Math.asin(Za),Ha=Za*Za,Oa=Math.sqrt(1-Ha)):(Oa=Pa/Ua*(1-Za*(Da.a5-Ha-Oa*Qa)/Ua),Ua=Math.acos(Oa),Ha=1-Oa*Oa,Za=Math.sqrt(Ha));Ia=1-d.earth.eccentricitySquared*Ha;Ha=d.earth.radius/Math.sqrt(Ia);Da=Da.a6*Ha;Ha=Pa-Ha*Oa;Qa=fa-Da*Za;
fa=Oa*Ha+Za*Qa;Pa=Oa*Qa-Za*Ha;Da=Pa/(Da/Ia+fa);Ua+=Da;0>X&&(Ua=-Ua);ba[ta++]=db*Ea;ba[ta++]=db*Ua;ba[ta]=fa+Pa*Da/2}function Ga(X,fa,ba,ta){Fa(X,fa,ba,ta);aa(ba,ta,ba,ta)}function Ja(X,fa,ba,ta){Fa(X,fa,ba,ta);pa(ba,ta,ba,ta)}function Sa(X,fa,ba=Ta()){return G.isNone(X)||G.isNone(fa)?null:Va(X,fa,ba).projector}function Va(X,fa,ba){if(G.isNone(X)||G.isNone(fa)||ba.source.spatialReference===X&&ba.dest.spatialReference===fa)return ba;const ta=m(X,ba.source),Da=m(fa,ba.dest);ta===oa.UNKNOWN&&Da===oa.UNKNOWN?
k.equals(X,fa)?ba.projector=H:ba.projector=null:ba.projector=Wa[ta][Da];return ba}function Ta(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:H}}let Na=null,La=null,$a=null,bb={};const Ra=new L.SimpleObservable;let fb=function(X){function fa(){return X.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}J._inheritsLoose(fa,X);
return fa}(E);var oa;(function(X){X[X.UNKNOWN=0]="UNKNOWN";X[X.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";X[X.WGS84=2]="WGS84";X[X.WEB_MERCATOR=3]="WEB_MERCATOR";X[X.WGS84_ECEF=4]="WGS84_ECEF";X[X.CGCS2000=5]="CGCS2000";X[X.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";X[X.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";X[X.GCSMARS2000=8]="GCSMARS2000";X[X.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";X[X.GCSMOON2000=10]="GCSMOON2000";X[X.LON_LAT=11]="LON_LAT";X[X.PLATE_CARREE=12]="PLATE_CARREE"})(oa||
(oa={}));const ib=d.earth.radius*Math.PI/180,eb=180/(d.earth.radius*Math.PI),Wa={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:H,[oa.SPHERICAL_ECEF]:aa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:pa,[oa.PLATE_CARREE]:la,[oa.WGS84]:H,[oa.WGS84_ECEF]:Ca},[oa.CGCS2000]:{[oa.CGCS2000]:H,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:H,
[oa.SPHERICAL_ECEF]:aa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:la,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ca},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:H,[oa.GCSMOON2000]:null,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:Ba,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:H,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:za,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:R,[oa.WGS84_COMPARABLE_LON_LAT]:R,[oa.SPHERICAL_ECEF]:ha,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:H,[oa.PLATE_CARREE]:wa,[oa.WGS84]:R,[oa.WGS84_ECEF]:ka},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Fa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Fa,[oa.WGS84_COMPARABLE_LON_LAT]:Fa,[oa.SPHERICAL_ECEF]:Ga,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Ja,[oa.PLATE_CARREE]:function(X,fa,ba,ta){Fa(X,fa,ba,ta);la(ba,ta,ba,ta)},[oa.WGS84]:Fa,[oa.WGS84_ECEF]:H},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:va,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,
[oa.LON_LAT]:va,[oa.WGS84_COMPARABLE_LON_LAT]:va,[oa.SPHERICAL_ECEF]:H,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ia,[oa.PLATE_CARREE]:function(X,fa,ba,ta){va(X,fa,ba,ta);la(ba,ta,ba,ta)},[oa.WGS84]:va,[oa.WGS84_ECEF]:Aa},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:ua,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ua,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:H,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Z,[oa.LON_LAT]:Z,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:H,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,[oa.WGS84_COMPARABLE_LON_LAT]:null,
[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:H,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:H,[oa.GCSMARS2000]:H,[oa.GCSMOON2000]:H,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:H,[oa.SPHERICAL_ECEF]:aa,[oa.SPHERICAL_MARS_PCPF]:Ba,[oa.SPHERICAL_MOON_PCPF]:za,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:pa,[oa.PLATE_CARREE]:la,[oa.WGS84]:H,[oa.WGS84_ECEF]:Ca},[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:H,[oa.WGS84_COMPARABLE_LON_LAT]:H,[oa.SPHERICAL_ECEF]:aa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:la,[oa.WGS84]:H,[oa.WGS84_ECEF]:Ca},[oa.PLATE_CARREE]:{[oa.CGCS2000]:sa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:sa,[oa.WGS84_COMPARABLE_LON_LAT]:sa,[oa.SPHERICAL_ECEF]:function(X,fa,ba,ta){sa(X,fa,ba,ta);aa(ba,ta,ba,ta)},[oa.SPHERICAL_MARS_PCPF]:null,
[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(X,fa,ba,ta){sa(X,fa,ba,ta);pa(ba,ta,ba,ta)},[oa.PLATE_CARREE]:H,[oa.WGS84]:sa,[oa.WGS84_ECEF]:function(X,fa,ba,ta){sa(X,fa,ba,ta);Ca(ba,ta,ba,ta)}}},cb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},jb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},hb=Ta(),kb=Ta(),Xa=p.deg2rad(1),db=p.rad2deg(1),Ma=B.create(),Ya=B.create(),ab=B.create(),Ka=B.create(),gb=B.create();l.canProjectToWGS84ComparableLonLat=function(X){if(G.isNone(X))return!1;
X=m(X,cb);return!!Wa[X][oa.WGS84_COMPARABLE_LON_LAT]};l.canProjectWithoutEngine=M;l.computeENUToSphericalPCPFLocalRotation=na;l.computeSphericalPCPFToENULocalRotation=a;l.computeTranslationToOriginAndRotation=function(X,fa,ba,ta){if(G.isNone(X)||G.isNone(ta))return!1;var Da=m(X,cb),Ea=m(ta,jb);if(Da===Ea&&Ea!==oa.SPHERICAL_ECEF&&Ea!==oa.SPHERICAL_MARS_PCPF&&Ea!==oa.SPHERICAL_MOON_PCPF&&(Da!==oa.UNKNOWN||k.equals(X,ta)))return F.fromTranslation(ba,fa),!0;if(Ea===oa.SPHERICAL_ECEF||Ea===oa.SPHERICAL_MARS_PCPF||
Ea===oa.SPHERICAL_MOON_PCPF){Da=Wa[Da][oa.LON_LAT];Ea=Wa[oa.LON_LAT][Ea];if(G.isNone(Da)||G.isNone(Ea))return!1;Da(fa,0,Ya,0);Ea(Ya,0,ab,0);na(Xa*Ya[0],Xa*Ya[1],ba);ba[12]=ab[0];ba[13]=ab[1];ba[14]=ab[2];return!0}if((Ea===oa.WEB_MERCATOR||Ea===oa.PLATE_CARREE)&&(Da===oa.WGS84||Da===oa.CGCS2000&&Ea===oa.PLATE_CARREE||Da===oa.SPHERICAL_ECEF||Da===oa.WEB_MERCATOR)){X=Wa[Da][oa.LON_LAT];Ea=Wa[oa.LON_LAT][Ea];if(G.isNone(X)||G.isNone(Ea))return!1;X(fa,0,Ya,0);Ea(Ya,0,ab,0);Da===oa.SPHERICAL_ECEF?a(Xa*
Ya[0],Xa*Ya[1],ba):F.identity(ba);ba[12]=ab[0];ba[13]=ab[1];ba[14]=ab[2];return!0}return!1};l.getProjectorName=function(X,fa){switch(Sa(X,fa,hb)){case H:return"copy3";case aa:return"wgs84ToSphericalECEF";case pa:return"wgs84ToWebMercator";case la:return"wgs84ToPlateCarree";case Ca:return"wgs84ToWGS84ECEF";case R:return"webMercatorToWGS84";case ha:return"webMercatorToSphericalECEF";case ka:return"webMercatorToWGS84ECEF";case wa:return"webMercatorToPlateCarree";case Fa:return"wgs84ECEFToWGS84";case Ga:return"wgs84ECEFToSphericalECEF";
case Ja:return"wgs84ECEFToWebMercator";case va:return"sphericalECEFToWGS84";case ia:return"sphericalECEFToWebMercator";case ua:return"sphericalMarsPCPFToMars2000";case Z:return"sphericalMoonPCPFToMoon2000";case Aa:return"sphericalECEFToWGS84ECEF";case Ba:return"mars2000ToSphericalPCPF";case za:return"moon2000ToSphericalPCPF";default:return null}};l.getTransformation=V;l.getTransformations=function(X,fa,ba=null){if(G.isNone(Na)||G.isNone(La))throw new fb;X=Na._getTransformationBySuitability(La,X,fa,
ba,ba?.spatialReference);if(null!==X){fa=[];for(const ta of X)fa.push(q.fromGE(ta));return fa}return[]};l.initializeProjection=function(X,fa,ba,ta){return da.apply(this,arguments)};l.isLoaded=z;l.load=A;l.localLinearScaleFactors=function(X,fa,ba,ta){if(G.isNone(fa)||G.isNone(ta))return!1;const Da=m(fa,cb);var Ea=m(ta,jb);if(Da===Ea&&Da!==oa.UNKNOWN||k.equals(fa,ta))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(Da===oa.SPHERICAL_ECEF){fa=u.length(X);X=fa/Math.sqrt(X[0]*X[0]+X[1]*X[1]);fa/=d.earth.radius;if(Ea===
oa.WEB_MERCATOR)return ba[0]=X*fa,ba[1]=X*fa,ba[2]=1,!0;if(Ea===oa.WGS84||Ea===oa.CGCS2000)return Ea=eb,ba[0]=Ea*X*fa,ba[1]=Ea*fa,ba[2]=1,!0}else if(Da===oa.PLATE_CARREE){if(Ea===oa.WGS84||Ea===oa.CGCS2000)return ba[0]=eb,ba[1]=eb,ba[2]=1,!0;if(Ea===oa.WEB_MERCATOR)return Ea=X[1]/d.earth.radius,ba[0]=1,ba[1]=1/Math.cos(Ea),ba[2]=1,!0}return!1};l.lonLatToSphericalPCPF=function(X,fa,ba,ta){const Da=Math.cos(ba);X[0]=Math.cos(fa)*Da*ta;X[1]=Math.sin(fa)*Da*ta;X[2]=Math.sin(ba)*ta};l.lonLatToWebMercatorComparable=
ra;l.project=y;l.projectBoundingRect=function(X,fa,ba,ta){if(null==X)return!1;if(k.equals(fa,ta))return b.copy(ba,X),!0;Ma[0]=X[0];Ma[1]=X[1];Ma[2]=0;if(!T(Ma,fa,0,Ma,ta,0,1))return!1;ba[0]=Ma[0];ba[1]=Ma[1];Ma[0]=X[2];Ma[1]=X[3];Ma[2]=0;if(!T(Ma,fa,0,Ma,ta,0,1))return!1;ba[2]=Ma[0];ba[3]=Ma[1];return!0};l.projectBoundingSphere=function(X,fa,ba,ta){if(G.isNone(fa)||G.isNone(ta))return!1;fa=Va(fa,ta,kb);if(fa.projector===H)return ba[0]=X[0],ba[1]=X[1],ba[2]=X[2],ba[3]=X[3],!0;if(G.isNone(fa.projector))return!1;
const {source:Da,dest:Ea}=fa;if(Ea.spatialReferenceId===oa.WEB_MERCATOR){fa=Wa[Da.spatialReferenceId][oa.WGS84];if(G.isNone(fa))return!1;fa(X,0,Ya,0);pa(Ya,0,ba,0);ba[3]=ea(Ya[1],X[2],X[3],d.earth.radius);return!0}if(Da.spatialReferenceId!==oa.WGS84&&Da.spatialReferenceId!==oa.CGCS2000||Ea.spatialReferenceId!==oa.PLATE_CARREE)fa.projector(X,0,ba,0),ba[3]=X[3]*(Da.metersPerUnit??1)/(Ea.metersPerUnit??1);else{ta=Wa[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Ha=X[3];G.isSome(Wa[Da.spatialReferenceId][oa.SPHERICAL_ECEF])&&
G.isSome(ta)&&(Ha=ea(X[1],X[2],X[3],d.earth.radius));fa.projector(X,0,ba,0);ba[3]=Ha}return!0};l.projectBuffer=T;l.projectDirection=function(X,fa,ba,ta,Da){u.copy(Ka,X);u.add(gb,X,fa);Y(Ka,ba,Ka,Da);Y(gb,ba,gb,Da);u.subtract(ta,gb,Ka);u.normalize(ta,ta)};l.projectExtent=function(X,fa,ba=fa.spatialReference,ta=0){return G.isSome(X.spatialReference)&&G.isSome(ba)&&G.isSome(v(X,X.spatialReference,fa,ba,ta))};l.projectMany=D;l.projectMultipoint=function(X,fa,ba=fa.spatialReference,ta=0){return G.isSome(X.spatialReference)&&
G.isSome(ba)&&G.isSome(ja(X,X.spatialReference,fa,ba,ta))};l.projectOrLoad=function(X,fa){X=I([X],fa);return G.isSome(X.pending)?{pending:X.pending,geometry:null}:G.isSome(X.geometries)?{pending:null,geometry:X.geometries[0]}:{pending:null,geometry:null}};l.projectOrLoadMany=I;l.projectPoint=function(X,fa,ba=fa.spatialReference,ta=0){return G.isSome(ba)&&G.isSome(X.spatialReference)&&G.isSome(xa(X,X.spatialReference,fa,ba,ta))};l.projectPointToVector=function(X,fa,ba,ta=0){Ka[0]=X.x;Ka[1]=X.y;const Da=
X.z;Ka[2]=void 0!==Da?Da:ta;return T(Ka,X.spatialReference,0,fa,ba,0,1)};l.projectPointToWGS84ComparableLonLat=function(X,fa){Ka[0]=X.x;Ka[1]=X.y;const ba=X.z;Ka[2]=void 0!==ba?ba:0;return S(Ka,X.spatialReference,fa)};l.projectPolygon=function(X,fa,ba=fa.spatialReference,ta=0){return G.isSome(X.spatialReference)&&G.isSome(ba)&&G.isSome(O(X,X.spatialReference,fa,ba,ta))};l.projectPolygonToWGS84ComparableLonLat=function({hasZ:X,spatialReference:fa,rings:ba},ta,Da=0){fa=m(fa,cb);fa=Wa[fa][oa.WGS84_COMPARABLE_LON_LAT];
if(G.isNone(fa))return!1;X=X?Ea=>Ea:Ea=>u.set(Ka,Ea[0],Ea[1],Da);for(const Ea of ba){ba=[];for(const Ha of Ea){const Ia=[0,0,Da];fa(X(Ha),0,Ia,0);ba.push(Ia)}ta.push(ba)}return!0};l.projectPolyline=function(X,fa,ba=fa.spatialReference,ta=0){return G.isSome(X.spatialReference)&&G.isSome(ba)&&G.isSome(P(X,X.spatialReference,fa,ba,ta))};l.projectPolylineToWGS84ComparableLonLat=function({hasZ:X,spatialReference:fa,paths:ba},ta,Da=0){fa=m(fa,cb);fa=Wa[fa][oa.WGS84_COMPARABLE_LON_LAT];if(G.isNone(fa))return!1;
X=X?Ea=>Ea:Ea=>u.set(Ka,Ea[0],Ea[1],Da);for(const Ea of ba){ba=[];for(const Ha of Ea){const Ia=[0,0,Da];fa(X(Ha),0,Ia,0);ba.push(Ia)}ta.push(ba)}return!0};l.projectVectorToDehydratedPoint=function(X,fa,ba){return T(X,fa,0,Ka,ba.spatialReference,0,1)?(ba.x=Ka[0],ba.y=Ka[1],ba.z=Ka[2],ba):null};l.projectVectorToPoint=function(X,fa,ba){if(G.isNone(fa)||G.isNone(ba))return null;const ta=new n({spatialReference:ba});return T(X,fa,0,Ka,ba,0,1)?(ta.x=Ka[0],ta.y=Ka[1],ta.z=Ka[2],ta):null};l.projectVectorToVector=
Y;l.projectVectorToWGS84ComparableLonLat=function(X,fa,ba){return S(X,fa,ba)};l.projectWithoutEngine=qa;l.projectXYZToVector=K;l.sphericalPCPFtoLonLatElevation=ma;l.test={get loadPromise(){return $a}};l.tryProjectWithZConversion=C;l.unload=function(){$a=La=Na=null;bb={}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(Q,l,J){J=
function(E){function p(){return E.apply(this,arguments)||this}l._inheritsLoose(p,E);p.prototype.notify=function(){var G=this._observers;if(G&&0<G.length){G=G.slice();for(const ca of G)ca.onInvalidated(),ca.onCommitted()}};return p}(J.ObservableBase);Q.SimpleObservable=J;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(Q,l,J){function E(a,m){a[0]=m[0];a[1]=m[1];a[2]=m[2];a[3]=m[3];a[4]=m[4];a[5]=m[5];a[6]=
m[6];a[7]=m[7];a[8]=m[8];a[9]=m[9];a[10]=m[10];a[11]=m[11];a[12]=m[12];a[13]=m[13];a[14]=m[14];a[15]=m[15];return a}function p(a,m,H,R,ha,ka,ra,pa,la,sa,wa,ya,za,Ba,aa,ma,Z){a[0]=m;a[1]=H;a[2]=R;a[3]=ha;a[4]=ka;a[5]=ra;a[6]=pa;a[7]=la;a[8]=sa;a[9]=wa;a[10]=ya;a[11]=za;a[12]=Ba;a[13]=aa;a[14]=ma;a[15]=Z;return a}function G(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ca(a,m){if(a===m){const H=m[1],R=m[2],
ha=m[3],ka=m[6],ra=m[7],pa=m[11];a[1]=m[4];a[2]=m[8];a[3]=m[12];a[4]=H;a[6]=m[9];a[7]=m[13];a[8]=R;a[9]=ka;a[11]=m[14];a[12]=ha;a[13]=ra;a[14]=pa}else a[0]=m[0],a[1]=m[4],a[2]=m[8],a[3]=m[12],a[4]=m[1],a[5]=m[5],a[6]=m[9],a[7]=m[13],a[8]=m[2],a[9]=m[6],a[10]=m[10],a[11]=m[14],a[12]=m[3],a[13]=m[7],a[14]=m[11],a[15]=m[15];return a}function U(a,m){N(a,m)||G(a);return a}function N(a,m){const H=m[0],R=m[1],ha=m[2],ka=m[3],ra=m[4],pa=m[5],la=m[6],sa=m[7],wa=m[8],ya=m[9],za=m[10],Ba=m[11],aa=m[12],ma=m[13],
Z=m[14];m=m[15];const ua=H*pa-R*ra,va=H*la-ha*ra,ia=H*sa-ka*ra,Aa=R*la-ha*pa,Ca=R*sa-ka*pa,Fa=ha*sa-ka*la,Ga=wa*ma-ya*aa,Ja=wa*Z-za*aa,Sa=wa*m-Ba*aa,Va=ya*Z-za*ma,Ta=ya*m-Ba*ma,Na=za*m-Ba*Z;let La=ua*Na-va*Ta+ia*Va+Aa*Sa-Ca*Ja+Fa*Ga;if(!La)return null;La=1/La;a[0]=(pa*Na-la*Ta+sa*Va)*La;a[1]=(ha*Ta-R*Na-ka*Va)*La;a[2]=(ma*Fa-Z*Ca+m*Aa)*La;a[3]=(za*Ca-ya*Fa-Ba*Aa)*La;a[4]=(la*Sa-ra*Na-sa*Ja)*La;a[5]=(H*Na-ha*Sa+ka*Ja)*La;a[6]=(Z*ia-aa*Fa-m*va)*La;a[7]=(wa*Fa-za*ia+Ba*va)*La;a[8]=(ra*Ta-pa*Sa+sa*Ga)*
La;a[9]=(R*Sa-H*Ta-ka*Ga)*La;a[10]=(aa*Ca-ma*ia+m*ua)*La;a[11]=(ya*ia-wa*Ca-Ba*ua)*La;a[12]=(pa*Ja-ra*Va-la*Ga)*La;a[13]=(H*Va-R*Ja+ha*Ga)*La;a[14]=(ma*va-aa*Aa-Z*ua)*La;a[15]=(wa*Aa-ya*va+za*ua)*La;return a}function L(a,m){const H=m[0],R=m[1],ha=m[2],ka=m[3],ra=m[4],pa=m[5],la=m[6],sa=m[7],wa=m[8],ya=m[9],za=m[10],Ba=m[11],aa=m[12],ma=m[13],Z=m[14];m=m[15];a[0]=pa*(za*m-Ba*Z)-ya*(la*m-sa*Z)+ma*(la*Ba-sa*za);a[1]=-(R*(za*m-Ba*Z)-ya*(ha*m-ka*Z)+ma*(ha*Ba-ka*za));a[2]=R*(la*m-sa*Z)-pa*(ha*m-ka*Z)+ma*
(ha*sa-ka*la);a[3]=-(R*(la*Ba-sa*za)-pa*(ha*Ba-ka*za)+ya*(ha*sa-ka*la));a[4]=-(ra*(za*m-Ba*Z)-wa*(la*m-sa*Z)+aa*(la*Ba-sa*za));a[5]=H*(za*m-Ba*Z)-wa*(ha*m-ka*Z)+aa*(ha*Ba-ka*za);a[6]=-(H*(la*m-sa*Z)-ra*(ha*m-ka*Z)+aa*(ha*sa-ka*la));a[7]=H*(la*Ba-sa*za)-ra*(ha*Ba-ka*za)+wa*(ha*sa-ka*la);a[8]=ra*(ya*m-Ba*ma)-wa*(pa*m-sa*ma)+aa*(pa*Ba-sa*ya);a[9]=-(H*(ya*m-Ba*ma)-wa*(R*m-ka*ma)+aa*(R*Ba-ka*ya));a[10]=H*(pa*m-sa*ma)-ra*(R*m-ka*ma)+aa*(R*sa-ka*pa);a[11]=-(H*(pa*Ba-sa*ya)-ra*(R*Ba-ka*ya)+wa*(R*sa-ka*pa));
a[12]=-(ra*(ya*Z-za*ma)-wa*(pa*Z-la*ma)+aa*(pa*za-la*ya));a[13]=H*(ya*Z-za*ma)-wa*(R*Z-ha*ma)+aa*(R*za-ha*ya);a[14]=-(H*(pa*Z-la*ma)-ra*(R*Z-ha*ma)+aa*(R*la-ha*pa));a[15]=H*(pa*za-la*ya)-ra*(R*za-ha*ya)+wa*(R*la-ha*pa);return a}function F(a){const m=a[0],H=a[1],R=a[2],ha=a[3],ka=a[4],ra=a[5],pa=a[6],la=a[7],sa=a[8],wa=a[9],ya=a[10],za=a[11],Ba=a[12],aa=a[13],ma=a[14];a=a[15];return(m*ra-H*ka)*(ya*a-za*ma)-(m*pa-R*ka)*(wa*a-za*aa)+(m*la-ha*ka)*(wa*ma-ya*aa)+(H*pa-R*ra)*(sa*a-za*Ba)-(H*la-ha*ra)*(sa*
ma-ya*Ba)+(R*la-ha*pa)*(sa*aa-wa*Ba)}function u(a,m,H){const R=m[0],ha=m[1],ka=m[2],ra=m[3],pa=m[4],la=m[5],sa=m[6],wa=m[7],ya=m[8],za=m[9],Ba=m[10],aa=m[11],ma=m[12],Z=m[13],ua=m[14];m=m[15];let va=H[0],ia=H[1],Aa=H[2],Ca=H[3];a[0]=va*R+ia*pa+Aa*ya+Ca*ma;a[1]=va*ha+ia*la+Aa*za+Ca*Z;a[2]=va*ka+ia*sa+Aa*Ba+Ca*ua;a[3]=va*ra+ia*wa+Aa*aa+Ca*m;va=H[4];ia=H[5];Aa=H[6];Ca=H[7];a[4]=va*R+ia*pa+Aa*ya+Ca*ma;a[5]=va*ha+ia*la+Aa*za+Ca*Z;a[6]=va*ka+ia*sa+Aa*Ba+Ca*ua;a[7]=va*ra+ia*wa+Aa*aa+Ca*m;va=H[8];ia=H[9];
Aa=H[10];Ca=H[11];a[8]=va*R+ia*pa+Aa*ya+Ca*ma;a[9]=va*ha+ia*la+Aa*za+Ca*Z;a[10]=va*ka+ia*sa+Aa*Ba+Ca*ua;a[11]=va*ra+ia*wa+Aa*aa+Ca*m;va=H[12];ia=H[13];Aa=H[14];Ca=H[15];a[12]=va*R+ia*pa+Aa*ya+Ca*ma;a[13]=va*ha+ia*la+Aa*za+Ca*Z;a[14]=va*ka+ia*sa+Aa*Ba+Ca*ua;a[15]=va*ra+ia*wa+Aa*aa+Ca*m;return a}function B(a,m,H){const R=H[0],ha=H[1];H=H[2];if(m===a)a[12]=m[0]*R+m[4]*ha+m[8]*H+m[12],a[13]=m[1]*R+m[5]*ha+m[9]*H+m[13],a[14]=m[2]*R+m[6]*ha+m[10]*H+m[14],a[15]=m[3]*R+m[7]*ha+m[11]*H+m[15];else{const ka=
m[0],ra=m[1],pa=m[2],la=m[3],sa=m[4],wa=m[5],ya=m[6],za=m[7],Ba=m[8],aa=m[9],ma=m[10],Z=m[11];a[0]=ka;a[1]=ra;a[2]=pa;a[3]=la;a[4]=sa;a[5]=wa;a[6]=ya;a[7]=za;a[8]=Ba;a[9]=aa;a[10]=ma;a[11]=Z;a[12]=ka*R+sa*ha+Ba*H+m[12];a[13]=ra*R+wa*ha+aa*H+m[13];a[14]=pa*R+ya*ha+ma*H+m[14];a[15]=la*R+za*ha+Z*H+m[15]}return a}function h(a,m,H){const R=H[0],ha=H[1];H=H[2];a[0]=m[0]*R;a[1]=m[1]*R;a[2]=m[2]*R;a[3]=m[3]*R;a[4]=m[4]*ha;a[5]=m[5]*ha;a[6]=m[6]*ha;a[7]=m[7]*ha;a[8]=m[8]*H;a[9]=m[9]*H;a[10]=m[10]*H;a[11]=
m[11]*H;a[12]=m[12];a[13]=m[13];a[14]=m[14];a[15]=m[15];return a}function e(a,m,H,R){let ha=R[0],ka=R[1];R=R[2];let ra=Math.sqrt(ha*ha+ka*ka+R*R);var pa=void 0,la=void 0;let sa=void 0,wa=void 0,ya=void 0,za=void 0,Ba=void 0,aa=void 0,ma=void 0,Z=void 0,ua=void 0,va=void 0,ia=void 0,Aa=void 0,Ca=void 0,Fa=void 0,Ga=void 0,Ja=void 0,Sa=void 0,Va=void 0,Ta=void 0,Na=void 0;la=pa=void 0;if(ra<J.getEpsilon())return null;ra=1/ra;ha*=ra;ka*=ra;R*=ra;pa=Math.sin(H);la=Math.cos(H);sa=1-la;wa=m[0];ya=m[1];
za=m[2];Ba=m[3];aa=m[4];ma=m[5];Z=m[6];ua=m[7];va=m[8];ia=m[9];Aa=m[10];Ca=m[11];Fa=ha*ha*sa+la;Ga=ka*ha*sa+R*pa;Ja=R*ha*sa-ka*pa;Sa=ha*ka*sa-R*pa;Va=ka*ka*sa+la;Ta=R*ka*sa+ha*pa;Na=ha*R*sa+ka*pa;pa=ka*R*sa-ha*pa;la=R*R*sa+la;a[0]=wa*Fa+aa*Ga+va*Ja;a[1]=ya*Fa+ma*Ga+ia*Ja;a[2]=za*Fa+Z*Ga+Aa*Ja;a[3]=Ba*Fa+ua*Ga+Ca*Ja;a[4]=wa*Sa+aa*Va+va*Ta;a[5]=ya*Sa+ma*Va+ia*Ta;a[6]=za*Sa+Z*Va+Aa*Ta;a[7]=Ba*Sa+ua*Va+Ca*Ta;a[8]=wa*Na+aa*pa+va*la;a[9]=ya*Na+ma*pa+ia*la;a[10]=za*Na+Z*pa+Aa*la;a[11]=Ba*Na+ua*pa+Ca*la;
m!==a&&(a[12]=m[12],a[13]=m[13],a[14]=m[14],a[15]=m[15]);return a}function f(a,m,H){const R=Math.sin(H);H=Math.cos(H);const ha=m[4],ka=m[5],ra=m[6],pa=m[7],la=m[8],sa=m[9],wa=m[10],ya=m[11];m!==a&&(a[0]=m[0],a[1]=m[1],a[2]=m[2],a[3]=m[3],a[12]=m[12],a[13]=m[13],a[14]=m[14],a[15]=m[15]);a[4]=ha*H+la*R;a[5]=ka*H+sa*R;a[6]=ra*H+wa*R;a[7]=pa*H+ya*R;a[8]=la*H-ha*R;a[9]=sa*H-ka*R;a[10]=wa*H-ra*R;a[11]=ya*H-pa*R;return a}function c(a,m,H){const R=Math.sin(H);H=Math.cos(H);const ha=m[0],ka=m[1],ra=m[2],pa=
m[3],la=m[8],sa=m[9],wa=m[10],ya=m[11];m!==a&&(a[4]=m[4],a[5]=m[5],a[6]=m[6],a[7]=m[7],a[12]=m[12],a[13]=m[13],a[14]=m[14],a[15]=m[15]);a[0]=ha*H-la*R;a[1]=ka*H-sa*R;a[2]=ra*H-wa*R;a[3]=pa*H-ya*R;a[8]=ha*R+la*H;a[9]=ka*R+sa*H;a[10]=ra*R+wa*H;a[11]=pa*R+ya*H;return a}function n(a,m,H){const R=Math.sin(H);H=Math.cos(H);const ha=m[0],ka=m[1],ra=m[2],pa=m[3],la=m[4],sa=m[5],wa=m[6],ya=m[7];m!==a&&(a[8]=m[8],a[9]=m[9],a[10]=m[10],a[11]=m[11],a[12]=m[12],a[13]=m[13],a[14]=m[14],a[15]=m[15]);a[0]=ha*H+la*
R;a[1]=ka*H+sa*R;a[2]=ra*H+wa*R;a[3]=pa*H+ya*R;a[4]=la*H-ha*R;a[5]=sa*H-ka*R;a[6]=wa*H-ra*R;a[7]=ya*H-pa*R;return a}function w(a,m){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=m[0];a[13]=m[1];a[14]=m[2];a[15]=1;return a}function x(a,m){a[0]=m[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=m[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function b(a,m,H){if(0===m)return G(a);let R=H[0],ha=H[1];H=H[2];let ka=Math.sqrt(R*
R+ha*ha+H*H),ra=void 0,pa=void 0,la=void 0;if(ka<J.getEpsilon())return null;ka=1/ka;R*=ka;ha*=ka;H*=ka;ra=Math.sin(m);pa=Math.cos(m);la=1-pa;a[0]=R*R*la+pa;a[1]=ha*R*la+H*ra;a[2]=H*R*la-ha*ra;a[3]=0;a[4]=R*ha*la-H*ra;a[5]=ha*ha*la+pa;a[6]=H*ha*la+R*ra;a[7]=0;a[8]=R*H*la+ha*ra;a[9]=ha*H*la-R*ra;a[10]=H*H*la+pa;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function d(a,m){const H=Math.sin(m);m=Math.cos(m);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=H;a[7]=0;a[8]=0;a[9]=-H;a[10]=m;a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a}function r(a,m){const H=Math.sin(m);m=Math.cos(m);a[0]=m;a[1]=0;a[2]=-H;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=H;a[9]=0;a[10]=m;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function q(a,m){const H=Math.sin(m);m=Math.cos(m);a[0]=m;a[1]=H;a[2]=0;a[3]=0;a[4]=-H;a[5]=m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function k(a,m,H){var R=m[0],ha=m[1],ka=m[2],ra=m[3],pa=R+R,la=ha+ha;const sa=ka+ka;m=R*pa;const wa=R*la;R*=sa;
const ya=ha*la;ha*=sa;ka*=sa;pa*=ra;la*=ra;ra*=sa;a[0]=1-(ya+ka);a[1]=wa+ra;a[2]=R-la;a[3]=0;a[4]=wa-ra;a[5]=1-(m+ka);a[6]=ha+pa;a[7]=0;a[8]=R+la;a[9]=ha-pa;a[10]=1-(m+ya);a[11]=0;a[12]=H[0];a[13]=H[1];a[14]=H[2];a[15]=1;return a}function g(a,m){const H=na,R=-m[0],ha=-m[1],ka=-m[2],ra=m[3],pa=m[4],la=m[5],sa=m[6],wa=m[7],ya=R*R+ha*ha+ka*ka+ra*ra;0<ya?(H[0]=2*(pa*ra+wa*R+la*ka-sa*ha)/ya,H[1]=2*(la*ra+wa*ha+sa*R-pa*ka)/ya,H[2]=2*(sa*ra+wa*ka+pa*ha-la*R)/ya):(H[0]=2*(pa*ra+wa*R+la*ka-sa*ha),H[1]=2*(la*
ra+wa*ha+sa*R-pa*ka),H[2]=2*(sa*ra+wa*ka+pa*ha-la*R));k(a,m,H);return a}function t(a,m){a[0]=m[12];a[1]=m[13];a[2]=m[14];return a}function z(a,m){const H=m[0],R=m[1],ha=m[2],ka=m[4],ra=m[5],pa=m[6],la=m[8],sa=m[9];m=m[10];a[0]=Math.sqrt(H*H+R*R+ha*ha);a[1]=Math.sqrt(ka*ka+ra*ra+pa*pa);a[2]=Math.sqrt(la*la+sa*sa+m*m);return a}function A(a,m){const H=m[0]+m[5]+m[10];let R=0;0<H?(R=2*Math.sqrt(H+1),a[3]=.25*R,a[0]=(m[6]-m[9])/R,a[1]=(m[8]-m[2])/R,a[2]=(m[1]-m[4])/R):m[0]>m[5]&&m[0]>m[10]?(R=2*Math.sqrt(1+
m[0]-m[5]-m[10]),a[3]=(m[6]-m[9])/R,a[0]=.25*R,a[1]=(m[1]+m[4])/R,a[2]=(m[8]+m[2])/R):m[5]>m[10]?(R=2*Math.sqrt(1+m[5]-m[0]-m[10]),a[3]=(m[8]-m[2])/R,a[0]=(m[1]+m[4])/R,a[1]=.25*R,a[2]=(m[6]+m[9])/R):(R=2*Math.sqrt(1+m[10]-m[0]-m[5]),a[3]=(m[1]-m[4])/R,a[0]=(m[8]+m[2])/R,a[1]=(m[6]+m[9])/R,a[2]=.25*R);return a}function y(a,m,H,R){var ha=m[0],ka=m[1],ra=m[2],pa=m[3],la=ha+ha,sa=ka+ka,wa=ra+ra;m=ha*la;const ya=ha*sa;ha*=wa;const za=ka*sa;ka*=wa;ra*=wa;la*=pa;sa*=pa;pa*=wa;wa=R[0];const Ba=R[1];R=R[2];
a[0]=(1-(za+ra))*wa;a[1]=(ya+pa)*wa;a[2]=(ha-sa)*wa;a[3]=0;a[4]=(ya-pa)*Ba;a[5]=(1-(m+ra))*Ba;a[6]=(ka+la)*Ba;a[7]=0;a[8]=(ha+sa)*R;a[9]=(ka-la)*R;a[10]=(1-(m+za))*R;a[11]=0;a[12]=H[0];a[13]=H[1];a[14]=H[2];a[15]=1;return a}function D(a,m,H,R,ha){var ka=m[0],ra=m[1],pa=m[2],la=m[3],sa=ka+ka,wa=ra+ra,ya=pa+pa;m=ka*sa;var za=ka*wa,Ba=ka*ya;ka=ra*wa;ra*=ya;var aa=pa*ya;pa=la*sa;wa*=la;const ma=la*ya;var Z=R[0],ua=R[1];ya=R[2];R=ha[0];la=ha[1];ha=ha[2];sa=(1-(ka+aa))*Z;const va=(za+ma)*Z;Z*=Ba-wa;za=
(za-ma)*ua;aa=(1-(m+aa))*ua;ua*=ra+pa;Ba=(Ba+wa)*ya;ra=(ra-pa)*ya;m=(1-(m+ka))*ya;a[0]=sa;a[1]=va;a[2]=Z;a[3]=0;a[4]=za;a[5]=aa;a[6]=ua;a[7]=0;a[8]=Ba;a[9]=ra;a[10]=m;a[11]=0;a[12]=H[0]+R-(sa*R+za*la+Ba*ha);a[13]=H[1]+la-(va*R+aa*la+ra*ha);a[14]=H[2]+ha-(Z*R+ua*la+m*ha);a[15]=1;return a}function I(a,m){var H=m[0],R=m[1],ha=m[2];m=m[3];var ka=H+H,ra=R+R;const pa=ha+ha;H*=ka;const la=R*ka;R*=ra;const sa=ha*ka,wa=ha*ra;ha*=pa;ka*=m;ra*=m;m*=pa;a[0]=1-R-ha;a[1]=la+m;a[2]=sa-ra;a[3]=0;a[4]=la-m;a[5]=1-
H-ha;a[6]=wa+ka;a[7]=0;a[8]=sa+ra;a[9]=wa-ka;a[10]=1-H-R;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function V(a,m,H,R,ha,ka,ra){const pa=1/(H-m),la=1/(ha-R),sa=1/(ka-ra);a[0]=2*ka*pa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*ka*la;a[6]=0;a[7]=0;a[8]=(H+m)*pa;a[9]=(ha+R)*la;a[10]=(ra+ka)*sa;a[11]=-1;a[12]=0;a[13]=0;a[14]=ra*ka*2*sa;a[15]=0;return a}function C(a,m,H,R,ha){m=1/Math.tan(m/2);let ka=void 0;a[0]=m/H;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;
a[15]=0;null!=ha&&Infinity!==ha?(ka=1/(R-ha),a[10]=(ha+R)*ka,a[14]=2*ha*R*ka):(a[10]=-1,a[14]=-2*R);return a}function M(a,m,H,R){const ha=Math.tan(m.upDegrees*Math.PI/180),ka=Math.tan(m.downDegrees*Math.PI/180),ra=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*Math.PI/180);const pa=2/(ra+m),la=2/(ha+ka);a[0]=pa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=la;a[6]=0;a[7]=0;a[8]=-((ra-m)*pa*.5);a[9]=(ha-ka)*la*.5;a[10]=R/(H-R);a[11]=-1;a[12]=0;a[13]=0;a[14]=R*H/(H-R);a[15]=0;return a}function da(a,
m,H,R,ha,ka,ra){const pa=1/(m-H),la=1/(R-ha),sa=1/(ka-ra);a[0]=-2*pa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*la;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*sa;a[11]=0;a[12]=(m+H)*pa;a[13]=(ha+R)*la;a[14]=(ra+ka)*sa;a[15]=1;return a}function qa(a,m,H,R){var ha=void 0;let ka=void 0;var ra=void 0,pa=void 0;let la=void 0,sa=void 0;var wa=void 0,ya=void 0;let za=void 0,Ba=void 0;const aa=m[0],ma=m[1];m=m[2];ra=R[0];pa=R[1];R=R[2];wa=H[0];ya=H[1];H=H[2];ha=J.getEpsilon();if(Math.abs(aa-wa)<ha&&Math.abs(ma-ya)<ha&&
Math.abs(m-H)<ha)return G(a);wa=aa-wa;ya=ma-ya;za=m-H;Ba=1/Math.sqrt(wa*wa+ya*ya+za*za);wa*=Ba;ya*=Ba;za*=Ba;ha=pa*za-R*ya;ka=R*wa-ra*za;ra=ra*ya-pa*wa;(Ba=Math.sqrt(ha*ha+ka*ka+ra*ra))?(Ba=1/Ba,ha*=Ba,ka*=Ba,ra*=Ba):ra=ka=ha=0;pa=ya*ra-za*ka;la=za*ha-wa*ra;sa=wa*ka-ya*ha;(Ba=Math.sqrt(pa*pa+la*la+sa*sa))?(Ba=1/Ba,pa*=Ba,la*=Ba,sa*=Ba):sa=la=pa=0;a[0]=ha;a[1]=pa;a[2]=wa;a[3]=0;a[4]=ka;a[5]=la;a[6]=ya;a[7]=0;a[8]=ra;a[9]=sa;a[10]=za;a[11]=0;a[12]=-(ha*aa+ka*ma+ra*m);a[13]=-(pa*aa+la*ma+sa*m);a[14]=
-(wa*aa+ya*ma+za*m);a[15]=1;return a}function xa(a,m,H,R){const ha=m[0],ka=m[1];m=m[2];var ra=R[0];const pa=R[1];var la=R[2];R=ha-H[0];let sa=ka-H[1];H=m-H[2];let wa=R*R+sa*sa+H*H;0<wa&&(wa=1/Math.sqrt(wa),R*=wa,sa*=wa,H*=wa);let ya=pa*H-la*sa;la=la*R-ra*H;ra=ra*sa-pa*R;wa=ya*ya+la*la+ra*ra;0<wa&&(wa=1/Math.sqrt(wa),ya*=wa,la*=wa,ra*=wa);a[0]=ya;a[1]=la;a[2]=ra;a[3]=0;a[4]=sa*ra-H*la;a[5]=H*ya-R*ra;a[6]=R*la-sa*ya;a[7]=0;a[8]=R;a[9]=sa;a[10]=H;a[11]=0;a[12]=ha;a[13]=ka;a[14]=m;a[15]=1;return a}function ja(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function P(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function O(a,m,H){a[0]=m[0]+H[0];a[1]=m[1]+H[1];a[2]=m[2]+H[2];a[3]=m[3]+H[3];a[4]=m[4]+H[4];a[5]=m[5]+H[5];a[6]=m[6]+H[6];a[7]=m[7]+H[7];a[8]=m[8]+H[8];a[9]=m[9]+H[9];a[10]=
m[10]+H[10];a[11]=m[11]+H[11];a[12]=m[12]+H[12];a[13]=m[13]+H[13];a[14]=m[14]+H[14];a[15]=m[15]+H[15];return a}function v(a,m,H){a[0]=m[0]-H[0];a[1]=m[1]-H[1];a[2]=m[2]-H[2];a[3]=m[3]-H[3];a[4]=m[4]-H[4];a[5]=m[5]-H[5];a[6]=m[6]-H[6];a[7]=m[7]-H[7];a[8]=m[8]-H[8];a[9]=m[9]-H[9];a[10]=m[10]-H[10];a[11]=m[11]-H[11];a[12]=m[12]-H[12];a[13]=m[13]-H[13];a[14]=m[14]-H[14];a[15]=m[15]-H[15];return a}function K(a,m,H){a[0]=m[0]*H;a[1]=m[1]*H;a[2]=m[2]*H;a[3]=m[3]*H;a[4]=m[4]*H;a[5]=m[5]*H;a[6]=m[6]*H;a[7]=
m[7]*H;a[8]=m[8]*H;a[9]=m[9]*H;a[10]=m[10]*H;a[11]=m[11]*H;a[12]=m[12]*H;a[13]=m[13]*H;a[14]=m[14]*H;a[15]=m[15]*H;return a}function Y(a,m,H,R){a[0]=m[0]+H[0]*R;a[1]=m[1]+H[1]*R;a[2]=m[2]+H[2]*R;a[3]=m[3]+H[3]*R;a[4]=m[4]+H[4]*R;a[5]=m[5]+H[5]*R;a[6]=m[6]+H[6]*R;a[7]=m[7]+H[7]*R;a[8]=m[8]+H[8]*R;a[9]=m[9]+H[9]*R;a[10]=m[10]+H[10]*R;a[11]=m[11]+H[11]*R;a[12]=m[12]+H[12]*R;a[13]=m[13]+H[13]*R;a[14]=m[14]+H[14]*R;a[15]=m[15]+H[15]*R;return a}function S(a,m){return a[0]===m[0]&&a[1]===m[1]&&a[2]===m[2]&&
a[3]===m[3]&&a[4]===m[4]&&a[5]===m[5]&&a[6]===m[6]&&a[7]===m[7]&&a[8]===m[8]&&a[9]===m[9]&&a[10]===m[10]&&a[11]===m[11]&&a[12]===m[12]&&a[13]===m[13]&&a[14]===m[14]&&a[15]===m[15]}function T(a,m){if(a===m)return!0;const H=a[0],R=a[1],ha=a[2],ka=a[3],ra=a[4],pa=a[5],la=a[6],sa=a[7],wa=a[8],ya=a[9],za=a[10],Ba=a[11],aa=a[12],ma=a[13],Z=a[14];a=a[15];const ua=m[0],va=m[1],ia=m[2],Aa=m[3],Ca=m[4],Fa=m[5],Ga=m[6],Ja=m[7],Sa=m[8],Va=m[9],Ta=m[10],Na=m[11],La=m[12],$a=m[13],bb=m[14];m=m[15];const Ra=J.getEpsilon();
return Math.abs(H-ua)<=Ra*Math.max(1,Math.abs(H),Math.abs(ua))&&Math.abs(R-va)<=Ra*Math.max(1,Math.abs(R),Math.abs(va))&&Math.abs(ha-ia)<=Ra*Math.max(1,Math.abs(ha),Math.abs(ia))&&Math.abs(ka-Aa)<=Ra*Math.max(1,Math.abs(ka),Math.abs(Aa))&&Math.abs(ra-Ca)<=Ra*Math.max(1,Math.abs(ra),Math.abs(Ca))&&Math.abs(pa-Fa)<=Ra*Math.max(1,Math.abs(pa),Math.abs(Fa))&&Math.abs(la-Ga)<=Ra*Math.max(1,Math.abs(la),Math.abs(Ga))&&Math.abs(sa-Ja)<=Ra*Math.max(1,Math.abs(sa),Math.abs(Ja))&&Math.abs(wa-Sa)<=Ra*Math.max(1,
Math.abs(wa),Math.abs(Sa))&&Math.abs(ya-Va)<=Ra*Math.max(1,Math.abs(ya),Math.abs(Va))&&Math.abs(za-Ta)<=Ra*Math.max(1,Math.abs(za),Math.abs(Ta))&&Math.abs(Ba-Na)<=Ra*Math.max(1,Math.abs(Ba),Math.abs(Na))&&Math.abs(aa-La)<=Ra*Math.max(1,Math.abs(aa),Math.abs(La))&&Math.abs(ma-$a)<=Ra*Math.max(1,Math.abs(ma),Math.abs($a))&&Math.abs(Z-bb)<=Ra*Math.max(1,Math.abs(Z),Math.abs(bb))&&Math.abs(a-m)<=Ra*Math.max(1,Math.abs(a),Math.abs(m))}function W(a){const m=J.getEpsilon(),H=a[0],R=a[1],ha=a[2],ka=a[4],
ra=a[5],pa=a[6],la=a[8],sa=a[9];a=a[10];return Math.abs(1-(H*H+ka*ka+la*la))<=m&&Math.abs(1-(R*R+ra*ra+sa*sa))<=m&&Math.abs(1-(ha*ha+pa*pa+a*a))<=m}function ea(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const na=l.create();l=Object.freeze(Object.defineProperty({__proto__:null,add:O,adjoint:L,copy:E,determinant:F,equals:T,exactEquals:S,frob:P,fromQuat:I,fromQuat2:g,fromRotation:b,fromRotationTranslation:k,fromRotationTranslationScale:y,fromRotationTranslationScaleOrigin:D,
fromScaling:x,fromTranslation:w,fromXRotation:d,fromYRotation:r,fromZRotation:q,frustum:V,getRotation:A,getScaling:z,getTranslation:t,hasIdentityRotation:ea,identity:G,invert:N,invertOrIdentity:U,isOrthoNormal:W,lookAt:qa,mul:u,multiply:u,multiplyScalar:K,multiplyScalarAndAdd:Y,ortho:da,perspective:C,perspectiveFromFieldOfView:M,rotate:e,rotateX:f,rotateY:c,rotateZ:n,scale:h,set:p,str:ja,sub:v,subtract:v,targetTo:xa,translate:B,transpose:ca},Symbol.toStringTag,{value:"Module"}));Q.add=O;Q.adjoint=
L;Q.copy=E;Q.determinant=F;Q.equals=T;Q.exactEquals=S;Q.frob=P;Q.fromQuat=I;Q.fromQuat2=g;Q.fromRotation=b;Q.fromRotationTranslation=k;Q.fromRotationTranslationScale=y;Q.fromRotationTranslationScaleOrigin=D;Q.fromScaling=x;Q.fromTranslation=w;Q.fromXRotation=d;Q.fromYRotation=r;Q.fromZRotation=q;Q.frustum=V;Q.getRotation=A;Q.getScaling=z;Q.getTranslation=t;Q.hasIdentityRotation=ea;Q.identity=G;Q.invert=N;Q.invertOrIdentity=U;Q.isOrthoNormal=W;Q.lookAt=qa;Q.mat4=l;Q.mul=u;Q.multiply=u;Q.multiplyScalar=
K;Q.multiplyScalarAndAdd=Y;Q.ortho=da;Q.perspective=C;Q.perspectiveFromFieldOfView=M;Q.rotate=e;Q.rotateX=f;Q.rotateY=c;Q.rotateZ=n;Q.scale=h;Q.set=p;Q.str=ja;Q.sub=v;Q.subtract=v;Q.targetTo=xa;Q.translate=B;Q.transpose=ca})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(Q,l,J,E,p){function G(h=B){return[h[0],h[1],h[2],h[3]]}function ca(h,e){h!==e&&(h[0]=e[0],h[1]=e[1],h[2]=e[2],h[3]=e[3]);return h}
function U(h){return E.isNone(h)||h[0]>=h[2]?0:h[2]-h[0]}function N(h){return h[1]>=h[3]?0:h[3]-h[1]}function L(h,e,f){return e>=h[0]&&f>=h[1]&&e<=h[2]&&f<=h[3]}function F(h){return null!=h&&4===h.length}const u=[Infinity,Infinity,-Infinity,-Infinity],B=[0,0,0,0];Q.NEGATIVE_INFINITY=u;Q.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];Q.UNIT=[0,0,1,1];Q.ZERO=B;Q.allFinite=function(h){for(let e=0;4>e;e++)if(!isFinite(h[e]))return!1;return!0};Q.area=function(h){return U(h)*N(h)};Q.center=function(h,
e=[0,0]){e[0]=(h[0]+h[2])/2;e[1]=(h[1]+h[3])/2;return e};Q.clone=function(h){return[h[0],h[1],h[2],h[3]]};Q.contains=function(h,e){return e[0]>=h[0]&&e[2]<=h[2]&&e[1]>=h[1]&&e[3]<=h[3]};Q.containsPoint=function(h,e){return L(h,e[0],e[1])};Q.containsPointObject=function(h,e){return L(h,e.x,e.y)};Q.containsPointWithMargin=function(h,e,f){return e[0]>=h[0]-f&&e[1]>=h[1]-f&&e[0]<=h[2]+f&&e[1]<=h[3]+f};Q.containsXY=L;Q.containsXYWithMargin=function(h,e,f,c){return e>=h[0]-c&&f>=h[1]-c&&e<=h[2]+c&&f<=h[3]+
c};Q.copy=ca;Q.create=G;Q.distance=function(h,e){const f=(h[1]+h[3])/2,c=Math.max(Math.abs(e[0]-(h[0]+h[2])/2)-U(h)/2,0);h=Math.max(Math.abs(e[1]-f)-N(h)/2,0);return Math.sqrt(c*c+h*h)};Q.empty=function(h){return h?ca(h,u):G(u)};Q.equals=function(h,e){return F(h)&&F(e)?h[0]===e[0]&&h[1]===e[1]&&h[2]===e[2]&&h[3]===e[3]:h===e};Q.expand=function(h,e,f){if(E.isNone(e))ca(f,h);else if("length"in e)if(F(e))f[0]=Math.min(h[0],e[0]),f[1]=Math.min(h[1],e[1]),f[2]=Math.max(h[2],e[2]),f[3]=Math.max(h[3],e[3]);
else{if(2===e.length||3===e.length)f[0]=Math.min(h[0],e[0]),f[1]=Math.min(h[1],e[1]),f[2]=Math.max(h[2],e[0]),f[3]=Math.max(h[3],e[1])}else switch(e.type){case "extent":f[0]=Math.min(h[0],e.xmin);f[1]=Math.min(h[1],e.ymin);f[2]=Math.max(h[2],e.xmax);f[3]=Math.max(h[3],e.ymax);break;case "point":f[0]=Math.min(h[0],e.x),f[1]=Math.min(h[1],e.y),f[2]=Math.max(h[2],e.x),f[3]=Math.max(h[3],e.y)}};Q.expandPointInPlace=function(h,e){e[0]<h[0]&&(h[0]=e[0]);e[0]>h[2]&&(h[2]=e[0]);e[1]<h[1]&&(h[1]=e[1]);e[1]>
h[3]&&(h[3]=e[1])};Q.expandWithNestedArray=function(h,e,f=h){const c=e.length;let n=h[0],w=h[1],x=h[2];h=h[3];for(let b=0;b<c;b++){const d=e[b];n=Math.min(n,d[0]);w=Math.min(w,d[1]);x=Math.max(x,d[0]);h=Math.max(h,d[1])}f[0]=n;f[1]=w;f[2]=x;f[3]=h;return f};Q.fromExtent=function(h,e=G()){e[0]=h.xmin;e[1]=h.ymin;e[2]=h.xmax;e[3]=h.ymax;return e};Q.fromValues=function(h,e,f,c,n=G()){n[0]=h;n[1]=e;n[2]=f;n[3]=c;return n};Q.height=N;Q.intersection=function(h,e,f){if(E.isNone(e))return ca(f,h);const c=
e[0],n=e[1],w=e[2];e=e[3];f[0]=J.clamp(h[0],c,w);f[1]=J.clamp(h[1],n,e);f[2]=J.clamp(h[2],c,w);f[3]=J.clamp(h[3],n,e);return f};Q.intersects=function(h,e){return Math.max(e[0],h[0])<=Math.min(e[2],h[2])&&Math.max(e[1],h[1])<=Math.min(e[3],h[3])};Q.intersectsSegment=function(h,e,f){const c=h[0],n=h[1],w=h[2];h=h[3];const {x,y:b}=e,{x:d,y:r}=f;var q=(g,t)=>0>(r-b)*g+(x-d)*t+(d*b-x*r);e=q(c,h);f=q(w,h);const k=q(w,n);q=q(c,n);return e===f&&f===k&&k===q&&q===e||x<c&&d<c||x>w&&d>w||b>h&&r>h||b<n&&r<n?
!1:!0};Q.intersectsSphere=function(h,e){const f=e[3];var c=Math.abs(e[0]-.5*(h[0]+h[2]));const n=.5*(h[2]-h[0]);if(c>f+n)return!1;var w=.5*(h[3]-h[1]);h=Math.abs(e[1]-.5*(h[1]+h[3]));if(h>f+w)return!1;if(c<n||h<w)return!0;c-=n;w=h-w;return c*c+w*w<=f*f};Q.is=F;Q.isPoint=function(h){return(0===U(h)||!isFinite(h[0]))&&(0===N(h)||!isFinite(h[1]))};Q.offset=function(h,e,f,c=h){c[0]=h[0]+e;c[1]=h[1]+f;c[2]=h[2]+e;c[3]=h[3]+f;return c};Q.pad=function(h,e,f=h){f[0]=h[0]-e;f[1]=h[1]-e;f[2]=h[2]+e;f[3]=h[3]+
e;return f};Q.setMax=function(h,e,f=h){f[2]=e[0];f[3]=e[1];f!==h&&(f[0]=h[0],f[1]=h[1]);return h};Q.setMin=function(h,e,f=h){f[0]=e[0];f[1]=e[1];f!==h&&(f[2]=h[2],f[3]=h[3]);return f};Q.size=function(h,e){e[0]=h[2]-h[0];e[1]=h[3]-h[1]};Q.toExtent=function(h,e){return new p({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:e})};Q.width=U;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(Q,
l){const J=Math.PI/180;var E=l.earth.radius;const p=l.earth.eccentricitySquared;E={a1:E*p,a2:E*p*E*p,a3:E*p*p/2,a4:E*p*E*p*2.5,a5:E*p+E*p*p/2,a6:1-p};l={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:l.earth.radius,f:l.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:l.moon.radius,f:l.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:l.mars.radius,f:l.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,
f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,
f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},
104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:l.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};Q.WKT_SPHEROID_REGEX=
/SPHEROID\[([^\]]+)]/i;Q.earthEllipsoidConstants=E;Q.spheroids=l;Q.toRadians=J;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(Q,l,J,E){Q.getGeometryZScaler=function(p,G,ca){if(l.isNone(G)||l.isNone(ca)||ca.vcsWkid||E.equals(G,ca))return null;G=J.getMetersPerVerticalUnitForSR(G);ca=J.getMetersPerVerticalUnitForSR(ca);const U=G/ca;if(1===U)return null;
switch(p){case "point":case "esriGeometryPoint":return N=>{N&&null!=N.z&&(N.z*=U)};case "polyline":case "esriGeometryPolyline":return N=>{if(N)for(const L of N.paths)for(const F of L)2<F.length&&(F[2]*=U)};case "polygon":case "esriGeometryPolygon":return N=>{if(N)for(const L of N.rings)for(const F of L)2<F.length&&(F[2]*=U)};case "multipoint":case "esriGeometryMultipoint":return N=>{if(N)for(const L of N.points)2<L.length&&(L[2]*=U)};case "extent":case "esriGeometryExtent":return N=>{N&&null!=N.zmin&&
null!=N.zmax&&(N.zmin*=U,N.zmax*=U)};default:return null}};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(Q,l,J,E,p){function G(k,g){return c.get(k)/c.get(g)||1}function ca(k,g="geographic"){const [t,z]=k;k=Math.sqrt(t*t+z*z);let A=Math.atan2(z,t)*n;A=(360+A)%360;"geographic"===g&&(A=(450-A)%360);return[k,A]}function U(k,
g="geographic"){let t=k[1];"geographic"===g&&(t=(450-t)%360);t%=360;k=k[0];return[k*Math.cos(t/n),k*Math.sin(t/n)]}function N(k,g,t="geographic",z=1){if(!p.isValidPixelBlock(k))return k;const {pixels:A,width:y,height:D}=k;var I=y*D;const V=A[0],C=A[1],M=k.pixelType.startsWith("f")?k.pixelType:"f32",da=E.createEmptyBand(M,I);I=E.createEmptyBand(M,I);let qa=0;for(let xa=0;xa<D;xa++)for(let ja=0;ja<y;ja++)"vector-uv"===g?([da[qa],I[qa]]=ca([V[qa],C[qa]],t),da[qa]*=z):([da[qa],I[qa]]=U([V[qa],C[qa]],
t),da[qa]*=z,I[qa]*=z),qa++;k=new E({pixelType:M,width:k.width,height:k.height,mask:k.mask,validPixelCount:k.validPixelCount,maskIsAlpha:k.maskIsAlpha,pixels:[da,I]});k.updateStatistics();return k}function L(k=0,g=0,t=Math.PI,z=!0){z&&(t=(2*Math.PI-t)%(2*Math.PI));z=z?-1:1;const A=-7*z,y=-2*z,D=-16*z,[I,V]=u(0,g+13*z,t,21.75),[C,M]=u(k-5.5,g+A,t,21.75),[da,qa]=u(k+5.5,g+A,t,21.75),[xa,ja]=u(k-1.5,g+y,t,21.75),[P,O]=u(k+1.5,g+y,t,21.75),[v,K]=u(k-1.5,g+D,t,21.75),[Y,S]=u(k+1.5,g+D,t,21.75);return[I,
V,C,M,xa,ja,P,O,da,qa,v,K,Y,S]}function F(k=0,g=Math.PI,t=!0){t&&(g=(2*Math.PI-g)%(2*Math.PI));var z=t?-1:1,A=5*z;const y=20*z,D=25*z;z*=2;const I=t?1:-1;t=5*I;let [V,C]=[0+t,0-y],[M,da]=[V+2*I,C],[qa,xa]=[M-0*I,da+z],[ja,P]=[0-t,0-D],[O,v]=[ja+0*I,P-z],K=Math.ceil(k/5),Y=Math.floor(K/10);K-=8*Y;k=[];const S=[];for(let ha=0;ha<K/2;ha++,Y--){0>=Y&&1===K%2&&ha===(K-1)/2&&(ja=0,O=ja+0*I,P=(P+C)/2,v=P-z);const [ka,ra]=u(ja,P,g,45);if(0<Y){const [pa,la]=u(M,P,g,45),[sa,wa]=u(V,C,g,45);k.push(pa);k.push(la);
k.push(ka);k.push(ra);k.push(sa);k.push(wa)}else{const [pa,la]=u(M,da,g,45),[sa,wa]=u(qa,xa,g,45),[ya,za]=u(O,v,g,45);S.push(ka);S.push(ra);S.push(ya);S.push(za);S.push(sa);S.push(wa);S.push(pa);S.push(la)}P+=A;C+=A;da+=A;xa+=A;v+=A}const [T,W]=u(0+t,0+y,g,45);A=7*I;const [ea,na]=u(0+A,0+y,g,45),[a,m]=u(0+t,0-D,g,45),[H,R]=u(0+A,0-D,g,45);return{pennants:k,barbs:S,shaft:[T,W,ea,na,a,m,H,R]}}function u(k,g,t,z=1){return[Math.sqrt(k*k+g*g)/z,(2*Math.PI+(2*Math.PI+Math.atan2(g,k))%(2*Math.PI)-t)%(2*
Math.PI)]}function B(k,g,t,z){t=G(z||"knots",t);for(z=1;z<g.length;z++)if(z===g.length-1){if(k<g[z]*t)break}else if(k<=g[z]*t)break;return Math.min(z-1,g.length-2)}function h(k,g,t,z,A){let y=0;switch(g){case "beaufort_kn":y=B(k,b,"knots",t);break;case "beaufort_km":y=B(k,b,"kilometer-per-hour",t);break;case "beaufort_ft":y=B(k,b,"feet-per-second",t);break;case "beaufort_m":y=B(k,b,"meter-per-second",t);break;case "classified_arrow":y=B(k,A??[],z,t);break;case "ocean_current_m":y=B(k,d,"meter-per-second",
t);break;case "ocean_current_kn":y=B(k,r,"knots",t)}return y}function e(k,g){const {style:t,inputUnit:z,outputUnit:A,breakValues:y}=g,D=w.fromJSON(z),I=w.fromJSON(A);let V=0,C=0;const {width:M,height:da,mask:qa}=k,xa=k.pixels[0];k=k.pixels[1];var ja=J.isSome(qa)?qa.filter(v=>0<v).length:M*da;const P=new Float32Array(42*ja);ja=new Uint32Array(15*ja);g=g.invertDirection?L(0,0,0,!1):x;for(let v=0;v<da;v++)for(let K=0;K<M;K++){var O=v*M+K;if(!qa||qa[v*M+K]){const Y=(k[O]+360)%360/180*Math.PI,S=h(xa[O],
t,D,I,y);for(let T=0;T<g.length;T+=2)P[V++]=(K+.5)/M,P[V++]=(v+.5)/da,P[V++]=g[T],P[V++]=g[T+1]+Y,P[V++]=S,P[V++]=xa[O];O=7*(V/42-1);ja[C++]=O;ja[C++]=O+1;ja[C++]=O+2;ja[C++]=O+0;ja[C++]=O+4;ja[C++]=O+3;ja[C++]=O+0;ja[C++]=O+2;ja[C++]=O+3;ja[C++]=O+2;ja[C++]=O+5;ja[C++]=O+3;ja[C++]=O+5;ja[C++]=O+6;ja[C++]=O+3}}return{vertexData:P,indexData:ja}}function f(k,g){let t=0,z=0;const {width:A,height:y,mask:D}=k;k=k.pixels[0];const I=[],V=[];var C=w.fromJSON(g.inputUnit);C=G(C,"knots");g="wind_speed"===g.style?
5:Number.MAX_VALUE;for(let da=0;da<y;da++)for(let qa=0;qa<A;qa++){var M=k[da*A+qa]*C;if((!D||D[da*A+qa])&&M<g){for(let xa=0;4>xa;xa++)I[t++]=(qa+.5)/A,I[t++]=(da+.5)/y,I[t++]=2>xa?-.5:.5,I[t++]=0===xa%2?-.5:.5,I[t++]=0,I[t++]=M;M=4*(t/24-1);V[z++]=M;V[z++]=M+1;V[z++]=M+2;V[z++]=M+1;V[z++]=M+2;V[z++]=M+3}}return{vertexData:new Float32Array(I),indexData:new Uint32Array(V)}}const c=new Map;c.set("meter-per-second",1);c.set("kilometer-per-hour",.277778);c.set("knots",.514444);c.set("feet-per-second",
.3048);c.set("mile-per-hour",.44704);const n=180/Math.PI,w=new l.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),x=L(0,0,0),b=[0,1,3,6,10,16,21,27,33,40,47,55,63],d=[0,.5,1,1.5,2],r=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],q=[];Q.convertToLocalDirections=function(k,g,t,z="geographic"){if(!p.isValidPixelBlock(k)||J.isNone(t))return k;k="vector-magdir"===g?k.clone():J.unwrap(N(k,
g));const A=k.pixels[1];for(let y=0;y<A.length;y++)A[y]="geographic"===z?(A[y]+t[y]+270)%360:(A[y]+360-t[y])%360;return"vector-magdir"===g?k:N(k,"vector-magdir")};Q.convertVectorFieldData=N;Q.convertVectorFieldUnit=function(k,g,t=1){if(1===t||!p.isValidPixelBlock(k))return k;k=k.clone();const {pixels:z,width:A,height:y}=k,D=z[0],I=z[1];let V=0;for(let C=0;C<y;C++)for(let M=0;M<A;M++)"vector-uv"===g?(D[V]*=t,I[V]*=t):D[V]*=t,V++;k.updateStatistics();return k};Q.createVFMesh=function(k,g){if("simple_scalar"===
g.style)g=f(k,g);else if("wind_speed"===g.style){if(0===q.length)for(var t=0;30>t;t++)q.push(F(5*t,0,!g.invertDirection));g=w.fromJSON(g.inputUnit);g=G(g,"knots");const {width:D,height:I,mask:V}=k;t=k.pixels[0];k=k.pixels[1];const C=[],M=[];let da=0,qa=0;for(let xa=0;xa<I;xa++)for(let ja=0;ja<D;ja++){var z=xa*D+ja,A=t[z]*g;if((!V||V[xa*D+ja])&&5<=A){const P=(k[z]+360)%360/180*Math.PI,{pennants:O,barbs:v,shaft:K}=q[Math.min(Math.floor(A/5),29)];if(0===O.length+v.length)continue;z=C.length/6;const Y=
(ja+.5)/D,S=(xa+.5)/I;for(var y=0;y<O.length;y+=2)C[da++]=Y,C[da++]=S,C[da++]=O[y],C[da++]=O[y+1]+P,C[da++]=0,C[da++]=A;for(y=0;y<v.length;y+=2)C[da++]=Y,C[da++]=S,C[da++]=v[y],C[da++]=v[y+1]+P,C[da++]=0,C[da++]=A;for(y=0;y<K.length;y+=2)C[da++]=Y,C[da++]=S,C[da++]=K[y],C[da++]=K[y+1]+P,C[da++]=0,C[da++]=A;for(A=0;A<O.length/6;A++)M[qa++]=z,M[qa++]=z+1,M[qa++]=z+2,z+=3;for(A=0;A<v.length/8;A++)M[qa++]=z,M[qa++]=z+1,M[qa++]=z+2,M[qa++]=z+1,M[qa++]=z+2,M[qa++]=z+3,z+=4;M[qa++]=z+0;M[qa++]=z+1;M[qa++]=
z+2;M[qa++]=z+1;M[qa++]=z+3;M[qa++]=z+2;z+=4}}g={vertexData:new Float32Array(C),indexData:new Uint32Array(M)}}else g=e(k,g);return g};Q.createVFMeshScalar=f;Q.getUnitConversionFactor=G;Q.sampleVectorField=function(k,g,t,z=[0,0],A=.5){const {width:y,height:D,mask:I}=k,[V,C]=k.pixels,[M,da]=z;k=Math.round((y-M)/t);z=Math.round((D-da)/t);var qa=k*z;const xa=new Float32Array(qa),ja=new Float32Array(qa);qa=new Uint8Array(qa);g="vector-uv"===g;for(let O=0;O<z;O++)for(let v=0;v<k;v++){let K=0;const Y=O*
k+v,S=Math.max(0,O*t+da),T=Math.max(0,v*t+M),W=Math.min(D,S+t),ea=Math.min(y,T+t);for(let na=S;na<W;na++)for(let a=T;a<ea;a++){var P=na*y+a;if(!I||I[P]){K++;P=g?[V[P],C[P]]:[V[P],(360+C[P])%360];const [m,H]=g?P:U(P);xa[Y]+=m;ja[Y]+=H}}if(K>=(W-S)*(ea-T)*(1-A)){qa[Y]=1;const [na,a]=ca([xa[Y]/K,ja[Y]/K]);xa[Y]=na;ja[Y]=a}else qa[Y]=0,xa[Y]=0,ja[Y]=0}t=new E({width:k,height:z,pixels:[xa,ja],mask:qa});t.updateStatistics();return t};Q.snapImageToSymbolTile=function(k,g,t,z,A){if(J.isNone(A)||!A.spatialReference.equals(k.spatialReference))return{extent:k,
width:Math.round(g/z),height:Math.round(t/z),resolution:k.width/g};const y=A.xmin;A=A.ymax;g=(k.xmax-k.xmin)/g*z;t=(k.ymax-k.ymin)/t*z;k.xmin=y+Math.floor((k.xmin-y)/g)*g;k.xmax=y+Math.ceil((k.xmax-y)/g)*g;k.ymin=A+Math.floor((k.ymin-A)/t)*t;k.ymax=A+Math.ceil((k.ymax-A)/t)*t;return{extent:k,width:Math.round(k.width/g),height:Math.round(k.height/t),resolution:(g+t)/2}};Q.unitKebabDict=w;Q.uvComponentToVector=ca;Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports",
"./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(Q,l,J,E){const p={GCSShiftXform:l,IdentityXform:J,PolynomialXform:E},G=Object.keys(p);Q.isTransformSupported=function(ca){return!ca||G.includes(ca?.type)};Q.readTransform=function(ca){if(!ca?.type)return null;var U=p[ca?.type];return U?(U=new U,U.read(ca),U):null};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(Q,l,J,E,p,G,ca,U){E=function(N){function L(){var u=N.apply(this,arguments)||this;u.type="gcs-shift";u.tolerance=1E-8;return u}Q._inheritsLoose(L,N);var F=L.prototype;F.forwardTransform=function(u){u=u.clone();if("point"===u.type)return u.x>180+this.tolerance&&(u.x-=360),u;u.xmin>=180-this.tolerance?(u.xmax-=360,u.xmin-=360):u.xmax>180+this.tolerance&&(u.xmin=-180,u.xmax=180);return u};F.inverseTransform=function(u){u=u.clone();if("point"===u.type)return u.x<-this.tolerance&&(u.x+=360),u;
u.xmin<-this.tolerance&&(u.xmin+=360,u.xmax+=360);return u};return L}(U);l.__decorate([G.enumeration({GCSShiftXform:"gcs-shift"})],E.prototype,"type",void 0);l.__decorate([J.property()],E.prototype,"tolerance",void 0);return E=l.__decorate([ca.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],E)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(Q,l,J,E,p,G,ca){J=function(U){function N(){return U.apply(this,arguments)||this}Q._inheritsLoose(N,U);var L=N.prototype;L.forwardTransform=function(F){return F};L.inverseTransform=function(F){return F};Q._createClass(N,[{key:"affectsPixelSize",get:function(){return!1}}]);return N}(J.JSONSupport);l.__decorate([E.property()],J.prototype,"affectsPixelSize",null);l.__decorate([E.property({json:{write:!0}})],J.prototype,"spatialReference",void 0);return J=l.__decorate([ca.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
J)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(Q,l,J,E,p,G,ca,U,N,L){J=function(F){function u(){var B=F.apply(this,arguments)||
this;B.type="identity";return B}Q._inheritsLoose(u,F);return u}(L);l.__decorate([U.enumeration({IdentityXform:"identity"})],J.prototype,"type",void 0);return J=l.__decorate([N.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],J)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u,B){function h(f,c,n){const {x:w,y:x}=c;if(2>n)return{x:f[0]+w*f[2]+x*f[4],y:f[1]+w*f[3]+x*f[5]};if(2===n){c=w*w;n=x*x;var b=w*x;return{x:f[0]+w*f[2]+x*f[4]+c*f[6]+b*f[8]+n*f[10],y:f[1]+w*f[3]+x*f[5]+c*f[7]+b*f[9]+n*f[11]}}c=w*w;n=x*x;b=w*x;const d=c*w,r=c*x,q=w*n,k=x*n;return{x:f[0]+w*f[2]+x*f[4]+c*f[6]+b*f[8]+n*f[10]+d*f[12]+r*f[14]+q*f[16]+k*f[18],y:f[1]+w*f[3]+x*f[5]+c*f[7]+b*f[9]+n*f[11]+d*f[13]+r*f[15]+q*f[17]+k*f[19]}}function e(f,c,n){const {xmin:w,ymin:x,
xmax:b,ymax:d,spatialReference:r}=c;c=[];if(2>n)c.push({x:w,y:d}),c.push({x:b,y:d}),c.push({x:w,y:x}),c.push({x:b,y:x});else{var q=10;for(var k=0;k<q;k++)c.push({x:w,y:x+(d-x)*k/(q-1)}),c.push({x:b,y:x+(d-x)*k/(q-1)});q=8;for(k=1;k<=q;k++)c.push({x:w+(b-w)*k/q,y:x}),c.push({x:w+(b-w)*k/q,y:d})}c=c.map(g=>h(f,g,n));q=c.map(g=>g.x);c=c.map(g=>g.y);return new B({xmin:Math.min.apply(null,q),xmax:Math.max.apply(null,q),ymin:Math.min.apply(null,c),ymax:Math.max.apply(null,c),spatialReference:r})}J=function(f){function c(){var w=
f.apply(this,arguments)||this;w.polynomialOrder=1;w.type="polynomial";return w}Q._inheritsLoose(c,f);var n=c.prototype;n.readForwardCoefficients=function(w,x){const {coeffX:b,coeffY:d}=x;if(!b?.length||!d?.length||b.length!==d.length)return null;w=[];for(x=0;x<b.length;x++)w.push(b[x]),w.push(d[x]);return w};n.writeForwardCoefficients=function(w,x,b){b=[];const d=[];for(let r=0;r<w?.length;r++)0===r%2?b.push(w[r]):d.push(w[r]);x.coeffX=b;x.coeffY=d};n.readInverseCoefficients=function(w,x){const {inverseCoeffX:b,
inverseCoeffY:d}=x;if(!b?.length||!d?.length||b.length!==d.length)return null;w=[];for(x=0;x<b.length;x++)w.push(b[x]),w.push(d[x]);return w};n.writeInverseCoefficients=function(w,x,b){b=[];const d=[];for(let r=0;r<w?.length;r++)0===r%2?b.push(w[r]):d.push(w[r]);x.inverseCoeffX=b;x.inverseCoeffY=d};n.forwardTransform=function(w){if("point"===w.type){const x=h(this.forwardCoefficients,w,this.polynomialOrder);return new u({x:x.x,y:x.y,spatialReference:w.spatialReference})}return e(this.forwardCoefficients,
w,this.polynomialOrder)};n.inverseTransform=function(w){if("point"===w.type){const x=h(this.inverseCoefficients,w,this.polynomialOrder);return new u({x:x.x,y:x.y,spatialReference:w.spatialReference})}return e(this.inverseCoefficients,w,this.polynomialOrder)};Q._createClass(c,[{key:"inverseCoefficients",get:function(){var w=this._get("inverseCoefficients"),x=this._get("forwardCoefficients");if(!w&&x&&2>this.polynomialOrder){const [b,d,r,q,k,g]=x;w=r*g-k*q;x=k*q-r*g;w=[(k*d-b*g)/w,(r*d-b*q)/x,g/w,q/
x,-k/w,-r/x]}return w},set:function(w){this._set("inverseCoefficients",w)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return c}(F);l.__decorate([E.property({json:{write:!0}})],J.prototype,"polynomialOrder",void 0);l.__decorate([E.property()],J.prototype,"forwardCoefficients",void 0);l.__decorate([U.reader("forwardCoefficients",["coeffX","coeffY"])],J.prototype,"readForwardCoefficients",null);l.__decorate([L.writer("forwardCoefficients")],J.prototype,"writeForwardCoefficients",
null);l.__decorate([E.property({json:{write:!0}})],J.prototype,"inverseCoefficients",null);l.__decorate([U.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],J.prototype,"readInverseCoefficients",null);l.__decorate([L.writer("inverseCoefficients")],J.prototype,"writeInverseCoefficients",null);l.__decorate([E.property()],J.prototype,"affectsPixelSize",null);l.__decorate([ca.enumeration({PolynomialXform:"polynomial"})],J.prototype,"type",void 0);return J=l.__decorate([N.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],
J)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(Q,l,J,E,p,G,ca,U,N,L,F,u,B,h,e){function f(w,x){const {attributeTable:b,bandCount:d}=w;return G.isNone(b)||1<d||x&&null==b.fields.find(r=>r.name.toLowerCase()===x.toLowerCase())?!1:!0}function c(w){const {bandCount:x,colormap:b}=w;return G.isSome(b)&&0<b.length&&1===x}function n(w){return u.isValidPixelBlock(w)&&0!==w.validPixelCount}E=function(w){function x(d){return w.call(this,d)||this}Q._inheritsLoose(x,w);var b=x.prototype;b.bind=function(){const {rendererJSON:d}=this;if(!d)return{success:!1};
this.lookup={rendererJSON:{}};let r;switch(d.type){case "uniqueValue":r=this._updateUVRenderer(d);break;case "rasterColormap":r=this._updateColormapRenderer(d);break;case "rasterStretch":r=this._updateStretchRenderer(d);break;case "classBreaks":r=this._updateClassBreaksRenderer(d);break;case "rasterShadedRelief":r=this._updateShadedReliefRenderer(d);break;case "vectorField":r=this._updateVectorFieldRenderer();break;case "flowRenderer":r=this._updateFlowRenderer()}return r};b.symbolize=function(d){let r=
d&&d.pixelBlock;if(!n(r))return r;if(d.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(r,d.simpleStretchParams);try{3<r.pixels.length&&(r=u.extractBands(r,[0,1,2]));let q;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":q=this._symbolizeColormap(r);break;case "classBreaks":q=this._symbolizeClassBreaks(r);break;case "rasterStretch":q=this._symbolizeStretch(r,d.bandIds);break;case "rasterShadedRelief":const k=d.extent;q=this._symbolizeShadedRelief(r,
{isGCS:k.spatialReference.isGeographic,resolution:{x:(k.xmax-k.xmin)/r.width,y:(k.ymax-k.ymin)/r.height}})}return q}catch(q){return p.getLogger(this.declaredClass).error("symbolize",q.message),r}};b.simpleStretch=function(d,r){if(!n(d))return d;try{return 3<d.pixels.length&&(d=u.extractBands(d,[0,1,2])),B.stretch(d,{...r,isRenderer:!0})}catch(q){return p.getLogger(this.declaredClass).error("symbolize",q.message),d}};b.generateWebGLParameters=function(d){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:t,
offset:z}=this.lookup.colormapLut||{};return{colormap:t,colormapOffset:z,type:"lut"}}const {pixelBlock:r,isGCS:q,resolution:k,bandIds:g}=d;({rendererJSON:d}=this);return"rasterStretch"===d.type?this._generateStretchWebGLParams(r,d,g):"rasterShadedRelief"===d.type?this._generateShadedReliefWebGLParams(d,q,k??void 0):"vectorField"===d.type?this._generateVectorFieldWebGLParams(d):null};b._isLUTChanged=function(d){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const r=
this.rendererJSON.colorRamp;if(d)return JSON.stringify(r)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};b._symbolizeColormap=function(d){return this._isLUTChanged()&&!this.bind().success?d:u.colorize(d,this.lookup.colormapLut)};b._symbolizeClassBreaks=function(d){const {canUseIndexedLUT:r}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?d:r?u.colorize(d,this.lookup.colormapLut):u.remapColor(d,this.lookup.remapLut??[])};b._symbolizeStretch=function(d,r){const {rasterInfo:q}=this,{pixelType:k,bandCount:g}=q,t=this.rendererJSON;var z=["u8","u16","s8","s16"].includes(k);let A;var {dra:y}=t;({gamma:D}=this.lookup);if("histogramEqualization"===t.stretchType){z=y?null:this.lookup?.histogramLut;r=B.getStretchCutoff(t,{rasterInfo:q,pixelBlock:d,bandIds:r,returnHistogramLut:!z});var D=B.stretch(d,{...r,gamma:D,isRenderer:!0});
D=u.lookupPixels(D,{lut:y?r.histogramLut:z,offset:0})}else if(z){if(y)y=B.getStretchCutoff(t,{rasterInfo:q,pixelBlock:d,bandIds:r}),A=B.createStretchLUT({pixelType:k,...y,gamma:D,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return d;A=this.lookup?this.lookup.stretchLut:null}if(!A)return d;1<g&&r?.length===G.unwrap(d)?.pixels.length&&A?.lut.length===g&&(A={lut:r.map(I=>A.lut[I]),offset:A.offset});D=u.lookupPixels(d,A)}else y=B.getStretchCutoff(t,{rasterInfo:q,pixelBlock:d,
bandIds:r}),D=B.stretch(d,{...y,gamma:D,isRenderer:!0});if(t.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return d;D=u.colorize(D,this.lookup?.colormapLut)}return D};b._symbolizeShadedRelief=function(d,r){var q=this.rendererJSON;r=h.hillshade(d,{...q,...r});if(!q.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return r;q=this.lookup?this.lookup.hsvMap:null;if(!q)return r;const k=G.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};h.tintHillshade(r,d,q,k);return r};b._isVectorFieldData=
function(){const {bandCount:d,dataType:r}=this.rasterInfo;return 2===d&&("vector-magdir"===r||"vector-uv"===r)};b._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};b._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
b._updateUVRenderer=function(d){const {bandCount:r,attributeTable:q,pixelType:k}=this.rasterInfo,g=d.field1;if(!g)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const t=d.defaultSymbol;var z=1===r&&["u8","s8"].includes(k);if(!f(this.rasterInfo,g)&&!z)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const A=[];if(G.isSome(q)){const y=q.fields.find(D=>"value"===D.name.toLowerCase());
if(!y)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};q.features.forEach(D=>{const I=d.uniqueValueInfos?.find(V=>String(V.value)===String(D.attributes[g]))?.symbol?.color;I?A.push([D.attributes[y.name]].concat(I)):t&&A.push([D.attributes[y.name]].concat(t.color))})}else{if("value"!==g.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};d.uniqueValueInfos?.forEach(y=>
{const D=y?.symbol?.color;D?A.push([parseInt(""+y.value,10)].concat(D)):t&&A.push([parseInt(""+y.value,10)].concat(t?.color))})}if(0===A.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};z=u.createColormapLUT({colormap:A});this.lookup={rendererJSON:d,colormapLut:z};this.canRenderInWebGL=!0;return{success:!0}};b._updateColormapRenderer=function(d){if(!c(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var r=d.colormapInfos.map(q=>[q.value].concat(q.color)).sort((q,k)=>q[0]-k[0]);if(!r||0===r.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};r=u.createColormapLUT({colormap:r});this.lookup={rendererJSON:d,colormapLut:r};this.canRenderInWebGL=!0;return{success:!0}};b._updateShadedReliefRenderer=function(d){const {bandCount:r,dataType:q,pixelType:k}=this.rasterInfo;if("elevation"!==q&&("generic"!==q||1!==r||"s16"!==k&&"f32"!==k&&"f64"!==k))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(d.colorRamp){var g=e.convertColorRampToColormap(d.colorRamp,{interpolateAlpha:!0});g=u.createColormapLUT({colormap:g});const t=[],z=g.indexedColormap;for(let A=0;A<z.length;A+=4){const y=J.toHSV({r:z[A],g:z[A+1],b:z[A+2]});t.push([y.h/60,y.s/100,255*y.v/100])}this.lookup={rendererJSON:d,colormapLut:g,hsvMap:t}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}};b._analyzeClassBreaks=function(d){const {attributeTable:r,pixelType:q}=this.rasterInfo,k=G.isSome(r)?r.fields.find(z=>"value"===z.name.toLowerCase()):null,g=G.isSome(r)?r.fields.find(z=>z.name.toLowerCase()===d.field.toLowerCase()):null,t=null!=k&&null!==g;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(q)||t,tableValueField:k,tableBreakField:g}};b._updateClassBreaksRenderer=function(d){var {attributeTable:r}=this.rasterInfo;const {canUseIndexedLUT:q,tableValueField:k,
tableBreakField:g}=this._analyzeClassBreaks(d);var t=d.classBreakInfos;if(!t?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};t=t.sort((I,V)=>I.classMaxValue-V.classMaxValue);var z=t[t.length-1],A=d.minValue;if(!q){var y=[];for(var D=0;D<t.length;D++)y.push({value:t[D].classMinValue??A,mappedColor:t[D].symbol.color}),A=t[D].classMaxValue;y.push({value:z.classMaxValue,mappedColor:z.symbol.color});this.lookup={rendererJSON:d,remapLut:y};
this.canRenderInWebGL=!1;return{success:!0}}y=[];if(G.isSome(r)&&null!=k&&null!==g&&k!==g){z=k.name;const I=g.name,V=t[t.length-1],{classMaxValue:C}=V;A=d.minValue;for(D of r.features){r=D.attributes[z];const M=D.attributes[I],da=M===C?V:M<A?null:t.find(({classMaxValue:qa})=>qa>M);da&&y.push([r].concat(da.symbol.color))}}else{A=Math.floor(d.minValue);for(D=0;D<t.length;D++){for(r=t[D];A<r.classMaxValue;A++)y.push([A].concat(r.symbol.color));A=Math.ceil(r.classMaxValue)}z.classMaxValue===A&&y.push([z.classMaxValue].concat(z.symbol.color))}t=
u.createColormapLUT({colormap:y,fillUnspecified:!1});this.lookup={rendererJSON:d,colormapLut:t};this.canRenderInWebGL=!0;return{success:!0}};b._isHistogramRequired=function(d){return"percentClip"===d||"histogramEqualization"===d};b._isValidRasterStatistics=function(d){return G.isSome(d)&&0<d.length&&null!=d[0].min&&null!=d[0].max};b._updateStretchRenderer=function(d){let {stretchType:r,dra:q}=d;if(!("none"===r||d.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||q))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var k=G.unwrap(d.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(d.stretchType)||k?.length||q||(r="minMax");const {computeGamma:g,useGamma:t,colorRamp:z}=d;var {gamma:A}=d;t&&g&&!A?.length&&(A=d.statistics?.length?d.statistics:G.unwrap(this.rasterInfo.statistics),A=B.computeGammaValues(this.rasterInfo.pixelType,A));const y=this.rasterInfo.pixelType,D=!q&&["u8","u16",
"s8","s16"].includes(y);"histogramEqualization"===r?(k=k.map(I=>B.createHistogramEqualizationLUT(I)),this.lookup={rendererJSON:d,histogramLut:k}):D&&(k=B.getStretchCutoff(d,{rasterInfo:this.rasterInfo}),k=B.createStretchLUT({pixelType:y,...k,gamma:t?A:null,rounding:"floor"}),this.lookup={rendererJSON:d,stretchLut:k});z&&(k=e.convertColorRampToColormap(z,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:d}),this.lookup.colormapLut=u.createColormapLUT({colormap:k}),this.lookup.rendererJSON=
d);this.lookup.gamma=t&&A?.length?A:null;this.canRenderInWebGL=!0;return{success:!0}};b._generateStretchWebGLParams=function(d,r,q){let k=null,g=null;var t=this.lookup&&this.lookup.colormapLut;r.colorRamp&&t&&(k=t.indexedColormap,g=t.offset);"histogramEqualization"===r.stretchType&&(r={...r,stretchType:"minMax"});({gamma:t}=this.lookup);const z=!!(r.useGamma&&t&&t.some(da=>1!==da)),{minCutOff:A,maxCutOff:y,outMin:D,outMax:I}=B.getStretchCutoff(r,{rasterInfo:this.rasterInfo,pixelBlock:d,bandIds:q});
var V=0;G.isSome(d)&&(V=d.getPlaneCount(),2===V&&(d=d.clone(),d.statistics=[d.statistics[0]],d.pixels=[d.pixels[0]]));({bandCount:d}=this.rasterInfo);q=Math.min(3,q?.length||V||d,d);d=new Float32Array(q);V=k||z?1:255;let C;for(C=0;C<A.length;C++)d[C]=y[C]===A[C]?0:(I-D)/(y[C]-A[C])/V;const M=new Float32Array(q);if(z&&t)for(C=0;C<q;C++)M[C]=1<t[C]?2<t[C]?6.5+(t[C]-2)**2.5:6.5+100*(2-t[C])**4:1;return{bandCount:q,outMin:D/V,outMax:I/V,minCutOff:A,maxCutOff:y,factor:d,useGamma:z,gamma:z?t:[1,1,1],gammaCorrection:z?
M:[1,1,1],colormap:k,colormapOffset:g,stretchType:r.stretchType,type:"stretch"}};b._generateShadedReliefWebGLParams=function(d,r=!1,q={x:0,y:0}){let k=null,g=null;const t=this.lookup&&this.lookup.colormapLut;d.colorRamp&&t&&(k=t.indexedColormap,g=t.offset);r=h.calculateHillshadeParams({...d,isGCS:r,resolution:q});q=G.unwrap(this.rasterInfo.statistics)?.[0];return{...r,minValue:q?.min??0,maxValue:q?.max??8E3,hillshadeType:"traditional"===d.hillshadeType?0:1,type:"hillshade",colormap:k,colormapOffset:g}};
b._generateVectorFieldWebGLParams=function(d){const {style:r,inputUnit:q,outputUnit:k,visualVariables:g,symbolTileSize:t,flowRepresentation:z}=d;let A;var y=this.rasterInfo.statistics?.[0].min??0,D=this.rasterInfo.statistics?.[0].max??50,I=g?.find(M=>"sizeInfo"===M.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:D,maxSize:.8*t,minDataValue:y,minSize:.2*t},V=I.minDataValue??y,C=I.maxDataValue??D;D=G.isSome(I.maxSize)&&G.isSome(I.minSize)?[I.minSize/t,I.maxSize/t]:[.2,.8];"wind_speed"===r&&(D[0]=
D[1]=(D[0]+D[1])/2);y=G.isSome(V)&&G.isSome(C)?[V,C]:null;if("classified_arrow"===r)if(G.isSome(V)&&G.isSome(C)&&G.isSome(I))for(A=[],V=(I.maxDataValue-I.minDataValue)/5,C=0;6>C;C++)A.push(I.minDataValue+V*C);else A=[0,1E-6,3.5,7,10.5,14];I="flow_to"===z===("ocean_current_kn"===r||"ocean_current_m"===r)?0:Math.PI;V=g?.find(M=>"rotationInfo"===M.type);return{breakValues:A,dataRange:y,inputUnit:q,outputUnit:k,symbolTileSize:t,symbolPercentRange:D,style:r||"single_arrow",rotation:I,rotationType:this.rasterInfo.storageInfo?.tileInfo&&
"vector-uv"===this.rasterInfo.dataType?"geographic":V?.rotationType||d.rotationType,type:"vectorField"}};return x}(E.JSONSupport);l.__decorate([ca.property({json:{write:!0}})],E.prototype,"rendererJSON",void 0);l.__decorate([ca.property({type:F,json:{write:!0}})],E.prototype,"rasterInfo",void 0);l.__decorate([ca.property({json:{write:!0}})],E.prototype,"lookup",void 0);l.__decorate([ca.property()],E.prototype,"canRenderInWebGL",void 0);return E=l.__decorate([L.subclass("esri.renderers.support.RasterSymbolizer")],
E)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(Q,l,J,E,p,G,ca,U,N,L,F){function u(){u=l._asyncToGenerator(function*(k,g,t,z){const A=performance.now();var y=B(g,
t);const D=performance.now();t=e(g,y,t.width,t.height);g=performance.now();y=c(t,!0);t=performance.now();k="Streamlines"===k?n(y,10):w(y);y=performance.now();E("esri-2d-profiler")&&(q.info("I.1","_createFlowFieldFromData (ms)",Math.round(D-A)),q.info("I.2","_getStreamlines (ms)",Math.round(g-D)),q.info("I.3","createAnimatedLinesData (ms)",Math.round(t-g)),q.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(y-t)),q.info("I.5","createFlowMesh (ms)",Math.round(y-A)),q.info("I.6","Mesh size (bytes)",
k.vertexData.buffer.byteLength+k.indexData.buffer.byteLength));yield Promise.resolve();U.throwIfAborted(z);return k});return u.apply(this,arguments)}function B(k,g){const t=f(g.data,g.width,g.height,k.smoothing);return k.interpolate?(z,A)=>{const y=Math.floor(z),D=Math.floor(A);if(0>y||y>=g.width||0>D||D>=g.height)return[0,0];z-=y;A-=D;const I=y<g.width-1?y+1:y,V=D<g.height-1?D+1:D;return[(t[2*(D*g.width+y)]*(1-A)+t[2*(V*g.width+y)]*A)*(1-z)+(t[2*(D*g.width+I)]*(1-A)+t[2*(V*g.width+I)]*A)*z,(t[2*
(D*g.width+y)+1]*(1-A)+t[2*(V*g.width+y)+1]*A)*(1-z)+(t[2*(D*g.width+I)+1]*(1-A)+t[2*(V*g.width+I)+1]*A)*z]}:(z,A)=>{z=Math.round(z);A=Math.round(A);return 0>z||z>=g.width||0>A||A>=g.height?[0,0]:[t[2*(A*g.width+z)],t[2*(A*g.width+z)+1]]}}function h(k,g,t,z,A,y,D,I,V){const C=[];let M=0,[da,qa]=g(t,z);da*=k.velocityScale;qa*=k.velocityScale;C.push({x:t,y:z,t:M,speed:Math.sqrt(da*da+qa*qa)});for(let P=0;P<k.verticesPerLine;P++){let [O,v]=g(t,z);O*=k.velocityScale;v*=k.velocityScale;const K=Math.sqrt(O*
O+v*v);if(K<k.minSpeedThreshold)break;const Y=O/K,S=v/K;t+=Y*k.segmentLength;z+=S*k.segmentLength;M+=k.segmentLength/K;if(Math.acos(Y*xa+S*ja)>k.maxTurnAngle)break;if(k.collisions){var xa=Math.round(t*V);var ja=Math.round(z*V);if(0>xa||xa>D-1||0>ja||ja>I-1)break;const T=y[ja*D+xa];if(-1!==T&&T!==A)break;y[ja*D+xa]=A}C.push({x:t,y:z,t:M,speed:K});xa=Y;ja=S}return C}function e(k,g,t,z){const A=[],y=new N,D=1/Math.max(k.lineCollisionWidth,1),I=Math.round(t*D),V=Math.round(z*D),C=new Int32Array(I*V);
for(var M=0;M<C.length;M++)C[M]=-1;M=[];for(let da=0;da<z;da+=k.lineSpacing)for(let qa=0;qa<t;qa+=k.lineSpacing)M.push({x:qa,y:da,sort:y.getFloat()});M.sort((da,qa)=>da.sort-qa.sort);for(const {x:da,y:qa}of M)y.getFloat()<k.density&&(t=h(k,g,da,qa,A.length,C,I,V,D),2>t.length||A.push(t));return A}function f(k,g,t,z){if(0===z)return k;const A=Math.round(3*z),y=Array(2*A+1);var D=0;for(var I=-A;I<=A;I++){var V=Math.exp(-I*I/(z*z));y[I+A]=V;D+=V}for(z=-A;z<=A;z++)y[z+A]/=D;D=new Float32Array(k.length);
for(z=0;z<t;z++)for(I=0;I<g;I++){var C=V=0;for(var M=-A;M<=A;M++)if(!(0>I+M||I+M>=g)){var da=y[M+A];V+=da*k[2*(z*g+(I+M))];C+=da*k[2*(z*g+(I+M))+1]}D[2*(z*g+I)]=V;D[2*(z*g+I)+1]=C}k=new Float32Array(k.length);for(z=0;z<g;z++)for(I=0;I<t;I++){C=V=0;for(M=-A;M<=A;M++)0>I+M||I+M>=t||(da=y[M+A],V+=da*D[2*((I+M)*g+z)],C+=da*D[2*((I+M)*g+z)+1]);k[2*(I*g+z)]=V;k[2*(I*g+z)+1]=C}return k}function c(k,g){const t=new N;var z=k.reduce((I,V)=>I+V.length,0);z=new Float32Array(4*z);const A=Array(k.length);let y=
0,D=0;for(const I of k){k=y;for(const V of I)z[4*y]=V.x,z[4*y+1]=V.y,z[4*y+2]=V.t,z[4*y+3]=V.speed,y++;A[D++]={startVertex:k,numberOfVertices:I.length,totalTime:I[I.length-1].t,timeSeed:g?t.getFloat():0}}return{lineVertices:z,lineDescriptors:A}}function n(k,g){function t(xa,ja,P,O,v,K,Y,S){const T=9*V;let W=0;I[T+W++]=xa;I[T+W++]=ja;I[T+W++]=1;I[T+W++]=P;I[T+W++]=K;I[T+W++]=Y;I[T+W++]=O/2;I[T+W++]=v/2;I[T+W++]=S;V++;I[T+W++]=xa;I[T+W++]=ja;I[T+W++]=-1;I[T+W++]=P;I[T+W++]=K;I[T+W++]=Y;I[T+W++]=-O/
2;I[T+W++]=-v/2;I[T+W++]=S;V++}const {lineVertices:z,lineDescriptors:A}=k;var y=k=0;for(var D of A)k+=2*D.numberOfVertices,y+=6*(D.numberOfVertices-1);const I=new Float32Array(9*k);D=new Uint32Array(y);let V=0;k=0;for(const xa of A){const {totalTime:ja,timeSeed:P}=xa;let O=y=null,v=null;var C=null,M=null,da=null;for(let K=0;K<xa.numberOfVertices;K++){C=z[4*(xa.startVertex+K)];const Y=z[4*(xa.startVertex+K)+1],S=z[4*(xa.startVertex+K)+2],T=z[4*(xa.startVertex+K)+3];let W=null,ea=null;var qa=null;let na=
null;0<K&&(W=C-y,ea=Y-O,qa=Math.sqrt(W*W+ea*ea),W/=qa,ea/=qa,1<K?(M=W+M,da=ea+da,qa=Math.sqrt(M*M+da*da),M/=qa,da/=qa,qa=Math.min(1/(M*W+da*ea),g),M*=qa,da*=qa,qa=-da,na=M):(qa=-ea,na=W),null!==qa&&null!==na&&(t(y,O,v,qa,na,ja,P,T),D[k++]=V-2,D[k++]=V,D[k++]=V-1,D[k++]=V,D[k++]=V+1,D[k++]=V-1));y=C;O=Y;v=S;M=W;da=ea;C=T}t(y,O,v,-da,M,ja,P,C)}return{vertexData:I,indexData:D}}function w(k){function g(m,H){var R=S+W,ha=T+ea,ka=Math.sqrt(R*R+ha*ha);R/=ka;ha/=ka;var ra=S*R+T*ha,pa=W+na,la=ea+a;ka=Math.sqrt(pa*
pa+la*la);pa/=ka;la/=ka;var sa=W*pa+ea*la;ka=qa;var wa=xa,ya=ja,za=P;ha=-(ha/ra);R/=ra;ra=O;var Ba=v,aa=K,ma=Y;la=-(la/sa);pa/=sa;sa=16*M;let Z=0;for(const ua of[1,2])for(const va of[1,2,3,4])V[sa+Z++]=ka,V[sa+Z++]=wa,V[sa+Z++]=ya,V[sa+Z++]=za,V[sa+Z++]=ra,V[sa+Z++]=Ba,V[sa+Z++]=aa,V[sa+Z++]=ma,V[sa+Z++]=ua,V[sa+Z++]=va,V[sa+Z++]=m,V[sa+Z++]=H,V[sa+Z++]=ha/2,V[sa+Z++]=R/2,V[sa+Z++]=la/2,V[sa+Z++]=pa/2,M++;C[da++]=M-8;C[da++]=M-7;C[da++]=M-6;C[da++]=M-7;C[da++]=M-5;C[da++]=M-6;C[da++]=M-4;C[da++]=
M-3;C[da++]=M-2;C[da++]=M-3;C[da++]=M-1;C[da++]=M-2}function t(m,H,R,ha,ka,ra){S=W;T=ea;W=na;ea=a;null==S&&null==T&&(S=W,T=ea);if(null!=O&&null!=v){na=m-O;a=H-v;const pa=Math.sqrt(na*na+a*a);na/=pa;a/=pa}null!=S&&null!=T&&g(ka,ra);qa=O;xa=v;ja=K;P=Y;O=m;v=H;K=R;Y=ha}function z(m,H){S=W;T=ea;W=na;ea=a;null==S&&null==T&&(S=W,T=ea);null!=S&&null!=T&&g(m,H)}const {lineVertices:A,lineDescriptors:y}=k;let D=k=0;for(var I of y){const m=I.numberOfVertices-1;k+=8*m;D+=12*m}const V=new Float32Array(16*k),C=
new Uint32Array(D);let M=0,da=0,qa,xa,ja,P,O,v,K,Y,S,T,W,ea,na,a;for(const m of y){a=na=ea=W=T=S=Y=K=v=O=P=ja=xa=qa=null;const {totalTime:H,timeSeed:R}=m;for(I=0;I<m.numberOfVertices;I++)t(A[4*(m.startVertex+I)],A[4*(m.startVertex+I)+1],A[4*(m.startVertex+I)+2],A[4*(m.startVertex+I)+3],H,R);z(H,R)}return{vertexData:V,indexData:C}}function x(k,g){const t=g.pixels,{width:z,height:A}=g,y=new Float32Array(z*A*2),D=g.mask||new Uint8Array(z*A*2);g.mask||D.fill(255);if("vector-uv"===k)for(k=0;k<z*A;k++)y[2*
k]=t[0][k],y[2*k+1]=-t[1][k];else if("vector-magdir"===k)for(k=0;k<z*A;k++){g=t[0][k];const I=G.deg2rad(t[1][k]),V=Math.sin(I-Math.PI/2);y[2*k]=Math.cos(I-Math.PI/2)*g;y[2*k+1]=V*g}return{data:y,mask:D,width:z,height:A}}function b(){b=l._asyncToGenerator(function*(k,g,t,z,A,y){const D=performance.now();var I=L.getInfo(g.spatialReference);if(!I)return t=yield d(k,g,t,z,A,y),E("esri-2d-profiler")&&q.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-D)),E("esri-2d-profiler")&&q.info("I.9",
"Number of parts",1),t;const [V,C]=I.valid,M=Math.ceil(g.width/(C-V)),da=g.width/M,qa=Math.round(t/M);let xa=g.xmin;const ja=[];I=performance.now();for(let P=0;P<M;P++){const O=new F({xmin:xa,xmax:xa+da,ymin:g.ymin,ymax:g.ymax,spatialReference:g.spatialReference});ja.push(d(k,O,qa,z,A,y));xa+=da}k=yield Promise.all(ja);E("esri-2d-profiler")&&q.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-I));E("esri-2d-profiler")&&q.info("I.9","Number of parts",k.length);z={data:new Float32Array(t*
z*2),mask:new Uint8Array(t*z),width:t,height:z};g=0;for(const P of k){for(k=0;k<P.height;k++)for(A=0;A<P.width;A++)g+A>=t||(z.data[2*(k*t+g+A)]=P.data[2*(k*P.width+A)],z.data[2*(k*t+g+A)+1]=P.data[2*(k*P.width+A)+1],z.mask[k*t+g+A]=P.mask[k*P.width+A]);g+=P.width}E("esri-2d-profiler")&&q.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-D));return z});return b.apply(this,arguments)}function d(k,g,t,z,A,y){return r.apply(this,arguments)}function r(){r=l._asyncToGenerator(function*(k,
g,t,z,A,y){const D={requestProjectedLocalDirections:!0,signal:y};ca.isSome(A)&&(D.timeExtent=A);if("imagery"===k.type)return yield k.load({signal:y}),A=k.rasterInfo.dataType,k=yield k.fetchImage(g,t,z,D),!k||ca.isNone(k.pixelData)||ca.isNone(k.pixelData.pixelBlock)?{data:new Float32Array(t*z*2),mask:new Uint8Array(t*z),width:t,height:z}:x(A,k.pixelData.pixelBlock);yield k.load({signal:y});A=k.rasterInfo.dataType;k=yield k.fetchPixels(g,t,z,D);return!k||ca.isNone(k.pixelBlock)?{data:new Float32Array(t*
z*2),mask:new Uint8Array(t*z),width:t,height:z}:x(A,k.pixelBlock)});return r.apply(this,arguments)}const q=p.getLogger("esri.views.2d.engine.flow.dataUtils");Q.createAnimatedLinesData=c;Q.createFlowMesh=function(k,g,t,z){return u.apply(this,arguments)};Q.createParticlesMesh=w;Q.createStreamlinesMesh=n;Q.loadImagery=function(k,g,t,z,A,y){return b.apply(this,arguments)};Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterFunctionHelper ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/stretchUtils ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent".split(" "),function(Q,l,J,E,p,G,
ca,U,N,L,F,u,B,h,e){return function(){function f(){}var c=f.prototype;c.convertVectorFieldData=function(n){const w=p.fromJSON(n.pixelBlock);n=F.convertVectorFieldData(w,n.type);return Promise.resolve(J.isSome(n)?n.toJSON():null)};c.decode=function(){var n=Q._asyncToGenerator(function*(w){return(w=yield G.decode(w.data,w.options))&&w.toJSON()});return function(w){return n.apply(this,arguments)}}();c.symbolize=function(n){n.pixelBlock=p.fromJSON(n.pixelBlock);n.extent=n.extent?e.fromJSON(n.extent):
null;n=this.symbolizer.symbolize(n);return Promise.resolve(J.isSome(n)?n.toJSON():null)};c.updateSymbolizer=function(){var n=Q._asyncToGenerator(function*(w){this.symbolizer=B.fromJSON(w.symbolizerJSON);w.histograms&&"rasterStretch"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=w.histograms)});return function(w){return n.apply(this,arguments)}}();c.updateRasterFunction=function(){var n=Q._asyncToGenerator(function*(w){this.rasterFunction=U.create(w.rasterFunctionJSON)});
return function(w){return n.apply(this,arguments)}}();c.process=function(){var n=Q._asyncToGenerator(function*(w){w=this.rasterFunction.process({extent:e.fromJSON(w.extent),primaryPixelBlocks:w.primaryPixelBlocks.map(x=>J.isSome(x)?p.fromJSON(x):null),primaryRasterIds:w.primaryRasterIds});return J.isSome(w)?w.toJSON():null});return function(w){return n.apply(this,arguments)}}();c.stretch=function(n){n=this.symbolizer.simpleStretch(p.fromJSON(n.srcPixelBlock),n.stretchParams);return Promise.resolve(J.isSome(n)&&
n.toJSON())};c.estimateStatisticsHistograms=function(n){n=L.estimateStatisticsHistograms(p.fromJSON(n.srcPixelBlock));return Promise.resolve(n)};c.split=function(n){const w=ca.split(p.fromJSON(n.srcPixelBlock),n.tileSize,n.maximumPyramidLevel);w&&w.forEach((x,b)=>{w.set(b,x?.toJSON())});return Promise.resolve(w)};c.mosaicAndTransform=function(){var n=Q._asyncToGenerator(function*(w){var x=w.srcPixelBlocks.map(r=>r?new p(r):null);let b=x=ca.mosaic(x,w.srcMosaicSize,{blockWidths:w.blockWidths,alignmentInfo:w.alignmentInfo,
clipOffset:w.clipOffset,clipSize:w.clipSize});w.coefs&&(b=ca.approximateTransform(x,w.destDimension,w.coefs,w.sampleSpacing,w.interpolation));let d;w.projectDirections&&w.gcsGrid&&(d=ca.getLocalArithmeticNorthRotations(w.destDimension,w.gcsGrid),b=J.unwrap(F.convertToLocalDirections(b,w.isUV?"vector-uv":"vector-magdir",d)));return{pixelBlock:b?.toJSON(),localNorthDirections:d}});return function(w){return n.apply(this,arguments)}}();c.createFlowMesh=function(){var n=Q._asyncToGenerator(function*(w,
x){const b={data:new Float32Array(w.flowData.buffer),mask:new Uint8Array(w.flowData.maskBuffer),width:w.flowData.width,height:w.flowData.height},{vertexData:d,indexData:r}=yield h.createFlowMesh(w.meshType,w.simulationSettings,b,x.signal);return{result:{vertexBuffer:d.buffer,indexBuffer:r.buffer},transferList:[d.buffer,r.buffer]}});return function(w,x){return n.apply(this,arguments)}}();c.getProjectionOffsetGrid=function(){var n=Q._asyncToGenerator(function*(w){const x=e.fromJSON(w.projectedExtent),
b=e.fromJSON(w.srcBufferExtent);let d=null;w.datumTransformationSteps&&(d=new E({steps:w.datumTransformationSteps}));if(w.includeGCSGrid||N.requirePE(x.spatialReference,b.spatialReference,d))yield N.load();const r=w.rasterTransform?u.readTransform(w.rasterTransform):null;return N.getProjectionOffsetGrid({...w,projectedExtent:x,srcBufferExtent:b,datumTransformation:d,rasterTransform:r})});return function(w){return n.apply(this,arguments)}}();return f}()});