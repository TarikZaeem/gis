// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),function(n,f,p,h,d,w,q,l,r,t){d=function(m){function k(){var a=m.apply(this,arguments)||this;a.functionName="NDVI";a.functionArguments=null;a.rasterArgumentNames=["raster"];
return a}n._inheritsLoose(k,m);var g=k.prototype;g._bindSourceRasters=function(){const {scientificOutput:a}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(a?"f32":"u8");const b=this.sourceRasterInfos[0].clone();b.pixelType=this.outputPixelType;b.colormap=null;b.histograms=null;b.bandCount=1;const [c,e,u,v]=a?[-1,1,0,.1]:[0,200,100,10];b.statistics=[{min:c,max:e,avg:u,stddev:v}];this.rasterInfo=b;return{success:!0,supportsGPU:!0}};g._processPixels=function(a){a=a.pixelBlocks?.[0];
if(p.isNone(a))return null;const {visibleBandID:b,infraredBandID:c,scientificOutput:e}=this.functionArguments;return l.calculateNDVI(a,b,c,!e)};g._getWebGLParameters=function(){const {visibleBandID:a,infraredBandID:b,scientificOutput:c}=this.functionArguments;return{bandIndexMat3:l.getBandMatrix3(this.isInputBandIdsSwizzled?[0,1,2]:[b,a,0]),scaled:!c}};g._getInputBandIds=function(a){const {visibleBandID:b,infraredBandID:c}=this.functionArguments;return[c,b,0].map(e=>a[e])};return k}(r);f.__decorate([h.property({json:{write:!0,
name:"rasterFunction"}})],d.prototype,"functionName",void 0);f.__decorate([h.property({type:t,json:{write:!0,name:"rasterFunctionArguments"}})],d.prototype,"functionArguments",void 0);f.__decorate([h.property()],d.prototype,"rasterArgumentNames",void 0);return d=f.__decorate([q.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],d)});