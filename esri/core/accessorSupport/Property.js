// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ./ObservableBase ./PropertyOrigin ./tracking ./tracking/Flags".split(" "),function(l,p,q,r,h,d){let u=function(){function g(a,b,c){this.properties=a;this.propertyName=b;this.metadata=c;this.observerObject=new t;this._handles=this._accessed=null;this.observerObject.flags=d.Flags.Dirty|(c.nonNullable?d.Flags.NonNullable:0)|(c.hasOwnProperty("value")?d.Flags.HasDefaultValue:0)|(void 0===c.get?d.Flags.DepTrackingInitialized:0)|(void 0===c.dependsOn?
d.Flags.AutoTracked:0);m.register(this,this.observerObject)}var e=g.prototype;e.destroy=function(){this.observerObject.destroy();this._accessed=null;this._clearObservationHandles();m.unregister(this)};e.getComputed=function(){const a=this.observerObject;h.trackAccess(a);var b=this.properties.store;const c=this.propertyName;var f=a.flags;const n=b.get(c);if(f&d.Flags.Computing||~f&d.Flags.Dirty&&b.has(c))return n;a.flags|=d.Flags.Computing;const k=this.properties.host;f&d.Flags.AutoTracked?f=h.runTracked(this,
this.metadata.get,k):(h.trackExplicitDependencies(k,this),f=this.metadata.get.call(k));b.set(c,f,r.OriginId.COMPUTED);b=b.get(c);b===n?a.flags&=~d.Flags.Dirty:h.runUntracked(this.commit,this);a.flags&=~d.Flags.Computing;return b};e.onObservableAccessed=function(a){a!==this.observerObject&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(a)||this._accessed.push(a))};e.onTrackingEnd=function(){this._clearObservationHandles();const a=this.observerObject;a.flags|=d.Flags.DepTrackingInitialized;
const b=this._accessed;if(null!==b){var c=this._handles;null===c&&(c=this._handles=[]);for(let f=0;f<b.length;++f)c.push(b[f].observe(a));b.length=0}};e.notifyChange=function(){const a=this.observerObject;a.onInvalidated();a.onCommitted()};e.invalidate=function(){this.observerObject.onInvalidated()};e.commit=function(){const a=this.observerObject;a.flags&=~d.Flags.Dirty;a.onCommitted()};e._clearObservationHandles=function(){const a=this._handles;if(null!==a){for(let b=0;b<a.length;++b)a[b].remove();
a.length=0}};return g}(),t=function(g){function e(){var b=g.apply(this,arguments)||this;b.flags=0;return b}p._inheritsLoose(e,g);var a=e.prototype;a.onInvalidated=function(){~this.flags&d.Flags.Overriden&&(this.flags|=d.Flags.Dirty);const b=this._observers;if(b&&0<b.length)for(const c of b)c.onInvalidated()};a.onCommitted=function(){var b=this._observers;if(b&&0<b.length){b=b.slice();for(const c of b)c.onCommitted()}};a.destroy=function(){if(this.flags&d.Flags.Dirty)this.onCommitted();g.prototype.destroy.call(this)};
return e}(q.ObservableBase);const m=new FinalizationRegistry(g=>{g.destroy()});l.Property=u;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});