// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../3d/webgl-engine/core/shaderModules/interfaces ./BufferObject ./context-util ./enums ./FramebufferObject ./WebGLDriverTestModule".split(" "),function(k,p,l,m,q,r,b,t,e){e=function(f){function g(c){var a=f.call(this)||this;a._rctx=c;a._dummyProgram=null;a._rctx.type===r.ContextType.WEBGL2&&l("mac")&&l("chrome")&&(a._program=a._prepareProgram(),a._dummyProgram=a._prepareDummyProgram());return a}p._inheritsLoose(g,f);var d=g.prototype;
d.dispose=function(){f.prototype.dispose.call(this);this._dummyProgram?.dispose();this._dummyProgram=null};d._test=function(c){const a=this._rctx;a.resetState();const h=new t.FramebufferObject(a,{colorTarget:b.TargetType.TEXTURE,depthStencilTarget:b.DepthStencilTargetType.NONE},{target:b.TextureType.TEXTURE_2D,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,pixelFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,samplingMode:b.TextureSamplingMode.NEAREST,width:1,height:1}),n=q.BufferObject.createIndex(this._rctx,
b.Usage.STATIC_DRAW,new Uint8Array([0]));a.bindFramebuffer(h);a.setViewport(0,0,1,1);a.useProgram(this._dummyProgram);a.bindBuffer(n,b.BufferType.ELEMENT_ARRAY_BUFFER);a.drawElements(b.PrimitiveType.POINTS,1,b.DataType.UNSIGNED_BYTE,0);a.useProgram(c);a.bindVAO(null);a.drawArrays(b.PrimitiveType.TRIANGLES,0,258);c=new Uint8Array(4);h.readPixels(0,0,1,1,b.PixelFormat.RGBA,b.PixelType.UNSIGNED_BYTE,c);h.dispose();n.dispose();return 255===c[0]};d._prepareProgram=function(){const c=`\n    precision highp float;\n\n    varying float triangleId;\n\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\n\n    void main(void) {\n      triangleId = floor(float(gl_VertexID)/3.0);\n\n      vec3 position = triangleVertices[gl_VertexID % 3];\n      float offset = triangleId / ${m.glsl.float(85)};\n      position.z = 0.5 - offset;\n\n      gl_Position = vec4(position, 1.0);\n    }\n    `,
a=`\n    precision highp float;\n\n    varying float triangleId;\n\n    void main(void) {\n      gl_FragColor = triangleId == ${m.glsl.float(85)} ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\n    }\n    `;return this._rctx.programCache.acquire(c,a,new Map([]))};d._prepareDummyProgram=function(){return this._rctx.programCache.acquire("\n    void main(void) {\n      gl_Position \x3d vec4(0.0, 0.0, float(gl_VertexID)-2.0, 1.0);\n    }","\n    void main(void) {\n      gl_FragColor \x3d vec4(0.0, 0.0, 0.0, 1.0);\n    }",
new Map([]))};return g}(e.WebGLDriverTestModule);k.DrawArraysRequiresIndicesTypeReset=e;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});