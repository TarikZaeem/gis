// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(c,b,O,N,F){let r=function(){function C(){this._emitter=new C.EventEmitter(this)}var w=C.prototype;w.emit=function(k,h){return this._emitter.emit(k,h)};w.on=function(k,h){return this._emitter.on(k,h)};w.once=function(k,h){return this._emitter.once(k,h)};w.hasEventListener=function(k){return this._emitter.hasEventListener(k)};
return C}();(function(C){let w=function(){function h(Q=null){this._target=Q;this._listenersMap=null}var A=h.prototype;A.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};A.emit=function(Q,y){Q=this._listenersMap&&this._listenersMap.get(Q);if(!Q)return!1;const g=this._target||this;[...Q].forEach(x=>{x.call(g,y)});return 0<Q.length};A.on=function(Q,y){if(Array.isArray(Q)){var g=Q.map(x=>this.on(x,y));return N.handlesGroup(g)}if(Q.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);g=this._listenersMap.get(Q)||[];g.push(y);this._listenersMap.set(Q,g);return{remove:()=>{const x=this._listenersMap&&this._listenersMap.get(Q)||[],e=x.indexOf(y);0<=e&&x.splice(e,1)}}};A.once=function(Q,y){const g=this.on(Q,x=>{g.remove();y.call(null,x)});return g};A.hasEventListener=function(Q){Q=this._listenersMap&&this._listenersMap.get(Q);return null!=Q&&0<Q.length};return h}();C.EventEmitter=w;C.EventedMixin=h=>{h=function(A){function Q(){var g=
A.apply(this,arguments)||this;g._emitter=new w;return g}c._inheritsLoose(Q,A);var y=Q.prototype;y.destroy=function(){this._emitter.clear()};y.emit=function(g,x){return this._emitter.emit(g,x)};y.on=function(g,x){return this._emitter.on(g,x)};y.once=function(g,x){return this._emitter.once(g,x)};y.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return Q}(h);return h=b.__decorate([F.subclass("esri.core.Evented")],h)};let k=function(h){function A(){var y=h.apply(this,arguments)||
this;y._emitter=new r.EventEmitter(c._assertThisInitialized(y));return y}c._inheritsLoose(A,h);var Q=A.prototype;Q.destroy=function(){this._emitter.clear()};Q.emit=function(y,g){return this._emitter.emit(y,g)};Q.on=function(y,g){return this._emitter.on(y,g)};Q.once=function(y,g){return this._emitter.once(y,g)};Q.hasEventListener=function(y){return this._emitter.hasEventListener(y)};return A}(O);k=b.__decorate([F.subclass("esri.core.Evented")],k);C.EventedAccessor=k})(r||(r={}));return r})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(c,b,O,N,F,r,C){function w(y,g,x={}){return k(y,g,x,A)}function k(y,g,x={},e){let n=null;const u=x.once?(M,L)=>{e(M)&&(N.removeMaybe(n),g(M,L))}:(M,L)=>{e(M)&&g(M,L)};n=r.watchTracked(y,u,x.sync,x.equals);x.initial&&(y=y(),u(y,y));return n}function h(y,g,x){if(F.isAborted(x))return Promise.reject(F.createAbortError());const e=y();if(g?.(e))return Promise.resolve(e);let n=null;return new Promise((u,M)=>{n=O.handlesGroup([F.onAbort(x,()=>{n=N.removeMaybe(n);M(F.createAbortError())}),k(y,L=>
{n=N.removeMaybe(n);u(L)},{sync:!1,once:!0},g??A)])})}function A(y){return!0}function Q(y){return!!y}c.autorun=C.autorun;c.initial={initial:!0};c.on=function(y,g,x,e={}){function n(){M&&L&&(L.remove(),e.onListenerRemove?.(M),L=M=null)}function u(B){e.once&&e.once&&N.removeMaybe(U);x(B)}let M=null,L=null,U=null;const S=w(y,(B,z)=>{n();b.isEventTarget(B)&&(M=B,L=b.on(B,g,u),e.onListenerAdd?.(B))},{sync:e.sync,initial:!0});return U=O.makeHandle(()=>{S.remove();n()})};c.once=function(y,g){return h(y,
null,g)};c.pausable=function(y,g,x={}){let e=!1;const n=w(y,(u,M)=>{e||g(u,M)},x);return{remove(){n.remove()},pause(){e=!0},resume(){e=!1}}};c.sync={sync:!0};c.syncAndInitial={sync:!0,initial:!0};c.watch=w;c.when=function(y,g,x={}){return k(y,g,x,Q)};c.whenOnce=function(y,g){return h(y,Q,g)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../maybe ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k,h){c.WatchUpdatingTracking=function(A){function Q(){var g=A.apply(this,arguments)||this;g.updating=!1;g._handleId=0;g._handles=new F;g._scheduleHandleId=0;g._pendingPromises=new Set;return g}b._inheritsLoose(Q,A);var y=Q.prototype;y.destroy=function(){this.removeAll();this._handles.destroy()};y.add=function(g,x,e={}){return this._installWatch(g,x,e,C.watch)};y.addWhen=function(g,x,e={}){return this._installWatch(g,x,e,C.when)};y.addOnCollectionChange=function(g,x,{initial:e=
!1,final:n=!1}={}){const u=++this._handleId;this._handles.add([C.on(g,"after-changes",this._createSyncUpdatingCallback(),C.sync),C.on(g,"change",x,{onListenerAdd:e?M=>x({added:M.toArray(),removed:[]}):void 0,onListenerRemove:n?M=>x({added:[],removed:M.toArray()}):void 0})],u);return{remove:()=>this._handles.remove(u)}};y.addPromise=function(g){if(r.isNone(g))return g;const x=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(g)&&(0!==this._pendingPromises.size||this._handles.has(-42)||
this._set("updating",!1))}},x);this._pendingPromises.add(g);this._set("updating",!0);const e=()=>this._handles.remove(x);g.then(e,e);return g};y.removeAll=function(){this._pendingPromises.clear();this._handles.removeAll();this._set("updating",!1)};y._installWatch=function(g,x,e={},n){const u=++this._handleId;e.sync||this._installSyncUpdatingWatch(g,u);g=n(g,x,e);this._handles.add(g,u);return{remove:()=>this._handles.remove(u)}};y._installSyncUpdatingWatch=function(g,x){const e=this._createSyncUpdatingCallback();
g=C.watch(g,e,{sync:!0,equals:()=>!1});this._handles.add(g,x);return g};y._createSyncUpdatingCallback=function(){return()=>{this._handles.remove(-42);++this._scheduleHandleId;const g=this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this._handles.add(w.schedule(()=>{g===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this._handles.remove(-42))}),-42)}};return Q}(N);O.__decorate([k.property({readOnly:!0})],c.WatchUpdatingTracking.prototype,"updating",
void 0);c.WatchUpdatingTracking=O.__decorate([h.subclass("esri.core.support.WatchUpdatingTracking")],c.WatchUpdatingTracking);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter ./utils".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A){const Q=r.create();return function(){function y(x){this.geometryInfo=x;this._boundsStore=new k.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new O;this.featureAdapter=h.optimizedFeatureQueryEngineAdapter}var g=y.prototype;g.getFullExtent=function(x){if(F.isNone(this.fullBounds))return null;const [e,n,u,M]=this.fullBounds;return{xmin:e,ymin:n,xmax:u,ymax:M,spatialReference:A.cleanFromGeometryEngine(x)}};g.add=function(x){this._add(x);this._emitChanged()};
g.addMany=function(x){for(const e of x)this._add(e);this._emitChanged()};g.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};g.removeById=function(x){x=this._featuresById.get(x);if(!x)return null;this._remove(x);this._emitChanged();return x};g.removeManyById=function(x){this._boundsStore.invalidateIndex();for(const e of x)(x=this._featuresById.get(e))&&this._remove(x);this._emitChanged()};g.forEachBounds=function(x,e){for(const n of x)(x=this._boundsStore.get(n.objectId))&&
e(r.fromRect(Q,x))};g.getFeature=function(x){return this._featuresById.get(x)};g.has=function(x){return this._featuresById.has(x)};g.forEach=function(x){this._featuresById.forEach(e=>x(e))};g.forEachInBounds=function(x,e){this._boundsStore.forEachInBounds(x,n=>{e(this._featuresById.get(n))})};g.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};g.sweep=function(){let x=!1;this._featuresById.forEach((e,n)=>{this._markedIds.has(n)||(x=!0,this._remove(e))});
this._markedIds.clear();x&&this._emitChanged()};g._emitChanged=function(){this.events.emit("changed",void 0)};g._add=function(x){if(x){var e=x.objectId;if(null==e)N.getLogger("esri.layers.graphics.data.FeatureStore").error(new b("featurestore:invalid-feature","feature id is missing",{feature:x}));else{var n=this._featuresById.get(e);this._markedIds.add(e);if(n){x.displayId=n.displayId;var u=this._boundsStore.get(e);this._boundsStore.delete(e)}else if(F.isSome(this.onFeatureAdd))this.onFeatureAdd(x);
!F.isNone(x.geometry)&&x.geometry.coords&&x.geometry.coords.length?(u=w.getBoundsOptimizedGeometry(F.isSome(u)?u:C.create(),x.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),F.isSome(u)&&this._boundsStore.set(e,u)):this._boundsStore.set(e,null);this._featuresById.set(e,x)}}};g._remove=function(x){if(F.isSome(this.onFeatureRemove))this.onFeatureRemove(x);const e=x.objectId;this._markedIds.delete(e);this._boundsStore.delete(e);this._featuresById.delete(e);return x};c._createClass(y,[{key:"geometryType",
get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let x=0;this._featuresById.forEach(e=>{F.isSome(e.geometry)&&e.geometry.coords&&(x+=e.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:x/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return y}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(c,b,O,N){function F(e=g){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function r(e,n,u,M,L,U,S=F()){S[0]=e;S[1]=n;S[2]=u;S[3]=M;S[4]=L;S[5]=U;return S}function C(e){return e[0]>=e[3]?0:e[3]-e[0]}function w(e){return e[1]>=e[4]?0:e[4]-e[1]}function k(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,n){return Math.max(n[0],
e[0])<=Math.min(n[3],e[3])&&Math.max(n[1],e[1])<=Math.min(n[4],e[4])&&Math.max(n[2],e[2])<=Math.min(n[5],e[5])}function A(e,n){e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];return e}function Q(e){return 6===e.length}const y=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],x=F();c.NEGATIVE_INFINITY=y;c.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.ZERO=g;c.allFinite=function(e){for(let n=0;6>n;n++)if(!isFinite(e[n]))return!1;
return!0};c.center=function(e,n=[0,0,0]){n[0]=e[0]+C(e)/2;n[1]=e[1]+w(e)/2;n[2]=e[2]+k(e)/2;return n};c.contains=function(e,n){return n[0]>=e[0]&&n[1]>=e[1]&&n[2]>=e[2]&&n[3]<=e[3]&&n[4]<=e[4]&&n[5]<=e[5]};c.containsPoint=function(e,n){return n[0]>=e[0]&&n[1]>=e[1]&&n[2]>=e[2]&&n[0]<=e[3]&&n[1]<=e[4]&&n[2]<=e[5]};c.containsPointWithMargin=function(e,n,u){return n[0]>=e[0]-u&&n[1]>=e[1]-u&&n[2]>=e[2]-u&&n[0]<=e[3]+u&&n[1]<=e[4]+u&&n[2]<=e[5]+u};c.create=F;c.depth=w;c.diameter=function(e){const n=C(e),
u=k(e);e=w(e);return Math.sqrt(n*n+u*u+e*e)};c.empty=function(e){return e?A(e,y):F(y)};c.equals=function(e,n,u){if(b.isNone(e)||b.isNone(n))return e===n;if(!Q(e)||!Q(n))return!1;if(u)for(let M=0;M<e.length;M++){if(!u(e[M],n[M]))return!1}else for(u=0;u<e.length;u++)if(e[u]!==n[u])return!1;return!0};c.expandWithAABB=function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[2]=Math.min(e[2],n[2]);e[3]=Math.max(e[3],n[3]);e[4]=Math.max(e[4],n[4]);e[5]=Math.max(e[5],n[5])};c.expandWithBuffer=function(e,
n,u=0,M=n.length/3){let L=e[0],U=e[1],S=e[2],B=e[3],z=e[4],q=e[5];for(let E=0;E<M;E++)L=Math.min(L,n[u+3*E]),U=Math.min(U,n[u+3*E+1]),S=Math.min(S,n[u+3*E+2]),B=Math.max(B,n[u+3*E]),z=Math.max(z,n[u+3*E+1]),q=Math.max(q,n[u+3*E+2]);e[0]=L;e[1]=U;e[2]=S;e[3]=B;e[4]=z;e[5]=q};c.expandWithNestedArray=function(e,n,u){const M=n.length;let L=e[0],U=e[1],S=e[2],B=e[3],z=e[4],q=e[5];if(u)for(u=0;u<M;u++){var E=n[u];L=Math.min(L,E[0]);U=Math.min(U,E[1]);S=Math.min(S,E[2]);B=Math.max(B,E[0]);z=Math.max(z,E[1]);
q=Math.max(q,E[2])}else for(u=0;u<M;u++)E=n[u],L=Math.min(L,E[0]),U=Math.min(U,E[1]),B=Math.max(B,E[0]),z=Math.max(z,E[1]);e[0]=L;e[1]=U;e[2]=S;e[3]=B;e[4]=z;e[5]=q};c.expandWithOffset=function(e,n,u,M){e[0]=Math.min(e[0],e[0]+n);e[3]=Math.max(e[3],e[3]+n);e[1]=Math.min(e[1],e[1]+u);e[4]=Math.max(e[4],e[4]+u);e[2]=Math.min(e[2],e[2]+M);e[5]=Math.max(e[5],e[5]+M)};c.expandWithRect=function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[3]=Math.max(e[3],n[2]);e[4]=Math.max(e[4],n[3])};c.expandWithVec3=
function(e,n){e[0]=Math.min(e[0],n[0]);e[1]=Math.min(e[1],n[1]);e[2]=Math.min(e[2],n[2]);e[3]=Math.max(e[3],n[0]);e[4]=Math.max(e[4],n[1]);e[5]=Math.max(e[5],n[2])};c.fromExtent=function(e,n=F()){n[0]=e.xmin;n[1]=e.ymin;n[2]=e.hasZ?e.zmin:-Infinity;n[3]=e.xmax;n[4]=e.ymax;n[5]=e.hasZ?e.zmax:Infinity;return n};c.fromMinMax=function(e,n,u=F()){u[0]=e[0];u[1]=e[1];u[2]=e[2];u[3]=n[0];u[4]=n[1];u[5]=n[2];return u};c.fromRect=function(e,n){e[0]=n[0];e[1]=n[1];e[2]=Number.NEGATIVE_INFINITY;e[3]=n[2];e[4]=
n[3];e[5]=Number.POSITIVE_INFINITY;return e};c.fromRectValues=function(e,n,u,M,L){e[0]=n;e[1]=u;e[2]=Number.NEGATIVE_INFINITY;e[3]=M;e[4]=L;e[5]=Number.POSITIVE_INFINITY;return e};c.fromValues=r;c.getMax=function(e,n){n[0]=e[3];n[1]=e[4];n[2]=e[5];return n};c.getMin=function(e,n){n[0]=e[0];n[1]=e[1];n[2]=e[2];return n};c.height=k;c.intersects=h;c.intersectsClippingArea=function(e,n){return b.isNone(n)?!0:h(e,n)};c.is=Q;c.isPoint=function(e){return 0===C(e)&&0===w(e)&&0===k(e)};c.maximumDimension=
function(e){return Math.max(C(e),k(e),w(e))};c.offset=function(e,n,u,M,L=e){L[0]=e[0]+n;L[1]=e[1]+u;L[2]=e[2]+M;L[3]=e[3]+n;L[4]=e[4]+u;L[5]=e[5]+M;return L};c.scale=function(e,n,u=e){const M=e[0]+C(e)/2,L=e[1]+w(e)/2,U=e[2]+k(e)/2;u[0]=M+(e[0]-M)*n;u[1]=L+(e[1]-L)*n;u[2]=U+(e[2]-U)*n;u[3]=M+(e[3]-M)*n;u[4]=L+(e[4]-L)*n;u[5]=U+(e[5]-U)*n;return u};c.set=A;c.setMax=function(e,n,u=e){u[3]=n[0];u[4]=n[1];u[5]=n[2];u!==e&&(u[0]=e[0],u[1]=e[1],u[2]=e[2]);return e};c.setMin=function(e,n,u=e){u[0]=n[0];
u[1]=n[1];u[2]=n[2];u!==e&&(u[3]=e[3],u[4]=e[4],u[5]=e[5]);return u};c.size=function(e,n=[0,0,0]){n[0]=C(e);n[1]=w(e);n[2]=k(e);return n};c.toExtent=function(e,n){return isFinite(e[2])||isFinite(e[5])?new O({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:n}):new O({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:n})};c.toRect=function(e,n){n||(n=N.create());n[0]=e[0];n[1]=e[1];n[2]=e[3];n[3]=e[4];return n};c.width=C;c.wrap=function(e,n,u,M,L,U){return r(e,n,
u,M,L,U,x)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(c,b,O,N,F){function r(g=y){return[g[0],g[1],g[2],g[3]]}function C(g,x){g!==x&&(g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3]);return g}function w(g){return N.isNone(g)||g[0]>=g[2]?0:g[2]-g[0]}function k(g){return g[1]>=g[3]?0:g[3]-g[1]}function h(g,x,e){return x>=g[0]&&e>=g[1]&&x<=
g[2]&&e<=g[3]}function A(g){return null!=g&&4===g.length}const Q=[Infinity,Infinity,-Infinity,-Infinity],y=[0,0,0,0];c.NEGATIVE_INFINITY=Q;c.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];c.UNIT=[0,0,1,1];c.ZERO=y;c.allFinite=function(g){for(let x=0;4>x;x++)if(!isFinite(g[x]))return!1;return!0};c.area=function(g){return w(g)*k(g)};c.center=function(g,x=[0,0]){x[0]=(g[0]+g[2])/2;x[1]=(g[1]+g[3])/2;return x};c.clone=function(g){return[g[0],g[1],g[2],g[3]]};c.contains=function(g,x){return x[0]>=
g[0]&&x[2]<=g[2]&&x[1]>=g[1]&&x[3]<=g[3]};c.containsPoint=function(g,x){return h(g,x[0],x[1])};c.containsPointObject=function(g,x){return h(g,x.x,x.y)};c.containsPointWithMargin=function(g,x,e){return x[0]>=g[0]-e&&x[1]>=g[1]-e&&x[0]<=g[2]+e&&x[1]<=g[3]+e};c.containsXY=h;c.containsXYWithMargin=function(g,x,e,n){return x>=g[0]-n&&e>=g[1]-n&&x<=g[2]+n&&e<=g[3]+n};c.copy=C;c.create=r;c.distance=function(g,x){const e=(g[1]+g[3])/2,n=Math.max(Math.abs(x[0]-(g[0]+g[2])/2)-w(g)/2,0);g=Math.max(Math.abs(x[1]-
e)-k(g)/2,0);return Math.sqrt(n*n+g*g)};c.empty=function(g){return g?C(g,Q):r(Q)};c.equals=function(g,x){return A(g)&&A(x)?g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]&&g[3]===x[3]:g===x};c.expand=function(g,x,e){if(N.isNone(x))C(e,g);else if("length"in x)if(A(x))e[0]=Math.min(g[0],x[0]),e[1]=Math.min(g[1],x[1]),e[2]=Math.max(g[2],x[2]),e[3]=Math.max(g[3],x[3]);else{if(2===x.length||3===x.length)e[0]=Math.min(g[0],x[0]),e[1]=Math.min(g[1],x[1]),e[2]=Math.max(g[2],x[0]),e[3]=Math.max(g[3],x[1])}else switch(x.type){case "extent":e[0]=
Math.min(g[0],x.xmin);e[1]=Math.min(g[1],x.ymin);e[2]=Math.max(g[2],x.xmax);e[3]=Math.max(g[3],x.ymax);break;case "point":e[0]=Math.min(g[0],x.x),e[1]=Math.min(g[1],x.y),e[2]=Math.max(g[2],x.x),e[3]=Math.max(g[3],x.y)}};c.expandPointInPlace=function(g,x){x[0]<g[0]&&(g[0]=x[0]);x[0]>g[2]&&(g[2]=x[0]);x[1]<g[1]&&(g[1]=x[1]);x[1]>g[3]&&(g[3]=x[1])};c.expandWithNestedArray=function(g,x,e=g){const n=x.length;let u=g[0],M=g[1],L=g[2];g=g[3];for(let U=0;U<n;U++){const S=x[U];u=Math.min(u,S[0]);M=Math.min(M,
S[1]);L=Math.max(L,S[0]);g=Math.max(g,S[1])}e[0]=u;e[1]=M;e[2]=L;e[3]=g;return e};c.fromExtent=function(g,x=r()){x[0]=g.xmin;x[1]=g.ymin;x[2]=g.xmax;x[3]=g.ymax;return x};c.fromValues=function(g,x,e,n,u=r()){u[0]=g;u[1]=x;u[2]=e;u[3]=n;return u};c.height=k;c.intersection=function(g,x,e){if(N.isNone(x))return C(e,g);const n=x[0],u=x[1],M=x[2];x=x[3];e[0]=O.clamp(g[0],n,M);e[1]=O.clamp(g[1],u,x);e[2]=O.clamp(g[2],n,M);e[3]=O.clamp(g[3],u,x);return e};c.intersects=function(g,x){return Math.max(x[0],
g[0])<=Math.min(x[2],g[2])&&Math.max(x[1],g[1])<=Math.min(x[3],g[3])};c.intersectsSegment=function(g,x,e){const n=g[0],u=g[1],M=g[2];g=g[3];const {x:L,y:U}=x,{x:S,y:B}=e;var z=(E,d)=>0>(B-U)*E+(L-S)*d+(S*U-L*B);x=z(n,g);e=z(M,g);const q=z(M,u);z=z(n,u);return x===e&&e===q&&q===z&&z===x||L<n&&S<n||L>M&&S>M||U>g&&B>g||U<u&&B<u?!1:!0};c.intersectsSphere=function(g,x){const e=x[3];var n=Math.abs(x[0]-.5*(g[0]+g[2]));const u=.5*(g[2]-g[0]);if(n>e+u)return!1;var M=.5*(g[3]-g[1]);g=Math.abs(x[1]-.5*(g[1]+
g[3]));if(g>e+M)return!1;if(n<u||g<M)return!0;n-=u;M=g-M;return n*n+M*M<=e*e};c.is=A;c.isPoint=function(g){return(0===w(g)||!isFinite(g[0]))&&(0===k(g)||!isFinite(g[1]))};c.offset=function(g,x,e,n=g){n[0]=g[0]+x;n[1]=g[1]+e;n[2]=g[2]+x;n[3]=g[3]+e;return n};c.pad=function(g,x,e=g){e[0]=g[0]-x;e[1]=g[1]-x;e[2]=g[2]+x;e[3]=g[3]+x;return e};c.setMax=function(g,x,e=g){e[2]=x[0];e[3]=x[1];e!==g&&(e[0]=g[0],e[1]=g[1]);return g};c.setMin=function(g,x,e=g){e[0]=x[0];e[1]=x[1];e!==g&&(e[2]=g[2],e[3]=g[3]);
return e};c.size=function(g,x){x[0]=g[2]-g[0];x[1]=g[3]-g[1]};c.toExtent=function(g,x){return new F({xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:x})};c.width=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(c,b,O,N,F,r,C,w,k,h){function A(R,W){return R?W?4:3:W?3:2}function Q(R,W,ea,aa){if(R){if(ea)return W&&aa?H:lb;if(W&&aa)return l}else if(W&&aa)return lb;return ib}function y({scale:R,translate:W},ea){return Math.round((ea-W[0])/R[0])}function g({scale:R,translate:W},ea){return Math.round((W[1]-ea)/R[1])}function x({scale:R,translate:W},ea,aa){return ea*R[aa]+W[aa]}function e(R){R=R.coords;return{x:R[0],y:R[1]}}function n(R,W){R.coords[0]=W.x;R.coords[1]=W.y;return R}function u(R){R=R.coords;
return{x:R[0],y:R[1],z:R[2]}}function M(R,W){R.coords[0]=W.x;R.coords[1]=W.y;R.coords[2]=W.z;return R}function L(R){R=R.coords;return{x:R[0],y:R[1],m:R[2]}}function U(R,W){R.coords[0]=W.x;R.coords[1]=W.y;R.coords[2]=W.m;return R}function S(R){R=R.coords;return{x:R[0],y:R[1],z:R[2],m:R[3]}}function B(R,W){R.coords[0]=W.x;R.coords[1]=W.y;R.coords[2]=W.z;R.coords[3]=W.m;return R}function z(R,W){return R&&W?B:R?M:W?U:n}function q(R,W,ea,aa,ja){ea=z(ea,aa);for(const {geometry:na,attributes:ra}of W)W=N.isSome(na)?
ea(new h,na):null,R.push(new w.OptimizedFeature(W,ra,null,ja?ra[ja]:void 0));return R}function E(R,W,ea,aa){for(const {geometry:ja,attributes:na}of W)R.push({attributes:na,geometry:N.isSome(ja)?d(ja,ea,aa):null});return R}function d(R,W,ea){if(N.isNone(R))return null;const aa=A(W,ea),ja=[];for(let na=0;na<R.coords.length;na+=aa){const ra=[];for(let Y=0;Y<aa;Y++)ra.push(R.coords[na+Y]);ja.push(ra)}return W?ea?{points:ja,hasZ:W,hasM:ea}:{points:ja,hasZ:W}:ea?{points:ja,hasM:ea}:{points:ja}}function p(R,
W,ea,aa,ja){ea=A(ea,aa);for(const {geometry:na,attributes:ra}of W)W=N.isSome(na)?D(new h,na,ea):null,R.push(new w.OptimizedFeature(W,ra,null,ja?ra[ja]:void 0));return R}function D(R,W,ea=A(W.hasZ,W.hasM)){R.lengths[0]=W.points.length;const aa=R.coords;let ja=0;for(const na of W.points)for(W=0;W<ea;W++)aa[ja++]=na[W];return R}function I(R,W,ea){if(!R)return null;const aa=A(W,ea),{coords:ja,lengths:na}=R;R=[];let ra=0;for(const Y of na){const da=[];for(let pa=0;pa<Y;pa++){const wa=[];for(let Ba=0;Ba<
aa;Ba++)wa.push(ja[ra++]);da.push(wa)}R.push(da)}return W?ea?{paths:R,hasZ:W,hasM:ea}:{paths:R,hasZ:W}:ea?{paths:R,hasM:ea}:{paths:R}}function K(R,W,ea,aa,ja){ea=A(ea,aa);for(const {geometry:na,attributes:ra}of W)W=N.isSome(na)?P(new h,na,ea):null,R.push(new w.OptimizedFeature(W,ra,null,ja?ra[ja]:void 0));return R}function P(R,W,ea=A(W.hasZ,W.hasM)){const {lengths:aa,coords:ja}=R;let na=0;for(const ra of W.paths){for(const Y of ra)for(W=0;W<ea;W++)ja[na++]=Y[W];aa.push(ra.length)}return R}function v(R,
W,ea){if(!R)return null;const aa=A(W,ea),{coords:ja,lengths:na}=R;R=[];let ra=0;for(const Y of na){const da=[];for(let pa=0;pa<Y;pa++){const wa=[];for(let Ba=0;Ba<aa;Ba++)wa.push(ja[ra++]);da.push(wa)}R.push(da)}return W?ea?{rings:R,hasZ:W,hasM:ea}:{rings:R,hasZ:W}:ea?{rings:R,hasM:ea}:{rings:R}}function G(R,W,ea,aa,ja){for(const {geometry:na,centroid:ra,attributes:Y}of W){W=N.isSome(na)?X(new h,na,ea,aa):null;const da=ja?Y[ja]:void 0;N.isSome(ra)?R.push(new w.OptimizedFeature(W,Y,n(new h,ra),da)):
R.push(new w.OptimizedFeature(W,Y,null,da))}return R}function X(R,W,ea=W.hasZ,aa=W.hasM){ka(R,W.rings,ea,aa);return R}function ka(R,W,ea,aa){ea=A(ea,aa);const {lengths:ja,coords:na}=R;aa=0;Sa(R);for(const ra of W){for(const Y of ra)for(W=0;W<ea;W++)na[aa++]=Y[W];ja.push(ra.length)}return R}function ta(R,W,ea,aa,ja,na){$a(R);if(!ea){for(const ra of W)R.push(new w.OptimizedFeature(null,ra.attributes,null,na?ra.attributes[na]:void 0));return R}switch(ea){case "esriGeometryPoint":return q(R,W,aa,ja,na);
case "esriGeometryMultipoint":return p(R,W,aa,ja,na);case "esriGeometryPolyline":return K(R,W,aa,ja,na);case "esriGeometryPolygon":return G(R,W,aa,ja,na);default:Ta.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ea}'`)),$a(R)}return R}function za(R,W,ea,aa){R=R&&("coords"in R?R:R.geometry);if(N.isNone(R))return null;switch(W){case "esriGeometryPoint":return W=e,ea&&aa?W=S:ea?W=u:aa&&(W=L),W(R);case "esriGeometryMultipoint":return d(R,ea,aa);case "esriGeometryPolyline":return I(R,
ea,aa);case "esriGeometryPolygon":return v(R,ea,aa);default:return Ta.error("convertToGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${W}'`)),null}}function Ea(R,W,ea,aa,ja){$a(R);if(N.isNone(ea)){for(const ra of W)R.push({attributes:ra.attributes});return R}switch(ea){case "esriGeometryPoint":ea=e;aa&&ja?ea=S:aa?ea=u:ja&&(ea=L);for(var na of W){const {geometry:ra,attributes:Y}=na;aa=N.isSome(ra)?ea(ra):null;R.push({attributes:Y,geometry:aa})}break;case "esriGeometryMultipoint":return E(R,
W,aa,ja);case "esriGeometryPolyline":for(const {geometry:ra,attributes:Y}of W)R.push({attributes:Y,geometry:N.isSome(ra)?I(ra,aa,ja):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:Y,centroid:da}of W)na=N.isSome(ra)?v(ra,aa,ja):null,N.isSome(da)?(W=e(da),R.push({attributes:Y,centroid:W,geometry:na})):R.push({attributes:Y,geometry:na});break;default:Ta.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ea}'`))}return R}function Ha(R,
W,ea,aa,ja,na,ra=ea,Y=aa){Sa(R);if(N.isNone(W)||!W.coords.length)return null;ja=jb[ja];const {coords:da,lengths:pa}=W;W=A(ea,aa);const wa=A(ea&&ra,aa&&Y);ea=Q(ea,aa,ra,Y);if(!pa.length)return ea(R.coords,da,0,0,y(na,da[0]),g(na,da[1])),Sa(R,W,0),R;let Ba,La=0,Ja,Pa=0;for(const Qa of pa){if(Qa<ja)continue;let Ga=0;Ja=Pa;Y=aa=y(na,da[La]);Ba=ra=g(na,da[La+1]);ea(R.coords,da,Ja,La,Y,Ba);Ga++;La+=W;Ja+=wa;for(let Ra=1;Ra<Qa;Ra++,La+=W)if(Y=y(na,da[La]),Ba=g(na,da[La+1]),Y!==aa||Ba!==ra)ea(R.coords,da,
Ja,La,Y-aa,Ba-ra),Ja+=wa,Ga++,aa=Y,ra=Ba;Ga>=ja&&(R.lengths.push(Ga),Pa=Ja)}$a(R.coords,Pa);return R.coords.length?R:null}function Fa(R,W,ea,aa,ja,na,ra){let Y=aa,da=0;for(let wa=na+ea;wa<ra;wa+=ea){var pa=W[wa];const Ba=W[wa+1],La=W[ra],Ja=W[ra+1];let Pa=W[na],Qa=W[na+1],Ga=La-Pa,Ra=Ja-Qa;if(0!==Ga||0!==Ra){const xa=((pa-Pa)*Ga+(Ba-Qa)*Ra)/(Ga*Ga+Ra*Ra);1<xa?(Pa=La,Qa=Ja):0<xa&&(Pa+=Ga*xa,Qa+=Ra*xa)}Ga=pa-Pa;Ra=Ba-Qa;pa=Ga*Ga+Ra*Ra;pa>Y&&(da=wa,Y=pa)}Y>aa&&(da-na>ea&&Fa(R,W,ea,aa,ja,na,da),ja(R,
W,R.length,da,W[da],W[da+1]),ra-da>ea&&Fa(R,W,ea,aa,ja,da,ra))}function Ua(R,W,ea,aa,ja){const {coords:na,lengths:ra}=W;ea=A(ea,aa);if(!na.length)return R!==W&&Sa(R),R;N.assertIsSome(ja);const {originPosition:Y,scale:da,translate:pa}=ja;ja=va;ja.originPosition=Y;aa=ja.scale;aa[0]=da[0]??1;aa[1]=-(da[1]??1);aa[2]=da[2]??1;aa[3]=da[3]??1;var wa=ja.translate;wa[0]=pa[0]??0;wa[1]=pa[1]??0;wa[2]=pa[2]??0;wa[3]=pa[3]??0;if(!ra.length){for(aa=0;aa<ea;++aa)R.coords[aa]=x(ja,na[aa],aa);R!==W&&Sa(R,ea,0);return R}wa=
0;for(let La=0;La<ra.length;La++){const Ja=ra[La];R.lengths[La]=Ja;for(var Ba=0;Ba<ea;++Ba)R.coords[wa+Ba]=x(ja,na[wa+Ba],Ba);Ba=R.coords[wa];let Pa=R.coords[wa+1];wa+=ea;for(let Qa=1;Qa<Ja;Qa++,wa+=ea){Ba+=na[wa]*aa[0];Pa+=na[wa+1]*aa[1];R.coords[wa]=Ba;R.coords[wa+1]=Pa;for(let Ga=2;Ga<ea;++Ga)R.coords[wa+Ga]=x(ja,na[wa+Ga],Ga)}}R!==W&&Sa(R,na.length,ra.length);return R}function Oa(R,W,ea,aa){let ja=0,na=R[aa*W],ra=R[aa*(W+1)];for(let Y=1;Y<ea;Y++){const da=na+R[aa*(W+Y)],pa=ra+R[aa*(W+Y)+1],wa=
(da-na)*(pa+ra);na=da;ra=pa;ja+=wa}return.5*ja}function Sa(R,W=0,ea=0){$a(R.lengths,ea);$a(R.coords,W)}function $a(R,W=0){R.length!==W&&(R.length=W)}const Ta=O.getLogger("esri.layers.graphics.featureConversionUtils"),jb={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ib=(R,W,ea,aa,ja,na)=>{R[ea]=ja;R[ea+1]=na},lb=(R,W,ea,aa,ja,na)=>{R[ea]=ja;R[ea+1]=na;R[ea+2]=W[aa+2]},l=(R,W,ea,aa,ja,na)=>{R[ea]=ja;R[ea+1]=na;R[ea+2]=W[aa+3]},H=(R,W,ea,aa,ja,na)=>{R[ea]=
ja;R[ea+1]=na;R[ea+2]=W[aa+2];R[ea+3]=W[aa+3]},fa=[],la=[],va={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(R,W,ea,aa,ja){fa[0]=R;[R]=ta(la,fa,W,ea,aa,ja);$a(fa);$a(la);return R};c.convertFromFeatureSet=function(R,W){const ea=new k,{hasM:aa,hasZ:ja,features:na,objectIdFieldName:ra,spatialReference:Y,geometryType:da,exceededTransferLimit:pa,transform:wa,fields:Ba}=R;Ba&&(ea.fields=Ba);ea.geometryType=da??null;ea.objectIdFieldName=ra??W??null;ea.spatialReference=
Y??null;if(!ea.objectIdFieldName)return Ta.error(new b("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),ea;na&&ta(ea.features,na,da,ja,aa,ea.objectIdFieldName);pa&&(ea.exceededTransferLimit=pa);aa&&(ea.hasM=aa);ja&&(ea.hasZ=ja);wa&&(ea.transform=wa);return ea};c.convertFromFeatures=ta;c.convertFromGeometry=function(R,W,ea){if(N.isNone(R))return null;const aa=new h;"hasZ"in R&&null==W&&(W=R.hasZ);"hasM"in R&&null==ea&&(ea=R.hasM);if(C.isPoint(R))return z(null!=W?W:null!=
R.z,null!=ea?ea:null!=R.m)(aa,R);if(C.isPolygon(R))return X(aa,R,W,ea);if(C.isPolyline(R))return P(aa,R,A(W,ea));if(C.isMultipoint(R))return D(aa,R,A(W,ea));Ta.error("convertFromGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${R}'`))};c.convertFromGraphics=function(R,W,ea,aa,ja,na){const ra=R.length;switch(ea){case "esriGeometryPoint":q(R,W,aa,ja,na);break;case "esriGeometryMultipoint":p(R,W,aa,ja,na);break;case "esriGeometryPolyline":K(R,W,aa,ja,na);break;case "esriGeometryPolygon":G(R,
W,aa,ja,na);break;default:Ta.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ea}'`))}for(aa=0;aa<W.length;aa++)R[aa+ra].geometryType=ea,R[aa+ra].insertAfter=W[aa].insertAfter,R[aa+ra].groupId=W[aa].groupId;return R};c.convertFromMultipoint=D;c.convertFromMultipointFeatures=p;c.convertFromNestedArray=ka;c.convertFromPoint=function(R,W,ea=z(null!=W.z,null!=W.m)){return ea(R,W)};c.convertFromPointFeatures=q;c.convertFromPolygon=X;c.convertFromPolyline=P;c.convertFromPolylineFeatures=
K;c.convertToFeature=function(R,W,ea,aa){la[0]=R;Ea(fa,la,W,ea,aa);R=fa[0];$a(fa);$a(la);return R};c.convertToFeatureSet=function(R){const {objectIdFieldName:W,spatialReference:ea,transform:aa,fields:ja,hasM:na,hasZ:ra,features:Y,geometryType:da,exceededTransferLimit:pa,uniqueIdField:wa,queryGeometry:Ba,queryGeometryType:La}=R;R=Ea([],Y,da,ra,na);const Ja=za(Ba,La,!1,!1);R={features:R,fields:ja,geometryType:da,objectIdFieldName:W,spatialReference:ea,uniqueIdField:wa,queryGeometry:Ja};aa&&(R.transform=
aa);pa&&(R.exceededTransferLimit=pa);na&&(R.hasM=na);ra&&(R.hasZ=ra);return R};c.convertToFeatures=Ea;c.convertToGeometry=za;c.convertToMultipoint=d;c.convertToMultipointFeatures=E;c.convertToPoint=function(R,W,ea){return R?W?ea?S(R):u(R):ea?L(R):e(R):null};c.convertToPolygon=v;c.convertToPolyline=I;c.deltaDecodeGeometry=function(R,W){if(N.isNone(R))return null;const ea=R.clone(),aa=R.coords;R=R.lengths;let ja=0;for(let Y=0;Y<R.length;Y++){const da=R[Y];var na=aa[W*ja],ra=aa[W*ja+1];for(let pa=1;pa<
da;pa++)na+=aa[W*(ja+pa)],ra+=aa[W*(ja+pa)+1],ea.coords[W*(ja+pa)]=na,ea.coords[W*(ja+pa)+1]=ra;ja+=da}return ea};c.deltaEncodeGeometry=function(R,W){const ea=R.clone(),aa=R.coords;R=R.lengths;let ja=0;for(let ra=0;ra<R.length;ra++){const Y=R[ra];let da=aa[W*ja];var na=aa[W*ja+1];for(let pa=1;pa<Y;pa++){const wa=aa[W*(ja+pa)],Ba=aa[W*(ja+pa)+1];na=Ba-na;ea.coords[W*(ja+pa)]=wa-da;ea.coords[W*(ja+pa)+1]=na;da=wa;na=Ba}ja+=Y}return ea};c.generalizeOptimizedGeometry=function(R,W,ea,aa,ja,na,ra=ea,Y=
aa){Sa(R);if(!W||!W.coords.length)return null;ja=jb[ja];const {coords:da,lengths:pa}=W;W=A(ea,aa);const wa=A(ea&&ra,aa&&Y);ea=Q(ea,aa,ra,Y);if(!pa.length)return ea(R.coords,da,0,0,da[0],da[1]),Sa(R,W,0),R;aa=0;na*=na;for(const Ba of pa){if(Ba<ja){aa+=Ba*W;continue}ra=R.coords.length/wa;Y=aa;const La=aa+(Ba-1)*W;ea(R.coords,da,R.coords.length,Y,da[Y],da[Y+1]);Fa(R.coords,da,W,na,ea,Y,La);ea(R.coords,da,R.coords.length,La,da[La],da[La+1]);Y=R.coords.length/wa-ra;Y>=ja?R.lengths.push(Y):$a(R.coords,
ra*wa);aa+=Ba*W}return R.coords.length?R:null};c.getBoundsOptimizedGeometry=function(R,W,ea,aa){if(N.isNone(W)||!W.coords||!W.coords.length)return null;ea=A(ea,aa);let ja=aa=Number.POSITIVE_INFINITY,na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(W&&W.coords){W=W.coords;for(let Y=0;Y<W.length;Y+=ea){const da=W[Y],pa=W[Y+1];aa=Math.min(aa,da);na=Math.max(na,da);ja=Math.min(ja,pa);ra=Math.max(ra,pa)}}F.is(R)?F.fromRectValues(R,aa,ja,na,ra):r.fromValues(aa,ja,na,ra,R);return R};c.getQuantizedArea=
function(R,W){const {coords:ea,lengths:aa}=R;let ja=R=0;for(let na=0;na<aa.length;na++){const ra=aa[na];ja+=Oa(ea,R,ra,W);R+=ra}return Math.abs(ja)};c.getQuantizedBoundsOptimizedGeometry=function(R,W,ea,aa){ea=A(ea,aa);const {lengths:ja,coords:na}=W;aa=W=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,da=0;for(const pa of ja){let wa=na[da],Ba=na[da+1];W=Math.min(wa,W);aa=Math.min(Ba,aa);ra=Math.max(wa,ra);Y=Math.max(Ba,Y);da+=ea;for(let La=1;La<pa;La++,da+=ea){const Ja=
na[da],Pa=na[da+1];wa+=Ja;Ba+=Pa;0>Ja&&(W=Math.min(W,wa));0<Ja&&(ra=Math.max(ra,wa));0>Pa?aa=Math.min(aa,Ba):0<Pa&&(Y=Math.max(Y,Ba))}}R[0]=W;R[1]=aa;R[2]=ra;R[3]=Y;return R};c.getSignedQuantizedRingArea=Oa;c.quantizeOptimizedFeatureSet=function(R,W){const {geometryType:ea,features:aa,hasM:ja,hasZ:na}=W;if(!R)return W;for(let ra=0;ra<aa.length;ra++){const Y=aa[ra],da=Y.weakClone();da.geometry=new h;Ha(da.geometry,Y.geometry,ja,na,ea,R);Y.centroid&&(da.centroid=new h,Ha(da.centroid,Y.centroid,ja,na,
"esriGeometryPoint",R));aa[ra]=da}W.transform=R;return W};c.quantizeOptimizedGeometry=Ha;c.quantizeX=y;c.quantizeY=g;c.removeCollinearVectices=function(R,W,ea,aa,ja){if(!W||!W.coords||!W.coords.length)return null;ea=jb[ea];const {coords:na,lengths:ra}=W;W=Q(aa,ja,aa,ja);aa=A(aa,ja);let Y=ja=0,da=0,pa=0;for(const La of ra){Y=pa;W(R.coords,na,Y,ja,na[ja],na[ja+1]);ja+=aa;var wa=na[ja];let Ja=na[ja+1],Pa=wa,Qa=Ja;var Ba=Ja/wa;Y+=aa;W(R.coords,na,Y,ja,Pa,Qa);ja+=aa;for(let Ga=2;Ga<La;Ga++){wa=na[ja];
Ja=na[ja+1];const Ra=Ja/wa,xa=Ba===Ra||!isFinite(Ba)&&!isFinite(Ra);Ba=xa&&isFinite(Ra)?0<=Ba&&0<=Ra||0>=Ba&&0>=Ra:0<=Qa&&0<=Ja||0>=Qa&&0>=Ja;xa&&Ba?(Pa+=wa,Qa+=Ja):(Pa=wa,Qa=Ja,Y+=aa);W(R.coords,na,Y,ja,Pa,Qa);ja+=aa;Ba=Ra}Y+=aa;wa=(Y-pa)/aa;wa>=ea&&(R.lengths[da]=wa,pa=Y,da++)}R.coords.length>pa&&(R.coords.length=pa);R.lengths.length>da&&(R.lengths.length=da);return R.coords.length&&R.lengths.length?R:null};c.removeZMValues=function(R,W,ea,aa,ja,na){Sa(R);R.lengths.push(...W.lengths);if(ea===ja&&
aa===na)for(var ra=0;ra<W.coords.length;ra++)R.coords.push(W.coords[ra]);else for(ra=A(ea,aa),ea=Q(ea,aa,ja,na),W=W.coords,aa=0;aa<W.length;aa+=ra)ea(R.coords,W,R.coords.length,aa,W[aa],W[aa+1]);return R};c.unquantizeOptimizedFeatureSet=function(R){const {transform:W,features:ea,hasM:aa,hasZ:ja}=R;if(!W)return R;for(const na of ea)N.isSome(na.geometry)&&Ua(na.geometry,na.geometry,aa,ja,W),N.isSome(na.centroid)&&Ua(na.centroid,na.centroid,aa,ja,W);R.transform=null;return R};c.unquantizeOptimizedGeometry=
Ua;c.unquantizeValue=x;c.unquantizeX=function(R,W){return x(R,W,0)};c.unquantizeY=function(R,W){return x(R,-W,1)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(c,b,O){let N=function(){function r(C=null,w={},k,h){this.geometry=C;this.attributes=w;this.centroid=k;this.objectId=h;this.geohashY=this.geohashX=this.displayId=0}r.prototype.weakClone=
function(){const C=new r(this.geometry,this.attributes,this.centroid,this.objectId);C.displayId=this.displayId;C.geohashX=this.geohashX;C.geohashY=this.geohashY;return C};return r}(),F=function(r){function C(){return r.apply(this,arguments)||this}b._inheritsLoose(C,r);return C}(N);c.OptimizedFeature=N;c.OptimizedFeatureWithGeometry=F;c.hasGeometry=function(r){return!(O.isNone(r.geometry)||!r.geometry.coords||!r.geometry.coords.length)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function c(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}c.prototype.weakClone=function(){const b=new c;b.objectIdFieldName=this.objectIdFieldName;
b.globalIdFieldName=this.globalIdFieldName;b.geohashFieldName=this.geohashFieldName;b.geometryProperties=this.geometryProperties;b.geometryType=this.geometryType;b.spatialReference=this.spatialReference;b.hasZ=this.hasZ;b.hasM=this.hasM;b.features=this.features;b.fields=this.fields;b.transform=this.transform;b.exceededTransferLimit=this.exceededTransferLimit;b.uniqueIdField=this.uniqueIdField;b.queryGeometry=this.queryGeometry;b.queryGeometryType=this.queryGeometryType;return b};return c}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(c){return function(){function b(N=[],F=[],r=!1){this.lengths=N??[];this.coords=F??[];this.hasIndeterminateRingOrder=r}b.fromRect=function(N){const [F,r,C,w]=N;N=C-F;const k=w-r;return new b([5],[F,r,N,0,0,k,-N,0,0,-k])};var O=b.prototype;O.forEachVertex=function(N){let F=0;this.lengths.length||N(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const C=this.lengths[r];for(let w=0;w<C;w++)N(this.coords[2*(w+F)],this.coords[2*(w+F)+1]);F+=C}};O.clone=function(N){return N?
(N.set(this.coords),new b(this.lengths.slice(),N,this.hasIndeterminateRingOrder)):new b(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};c._createClass(b,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((N,F)=>N+F)}}]);return b}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,b,O,N,F){function r(k,h,A){C.minX=h[0];C.minY=h[1];C.maxX=h[2];C.maxY=h[3];k.search(C,A)}const C={minX:0,minY:0,maxX:0,maxY:0};let w=function(){function k(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new N.PooledRBush(9,O("esri-csp-restrictions")?A=>({minX:A[0],minY:A[1],maxX:A[2],maxY:A[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const A=Array(this._idByBounds.size);let Q=0;this._idByBounds.forEach((y,g)=>{A[Q++]=g});this._indexInvalid=!1;this._index.clear();this._index.load(A)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(A=>this._idByBounds.has(A))))),this._boundsToLoad.length=0)}}var h=k.prototype;h.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};h.delete=
function(A){const Q=this._boundsById.get(A);this._boundsById.delete(A);Q&&(this._idByBounds.delete(Q),this._indexInvalid||this._index.remove(Q))};h.forEachInBounds=function(A,Q){this._loadIndex();r(this._index,A,y=>Q(this._idByBounds.get(y)))};h.get=function(A){return this._boundsById.get(A)};h.has=function(A){return this._boundsById.has(A)};h.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};h.set=function(A,Q){if(!this._indexInvalid){const y=this._boundsById.get(A);
y&&(this._index.remove(y),this._idByBounds.delete(y))}this._boundsById.set(A,Q);Q&&(this._idByBounds.set(Q,A),this._indexInvalid||(this._boundsToLoad.push(Q),5E4<this._boundsToLoad.length&&this._loadIndex()))};b._createClass(k,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const A=F.empty();for(const Q of this._boundsById.values())Q&&(A[0]=Math.min(Q[0],A[0]),A[1]=Math.min(Q[1],A[1]),A[2]=Math.max(Q[2],A[2]),A[3]=Math.max(Q[3],A[3]));return A}},{key:"valid",get:function(){return!this._indexInvalid}}]);
return k}();c.BoundsStore=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(c,b,O,N,F,r){function C(q,E){w(q,0,q.children.length,E,q)}function w(q,E,d,p,D){D||(D=new B([]));D.minX=Infinity;D.minY=Infinity;D.maxX=-Infinity;D.maxY=-Infinity;for(let I=E,K;I<d;I++)K=q.children[I],k(D,q.leaf?
p(K):K);return D}function k(q,E){q.minX=Math.min(q.minX,E.minX);q.minY=Math.min(q.minY,E.minY);q.maxX=Math.max(q.maxX,E.maxX);q.maxY=Math.max(q.maxY,E.maxY)}function h(q,E){return q.minX-E.minX}function A(q,E){return q.minY-E.minY}function Q(q){return(q.maxX-q.minX)*(q.maxY-q.minY)}function y(q){return q.maxX-q.minX+(q.maxY-q.minY)}function g(q,E){return q.minX<=E.minX&&q.minY<=E.minY&&E.maxX<=q.maxX&&E.maxY<=q.maxY}function x(q,E){return E.minX<=q.maxX&&E.minY<=q.maxY&&E.maxX>=q.minX&&E.maxY>=q.minY}
function e(q,E,d,p,D){for(E=[E,d];E.length;){d=N.assumeNonNull(E.pop());const I=N.assumeNonNull(E.pop());if(d-I<=p)continue;const K=I+Math.ceil((d-I)/p/2)*p;r.quickselect(q,K,I,d,D);E.push(I,K,K,d)}}let n=function(){function q(d=9,p){this._compareMinX=h;this._compareMinY=A;this._toBBox=D=>D;this._maxEntries=Math.max(4,d||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));p&&("function"===typeof p?this._toBBox=p:this._initFormat(p));this.clear()}var E=q.prototype;E.destroy=function(){this.clear();
u.prune();M.prune();L.prune();U.prune()};E.all=function(d){this._all(this._data,d)};E.search=function(d,p){let D=this._data;const I=this._toBBox;if(x(d,D))for(u.clear();D;){for(let K=0,P=D.children.length;K<P;K++){const v=D.children[K],G=D.leaf?I(v):v;x(d,G)&&(D.leaf?p(v):g(d,G)?this._all(v,p):u.push(v))}D=u.pop()}};E.collides=function(d){let p=this._data;const D=this._toBBox;if(!x(d,p))return!1;for(u.clear();p;){for(let I=0,K=p.children.length;I<K;I++){const P=p.children[I],v=p.leaf?D(P):P;if(x(d,
v)){if(p.leaf||g(d,v))return!0;u.push(P)}}p=u.pop()}return!1};E.load=function(d){if(!d.length)return this;if(d.length<this._minEntries){for(let p=0,D=d.length;p<D;p++)this.insert(d[p]);return this}d=this._build(d.slice(0,d.length),0,d.length-1,0);if(this._data.children.length)if(this._data.height===d.height)this._splitRoot(this._data,d);else{if(this._data.height<d.height){const p=this._data;this._data=d;d=p}this._insert(d,this._data.height-d.height-1,!0)}else this._data=d;return this};E.insert=function(d){d&&
this._insert(d,this._data.height-1);return this};E.clear=function(){this._data=new B([]);return this};E.remove=function(d){if(!d)return this;let p=this._data,D=null,I=0,K=!1,P;const v=this._toBBox(d);L.clear();for(U.clear();p||0<L.length;){p||(p=N.assumeNonNull(L.pop()),D=L.data[L.length-1],I=U.pop()??0,K=!0);if(p.leaf&&(P=O.indexOf(p.children,d,p.children.length,p.indexHint),-1!==P)){p.children.splice(P,1);L.push(p);this._condense(L);break}K||p.leaf||!g(p,v)?D?(I++,p=D.children[I],K=!1):p=null:(L.push(p),
U.push(I),I=0,D=p,p=p.children[0])}return this};E.toJSON=function(){return this._data};E.fromJSON=function(d){this._data=d;return this};E._all=function(d,p){for(M.clear();d;){if(!0===d.leaf)for(const D of d.children)p(D);else M.pushArray(d.children);d=M.pop()??null}};E._build=function(d,p,D,I){var K=D-p+1,P=this._maxEntries;if(K<=P)return d=new B(d.slice(p,D+1)),C(d,this._toBBox),d;I||(I=Math.ceil(Math.log(K)/Math.log(P)),P=Math.ceil(K/P**(I-1)));const v=new z([]);v.height=I;K=Math.ceil(K/P);P=K*
Math.ceil(Math.sqrt(P));for(e(d,p,D,P,this._compareMinX);p<=D;p+=P){const G=Math.min(p+P-1,D);e(d,p,G,K,this._compareMinY);for(let X=p;X<=G;X+=K)v.children.push(this._build(d,X,Math.min(X+K-1,G),I-1))}C(v,this._toBBox);return v};E._chooseSubtree=function(d,p,D,I){for(;;){I.push(p);if(!0===p.leaf||I.length-1===D)break;let K=Infinity,P=Infinity,v=void 0;for(let G=0,X=p.children.length;G<X;G++){const ka=p.children[G],ta=Q(ka),za=(Math.max(ka.maxX,d.maxX)-Math.min(ka.minX,d.minX))*(Math.max(ka.maxY,d.maxY)-
Math.min(ka.minY,d.minY))-ta;za<P?(P=za,K=ta<K?ta:K,v=ka):za===P&&ta<K&&(K=ta,v=ka)}p=v||p.children[0]}return p};E._insert=function(d,p,D){var I=this._toBBox;D=D?d:I(d);L.clear();I=this._chooseSubtree(D,this._data,p,L);I.children.push(d);for(k(I,D);0<=p;)if(L.data[p].children.length>this._maxEntries)this._split(L,p),p--;else break;this._adjustParentBBoxes(D,L,p)};E._split=function(d,p){const D=d.data[p];var I=D.children.length;const K=this._minEntries;this._chooseSplitAxis(D,K,I);(I=this._chooseSplitIndex(D,
K,I))?(I=D.children.splice(I,D.children.length-I),I=D.leaf?new B(I):new z(I),I.height=D.height,C(D,this._toBBox),C(I,this._toBBox),p?d.data[p-1].children.push(I):this._splitRoot(D,I)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};E._splitRoot=function(d,p){this._data=new z([d,p]);this._data.height=d.height+1;C(this._data,this._toBBox)};E._chooseSplitIndex=function(d,p,D){let I,K,P=void 0;I=K=Infinity;for(let G=p;G<=D-p;G++){var v=w(d,0,G,this._toBBox);const X=
w(d,G,D,this._toBBox),ka=Math.max(0,Math.min(v.maxX,X.maxX)-Math.max(v.minX,X.minX))*Math.max(0,Math.min(v.maxY,X.maxY)-Math.max(v.minY,X.minY));v=Q(v)+Q(X);ka<I?(I=ka,P=G,K=v<K?v:K):ka===I&&v<K&&(K=v,P=G)}return P};E._chooseSplitAxis=function(d,p,D){const I=d.leaf?this._compareMinX:h,K=d.leaf?this._compareMinY:A,P=this._allDistMargin(d,p,D,I);p=this._allDistMargin(d,p,D,K);P<p&&d.children.sort(I)};E._allDistMargin=function(d,p,D,I){d.children.sort(I);I=this._toBBox;var K=w(d,0,p,I);const P=w(d,D-
p,D,I);let v=y(K)+y(P);for(let G=p;G<D-p;G++){const X=d.children[G];k(K,d.leaf?I(X):X);v+=y(K)}for(D=D-p-1;D>=p;D--)K=d.children[D],k(P,d.leaf?I(K):K),v+=y(P);return v};E._adjustParentBBoxes=function(d,p,D){for(;0<=D;D--)k(p.data[D],d)};E._condense=function(d){for(let p=d.length-1;0<=p;p--){const D=d.data[p];if(0===D.children.length)if(0<p){const I=d.data[p-1],K=I.children;K.splice(O.indexOf(K,D,K.length,I.indexHint),1)}else this.clear();else C(D,this._toBBox)}};E._initFormat=function(d){const p=
["return a"," - b",";"];this._compareMinX=new Function("a","b",p.join(d[0]));this._compareMinY=new Function("a","b",p.join(d[1]));this._toBBox=new Function("a","return {minX: a"+d[0]+", minY: a"+d[1]+", maxX: a"+d[2]+", maxY: a"+d[3]+"};")};return q}();const u=new F,M=new F,L=new F,U=new F({deallocator:void 0});F=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let S=function(q){function E(){var d=q.apply(this,arguments)||this;d.height=1;d.indexHint=new O.PositionHint;return d}
b._inheritsLoose(E,q);return E}(F),B=function(q){function E(d){var p=q.call(this)||this;p.children=d;p.leaf=!0;return p}b._inheritsLoose(E,q);return E}(S),z=function(q){function E(d){var p=q.call(this)||this;p.children=d;p.leaf=!1;return p}b._inheritsLoose(E,q);return E}(S);c.BBox=F;c.PooledRBush=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(c){var b={};(function(O){(function(N){N=N();void 0!==N&&(O.exports=N)})(function(){function N(C,
w,k,h,A){for(;h>k;){if(600<h-k){var Q=h-k+1,y=w-k+1,g=Math.log(Q),x=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*x*(Q-x)/Q)*(0>y-Q/2?-1:1);N(C,w,Math.max(k,Math.floor(w-y*x/Q+g)),Math.min(h,Math.floor(w+(Q-y)*x/Q+g)),A)}Q=C[w];y=k;x=h;F(C,k,w);for(0<A(C[h],Q)&&F(C,k,h);y<x;){F(C,y,x);y++;for(x--;0>A(C[y],Q);)y++;for(;0<A(C[x],Q);)x--}0===A(C[k],Q)?F(C,k,x):(x++,F(C,x,h));x<=w&&(k=x+1);w<=x&&(h=x-1)}}function F(C,w,k){var h=C[w];C[w]=C[k];C[k]=h}function r(C,w){return C<w?-1:C>w?1:0}return function(C,w,k,h,
A){N(C,w,k||0,h||C.length-1,A||r)}})})({get exports(){return b},set exports(O){b=O}});c.quickselect=b})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,b,O,N,F){c.optimizedFeatureQueryEngineAdapter={getObjectId(r){return r.objectId},getAttributes(r){return r.attributes},getAttribute(r,C){return r.attributes[C]},cloneWithGeometry(r,C){return new N.OptimizedFeature(C,
r.attributes,null,r.objectId)},getGeometry(r){return r.geometry},getCentroid(r,C){b.isNone(r.centroid)&&(r.centroid=O.getCentroidOptimizedGeometry(new F,r.geometry,C.hasZ,C.hasM));return r.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(c,b){function O(F,r,C,w,k,h,A=1){h=k?h?4:3:h?3:2;let Q=C,y=C+h,g=0,x=0,e=C=0,n=0;for(let u=0,M=w-1;u<M;u++,Q+=h,y+=h){w=r[Q];const L=r[Q+1],U=r[Q+2],
S=r[y],B=r[y+1],z=r[y+2];let q=w*B-S*L;e+=q;g+=(w+S)*q;x+=(L+B)*q;k&&(q=w*z-S*U,C+=(U+z)*q,n+=q);w<F[0]&&(F[0]=w);w>F[1]&&(F[1]=w);L<F[2]&&(F[2]=L);L>F[3]&&(F[3]=L);k&&(U<F[4]&&(F[4]=U),U>F[5]&&(F[5]=U))}0<e*A&&(e*=-1);0<n*A&&(n*=-1);if(!e)return null;F=[g,x,.5*e];k&&(F[3]=C,F[4]=.5*n);return F}function N(F,r,C,w,k){k=w?k?4:3:k?3:2;let h=r,A=r+k,Q=0,y=0,g=0,x=0;for(let M=0,L=C-1;M<L;M++,h+=k,A+=k){var e=F[h];const U=F[h+1],S=F[h+2],B=F[A],z=F[A+1],q=F[A+2];if(w){var n=B-e;var u=z-U;const E=q-S;n=
Math.sqrt(n*n+u*u+E*E)}else n=B-e,u=z-U,n=Math.sqrt(n*n+u*u);n&&(Q+=n,w?(e=[e+.5*(B-e),U+.5*(z-U),S+.5*(q-S)],y+=n*e[0],g+=n*e[1],x+=n*e[2]):(e=[e+.5*(B-e),U+.5*(z-U)],y+=n*e[0],g+=n*e[1]))}return 0<Q?w?[y/Q,g/Q,x/Q]:[y/Q,g/Q]:0<C?w?[F[r],F[r+1],F[r+2]]:[F[r],F[r+1]]:null}c.getCentroidOptimizedGeometry=function(F,r,C,w,k){if(b.isNone(r)||!r.lengths.length)return null;const h="upperLeft"===k?.originPosition?-1:1;F.lengths.length&&(F.lengths.length=0);F.coords.length&&(F.coords.length=0);k=F.coords;
const A=[],Q=C?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:y,coords:g}=r,x=C?w?4:3:w?3:2;let e=0;for(var n of y){const u=O(Q,g,e,n,C,w,h);u&&A.push(u);e+=n*x}A.sort((u,M)=>{let L=h*u[2]-h*M[2];0===L&&C&&(L=u[4]-M[4]);return L});A.length&&(n=6*A[0][2],k[0]=A[0][0]/n,k[1]=A[0][1]/n,C&&
(n=6*A[0][4],k[2]=0!==n?A[0][3]/n:0),k[0]<Q[0]||k[0]>Q[1]||k[1]<Q[2]||k[1]>Q[3]||C&&(k[2]<Q[4]||k[2]>Q[5]))&&(k.length=0);if(!k.length)if(r=r.lengths[0]?N(g,0,y[0],C,w):null)k[0]=r[0],k[1]=r[1],C&&2<r.length&&(k[2]=r[2]);else return null;return F};c.lineCentroid=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g){function x(){x=O._asyncToGenerator(function*(I,K,P){const {outFields:v,orderByFields:G,groupByFieldsForStatistics:X,outStatistics:ka}=I;if(v)for(var ta=0;ta<v.length;ta++)v[ta]=v[ta].trim();if(G)for(ta=0;ta<G.length;ta++)G[ta]=G[ta].trim();if(X)for(ta=0;ta<X.length;ta++)X[ta]=X[ta].trim();if(ka)for(ta=0;ta<ka.length;ta++)ka[ta].onStatisticField&&(ka[ta].onStatisticField=ka[ta].onStatisticField.trim());I.geometry&&!I.outSR&&(I.outSR=I.geometry.spatialReference);
return e(I,K,P)});return x.apply(this,arguments)}function e(I,K,P){return n.apply(this,arguments)}function n(){n=O._asyncToGenerator(function*(I,K,P){if(!I)return null;var {where:v}=I;I.where=v=v&&v.trim();if(!v||/^1 *= *1$/.test(v)||K&&K===v)I.where=null;if(!I.geometry)return I;K=yield M(I);I.distance=0;I.units=null;"esriSpatialRelEnvelopeIntersects"===I.spatialRel&&({spatialReference:v}=I.geometry,K=w.getGeometryExtent(K),K.spatialReference=v);if(K){yield g.checkProjectionSupport(K.spatialReference,
P);v=K.spatialReference;K=u(K,P)&&k.isExtent(K)?{spatialReference:v,rings:[[[K.xmin,K.ymin],[K.xmin,K.ymax],[K.xmax,K.ymax],[K.xmax,K.ymin],[K.xmin,K.ymin]]]}:K;v=(yield h.normalizeCentralMeridian(k.fromJSON(K)))[0];if(F.isNone(v))throw z;const G="quantizationParameters"in I&&I.quantizationParameters?.tolerance||"maxAllowableOffset"in I&&I.maxAllowableOffset||0;K=G&&u(K,P)?{densificationStep:8*G}:void 0;v=v.toJSON();K=yield g.project(v,v.spatialReference,P,K);if(!K)throw z;K.spatialReference=P;I.geometry=
K}return I});return n.apply(this,arguments)}function u(I,K){if(!I)return!1;const P=I.spatialReference;return(k.isExtent(I)||k.isPolygon(I)||k.isPolyline(I))&&!A.equals(P,K)&&!C.canProjectWithoutEngine(P,K)}function M(I){return L.apply(this,arguments)}function L(){L=O._asyncToGenerator(function*(I){const {distance:K,units:P}=I,v=I.geometry;if(null==K||"vertexAttributes"in v)return v;var G=v.spatialReference;I=P?B.fromJSON(P):r.getUnitString(G);G=G&&(A.isGeographic(G)||A.isWebMercator(G))?v:yield g.checkProjectionSupport(G,
A.WGS84).then(()=>g.project(v,A.WGS84));return(yield U())(G.spatialReference,G,K,I)});return L.apply(this,arguments)}function U(){return S.apply(this,arguments)}function S(){S=O._asyncToGenerator(function*(){return(yield new Promise((I,K)=>c(["../../../geometry/geometryEngineJSON"],I,K))).geodesicBuffer});return S.apply(this,arguments)}const B=new N.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),q=new y,E=new y,d=new y,p={esriGeometryPoint:Q.convertToPoint,esriGeometryPolyline:Q.convertToPolyline,esriGeometryPolygon:Q.convertToPolygon,esriGeometryMultipoint:Q.convertToMultipoint},D=(I,K)=>"_geVersion"!==I?K:void 0;b.QUERY_ENGINE_EMPTY_RESULT=z;b.cleanFromGeometryEngine=function(I){return I&&"_geVersion"in I?JSON.parse(JSON.stringify(I,D)):I};b.getGeometry=function(I,K,P,v,G,X,ka=K,ta=P){const za=K&&ka,Ea=P&&ta;v=F.isSome(v)?
"coords"in v?v:v.geometry:null;if(F.isNone(v))return null;if(G)return K=Q.generalizeOptimizedGeometry(E,v,K,P,I,G,ka,ta),X&&(K=Q.quantizeOptimizedGeometry(d,K,za,Ea,I,X)),p[I]?.(K,za,Ea)??null;if(X)return X=Q.quantizeOptimizedGeometry(d,v,K,P,I,X,ka,ta),p[I]?.(X,za,Ea)??null;Q.removeZMValues(q,v,K,P,ka,ta);return p[I]?.(q,za,Ea)??null};b.normalizeQuery=function(I,K,P){return x.apply(this,arguments)};b.normalizeQueryLike=e;b.transformCentroid=function(I,K,P,v=I.hasZ,G=I.hasM){if(F.isNone(K))return null;
const X=I.hasZ&&v,ka=I.hasM&&G;return P?(I=Q.quantizeOptimizedGeometry(d,K,I.hasZ,I.hasM,"esriGeometryPoint",P,v,G),Q.convertToPoint(I,X,ka)):Q.convertToPoint(K,X,ka)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./ellipsoidUtils ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M,L,U,S,B,z,q,E,d){function p(){return!!gb&&n.isLoaded()}function D(Z){r.isNone(Gb)&&(Gb=Promise.all([n.load(),(new Promise((ia,ba)=>c(["../chunks/geometryEngineBase"],ia,ba))).then(ia=>ia.geometryEngineBase),new Promise((ia,ba)=>c(["./geometryAdapters/hydrated"],ia,ba))]));return Gb.then(([,ia,{hydratedAdapter:ba}])=>{C.throwIfAborted(Z);db=ba;gb=ia.default;gb._enableProjection(n.pe);nb.notify()})}function I(Z,ia,ba=null,qa=null){return Array.isArray(Z)?
0===Z.length?[]:K(db,Z,Z[0].spatialReference,ia,ba,qa):K(db,[Z],Z.spatialReference,ia,ba,qa)[0]}function K(Z,ia,ba,qa,Ca=null,Da=null){if(r.isNone(ba)||r.isNone(qa))return ia;if(X(ba,qa,Ca))return ia.map(Na=>r.unwrap(ta(Na,ba,qa)));if(r.isNone(Ca)){const Na=z.cacheKey(ba,qa);void 0!==Pb[Na]?Ca=Pb[Na]:(Ca=v(ba,qa,void 0),r.isNone(Ca)&&(Ca=new z),Pb[Na]=Ca)}if(r.isNone(gb)||r.isNone(Z))throw new Wb;return r.isSome(Da)?gb._project(Z,ia,ba,qa,Ca,Da):gb._project(Z,ia,ba,qa,Ca)}function P(Z,ia){if(!p())for(const ba of Z)if(r.isSome(ba)&&
!q.equals(ba.spatialReference,ia)&&q.isValid(ba.spatialReference)&&q.isValid(ia)&&!X(ba.spatialReference,ia))return k.trackAccess(nb),{pending:D(),geometries:null};return{pending:null,geometries:Z.map(ba=>r.isNone(ba)?null:q.equals(ba.spatialReference,ia)?ba:q.isValid(ba.spatialReference)&&q.isValid(ia)?G(ba,ia):null)}}function v(Z,ia,ba=null){if(r.isNone(Z)||r.isNone(ia))return null;if(r.isNone(gb)||r.isNone(db))throw new Wb;Z=gb._getTransformation(db,Z,ia,ba,ba?.spatialReference);return null!==
Z?z.fromGE(Z):null}function G(Z,ia){try{const ba=I(Z,ia);if(null==ba)return null;"xmin"in Z&&"xmin"in ba&&(ba.zmin=Z.zmin,ba.zmax=Z.zmax);const qa=d.getGeometryZScaler(ba.type,Z.spatialReference,ia);r.isSome(qa)&&qa(ba);return ba}catch(ba){if(!(ba instanceof Wb))throw ba;return null}}function X(Z,ia,ba){return ba?!1:q.equals(Z,ia)?!0:q.isValid(Z)&&q.isValid(ia)&&!!ub(Z,ia,Xb)}function ka(){ka=O._asyncToGenerator(function*(Z,ia,ba,qa){if(p())return C.waitTick(qa);if(Array.isArray(Z))for(const {source:Ca,
dest:Da,geographicTransformation:Na}of Z){if(!X(Ca,Da,Na))return D(qa)}else if(!X(Z,ia,ba))return D(qa);return C.waitTick(qa)});return ka.apply(this,arguments)}function ta(Z,ia,ba){return Z?"x"in Z?za(Z,ia,new u,ba,0):"xmin"in Z?Ua(Z,ia,new x,ba,0):"rings"in Z?Fa(Z,ia,new M,ba,0):"paths"in Z?Ha(Z,ia,new L,ba,0):"points"in Z?Ea(Z,ia,new e,ba,0):null:null}function za(Z,ia,ba,qa,Ca){Ya[0]=Z.x;Ya[1]=Z.y;const Da=Z.z;Ya[2]=void 0!==Da?Da:Ca;if(!Ta(Ya,ia,0,Ya,qa,0,1))return null;ba.x=Ya[0];ba.y=Ya[1];ba.spatialReference=
qa;void 0===Da?(ba.z=void 0,ba.hasZ=!1):(ba.z=Ya[2],ba.hasZ=!0);void 0===Z.m?(ba.m=void 0,ba.hasM=!1):(ba.m=Z.m,ba.hasM=!0);return ba}function Ea(Z,ia,ba,qa,Ca){const {points:Da,hasZ:Na,hasM:Va}=Z;Z=[];const mb=Da.length,kb=[];for(var hb of Da)kb.push(hb[0],hb[1],Na?hb[2]:Ca);if(!Ta(kb,ia,0,kb,qa,0,mb))return null;for(ia=0;ia<mb;++ia){Ca=3*ia;hb=kb[Ca];const xb=kb[Ca+1];Na&&Va?Z.push([hb,xb,kb[Ca+2],Da[ia][3]]):Na?Z.push([hb,xb,kb[Ca+2]]):Va?Z.push([hb,xb,Da[ia][2]]):Z.push([hb,xb])}ba.points=Z;ba.spatialReference=
qa;ba.hasZ=Na;ba.hasM=Va;return ba}function Ha(Z,ia,ba,qa,Ca){const {paths:Da,hasZ:Na,hasM:Va}=Z;Z=[];if(!jb(Da,Na??!1,Va??!1,ia,Z,qa,Ca))return null;ba.paths=Z;ba.spatialReference=qa;ba.hasZ=Na;ba.hasM=Va;return ba}function Fa(Z,ia,ba,qa,Ca){const {rings:Da,hasZ:Na,hasM:Va}=Z;Z=[];if(!jb(Da,Na??!1,Va??!1,ia,Z,qa,Ca))return null;ba.rings=Z;ba.spatialReference=qa;ba.hasZ=Na;ba.hasM=Va;return ba}function Ua(Z,ia,ba,qa,Ca){const {xmin:Da,ymin:Na,xmax:Va,ymax:mb,hasZ:kb,hasM:hb}=Z;if(!Oa(Da,Na,kb?Z.zmin:
Ca,ia,Ya,qa))return null;ba.xmin=Ya[0];ba.ymin=Ya[1];kb&&(ba.zmin=Ya[2]);if(!Oa(Va,mb,kb?Z.zmax:Ca,ia,Ya,qa))return null;ba.xmax=Ya[0];ba.ymax=Ya[1];kb&&(ba.zmax=Ya[2]);hb&&(ba.mmin=Z.mmin,ba.mmax=Z.mmax);ba.spatialReference=qa;return ba}function Oa(Z,ia,ba,qa,Ca,Da){fb[0]=Z;fb[1]=ia;fb[2]=ba;return Ta(fb,qa,0,Ca,Da,0,1)}function Sa(Z,ia,ba,qa){if(r.isNone(ia)||r.isNone(qa)||2>Z.length)return!1;2===Z.length&&(fb[0]=Z[0],fb[1]=Z[1],fb[2]=0,Z=fb);return Ta(Z,ia,0,ba,qa,0,1)}function $a(Z,ia,ba){if(r.isNone(ia))return!1;
ia=H(ia,Kb);ia=zb[ia][oa.WGS84_COMPARABLE_LON_LAT];if(r.isNone(ia))return!1;ia(Z,0,fb,0);ba!==fb&&(ba[0]=fb[0],ba[1]=fb[1],2<ba.length&&(ba[2]=fb[2]));return!0}function Ta(Z,ia,ba,qa,Ca,Da,Na=1){ia=ub(ia,Ca,Xb);if(r.isNone(ia))return!1;if(ia===fa){if(Z===qa&&ba===Da)return!0;Na=ba+3*Na;for(let Va=ba,mb=Da;Va<Na;Va++,mb++)qa[mb]=Z[Va];return!0}Na=ba+3*Na;for(let Va=ba,mb=Da;Va<Na;Va+=3,mb+=3)ia(Z,Va,qa,mb);return!0}function jb(Z,ia,ba,qa,Ca,Da,Na=0){const Va=[];for(const mb of Z)for(const kb of mb)Va.push(kb[0],
kb[1],ia?kb[2]:Na);if(!Ta(Va,qa,0,Va,Da,0,Va.length/3))return!1;qa=0;Ca.length=0;for(const mb of Z){Z=[];for(const kb of mb)ia&&ba?Z.push([Va[qa++],Va[qa++],Va[qa++],kb[3]]):ia?Z.push([Va[qa++],Va[qa++],Va[qa++]]):(ba?Z.push([Va[qa++],Va[qa++],kb[2]]):Z.push([Va[qa++],Va[qa++]]),qa++);Ca.push(Z)}return!0}function ib(Z,ia,ba,qa){ia=qa+ia;if(ia<qa/2||ba>ia)return Number.MAX_VALUE;Z=Math.abs(Hb*Z)+Math.asin(ba/ia);return Z>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(Z)}function lb(Z,ia,ba){const qa=Math.sin(Z);
Z=Math.cos(Z);const Ca=Math.sin(ia);ia=Math.cos(ia);ba[0]=-qa;ba[4]=-Ca*Z;ba[8]=ia*Z;ba[12]=0;ba[1]=Z;ba[5]=-Ca*qa;ba[9]=ia*qa;ba[13]=0;ba[2]=0;ba[6]=ia;ba[10]=Ca;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function l(Z,ia,ba){lb(Z,ia,ba);A.transpose(ba,ba);return ba}function H(Z,ia){if(!Z)return oa.UNKNOWN;if(ia.spatialReference===Z)return ia.spatialReferenceId;ia.spatialReference=Z;"metersPerUnit"in ia&&(ia.metersPerUnit=w.getMetersPerUnitForSR(Z,1));return Z.wkt===g.SphericalECEFSpatialReferenceLike.wkt?
ia.spatialReferenceId=oa.SPHERICAL_ECEF:q.isWGS84(Z)?ia.spatialReferenceId=oa.WGS84:q.isWebMercator(Z)?ia.spatialReferenceId=oa.WEB_MERCATOR:q.isPlateCarree(Z)?ia.spatialReferenceId=oa.PLATE_CARREE:Z.wkt===g.WGS84ECEFSpatialReferenceLike.wkt?ia.spatialReferenceId=oa.WGS84_ECEF:Z.wkid===E.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=oa.CGCS2000:Z.wkt===g.SphericalPCPFMarsLike.wkt?ia.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:Z.wkt===g.SphericalPCPFMoonLike.wkt?ia.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:
q.isMars(Z)?ia.spatialReferenceId=oa.GCSMARS2000:q.isMoon(Z)?ia.spatialReferenceId=oa.GCSMOON2000:ia.spatialReferenceId=oa.UNKNOWN}function fa(Z,ia,ba,qa){Z!==ba&&(ba[qa++]=Z[ia++],ba[qa++]=Z[ia++],ba[qa]=Z[ia])}function la(Z,ia,ba,qa){ba[qa++]=Rb*(Z[ia++]/S.earth.radius);ba[qa++]=Rb*(Math.PI/2-2*Math.atan(Math.exp(-Z[ia++]/S.earth.radius)));ba[qa]=Z[ia]}function va(Z,ia,ba,qa){la(Z,ia,ba,qa);pa(ba,qa,ba,qa)}function R(Z,ia,ba,qa){la(Z,ia,ba,qa);Ga(ba,qa,ba,qa)}function W(Z,ia,ba,qa,Ca){var Da=.4999999*
Math.PI;Da=F.clamp(Hb*Z[ia+1],-Da,Da);Da=Math.sin(Da);ba[qa++]=Hb*Z[ia]*Ca.radius;ba[qa++]=Ca.halfSemiMajorAxis*Math.log((1+Da)/(1-Da));ba[qa]=Z[ia+2]}function ea(Z,ia,ba,qa){W(Z,ia,ba,qa,S.earth)}function aa(Z,ia,ba,qa){ba[qa]=Z[ia]*Yb;ba[qa+1]=Z[ia+1]*Yb;ba[qa+2]=Z[ia+2]}function ja(Z,ia,ba,qa){ba[qa]=Z[ia]*Sb;ba[qa+1]=Z[ia+1]*Sb;ba[qa+2]=Z[ia+2]}function na(Z,ia,ba,qa){la(Z,ia,ba,qa);aa(ba,qa,ba,qa)}function ra(Z,ia,ba,qa,Ca){Ca+=Z[ia+2];const Da=Hb*Z[ia+1];Z=Hb*Z[ia];ia=Math.cos(Da);ba[qa++]=
Math.cos(Z)*ia*Ca;ba[qa++]=Math.sin(Z)*ia*Ca;ba[qa]=Math.sin(Da)*Ca}function Y(Z,ia,ba,qa){ra(Z,ia,ba,qa,S.moon.radius)}function da(Z,ia,ba,qa){ra(Z,ia,ba,qa,S.mars.radius)}function pa(Z,ia,ba,qa){ra(Z,ia,ba,qa,S.earth.radius)}function wa(Z,ia,ba,qa,Ca){var Da=Z[ia];const Na=Z[ia+1];ia=Z[ia+2];Z=Math.sqrt(Da*Da+Na*Na+ia*ia);ia=F.asinClamped(ia/(0===Z?1:Z));Da=Math.atan2(Na,Da);ba[qa++]=Rb*Da;ba[qa++]=Rb*ia;ba[qa]=Z-Ca}function Ba(Z,ia,ba,qa){wa(Z,ia,ba,qa,S.moon.radius)}function La(Z,ia,ba,qa){wa(Z,
ia,ba,qa,S.mars.radius)}function Ja(Z,ia,ba,qa){wa(Z,ia,ba,qa,S.earth.radius)}function Pa(Z,ia,ba,qa){Ja(Z,ia,ba,qa);ea(ba,qa,ba,qa)}function Qa(Z,ia,ba,qa){Ja(Z,ia,ba,qa);Ga(ba,qa,ba,qa)}function Ga(Z,ia,ba,qa){var Ca=S.earth;const Da=Hb*Z[ia];var Na=Hb*Z[ia+1];Z=Z[ia+2];ia=Math.sin(Na);Na=Math.cos(Na);const Va=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ia*ia);ba[qa++]=(Va+Z)*Na*Math.cos(Da);ba[qa++]=(Va+Z)*Na*Math.sin(Da);ba[qa++]=(Va*(1-Ca.eccentricitySquared)+Z)*ia}function Ra(Z,ia,ba,qa){var Ca=
B.earthEllipsoidConstants,Da=Z[ia],Na=Z[ia+1];Z=Z[ia+2];let Va;ia=Math.abs(Z);var mb=Da*Da+Na*Na;var kb=Math.sqrt(mb);var hb=mb+Z*Z;var xb=Math.sqrt(hb);Da=Math.atan2(Na,Da);var Ib=Z*Z/hb;hb=mb/hb;Na=Ca.a2/xb;mb=Ca.a3-Ca.a4/xb;.3<hb?(Ib=ia/xb*(1+hb*(Ca.a1+Na+Ib*mb)/xb),xb=Math.asin(Ib),Na=Ib*Ib,hb=Math.sqrt(1-Na)):(hb=kb/xb*(1-Ib*(Ca.a5-Na-hb*mb)/xb),xb=Math.acos(hb),Na=1-hb*hb,Ib=Math.sqrt(Na));Va=1-S.earth.eccentricitySquared*Na;Na=S.earth.radius/Math.sqrt(Va);Ca=Ca.a6*Na;Na=kb-Na*hb;mb=ia-Ca*Ib;
ia=hb*Na+Ib*mb;kb=hb*mb-Ib*Na;Ca=kb/(Ca/Va+ia);xb+=Ca;0>Z&&(xb=-xb);ba[qa++]=Rb*Da;ba[qa++]=Rb*xb;ba[qa]=ia+kb*Ca/2}function xa(Z,ia,ba,qa){Ra(Z,ia,ba,qa);pa(ba,qa,ba,qa)}function vb(Z,ia,ba,qa){Ra(Z,ia,ba,qa);ea(ba,qa,ba,qa)}function ub(Z,ia,ba=f()){return r.isNone(Z)||r.isNone(ia)?null:qb(Z,ia,ba).projector}function qb(Z,ia,ba){if(r.isNone(Z)||r.isNone(ia)||ba.source.spatialReference===Z&&ba.dest.spatialReference===ia)return ba;const qa=H(Z,ba.source),Ca=H(ia,ba.dest);qa===oa.UNKNOWN&&Ca===oa.UNKNOWN?
q.equals(Z,ia)?ba.projector=fa:ba.projector=null:ba.projector=zb[qa][Ca];return ba}function f(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},projector:fa}}let gb=null,db=null,Gb=null,Pb={};const nb=new h.SimpleObservable;let Wb=function(Z){function ia(){return Z.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}O._inheritsLoose(ia,Z);
return ia}(N);var oa;(function(Z){Z[Z.UNKNOWN=0]="UNKNOWN";Z[Z.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Z[Z.WGS84=2]="WGS84";Z[Z.WEB_MERCATOR=3]="WEB_MERCATOR";Z[Z.WGS84_ECEF=4]="WGS84_ECEF";Z[Z.CGCS2000=5]="CGCS2000";Z[Z.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";Z[Z.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Z[Z.GCSMARS2000=8]="GCSMARS2000";Z[Z.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";Z[Z.GCSMOON2000=10]="GCSMOON2000";Z[Z.LON_LAT=11]="LON_LAT";Z[Z.PLATE_CARREE=12]="PLATE_CARREE"})(oa||
(oa={}));const Yb=S.earth.radius*Math.PI/180,Sb=180/(S.earth.radius*Math.PI),zb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:fa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ea,[oa.PLATE_CARREE]:aa,[oa.WGS84]:fa,[oa.WGS84_ECEF]:Ga},[oa.CGCS2000]:{[oa.CGCS2000]:fa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:fa,
[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:aa,[oa.WGS84]:null,[oa.WGS84_ECEF]:Ga},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:fa,[oa.GCSMOON2000]:null,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:da,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,
[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:fa,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:Y,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:la,[oa.WGS84_COMPARABLE_LON_LAT]:la,[oa.SPHERICAL_ECEF]:va,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:fa,[oa.PLATE_CARREE]:na,[oa.WGS84]:la,[oa.WGS84_ECEF]:R},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Ra,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ra,[oa.WGS84_COMPARABLE_LON_LAT]:Ra,[oa.SPHERICAL_ECEF]:xa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:vb,[oa.PLATE_CARREE]:function(Z,ia,ba,qa){Ra(Z,ia,ba,qa);aa(ba,qa,ba,qa)},[oa.WGS84]:Ra,[oa.WGS84_ECEF]:fa},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ja,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,
[oa.LON_LAT]:Ja,[oa.WGS84_COMPARABLE_LON_LAT]:Ja,[oa.SPHERICAL_ECEF]:fa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Pa,[oa.PLATE_CARREE]:function(Z,ia,ba,qa){Ja(Z,ia,ba,qa);aa(ba,qa,ba,qa)},[oa.WGS84]:Ja,[oa.WGS84_ECEF]:Qa},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:La,[oa.GCSMOON2000]:null,[oa.LON_LAT]:La,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:fa,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ba,[oa.LON_LAT]:Ba,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:fa,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,
[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:fa,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:fa,[oa.GCSMARS2000]:fa,[oa.GCSMOON2000]:fa,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:fa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:da,[oa.SPHERICAL_MOON_PCPF]:Y,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ea,[oa.PLATE_CARREE]:aa,[oa.WGS84]:fa,[oa.WGS84_ECEF]:Ga},
[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:fa,[oa.WGS84_COMPARABLE_LON_LAT]:fa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:aa,[oa.WGS84]:fa,[oa.WGS84_ECEF]:Ga},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ja,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ja,[oa.WGS84_COMPARABLE_LON_LAT]:ja,[oa.SPHERICAL_ECEF]:function(Z,ia,ba,qa){ja(Z,ia,ba,
qa);pa(ba,qa,ba,qa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(Z,ia,ba,qa){ja(Z,ia,ba,qa);ea(ba,qa,ba,qa)},[oa.PLATE_CARREE]:fa,[oa.WGS84]:ja,[oa.WGS84_ECEF]:function(Z,ia,ba,qa){ja(Z,ia,ba,qa);Ga(ba,qa,ba,qa)}}},Kb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Zb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Xb=f(),kc=f(),Hb=F.deg2rad(1),Rb=F.rad2deg(1),fb=y.create(),Ab=y.create(),Bb=y.create(),Ya=y.create(),hc=y.create();
b.canProjectToWGS84ComparableLonLat=function(Z){if(r.isNone(Z))return!1;Z=H(Z,Kb);return!!zb[Z][oa.WGS84_COMPARABLE_LON_LAT]};b.canProjectWithoutEngine=X;b.computeENUToSphericalPCPFLocalRotation=lb;b.computeSphericalPCPFToENULocalRotation=l;b.computeTranslationToOriginAndRotation=function(Z,ia,ba,qa){if(r.isNone(Z)||r.isNone(qa))return!1;var Ca=H(Z,Kb),Da=H(qa,Zb);if(Ca===Da&&Da!==oa.SPHERICAL_ECEF&&Da!==oa.SPHERICAL_MARS_PCPF&&Da!==oa.SPHERICAL_MOON_PCPF&&(Ca!==oa.UNKNOWN||q.equals(Z,qa)))return A.fromTranslation(ba,
ia),!0;if(Da===oa.SPHERICAL_ECEF||Da===oa.SPHERICAL_MARS_PCPF||Da===oa.SPHERICAL_MOON_PCPF){Ca=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(r.isNone(Ca)||r.isNone(Da))return!1;Ca(ia,0,Ab,0);Da(Ab,0,Bb,0);lb(Hb*Ab[0],Hb*Ab[1],ba);ba[12]=Bb[0];ba[13]=Bb[1];ba[14]=Bb[2];return!0}if((Da===oa.WEB_MERCATOR||Da===oa.PLATE_CARREE)&&(Ca===oa.WGS84||Ca===oa.CGCS2000&&Da===oa.PLATE_CARREE||Ca===oa.SPHERICAL_ECEF||Ca===oa.WEB_MERCATOR)){Z=zb[Ca][oa.LON_LAT];Da=zb[oa.LON_LAT][Da];if(r.isNone(Z)||r.isNone(Da))return!1;
Z(ia,0,Ab,0);Da(Ab,0,Bb,0);Ca===oa.SPHERICAL_ECEF?l(Hb*Ab[0],Hb*Ab[1],ba):A.identity(ba);ba[12]=Bb[0];ba[13]=Bb[1];ba[14]=Bb[2];return!0}return!1};b.getProjectorName=function(Z,ia){switch(ub(Z,ia,Xb)){case fa:return"copy3";case pa:return"wgs84ToSphericalECEF";case ea:return"wgs84ToWebMercator";case aa:return"wgs84ToPlateCarree";case Ga:return"wgs84ToWGS84ECEF";case la:return"webMercatorToWGS84";case va:return"webMercatorToSphericalECEF";case R:return"webMercatorToWGS84ECEF";case na:return"webMercatorToPlateCarree";
case Ra:return"wgs84ECEFToWGS84";case xa:return"wgs84ECEFToSphericalECEF";case vb:return"wgs84ECEFToWebMercator";case Ja:return"sphericalECEFToWGS84";case Pa:return"sphericalECEFToWebMercator";case La:return"sphericalMarsPCPFToMars2000";case Ba:return"sphericalMoonPCPFToMoon2000";case Qa:return"sphericalECEFToWGS84ECEF";case da:return"mars2000ToSphericalPCPF";case Y:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=v;b.getTransformations=function(Z,ia,ba=null){if(r.isNone(gb)||
r.isNone(db))throw new Wb;Z=gb._getTransformationBySuitability(db,Z,ia,ba,ba?.spatialReference);if(null!==Z){ia=[];for(const qa of Z)ia.push(z.fromGE(qa));return ia}return[]};b.initializeProjection=function(Z,ia,ba,qa){return ka.apply(this,arguments)};b.isLoaded=p;b.load=D;b.localLinearScaleFactors=function(Z,ia,ba,qa){if(r.isNone(ia)||r.isNone(qa))return!1;const Ca=H(ia,Kb);var Da=H(qa,Zb);if(Ca===Da&&Ca!==oa.UNKNOWN||q.equals(ia,qa))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(Ca===oa.SPHERICAL_ECEF){ia=
Q.length(Z);Z=ia/Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);ia/=S.earth.radius;if(Da===oa.WEB_MERCATOR)return ba[0]=Z*ia,ba[1]=Z*ia,ba[2]=1,!0;if(Da===oa.WGS84||Da===oa.CGCS2000)return Da=Sb,ba[0]=Da*Z*ia,ba[1]=Da*ia,ba[2]=1,!0}else if(Ca===oa.PLATE_CARREE){if(Da===oa.WGS84||Da===oa.CGCS2000)return ba[0]=Sb,ba[1]=Sb,ba[2]=1,!0;if(Da===oa.WEB_MERCATOR)return Da=Z[1]/S.earth.radius,ba[0]=1,ba[1]=1/Math.cos(Da),ba[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(Z,ia,ba,qa){const Ca=Math.cos(ba);Z[0]=Math.cos(ia)*
Ca*qa;Z[1]=Math.sin(ia)*Ca*qa;Z[2]=Math.sin(ba)*qa};b.lonLatToWebMercatorComparable=W;b.project=I;b.projectBoundingRect=function(Z,ia,ba,qa){if(null==Z)return!1;if(q.equals(ia,qa))return U.copy(ba,Z),!0;fb[0]=Z[0];fb[1]=Z[1];fb[2]=0;if(!Ta(fb,ia,0,fb,qa,0,1))return!1;ba[0]=fb[0];ba[1]=fb[1];fb[0]=Z[2];fb[1]=Z[3];fb[2]=0;if(!Ta(fb,ia,0,fb,qa,0,1))return!1;ba[2]=fb[0];ba[3]=fb[1];return!0};b.projectBoundingSphere=function(Z,ia,ba,qa){if(r.isNone(ia)||r.isNone(qa))return!1;ia=qb(ia,qa,kc);if(ia.projector===
fa)return ba[0]=Z[0],ba[1]=Z[1],ba[2]=Z[2],ba[3]=Z[3],!0;if(r.isNone(ia.projector))return!1;const {source:Ca,dest:Da}=ia;if(Da.spatialReferenceId===oa.WEB_MERCATOR){ia=zb[Ca.spatialReferenceId][oa.WGS84];if(r.isNone(ia))return!1;ia(Z,0,Ab,0);ea(Ab,0,ba,0);ba[3]=ib(Ab[1],Z[2],Z[3],S.earth.radius);return!0}if(Ca.spatialReferenceId!==oa.WGS84&&Ca.spatialReferenceId!==oa.CGCS2000||Da.spatialReferenceId!==oa.PLATE_CARREE)ia.projector(Z,0,ba,0),ba[3]=Z[3]*(Ca.metersPerUnit??1)/(Da.metersPerUnit??1);else{qa=
zb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Na=Z[3];r.isSome(zb[Ca.spatialReferenceId][oa.SPHERICAL_ECEF])&&r.isSome(qa)&&(Na=ib(Z[1],Z[2],Z[3],S.earth.radius));ia.projector(Z,0,ba,0);ba[3]=Na}return!0};b.projectBuffer=Ta;b.projectDirection=function(Z,ia,ba,qa,Ca){Q.copy(Ya,Z);Q.add(hc,Z,ia);Sa(Ya,ba,Ya,Ca);Sa(hc,ba,hc,Ca);Q.subtract(qa,hc,Ya);Q.normalize(qa,qa)};b.projectExtent=function(Z,ia,ba=ia.spatialReference,qa=0){return r.isSome(Z.spatialReference)&&r.isSome(ba)&&r.isSome(Ua(Z,Z.spatialReference,
ia,ba,qa))};b.projectMany=K;b.projectMultipoint=function(Z,ia,ba=ia.spatialReference,qa=0){return r.isSome(Z.spatialReference)&&r.isSome(ba)&&r.isSome(Ea(Z,Z.spatialReference,ia,ba,qa))};b.projectOrLoad=function(Z,ia){Z=P([Z],ia);return r.isSome(Z.pending)?{pending:Z.pending,geometry:null}:r.isSome(Z.geometries)?{pending:null,geometry:Z.geometries[0]}:{pending:null,geometry:null}};b.projectOrLoadMany=P;b.projectPoint=function(Z,ia,ba=ia.spatialReference,qa=0){return r.isSome(ba)&&r.isSome(Z.spatialReference)&&
r.isSome(za(Z,Z.spatialReference,ia,ba,qa))};b.projectPointToVector=function(Z,ia,ba,qa=0){Ya[0]=Z.x;Ya[1]=Z.y;const Ca=Z.z;Ya[2]=void 0!==Ca?Ca:qa;return Ta(Ya,Z.spatialReference,0,ia,ba,0,1)};b.projectPointToWGS84ComparableLonLat=function(Z,ia){Ya[0]=Z.x;Ya[1]=Z.y;const ba=Z.z;Ya[2]=void 0!==ba?ba:0;return $a(Ya,Z.spatialReference,ia)};b.projectPolygon=function(Z,ia,ba=ia.spatialReference,qa=0){return r.isSome(Z.spatialReference)&&r.isSome(ba)&&r.isSome(Fa(Z,Z.spatialReference,ia,ba,qa))};b.projectPolygonToWGS84ComparableLonLat=
function({hasZ:Z,spatialReference:ia,rings:ba},qa,Ca=0){ia=H(ia,Kb);ia=zb[ia][oa.WGS84_COMPARABLE_LON_LAT];if(r.isNone(ia))return!1;Z=Z?Da=>Da:Da=>Q.set(Ya,Da[0],Da[1],Ca);for(const Da of ba){ba=[];for(const Na of Da){const Va=[0,0,Ca];ia(Z(Na),0,Va,0);ba.push(Va)}qa.push(ba)}return!0};b.projectPolyline=function(Z,ia,ba=ia.spatialReference,qa=0){return r.isSome(Z.spatialReference)&&r.isSome(ba)&&r.isSome(Ha(Z,Z.spatialReference,ia,ba,qa))};b.projectPolylineToWGS84ComparableLonLat=function({hasZ:Z,
spatialReference:ia,paths:ba},qa,Ca=0){ia=H(ia,Kb);ia=zb[ia][oa.WGS84_COMPARABLE_LON_LAT];if(r.isNone(ia))return!1;Z=Z?Da=>Da:Da=>Q.set(Ya,Da[0],Da[1],Ca);for(const Da of ba){ba=[];for(const Na of Da){const Va=[0,0,Ca];ia(Z(Na),0,Va,0);ba.push(Va)}qa.push(ba)}return!0};b.projectVectorToDehydratedPoint=function(Z,ia,ba){return Ta(Z,ia,0,Ya,ba.spatialReference,0,1)?(ba.x=Ya[0],ba.y=Ya[1],ba.z=Ya[2],ba):null};b.projectVectorToPoint=function(Z,ia,ba){if(r.isNone(ia)||r.isNone(ba))return null;const qa=
new u({spatialReference:ba});return Ta(Z,ia,0,Ya,ba,0,1)?(qa.x=Ya[0],qa.y=Ya[1],qa.z=Ya[2],qa):null};b.projectVectorToVector=Sa;b.projectVectorToWGS84ComparableLonLat=function(Z,ia,ba){return $a(Z,ia,ba)};b.projectWithoutEngine=ta;b.projectXYZToVector=Oa;b.sphericalPCPFtoLonLatElevation=wa;b.test={get loadPromise(){return Gb}};b.tryProjectWithZConversion=G;b.unload=function(){Gb=db=gb=null;Pb={}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../ObservableBase"],function(c,b,O){O=function(N){function F(){return N.apply(this,arguments)||this}b._inheritsLoose(F,N);F.prototype.notify=function(){var r=this._observers;if(r&&0<r.length){r=r.slice();for(const C of r)C.onInvalidated(),C.onCommitted()}};return F}(O.ObservableBase);c.SimpleObservable=O;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(c,b,O){function N(l,
H){l[0]=H[0];l[1]=H[1];l[2]=H[2];l[3]=H[3];l[4]=H[4];l[5]=H[5];l[6]=H[6];l[7]=H[7];l[8]=H[8];l[9]=H[9];l[10]=H[10];l[11]=H[11];l[12]=H[12];l[13]=H[13];l[14]=H[14];l[15]=H[15];return l}function F(l,H,fa,la,va,R,W,ea,aa,ja,na,ra,Y,da,pa,wa,Ba){l[0]=H;l[1]=fa;l[2]=la;l[3]=va;l[4]=R;l[5]=W;l[6]=ea;l[7]=aa;l[8]=ja;l[9]=na;l[10]=ra;l[11]=Y;l[12]=da;l[13]=pa;l[14]=wa;l[15]=Ba;return l}function r(l){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=
0;l[15]=1;return l}function C(l,H){if(l===H){const fa=H[1],la=H[2],va=H[3],R=H[6],W=H[7],ea=H[11];l[1]=H[4];l[2]=H[8];l[3]=H[12];l[4]=fa;l[6]=H[9];l[7]=H[13];l[8]=la;l[9]=R;l[11]=H[14];l[12]=va;l[13]=W;l[14]=ea}else l[0]=H[0],l[1]=H[4],l[2]=H[8],l[3]=H[12],l[4]=H[1],l[5]=H[5],l[6]=H[9],l[7]=H[13],l[8]=H[2],l[9]=H[6],l[10]=H[10],l[11]=H[14],l[12]=H[3],l[13]=H[7],l[14]=H[11],l[15]=H[15];return l}function w(l,H){k(l,H)||r(l);return l}function k(l,H){const fa=H[0],la=H[1],va=H[2],R=H[3],W=H[4],ea=H[5],
aa=H[6],ja=H[7],na=H[8],ra=H[9],Y=H[10],da=H[11],pa=H[12],wa=H[13],Ba=H[14];H=H[15];const La=fa*ea-la*W,Ja=fa*aa-va*W,Pa=fa*ja-R*W,Qa=la*aa-va*ea,Ga=la*ja-R*ea,Ra=va*ja-R*aa,xa=na*wa-ra*pa,vb=na*Ba-Y*pa,ub=na*H-da*pa,qb=ra*Ba-Y*wa,f=ra*H-da*wa,gb=Y*H-da*Ba;let db=La*gb-Ja*f+Pa*qb+Qa*ub-Ga*vb+Ra*xa;if(!db)return null;db=1/db;l[0]=(ea*gb-aa*f+ja*qb)*db;l[1]=(va*f-la*gb-R*qb)*db;l[2]=(wa*Ra-Ba*Ga+H*Qa)*db;l[3]=(Y*Ga-ra*Ra-da*Qa)*db;l[4]=(aa*ub-W*gb-ja*vb)*db;l[5]=(fa*gb-va*ub+R*vb)*db;l[6]=(Ba*Pa-pa*
Ra-H*Ja)*db;l[7]=(na*Ra-Y*Pa+da*Ja)*db;l[8]=(W*f-ea*ub+ja*xa)*db;l[9]=(la*ub-fa*f-R*xa)*db;l[10]=(pa*Ga-wa*Pa+H*La)*db;l[11]=(ra*Pa-na*Ga-da*La)*db;l[12]=(ea*vb-W*qb-aa*xa)*db;l[13]=(fa*qb-la*vb+va*xa)*db;l[14]=(wa*Ja-pa*Qa-Ba*La)*db;l[15]=(na*Qa-ra*Ja+Y*La)*db;return l}function h(l,H){const fa=H[0],la=H[1],va=H[2],R=H[3],W=H[4],ea=H[5],aa=H[6],ja=H[7],na=H[8],ra=H[9],Y=H[10],da=H[11],pa=H[12],wa=H[13],Ba=H[14];H=H[15];l[0]=ea*(Y*H-da*Ba)-ra*(aa*H-ja*Ba)+wa*(aa*da-ja*Y);l[1]=-(la*(Y*H-da*Ba)-ra*(va*
H-R*Ba)+wa*(va*da-R*Y));l[2]=la*(aa*H-ja*Ba)-ea*(va*H-R*Ba)+wa*(va*ja-R*aa);l[3]=-(la*(aa*da-ja*Y)-ea*(va*da-R*Y)+ra*(va*ja-R*aa));l[4]=-(W*(Y*H-da*Ba)-na*(aa*H-ja*Ba)+pa*(aa*da-ja*Y));l[5]=fa*(Y*H-da*Ba)-na*(va*H-R*Ba)+pa*(va*da-R*Y);l[6]=-(fa*(aa*H-ja*Ba)-W*(va*H-R*Ba)+pa*(va*ja-R*aa));l[7]=fa*(aa*da-ja*Y)-W*(va*da-R*Y)+na*(va*ja-R*aa);l[8]=W*(ra*H-da*wa)-na*(ea*H-ja*wa)+pa*(ea*da-ja*ra);l[9]=-(fa*(ra*H-da*wa)-na*(la*H-R*wa)+pa*(la*da-R*ra));l[10]=fa*(ea*H-ja*wa)-W*(la*H-R*wa)+pa*(la*ja-R*ea);l[11]=
-(fa*(ea*da-ja*ra)-W*(la*da-R*ra)+na*(la*ja-R*ea));l[12]=-(W*(ra*Ba-Y*wa)-na*(ea*Ba-aa*wa)+pa*(ea*Y-aa*ra));l[13]=fa*(ra*Ba-Y*wa)-na*(la*Ba-va*wa)+pa*(la*Y-va*ra);l[14]=-(fa*(ea*Ba-aa*wa)-W*(la*Ba-va*wa)+pa*(la*aa-va*ea));l[15]=fa*(ea*Y-aa*ra)-W*(la*Y-va*ra)+na*(la*aa-va*ea);return l}function A(l){const H=l[0],fa=l[1],la=l[2],va=l[3],R=l[4],W=l[5],ea=l[6],aa=l[7],ja=l[8],na=l[9],ra=l[10],Y=l[11],da=l[12],pa=l[13],wa=l[14];l=l[15];return(H*W-fa*R)*(ra*l-Y*wa)-(H*ea-la*R)*(na*l-Y*pa)+(H*aa-va*R)*(na*
wa-ra*pa)+(fa*ea-la*W)*(ja*l-Y*da)-(fa*aa-va*W)*(ja*wa-ra*da)+(la*aa-va*ea)*(ja*pa-na*da)}function Q(l,H,fa){const la=H[0],va=H[1],R=H[2],W=H[3],ea=H[4],aa=H[5],ja=H[6],na=H[7],ra=H[8],Y=H[9],da=H[10],pa=H[11],wa=H[12],Ba=H[13],La=H[14];H=H[15];let Ja=fa[0],Pa=fa[1],Qa=fa[2],Ga=fa[3];l[0]=Ja*la+Pa*ea+Qa*ra+Ga*wa;l[1]=Ja*va+Pa*aa+Qa*Y+Ga*Ba;l[2]=Ja*R+Pa*ja+Qa*da+Ga*La;l[3]=Ja*W+Pa*na+Qa*pa+Ga*H;Ja=fa[4];Pa=fa[5];Qa=fa[6];Ga=fa[7];l[4]=Ja*la+Pa*ea+Qa*ra+Ga*wa;l[5]=Ja*va+Pa*aa+Qa*Y+Ga*Ba;l[6]=Ja*R+Pa*
ja+Qa*da+Ga*La;l[7]=Ja*W+Pa*na+Qa*pa+Ga*H;Ja=fa[8];Pa=fa[9];Qa=fa[10];Ga=fa[11];l[8]=Ja*la+Pa*ea+Qa*ra+Ga*wa;l[9]=Ja*va+Pa*aa+Qa*Y+Ga*Ba;l[10]=Ja*R+Pa*ja+Qa*da+Ga*La;l[11]=Ja*W+Pa*na+Qa*pa+Ga*H;Ja=fa[12];Pa=fa[13];Qa=fa[14];Ga=fa[15];l[12]=Ja*la+Pa*ea+Qa*ra+Ga*wa;l[13]=Ja*va+Pa*aa+Qa*Y+Ga*Ba;l[14]=Ja*R+Pa*ja+Qa*da+Ga*La;l[15]=Ja*W+Pa*na+Qa*pa+Ga*H;return l}function y(l,H,fa){const la=fa[0],va=fa[1];fa=fa[2];if(H===l)l[12]=H[0]*la+H[4]*va+H[8]*fa+H[12],l[13]=H[1]*la+H[5]*va+H[9]*fa+H[13],l[14]=H[2]*
la+H[6]*va+H[10]*fa+H[14],l[15]=H[3]*la+H[7]*va+H[11]*fa+H[15];else{const R=H[0],W=H[1],ea=H[2],aa=H[3],ja=H[4],na=H[5],ra=H[6],Y=H[7],da=H[8],pa=H[9],wa=H[10],Ba=H[11];l[0]=R;l[1]=W;l[2]=ea;l[3]=aa;l[4]=ja;l[5]=na;l[6]=ra;l[7]=Y;l[8]=da;l[9]=pa;l[10]=wa;l[11]=Ba;l[12]=R*la+ja*va+da*fa+H[12];l[13]=W*la+na*va+pa*fa+H[13];l[14]=ea*la+ra*va+wa*fa+H[14];l[15]=aa*la+Y*va+Ba*fa+H[15]}return l}function g(l,H,fa){const la=fa[0],va=fa[1];fa=fa[2];l[0]=H[0]*la;l[1]=H[1]*la;l[2]=H[2]*la;l[3]=H[3]*la;l[4]=H[4]*
va;l[5]=H[5]*va;l[6]=H[6]*va;l[7]=H[7]*va;l[8]=H[8]*fa;l[9]=H[9]*fa;l[10]=H[10]*fa;l[11]=H[11]*fa;l[12]=H[12];l[13]=H[13];l[14]=H[14];l[15]=H[15];return l}function x(l,H,fa,la){let va=la[0],R=la[1];la=la[2];let W=Math.sqrt(va*va+R*R+la*la);var ea=void 0,aa=void 0;let ja=void 0,na=void 0,ra=void 0,Y=void 0,da=void 0,pa=void 0,wa=void 0,Ba=void 0,La=void 0,Ja=void 0,Pa=void 0,Qa=void 0,Ga=void 0,Ra=void 0,xa=void 0,vb=void 0,ub=void 0,qb=void 0,f=void 0,gb=void 0;aa=ea=void 0;if(W<O.getEpsilon())return null;
W=1/W;va*=W;R*=W;la*=W;ea=Math.sin(fa);aa=Math.cos(fa);ja=1-aa;na=H[0];ra=H[1];Y=H[2];da=H[3];pa=H[4];wa=H[5];Ba=H[6];La=H[7];Ja=H[8];Pa=H[9];Qa=H[10];Ga=H[11];Ra=va*va*ja+aa;xa=R*va*ja+la*ea;vb=la*va*ja-R*ea;ub=va*R*ja-la*ea;qb=R*R*ja+aa;f=la*R*ja+va*ea;gb=va*la*ja+R*ea;ea=R*la*ja-va*ea;aa=la*la*ja+aa;l[0]=na*Ra+pa*xa+Ja*vb;l[1]=ra*Ra+wa*xa+Pa*vb;l[2]=Y*Ra+Ba*xa+Qa*vb;l[3]=da*Ra+La*xa+Ga*vb;l[4]=na*ub+pa*qb+Ja*f;l[5]=ra*ub+wa*qb+Pa*f;l[6]=Y*ub+Ba*qb+Qa*f;l[7]=da*ub+La*qb+Ga*f;l[8]=na*gb+pa*ea+Ja*
aa;l[9]=ra*gb+wa*ea+Pa*aa;l[10]=Y*gb+Ba*ea+Qa*aa;l[11]=da*gb+La*ea+Ga*aa;H!==l&&(l[12]=H[12],l[13]=H[13],l[14]=H[14],l[15]=H[15]);return l}function e(l,H,fa){const la=Math.sin(fa);fa=Math.cos(fa);const va=H[4],R=H[5],W=H[6],ea=H[7],aa=H[8],ja=H[9],na=H[10],ra=H[11];H!==l&&(l[0]=H[0],l[1]=H[1],l[2]=H[2],l[3]=H[3],l[12]=H[12],l[13]=H[13],l[14]=H[14],l[15]=H[15]);l[4]=va*fa+aa*la;l[5]=R*fa+ja*la;l[6]=W*fa+na*la;l[7]=ea*fa+ra*la;l[8]=aa*fa-va*la;l[9]=ja*fa-R*la;l[10]=na*fa-W*la;l[11]=ra*fa-ea*la;return l}
function n(l,H,fa){const la=Math.sin(fa);fa=Math.cos(fa);const va=H[0],R=H[1],W=H[2],ea=H[3],aa=H[8],ja=H[9],na=H[10],ra=H[11];H!==l&&(l[4]=H[4],l[5]=H[5],l[6]=H[6],l[7]=H[7],l[12]=H[12],l[13]=H[13],l[14]=H[14],l[15]=H[15]);l[0]=va*fa-aa*la;l[1]=R*fa-ja*la;l[2]=W*fa-na*la;l[3]=ea*fa-ra*la;l[8]=va*la+aa*fa;l[9]=R*la+ja*fa;l[10]=W*la+na*fa;l[11]=ea*la+ra*fa;return l}function u(l,H,fa){const la=Math.sin(fa);fa=Math.cos(fa);const va=H[0],R=H[1],W=H[2],ea=H[3],aa=H[4],ja=H[5],na=H[6],ra=H[7];H!==l&&(l[8]=
H[8],l[9]=H[9],l[10]=H[10],l[11]=H[11],l[12]=H[12],l[13]=H[13],l[14]=H[14],l[15]=H[15]);l[0]=va*fa+aa*la;l[1]=R*fa+ja*la;l[2]=W*fa+na*la;l[3]=ea*fa+ra*la;l[4]=aa*fa-va*la;l[5]=ja*fa-R*la;l[6]=na*fa-W*la;l[7]=ra*fa-ea*la;return l}function M(l,H){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=H[0];l[13]=H[1];l[14]=H[2];l[15]=1;return l}function L(l,H){l[0]=H[0];l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=H[1];l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=H[2];l[11]=0;l[12]=0;l[13]=
0;l[14]=0;l[15]=1;return l}function U(l,H,fa){if(0===H)return r(l);let la=fa[0],va=fa[1];fa=fa[2];let R=Math.sqrt(la*la+va*va+fa*fa),W=void 0,ea=void 0,aa=void 0;if(R<O.getEpsilon())return null;R=1/R;la*=R;va*=R;fa*=R;W=Math.sin(H);ea=Math.cos(H);aa=1-ea;l[0]=la*la*aa+ea;l[1]=va*la*aa+fa*W;l[2]=fa*la*aa-va*W;l[3]=0;l[4]=la*va*aa-fa*W;l[5]=va*va*aa+ea;l[6]=fa*va*aa+la*W;l[7]=0;l[8]=la*fa*aa+va*W;l[9]=va*fa*aa-la*W;l[10]=fa*fa*aa+ea;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function S(l,H){const fa=
Math.sin(H);H=Math.cos(H);l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=H;l[6]=fa;l[7]=0;l[8]=0;l[9]=-fa;l[10]=H;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function B(l,H){const fa=Math.sin(H);H=Math.cos(H);l[0]=H;l[1]=0;l[2]=-fa;l[3]=0;l[4]=0;l[5]=1;l[6]=0;l[7]=0;l[8]=fa;l[9]=0;l[10]=H;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function z(l,H){const fa=Math.sin(H);H=Math.cos(H);l[0]=H;l[1]=fa;l[2]=0;l[3]=0;l[4]=-fa;l[5]=H;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=1;l[11]=0;l[12]=0;l[13]=0;l[14]=0;
l[15]=1;return l}function q(l,H,fa){var la=H[0],va=H[1],R=H[2],W=H[3],ea=la+la,aa=va+va;const ja=R+R;H=la*ea;const na=la*aa;la*=ja;const ra=va*aa;va*=ja;R*=ja;ea*=W;aa*=W;W*=ja;l[0]=1-(ra+R);l[1]=na+W;l[2]=la-aa;l[3]=0;l[4]=na-W;l[5]=1-(H+R);l[6]=va+ea;l[7]=0;l[8]=la+aa;l[9]=va-ea;l[10]=1-(H+ra);l[11]=0;l[12]=fa[0];l[13]=fa[1];l[14]=fa[2];l[15]=1;return l}function E(l,H){const fa=lb,la=-H[0],va=-H[1],R=-H[2],W=H[3],ea=H[4],aa=H[5],ja=H[6],na=H[7],ra=la*la+va*va+R*R+W*W;0<ra?(fa[0]=2*(ea*W+na*la+aa*
R-ja*va)/ra,fa[1]=2*(aa*W+na*va+ja*la-ea*R)/ra,fa[2]=2*(ja*W+na*R+ea*va-aa*la)/ra):(fa[0]=2*(ea*W+na*la+aa*R-ja*va),fa[1]=2*(aa*W+na*va+ja*la-ea*R),fa[2]=2*(ja*W+na*R+ea*va-aa*la));q(l,H,fa);return l}function d(l,H){l[0]=H[12];l[1]=H[13];l[2]=H[14];return l}function p(l,H){const fa=H[0],la=H[1],va=H[2],R=H[4],W=H[5],ea=H[6],aa=H[8],ja=H[9];H=H[10];l[0]=Math.sqrt(fa*fa+la*la+va*va);l[1]=Math.sqrt(R*R+W*W+ea*ea);l[2]=Math.sqrt(aa*aa+ja*ja+H*H);return l}function D(l,H){const fa=H[0]+H[5]+H[10];let la=
0;0<fa?(la=2*Math.sqrt(fa+1),l[3]=.25*la,l[0]=(H[6]-H[9])/la,l[1]=(H[8]-H[2])/la,l[2]=(H[1]-H[4])/la):H[0]>H[5]&&H[0]>H[10]?(la=2*Math.sqrt(1+H[0]-H[5]-H[10]),l[3]=(H[6]-H[9])/la,l[0]=.25*la,l[1]=(H[1]+H[4])/la,l[2]=(H[8]+H[2])/la):H[5]>H[10]?(la=2*Math.sqrt(1+H[5]-H[0]-H[10]),l[3]=(H[8]-H[2])/la,l[0]=(H[1]+H[4])/la,l[1]=.25*la,l[2]=(H[6]+H[9])/la):(la=2*Math.sqrt(1+H[10]-H[0]-H[5]),l[3]=(H[1]-H[4])/la,l[0]=(H[8]+H[2])/la,l[1]=(H[6]+H[9])/la,l[2]=.25*la);return l}function I(l,H,fa,la){var va=H[0],
R=H[1],W=H[2],ea=H[3],aa=va+va,ja=R+R,na=W+W;H=va*aa;const ra=va*ja;va*=na;const Y=R*ja;R*=na;W*=na;aa*=ea;ja*=ea;ea*=na;na=la[0];const da=la[1];la=la[2];l[0]=(1-(Y+W))*na;l[1]=(ra+ea)*na;l[2]=(va-ja)*na;l[3]=0;l[4]=(ra-ea)*da;l[5]=(1-(H+W))*da;l[6]=(R+aa)*da;l[7]=0;l[8]=(va+ja)*la;l[9]=(R-aa)*la;l[10]=(1-(H+Y))*la;l[11]=0;l[12]=fa[0];l[13]=fa[1];l[14]=fa[2];l[15]=1;return l}function K(l,H,fa,la,va){var R=H[0],W=H[1],ea=H[2],aa=H[3],ja=R+R,na=W+W,ra=ea+ea;H=R*ja;var Y=R*na,da=R*ra;R=W*na;W*=ra;var pa=
ea*ra;ea=aa*ja;na*=aa;const wa=aa*ra;var Ba=la[0],La=la[1];ra=la[2];la=va[0];aa=va[1];va=va[2];ja=(1-(R+pa))*Ba;const Ja=(Y+wa)*Ba;Ba*=da-na;Y=(Y-wa)*La;pa=(1-(H+pa))*La;La*=W+ea;da=(da+na)*ra;W=(W-ea)*ra;H=(1-(H+R))*ra;l[0]=ja;l[1]=Ja;l[2]=Ba;l[3]=0;l[4]=Y;l[5]=pa;l[6]=La;l[7]=0;l[8]=da;l[9]=W;l[10]=H;l[11]=0;l[12]=fa[0]+la-(ja*la+Y*aa+da*va);l[13]=fa[1]+aa-(Ja*la+pa*aa+W*va);l[14]=fa[2]+va-(Ba*la+La*aa+H*va);l[15]=1;return l}function P(l,H){var fa=H[0],la=H[1],va=H[2];H=H[3];var R=fa+fa,W=la+la;
const ea=va+va;fa*=R;const aa=la*R;la*=W;const ja=va*R,na=va*W;va*=ea;R*=H;W*=H;H*=ea;l[0]=1-la-va;l[1]=aa+H;l[2]=ja-W;l[3]=0;l[4]=aa-H;l[5]=1-fa-va;l[6]=na+R;l[7]=0;l[8]=ja+W;l[9]=na-R;l[10]=1-fa-la;l[11]=0;l[12]=0;l[13]=0;l[14]=0;l[15]=1;return l}function v(l,H,fa,la,va,R,W){const ea=1/(fa-H),aa=1/(va-la),ja=1/(R-W);l[0]=2*R*ea;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=2*R*aa;l[6]=0;l[7]=0;l[8]=(fa+H)*ea;l[9]=(va+la)*aa;l[10]=(W+R)*ja;l[11]=-1;l[12]=0;l[13]=0;l[14]=W*R*2*ja;l[15]=0;return l}function G(l,
H,fa,la,va){H=1/Math.tan(H/2);let R=void 0;l[0]=H/fa;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=H;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[11]=-1;l[12]=0;l[13]=0;l[15]=0;null!=va&&Infinity!==va?(R=1/(la-va),l[10]=(va+la)*R,l[14]=2*va*la*R):(l[10]=-1,l[14]=-2*la);return l}function X(l,H,fa,la){const va=Math.tan(H.upDegrees*Math.PI/180),R=Math.tan(H.downDegrees*Math.PI/180),W=Math.tan(H.leftDegrees*Math.PI/180);H=Math.tan(H.rightDegrees*Math.PI/180);const ea=2/(W+H),aa=2/(va+R);l[0]=ea;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=
aa;l[6]=0;l[7]=0;l[8]=-((W-H)*ea*.5);l[9]=(va-R)*aa*.5;l[10]=la/(fa-la);l[11]=-1;l[12]=0;l[13]=0;l[14]=la*fa/(fa-la);l[15]=0;return l}function ka(l,H,fa,la,va,R,W){const ea=1/(H-fa),aa=1/(la-va),ja=1/(R-W);l[0]=-2*ea;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=-2*aa;l[6]=0;l[7]=0;l[8]=0;l[9]=0;l[10]=2*ja;l[11]=0;l[12]=(H+fa)*ea;l[13]=(va+la)*aa;l[14]=(W+R)*ja;l[15]=1;return l}function ta(l,H,fa,la){var va=void 0;let R=void 0;var W=void 0,ea=void 0;let aa=void 0,ja=void 0;var na=void 0,ra=void 0;let Y=void 0,
da=void 0;const pa=H[0],wa=H[1];H=H[2];W=la[0];ea=la[1];la=la[2];na=fa[0];ra=fa[1];fa=fa[2];va=O.getEpsilon();if(Math.abs(pa-na)<va&&Math.abs(wa-ra)<va&&Math.abs(H-fa)<va)return r(l);na=pa-na;ra=wa-ra;Y=H-fa;da=1/Math.sqrt(na*na+ra*ra+Y*Y);na*=da;ra*=da;Y*=da;va=ea*Y-la*ra;R=la*na-W*Y;W=W*ra-ea*na;(da=Math.sqrt(va*va+R*R+W*W))?(da=1/da,va*=da,R*=da,W*=da):W=R=va=0;ea=ra*W-Y*R;aa=Y*va-na*W;ja=na*R-ra*va;(da=Math.sqrt(ea*ea+aa*aa+ja*ja))?(da=1/da,ea*=da,aa*=da,ja*=da):ja=aa=ea=0;l[0]=va;l[1]=ea;l[2]=
na;l[3]=0;l[4]=R;l[5]=aa;l[6]=ra;l[7]=0;l[8]=W;l[9]=ja;l[10]=Y;l[11]=0;l[12]=-(va*pa+R*wa+W*H);l[13]=-(ea*pa+aa*wa+ja*H);l[14]=-(na*pa+ra*wa+Y*H);l[15]=1;return l}function za(l,H,fa,la){const va=H[0],R=H[1];H=H[2];var W=la[0];const ea=la[1];var aa=la[2];la=va-fa[0];let ja=R-fa[1];fa=H-fa[2];let na=la*la+ja*ja+fa*fa;0<na&&(na=1/Math.sqrt(na),la*=na,ja*=na,fa*=na);let ra=ea*fa-aa*ja;aa=aa*la-W*fa;W=W*ja-ea*la;na=ra*ra+aa*aa+W*W;0<na&&(na=1/Math.sqrt(na),ra*=na,aa*=na,W*=na);l[0]=ra;l[1]=aa;l[2]=W;l[3]=
0;l[4]=ja*W-fa*aa;l[5]=fa*ra-la*W;l[6]=la*aa-ja*ra;l[7]=0;l[8]=la;l[9]=ja;l[10]=fa;l[11]=0;l[12]=va;l[13]=R;l[14]=H;l[15]=1;return l}function Ea(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}function Ha(l){return Math.sqrt(l[0]**2+l[1]**2+l[2]**2+l[3]**2+l[4]**2+l[5]**2+l[6]**2+l[7]**2+l[8]**2+l[9]**2+l[10]**2+l[11]**2+l[12]**2+l[13]**2+l[14]**2+l[15]**2)}function Fa(l,
H,fa){l[0]=H[0]+fa[0];l[1]=H[1]+fa[1];l[2]=H[2]+fa[2];l[3]=H[3]+fa[3];l[4]=H[4]+fa[4];l[5]=H[5]+fa[5];l[6]=H[6]+fa[6];l[7]=H[7]+fa[7];l[8]=H[8]+fa[8];l[9]=H[9]+fa[9];l[10]=H[10]+fa[10];l[11]=H[11]+fa[11];l[12]=H[12]+fa[12];l[13]=H[13]+fa[13];l[14]=H[14]+fa[14];l[15]=H[15]+fa[15];return l}function Ua(l,H,fa){l[0]=H[0]-fa[0];l[1]=H[1]-fa[1];l[2]=H[2]-fa[2];l[3]=H[3]-fa[3];l[4]=H[4]-fa[4];l[5]=H[5]-fa[5];l[6]=H[6]-fa[6];l[7]=H[7]-fa[7];l[8]=H[8]-fa[8];l[9]=H[9]-fa[9];l[10]=H[10]-fa[10];l[11]=H[11]-fa[11];
l[12]=H[12]-fa[12];l[13]=H[13]-fa[13];l[14]=H[14]-fa[14];l[15]=H[15]-fa[15];return l}function Oa(l,H,fa){l[0]=H[0]*fa;l[1]=H[1]*fa;l[2]=H[2]*fa;l[3]=H[3]*fa;l[4]=H[4]*fa;l[5]=H[5]*fa;l[6]=H[6]*fa;l[7]=H[7]*fa;l[8]=H[8]*fa;l[9]=H[9]*fa;l[10]=H[10]*fa;l[11]=H[11]*fa;l[12]=H[12]*fa;l[13]=H[13]*fa;l[14]=H[14]*fa;l[15]=H[15]*fa;return l}function Sa(l,H,fa,la){l[0]=H[0]+fa[0]*la;l[1]=H[1]+fa[1]*la;l[2]=H[2]+fa[2]*la;l[3]=H[3]+fa[3]*la;l[4]=H[4]+fa[4]*la;l[5]=H[5]+fa[5]*la;l[6]=H[6]+fa[6]*la;l[7]=H[7]+fa[7]*
la;l[8]=H[8]+fa[8]*la;l[9]=H[9]+fa[9]*la;l[10]=H[10]+fa[10]*la;l[11]=H[11]+fa[11]*la;l[12]=H[12]+fa[12]*la;l[13]=H[13]+fa[13]*la;l[14]=H[14]+fa[14]*la;l[15]=H[15]+fa[15]*la;return l}function $a(l,H){return l[0]===H[0]&&l[1]===H[1]&&l[2]===H[2]&&l[3]===H[3]&&l[4]===H[4]&&l[5]===H[5]&&l[6]===H[6]&&l[7]===H[7]&&l[8]===H[8]&&l[9]===H[9]&&l[10]===H[10]&&l[11]===H[11]&&l[12]===H[12]&&l[13]===H[13]&&l[14]===H[14]&&l[15]===H[15]}function Ta(l,H){if(l===H)return!0;const fa=l[0],la=l[1],va=l[2],R=l[3],W=l[4],
ea=l[5],aa=l[6],ja=l[7],na=l[8],ra=l[9],Y=l[10],da=l[11],pa=l[12],wa=l[13],Ba=l[14];l=l[15];const La=H[0],Ja=H[1],Pa=H[2],Qa=H[3],Ga=H[4],Ra=H[5],xa=H[6],vb=H[7],ub=H[8],qb=H[9],f=H[10],gb=H[11],db=H[12],Gb=H[13],Pb=H[14];H=H[15];const nb=O.getEpsilon();return Math.abs(fa-La)<=nb*Math.max(1,Math.abs(fa),Math.abs(La))&&Math.abs(la-Ja)<=nb*Math.max(1,Math.abs(la),Math.abs(Ja))&&Math.abs(va-Pa)<=nb*Math.max(1,Math.abs(va),Math.abs(Pa))&&Math.abs(R-Qa)<=nb*Math.max(1,Math.abs(R),Math.abs(Qa))&&Math.abs(W-
Ga)<=nb*Math.max(1,Math.abs(W),Math.abs(Ga))&&Math.abs(ea-Ra)<=nb*Math.max(1,Math.abs(ea),Math.abs(Ra))&&Math.abs(aa-xa)<=nb*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ja-vb)<=nb*Math.max(1,Math.abs(ja),Math.abs(vb))&&Math.abs(na-ub)<=nb*Math.max(1,Math.abs(na),Math.abs(ub))&&Math.abs(ra-qb)<=nb*Math.max(1,Math.abs(ra),Math.abs(qb))&&Math.abs(Y-f)<=nb*Math.max(1,Math.abs(Y),Math.abs(f))&&Math.abs(da-gb)<=nb*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(pa-db)<=nb*Math.max(1,Math.abs(pa),Math.abs(db))&&
Math.abs(wa-Gb)<=nb*Math.max(1,Math.abs(wa),Math.abs(Gb))&&Math.abs(Ba-Pb)<=nb*Math.max(1,Math.abs(Ba),Math.abs(Pb))&&Math.abs(l-H)<=nb*Math.max(1,Math.abs(l),Math.abs(H))}function jb(l){const H=O.getEpsilon(),fa=l[0],la=l[1],va=l[2],R=l[4],W=l[5],ea=l[6],aa=l[8],ja=l[9];l=l[10];return Math.abs(1-(fa*fa+R*R+aa*aa))<=H&&Math.abs(1-(la*la+W*W+ja*ja))<=H&&Math.abs(1-(va*va+ea*ea+l*l))<=H}function ib(l){return 1===l[0]&&0===l[1]&&0===l[2]&&0===l[4]&&1===l[5]&&0===l[6]&&0===l[8]&&0===l[9]&&1===l[10]}const lb=
b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:Fa,adjoint:h,copy:N,determinant:A,equals:Ta,exactEquals:$a,frob:Ha,fromQuat:P,fromQuat2:E,fromRotation:U,fromRotationTranslation:q,fromRotationTranslationScale:I,fromRotationTranslationScaleOrigin:K,fromScaling:L,fromTranslation:M,fromXRotation:S,fromYRotation:B,fromZRotation:z,frustum:v,getRotation:D,getScaling:p,getTranslation:d,hasIdentityRotation:ib,identity:r,invert:k,invertOrIdentity:w,isOrthoNormal:jb,lookAt:ta,mul:Q,multiply:Q,
multiplyScalar:Oa,multiplyScalarAndAdd:Sa,ortho:ka,perspective:G,perspectiveFromFieldOfView:X,rotate:x,rotateX:e,rotateY:n,rotateZ:u,scale:g,set:F,str:Ea,sub:Ua,subtract:Ua,targetTo:za,translate:y,transpose:C},Symbol.toStringTag,{value:"Module"}));c.add=Fa;c.adjoint=h;c.copy=N;c.determinant=A;c.equals=Ta;c.exactEquals=$a;c.frob=Ha;c.fromQuat=P;c.fromQuat2=E;c.fromRotation=U;c.fromRotationTranslation=q;c.fromRotationTranslationScale=I;c.fromRotationTranslationScaleOrigin=K;c.fromScaling=L;c.fromTranslation=
M;c.fromXRotation=S;c.fromYRotation=B;c.fromZRotation=z;c.frustum=v;c.getRotation=D;c.getScaling=p;c.getTranslation=d;c.hasIdentityRotation=ib;c.identity=r;c.invert=k;c.invertOrIdentity=w;c.isOrthoNormal=jb;c.lookAt=ta;c.mat4=b;c.mul=Q;c.multiply=Q;c.multiplyScalar=Oa;c.multiplyScalarAndAdd=Sa;c.ortho=ka;c.perspective=G;c.perspectiveFromFieldOfView=X;c.rotate=x;c.rotateX=e;c.rotateY=n;c.rotateZ=u;c.scale=g;c.set=F;c.str=Ea;c.sub=Ua;c.subtract=Ua;c.targetTo=za;c.translate=y;c.transpose=C})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(c,b,O,N,F){function r(){return!!b._pe}function C(){return!!F("esri-wasm")}function w(){return g?g:g=(new Promise((e,n)=>c(["./pe-wasm"],e,n))).then(e=>e.peWasm).then(({default:e})=>e({locateFile:n=>N.getAssetUrl(`esri/geometry/support/${n}`)})).then(e=>{k(e)})}function k(e){function n(L,U,S){L[U]=S(L[U])}b._pe=e;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=
function(L){function U(){return L.apply(this,arguments)||this}O._inheritsLoose(U,L);U.prototype.destroy=function(){b._pe.destroy(this)};return U}(b._pe.PeGCSExtent);e=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var u of e)n(u.prototype,"getName",L=>function(){return L.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const L of[b._pe.PeGeogtran,b._pe.PeProjcs])n(L.prototype,"getParameters",U=>function(){const S=
Array(b.PeDefs.PE_PARM_MAX);let B=U.call(this);for(let z=0;z<S.length;z++){const q=b._pe.getValue(B,"*");S[z]=q?b._pe.wrapPointer(q,b._pe.PeParameter):null;B+=Int32Array.BYTES_PER_ELEMENT}return S});n(b._pe.PeHorizon.prototype,"getCoord",L=>function(){const U=this.getSize();if(!U)return null;const S=[],B=L.call(this);y(S,U,B);return S});n(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",L=>{const U=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let S=null;var B=L.call(this);if(!b._pe.compare(B,
b._pe.NULL)){S=[B];const z=this.getSteps();if(1<z){B=b._pe.getPointer(B);for(let q=1;q<z;q++)S.push(b._pe.wrapPointer(B+U*q,b._pe.PeGTlistExtendedGTs))}}return S}});const M=b._pe._pe_getPeHorizonSize();u=L=>function(){let U=this._cache;U||(this._cache=U=new Map);if(U.has(L))return U.get(L);let S=null;var B=L.call(this);if(!b._pe.compare(B,b._pe.NULL)){S=[B];const z=B.getNump();if(1<z){B=b._pe.getPointer(B);for(let q=1;q<z;q++)S.push(b._pe.wrapPointer(B+M*q,b._pe.PeHorizon))}}U.set(L,S);return S};
n(b._pe.PeProjcs.prototype,"horizonGcsGenerate",u);n(b._pe.PeProjcs.prototype,"horizonPcsGenerate",u);b._pe.PeObject.prototype.toString=function(L=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();const U=b._pe.getPointer(this),S=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(U,L,S))}}function h(e){if(e){var n=b._pe.getClass(e);n&&(n=b._pe.getCache(n))&&(e=b._pe.getPointer(e))&&delete n[e]}}function A(e,n){const u=[];n=Array(n);for(let M=
0;M<e;M++)u.push(b._pe.ensureInt8(n));return u}function Q(e){let n;Array.isArray(e[0])?(n=[],e.forEach(u=>{n.push(u[0],u[1])})):n=e;return n}function y(e,n,u,M=!1){if(M)for(M=0;M<2*n;M++)e[M]=b._pe.getValue(u+M*Float64Array.BYTES_PER_ELEMENT,"double");else{M=0===e.length;for(let L=0;L<n;L++)M&&(e[L]=Array(2)),e[L][0]=b._pe.getValue(u,"double"),e[L][1]=b._pe.getValue(u+Float64Array.BYTES_PER_ELEMENT,"double"),u+=2*Float64Array.BYTES_PER_ELEMENT}}let g;b._pe=null;b.PeCSTransformations=void 0;(function(e){function n(L,
U,S){b._pe.ensureCache.prepare();var B=Q(S);const z=S===B;B=b._pe.ensureFloat64(B);(L=b._pe._pe_geog_to_proj(b._pe.getPointer(L),U,B))&&y(S,U,B,z);return L}function u(L,U,S){return M(L,U,S,0)}function M(L,U,S,B){b._pe.ensureCache.prepare();var z=Q(S);const q=S===z;z=b._pe.ensureFloat64(z);(L=b._pe._pe_proj_to_geog_center(b._pe.getPointer(L),U,z,B))&&y(S,U,z,q);return L}e.geogToProj=n;e.projGeog=function(L,U,S,B){switch(B){case b.PeDefs.PE_TRANSFORM_P_TO_G:return u(L,U,S);case b.PeDefs.PE_TRANSFORM_G_TO_P:return n(L,
U,S)}return 0};e.projToGeog=u;e.projToGeogCenter=M})(b.PeCSTransformations||(b.PeCSTransformations={}));b.PeDefs=void 0;(function(e){e.init=function(){e.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;e.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=
b._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=b._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;e.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
e.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=b._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;e.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
e.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||(b.PeDefs={}));b.PeFactory=void 0;(function(e){function n(U,S){let B=null,z=u[U];z||(z={},u[U]=z);z.hasOwnProperty(String(S))?B=z[S]:(U=b._pe.PeFactory.prototype.factoryByType(U,S),b._pe.compare(U,b._pe.NULL)||(B=U,z[S]=B));return B=L(B)}const u={},M={},L=U=>
{if(U){const S=U.getType();switch(S){case b.PeDefs.PE_TYPE_GEOGCS:U=b._pe.castObject(U,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:U=b._pe.castObject(U,b._pe.PeProjcs);break;case b.PeDefs.PE_TYPE_GEOGTRAN:U=b._pe.castObject(U,b._pe.PeGeogtran);break;default:S&b.PeDefs.PE_TYPE_UNIT&&(U=b._pe.castObject(U,b._pe.PeUnit))}}return U};e.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(U){return n(b.PeDefs.PE_TYPE_COORDSYS,U)};e.factoryByType=n;e.fromString=function(U,
S){let B=null,z=M[U];z||(z={},M[U]=z);z.hasOwnProperty(S)?B=z[S]:(U=b._pe.PeFactory.prototype.fromString(U,S),b._pe.compare(U,b._pe.NULL)||(B=U,z[S]=B));return B=L(B)};e.geogcs=function(U){return n(b.PeDefs.PE_TYPE_GEOGCS,U)};e.geogtran=function(U){return n(b.PeDefs.PE_TYPE_GEOGTRAN,U)};e.getCode=function(U){return b._pe.PeFactory.prototype.getCode(U)};e.projcs=function(U){return n(b.PeDefs.PE_TYPE_PROJCS,U)};e.unit=function(U){return n(b.PeDefs.PE_TYPE_UNIT,U)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=
null;b.PeGTlistExtended=void 0;(function(e){let n;e.init=function(){e.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;n=b._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(u,M,L,U,S,B){let z=null;const q=new b._pe.PeInteger(B);try{const E=b._pe.PeGTlistExtended.prototype.getGTlist(u,M,L,U,S,q);if(B=q.val)if(z=[E],1<B){const d=b._pe.getPointer(E);for(u=1;u<B;u++)z.push(b._pe.wrapPointer(d+n*u,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(q)}return z}})(b.PeGTlistExtended||
(b.PeGTlistExtended={}));b.PeGTlistExtendedEntry=void 0;(function(e){e.destroy=function(n){if(n&&n.length){for(const u of n)h(u),u.getEntries().forEach(M=>{h(M);M=M.getGeogtran();h(M);M.getParameters().forEach(h);[M.getGeogcs1(),M.getGeogcs2()].forEach(L=>{h(L);const U=L.getDatum();h(U);h(U.getSpheroid());h(L.getPrimem());h(L.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(n[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));b.PeGTTransformations=void 0;(function(e){e.geogToGeog=
function(n,u,M,L,U){b._pe.ensureCache.prepare();var S=Q(M);const B=M===S;S=b._pe.ensureFloat64(S);let z=0;L&&(z=b._pe.ensureFloat64(L));(n=b._pe._pe_geog_to_geog(b._pe.getPointer(n),u,S,z,U))&&y(M,u,S,B);return n}})(b.PeGTTransformations||(b.PeGTTransformations={}));b.PeNotationDms=void 0;(function(e){const n=(M,L,U,S,B,z)=>{b._pe.ensureCache.prepare();switch(M){case "dd":var q=b._pe._pe_geog_to_dd;var E=b.PeDefs.PE_DD_MAX;break;case "ddm":q=b._pe._pe_geog_to_ddm;E=b.PeDefs.PE_DDM_MAX;break;case "dms":q=
b._pe._pe_geog_to_dms,E=b.PeDefs.PE_DMS_MAX}M=0;L&&(M=b._pe.getPointer(L));L=Q(S);L=b._pe.ensureFloat64(L);E=A(U,E);S=b._pe.ensureInt32(E);if(B=q(M,U,L,B,S))for(q=0;q<U;q++)z[q]=b._pe.UTF8ToString(E[q]);return B},u=(M,L,U,S,B)=>{b._pe.ensureCache.prepare();switch(M){case "dd":var z=b._pe._pe_dd_to_geog;break;case "ddm":z=b._pe._pe_ddm_to_geog;break;case "dms":z=b._pe._pe_dms_to_geog}M=0;L&&(M=b._pe.getPointer(L));L=S.map(q=>b._pe.ensureString(q));S=b._pe.ensureInt32(L);L=b._pe.ensureFloat64(Array(2*
U));(z=z(M,U,S,L))&&y(B,U,L);return z};e.geogToDms=function(M,L,U,S,B){return n("dms",M,L,U,S,B)};e.dmsToGeog=function(M,L,U,S){return u("dms",M,L,U,S)};e.geogToDdm=function(M,L,U,S,B){return n("ddm",M,L,U,S,B)};e.ddmToGeog=function(M,L,U,S){return u("ddm",M,L,U,S)};e.geogToDd=function(M,L,U,S,B){return n("dd",M,L,U,S,B)};e.ddToGeog=function(M,L,U,S){return u("dd",M,L,U,S)}})(b.PeNotationDms||(b.PeNotationDms={}));b.PeNotationMgrs=void 0;(function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
e.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geogToMgrsExtended=function(n,u,M,L,U,S,B){b._pe.ensureCache.prepare();let z=0;n&&(z=b._pe.getPointer(n));n=Q(M);M=b._pe.ensureFloat64(n);n=A(u,b.PeDefs.PE_MGRS_MAX);const q=b._pe.ensureInt32(n);if(L=b._pe._pe_geog_to_mgrs_extended(z,
u,M,L,U,S,q))for(U=0;U<u;U++)B[U]=b._pe.UTF8ToString(n[U]);return L};e.mgrsToGeogExtended=function(n,u,M,L,U){b._pe.ensureCache.prepare();let S=0;n&&(S=b._pe.getPointer(n));n=M.map(B=>b._pe.ensureString(B));M=b._pe.ensureInt32(n);n=b._pe.ensureFloat64(Array(2*u));(L=b._pe._pe_mgrs_to_geog_extended(S,u,M,L,n))&&y(U,u,n);return L}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));b.PeNotationUsng=void 0;(function(e){e.geogToUsng=function(n,u,M,L,U,S,B){b._pe.ensureCache.prepare();let z=0;n&&(z=b._pe.getPointer(n));
n=Q(M);M=b._pe.ensureFloat64(n);n=A(u,b.PeDefs.PE_MGRS_MAX);const q=b._pe.ensureInt32(n);if(L=b._pe._pe_geog_to_usng(z,u,M,L,U,S,q))for(U=0;U<u;U++)B[U]=b._pe.UTF8ToString(n[U]);return L};e.usngToGeog=function(n,u,M,L){b._pe.ensureCache.prepare();var U=0;n&&(U=b._pe.getPointer(n));n=M.map(S=>b._pe.ensureString(S));M=b._pe.ensureInt32(n);n=b._pe.ensureFloat64(Array(2*u));(U=b._pe._pe_usng_to_geog(U,u,M,n))&&y(L,u,n);return U}})(b.PeNotationUsng||(b.PeNotationUsng={}));b.PeNotationUtm=void 0;(function(e){e.init=
function(){e.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geogToUtm=function(n,u,M,L,U){b._pe.ensureCache.prepare();var S=0;n&&(S=b._pe.getPointer(n));n=Q(M);M=b._pe.ensureFloat64(n);n=A(u,b.PeDefs.PE_UTM_MAX);const B=b._pe.ensureInt32(n);if(L=b._pe._pe_geog_to_utm(S,u,M,L,B))for(S=0;S<u;S++)U[S]=b._pe.UTF8ToString(n[S]);return L};e.utmToGeog=
function(n,u,M,L,U){b._pe.ensureCache.prepare();let S=0;n&&(S=b._pe.getPointer(n));n=M.map(B=>b._pe.ensureString(B));M=b._pe.ensureInt32(n);n=b._pe.ensureFloat64(Array(2*u));(L=b._pe._pe_utm_to_geog(S,u,M,L,n))&&y(U,u,n);return L}})(b.PeNotationUtm||(b.PeNotationUtm={}));b.PePCSInfo=void 0;(function(e){const n=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;e.PE_POLE_OUTSIDE_BOUNDARY=
b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(u,M=e.PE_PCSINFO_OPTION_DOMAIN){let L=null,U=null;n.has(u)&&(U=n.get(u),U[M]&&(L=U[M]));L||(L=b._pe.PePCSInfo.prototype.generate(u,M),U||(U=[],n.set(u,U)),U[M]=L);return L}})(b.PePCSInfo||(b.PePCSInfo={}));b.PeVersion=void 0;(function(e){e.versionString=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));const x=Object.freeze(Object.defineProperty({__proto__:null,
get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},get PeGTTransformations(){return b.PeGTTransformations},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},
get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:k,get _pe(){return b._pe},isLoaded:r,isSupported:C,load:w},Symbol.toStringTag,{value:"Module"}));b._init=k;b.isLoaded=r;b.isSupported=C;b.load=w;b.pe=x})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(c,b){const O=Math.PI/180;var N=b.earth.radius;const F=b.earth.eccentricitySquared;N={a1:N*F,a2:N*F*N*F,a3:N*F*F/2,a4:N*F*N*F*2.5,a5:N*F+N*F*F/2,a6:1-F};b={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};c.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;c.earthEllipsoidConstants=N;c.spheroids=b;c.toRadians=O;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(c){return function(){function b(N){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(N&&N.steps)for(const F of N.steps)F instanceof c?this.steps.push(F):this.steps.push(new c({wkid:F.wkid,wkt:F.wkt,isInverse:F.isInverse}))}b.cacheKey=function(N,F){return[void 0!==N.wkid&&null!==N.wkid?N.wkid.toString():"-1",void 0!==N.wkt&&null!==N.wkt?N.wkt.toString():"",void 0!==F.wkid&&null!==F.wkid?F.wkid.toString():"-1",void 0!==F.wkt&&null!==F.wkt?F.wkt.toString():""].join()};
b.fromGE=function(N){const F=new b;let r="";for(const C of N.steps)N=c.fromGE(C),F.steps.push(N),r+=N.uid.toString()+",";F._cachedProjection={};F._gtlistentry=null;F._chain=r;return F};var O=b.prototype;O.getInverse=function(){const N=new b;N.steps=[];for(let F=this.steps.length-1;0<=F;F--)N.steps.push(this.steps[F].getInverse());return N};O.getGTListEntry=function(){let N="";for(const F of this.steps)N+=F.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=
N);return this._gtlistentry};O.assignCachedGe=function(N,F,r){this._cachedProjection[b.cacheKey(N,F)]=r};O.getCachedGeTransformation=function(N,F){let r="";for(const C of this.steps)r+=C.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);N=this._cachedProjection[b.cacheKey(N,F)];return void 0===N?null:N};return b}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){let b=
0;return function(){function O(N){this.uid=b++;N?(this._wkt=null!=N.wkt?N.wkt:null,this._wkid=null!=N.wkid?N.wkid:-1,this._isInverse=null!=N.isInverse?!0===N.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}O.fromGE=function(N){const F=new O;F._wkt=N.wkt;F._wkid=N.wkid;F._isInverse=N.isInverse;return F};O.prototype.getInverse=function(){const N=new O;N._wkt=this.wkt;N._wkid=this._wkid;N._isInverse=!this.isInverse;return N};c._createClass(O,[{key:"wkt",get:function(){return this._wkt},
set:function(N){this._wkt=N;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},set:function(N){this._wkid=N;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(N){this._isInverse=N;this.uid=b++}}]);return O}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(c,b,O,N){c.getGeometryZScaler=function(F,r,C){if(b.isNone(r)||b.isNone(C)||C.vcsWkid||N.equals(r,C))return null;
r=O.getMetersPerVerticalUnitForSR(r);C=O.getMetersPerVerticalUnitForSR(C);const w=r/C;if(1===w)return null;switch(F){case "point":case "esriGeometryPoint":return k=>{k&&null!=k.z&&(k.z*=w)};case "polyline":case "esriGeometryPolyline":return k=>{if(k)for(const h of k.paths)for(const A of h)2<A.length&&(A[2]*=w)};case "polygon":case "esriGeometryPolygon":return k=>{if(k)for(const h of k.rings)for(const A of h)2<A.length&&(A[2]*=w)};case "multipoint":case "esriGeometryMultipoint":return k=>{if(k)for(const h of k.points)2<
h.length&&(h[2]*=w)};case "extent":case "esriGeometryExtent":return k=>{k&&null!=k.zmin&&null!=k.zmax&&(k.zmin*=w,k.zmax*=w)};default:return null}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y){function g(S){const B=[];let z=0,q=0;for(let E=0;E<S.length;E++){const d=S[E];let p=null;for(let D=0;D<d.length;D++)p=d[D],B.push(p),0===D?q=z=p[0]:(z=Math.min(z,p[0]),q=Math.max(q,p[0]));p&&B.push([(z+q)/2,0])}return B}function x(S,B){if(!(S instanceof w||S instanceof C))throw U.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new N("straightLineDensify: the input geometry is neither polyline nor polygon");var z=k.getGeometryParts(S);
const q=[];for(const d of z){z=[];q.push(z);z.push([d[0][0],d[0][1]]);for(let p=0;p<d.length-1;p++){const D=d[p][0],I=d[p][1],K=d[p+1][0],P=d[p+1][1];var E=Math.sqrt((K-D)*(K-D)+(P-I)*(P-I));const v=(P-I)/E,G=(K-D)/E,X=E/B;if(1<X){for(let ka=1;ka<=X-1;ka++){const ta=ka*B;z.push([G*ta+D,v*ta+I])}E=(E+Math.floor(X-1)*B)/2;z.push([G*E+D,v*E+I])}z.push([K,P])}}return"polygon"===S.type?new C({rings:q,spatialReference:S.spatialReference}):new w({paths:q,spatialReference:S.spatialReference})}function e(S,
B,z){B&&(S=x(S,1E6),S=A.webMercatorToGeographic(S,!0));z&&(S=k.updatePolyGeometry(S,z));return S}function n(S,B,z){if(Array.isArray(S)){var q=S[0];q>B?(z=k.offsetMagnitude(q,B),S[0]=q+-2*z*B):q<z&&(B=k.offsetMagnitude(q,z),S[0]=q+-2*B*z)}else q=S.x,q>B?(z=k.offsetMagnitude(q,B),S=S.clone().offset(-2*z*B,0)):q<z&&(B=k.offsetMagnitude(q,z),S=S.clone().offset(-2*B*z,0));return S}function u(S,B){let z=-1;for(let q=0;q<B.cutIndexes.length;q++){const E=B.cutIndexes[q],d=B.geometries[q],p=k.getGeometryParts(d);
for(let D=0;D<p.length;D++){const I=p[D];I.some(K=>{if(180>K[0])return!0;K=0;for(var P=0;P<I.length;P++){var v=I[P][0];K=v>K?v:K}K=Number(K.toFixed(9));K=-360*k.offsetMagnitude(K,180);for(P=0;P<I.length;P++)v=d.getPoint(D,P),d.setPoint(D,P,v.clone().offset(K,0));return!0})}if(E===z)if("polygon"===S[0].type)for(const D of k.getGeometryParts(d))S[E]=S[E].addRing(D);else{if("polyline"===S[0].type)for(const D of k.getGeometryParts(d))S[E]=S[E].addPath(D)}else z=E,S[E]=d}return S}function M(S,B,z){return L.apply(this,
arguments)}function L(){L=b._asyncToGenerator(function*(S,B,z){if(!Array.isArray(S))return M([S],B);B&&"string"!==typeof B&&U.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var q="string"===typeof B?B:B?.url??O.geometryServiceUrl;let E,d,p;let D=0;var I=[];B=[];for(var K of S)if(r.isNone(K))B.push(K);else{if(!P){var P=K.spatialReference;var v=h.getInfo(P);var G=(E=P.isWebMercator)?102100:4326;d=k.cutParams[G].maxX;p=k.cutParams[G].minX;var X=k.cutParams[G].plus180Line;
G=k.cutParams[G].minus180Line}if(v)if("mesh"===K.type)B.push(K);else if("point"===K.type)B.push(n(K.clone(),d,p));else if("multipoint"===K.type){var ka=K.clone();ka.points=ka.points.map(ta=>n(ta,d,p));B.push(ka)}else if("extent"===K.type)ka=K.clone()._normalize(!1,!1,v),B.push(ka.rings?new C(ka):ka);else if(K.extent){ka=K.extent;const ta=2*k.offsetMagnitude(ka.xmin,p)*d;let za=0===ta?K.clone():k.updatePolyGeometry(K.clone(),ta);ka.offset(ta,0);ka.intersects(X)&&ka.xmax!==d?(D=ka.xmax>D?ka.xmax:D,
za=e(za,E),I.push(za),B.push("cut")):ka.intersects(G)&&ka.xmin!==p?(D=2*ka.xmax*d>D?2*ka.xmax*d:D,za=e(za,E,360),I.push(za),B.push("cut")):B.push(za)}else B.push(K.clone());else B.push(K)}P=k.offsetMagnitude(D,d);v=-90;X=P;for(K=new w;0<P;)G=-180+360*P,K.addPath([[G,v],[G,-1*v]]),v*=-1,P--;if(0<I.length&&0<X){P=yield Q.cut(q,I,K,z);P=u(I,P);v=[];I=[];for(X=0;X<B.length;X++)K=B[X],"cut"!==K?I.push(K):(K=P.shift(),G=S[X],r.isSome(G)&&"polygon"===G.type&&G.rings&&1<G.rings.length&&K.rings.length>=G.rings.length?
(v.push(K),I.push("simplify")):I.push(E?A.geographicToWebMercator(K):K));if(!v.length)return I;B=yield y.simplify(q,v,z);S=[];for(z=0;z<I.length;z++)q=I[z],"simplify"!==q?S.push(q):S.push(E?A.geographicToWebMercator(B.shift()):B.shift());return S}S=[];for(z=0;z<B.length;z++)q=B[z],"cut"!==q?S.push(q):(q=I.shift(),S.push(!0===E?A.geographicToWebMercator(q):q));return S});return L.apply(this,arguments)}const U=F.getLogger("esri.geometry.support.normalizeUtils");c.getDenormalizedExtent=function(S){if(!S)return null;
const B=S.extent;if(!B)return null;var z=S.spatialReference&&h.getInfo(S.spatialReference);if(!z)return B;const [q,E]=z.valid;({width:z}=B);let {xmin:d,xmax:p}=B;[d,p]=[p,d];if("extent"===S.type||0===z||z<=E||z>2*E||d<q||p>E)return B;let D;switch(S.type){case "polygon":if(1<S.rings.length)D=g(S.rings);else return B;break;case "polyline":if(1<S.paths.length)D=g(S.paths);else return B;break;case "multipoint":D=S.points}S=B.clone();for(let I=0;I<D.length;I++){let K=D[I][0];0>K?(K+=E,p=Math.max(K,p)):
(K-=E,d=Math.min(K,d))}S.xmin=d;S.xmax=p;return S.width<z?(S.xmin-=E,S.xmax-=E,S):B};c.normalizeCentralMeridian=M;c.normalizeMapX=function(S,B){if(B=h.getInfo(B)){const [z,q]=B.valid;B=q-z;if(S<z)for(;S<z;)S+=B;if(S>q)for(;S>q;)S-=B}return S};c.straightLineDensify=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,b,O,N){function F(r){return N.isPolygon(r)?
r.rings:r.paths}b={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:O.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:O.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:O.WGS84}),minus180Line:new b({paths:[[[-180,
-180],[-180,180]]],spatialReference:O.WGS84})}};c.cutParams=b;c.getGeometryParts=F;c.offsetMagnitude=function(r,C){return Math.ceil((r-C)/(2*C))};c.updatePolyGeometry=function(r,C){const w=F(r);for(const k of w)for(const h of k)h[0]+=C;return r};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(c,
b,O,N,F,r){function C(){C=b._asyncToGenerator(function*(w,k,h,A){w=r.parseUrl(w);const Q=k[0].spatialReference;k={...A,query:{...w.query,f:"json",sr:JSON.stringify(Q),target:JSON.stringify({geometryType:F.getJsonType(k[0]),geometries:k}),cutter:JSON.stringify(h)}};k=yield N(w.path+"/cut",k);const {cutIndexes:y,geometries:g=[]}=k.data;return{cutIndexes:y,geometries:g.map(x=>{x=F.fromJSON(x);x.spatialReference=Q;return x})}});return C.apply(this,arguments)}c.cut=function(w,k,h,A){return C.apply(this,
arguments)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(c,b,O,N,F,r){function C(w,k,h){const A={};for(const y in w)if("declaredClass"!==y){var Q=w[y];if(null!=Q&&"function"!==typeof Q)if(Array.isArray(Q)){A[y]=[];for(let g=0;g<Q.length;g++)A[y][g]=C(Q[g])}else"object"===typeof Q?Q.toJSON?(Q=Q.toJSON(h&&h[y]),A[y]=k?Q:JSON.stringify(Q)):A[y]=
k?Q:JSON.stringify(Q):A[y]=Q}return A}c.asValidOptions=function(w,k){return k?{...k,query:{...(w??{}),...k.query}}:{query:w}};c.encode=C;c.getToken=function(w,k){return r.supportsApiKey(w)&&(k||b.apiKey)?k||b.apiKey:O.id?.findCredential(w)?.token};c.parseUrl=function(w){return"string"===typeof w?F.urlToObject(w):N.clone(w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(c,b,O,N,F,r){function C(){C=b._asyncToGenerator(function*(w,k,h){const A="string"===typeof w?N.urlToObject(w):w;w=k[0].spatialReference;const Q=F.getJsonType(k[0]);k={...h,query:{...A.query,f:"json",sr:w.wkid?w.wkid:JSON.stringify(w),geometries:JSON.stringify(r.encodeGeometries(k))}};({data:k}=yield O(A.path+"/simplify",k));return r.decodeGeometries(k.geometries,Q,w)});return C.apply(this,arguments)}c.simplify=function(w,k,h){return C.apply(this,arguments)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,b){c.decodeGeometries=function(O,N,F){const r=b.getGeometryType(N);return O.map(C=>{C=r.fromJSON(C);C.spatialReference=F;return C})};c.encodeGeometries=function(O){return{geometryType:b.getJsonType(O[0]),geometries:O.map(N=>N.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(c,b,O,N,F,r,C){function w(e,n){if(!n)return null;if("x"in n){var u={x:0,y:0};[u.x,u.y]=e(n.x,n.y,Q);null!=n.z&&(u.z=n.z);null!=n.m&&(u.m=n.m);return u}return"xmin"in n?(u={xmin:0,ymin:0,xmax:0,ymax:0},[u.xmin,u.ymin]=e(n.xmin,n.ymin,Q),[u.xmax,u.ymax]=e(n.xmax,n.ymax,Q),n.hasZ&&(u.zmin=n.zmin,u.zmax=n.zmax,u.hasZ=!0),n.hasM&&(u.mmin=n.mmin,u.mmax=n.mmax,u.hasM=!0),u):"rings"in n?{rings:k(n.rings,e),hasM:n.hasM,hasZ:n.hasZ}:"paths"in n?{paths:k(n.paths,e),hasM:n.hasM,hasZ:n.hasZ}:"points"in
n?{points:h(n.points,e),hasM:n.hasM,hasZ:n.hasZ}:null}function k(e,n){const u=[];for(const M of e)u.push(h(M,n));return u}function h(e,n){const u=[];for(const M of e)e=n(M[0],M[1],[0,0]),u.push(e),2<M.length&&e.push(M[2]),3<M.length&&e.push(M[3]);return u}function A(){A=b._asyncToGenerator(function*(e,n){e&&n&&(e=Array.isArray(e)?e.map(u=>O.isSome(u.geometry)?u.geometry.spatialReference:null).filter(O.isSome):[e],yield N.initializeProjection(e.map(u=>({source:u,dest:n}))))});return A.apply(this,arguments)}
const Q=[0,0],y=w.bind(null,C.lngLatToXY),g=w.bind(null,C.xyToLngLat),x=new (function(){function e(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var n=e.prototype;n.push=function(){var u=b._asyncToGenerator(function*(M,L,U){if(!(M&&M.length&&L&&U)||r.equals(L,U))return M;const S={geometries:M,inSpatialReference:L,outSpatialReference:U,resolve:null};this._jobs.push(S);return new Promise(B=>{S.resolve=B;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(M,
L,U){return u.apply(this,arguments)}}();n._process=function(){this._timer=null;const u=this._jobs.shift();if(u){var {geometries:M,inSpatialReference:L,outSpatialReference:U,resolve:S}=u;C.canProject(L,U)?r.isWebMercator(U)?S(M.map(y)):S(M.map(g)):S(N.projectMany(F.jsonAdapter,M,L,U,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return e}());c.checkProjectionSupport=function(e,n){return A.apply(this,arguments)};c.project=function(e,n,u,M){if(!e)return e;u||(u=n,n=e.spatialReference);
return r.isValid(n)&&r.isValid(u)&&!r.equals(n,u)?C.canProject(n,u)?(e=r.isWebMercator(u)?y(e):g(e),e.spatialReference=u,e):N.projectMany(F.jsonAdapter,[e],n,u,null,M)[0]:e};c.projectMany=function(e,n,u){return x.push(e,n,u)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){let b=function(C,w,k){this.x=C;this.y=w;this.spatialReference=k;this.m=this.z=void 0},O=function(C,w,k,h){this.rings=C;this.spatialReference=
w;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);h&&(this.hasM=h)},N=function(C,w,k,h){this.paths=C;this.spatialReference=w;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);h&&(this.hasM=h)},F=function(C,w,k,h){this.points=C;this.spatialReference=w;this.hasM=this.hasZ=void 0;k&&(this.hasZ=k);h&&(this.hasM=h)},r=function(C,w,k,h,A){this.xmin=C;this.ymin=w;this.xmax=k;this.ymax=h;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0};c.jsonAdapter={convertToGEGeometry:function(C,w){return null==
w?null:C.convertJSONToGeometry(w)},exportPoint:function(C,w,k){k=new b(C.getPointX(w),C.getPointY(w),k);const h=C.hasZ(w),A=C.hasM(w);h&&(k.z=C.getPointZ(w));A&&(k.m=C.getPointM(w));return k},exportPolygon:function(C,w,k){return new O(C.exportPaths(w),k,C.hasZ(w),C.hasM(w))},exportPolyline:function(C,w,k){return new N(C.exportPaths(w),k,C.hasZ(w),C.hasM(w))},exportMultipoint:function(C,w,k){return new F(C.exportPoints(w),k,C.hasZ(w),C.hasM(w))},exportExtent:function(C,w,k){var h=C.hasZ(w);const A=
C.hasM(w);k=new r(C.getXMin(w),C.getYMin(w),C.getXMax(w),C.getYMax(w),k);h&&(h=C.getZExtent(w),k.zmin=h.vmin,k.zmax=h.vmax);A&&(C=C.getMExtent(w),k.mmin=C.vmin,k.mmax=C.vmax);return k}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M,L,U,S,B,z,q,E){function d(K){return null!=K&&K.every(P=>"exceedslimit"!==P.statisticType)}const p=new C.MemCacheStorage(2E6);let D=0,I=function(){function K(v){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:M.queryCapabilities};this.geometryType=v.geometryType;this.hasM=!!v.hasM;this.hasZ=!!v.hasZ;this.objectIdField=v.objectIdField;this.spatialReference=v.spatialReference;this.definitionExpression=v.definitionExpression;this.featureStore=
v.featureStore;this.aggregateAdapter=v.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=v.timeInfo;v.cacheSpatialQueries&&(this._geometryQueryCache=new C.MemCache(D++ +"$$",p));this.fieldsIndex=new z(v.fields);v.scheduler&&v.priority&&(this._frameTask=v.scheduler.registerTask(v.priority))}var P=K.prototype;P.destroy=function(){this._frameTask=r.removeMaybe(this._frameTask);this.clearCache();r.destroyMaybe(this._geometryQueryCache);this._changeHandle=
r.removeMaybe(this._changeHandle);r.destroyMaybe(this.fieldsIndex)};P.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtentPromise=this._allFeaturesPromise=null};P.executeQuery=function(){var v=b._asyncToGenerator(function*(G,X){try{return(yield this._executeQuery(G,{},X)).createQueryResponse()}catch(ka){if(ka!==B.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new L.QueryEngineResult([],G,this)).createQueryResponse()}});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForCount=
function(){var v=b._asyncToGenerator(function*(G={},X){try{return(yield this._executeQuery(G,{returnGeometry:!1,returnCentroid:!1,outSR:null},X)).createQueryResponseForCount()}catch(ka){if(ka!==B.QUERY_ENGINE_EMPTY_RESULT)throw ka;return 0}});return function(){return v.apply(this,arguments)}}();P.executeQueryForExtent=function(){var v=b._asyncToGenerator(function*(G,X){const ka=G.outSR;try{const ta=yield this._executeQuery(G,{returnGeometry:!0,returnCentroid:!1,outSR:null},X),za=ta.size;if(!za)return{count:0,
extent:null};const Ea=yield this._getBounds(ta.items,ta.spatialReference,ka||this.spatialReference);return{count:za,extent:Ea}}catch(ta){if(ta===B.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ta;}});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForIds=function(){var v=b._asyncToGenerator(function*(G,X){return this.executeQueryForIdSet(G,X).then(ka=>Array.from(ka))});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForIdSet=function(){var v=
b._asyncToGenerator(function*(G,X){try{const ka=yield this._executeQuery(G,{returnGeometry:!0,returnCentroid:!1,outSR:null},X),ta=ka.items,za=new Set;yield this._reschedule(()=>{for(const Ea of ta)za.add(ka.featureAdapter.getObjectId(Ea))},X);return za}catch(ka){if(ka===B.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ka;}});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForSnapping=function(){var v=b._asyncToGenerator(function*(G,X){const {point:ka,distance:ta,types:za}=G;
if(za===L.SnappingTypes.NONE)return{candidates:[]};const Ea=yield this._reschedule(()=>this._checkQuerySupport(G.query),X),Ha=!x.equals(ka.spatialReference,this.spatialReference);Ha&&(yield u.checkProjectionSupport(ka.spatialReference,this.spatialReference));var Fa="number"===typeof ta?ta:ta.x,Ua="number"===typeof ta?ta:ta.y;Fa={xmin:ka.x-Fa,xmax:ka.x+Fa,ymin:ka.y-Ua,ymax:ka.y+Ua,spatialReference:ka.spatialReference};Fa=Ha?u.project(Fa,this.spatialReference):Fa;if(!Fa)return{candidates:[]};Ua=(yield g.normalizeCentralMeridian(y.fromJSON(ka),
null,{signal:X}))[0];const Oa=(yield g.normalizeCentralMeridian(y.fromJSON(Fa),null,{signal:X}))[0];if(r.isNone(Ua)||r.isNone(Oa))return{candidates:[]};const Sa=new L.QueryEngineResult(yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Oa.toJSON())),X),Ea,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Sa),X);yield this._reschedule(()=>this._executeTimeQuery(Sa),X);yield this._reschedule(()=>this._executeAttributesQuery(Sa),X);X=Ua.toJSON();X=Ha?u.project(X,this.spatialReference):
X;return Sa.createSnappingResponse({...G,point:X,distance:Ha?Math.max(Fa.xmax-Fa.xmin,Fa.ymax-Fa.ymin)/2:ta},ka.spatialReference)});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForLatestObservations=function(){var v=b._asyncToGenerator(function*(G,X){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new N("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:G,timeInfo:this.timeInfo});try{const ka=yield this._executeQuery(G,{},X);yield this._reschedule(()=>
this._filterLatest(ka),X);return ka.createQueryResponse()}catch(ka){if(ka!==B.QUERY_ENGINE_EMPTY_RESULT)throw ka;return(new L.QueryEngineResult([],G,this)).createQueryResponse()}});return function(G,X){return v.apply(this,arguments)}}();P.executeQueryForSummaryStatistics=function(){var v=b._asyncToGenerator(function*(G={},X,ka){const {field:ta,normalizationField:za,valueExpression:Ea}=X;return(yield this._getQueryEngineResultForStats(G,{field:ta,normalizationField:za,valueExpression:Ea},ka)).createSummaryStatisticsResponse(X)});
return function(){return v.apply(this,arguments)}}();P.executeQueryForUniqueValues=function(){var v=b._asyncToGenerator(function*(G={},X,ka){const {field:ta,field2:za,field3:Ea,valueExpression:Ha}=X;return(yield this._getQueryEngineResultForStats(G,{field:ta,field2:za,field3:Ea,valueExpression:Ha},ka)).createUniqueValuesResponse(X)});return function(){return v.apply(this,arguments)}}();P.executeQueryForClassBreaks=function(){var v=b._asyncToGenerator(function*(G={},X,ka){const {field:ta,normalizationField:za,
valueExpression:Ea}=X;return(yield this._getQueryEngineResultForStats(G,{field:ta,normalizationField:za,valueExpression:Ea},ka)).createClassBreaksResponse(X)});return function(){return v.apply(this,arguments)}}();P.executeQueryForHistogram=function(){var v=b._asyncToGenerator(function*(G={},X,ka){const {field:ta,normalizationField:za,valueExpression:Ea}=X;return(yield this._getQueryEngineResultForStats(G,{field:ta,normalizationField:za,valueExpression:Ea},ka)).createHistogramResponse(X)});return function(){return v.apply(this,
arguments)}}();P.fetchRecomputedExtents=function(){var v=b._asyncToGenerator(function*(G){const [X,ka]=yield Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(yield this._getAllFeatures(),this.spatialReference,this.spatialReference),r.isSome(this._timeExtentPromise)?this._timeExtentPromise:this._timeExtentPromise=S.getTimeExtent(this.timeInfo,this.featureStore)]);w.throwIfAborted(G);
return{fullExtent:X,timeExtent:ka}});return function(G){return v.apply(this,arguments)}}();P._getBounds=function(){var v=b._asyncToGenerator(function*(G,X,ka){const ta=h.set(h.create(),h.NEGATIVE_INFINITY);yield this.featureStore.forEachBounds(G,za=>h.expandWithAABB(ta,za));G={xmin:ta[0],ymin:ta[1],xmax:ta[3],ymax:ta[4],spatialReference:B.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ta[2])&&isFinite(ta[5])&&(G.zmin=ta[2],G.zmax=ta[5]);X=u.project(G,X,ka);X.spatialReference=
B.cleanFromGeometryEngine(ka);0===X.xmax-X.xmin&&(ka=k.getMetersPerUnitForSR(X.spatialReference),X.xmin-=ka,X.xmax+=ka);0===X.ymax-X.ymin&&(ka=k.getMetersPerUnitForSR(X.spatialReference),X.ymin-=ka,X.ymax+=ka);this.hasZ&&null!=X.zmin&&null!=X.zmax&&0===X.zmax-X.zmin&&(ka=k.getMetersPerUnitForSR(X.spatialReference),X.zmin-=ka,X.zmax+=ka);return X});return function(G,X,ka){return v.apply(this,arguments)}}();P._schedule=function(){var v=b._asyncToGenerator(function*(G,X){return r.isSome(this._frameTask)?
this._frameTask.schedule(G,X):G(E.noBudget)});return function(G,X){return v.apply(this,arguments)}}();P._reschedule=function(){var v=b._asyncToGenerator(function*(G,X){return r.isSome(this._frameTask)?this._frameTask.reschedule(G,X):G(E.noBudget)});return function(G,X){return v.apply(this,arguments)}}();P._getAllFeaturesQueryEngineResult=function(){var v=b._asyncToGenerator(function*(G){return new L.QueryEngineResult(yield this._getAllFeatures(),G,this)});return function(G){return v.apply(this,arguments)}}();
P._getAllFeatures=function(){var v=b._asyncToGenerator(function*(){var G=this;if(r.isNone(this._allFeaturesPromise)){const ta=[];this._allFeaturesPromise=b._asyncToGenerator(function*(){yield G.featureStore.forEach(za=>ta.push(za))})().then(()=>ta)}const X=this._allFeaturesPromise,ka=yield X;return X===this._allFeaturesPromise?ka.slice():this._getAllFeatures()});return function(){return v.apply(this,arguments)}}();P._executeQuery=function(){var v=b._asyncToGenerator(function*(G,X,ka){G=F.clone(G);
G=yield this._schedule(()=>B.normalizeQuery(G,this.definitionExpression,this.spatialReference),ka);G=yield this._reschedule(()=>this._checkQuerySupport(G),ka);G={...G,...X};const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(G,ka),ka),za=yield this._reschedule(()=>this._executeGeometryQuery(G,ta,ka),ka);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ka);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ka);yield this._reschedule(()=>this._executeTimeQuery(za),
ka);yield this._reschedule(()=>this._executeAttributesQuery(za),ka);return za});return function(G,X,ka){return v.apply(this,arguments)}}();P._executeSceneFilterQuery=function(){var v=b._asyncToGenerator(function*(G,X){var ka=this;if(r.isNone(G.sceneFilter))return null;const {outSR:ta,returnGeometry:za,returnCentroid:Ea}=G;var Ha=this.featureStore.featureSpatialReference,Fa=G.sceneFilter.geometry;const Ua=r.isNone(Ha)||x.equals(Ha,Fa.spatialReference)?Fa:u.project(Fa,Ha);if(!Ua)return null;Ha=za||
Ea;Ha=x.isValid(ta)&&!x.equals(this.spatialReference,ta)&&Ha?function(){var Ta=b._asyncToGenerator(function*(jb){return ka._project(jb,ta)});return function(jb){return Ta.apply(this,arguments)}}():Ta=>Ta;const Oa=this.featureAdapter;Fa=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(Ua)),X);if("disjoint"===G.sceneFilter.spatialRelationship){if(!Fa.length)return null;const Ta=new Set;for(var Sa of Fa)Ta.add(Oa.getObjectId(Sa));const jb=yield this._reschedule(()=>this._getAllFeatures(),
X);Sa=yield this._reschedule(b._asyncToGenerator(function*(){const ib=yield U.getSpatialQueryOperator("esriSpatialRelDisjoint",Ua,ka.geometryType,ka.hasZ,ka.hasM),lb=yield ka._runSpatialFilter(jb,l=>!Ta.has(Oa.getObjectId(l))||ib(Oa.getGeometry(l)),X);return new L.QueryEngineResult(lb,G,ka)}),X);return Ha(Sa)}if(!Fa.length)return new L.QueryEngineResult([],G,this);if(this._canExecuteSinglePass(Ua,G))return Ha(new L.QueryEngineResult(Fa,G,this));const $a=yield U.getSpatialQueryOperator("esriSpatialRelContains",
Ua,this.geometryType,this.hasZ,this.hasM);Sa=yield this._runSpatialFilter(Fa,Ta=>$a(Oa.getGeometry(Ta)),X);return Ha(new L.QueryEngineResult(Sa,G,this))});return function(G,X){return v.apply(this,arguments)}}();P._executeGeometryQuery=function(){var v=b._asyncToGenerator(function*(G,X,ka){var ta=this;if(r.isSome(X)&&0===X.items.length)return X;G=r.isSome(X)?X.query:G;const {geometry:za,outSR:Ea,spatialRel:Ha,returnGeometry:Fa,returnCentroid:Ua}=G;var Oa=this.featureStore.featureSpatialReference;const Sa=
!za||r.isNone(Oa)||x.equals(Oa,za.spatialReference)?za:u.project(za,Oa),$a=Fa||Ua,Ta=x.isValid(Ea)&&!x.equals(this.spatialReference,Ea),jb=this._geometryQueryCache&&r.isNone(X)?Ta&&$a?JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha,outSpatialReference:Ea}):JSON.stringify({originalFilterGeometry:za,spatialRelationship:Ha}):null;Oa=jb?this._geometryQueryCache.get(jb):null;if(r.isSome(Oa))return new L.QueryEngineResult(Oa,G,this);Oa=function(){var fa=b._asyncToGenerator(function*(la){Ta&&
$a&&(yield ta._project(la,Ea));jb&&ta._geometryQueryCache.put(jb,la.items,la.items.length+1);return la});return function(la){return fa.apply(this,arguments)}}();if(!Sa)return Oa(r.isSome(X)?X:yield this._getAllFeaturesQueryEngineResult(G));const ib=this.featureAdapter;let lb=yield this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(za)),ka);if("esriSpatialRelDisjoint"===Ha){if(!lb.length)return Oa(r.isSome(X)?X:yield this._getAllFeaturesQueryEngineResult(G));const fa=new Set;for(var l of lb)fa.add(ib.getObjectId(l));
const la=r.isSome(X)?X.items:yield this._reschedule(()=>this._getAllFeatures(),ka);l=yield this._reschedule(b._asyncToGenerator(function*(){const va=yield U.getSpatialQueryOperator(Ha,Sa,ta.geometryType,ta.hasZ,ta.hasM),R=yield ta._runSpatialFilter(la,W=>!fa.has(ib.getObjectId(W))||va(ib.getGeometry(W)),ka);return new L.QueryEngineResult(R,G,ta)}),ka);return Oa(l)}if(r.isSome(X)){const fa=new O.PositionHint;lb=lb.filter(la=>0<=O.indexOf(X.items,la,X.items.length,fa))}if(!lb.length)return Oa=new L.QueryEngineResult([],
G,this),jb&&this._geometryQueryCache.put(jb,Oa.items,1),Oa;if(this._canExecuteSinglePass(Sa,G))return Oa(new L.QueryEngineResult(lb,G,this));const H=yield U.getSpatialQueryOperator(Ha,Sa,this.geometryType,this.hasZ,this.hasM);l=yield this._runSpatialFilter(lb,fa=>H(ib.getGeometry(fa)),ka);return Oa(new L.QueryEngineResult(l,G,this))});return function(G,X,ka){return v.apply(this,arguments)}}();P._executeAggregateIdsQuery=function(v){if(0!==v.items.length&&v.query.aggregateIds&&v.query.aggregateIds.length&&
!r.isNone(this.aggregateAdapter)){var G=new Set;for(const ka of v.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ka).forEach(ta=>G.add(ta));var X=this.featureAdapter.getObjectId;v.items=v.items.filter(ka=>G.has(X(ka)))}};P._executeObjectIdsQuery=function(v){if(0!==v.items.length&&v.query.objectIds&&v.query.objectIds.length){var G=new Set(v.query.objectIds),X=this.featureAdapter.getObjectId;v.items=v.items.filter(ka=>G.has(X(ka)))}};P._executeTimeQuery=function(v){if(0!==v.items.length){var G=
S.getTimeOperator(this.timeInfo,v.query.timeExtent,this.featureAdapter);r.isNone(G)||(v.items=v.items.filter(G))}};P._executeAttributesQuery=function(v){if(0!==v.items.length){var G=n.getWhereClause(v.query.where,this.fieldsIndex);if(G){if(!G.isStandardized)throw new TypeError("Where clause is not standardized");v.items=v.items.filter(X=>G.testFeature(X,this.featureAdapter))}}};P._runSpatialFilter=function(){var v=b._asyncToGenerator(function*(G,X,ka){var ta=this;if(!X)return G;if(r.isNone(this._frameTask))return G.filter(Fa=>
X(Fa));let za=0;const Ea=[],Ha=function(){var Fa=b._asyncToGenerator(function*(Ua){for(;za<G.length;){const Oa=G[za++];X(Oa)&&(Ea.push(Oa),Ua.madeProgress());Ua.done&&(yield ta._reschedule(Sa=>Ha(Sa),ka))}});return function(Ua){return Fa.apply(this,arguments)}}();return this._reschedule(Fa=>Ha(Fa),ka).then(()=>Ea)});return function(G,X,ka){return v.apply(this,arguments)}}();P._filterLatest=function(v){const {trackIdField:G,startTimeField:X,endTimeField:ka}=this.timeInfo,ta=ka||X,za=new Map,Ea=this.featureAdapter.getAttribute;
for(const Ha of v.items){const Fa=Ea(Ha,G),Ua=Ea(Ha,ta),Oa=za.get(Fa);(!Oa||Ua>Ea(Oa,ta))&&za.set(Fa,Ha)}v.items=Array.from(za.values())};P._canExecuteSinglePass=function(v,G){({spatialRel:G}=G);return U.canQueryWithRBush(v)&&("esriSpatialRelEnvelopeIntersects"===G||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G||"esriSpatialRelWithin"===G))};P._project=function(){var v=b._asyncToGenerator(function*(G,X){if(!X||x.equals(this.spatialReference,
X))return G;const ka=this.featureAdapter;X=yield u.projectMany(G.items.map(ta=>B.getGeometry(this.geometryType,this.hasZ,this.hasM,ka.getGeometry(ta))),this.spatialReference,X);G.items=X.map((ta,za)=>ka.cloneWithGeometry(G.items[za],e.convertFromGeometry(ta,this.hasZ,this.hasM)));return G});return function(G,X){return v.apply(this,arguments)}}();P._getQueryBBoxes=function(v){if(U.canQueryWithRBush(v)){if(y.isExtent(v))return[A.fromValues(v.xmin,v.ymin,v.xmax,v.ymax)];if(y.isPolygon(v))return v.rings.map(G=>
A.fromValues(Math.min(G[0][0],G[2][0]),Math.min(G[0][1],G[2][1]),Math.max(G[0][0],G[2][0]),Math.max(G[0][1],G[2][1])))}return[Q.getBoundsXY(A.create(),v)]};P._searchFeatures=function(){var v=b._asyncToGenerator(function*(G){const X=new Set;yield Promise.all(G.map(ka=>this.featureStore.forEachInBounds(ka,ta=>X.add(ta))));G=Array.from(X.values());X.clear();return G});return function(G){return v.apply(this,arguments)}}();P._checkStatisticsSupport=function(){var v=b._asyncToGenerator(function*(G,X){if(0>
(G.distance??0)||null!=G.geometryPrecision||G.multipatchOption||G.pixelSize||G.relationParam||G.text||G.outStatistics||G.groupByFieldsForStatistics||G.having||G.orderByFields)throw new N("feature-store:unsupported-query","Unsupported query options",{query:G});this._checkAttributesQuerySupport(G);return Promise.all([this._checkStatisticsParamsSupport(X),U.checkSpatialQuerySupport(G,this.geometryType,this.spatialReference),u.checkProjectionSupport(this.spatialReference,G.outSR)]).then(()=>G)});return function(G,
X){return v.apply(this,arguments)}}();P._checkStatisticsParamsSupport=function(){var v=b._asyncToGenerator(function*(G){var X=[];G.valueExpression&&({arcadeUtils:X}=yield q.loadArcade(),X=X.extractFieldNames(G.valueExpression));G.field&&X.push(G.field);G.field2&&X.push(G.field2);G.field3&&X.push(G.field3);G.normalizationField&&X.push(G.normalizationField);if(!X.length)throw new N("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:G});n.validateFields(this.fieldsIndex,
X,"params contains missing fields")});return function(G){return v.apply(this,arguments)}}();P._checkQuerySupport=function(){var v=b._asyncToGenerator(function*(G){if(0>(G.distance??0)||null!=G.geometryPrecision||G.multipatchOption||G.pixelSize||G.relationParam||G.text)throw new N("feature-store:unsupported-query","Unsupported query options",{query:G});this._checkAttributesQuerySupport(G);this._checkStatisticsQuerySupport(G);return Promise.all([U.checkSpatialQuerySupport(G,this.geometryType,this.spatialReference),
u.checkProjectionSupport(this.spatialReference,G.outSR)]).then(()=>G)});return function(G){return v.apply(this,arguments)}}();P._checkAttributesQuerySupport=function(v){const {outFields:G,orderByFields:X,returnDistinctValues:ka,outStatistics:ta}=v,za=ta?ta.map(Ea=>Ea.outStatisticFieldName&&Ea.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(X&&0<X.length){const Ea=X.map(Ha=>{const Fa=Ha.toLowerCase();return Fa.includes(" asc")?Fa.split(" asc")[0]:Fa.includes(" desc")?Fa.split(" desc")[0]:
Ha}).filter(Ha=>!za.includes(Ha));n.validateFields(this.fieldsIndex,Ea,"orderByFields contains missing fields")}if(G&&0<G.length)n.validateFields(this.fieldsIndex,G,"outFields contains missing fields");else if(ka)throw new N("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:v});n.validateWhere(this.fieldsIndex,v.where)};P._checkStatisticsQuerySupport=function(v){const {outStatistics:G,groupByFieldsForStatistics:X,having:ka}=v;var ta=X&&X.length,za=G&&
G.length;if(ka){if(!ta||!za)throw new N("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:v});n.validateHaving(this.fieldsIndex,ka,G)}if(za&&d(G)){za=G.map(Ea=>Ea.onStatisticField).filter(Boolean);n.validateFields(this.fieldsIndex,za,"onStatisticFields contains missing fields");ta&&n.validateFields(this.fieldsIndex,X,"groupByFieldsForStatistics contains missing fields");for(const Ea of G){const {onStatisticField:Ha,statisticType:Fa}=
Ea;if(("percentile_disc"===Fa||"percentile_cont"===Fa)&&"statisticParameters"in Ea){if({statisticParameters:ta}=Ea,!ta)throw new N("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:Ea,query:v});}else if("count"!==Fa&&Ha&&n.hasInvalidFieldType(Ha,this.fieldsIndex))throw new N("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:Ea,query:v});}}};P._getQueryEngineResultForStats=function(){var v=b._asyncToGenerator(function*(G,
X,ka){G=F.clone(G);try{G=yield this._schedule(()=>B.normalizeQuery(G,this.definitionExpression,this.spatialReference),ka);G=yield this._reschedule(()=>this._checkStatisticsSupport(G,X),ka);const ta=yield this._reschedule(()=>this._executeSceneFilterQuery(G,ka),ka),za=yield this._reschedule(()=>this._executeGeometryQuery(G,ta,ka),ka);yield this._reschedule(()=>this._executeAggregateIdsQuery(za),ka);yield this._reschedule(()=>this._executeObjectIdsQuery(za),ka);yield this._reschedule(()=>this._executeTimeQuery(za),
ka);yield this._reschedule(()=>this._executeAttributesQuery(za),ka);return za}catch(ta){if(ta!==B.QUERY_ENGINE_EMPTY_RESULT)throw ta;return new L.QueryEngineResult([],G,this)}});return function(G,X,ka){return v.apply(this,arguments)}}();b._createClass(K,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}}]);return K}();c.Feature=function(K,P=null,v,G,X){this.attributes=K;this.geometry=v;this.centroid=G;this.filterFlags=X;this.groupId=-1;this.displayId=P};c.QueryEngine=I;
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(c,b,O,N){c.RemoveMode=void 0;(function(C){C[C.ALL=0]="ALL";C[C.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));let F=function(){function C(k,h,A){this._namespace=k;this._storage=h;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";A&&(this._storage.registerRemoveFunc(this._namespace,
A),this._removeFunc=!0)}var w=C.prototype;w.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};w.resetHitRate=function(){this._hit=this._miss=0};w.put=function(k,h,A,Q=0){this._storage.put(this._namespace+k,h,A,Q)};w.get=function(k){k=this._storage.get(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};w.pop=function(k){k=this._storage.pop(this._namespace+k);
void 0===k?++this._miss:++this._hit;return k};w.updateSize=function(k,h,A){this._storage.updateSize(this._namespace+k,h,A)};w.clear=function(){this._storage.clear(this._namespace)};w.clearAll=function(){this._storage.clearAll()};w.getStats=function(){return this._storage.getStats()};w.resetStats=function(){this._storage.resetStats()};b._createClass(C,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return C}(),r=function(){function C(k=10485760){this._maxSize=k;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new N;this._users=new N}var w=C.prototype;w.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};w.register=function(k){this._users.push(k)};w.deregister=function(k){this._users.removeUnordered(k)};w.registerRemoveFunc=
function(k,h){this._removeFuncs.push([k,h])};w.deregisterRemoveFunc=function(k){this._removeFuncs.filterInPlace(h=>h[0]!==k)};w.put=function(k,h,A,Q){const y=this._db.get(k);y&&(this._size-=y.size,this._db.delete(k),y.entry!==h&&this._notifyRemove(k,y.entry,c.RemoveMode.ALL));A>this._maxSize?this._notifyRemove(k,h,c.RemoveMode.ALL):void 0===h?console.warn("Refusing to cache undefined entry "):!A||0>A?console.warn("Refusing to cache entry with invalid size "+A):(Q=1+Math.max(Q,-3)- -3,this._db.set(k,
{entry:h,size:A,lifetime:Q,lives:Q}),this._size+=A,this._checkSizeLimit())};w.updateSize=function(k,h,A){const Q=this._db.get(k);if(Q&&Q.entry===h){for(this._size-=Q.size;A>this._maxSize;)if(A=this._notifyRemove(k,h,c.RemoveMode.SOME),!(O.isSome(A)&&0<A)){this._db.delete(k);return}Q.size=A;this._size+=A;this._checkSizeLimit()}};w.pop=function(k){const h=this._db.get(k);if(h)return this._size-=h.size,this._db.delete(k),++this._hit,h.entry;++this._miss};w.get=function(k){const h=this._db.get(k);if(void 0===
h)++this._miss;else return this._db.delete(k),h.lives=h.lifetime,this._db.set(k,h),++this._hit,h.entry};w.getStats=function(){const k={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},h={},A=[];this._db.forEach((g,x)=>{const e=g.lifetime;A[e]=(A[e]||0)+g.size;this._users.forAll(n=>{n=n.namespace;x.startsWith(n)&&(h[n]=(h[n]||0)+g.size)})});const Q={};this._users.forAll(g=>{const x=g.namespace;
!isNaN(g.hitRate)&&0<g.hitRate?(h[x]=h[x]||0,Q[x]=Math.round(100*g.hitRate)+"%"):Q[x]="0%"});var y=Object.keys(h);y.sort((g,x)=>h[x]-h[g]);y.forEach(g=>k[g]=Math.round(h[g]/2**20)+"MB / "+Q[g]);for(y=A.length-1;0<=y;--y){const g=A[y];g&&(k["Priority "+(y+-3-1)]=Math.round(g/this.size*100)+"%")}return k};w.resetStats=function(){this._hit=this._miss=0;this._users.forAll(k=>k.resetHitRate())};w.clear=function(k){this._db.forEach((h,A)=>{A.startsWith(k)&&(this._size-=h.size,this._db.delete(A),this._notifyRemove(A,
h.entry,c.RemoveMode.ALL))})};w.clearAll=function(){this._db.forEach((k,h)=>this._notifyRemove(h,k.entry,c.RemoveMode.ALL));this._size=0;this._db.clear()};w._getHitRate=function(){return this._hit/(this._hit+this._miss)};w._notifyRemove=function(k,h,A){let Q;this._removeFuncs.some(y=>k.startsWith(y[0])?(y=y[1](h,A),"number"===typeof y&&(Q=y),!0):!1);return Q};w._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [k,h]of this._db){this._db.delete(k);if(1>=h.lives){this._size-=h.size;
const A=this._notifyRemove(k,h.entry,c.RemoveMode.SOME);O.isSome(A)&&0<A&&(this._size+=A,h.lives=h.lifetime,h.size=A,this._db.set(k,h))}else--h.lives,this._db.set(k,h);if(this._size<=.9*this.maxSize)break}};b._createClass(C,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(k){this._maxSize=Math.max(k,0);this._checkSizeLimit()}}]);return C}();c.MIN_PRIORITY=-3;c.MemCache=F;c.MemCacheStorage=r;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(c,b,O){function N(k,h){return k?C.get(k,h):null}function F(k,h,A,Q=!0){const y=[];for(const g of h)if("*"!==g&&!k.has(g))if(Q){h=r(g);try{const x=N(h,k);if(!x)throw new b("feature-store:unsupported-query","invalid SQL expression",{where:h});if(!x.isStandardized)throw new b("feature-store:unsupported-query","expression is not standard",
{clause:x});F(k,x.fieldNames,"expression contains missing fields")}catch(x){if((h=x&&x.details)&&(h.clause||h.where))throw x;h&&h.missingFields?y.push(...h.missingFields):y.push(g)}}else y.push(g);if(y.length)throw new b("feature-store:unsupported-query",A,{missingFields:y});}function r(k){return k.split(" as ")[0]}const C=new O.WhereClauseCache(50,500),w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
c.getAliasFromFieldName=function(k){return k.split(" as ")[1]};c.getExpressionFromFieldName=r;c.getWhereClause=N;c.hasInvalidFieldType=function(k,h){return(k=h.get(k))?!w.has(k.type):!1};c.validateFields=F;c.validateHaving=function(k,h,A){if(!h)return!0;const Q=C.get(h,k);if(!Q)throw new b("feature-store:unsupported-query","invalid SQL expression",{having:h});if(!Q.isAggregate)throw new b("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:h});F(k,Q.fieldNames,
"having contains missing fields");if(!Q.getExpressions().every(y=>{const {aggregateType:g,field:x}=y,e=k.get(x)?.name;return A.some(n=>{const {onStatisticField:u,statisticType:M}=n;return k.get(u)?.name===e&&M.toLowerCase().trim()===g})}))throw new b("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:h});return!0};c.validateWhere=function(k,h){if(!h)return!0;const A=C.get(h,k);if(!A)throw new b("feature-store:unsupported-query","invalid SQL expression",
{where:h});if(!A.isStandardized)throw new b("feature-store:unsupported-query","where clause is not standard",{where:h});F(k,A.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(c,b,O){let N=function(){function F(r,C){this._cache=new b(r);this._invalidCache=new b(C)}F.prototype.get=function(r,C){const w=`${C.uid}:${r}`,k=this._cache.get(w);
if(k)return k;if(void 0!==this._invalidCache.get(w))return null;try{const h=O.WhereClause.create(r,C);this._cache.put(w,h);return h}catch{return this._invalidCache.put(w,null),null}};return F}();c.WhereClauseCache=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(c){return function(){function b(N,F){this._storage=new c.MemCacheStorage;this._storage.maxSize=N;F&&this._storage.registerRemoveFunc("",F)}var O=b.prototype;
O.put=function(N,F){this._storage.put(N,F,1,1)};O.pop=function(N){return this._storage.pop(N)};O.get=function(N){return this._storage.get(N)};O.clear=function(){this._storage.clearAll()};O.destroy=function(){this._storage.destroy()};return b}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(c,b,O,N,F,r){function C(K,P){K+="";return K.length>=P?K:Array(P-K.length+
1).join("0")+K}function w(K,P,v="0",G="0",X="0",ka="0",ta="",za="0",Ea="0"){return"+"===ta||"-"===ta?(K=`${C(parseInt(K,10),4)}-${C(parseInt(P,10),2)}-${C(parseInt(v,10),2)}`,P="",10>parseFloat(ka)&&(P="0"),G=`${C(parseInt(G,10),2)}:${C(parseInt(X,10),2)}:${P+parseFloat(ka).toString()}`,ta=`${ta}${C(parseInt(za,10),2)}:${C(parseInt(Ea,10),2)}`,new Date(K+"T"+G+ta)):new Date(parseInt(K,10),parseInt(P,10)-1,parseInt(v,10),parseInt(G,10),parseInt(X,10),parseFloat(ka))}function k(K){let P=S.exec(K);if(null!==
P){const [,v,G,X,ka,ta,za]=P;return w(v,G,X,ka,ta,za)}P=B.exec(K);if(null!==P){const [,v,G,X,ka,ta,za,Ea,Ha,Fa]=P;return w(v,G,X,ka,ta,za,Ea,Ha,Fa)}P=z.exec(K);if(null!==P){const [,v,G,X,ka,ta,za,Ea,Ha]=P;return w(v,G,X,ka,ta,"0",za,Ea,Ha)}P=q.exec(K);if(null!==P){const [,v,G,X,ka,ta]=P;return w(v,G,X,ka,ta)}P=U.exec(K);if(null!==P){const [,v,G,X]=P;return w(v,G,X)}throw Error("SQL Invalid Timestamp");}function h(K){const P=U.exec(K);if(null===P)try{return k(K)}catch{throw Error("SQL Invalid Date");
}const [,v,G,X]=P;return new Date(parseInt(v,10),parseInt(G,10)-1,parseInt(X,10))}function A(K){return Array.isArray(K)?K:[K]}function Q(K){return null!==K?!0!==K:null}function y(K,P){return null!=K&&null!=P?!0===K&&!0===P:!1===K||!1===P?!1:null}function g(K,P){return null!=K&&null!=P?!0===K||!0===P:!0===K||!0===P?!0:null}function x(K,P){if(null==K)return null;let v=!1;for(const G of P)if(null==G)v=null;else if(K===G){v=!0;break}return v}function e(K,P,v){if(null==K)return null;let G="",X=D.Normal;
for(let ka=0;ka<P.length;ka++){const ta=P.charAt(ka);switch(X){case D.Normal:ta===v?X=D.Escaped:G="-[]/{}()*+?.\\^$|".includes(ta)?G+("\\"+ta):"%"===ta?G+".*":"_"===ta?G+".":G+ta;break;case D.Escaped:G="-[]/{}()*+?.\\^$|".includes(ta)?G+("\\"+ta):G+ta,X=D.Normal}}return(new RegExp("^"+G+"$","m")).test(K)}function n(K){return K instanceof Date?K.valueOf():K}function u(K,P,v){if(null==P||null==v)return null;P=n(P);v=n(v);switch(K){case "\x3c\x3e":return P!==v;case "\x3d":return P===v;case "\x3e":return P>
v;case "\x3c":return P<v;case "\x3e\x3d":return P>=v;case "\x3c\x3d":return P<=v}}function M(K,P,v){if("||"===K)return F.evaluateFunction("concat",[P,v]);if(P instanceof F.SqlInterval)if(v instanceof Date)switch(K){case "+":return new Date(P.valueInMilliseconds()+v.getTime());case "-":return P.valueInMilliseconds()-v.getTime();case "*":return P.valueInMilliseconds()*v.getTime();case "/":return P.valueInMilliseconds()/v.getTime()}else if(v instanceof F.SqlInterval)switch(K){case "+":return F.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()+
v.valueInMilliseconds());case "-":return F.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()-v.valueInMilliseconds());case "*":return P.valueInMilliseconds()*v.valueInMilliseconds();case "/":return P.valueInMilliseconds()/v.valueInMilliseconds()}else P=P.valueInMilliseconds();else if(v instanceof F.SqlInterval)if(P instanceof Date)switch(K){case "+":return new Date(v.valueInMilliseconds()+P.getTime());case "-":return new Date(P.getTime()-v.valueInMilliseconds());case "*":return P.getTime()*
v.valueInMilliseconds();case "/":return P.getTime()/v.valueInMilliseconds()}else v=v.valueInMilliseconds();else if(P instanceof Date&&"number"===typeof v)switch(v*=864E5,P=P.getTime(),K){case "+":return new Date(P+v);case "-":return new Date(P-v);case "*":return new Date(P*v);case "/":return new Date(P/v)}else if(v instanceof Date&&"number"===typeof P)switch(P*=864E5,v=v.getTime(),K){case "+":return new Date(P+v);case "-":return new Date(P-v);case "*":return new Date(P*v);case "/":return new Date(P/
v)}switch(K){case "+":return P+v;case "-":return P-v;case "*":return P*v;case "/":return P/v}}function L(K,P,v,G){K=G.getAttribute(K,P);return null!=K&&1===v[P]?new Date(K):K}const U=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
E=new Set(["current_timestamp","current_date","current_time"]);let d=function(){function K(){}K.makeBool=function(P){return!0===P};K.featureValue=function(P,v,G,X){return L(P,v,G,X)};K.equalsNull=function(P){return null===P};K.applyLike=function(P,v,G){return e(P,v,G)};K.ensureArray=function(P){return A(P)};K.applyIn=function(P,v){return x(P,v)};K.currentDate=function(){const P=new Date;P.setHours(0,0,0,0);return P};K.makeSqlInterval=function(P,v,G){return F.SqlInterval.createFromValueAndQualifer(P,
v,G)};K.convertInterval=function(P){return P instanceof F.SqlInterval?P.valueInMilliseconds():P};K.currentTimestamp=function(){return new Date};K.compare=function(P,v,G){return u(P,v,G)};K.calculate=function(P,v,G){return M(P,v,G)};K.makeComparable=function(P){return n(P)};K.evaluateFunction=function(P,v){return F.evaluateFunction(P,v)};K.lookup=function(P,v){P=v[P];return void 0===P?null:P};K.between=function(P,v){return null==P||null==v[0]||null==v[1]?null:P>=v[0]&&P<=v[1]};K.notbetween=function(P,
v){return null==P||null==v[0]||null==v[1]?null:P<v[0]||P>v[1]};K.ternaryNot=function(P){return Q(P)};K.ternaryAnd=function(P,v){return y(P,v)};K.ternaryOr=function(P,v){return g(P,v)};return K}(),p=function(){function K(v,G){this.fieldsIndex=G;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(v);const {isStandardized:X,isAggregate:ka,referencedFieldNames:ta}=this._extractExpressionInfo(G);this._referencedFieldNames=ta;this.isStandardized=X;this.isAggregate=
ka}K.create=function(v,G){return new K(v,G)};var P=K.prototype;P.testSet=function(v,G=I){const X={};for(const ka of this.fieldNames)X[ka]=v.map(ta=>G.getAttribute(ta,ka));return!!this._evaluateNode(this.parseTree,{attributes:X},I)};P.calculateValue=function(v,G=I){v=this._evaluateNode(this.parseTree,v,G);return v instanceof F.SqlInterval?v.valueInMilliseconds()/864E5:v};P.calculateValueCompiled=function(v,G=I){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(v,this.parameters,
G,this._datefields);if(O("esri-csp-restrictions"))return this.calculateValue(v,G);this._compileMe();return this.parseTree._compiledVersion(v,this.parameters,G,this._datefields)};P.testFeature=function(v,G=I){return!!this._evaluateNode(this.parseTree,v,G)};P.testFeatureCompiled=function(v,G=I){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(v,this.parameters,G,this._datefields);if(O("esri-csp-restrictions"))return this.testFeature(v,G);this._compileMe();return!!this.parseTree._compiledVersion(v,
this.parameters,G,this._datefields)};P.getFunctions=function(){const v=new Set;this._visitAll(this.parseTree,G=>{"function"===G.type&&v.add(G.name.toLowerCase())});return Array.from(v)};P.getExpressions=function(){const v=new Map;this._visitAll(this.parseTree,G=>{if("function"===G.type){const X=G.name.toLowerCase();G=G.args.value[0];if("column-reference"===G.type){G=G.column;const ka=`${X}-${G}`;v.has(ka)||v.set(ka,{aggregateType:X,field:G})}}});return[...v.values()]};P.getVariables=function(){const v=
new Set;this._visitAll(this.parseTree,G=>{"parameter"===G.type&&v.add(G.value.toLowerCase())});return Array.from(v)};P._compileMe=function(){const v="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",v)).bind(d)};P._extractExpressionInfo=function(v){const G=[],X=new Set;let ka=!0,ta=!0;this._visitAll(this.parseTree,za=>{switch(za.type){case "column-reference":const Ea=v?.get(za.column);
let Ha,Fa;Ea?Ha=Fa=Ea.name??"":(Fa=za.column,Ha=Fa.toLowerCase());Ea&&Ea.name&&("date"===Ea.type||"esriFieldTypeDate"===Ea.type)&&(this._datefields[Ea.name]=1);X.has(Ha)||(X.add(Ha),G.push(Fa));za.column=Fa;break;case "function":const {name:Ua,args:Oa}=za;za=Oa.value.length;ka&&(ka=F.isStandardized(Ua,za));ta&&(ta=N.isAggregate(Ua,za))}});return{referencedFieldNames:Array.from(G),isStandardized:ka,isAggregate:ta}};P._visitAll=function(v,G){if(null!=v)switch(G(v),v.type){case "when-clause":this._visitAll(v.operand,
G);this._visitAll(v.value,G);break;case "case-expression":for(const X of v.clauses)this._visitAll(X,G);"simple"===v.format&&this._visitAll(v.operand,G);null!==v.else&&this._visitAll(v.else,G);break;case "expression-list":for(const X of v.value)this._visitAll(X,G);break;case "unary-expression":this._visitAll(v.expr,G);break;case "binary-expression":this._visitAll(v.left,G);this._visitAll(v.right,G);break;case "function":this._visitAll(v.args,G)}};P.evaluateNodeToJavaScript=function(v){switch(v.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(v.value)+", "+JSON.stringify(v.qualifier)+","+JSON.stringify(v.op)+")";case "case-expression":var G="";if("simple"===v.format){var X="this.makeComparable("+this.evaluateNodeToJavaScript(v.operand)+")";G="( ";for(let ka=0;ka<v.clauses.length;ka++)G+=" ("+X+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(v.clauses[ka].operand)+")) ? ("+this.evaluateNodeToJavaScript(v.clauses[ka].value)+") : "}else for(G="( ",X=0;X<v.clauses.length;X++)G+=" this.makeBool("+
this.evaluateNodeToJavaScript(v.clauses[X].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(v.clauses[X].value)+") : ";G=null!==v.else?G+this.evaluateNodeToJavaScript(v.else):G+"null";return G+" )";case "parameter":return"this.lookup("+JSON.stringify(v.value.toLowerCase())+",lookups)";case "expression-list":G="[";for(X of v.value)"["!==G&&(G+=","),G+=this.evaluateNodeToJavaScript(X);return G+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(v.expr)+")";
case "binary-expression":switch(v.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+" )";case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")";case "ISNOT":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(v.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(v.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(v.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+","+JSON.stringify(v.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(v.operator)+","+this.evaluateNodeToJavaScript(v.left)+","+this.evaluateNodeToJavaScript(v.right)+")"}throw Error("Not Supported Operator "+v.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(v.value);case "date":return"(new Date("+h(v.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+k(v.value).getTime().toString()+"))";case "current-time":return"date"===v.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(v.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(v.name)+","+this.evaluateNodeToJavaScript(v.args)+")"}throw Error("Unsupported sql syntax "+v.type);};P._evaluateNode=function(v,G,X){switch(v.type){case "interval":return G=
this._evaluateNode(v.value,G,X),F.SqlInterval.createFromValueAndQualifer(G,v.qualifier,v.op);case "case-expression":if("simple"===v.format){var ka=n(this._evaluateNode(v.operand,G,X));for(var ta=0;ta<v.clauses.length;ta++)if(ka===n(this._evaluateNode(v.clauses[ta].operand,G,X)))return this._evaluateNode(v.clauses[ta].value,G,X)}else for(ka=0;ka<v.clauses.length;ka++)if(!0===this._evaluateNode(v.clauses[ka].operand,G,X))return this._evaluateNode(v.clauses[ka].value,G,X);return null!==v.else?this._evaluateNode(v.else,
G,X):null;case "parameter":return this.parameters[v.value.toLowerCase()];case "expression-list":ka=[];for(ta of v.value)ka.push(this._evaluateNode(ta,G,X));return ka;case "unary-expression":return Q(this._evaluateNode(v.expr,G,X));case "binary-expression":switch(v.operator){case "AND":return y(this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,G,X));case "OR":return g(this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,G,X));case "IS":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(v.left,G,X);case "ISNOT":if("null"!==v.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(v.left,G,X);case "IN":return ka=A(this._evaluateNode(v.right,G,X)),x(this._evaluateNode(v.left,G,X),ka);case "NOT IN":return ka=A(this._evaluateNode(v.right,G,X)),Q(x(this._evaluateNode(v.left,G,X),ka));case "BETWEEN":return ka=this._evaluateNode(v.left,G,X),v=this._evaluateNode(v.right,G,X),null==ka||null==v[0]||null==v[1]?null:ka>=n(v[0])&&ka<=
n(v[1]);case "NOTBETWEEN":return ka=this._evaluateNode(v.left,G,X),v=this._evaluateNode(v.right,G,X),null==ka||null==v[0]||null==v[1]?null:ka<n(v[0])||ka>n(v[1]);case "LIKE":return e(this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,G,X),v.escape);case "NOT LIKE":return Q(e(this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,G,X),v.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return u(v.operator,this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,
G,X));case "-":case "+":case "*":case "/":case "||":return M(v.operator,this._evaluateNode(v.left,G,X),this._evaluateNode(v.right,G,X))}case "null":case "boolean":case "string":case "number":return v.value;case "date":return h(v.value);case "timestamp":return k(v.value);case "current-time":return G=new Date,"date"===v.mode&&G.setHours(0,0,0,0),G;case "column-reference":return L(G,v.column,this._datefields,X);case "data-type":return v.value;case "function":return G=this._evaluateNode(v.args,G,X),this.isAggregate?
N.aggregateFunction(v.name,G):F.evaluateFunction(v.name,G)}throw Error("Unsupported sql syntax "+v.type);};b._createClass(K,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,v=>{"current-time"===v.type?this._hasDateFunctions=!0:"function"===v.type&&(this._hasDateFunctions=this._hasDateFunctions||E.has(v.name.toLowerCase()))});
return this._hasDateFunctions}}]);return K}();var D;(function(K){K[K.Normal=0]="Normal";K[K.Escaped=1]="Escaped"})(D||(D={}));const I={getAttribute(K,P){return(K&&"object"===typeof K.attributes?K.attributes:K)[P]}};c.WhereClause=p;c.defaultAttributeAdapter=I;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(c){function b(F){let r=0;for(let C=0;C<F.length;C++)r+=F[C];return r/F.length}function O(F){const r=b(F),
C=F.length;let w=0;for(const k of F)w+=(k-r)**2;return 1<C?w/(C-1):0}const N={min:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:Math.min.apply(Math,F[0])},max:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:Math.max.apply(Math,F[0])},avg:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:b(F[0])},sum:{minParams:1,maxParams:1,evaluate:F=>{if(null==F[0])F=null;else{F=F[0];let r=0;for(let C=0;C<F.length;C++)r+=F[C];F=r}return F}},stddev:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:
Math.sqrt(O(F[0]))},count:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:F[0].length},var:{minParams:1,maxParams:1,evaluate:F=>null==F[0]?null:O(F[0])}};c.aggregateFunction=function(F,r){const C=N[F.toLowerCase()];if(null==C)throw Error("Function Not Recognised");if(r.length<C.minParams||r.length>C.maxParams)throw Error(`Invalid Parameter count for call to ${F.toUpperCase()}`);return C.evaluate(r)};c.isAggregate=function(F,r){F=N[F.toLowerCase()];return null!=F&&r>=F.minParams&&r<=F.maxParams};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(c,b,O,N){function F(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function r(k,h){if(k instanceof Date)return h?F(k):k;if("string"===typeof k||k instanceof String)if(k=N.DateTime.fromSQL(k),k.isValid)return h?F(k.toJSDate()):k.toJSDate();throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);
}let C=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(h){if(null!==h.precision||null!==h.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(h,A){A.includes(".")?(A=A.split("."),h.second=parseFloat(A[0]),h.millis=parseInt(A[1],10)):h.second=parseFloat(A)};k.createFromMilliseconds=function(h){const A=new k;A.second=h/1E3;return A};k.createFromValueAndQualifer=
function(h,A,Q){let y=null;const g=new k;g.op="-"===Q?"-":"+";if("interval-period"===A.type){k._fixDefaults(A);Q=RegExp("^[0-9]{1,}$");if("year"===A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");if("second"===A.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(h))k._parseSecondsComponent(g,h);else throw Error("Illegal Interval");else if(Q.test(h))g[A.period]=parseFloat(h);else throw Error("Illegal Interval");}else{k._fixDefaults(A.start);k._fixDefaults(A.end);if("year"===
A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":y=RegExp("^[0-9]{1,} [0-9]{1,}$");if(y.test(h))g[A.start.period]=parseFloat(h.split(" ")[0]),g[A.end.period]=parseFloat(h.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":y=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(y.test(h))g[A.start.period]=
parseFloat(h.split(" ")[0]),h=h.split(" ")[1].split(":"),g.hour=parseFloat(h[0]),g.minute=parseFloat(h[1]);else throw Error("Illegal Interval");break;case "second":y=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(y.test(h))g[A.start.period]=parseFloat(h.split(" ")[0]),h=h.split(" ")[1].split(":"),g.hour=parseFloat(h[0]),g.minute=parseFloat(h[1]),k._parseSecondsComponent(g,h[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;
case "hour":switch(A.end.period){case "minute":y=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(y.test(h))g.hour=parseFloat(h.split(":")[0]),g.minute=parseFloat(h.split(":")[1]);else throw Error("Illegal Interval");break;case "second":y=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(y.test(h))h=h.split(":"),g.hour=parseFloat(h[0]),g.minute=parseFloat(h[1]),k._parseSecondsComponent(g,h[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(A.end.period){case "second":y=
RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(y.test(h))h=h.split(":"),g.minute=parseFloat(h[0]),k._parseSecondsComponent(g,h[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return g};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const w={extract:{minParams:2,
maxParams:2,evaluate:([k,h])=>{if(null==h)return null;if(h instanceof Date)switch(k.toUpperCase()){case "SECOND":return h.getSeconds();case "MINUTE":return h.getMinutes();case "HOUR":return h.getHours();case "DAY":return h.getDate();case "MONTH":return h.getMonth()+1;case "YEAR":return h.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [h,A]=k;return null==h||null==A?null:h.toString().substring(A-1)}if(3===
k.length){const [h,A,Q]=k;return null==h||null==A||null==Q?null:0>=Q?"":h.toString().substring(A-1,A+Q-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,h])=>null==k||null==h?null:h.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var h=3===k.length,A=h?k[1]:" ";h=h?k[2]:k[1];if(null==A||null==h)return null;A=`(${O.escapeRegExpString(A)})`;switch(k[0]){case "BOTH":return h.replace(new RegExp(`^${A}*|${A}*$`,"g"),"");case "LEADING":return h.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return h.replace(new RegExp(`${A}*$`,
"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?
null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,
evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const h=k[0];k=2===k.length?10**k[1]:1;return null==h?null:Math.round(h*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},
concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let h="";for(let A=0;A<k.length;A++){if(null==k[A])return null;h+=k[A].toString()}return h}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const h of k)if(null!==h)return h;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},
sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const h=k[0];k=k[1];return(h instanceof Date?h.valueOf():h)===(k instanceof Date?k.valueOf():k)?null:h}},cast:{minParams:2,maxParams:2,evaluate:k=>{var h=k[0];k=k[1];if(null===h)return null;switch(k.type){case "integer":h=parseInt(h,10);if(isNaN(h))throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);return h;
case "smallint":h=parseInt(h,10);if(isNaN(h))throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);if(32767<h||-32767>h)throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);return h;case "float":case "real":h=parseFloat(h);if(isNaN(h))throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);return h;case "date":return r(h,!0);case "timestamp":return r(h,!1);case "varchar":h=h.toString();if(h.length>k.size)throw new b.SqlError(b.SqlErrorCodes.CannotCastValue);return h;default:throw new b.SqlError(b.SqlErrorCodes.InvalidDataType);
}}}};c.SqlInterval=C;c.evaluateFunction=function(k,h){const A=w[k.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(h.length<A.minParams||h.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return A.evaluate(h)};c.isStandardized=function(k,h){k=w[k.toLowerCase()];return null!=k&&h>=k.minParams&&h<=k.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(c,b,O){c.SqlErrorCodes=void 0;(function(w){w.InvalidFunctionParameters="InvalidFunctionParameters";w.UnsupportedSqlFunction="UnsupportedSqlFunction";w.UnsupportedOperator="UnsupportedOperator";w.UnsupportedSyntax="UnsupportedSyntax";w.UnsupportedIsRhs="UnsupportedIsRhs";w.UnsupportedIsLhs="UnsupportedIsLhs";w.InvalidDataType="InvalidDataType";w.CannotCastValue="CannotCastValue";w.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||
(c.SqlErrorCodes={}));const N={[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",
[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let F=function(w){function k(h,A){h=w.call(this,O.doSubstitutions(N[h],A))||this;h.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(h),k);return h}b._inheritsLoose(k,w);return k}(b._wrapNativeSuper(Error));
c.FeatureSetErrorCodes=void 0;(function(w){w.NeverReach="NeverReach";w.NotImplemented="NotImplemented";w.Cancelled="Cancelled";w.InvalidStatResponse="InvalidStatResponse";w.InvalidRequest="InvalidRequest";w.RequestFailed="RequestFailed";w.MissingFeatures="MissingFeatures";w.AggregationFieldNotFound="AggregationFieldNotFound";w.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const r={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",
[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let C=function(w){function k(h,
A){h=w.call(this,O.doSubstitutions(r[h],A))||this;h.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(h),k);return h}b._inheritsLoose(k,w);return k}(b._wrapNativeSuper(Error));c.FeatureSetError=C;c.FeatureSetErrorMessages=r;c.SqlError=F;c.SqlErrorMessages=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],
function(c,b){function O(y){return y&&y.loc?`Line : ${y.loc.start?.line}, ${y.loc.start?.column}: `:""}function N(y,g){try{if(!g)return y;for(const x in g){let e=g[x];e||(e="");y=y.replace("{"+x+"}",g[x])}}catch(x){}return y}c.ExecutionErrorCodes=void 0;(function(y){y.AsyncNotEnabled="AsyncNotEnabled";y.ModulesNotSupported="ModulesNotSupported";y.CircularModules="CircularModules";y.NeverReach="NeverReach";y.UnsupportedHashType="UnsupportedHashType";y.InvalidParameter="InvalidParameter";y.UnexpectedToken=
"UnexpectedToken";y.Unrecognised="Unrecognised";y.UnrecognisedType="UnrecognisedType";y.MaximumCallDepth="MaximumCallDepth";y.BooleanConditionRequired="BooleanConditionRequired";y.TypeNotAllowedInFeature="TypeNotAllowedInFeature";y.KeyMustBeString="KeyMustBeString";y.WrongNumberOfParameters="WrongNumberOfParameters";y.CallNonFunction="CallNonFunction";y.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";y.NoFunctionInDictionary="NoFunctionInDictionary";y.NoFunctionInArray="NoFunctionInArray";
y.AssignModuleFunction="AssignModuleFunction";y.LogicExpressionOrAnd="LogicExpressionOrAnd";y.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";y.FuncionNotFound="FunctionNotFound";y.InvalidMemberAccessKey="InvalidMemberAccessKey";y.UnsupportedUnaryOperator="UnsupportUnaryOperator";y.InvalidIdentifier="InvalidIdentifier";y.MemberOfNull="MemberOfNull";y.UnsupportedOperator="UnsupportedOperator";y.Cancelled="Cancelled";y.ModuleAccessorMustBeString="ModuleAccessorMustBeString";y.ModuleExportNotFound=
"ModuleExportNotFound";y.Immutable="Immutable";y.OutOfBounds="OutOfBounds";y.IllegalResult="IllegalResult";y.FieldNotFound="FieldNotFound";y.PortalRequired="PortalRequired";y.LogicError="LogicError";y.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";y.KeyAccessorMustBeString="KeyAccessorMustBeString";y.WrongSpatialReference="WrongSpatialReference"})(c.ExecutionErrorCodes||(c.ExecutionErrorCodes={}));const F={[c.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",
[c.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[c.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[c.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[c.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[c.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[c.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[c.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[c.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[c.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[c.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[c.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[c.ExecutionErrorCodes.PortalRequired]:"Portal is required",[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[c.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[c.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[c.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[c.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[c.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[c.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[c.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[c.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[c.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[c.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[c.ExecutionErrorCodes.Immutable]:"Object is immutable",[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[c.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[c.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[c.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[c.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[c.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[c.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[c.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[c.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[c.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[c.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[c.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};let r=function(y){function g(...x){return y.call(this,...x)||this}b._inheritsLoose(g,y);return g}(b._wrapNativeSuper(Error)),C=function(y){function g(x,e){x=
y.call(this,O(e)+x.message,{cause:x})||this;x.loc=null;Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(x),g);e&&e.loc&&(x.loc=e.loc);return x}b._inheritsLoose(g,y);return g}(r),w=function(y){function g(x,e,n,u){x=y.call(this,"Execution error - "+O(n)+N(F[e],u))||this;x.loc=null;x.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(x),g);n&&n.loc&&(x.loc=n.loc);return x}b._inheritsLoose(g,y);return g}(b._wrapNativeSuper(Error)),
k=function(y){function g(x,e,n,u){x=y.call(this,"Compilation error - "+O(n)+N(F[e],u))||this;x.loc=null;x.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(x),g);n&&n.loc&&(x.loc=n.loc);return x}b._inheritsLoose(g,y);return g}(b._wrapNativeSuper(Error)),h=function(y){function g(){var x=y.call(this,"Uncompilable code structures")||this;x.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(x),
g);return x}b._inheritsLoose(g,y);return g}(b._wrapNativeSuper(Error));c.ModuleErrorCodes=void 0;(function(y){y.UnrecognisedUri="UnrecognisedUri";y.UnsupportedUriProtocol="UnsupportedUriProtocol"})(c.ModuleErrorCodes||(c.ModuleErrorCodes={}));const A={[c.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",[c.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let Q=function(y){function g(x,e){x=y.call(this,N(A[x],e))||this;x.declaredRootClass="esri.arcade.arcademoduleerror";
Error.captureStackTrace&&Error.captureStackTrace(b._assertThisInitialized(x),g);return x}b._inheritsLoose(g,y);return g}(b._wrapNativeSuper(Error));c.ArcadeCompilationError=k;c.ArcadeExecutionError=w;c.ArcadeUncompilableError=h;c.ErrorWithCause=r;c.ExecutionErrorMessages=F;c.LocatableArcadeExecutionError=C;c.ModuleError=Q;c.ModuleErrorMessages=A;c.doSubstitutions=N;c.ensureArcadeExecutionError=function(y,g,x){return"esri.arcade.arcadeexecutionerror"===x.declaredRootClass||"esri.arcade.arcadecompilationerror"===
x.declaredRootClass?null===x.loc&&g&&g.loc?new C(x,{cause:x}):x:g&&g.loc?new C(x,{cause:x}):x};c.parsingValidationMessage=function(y,g,x){return"Parsing error - "+O(y)+N(F[g],x)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/datetime":function(){define(["exports"],function(c){function b(a,t={}){const V=JSON.stringify([a,t]);let ha=gd[V];ha||(ha=new Intl.ListFormat(a,t),gd[V]=ha);return ha}function O(a,t={}){const V=JSON.stringify([a,t]);let ha=Hc[V];ha||(ha=new Intl.DateTimeFormat(a,
t),Hc[V]=ha);return ha}function N(a,t={}){const V=JSON.stringify([a,t]);let ha=Ic[V];ha||(ha=new Intl.NumberFormat(a,t),Ic[V]=ha);return ha}function F(a,t={}){const {base:V,...ha}=t,ma=JSON.stringify([a,ha]);let sa=Jc[ma];sa||(sa=new Intl.RelativeTimeFormat(a,t),Jc[ma]=sa);return sa}function r(a){const t=[];for(let V=1;12>=V;V++){const ha=Za.utc(2016,V,1);t.push(a(ha))}return t}function C(a){const t=[];for(let V=1;7>=V;V++){const ha=Za.utc(2016,11,13+V);t.push(a(ha))}return t}function w(a,t,V,ha,
ma){a=a.listingMode(V);return"error"===a?null:"en"===a?ha(t):ma(t)}function k(a,t){if(h(a)||null===a)return t;if(a instanceof ic)return a;if("string"===typeof a){const V=a.toLowerCase();return"default"===V?t:"local"===V||"system"===V?nc.instance:"utc"===V||"gmt"===V?Eb.utcInstance:Eb.parseSpecifier(V)||Tb.create(a)}return A(a)?Eb.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new hd(a)}function h(a){return"undefined"===typeof a}function A(a){return"number"===typeof a}function Q(a){return"number"===
typeof a&&0===a%1}function y(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function g(a,t,V){if(0!==a.length)return a.reduce((ha,ma)=>{ma=[t(ma),ma];return ha?V(ha[0],ma[0])===ha[0]?ha:ma:ma},null)[1]}function x(a,t){return t.reduce((V,ha)=>{V[ha]=a[ha];return V},{})}function e(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function n(a,t,V){return Q(a)&&a>=t&&a<=V}function u(a,t=2){return 0>a?"-"+(""+-a).padStart(t,"0"):(""+a).padStart(t,"0")}function M(a){if(!h(a)&&
null!==a&&""!==a)return parseInt(a,10)}function L(a){if(!h(a)&&null!==a&&""!==a)return parseFloat(a)}function U(a){if(!h(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function S(a,t,V=!1){t=10**t;return(V?Math.trunc:Math.round)(a*t)/t}function B(a){return 0===a%4&&(0!==a%100||0===a%400)}function z(a,t){var V=t-1;V=V-12*Math.floor(V/12)+1;return 2===V?B(a+(t-V)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][V-1]}function q(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,
a.second,a.millisecond);100>a.year&&0<=a.year&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900));return+t}function E(a){var t=a-1;t=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===t?53:52}function d(a){return 99<a?a:a>yb.twoDigitCutoffYear?1900+a:2E3+a}function p(a,t,V,ha=null){a=new Date(a);const ma={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ha&&(ma.timeZone=
ha);return(t=(new Intl.DateTimeFormat(V,{timeZoneName:t,...ma})).formatToParts(a).find(sa=>"timezonename"===sa.type.toLowerCase()))?t.value:null}function D(a,t){a=parseInt(a,10);Number.isNaN(a)&&(a=0);t=parseInt(t,10)||0;t=0>a||Object.is(a,-0)?-t:t;return 60*a+t}function I(a){const t=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(t))throw new qa(`Invalid unit value ${a}`);return t}function K(a,t){const V={};for(const ha in a)if(e(a,ha)){const ma=a[ha];void 0!==ma&&null!==ma&&(V[t(ha)]=I(ma))}return V}
function P(a,t){const V=Math.trunc(Math.abs(a/60)),ha=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(t){case "short":return`${a}${u(V,2)}:${u(ha,2)}`;case "narrow":return`${a}${V}${0<ha?`:${ha}`:""}`;case "techie":return`${a}${u(V,2)}${u(ha,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`);}}function v(a){return x(a,["hour","minute","second","millisecond"])}function G(a){switch(a){case "narrow":return[...id];case "short":return[...jd];case "long":return[...kd];
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function X(a){switch(a){case "narrow":return[...oe];case "short":return[...ld];case "long":return[...md];case "numeric":return"1234567".split("");default:return null}}function ka(a){switch(a){case "narrow":return[...Kc];case "short":return[...pe];case "long":return[...qe];default:return null}}function ta(a,t,V="always",ha=!1){const ma={years:["year",
"yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var sa=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===V&&sa)switch(V="days"===a,t){case 1:return V?"tomorrow":`next ${ma[a][0]}`;case -1:return V?"yesterday":`last ${ma[a][0]}`;case 0:return V?"today":`this ${ma[a][0]}`}V=Object.is(t,-0)||0>t;t=Math.abs(t);sa=1===t;const Aa=ma[a];a=ha?sa?Aa[1]:Aa[2]||Aa[1]:sa?
ma[a][0]:a;return V?`${t} ${a} ago`:`in ${t} ${a}`}function za(a,t){let V="";for(const ha of a)V=ha.literal?V+ha.val:V+t(ha.val);return V}function Ea(...a){a=a.reduce((t,V)=>t+V.source,"");return RegExp(`^${a}$`)}function Ha(...a){return t=>a.reduce(([V,ha,ma],sa)=>{const [Aa,Ia,Ma]=sa(t,ma);return[{...V,...Aa},Ia||ha,Ma]},[{},null,1]).slice(0,2)}function Fa(a,...t){if(null==a)return[null,null];for(const [V,ha]of t)if(t=V.exec(a))return ha(t);return[null,null]}function Ua(...a){return(t,V)=>{const ha=
{};let ma;for(ma=0;ma<a.length;ma++)ha[a[ma]]=M(t[V+ma]);return[ha,null,V+ma]}}function Oa(a,t,V){a=a[t];return h(a)?V:M(a)}function Sa(a,t){return[{hours:Oa(a,t,0),minutes:Oa(a,t+1,0),seconds:Oa(a,t+2,0),milliseconds:U(a[t+3])},null,t+4]}function $a(a,t){const V=!a[t]&&!a[t+1];a=D(a[t+1],a[t+2]);return[{},V?null:Eb.instance(a),t+3]}function Ta(a,t){return[{},a[t]?Tb.create(a[t]):null,t+1]}function jb(a){const [t,V,ha,ma,sa,Aa,Ia,Ma,m]=a,Wa="-"===t[0];a=Ma&&"-"===Ma[0];const Xa=(bb,ua=!1)=>void 0!==
bb&&(ua||bb&&Wa)?-bb:bb;return[{years:Xa(L(V)),months:Xa(L(ha)),weeks:Xa(L(ma)),days:Xa(L(sa)),hours:Xa(L(Aa)),minutes:Xa(L(Ia)),seconds:Xa(L(Ma),"-0"===Ma),milliseconds:Xa(U(m),a)}]}function ib(a,t,V,ha,ma,sa,Aa){t={year:2===t.length?d(M(t)):M(t),month:jd.indexOf(V)+1,day:M(ha),hour:M(ma),minute:M(sa)};Aa&&(t.second=M(Aa));a&&(t.weekday=3<a.length?md.indexOf(a)+1:ld.indexOf(a)+1);return t}function lb(a){const [,t,V,ha,ma,sa,Aa,Ia,Ma,m,Wa,Xa]=a;a=ib(t,ma,ha,V,sa,Aa,Ia);let bb;bb=Ma?re[Ma]:m?0:D(Wa,
Xa);return[a,new Eb(bb)]}function l(a){const [,t,V,ha,ma,sa,Aa,Ia]=a;return[ib(t,ma,ha,V,sa,Aa,Ia),Eb.utcInstance]}function H(a){const [,t,V,ha,ma,sa,Aa,Ia]=a;return[ib(t,Ia,V,ha,ma,sa,Aa),Eb.utcInstance]}function fa(a,t,V=!1){a={values:V?t.values:{...a.values,...(t.values||{})},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new eb(a)}function la(a,t,V,ha,ma){a=a[ma][V];var sa=t[V]/a;sa=Math.sign(sa)!==Math.sign(ha[ma])&&0!==
ha[ma]&&1>=Math.abs(sa)?0>sa?Math.floor(sa):Math.ceil(sa):Math.trunc(sa);ha[ma]+=sa;t[V]-=sa*a}function va(a,t){se.reduce((V,ha)=>{if(h(t[ha]))return V;V&&la(a,t,V,t,ha);return ha},null)}function R(a,t){a=t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(eb.fromMillis(a).as("days"))}function W(a,t,V){const ha=[["years",(Ma,m)=>m.year-Ma.year],["quarters",(Ma,m)=>m.quarter-Ma.quarter+4*(m.year-Ma.year)],["months",(Ma,m)=>
m.month-Ma.month+12*(m.year-Ma.year)],["weeks",(Ma,m)=>{Ma=R(Ma,m);return(Ma-Ma%7)/7}],["days",R]],ma={},sa=a;let Aa,Ia;for(const [Ma,m]of ha)0<=V.indexOf(Ma)&&(Aa=Ma,ma[Ma]=m(a,t),Ia=sa.plus(ma),Ia>t?(ma[Ma]--,a=sa.plus(ma)):a=Ia);return[a,ma,Ia,Aa]}function ea(a,t,V,ha){let [ma,sa,Aa,Ia]=W(a,t,V);a=t-ma;V=V.filter(Ma=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ma));0===V.length&&(Aa<t&&(Aa=ma.plus({[Ia]:1})),Aa!==ma&&(sa[Ia]=(sa[Ia]||0)+a/(Aa-ma)));t=eb.fromObject(sa,ha);return 0<V.length?
eb.fromMillis(a,ha).shiftTo(...V).plus(t):t}function aa({numberingSystem:a},t=""){return new RegExp(`${Lc[a||"latn"]}${t}`)}function ja(a,t=V=>V){return{regex:a,deser:([V])=>{{let ha=parseInt(V,10);if(isNaN(ha)){ha="";for(let ma=0;ma<V.length;ma++){const sa=V.charCodeAt(ma);if(-1!==V[ma].search(Lc.hanidec))ha+=te.indexOf(V[ma]);else for(const Aa in nd){const [Ia,Ma]=nd[Aa];sa>=Ia&&sa<=Ma&&(ha+=sa-Ia)}}V=parseInt(ha,10)}else V=ha}return t(V)}}}function na(a){return a.replace(/\./g,"\\.?").replace(Mc,
od)}function ra(a,t){return null===a?null:{regex:RegExp(a.map(na).join("|")),deser:([V])=>a.findIndex(ha=>V.replace(/\./g,"").replace(Mc," ").toLowerCase()===ha.replace(/\./g,"").replace(Mc," ").toLowerCase())+t}}function Y(a,t){return{regex:a,deser:([,V,ha])=>D(V,ha),groups:t}}function da(a){return{regex:a,deser:([t])=>t}}function pa(a,t){const V=aa(t),ha=aa(t,"{2}"),ma=aa(t,"{3}"),sa=aa(t,"{4}"),Aa=aa(t,"{6}"),Ia=aa(t,"{1,2}"),Ma=aa(t,"{1,3}"),m=aa(t,"{1,6}"),Wa=aa(t,"{1,9}"),Xa=aa(t,"{2,4}"),bb=
aa(t,"{4,6}"),ua=J=>({regex:RegExp(J.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([T])=>T,literal:!0}),$b=(J=>{if(a.literal)return ua(J);switch(J.val){case "G":return ra(t.eras("short",!1),0);case "GG":return ra(t.eras("long",!1),0);case "y":return ja(m);case "yy":return ja(Xa,d);case "yyyy":return ja(sa);case "yyyyy":return ja(bb);case "yyyyyy":return ja(Aa);case "M":return ja(Ia);case "MM":return ja(ha);case "MMM":return ra(t.months("short",!0,!1),1);case "MMMM":return ra(t.months("long",
!0,!1),1);case "L":return ja(Ia);case "LL":return ja(ha);case "LLL":return ra(t.months("short",!1,!1),1);case "LLLL":return ra(t.months("long",!1,!1),1);case "d":return ja(Ia);case "dd":return ja(ha);case "o":return ja(Ma);case "ooo":return ja(ma);case "HH":return ja(ha);case "H":return ja(Ia);case "hh":return ja(ha);case "h":return ja(Ia);case "mm":return ja(ha);case "m":return ja(Ia);case "q":return ja(Ia);case "qq":return ja(ha);case "s":return ja(Ia);case "ss":return ja(ha);case "S":return ja(Ma);
case "SSS":return ja(ma);case "u":return da(Wa);case "uu":return da(Ia);case "uuu":return ja(V);case "a":return ra(t.meridiems(),0);case "kkkk":return ja(sa);case "kk":return ja(Xa,d);case "W":return ja(Ia);case "WW":return ja(ha);case "E":case "c":return ja(V);case "EEE":return ra(t.weekdays("short",!1,!1),1);case "EEEE":return ra(t.weekdays("long",!1,!1),1);case "ccc":return ra(t.weekdays("short",!0,!1),1);case "cccc":return ra(t.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Y(new RegExp(`([+-]${Ia.source})(?::(${ha.source}))?`),
2);case "ZZZ":return Y(new RegExp(`([+-]${Ia.source})(${ha.source})?`),2);case "z":return da(/[a-z_+-/]{1,256}?/i);default:return ua(J)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};$b.token=a;return $b}function wa(a){return[`^${a.map(t=>t.regex).reduce((t,V)=>`${t}(${V.source})`,"")}$`,a]}function Ba(a,t,V){if(a=a.match(t)){t={};let ha=1;for(const ma in V)if(e(V,ma)){const sa=V[ma],Aa=sa.groups?sa.groups+1:1;!sa.literal&&sa.token&&(t[sa.token.val[0]]=sa.deser(a.slice(ha,
ha+Aa)));ha+=Aa}return[a,t]}return[a,{}]}function La(a){const t=ma=>{switch(ma){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let V=null,ha;h(a.z)||(V=Tb.create(a.z));h(a.Z)||(V||(V=new Eb(a.Z)),ha=a.Z);h(a.q)||
(a.M=3*(a.q-1)+1);h(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);h(a.u)||(a.S=U(a.u));return[Object.keys(a).reduce((ma,sa)=>{const Aa=t(sa);Aa&&(ma[Aa]=a[sa]);return ma},{}),V,ha]}function Ja(a,t){return Array.prototype.concat(...a.map(V=>{if(!V.literal){var ha=Fb.macroTokenToFormatOpts(V.val);ha=Qa(ha,t);V=null==ha||ha.includes(void 0)?V:ha}return V}))}function Pa(a,t,V){V=Ja(Fb.parseFormat(V),a);var ha=V.map(bb=>pa(bb,a));const ma=ha.find(bb=>bb.invalidReason);
if(ma)return{input:t,tokens:V,invalidReason:ma.invalidReason};const [sa,Aa]=wa(ha);ha=RegExp(sa,"i");const [Ia,Ma]=Ba(t,ha,Aa),[m,Wa,Xa]=Ma?La(Ma):[null,null,void 0];if(e(Ma,"a")&&e(Ma,"H"))throw new ia("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:V,regex:ha,rawMatches:Ia,matches:Ma,result:m,zone:Wa,specificOffset:Xa}}function Qa(a,t){if(!a)return null;t=Fb.create(t,a);var V=t.formatDateTimeParts;Nc||(Nc=Za.fromMillis(1555555555555));return V.call(t,Nc).map(ha=>{{const {type:sa,
value:Aa}=ha;if("literal"===sa)ha={literal:!0,val:Aa};else{ha=a[sa];var ma=ue[sa];"object"===typeof ma&&(ma=ma[ha]);ha=ma?{literal:!1,val:ma}:void 0}}return ha})}function Ga(a,t){return new Qb("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function Ra(a,t,V){t=new Date(Date.UTC(a,t-1,V));100>a&&0<=a&&t.setUTCFullYear(t.getUTCFullYear()-1900);a=t.getUTCDay();return 0===a?7:a}function xa(a,t){a=B(a)?Oc:Pc;const V=a.findIndex(ha=>ha<t);return{month:V+1,day:t-
a[V]}}function vb(a){const {year:t,month:V,day:ha}=a;var ma=ha+(B(t)?Oc:Pc)[V-1];const sa=Ra(t,V,ha);ma=Math.floor((ma-sa+10)/7);let Aa;1>ma?(Aa=t-1,ma=E(Aa)):ma>E(t)?(Aa=t+1,ma=1):Aa=t;return{weekYear:Aa,weekNumber:ma,weekday:sa,...v(a)}}function ub(a){const {weekYear:t,weekNumber:V,weekday:ha}=a;var ma=Ra(t,1,4),sa=B(t)?366:365;ma=7*V+ha-ma-3;1>ma?(sa=t-1,ma+=B(sa)?366:365):ma>sa?(sa=t+1,ma-=B(t)?366:365):sa=t;const {month:Aa,day:Ia}=xa(sa,ma);return{year:sa,month:Aa,day:Ia,...v(a)}}function qb(a){const {year:t,
month:V,day:ha}=a;var ma=ha+(B(t)?Oc:Pc)[V-1];return{year:t,ordinal:ma,...v(a)}}function f(a){const {year:t,ordinal:V}=a,{month:ha,day:ma}=xa(t,V);return{year:t,month:ha,day:ma,...v(a)}}function gb(a){const t=Q(a.year),V=n(a.month,1,12),ha=n(a.day,1,z(a.year,a.month));return t?V?ha?!1:Ga("day",a.day):Ga("month",a.month):Ga("year",a.year)}function db(a){const {hour:t,minute:V,second:ha,millisecond:ma}=a;a=n(t,0,23)||24===t&&0===V&&0===ha&&0===ma;const sa=n(V,0,59),Aa=n(ha,0,59),Ia=n(ma,0,999);return a?
sa?Aa?Ia?!1:Ga("millisecond",ma):Ga("second",ha):Ga("minute",V):Ga("hour",t)}function Gb(a){return new Qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Pb(a){null===a.weekData&&(a.weekData=vb(a.c));return a.weekData}function nb(a,t){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Za({...a,...t,old:a})}function Wb(a,t,V){let ha=a-6E4*t;const ma=V.offset(ha);if(t===ma)return[ha,t];ha-=6E4*(ma-t);t=V.offset(ha);return ma===t?[ha,ma]:[a-6E4*Math.min(ma,
t),Math.max(ma,t)]}function oa(a,t){a=new Date(a+6E4*t);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Yb(a,t,V){return Wb(q(a),t,V)}function Sb(a,t){const V=a.o;var ha=a.c.year+Math.trunc(t.years);const ma=a.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters);ha={...a.c,year:ha,month:ma,day:Math.min(a.c.day,z(ha,ma))+Math.trunc(t.days)+7*Math.trunc(t.weeks)};
t=eb.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds");ha=q(ha);let [sa,Aa]=Wb(ha,V,a.zone);0!==t&&(sa+=t,Aa=a.zone.offset(sa));return{ts:sa,o:Aa}}function zb(a,t,V,ha,ma,sa){const {setZone:Aa,zone:Ia}=V;return a&&0!==Object.keys(a).length?(a=Za.fromObject(a,{...V,
zone:t||Ia,specificOffset:sa}),Aa?a:a.setZone(Ia)):Za.invalid(new Qb("unparsable",`the input "${ma}" can't be parsed as ${ha}`))}function Kb(a,t,V=!0){return a.isValid?Fb.create(rb.create("en-US"),{allowZ:V,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Zb(a,t){const V=9999<a.c.year||0>a.c.year;let ha="";V&&0<=a.c.year&&(ha+="+");ha+=u(a.c.year,V?6:4);t?(ha=ha+"-"+u(a.c.month),ha=ha+"-"+u(a.c.day)):(ha+=u(a.c.month),ha+=u(a.c.day));return ha}function Xb(a,t,V,ha,ma,sa){let Aa=u(a.c.hour);
t?(Aa=Aa+":"+u(a.c.minute),0===a.c.second&&V||(Aa+=":")):Aa+=u(a.c.minute);0===a.c.second&&V||(Aa+=u(a.c.second),0===a.c.millisecond&&ha||(Aa=Aa+"."+u(a.c.millisecond,3)));ma&&(a.isOffsetFixed&&0===a.offset&&!sa?Aa+="Z":0>a.o?(Aa=Aa+"-"+u(Math.trunc(-a.o/60)),Aa=Aa+":"+u(Math.trunc(-a.o%60))):(Aa=Aa+"+"+u(Math.trunc(a.o/60)),Aa=Aa+":"+u(Math.trunc(a.o%60))));sa&&(Aa+="["+a.zone.ianaName+"]");return Aa}function kc(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",
hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new ba(a);return t}function Hb(a,t){const V=k(t.zone,yb.defaultZone);t=rb.fromObject(t);const ha=yb.now();var ma;if(h(a.year))a=
ha;else{for(const sa of pd)h(a[sa])&&(a[sa]=qd[sa]);if(ma=gb(a)||db(a))return Za.invalid(ma);ma=V.offset(ha);[a,ma]=Yb(a,ma,V)}return new Za({ts:a,zone:V,loc:t,o:ma})}function Rb(a,t,V){const ha=h(V.round)?!0:V.round,ma=(Aa,Ia)=>{Aa=S(Aa,ha||V.calendary?0:2,!0);return t.loc.clone(V).relFormatter(V).format(Aa,Ia)},sa=Aa=>V.calendary?t.hasSame(a,Aa)?0:t.startOf(Aa).diff(a.startOf(Aa),Aa).get(Aa):t.diff(a,Aa).get(Aa);if(V.unit)return ma(sa(V.unit),V.unit);for(const Aa of V.units){const Ia=sa(Aa);if(1<=
Math.abs(Ia))return ma(Ia,Aa)}return ma(a>t?-0:0,V.units[V.units.length-1])}function fb(a){let t={};0<a.length&&"object"===typeof a[a.length-1]?(t=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[t,a]}function Ab(a){if(Za.isDateTime(a))return a;if(a&&a.valueOf&&A(a.valueOf()))return Za.fromJSDate(a);if(a&&"object"===typeof a)return Za.fromObject(a);throw new qa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Bb extends Error{}class Ya extends Bb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}
class hc extends Bb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Z extends Bb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class ia extends Bb{}class ba extends Bb{constructor(a){super(`Invalid unit ${a}`)}}class qa extends Bb{}class Ca extends Bb{constructor(){super("Zone is an abstract class")}}const Da={year:"numeric",month:"numeric",day:"numeric"},Na={year:"numeric",month:"short",day:"numeric"},Va={year:"numeric",month:"short",day:"numeric",weekday:"short"},
mb={year:"numeric",month:"long",day:"numeric"},kb={year:"numeric",month:"long",day:"numeric",weekday:"long"},hb={hour:"numeric",minute:"numeric"},xb={hour:"numeric",minute:"numeric",second:"numeric"},Ib={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},rd={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sd={hour:"numeric",minute:"numeric",hourCycle:"h23"},td={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ud={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},vd={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},wd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},xd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},yd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},zd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
ve={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ad={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Bd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Cd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Dd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"};class ic{get type(){throw new Ca;}get name(){throw new Ca;}get ianaName(){return this.name}get isUniversal(){throw new Ca;}offsetName(a,t){throw new Ca;}formatOffset(a,t){throw new Ca;}offset(a){throw new Ca;}equals(a){throw new Ca;}get isValid(){throw new Ca;}}let Qc=null;class nc extends ic{static get instance(){null===Qc&&(Qc=new nc);return Qc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:t,locale:V}){return p(a,t,V)}formatOffset(a,t){return P(this.offset(a),t)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let oc={};const we={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let pc={};class Tb extends ic{static create(a){pc[a]||(pc[a]=new Tb(a));return pc[a]}static resetCache(){pc={};oc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(t){return!1}}constructor(a){super();this.zoneName=a;this.valid=Tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:t,locale:V}){return p(a,t,V,this.name)}formatOffset(a,t){return P(this.offset(a),t)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var t=this.name;oc[t]||(oc[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit",era:"short"}));t=oc[t];if(t.formatToParts){t=t.formatToParts(a);var V=[];for(let Wa=0;Wa<t.length;Wa++){const {type:Xa,value:bb}=t[Wa],ua=we[Xa];"era"===Xa?V[ua]=bb:h(ua)||(V[ua]=parseInt(bb,10))}t=V}else{t=t.format(a).replace(/\u200E/g,"");t=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t);const [,Wa,Xa,bb,ua,$b,J,T]=t;t=[bb,Wa,Xa,ua,$b,J,T]}let [ha,ma,sa,Aa,Ia,Ma,m]=t;"BC"===Aa&&(ha=-Math.abs(ha)+1);t=q({year:ha,month:ma,day:sa,hour:24===Ia?0:Ia,minute:Ma,second:m,millisecond:0});
a=+a;V=a%1E3;return(t-(a-(0<=V?V:1E3+V)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let gd={},Hc={},Ic={},Jc={},qc=null;class xe{constructor(a,t,V){this.padTo=V.padTo||0;this.floor=V.floor||!1;const {padTo:ha,floor:ma,...sa}=V;if(!t||0<Object.keys(sa).length)t={useGrouping:!1,...V},0<V.padTo&&(t.minimumIntegerDigits=V.padTo),this.inf=N(a,t)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):S(a,3);return u(a,
this.padTo)}}class ye{constructor(a,t,V){this.opts=V;var ha=void 0;a.zone.isUniversal?(ha=a.offset/60*-1,ha=0<=ha?`Etc/GMT+${ha}`:`Etc/GMT${ha}`,0!==a.offset&&Tb.create(ha).valid?this.dt=a:(ha="UTC",this.dt=V.timeZoneName?a:0===a.offset?a:Za.fromMillis(a.ts+6E4*a.offset))):"system"===a.zone.type?this.dt=a:(this.dt=a,ha=a.zone.name);a={...this.opts};a.timeZone=a.timeZone||ha;this.dtf=O(t,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}
class ze{constructor(a,t,V){this.opts={style:"long",...V};!t&&y()&&(this.rtf=F(a,V))}format(a,t){return this.rtf?this.rtf.format(a,t):ta(t,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,t){return this.rtf?this.rtf.formatToParts(a,t):[]}}class rb{static fromOpts(a){return rb.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,t,V,ha=!1){a=a||yb.defaultLocale;var ma;(ma=a)||(ha?ha="en-US":(qc||(qc=(new Intl.DateTimeFormat).resolvedOptions().locale),ha=qc),
ma=ha);return new rb(ma,t||yb.defaultNumberingSystem,V||yb.defaultOutputCalendar,a)}static resetCache(){qc=null;Hc={};Ic={};Jc={}}static fromObject({locale:a,numberingSystem:t,outputCalendar:V}={}){return rb.create(a,t,V)}constructor(a,t,V,ha){var ma=a.indexOf("-x-");-1!==ma&&(a=a.substring(0,ma));ma=a.indexOf("-u-");if(-1===ma)var sa=[a];else{try{sa=O(a).resolvedOptions();var Aa=a}catch(bb){Aa=a.substring(0,ma),sa=O(Aa).resolvedOptions()}const {numberingSystem:Wa,calendar:Xa}=sa;sa=[Aa,Wa,Xa]}const [Ia,
Ma,m]=sa;this.locale=Ia;this.numberingSystem=t||Ma||null;this.outputCalendar=V||m||null;t=this.locale;V=this.numberingSystem;if((sa=this.outputCalendar)||V)t.includes("-u-")||(t+="-u"),sa&&(t+=`-ca-${sa}`),V&&(t+=`-nu-${V}`);this.intl=t;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=ha;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==
this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&t?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?rb.create(a.locale||
this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,t=!1,V=!0){return w(this,a,V,G,()=>{const ha=t?{month:a,day:"numeric"}:{month:a},ma=t?"format":"standalone";this.monthsCache[ma][a]||(this.monthsCache[ma][a]=r(sa=>this.extract(sa,ha,"month")));return this.monthsCache[ma][a]})}weekdays(a,t=!1,
V=!0){return w(this,a,V,X,()=>{const ha=t?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ma=t?"format":"standalone";this.weekdaysCache[ma][a]||(this.weekdaysCache[ma][a]=C(sa=>this.extract(sa,ha,"weekday")));return this.weekdaysCache[ma][a]})}meridiems(a=!0){return w(this,void 0,a,()=>Ed,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Za.utc(2016,11,13,9),Za.utc(2016,11,13,19)].map(V=>this.extract(V,t,"dayperiod"))}return this.meridiemCache})}eras(a,
t=!0){return w(this,a,t,ka,()=>{const V={era:a};this.eraCache[a]||(this.eraCache[a]=[Za.utc(-40,1,1),Za.utc(2017,1,1)].map(ha=>this.extract(ha,V,"era")));return this.eraCache[a]})}extract(a,t,V){return(a=this.dtFormatter(a,t).formatToParts().find(ha=>ha.type.toLowerCase()===V))?a.value:null}numberFormatter(a={}){return new xe(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,t={}){return new ye(a,this.intl,t)}relFormatter(a={}){return new ze(this.intl,this.isEnglish(),a)}listFormatter(a=
{}){return b(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}let Rc=null;class Eb extends ic{static get utcInstance(){null===Rc&&(Rc=new Eb(0));return Rc}static instance(a){return 0===a?Eb.utcInstance:new Eb(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?
new Eb(D(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${P(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${P(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,t){return P(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class hd extends ic{constructor(a){super();this.zoneName=
a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let Fd=()=>Date.now(),Gd="system",Hd=null,Sc=null,Id=null,Jd=60,Kd;class yb{static get now(){return Fd}static set now(a){Fd=a}static set defaultZone(a){Gd=a}static get defaultZone(){return k(Gd,nc.instance)}static get defaultLocale(){return Hd}static set defaultLocale(a){Hd=a}static get defaultNumberingSystem(){return Sc}static set defaultNumberingSystem(a){Sc=
a}static get defaultOutputCalendar(){return Id}static set defaultOutputCalendar(a){Id=a}static get twoDigitCutoffYear(){return Jd}static set twoDigitCutoffYear(a){Jd=a%100}static get throwOnInvalid(){return Kd}static set throwOnInvalid(a){Kd=a}static resetCaches(){rb.resetCache();Tb.resetCache()}}const kd="January February March April May June July August September October November December".split(" "),jd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id="JFMAMJJASOND".split(""),md=
"Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ld="Mon Tue Wed Thu Fri Sat Sun".split(" "),oe="MTWTFSS".split(""),Ed=["AM","PM"],qe=["Before Christ","Anno Domini"],pe=["BC","AD"],Kc=["B","A"],Tc={D:Da,DD:Na,DDD:mb,DDDD:kb,t:hb,tt:xb,ttt:Ib,tttt:rd,T:sd,TT:td,TTT:ud,TTTT:vd,f:wd,ff:yd,fff:Ad,ffff:Cd,F:xd,FF:zd,FFF:Bd,FFFF:Dd};class Fb{static create(a,t={}){return new Fb(a,t)}static parseFormat(a){let t=null,V="",ha=!1;const ma=[];for(let sa=0;sa<a.length;sa++){const Aa=a.charAt(sa);
"'"===Aa?(0<V.length&&ma.push({literal:ha,val:V}),t=null,V="",ha=!ha):ha?V+=Aa:Aa===t?V+=Aa:(0<V.length&&ma.push({literal:!1,val:V}),t=V=Aa)}0<V.length&&ma.push({literal:ha,val:V});return ma}static macroTokenToFormatOpts(a){return Tc[a]}constructor(a,t){this.opts=t;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...t}).format()}formatDateTime(a,t={}){return this.loc.dtFormatter(a,
{...this.opts,...t}).format()}formatDateTimeParts(a,t={}){return this.loc.dtFormatter(a,{...this.opts,...t}).formatToParts()}formatInterval(a,t={}){return this.loc.dtFormatter(a.start,{...this.opts,...t}).dtf.formatRange(a.start.toJSDate(),a.end.toJSDate())}resolvedOptions(a,t={}){return this.loc.dtFormatter(a,{...this.opts,...t}).resolvedOptions()}num(a,t=0){if(this.opts.forceSimple)return u(a,t);const V={...this.opts};0<t&&(V.padTo=t);return this.loc.numberFormatter(V).format(a)}formatDateTimeFromString(a,
t){const V="en"===this.loc.listingMode(),ha=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ma=(Wa,Xa)=>this.loc.extract(a,Wa,Xa),sa=Wa=>a.isOffsetFixed&&0===a.offset&&Wa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Wa.format):"",Aa=(Wa,Xa)=>V?G(Wa)[a.month-1]:ma(Xa?{month:Wa}:{month:Wa,day:"numeric"},"month"),Ia=(Wa,Xa)=>V?X(Wa)[a.weekday-1]:ma(Xa?{weekday:Wa}:{weekday:Wa,month:"long",day:"numeric"},"weekday"),Ma=Wa=>{const Xa=Fb.macroTokenToFormatOpts(Wa);return Xa?this.formatWithSystemDefault(a,
Xa):Wa},m=Wa=>V?ka(Wa)[0>a.year?0:1]:ma({era:Wa},"era");return za(Fb.parseFormat(t),Wa=>{switch(Wa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%
12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return sa({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return sa({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return sa({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;
case "a":return V?Ed[12>a.hour?0:1]:ma({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ha?ma({day:"numeric"},"day"):this.num(a.day);case "dd":return ha?ma({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ia("short",!0);case "cccc":return Ia("long",!0);case "ccccc":return Ia("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Ia("short",!1);case "EEEE":return Ia("long",!1);case "EEEEE":return Ia("narrow",!1);case "L":return ha?
ma({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ha?ma({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return Aa("short",!0);case "LLLL":return Aa("long",!0);case "LLLLL":return Aa("narrow",!0);case "M":return ha?ma({month:"numeric"},"month"):this.num(a.month);case "MM":return ha?ma({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return Aa("short",!1);case "MMMM":return Aa("long",!1);case "MMMMM":return Aa("narrow",!1);case "y":return ha?
ma({year:"numeric"},"year"):this.num(a.year);case "yy":return ha?ma({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ha?ma({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ha?ma({year:"numeric"},"year"):this.num(a.year,6);case "G":return m("short");case "GG":return m("long");case "GGGGG":return m("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);
case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ma(Wa)}})}formatDurationFromString(a,t){const V=ma=>{switch(ma[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";
case "y":return"year";default:return null}};t=Fb.parseFormat(t);const ha=t.reduce((ma,{literal:sa,val:Aa})=>sa?ma:ma.concat(Aa),[]);a=a.shiftTo(...ha.map(V).filter(ma=>ma));return za(t,(ma=>sa=>{const Aa=V(sa);return Aa?this.num(ma.get(Aa),sa.length):sa})(a))}}class Qb{constructor(a,t){this.reason=a;this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ld=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Md=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,
Uc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Nd=RegExp(`${Uc.source}${`(?:${Md.source}?(?:\\[(${Ld.source})\\])?)?`}`),Vc=RegExp(`(?:T${Nd.source})?`),Od=Ua("weekYear","weekNumber","weekDay"),Ae=Ua("year","ordinal"),Wc=RegExp(`${Uc.source} ?(?:${Md.source}|(${Ld.source}))?`),Pd=RegExp(`(?: ${Wc.source})?`),Be=RegExp(`^T?${Uc.source}$`),Ce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,
re={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},De=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,Ee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Fe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
Ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,He=Ea(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vc),Ie=Ea(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vc),Je=Ea(/(\d{4})-?(\d{3})/,Vc),Ke=Ea(Nd),Qd=Ha(function(a,t){return[{year:Oa(a,t),month:Oa(a,t+1,1),day:Oa(a,t+2,1)},null,t+3]},Sa,$a,Ta),Le=Ha(Od,Sa,$a,Ta),Me=Ha(Ae,Sa,$a,Ta),Ne=Ha(Sa,$a,Ta),Oe=Ha(Sa),Pe=Ea(/(\d{4})-(\d\d)-(\d\d)/,Pd),Qe=Ea(Wc),Re=Ha(Sa,$a,Ta),Rd={weeks:{days:7,
hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Se={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6},...Rd},Te={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Rd},cc="years quarters months weeks days hours minutes seconds milliseconds".split(" "),se=cc.slice(0).reverse();
class eb{constructor(a){const t="longterm"===a.conversionAccuracy||!1;let V=t?Te:Se;a.matrix&&(V=a.matrix);this.values=a.values;this.loc=a.loc||rb.create();this.conversionAccuracy=t?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=V;this.isLuxonDuration=!0}static fromMillis(a,t){return eb.fromObject({milliseconds:a},t)}static fromObject(a,t={}){if(null==a||"object"!==typeof a)throw new qa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new eb({values:K(a,
eb.normalizeUnit),loc:rb.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(a){if(A(a))return eb.fromMillis(a);if(eb.isDuration(a))return a;if("object"===typeof a)return eb.fromObject(a);throw new qa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,t){const [V]=Fa(a,[Ce,jb]);return V?eb.fromObject(V,t):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,t){const [V]=Fa(a,[Be,Oe]);return V?
eb.fromObject(V,t):eb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,t=null){if(!a)throw new qa("need to specify a reason the Duration is invalid");a=a instanceof Qb?a:new Qb(a,t);if(yb.throwOnInvalid)throw new Z(a);return new eb({invalid:a})}static normalizeUnit(a){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",
minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!t)throw new ba(a);return t}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,t={}){t={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?Fb.create(this.loc,t).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a=
{}){const t=cc.map(V=>{const ha=this.values[V];return h(ha)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:V.slice(0,-1)}).format(ha)}).filter(V=>V);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+
"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=S(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var t=this.toMillis();if(0>t||864E5<=t)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};
t=this.shiftTo("hours","minutes","seconds","milliseconds");let V="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===t.seconds&&0===t.milliseconds||(V+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===t.milliseconds||(V+=".SSS"));t=t.toFormat(V);a.includePrefix&&(t="T"+t);return t}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);const t=
{};for(const V of cc)if(e(a.values,V)||e(this.values,V))t[V]=a.get(V)+this.get(V);return fa(this,{values:t},!0)}minus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const t={};for(const V of Object.keys(this.values))t[V]=I(a(this.values[V],V));return fa(this,{values:t},!0)}get(a){return this[eb.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...K(a,eb.normalizeUnit)};return fa(this,{values:a})}reconfigure({locale:a,
numberingSystem:t,conversionAccuracy:V,matrix:ha}={}){a={loc:this.loc.clone({locale:a,numberingSystem:t}),matrix:ha,conversionAccuracy:V};return fa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();va(this.matrix,a);return fa(this,{values:a},!0)}rescale(){if(!this.isValid)return this;var a=this.normalize().shiftToAll().toObject();const t={};for(const [V,ha]of Object.entries(a))0!==ha&&(t[V]=ha);return fa(this,{values:t},!0)}shiftTo(...a){if(!this.isValid||
0===a.length)return this;a=a.map(sa=>eb.normalizeUnit(sa));const t={},V={},ha=this.toObject();let ma;for(const sa of cc)if(0<=a.indexOf(sa)){ma=sa;let Aa=0;for(const Ma in V)Aa+=this.matrix[Ma][sa]*V[Ma],V[Ma]=0;A(ha[sa])&&(Aa+=ha[sa]);const Ia=Math.trunc(Aa);t[sa]=Ia;V[sa]=(1E3*Aa-1E3*Ia)/1E3;for(const Ma in ha)cc.indexOf(Ma)>cc.indexOf(sa)&&la(this.matrix,ha,Ma,t,sa)}else A(ha[sa])&&(V[sa]=ha[sa]);for(const sa in V)0!==V[sa]&&(t[ma]+=sa===ma?V[sa]:V[sa]/this.matrix[ma][sa]);return fa(this,{values:t},
!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const a={};for(const t of Object.keys(this.values))a[t]=0===this.values[t]?0:-this.values[t];return fa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?
this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ha of cc){var t=this.values[ha];var V=a.values[ha];t=void 0===t||0===t?void 0===V||0===V:t===V;if(!t)return!1}return!0}}class wb{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,t=null){if(!a)throw new qa("need to specify a reason the Interval is invalid");a=a instanceof Qb?a:new Qb(a,t);if(yb.throwOnInvalid)throw new hc(a);return new wb({invalid:a})}static fromDateTimes(a,
t){a=Ab(a);t=Ab(t);var V=a&&a.isValid?t&&t.isValid?t<a?wb.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null:wb.invalid("missing or invalid end"):wb.invalid("missing or invalid start");return null==V?new wb({start:a,end:t}):V}static after(a,t){t=eb.fromDurationLike(t);a=Ab(a);return wb.fromDateTimes(a,a.plus(t))}static before(a,t){t=eb.fromDurationLike(t);a=Ab(a);return wb.fromDateTimes(a.minus(t),a)}static fromISO(a,
t){const [V,ha]=(a||"").split("/",2);if(V&&ha){let Aa;try{var ma=Za.fromISO(V,t);Aa=ma.isValid}catch(Ma){Aa=!1}let Ia;try{var sa=Za.fromISO(ha,t);Ia=sa.isValid}catch(Ma){Ia=!1}if(Aa&&Ia)return wb.fromDateTimes(ma,sa);if(Aa){if(sa=eb.fromISO(ha,t),sa.isValid)return wb.after(ma,sa)}else if(Ia&&(ma=eb.fromISO(V,t),ma.isValid))return wb.before(sa,ma)}return wb.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?
this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(a),V=this.end.startOf(a);return Math.floor(V.diff(t,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||
this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:t}={}){return this.isValid?wb.fromDateTimes(a||this.s,t||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ab).filter(sa=>this.contains(sa)).sort();const t=[];let {s:V}=this,ha=0;for(;V<this.e;){var ma=a[ha]||this.e;ma=+ma>+this.e?this.e:ma;
t.push(wb.fromDateTimes(V,ma));V=ma;ha+=1}return t}splitBy(a){a=eb.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:t}=this,V=1;const ha=[];for(;t<this.e;){var ma=this.start.plus(a.mapUnits(sa=>sa*V));ma=+ma>+this.e?this.e:ma;ha.push(wb.fromDateTimes(t,ma));t=ma;V+=1}return ha}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?
+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const t=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return t>=a?null:wb.fromDateTimes(t,a)}union(a){return this.isValid?wb.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [t,V]=a.sort((ha,ma)=>ha.s-ma.s).reduce(([ha,ma],sa)=>ma?ma.overlaps(sa)||ma.abutsStart(sa)?
[ha,ma.union(sa)]:[ha.concat([ma]),sa]:[ha,sa],[[],null]);V&&t.push(V);return t}static xor(a){let t=null,V=0;const ha=[];a=a.map(ma=>[{time:ma.s,type:"s"},{time:ma.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ma,sa)=>ma.time-sa.time);for(const ma of a)V+="s"===ma.type?1:-1,1===V?t=ma.time:(t&&+t!==+ma.time&&ha.push(wb.fromDateTimes(t,ma.time)),t=null);return wb.merge(ha)}difference(...a){return wb.xor([this].concat(a)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?
`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(a=Da,t={}){return this.isValid?Fb.create(this.s.loc.clone(t),a).formatInterval(this):"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:t=" \u2013 "}=
{}){return this.isValid?`${this.s.toFormat(a)}${t}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,t){return this.isValid?this.e.diff(this.s,a,t):eb.invalid(this.invalidReason)}mapEndpoints(a){return wb.fromDateTimes(a(this.s),a(this.e))}}class lc{static hasDST(a=yb.defaultZone){const t=Za.now().setZone(a).set({month:12});return!a.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(a){return Tb.isValidZone(a)}static normalizeZone(a){return k(a,yb.defaultZone)}static months(a=
"long",{locale:t=null,numberingSystem:V=null,locObj:ha=null,outputCalendar:ma="gregory"}={}){return(ha||rb.create(t,V,ma)).months(a)}static monthsFormat(a="long",{locale:t=null,numberingSystem:V=null,locObj:ha=null,outputCalendar:ma="gregory"}={}){return(ha||rb.create(t,V,ma)).months(a,!0)}static weekdays(a="long",{locale:t=null,numberingSystem:V=null,locObj:ha=null}={}){return(ha||rb.create(t,V,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:t=null,numberingSystem:V=null,locObj:ha=null}=
{}){return(ha||rb.create(t,V,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return rb.create(a).meridiems()}static eras(a="short",{locale:t=null}={}){return rb.create(t,null,"gregory").eras(a)}static features(){return{relative:y()}}}const Lc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",
khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},nd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,
3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},te=Lc.hanidec.replace(/[\[|\]]/g,"").split(""),od=`[ ${String.fromCharCode(160)}]`,Mc=new RegExp(od,"g"),ue={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s",
"2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Nc=null;const Pc=[0,31,59,90,120,151,181,212,243,273,304,334],Oc=[0,31,60,91,121,152,182,213,244,274,305,335],qd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ue={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pd="year month day hour minute second millisecond".split(" "),We="weekYear weekNumber weekday hour minute second millisecond".split(" "),Xe="year ordinal hour minute second millisecond".split(" ");
class Za{constructor(a){const t=a.zone||yb.defaultZone;let V=a.invalid||(Number.isNaN(a.ts)?new Qb("invalid input"):null)||(t.isValid?null:Gb(t));this.ts=h(a.ts)?yb.now():a.ts;let ha=null;var ma=null;V||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(t)?[ha,ma]=[a.old.c,a.old.o]:(ma=t.offset(this.ts),ha=oa(this.ts,ma),ha=(V=Number.isNaN(ha.year)?new Qb("invalid input"):null)?null:ha,ma=V?null:ma));this._zone=t;this.loc=a.loc||rb.create();this.invalid=V;this.weekData=null;this.c=ha;this.o=ma;this.isLuxonDateTime=
!0}static now(){return new Za({})}static local(){const [a,t]=fb(arguments),[V,ha,ma,sa,Aa,Ia,Ma]=t;return Hb({year:V,month:ha,day:ma,hour:sa,minute:Aa,second:Ia,millisecond:Ma},a)}static utc(){const [a,t]=fb(arguments),[V,ha,ma,sa,Aa,Ia,Ma]=t;a.zone=Eb.utcInstance;return Hb({year:V,month:ha,day:ma,hour:sa,minute:Aa,second:Ia,millisecond:Ma},a)}static fromJSDate(a,t={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Za.invalid("invalid input");const V=
k(t.zone,yb.defaultZone);return V.isValid?new Za({ts:a,zone:V,loc:rb.fromObject(t)}):Za.invalid(Gb(V))}static fromMillis(a,t={}){if(A(a))return-864E13>a||864E13<a?Za.invalid("Timestamp out of range"):new Za({ts:a,zone:k(t.zone,yb.defaultZone),loc:rb.fromObject(t)});throw new qa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,t={}){if(A(a))return new Za({ts:1E3*a,zone:k(t.zone,yb.defaultZone),loc:rb.fromObject(t)});throw new qa("fromSeconds requires a numerical input");
}static fromObject(a,t={}){a=a||{};var V=k(t.zone,yb.defaultZone);if(!V.isValid)return Za.invalid(Gb(V));var ha=yb.now();const ma=h(t.specificOffset)?V.offset(ha):t.specificOffset,sa=K(a,kc);var Aa=!h(sa.ordinal),Ia=!h(sa.year),Ma=!h(sa.month)||!h(sa.day);Ia=Ia||Ma;var m=sa.weekYear||sa.weekNumber;t=rb.fromObject(t);if((Ia||Aa)&&m)throw new ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ma&&Aa)throw new ia("Can't mix ordinal dates with month/day");Ma=m||sa.weekday&&!Ia;
let Wa=oa(ha,ma);Ma?(ha=We,m=Ue,Wa=vb(Wa)):Aa?(ha=Xe,m=Ve,Wa=qb(Wa)):(ha=pd,m=qd);let Xa=!1;for(var bb of ha)h(sa[bb])?sa[bb]=Xa?m[bb]:Wa[bb]:Xa=!0;Ma?(bb=Q(sa.weekYear),ha=n(sa.weekNumber,1,E(sa.weekYear)),m=n(sa.weekday,1,7),bb=bb?ha?m?!1:Ga("weekday",sa.weekday):Ga("week",sa.week):Ga("weekYear",sa.weekYear)):Aa?(bb=Q(sa.year),ha=n(sa.ordinal,1,B(sa.year)?366:365),bb=bb?ha?!1:Ga("ordinal",sa.ordinal):Ga("year",sa.year)):bb=gb(sa);if(bb=bb||db(sa))return Za.invalid(bb);Aa=Ma?ub(sa):Aa?f(sa):sa;const [ua,
$b]=Yb(Aa,ma,V);V=new Za({ts:ua,zone:V,o:$b,loc:t});return sa.weekday&&Ia&&a.weekday!==V.weekday?Za.invalid("mismatched weekday",`you can't specify both a weekday of ${sa.weekday} and a date of ${V.toISO()}`):V}static fromISO(a,t={}){const [V,ha]=Fa(a,[He,Qd],[Ie,Le],[Je,Me],[Ke,Ne]);return zb(V,ha,t,"ISO 8601",a)}static fromRFC2822(a,t={}){const [V,ha]=Fa(a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[De,lb]);return zb(V,ha,t,"RFC 2822",a)}static fromHTTP(a,t={}){const [V,ha]=
Fa(a,[Ee,l],[Fe,l],[Ge,H]);return zb(V,ha,t,"HTTP",t)}static fromFormat(a,t,V={}){if(h(a)||h(t))throw new qa("fromFormat requires an input string and a format");const {locale:ha=null,numberingSystem:ma=null}=V,sa=rb.fromOpts({locale:ha,numberingSystem:ma,defaultToEN:!0}),{result:Aa,zone:Ia,specificOffset:Ma,invalidReason:m}=Pa(sa,a,t),[Wa,Xa,bb,ua]=[Aa,Ia,Ma,m];return ua?Za.invalid(ua):zb(Wa,Xa,V,`format ${t}`,a,bb)}static fromString(a,t,V={}){return Za.fromFormat(a,t,V)}static fromSQL(a,t={}){const [V,
ha]=Fa(a,[Pe,Qd],[Qe,Re]);return zb(V,ha,t,"SQL",a)}static invalid(a,t=null){if(!a)throw new qa("need to specify a reason the DateTime is invalid");a=a instanceof Qb?a:new Qb(a,t);if(yb.throwOnInvalid)throw new Ya(a);return new Za({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}static parseFormatForOpts(a,t={}){return(a=Qa(a,rb.fromObject(t)))?a.map(V=>V?V.val:null).join(""):null}static expandFormat(a,t={}){return Ja(Fb.parseFormat(a),rb.fromObject(t)).map(V=>V.val).join("")}get(a){return this[a]}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?
Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Pb(this).weekYear:NaN}get weekNumber(){return this.isValid?Pb(this).weekNumber:NaN}get weekday(){return this.isValid?Pb(this).weekday:
NaN}get ordinal(){return this.isValid?qb(this.c).ordinal:NaN}get monthShort(){return this.isValid?lc.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lc.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lc.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lc.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return B(this.year)}get daysInMonth(){return z(this.year,this.month)}get daysInYear(){return this.isValid?
B(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?E(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:t,numberingSystem:V,calendar:ha}=Fb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:t,numberingSystem:V,outputCalendar:ha}}toUTC(a=0,t={}){return this.setZone(Eb.instance(a),t)}toLocal(){return this.setZone(yb.defaultZone)}setZone(a,{keepLocalTime:t=!1,keepCalendarTime:V=!1}={}){a=k(a,yb.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ha=
this.ts;if(t||V)t=a.offset(this.ts),V=this.toObject(),[ha]=Yb(V,t,a);return nb(this,{ts:ha,zone:a})}return Za.invalid(Gb(a))}reconfigure({locale:a,numberingSystem:t,outputCalendar:V}={}){a=this.loc.clone({locale:a,numberingSystem:t,outputCalendar:V});return nb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=K(a,kc);var t=!h(a.weekYear)||!h(a.weekNumber)||!h(a.weekday);const V=!h(a.ordinal),ha=!h(a.year),ma=!h(a.month)||!h(a.day),sa=a.weekYear||
a.weekNumber;if((ha||ma||V)&&sa)throw new ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&V)throw new ia("Can't mix ordinal dates with month/day");t?t=ub({...vb(this.c),...a}):h(a.ordinal)?(t={...this.toObject(),...a},h(a.day)&&(t.day=Math.min(z(t.year,t.month),t.day))):t=f({...qb(this.c),...a});const [Aa,Ia]=Yb(t,this.o,this.zone);return nb(this,{ts:Aa,o:Ia})}plus(a){if(!this.isValid)return this;a=eb.fromDurationLike(a);return nb(this,Sb(this,a))}minus(a){if(!this.isValid)return this;
a=eb.fromDurationLike(a).negate();return nb(this,Sb(this,a))}startOf(a){if(!this.isValid)return this;const t={};a=eb.normalizeUnit(a);switch(a){case "years":t.month=1;case "quarters":case "months":t.day=1;case "weeks":case "days":t.hour=0;case "hours":t.minute=0;case "minutes":t.second=0;case "seconds":t.millisecond=0}"weeks"===a&&(t.weekday=1);"quarters"===a&&(t.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(t)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
t={}){return this.isValid?Fb.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Da,t={}){return this.isValid?Fb.create(this.loc.clone(t),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Fb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:t=!1,suppressMilliseconds:V=!1,includeOffset:ha=!0,extendedZone:ma=!1}={}){if(!this.isValid)return null;a="extended"===a;let sa=
Zb(this,a);return sa=sa+"T"+Xb(this,a,t,V,ha,ma)}toISODate({format:a="extended"}={}){return this.isValid?Zb(this,"extended"===a):null}toISOWeekDate(){return Kb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:t=!1,includeOffset:V=!0,includePrefix:ha=!1,extendedZone:ma=!1,format:sa="extended"}={}){return this.isValid?(ha?"T":"")+Xb(this,"extended"===sa,t,a,V,ma):null}toRFC2822(){return Kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Zb(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:t=!1,includeOffsetSpace:V=!0}={}){let ha="HH:mm:ss.SSS";if(t||a)V&&(ha+=" "),t?ha+="z":a&&(ha+="ZZ");return Kb(this,ha,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/
1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const t={...this.c};a.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale);return t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,t="milliseconds",V={}){if(!this.isValid||!a.isValid)return eb.invalid("created by diffing an invalid DateTime");V={locale:this.locale,numberingSystem:this.numberingSystem,...V};
const ha=(Array.isArray(t)?t:[t]).map(eb.normalizeUnit);t=a.valueOf()>this.valueOf();a=ea(t?this:a,t?a:this,ha,V);return t?a.negate():a}diffNow(a="milliseconds",t={}){return this.diff(Za.now(),a,t)}until(a){return this.isValid?wb.fromDateTimes(this,a):this}hasSame(a,t){if(!this.isValid)return!1;const V=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(t)<=V&&V<=a.endOf(t)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const t=a.base||Za.fromObject({},{zone:this.zone}),V=a.padding?this<t?-a.padding:a.padding:0;let ha="years months days hours minutes seconds".split(" "),ma=a.unit;Array.isArray(a.unit)&&(ha=a.unit,ma=void 0);return Rb(t,this.plus(V),{...a,numeric:"always",units:ha,unit:ma})}toRelativeCalendar(a={}){return this.isValid?Rb(a.base||Za.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Za.isDateTime))throw new qa("min requires all arguments be DateTimes");
return g(a,t=>t.valueOf(),Math.min)}static max(...a){if(!a.every(Za.isDateTime))throw new qa("max requires all arguments be DateTimes");return g(a,t=>t.valueOf(),Math.max)}static fromFormatExplain(a,t,V={}){const {locale:ha=null,numberingSystem:ma=null}=V;V=rb.fromOpts({locale:ha,numberingSystem:ma,defaultToEN:!0});return Pa(V,a,t)}static fromStringExplain(a,t,V={}){return Za.fromFormatExplain(a,t,V)}static get DATE_SHORT(){return Da}static get DATE_MED(){return Na}static get DATE_MED_WITH_WEEKDAY(){return Va}static get DATE_FULL(){return mb}static get DATE_HUGE(){return kb}static get TIME_SIMPLE(){return hb}static get TIME_WITH_SECONDS(){return xb}static get TIME_WITH_SHORT_OFFSET(){return Ib}static get TIME_WITH_LONG_OFFSET(){return rd}static get TIME_24_SIMPLE(){return sd}static get TIME_24_WITH_SECONDS(){return td}static get TIME_24_WITH_SHORT_OFFSET(){return ud}static get TIME_24_WITH_LONG_OFFSET(){return vd}static get DATETIME_SHORT(){return wd}static get DATETIME_SHORT_WITH_SECONDS(){return xd}static get DATETIME_MED(){return yd}static get DATETIME_MED_WITH_SECONDS(){return zd}static get DATETIME_MED_WITH_WEEKDAY(){return ve}static get DATETIME_FULL(){return Ad}static get DATETIME_FULL_WITH_SECONDS(){return Bd}static get DATETIME_HUGE(){return Cd}static get DATETIME_HUGE_WITH_SECONDS(){return Dd}}
c.DateTime=Za;c.Duration=eb;c.FixedOffsetZone=Eb;c.IANAZone=Tb;c.Info=lc;c.Interval=wb;c.SystemZone=nc;c.Zone=ic})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,b){var O={};(function(F){(function(r,C){F.exports&&(F.exports=C())})(b.commonjsGlobal,function(){function r(w,k,h,A){w=Error.call(this,w);Object.setPrototypeOf&&Object.setPrototypeOf(w,r.prototype);w.expected=k;w.found=h;w.location=A;w.name="SyntaxError";return w}function C(w,k,h){h=
h||" ";if(w.length>k)return w;k-=w.length;h+=h.repeat(k);return w+h.slice(0,k)}(function(w,k){function h(){this.constructor=w}h.prototype=k.prototype;w.prototype=new h})(r,Error);r.prototype.format=function(w){var k="Error: "+this.message;if(this.location){var h=null,A;for(A=0;A<w.length;A++)if(w[A].source===this.location.source){h=w[A].text.split(/\r\n|\n|\r/g);break}w=this.location.start;A=this.location.source+":"+w.line+":"+w.column;if(h){var Q=this.location.end,y=C("",w.line.toString().length,
" ");h=h[w.line-1];Q=(w.line===Q.line?Q.column:h.length+1)-w.column||1;k+="\n --\x3e "+A+"\n"+y+" |\n"+w.line+" | "+h+"\n"+y+" | "+C("",w.column-1," ")+C("",Q,"^")}else k+="\n at "+A}return k};r.buildMessage=function(w,k){function h(x){return x.charCodeAt(0).toString(16).toUpperCase()}function A(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+h(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(e){return"\\x"+h(e)})}function Q(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+h(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+h(e)})}function y(x){return g[x.type](x)}var g={literal:function(x){return'"'+A(x.text)+'"'},class:function(x){var e=x.parts.map(function(n){return Array.isArray(n)?Q(n[0])+
"-"+Q(n[1]):Q(n)});return"["+(x.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};return"Expected "+function(x){x=x.map(y);var e,n;x.sort();if(0<x.length){for(n=e=1;e<x.length;e++)x[e-1]!==x[e]&&(x[n]=x[e],n++);x.length=n}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}(w)+" but "+(k?'"'+A(k)+'"':"end of input")+" found."};
return{SyntaxError:r,parse:function(w,k){function h(J,T){return{type:"literal",text:J,ignoreCase:T}}function A(J,T,ca){return{type:"class",parts:J,inverted:T,ignoreCase:ca}}function Q(J){var T=Wa[J],ca;if(!T){for(ca=J-1;!Wa[ca];)ca--;T=Wa[ca];for(T={line:T.line,column:T.column};ca<J;)10===w.charCodeAt(ca)?(T.line++,T.column=1):T.column++,ca++;Wa[J]=T}return T}function y(J,T){var ca=Q(J),ya=Q(T);return{source:gb,start:{offset:J,line:ca.line,column:ca.column},end:{offset:T,line:ya.line,column:ya.column}}}
function g(J){m<Xa||(m>Xa&&(Xa=m,bb=[]),bb.push(J))}function x(){var J=m;xa();var T=n();T!==f?(xa(),J=T):(m=J,J=f);return J}function e(){var J=m;var T=n();if(T!==f){J=[];var ca=m;var ya=xa();var Ka=Qa();if(Ka!==f){var ab=xa();var cb=n();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=ca,ca=f;for(;ca!==f;)J.push(ca),ca=m,ya=xa(),Ka=Qa(),Ka!==f?(ab=xa(),cb=n(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)):(m=ca,ca=f);ca={type:"expression-list"};T=[T];for(ya=0;ya<J.length;ya++)T.push(J[ya][3]);ca.value=T;J=
ca}else m=J,J=f;return J}function n(){var J=m;var T=u();if(T!==f){J=[];var ca=m;var ya=xa();var Ka=la();if(Ka!==f){var ab=xa();var cb=u();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=ca,ca=f;for(;ca!==f;)J.push(ca),ca=m,ya=xa(),Ka=la(),Ka!==f?(ab=xa(),cb=u(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)):(m=ca,ca=f);J=qb(T,J)}else m=J,J=f;return J}function u(){var J=m;var T=M();if(T!==f){J=[];var ca=m;var ya=xa();var Ka=fa();if(Ka!==f){var ab=xa();var cb=M();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=
ca,ca=f;for(;ca!==f;)J.push(ca),ca=m,ya=xa(),Ka=fa(),Ka!==f?(ab=xa(),cb=M(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)):(m=ca,ca=f);J=qb(T,J)}else m=J,J=f;return J}function M(){var J=m;var T=H();if(T===f){T=m;if(33===w.charCodeAt(m)){var ca=Pb;m++}else ca=f,0===ua&&g(jd);if(ca!==f){var ya=m;ua++;if(61===w.charCodeAt(m)){var Ka=nb;m++}else Ka=f,0===ua&&g(id);ua--;Ka===f?ya=void 0:(m=ya,ya=f);ya!==f?T=ca=[ca,ya]:(m=T,T=f)}else m=T,T=f}T!==f?(ca=xa(),ya=M(),ya!==f?J={type:"unary-expression",operator:"NOT",
expr:ya}:(m=J,J=f)):(m=J,J=f);if(J===f){T=m;J=B();if(J!==f){xa();T=[];ca=m;ya=xa();Ka=L();if(Ka!==f){var ab=xa();var cb=B();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=ca,ca=f;if(ca!==f)for(;ca!==f;)T.push(ca),ca=m,ya=xa(),Ka=L(),Ka!==f?(ab=xa(),cb=B(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)):(m=ca,ca=f);else T=f;T!==f&&(T={type:"arithmetic",tail:T});T===f&&(T=m,ca=S(),ca!==f?(xa(),ya=Ga(),ya!==f?(xa(),ya=e(),ya!==f?(xa(),Ka=Ra(),Ka!==f?T={op:ca,right:ya}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f)):(m=T,T=
f),T===f&&(T=m,ca=S(),ca!==f?(xa(),ya=Ga(),ya!==f?(xa(),ya=Ra(),ya!==f?T={op:ca,right:{type:"expression-list",value:[]}}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f),T===f&&(T=m,ca=S(),ca!==f?(xa(),ya=P(),ya!==f?T={op:ca,right:ya}:(m=T,T=f)):(m=T,T=f))),T===f&&(T=m,Ka=H(),Ka!==f?(xa(),ca=va(),ca!==f?(xa(),ya=B(),ya!==f?(xa(),ab=fa(),ab!==f?(xa(),Ka=B(),Ka!==f?T={op:"NOT"+ca,right:{type:"expression-list",value:[ya,Ka]}}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f)):(m=T,T=f)):(m=T,T=f),T===f&&(T=m,Ka=va(),Ka!==f?(xa(),ca=B(),
ca!==f?(xa(),ya=fa(),ya!==f?(xa(),ab=B(),ab!==f?T={op:Ka,right:{type:"expression-list",value:[ca,ab]}}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f)):(m=T,T=f)),T===f&&(T=m,ca=lb(),ca!==f?(xa(),ya=H(),ya!==f?(xa(),ya=B(),ya!==f?T={op:ca+"NOT",right:ya}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f),T===f&&(T=m,ca=lb(),ca!==f?(xa(),ya=B(),ya!==f?T={op:ca,right:ya}:(m=T,T=f)):(m=T,T=f)),T===f&&(T=m,ca=U(),ca!==f?(xa(),ya=za(),ya!==f?(xa(),Ka=m,w.substr(m,6).toLowerCase()===Na?(ab=w.substr(m,6),m+=6):(ab=f,0===ua&&g(Ke)),ab!==f?
(ab=m,ua++,cb=I(),ua--,cb===f?ab=void 0:(m=ab,ab=f),ab!==f?Ka="ESCAPE":(m=Ka,Ka=f)):(m=Ka,Ka=f),Ka!==f?(xa(),Ka=Ea(),Ka!==f?T={op:ca,right:ya,escape:Ka.value}:(m=T,T=f)):(m=T,T=f)):(m=T,T=f)):(m=T,T=f),T===f&&(T=m,ca=U(),ca!==f?(xa(),ya=za(),ya!==f?T={op:ca,right:ya,escape:""}:(m=T,T=f)):(m=T,T=f))))));T===f&&(T=null);""==T||void 0==T||null==T?T=J:(ca=null,T=ca="arithmetic"==T.type?qb(J,T.tail):ub(T.op,J,T.right,T.escape))}else m=T,T=f;J=T}return J}function L(){if(w.substr(m,2)===Wb){var J=Wb;m+=
2}else J=f,0===ua&&g(md);J===f&&(62===w.charCodeAt(m)?(J=oa,m++):(J=f,0===ua&&g(ld)),J===f&&(w.substr(m,2)===Yb?(J=Yb,m+=2):(J=f,0===ua&&g(oe)),J===f&&(w.substr(m,2)===Sb?(J=Sb,m+=2):(J=f,0===ua&&g(Ed)),J===f&&(60===w.charCodeAt(m)?(J=zb,m++):(J=f,0===ua&&g(qe)),J===f&&(61===w.charCodeAt(m)?(J=nb,m++):(J=f,0===ua&&g(id)),J===f&&(w.substr(m,2)===Kb?(J=Kb,m+=2):(J=f,0===ua&&g(pe))))))));return J}function U(){var J=J=m;var T=H();if(T!==f){var ca=xa();var ya=l();ya!==f?J=T=[T,ca,ya]:(m=J,J=f)}else m=
J,J=f;J!==f&&(J=J[0]+" "+J[2]);J===f&&(J=l());return J}function S(){var J=J=m;var T=H();if(T!==f){var ca=xa();var ya=ib();ya!==f?J=T=[T,ca,ya]:(m=J,J=f)}else m=J,J=f;J!==f&&(J=J[0]+" "+J[2]);J===f&&(J=ib());return J}function B(){var J=m;var T=q();if(T!==f){J=[];var ca=m;var ya=xa();var Ka=z();if(Ka!==f){var ab=xa();var cb=q();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=ca,ca=f;for(;ca!==f;)J.push(ca),ca=m,ya=xa(),Ka=z(),Ka!==f?(ab=xa(),cb=q(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)):(m=ca,ca=f);
J=qb(T,J)}else m=J,J=f;return J}function z(){if(43===w.charCodeAt(m)){var J=Zb;m++}else J=f,0===ua&&g(Kc);J===f&&(45===w.charCodeAt(m)?(J=Xb,m++):(J=f,0===ua&&g(Tc)),J===f&&(w.substr(m,2)===kc?(J=kc,m+=2):(J=f,0===ua&&g(Fb))));return J}function q(){var J=m;var T=d();if(T!==f){J=[];var ca=m;var ya=xa();var Ka=E();if(Ka!==f){var ab=xa();var cb=d();cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,ca=f)}else m=ca,ca=f;for(;ca!==f;)J.push(ca),ca=m,ya=xa(),Ka=E(),Ka!==f?(ab=xa(),cb=d(),cb!==f?ca=ya=[ya,Ka,ab,cb]:(m=ca,
ca=f)):(m=ca,ca=f);J=qb(T,J)}else m=J,J=f;return J}function E(){if(42===w.charCodeAt(m)){var J=Hb;m++}else J=f,0===ua&&g(Qb);J===f&&(47===w.charCodeAt(m)?(J=Rb,m++):(J=f,0===ua&&g(Ld)));return J}function d(){var J=Ea();if(J===f){var T=m;var ca=m;var ya=Oa();if(ya!==f){var Ka=Sa();if(Ka!==f){var ab=$a();ab!==f?ca=parseFloat(ya+Ka+ab):(m=ca,ca=f)}else m=ca,ca=f}else m=ca,ca=f;ca===f&&(ca=m,ya=Oa(),ya!==f?(Ka=Sa(),Ka!==f?ca=parseFloat(ya+Ka):(m=ca,ca=f)):(m=ca,ca=f),ca===f&&(ca=m,ya=Oa(),ya!==f?(Ka=
$a(),Ka!==f?ca=parseFloat(ya+Ka):(m=ca,ca=f)):(m=ca,ca=f),ca===f&&(ca=m,ya=Oa(),ya!==f&&(ya=parseFloat(ya)),ca=ya)));var cb=ca;if(cb!==f){var Sd=m;ua++;var Kf=D();ua--;Kf===f?Sd=void 0:(m=Sd,Sd=f);Sd!==f?T={type:"number",value:cb}:(m=T,T=f)}else m=T,T=f;J=T;if(J===f){var Xc=m;var rc=m;if(w.substr(m,4).toLowerCase()===ia){var Td=w.substr(m,4);m+=4}else Td=f,0===ua&&g(Fe);if(Td!==f){var Yc=m;ua++;var Lf=I();ua--;Lf===f?Yc=void 0:(m=Yc,Yc=f);Yc!==f?rc=Td=[Td,Yc]:(m=rc,rc=f)}else m=rc,rc=f;var mc=rc;
mc!==f&&(mc={type:"boolean",value:!0});Xc=mc;if(Xc===f){Xc=m;var sc=m;if(w.substr(m,5).toLowerCase()===ba){var Ud=w.substr(m,5);m+=5}else Ud=f,0===ua&&g(Ge);if(Ud!==f){var Zc=m;ua++;var Mf=I();ua--;Mf===f?Zc=void 0:(m=Zc,Zc=f);Zc!==f?sc=Ud=[Ud,Zc]:(m=sc,sc=f)}else m=sc,sc=f;mc=sc;mc!==f&&(mc={type:"boolean",value:!1});Xc=mc}J=Xc;if(J===f){var tc=m;if(w.substr(m,4).toLowerCase()===Z){var Vd=w.substr(m,4);m+=4}else Vd=f,0===ua&&g(Ee);if(Vd!==f){var $c=m;ua++;var Nf=I();ua--;Nf===f?$c=void 0:(m=$c,$c=
f);$c!==f?tc=Vd=[Vd,$c]:(m=tc,tc=f)}else m=tc,tc=f;var Ye=tc;Ye!==f&&(Ye={type:"null",value:null});J=Ye;if(J===f){var uc=m;if(aa()!==f){xa();var kf=za();kf!==f?uc={type:"date",value:kf.value}:(m=uc,uc=f)}else m=uc,uc=f;J=uc;if(J===f){var vc=m;if(ea()!==f){xa();var lf=za();lf!==f?vc={type:"timestamp",value:lf.value}:(m=vc,vc=f)}else m=vc,vc=f;J=vc;if(J===f){var Cb=m;var Ze=ja();if(Ze!==f){xa();if(45===w.charCodeAt(m)){var dc=Xb;m++}else dc=f,0===ua&&g(Tc);dc===f&&(43===w.charCodeAt(m)?(dc=Zb,m++):
(dc=f,0===ua&&g(Kc)));if(dc!==f){xa();var ad=za();if(ad!==f){xa();var mf=G();mf!==f?Cb={type:"interval",value:ad,qualifier:mf,op:dc}:(m=Cb,Cb=f)}else m=Cb,Cb=f}else m=Cb,Cb=f}else m=Cb,Cb=f;Cb===f&&(Cb=m,Ze=ja(),Ze!==f?(xa(),dc=za(),dc!==f?(xa(),ad=G(),ad!==f?Cb={type:"interval",value:dc,qualifier:ad,op:""}:(m=Cb,Cb=f)):(m=Cb,Cb=f)):(m=Cb,Cb=f));J=Cb}}}}}}var ob=J;if(ob===f){var Lb=m;var wc=m;if(w.substr(m,7).toLowerCase()===sd){var nf=w.substr(m,7);m+=7}else nf=f,0===ua&&g(Re);if(nf!==f){var Wd=
m;ua++;var Of=I();ua--;Of===f?Wd=void 0:(m=Wd,Wd=f);Wd!==f?wc="EXTRACT":(m=wc,wc=f)}else m=wc,wc=f;if(wc!==f){xa();var Pf=Ga();if(Pf!==f){xa();var Ub=na();Ub===f&&(Ub=ra(),Ub===f&&(Ub=Y(),Ub===f&&(Ub=da(),Ub===f&&(Ub=pa(),Ub===f&&(Ub=wa())))));var of=Ub;if(of!==f){xa();var Qf=R();if(Qf!==f){xa();var pf=n();if(pf!==f){xa();var Rf=Ra();Rf!==f?Lb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:of},pf]}}:(m=Lb,Lb=f)}else m=Lb,Lb=f}else m=Lb,Lb=f}else m=Lb,Lb=f}else m=
Lb,Lb=f}else m=Lb,Lb=f;ob=Lb;if(ob===f){var Mb=m;var xc=m;if(w.substr(m,9).toLowerCase()===rd){var qf=w.substr(m,9);m+=9}else qf=f,0===ua&&g(Qe);if(qf!==f){var Xd=m;ua++;var Sf=I();ua--;Sf===f?Xd=void 0:(m=Xd,Xd=f);Xd!==f?xc="SUBSTRING":(m=xc,xc=f)}else m=xc,xc=f;if(xc!==f){xa();var Tf=Ga();if(Tf!==f){xa();var $e=n();if($e!==f){xa();var Uf=R();if(Uf!==f){xa();var af=n();if(af!==f){xa();var ec=m;var yc=m;if(w.substr(m,3).toLowerCase()===Ib){var rf=w.substr(m,3);m+=3}else rf=f,0===ua&&g(Pe);if(rf!==
f){var Yd=m;ua++;var Vf=I();ua--;Vf===f?Yd=void 0:(m=Yd,Yd=f);Yd!==f?yc="FOR":(m=yc,yc=f)}else m=yc,yc=f;var bd=yc;if(bd!==f){var Wf=xa();var sf=n();if(sf!==f){var Xf=xa();ec=bd=[bd,Wf,sf,Xf]}else m=ec,ec=f}else m=ec,ec=f;ec===f&&(ec=null);bd=Ra();bd!==f?Mb={type:"function",name:"substring",args:{type:"expression-list",value:ec?[$e,af,ec[2]]:[$e,af]}}:(m=Mb,Mb=f)}else m=Mb,Mb=f}else m=Mb,Mb=f}else m=Mb,Mb=f}else m=Mb,Mb=f}else m=Mb,Mb=f;ob=Mb;if(ob===f){var sb=m;var bf=W();if(bf!==f){xa();var cf=
Ga();if(cf!==f){xa();var fc=v();fc===f&&(fc=null);xa();var cd=n();if(cd!==f){xa();var df=R();if(df!==f){xa();var tf=n();if(tf!==f){xa();var Yf=Ra();Yf!==f?sb={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd,tf]}}:(m=sb,sb=f)}else m=sb,sb=f}else m=sb,sb=f}else m=sb,sb=f}else m=sb,sb=f}else m=sb,sb=f;sb===f&&(sb=m,bf=W(),bf!==f?(xa(),cf=Ga(),cf!==f?(xa(),fc=v(),fc===f&&(fc=null),xa(),cd=n(),cd!==f?(xa(),df=Ra(),df!==f?sb={type:"function",name:"trim",
args:{type:"expression-list",value:[{type:"string",value:null==fc?"BOTH":fc},cd]}}:(m=sb,sb=f)):(m=sb,sb=f)):(m=sb,sb=f)):(m=sb,sb=f));ob=sb;if(ob===f){var Nb=m;var zc=m;if(w.substr(m,8).toLowerCase()===ud){var uf=w.substr(m,8);m+=8}else uf=f,0===ua&&g(Se);if(uf!==f){var Zd=m;ua++;var Zf=I();ua--;Zf===f?Zd=void 0:(m=Zd,Zd=f);Zd!==f?zc="POSITION":(m=zc,zc=f)}else m=zc,zc=f;if(zc!==f){xa();var $f=Ga();if($f!==f){xa();var vf=n();if(vf!==f){xa();var ag=ib();if(ag!==f){xa();var wf=n();if(wf!==f){xa();
var bg=Ra();bg!==f?Nb={type:"function",name:"position",args:{type:"expression-list",value:[vf,wf]}}:(m=Nb,Nb=f)}else m=Nb,Nb=f}else m=Nb,Nb=f}else m=Nb,Nb=f}else m=Nb,Nb=f}else m=Nb,Nb=f;ob=Nb;if(ob===f){var Ob=m;var Ac=m;if(w.substr(m,4).toLowerCase()===ve){var xf=w.substr(m,4);m+=4}else xf=f,0===ua&&g(lc);if(xf!==f){var $d=m;ua++;var cg=I();ua--;cg===f?$d=void 0:(m=$d,$d=f);$d!==f?Ac="CAST":(m=Ac,Ac=f)}else m=Ac,Ac=f;if(Ac!==f){xa();var dg=Ga();if(dg!==f){xa();var yf=n();if(yf!==f){xa();var Bc=
m;if(w.substr(m,2).toLowerCase()===Ad){var zf=w.substr(m,2);m+=2}else zf=f,0===ua&&g(Lc);if(zf!==f){var ae=m;ua++;var eg=I();ua--;eg===f?ae=void 0:(m=ae,ae=f);ae!==f?Bc="AS":(m=Bc,Bc=f)}else m=Bc,Bc=f;var fg=Bc;if(fg!==f){xa();var pb=m;var Cc=m;if(w.substr(m,7).toLowerCase()===Bd){var Af=w.substr(m,7);m+=7}else Af=f,0===ua&&g(nd);if(Af!==f){var be=m;ua++;var gg=I();ua--;gg===f?be=void 0:(m=be,be=f);be!==f?Cc="INTEGER":(m=Cc,Cc=f)}else m=Cc,Cc=f;var tb=Cc;tb!==f&&(tb={type:"data-type",value:{type:"integer"}});
pb=tb;if(pb===f){pb=m;var Dc=m;if(w.substr(m,8).toLowerCase()===Cd){var Bf=w.substr(m,8);m+=8}else Bf=f,0===ua&&g(te);if(Bf!==f){var ce=m;ua++;var hg=I();ua--;hg===f?ce=void 0:(m=ce,ce=f);ce!==f?Dc="SMALLINT":(m=Dc,Dc=f)}else m=Dc,Dc=f;tb=Dc;tb!==f&&(tb={type:"data-type",value:{type:"smallint"}});pb=tb;if(pb===f){pb=m;var Ec=m;if(w.substr(m,5).toLowerCase()===Dd){var Cf=w.substr(m,5);m+=5}else Cf=f,0===ua&&g(od);if(Cf!==f){var de=m;ua++;var ig=I();ua--;ig===f?de=void 0:(m=de,de=f);de!==f?Ec="FLOAT":
(m=Ec,Ec=f)}else m=Ec,Ec=f;tb=Ec;tb!==f&&(tb={type:"data-type",value:{type:"float"}});pb=tb;if(pb===f){pb=m;var Fc=m;if(w.substr(m,4).toLowerCase()===ic){var Df=w.substr(m,4);m+=4}else Df=f,0===ua&&g(Mc);if(Df!==f){var ee=m;ua++;var jg=I();ua--;jg===f?ee=void 0:(m=ee,ee=f);ee!==f?Fc="REAL":(m=Fc,Fc=f)}else m=Fc,Fc=f;tb=Fc;tb!==f&&(tb={type:"data-type",value:{type:"real"}});pb=tb;if(pb===f&&(pb=m,tb=aa(),tb!==f&&(tb={type:"data-type",value:{type:"date"}}),pb=tb,pb===f&&(pb=m,tb=ea(),tb!==f&&(tb={type:"data-type",
value:{type:"timestamp"}}),pb=tb,pb===f))){pb=m;var Gc=m;if(w.substr(m,7).toLowerCase()===Qc){var Ef=w.substr(m,7);m+=7}else Ef=f,0===ua&&g(ue);if(Ef!==f){var fe=m;ua++;var kg=I();ua--;kg===f?fe=void 0:(m=fe,fe=f);fe!==f?Gc="VARCHAR":(m=Gc,Gc=f)}else m=Gc,Gc=f;tb=Gc;if(tb!==f){xa();var lg=Ga();if(lg!==f){xa();var Ff=Ta();if(Ff!==f){xa();var mg=Ra();mg!==f?pb={type:"data-type",value:{type:"varchar",size:parseInt(Ff)}}:(m=pb,pb=f)}else m=pb,pb=f}else m=pb,pb=f}else m=pb,pb=f}}}}var Gf=pb;if(Gf!==f){xa();
var ng=Ra();ng!==f?Ob={type:"function",name:"cast",args:{type:"expression-list",value:[yf,Gf]}}:(m=Ob,Ob=f)}else m=Ob,Ob=f}else m=Ob,Ob=f}else m=Ob,Ob=f}else m=Ob,Ob=f}else m=Ob,Ob=f;ob=Ob;if(ob===f){var jc=m;var ge;var Vb=m;Vb=ge=p();if(Vb===f)if(Vb=m,96===w.charCodeAt(m)?(ge=hd,m++):(ge=f,0===ua&&g(Ia)),ge!==f){var he=[];if(kd.test(w.charAt(m))){var gc=w.charAt(m);m++}else gc=f,0===ua&&g(Ma);if(gc!==f)for(;gc!==f;)he.push(gc),kd.test(w.charAt(m))?(gc=w.charAt(m),m++):(gc=f,0===ua&&g(Ma));else he=
f;he!==f?(96===w.charCodeAt(m)?(gc=hd,m++):(gc=f,0===ua&&g(Ia)),gc!==f?Vb=he.join(""):(m=Vb,Vb=f)):(m=Vb,Vb=f)}else m=Vb,Vb=f;var Hf=Vb;if(Hf!==f){xa();var og=Ga();if(og!==f){xa();var ie=e();ie===f&&(ie=null);xa();var pg=Ra();pg!==f?jc={type:"function",name:Hf,args:ie?ie:{type:"expression-list",value:[]}}:(m=jc,jc=f)}else m=jc,jc=f}else m=jc,jc=f;ob=jc;if(ob===f){var ac;var Db=m;var ef=Ba();if(ef!==f){xa();var dd=n();if(dd!==f){xa();var ed=[];for(ac=Fa();ac!==f;)ed.push(ac),ac=Fa();ac=xa();var je=
La();je!==f?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:null}:(m=Db,Db=f)}else m=Db,Db=f}else m=Db,Db=f;if(Db===f)if(Db=m,ef=Ba(),ef!==f)if(xa(),dd=n(),dd!==f){xa();ed=[];for(ac=Fa();ac!==f;)ed.push(ac),ac=Fa();ac=xa();je=Ua();if(je!==f){xa();var qg=La();qg!==f?Db={type:"case-expression",format:"simple",operand:dd,clauses:ed,else:je.value}:(m=Db,Db=f)}else m=Db,Db=f}else m=Db,Db=f;else m=Db,Db=f;var ff=Db;if(ff===f){var bc;var Jb=m;var gf=Ba();if(gf!==f){xa();var fd=[];for(bc=
Ha();bc!==f;)fd.push(bc),bc=Ha();bc=xa();var ke=La();ke!==f?Jb={type:"case-expression",format:"searched",clauses:fd,else:null}:(m=Jb,Jb=f)}else m=Jb,Jb=f;if(Jb===f)if(Jb=m,gf=Ba(),gf!==f){xa();fd=[];for(bc=Ha();bc!==f;)fd.push(bc),bc=Ha();bc=xa();ke=Ua();if(ke!==f){xa();var rg=La();rg!==f?Jb={type:"case-expression",format:"searched",clauses:fd,else:ke.value}:(m=Jb,Jb=f)}else m=Jb,Jb=f}else m=Jb,Jb=f;ff=Jb}ob=ff;if(ob===f){var le;var me=m;var If=D();if(If!==f){var Jf=[];for(le=K();le!==f;)Jf.push(le),
le=K();me=If+Jf.join("")}else m=me,me=f;var ne=me;if(ne!==f){var hf=ne;ne=/^CURRENT_DATE$/i.test(hf)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hf)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:hf}}ob=ne;if(ob===f&&(ob=P(),ob===f)){ob=m;var sg=Ga();if(sg!==f){xa();var jf=n();if(jf!==f){xa();var tg=Ra();tg!==f?(jf.paren=!0,ob=jf):(m=ob,ob=f)}else m=ob,ob=f}else m=ob,ob=f}}}}}}}}}return ob}function p(){var J;var T=m;var ca=D();if(ca!==f){T=[];for(J=
I();J!==f;)T.push(J),J=I();T=ca+T.join("")}else m=T,T=f;return T}function D(){if(Fd.test(w.charAt(m))){var J=w.charAt(m);m++}else J=f,0===ua&&g(Md);return J}function I(){if(Gd.test(w.charAt(m))){var J=w.charAt(m);m++}else J=f,0===ua&&g(Uc);return J}function K(){if(Hd.test(w.charAt(m))){var J=w.charAt(m);m++}else J=f,0===ua&&g(Nd);return J}function P(){var J=m;if(64===w.charCodeAt(m)){var T=fb;m++}else T=f,0===ua&&g(Vc);if(T!==f){var ca=p();ca!==f?J=T=[T,ca]:(m=J,J=f)}else m=J,J=f;J!==f&&(J={type:"parameter",
value:J[1]});return J}function v(){var J=m;if(w.substr(m,7).toLowerCase()===xd){var T=w.substr(m,7);m+=7}else T=f,0===ua&&g(se);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="LEADING":(m=J,J=f)}else m=J,J=f;J===f&&(J=m,w.substr(m,8).toLowerCase()===yd?(T=w.substr(m,8),m+=8):(T=f,0===ua&&g(eb)),T!==f?(T=m,ua++,ca=I(),ua--,ca===f?T=void 0:(m=T,T=f),T!==f?J="TRAILING":(m=J,J=f)):(m=J,J=f),J===f&&(J=m,w.substr(m,4).toLowerCase()===zd?(T=w.substr(m,4),m+=4):(T=f,0===ua&&g(wb)),T!==
f?(T=m,ua++,ca=I(),ua--,ca===f?T=void 0:(m=T,T=f),T!==f?J="BOTH":(m=J,J=f)):(m=J,J=f)));return J}function G(){var J=m;var T=m;var ca=X();if(ca!==f){xa();var ya=Ga();if(ya!==f)if(xa(),ya=ta(),ya!==f){xa();var Ka=Ra();Ka!==f?T={type:"interval-period",period:ca.value,precision:ya,secondary:null}:(m=T,T=f)}else m=T,T=f;else m=T,T=f}else m=T,T=f;T===f&&(T=m,ca=X(),ca!==f&&(ca={type:"interval-period",period:ca.value,precision:null,secondary:null}),T=ca);if(T!==f)if(xa(),ca=m,w.substr(m,2).toLowerCase()===
nc?(ya=w.substr(m,2),m+=2):(ya=f,0===ua&&g(Nc)),ya!==f?(ya=m,ua++,Ka=I(),ua--,Ka===f?ya=void 0:(m=ya,ya=f),ya!==f?ca="TO":(m=ca,ca=f)):(m=ca,ca=f),ca!==f){xa();ca=m;ya=X();ya!==f&&(ya={type:"interval-period",period:ya.value,precision:null,secondary:null});ca=ya;if(ca===f){ca=m;ya=wa();if(ya!==f)if(xa(),ya=Ga(),ya!==f)if(xa(),ya=ta(),ya!==f)if(xa(),Ka=Qa(),Ka!==f)if(xa(),Ka=ka(),Ka!==f){xa();var ab=Ra();ab!==f?ca={type:"interval-period",period:"second",precision:ya,secondary:Ka}:(m=ca,ca=f)}else m=
ca,ca=f;else m=ca,ca=f;else m=ca,ca=f;else m=ca,ca=f;else m=ca,ca=f;ca===f&&(ca=m,ya=wa(),ya!==f?(xa(),ya=Ga(),ya!==f?(xa(),ya=ta(),ya!==f?(xa(),Ka=Ra(),Ka!==f?ca={type:"interval-period",period:"second",precision:ya,secondary:null}:(m=ca,ca=f)):(m=ca,ca=f)):(m=ca,ca=f)):(m=ca,ca=f),ca===f&&(ca=m,ya=wa(),ya!==f&&(ya={type:"interval-period",period:"second",precision:null,secondary:null}),ca=ya))}ca!==f?J={type:"interval-qualifier",start:T,end:ca}:(m=J,J=f)}else m=J,J=f;else m=J,J=f;J===f&&(J=m,ca=X(),
ca!==f?(xa(),T=Ga(),T!==f?(xa(),T=ka(),T!==f?(xa(),ya=Ra(),ya!==f?J={type:"interval-period",period:ca.value,precision:T,secondary:null}:(m=J,J=f)):(m=J,J=f)):(m=J,J=f)):(m=J,J=f),J===f&&(J=m,ca=X(),ca!==f&&(ca={type:"interval-period",period:ca.value,precision:null,secondary:null}),J=ca,J===f&&(J=m,ca=wa(),ca!==f?(xa(),T=Ga(),T!==f?(xa(),T=ta(),T!==f?(xa(),ya=Qa(),ya!==f?(xa(),ca=ka(),ca!==f?(xa(),ya=Ra(),ya!==f?J={type:"interval-period",period:"second",precision:T,secondary:ca}:(m=J,J=f)):(m=J,J=
f)):(m=J,J=f)):(m=J,J=f)):(m=J,J=f)):(m=J,J=f),J===f&&(J=m,ca=wa(),ca!==f?(xa(),T=Ga(),T!==f?(xa(),T=ka(),T!==f?(xa(),ya=Ra(),ya!==f?J={type:"interval-period",period:"second",precision:T,secondary:null}:(m=J,J=f)):(m=J,J=f)):(m=J,J=f)):(m=J,J=f),J===f&&(J=m,ca=wa(),ca!==f&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),J=ca)))));return J}function X(){var J=m;J=Y();J!==f&&(J={type:"string",value:"day"});J===f&&(J=m,J=da(),J!==f&&(J={type:"string",value:"hour"}),J===f&&
(J=m,J=pa(),J!==f&&(J={type:"string",value:"minute"}),J===f&&(J=m,J=ra(),J!==f&&(J={type:"string",value:"month"}),J===f&&(J=m,J=na(),J!==f&&(J={type:"string",value:"year"})))));return J}function ka(){var J=Ta();J!==f&&(J=parseFloat(J));return J}function ta(){var J=Ta();J!==f&&(J=parseFloat(J));return J}function za(){var J=Ea();J===f&&(J=P());return J}function Ea(){var J=m;if(39===w.charCodeAt(m)){var T=Ab;m++}else T=f,0===ua&&g(Od);T===f&&(w.substr(m,2)===Bb?(T=Bb,m+=2):(T=f,0===ua&&g(Ae)));if(T!==
f){T=[];var ca=m;w.substr(m,2)===Ya?(ca=Ya,m+=2):(ca=f,0===ua&&g(Wc));ca!==f&&(ca="'");ca===f&&(Sc.test(w.charAt(m))?(ca=w.charAt(m),m++):(ca=f,0===ua&&g(Pd)));for(;ca!==f;)T.push(ca),ca=m,w.substr(m,2)===Ya?(ca=Ya,m+=2):(ca=f,0===ua&&g(Wc)),ca!==f&&(ca="'"),ca===f&&(Sc.test(w.charAt(m))?(ca=w.charAt(m),m++):(ca=f,0===ua&&g(Pd)));39===w.charCodeAt(m)?(ca=Ab,m++):(ca=f,0===ua&&g(Od));ca!==f?J={type:"string",value:T.join("")}:(m=J,J=f)}else m=J,J=f;return J}function Ha(){var J=m;if(Ja()!==f){xa();var T=
n();if(T!==f){xa();var ca=Pa();ca!==f?(xa(),ca=n(),ca!==f?J={type:"when-clause",operand:T,value:ca}:(m=J,J=f)):(m=J,J=f)}else m=J,J=f}else m=J,J=f;return J}function Fa(){var J=m;if(Ja()!==f){xa();var T=n();if(T!==f){xa();var ca=Pa();ca!==f?(xa(),ca=n(),ca!==f?J={type:"when-clause",operand:T,value:ca}:(m=J,J=f)):(m=J,J=f)}else m=J,J=f}else m=J,J=f;return J}function Ua(){var J=m;var T=m;if(w.substr(m,4).toLowerCase()===ze){var ca=w.substr(m,4);m+=4}else ca=f,0===ua&&g(V);if(ca!==f){ca=m;ua++;var ya=
I();ua--;ya===f?ca=void 0:(m=ca,ca=f);ca!==f?T="ELSE":(m=T,T=f)}else m=T,T=f;T!==f?(xa(),T=n(),T!==f?J={type:"else-clause",value:T}:(m=J,J=f)):(m=J,J=f);return J}function Oa(){var J=Ta();if(J===f){J=m;if(45===w.charCodeAt(m)){var T=Xb;m++}else T=f,0===ua&&g(Tc);T===f&&(43===w.charCodeAt(m)?(T=Zb,m++):(T=f,0===ua&&g(Kc)));if(T!==f){var ca=Ta();ca!==f?J=T[0]+ca:(m=J,J=f)}else m=J,J=f}return J}function Sa(){var J=m;if(46===w.charCodeAt(m)){var T=hc;m++}else T=f,0===ua&&g(Be);T!==f?(J=Ta(),J===f&&(J=
null),J="."+(null!=J?J:"")):(m=J,J=f);return J}function $a(){var J;var T=J=m;if(Jd.test(w.charAt(m))){var ca=w.charAt(m);m++}else ca=f,0===ua&&g(re);ca!==f?(Kd.test(w.charAt(m))?(T=w.charAt(m),m++):(T=f,0===ua&&g(De)),T===f&&(T=null),T="e"+(null===T?"":T)):(m=T,T=f);T!==f?(ca=Ta(),ca!==f?J=T+ca:(m=J,J=f)):(m=J,J=f);return J}function Ta(){var J=[];var T=jb();if(T!==f)for(;T!==f;)J.push(T),T=jb();else J=f;J!==f&&(J=J.join(""));return J}function jb(){if(Id.test(w.charAt(m))){var J=w.charAt(m);m++}else J=
f,0===ua&&g(Ce);return J}function ib(){var J=m;if(w.substr(m,2).toLowerCase()===qa){var T=w.substr(m,2);m+=2}else T=f,0===ua&&g(He);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="IN":(m=J,J=f)}else m=J,J=f;return J}function lb(){var J=m;if(w.substr(m,2).toLowerCase()===Ca){var T=w.substr(m,2);m+=2}else T=f,0===ua&&g(Ie);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="IS":(m=J,J=f)}else m=J,J=f;return J}function l(){var J=m;if(w.substr(m,4).toLowerCase()===
Da){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Je);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="LIKE":(m=J,J=f)}else m=J,J=f;return J}function H(){var J=m;if(w.substr(m,3).toLowerCase()===Va){var T=w.substr(m,3);m+=3}else T=f,0===ua&&g(Qd);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="NOT":(m=J,J=f)}else m=J,J=f;return J}function fa(){var J=m;if(w.substr(m,3).toLowerCase()===mb){var T=w.substr(m,3);m+=3}else T=f,0===ua&&g(Le);if(T!==f){T=m;ua++;var ca=
I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="AND":(m=J,J=f)}else m=J,J=f;return J}function la(){var J=m;if(w.substr(m,2).toLowerCase()===kb){var T=w.substr(m,2);m+=2}else T=f,0===ua&&g(Me);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="OR":(m=J,J=f)}else m=J,J=f;return J}function va(){var J=m;if(w.substr(m,7).toLowerCase()===hb){var T=w.substr(m,7);m+=7}else T=f,0===ua&&g(Ne);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="BETWEEN":(m=J,J=f)}else m=J,J=
f;return J}function R(){var J=m;if(w.substr(m,4).toLowerCase()===xb){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Oe);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="FROM":(m=J,J=f)}else m=J,J=f;return J}function W(){var J=m;if(w.substr(m,4).toLowerCase()===td){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Rd);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="TRIM":(m=J,J=f)}else m=J,J=f;return J}function ea(){var J=m;if(w.substr(m,9).toLowerCase()===vd){var T=
w.substr(m,9);m+=9}else T=f,0===ua&&g(Te);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="TIMESTAMP":(m=J,J=f)}else m=J,J=f;return J}function aa(){var J=m;if(w.substr(m,4).toLowerCase()===wd){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(cc);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="DATE":(m=J,J=f)}else m=J,J=f;return J}function ja(){var J=m;if(w.substr(m,8).toLowerCase()===oc){var T=w.substr(m,8);m+=8}else T=f,0===ua&&g(Pc);if(T!==f){T=m;ua++;var ca=
I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="INTERVAL":(m=J,J=f)}else m=J,J=f;return J}function na(){var J=m;if(w.substr(m,4).toLowerCase()===we){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Oc);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="YEAR":(m=J,J=f)}else m=J,J=f;return J}function ra(){var J=m;if(w.substr(m,5).toLowerCase()===pc){var T=w.substr(m,5);m+=5}else T=f,0===ua&&g(qd);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="MONTH":(m=J,J=f)}else m=
J,J=f;return J}function Y(){var J=m;if(w.substr(m,3).toLowerCase()===Tb){var T=w.substr(m,3);m+=3}else T=f,0===ua&&g(Ue);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="DAY":(m=J,J=f)}else m=J,J=f;return J}function da(){var J=m;if(w.substr(m,4).toLowerCase()===gd){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Ve);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="HOUR":(m=J,J=f)}else m=J,J=f;return J}function pa(){var J=m;if(w.substr(m,6).toLowerCase()===Hc){var T=
w.substr(m,6);m+=6}else T=f,0===ua&&g(pd);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="MINUTE":(m=J,J=f)}else m=J,J=f;return J}function wa(){var J=m;if(w.substr(m,6).toLowerCase()===Ic){var T=w.substr(m,6);m+=6}else T=f,0===ua&&g(We);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="SECOND":(m=J,J=f)}else m=J,J=f;return J}function Ba(){var J=m;if(w.substr(m,4).toLowerCase()===Jc){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(Xe);if(T!==f){T=m;ua++;var ca=
I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="CASE":(m=J,J=f)}else m=J,J=f;return J}function La(){var J=m;if(w.substr(m,3).toLowerCase()===qc){var T=w.substr(m,3);m+=3}else T=f,0===ua&&g(Za);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="END":(m=J,J=f)}else m=J,J=f;return J}function Ja(){var J=m;if(w.substr(m,4).toLowerCase()===xe){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(a);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="WHEN":(m=J,J=f)}else m=J,J=f;
return J}function Pa(){var J=m;if(w.substr(m,4).toLowerCase()===ye){var T=w.substr(m,4);m+=4}else T=f,0===ua&&g(t);if(T!==f){T=m;ua++;var ca=I();ua--;ca===f?T=void 0:(m=T,T=f);T!==f?J="THEN":(m=J,J=f)}else m=J,J=f;return J}function Qa(){if(44===w.charCodeAt(m)){var J=rb;m++}else J=f,0===ua&&g(ha);return J}function Ga(){if(40===w.charCodeAt(m)){var J=Rc;m++}else J=f,0===ua&&g(ma);return J}function Ra(){if(41===w.charCodeAt(m)){var J=Eb;m++}else J=f,0===ua&&g(sa);return J}function xa(){var J;var T=
[];for(J=vb();J!==f;)T.push(J),J=vb();return T}function vb(){if(yb.test(w.charAt(m))){var J=w.charAt(m);m++}else J=f,0===ua&&g(Aa);return J}function ub(J,T,ca,ya){J={type:"binary-expression",operator:J,left:T,right:ca};void 0!==ya&&(J.escape=ya);return J}function qb(J,T){for(var ca=0;ca<T.length;ca++)J=ub(T[ca][1],J,T[ca][3]);return J}k=void 0!==k?k:{};var f={},gb=k.grammarSource,db={start:x},Gb=x,Pb="!",nb="\x3d",Wb="\x3e\x3d",oa="\x3e",Yb="\x3c\x3d",Sb="\x3c\x3e",zb="\x3c",Kb="!\x3d",Zb="+",Xb=
"-",kc="||",Hb="*",Rb="/",fb="@",Ab="'",Bb="N'",Ya="''",hc=".",Z="null",ia="true",ba="false",qa="in",Ca="is",Da="like",Na="escape",Va="not",mb="and",kb="or",hb="between",xb="from",Ib="for",rd="substring",sd="extract",td="trim",ud="position",vd="timestamp",wd="date",xd="leading",yd="trailing",zd="both",ve="cast",Ad="as",Bd="integer",Cd="smallint",Dd="float",ic="real",Qc="varchar",nc="to",oc="interval",we="year",pc="month",Tb="day",gd="hour",Hc="minute",Ic="second",Jc="case",qc="end",xe="when",ye="then",
ze="else",rb=",",Rc="(",Eb=")",hd="`",Fd=/^[A-Za-z_\x80-\uFFFF]/,Gd=/^[A-Za-z0-9_]/,Hd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Sc=/^[^']/,Id=/^[0-9]/,Jd=/^[eE]/,Kd=/^[+\-]/,yb=/^[ \t\n\r]/,kd=/^[^`]/,jd=h("!",!1),id=h("\x3d",!1),md=h("\x3e\x3d",!1),ld=h("\x3e",!1),oe=h("\x3c\x3d",!1),Ed=h("\x3c\x3e",!1),qe=h("\x3c",!1),pe=h("!\x3d",!1),Kc=h("+",!1),Tc=h("-",!1),Fb=h("||",!1),Qb=h("*",!1),Ld=h("/",!1),Md=A([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Uc=A([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=
A([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Vc=h("@",!1),Od=h("'",!1),Ae=h("N'",!1),Wc=h("''",!1),Pd=A(["'"],!0,!1),Be=h(".",!1),Ce=A([["0","9"]],!1,!1),re=A(["e","E"],!1,!1),De=A(["+","-"],!1,!1),Ee=h("NULL",!0),Fe=h("TRUE",!0),Ge=h("FALSE",!0),He=h("IN",!0),Ie=h("IS",!0),Je=h("LIKE",!0),Ke=h("ESCAPE",!0),Qd=h("NOT",!0),Le=h("AND",!0),Me=h("OR",!0),Ne=h("BETWEEN",!0),Oe=h("FROM",!0),Pe=h("FOR",!0),Qe=h("SUBSTRING",!0),Re=h("EXTRACT",!0),Rd=h("TRIM",!0),Se=h("POSITION",!0),
Te=h("TIMESTAMP",!0),cc=h("DATE",!0),se=h("LEADING",!0),eb=h("TRAILING",!0),wb=h("BOTH",!0),lc=h("CAST",!0),Lc=h("AS",!0),nd=h("INTEGER",!0),te=h("SMALLINT",!0),od=h("FLOAT",!0),Mc=h("REAL",!0),ue=h("VARCHAR",!0),Nc=h("TO",!0),Pc=h("INTERVAL",!0),Oc=h("YEAR",!0),qd=h("MONTH",!0),Ue=h("DAY",!0),Ve=h("HOUR",!0),pd=h("MINUTE",!0),We=h("SECOND",!0),Xe=h("CASE",!0),Za=h("END",!0),a=h("WHEN",!0),t=h("THEN",!0),V=h("ELSE",!0),ha=h(",",!1),ma=h("(",!1),sa=h(")",!1),Aa=A([" ","\t","\n","\r"],!1,!1),Ia=h("`",
!1),Ma=A(["`"],!0,!1),m=0,Wa=[{line:1,column:1}],Xa=0,bb=[],ua=0;if("startRule"in k){if(!(k.startRule in db))throw Error("Can't start parsing from rule \""+k.startRule+'".');Gb=db[k.startRule]}var $b=Gb();if($b!==f&&m===w.length)return $b;$b!==f&&m<w.length&&g({type:"end"});throw function(J,T,ca){return new r(r.buildMessage(J,T),J,T,ca)}(bb,Xa<w.length?w.charAt(Xa):null,Xa<w.length?y(Xa,Xa+1):y(Xa,Xa));}}})})({get exports(){return O},set exports(F){O=F}});let N=function(){function F(){}F.parse=function(r){return O.parse(r)};
return F}();c.WhereGrammar=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(c){c.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};c.getDefaultExportFromCjs=function(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b["default"]:b}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x){function e(L,U,S,B){const z=B.x-S.x;B=B.y-S.y;U=Math.min(1,Math.max(0,((U.x-S.x)*z+(U.y-S.y)*B)/(z*z+B*B)));L.x=S.x+z*U;L.y=S.y+B*U}function n(L,U){return L?U?4:3:U?3:2}let u=function(){function L(S,B,z){this.items=S;this.query=B;this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.fieldsIndex=z.fieldsIndex;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.featureAdapter=z.featureAdapter}var U=L.prototype;U.createQueryResponseForCount=
function(){const S=new k(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return S.countDistinctValues(this.items);const {groupByFieldsForStatistics:B,having:z,outStatistics:q}=this.query;if(!B?.length)return 1;const E=new Map,d=new Map,p=new Set;for(const K of q){var {statisticType:D}=K;D="exceedslimit"!==D?K.onStatisticField:void 0;if(!d.has(D)){var I=[];for(const P of B){const v=this._getAttributeValues(S,P,E);I.push(v)}d.set(D,this._calculateUniqueValues(I,S.returnDistinctValues))}D=
d.get(D);for(const P in D){const {data:v,items:G}=D[P];I=v.join(",");z&&!S.validateItems(G,z)||p.add(I)}}return p.size};U.createQueryResponse=function(){var S=O._asyncToGenerator(function*(){let B;B=this.query.outStatistics?this.query.outStatistics.some(z=>"exceedslimit"===z.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const z=this.query.geometry;
w.isValid(this.query.outSR)&&!w.equals(z.spatialReference,this.query.outSR)?B.queryGeometry=Q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...h.project(z,z.spatialReference,this.query.outSR)}):B.queryGeometry=Q.cleanFromGeometryEngine({spatialReference:this.query.outSR,...z})}return B});return function(){return S.apply(this,arguments)}}();U.createSnappingResponse=function(S,B){const z=this.featureAdapter,q=n(this.hasZ,this.hasM),{point:E,mode:d}=S,p="number"===typeof S.distance?S.distance:
S.distance.x,D="number"===typeof S.distance?S.distance:S.distance.y,I={candidates:[]},K="esriGeometryPolygon"===this.geometryType;B=this._getPointCreator(d,this.spatialReference,B);const P=new M(null,0),v=new M(null,0),G={x:0,y:0,z:0};for(const Fa of this.items){var X=z.getGeometry(Fa);if(N.isNone(X))continue;const {coords:Ua,lengths:Oa}=X;P.coords=Ua;v.coords=Ua;if(S.types&b.SnappingTypes.EDGE){X=0;for(var ka=0;ka<Oa.length;ka++){var ta=Oa[ka];for(var za=0;za<ta;za++,X+=q){var Ea=P;Ea.coordsIndex=
X;if(za!==ta-1){const Sa=v;Sa.coordsIndex=X+q;const $a=G;e(G,E,Ea,Sa);var Ha=(E.x-$a.x)/p;const Ta=(E.y-$a.y)/D;Ha=Ha*Ha+Ta*Ta;1>=Ha&&I.candidates.push(A.makeEdgeCandidate(z.getObjectId(Fa),B($a),Math.sqrt(Ha),B(Ea),B(Sa)))}}}}if(S.types&b.SnappingTypes.VERTEX)for(X=K?Ua.length-q:Ua.length,ka=0;ka<X;ka+=q)ta=P,ta.coordsIndex=ka,za=(E.x-ta.x)/p,Ea=(E.y-ta.y)/D,za=za*za+Ea*Ea,1>=za&&I.candidates.push(A.makeVertexCandidate(z.getObjectId(Fa),B(ta),Math.sqrt(za)))}I.candidates.sort((Fa,Ua)=>Fa.distance-
Ua.distance);return I};U._getPointCreator=function(S,B,z){const q=N.isSome(z)&&!w.equals(B,z)?d=>h.project(d,B,z):d=>d,{hasZ:E}=this;return"3d"===S?E?({x:d,y:p,z:D})=>q({x:d,y:p,z:D}):({x:d,y:p})=>q({x:d,y:p,z:0}):({x:d,y:p})=>q({x:d,y:p})};U.createSummaryStatisticsResponse=function(){var S=O._asyncToGenerator(function*(B){const {field:z,valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,minValue:D,maxValue:I,scale:K}=B;B=this.fieldsIndex.isDateField(z);var P=yield this._getDataValues({field:z,
valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,scale:K});const v=g.isNullCountSupported({normalizationType:d,normalizationField:E,minValue:D,maxValue:I}),G=this.fieldsIndex.get(z),X={value:.5,fieldType:G?.type};P=y.isStringField(G)?g.calculateStringStatistics({values:P,supportsNullCount:v,percentileParams:X}):g.calculateStatistics({values:P,minValue:D,maxValue:I,useSampleStdDev:!d,supportsNullCount:v,percentileParams:X});return g.processSummaryStatisticsResult(P,B)});
return function(B){return S.apply(this,arguments)}}();U.createUniqueValuesResponse=function(){var S=O._asyncToGenerator(function*(B){const {field:z,valueExpression:q,domains:E,returnAllCodedValues:d,scale:p}=B;var D=yield this._getDataValues({field:z,field2:B.field2,field3:B.field3,fieldDelimiter:B.fieldDelimiter,valueExpression:q,scale:p});D=g.calculateUniqueValuesCount(D);return g.createUVResult(D,E,d,B.fieldDelimiter)});return function(B){return S.apply(this,arguments)}}();U.createClassBreaksResponse=
function(){var S=O._asyncToGenerator(function*(B){const {field:z,valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,classificationMethod:D,standardDeviationInterval:I,minValue:K,maxValue:P,numClasses:v,scale:G}=B;B=yield this._getDataValues({field:z,valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,scale:G});B=g.calculateClassBreaks(B,{field:z,normalizationField:E,normalizationType:d,normalizationTotal:p,classificationMethod:D,standardDeviationInterval:I,
minValue:K,maxValue:P,numClasses:v});return g.resolveCBResult(B,D)});return function(B){return S.apply(this,arguments)}}();U.createHistogramResponse=function(){var S=O._asyncToGenerator(function*(B){const {field:z,valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,classificationMethod:D,standardDeviationInterval:I,minValue:K,maxValue:P,numBins:v,scale:G}=B;B=yield this._getDataValues({field:z,valueExpression:q,normalizationField:E,normalizationType:d,normalizationTotal:p,
scale:G});return g.calculateHistogram(B,{field:z,normalizationField:E,normalizationType:d,normalizationTotal:p,classificationMethod:D,standardDeviationInterval:I,minValue:K,maxValue:P,numBins:v})});return function(B){return S.apply(this,arguments)}}();U._sortFeatures=function(S,B,z){if(1<S.length&&B&&B.length)for(const q of B.reverse()){B=q.split(" ");const E=B[0],d=this.fieldsIndex.get(E);B=B[1]?"desc"===B[1].toLowerCase():!1;const p=g.getAttributeComparator(d?.type,B);S.sort((D,I)=>{D=z(D,E,d);
I=z(I,E,d);return p(D,I)})}};U._createFeatureQueryResponse=function(S){const B=this.items,{geometryType:z,hasM:q,hasZ:E,objectIdField:d,spatialReference:p}=this,{outFields:D,outSR:I,quantizationParameters:K,resultRecordCount:P,resultOffset:v,returnZ:G,returnM:X}=S,ka=null!=P?B.length>(v||0)+P:!1,ta=D&&(D.includes("*")?[...this.fieldsIndex.fields]:D.map(za=>this.fieldsIndex.get(za)));return{exceededTransferLimit:ka,features:this._createFeatures(S,B),fields:ta,geometryType:z,hasM:q&&X,hasZ:E&&G,objectIdFieldName:d,
spatialReference:Q.cleanFromGeometryEngine(I?I:p),transform:K&&C.toQuantizationTransform(K)||null}};U._createFeatures=function(S,B){const z=new k(S,this.featureAdapter,this.fieldsIndex),{hasM:q,hasZ:E}=this,{orderByFields:d,quantizationParameters:p,returnGeometry:D,returnCentroid:I,maxAllowableOffset:K,resultOffset:P,resultRecordCount:v,returnZ:G=!1,returnM:X=!1}=S,ka=E&&G,ta=q&&X;S=[];var za=0;B=[...B];this._sortFeatures(B,d,(Fa,Ua,Oa)=>z.getFieldValue(Fa,Ua,Oa));if(D||I){var Ea=C.toQuantizationTransform(p)??
void 0;if(D&&!I)for(var Ha of B)S[za++]={attributes:z.getAttributes(Ha),geometry:Q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(Ha),K,Ea,ka,ta)};else if(!D&&I)for(const Fa of B)S[za++]={attributes:z.getAttributes(Fa),centroid:Q.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea)};else for(const Fa of B)S[za++]={attributes:z.getAttributes(Fa),centroid:Q.transformCentroid(this,this.featureAdapter.getCentroid(Fa,this),Ea),geometry:Q.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Fa),K,Ea,ka,ta)}}else for(Ea of B)(Ha=z.getAttributes(Ea))&&(S[za++]={attributes:Ha});za=P||0;null!=v&&(S=S.slice(za,Math.min(S.length,za+v)));return S};U._createExceedsLimitQueryResponse=function(S){var B=!1;let z=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY;B=Number.POSITIVE_INFINITY;for(const E of S.outStatistics??[])if("exceedslimit"===E.statisticType){z=null!=E.maxPointCount?E.maxPointCount:Number.POSITIVE_INFINITY;q=null!=E.maxRecordCount?
E.maxRecordCount:Number.POSITIVE_INFINITY;B=null!=E.maxVertexCount?E.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)B=this.items.length>z;else if(this.items.length>q)B=!0;else{S=n(this.hasZ,this.hasM);const E=this.featureAdapter;B=this.items.reduce((d,p)=>{p=E.getGeometry(p);return d+(N.isSome(p)&&p.coords.length||0)},0)/S>B}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(B)}}]}};U._createStatisticsQueryResponse=function(){var S=O._asyncToGenerator(function*(B){var z={attributes:{}};const q=[],E=new Map,d=new Map,p=new Map,D=new Map,I=new k(B,this.featureAdapter,this.fieldsIndex);var K=B.outStatistics;const {groupByFieldsForStatistics:P,having:v,orderByFields:G}=B;B=P&&P.length;const X=!!B,ka=X?P[0]:null,ta=X&&!this.fieldsIndex.get(ka);for(const Ua of K??[]){const {outStatisticFieldName:Oa,statisticType:Sa}=Ua;K=Ua;var za=
"exceedslimit"!==Sa?Ua.onStatisticField:void 0;const $a="percentile_disc"===Sa||"percentile_cont"===Sa,Ta="EnvelopeAggregate"===Sa||"CentroidAggregate"===Sa||"ConvexHullAggregate"===Sa,jb=X&&1===B&&(za===ka||ta)&&"count"===Sa;if(X){if(!p.has(za)){var Ea=[];for(const ib of P){var Ha=this._getAttributeValues(I,ib,E);Ea.push(Ha)}p.set(za,this._calculateUniqueValues(Ea,Ta?!1:I.returnDistinctValues))}Ea=p.get(za);for(const ib in Ea){const {count:lb,data:l,items:H,itemPositions:fa}=Ea[ib];Ha=l.join(",");
if(!v||I.validateItems(H,v)){const la=D.get(Ha)||{attributes:{}};if(Ta){la.aggregateGeometries||(la.aggregateGeometries={});const {aggregateGeometries:R,outStatisticFieldName:W}=yield this._getAggregateGeometry(K,H);la.aggregateGeometries[W]=R}else{var Fa=null;if(jb)Fa=lb;else{const R=this._getAttributeValues(I,za,E);Fa=fa.map(W=>R[W]);Fa=$a&&"statisticParameters"in K?this._getPercentileValue(K,Fa):this._getStatisticValue(K,Fa,null,I.returnDistinctValues)}la.attributes[Oa]=Fa}let va=0;P.forEach((R,
W)=>la.attributes[this.fieldsIndex.get(R)?R:`EXPR_${++va}`]=l[W]);D.set(Ha,la)}}}else if(Ta){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:ib,outStatisticFieldName:lb}=yield this._getAggregateGeometry(K,this.items);z.aggregateGeometries[lb]=ib}else za=this._getAttributeValues(I,za,E),z.attributes[Oa]=$a&&"statisticParameters"in K?this._getPercentileValue(K,za):this._getStatisticValue(K,za,d,I.returnDistinctValues);q.push({name:Oa,alias:Oa,type:"esriFieldTypeDouble"})}z=
X?Array.from(D.values()):[z];this._sortFeatures(z,G,(Ua,Oa)=>Ua.attributes[Oa]);return{fields:q,features:z}});return function(B){return S.apply(this,arguments)}}();U._getAggregateGeometry=function(){var S=O._asyncToGenerator(function*(B,z){var q=yield new Promise((G,X)=>c(["../../../geometry/geometryEngineJSON"],G,X));const {statisticType:E,outStatisticFieldName:d}=B,{featureAdapter:p,spatialReference:D,geometryType:I,hasZ:K,hasM:P}=this;z=z.map(G=>Q.getGeometry(I,K,P,p.getGeometry(G)));const v=q.convexHull(D,
z,!0)[0];B={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===E?(q=v?r.getPolygonExtent(v):r.getGeometryExtent(q.union(D,z)),B.aggregateGeometries={...q,spatialReference:D},B.outStatisticFieldName=d||"extent"):"CentroidAggregate"===E?(q=v?F.polygonCentroid(v):F.extentCentroid(r.getGeometryExtent(q.union(D,z))),B.aggregateGeometries={x:q[0],y:q[1],spatialReference:D},B.outStatisticFieldName=d||"centroid"):"ConvexHullAggregate"===E&&(B.aggregateGeometries=v,B.outStatisticFieldName=
d||"convexHull");return B});return function(B,z){return S.apply(this,arguments)}}();U._getStatisticValue=function(S,B,z,q){const {onStatisticField:E,statisticType:d}=S;S=null;S=z?.has(E)?z.get(E):y.isStringField(this.fieldsIndex.get(E))?g.calculateStringStatistics({values:B,returnDistinct:q}):g.calculateStatistics({values:q?[...(new Set(B))]:B,minValue:null,maxValue:null,useSampleStdDev:!0});z&&z.set(E,S);return S["var"===d?"variance":d]};U._getPercentileValue=function(S,B){const {onStatisticField:z,
statisticParameters:q,statisticType:E}=S,{value:d,orderBy:p}=q;S=this.fieldsIndex.get(z);return g.calculatePercentile(B,{value:d,orderBy:p,fieldType:S?.type,isDiscrete:"percentile_disc"===E})};U._getAttributeValues=function(S,B,z){if(z.has(B))return z.get(B);const q=this.fieldsIndex.get(B),E=this.items.map(d=>S.getFieldValue(d,B,q));z.set(B,E);return E};U._getAttributeDataValues=function(S,B){return this.items.map(z=>S.getDataValue(z,{field:B.field,field2:B.field2,field3:B.field3,fieldDelimiter:B.fieldDelimiter,
normalizationField:B.normalizationField,normalizationType:B.normalizationType,normalizationTotal:B.normalizationTotal}))};U._getAttributeExpressionValues=function(){var S=O._asyncToGenerator(function*(B,z,q){const {arcadeUtils:E}=yield x.loadArcade();z=E.createFunction(z);q=q&&E.getViewInfo(q);return B.getExpressionValues(this.items,z,q,E)});return function(B,z,q){return S.apply(this,arguments)}}();U._calculateUniqueValues=function(S,B){const z={},q=this.items,E=q.length;for(let d=0;d<E;d++){const p=
q[d],D=[];for(const K of S)D.push(K[d]);const I=D.join(",");null==z[I]?z[I]={count:1,data:D,items:[p],itemPositions:[d]}:(B||z[I].count++,z[I].items.push(p),z[I].itemPositions.push(d))}return z};U._getDataValues=function(){var S=O._asyncToGenerator(function*(B){const z=new k(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:q,field:E,normalizationField:d,normalizationType:p,normalizationTotal:D,scale:I}=B,K=q?{viewingMode:"map",scale:I,spatialReference:this.query.outSR||this.spatialReference}:
null;return q?this._getAttributeExpressionValues(z,q,K):this._getAttributeDataValues(z,{field:E,field2:B.field2,field3:B.field3,fieldDelimiter:B.fieldDelimiter,normalizationField:d,normalizationType:p,normalizationTotal:D})});return function(B){return S.apply(this,arguments)}}();O._createClass(L,[{key:"size",get:function(){return this.items.length}}]);return L}();b.SnappingTypes=void 0;(function(L){L[L.NONE=0]="NONE";L[L.EDGE=1]="EDGE";L[L.VERTEX=2]="VERTEX"})(b.SnappingTypes||(b.SnappingTypes={}));
let M=function(){function L(U,S){this.coords=U;this.coordsIndex=S}O._createClass(L,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return L}();b.QueryEngineResult=u;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(c,b,O){function N({scale:d,
translate:p},D){return Math.round((D-p[0])/d[0])}function F({scale:d,translate:p},D){return Math.round((p[1]-D)/d[1])}function r(d,p,D){const I=[];let K,P,v,G;for(let X=0;X<D.length;X++){const ka=D[X];if(0<X){if(v=N(d,ka[0]),G=F(d,ka[1]),v!==K||G!==P)I.push(p(ka,v-K,G-P)),K=v,P=G}else K=N(d,ka[0]),P=F(d,ka[1]),I.push(p(ka,K,P))}return 0<I.length?I:null}function C(d,p,D,I){return r(d,D?I?E:q:I?q:z,p)}function w(d,p,D,I){const K=[];D=D?I?E:q:I?q:z;for(I=0;I<p.length;I++){const P=r(d,D,p[I]);P&&3<=P.length&&
K.push(P)}return K.length?K:null}function k(d,p,D,I){const K=[];D=D?I?E:q:I?q:z;for(I=0;I<p.length;I++){const P=r(d,D,p[I]);P&&2<=P.length&&K.push(P)}return K.length?K:null}function h({scale:d,translate:p},D){return D*d[0]+p[0]}function A({scale:d,translate:p},D){return p[1]-D*d[1]}function Q(d,p,D){const I=Array(D.length);if(!D.length)return I;const [K,P]=d.scale;let v=h(d,D[0][0]);d=A(d,D[0][1]);I[0]=p(D[0],v,d);for(let G=1;G<D.length;G++){const X=D[G];v+=X[0]*K;d-=X[1]*P;I[G]=p(X,v,d)}return I}
function y(d,p,D){const I=Array(D.length);for(let K=0;K<D.length;K++)I[K]=Q(d,p,D[K]);return I}function g(d,p,D,I){return Q(d,D?I?E:q:I?q:z,p)}function x(d,p,D,I){return y(d,D?I?E:q:I?q:z,p)}function e(d,p,D,I){return y(d,D?I?E:q:I?q:z,p)}function n(d,p,D){let [I,K]=D[0],P=Math.min(I,p[0]),v=Math.min(K,p[1]),G=Math.max(I,p[2]);p=Math.max(K,p[3]);for(let X=1;X<D.length;X++){const [ka,ta]=D[X];I+=ka;K+=ta;0>ka&&(P=Math.min(P,I));0<ka&&(G=Math.max(G,I));0>ta?v=Math.min(v,K):0<ta&&(p=Math.max(p,K))}d[0]=
P;d[1]=v;d[2]=G;d[3]=p;return d}function u(d,p){if(!p.length)return null;d[0]=d[1]=Number.POSITIVE_INFINITY;d[2]=d[3]=Number.NEGATIVE_INFINITY;for(let D=0;D<p.length;D++)n(d,d,p[D]);return d}function M(d,p,D,I,K){p.xmin=N(d,D.xmin);p.ymin=F(d,D.ymin);p.xmax=N(d,D.xmax);p.ymax=F(d,D.ymax);p!==D&&(I&&(p.zmin=D.zmin,p.zmax=D.zmax),K&&(p.mmin=D.mmin,p.mmax=D.mmax));return p}function L(d,p,D,I,K){p.points=C(d,D.points,I,K)??[];return p}function U(d,p,D,I,K){p.x=N(d,D.x);p.y=F(d,D.y);p!==D&&(I&&(p.z=D.z),
K&&(p.m=D.m));return p}function S(d,p,D,I,K){d=w(d,D.rings,I,K);if(!d)return null;p.rings=d;return p}function B(d,p,D,I,K){d=k(d,D.paths,I,K);if(!d)return null;p.paths=d;return p}const z=(d,p,D)=>[p,D],q=(d,p,D)=>[p,D,d[2]],E=(d,p,D)=>[p,D,d[2],d[3]];c.equals=function(d,p){if(d===p||null==d&&null==p)return!0;if(null==d||null==p)return!1;let D,I,K,P;d&&"upperLeft"===d.originPosition?(D=d.translate[0],I=d.translate[1],d=d.scale[0]):(D=b.isSome(d.extent)?d.extent.xmin:0,I=b.isSome(d.extent)?d.extent.ymax:
0,d=d.tolerance);p&&"upperLeft"===p.originPosition?(K=p.translate[0],P=p.translate[1],p=p.scale[0]):(K=b.isSome(p.extent)?p.extent.xmin:0,P=b.isSome(p.extent)?p.extent.ymax:0,p=p.tolerance);return D===K&&I===P&&d===p};c.getQuantizedBoundsCoordsArray=n;c.getQuantizedBoundsCoordsArrayArray=u;c.getQuantizedBoundsPaths=function(d){return u([0,0,0,0],d)};c.getQuantizedBoundsPoints=function(d){const p=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return n(p,p,d)};c.getQuantizedBoundsRings=function(d){return u([0,0,0,0],d)};c.quantizeBounds=function(d,p,D){p[0]=N(d,D[0]);p[3]=F(d,D[1]);p[2]=N(d,D[2]);p[1]=F(d,D[3]);return p};c.quantizeExtent=M;c.quantizeGeometry=function(d,p){return d&&p?O.isPoint(p)?U(d,{},p,!1,!1):O.isPolyline(p)?B(d,{},p,!1,!1):O.isPolygon(p)?S(d,{},p,!1,!1):O.isMultipoint(p)?L(d,{},p,!1,!1):O.isExtent(p)?M(d,{},p,!1,!1):null:null};c.quantizeMultipoint=L;c.quantizePaths=k;c.quantizePoint=U;c.quantizePoints=C;c.quantizePolygon=
S;c.quantizePolyline=B;c.quantizeRings=w;c.quantizeX=N;c.quantizeY=F;c.toQuantizationTransform=function(d){return d?{originPosition:"upper-left"===d.originPosition?"upperLeft":"lower-left"===d.originPosition?"lowerLeft":d.originPosition,scale:d.tolerance?[d.tolerance,d.tolerance]:[1,1],translate:b.isSome(d.extent)?[d.extent.xmin,d.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(d,p,D){return D?(p[0]=h(d,D[0]),p[1]=A(d,D[3]),p[2]=h(d,D[2]),p[3]=A(d,D[1]),p):[h(d,p[0]),A(d,p[3]),h(d,p[2]),A(d,
p[1])]};c.unquantizeCoordsArray=Q;c.unquantizeCoordsArrayArray=y;c.unquantizeExtent=function(d,p,D,I,K){p.xmin=h(d,D.xmin);p.ymin=A(d,D.ymin);p.xmax=h(d,D.xmax);p.ymax=A(d,D.ymax);p!==D&&(I&&(p.zmin=D.zmin,p.zmax=D.zmax),K&&(p.mmin=D.mmin,p.mmax=D.mmax));return p};c.unquantizeMultipoint=function(d,p,D,I,K){b.isSome(D)&&(p.points=g(d,D.points,I,K));return p};c.unquantizePaths=x;c.unquantizePoint=function(d,p,D,I,K){if(b.isNone(D))return p;p.x=h(d,D.x);p.y=A(d,D.y);p!==D&&(I&&(p.z=D.z),K&&(p.m=D.m));
return p};c.unquantizePoints=g;c.unquantizePolygon=function(d,p,D,I,K){b.isSome(D)&&(p.rings=e(d,D.rings,I,K));return p};c.unquantizePolyline=function(d,p,D,I,K){b.isSome(D)&&(p.paths=x(d,D.paths,I,K));return p};c.unquantizeRings=e;c.unquantizeX=h;c.unquantizeY=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(c,b,O){return function(){function N(r,
C,w){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=r.returnDistinctValues??!1;this.fieldsIndex=w;this.featureAdapter=C;if((C=r.outFields)&&!C.includes("*")){this.outFields=C;r=0;for(const h of C){var k=b.getExpressionFromFieldName(h);k=(C=this.fieldsIndex.get(k))?null:b.getWhereClause(k,w);C=C?C.name:b.getAliasFromFieldName(h)||`FIELD_EXP_${r++}`;this._fieldDataCache.set(h,{alias:C,clause:k})}}}var F=N.prototype;F.countDistinctValues=function(r){if(!this.returnDistinctValues)return r.length;
r.forEach(C=>this.getAttributes(C));return this._returnDistinctMap.size};F.getAttributes=function(r){r=this._processAttributesForOutFields(r);return this._processAttributesForDistinctValues(r)};F.getFieldValue=function(r,C,w){const k=w?w.name:C;let h=null;this._fieldDataCache.has(k)?h=this._fieldDataCache.get(k)?.clause:w||(h=b.getWhereClause(C,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:h}));return w?this.featureAdapter.getAttribute(r,k):h?.calculateValue(r,this.featureAdapter)};
F.getDataValue=function(r,C){const w=C.normalizationType,k=C.normalizationTotal;let h=C.field&&this.getFieldValue(r,C.field,this.fieldsIndex.get(C.field));C.field2&&(h=`${O.processNullValue(h)}${C.fieldDelimiter}${O.processNullValue(this.getFieldValue(r,C.field2,this.fieldsIndex.get(C.field2)))}`,C.field3&&(h=`${h}${C.fieldDelimiter}${O.processNullValue(this.getFieldValue(r,C.field3,this.fieldsIndex.get(C.field3)))}`));w&&Number.isFinite(h)&&(r="field"===w&&C.normalizationField?this.getFieldValue(r,
C.normalizationField,this.fieldsIndex.get(C.normalizationField)):null,h=O.getNormalizedValue(h,w,r,k));return h};F.getExpressionValue=function(r,C,w,k){r={attributes:this.featureAdapter.getAttributes(r),layer:{fields:this.fieldsIndex.fields}};w=k.createExecContext(r,w);return k.executeFunction(C,w)};F.getExpressionValues=function(r,C,w,k){const h={fields:this.fieldsIndex.fields};return r.map(A=>{A={attributes:this.featureAdapter.getAttributes(A),layer:h};A=k.createExecContext(A,w);return k.executeFunction(C,
A)})};F.validateItem=function(r,C){this._fieldDataCache.has(C)||this._fieldDataCache.set(C,{alias:C,clause:b.getWhereClause(C,this.fieldsIndex)});return this._fieldDataCache.get(C)?.clause?.testFeature(r,this.featureAdapter)??!1};F.validateItems=function(r,C){this._fieldDataCache.has(C)||this._fieldDataCache.set(C,{alias:C,clause:b.getWhereClause(C,this.fieldsIndex)});return this._fieldDataCache.get(C)?.clause?.testSet(r,this.featureAdapter)??!1};F._processAttributesForOutFields=function(r){const C=
this.outFields;if(!C||!C.length)return this.featureAdapter.getAttributes(r);const w={};for(const k of C){const {alias:h,clause:A}=this._fieldDataCache.get(k);w[h]=A?A.calculateValue(r,this.featureAdapter):this.featureAdapter.getAttribute(r,h)}return w};F._processAttributesForDistinctValues=function(r){if(c.isNone(r)||!this.returnDistinctValues)return r;var C=this.outFields,w=[];if(C)for(const h of C){var {alias:k}=this._fieldDataCache.get(h);w.push(r[k])}else for(k in r)w.push(r[k]);C=`${(C||["*"]).join(",")}=${w.join(",")}`;
w=this._returnDistinctMap.get(C)||0;this._returnDistinctMap.set(C,++w);return 1<w?null:r};return N}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,b,O){function N(B){return null==B||"string"===typeof B&&!B?"\x3cNull\x3e":B}function F(B){const z=null!=B.minValue||null!=B.maxValue,q=!!B.sqlExpression&&B.supportsSQLExpression;return!(null!=B.normalizationField||null!=B.normalizationType)&&!z&&!q}function r(B){const {values:z,
useSampleStdDev:q,supportsNullCount:E}=B;var d=Number.POSITIVE_INFINITY;let p=Number.NEGATIVE_INFINITY,D=null,I=null;var K=null;let P=null,v=0;const G=null==B.minValue?-Infinity:B.minValue,X=null==B.maxValue?Infinity:B.maxValue;for(const ka of z)Number.isFinite(ka)?ka>=G&&ka<=X&&(D=null===D?ka:D+ka,d=Math.min(d,ka),p=Math.max(p,ka),v++):"string"===typeof ka&&v++;if(v&&null!=D){I=D/v;K=0;for(const ka of z)Number.isFinite(ka)&&ka>=G&&ka<=X&&(K+=(ka-I)**2);P=q?1<v?K/(v-1):0:0<v?K/v:0;K=Math.sqrt(P)}else p=
d=null;d={avg:I,count:v,max:p,min:d,stddev:K,sum:D,variance:P};E&&(d.nullcount=z.length-v);B.percentileParams&&(d.median=C(z,B.percentileParams));return d}function C(B,z){const {fieldType:q,value:E,orderBy:d,isDiscrete:p}=z,D=w(q,"desc"===d);B=[...B].filter(v=>null!=v).sort((v,G)=>D(v,G));if(0===B.length)return null;if(0>=E)return B[0];if(1<=E)return B[B.length-1];var I=(B.length-1)*E,K=Math.floor(I);z=K+1;I%=1;K=B[K];const P=B[z];return z>=B.length||p||"string"===typeof K||"string"===typeof P?K:
K*(1-I)+P*I}function w(B,z){const q=z?1:-1,E=A(z),d=h(z);if(!B||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...U].includes(B))return(p,D)=>"number"===typeof p&&"number"===typeof D?E(p,D):"string"===typeof p&&"string"===typeof D?d(p,D):q;if("esriFieldTypeDate"===B)return(p,D)=>{p=(new Date(p)).getTime();D=(new Date(D)).getTime();return isNaN(p)||isNaN(D)?q:E(p,D)};if(U.has(B))return(p,D)=>E(p,D);if("esriFieldTypeString"===B)return(p,D)=>d(p,D);if("esriFieldTypeGUID"===
B||"esriFieldTypeGlobalID"===B){const p=h(z);return(D,I)=>p(Q(D),Q(I))}return z?(p,D)=>1:(p,D)=>-1}function k(B,z,q){if(q){if(null==B)return null==z?0:1;if(null==z)return-1}else{if(null==B)return null==z?0:-1;if(null==z)return 1}return null}function h(B){return B?(z,q)=>{const E=k(z,q,!0);if(null!=E)return E;z=z.toUpperCase();q=q.toUpperCase();return z>q?-1:z<q?1:0}:(z,q)=>{const E=k(z,q,!1);if(null!=E)return E;z=z.toUpperCase();q=q.toUpperCase();return z<q?-1:z>q?1:0}}function A(B){return B?(z,q)=>
{const E=k(z,q,!0);return null!=E?E:q-z}:(z,q)=>{const E=k(z,q,!1);return null!=E?E:z-q}}function Q(B){return B.substr(24,12)+B.substr(19,4)+B.substr(16,2)+B.substr(14,2)+B.substr(11,2)+B.substr(9,2)+B.substr(6,2)+B.substr(4,2)+B.substr(2,2)+B.substr(0,2)}function y(B){return"coded-value"!==B?.type?[]:B.codedValues.map(z=>z.code)}function g(B,z){const q=e({field:z.field,normalizationType:z.normalizationType,normalizationField:z.normalizationField,classificationMethod:z.classificationMethod,standardDeviationInterval:z.standardDeviationInterval,
breakCount:z.numClasses||5});B=x(B,z.minValue,z.maxValue);return O.createGenerateRendererClassBreaks({definition:q,values:B,normalizationTotal:z.normalizationTotal})}function x(B,z,q){const E=null==z?-Infinity:z,d=null==q?Infinity:q;return B.filter(p=>Number.isFinite(p)&&p>=E&&p<=d)}function e(B){const {breakCount:z,field:q,normalizationField:E,normalizationType:d}=B,p=B.classificationMethod||"equal-interval";return new b({breakCount:z,classificationField:q,classificationMethod:p,normalizationField:"field"===
d?E:void 0,normalizationType:d,standardDeviationInterval:"standard-deviation"===p?B.standardDeviationInterval||1:void 0})}function n(B,z){const {field:q,classificationMethod:E,standardDeviationInterval:d,normalizationType:p,normalizationField:D,normalizationTotal:I,minValue:K,maxValue:P}=z,v=z.numBins||10;let G=z=null,X=null;E&&"equal-interval"!==E||p?({classBreaks:B}=g(B,{field:q,normalizationType:p,normalizationField:D,normalizationTotal:I,classificationMethod:E,standardDeviationInterval:d,minValue:K,
maxValue:P,numClasses:v}),z=B[0].minValue,G=B[B.length-1].maxValue,X=B.map(ka=>[ka.minValue,ka.maxValue])):(null!=K&&null!=P?(z=K,G=P):(B=r({values:B,minValue:K,maxValue:P,useSampleStdDev:!p,supportsNullCount:F({normalizationType:p,normalizationField:D,minValue:K,maxValue:P})}),z=B.min??null,G=B.max??null),X=M(z??0,G??0,v));return{min:z,max:G,intervals:X}}function u(B,z){let q=-1;for(let E=B.length-1;0<=E;E--)if(z>=B[E][0]){q=E;break}return q}function M(B,z,q){const E=(z-B)/q,d=[];let p;for(let D=
1;D<=q;D++)p=B+E,p=Number(p.toFixed(16)),d.push([B,D===q?z:p]),B=p;return d}const L=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,U=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),S="min max avg stddev count sum variance nullcount median".split(" ");c.calculateClassBreaks=g;c.calculateHistogram=function(B,z){var q=n(B,z);const E=q.intervals,d=q.min??0;q=q.max??0;const p=E.map((D,I)=>({minValue:E[I][0],maxValue:E[I][1],count:0}));for(const D of B)null!=
D&&D>=d&&D<=q&&(B=u(E,D),-1<B&&p[B].count++);return{bins:p,minValue:d,maxValue:q,normalizationTotal:z.normalizationTotal}};c.calculatePercentile=C;c.calculateStatistics=r;c.calculateStringStatistics=function(B){const z=B.returnDistinct?[...(new Set(B.values))]:B.values,q=z.filter(d=>null!=d).length,E={count:q};B.supportsNullCount&&(E.nullcount=z.length-q);B.percentileParams&&(E.median=C(z,B.percentileParams));return E};c.calculateUniqueValuesCount=function(B){const z={};for(let q of B){if(null==q||
"string"===typeof q&&""===q.trim())q=null;null==z[q]?z[q]={count:1,data:q}:z[q].count++}return{count:z}};c.createClassBreaksDefinition=e;c.createUVResult=function(B,z,q,E){B=B.count;const d=[];if(q&&z){q=[];var p=y(z[0]);for(const D of p)if(z[1]){p=y(z[1]);for(const I of p)if(z[2]){p=y(z[2]);for(const K of p)q.push(`${N(D)}${E}${N(I)}${E}${N(K)}`)}else q.push(`${N(D)}${E}${N(I)}`)}else q.push(D);for(const D of q)B.hasOwnProperty(D)||(B[D]={data:D,count:0})}for(const D in B)z=B[D],d.push({value:z.data,
count:z.count,label:z.label});return{uniqueValueInfos:d}};c.getAttributeComparator=w;c.getEqualIntervalBins=M;c.getNormalizedValue=function(B,z,q,E){let d=null;switch(z){case "log":0!==B&&(d=Math.log(B)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(E)&&0!==E&&(d=B/E*100);break;case "field":Number.isFinite(q)&&0!==q&&(d=B/q);break;case "natural-log":0<B&&(d=Math.log(B));break;case "square-root":0<B&&(d=B**.5)}return d};c.isNullCountSupported=F;c.processNullValue=N;c.processSummaryStatisticsResult=
function(B,z){let q;for(q in B)S.includes(q)&&(Number.isFinite(B[q])||(B[q]=null));if(!z)return B;["avg","stddev","variance"].forEach(E=>{null!=B[E]&&(B[E]=Math.ceil(B[E]))});return B};c.resolveCBResult=function(B,z){let q=B.classBreaks;const E=q[0].minValue,d=q[q.length-1].maxValue,p="standard-deviation"===z;q=q.map(D=>{const I=D.label;D={minValue:D.minValue,maxValue:D.maxValue,label:I};if(p&&I){const K=I.match(L)?.map(P=>+P.trim())??[];2===K.length?(D.minStdDev=K[0],D.maxStdDev=K[1],0>K[0]&&0<K[1]&&
(D.hasAvg=!0)):1===K.length&&(I.includes("\x3c")?(D.minStdDev=null,D.maxStdDev=K[0]):I.includes("\x3e")&&(D.minStdDev=K[0],D.maxStdDev=null))}return D});return{minValue:E,maxValue:d,classBreakInfos:q,normalizationTotal:B.normalizationTotal}};c.statisticTypes=S;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k){r=new O.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});O=new O.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});N=function(h){function A(Q){Q=h.call(this,Q)||this;Q.type="class-breaks-definition";Q.breakCount=
null;Q.classificationField=null;Q.classificationMethod=null;Q.normalizationField=null;Q.normalizationType=null;return Q}c._inheritsLoose(A,h);c._createClass(A,[{key:"standardDeviationInterval",set:function(Q){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",Q)}},{key:"definedInterval",set:function(Q){"defined-interval"===this.classificationMethod&&this._set("definedInterval",Q)}}]);return A}(N.JSONSupport);b.__decorate([w.enumeration({classBreaksDef:"class-breaks-definition"})],
N.prototype,"type",void 0);b.__decorate([F.property({json:{write:!0}})],N.prototype,"breakCount",void 0);b.__decorate([F.property({json:{write:!0}})],N.prototype,"classificationField",void 0);b.__decorate([F.property({type:String,json:{read:r.read,write:r.write}})],N.prototype,"classificationMethod",void 0);b.__decorate([F.property({json:{write:!0}})],N.prototype,"normalizationField",void 0);b.__decorate([F.property({json:{read:O.read,write:O.write}})],N.prototype,"normalizationType",void 0);b.__decorate([F.property({value:null,
json:{write:!0}})],N.prototype,"standardDeviationInterval",null);b.__decorate([F.property({value:null,json:{write:!0}})],N.prototype,"definedInterval",null);return N=b.__decorate([k.subclass("esri.rest.support.ClassBreaksDefinition")],N)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,b,O){c.enumeration=function(N,F={}){N=N instanceof b.JSONMap?N:new b.JSONMap(N,F);N={type:F?.ignoreUnknown??!0?N.apiValues:String,json:{type:N.jsonValues,
read:F?.readOnly?!1:{reader:N.read},write:{writer:N.write}}};void 0!==F?.readOnly&&(N.readOnly=!!F.readOnly);void 0!==F?.default&&(N.json.default=F.default);void 0!==F?.name&&(N.json.name=F.name);void 0!==F?.nonNullable&&(N.nonNullable=F.nonNullable);return O.property(N)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,b){function O(y){var g=y.definition;const {classificationMethod:x,
normalizationType:e,definedInterval:n}=g;g=g.breakCount??1;const u=[];var M=y.values;if(0===M.length)return[];M=M.sort((q,E)=>q-E);var L=M[0],U=M[M.length-1];if("equal-interval"===x)if(M.length>=g){M=(U-L)/g;y=L;for(var S=1;S<g;S++){var B=Number((L+S*M).toFixed(6));u.push({minValue:y,maxValue:B,label:N(y,B,e)});y=B}u.push({minValue:y,maxValue:U,label:N(y,U,e)})}else M.forEach(q=>{u.push({minValue:q,maxValue:q,label:N(q,q,e)})});else if("natural-breaks"===x){M=F(M);y=r(M.uniqueValues,y.valueFrequency||
M.valueFrequency,g);for(S=1;S<g;S++)M.uniqueValues.length>S&&(B=Number(M.uniqueValues[y[S]].toFixed(6)),u.push({minValue:L,maxValue:B,label:N(L,B,e)}),L=B);u.push({minValue:L,maxValue:U,label:N(L,U,e)})}else if("quantile"===x)if(M.length>=g&&L!==U){y=Math.ceil(M.length/g);S=0;for(B=1;B<g;B++){var z=y+S-1;z>M.length&&(z=M.length-1);0>z&&(z=0);u.push({minValue:L,maxValue:M[z],label:N(L,M[z],e)});L=M[z];S+=y;y=Math.ceil((M.length-S)/(g-B))}u.push({minValue:L,maxValue:U,label:N(L,U,e)})}else for(g=-1,
U=0;U<M.length;U++)L=M[U],L!==g&&(g=L,u.push({minValue:g,maxValue:L,label:N(g,L,e)}),g=L);else if("standard-deviation"===x)if(y=k(M),S=h(M,y),0===S)u.push({minValue:M[0],maxValue:M[0],label:N(M[0],M[0],e)});else{M=w(L,U,g,y,S)*S;S=0;for(B=g;1<=B;B--)z=Number((y-(B-.5)*M).toFixed(6)),u.push({minValue:L,maxValue:z,label:N(L,z,e)}),L=z,S++;B=Number((y+.5*M).toFixed(6));u.push({minValue:L,maxValue:B,label:N(L,B,e)});L=B;S++;for(z=1;z<=g;z++)B=S===2*g?U:Number((y+(z+.5)*M).toFixed(6)),u.push({minValue:L,
maxValue:B,label:N(L,B,e)}),L=B,S++}else if("defined-interval"===x){if(!n)return u;g=M[0];U=M[M.length-1];M=Math.ceil((U-g)/n);L=g;for(y=1;y<M;y++)S=Number((g+y*n).toFixed(6)),u.push({minValue:L,maxValue:S,label:N(L,S,e)}),L=S;u.push({minValue:L,maxValue:U,label:N(L,U,e)})}return u}function N(y,g,x){let e=null;return e=y===g?x&&"percent-of-total"===x?y+"%":y.toString():x&&"percent-of-total"===x?y+"% - "+g+"%":y+" - "+g}function F(y){const g=[],x=[];let e=Number.MIN_VALUE,n=1,u=-1;for(let M=0;M<y.length;M++){const L=
y[M];L===e?(n++,x[u]=n):null!==L&&(g.push(L),e=L,n=1,x.push(n),u++)}return{uniqueValues:g,valueFrequency:x}}function r(y,g,x){var e=y.length;const n=[];x>e&&(x=e);for(var u=0;u<x;u++)n.push(Math.round(u*e/x-1));n.push(e-1);u=C(n,y,g,x);e=u.mean;u=u.sdcm;var M=x,L=0,U=0;let S=0,B=0,z=!0;for(let E=0;2>E&&z;E++){0===E&&(z=!1);for(var q=0;q<M-1;q++)for(;n[q+1]+1!==n[q+2];)if(n[q+1]+=1,L=A(q,n,y,g),S=L.sbMean,L=L.sbSdcm,U=A(q+1,n,y,g),B=U.sbMean,U=U.sbSdcm,L+U<u[q]+u[q+1])u[q]=L,u[q+1]=U,e[q]=S,e[q+1]=
B,z=!0;else{--n[q+1];break}for(q=M-1;0<q;q--)for(;n[q]!==n[q-1]+1;)if(--n[q],L=A(q-1,n,y,g),S=L.sbMean,L=L.sbSdcm,U=A(q,n,y,g),B=U.sbMean,U=U.sbSdcm,L+U<u[q-1]+u[q])u[q-1]=L,u[q]=U,e[q-1]=S,e[q]=B,z=!0;else{n[q]+=1;break}}z&&(u=C(n,y,g,x));return n}function C(y,g,x,e){let n=[];var u=[],M=[];let L=0;const U=[],S=[];for(var B=0;B<e;B++){var z=A(B,y,g,x);U.push(z.sbMean);S.push(z.sbSdcm);L+=S[B]}z=L;for(B=!0;B||L<z;){B=!1;n=[];for(u=0;u<e;u++)n.push(y[u]);for(M=0;M<e;M++)for(z=y[M]+1;z<=y[M+1];z++)if(u=
g[z],0<M&&z!==y[M+1]&&Math.abs(u-U[M])>Math.abs(u-U[M-1]))y[M]=z;else if(M<e-1&&y[M]!==z-1&&Math.abs(u-U[M])>Math.abs(u-U[M+1])){y[M+1]=z-1;break}z=L;L=0;u=[];M=[];for(let q=0;q<e;q++){u.push(U[q]);M.push(S[q]);const E=A(q,y,g,x);U[q]=E.sbMean;S[q]=E.sbSdcm;L+=S[q]}}if(L>z){for(g=0;g<e;g++)y[g]=n[g],U[g]=u[g],S[g]=M[g];L=z}return{mean:U,sdcm:S}}function w(y,g,x,e,n){y=Math.max(e-y,g-e)/n/x;return 1<=y?1:.5<=y?.5:.25}function k(y){let g=0;for(let x=0;x<y.length;x++)g+=y[x];return g/=y.length}function h(y,
g){let x=0;for(let e=0;e<y.length;e++){const n=y[e];x+=(n-g)*(n-g)}x/=y.length;return Math.sqrt(x)}function A(y,g,x,e){var n=0,u=0;for(var M=g[y]+1;M<=g[y+1];M++){const L=e[M];n+=x[M]*L;u+=L}0>=u&&Q.warn("Exception in Natural Breaks calculation");n/=u;u=0;for(M=g[y]+1;M<=g[y+1];M++)u+=e[M]*(x[M]-n)**2;return{sbMean:n,sbSdcm:u}}const Q=b.getLogger("esri.rest.support.generateRendererUtils");c.createGenerateRendererClassBreaks=function(y){const {normalizationTotal:g}=y;return{classBreaks:O(y),normalizationTotal:g}};
c.createGenerateRendererUniqueValues=function(y){y=F(y);const g=[],x=y.uniqueValues.length;for(let e=0;e<x;e++){const n=y.uniqueValues[e];g.push({value:n,count:y.valueFrequency[e],label:n.toString()})}return{uniqueValues:g}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(b,O,N,F,r,C=!1){return{objectId:b,target:O,distance:N,type:"edge",start:F,end:r,draped:C}};c.makeVertexCandidate=
function(b,O,N){return{objectId:b,target:O,distance:N,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(c,b,O,N,F,r,C,w){function k(Y,da,pa){if(Y)for(const wa of Y)(Y=(Y=r.getDeepValue(wa,da))&&"function"!==typeof Y&&pa.get(Y))&&r.setDeepValue(wa,Y.name,
da)}function h(Y,da){if(!Y||!da)return[];va.clear();A(va,Y,da);return Array.from(va).sort()}function A(Y,da,pa){if(pa)if(da?.fields?.length)if(pa.includes("*"))for(const {name:wa}of da.fields)Y.add(wa);else for(const wa of pa)Q(Y,da,wa);else if(pa.includes("*"))Y.clear(),Y.add("*");else for(const wa of pa)null!=wa&&Y.add(wa)}function Q(Y,da,pa){"string"===typeof pa&&(da?(da=da.get(pa))&&Y.add(da.name):Y.add(pa))}function y(Y,da,pa){return g.apply(this,arguments)}function g(){g=O._asyncToGenerator(function*(Y,
da,pa){if(pa){var {arcadeUtils:wa}=yield w.loadArcade();pa=wa.extractFieldNames(pa,da?.fields?.map(Ba=>Ba.name));for(const Ba of pa)Q(Y,da,Ba)}});return g.apply(this,arguments)}function x(Y,da,pa){return e.apply(this,arguments)}function e(){e=O._asyncToGenerator(function*(Y,da,pa){if(pa&&"1\x3d1"!==pa){const wa=(yield new Promise((Ba,La)=>c(["../../core/sql/WhereClause"],Ba,La))).WhereClause.create(pa,da);if(!wa.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",
{where:pa});A(Y,da,wa.fieldNames)}});return e.apply(this,arguments)}function n(Y,da){for(const pa of Y)if(pa&&pa.valueType&&pa.valueType===da)return pa.name;return null}function u(){u=O._asyncToGenerator(function*(Y){if(!Y)return[];const da=new Set;yield M(da,Y);return Array.from(da).sort()});return u.apply(this,arguments)}function M(Y,da){return L.apply(this,arguments)}function L(){L=O._asyncToGenerator(function*(Y,da){if(da){var pa=da.elevationInfo?.featureExpressionInfo;if(pa)return pa.collectRequiredFields(Y,
da.fieldsIndex)}});return L.apply(this,arguments)}function U(){U=O._asyncToGenerator(function*(Y,da,pa){if(da&&pa&&"fields"in pa){var wa=[];wa.push(S(Y,da,pa.popupTemplate));pa.fields&&wa.push(...pa.fields.map(function(){var Ba=O._asyncToGenerator(function*(La){La.onStatisticExpression?y(Y,da.fieldsIndex,La.onStatisticExpression.expression):Y.add(La.onStatisticField)});return function(La){return Ba.apply(this,arguments)}}()));yield Promise.all(wa)}});return U.apply(this,arguments)}function S(Y,da,
pa){return B.apply(this,arguments)}function B(){B=O._asyncToGenerator(function*(Y,da,pa){const wa=[];pa?.expressionInfos&&wa.push(...pa.expressionInfos.map(Ba=>y(Y,da.fieldsIndex,Ba.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ba of pa)"expression"===Ba.type&&Ba.expressionInfo&&wa.push(y(Y,da.fieldsIndex,Ba.expressionInfo.expression));yield Promise.all(wa)});return B.apply(this,arguments)}function z(){z=O._asyncToGenerator(function*(Y,da,pa){da&&(da.timeInfo&&F.isSome(pa)&&pa.timeExtent&&
A(Y,da.fieldsIndex,[da.timeInfo.startField,da.timeInfo.endField]),da.floorInfo&&A(Y,da.fieldsIndex,[da.floorInfo.floorField]),F.isSome(pa)&&F.isSome(pa.where)&&(yield x(Y,da.fieldsIndex,pa.where)))});return z.apply(this,arguments)}function q(){q=O._asyncToGenerator(function*(Y,da,pa){da&&pa&&(yield Promise.all(pa.map(wa=>E(Y,da,wa))))});return q.apply(this,arguments)}function E(Y,da,pa){return d.apply(this,arguments)}function d(){d=O._asyncToGenerator(function*(Y,da,pa){da&&pa&&(pa.valueExpression?
yield y(Y,da.fieldsIndex,pa.valueExpression):pa.field&&Q(Y,da.fieldsIndex,pa.field))});return d.apply(this,arguments)}function p(){p=O._asyncToGenerator(function*(Y){if(!Y)return[];const da="timeInfo"in Y&&Y.timeInfo;return da?h(Y.fieldsIndex,[Y.trackIdField,da.startField,da.endField]):[]});return p.apply(this,arguments)}function D(){D=O._asyncToGenerator(function*(Y){if(!Y)return[];const da=new Set;yield I(da,Y);return Array.from(da).sort()});return D.apply(this,arguments)}function I(Y,da){return K.apply(this,
arguments)}function K(){K=O._asyncToGenerator(function*(Y,da){const {labelingInfo:pa,fieldsIndex:wa}=da;pa&&pa.length&&(yield Promise.all(pa.map(Ba=>P(Y,wa,Ba))))});return K.apply(this,arguments)}function P(Y,da,pa){return v.apply(this,arguments)}function v(){v=O._asyncToGenerator(function*(Y,da,pa){if(pa){var wa=pa.getLabelExpression();pa=pa.where;"arcade"===wa.type?yield y(Y,da,wa.expression):(wa=wa.expression.match(/{[^}]*}/g))&&wa.forEach(Ba=>{Q(Y,da,Ba.slice(1,-1))});yield x(Y,da,pa)}});return v.apply(this,
arguments)}function G(Y){return"number"===typeof Y&&!isNaN(Y)&&isFinite(Y)}function X(Y){return null===Y||G(Y)}function ka(Y){return null===Y||R(Y)}function ta(Y){return null!=Y&&"string"===typeof Y}function za(Y){return null===Y||ta(Y)}function Ea(){return!0}function Ha(Y,da){let pa;switch(Y.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=Y.nullable?ka:R;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=
Y.nullable?X:G;break;case "string":case "esriFieldTypeString":pa=Y.nullable?za:ta;break;default:pa=Ea}return 1===arguments.length?pa:pa(da)}function Fa(Y){return null!=Y&&ea.has(Y.type)}function Ua(Y,da){return null==Y||Y.nullable&&null===da?null:Fa(Y)&&!Oa(Y.type,Number(da))?b.NumericRangeValidationError.OUT_OF_RANGE:Ha(Y,da)?Y.domain?C.validateDomainValue(Y.domain,da):null:b.TypeValidationError.INVALID_TYPE}function Oa(Y,da){Y="string"===typeof Y?Sa(Y):Y;if(!Y)return!1;const pa=Y.min,wa=Y.max;return Y.isInteger?
R(da)&&da>=pa&&da<=wa:da>=pa&&da<=wa}function Sa(Y){switch(Y){case "esriFieldTypeSmallInteger":case "small-integer":return aa;case "esriFieldTypeInteger":case "integer":return ja;case "esriFieldTypeSingle":case "single":return na;case "esriFieldTypeDouble":case "double":return ra}}function $a(Y,da,pa){if(!da||!da.attributes||!Y){if(F.isSome(pa))for(var wa of Y??[])pa.add(wa);return!0}da=da.attributes;wa=!1;for(const Ba of Y)if(!(Ba in da))if(wa=!0,F.isSome(pa))pa.add(Ba);else break;return wa}function Ta(){Ta=
O._asyncToGenerator(function*(Y,da){const pa=new Set;for(const wa of da)yield y(pa,Y.fieldsIndex,wa);return Array.from(pa).sort()});return Ta.apply(this,arguments)}const jb=/^([0-9])/,ib=/[^a-z0-9_\u0080-\uffff]/gi,lb=/_{2,}/g,l=/^_/,H=/_$/,fa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),la=["field","normalizationField"],va=new Set,R=(()=>"isInteger"in Number?
Number.isInteger:Y=>"number"===typeof Y&&isFinite(Y)&&Math.floor(Y)===Y)(),W=["integer","small-integer","single","double"],ea=new Set([...W,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);b.NumericRangeValidationError=void 0;(b.NumericRangeValidationError||(b.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";b.TypeValidationError=void 0;(b.TypeValidationError||(b.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const aa={min:-32768,max:32767,isInteger:!0},ja={min:-2147483648,max:2147483647,isInteger:!0},na={min:-3.4E38,max:1.2E38,isInteger:!1},ra={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};b.collectArcadeFieldNames=y;b.collectElevationFields=M;b.collectFeatureReductionFields=function(Y,da,pa){return U.apply(this,arguments)};b.collectField=Q;b.collectFields=A;b.collectFilterFields=function(Y,da,pa){return z.apply(this,arguments)};b.collectLabelingFields=I;b.collectOrderByInfos=function(Y,da,
pa){return q.apply(this,arguments)};b.collectPopupTemplateFields=S;b.doubleRange=ra;b.featureHasFields=function(Y,da){return!$a(Y,da,null)};b.fixFields=h;b.fixRendererFields=function(Y,da){if(null!=Y&&null!=da)for(const pa of Array.isArray(Y)?Y:[Y])if(k(fa,pa,da),"visualVariables"in pa&&pa.visualVariables)for(const wa of pa.visualVariables)k(la,wa,da)};b.fixTimeInfoFields=function(Y,da){if(null!=Y&&da?.fields?.length)if("startField"in Y){var pa=da.get(Y.startField);da=da.get(Y.endField);Y.startField=
pa?.name??null;Y.endField=da?.name??null}else pa=da.get(Y.startTimeField),da=da.get(Y.endTimeField),Y.startTimeField=pa?.name??null,Y.endTimeField=da?.name??null};b.getDisplayFieldName=function({displayField:Y,fields:da}){if(Y)return Y;if(!da||!da.length)return null;if(!(Y=n(da,"name-or-title")||n(da,"unique-identifier")||n(da,"type-or-category")))a:{for(const pa of da)if(pa&&pa.name&&(da=pa.name.toLowerCase(),da.includes("name")||da.includes("title"))){Y=pa.name;break a}Y=null}return Y};b.getElevationFields=
function(Y){return u.apply(this,arguments)};b.getExpressionFields=function(Y,da){return Ta.apply(this,arguments)};b.getFeatureEditFields=function(Y){if(!Y)return[];const da="editFieldsInfo"in Y&&Y.editFieldsInfo;return da?h(Y.fieldsIndex,[da&&da.creatorField,da&&da.creationDateField,da&&da.editorField,da&&da.editDateField]):[]};b.getFeatureGeometryFields=function(Y){if(!Y)return[];const da=Y.geometryFieldsInfo;return da?h(Y.fieldsIndex,[da.shapeAreaField,da.shapeLengthField]):[]};b.getFieldDefaultValue=
function(Y){const da=Y.defaultValue;if(void 0!==da&&Ha(Y,da))return da;if(Y.nullable)return null};b.getFieldRange=function(Y){const da=C.getDomainRange(Y.domain);if(da)return da;if(Fa(Y))return Sa(Y.type)};b.getLabelingFields=function(Y){return D.apply(this,arguments)};b.getNumericTypeForValue=function(Y){if(!G(Y))return null;if(R(Y)){if(Y>=aa.min&&Y<=aa.max)return"esriFieldTypeSmallInteger";if(Y>=ja.min&&Y<=ja.max)return"esriFieldTypeInteger"}return Y>=na.min&&Y<=na.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};
b.getTimeFields=function(Y){return p.apply(this,arguments)};b.integerRange=ja;b.isDateField=function(Y){return null!=Y&&("date"===Y.type||"esriFieldTypeDate"===Y.type)};b.isNumberInRange=Oa;b.isNumericField=Fa;b.isRasterPixelValueField=function(Y){return Y?["raster.itempixelvalue","raster.servicepixelvalue"].some(da=>Y.toLowerCase().startsWith(da)):!1};b.isStringField=function(Y){return null!=Y&&("string"===Y.type||"esriFieldTypeString"===Y.type)};b.isValidFieldValue=function(Y,da){return null===
Ua(Y,da)};b.isValueMatchingFieldType=Ha;b.normalizeFieldName=function(Y){return null==Y?null:(Y=Y.trim().replace(ib,"_").replace(lb,"_").replace(l,"").replace(H,"").replace(jb,"F$1"))?Y:null};b.numericTypes=W;b.packFields=function(Y,da,pa=1){if(!da||!Y)return[];if(da.includes("*"))return["*"];da=h(Y,da);return da.length/Y.fields.length>=pa?["*"]:da};b.populateMissingFields=$a;b.rendererFields=fa;b.sanitizeNullFieldValue=function(Y){return null==Y||"number"===typeof Y&&isNaN(Y)?null:Y};b.singleRange=
na;b.smallIntegerRange=aa;b.unpackFieldNames=function(Y,da){return F.isNone(da)||F.isNone(Y)?[]:da.includes("*")?(Y.fields??[]).map(pa=>pa.name):da};b.validateFieldValue=Ua;b.validationErrorToString=function(Y,da,pa){switch(Y){case C.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;case C.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;
case b.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${da.name}, type: ${da.type}, nullable: ${da.nullable}`;case b.NumericRangeValidationError.OUT_OF_RANGE:const {min:wa,max:Ba}=Sa(da.type);return`Value ${pa} is out of range for the number type - field: ${da.name}, type: ${da.type}, value range is ${wa} to ${Ba}`}};b.visualVariableFields=la;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(c){c.DomainValidationError=void 0;(function(b){b.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";b.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(c.DomainValidationError||(c.DomainValidationError={}));c.getDomainRange=function(b){if(b&&"range"===b.type)return{min:"range"in b?b.range[0]:b.minValue,max:"range"in b?b.range[1]:b.maxValue}};c.validateDomainValue=function(b,O){switch(b.type){case "range":const N="range"in b?b.range[0]:b.minValue;b="range"in
b?b.range[1]:b.maxValue;if(null!=N&&+O<N||null!=b&&+O>b)return c.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==b.codedValues||b.codedValues.every(F=>null==F||F.code!==O))return c.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==b.codedValues||b.codedValues.every(F=>null==F||F.code!==O))return c.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(c,b,O,N,F,r,C,w){function k(){A||(A=O._asyncToGenerator(function*(){const y=yield new Promise((g,x)=>c(["./arcadeUtils"],g,x));return{arcade:y.arcade,arcadeUtils:y,Dictionary:y.Dictionary,Feature:y.arcadeFeature}})());return A}const h=r.getLogger("esri.support.arcadeOnDemand");let A;N=(y,g,x)=>Q.create(y,g,x,null,["$feature","$view"]);let Q=function(){function y(x,e,n,u,M,L,U){this.script=x;this.evaluate=u;this.fields=Array.isArray(L)?L:L.fields;this._syntaxTree=n;this._arcade=e;this._arcadeFeature=
M;this._spatialReference=U;this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}y.create=function(){var x=O._asyncToGenerator(function*(e,n,u,M,L,U){const {arcade:S,Feature:B,Dictionary:z}=yield k(),q=w.fromJSON(n);let E;try{E=S.parseScript(e,U)}catch(P){return h.error(new F("arcade-bad-expression","Failed to parse arcade script",{script:e,error:P})),null}L=L.reduce((P,v)=>({...P,[v]:null}),{});let d=null;
C.isSome(M)&&(d=new z(M),d.immutable=!0,L.$config=null);U=(M=S.scriptUsesGeometryEngine(E))&&S.enableGeometrySupport();const p=S.scriptUsesFeatureSet(E)&&S.enableFeatureSetSupport(),D=(n=S.scriptIsAsync(E))&&S.enableAsyncSupport();L={vars:L,spatialReference:q,useAsync:!!D};yield Promise.all([U,p,D]);U=new Set;yield S.loadDependentModules(U,E,null,n,M);const I=new z;I.immutable=!1;I.setField("scale",0);const K=S.compileScript(E,L);return new y(e,S,E,P=>{"$view"in P&&P.$view&&(I.setField("scale","object"===
typeof P.$view?P.$view.scale:void 0),P.$view=I);d&&(P.$config=d);return K({vars:P,spatialReference:q})},new B,u,q)});return function(e,n,u,M,L,U){return x.apply(this,arguments)}}();var g=y.prototype;g.repurposeFeature=function(x){x.geometry&&!x.geometry.spatialReference&&(x.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(x.geometry,x.attributes,{fields:this.fields});return this._arcadeFeature};g.referencesGeometry=function(){return this._referencesGeometry};
g.referencesScale=function(){return this._referencesScale};return y}();b.ArcadeExpression=Q;b.createDictionaryExpression=(y,g,x,e)=>Q.create(y,g,x,e,["$feature","$view"]);b.createLabelExpression=(y,g,x)=>Q.create(y,g,x,null,["$feature"]);b.createRendererExpression=N;b.createVVExpression=N;b.loadArcade=k;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y){function g(){return new Promise((u,M)=>c(["../../../geometry/geometryEngineJSON"],u,M))}function x(){x=O._asyncToGenerator(function*(u,M,L){const {spatialRel:U,geometry:S}=u;if(S){if(null==U||!0!==n.spatialRelationship[U])throw new N("feature-store:unsupported-query","Unsupported query spatial relationship",{query:u});if(w.isValid(S.spatialReference)&&w.isValid(L)){if(null==S||!0!==n.queryGeometry[C.getJsonType(S)])throw new N("feature-store:unsupported-query",
"Unsupported query geometry type",{query:u});if(null==M||!0!==n.layerGeometry[M])throw new N("feature-store:unsupported-query","Unsupported layer geometry type",{query:u});if(u.outSR)return Q.checkProjectionSupport(u.geometry&&u.geometry.spatialReference,u.outSR)}}});return x.apply(this,arguments)}const e={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},n={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};b.canQueryWithRBush=function(u){if(C.isExtent(u))return!0;if(C.isPolygon(u)){for(const M of u.rings)if(5!==M.length||M[0][0]!==M[1][0]||M[0][0]!==M[4][0]||M[2][0]!==M[3][0]||M[0][1]!==M[3][1]||M[0][1]!==M[4][1]||M[1][1]!==M[2][1])return!1;return!0}return!1};b.checkSpatialQuerySupport=function(u,M,L){return x.apply(this,
arguments)};b.getSpatialQueryOperator=function(u,M,L,U,S){if(C.isPolygon(M)&&"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===u||"esriSpatialRelContains"===u)){const B=h.convertFromPolygon(new A,M,!1,!1);return Promise.resolve(z=>k.polygonContainsPoint(B,!1,!1,z))}if(C.isPolygon(M)&&"esriGeometryMultipoint"===L){const B=h.convertFromPolygon(new A,M,!1,!1);if("esriSpatialRelContains"===u)return Promise.resolve(z=>k.polygonContainsMultipoint(B,!1,!1,z,U,S))}if(C.isExtent(M)&&"esriGeometryPoint"===
L&&("esriSpatialRelIntersects"===u||"esriSpatialRelContains"===u))return Promise.resolve(B=>F.extentContainsPoint(M,y.getGeometry(L,U,S,B)));if(C.isExtent(M)&&"esriGeometryMultipoint"===L&&"esriSpatialRelContains"===u)return Promise.resolve(B=>F.extentContainsMultipoint(M,y.getGeometry(L,U,S,B)));if(C.isExtent(M)&&"esriSpatialRelIntersects"===u){const B=r.getExtentIntersector(L);return Promise.resolve(z=>B(M,y.getGeometry(L,U,S,z)))}return g().then(B=>{const z=B[e[u]].bind(null,M.spatialReference,
M);return q=>z(y.getGeometry(L,U,S,q))})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,b){c.extentIntersectsExtent=b.extentIntersectsExtent;c.extentIntersectsMultipoint=b.extentIntersectsMultipoint;c.extentIntersectsPoint=b.extentIntersectsPoint;c.extentIntersectsPolygon=b.extentIntersectsPolygon;c.extentIntersectsPolyline=b.extentIntersectsPolyline;c.extentIntersectsRings=b.extentIntersectsRings;
c.getFeatureExtentIntersector=b.getFeatureExtentIntersector;c.isSelfIntersecting=b.isSelfIntersecting;c.segmentIntersects=b.segmentIntersects;c.getExtentIntersector=function(O){return"mesh"===O?b.extentIntersectsExtent:b.getFeatureExtentIntersector(O)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function b(O,N,F,r,C){if(!O)return!1;N=N?F?4:3:F?3:2;const {coords:w,lengths:k}=O;F=!1;O=0;for(const A of k){var h=
O;for(let Q=O,y=O+A*N;Q<y;Q+=N){h=Q+N;h===y&&(h=O);const g=w[Q],x=w[Q+1],e=w[h];h=w[h+1];(x<C&&h>=C||h<C&&x>=C)&&g+(C-x)/(h-x)*(e-g)<r&&(F=!F)}O+=A*N}return F}c.polygonContainsCoords=b;c.polygonContainsMultipoint=function(O,N,F,r,C,w){C=C?w?4:3:w?3:2;const {coords:k,lengths:h}=r;if(!h)return!1;for(let A=0,Q=0;A<h.length;A++,Q+=C)if(!b(O,N,F,k[Q],k[Q+1]))return!1;return!0};c.polygonContainsPoint=function(O,N,F,r){return b(O,N,F,r.coords[0],r.coords[1])};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/timeSupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(c,b){function O(){O=b._asyncToGenerator(function*(C,w){if(!C)return null;const k=w.featureAdapter,{startTimeField:h,endTimeField:A}=C;let Q=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(h&&A)yield w.forEach(g=>{const x=k.getAttribute(g,h);g=k.getAttribute(g,A);null==x||isNaN(x)||(Q=Math.min(Q,x));null==g||isNaN(g)||(y=Math.max(y,g))});else{const g=h||A;yield w.forEach(x=>
{x=k.getAttribute(x,g);null==x||isNaN(x)||(Q=Math.min(Q,x),y=Math.max(y,x))})}return{start:Q,end:y}});return O.apply(this,arguments)}function N(C,w,k,h,A){if(null!=h&&null!=A)return Q=>{const y=C.getAttribute(Q,w);Q=C.getAttribute(Q,k);return(null==y||y<=A)&&(null==Q||Q>=h)};if(null!=h)return Q=>{Q=C.getAttribute(Q,k);return null==Q||Q>=h};if(null!=A)return Q=>{Q=C.getAttribute(Q,w);return null==Q||Q<=A}}function F(C,w,k,h){if(null!=k&&null!=h&&k===h)return A=>C.getAttribute(A,w)===k;if(null!=k&&
null!=h)return A=>{A=C.getAttribute(A,w);return A>=k&&A<=h};if(null!=k)return A=>C.getAttribute(A,w)>=k;if(null!=h)return A=>C.getAttribute(A,w)<=h}function r(){return()=>!1}c.getTimeExtent=function(C,w){return O.apply(this,arguments)};c.getTimeOperator=function(C,w,k){if(!w||!C)return null;const {startTimeField:h,endTimeField:A}=C;if(!h&&!A)return null;const {start:Q,end:y}=w;return null===Q&&null===y?null:void 0===Q&&void 0===y?r():h&&A?N(k,h,A,Q,y):F(k,h||A,Q,y)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(c,b){function O(F){return"oid"===F.type||"esriFieldTypeOID"===F.type}function N(F){return"global-id"===F.type||"esriFieldTypeGlobalID"===F.type}return function(){function F(C=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=
null;if(C){this.fields=C;var w=[];for(const k of C){C=k?.name;const h=b.normalizeFieldName(k?.name)?.toLowerCase()??"";if(C&&h){const A=C.trim().toLowerCase();this._fieldsMap.set(C,k);this._fieldsMap.set(A,k);this._normalizedFieldsMap.set(h,k);w.push(A);"date"===k.type||"esriFieldTypeDate"===k.type?(this.dateFields.push(k),this._dateFieldsSet.add(k)):b.isNumericField(k)&&(this._numericFieldsSet.add(k),this.numericFields.push(k));O(k)||N(k)||(k.editable=null==k.editable?!0:!!k.editable,k.nullable=
null==k.nullable?!0:!!k.nullable)}}w.sort();this.uid=w.join(",")}}var r=F.prototype;r.destroy=function(){this._fieldsMap.clear()};r.has=function(C){return null!=this.get(C)};r.get=function(C){if(C){var w=this._fieldsMap.get(C);if(w)return w;(w=this._fieldsMap.get(C.trim().toLowerCase())??this._normalizedFieldsMap.get(b.normalizeFieldName(C)?.toLowerCase()??""))&&this._fieldsMap.set(C,w);return w}};r.isDateField=function(C){return this._dateFieldsSet.has(this.get(C))};r.isNumericField=function(C){return this._numericFieldsSet.has(this.get(C))};
r.normalizeFieldName=function(C){if(C=this.get(C))return C.name??void 0};c._createClass(F,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const C of this.fields)O(C)||N(C)||C.nullable||void 0!==b.getFieldDefaultValue(C)||this._requiredFields.push(C)}return this._requiredFields}}]);return F}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x){function e(E){return n.has(E)?n.get(E):"number"===typeof E?E:1}c.Task=void 0;(function(E){E[E.YIELD=1]="YIELD"})(c.Task||(c.Task={}));c.TaskPriority=void 0;(function(E){E.RESOURCE_CONTROLLER_IMMEDIATE="immediate";E.RESOURCE_CONTROLLER="schedule";E.SLIDE="slide";E.STREAM_DATA_LOADER="stream loader";E.ELEVATION_QUERY="elevation query";E.TERRAIN_SURFACE="terrain";E.SURFACE_GEOMETRY_UPDATES="surface geometry updates";E.LOD_RENDERER="LoD renderer";E.GRAPHICS_CORE=
"Graphics3D";E.I3S_CONTROLLER="I3S";E.POINT_CLOUD_LAYER="point cloud";E.FEATURE_TILE_FETCHER="feature fetcher";E.OVERLAY="overlay";E.STAGE="stage";E.GRAPHICS_DECONFLICTOR="graphics deconflictor";E.FILTER_VISIBILITY="Graphics3D filter visibility";E.SCALE_VISIBILITY="Graphics3D scale visibility";E.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";E.POINT_OF_INTEREST_FREQUENT="POI frequent";E.POINT_OF_INTEREST_INFREQUENT="POI infrequent";E.LABELER="labeler";E.FEATURE_QUERY_ENGINE="feature query";E.FEATURE_TILE_TREE=
"feature tile tree";E.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";E.ELEVATION_ALIGNMENT="elevation alignment";E.TEXT_TEXTURE_ATLAS="text texture atlas";E.TEXTURE_UNLOAD="texture unload";E.LINE_OF_SIGHT_TOOL="line of sight tool";E.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";E.ELEVATION_PROFILE="elevation profile";E.SNAPPING="snapping";E.SHADOW_ACCUMULATOR="shadow accumulator";E.CLOUDS_GENERATOR="clouds generator";E[E.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority=
{}));const n=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,
4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.TEXT_TEXTURE_ATLAS,
12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),u=A.Milliseconds(6.5),M=A.Milliseconds(1),L=A.Milliseconds(30),U=A.Milliseconds(1E3/30),S=A.Milliseconds(100);var B;(function(E){let d=function(){function I(){this._updating=new Q.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=
new Map;this._budget=new D;this._state=x.RenderState.INTERACTING;this._tasks=new w;this._runQueue=new w;this._load=0;this._idleStateCallbacks=new w;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=h.watch(()=>g.SCHEDULER_LOG_SLOW_TASKS,v=>this._debug=v,h.initial);for(const v of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[v],new C(c.TaskPriority[v]));const P=this;this._test={FRAME_SAFETY_BUDGET:u,INTERACTING_BUDGET:U,IDLE_BUDGET:S,get availableBudget(){return P._budget.budget},
usedBudget:0,getBudget:()=>P._budget,setBudget:v=>P._budget=v,updateTask:v=>this._updateTask(v),getState:v=>this._getState(v),getRuntime:v=>this._getRuntime(v),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var K=I.prototype;K._updatingChanged=function(){this._updating.set(this._tasks.some(P=>P.needsUpdate))};K.destroy=function(){this._tasks.toArray().forEach(P=>P.remove());this._tasks.clear();r.removeMaybe(this._debugHandle);this._microTaskQueued=
!1;this._updatingChanged()};K.taskRunningChanged=function(P){this._updatingChanged();P&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))};K.registerTask=function(P,v){const G=e(P);v=new p(this,P,v,G);this._tasks.push(v);this._updatingChanged();this.performanceInfo.tasks.has(P)||this.performanceInfo.tasks.set(P,new C(P));return v};K.registerIdleStateCallbacks=
function(P,v){const G={idleBegin:P,idleEnd:v};this._idleStateCallbacks.push(G);this.state===x.RenderState.IDLE&&this._idleUpdatesStartFired&&G.idleBegin();const X=this;return{remove:()=>this._removeIdleStateCallbacks(G),set idleBegin(ka){X._idleUpdatesStartFired&&(G.idleEnd(),X._state===x.RenderState.IDLE&&ka());G.idleBegin=ka},set idleEnd(ka){G.idleEnd=ka}}};K.updateBudget=function(P){this._test.usedBudget=0;++this._frameNumber;let v=u,G=P.frameDuration,X=M;switch(this.state){case x.RenderState.IDLE:v=
A.Milliseconds(0);G=A.Milliseconds(Math.max(S,P.frameDuration));X=L;break;case x.RenderState.INTERACTING:G=A.Milliseconds(Math.max(U,P.frameDuration))}G=A.Milliseconds(G-P.elapsedFrameTime-v);if(this.state!==x.RenderState.IDLE&&G<M&&!this._forceTask)return this._forceTask=!0,!1;G=A.Milliseconds(Math.max(G,X));this._budget.reset(G,this.state);this._updateLoad();return this._schedule()};K.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case x.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(P=>P.idleBegin()));this._runIdle();break;case x.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};K.stopFrame=function(){this._budget.reset(A.Milliseconds(0),this._state);this._budget.madeProgress()};K._removeIdleStateCallbacks=function(P){this._idleUpdatesStartFired&&P.idleEnd();this._idleStateCallbacks.removeUnordered(P)};K.removeTask=function(P){this._tasks.removeUnordered(P);
this._runQueue.removeUnordered(P);this._updatingChanged()};K._updateTask=function(P){this._tasks.forAll(v=>{v.name===P&&v.setPriority(P)})};K._getState=function(P){if(this._runQueue.some(G=>G.name===P))return c.TaskState.SCHEDULED;let v=c.TaskState.IDLE;this._tasks.forAll(G=>{G.name===P&&G.needsUpdate&&(1>=G.schedulePriority?v=c.TaskState.READY:v!==c.TaskState.READY&&(v=c.TaskState.WAITING))});return v};K._getRuntime=function(P){let v=0;this._tasks.forAll(G=>{G.name===P&&(v+=G.runtime)});return v};
K._resetRuntimes=function(){this._tasks.forAll(P=>P.runtime=0)};K._getRunning=function(){const P=new Map;this._tasks.forAll(G=>{G.needsUpdate&&P.set(G.name,(P.get(G.name)||0)+1)});if(0===P.size)return null;let v="";P.forEach((G,X)=>{v=1<G?v+` ${G}x ${X}`:v+` ${X}`});return v};K._runIdle=function(){this._run()};K._runInteracting=function(){this._run()};K._runAnimating=function(){this._run()};K._updateLoad=function(){const P=this._tasks.reduce((v,G)=>G.needsUpdate?++v:v,0);this._load=.9*this._load+
P*(1-.9)};K._schedule=function(){this._runQueue.filterInPlace(P=>{if(P.needsUpdate)return!0;P.schedulePriority=P.basePriority;return!1});for(this._tasks.forAll(P=>{0===P.basePriority&&P.needsUpdate&&!this._runQueue.includes(P)&&P.blockFrame!==this._frameNumber&&this._runQueue.unshift(P)});0===this._runQueue.length;){let P=!1;this._tasks.forAll(v=>{if(v.needsUpdate&&0!==v.schedulePriority&&0!==v.basePriority&&v.blockFrame!==this._frameNumber)switch(P=!0,v.schedulePriority){case 1:v.schedulePriority=
0;this._runQueue.push(v);break;default:--v.schedulePriority}});if(!P)return this._updatingChanged(),!1}this._updatingChanged();return!0};K._run=function(){const P=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var v=this._budget.now();const G=this._runQueue.pop();this._budget.resetProgress();try{G.task.runTask(this._budget)===c.Task.YIELD&&(G.blockFrame=this._frameNumber)}catch(X){F.getLogger("esri.views.support.Scheduler").error(`Exception in task "${G.name}"`,X)}!this._budget.hasProgressed&&
G.blockFrame!==this._frameNumber&&G.needsUpdate&&(G.blockFrame=this._frameNumber);G.schedulePriority=G.basePriority;v=this._budget.now()-v;G.runtime+=v;this._frameTaskTimes.set(G.priority,this._frameTaskTimes.get(G.priority)+v);this._debug&&v>2*this._budget.budget&&console.log("Task",G.name,"used",v,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-P);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
P)};K._startFrameTaskTimes=function(){for(const P of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[P],0)};K._recordFrameTaskTimes=function(P){this._frameTaskTimes.forEach((v,G)=>this.performanceInfo.tasks.get(G).record(v));this.performanceInfo.total.record(P)};b._createClass(I,[{key:"updating",get:function(){return this._updating.get()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(P){this._state!==P&&(this._state=
P,this.state!==x.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(v=>v.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return I}();E.Scheduler=d;let p=function(){function I(P,v,G,X){this._scheduler=P;this.name=v;this._basePriority=X;this.runtime=this.blockFrame=0;this._queue=new y.PromiseQueue;this._handles=new O;this.schedulePriority=this._basePriority;this._task=new Q.ObservableValue(r.isSome(G)?G:this._queue);this._handles.add(h.when(()=>
this.task.running,ka=>P.taskRunningChanged(ka)))}var K=I.prototype;K.remove=function(){this.processQueue(z);this._scheduler.removeTask(this);this.schedule=q.schedule;this.reschedule=q.reschedule;this._handles.destroy()};K.setPriority=function(P){this.name=P;P=e(P);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=P;this._basePriority=P};K.schedule=function(P,v,G){return this._queue.push(P,v,G)};K.reschedule=function(P,v,G){return this._queue.unshift(P,v,G)};K.processQueue=
function(P){this._queue.runTask(P)};b._createClass(I,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(P){this.setPriority(P)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return I}(),D=function(){function I(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=
0;this._state=x.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}var K=I.prototype;K.run=function(P){if(this.done)return!1;!0===P()&&this.madeProgress();return!0};K.madeProgress=function(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled};K.reset=function(P,v){this._begin=this.now();this._budget=P;this._state=v;this.resetProgress()};K.now=function(){return performance.now()};K.resetProgress=function(){this._done=this._progressed=!1};b._createClass(I,
[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(P){this._enabled=P}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._progressed}}]);return I}();E.Budget=D})(B||(B={}));c.TaskState=void 0;
(function(E){E.SCHEDULED="s";E.READY="r";E.WAITING="w";E.IDLE="i"})(c.TaskState||(c.TaskState={}));const z=(()=>{const E=new B.Budget;E.enabled=!1;return E})(),q=new (function(){function E(){}var d=E.prototype;d.remove=function(){};d.processQueue=function(){};d.schedule=function(p,D,I){try{if(k.isAborted(D)){const K=k.createAbortError();return I?Promise.resolve(I(K)):Promise.reject(K)}return k.when(p(z))}catch(K){return Promise.reject(K)}};d.reschedule=function(p,D,I){return this.schedule(p,D,I)};
return E}());c.ImmediateTask=q;c.getTaskPriority=e;c.newScheduler=function(){return new B.Scheduler};c.noBudget=z;c.taskPriorities=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],function(c,b,O){let N=function(){function F(C){this._observable=new O.SimpleObservable;this._value=C}var r=F.prototype;r.get=function(){b.trackAccess(this._observable);return this._value};
r.set=function(C){C!==this._value&&(this._value=C,this._observable.notify())};return F}();c.ObservableValue=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(c,b,O,N){let F=function(){function C(){this._tasks=[];this._running=new N.ObservableValue(!1)}var w=C.prototype;w.destroy=function(){this.cancelAll()};
w.runTask=function(k){for(;!k.done&&this._process(k);)k.madeProgress()};w.push=function(k,h,A){this._running.set(!0);return new Promise((Q,y)=>this._tasks.push(new r(Q,y,k,h,A)))};w.unshift=function(k,h,A){this._running.set(!0);return new Promise((Q,y)=>this._tasks.unshift(new r(Q,y,k,h,A)))};w._process=function(k){if(0===this._tasks.length)return!1;const h=this._tasks.shift();try{const A=O.isAborted(h.signal);if(A&&!h.abortCallback)h.reject(O.createAbortError());else{const Q=A?h.abortCallback?.(O.createAbortError()):
h.callback(k);O.isPromiseLike(Q)?Q.then(h.resolve,h.reject):h.resolve(Q)}}catch(A){h.reject(A)}this._running.set(0<this._tasks.length);return!0};w.cancelAll=function(){const k=O.createAbortError();for(const h of this._tasks)if(h.abortCallback){const A=h.abortCallback(k);h.resolve(A)}else h.reject(k);this._tasks.length=0;this._running.set(!1)};b._createClass(C,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return C}(),r=function(C,
w,k,h,A){this.resolve=C;this.reject=w;this.callback=k;this.signal=h;this.abortCallback=A};c.PromiseQueue=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,O,N,F,r,C){O=function(w){function k(){var h=
w.apply(this,arguments)||this;h.SCHEDULER_LOG_SLOW_TASKS=!1;h.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return h}c._inheritsLoose(k,w);return k}(O);b.__decorate([N.property()],O.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([N.property()],O.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);O=b.__decorate([C.subclass("esri.views.support.DebugFlags")],O);return new O})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=
void 0;var b=c.RenderState||(c.RenderState={});b[b.ANIMATING=0]="ANIMATING";b[b.INTERACTING=1]="INTERACTING";b[b.IDLE=2]="IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M){var L;O=new O.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});N=L=function(U){function S(z){z=U.call(this,z)||this;z.dpi=96;z.format=null;z.origin=null;z.minScale=0;z.maxScale=0;z.size=null;z.spatialReference=null;return z}c._inheritsLoose(S,U);S.create=function(z=
{}){const {resolutionFactor:q=1,scales:E,size:d=256,spatialReference:p=g.WebMercator,numLODs:D=24}=z;if(!e.isValid(p)){z=[];if(E)for(var I=0;I<E.length;I++){var K=E[I];z.push(new u({level:I,scale:K,resolution:K}))}else for(I=5E-4,K=D-1;0<=K;K--)z.unshift(new u({level:K,scale:I,resolution:I})),I*=2;return new L({dpi:96,lods:z,origin:new y(0,0,p),size:[d,d],spatialReference:p})}I=e.getInfo(p);z=z.origin?new y({x:z.origin.x,y:z.origin.y,spatialReference:p}):I?new y({x:I.origin[0],y:I.origin[1],spatialReference:p}):
new y({x:0,y:0,spatialReference:p});I=1/(39.37*r.getMetersPerUnitForSR(p)*96);K=[];if(E)for(var P=0;P<E.length;P++){var v=E[P];K.push(new u({level:P,scale:v,resolution:v*I}))}else{var G=e.isGeographic(p)?512/d*5.916575275917094E8:256/d*5.91657527591555E8;P=Math.ceil(D/q);K.push(new u({level:0,scale:G,resolution:G*I}));for(v=1;v<P;v++)G/=2**q,K.push(new u({level:v,scale:G,resolution:G*I}))}return new L({dpi:96,lods:K,origin:z,size:[d,d],spatialReference:p})};var B=S.prototype;B.readOrigin=function(z,
q){return y.fromJSON({spatialReference:q.spatialReference,...z})};B.readSize=function(z,q){return[q.cols,q.rows]};B.writeSize=function(z,q){q.cols=z[0];q.rows=z[1]};B.zoomToScale=function(z){const q=this.scales;if(0>=z)return q[0];if(z>=q.length-1)return q[q.length-1];const E=Math.floor(z);return q[E]/(q[E]/q[E+1])**(z-E)};B.scaleToZoom=function(z){const q=this.scales,E=q.length-1;let d=0;for(;d<E;d++){const p=q[d],D=q[d+1];if(p<=z)break;if(D===z)return d+1;if(p>z&&D<z)return d+Math.log(p/z)/Math.log(p/
D)}return d};B.snapScale=function(z,q=.95){z=this.scaleToZoom(z);return z%Math.floor(z)>=q?this.zoomToScale(Math.ceil(z)):this.zoomToScale(Math.floor(z))};B.tileAt=function(z,q,E,d){var p=this.lodAt(z);if(!p)return null;let D;if("number"===typeof q)D=q,q=E;else{if(e.equals(q.spatialReference,this.spatialReference))D=q.x,q=q.y;else{d=n.project(q,this.spatialReference);if(F.isNone(d))return null;D=d.x;q=d.y}d=E}E=p.resolution*this.size[0];p=p.resolution*this.size[1];d||(d=new M.TileKey(null,0,0,0,x.create()));
d.level=z;d.row=Math.floor((this.origin.y-q)/p+.001);d.col=Math.floor((D-this.origin.x)/E+.001);this.updateTileInfo(d);return d};B.updateTileInfo=function(z,q=L.ExtrapolateOptions.NONE){var E=this.lodAt(z.level);E||q!==L.ExtrapolateOptions.POWER_OF_TWO||(q=this.lods[this.lods.length-1],q.level<z.level&&(E=q));if(E){var d=z.level-E.level;q=E.resolution*this.size[0]/2**d;E=E.resolution*this.size[1]/2**d;z.id=`${z.level}/${z.row}/${z.col}`;z.extent||(z.extent=x.create());z.extent[0]=this.origin.x+z.col*
q;z.extent[1]=this.origin.y-(z.row+1)*E;z.extent[2]=z.extent[0]+q;z.extent[3]=z.extent[1]+E}};B.upsampleTile=function(z){const q=this._upsampleLevels[z.level];if(!q||-1===q.parentLevel)return!1;z.level=q.parentLevel;z.row=Math.floor(z.row/q.factor+.001);z.col=Math.floor(z.col/q.factor+.001);this.updateTileInfo(z);return!0};B.getTileBounds=function(z,q){var E=this.lodAt(q.level);if(null==E)return null;var {resolution:d}=E;E=d*this.size[0];d*=this.size[1];z[0]=this.origin.x+q.col*E;z[1]=this.origin.y-
(q.row+1)*d;z[2]=z[0]+E;z[3]=z[1]+d;return z};B.lodAt=function(z){return this._levelToLOD?.[z]??null};B.clone=function(){return L.fromJSON(this.write({}))};B.getOrCreateCompatible=function(z,q){if(256===this.size[0]&&256===this.size[1])return 256===z?this:null;const E=[],d=this.lods.length;for(let p=0;p<d;p++){const D=this.lods[p];E.push(new u({level:D.level,scale:D.scale,resolution:D.resolution*q}))}return new L({size:[z,z],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:E})};B._initializeUpsampleLevels=function(){const z=this.lods;this._upsampleLevels=[];let q=null;for(let E=0;E<z.length;E++){const d=z[E];this._upsampleLevels[d.level]={parentLevel:q?q.level:-1,factor:q?q.resolution/d.resolution:0};q=d}};c._createClass(S,[{key:"isWrappable",get:function(){const {spatialReference:z,origin:q}=this;if(z&&q){const E=e.getInfo(z);return z.isWrappable&&!!E&&Math.abs(E.origin[0]-q.x)<=E.dx}return!1}},{key:"lods",
set:function(z){let q=0,E=0;const d=[],p=this._levelToLOD={};z&&(q=-Infinity,E=Infinity,z.forEach(D=>{d.push(D.scale);q=D.scale>q?D.scale:q;E=D.scale<E?D.scale:E;p[D.level]=D}));this._set("scales",d);this._set("minScale",q);this._set("maxScale",E);this._set("lods",z);this._initializeUpsampleLevels()}}]);return S}(N.JSONSupport);b.__decorate([C.property({type:Number,json:{write:!0}})],N.prototype,"compressionQuality",void 0);b.__decorate([C.property({type:Number,json:{write:!0}})],N.prototype,"dpi",
void 0);b.__decorate([C.property({type:String,json:{read:O.read,write:O.write,origins:{"web-scene":{read:!1,write:!1}}}})],N.prototype,"format",void 0);b.__decorate([C.property({readOnly:!0})],N.prototype,"isWrappable",null);b.__decorate([C.property({type:y,json:{write:!0}})],N.prototype,"origin",void 0);b.__decorate([h.reader("origin")],N.prototype,"readOrigin",null);b.__decorate([C.property({type:[u],value:null,json:{write:!0}})],N.prototype,"lods",null);b.__decorate([C.property({readOnly:!0})],
N.prototype,"minScale",void 0);b.__decorate([C.property({readOnly:!0})],N.prototype,"maxScale",void 0);b.__decorate([C.property({readOnly:!0})],N.prototype,"scales",void 0);b.__decorate([C.property({cast:U=>Array.isArray(U)?U:"number"===typeof U?[U,U]:[256,256]})],N.prototype,"size",void 0);b.__decorate([h.reader("size",["rows","cols"])],N.prototype,"readSize",null);b.__decorate([Q.writer("size",{cols:{type:w.Integer},rows:{type:w.Integer}})],N.prototype,"writeSize",null);b.__decorate([C.property({type:g,
json:{write:!0}})],N.prototype,"spatialReference",void 0);N=L=b.__decorate([A.subclass("esri.layers.support.TileInfo")],N);(function(U){U=U.ExtrapolateOptions||(U.ExtrapolateOptions={});U[U.NONE=0]="NONE";U[U.POWER_OF_TWO=1]="POWER_OF_TWO"})(N||(N={}));return N})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C){var w;O=w=function(k){function h(A){A=k.call(this,A)||this;A.cols=null;A.level=0;A.levelValue=null;A.origin=null;A.resolution=0;A.rows=null;A.scale=0;return A}c._inheritsLoose(h,k);h.prototype.clone=function(){return new w({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return h}(O.JSONSupport);b.__decorate([N.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],O.prototype,"cols",void 0);b.__decorate([N.property({type:F.Integer,json:{write:!0}})],O.prototype,"level",void 0);b.__decorate([N.property({type:String,json:{write:!0}})],O.prototype,"levelValue",void 0);b.__decorate([N.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],O.prototype,"origin",void 0);b.__decorate([N.property({type:Number,json:{write:!0}})],O.prototype,"resolution",void 0);b.__decorate([N.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],O.prototype,"rows",void 0);b.__decorate([N.property({type:Number,json:{write:!0}})],O.prototype,"scale",void 0);return O=w=b.__decorate([C.subclass("esri.layers.support.LOD")],O)})},"esri/layers/support/TileKey":function(){define(["exports"],function(c){c.TileKey=function(b,O,N,F,r){this.id=b;this.level=O;this.row=N;this.col=F;this.extent=r};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M,L,U){var S;const B=new F.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});F=new F.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});r=S=function(z){function q(d){d=z.call(this,d)||this;d.aggregateIds=null;d.cacheHint=void 0;d.compactGeometryEnabled=!1;d.datumTransformation=null;d.defaultSpatialReferenceEnabled=!1;d.distance=void 0;d.dynamicDataSource=void 0;d.formatOf3DObjects=null;d.fullText=null;d.gdbVersion=null;d.geometry=null;d.geometryPrecision=void 0;d.groupByFieldsForStatistics=
null;d.having=null;d.historicMoment=null;d.maxAllowableOffset=void 0;d.maxRecordCountFactor=1;d.multipatchOption=null;d.num=void 0;d.objectIds=null;d.orderByFields=null;d.outFields=null;d.outSpatialReference=null;d.outStatistics=null;d.parameterValues=null;d.pixelSize=null;d.quantizationParameters=null;d.rangeValues=null;d.relationParameter=null;d.resultType=null;d.returnCentroid=!1;d.returnDistinctValues=!1;d.returnExceededLimitFeatures=!0;d.returnGeometry=!1;d.returnQueryGeometry=!1;d.returnM=void 0;
d.returnZ=void 0;d.sourceSpatialReference=null;d.spatialRelationship="intersects";d.start=void 0;d.sqlFormat=null;d.text=null;d.timeExtent=null;d.timeReferenceUnknownClient=!1;d.units=null;d.where=null;return d}c._inheritsLoose(q,z);q.from=function(d){return g.ensureClass(S,d)};var E=q.prototype;E.castDatumTransformation=function(d){return"number"===typeof d||"object"===typeof d?d:null};E.writeHistoricMoment=function(d,p){p.historicMoment=d&&d.getTime()};E.writeParameterValues=function(d,p){if(d){const D=
{};for(const I in d){const K=d[I];Array.isArray(K)?D[I]=K.map(P=>P instanceof Date?P.getTime():P):D[I]=K instanceof Date?K.getTime():K}p.parameterValues=D}};E.writeStart=function(d,p){p.resultOffset=this.start;p.resultRecordCount=this.num||10;p.where="1\x3d1"};E.writeWhere=function(d,p){p.where=d||"1\x3d1"};E.clone=function(){return new S(C.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:w.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return q}(r.JSONSupport);r.MAX_MAX_RECORD_COUNT_FACTOR=
5;b.__decorate([k.property({json:{write:!0}})],r.prototype,"aggregateIds",void 0);b.__decorate([k.property({type:Boolean,json:{write:!0}})],r.prototype,"cacheHint",void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"compactGeometryEnabled",void 0);b.__decorate([k.property({json:{write:!0}})],r.prototype,"datumTransformation",void 0);b.__decorate([h.cast("datumTransformation")],r.prototype,"castDatumTransformation",null);b.__decorate([k.property({type:Boolean,
json:{default:!1,write:!0}})],r.prototype,"defaultSpatialReferenceEnabled",void 0);b.__decorate([k.property({type:Number,json:{write:{overridePolicy(z){return{enabled:0<z}}}}})],r.prototype,"distance",void 0);b.__decorate([k.property({type:e.DataLayerSource,json:{write:!0}})],r.prototype,"dynamicDataSource",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],r.prototype,"formatOf3DObjects",void 0);b.__decorate([k.property({type:[n],json:{write:{enabled:!0,overridePolicy(){return{enabled:w.isSome(this.fullText)&&
0<this.fullText.length}}}}})],r.prototype,"fullText",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],r.prototype,"gdbVersion",void 0);b.__decorate([k.property({types:O.geometryTypes,json:{read:x.fromJSON,write:!0}})],r.prototype,"geometry",void 0);b.__decorate([k.property({type:Number,json:{write:!0}})],r.prototype,"geometryPrecision",void 0);b.__decorate([k.property({type:[String],json:{write:!0}})],r.prototype,"groupByFieldsForStatistics",void 0);b.__decorate([k.property({type:String,
json:{write:!0}})],r.prototype,"having",void 0);b.__decorate([k.property({type:Date})],r.prototype,"historicMoment",void 0);b.__decorate([y.writer("historicMoment")],r.prototype,"writeHistoricMoment",null);b.__decorate([k.property({type:Number,json:{write:!0}})],r.prototype,"maxAllowableOffset",void 0);b.__decorate([k.property({type:Number,cast(z){return 1>z?1:z>S.MAX_MAX_RECORD_COUNT_FACTOR?S.MAX_MAX_RECORD_COUNT_FACTOR:z},json:{write:{overridePolicy(z){return{enabled:1<z}}}}})],r.prototype,"maxRecordCountFactor",
void 0);b.__decorate([k.property({type:["xyFootprint"],json:{write:!0}})],r.prototype,"multipatchOption",void 0);b.__decorate([k.property({type:Number,json:{read:{source:"resultRecordCount"}}})],r.prototype,"num",void 0);b.__decorate([k.property({json:{write:!0}})],r.prototype,"objectIds",void 0);b.__decorate([k.property({type:[String],json:{write:!0}})],r.prototype,"orderByFields",void 0);b.__decorate([k.property({type:[String],json:{write:!0}})],r.prototype,"outFields",void 0);b.__decorate([k.property({type:L,
json:{name:"outSR",write:!0}})],r.prototype,"outSpatialReference",void 0);b.__decorate([k.property({type:[M],json:{write:{enabled:!0,overridePolicy(){return{enabled:w.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],r.prototype,"outStatistics",void 0);b.__decorate([k.property({json:{write:!0}})],r.prototype,"parameterValues",void 0);b.__decorate([y.writer("parameterValues")],r.prototype,"writeParameterValues",null);b.__decorate([k.property({type:U,json:{write:!0}})],r.prototype,"pixelSize",
void 0);b.__decorate([k.property({type:u,json:{write:!0}})],r.prototype,"quantizationParameters",void 0);b.__decorate([k.property({type:[Object],json:{write:!0}})],r.prototype,"rangeValues",void 0);b.__decorate([k.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],r.prototype,"relationParameter",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],r.prototype,"resultType",
void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnCentroid",void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnDistinctValues",void 0);b.__decorate([k.property({type:Boolean,json:{default:!0,write:!0}})],r.prototype,"returnExceededLimitFeatures",void 0);b.__decorate([k.property({type:Boolean,json:{write:!0}})],r.prototype,"returnGeometry",void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],
r.prototype,"returnQueryGeometry",void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"returnM",void 0);b.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(z){return{enabled:z}}}}})],r.prototype,"returnZ",void 0);b.__decorate([k.property({type:L,json:{write:!0}})],r.prototype,"sourceSpatialReference",void 0);b.__decorate([A.enumeration(B,{ignoreUnknown:!1,name:"spatialRel"})],r.prototype,"spatialRelationship",void 0);b.__decorate([k.property({type:Number,
json:{read:{source:"resultOffset"}}})],r.prototype,"start",void 0);b.__decorate([y.writer("start"),y.writer("num")],r.prototype,"writeStart",null);b.__decorate([k.property({type:String,json:{write:!0}})],r.prototype,"sqlFormat",void 0);b.__decorate([k.property({type:String,json:{write:!0}})],r.prototype,"text",void 0);b.__decorate([k.property({type:N,json:{write:!0}})],r.prototype,"timeExtent",void 0);b.__decorate([k.property({type:Boolean,json:{default:!1,write:!0}})],r.prototype,"timeReferenceUnknownClient",
void 0);b.__decorate([A.enumeration(F,{ignoreUnknown:!1}),k.property({json:{write:{overridePolicy(z){return{enabled:!!z&&null!=this.distance&&0<this.distance}}}}})],r.prototype,"units",void 0);b.__decorate([k.property({type:String,json:{write:{overridePolicy(z){return{enabled:null!=z||null!=this.start&&0<this.start}}}}})],r.prototype,"where",void 0);b.__decorate([y.writer("where")],r.prototype,"writeWhere",null);return r=S=b.__decorate([Q.subclass("esri.rest.support.Query")],r)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/arrayUtils ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A){var Q;O=Q=function(x){function e(u){u=x.call(this,u)||this;u.end=null;u.start=null;return u}c._inheritsLoose(e,x);var n=e.prototype;n.readEnd=function(u,M){return null!=M.end?new Date(M.end):null};n.writeEnd=function(u,M){M.end=u?u.getTime():null};n.readStart=function(u,M){return null!=M.start?new Date(M.start):null};n.writeStart=function(u,M){M.start=u?u.getTime():null};n.clone=function(){return new Q({end:this.end,start:this.start})};n.equals=function(u){if(!u)return!1;
const M=N.isSome(this.start)?this.start.getTime():this.start,L=N.isSome(this.end)?this.end.getTime():this.end,U=N.isSome(u.start)?u.start.getTime():u.start;u=N.isSome(u.end)?u.end.getTime():u.end;return M===U&&L===u};n.expandTo=function(u){if(this.isEmpty||this.isAllTime)return this.clone();const M=N.applySome(this.start,U=>F.truncateDate(U,u)),L=N.applySome(this.end,U=>{const S=F.truncateDate(U,u);return U.getTime()===S.getTime()?S:F.offsetDate(S,1,u)});return new Q({start:M,end:L})};n.intersection=
function(u){if(!u)return this.clone();if(this.isEmpty||u.isEmpty)return Q.empty;if(this.isAllTime)return u.clone();if(u.isAllTime)return this.clone();var M=N.mapOr(this.start,-Infinity,z=>z.getTime());const L=N.mapOr(this.end,Infinity,z=>z.getTime()),U=N.mapOr(u.start,-Infinity,z=>z.getTime());u=N.mapOr(u.end,Infinity,z=>z.getTime());let S,B;U>=M&&U<=L?S=U:M>=U&&M<=u&&(S=M);L>=U&&L<=u?B=L:u>=M&&u<=L&&(B=u);return null==S||null==B||isNaN(S)||isNaN(B)?Q.empty:(M=new Q,M.start=-Infinity===S?null:new Date(S),
M.end=Infinity===B?null:new Date(B),M)};n.offset=function(u,M){if(this.isEmpty||this.isAllTime)return this.clone();const L=new Q,{start:U,end:S}=this;N.isSome(U)&&(L.start=F.offsetDate(U,u,M));N.isSome(S)&&(L.end=F.offsetDate(S,u,M));return L};n.union=function(u){if(!u||u.isEmpty)return this.clone();if(this.isEmpty)return u.clone();if(this.isAllTime||u.isAllTime)return y.clone();const M=N.isSome(this.start)&&N.isSome(u.start)?new Date(Math.min(this.start.getTime(),u.start.getTime())):null;u=N.isSome(this.end)&&
N.isSome(u.end)?new Date(Math.max(this.end.getTime(),u.end.getTime())):null;return new Q({start:M,end:u})};c._createClass(e,[{key:"isAllTime",get:function(){return this.equals(Q.allTime)}},{key:"isEmpty",get:function(){return this.equals(Q.empty)}}],[{key:"allTime",get:function(){return y}},{key:"empty",get:function(){return g}}]);return e}(O.JSONSupport);b.__decorate([r.property({type:Date,json:{write:{allowNull:!0}}})],O.prototype,"end",void 0);b.__decorate([k.reader("end")],O.prototype,"readEnd",
null);b.__decorate([A.writer("end")],O.prototype,"writeEnd",null);b.__decorate([r.property({readOnly:!0,json:{read:!1}})],O.prototype,"isAllTime",null);b.__decorate([r.property({readOnly:!0,json:{read:!1}})],O.prototype,"isEmpty",null);b.__decorate([r.property({type:Date,json:{write:{allowNull:!0}}})],O.prototype,"start",void 0);b.__decorate([k.reader("start")],O.prototype,"readStart",null);b.__decorate([A.writer("start")],O.prototype,"writeStart",null);O=Q=b.__decorate([h.subclass("esri.TimeExtent")],
O);const y=new O,g=new O({start:void 0,end:void 0});return O})},"esri/core/timeUtils":function(){define(["exports","./has"],function(c,b){function O(r,C,w){return 0===r?0:r*N[C]/N[w]}const N={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},F={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",
setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};c.convertTime=O;c.makeUTCTime=function(r,C,w=
"milliseconds"){C=new Date(O(C,w,"milliseconds"));C.setUTCFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());return C};c.offsetDate=function(r,C,w){r=new Date(r.getTime());if(C&&w){const {getter:h,setter:A,multiplier:Q}=F[w];if("months"===w){w=r.getFullYear();var k=r.getMonth()+C;w=new Date(w,k+1,1);w.setDate(0);w=w.getDate();r.getDate()>w&&r.setDate(w)}r[A](r[h]()+C*Q)}return r};c.offsetDateUTC=function(r,C,w="milliseconds"){r=r.getTime();C=O(C,w,"milliseconds");return new Date(r+C)};c.resetUTCDate=
function(r,C){r=new Date(r.getTime());r.setUTCFullYear(C.getFullYear(),C.getMonth(),C.getDate());return r};c.timeSinceUTCMidnight=function(r,C="milliseconds"){const w=O(r.getUTCHours(),"hours","milliseconds"),k=O(r.getUTCMinutes(),"minutes","milliseconds"),h=O(r.getUTCSeconds(),"seconds","milliseconds");r=r.getUTCMilliseconds();return O(w+k+h+r,"milliseconds",C)};c.truncateDate=function(r,C){switch(C){case "milliseconds":return new Date(r.getTime());case "seconds":return new Date(r.getFullYear(),
r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds());case "minutes":return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes());case "hours":return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours());case "days":return new Date(r.getFullYear(),r.getMonth(),r.getDate());case "weeks":return new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay());case "months":return new Date(r.getFullYear(),r.getMonth(),1);case "years":return new Date(r.getFullYear(),
0,1);case "decades":return new Date(r.getFullYear()-r.getFullYear()%10,0,1);case "centuries":return new Date(r.getFullYear()-r.getFullYear()%100,0,1);default:return new Date}};c.truncateLocalTime=function(r){const C=new Date(0);C.setHours(0);C.setMinutes(0);C.setSeconds(0);C.setMilliseconds(0);C.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());return C};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n){function u(){S||(S=Q.createTypeReader({types:M()}));return S}function M(){B||(B={key:"type",base:null,typeMap:{"data-layer":c.DataLayerSource,"map-layer":g.MapLayerSource}});return B}var L,U;N=N.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});c.JoinTableDataSource=L=function(z){function q(d){d=z.call(this,d)||this;d.type="join-table";return d}b._inheritsLoose(q,z);var E=q.prototype;E.readLeftTableSource=function(d,p,D){return u()(d,
p,D)};E.castLeftTableSource=function(d){return A.ensureOneOfType(M(),d)};E.readRightTableSource=function(d,p,D){return u()(d,p,D)};E.castRightTableSource=function(d){return A.ensureOneOfType(M(),d)};E.clone=function(){const {leftTableKey:d,rightTableKey:p,leftTableSource:D,rightTableSource:I,joinType:K}=this,P={leftTableKey:d,rightTableKey:p,leftTableSource:D?.clone()??void 0,rightTableSource:I?.clone()??void 0,joinType:K};return new L(P)};return q}(F.JSONSupport);O.__decorate([w.enumeration({joinTable:"join-table"})],
c.JoinTableDataSource.prototype,"type",void 0);O.__decorate([r.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableKey",void 0);O.__decorate([r.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableKey",void 0);O.__decorate([r.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableSource",void 0);O.__decorate([k.reader("leftTableSource")],c.JoinTableDataSource.prototype,"readLeftTableSource",null);O.__decorate([C.cast("leftTableSource")],
c.JoinTableDataSource.prototype,"castLeftTableSource",null);O.__decorate([r.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableSource",void 0);O.__decorate([k.reader("rightTableSource")],c.JoinTableDataSource.prototype,"readRightTableSource",null);O.__decorate([C.cast("rightTableSource")],c.JoinTableDataSource.prototype,"castRightTableSource",null);O.__decorate([w.enumeration(N)],c.JoinTableDataSource.prototype,"joinType",void 0);c.JoinTableDataSource=L=O.__decorate([h.subclass("esri.layers.support.source.JoinTableDataSource")],
c.JoinTableDataSource);let S=null,B=null;C={key:"type",base:null,typeMap:{"join-table":c.JoinTableDataSource,"query-table":x.QueryTableDataSource,raster:e.RasterDataSource,table:n.TableDataSource}};c.DataLayerSource=U=function(z){function q(E){E=z.call(this,E)||this;E.type="data-layer";return E}b._inheritsLoose(q,z);q.prototype.clone=function(){const {fields:E,dataSource:d}=this;return new U({fields:E,dataSource:d})};return q}(F.JSONSupport);O.__decorate([w.enumeration({dataLayer:"data-layer"})],
c.DataLayerSource.prototype,"type",void 0);O.__decorate([r.property({type:[y],json:{write:!0}})],c.DataLayerSource.prototype,"fields",void 0);O.__decorate([r.property({types:C,json:{write:!0}})],c.DataLayerSource.prototype,"dataSource",void 0);c.DataLayerSource=U=O.__decorate([h.subclass("esri.layers.support.source.DataLayerSource")],c.DataLayerSource);c.DataLayerSource.from=A.ensureType(c.DataLayerSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q){var y;const g=new O.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});O=y=function(x){function e(u){u=x.call(this,u)||this;
u.alias=null;u.defaultValue=void 0;u.description=null;u.domain=null;u.editable=!0;u.length=-1;u.name=null;u.nullable=!0;u.type=null;u.valueType=null;u.visible=!0;return u}c._inheritsLoose(e,x);var n=e.prototype;n.readDescription=function(u,{description:M}){u=null;try{u=M?JSON.parse(M):null}catch(L){}return u?.value??null};n.readValueType=function(u,{description:M}){u=null;try{u=M?JSON.parse(M):null}catch(L){}return u?g.fromJSON(u.fieldValueType):null};n.clone=function(){return new y({alias:this.alias,
defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return e}(N.JSONSupport);b.__decorate([F.property({type:String,json:{write:!0}})],O.prototype,"alias",void 0);b.__decorate([F.property({type:[String,Number],json:{write:{allowNull:!0}}})],O.prototype,"defaultValue",void 0);b.__decorate([F.property()],
O.prototype,"description",void 0);b.__decorate([k.reader("description")],O.prototype,"readDescription",null);b.__decorate([F.property({types:A.types,json:{read:{reader:A.fromJSON},write:!0}})],O.prototype,"domain",void 0);b.__decorate([F.property({type:Boolean,json:{write:!0}})],O.prototype,"editable",void 0);b.__decorate([F.property({type:r.Integer,json:{write:!0}})],O.prototype,"length",void 0);b.__decorate([F.property({type:String,json:{write:!0}})],O.prototype,"name",void 0);b.__decorate([F.property({type:Boolean,
json:{write:!0}})],O.prototype,"nullable",void 0);b.__decorate([w.enumeration(Q.kebabDict)],O.prototype,"type",void 0);b.__decorate([F.property()],O.prototype,"valueType",void 0);b.__decorate([k.reader("valueType",["description"])],O.prototype,"readValueType",null);b.__decorate([F.property({type:Boolean,json:{read:!1}})],O.prototype,"visible",void 0);return O=y=b.__decorate([h.subclass("esri.layers.support.Field")],O)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(c,b,O,N,F,r){b={key:"type",base:N,typeMap:{range:r,"coded-value":O,inherited:F}};c.CodedValueDomain=O;c.DomainBase=N;c.InheritedDomain=F;c.RangeDomain=r;c.fromJSON=function(C){if(!C||!C.type)return null;switch(C.type){case "range":return r.fromJSON(C);case "codedValue":return O.fromJSON(C);case "inherited":return F.fromJSON(C)}return null};c.types=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(c,b,O,N,F,r,C,w,k){var h;F=h=function(A){function Q(g){g=A.call(this,g)||this;g.codedValues=null;g.type="coded-value";return g}c._inheritsLoose(Q,A);var y=Q.prototype;y.getName=function(g){let x=null;if(this.codedValues){const e=String(g);this.codedValues.some(n=>{String(n.code)===e&&(x=n.name);return!!x})}return x};y.clone=function(){return new h({codedValues:O.clone(this.codedValues),name:this.name})};return Q}(k);b.__decorate([N.property({type:[w.CodedValue],json:{write:!0}})],F.prototype,
"codedValues",void 0);b.__decorate([r.enumeration({codedValue:"coded-value"})],F.prototype,"type",void 0);return F=h=b.__decorate([C.subclass("esri.layers.support.CodedValueDomain")],F)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(c,
b,O,N,F,r,C,w){var k;c.CodedValue=k=function(h){function A(Q){Q=h.call(this,Q)||this;Q.name=null;Q.code=null;return Q}b._inheritsLoose(A,h);A.prototype.clone=function(){return new k({name:this.name,code:this.code})};return A}(N.JSONSupport);O.__decorate([F.property({type:String,json:{write:!0}})],c.CodedValue.prototype,"name",void 0);O.__decorate([F.property({type:[String,Number],json:{write:!0}})],c.CodedValue.prototype,"code",void 0);c.CodedValue=k=O.__decorate([w.subclass("esri.layers.support.CodedValue")],
c.CodedValue);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,O,N,F,r,C,w,k){O=new O.JSONMap({inherited:"inherited",
codedValue:"coded-value",range:"range"});N=function(h){function A(Q){Q=h.call(this,Q)||this;Q.name=null;Q.type=null;return Q}c._inheritsLoose(A,h);return A}(N.JSONSupport);b.__decorate([F.property({type:String,json:{write:!0}})],N.prototype,"name",void 0);b.__decorate([w.enumeration(O)],N.prototype,"type",void 0);return N=b.__decorate([k.subclass("esri.layers.support.Domain")],N)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,b,O,N,F,r,C,w,k,h){var A;O=A=function(Q){function y(g){g=Q.call(this,g)||this;g.type="inherited";return g}c._inheritsLoose(y,Q);y.prototype.clone=function(){return new A};return y}(h);b.__decorate([w.enumeration({inherited:"inherited"})],O.prototype,"type",void 0);return O=A=b.__decorate([k.subclass("esri.layers.support.InheritedDomain")],O)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,b,O,N,F,r,C,w){var k;N=k=function(h){function A(Q){Q=h.call(this,Q)||this;Q.maxValue=null;Q.minValue=null;Q.type="range";return Q}c._inheritsLoose(A,h);A.prototype.clone=function(){return new k({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return A}(w);b.__decorate([O.property({type:Number,json:{type:[Number],read:{source:"range",reader(h,A){return A.range&&A.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(h,A,Q){A[Q]=[this.minValue||0,h]}}}})],N.prototype,"maxValue",void 0);b.__decorate([O.property({type:Number,json:{type:[Number],read:{source:"range",reader(h,A){return A.range&&A.range[0]}},write:{target:"range",writer(h,A,Q){A[Q]=[h,this.maxValue||0]}}}})],N.prototype,"minValue",void 0);b.__decorate([r.enumeration({range:"range"})],N.prototype,"type",void 0);return N=k=b.__decorate([C.subclass("esri.layers.support.RangeDomain")],N)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(c,b){b=new b.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});c.kebabDict=b;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,O,N,F,r,C,w,k){var h;c.MapLayerSource=h=function(A){function Q(y){y=A.call(this,
y)||this;y.type="map-layer";return y}b._inheritsLoose(Q,A);Q.prototype.clone=function(){const {mapLayerId:y,gdbVersion:g}=this;return new h({mapLayerId:y,gdbVersion:g})};return Q}(N.JSONSupport);O.__decorate([w.enumeration({mapLayer:"map-layer"})],c.MapLayerSource.prototype,"type",void 0);O.__decorate([F.property({type:r.Integer,json:{write:!0}})],c.MapLayerSource.prototype,"mapLayerId",void 0);O.__decorate([F.property({type:String,json:{write:!0}})],c.MapLayerSource.prototype,"gdbVersion",void 0);
c.MapLayerSource=h=O.__decorate([k.subclass("esri.layers.support.source.MapLayerSource")],c.MapLayerSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q){var y;c.QueryTableDataSource=y=function(g){function x(e){e=g.call(this,e)||this;e.type="query-table";return e}b._inheritsLoose(x,g);x.prototype.clone=function(){const {workspaceId:e,query:n,oidFields:u,spatialReference:M,geometryType:L}=this,U={workspaceId:e,query:n,oidFields:u,spatialReference:M?.clone()??void 0,geometryType:L};return new y(U)};return x}(F.JSONSupport);O.__decorate([k.enumeration({queryTable:"query-table"})],c.QueryTableDataSource.prototype,"type",
void 0);O.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"workspaceId",void 0);O.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"query",void 0);O.__decorate([r.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"oidFields",void 0);O.__decorate([r.property({type:A,json:{write:!0}})],c.QueryTableDataSource.prototype,"spatialReference",void 0);O.__decorate([k.enumeration(Q.featureGeometryTypeKebabDictionary)],
c.QueryTableDataSource.prototype,"geometryType",void 0);c.QueryTableDataSource=y=O.__decorate([h.subclass("esri.layers.support.source.QueryTableDataSource")],c.QueryTableDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k){var h;c.RasterDataSource=h=function(A){function Q(y){y=A.call(this,y)||this;y.type="raster";return y}b._inheritsLoose(Q,A);Q.prototype.clone=function(){const {workspaceId:y,dataSourceName:g}=this;return new h({workspaceId:y,dataSourceName:g})};return Q}(N.JSONSupport);O.__decorate([w.enumeration({raster:"raster"})],c.RasterDataSource.prototype,"type",void 0);O.__decorate([F.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,"dataSourceName",void 0);O.__decorate([F.property({type:String,
json:{write:!0}})],c.RasterDataSource.prototype,"workspaceId",void 0);c.RasterDataSource=h=O.__decorate([k.subclass("esri.layers.support.source.RasterDataSource")],c.RasterDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k){var h;c.TableDataSource=h=function(A){function Q(y){y=A.call(this,y)||this;y.type="table";return y}b._inheritsLoose(Q,A);Q.prototype.clone=function(){const {workspaceId:y,gdbVersion:g,dataSourceName:x}=this;return new h({workspaceId:y,gdbVersion:g,dataSourceName:x})};return Q}(N.JSONSupport);O.__decorate([w.enumeration({table:"table"})],c.TableDataSource.prototype,"type",void 0);O.__decorate([F.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"workspaceId",
void 0);O.__decorate([F.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"gdbVersion",void 0);O.__decorate([F.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"dataSourceName",void 0);c.TableDataSource=h=O.__decorate([k.subclass("esri.layers.support.source.TableDataSource")],c.TableDataSource);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k){O=function(h){function A(Q){Q=h.call(this,Q)||this;Q.onFields=null;Q.operator=null;Q.searchTerm=null;Q.searchType=null;return Q}c._inheritsLoose(A,h);return A}(O.ClonableMixin(N.JSONSupport));b.__decorate([r.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:F.isSome(this.onFields)&&0<this.onFields.length}}}}})],O.prototype,"onFields",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],O.prototype,"operator",void 0);b.__decorate([r.property({type:String,
json:{write:!0}})],O.prototype,"searchTerm",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],O.prototype,"searchType",void 0);return O=b.__decorate([k.subclass("esri.rest.support.FullTextSearch")],O)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(c,b,O,N,F,r,C,w,k,h,A){F=
Q=>{Q=function(y){function g(){return y.apply(this,arguments)||this}b._inheritsLoose(g,y);g.prototype.clone=function(){var x=w.unwrapOrThrow(h.getProperties(this),"unable to clone instance of non-accessor class"),e=x.metadatas;const n=x.store,u={};x=new Map;for(var M in e){var L=e[M];const U=n?.originOf(M),S=L.clonable;if(L.readOnly||!1===S||U!==k.OriginId.USER&&U!==k.OriginId.DEFAULTS&&U!==k.OriginId.WEB_MAP&&U!==k.OriginId.WEB_SCENE)continue;L=this[M];let B=null;B="function"===typeof S?S(L):"reference"===
S?L:r.tryClone(L);if(null==L||null!=B)U===k.OriginId.DEFAULTS?x.set(M,B):u[M]=B}e=new (Object.getPrototypeOf(this).constructor)(u);if(x.size&&(M=h.getProperties(e)?.store))for(const [U,S]of x)M.set(U,S,k.OriginId.DEFAULTS);return e};return g}(Q);return Q=O.__decorate([A.subclass("esri.core.Clonable")],Q)};c.Clonable=function(Q){function y(){return Q.apply(this,arguments)||this}b._inheritsLoose(y,Q);return y}(F(N));c.Clonable=O.__decorate([A.subclass("esri.core.Clonable")],c.Clonable);c.ClonableMixin=
F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),function(c,b,O,N,F,r,C,w,k,h){var A;O=new N.JSONMap({upperLeft:"upper-left",
lowerLeft:"lower-left"});F=A=function(Q){function y(g){g=Q.call(this,g)||this;g.extent=null;g.mode="view";g.originPosition="upper-left";g.tolerance=1;return g}c._inheritsLoose(y,Q);y.prototype.clone=function(){return new A(r.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return y}(F.JSONSupport);b.__decorate([C.property({type:h,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],F.prototype,"extent",void 0);b.__decorate([C.property({type:["view",
"edit"],json:{write:!0}})],F.prototype,"mode",void 0);b.__decorate([C.property({type:String,json:{read:O.read,write:O.write}})],F.prototype,"originPosition",void 0);b.__decorate([C.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],F.prototype,"tolerance",void 0);return F=A=b.__decorate([k.subclass("esri.rest.support.QuantizationParameters")],F)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(c,b,O,N,F,r,C,w,k){var h;O=new O.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});N=h=function(A){function Q(g){g=A.call(this,g)||this;g.maxPointCount=void 0;g.maxRecordCount=void 0;g.maxVertexCount=void 0;g.onStatisticField=
null;g.outStatisticFieldName=null;g.statisticType=null;g.statisticParameters=null;return g}c._inheritsLoose(Q,A);var y=Q.prototype;y.writeStatisticParameters=function(g,x){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)x.statisticParameters=F.clone(g)};y.clone=function(){return new h({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:F.clone(this.statisticParameters)})};return Q}(N.JSONSupport);b.__decorate([r.property({type:Number,json:{write:!0}})],N.prototype,"maxPointCount",void 0);b.__decorate([r.property({type:Number,json:{write:!0}})],N.prototype,"maxRecordCount",void 0);b.__decorate([r.property({type:Number,json:{write:!0}})],N.prototype,"maxVertexCount",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],N.prototype,"onStatisticField",void 0);b.__decorate([r.property({type:String,
json:{write:!0}})],N.prototype,"outStatisticFieldName",void 0);b.__decorate([r.property({type:String,json:{read:{source:"statisticType",reader:O.read},write:{target:"statisticType",writer:O.write}}})],N.prototype,"statisticType",void 0);b.__decorate([r.property({type:Object})],N.prototype,"statisticParameters",void 0);b.__decorate([k.writer("statisticParameters")],N.prototype,"writeStatisticParameters",null);return N=h=b.__decorate([w.subclass("esri.rest.support.StatisticDefinition")],N)})},"esri/symbols/support/ElevationInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./FeatureExpressionInfo ./unitConversionUtils".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y){var g;C=O.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});O=new O.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});N=g=function(x){function e(u){u=x.call(this,u)||this;u.offset=null;return u}c._inheritsLoose(e,x);var n=e.prototype;n.readFeatureExpressionInfo=function(u,M){if(null!=u)return u;if(M.featureExpression&&
0===M.featureExpression.value)return{expression:"0"}};n.writeFeatureExpressionInfo=function(u,M,L,U){M[L]=u.write({},U);"0"===u.expression&&(M.featureExpression={value:0})};n.write=function(u,M){return this.offset||this.mode||this.featureExpressionInfo||this.unit?x.prototype.write.call(this,u,M):null};n.clone=function(){return new g({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};n.equals=function(u){return this.mode===
u.mode&&this.offset===u.offset&&this.unit===u.unit&&F.equalsMaybe(this.featureExpressionInfo,u.featureExpressionInfo)};c._createClass(e,[{key:"mode",get:function(){const {offset:u,featureExpressionInfo:M}=this;return this._isOverridden("mode")?this._get("mode"):F.isSome(u)||M?"relative-to-ground":"on-the-ground"},set:function(u){this._override("mode",u)}},{key:"unit",set:function(u){this._set("unit",u)}}]);return e}(N.JSONSupport);b.__decorate([r.property({type:Q,json:{write:!0}})],N.prototype,"featureExpressionInfo",
void 0);b.__decorate([k.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],N.prototype,"readFeatureExpressionInfo",null);b.__decorate([A.writer("featureExpressionInfo",{featureExpressionInfo:{type:Q},"featureExpression.value":{type:[0]}})],N.prototype,"writeFeatureExpressionInfo",null);b.__decorate([r.property({type:C.apiValues,nonNullable:!0,json:{type:C.jsonValues,read:C.read,write:{writer:C.write,isRequired:!0}}})],N.prototype,"mode",null);b.__decorate([r.property({type:Number,
json:{write:!0}})],N.prototype,"offset",void 0);b.__decorate([r.property({type:y.supportedUnits,json:{type:String,read:O.read,write:O.write}})],N.prototype,"unit",null);return N=g=b.__decorate([h.subclass("esri.layers.support.ElevationInfo")],N)})},"esri/symbols/support/FeatureExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldUtils".split(" "),
function(c,b,O,N,F,r,C,w){var k;O=k=function(h){function A(y){return h.call(this,y)||this}c._inheritsLoose(A,h);var Q=A.prototype;Q.collectRequiredFields=function(){var y=c._asyncToGenerator(function*(g,x){return w.collectArcadeFieldNames(g,x,this.expression)});return function(g,x){return y.apply(this,arguments)}}();Q.clone=function(){return new k({expression:this.expression,title:this.title})};Q.equals=function(y){return this.expression===y.expression&&this.title===y.title};return A}(O.JSONSupport);
b.__decorate([N.property({type:String,json:{write:!0}})],O.prototype,"expression",void 0);b.__decorate([N.property({type:String,json:{write:!0}})],O.prototype,"title",void 0);return O=k=b.__decorate([C.subclass("esri.layers.support.FeatureExpressionInfo")],O)})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../renderers/support/lengthUtils"],function(c,b){const O=function(){const N=Object.keys(b.meterIn);N.sort();return N}();c.getMetersPerUnit=function(N){return 1/(b.meterIn[N]||
1)};c.supportedUnits=O;c.supportsUnit=function(N){return!!N&&null!=b.meterIn[N]};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(c,b,O){b={inches:b.convertUnit(1,"meters","inches"),feet:b.convertUnit(1,"meters","feet"),"us-feet":b.convertUnit(1,"meters","us-feet"),yards:b.convertUnit(1,"meters","yards"),miles:b.convertUnit(1,"meters","miles"),"nautical-miles":b.convertUnit(1,
"meters","nautical-miles"),millimeters:b.convertUnit(1,"meters","millimeters"),centimeters:b.convertUnit(1,"meters","centimeters"),decimeters:b.convertUnit(1,"meters","decimeters"),meters:b.convertUnit(1,"meters","meters"),kilometers:b.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/b.lengthToDegrees(1,"meters",O.earth.radius)};c.meterIn=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/LRUCache ../../../../core/MapUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/unitUtils ../../../../symbols/support/unitConversionUtils".split(" "),
function(c,b,O,N,F,r,C,w,k){function h(x,{x:e,y:n,z:u}){return`${x}-${e}-${n}-${u??0}}`}function A(){return[]}let Q=function(){function x(){}var e=x.prototype;e.alignCandidates=function(){var n=b._asyncToGenerator(function*(u,M){return u});return function(u,M){return n.apply(this,arguments)}}();e.notifyElevationSourceChange=function(){};return x}(),y=function(){function x(n,u,M){this._elevationInfo=n;this._alignPointsInFeatures=u;this.spatialReference=M;this._alignmentsCache=new N(1024);this._cacheVersion=
0;this._metersPerVerticalUnit=w.getMetersPerVerticalUnitForSR(M)}var e=x.prototype;e.alignCandidates=function(){var n=b._asyncToGenerator(function*(u,M){const L=this._elevationInfo;return r.isSome(L)&&"absolute-height"===L.mode&&!L.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(u,L),u):this._alignComputedElevationCandidates(u,M)});return function(u,M){return n.apply(this,arguments)}}();e.notifyElevationSourceChange=function(){this._alignmentsCache.clear();this._cacheVersion++};e._alignAbsoluteElevationCandidates=
function(n,u){const {offset:M,unit:L}=u;if(!r.isNone(M)){u=k.getMetersPerUnit(L??"meters")/this._metersPerVerticalUnit;u*=M;for(const U of n)switch(U.type){case "edge":U.start.z+=u;U.end.z+=u;continue;case "vertex":U.target.z+=u}}};e._alignComputedElevationCandidates=function(){var n=b._asyncToGenerator(function*(u,M){var L=new Map;for(const E of u)F.getOrCreateMapValue(L,E.objectId,A).push(E);const [U,S,B]=this._prepareQuery(L);L=yield this._alignPointsInFeatures(U,M);C.throwIfAborted(M);if(B!==
this._cacheVersion)return this._alignComputedElevationCandidates(u,M);this._applyCacheAndResponse(U,L,S);const {drapedObjectIds:z,failedObjectIds:q}=L;M=[];for(const E of u)({objectId:u}=E),z.has(u)&&"edge"===E.type&&(E.draped=!0),q.has(u)||M.push(E);return M});return function(u,M){return n.apply(this,arguments)}}();e._prepareQuery=function(n){const u=[],M=[];for(const [L,U]of n){n=[];for(const S of U)this._addToQueriesOrCachedResult(L,S.target,n,M),"edge"===S.type&&(this._addToQueriesOrCachedResult(L,
S.start,n,M),this._addToQueriesOrCachedResult(L,S.end,n,M));0!==n.length&&u.push({objectId:L,points:n})}return[u,M,this._cacheVersion]};e._addToQueriesOrCachedResult=function(n,u,M,L){n=h(n,u);n=this._alignmentsCache.get(n);r.isSome(n)?L.push(new g(u,n)):M.push(u)};e._applyCacheAndResponse=function(n,{elevations:u,drapedObjectIds:M,failedObjectIds:L},U){for(var S of U)S.apply();U=0;S=this._alignmentsCache;for(const {objectId:B,points:z}of n)if(L.has(B))U+=z.length;else{n=!M.has(B);for(const q of z){const E=
h(B,q),d=u[U++];q.z=d;n&&S.put(E,d,1)}}};return x}(),g=function(){function x(e,n){this.point=e;this.z=n}x.prototype.apply=function(){this.point.z=this.z};return x}();c.getSnappingCandidateElevationAligner=function(x=!1,e){if(x){const {elevationInfo:n,alignPointsInFeatures:u,spatialReference:M}=e;return new y(n,u,M)}return new Q};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(c,b){return function(){function O(F,
r){this._storage=new b.MemCacheStorage;this._storage.maxSize=F;r&&this._storage.registerRemoveFunc("",r)}var N=O.prototype;N.put=function(F,r,C){this._storage.put(F,r,C,1)};N.pop=function(F){return this._storage.pop(F)};N.get=function(F){return this._storage.get(F)};N.clear=function(){this._storage.clearAll()};N.destroy=function(){this._storage.destroy()};c._createClass(O,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(F){this._storage.maxSize=F}}]);return O}()})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationFilter":function(){define(["exports",
"../../../../core/has"],function(c,b){function O(k){return 1>=k.distance}function N(k,h,{x:A,y:Q,z:y}){const {start:g,end:x,target:e}=k;if(!k.draped){const M=x.x-g.x;var n=x.y-g.y,u=x.z-g.z;const L=Math.min(1,Math.max(0,((h.x-g.x)*M+(h.y-g.y)*n+u*(h.z-g.z))/(M*M+n*n+u*u)));n=g.y+n*L;u=g.z+u*L;e.x=g.x+M*L;e.y=n;e.z=u}A=(h.x-e.x)/A;Q=(h.y-e.y)/Q;h=(h.z-e.z)/y;k.distance=Math.sqrt(A*A+Q*Q+h*h)}function F(k,h,{x:A,y:Q,z:y}){const {target:g}=k;A=(h.x-g.x)/A;Q=(h.y-g.y)/Q;h=(h.z-g.z)/y;k.distance=Math.sqrt(A*
A+Q*Q+h*h)}function r(k,h){return k.distance-h.distance}let C=function(){function k(){}var h=k.prototype;h.filter=function(A,Q){return Q};h.notifyElevationSourceChange=function(){};return k}(),w=function(){function k(){}var h=k.prototype;h.filter=function(A,Q){const {point:y,distance:g}=A;({z:A}=y);if(null==A||0===Q.length)return Q;A="number"===typeof g?{x:g,y:g,z:g}:g;Q=this._updateCandidatesTo3D(Q,y,A).filter(O);Q.sort(r);return Q};h._updateCandidatesTo3D=function(A,Q,y){for(const g of A)switch(g.type){case "edge":N(g,
Q,y);continue;case "vertex":F(g,Q,y)}return A};return k}();c.getSnappingCandidateElevationFilter=function(k=!1){return k?new w:new C};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/symbologySnappingCandidates":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/lang ../../../../core/LRUCache ../../../../core/promiseUtils ../../../../core/string".split(" "),function(c,b,O,N,F,
r,C){function w(A){switch(A.type){case "vertex":const {objectId:Q,target:y}=A;return C.numericHash(`${Q}-vertex-${y.x}-${y.y}-${y.z??0}`).toString();case "edge":const {objectId:g,start:x,end:e}=A;return C.numericHash(`${g}-edge-${x.x}-${x.y}-${x.z??0}-to-${e.x}-${e.y}-${e.z??0}`).toString();default:return""}}let k=function(){function A(){}var Q=A.prototype;Q.fetch=function(){var y=b._asyncToGenerator(function*(){return[]});return function(){return y.apply(this,arguments)}}();Q.notifySymbologyChange=
function(){};return A}(),h=function(){function A(y){this._getSymbologyCandidates=y;this._candidatesCache=new F(1024);this._cacheVersion=0}var Q=A.prototype;Q.fetch=function(){var y=b._asyncToGenerator(function*(g,x){if(0===g.length)return[];const e=[],n=[],u=this._candidatesCache;for(var M of g){var L=w(M),U=u.get(L);if(U)for(var S of U)n.push(N.clone(S));else e.push(M),u.put(L,[],1)}if(0===e.length)return n;M=this._cacheVersion;const {candidates:B,sourceCandidateIndices:z}=yield this._getSymbologyCandidates(e,
x);r.throwIfAborted(x);if(M!==this._cacheVersion)return this.fetch(g,x);g=[];({length:x}=B);for(M=0;M<x;++M)L=B[M],U=w(e[z[M]]),S=u.get(U),S.push(L),u.put(U,S,S.length),g.push(N.clone(L));return n.concat(g)});return function(g,x){return y.apply(this,arguments)}}();Q.notifySymbologyChange=function(){this._candidatesCache.clear();this._cacheVersion++};return A}();c.getSymbologySnappingCandidatesFetcher=function(A=!1,Q){return A?new h(Q):new k};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/asyncUtils ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M,L,U,S,B){c.FeatureServiceTiledFetcher=function(z){function q(d){d=z.call(this,d)||this;d.tilesOfInterest=[];d.availability=0;d._pendingTiles=new Map;d._pendingEdits=new F.AsyncSequence;d._pendingEditsAbortController=new AbortController;return d}b._inheritsLoose(q,z);var E=q.prototype;E.initialize=function(){this._initializeFetchExtent();this.updatingHandles.add(()=>this._configuration,()=>this.refresh());this.updatingHandles.add(()=>this.tilesOfInterest,
(d,p)=>{N.equals(d,p,({id:D},{id:I})=>D===I)||this._process()},Q.sync)};E.destroy=function(){this._pendingTiles.forEach(d=>this._deletePendingTile(d));this._pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this._pendingEditsAbortController.abort();this._pendingEditsAbortController=null};E.refresh=function(){this.store.refresh();this._pendingTiles.forEach(d=>this._deletePendingTile(d));this._process()};E.applyEdits=function(d){var p=this;this._pendingEdits.push(d,function(){var D=
b._asyncToGenerator(function*(I){if(0!==I.addedFeatures.length||0!==I.updatedFeatures.length||0!==I.deletedFeatures.length){for(const [,K]of p._pendingTiles)K.reset();I={...I,deletedFeatures:I.deletedFeatures.map(({objectId:K,globalId:P})=>K&&-1!==K?K:p._lookupObjectIdByGlobalId(P))};yield p.updatingHandles.addPromise(p.store.processEdits(I,(K,P)=>p._queryFeaturesById(K,P),p._pendingEditsAbortController.signal));p._processPendingTiles()}});return function(I){return D.apply(this,arguments)}}())};E._initializeFetchExtent=
function(){var d=this;if(this.capabilities.query.supportsExtent&&M.isHostedAgolService(this.url)){var p=r.createTask(function(){var D=b._asyncToGenerator(function*(I){try{const K=yield U.executeQueryForExtent(d.url,new S({where:"1\x3d1",outSpatialReference:d.spatialReference,cacheHint:d.capabilities.query.supportsCacheHint?!0:void 0}),{query:d._configuration.customParameters,signal:I});d.store.extent=e.fromJSON(K.data?.extent)}catch(K){A.throwIfAbortError(K),k.getLogger(d.declaredClass).warn("Failed to fetch data extent",
K)}});return function(I){return D.apply(this,arguments)}}());this.updatingHandles.addPromise(p.promise.then(()=>this._process()));this.handles.add(w.makeHandle(()=>p.abort()))}};E._process=function(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()};E._markTilesNotAlive=function(){for(const [,d]of this._pendingTiles)d.alive=!1};E._createPendingTiles=function(){var d=this._collectMissingTilesInfo();this._setAvailability(h.isNone(d)?1:d.coveredArea/
d.fullArea);if(!h.isNone(d))for(const {data:p,resolution:D}of d.missingTiles)(d=this._pendingTiles.get(p.id))?(d.resolution=D,d.alive=!0):this._createPendingTile(p,D)};E._collectMissingTilesInfo=function(){let d=null;for(let p=this.tilesOfInterest.length-1;0<=p;p--){const D=this.store.process(this.tilesOfInterest[p],(I,K)=>this._verifyTileComplexity(I,K));h.isNone(d)?d=D:d.prepend(D)}return d};E._deletePendingTiles=function(){for(const [,d]of this._pendingTiles)d.alive||this._deletePendingTile(d)};
E._processPendingTiles=function(){const d={fetchCount:(p,D)=>this._fetchCount(p,D),fetchFeatures:(p,D,I)=>this._fetchFeatures(p,D,I),finish:(p,D)=>this._finishPendingTile(p,D),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(d))for(const [,p]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(p.data),p.resolution)&&this.updatingHandles.addPromise(p.process(d))};E._verifyTileComplexity=function(d,p){return this._verifyVertexComplexity(d)&&this._verifyFeatureDensity(d,
p)};E._verifyVertexComplexity=function(d){return 1E6>d*this._minimumVerticesPerFeature};E._verifyFeatureDensity=function(d,p){if(h.isNone(this.tileInfo))return!1;p*=this.tileSize;return 1>25/(p*p)*d};E._ensureFetchAllCounts=function(d){let p=!0;for(const [,D]of this._pendingTiles)D.state.type<B.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(D.process(d)),D.state.type<=B.StateType.FETCH_COUNT&&(p=!1);return p};E._finishPendingTile=function(d,p){this.store.add(d.data,p);this._deletePendingTile(d);
this._updateAvailability()};E._updateAvailability=function(){const d=this._collectMissingTilesInfo();this._setAvailability(h.isNone(d)?1:d.coveredArea/d.fullArea)};E._setAvailability=function(d){this._set("availability",d)};E._createPendingTile=function(d,p){p=new B.PendingFeatureTile(d,p);this._pendingTiles.set(d.id,p);return p};E._deletePendingTile=function(d){d.reset();this._pendingTiles.delete(d.data.id)};E._fetchCount=function(){var d=b._asyncToGenerator(function*(p,D){return this.store.fetchCount(p.data,
this.url,this._createCountQuery(p),{query:this.customParameters,timeout:6E5,signal:D})});return function(p,D){return d.apply(this,arguments)}}();E._fetchFeatures=function(){var d=b._asyncToGenerator(function*(p,D,I){let K=0;const P=[];let v=0,G=D;for(;;){const X=this._createFeaturesQuery(p),ka=this._setPagingParameters(X,K,G),{features:ta,exceededTransferLimit:za}=yield this._queryFeatures(X,I);ka&&(K+=h.unwrap(X.num));v+=ta.length;for(const Ea of ta)P.push(Ea);G=D-v;if(!ka||!za||0>=G)return P}});
return function(p,D,I){return d.apply(this,arguments)}}();E._filterProperties=function(d){return h.isNone(d)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:d.where||"1\x3d1",timeExtent:d.timeExtent,gdbVersion:d.gdbVersion}};E._lookupObjectIdByGlobalId=function(d){const p=this.globalIdField,D=this.objectIdField;if(h.isNone(p))throw Error("Expected globalIdField to be defined");let I=null;this.store.featureStore.forEach(K=>{d===K.attributes[p]&&(I=K.objectId??K.attributes[D])});if(h.isNone(I))throw Error(`Expected to find a feature with globalId ${d}`);
return I};E._queryFeaturesById=function(d,p){const D=this._createFeaturesQuery();D.objectIds=d;return this._queryFeatures(D,p)};E._queryFeatures=function(d,p){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(d,p):this._queryFeaturesJSON(d,p)};E._queryFeaturesPBF=function(){var d=b._asyncToGenerator(function*(p,D){const {sourceSpatialReference:I}=this;({data:p}=yield U.executeQueryPBF(this.url,p,new L.OptimizedFeatureSetParserContext({sourceSpatialReference:I}),{query:this._configuration.customParameters,
timeout:6E5,signal:D}));return u.unquantizeOptimizedFeatureSet(p)});return function(p,D){return d.apply(this,arguments)}}();E._queryFeaturesJSON=function(){var d=b._asyncToGenerator(function*(p,D){const {sourceSpatialReference:I}=this;({data:p}=yield U.executeQuery(this.url,p,I,{query:this._configuration.customParameters,timeout:6E5,signal:D}));return u.convertFromFeatureSet(p,this.objectIdField)});return function(p,D){return d.apply(this,arguments)}}();E._createCountQuery=function(d){d=this._createBaseQuery(d);
this.capabilities.query.supportsCacheHint&&(d.cacheHint=!0);return d};E._createFeaturesQuery=function(d=null){const p=this._createBaseQuery(d);p.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];p.returnGeometry=!0;h.isSome(d)&&(this.capabilities.query.supportsResultType?p.resultType="tile":this.capabilities.query.supportsCacheHint&&(p.cacheHint=!0));return p};E._createBaseQuery=function(d){d=new S({returnZ:this.hasZ,returnM:!1,geometry:h.isSome(this.tileInfo)&&
h.isSome(d)?n.toExtent(d.data.extent,this.tileInfo.spatialReference):void 0});const p=this._configuration.filter;h.isSome(p)&&(d.where=p.where,d.gdbVersion=p.gdbVersion,d.timeExtent=p.timeExtent);d.outSpatialReference=this.spatialReference;return d};E._setPagingParameters=function(d,p,D){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:I,supportsCacheHint:K,tileMaxRecordCount:P,maxRecordCount:v,supportsResultType:G}=this.capabilities.query,X=I?S.MAX_MAX_RECORD_COUNT_FACTOR:
1,ka=X*((G||K)&&P?P:v?v:2E3);d.start=p;I?(d.maxRecordCountFactor=Math.min(X,Math.ceil(D/ka)),d.num=Math.min(D,d.maxRecordCountFactor*ka)):d.num=Math.min(D,ka);return!0};b._createClass(q,[{key:"_minimumVerticesPerFeature",get:function(){switch(this.store?.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(d){const p=this._get("filter");d=this._filterProperties(d);
JSON.stringify(p)!==JSON.stringify(d)&&this._set("filter",d)}},{key:"customParameters",set:function(d){const p=this._get("customParameters");JSON.stringify(p)!==JSON.stringify(d)&&this._set("customParameters",d)}},{key:"_configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(d){const p=this._get("tileInfo");p===d||h.isSome(d)&&h.isSome(p)&&JSON.stringify(d)===JSON.stringify(p)||(this._set("tileInfo",
d),this.store.tileInfo=d)}},{key:"tileSize",set:function(d){this._get("tileSize")!==d&&this._set("tileSize",d)}},{key:"updating",get:function(){return this.updatingExcludingEdits||this._pendingEdits.updating}},{key:"updatingExcludingEdits",get:function(){return this.updatingHandles.updating}},{key:"hasZ",get:function(){return this.store.featureStore.hasZ}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map(d=>
d.debugInfo),storedTiles:this.store.debugInfo}}}]);return q}(C.HandleOwner);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"url",void 0);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);
O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);O.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"store",void 0);O.__decorate([y.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_minimumVerticesPerFeature",null);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,
"filter",null);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,"customParameters",null);O.__decorate([y.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_configuration",null);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,"tileInfo",null);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,"tileSize",null);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);O.__decorate([y.property({readOnly:!0})],
c.FeatureServiceTiledFetcher.prototype,"updating",null);O.__decorate([y.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"updatingExcludingEdits",null);O.__decorate([y.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"availability",void 0);O.__decorate([y.property()],c.FeatureServiceTiledFetcher.prototype,"hasZ",null);c.FeatureServiceTiledFetcher=O.__decorate([x.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],
c.FeatureServiceTiledFetcher);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,b,O,N,F,r){c.AsyncSequence=function(C){function w(){var h=C.apply(this,arguments)||this;h.updating=!1;h._pending=[];return h}b._inheritsLoose(w,C);var k=w.prototype;k.push=function(h,A){this._pending.push({promise:h,
callback:A});1===this._pending.length&&this._process()};k._process=function(){if(this._pending.length){this.updating=!0;var h=this._pending[0];h.promise.then(A=>h.callback(A)).catch(()=>{}).then(()=>{this._pending.shift();this._process()})}else this.updating=!1};return w}(N);O.__decorate([F.property()],c.AsyncSequence.prototype,"updating",void 0);c.AsyncSequence=O.__decorate([r.subclass("esri.core.AsyncSequence")],c.AsyncSequence);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/ensureType ./arrayUtils ./accessorSupport/decorators/subclass".split(" "),
function(c,b,O,N,F,r,C,w,k,h){function A(){A=b._asyncToGenerator(function*(M,L,U){return(yield r.eachAlways(M.map((S,B)=>L.apply(U,[S,B])))).map(S=>S.value)});return A.apply(this,arguments)}function Q(M){return{ok:!0,value:M}}function y(M){return{ok:!1,error:M}}function g(M){return F.isSome(M)&&!0===M.ok?M.value:null}function x(M){return F.isSome(M)&&!1===M.ok?M.error:null}function e(){e=b._asyncToGenerator(function*(M){if(F.isNone(M))return{ok:!1,error:Error("no promise provided")};try{return Q(yield M)}catch(L){return y(L)}});
return e.apply(this,arguments)}function n(){n=b._asyncToGenerator(function*(M){try{return Q(yield M)}catch(L){return r.throwIfAbortError(L),y(L)}});return n.apply(this,arguments)}let u=function(M){function L(S,B){var z=M.call(this,{})||this;z._result=null;z._abortHandle=null;z.abort=()=>{z._abortController=F.abortMaybe(z._abortController)};z.remove=z.abort;z._abortController=new AbortController;const {signal:q}=z._abortController;z.promise=S(q);z.promise.then(E=>{z._result=Q(E);z._cleanup()},E=>{z._result=
y(E);z._cleanup()});z._abortHandle=r.onAbort(B,z.abort);return z}b._inheritsLoose(L,M);var U=L.prototype;U.normalizeCtorArgs=function(){return{}};U.destroy=function(){this.abort()};U._cleanup=function(){this._abortHandle=F.removeMaybe(this._abortHandle);this._abortController=null};b._createClass(L,[{key:"value",get:function(){return g(this._result)}},{key:"error",get:function(){return x(this._result)}},{key:"finished",get:function(){return F.isSome(this._result)}}]);return L}(N);O.__decorate([C.property()],
u.prototype,"value",null);O.__decorate([C.property()],u.prototype,"error",null);O.__decorate([C.property()],u.prototype,"finished",null);O.__decorate([C.property()],u.prototype,"promise",void 0);O.__decorate([C.property()],u.prototype,"_result",void 0);u=O.__decorate([h.subclass("esri.core.asyncUtils.ReactiveTask")],u);c.assertResult=function(M){if(!0===M.ok)return M.value;throw M.error;};c.createTask=function(M,L){return new u(M,L)};c.forEach=function(M,L,U){return r.eachAlways(M.map((S,B)=>L.apply(U,
[S,B])))};c.makeResultError=y;c.makeResultOk=Q;c.map=function(M,L,U){return A.apply(this,arguments)};c.result=function(M){return e.apply(this,arguments)};c.resultError=x;c.resultOrAbort=function(M){return n.apply(this,arguments)};c.resultValue=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),
function(c,b,O,N,F,r,C,w){const k=h=>{h=function(A){function Q(){return A.apply(this,arguments)||this}b._inheritsLoose(Q,A);Q.prototype.destroy=function(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())};b._createClass(Q,[{key:"handles",get:function(){return this._get("handles")||new F}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new w.WatchUpdatingTracking}}]);return Q}(h);O.__decorate([r.property({readOnly:!0})],h.prototype,
"handles",null);O.__decorate([r.property({readOnly:!0})],h.prototype,"updatingHandles",null);return h=O.__decorate([C.subclass("esri.core.HandleOwner")],h)};c.HandleOwner=function(h){function A(){return h.apply(this,arguments)||this}b._inheritsLoose(A,h);return A}(k(N));c.HandleOwner=O.__decorate([C.subclass("esri.core.HandleOwner")],c.HandleOwner);c.HandleOwnerMixin=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports",
"../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(c,b,O,N){function F(y){if(b.isNone(y))return null;y=O.urlToObject(y);y=y.path.match(h)||y.path.match(A);if(!y)return null;const [,g,x,e,n]=y;y=x.indexOf("/");return{title:C(-1!==y?x.slice(y+1):x),serverType:w[e.toLowerCase()],sublayer:null!=n&&""!==n?parseInt(n,10):null,url:{path:g}}}function r(y){return(y=O.urlToObject(y).path.match(Q))?{serviceUrl:y[1],sublayerId:Number(y[2])}:null}function C(y){y=y.replace(/\s*[/_]+\s*/g,
" ");return y[0].toUpperCase()+y.slice(1)}const w={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},k=Object.values(w),h=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${k.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),A=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${k.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Q=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;
c.cleanTitle=C;c.isArcGISUrl=function(y){return!!h.test(y)};c.isHostedAgolService=function(y){if(!y)return!1;y=y.toLowerCase();const g=y.includes(".arcgis.com/");y=y.includes("//services")||y.includes("//tiles")||y.includes("//features");return g&&y};c.isServerOrServicesAGOLUrl=function(y){if(!y)return!1;y=(new O.Url(O.makeAbsolute(y))).authority?.toLowerCase();return"server.arcgisonline.com"===y||"services.arcgisonline.com"===y};c.isWmsServer=function(y){if(!y)return!1;var g=y.toLowerCase();y=g.includes("/services/");
const x=g.includes("/mapserver/wmsserver"),e=g.includes("/imageserver/wmsserver");g=g.includes("/wmsserver");return y&&(x||e||g)};c.parse=F;c.parseNonStandardSublayerUrl=r;c.sanitizeUrl=function(y,g){return y?O.removeTrailingSlash(O.removeQueryParameters(y,g)):y};c.sanitizeUrlWithLayerId=function(y){let {url:g}=y;if(!g)return{url:g};g=O.removeQueryParameters(g,y.logger);const x=O.urlToObject(g),e=F(x.path);let n=void 0;b.isSome(e)?(null!=e.sublayer&&null==y.layer.layerId&&(n=e.sublayer),g=e.url.path):
y.nonStandardUrlAllowed&&(y=r(x.path),b.isSome(y)&&(g=y.serviceUrl,n=y.sublayerId));return{url:O.removeTrailingSlash(g),layerId:n}};c.serverTypes=k;c.titleFromUrlAndName=function(y,g){const x=[];y&&(y=F(y),b.isSome(y)&&y.title&&x.push(y.title));g&&(g=C(g),x.push(g));if(2===x.length){if(x[0].toLowerCase().includes(x[1].toLowerCase()))return x[0];if(x[1].toLowerCase().includes(x[0].toLowerCase()))return x[1]}return x.join(" - ")};c.writeUrlWithLayerId=function(y,g,x,e,n){N.write(g,e,"url",n);e.url&&
null!=y.layerId&&(e.url=O.join(e.url,x,y.layerId.toString()))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(c,b,O){function N(x,e){var n=e&&e.url&&e.url.path;x&&n&&(x=O.makeAbsolute(x,n,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths&&(n=O.makeRelative(x,e.portalItem.itemUrl),null!=n&&y.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)));
return A(x,e&&e.portal)}function F(x,e,n=c.MarkKeep.YES){if(null==x)return x;!O.isAbsolute(x)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(x);let u=O.makeAbsolute(x);if(e){var M=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(M){M=A(M,e.portal);const L=A(u,e.portal);u=O.makeRelative(L,M,M);null!=u&&u!==L&&u!==x&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(u)}}u=h(u,e?.portal);O.isAbsolute(u)&&(u=O.normalize(u));e?.resources&&e?.portalItem&&
!O.isAbsolute(u)&&!O.isDataProtocol(u)&&n===c.MarkKeep.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(u),compress:!1});return u}function r(x,e,n){return N(x,n)}function C(x,e,n,u){x=F(x,u);void 0!==x&&(e[n]=x)}function w(x){return(x?.match(Q)??null)?.[1]??null}function k(x){x=x?.match(Q)??null;if(null==x)return null;x=x[2];const e=x.lastIndexOf("/");if(-1===e){const {path:M,extension:L}=O.splitPathExtension(x);return{prefix:null,filename:M,extension:b.unwrap(L)}}const {path:n,
extension:u}=O.splitPathExtension(x.slice(e+1));return{prefix:x.slice(0,e),filename:n,extension:b.unwrap(u)}}function h(x,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?O.changeDomain(x,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):x}function A(x,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return x;const n=`${e.urlKey}.${e.customBaseUrl}`,u=O.getAppUrl();return O.hasSameOrigin(u,`${u.scheme}://${n}`)?O.changeDomain(x,e.portalHostname,n):O.changeDomain(x,n,e.portalHostname)}const Q=
/\/items\/([^\/]+)\/resources\/(.*)/,y=/^\.\/resources\//;c.MarkKeep=void 0;(function(x){x[x.YES=0]="YES";x[x.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const g=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:h,fromJSON:N,itemIdFromResourceUrl:w,prefixAndFilenameFromResourceUrl:k,read:r,toJSON:F,write:C},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=h;c.fromJSON=N;c.itemIdFromResourceUrl=w;c.persistableUrlUtils=g;c.prefixAndFilenameFromResourceUrl=
k;c.read=r;c.toJSON=F;c.write=C})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(c,b,O,N,F,r){const C=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let w=function(){function k(A){this._options=A;this.geometryTypes=
C;this._vertexDimension=this._coordinatePtr=0}var h=k.prototype;h.createFeatureResult=function(){return new F};h.prepareFeatures=function(A){this._vertexDimension=2;A.hasZ&&this._vertexDimension++;A.hasM&&this._vertexDimension++};h.finishFeatureResult=function(A){if(A&&A.features&&A.hasZ&&this._options.sourceSpatialReference&&A.spatialReference&&!O.equals(A.spatialReference,this._options.sourceSpatialReference)&&!A.spatialReference.vcsWkid){var Q=b.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),
y=b.getMetersPerVerticalUnitForSR(A.spatialReference);Q/=y;if(1!==Q)for(const g of A.features)if(N.hasGeometry(g))for(A=g.geometry.coords,y=2;y<A.length;y+=3)A[y]*=Q}};h.addFeature=function(A,Q){A.features.push(Q)};h.createFeature=function(){return new N.OptimizedFeature};h.createSpatialReference=function(){return{wkid:0}};h.createGeometry=function(){return new r};h.addField=function(A,Q){A.fields.push(Q)};h.allocateCoordinates=function(A){A.coords.length=A.lengths.reduce((Q,y)=>Q+y,0)*this._vertexDimension;
this._coordinatePtr=0};h.addCoordinate=function(A,Q){A.coords[this._coordinatePtr++]=Q};h.addCoordinatePoint=function(A,Q){A.coords.push(Q)};h.addLength=function(A,Q){A.lengths.push(Q)};h.addQueryGeometry=function(A,Q){A.queryGeometry=Q.queryGeometry;A.queryGeometryType=Q.queryGeometryType};h.createPointGeometry=function(){return new r};return k}();c.OPTIMIZED_GEOMETRY_TYPES=C;c.OptimizedFeatureSetParserContext=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),
function(c,b,O,N,F,r,C,w,k,h){function A(n,u){if(u&&"extent"===n.type)return`${n.xmin},${n.ymin},${n.xmax},${n.ymax}`;if(u&&"point"===n.type)return`${n.x},${n.y}`;n=n.toJSON();delete n.spatialReference;return JSON.stringify(n)}function Q(n,u){const M=n.geometry,L=n.toJSON();delete L.compactGeometryEnabled;delete L.defaultSpatialReferenceEnabled;let U,S,B;N.isSome(M)&&(S=M.spatialReference,B=M.spatialReference.wkid||JSON.stringify(M.spatialReference),L.geometryType=r.getJsonType(M),L.geometry=A(M,
n.compactGeometryEnabled),L.inSR=B);L.groupByFieldsForStatistics&&(L.groupByFieldsForStatistics=L.groupByFieldsForStatistics.join(","));L.objectIds&&(L.objectIds=L.objectIds.join(","));L.orderByFields&&(L.orderByFields=L.orderByFields.join(","));!L.outFields||!L.returnDistinctValues&&(u?.returnCountOnly||u?.returnExtentOnly||u?.returnIdsOnly)?delete L.outFields:L.outFields.includes("*")?L.outFields="*":L.outFields=L.outFields.join(",");L.outSR?(L.outSR=L.outSR.wkid||JSON.stringify(L.outSR),U=n.outSpatialReference):
M&&(L.returnGeometry||L.returnCentroid)&&(L.outSR=L.inSR,U=S);L.returnGeometry&&delete L.returnGeometry;L.outStatistics&&(L.outStatistics=JSON.stringify(L.outStatistics));L.fullText&&(L.fullText=JSON.stringify(L.fullText));L.pixelSize&&(L.pixelSize=JSON.stringify(L.pixelSize));L.quantizationParameters&&(n.defaultSpatialReferenceEnabled&&N.isSome(S)&&N.isSome(n.quantizationParameters)&&N.isSome(n.quantizationParameters.extent)&&S.equals(n.quantizationParameters.extent.spatialReference)&&delete L.quantizationParameters.extent.spatialReference,
L.quantizationParameters=JSON.stringify(L.quantizationParameters));L.parameterValues&&(L.parameterValues=JSON.stringify(L.parameterValues));L.rangeValues&&(L.rangeValues=JSON.stringify(L.rangeValues));L.dynamicDataSource&&(L.layer=JSON.stringify({source:L.dynamicDataSource}),delete L.dynamicDataSource);if(L.timeExtent){const {start:z,end:q}=L.timeExtent;if(null!=z||null!=q)L.time=z===q?z:`${null==z?"null":z},${null==q?"null":q}`;delete L.timeExtent}n.defaultSpatialReferenceEnabled&&N.isSome(S)&&N.isSome(U)&&
S.equals(U)&&(L.defaultSR=L.inSR,delete L.inSR,delete L.outSR);return L}function y(){y=b._asyncToGenerator(function*(n,u,M,L){n=N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?{data:{features:[]}}:yield e(n,u,"json",L);h.applyFeatureSetZUnitScaling(u,M,n.data);return n});return y.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*(n,u,M,L){if(N.isSome(u.timeExtent)&&u.timeExtent.isEmpty)return{data:M.createFeatureResult()};n=yield x(n,u,L);n.data=k.parsePBFFeatureQuery(n.data,M);return n});
return g.apply(this,arguments)}function x(n,u,M){return e(n,u,"pbf",M)}function e(n,u,M,L={},U={}){const S="string"===typeof n?F.urlToObject(n):n;n=u.geometry?[u.geometry]:[];L.responseType="pbf"===M?"array-buffer":"json";return C.normalizeCentralMeridian(n,null,L).then(B=>{B=B&&B[0];N.isSome(B)&&(u=u.clone(),u.geometry=B);B=w.mapParameters({...S.query,f:M,...U,...Q(u,U)});return O(F.join(S.path,"query"),{...L,query:{...B,...L.query}})})}c.encodeGeometry=A;c.executeQuery=function(n,u,M,L){return y.apply(this,
arguments)};c.executeQueryForCount=function(n,u,M){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):e(n,u,"json",M,{returnIdsOnly:!0,returnCountOnly:!0})};c.executeQueryForExtent=function(n,u,M){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):e(n,u,"json",M,{returnExtentOnly:!0,returnCountOnly:!0}).then(L=>{const U=L.data;if(U.hasOwnProperty("extent"))return L;if(U.features)throw Error("Layer does not support extent calculation.");
if(U.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return L})};c.executeQueryForIds=function(n,u,M){return N.isSome(u.timeExtent)&&u.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):e(n,u,"json",M,{returnIdsOnly:!0})};c.executeQueryPBF=function(n,u,M,L){return g.apply(this,arguments)};c.executeQueryPBFBuffer=x;c.queryToQueryStringParameters=Q;c.runQuery=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],
function(c){function b(O){const N={};for(const F in O){if("declaredClass"===F)continue;const r=O[F];if(null!=r&&"function"!==typeof r)if(Array.isArray(r)){N[F]=[];for(let C=0;C<r.length;C++)N[F][C]=b(r[C])}else"object"===typeof r?r.toJSON&&(N[F]=JSON.stringify(r)):N[F]=r}return N}c.mapParameters=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(c,b){c.parsePBFFeatureQuery=
function(O,N){var F=b.parseFeatureQuery(O,N);O=F.queryResult.featureResult;N=F.queryResult.queryGeometry;F=F.queryResult.queryGeometryType;if(O&&O.features&&O.features.length&&O.objectIdFieldName){const r=O.objectIdFieldName;for(const C of O.features)C.attributes&&(C.objectId=C.attributes[r])}O&&(O.queryGeometry=N,O.queryGeometryType=F);return O};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(c,b,O,N,F,r){function C(q){return q>=S.length?null:S[q]}function w(q,E,d){q=q.asUnsafe();for(d=E.createPointGeometry(d);q.next();)switch(q.tag()){case 3:var p=q.getUInt32();p=q.pos()+p;let D=0;for(;q.pos()<p;)E.addCoordinatePoint(d,q.getSInt64(),D++);break;default:q.skip()}return d}function k(q,E,d){q=q.asUnsafe();const p=E.createGeometry(d);for(d=2+(d.hasZ?1:0)+(d.hasM?1:0);q.next();)switch(q.tag()){case 2:var D=q.getUInt32();D=q.pos()+D;for(var I=0;q.pos()<D;)E.addLength(p,q.getUInt32(),
I++);break;case 3:D=q.getUInt32();D=q.pos()+D;I=0;for(E.allocateCoordinates(p);q.pos()<D;)E.addCoordinate(p,q.getSInt64(),I),I++,I===d&&(I=0);break;default:q.skip()}return p}function h(q){q=q.asUnsafe();const E=new F;let d="esriGeometryPoint";for(;q.next();)switch(q.tag()){case 2:var p=q.getUInt32();for(p=q.pos()+p;q.pos()<p;)E.lengths.push(q.getUInt32());break;case 3:p=q.getUInt32();for(p=q.pos()+p;q.pos()<p;)E.coords.push(q.getSInt64());break;case 1:d=r.OPTIMIZED_GEOMETRY_TYPES[q.getEnum()];break;
default:q.skip()}return{queryGeometry:E,queryGeometryType:d}}function A(q){for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:return q.getString();case 2:return q.getFloat();case 3:return q.getDouble();case 4:return q.getSInt32();case 5:return q.getUInt32();case 6:return q.getInt64();case 7:return q.getUInt64();case 8:return q.getSInt64();case 9:return q.getBool();default:return q.skip(),null}return null}function Q(q){q=q.asUnsafe();const E={type:C(0)};for(;q.next();)switch(q.tag()){case 1:E.name=
q.getString();break;case 2:E.type=C(q.getEnum());break;case 3:E.alias=q.getString();break;case 4:var d=q.getEnum();d=d>=B.length?null:B[d];E.sqlType=d;break;case 5:q.skip();break;case 6:E.defaultValue=q.getString();break;default:q.skip()}return E}function y(q){const E={};for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:E.name=q.getString();break;case 2:E.isSystemMaintained=q.getBool();break;default:q.skip()}return E}function g(q,E,d,p){const D=E.createFeature(d);let I=0;for(;q.next();)switch(q.tag()){case 1:const K=
p[I++].name;D.attributes[K]=q.processMessage(A);break;case 2:D.geometry=q.processMessageWithArgs(k,E,d);break;case 4:D.centroid=q.processMessageWithArgs(w,E,d);break;default:q.skip()}return D}function x(q){const E=[1,1,1,1];for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:E[0]=q.getDouble();break;case 2:E[1]=q.getDouble();break;case 4:E[2]=q.getDouble();break;case 3:E[3]=q.getDouble();break;default:q.skip()}return E}function e(q){const E=[0,0,0,0];for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:E[0]=
q.getDouble();break;case 2:E[1]=q.getDouble();break;case 4:E[2]=q.getDouble();break;case 3:E[3]=q.getDouble();break;default:q.skip()}return E}function n(q){const E={originPosition:0>=z.length?null:z[0]};for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:var d=q.getEnum();E.originPosition=d>=z.length?null:z[d];break;case 2:E.scale=q.processMessage(x);break;case 3:E.translate=q.processMessage(e);break;default:q.skip()}return E}function u(q){const E={};for(q=q.asUnsafe();q.next();)switch(q.tag()){case 1:E.shapeAreaFieldName=
q.getString();break;case 2:E.shapeLengthFieldName=q.getString();break;case 3:E.units=q.getString();break;default:q.skip()}return E}function M(q,E){for(E=E.createSpatialReference();q.next();)switch(q.tag()){case 1:E.wkid=q.getUInt32();break;case 5:E.wkt=q.getString();break;case 2:E.latestWkid=q.getUInt32();break;case 3:E.vcsWkid=q.getUInt32();break;case 4:E.latestVcsWkid=q.getUInt32();break;default:q.skip()}return E}function L(q,E){const d=E.createFeatureResult();q=q.asUnsafe();d.geometryType=0>=E.geometryTypes.length?
null:E.geometryTypes[0];let p=!1;for(;q.next();)switch(q.tag()){case 1:d.objectIdFieldName=q.getString();break;case 3:d.globalIdFieldName=q.getString();break;case 4:d.geohashFieldName=q.getString();break;case 5:d.geometryProperties=q.processMessage(u);break;case 7:var D=q.getEnum();d.geometryType=D>=E.geometryTypes.length?null:E.geometryTypes[D];break;case 8:d.spatialReference=q.processMessageWithArgs(M,E);break;case 10:d.hasZ=q.getBool();break;case 11:d.hasM=q.getBool();break;case 12:d.transform=
q.processMessage(n);break;case 9:D=q.getBool();d.exceededTransferLimit=D;break;case 13:E.addField(d,q.processMessage(Q));break;case 15:p||(E.prepareFeatures(d),p=!0);E.addFeature(d,q.processMessageWithArgs(g,E,d,d.fields));break;case 2:d.uniqueIdField=q.processMessage(y);break;default:q.skip()}E.finishFeatureResult(d);return d}function U(q,E){const d={};let p=null;for(;q.next();)switch(q.tag()){case 4:p=q.processMessageWithArgs(h);break;case 1:d.featureResult=q.processMessageWithArgs(L,E);break;default:q.skip()}O.isSome(p)&&
d.featureResult&&E.addQueryGeometry(d,p);return d}const S="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),B="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
z=["upperLeft","lowerLeft"];c.parseFeatureQuery=function(q,E){try{const d=new N(new Uint8Array(q),new DataView(q));for(q={};d.next();)switch(d.tag()){case 2:q.queryResult=d.processMessageWithArgs(U,E);break;default:d.skip()}return q}catch(d){throw new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:d});}};c.parseFieldType=C;c.parseTransform=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports",
"../../../core/maybe","../../../geometry/support/zscale"],function(c,b,O){c.applyFeatureSetZUnitScaling=function(N,F,r){if(r&&r.features&&r.hasZ&&(N=O.getGeometryZScaler(r.geometryType,F,N.outSpatialReference),!b.isNone(N)))for(const C of r.features)N(C.geometry)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/asyncUtils",
"../../../../../core/maybe","../../../../../geometry/support/aaBoundingRect"],function(c,b,O,N,F){let r=function(){function w(h,A){this.data=h;this.resolution=A;this.state={type:c.StateType.CREATED};this.alive=!0}var k=w.prototype;k.process=function(h){switch(this.state.type){case c.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,h),this.state.task.promise.then(h.resume,h.resume);case c.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,h),this.state.task.promise.then(h.resume,
h.resume);case c.StateType.FETCHED_FEATURES:this.state=this._goToDone(this.state,h)}return null};k._gotoFetchCount=function(h,A){var Q=this;return{type:c.StateType.FETCH_COUNT,previous:h,task:O.createTask(function(){var y=b._asyncToGenerator(function*(g){g=yield O.resultOrAbort(A.fetchCount(Q,g));Q.state.type===c.StateType.FETCH_COUNT&&(Q.state=Q._gotoFetchedCount(Q.state,g.ok?g.value:Infinity))});return function(g){return y.apply(this,arguments)}}())}};k._gotoFetchedCount=function(h,A){return{type:c.StateType.FETCHED_COUNT,
featureCount:A,previous:h}};k._gotoFetchFeatures=function(h,A){var Q=this;return{type:c.StateType.FETCH_FEATURES,previous:h,task:O.createTask(function(){var y=b._asyncToGenerator(function*(g){g=yield O.resultOrAbort(A.fetchFeatures(Q,h.featureCount,g));Q.state.type===c.StateType.FETCH_FEATURES&&(Q.state=Q._gotoFetchedFeatures(Q.state,g.ok?g.value:[]))});return function(g){return y.apply(this,arguments)}}())}};k._gotoFetchedFeatures=function(h,A){return{type:c.StateType.FETCHED_FEATURES,previous:h,
features:A}};k._goToDone=function(h,A){A.finish(this,h.features);return{type:c.StateType.DONE,previous:h}};k.reset=function(){const h=this.state;this.state={type:c.StateType.CREATED};switch(h.type){case c.StateType.FETCH_COUNT:case c.StateType.FETCH_FEATURES:h.task.abort()}};k.intersects=function(h){if(N.isNone(h)||!this.data.extent)return!0;F.fromExtent(h,C);return F.intersects(this.data.extent,C)};b._createClass(w,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this._featureCount,
state:this._stateToString}}},{key:"_featureCount",get:function(){switch(this.state.type){case c.StateType.CREATED:case c.StateType.FETCH_COUNT:return 0;case c.StateType.FETCHED_COUNT:return this.state.featureCount;case c.StateType.FETCH_FEATURES:return this.state.previous.featureCount;case c.StateType.FETCHED_FEATURES:return this.state.features.length;case c.StateType.DONE:return this.state.previous.features.length}}},{key:"_stateToString",get:function(){switch(this.state.type){case c.StateType.CREATED:return"created";
case c.StateType.FETCH_COUNT:return"fetch-count";case c.StateType.FETCHED_COUNT:return"fetched-count";case c.StateType.FETCH_FEATURES:return"fetch-features";case c.StateType.FETCHED_FEATURES:return"fetched-features";case c.StateType.DONE:return"done"}}}]);return w}();c.StateType=void 0;(function(w){w[w.CREATED=0]="CREATED";w[w.FETCH_COUNT=1]="FETCH_COUNT";w[w.FETCHED_COUNT=2]="FETCHED_COUNT";w[w.FETCH_FEATURES=3]="FETCH_FEATURES";w[w.FETCHED_FEATURES=4]="FETCHED_FEATURES";w[w.DONE=5]="DONE"})(c.StateType||
(c.StateType={}));const C=F.create();c.PendingFeatureTile=r;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../layers/support/TileKey ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(c,b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n){function u(z){return z.reduce((q,E)=>{var d=E.geometry;if(r.isNone(d))d=0;else{var p=F.estimateFixedArraySize(d.lengths,4);d=32+F.estimateFixedArraySize(d.coords,8)+p}E=32+d+F.estimateAttributesObjectSize(E.attributes);return q+E},0)}c.FeatureServiceTileStore=function(z){function q(d){d=z.call(this,d)||this;d.tileInfo=null;d.extent=null;d.maximumByteSize=10*F.ByteSizeUnit.MEGABYTES;d._tileBounds=new y.BoundsStore;d._tiles=new n.FeatureServiceTileCache;d._refCounts=
new Map;d._tileFeatureCounts=new Map;d._tmpBoundingRect=A.create();return d}b._inheritsLoose(q,z);var E=q.prototype;E.add=function(d,p){const D=[];for(const I of p)this._referenceFeature(I.objectId)===B.ADDED&&D.push(I);this._addTileStorage(d,new Set(p.map(I=>I.objectId)),u(p));this.featureStore.addMany(D);this._tiles.applyByteSizeLimit(this.maximumByteSize,I=>this._removeTileStorage(I))};E.destroy=function(){this.clear();this._tileFeatureCounts.clear()};E.clear=function(){this.featureStore.clear();
this._tileBounds.clear();this._tiles.clear();this._refCounts.clear()};E.refresh=function(){this.clear();this._tileFeatureCounts.clear()};E.processEdits=function(d,p,D){this._processEditsDelete(d.deletedFeatures.concat(d.updatedFeatures));return this._processEditsRefetch(d.addedFeatures.concat(d.updatedFeatures),p,D)};E._addTileStorage=function(d,p,D){const I=d.id;this._tiles.set(I,new M(d,p,D));this._tileBounds.set(I,d.extent);this._tileFeatureCounts.set(I,p.size)};E._remove=function({id:d}){(d=this._tiles.get(d))&&
this._removeTileStorage(d)};E._removeTileStorage=function(d){const p=[];for(const D of d.objectIds)this._unreferenceFeature(D)===B.REMOVED&&p.push(D);this.featureStore.removeManyById(p);d=d.data.id;this._tiles.delete(d);this._tileBounds.delete(d)};E._processEditsDelete=function(d){this.featureStore.removeManyById(d);for(const [,p]of this._tiles){for(const D of d)p.objectIds.delete(D);this._tileFeatureCounts.set(p.data.id,p.objectIds.size)}for(const p of d)this._refCounts.delete(p)};E._processEditsRefetch=
function(){var d=b._asyncToGenerator(function*(p,D,I){p=(yield D(p,I)).features;const {hasZ:K,hasM:P}=this.featureStore;for(const v of p)p=Q.getBoundsOptimizedGeometry(this._tmpBoundingRect,v.geometry,K,P),r.isNone(p)||this._tileBounds.forEachInBounds(p,G=>{G=this._tiles.get(G);this.featureStore.add(v);const X=v.objectId;G.objectIds.has(X)||(G.objectIds.add(X),this._referenceFeature(X),this._tileFeatureCounts.set(G.data.id,G.objectIds.size))})});return function(p,D,I){return d.apply(this,arguments)}}();
E.process=function(d,p=()=>!0){if(r.isNone(this.tileInfo)||!d.extent||r.isSome(this.extent)&&!A.intersects(A.fromExtent(this.extent,this._tmpBoundingRect),d.extent)||this._tiles.has(d.id))return new U(d);const D=this._createTileTree(d,this.tileInfo);this._simplify(D,p,null,0,1);return this._collectMissingTiles(d,D,this.tileInfo)};E.getFeatureCount=function(d){return this._tileFeatureCounts.get(d.id)??0};E.fetchCount=function(){var d=b._asyncToGenerator(function*(p,D,I,K){const P=this._tileFeatureCounts.get(p.id);
if(null!=P)return P;D=yield e.executeQueryForCount(D,I,K);this._tileFeatureCounts.set(p.id,D.data.count);return D.data.count});return function(p,D,I,K){return d.apply(this,arguments)}}();E._createTileTree=function(d,p){const D=new L(d.level,d.row,d.col);p.updateTileInfo(D,g.ExtrapolateOptions.POWER_OF_TWO);this._tileBounds.forEachInBounds(d.extent,I=>{(I=this._tiles.get(I)?.data)&&this._tilesAreRelated(d,I)&&this._populateChildren(D,I,p,this._tileFeatureCounts.get(I.id)||0)});return D};E._tilesAreRelated=
function(d,p){if(!d||!p)return!1;if(d.level===p.level)return d.row===p.row&&d.col===p.col;const D=d.level<p.level,I=D?d:p;d=D?p:d;p=1<<d.level-I.level;return Math.floor(d.row/p)===I.row&&Math.floor(d.col/p)===I.col};E._populateChildren=function(d,p,D,I){var K=p.level-d.level-1;if(0>K)d.isLeaf=!0;else{var P=p.row>>K,v=p.col>>K;K=(P-(d.row<<1)<<1)+(v-(d.col<<1));var G=d.children[K];r.isSome(G)?this._populateChildren(G,p,D,I):(P=new L(d.level+1,P,v),D.updateTileInfo(P,g.ExtrapolateOptions.POWER_OF_TWO),
d.children[K]=P,this._populateChildren(P,p,D,I))}};E._simplify=function(d,p,D,I,K){const P=K*K;if(d.isLeaf)return p(this.getFeatureCount(d),K)?0:(this._remove(d),r.isSome(D)&&(D.children[I]=null),P);K/=2;const v=K*K;let G=0;for(let X=0;X<d.children.length;X++){const ka=d.children[X];G+=r.isSome(ka)?this._simplify(ka,p,d,X,K):v}0===G?this._mergeChildren(d):.18751>1-G/P&&(this._purge(d),r.isSome(D)&&(D.children[I]=null),G=P);return G};E._mergeChildren=function(d){const p=new Set;let D=0;this._forEachLeaf(d,
I=>{const K=this._tiles.get(I.id);if(K){D+=K.byteSize;for(const P of K.objectIds)p.has(P)||(p.add(P),this._referenceFeature(P));this._remove(I)}});this._addTileStorage(d,p,D);d.isLeaf=!0;d.children[0]=d.children[1]=d.children[2]=d.children[3]=null;this._tileFeatureCounts.set(d.id,p.size)};E._forEachLeaf=function(d,p){for(const D of d.children)r.isNone(D)||(D.isLeaf?p(D):this._forEachLeaf(D,p))};E._purge=function(d){if(!r.isNone(d))if(d.isLeaf)this._remove(d);else for(let p=0;p<d.children.length;p++)this._purge(d.children[p]),
d.children[p]=null};E._collectMissingTiles=function(d,p,D){d=new S(D,d,this.extent);this._collectMissingTilesRecurse(p,d,1);return d.info};E._collectMissingTilesRecurse=function(d,p,D){if(!d.isLeaf)if(d.hasChildren){D/=2;for(let I=0;I<d.children.length;I++){const K=d.children[I];r.isNone(K)?p.addMissing(d.level+1,(d.row<<1)+((I&2)>>1),(d.col<<1)+(I&1),D):this._collectMissingTilesRecurse(K,p,D)}}else p.addMissing(d.level,d.row,d.col,D)};E._referenceFeature=function(d){const p=(this._refCounts.get(d)||
0)+1;this._refCounts.set(d,p);return 1===p?B.ADDED:B.UNCHANGED};E._unreferenceFeature=function(d){const p=(this._refCounts.get(d)||0)-1;if(0===p)return this._refCounts.delete(d),B.REMOVED;0<p&&this._refCounts.set(d,p);return B.UNCHANGED};b._createClass(q,[{key:"debugInfo",get:function(){return Array.from(this._tiles.values()).map(({data:d})=>({data:d,featureCount:this._tileFeatureCounts.get(d.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this._tiles.values()).map(d=>`${d.data.id}:[${Array.from(d.objectIds)}]`),
featureReferences:Array.from(this._refCounts.keys()).map(d=>`${d}:${this._refCounts.get(d)}`)}}}]);return q}(N);O.__decorate([C.property({constructOnly:!0})],c.FeatureServiceTileStore.prototype,"featureStore",void 0);O.__decorate([C.property()],c.FeatureServiceTileStore.prototype,"tileInfo",void 0);O.__decorate([C.property()],c.FeatureServiceTileStore.prototype,"extent",void 0);O.__decorate([C.property()],c.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);c.FeatureServiceTileStore=O.__decorate([h.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],
c.FeatureServiceTileStore);let M=function(z,q,E){this.data=z;this.objectIds=q;this.byteSize=E},L=function(){function z(q,E,d){this.level=q;this.row=E;this.col=d;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}b._createClass(z,[{key:"hasChildren",get:function(){return!this.isLeaf&&(r.isSome(this.children[0])||r.isSome(this.children[1])||r.isSome(this.children[2])||r.isSome(this.children[3]))}}]);return z}(),U=function(){function z(q,E=[]){this.missingTiles=E;this.coveredArea=this.fullArea=
0;this.coveredArea=this.fullArea=A.area(q.extent)}z.prototype.prepend=function(q){this.missingTiles=q.missingTiles.concat(this.missingTiles);this.coveredArea+=q.coveredArea;this.fullArea+=q.fullArea};return z}(),S=function(){function z(q,E,d){this._tileInfo=q;this._extent=null;this.info=new U(E);r.isSome(d)&&(this._extent=A.fromExtent(d))}z.prototype.addMissing=function(q,E,d,p){q=new x.TileKey(null,q,E,d);this._tileInfo.updateTileInfo(q,g.ExtrapolateOptions.POWER_OF_TWO);r.isNone(q.extent)||r.isSome(this._extent)&&
!A.intersects(this._extent,q.extent)||(this.info.missingTiles.push({data:q,resolution:p}),this.info.coveredArea-=A.area(q.extent))};return z}();var B;(function(z){z[z.ADDED=0]="ADDED";z[z.REMOVED=1]="REMOVED";z[z.UNCHANGED=2]="UNCHANGED"})(B||(B={}));c.ProcessResult=U;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(c){function b(F){return 32+F.length}function O(F){if(!F)return 0;if(Array.isArray(F)){var r=F.length;
if(0===r||"number"===typeof F[0])F=32+8*r;else{var C=32;for(let w=0;w<r;w++)C+=N(F[w]);F=C}return F}C=32;for(r in F)F.hasOwnProperty(r)&&(C+=N(F[r]));return C}function N(F){switch(typeof F){case "object":return O(F);case "string":return b(F);case "number":return 16;case "boolean":return 4;default:return 8}}c.ByteSizeUnit=void 0;(function(F){F[F.KILOBYTES=1024]="KILOBYTES";F[F.MEGABYTES=1048576]="MEGABYTES";F[F.GIGABYTES=1073741824]="GIGABYTES"})(c.ByteSizeUnit||(c.ByteSizeUnit={}));c.estimateAttributesObjectSize=
function(F){if(!F)return 0;let r=32;for(const C in F)if(F.hasOwnProperty(C)){const w=F[C];switch(typeof w){case "string":r+=b(w);break;case "number":r+=16;break;case "boolean":r+=4}}return r};c.estimateFixedArraySize=function(F,r){return 32+F.length*r};c.estimateNestedObjectSize=O;c.estimateNumberByteSize=function(F){return 16};c.estimateStringByteSize=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],
function(c){let b=function(O){function N(){this._store=new Map;this._byteSize=0}var F=N.prototype;F.set=function(r,C){this.delete(r);this._store.set(r,C);this._byteSize+=C.byteSize};F.delete=function(r){const C=this._store.get(r);return this._store.delete(r)?(null!=C&&(this._byteSize-=C.byteSize),!0):!1};F.get=function(r){this._used(r);return this._store.get(r)};F.has=function(r){this._used(r);return this._store.has(r)};F.clear=function(){this._store.clear()};F.applyByteSizeLimit=function(r,C){for(const [w,
k]of this._store){if(this._byteSize<=r)break;this.delete(w);C(k)}};F.values=function(){return this._store.values()};F[O]=function(){return this._store[Symbol.iterator]()};F._used=function(r){const C=this._store.get(r);C&&(this._store.delete(r),this._store.set(r,C))};return N}(Symbol.iterator);c.FeatureServiceTileCache=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/WatchUpdatingTracking ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../rest/support/Query ../../../../../symbols/support/ElevationInfo ../snappingCandidateElevationAlignment ../snappingCandidateElevationFilter ../symbologySnappingCandidates ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(c,
b,O,N,F,r,C,w,k,h,A,Q,y,g,x,e,n,u,M,L,U,S,B){O=function(q){function E(){var p=q.apply(this,arguments)||this;p._isInitializing=!0;p.remoteClient=null;p._whenSetup=r.createDeferred();p._elevationAligner=M.getSnappingCandidateElevationAligner();p._elevationFilter=L.getSnappingCandidateElevationFilter();p._symbologyCandidatesFetcher=U.getSymbologySnappingCandidatesFetcher();p._handles=new N;p._updatingHandles=new Q.WatchUpdatingTracking;p._editsUpdatingHandles=new Q.WatchUpdatingTracking;p._pendingApplyEdits=
new Map;p._alignPointsInFeatures=function(){var D=c._asyncToGenerator(function*(I,K){I=yield p.remoteClient.invoke("alignElevation",{points:I},{signal:K});r.throwIfAborted(K);return I});return function(I,K){return D.apply(this,arguments)}}();p._getSymbologyCandidates=function(){var D=c._asyncToGenerator(function*(I,K){I={candidates:I,spatialReference:p._spatialReference.toJSON()};I=yield p.remoteClient.invoke("getSymbologyCandidates",I,{signal:K});r.throwIfAborted(K);return I});return function(I,
K){return D.apply(this,arguments)}}();return p}c._inheritsLoose(E,q);var d=E.prototype;d.destroy=function(){this._featureFetcher?.destroy();this._queryEngine?.destroy();this._featureStore?.clear();this._handles?.destroy()};d.setup=function(){var p=c._asyncToGenerator(function*(D){if(this.destroyed)return{result:{}};const {geometryType:I,objectIdField:K,timeInfo:P,fields:v}=D.serviceInfo;var {hasZ:G}=D;const X=y.fromJSON(D.spatialReference);this._spatialReference=X;this._featureStore=new g({...D.serviceInfo,
hasZ:G,hasM:!1});this._queryEngine=new x.QueryEngine({spatialReference:D.spatialReference,featureStore:this._featureStore,geometryType:I,fields:v,hasZ:G,hasM:!1,objectIdField:K,timeInfo:P});this._featureFetcher=new S.FeatureServiceTiledFetcher({store:new B.FeatureServiceTileStore({featureStore:this._featureStore}),url:D.serviceInfo.url,objectIdField:D.serviceInfo.objectIdField,globalIdField:D.serviceInfo.globalIdField,capabilities:D.serviceInfo.capabilities,spatialReference:X,sourceSpatialReference:y.fromJSON(D.serviceInfo.spatialReference)});
G="3d"===D.configuration.viewType;this._elevationAligner=M.getSnappingCandidateElevationAligner(G,{elevationInfo:F.isSome(D.elevationInfo)?u.fromJSON(D.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:X});this._elevationFilter=L.getSnappingCandidateElevationFilter(G);this._handles.add([C.watch(()=>this._featureFetcher.availability,ka=>this.emit("notify-availability",{availability:ka}),C.sync),C.watch(()=>this.updating,()=>this._notifyUpdating())]);this._whenSetup.resolve();
this._isInitializing=!1;return this.configure(D.configuration)});return function(D){return p.apply(this,arguments)}}();d.configure=function(){var p=c._asyncToGenerator(function*(D){yield this._updatingHandles.addPromise(this._whenSetup.promise);this._updateFeatureFetcherConfiguration(D);return{result:{}}});return function(D){return p.apply(this,arguments)}}();d.fetchCandidates=function(){var p=c._asyncToGenerator(function*(D,I){yield this._whenSetup.promise;r.throwIfAborted(I);D={point:D.point,mode:D.mode,
distance:D.distance,types:D.types,query:F.isSome(D.filter)?D.filter:{where:"1\x3d1"}};I=F.isSome(I)?I.signal:null;var K=yield this._queryEngine.executeQueryForSnapping(D,I);r.throwIfAborted(I);K=yield this._elevationAligner.alignCandidates(K.candidates,I);r.throwIfAborted(I);const P=yield this._symbologyCandidatesFetcher.fetch(K,I);r.throwIfAborted(I);I=0===P.length?K:K.concat(P);return{result:{candidates:this._elevationFilter.filter(D,I)}}});return function(D,I){return p.apply(this,arguments)}}();
d.updateTiles=function(){var p=c._asyncToGenerator(function*(D,I){yield this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(I);this._featureFetcher.tileSize=D.tileSize;this._featureFetcher.tilesOfInterest=D.tiles;this._featureFetcher.tileInfo=F.isSome(D.tileInfo)?e.fromJSON(D.tileInfo):null;return z});return function(D,I){return p.apply(this,arguments)}}();d.refresh=function(){var p=c._asyncToGenerator(function*(D,I){yield this._updatingHandles.addPromise(this._whenSetup.promise);
r.throwIfAborted(I);this._featureFetcher.refresh();return z});return function(D,I){return p.apply(this,arguments)}}();d.whenNotUpdating=function(){var p=c._asyncToGenerator(function*(D,I){yield this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(I);yield C.whenOnce(()=>!this.updatingExcludingEdits,I);r.throwIfAborted(I);return z});return function(D,I){return p.apply(this,arguments)}}();d.getDebugInfo=function(){var p=c._asyncToGenerator(function*(D,I){r.throwIfAborted(I);return{result:this._featureFetcher.debugInfo}});
return function(D,I){return p.apply(this,arguments)}}();d.beginApplyEdits=function(){var p=c._asyncToGenerator(function*(D,I){this._updatingHandles.addPromise(this._whenSetup.promise);r.throwIfAborted(I);I=r.createDeferred();this._pendingApplyEdits.set(D.id,I);this._featureFetcher.applyEdits(I.promise);this._editsUpdatingHandles.addPromise(I.promise);return z});return function(D,I){return p.apply(this,arguments)}}();d.endApplyEdits=function(){var p=c._asyncToGenerator(function*(D,I){const K=this._pendingApplyEdits.get(D.id);
K&&K.resolve(D.edits);r.throwIfAborted(I);return z});return function(D,I){return p.apply(this,arguments)}}();d.notifyElevationSourceChange=function(){var p=c._asyncToGenerator(function*(D,I){this._elevationAligner.notifyElevationSourceChange();return z});return function(D,I){return p.apply(this,arguments)}}();d.notifySymbologyChange=function(){var p=c._asyncToGenerator(function*(D,I){this._symbologyCandidatesFetcher.notifySymbologyChange();return z});return function(D,I){return p.apply(this,arguments)}}();
d.setSymbologySnappingSupported=function(){var p=c._asyncToGenerator(function*(D){this._symbologyCandidatesFetcher=U.getSymbologySnappingCandidatesFetcher(D,this._getSymbologyCandidates);return z});return function(D){return p.apply(this,arguments)}}();d._updateFeatureFetcherConfiguration=function(p){this._featureFetcher.filter=F.isSome(p.filter)?n.fromJSON(p.filter):null;this._featureFetcher.customParameters=p.customParameters};d._notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};
c._createClass(E,[{key:"updating",get:function(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}},{key:"updatingExcludingEdits",get:function(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}}]);return E}(O.EventedAccessor);b.__decorate([w.property({readOnly:!0})],O.prototype,"updating",null);b.__decorate([w.property({readOnly:!0})],O.prototype,"updatingExcludingEdits",null);b.__decorate([w.property()],
O.prototype,"_isInitializing",void 0);O=b.__decorate([A.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],O);const z={result:{}};return O});