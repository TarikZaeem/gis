// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/3d/interactive/editingTools/draw/DrawGraphicTool3D":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../support/elevationInfoUtils ../../../../../symbols/support/ElevationInfo ../../SegmentLabels3D ../../SnappingVisualizer3D ../settings ../../visualElements/ExtendedLineVisualElement ../../visualElements/OutlineVisualElement ../../visualElements/VerticesVisualElement ../../../layers/graphics/elevationAlignmentUtils ../../../layers/graphics/ElevationContext ../../../layers/graphics/GraphicState ../../../webgl-engine/lib/Material ../../../../draw/DrawGraphicTool ../../../../draw/DrawOperation ../../../../draw/drawSurfaces".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da){r.DrawGraphicTool3D=function(K){function Y(ea){ea=K.call(this,ea)||this;ea._activeVertexVisualElement=null;ea._createGraphicState=null;ea._outlineVisualElement=null;ea._verticesVisualElement=null;ea._verticalLineVisualElement=null;ea.geometryType=null;ea.type="draw-3d";return ea}V._inheritsLoose(Y,K);var S=Y.prototype;S.initialize=function(){const {mode:ea,offset:ja}=this.elevationInfo;this.internalGraphicsLayer.elevationInfo=new U({mode:ea,
offset:ja})};S.normalizeCtorArgs=function(ea){return ea.elevationInfo?ea:{...ea,elevationInfo:J.getEffectiveElevationInfo(ea.hasZ??!0)}};S.initializeGraphic=function(ea){const ja=this._createGraphicState=new T.GraphicState({graphic:ea});return N.handlesGroup([this.view.maskOccludee(ea),this.view.trackGraphicState(ja),P.watch(()=>({element:this._outlineVisualElement,isDraped:ja.isDraped}),({element:oa,isDraped:qa})=>{A.applySome(oa,ua=>ua.isDraped=qa)},P.initial)])};S.makeDrawOperation=function(){const {geometryType:ea}=
this,ja="circle"!==ea&&"rectangle"!==ea;return new ha.DrawOperation({view:this.view,manipulators:this.manipulators,geometryType:ca.geometryTypeToDrawOperationGeometryType(ea),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new da.SceneDrawSurface(this.view,this.elevationInfo,[this.internalGraphicsLayer]),elevationDrawSurface:new da.ElevationDrawSurface(this.elevationInfo,this.defaultZ,this.view,this.internalGraphicsLayer),hasM:!1,elevationInfo:this.elevationInfo,
snappingManager:this.snappingManager,snappingVisualizer:new Q.SnappingVisualizer3D,segmentLabels:ja?new M.SegmentLabels3D:null,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions,isDraped:A.isSome(this._createGraphicState)?this._createGraphicState.isDraped:"on-the-ground"===J.getEffectiveElevationMode(this.hasZ,this.elevationInfo)})};S.onActiveVertexChanged=function(ea){const {view:ja}=this;if(A.isSome(this._activeVertexVisualElement))return this._activeVertexVisualElement.vertices=
[ea],this._updateVerticalLineVisualElement(ea),null;this._activeVertexVisualElement=new y.VerticesVisualElement({view:ja,spatialReference:ja.spatialReference,vertices:[ea],elevationInfo:this.internalGraphicsLayer.elevationInfo,renderOccluded:C.settings.reshapeManipulators.vertex.renderOccluded,attached:!1});this._activeVertexVisualElement.color=C.settings.colorToVec4(C.settings.reshapeManipulators.selected.color);this._activeVertexVisualElement.attached=!0;this._verticalLineVisualElement=new E.ExtendedLineVisualElement({view:ja,
extensionType:C.settings.visualElements.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:ia.RenderOccludedFlag.OccludeAndTransparent});C.settings.visualElements.zVerticalLine.apply(this._verticalLineVisualElement);return N.makeHandle(()=>{this._activeVertexVisualElement=A.destroyMaybe(this._activeVertexVisualElement);this._verticalLineVisualElement=A.destroyMaybe(this._verticalLineVisualElement)})};S._updateVerticalLineVisualElement=function(ea){const ja=this._verticalLineVisualElement;
if(!A.isNone(ja)){var {renderCoordsHelper:oa,elevationProvider:qa}=this.view;I.set(O,ea[0],ea[1],ea[2]);X.setFromElevationInfo(this.elevationInfo);O[2]=G.evaluateElevationAlignmentAtPoint(O,qa,X,oa);oa.toRenderCoords(O,this.view.spatialReference,O)?(ja.setStartEndFromWorldDownAtLocation(O),ja.attached=!0):ja.attached=!1}};S.onOutlineChanged=function(ea){if(A.isSome(this._outlineVisualElement))return this._outlineVisualElement.geometry=ea,null;const ja=this.internalGraphicsLayer.elevationInfo;this._outlineVisualElement=
new L.OutlineVisualElement({view:this.view,geometry:ea,elevationInfo:ja,isDraped:A.isSome(this._createGraphicState)?this._createGraphicState.isDraped:"on-the-ground"===J.getEffectiveElevationMode(this.hasZ,ja),attached:!1});C.settings.visualElements.lineGraphics.outline.apply(this._outlineVisualElement);C.settings.visualElements.lineGraphics.shadowStyle.apply(this._outlineVisualElement);this._outlineVisualElement.attached=!0;this._outlineVisualElement.laserlineEnabled=!0;return N.makeHandle(()=>{this._outlineVisualElement=
A.destroyMaybe(this._outlineVisualElement)})};S.onRegularVerticesChanged=function(ea){if(A.isSome(this._verticesVisualElement))return this._verticesVisualElement.vertices=ea,null;this._verticesVisualElement=new y.VerticesVisualElement({view:this.view,spatialReference:this.view.spatialReference,vertices:ea,elevationInfo:this.internalGraphicsLayer.elevationInfo,renderOccluded:C.settings.reshapeManipulators.vertex.renderOccluded,attached:!1});this._verticesVisualElement.attached=!0;return N.makeHandle(()=>
{this._verticesVisualElement=A.destroyMaybe(this._verticesVisualElement)})};return Y}(ca.DrawGraphicTool);w.__decorate([B.property({constructOnly:!0})],r.DrawGraphicTool3D.prototype,"elevationInfo",void 0);w.__decorate([B.property({constructOnly:!0})],r.DrawGraphicTool3D.prototype,"geometryType",void 0);w.__decorate([B.property()],r.DrawGraphicTool3D.prototype,"type",void 0);w.__decorate([B.property({constructOnly:!0})],r.DrawGraphicTool3D.prototype,"view",void 0);r.DrawGraphicTool3D=w.__decorate([H.subclass("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")],
r.DrawGraphicTool3D);const X=new Z.ElevationContext,O=D.create();Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/SegmentLabels3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/screenUtils ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../interactive/SegmentLabels ../../interactive/support/viewUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){r.SegmentLabels3D=function(M){function Q(){return M.apply(this,arguments)||this}V._inheritsLoose(Q,M);var C=Q.prototype;C.getCameraOrExtent=function({view:E}){return E.state.camera};C.toScreenPointArray=function({view:E,elevationInfo:L,editGeometryOperations:y},G,Z=N.createScreenPointArray()){({spatialReference:y}=y.data.coordinateHelper);J.vectorToRender(G,y,L,E,U);E.state.camera.projectToScreen(U,Z);return Z};return Q}(D.SegmentLabels);r.SegmentLabels3D=w.__decorate([H.subclass("esri.views.3d.interactive.SegmentLabels3D")],
r.SegmentLabels3D);const U=I.create();Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/SegmentLabels":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/quantityFormatUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../geometry/support/coordsUtils ../../intl/messages ../../support/elevationInfoUtils ../../support/getDefaultUnitForView ../overlay/TextOverlayItem ../support/automaticLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia){const ca={default:15,far:25};r.SegmentLabels=function(K){function Y(ea){ea=K.call(this,ea)||this;ea.context=null;ea.stagedVertex=null;ea.visible=!0;ea.edgeDistance="default";ea._messagesUnits=null;ea._labelInfos=[];ea._nextLabelIndex=0;return ea}V._inheritsLoose(Y,K);var S=Y.prototype;S.initialize=function(){var ea=this;const ja=A.createTask(function(){var qa=V._asyncToGenerator(function*(ua){const va=yield y.fetchMessageBundle("esri/core/t9n/Units");
u.throwIfAborted(ua);ea._messagesUnits=va});return function(ua){return qa.apply(this,arguments)}}()),oa=()=>B.applySome(this.context,qa=>qa.editGeometryOperations);this.addHandles([H.watch(()=>[B.isSome(this.context)&&this.getCameraOrExtent(this.context),this.visible,this._edgeDistancePixels,this.stagedVertex,this._messagesUnits],()=>this._update()),...["vertex-add","vertex-update","vertex-remove"].map(qa=>H.on(oa,qa,()=>this._update())),P.makeHandle(()=>ja.abort())])};S.destroy=function(){for(this._nextLabelIndex=
0;this._labelInfos.length;)this._destroyLabel(this._labelInfos.pop())};S._update=function(){this._nextLabelIndex=0;const ea=this.context;if(!B.isNone(ea)){var {components:ja,geometry:oa,coordinateHelper:qa}=ea.editGeometryOperations.data;if(oa){var ua=ja.length;for(let Ta=0;Ta<ua;++Ta){const Ma=[];ja[Ta].iterateVertices(Za=>{Ma.push(qa.toXYZ(Za.pos))});0===Ta&&B.isSome(this.stagedVertex)&&Ma.push(qa.toXYZ(this.stagedVertex));if(2>Ma.length)continue;var va=Ma[0],Ja=Ma[Ma.length-1];"polygon"===oa.type&&
2<Ma.length&&!E.equals(va,Ja)&&Ma.push(va);Ja=1===ua?!L.isClockwise(Ma,!1,!1):!1;let Ua=X,Oa=O;this.toScreenPointArray(ea,va,Ua);for(va=1;va<Ma.length;++va){const Za=Ma[va-1],Ra=Ma[va];this.toScreenPointArray(ea,Ra,Oa);this._addLabel(ea,Za,Ua,Ra,Oa,Ja);[Ua,Oa]=[Oa,Ua]}}}}this._destroyUnusedLabels()};S._addLabel=function(ea,ja,oa,qa,ua,va){const {label:Ja}=this._getOrCreateLabel(ea);if(!this.visible||3025>Q.squaredDistance(oa,ua))Ja.visible=!1;else{var Ta=B.isSome(ea.graphicState)?ea.graphicState.isDraped?
"on-the-ground":"absolute-height":G.getGeometryEffectiveElevationMode(ea.editGeometryOperations.data.geometry,ea.elevationInfo),{spatialReference:Ma}=ea.editGeometryOperations.data;ja=ia.autoDirectDistanceByElevationMode(ja,qa,Ma,Ta);qa=this._messagesUnits;ea=Z.getDefaultUnitForView(ea.view);Ja.text=B.isSome(qa)&&B.isSome(ja)?x.formatLength(qa,ja,ea):"";Ja.visible=!0;ea=ua[0]-oa[0];ja=ua[1]-oa[1];va?Q.set(ha,-ja,ea):Q.set(ha,ja,-ea);Q.normalize(ha,ha);Q.scale(ha,ha,this._edgeDistancePixels);Q.lerp(da,
oa,ua,.5);Q.add(da,da,ha);Ja.position=[da[0],da[1]];Ja.anchor=Math.abs(ha[0])>Math.abs(ha[1])?0<ha[0]?"left":"right":0>-ha[1]?"top":"bottom"}};S._getOrCreateLabel=function(ea){if(this._labelInfos.length>this._nextLabelIndex)return this._labelInfos[this._nextLabelIndex++];const ja=new T({fontSize:10,anchor:"center"});ea.view.overlay?.items.add(ja);ea={label:ja};this._labelInfos.push(ea);this._nextLabelIndex=this._labelInfos.length;return ea};S._destroyUnusedLabels=function(){for(;this._labelInfos.length>
this._nextLabelIndex;)this._destroyLabel(this._labelInfos.pop())};S._destroyLabel=function({label:ea}){B.applySome(this.context,ja=>ja.view.overlay?.items.remove(ea));ea.destroy()};V._createClass(Y,[{key:"updating",get:function(){return B.isNone(this._messagesUnits)}},{key:"test",get:function(){return{labelContents:this._labelInfos.slice(0,this._nextLabelIndex).map(ea=>ea.label.text)}}},{key:"_edgeDistancePixels",get:function(){return ca[this.edgeDistance]}}]);return Y}(N);w.__decorate([D.property()],
r.SegmentLabels.prototype,"context",void 0);w.__decorate([D.property()],r.SegmentLabels.prototype,"stagedVertex",void 0);w.__decorate([D.property()],r.SegmentLabels.prototype,"visible",void 0);w.__decorate([D.property()],r.SegmentLabels.prototype,"edgeDistance",void 0);w.__decorate([D.property()],r.SegmentLabels.prototype,"updating",null);w.__decorate([D.property()],r.SegmentLabels.prototype,"_messagesUnits",void 0);w.__decorate([D.property()],r.SegmentLabels.prototype,"_edgeDistancePixels",null);
r.SegmentLabels=w.__decorate([M.subclass("esri.views.interactive")],r.SegmentLabels);const ha=C.create(),da=C.create(),X=I.createScreenPointArray(),O=I.createScreenPointArray();Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/quantityFormatUtils":function(){define(["exports","./maybe","./quantityUtils","./unitFormatUtils"],function(r,V,w,N){function A(C,E,L,y=2,G="abbr"){return N.formatDecimal(C,w.toUnit(E,L).value,L,y,G)}function P(C,E,L,y=2,G="abbr"){return N.formatRelativeDecimal(C,
w.toUnit(E,L).value,L,y,G)}function B(C,E,L=2,y="abbr"){return N.formatMetricLength(C,E.value,E.unit,L,y)}function u(C,E,L=2,y="abbr"){return N.formatMetricRelativeLength(C,E.value,E.unit,L,y)}function x(C,E,L=2,y="abbr"){return N.formatMetricVerticalLength(C,E.value,E.unit,L,y)}function H(C,E,L=2,y="abbr"){return N.formatMetricRelativeVerticalLength(C,E.value,E.unit,L,y)}function I(C,E,L=2,y="abbr"){return N.formatMetricArea(C,E.value,E.unit,L,y)}function D(C,E,L=2,y="abbr"){return N.formatImperialLength(C,
E.value,E.unit,L,y)}function J(C,E,L=2,y="abbr"){return N.formatImperialRelativeLength(C,E.value,E.unit,L,y)}function U(C,E,L=2,y="abbr"){return N.formatImperialVerticalLength(C,E.value,E.unit,L,y)}function M(C,E,L=2,y="abbr"){return N.formatImperialRelativeVerticalLength(C,E.value,E.unit,L,y)}function Q(C,E,L=2,y="abbr"){return N.formatImperialArea(C,E.value,E.unit,L,y)}r.formatAngle=function(C,E,L){return N.formatAngleDegrees(C.value,C.unit,C.rotationType,E,L)};r.formatArea=function(C,E,L,y=2,G=
"abbr"){switch(L){case "imperial":return Q(C,E,y,G);case "metric":return I(C,E,y,G);default:return A(C,E,L,y,G)}};r.formatDMS=function(C){return N.formatDMS(C.value,C.unit)};r.formatDecimal=A;r.formatImperialArea=Q;r.formatImperialLength=D;r.formatImperialRelativeLength=J;r.formatImperialRelativeVerticalLength=M;r.formatImperialVerticalLength=U;r.formatLength=function(C,E,L,y,G="abbr"){y=V.unwrapOr(y,2);switch(L){case "imperial":return D(C,E,y,G);case "metric":return B(C,E,y,G);default:return A(C,
E,L,y,G)}};r.formatMetricArea=I;r.formatMetricLength=B;r.formatMetricRelativeLength=u;r.formatMetricRelativeVerticalLength=H;r.formatMetricVerticalLength=x;r.formatRelativeAngle=function(C,E,L){return N.formatRelativeAngleDegrees(C.value,C.unit,C.rotationType,E,L)};r.formatRelativeDecimal=P;r.formatRelativeLength=function(C,E,L,y=2,G="abbr"){switch(L){case "imperial":return J(C,E,y,G);case "metric":return u(C,E,y,G);default:return P(C,E,L,y,G)}};r.formatRelativeVerticalLength=function(C,E,L,y=2,G=
"abbr"){switch(L){case "imperial":return M(C,E,y,G);case "metric":return H(C,E,y,G);default:return P(C,E,L,y,G)}};r.formatVerticalLength=function(C,E,L,y=2,G="abbr"){switch(L){case "imperial":return U(C,E,y,G);case "metric":return x(C,E,y,G);default:return A(C,E,L,y,G)}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/quantityUtils":function(){define(["exports","./maybe","./unitUtils"],function(r,V,w){function N(D,J){return{type:w.unitType(J),value:D,unit:J}}function A(D,
J){return{type:w.unitType(J),value:D,unit:J}}function P(D,J){return{type:w.unitType(J),value:D,unit:J}}function B(D,J,U="arithmetic"){return{type:w.unitType(J),value:D,unit:J,rotationType:U}}function u(D,J){return N(w.convertUnit(D.value,D.unit,J),J)}const x=A(0,"meters"),H=P(0,"square-meters"),I=B(0,"radians");r.createAngle=B;r.createArea=P;r.createLength=A;r.createQuantity=N;r.createVolume=function(D,J){return{type:w.unitType(J),value:D,unit:J}};r.isBaseUnit=function(D){return w.isBaseUnit(D.unit)};
r.max=function(D,J){return V.isNone(D)?J:V.isNone(J)?D:D.value>w.convertUnit(J.value,J.unit,D.unit)?D:J};r.min=function(D,J){return V.isNone(D)?J:V.isNone(J)?D:D.value<w.convertUnit(J.value,J.unit,D.unit)?D:J};r.scale=function(D,J){return V.isNone(D)?null:{...D,value:D.value*J}};r.toBaseUnit=function(D){return u(D,w.baseUnitForUnit(D.unit))};r.toUnit=u;r.zeroMeters=x;r.zeroRadians=I;r.zeroSquareMeters=H;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/support/getDefaultUnitForView":function(){define(["exports",
"../core/maybe","../core/unitUtils","../portal/Portal"],function(r,V,w,N){r.getDefaultUnitForView=function(A){if(V.isNone(A))return"metric";var P=A.map;P=(P&&"portalItem"in P?P.portalItem?.portal:null)??N.getDefault();switch(P.user?.units??P.units){case "metric":return"metric";case "english":return"imperial"}return V.unwrapOr(w.getDefaultUnitSystem(A.spatialReference),"metric")};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/TextOverlayItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/h ../../libs/maquette/projector".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){const D={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};N=function(M){function Q(E){E=
M.call(this,E)||this;E.x=0;E.y=0;E.text="-";E.fontSize=14;E.anchor="center";E.visible=!0;E.backgroundColor=new w([0,0,0,.6]);E.textColor=new w([255,255,255]);E._textShadowSize=1;return E}r._inheritsLoose(Q,M);var C=Q.prototype;C.render=function(){return H.h("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),
color:this.textColor.toCss(!0),padding:this._padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])};C.renderCanvas=function(E){if(this.visible){var L=E.font.replace(/^(.*?)px/,"");E.font=`${this.fontSize}px ${L}`;var y=this._padding,G=this._borderRadius,Z=E.measureText(this.text).width,T=this.fontSize;L=J[this.anchor];E.textAlign="center";E.textBaseline="middle";Z+=2*y;y=T+2*y;this._roundedRect(E,this.x+L.x*Z,this.y+L.y*y,Z,y,G);E.fillStyle=this.backgroundColor.toCss(!0);
E.fill();G=this.x+(L.x+.5)*Z;L=this.y+(L.y+.5)*y;this._renderTextShadow(E,this.text,G,L);E.fillStyle=this.textColor.toCss(!0);E.fillText(this.text,G,L)}};C._renderTextShadow=function(E,L,y,G){E.lineJoin="miter";E.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/U.length})`;const Z=this._textShadowSize;for(const [T,ia]of U)E.fillText(L,y+Z*T,G+Z*ia)};C._roundedRect=function(E,L,y,G,Z,T){E.beginPath();E.moveTo(L,y+T);E.arcTo(L,y,L+T,y,T);E.lineTo(L+
G-T,y);E.arcTo(L+G,y,L+G,y+T,T);E.lineTo(L+G,y+Z-T);E.arcTo(L+G,y+Z,L+G-T,y+Z,T);E.lineTo(L+T,y+Z);E.arcTo(L,y+Z,L,y+Z-T,T);E.closePath()};C._cssClasses=function(){const E={"esri-text-overlay-item":!0};for(const L in D)E[D[L]]=this.anchor===L;return E};r._createClass(Q,[{key:"position",get:function(){return[this.x,this.y]},set:function(E){this._set("x",E[0]);this._set("y",E[1])}},{key:"_textShadowColor",get:function(){return this.backgroundColor}},{key:"_textShadow",get:function(){const E=this._textShadowColor.toCss(!1);
return`0 0 ${this._textShadowSize}px ${E}`}},{key:"_padding",get:function(){return.5*this.fontSize}},{key:"_borderRadius",get:function(){return this._padding}}]);return Q}(N);V.__decorate([A.property()],N.prototype,"x",void 0);V.__decorate([A.property()],N.prototype,"y",void 0);V.__decorate([A.property()],N.prototype,"position",null);V.__decorate([A.property()],N.prototype,"text",void 0);V.__decorate([A.property()],N.prototype,"fontSize",void 0);V.__decorate([A.property()],N.prototype,"anchor",void 0);
V.__decorate([A.property()],N.prototype,"visible",void 0);V.__decorate([A.property()],N.prototype,"backgroundColor",void 0);V.__decorate([A.property()],N.prototype,"textColor",void 0);V.__decorate([A.property()],N.prototype,"_textShadowSize",void 0);V.__decorate([A.property()],N.prototype,"_textShadowColor",null);V.__decorate([A.property()],N.prototype,"_textShadow",null);V.__decorate([A.property()],N.prototype,"_padding",null);V.__decorate([A.property()],N.prototype,"_borderRadius",null);N=V.__decorate([u.subclass("esri.views.overlay.TextOverlayItem")],
N);const J={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,
y:0,textAlign:"right",textBaseline:"top"}},U=[];for(V=0;360>V;V+=22.5)U.push([Math.cos(Math.PI*V/180),Math.sin(Math.PI*V/180)]);return N})},"esri/libs/maquette/h":function(){define(["exports"],function(r){let V=(w,N,A)=>{for(let P=0,B=N.length;P<B;P++){let u=N[P];Array.isArray(u)?V(w,u,A):null!==u&&void 0!==u&&!1!==u&&("string"===typeof u&&(u={vnodeSelector:"",properties:void 0,children:void 0,text:u.toString(),domNode:null}),A.push(u))}};r.h=function(w,N,A){if(Array.isArray(N))A=N,N=void 0;else if(N&&
("string"===typeof N||N.hasOwnProperty("vnodeSelector"))||A&&("string"===typeof A||A.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");let P,B;A&&1===A.length&&"string"===typeof A[0]?P=A[0]:A&&(B=[],V(w,A,B),0===B.length&&(B=void 0));return{vnodeSelector:w,properties:N,children:B,text:""===P?void 0:P,domNode:null}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/automaticLengthMeasurementUtils":function(){define(["exports","../../core/maybe",
"./euclideanLengthMeasurementUtils","./geodesicLengthMeasurementUtils"],function(r,V,w,N){function A(P,B,u,x,...H){return"on-the-ground"===x?(P=B.apply(void 0,H),V.isSome(P)?P:u.apply(void 0,H)):P.apply(void 0,H)}r.autoDirectDistanceByElevationMode=function(P,B,u,x){return A(w.euclideanDirectDistance,N.geodesicDistance,w.euclideanHorizontalDistance,x,P,B,u)};r.autoDirectDistanceByElevationModeBetweenPoints=function(P,B,u){return A(w.euclideanDirectDistanceBetweenPoints,N.geodesicDistanceBetweenPoints,
w.euclideanHorizontalDistanceBetweenPoints,u,P,B)};r.autoDistanceBetweenPoints2D=function(P,B){return A(w.euclideanHorizontalDistanceBetweenPoints,N.geodesicDistanceBetweenPoints,w.euclideanHorizontalDistanceBetweenPoints,"on-the-ground",P,B)};r.autoHorizontalDistanceByElevationMode=function(P,B,u,x){return A(w.euclideanHorizontalDistance,N.geodesicDistance,w.euclideanHorizontalDistance,x,P,B,u)};r.autoHorizontalDistanceByElevationModeBetweenPoints=function(P,B,u){return A(w.euclideanHorizontalDistanceBetweenPoints,
N.geodesicDistanceBetweenPoints,w.euclideanHorizontalDistanceBetweenPoints,u,P,B)};r.autoLength2D=function(P){return A(w.euclideanLength,N.geodesicLength,w.euclideanHorizontalLength,"on-the-ground",P)};r.autoLengthByElevationMode=function(P,B){return A(w.euclideanLength,N.geodesicLength,w.euclideanHorizontalLength,B,P)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/euclideanLengthMeasurementUtils":function(){define("exports ../../core/maybe ../../core/quantityUtils ../../core/unitUtils ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./measurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x){function H(T,ia){const {hasZ:ca,spatialReference:ha}=T;var da=x.computeEuclideanMeasurementSR(ha);let X=0;da=N.lengthUnitFromSpatialReference(da);if(V.isNone(da))return null;ia=ia===C.Direct?D:J;for(const K of T.paths)if(!(2>K.length)){T=K.length-1;for(let Y=0;Y<T;++Y){var O=K[Y];E[0]=O[0];E[1]=O[1];E[2]=ca?O[2]:0;O=K[Y+1];L[0]=O[0];L[1]=O[1];L[2]=ca?O[2]:0;O=ia(E,L,ha);if(V.isNone(O))return null;X+=O.value}}return w.createLength(X,da)}function I(T,ia,ca){T=Q(T,ia,ca);
return V.isSome(T)?{direct:w.createLength(T.direct,T.unit),horizontal:w.createLength(T.horizontal,T.unit),vertical:w.createLength(T.vertical,T.unit)}:null}function D(T,ia,ca){T=Q(T,ia,ca,C.Direct);return V.isSome(T)?w.createLength(T.direct,T.unit):null}function J(T,ia,ca){T=Q(T,ia,ca,C.Horizontal);return V.isSome(T)?w.createLength(T.horizontal,T.unit):null}function U(T,ia,ca){T=Q(T,ia,ca,C.Vertical);return V.isSome(T)?w.createLength(T.verticalSigned,T.unit):null}function M(T,ia){ia=N.verticalLengthUnitFromSpatialReference(ia);
return V.isSome(ia)?w.createLength(T[2],ia):null}function Q(T,ia,ca,ha){const da=x.computeEuclideanMeasurementSR(ca),X=N.lengthUnitFromSpatialReference(da);if(V.isNone(X))return null;const O=ia[2]-T[2];if(ha===C.Vertical)return{verticalSigned:O,unit:X};if(!B.projectVectorToVector(T,ca,y,da)||!B.projectVectorToVector(ia,ca,G,da))return null;if(ha===C.Direct)return{direct:A.distance(G,y),unit:X};A.set(Z,T[0],T[1],ia[2]);if(!B.projectVectorToVector(Z,ca,Z,da))return null;T=A.distance(Z,G);return ha===
C.Horizontal?{horizontal:T,unit:X}:{direct:A.distance(G,y),horizontal:T,vertical:Math.abs(O),unit:X}}var C;(function(T){T[T.Direct=0]="Direct";T[T.Horizontal=1]="Horizontal";T[T.Vertical=2]="Vertical"})(C||(C={}));const E=P.create(),L=P.create(),y=P.create(),G=P.create(),Z=P.create();r.elevation=M;r.elevationOfPoint=function(T){E[0]=T.x;E[1]=T.y;E[2]=T.hasZ?T.z:0;return M(E,T.spatialReference)};r.euclideanDirectDistance=D;r.euclideanDirectDistanceBetweenPoints=function(T,ia){const {spatialReference:ca}=
T;if(!u.equals(ca,ia.spatialReference))return null;E[0]=T.x;E[1]=T.y;E[2]=T.hasZ?T.z:0;L[0]=ia.x;L[1]=ia.y;L[2]=ia.hasZ?ia.z:0;return D(E,L,ca)};r.euclideanDistance=I;r.euclideanDistanceBetweenPoints=function(T,ia){const {spatialReference:ca}=T;if(!u.equals(ca,ia.spatialReference))return null;E[0]=T.x;E[1]=T.y;E[2]=T.hasZ?T.z:0;L[0]=ia.x;L[1]=ia.y;L[2]=ia.hasZ?ia.z:0;return I(E,L,ca)};r.euclideanHorizontalDistance=J;r.euclideanHorizontalDistanceBetweenPoints=function(T,ia){const {spatialReference:ca}=
T;if(!u.equals(ca,ia.spatialReference))return null;E[0]=T.x;E[1]=T.y;E[2]=T.hasZ?T.z:0;L[0]=ia.x;L[1]=ia.y;L[2]=ia.hasZ?ia.z:0;return J(E,L,ca)};r.euclideanHorizontalLength=function(T){return H(T,C.Horizontal)};r.euclideanLength=function(T){return H(T,C.Direct)};r.verticalDistance=function(T,ia,ca){T=Q(T,ia,ca,C.Vertical);return V.isSome(T)?w.createLength(Math.abs(T.verticalSigned),T.unit):null};r.verticalSignedDistance=U;r.verticalSignedDistanceBetweenPoints=function(T,ia){const {spatialReference:ca}=
T;if(!u.equals(ca,ia.spatialReference))return null;E[0]=T.x;E[1]=T.y;E[2]=T.hasZ?T.z:0;L[0]=ia.x;L[1]=ia.y;L[2]=ia.hasZ?ia.z:0;return U(E,L,ca)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/measurementUtils":function(){define(["exports","../../geometry/projection","../../geometry/spatialReferenceEllipsoidUtils"],function(r,V,w){r.computeEuclideanMeasurementSR=function(N){var A=w.getSphericalPCPF(N);A=A===w.SphericalECEFSpatialReference?w.WGS84ECEFSpatialReference:
A;return V.canProjectWithoutEngine(N,A)?A:N};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicLengthMeasurementUtils":function(){define("exports ../../core/quantityUtils ../../chunks/vec3f64 ../../geometry/geometryEngine ../../geometry/projection ../../geometry/support/geodesicUtils ../../geometry/support/spatialReferenceUtils ./geodesicMeasurementUtils".split(" "),function(r,V,w,N,A,P,B,u){function x(G,Z,T){return u.geodesicMeasure(T,H,I,D,G,Z,T)}function H(G,
Z,T){return V.createLength(P.inverseGeodeticSolver(Q,G,Z,T).distance,"meters")}function I(G,Z,T){return V.createLength(N.geodesicLength({type:"polyline",spatialReference:T,paths:[[[...G],[...Z]]]},"meters"),"meters")}function D(G,Z,T){return A.projectVectorToWGS84ComparableLonLat(G,T,L)&&A.projectVectorToWGS84ComparableLonLat(Z,T,y)?V.createLength(P.inverseGeodeticSolver(Q,L,y).distance,"meters"):null}function J(G){return V.createLength(P.geodesicLengths([G],"meters")[0],"meters")}function U(G){return V.createLength(N.geodesicLength(G,
"meters"),"meters")}function M(G){var Z=[];if(!A.projectPolylineToWGS84ComparableLonLat(G,Z))return null;G=0;for(const T of Z){Z=0;for(let ia=1;ia<T.length;++ia)Z+=P.inverseGeodeticSolver(Q,T[ia-1],T[ia]).distance;G+=Z}return V.createLength(G,"meters")}const Q=new P.InverseGeodeticSolverResult,C=w.create(),E=w.create(),L=w.create(),y=w.create();r.geodesicDistance=x;r.geodesicDistanceBetweenPoints=function(G,Z){if(!B.equals(G.spatialReference,Z.spatialReference))return null;const {spatialReference:T}=
G;C[0]=G.x;C[1]=G.y;C[2]=G.hasZ?G.z:0;E[0]=Z.x;E[1]=Z.y;E[2]=Z.hasZ?Z.z:0;return x(C,E,T)};r.geodesicLength=function(G){const {spatialReference:Z}=G;return u.geodesicMeasure(Z,J,U,M,G)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryEngine":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../chunks/geometryEngineBase","./geometryAdapters/hydrated"],function(r,V,w,N){function A(u){return Array.isArray(u)?u[0].spatialReference:u&&u.spatialReference}
function P(u){return"xmin"in u?"center"in u?u.center:null:"x"in u?u:"extent"in u?u.extent?.center??null:null}let B=function(u){function x(){return u.call(this,"Illegal Argument Exception")||this}V._inheritsLoose(x,u);return x}(V._wrapNativeSuper(Error));r.buffer=function(u,x,H,I=!1){return w.GeometryEngineApi.buffer(N.hydratedAdapter,A(u),u,x,H,I)};r.changeDefaultSpatialReferenceTolerance=function(u,x){w.GeometryEngineApi.changeDefaultSpatialReferenceTolerance(u,x)};r.clearDefaultSpatialReferenceTolerance=
function(u){w.GeometryEngineApi.clearDefaultSpatialReferenceTolerance(u)};r.clip=function(u,x){return w.GeometryEngineApi.clip(N.hydratedAdapter,A(u),u,x)};r.contains=function(u,x){return w.GeometryEngineApi.contains(N.hydratedAdapter,A(u),u,x)};r.convexHull=function(u,x=!1){return w.GeometryEngineApi.convexHull(N.hydratedAdapter,A(u),u,x)};r.crosses=function(u,x){return w.GeometryEngineApi.crosses(N.hydratedAdapter,A(u),u,x)};r.cut=function(u,x){return w.GeometryEngineApi.cut(N.hydratedAdapter,A(u),
u,x)};r.densify=function(u,x,H){return w.GeometryEngineApi.densify(N.hydratedAdapter,A(u),u,x,H)};r.difference=function(u,x){return w.GeometryEngineApi.difference(N.hydratedAdapter,A(u),u,x)};r.disjoint=function(u,x){return w.GeometryEngineApi.disjoint(N.hydratedAdapter,A(u),u,x)};r.distance=function(u,x,H){return w.GeometryEngineApi.distance(N.hydratedAdapter,A(u),u,x,H)};r.equals=function(u,x){return w.GeometryEngineApi.equals(N.hydratedAdapter,A(u),u,x)};r.extendedSpatialReferenceInfo=function(u){return w.GeometryEngineApi.extendedSpatialReferenceInfo(u)};
r.flipHorizontal=function(u,x){if(null==u)throw new B;const H=u.spatialReference;x=x??P(u);if(null==x)throw new B;u=u.constructor.fromJSON(w.GeometryEngineApi.flipHorizontal(u,x));u.spatialReference=H;return u};r.flipVertical=function(u,x){if(null==u)throw new B;const H=u.spatialReference;x=x??P(u);if(null==x)throw new B;u=u.constructor.fromJSON(w.GeometryEngineApi.flipVertical(u,x));u.spatialReference=H;return u};r.generalize=function(u,x,H,I){return w.GeometryEngineApi.generalize(N.hydratedAdapter,
A(u),u,x,H,I)};r.geodesicArea=function(u,x,H){return w.GeometryEngineApi.geodesicArea(N.hydratedAdapter,A(u),u,x,H)};r.geodesicBuffer=function(u,x,H,I,D,J){return w.GeometryEngineApi.geodesicBuffer(N.hydratedAdapter,A(u),u,x,H,I,D,J)};r.geodesicDensify=function(u,x,H,I=0){return w.GeometryEngineApi.geodesicDensify(N.hydratedAdapter,A(u),u,x,H,I)};r.geodesicLength=function(u,x,H){return w.GeometryEngineApi.geodesicLength(N.hydratedAdapter,A(u),u,x,H)};r.intersect=function(u,x){return w.GeometryEngineApi.intersect(N.hydratedAdapter,
A(u),u,x)};r.intersectLinesToPoints=function(u,x){return w.GeometryEngineApi.intersectLinesToPoints(N.hydratedAdapter,A(u),u,x)};r.intersects=function(u,x){return w.GeometryEngineApi.intersects(N.hydratedAdapter,A(u),u,x)};r.isSimple=function(u){return w.GeometryEngineApi.isSimple(N.hydratedAdapter,A(u),u)};r.nearestCoordinate=function(u,x,H=!0){return w.GeometryEngineApi.nearestCoordinate(N.hydratedAdapter,A(u),u,x,H)};r.nearestVertex=function(u,x){return w.GeometryEngineApi.nearestVertex(N.hydratedAdapter,
A(u),u,x)};r.nearestVertices=function(u,x,H,I){return w.GeometryEngineApi.nearestVertices(N.hydratedAdapter,A(u),u,x,H,I)};r.offset=function(u,x,H,I,D,J){return w.GeometryEngineApi.offset(N.hydratedAdapter,A(u),u,x,H,I,D,J)};r.overlaps=function(u,x){return w.GeometryEngineApi.overlaps(N.hydratedAdapter,A(u),u,x)};r.planarArea=function(u,x){return w.GeometryEngineApi.planarArea(N.hydratedAdapter,A(u),u,x)};r.planarLength=function(u,x){return w.GeometryEngineApi.planarLength(N.hydratedAdapter,A(u),
u,x)};r.relate=function(u,x,H){return w.GeometryEngineApi.relate(N.hydratedAdapter,A(u),u,x,H)};r.rotate=function(u,x,H){if(null==u)throw new B;const I=u.spatialReference;H=H??P(u);if(null==H)throw new B;u=u.constructor.fromJSON(w.GeometryEngineApi.rotate(u,x,H));u.spatialReference=I;return u};r.simplify=function(u){return w.GeometryEngineApi.simplify(N.hydratedAdapter,A(u),u)};r.symmetricDifference=function(u,x){return w.GeometryEngineApi.symmetricDifference(N.hydratedAdapter,A(u),u,x)};r.touches=
function(u,x){return w.GeometryEngineApi.touches(N.hydratedAdapter,A(u),u,x)};r.union=function(u,x=null){return w.GeometryEngineApi.union(N.hydratedAdapter,A(u),u,x)};r.within=function(u,x){return w.GeometryEngineApi.within(N.hydratedAdapter,A(u),u,x)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/geometryEngineBase":function(){define(["exports"],function(r){var V={};(function(A,P){P=function(){function B(g){if("number"===typeof g)return R.Uc.ah(g);if(null==g)return null;
if(null!=Aa[g])return R.Uc.ah(Aa[g]);throw Error("Unrecognised Unit Type");}function u(g){if("number"===typeof g)return R.Uc.ah(g);if(null==g)return null;if(null!=Ha[g])return R.Uc.ah(Ha[g]);throw Error("Unrecognised Unit Type");}function x(g){if(g)switch(g){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function H(g,z,l,c){if(null==l||l.B())return null;switch(l.K()){case R.sn.Point:return g.exportPoint(z,l,c);case R.sn.Polygon:return g.exportPolygon(z,
l,c);case R.sn.Polyline:return g.exportPolyline(z,l,c);case R.sn.MultiPoint:return g.exportMultipoint(z,l,c);case R.sn.Envelope:return g.exportExtent(z,l,c)}return null}function I(g,z,l,c){if(l.K()!==R.sn.Point)throw Error("Geometry not Point");return g.exportPoint(z,l,c)}function D(g){var z=g.wkid;g=g.wkt;var l=Ka.get(z||g);null==l&&(-1!==z&&null!=z?(l=R.Gg.create(z),Ka.set(z,l)):g&&(l=R.Gg.lP(g),Ka.set(g,l)),Wa.has(z||g)&&l.QW(Wa.get(z||g)));return l}function J(g){var z;if(null==g)return null;var l=
D(g);g=l.Id();l=l.Mn();return z={},z.tolerance=l,z.unitType=null==g?-1:g.pd,z.unitID=null==g?-1:g.Fc(),z.unitBaseFactor=null==g?0:g.ci,z.unitSquareDerivative=null==g?0:R.Uc.WF(g).Fc(),z}function U(g,z,l,c){if(null==l)return null;l=R.ac.clip(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z));return H(g,Ca,l,z)}function M(g,z,l,c){l=R.ac.fl(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z));c=[];for(var a=0;a<l.length;a++)c.push(H(g,Ca,l[a],z));return c}function Q(g,z,l,c){if(null==
l||null==c)throw Error("Illegal Argument Exception");return R.ac.contains(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function C(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.wP(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function E(g,z,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.ub(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z),B(a))}function L(g,z,l,c){return null==l&&null!=
c||null==c&&null!=l?!1:R.ac.Nb(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function y(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.OS(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function G(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.touches(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function Z(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.mY(g.convertToGEGeometry(Ca,
l),g.convertToGEGeometry(Ca,c),D(z))}function T(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.OP(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function ia(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.yU(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))}function ca(g,z,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");return R.ac.tB(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,
c),D(z),a)}function ha(g,z,l){if(null==l)throw Error("Illegal Argument Exception");return R.ac.ZS(g.convertToGEGeometry(Ca,l),D(z))}function da(g,z,l){if(null==l)throw Error("Illegal Argument Exception");l=R.ac.$B(g.convertToGEGeometry(Ca,l),D(z));return H(g,Ca,l,z)}function X(g,z,l,c){void 0===c&&(c=!1);if(null==l)throw Error("Illegal Argument Exception");if(Array.isArray(l)){var a=c,b=[];for(c=0;c<l.length;c++)b.push(g.convertToGEGeometry(Ca,l[c]));l=R.ac.eP(b,a);a=Array(l.length);for(c=0;c<l.length;c++)a[c]=
H(g,Ca,l[c],z);return a}c=R.ac.dP(g.convertToGEGeometry(Ca,l),D(z));return H(g,Ca,c,z)}function O(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Ca,l[b]));l=R.ac.LP(a,g.convertToGEGeometry(Ca,c),D(z));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=H(g,Ca,l[b],z);return c}b=R.ac.km(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z));return H(g,Ca,b,z)}function K(g,z,l,c){if(null==l||null==
c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Ca,l[b]));l=R.ac.RX(a,g.convertToGEGeometry(Ca,c),D(z));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=H(g,Ca,l[b],z);return c}b=R.ac.gp(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z));return H(g,Ca,b,z)}function Y(g,z,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Ca,
l[b]));l=R.ac.MS(a,g.convertToGEGeometry(Ca,c),D(z));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=H(g,Ca,l[b],z);return c}b=R.ac.Fa(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z));return H(g,Ca,b,z)}function S(g,z,l,c){if(null==l)return null;var a=[];if(Array.isArray(l)){if(0===l.length)return null;for(c=0;c<l.length;c++)a.push(g.convertToGEGeometry(Ca,l[c]))}else a.push(g.convertToGEGeometry(Ca,l)),null!=c&&a.push(g.convertToGEGeometry(Ca,c));return H(g,Ca,R.ac.fY(a,D(z)),z)}function ea(g,
z,l,c,a,b,d,e){var f=0;if(null!=b)switch(b){case "round":f=0;break;case "bevel":f=1;break;case "miter":f=2;break;case "square":f=3}if(Array.isArray(l)){if(null==l)g=null;else if(0===l.length)g=[];else{var h=[];for(b=0;b<l.length;b++)h.push(g.convertToGEGeometry(Ca,l[b]));l=R.ac.wU(h,D(z),c,f,d,e,B(a));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=H(g,Ca,l[b],z);g=c}return g}l=R.ac.offset(g.convertToGEGeometry(Ca,l),D(z),c,f,d,e,B(a));return H(g,Ca,l,z)}function ja(g,z,l,c,a,b){void 0===b&&(b=!1);
if(Array.isArray(l)){if(!Array.isArray(c)){for(var d=[],e=0;e<l.length;e++)d.push(c);c=d}if(c.length!=l.length){if(0==c.length)throw Error("Illegal Argument Exception");d=[];var f=0;for(e=0;e<l.length;e++)void 0===c[e]?d.push(f):(d.push(c[e]),f=c[e]);c=d}return qa(g,z,l,c,a,!1,b,"geodesic",NaN)}l=R.ac.buffer(g.convertToGEGeometry(Ca,l),D(z),c,B(a),!1,0,NaN);return H(g,Ca,l,z)}function oa(g,z,l,c,a,b,d,e){if(Array.isArray(l)){if(!Array.isArray(c)){for(var f=[],h=0;h<l.length;h++)f.push(c);c=f}if(c.length!==
l.length){if(0===c.length)throw Error("Illegal Argument Exception");f=[];var k=0;for(h=0;h<l.length;h++)void 0===c[h]?f.push(k):(f.push(c[h]),k=c[h]);c=f}return qa(g,z,l,c,a,!0,b,d,e)}void 0===d&&(d=NaN);l=R.ac.buffer(g.convertToGEGeometry(Ca,l),D(z),c,B(a),!0,x(b),d);return H(g,Ca,l,z)}function qa(g,z,l,c,a,b,d,e,f){void 0===f&&(f=NaN);if(null==l)return null;if(0===l.length)return[];for(var h=[],k=0;k<l.length;k++)h.push(g.convertToGEGeometry(Ca,l[k]));l=R.ac.HN(h,D(z),c,B(a),b,d,x(e),f);c=Array(l.length);
for(k=0;k<l.length;k++)c[k]=H(g,Ca,l[k],z);return c}function ua(g,z,l,c,a){var b;void 0===a&&(a=!0);l=R.ac.iz(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),a);return b={},b.coordinate=I(g,Ca,l.az(),z),b.distance=l.cz(),b.isRightSide=l.Nz(),b.vertexIndex=l.Va(),b.isEmpty=l.B(),b}function va(g,z,l,c){var a;l=R.ac.jz(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c));return a={},a.coordinate=I(g,Ca,l.az(),z),a.distance=l.cz(),a.isRightSide=l.Nz(),a.vertexIndex=l.Va(),a.isEmpty=l.B(),
a}function Ja(g,z,l,c,a,b){var d;l=R.ac.kz(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),a,b);c=[];for(a=0;a<l.length;a++)!1===l[a].B()&&c.push((d={},d.coordinate=I(g,Ca,l[a].az(),z),d.distance=l[a].cz(),d.isRightSide=l[a].Nz(),d.vertexIndex=l[a].Va(),d.isEmpty=l[a].B(),d));return c}function Ta(g,z,l,c,a,b){l=R.ac.LQ(g.convertToGEGeometry(Ca,l),D(z),c,a,B(b));return H(g,Ca,l,z)}function Ma(g,z,l,c,a){l=R.ac.Sr(g.convertToGEGeometry(Ca,l),D(z),c,B(a));return H(g,Ca,l,z)}function Ua(g,z,l,
c,a,b){void 0===b&&(b=0);l=R.ac.Ry(g.convertToGEGeometry(Ca,l),D(z),c,B(a),b);return H(g,Ca,l,z)}function Oa(g,z,l,c){if(null==l)throw Error("Illegal Argument Exception");return R.ac.EU(g.convertToGEGeometry(Ca,l),D(z),u(c))}function Za(g,z,l,c){if(null==l)throw Error("Illegal Argument Exception");return R.ac.FU(g.convertToGEGeometry(Ca,l),D(z),B(c))}function Ra(g,z,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return R.ac.RQ(g.convertToGEGeometry(Ca,l),D(z),u(c),x(a))}function Ea(g,
z,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return R.ac.UQ(g.convertToGEGeometry(Ca,l),D(z),B(c),x(a))}function xa(g){R.IL.bind(g)}function za(g,z,l,c,a){var b=null,d=null;if(c){if(!a)throw R.i.O("AOI missing Spatial Reference");b=g.convertToGEGeometry(Ca,c);d=D(a).hh()}g=R.iu.SR(D(z).hh(),D(l).hh(),b,d);return null!==g?g:null}function Ia(g,z,l,c,a){var b=null,d=null;if(c){if(!a)throw R.i.O("AOI missing Spatial Reference");b=g.convertToGEGeometry(Ca,c);d=D(a).hh()}return R.iu.TR(D(z).hh(),
D(l).hh(),b,d)}function pa(g,z,l,c,a,b){void 0===a&&(a=null);void 0===b&&(b=null);if(b){var d=new R.tC;d.Xu=b.densificationStep;d.Lr=b.centralMeridianOfOutputGCS;b.clipWithInputHorizon&&d.KW(b.clipWithInputHorizon);b.clipWithOutputHorizon&&d.LW(b.clipWithOutputHorizon)}if(!1===this.GY)throw Error("Projection Engine must be enabled using enableProjection");if(0===z.length)return[];if(a){if(b=a.getCachedGeTransformation(l,c),!b)a:{b=a;a=null;if(b){var e=b.getGTListEntry();if(null!==e){a=new R.rC(null);
for(var f=0,h=e.steps;f<h.length;f++){e=h[f];var k=new R.Cx(e.geogtran);e.isInverse&&k.Lz();a.add(k)}d=R.xr.Pr(D(l).hh(),D(c).hh(),a,d);b.assignCachedGe(l,c,d);b=d;break a}}if(null===a&&b&&b.steps&&0<b.steps.length){a=new R.rC(null);f=0;for(h=b.steps;f<h.length;f++)e=h[f],-1!=e.wkid&&null!=e.wkid?a.add(R.Cx.create(e.wkid,e.isInverse)):a.add(R.Cx.pP(e.wkt,e.isInverse));d=R.xr.Pr(D(l).hh(),D(c).hh(),a,d);b.assignCachedGe(l,c,d);b=d}else b=R.xr.Pr(D(l).hh(),D(c).hh(),a,d)}}else b=R.xr.Pr(D(l).hh(),D(c).hh(),
null);l=[];for(a=0;a<z.length;a++){d=z[a];e=l;f=e.push;h=g;k=c;var m=b;d=R.ac.Bh(h.convertToGEGeometry(Ca,d),m);d=H(h,Ca,d,k);f.call(e,d)}return l}function Ba(g,z){null!=g&&(g=g.wkid||g.wkt,Wa.has(g),Wa.set(g,z),Ka.has(g)&&Ka.delete(g))}function Pa(g){null!=g&&(g=g.wkid||g.wkt,Wa.has(g)&&(Wa.delete(g),Ka.has(g)&&Ka.delete(g)))}function Va(g,z,l,c){if(null==l||null==c)return[];var a=[],b=0;for(l=R.ac.LS(g.convertToGEGeometry(Ca,l),g.convertToGEGeometry(Ca,c),D(z))||[];b<l.length;b++)a.push(H(g,Ca,
l[b],z));return a}var La,Na=this&&this.__extends||function(){function g(z,l){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return g(z,l)}return function(z,l){function c(){this.constructor=z}g(z,l);z.prototype=null===l?Object.create(l):(c.prototype=l.prototype,new c)}}(),R;(function(g){(function(l){l[l.Unknown=0]="Unknown";l[l.Point=33]="Point";l[l.Line=322]="Line";l[l.Envelope=197]="Envelope";l[l.MultiPoint=
550]="MultiPoint";l[l.Polyline=1607]="Polyline";l[l.Polygon=1736]="Polygon"})(g.sn||(g.sn={}));(function(l){l[l.enumMild=0]="enumMild";l[l.enumMedium=1]="enumMedium";l[l.enumHot=2]="enumHot"})(g.TK||(g.TK={}));var z=function(){function l(){this.description=null;this.QA=0}l.prototype.K=function(){return 0};l.prototype.Eb=function(){return-1};l.prototype.Pf=function(c){this.wc();c!=this.description&&this.un(c)};l.prototype.un=function(){};l.prototype.Ll=function(c){this.wc();c!=this.description&&(c=
g.fe.xR(this.description,c),c!=this.description&&this.un(c))};l.prototype.hasAttribute=function(c){return this.description.hasAttribute(c)};l.prototype.se=function(c){this.wc();this.description.hasAttribute(c)||(c=g.fe.wR(this.description,c),this.un(c))};l.prototype.Vg=function(){return null};l.prototype.dn=function(){};l.prototype.A=function(){};l.prototype.So=function(){};l.prototype.yc=function(c){this.A(c)};l.prototype.B=function(){return!0};l.prototype.Pa=function(){};l.prototype.Pc=function(){};
l.prototype.Ja=function(){return null};l.prototype.copyTo=function(){};l.prototype.He=function(){return 0};l.prototype.Rb=function(){return 0};l.prototype.dG=function(){return this.hasAttribute(1)};l.uf=function(c){return((c&192)>>6)+1>>1};l.Tn=function(c){return 0!=(c&32)};l.PS=function(c){return 0!=(c&128)};l.zd=function(c){return 0!=(c&256)};l.zj=function(c){return 0!=(c&512)};l.Ic=function(c){return 0!=(c&1024)};l.prototype.Qf=function(){var c=this.Ja();this.copyTo(c);return c};l.prototype.ng=
function(){return null};l.kg=function(c){var a=c.Ja();c.copyTo(a);return a};l.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)};l.zx=function(c){var a=c.K();if(l.zj(a))return c.I();if(c.B())return 0;if(197==a)return 4;if(33==a)return 1;if(l.zd(a))return 2;throw g.i.ga("missing type");};return l}();g.ba=z})(R||(R={}));(function(g){var z=function(){function l(){this.y=this.x=0}l.construct=function(c,a){var b=new l;b.x=c;b.y=a;return b};l.cl=function(c){var a=new l;a.x=c.x;a.y=c.y;return a};
l.prototype.na=function(c,a){this.x=c;this.y=a};l.prototype.N=function(c){this.x=c.x;this.y=c.y};l.prototype.hq=function(c,a){return this.x===c&&this.y===a};l.prototype.Mz=function(c){return 2.220446049250313E-16>=Math.abs(this.x-c.x)&&2.220446049250313E-16>=Math.abs(this.y-c.y)};l.prototype.rb=function(c){return this.x===c.x&&this.y===c.y};l.prototype.Nb=function(c){return c==this?!0:c instanceof l?this.x==c.x&&this.y==c.y:!1};l.prototype.sub=function(c){this.x-=c.x;this.y-=c.y};l.prototype.vc=function(c,
a){this.x=c.x-a.x;this.y=c.y-a.y};l.prototype.add=function(c,a){void 0!==a?(this.x=c.x+a.x,this.y=c.y+a.y):(this.x+=c.x,this.y+=c.y)};l.prototype.Uq=function(){this.x=-this.x;this.y=-this.y};l.prototype.nt=function(c){this.x=-c.x;this.y=-c.y};l.prototype.IS=function(c,a,b){this.x=c.x*(1-b)+a.x*b;this.y=c.y*(1-b)+a.y*b};l.prototype.Dt=function(c,a){this.x=this.x*c+a.x;this.y=this.y*c+a.y};l.prototype.BW=function(c,a,b){this.x=a.x*c+b.x;this.y=a.y*c+b.y};l.prototype.scale=function(c){this.x*=c;this.y*=
c};l.prototype.compare=function(c){return this.y<c.y?-1:this.y>c.y?1:this.x<c.x?-1:this.x>c.x?1:0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x=1,this.y=0);this.x/=c;this.y/=c};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};l.prototype.Uk=function(){return this.x*this.x+this.y*this.y};l.ub=function(c,a){return Math.sqrt(this.zc(c,a))};l.Jy=function(c,a,b,d){c-=b;a-=d;return Math.sqrt(c*c+a*a)};l.prototype.Sh=function(c){return this.x*c.x+this.y*
c.y};l.prototype.aD=function(c){return Math.abs(this.x*c.x)+Math.abs(this.y*c.y)};l.prototype.yi=function(c){return this.x*c.y-this.y*c.x};l.prototype.Ct=function(c,a){var b=-this.x*a+this.y*c;this.x=this.x*c+this.y*a;this.y=b};l.prototype.Jv=function(){var c=this.x;this.x=-this.y;this.y=c};l.prototype.HG=function(c){this.x=-c.y;this.y=c.x};l.prototype.cr=function(){var c=this.x;this.x=this.y;this.y=-c};l.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};l.pu=function(c,
a){var b=c.su(),d=a.su();return d==b?(c=c.yi(a),0>c?1:0<c?-1:0):b<d?-1:1};l.zc=function(c,a){var b=c.x-a.x;c=c.y-a.y;return b*b+c*c};l.prototype.toString=function(){return"("+this.x+" , "+this.y+")"};l.prototype.Sc=function(){this.y=this.x=NaN};l.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)};l.prototype.offset=function(c,a){var b=l.ub(c,a),d=l.construct(this.x,this.y);if(0==b)return l.ub(d,c);var e=new l;e.N(a);e.sub(c);d.sub(c);return d.yi(e)/b};l.Wq=function(c,a,b){var d=new g.Xb;
d.set(a.x);d.sub(c.x);var e=new g.Xb;e.set(b.y);e.sub(c.y);var f=new g.Xb;f.set(a.y);f.sub(c.y);var h=new g.Xb;h.set(b.x);h.sub(c.x);d.Bg(e);f.Bg(h);d.sub(f);if(!d.rs())return b=d.value(),0>b?-1:0<b?1:0;d=new g.jp(a.x);e=new g.jp(c.x);f=new g.jp(c.y);d=d.kt(e);c=new g.jp(b.y);c=c.kt(f);a=new g.jp(a.y);a=a.kt(f);b=new g.jp(b.x);b=b.kt(e);d=d.nr(c);a=a.nr(b);d=d.nr(a);return d.iT()?-1:d.aS()?1:0};l.prototype.dc=function(){return g.P.wj(g.P.wj())};return l}();g.h=z})(R||(R={}));(function(g){var z=function(){function l(c){this.Ay=
this.Ot=0;this.KX=c}l.prototype.reset=function(){this.Ay=this.Ot=0};l.prototype.add=function(c){c-=this.Ay;var a=this.Ot+c;this.Ay=a-this.Ot-c;this.Ot=a};l.prototype.sub=function(c){this.add(-c)};l.prototype.tm=function(){return this.KX+this.Ot};return l}();g.Ex=z;g.mc=function(){function l(){}l.En=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)};l.sign=function(c){return 0>c?-1:0<c?1:0};l.MK=function(c){return c-360*Math.floor(c/360)};l.round=function(c){return Math.floor(c+.5)};l.ox=function(c){return c*
c};l.jq=function(c,a,b){return.5>=b?c+(a-c)*b:a-(a-c)*(1-b)};l.JG=function(c,a,b,d){.5>=b?(d.x=c.x+(a.x-c.x)*b,d.y=c.y+(a.y-c.y)*b):(d.x=a.x-(a.x-c.x)*(1-b),d.y=a.y-(a.y-c.y)*(1-b))};l.gT=function(c,a,b,d,e,f){.5>=e?(f.x=c+(b-c)*e,f.y=a+(d-a)*e):(f.x=b-(b-c)*(1-e),f.y=d-(d-a)*(1-e))};return l}()})(R||(R={}));(function(g){var z=function(l){function c(){var a=l.call(this)||this;a.ta=0;a.oa=0;a.qa=0;a.ma=0;a.la=null;return a}Na(c,l);c.prototype.bc=function(){return g.h.construct(this.ta,this.oa)};c.prototype.$p=
function(a){a.x=this.ta;a.y=this.oa};c.prototype.Ec=function(a){this.gm(0,a)};c.prototype.UB=function(a,b){this.gm(0,g.h.construct(a,b))};c.prototype.Vo=function(a){this.cD(0,a)};c.prototype.setStart=function(a){this.pD(0,a)};c.prototype.yv=function(a,b){return this.Pd(0,a,b)};c.prototype.TB=function(a,b,d){this.vn(0,a,b,d)};c.prototype.xc=function(){return g.h.construct(this.qa,this.ma)};c.prototype.Vr=function(a){a.x=this.qa;a.y=this.ma};c.prototype.Rc=function(a){this.gm(1,a)};c.prototype.Sl=function(a,
b){this.gm(1,g.h.construct(a,b))};c.prototype.Ro=function(a){this.cD(1,a)};c.prototype.setEnd=function(a){this.pD(1,a)};c.prototype.jv=function(a,b){return this.Pd(1,a,b)};c.prototype.JB=function(a,b,d){this.vn(1,a,b,d)};c.prototype.Eb=function(){return 1};c.prototype.B=function(){return this.Bc()};c.prototype.Pa=function(){};c.prototype.He=function(){return 0};c.prototype.Fa=function(a,b,d,e,f){return this.FM(a,b,d,e,f)};c.prototype.isIntersecting=function(a,b){return 0!=this.Br(a,b,!1)};c.prototype.ss=
function(a,b){return this.tu(a,b,!1)};c.prototype.tu=function(){return null};c.prototype.Bc=function(){return!1};c.prototype.$x=function(a){this.wc();if(null==this.la&&0<a)this.la=g.P.mg(2*a);else if(null!=this.la&&this.la.length<2*a){for(var b=this.la.slice(0),d=this.la.length;d<2*a;d++)b[d]=0;this.la=b}};c.bM=function(a,b,d){if(0<d)var e=0;for(var f=0;f<d;f++)b[0+e]=a[0],e++};c.prototype.gm=function(a,b){0!=a?(this.qa=b.x,this.ma=b.y):(this.ta=b.x,this.oa=b.y)};c.prototype.un=function(a){if(null!=
this.la){for(var b=g.fe.Kw(a,this.description),d=[],e=c.Ig(this.description,0),f=c.Ig(this.description,1),h=c.Ig(a,0),k=c.Ig(a,1),m=0,n=1,p=a.Ba;n<p;n++){var q=a.ld(n),t=g.sa.Wa(q);if(-1==b[n]){var v=g.sa.te(q);for(q=0;q<t;q++)d[h+m]=v,d[k+m]=v,m++}else for(v=this.description.bk(b[n])-2,q=0;q<t;q++)d[h+m]=this.la[e+v],d[k+m]=this.la[f+v],m++,v++}this.la=d}this.description=a};c.prototype.cD=function(a,b){if(this.Bc())throw g.i.ga("empty geometry");b.Pf(this.description);b.Bc()&&b.wn();for(var d=0;d<
this.description.Ba;d++)for(var e=this.description.Fd(d),f=0,h=g.sa.Wa(e);f<h;f++){var k=this.Pd(a,e,f);b.setAttribute(e,f,k)}};c.prototype.pD=function(a,b){this.wc();if(b.Bc())throw g.i.ga("empty geometry");for(var d=b.description,e=0,f=d.Ba;e<f;e++)for(var h=d.Fd(e),k=g.sa.Wa(h),m=0;m<k;m++){var n=b.Vc(h,m);this.vn(a,h,m,n)}};c.prototype.Pd=function(a,b,d){if(this.Bc())throw g.i.ga("This operation was performed on an Empty Geometry.");if(0==b)return 0!=a?0!=d?this.ma:this.qa:0!=d?this.oa:this.ta;
if(d>=g.sa.Wa(b))throw g.i.de();var e=this.description.Rf(b);return 0<=e?(null!=this.la&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(e)-2+d]):g.sa.te(b)};c.prototype.vn=function(a,b,d,e){this.wc();if(d>=g.sa.Wa(b))throw g.i.de();var f=this.description.Rf(b);0>f&&(this.se(b),f=this.description.Rf(b));0==b?0!=a?0!=d?this.ma=e:this.qa=e:0!=d?this.oa=e:this.ta=e:(null==this.la&&this.$x(this.description.Be.length-2),this.la[c.Ig(this.description,a)+this.description.bk(f)-
2+d]=e)};c.prototype.copyTo=function(a){if(a.K()!=this.K())throw g.i.O();a.description=this.description;a.$x(this.description.Be.length-2);c.bM(this.la,a.la,2*(this.description.Be.length-2));a.ta=this.ta;a.oa=this.oa;a.qa=this.qa;a.ma=this.ma;a.wc();this.qp(a)};c.prototype.Vg=function(a,b){var d=new g.Oc;if(this.Bc())return d.Pa(),d;d.pa=this.Pd(0,a,b);d.wa=d.pa;d.Nk(this.Pd(1,a,b));return d};c.prototype.UI=function(a){this.Bc()?a.Pa():(a.pa=this.Pd(0,0,0),a.wa=a.pa,a.Nk(this.Pd(1,0,0)))};c.prototype.Vw=
function(a,b){b.Pf(this.description);b.Db(this.ic(a));for(var d=1,e=this.description.Ba;d<e;d++)for(var f=this.description.Fd(d),h=g.sa.Wa(f),k=0;k<h;k++){var m=this.Vc(a,f,k);b.setAttribute(f,k,m)}};c.prototype.AM=function(a){if(this.description!=a.description||this.ta!=a.ta||this.qa!=a.qa||this.oa!=a.oa||this.ma!=a.ma)return!1;for(var b=0;b<2*(this.description.Be.length-2);b++)if(this.la[b]!=a.la[b])return!1;return!0};c.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma};c.prototype.reverse=
function(){var a=this.ta;this.ta=this.qa;this.qa=a;a=this.oa;this.oa=this.ma;this.ma=a;a=1;for(var b=this.description.Ba;a<b;a++)for(var d=this.description.ld(a),e=0,f=g.sa.Wa(d);e<f;e++){var h=this.Pd(0,d,e),k=this.Pd(1,d,e);this.vn(0,d,e,k);this.vn(1,d,e,h)}};c.prototype.Br=function(a,b,d){var e=a.K();switch(this.K()){case 322:if(322==e)return g.zb.JM(this,a,b,d);throw g.i.Ra();default:throw g.i.Ra();}};c.prototype.FM=function(a,b,d,e,f){var h=a.K();switch(this.K()){case 322:if(322==h)return g.zb.Yx(this,
a,b,d,e,f);throw g.i.Ra();default:throw g.i.Ra();}};c.prototype.Sx=function(){return null};c.Ig=function(a,b){return b*(a.Be.length-2)};c.prototype.ic=function(a,b){if(void 0===b)return b=new g.h,this.ic(a,b),b;g.mc.gT(this.ta,this.oa,this.qa,this.ma,a,b)};c.prototype.ge=function(){return null};c.prototype.$F=function(){return null};c.prototype.fq=function(){return null};c.prototype.Di=function(){return null};c.prototype.Rn=function(){return null};c.prototype.lg=function(){return null};c.prototype.Tx=
function(a,b){return void 0!==b?this.ux(b)-this.ux(a):this.ux(a)};c.prototype.qp=function(){};c.prototype.fl=function(){return null};c.prototype.dh=function(){};c.prototype.Vc=function(){return null};c.prototype.Me=function(){return null};c.prototype.ux=function(){return null};c.prototype.IG=function(){return null};c.prototype.ub=function(a,b){if(!b&&0!=this.Br(a,0,!1))return 0;b=1.7976931348623157E308;var d=this.bc(),e=a.ge(d,!1);d.sub(a.ic(e));d=d.length();d<b&&(b=d);d=this.xc();e=a.ge(d,!1);d.sub(a.ic(e));
d=d.length();d<b&&(b=d);d=a.bc();e=this.ge(d,!1);d.sub(this.ic(e));d=d.length();d<b&&(b=d);d=a.xc();e=this.ge(d,!1);d.sub(this.ic(e));d=d.length();d<b&&(b=d);return b};c.prototype.ng=function(){return g.si.im(this,null)};return c}(g.ba);g.NC=z})(R||(R={}));new R.h;(function(g){(function(l){l[l.Unknown=-1]="Unknown";l[l.Not=0]="Not";l[l.Weak=1]="Weak";l[l.Strong=2]="Strong"})(g.VK||(g.VK={}));(function(l){l[l.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";l[l.IsWeakSimple=2]="IsWeakSimple";l[l.IsStrongSimple=
4]="IsStrongSimple";l[l.DirtyOGCFlags=8]="DirtyOGCFlags";l[l.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";l[l.DirtyExactIntervals=64]="DirtyExactIntervals";l[l.DirtyLooseIntervals=128]="DirtyLooseIntervals";l[l.DirtyIntervals=192]="DirtyIntervals";l[l.DirtyIsEnvelope=256]="DirtyIsEnvelope";l[l.DirtyLength2D=512]="DirtyLength2D";l[l.DirtyRingAreas2D=1024]="DirtyRingAreas2D";l[l.DirtyCoordinates=1993]="DirtyCoordinates";l[l.DirtyAllInternal=65535]="DirtyAllInternal";l[l.DirtyAll=16777215]="DirtyAll"})(g.HK||
(g.HK={}));var z=function(l){function c(){var a=l.call(this)||this;a.Jm=65535;a.xa=0;a.Rg=-1;a.Cb=null;return a}Na(c,l);c.prototype.qp=function(){};c.prototype.Zx=function(){};c.prototype.ey=function(){};c.prototype.I=function(){return this.xa};c.prototype.B=function(){return this.Bc()};c.prototype.Bc=function(){return 0==this.xa};c.prototype.ck=function(a){return 0!=(this.Jm&a)};c.prototype.Nf=function(a,b){this.Jm=b?this.Jm|a:this.Jm&~a};c.prototype.oc=function(){this.ck(32)&&this.XM()};c.prototype.vx=
function(){if(this.Bc())throw g.i.ga("This operation was performed on an Empty Geometry.");};c.prototype.we=function(a,b){if(0>a||a>=this.xa)throw g.i.ga("index out of bounds");this.oc();b.Pf(this.description);b.B()&&b.wn();for(var d=0;d<this.description.Ba;d++)for(var e=this.description.Fd(d),f=0,h=g.sa.Wa(e);f<h;f++){var k=this.Aa[d].gg(h*a+f);b.setAttribute(e,f,k)}};c.prototype.It=function(a,b){this.oc();for(var d=b.description,e=0;e<d.Ba;e++)for(var f=d.Fd(e),h=g.sa.Wa(f),k=0;k<h;k++){var m=b.Vc(f,
k);this.setAttribute(f,a,k,m)}};c.prototype.D=function(a,b){if(0>a||a>=this.I())throw g.i.de();this.oc();this.Aa[0].uc(2*a,b)};c.prototype.Oa=function(a){var b=new g.h;this.D(a,b);return b};c.prototype.Hc=function(a,b){this.Aa[0].uc(2*a,b)};c.prototype.Db=function(a,b,d){if(0>a||a>=this.xa)throw g.i.de();this.oc();var e=this.Aa[0];void 0!==d?(e.write(2*a,b),e.write(2*a+1,d)):e.Vt(2*a,b);this.Qc(1993)};c.prototype.xz=function(){if(void 0>=this.I())throw g.i.de();this.oc();var a=this.Aa[0],b=new g.Od;
b.x=a.read(NaN);b.y=a.read(NaN);b.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):g.sa.te(1);return b};c.prototype.ZB=function(a){if(0>a||a>=this.I())throw g.i.de();this.se(1);this.oc();this.Qc(1993);var b=this.Aa[0];b.write(2*a,(void 0).x);b.write(2*a+1,(void 0).y);this.Aa[1].rr(a,(void 0).z)};c.prototype.Vc=function(a,b,d){if(0>b||b>=this.xa)throw g.i.de();var e=g.sa.Wa(a);if(d>=e)throw g.i.de();this.oc();var f=this.description.Rf(a);return 0<=f?this.Aa[f].gg(b*e+d):g.sa.te(a)};c.prototype.tF=function(a,
b){return this.Vc(a,b,void 0)};c.prototype.setAttribute=function(a,b,d,e){if(0>b||b>=this.xa)throw g.i.de();var f=g.sa.Wa(a);if(d>=f)throw g.i.de();this.se(a);this.oc();a=this.description.Rf(a);this.Qc(1993);this.Aa[a].rr(b*f+d,e)};c.prototype.vb=function(a){this.vx();this.se(a);this.oc();return this.Aa[this.description.Rf(a)]};c.prototype.kn=function(a,b){if(null!=b&&g.sa.Vp(a)!=b.Vp())throw g.i.O();this.se(a);a=this.description.Rf(a);null==this.Aa&&(this.Aa=g.Zc.lI(this.description.Ba));this.Aa[a]=
b;this.Qc(16777215)};c.prototype.un=function(a){var b=null;if(null!=this.Aa){var d=g.fe.Kw(a,this.description);b=[];for(var e=0,f=a.Ba;e<f;e++)-1!=d[e]&&(b[e]=this.Aa[d[e]])}this.description=a;this.Aa=b;this.Rg=-1;this.Qc(16777215)};c.prototype.vD=function(a){this.yu(!0);a instanceof g.l?this.aa.A(a):this.aa.So(a)};c.prototype.WM=function(a){this.yu(!1);a instanceof g.l?this.aa.A(a):this.aa.So(a)};c.prototype.dn=function(a){this.yu(!0);this.aa.copyTo(a)};c.prototype.A=function(a){this.vD(a)};c.prototype.So=
function(a){this.vD(a)};c.prototype.yc=function(a){this.WM(a)};c.prototype.Vg=function(a,b){var d=new g.Oc;if(this.Bc())return d.Pa(),d;this.yu(!0);return this.aa.Vg(a,b)};c.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var b=this.I(),d=0,e=this.description.Ba;d<e;d++)a=this.Aa[d].Cn(a,0,b*g.sa.Wa(this.description.Fd(d)));return a};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c&&this.description.Nb(a.description))||this.Bc()!=a.Bc())return!1;if(this.Bc())return!0;
var b=this.I();if(b!=a.I())return!1;for(var d=0;d<this.description.Ba;d++){var e=this.description.ld(d),f=this.vb(e),h=a.vb(e);if(!f.Nb(h,0,b*g.sa.Wa(e)))return!1}return!0};c.prototype.copyTo=function(a){if(a.K()!=this.K())throw g.i.O();this.ZC(a)};c.prototype.ZC=function(a){this.oc();a.description=this.description;a.Aa=null;var b=this.description.Ba,d=null;if(null!=this.Aa){d=[];for(var e=0;e<b;e++)null!=this.Aa[e]&&(d[e]=this.Aa[e].BB(this.I()*g.sa.Wa(this.description.Fd(e))))}null!=this.aa?(a.aa=
this.aa.Ja(),this.aa.copyTo(a.aa)):a.aa=null;a.xa=this.xa;a.Jm=this.Jm;a.Aa=d;try{this.qp(a)}catch(f){throw a.Pa(),g.i.hu();}};c.prototype.rD=function(){this.xa=0;this.Rg=-1;this.Aa=null;this.Qc(16777215)};c.prototype.Qc=function(a){16777215==a&&(this.Rg=-1,this.Zx());this.Jm|=a;this.gM();this.wc()};c.prototype.yu=function(a){this.oc();if(this.ck(192))if(null==this.aa?this.aa=new g.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(a);for(var b=1;b<this.description.Ba;b++)for(var d=
this.description.Fd(b),e=g.sa.Wa(d),f=this.Aa[b],h=0;h<e;h++){var k=new g.Oc;k.Pa();for(var m=0;m<this.xa;m++){var n=f.gg(m*e+h);k.$b(n)}this.aa.setInterval(d,h,k)}a&&this.Nf(192,!1)}};c.prototype.dy=function(){this.aa.Pa();for(var a=this.Aa[0],b=new g.h,d=0;d<this.xa;d++)a.uc(2*d,b),this.aa.$b(b)};c.prototype.Ap=function(a){a.Pa();for(var b=this.Aa[0],d=new g.h,e=0;e<this.xa;e++)b.uc(2*e,d),a.$b(d)};c.prototype.XM=function(){if(this.Rg<this.xa){null==this.Aa&&(this.Aa=g.Zc.lI(this.description.Ba));
this.Rg=2147483647;for(var a=0;a<this.description.Ba;a++){var b=this.description.Fd(a);if(null!=this.Aa[a]){var d=g.sa.Wa(b),e=g.P.truncate(this.Aa[a].size/d);e<this.xa&&(e=g.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[a].resize(e*d,g.sa.te(b)));e<this.Rg&&(this.Rg=e)}else this.Aa[a]=g.Zc.TE(b,this.xa),this.Rg=this.xa}}this.ey();this.Nf(32,!1)};c.prototype.fm=function(a){if(0>a)throw g.i.O();a!=this.xa&&(this.xa=a,this.Qc(65535))};c.prototype.qm=function(a){if(!this.ck(1)){if(!this.ck(2))return 0;
if(this.LT>=a)return this.ck(8)?1:2}return-1};c.prototype.Eh=function(a,b){this.LT=b;if(-1==a)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),0==a)this.Nf(2,!1),this.Nf(4,!1);else if(1==a)this.Nf(2,!0),this.Nf(4,!1);else if(2==a)this.Nf(2,!0),this.Nf(4,!0);else throw g.i.ga("internal error.");};c.prototype.gM=function(){null!=this.Cb&&(this.Cb=null)};c.prototype.fD=function(a,b,d,e){if(0>a||a>=this.xa)throw g.i.ga("index out of bounds");if(0>b||b>=this.xa)throw g.i.ga("index out of bounds");
this.oc();e.Pf(this.description);e.B()&&e.wn();for(var f=0;f<this.description.Ba;f++)for(var h=this.description.Fd(f),k=0,m=g.sa.Wa(h);k<m;k++){var n=this.Aa[f].gg(m*a+k),p=this.Aa[f].gg(m*b+k);e.setAttribute(h,k,g.mc.jq(n,p,d))}};c.prototype.Ar=function(a,b){var d=this.Aa[0].o,e=d[2*a]-d[2*b];a=d[2*a+1]-d[2*b+1];return Math.sqrt(e*e+a*a)};c.prototype.FR=function(a){if(0>a||a>=this.xa)throw g.i.de();this.oc();var b=new g.Ta;b.Pf(this.description);b.B()&&b.wn();for(var d=0;d<this.description.Ba;d++)for(var e=
this.description.ld(d),f=0,h=g.sa.Wa(e);f<h;f++){var k=this.Aa[d].gg(h*a+f);b.setAttribute(e,f,k)}return b};c.prototype.Fh=function(a,b){if(0>a||a>=this.xa)throw g.i.de();if(b.B())throw g.i.O();this.oc();for(var d=b.description,e=0;e<d.Ba;e++)for(var f=d.ld(e),h=g.sa.Wa(f),k=0;k<h;k++){var m=b.Vc(f,k);this.setAttribute(f,a,k,m)}};c.prototype.nu=function(){return null};c.prototype.hj=function(){return null};return c}(g.ba);g.Fx=z})(R||(R={}));(function(g){var z=function(){function l(){this.ob=this.ao=
null;this.Vm=124234251;this.Tv=!0;this.Ne=-1;this.ob=new g.ad(7);this.ao=null}l.prototype.Xo=function(c){this.ao=c};l.prototype.MP=function(){this.Tv=!1};l.prototype.Ee=function(c){this.ob.Ee(c)};l.prototype.Rr=function(c){var a=this.ob.De();this.nX(a);this.qX(c,a);return a};l.prototype.HP=function(c){this.ob.kd(c)};l.prototype.addElement=function(c,a){-1==a&&(-1==this.Ne&&(this.Ne=this.Rr(-1)),a=this.Ne);return this.AD(c,0,a)};l.prototype.ED=function(c){-1==this.Ne&&(this.Ne=this.Rr(-1));return this.AD(c,
1,this.Ne)};l.prototype.zn=function(c){-1==this.Ne&&(this.Ne=this.Rr(-1));var a=this.Ne,b=this.ob.o;if(-1==a||-1==b[7*a])return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),b=this.ob.o,b[7*a]=c,this.xp(-1,c,a,b),c;var d=-1==a?-1:b[7*a+2];c=this.ob.Nl([-1,-1,d,c,this.il(),-1,-1]);b=this.ob.o;b[7*d+1]=c;this.ky(c,b);-1===b[7*c+2]&&(b[7*a]=c);this.xp(-1,c,a,b);return c};l.prototype.Bu=function(c,a,b,d){var e=-1;-1==e&&(-1==this.Ne&&(this.Ne=this.Rr(-1)),e=this.Ne);var f=this.ob.o;if(-1==e||-1==f[7*e])return b=
this.ob.Nl([-1,-1,-1,b,this.il(),-1,-1]),f=this.ob.o,f[7*e]=b,this.xp(-1,b,e,f),b;if(d){d=-1!=a?this.ao.compare(this,b,a):-1;var h=-1!=c?this.ao.compare(this,b,c):1}else d=-1,h=1;if(0==d||0==h)return f[7*e+3]=0==d?a:c,-1;(-1!=a&&-1!=c?this.Vm>g.P.XA(this.Vm)>>1:-1!=a)?c=a:d=h;for(a=!0;;){if(0>d)if(h=f[7*c],-1!=h)c=h;else{d=c;b=this.ob.Nl([-1,-1,c,b,this.il(),-1,-1]);f=this.ob.o;f[7*c]=b;break}else if(h=f[7*c+1],-1!=h)c=h;else{d=f[7*c+6];b=this.ob.Nl([-1,-1,c,b,this.il(),-1,-1]);f=this.ob.o;f[7*c+
1]=b;break}a&&(d*=-1,a=!1)}this.ky(b,f);-1===f[7*b+2]&&(f[7*e]=b);this.xp(d,b,e,f);return b};l.prototype.AF=function(){return this.dR(this.Ne)};l.prototype.wd=function(c,a){a=-1==a?this.Ne:a;this.Tv?this.GP(c,a):this.eY(c,a)};l.prototype.search=function(c,a){for(a=this.uv(a);-1!=a;){var b=this.ao.compare(this,c,a);if(0==b)return a;a=0>b?this.nl(a):this.Zp(a)}return-1};l.prototype.DW=function(c){for(var a=this.uv(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?a=this.nl(a):(b=a,a=this.Zp(a))}return b};
l.prototype.pJ=function(c){for(var a=this.uv(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?(b=a,a=this.nl(a)):a=this.Zp(a)}return b};l.prototype.ka=function(c){return this.ob.U(c,3)};l.prototype.nl=function(c){return this.ob.U(c,0)};l.prototype.Zp=function(c){return this.ob.U(c,1)};l.prototype.getParent=function(c){return this.ob.U(c,2)};l.prototype.lb=function(c){return this.ob.U(c,6)};l.prototype.xe=function(c){return this.ob.U(c,5)};l.prototype.sc=function(c){return-1==c?this.ml(this.Ne):
this.ml(c)};l.prototype.Gc=function(c){return-1==c?this.bs(this.Ne):this.bs(c)};l.prototype.UR=function(c){return-1==c?this.XF(this.Ne):this.XF(c)};l.prototype.Uj=function(c,a){this.IB(c,a)};l.prototype.uv=function(c){return-1==c?this.TF(this.Ne):this.TF(c)};l.prototype.clear=function(){this.ob.oj(!1);this.Ne=-1};l.prototype.size=function(c){return-1==c?this.VF(this.Ne):this.VF(c)};l.prototype.FN=function(c,a){for(var b=a[7*c],d=a[7*c+1],e=a[7*c+4];-1!=b||-1!=d;){var f=-1!=b?a[7*b+4]:2147483647;d=
-1!=d?a[7*d+4]:2147483647;if(e<=Math.min(f,d))break;f<=d?this.nJ(b,a):this.mJ(c,a);b=a[7*c];d=a[7*c+1]}};l.prototype.ky=function(c,a){if(this.Tv)for(var b=a[7*c+4],d=a[7*c+2];-1!=d&&a[7*d+4]>b;)a[7*d]==c?this.nJ(c,a):this.mJ(d,a),d=a[7*c+2]};l.prototype.mJ=function(c,a){var b=a[7*c+1];a[7*b+2]=a[7*c+2];a[7*c+2]=b;var d=a[7*b];a[7*c+1]=d;-1!=d&&(a[7*d+2]=c);a[7*b]=c;d=a[7*b+2];-1!=d&&(a[7*d]==c?a[7*d]=b:a[7*d+1]=b)};l.prototype.nJ=function(c,a){var b=a[7*c+2];a[7*c+2]=a[7*b+2];a[7*b+2]=c;var d=a[7*
c+1];a[7*b]=d;-1!=d&&(a[7*d+2]=b);a[7*c+1]=b;d=a[7*c+2];-1!=d&&(a[7*d]===b?a[7*d]=c:a[7*d+1]=c)};l.prototype.Rk=function(c,a){this.ob.T(c,2,a)};l.prototype.OB=function(c,a){this.ob.T(c,0,a)};l.prototype.SB=function(c,a){this.ob.T(c,1,a)};l.prototype.RB=function(c,a){this.ob.T(c,5,a)};l.prototype.fx=function(c,a){this.ob.T(c,6,a)};l.prototype.SJ=function(c,a){this.ob.T(a,0,c)};l.prototype.nX=function(c){this.ob.T(c,4,0)};l.prototype.qX=function(c,a){this.ob.T(a,5,c)};l.prototype.TF=function(c){return-1==
c?-1:this.ob.U(c,0)};l.prototype.ml=function(c){return-1==c?-1:this.ob.U(c,1)};l.prototype.bs=function(c){return-1==c?-1:this.ob.U(c,2)};l.prototype.dR=function(c){return-1==c?-1:this.ob.U(c,3)};l.prototype.VF=function(c){return-1==c?0:this.ob.U(c,4)};l.prototype.XF=function(c){return this.ob.U(c,5)};l.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])};l.prototype.hl=function(c){-1!=c&&this.ob.kd(c)};l.prototype.il=function(){this.Vm=g.P.XA(this.Vm);return this.Vm&1073741823};
l.prototype.AD=function(c,a,b){var d=this.ob.o;if(-1==b||-1==d[7*b])return c=this.ob.Nl([-1,-1,-1,c,this.il(),-1,-1]),d=this.ob.o,d[7*b]=c,this.xp(-1,c,b,d),c;for(var e=-1==b?-1:d[7*b];;){var f=-1==a?1:this.ao.compare(this,c,e);if(0>f)if(f=this.nl(e),-1!=f)e=f;else{a=e;c=this.ob.Nl([-1,-1,e,c,this.il(),-1,-1]);d=this.ob.o;d[7*e]=c;break}else{if(1==a&&0==f)return d[7*b+3]=e,-1;f=d[7*e+1];if(-1!=f)e=f;else{a=d[7*e+6];c=this.ob.Nl([-1,-1,e,c,this.il(),-1,-1]);d=this.ob.o;d[7*e+1]=c;break}}}this.ky(c,
d);-1===d[7*c+2]&&(d[7*b]=c);this.xp(a,c,b,d);return c};l.prototype.xp=function(c,a,b,d){if(-1!=c){var e=d[7*c+5];d[7*c+5]=a}else e=-1==b?-1:d[7*b+2];d[7*a+5]=e;-1!=e&&(d[7*e+6]=a);d[7*a+6]=c;c==(-1==b?-1:d[7*b+1])&&(d[7*b+1]=a);-1==c&&(d[7*b+2]=a);d[7*b+4]=(-1==b?0:d[7*b+4])+1};l.prototype.vB=function(c,a){var b=this.ob.o,d=b[7*c+5];c=b[7*c+6];-1!=d?b[7*d+6]=c:b[7*a+1]=c;-1!=c?b[7*c+5]=d:b[7*a+2]=d;b[7*a+4]=-1===a?-1:b[7*a+4]-1};l.prototype.eY=function(c,a){this.vB(c,a);var b=this.nl(c),d=this.Zp(c),
e=this.getParent(c),f=c;if(-1!=b&&-1!=d){this.Vm=g.P.XA(this.Vm);var h=1073741823<this.Vm?this.lb(c):this.xe(c),k=this.getParent(h)==c;this.ob.bC(c,h,0);this.ob.bC(c,h,1);this.ob.bC(c,h,2);-1!=e?this.nl(e)==c?this.OB(e,h):this.SB(e,h):this.SJ(h,a);k?(b==h?(this.OB(h,c),this.Rk(d,h)):d==h&&(this.SB(h,c),this.Rk(b,h)),this.Rk(c,h),e=h):(this.Rk(b,h),this.Rk(d,h),e=this.getParent(c),f=h);b=this.nl(c);d=this.Zp(c);-1!=b&&this.Rk(b,c);-1!=d&&this.Rk(d,c)}b=-1!=b?b:d;-1==e?this.SJ(b,a):this.nl(e)==f?this.OB(e,
b):this.SB(e,b);-1!=b&&this.Rk(b,e);this.hl(c)};l.prototype.GP=function(c,a){var b=this.ob.o;b[7*c+4]=2147483647;var d=-1,e=-1,f=-1===a?-1:b[7*a],h=f==c;h&&(d=b[7*f],e=b[7*f+1],-1==d&&-1==e)?(this.vB(f,a),this.hl(f),b[7*a]=-1):(this.FN(c,b),f=b[7*c+2],-1!=f&&(b[7*f]==c?b[7*f]=-1:b[7*f+1]=-1),this.vB(c,a),this.hl(c),h&&(b[7*a]=-1==d||-1!=b[7*d+2]?e:d))};l.prototype.IB=function(c,a){this.ob.T(c,3,a)};return l}();g.$j=z})(R||(R={}));(function(g){var z=function(){function l(c,a){void 0!==c&&this.L(c,
a)}l.prototype.L=function(c,a){this.pa=c;this.wa=a;this.normalize()};l.prototype.isIntersecting=function(c){return this.pa<=c.pa?this.wa>=c.pa:c.wa>=this.pa};l.prototype.move=function(c){this.B()||(this.pa+=c,this.wa+=c)};l.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var c=this.pa;this.pa=this.wa;this.wa=c}isNaN(this.wa)&&this.Pa()}};l.prototype.Pa=function(){this.wa=this.pa=NaN};l.prototype.B=function(){return isNaN(this.pa)};l.prototype.$b=function(c){"number"===typeof c?
this.B()?this.wa=this.pa=c:this.Nk(c):c.B()||(this.B()?(this.pa=c.pa,this.wa=c.wa):(this.pa>c.pa&&(this.pa=c.pa),this.wa<c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa()))};l.prototype.Nk=function(c){c<this.pa?this.pa=c:c>this.wa&&(this.wa=c)};l.prototype.contains=function(c){return"number"===typeof c?c>=this.pa&&c<=this.wa:c.pa>=this.pa&&c.wa<=this.wa};l.prototype.Fa=function(c){this.B()||c.B()?this.Pa():(this.pa<c.pa&&(this.pa=c.pa),this.wa>c.wa&&(this.wa=c.wa),this.pa>this.wa&&this.Pa())};l.prototype.X=
function(c){this.B()||(this.pa-=c,this.wa+=c,this.wa<this.pa&&this.Pa())};l.prototype.zr=function(){return this.B()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.pa)+Math.abs(this.wa)+1)};l.prototype.FB=function(c,a){c>a?(this.pa=a,this.wa=c):(this.pa=c,this.wa=a)};l.prototype.Kt=function(c){return g.P.Tk(c,this.pa,this.wa)};l.prototype.S=function(){return this.wa-this.pa};l.prototype.tf=function(){return.5*(this.pa+this.wa)};l.prototype.Nb=function(c){return c==this?!0:c instanceof l?
this.B()&&c.B()?!0:this.pa!=c.pa||this.wa!=c.wa?!1:!0:!1};l.prototype.dc=function(){return g.P.wj(g.P.wj())};return l}();g.Oc=z})(R||(R={}));(function(g){var z=new g.Oc,l=new g.Oc,c=function(){return function(){this.oe=null;this.pb=-1;this.tb=new g.zb;this.lA=55555555;this.Vv=this.Xv=!1;this.Wf=new g.Oc;this.Wf.FB(0,0)}}();g.EY=c;var a=function(){function b(d,e,f){this.g=d;this.Jk=NaN;this.IH=this.Mq=0;this.JH=NaN;this.ra=e;this.Pq=10*e;this.KH=this.LH=NaN;this.sg=!1;this.Fm=this.ht=this.No=this.Zs=
this.Ys=-1;this.bA=f;this.OA=new c;this.TH=new c;g.P.truncate(3*d.gd/2)}b.prototype.hG=function(d,e,f,h){d.oe=null===h?null:h[f[5*e]];d.Vv=null!=d.oe;d.Vv||(h=f[5*e+2],-1!==h&&this.g.hW(f[5*e],f[5*h],d.tb),d.oe=d.tb,d.Wf.FB(d.tb.ta,d.tb.qa),d.Wf.wa+=this.ra,d.tb.mI(),d.Xv=d.tb.ma==d.tb.oa,d.Xv||(d.lA=(d.tb.qa-d.tb.ta)/(d.tb.ma-d.tb.oa)))};b.prototype.JO=function(d,e){var f=d.Br(e,this.ra,!0);if(0!=f)return 2==f?this.Ly():this.zi();d.$p(ya);d.Vr(na);e.$p(ta);e.Vr(Da);ra.na(this.Mq,this.Jk);ya.rb(ta)&&
this.Jk==ya.y?0>na.compare(Da)?ra.N(na):ra.N(Da):ya.rb(Da)&&this.Jk==ya.y?0>na.compare(ta)?ra.N(na):ra.N(ta):ta.rb(na)&&this.Jk==ta.y?0>ya.compare(Da)?ra.N(ya):ra.N(Da):na.rb(Da)&&this.Jk==na.y&&(0>ya.compare(ta)?ra.N(ya):ra.N(ta));return d.Me(ra.y,ra.x)<e.Me(ra.y,ra.x)?-1:1};b.prototype.HO=function(d,e){if(d.tb.oa==e.tb.oa&&d.tb.ta==e.tb.ta)return d.tb.ma==e.tb.ma&&d.tb.qa==e.tb.qa?this.bA?this.Ly():0:this.KE(d,e);if(d.tb.ma==e.tb.ma&&d.tb.qa==e.tb.qa)return this.JE(d,e);var f=this.JE(d,e);d=this.KE(d,
e);return 0>f&&0>d?-1:0<f&&0<d?1:this.zi()};b.prototype.DO=function(d,e){if(d.qa>e.qa){if(e.qa>e.ta&&e.ma-e.oa<2*this.ra&&d.xi(e.qa,e.ma,this.ra))return this.zi()}else if((e.ma-e.oa)/(e.qa-e.ta)*(d.qa-d.ta)<this.Pq&&e.xi(d.qa,d.ma,this.ra))return this.zi();return 1};b.prototype.EO=function(d,e){if(d.ta<e.ta){if(e.qa>e.ta&&e.ma-e.oa<2*this.ra&&d.xi(e.qa,e.ma,this.ra))return this.zi()}else if((e.ma-e.oa)/(e.qa-e.ta)*(d.ta-d.qa)<this.Pq&&e.xi(d.ta,d.oa,this.ra))return this.zi();return-1};b.prototype.FO=
function(d,e){var f=new g.h;f.vc(e.xc(),e.bc());f.cr();f.normalize();var h=new g.h;h.vc(d.bc(),e.bc());var k=new g.h;k.vc(d.xc(),e.bc());h=h.Sh(f);f=k.Sh(f);k=Math.abs(h);var m=Math.abs(f);if(k<m){if(k<this.Pq&&e.xi(d.ta,d.oa,this.ra))return this.zi()}else if(m<this.Pq&&e.xi(d.qa,d.ma,this.ra))return this.zi();return 0>h&&0>f?-1:0<h&&0<f?1:this.zi()};b.prototype.IE=function(d,e){return d.oa==e.oa&&d.ta==e.ta?this.DO(d,e):d.ma==e.ma&&d.qa==e.qa?this.EO(d,e):this.FO(d,e)};b.prototype.GO=function(d,
e){return d.ma==e.ma&&d.qa==e.qa&&d.oa==e.oa&&d.ta==e.ta?this.bA?this.Ly():0:this.zi()};b.prototype.JE=function(d,e){var f=1;if(d.tb.oa<e.tb.oa){f=-1;var h=d;d=e;e=h}d=d.tb;h=e.tb;var k=d.ta-h.ta;e=e.lA*(d.oa-h.oa);var m=this.Pq;return k<e-m?-f:k>e+m?f:h.xi(d.ta,d.oa,this.ra)?this.zi():k<e?-f:f};b.prototype.KE=function(d,e){var f=1;if(e.tb.ma<d.tb.ma){f=-1;var h=d;d=e;e=h}d=d.tb;h=e.tb;var k=d.qa-h.ta;e=e.lA*(d.ma-h.oa);var m=this.Pq;return k<e-m?-f:k>e+m?f:h.xi(d.qa,d.ma,this.ra)?this.zi():k<e?-f:
f};b.prototype.Ly=function(){this.sg=!0;this.Pi=new g.Nd(5,this.No,this.ht);return-1};b.prototype.zi=function(){this.sg=!0;this.bA?this.Pi=new g.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1;return-1};b.prototype.IO=function(d,e,f,h){if(this.sg)return-1;var k=this.JH==this.Jk&&this.IH==this.Mq;if(k&&d==this.Ys)var m=this.KH;else m=NaN,this.Ys=-1;k&&e==this.Zs?k=this.LH:(k=NaN,this.Zs=-1);f.oe.UI(z);h.oe.UI(l);if(z.wa<l.pa)return-1;if(l.wa<z.pa)return 1;this.JH=this.Jk;this.IH=this.Mq;isNaN(m)&&
(this.Ys=d,this.KH=m=d=f.oe.Me(this.Jk,this.Mq));isNaN(k)&&(this.Zs=e,this.LH=k=d=h.oe.Me(this.Jk,this.Mq));return Math.abs(m-k)<=this.ra?this.JO(f.oe,h.oe):m<k?-1:m>k?1:0};b.prototype.Mr=function(){this.sg=!1};b.prototype.tm=function(){return this.Pi};b.prototype.VJ=function(d,e){this.Jk=d;this.Mq=e;this.ht=this.No=this.Zs=this.Ys=-1};b.prototype.compare=function(d,e,f){if(this.sg)return-1;d=d.ka(f);this.Fm=f;return this.ME(e,e,d,d)};b.prototype.ME=function(d,e,f,h){if(this.No==e)var k=this.OA;else this.No=
e,k=this.OA,this.OA.pb=d,this.hG(k,e,this.g.ud.o,this.g.Te);if(null==m){this.ht=h;var m=this.TH;this.TH.pb=f;this.hG(m,h,this.g.ud.o,this.g.Te)}if(k.Vv||m.Vv)return this.IO(e,h,k,m);if(k.Wf.wa<m.Wf.pa)return-1;if(m.Wf.wa<k.Wf.pa)return 1;d=k.Xv?1:0;d|=m.Xv?2:0;return 0==d?this.HO(k,m):1==d?this.IE(k.tb,m.tb):2==d?-1*this.IE(m.tb,k.tb):this.GO(k.tb,m.tb)};return b}();g.PC=a})(R||(R={}));(function(g){var z=function(){function l(c,a){this.g=c;this.ra=a;this.sg=!1;this.No=-1;this.Wf=new g.Oc;this.Iq=
new g.h;this.Iq.Sc();this.je=new g.zb;this.Fm=-1;this.wA=1.7976931348623157E308}l.prototype.Mr=function(){this.sg=!1;this.wA=1.7976931348623157E308};l.prototype.Fh=function(c){this.Iq.N(c)};l.prototype.compare=function(c,a){return this.NE(a,c.ka(a))};l.prototype.NE=function(c,a){var b=null!=this.g.cc(a);b||(this.g.fd(a,this.je),this.Wf.FB(this.je.ta,this.je.qa));if(b)throw g.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=
c,this.sg=!0,0;this.je.mI();b=this.je.bc();a=new g.h;a.vc(this.je.xc(),b);a.cr();var d=new g.h;d.vc(this.Iq,b);b=a.Sh(d);b/=a.length();return b<10*-this.ra?-1:b>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&(a=Math.abs(b),a<this.wA&&(this.Fm=c,this.wA=a),this.sg=!0,a<.25*this.ra)?0:0>b?-1:1};return l}();g.WL=z})(R||(R={}));(function(g){function z(c,a,b,d){b=new Float64Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.Pb=this.rk=!1;this.o=null;var b=a;2>b&&(b=2);this.o=new Float64Array(b);
this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.ga("invalid_call");if(b<a||b>d||a>d)throw g.i.O();a!=b&&d!=b&&(this.pi(a,b-a,1),this.pi(b,d-b,1),this.pi(a,d-a,1))};c.rf=function(a,b){var d=new c(a),e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Dn=function(a){var b=new c(0);b.o=new Float64Array(a.o);b.size=a.size;return b};c.Nr=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.o=new Float64Array(b);d.o.set(a.o.length<=b?a.o:
a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?(a=new Float64Array(a),a.set(this.o),this.o=a):this.o=new Float64Array(a)))};c.prototype.read=function(a){return this.o[a]};c.prototype.uc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=
b};c.prototype.Vt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.o[this.size-1]=a};c.prototype.BB=function(a){return c.Nr(this,a)};c.prototype.gg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=new Float64Array(this.o,0,a);this.o=
d}}else{a>this.o.length&&(d=g.P.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Float64Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Dh=function(a){(null==this.o||a>this.o.length)&&this.resize(a);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.rr=function(a,b){this.write(a,b)};c.prototype.Cn=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.P.wj(this.read(b));return a};c.prototype.Nb=
function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.O();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+k+m]=a.o[b+e+m]}}};c.prototype.On=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();if(!f&&
(1>h||0!=e%h))throw g.i.O();var m=this.size-k;m<e&&this.resize(this.size+e-m);z(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h)for(f-=h,m=0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]};c.prototype.Dz=function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?this.resize(this.size+2*e):this.size+=2*e;z(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<
e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=h.y,k--}};c.prototype.Nn=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;z(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.xj=function(a,b,d){if(this.Pb)throw g.i.Hb();z(this.o,a+2,a,a+(d-a));this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.Wt=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.O();if(!f&&(0>=h||0!=b%h))throw g.i.O();if(d.size<e+b)throw g.i.O();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Cr(a,b,e,f,h);else if(f)for(f=0;f<
b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.P.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.Gn=function(a,b,d){if(this.Pb)throw g.i.Hb();if(a+b>this.size)throw g.i.Hb();0<d-(a+b)&&z(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.pi=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=this.o[a+f+h];this.o[a+
f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Yj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.O();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Cr=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,d+b),a),!e)for(d=a,a=a+b-f,e=0,b=g.P.truncate(b/2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.qC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.O();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),f||
(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+1]=d[e].y,a+=f};c.prototype.pC=function(a,b,d){if(0>a||0>b)throw g.i.O();if(0!=b){this.size<(b<<1)+a&&this.resize((b<<1)+a);b+=0;for(var e=0;e<b;e++)this.o[a]=d[e][0],this.o[a+1]=d[e][1],a+=2}};c.prototype.Xw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.O();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],e--};c.prototype.pB=function(a,b,d){if(0>a||0>b||this.size<(b>>1)+a)throw g.i.O();if(0!=
b){b=0+b;for(var e=0;e<b;e++)d[e][0]=this.o[a],d[e][1]=this.o[a+1],a+=2}};c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)};c.prototype.ix=function(){this.rk=this.Pb=!0};c.prototype.Wd=function(a,b,d){Array.prototype.sort.call(this.o.subarray(a,b),d)};c.prototype.Vp=function(){return 1};return c}();g.ce=l})(R||(R={}));(function(g){function z(c,a,b,d){b=new Int32Array(c.subarray(b,d));c.set(b,a)}g.nY=function(){return function(){this.random=1973}}();var l=function(){function c(a){this.Pb=
this.rk=!1;this.o=null;var b=a;2>b&&(b=2);this.o=new Int32Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.ga("invalid_call");if(b<a||b>d||a>d)throw g.i.O();a!=b&&d!=b&&(this.pi(a,b-a,1),this.pi(b,d-b,1),this.pi(a,d-a,1))};c.rf=function(a,b){var d=new c(a),e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Dn=function(a){var b=new c(0);b.o=new Int32Array(a.o);b.size=a.size;return b};c.Nr=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;
2>b&&(b=2);d.o=new Int32Array(b);d.o.set(a.o.length<=b?a.o:a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?(a=new Int32Array(a),a.set(this.o),this.o=a):this.o=new Int32Array(a)))};c.prototype.read=function(a){return this.o[a]};c.prototype.uc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=
function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.Vt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.o[this.size-1]=a};c.prototype.BB=function(a){return c.Nr(this,a)};c.prototype.gg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=
new Int32Array(this.o,0,a);this.o=d}}else{a>this.o.length&&(d=g.P.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Int32Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Dh=function(a){(null==this.o||a>this.o.length)&&this.resize(a);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.rr=function(a,b){this.write(a,b)};c.prototype.Cn=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.P.Vh(this.read(b),
a);return a};c.prototype.Nb=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.O();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+k+m]=a.o[b+e+m]}}};c.prototype.On=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();
if(!f&&(1>h||0!=e%h))throw g.i.O();z(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h){f-=h;for(var m=0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]}};c.prototype.Dz=function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?this.resize(this.size+2*e):this.size+=2*e;z(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=
h.y,k--}};c.prototype.Nn=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;z(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.xj=function(a,b,d){if(this.Pb)throw g.i.Hb();z(this.o,a+2,a,a+(d-a));this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.Wt=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.O();if(!f&&(0>=h||0!=b%h))throw g.i.O();if(d.size<e+b)throw g.i.O();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Cr(a,b,e,f,h);else if(f)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+
b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.P.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.Gn=function(a,b,d){if(this.Pb)throw g.i.Hb();if(a+b>this.size)throw g.i.Hb();0<d-(a+b)&&z(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.pi=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=this.o[a+f+h];this.o[a+f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Yj=
function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.O();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Cr=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,d+b),a),!e)for(d=a,a=a+b-f,e=0,b=g.P.truncate(b/2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.qC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.O();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),f||(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+
1]=d[e].y,a+=f};c.prototype.Xw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.O();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],e--};c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)};c.prototype.ix=function(){this.rk=this.Pb=!0};c.prototype.Wd=function(a,b,d){10>b-a?c.mG(this.o,a,b,d):c.lB(this.o,a,b-1,d)};c.prototype.Vp=function(){return 2};c.prototype.Gc=function(){return this.o[this.size-1]};c.prototype.Jf=function(){this.resize(this.size-
1)};c.prototype.XW=function(a){this.o[this.size-1]=a};c.prototype.NV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]);this.resize(this.size-1)};c.prototype.gF=function(a){for(var b=0,d=this.size;b<d;b++)if(this.o[b]==a)return b;return-1};c.prototype.cG=function(a){return 0<=this.gF(a)};c.mG=function(a,b,d,e){for(var f=b;f<d;f++){for(var h=a[f],k=f-1;k>=b&&0<e(a[k],h);)a[k+1]=a[k],k--;a[k+1]=h}};c.sx=function(a,b,d){var e=a[d];a[d]=a[b];a[b]=e};c.lB=function(a,b,d,e){if(!(b>=d))for(;;){if(9>
d-b){c.mG(a,b,d+1,e);break}var f=a[b];c.sx(a,b,d);for(var h=b,k=b;k<d;k++)0>=e(a[k],f)&&(c.sx(a,h,k),h+=1);c.sx(a,h,d);h-b<d-h?(c.lB(a,b,h-1,e),b=h+1):(c.lB(a,h+1,d,e),d=h-1)}};return c}();g.ja=l})(R||(R={}));(function(g){function z(c,a,b,d){b=new Int8Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.o=null;var b=a;2>b&&(b=2);this.o=new Int8Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.ga("invalid_call");if(b<a||b>d||a>d)throw g.i.O();a!=b&&d!=b&&
(this.pi(a,b-a,1),this.pi(b,d-b,1),this.pi(a,d-a,1))};c.rf=function(a,b){var d=new c(a),e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Dn=function(a){var b=new c(0);b.o=new Int8Array(a.o);b.size=a.size;return b};c.Nr=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.o=new Int8Array(b);d.o.set(a.o.length<=b?a.o:a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?
(a=new Int8Array(a),a.set(this.o),this.o=a):this.o=new Int8Array(a)))};c.prototype.read=function(a){return this.o[a]};c.prototype.uc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.Vt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);
this.o[this.size-1]=a};c.prototype.BB=function(a){return c.Nr(this,a)};c.prototype.gg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=new Int8Array(this.o,0,a);this.o=d}}else{a>this.o.length&&(d=g.P.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Int8Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<
a;e++)d[e]=b}this.size=a};c.prototype.Dh=function(a){(null==this.o||a>this.o.length)&&this.resize(a);if(this.rk)throw g.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.rr=function(a,b){this.write(a,b)};c.prototype.Cn=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.P.Vh(this.read(b),a);return a};c.prototype.Nb=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=
a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.O();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+k+m]=a.o[b+e+m]}}};c.prototype.On=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();if(!f&&(1>h||0!=e%h))throw g.i.O();z(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h){f-=
h;for(var m=0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]}};c.prototype.Nn=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;z(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.Dz=function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?this.resize(this.size+2*e):this.size+=2*e;z(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=h.y,k--}};c.prototype.xj=function(a,
b,d){if(this.Pb)throw g.i.Hb();z(this.o,a+2,a,a+(d-a));this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.Wt=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.O();if(!f&&(0>=h||0!=b%h))throw g.i.O();if(d.size<e+b)throw g.i.O();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Cr(a,b,e,f,h);else if(f)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.P.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.Gn=
function(a,b,d){if(this.Pb)throw g.i.Hb();if(a+b>this.size)throw g.i.Hb();0<d-(a+b)&&z(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.pi=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=this.o[a+f+h];this.o[a+f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Yj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.O();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Cr=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,
d+b),a),!e)for(d=a,a=a+b-f,e=0,b=g.P.truncate(b/2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.qC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.O();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),f||(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+1]=d[e].y,a+=f};c.prototype.Xw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.O();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],
e--};c.prototype.clear=function(a){a?this.resize(0):this.Dh(0)};c.prototype.ix=function(){this.rk=this.Pb=!0};c.prototype.Wd=function(a,b,d){b=this.o.subarray(a,b);Array.prototype.sort.call(b,d);this.o.set(b,a)};c.prototype.uJ=function(a,b){if(this.Pb)throw g.i.ga("invalid call. Attribute Stream is read only.");this.o[a]|=b};c.prototype.FE=function(a,b){if(this.Pb)throw g.i.ga("invalid call. Attribute Stream is read only.");this.o[a]&=~b};c.prototype.Vp=function(){return 1};return c}();g.rn=l})(R||
(R={}));(function(g){g.Zc=function(){function z(){}z.Or=function(l,c){return g.rn.rf(l,c)};z.Fn=function(l,c){return g.ce.rf(l,c)};z.kP=function(l,c,a){switch(l){case 1:l=g.ce.rf(c,a);break;case 2:l=g.ja.rf(c,a);break;case 4:l=g.rn.rf(c,a);break;default:throw g.i.Ra();}return l};z.TE=function(l,c){return z.kP(g.sa.Vp(l),c*g.sa.Wa(l),g.sa.te(l))};z.Qh=function(l,c){return g.ja.rf(l,c)};z.lI=function(l){var c,a=[];for(c=0;c<l;c++)a.push(null);return a};return z}()})(R||(R={}));(function(g){g.ha=function(){return function(z){void 0===
z&&(z=0);this.u=z}}()})(R||(R={}));(function(g){g.IL=function(){function z(){}z.bind=function(l){g.Tc=l.PeDefs;g.qf=l.PeFactory;g.IC=l.PeVertcs;g.gj=l.PeCSTransformations;g.HC=l.PeGTTransformations;g.GL=l.PeGeogtran;g.FL=l.PeFactoryCodechange;g.GC=l.PeGCSExtent;g.Eg=l.PePCSInfo;g.HL=l.PeHorizon;g.EL=l.PeCoordsys;g.np=l.PeGTlistExtended;g.np.PE_GTLIST_OPTS_USE_DEFAULT=128;g.qf.initialize(null);g.Lx=l.PeGTlistExtendedEntry;g.qf.fromString(g.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')};return z}();g.qf=null;
g.IC=null;g.EL=null;g.HL=null;g.Eg=null;g.np=null;g.Lx=null;g.GC=null;g.FL=null;g.GL=null;g.Tc=null;g.HC=null;g.gj=null})(R||(R={}));(function(g){var z=function(){function l(){}l.Mb=function(c,a){return 0<=a?l.R(c):-l.R(c)};l.R=function(c){return 0>c?-c:c};l.vi=function(c){return 3.552713678800501E-15>c};l.FC=function(c,a,b){return l.R(c-a)<=b*(1+(l.R(c)+l.R(a))/2)};l.$=function(c,a){return l.FC(c,a,3.552713678800501E-15)};l.AL=function(c){return 3.552713678800501E-15>=l.R(c)};l.Dd=function(c){return l.AL(c)};
return l}();g.s=z;g.F=function(){function l(){}l.ip=function(c,a){c=z.R(c);a=z.R(a);var b=0;0!=c+a&&(c>a?(b=a/c,b=c*Math.sqrt(1+b*b)):(b=c/a,b=a*Math.sqrt(1+b*b)));return b};l.Yq=function(c,a,b,d,e){for(var f=[0,0,0],h=[0,0,0],k=0;2>=k;k++)a[k]-=c[k],b[k]-=a[k];b=f[1]*h[2]-f[2]*h[1];a=f[2]*h[0]-f[0]*h[2];f=f[0]*h[1]-f[1]*h[0];c=-1*(b*c[0]+a*c[1]+f*c[2]);d[0]=b;d[1]=a;d[2]=f;d[3]=c;h=l.qn(d);d[0]/=h;d[1]/=h;d[2]/=h;d[3]/=h;0!=e&&(h=z.Dd(f)?z.Dd(c)?z.Mb(1,a):-z.Mb(1,c):z.Mb(1,f),h*=z.Mb(1,e),d[0]*=
h,d[1]*=h,d[2]*=h,d[3]*=h)};l.yx=function(c,a,b){b[0]=c[1]*a[2]-a[1]*c[2];b[1]=c[2]*a[0]-a[2]*c[0];b[2]=c[0]*a[1]-a[0]*c[1]};l.Ut=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]};l.qn=function(c){return l.ip(l.ip(c[0],c[1]),c[2])};l.el=function(c,a,b,d,e,f,h,k){c=l.n(c,a,b);var m=Math.cos(b);f.u=(c+e)*m*Math.cos(d);h.u=(c+e)*m*Math.sin(d);k.u=(c*(1-a)+e)*Math.sin(b)};l.eO=function(c,a,b,d,e,f,h){var k=l.ip(a,b),m=1*Math.sqrt(1-c),n=m/1;if(z.$(k,0))f.u=0,e.u=z.Mb(1.570796326794897,d),h.u=z.R(d)-
m;else{f.u=Math.atan2(b,a);b=Math.atan2(1*d,m*k);f=Math.cos(b);var p=Math.sin(b);a=m*c/(1-c);c*=1;b=Math.atan2(d+a*p*p*p,k-c*f*f*f);3.141592653589793<z.R(b)&&(b=z.Mb(3.141592653589793,b)-b);b=Math.atan(n*Math.tan(b));p=Math.sin(b);f=Math.cos(b);e.u=Math.atan2(d+a*p*p*p,k-c*f*f*f);1.570796326794897<z.R(e.u)&&(e.u=z.Mb(3.141592653589793,e.u)-e.u);b=Math.atan(n*Math.tan(e.u));p=Math.sin(b);f=Math.cos(b);h.u=(d-m*p)*Math.sin(e.u)+(k-1*f)*Math.cos(e.u)}};l.n=function(c,a,b){b=Math.sin(b);return c/Math.sqrt(1-
a*b*b)};l.pt=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))};l.Sj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))};l.Tq=function(c,a){if(z.vi(c)||0==a||z.$(z.R(a),1.570796326794897))return a;if(.006884661117170036>c){var b=Math.sqrt(1-c),d=(1-b)/(1+b),e=d*d,f=d*e,h=d*f,k=d*h,m=d*k,n=d*m,p=1.572916666666667*f-3.2578125*k+4.295068359375*n;c=2.142578125*h-6.071484375*m;b=3.129296875*k-11.249837239583334*n;var q=4.775276692708333*m,t=7.958636765252976*n,v=Math.cos(2*a);
return a+Math.sin(2*a)*(1.5*d-.84375*f+.525390625*k-.2688395182291667*n-p+b-t+v*(2*(1.3125*e-1.71875*h+1.650146484375*m)-4*c+6*q+v*(4*p-12*b+24*t+v*(8*c-32*q+v*(16*b-80*t+v*(32*q+64*v*t))))))}b=1-c;d=c/2;e=z.R(a);f=e*l.av(c)/(1.570796326794897*b);h=9999;m=e;for(e=0;1E-16<h&&50>e;e++)n=l.w(c,m),k=(l.fG(m,c)-d*Math.sin(2*m)/n)/b-f,n=1/(n*n*n),p=k/n,k=m-p,h=z.R(p),m=k;return 0<=a?m:-m};l.lW=function(c,a){return z.vi(a)?c:c*l.av(a)/1.570796326794897};l.ca=function(c){c=l.kF(c,6.283185307179586);return 0>
c?c+6.283185307179586:3.141592653589793>z.R(c)||z.$(z.R(c),3.141592653589793)?c:c-6.283185307179586};l.kF=function(c,a){return c-Math.floor(c/a)*a};l.Ch=function(c,a){if(.006884661117170036>a){a=Math.sqrt(1-a);a=(1-a)/(1+a);var b=a*a,d=b*b;return c/(1+a)*(1+.25*b+.015625*d+.00390625*b*d)*1.570796326794897}return c*l.av(a)};l.Xq=function(c,a){var b=z.Mb(1,Math.sin(a));a=z.R(l.kF(a,3.141592653589793));a=1.570796326794897>=a?a:3.141592653589793-a;return(z.$(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-
c)*Math.tan(a)))*b};l.q=function(c,a,b){if(.006884661117170036>a){a=Math.sqrt(1-a);a=(1-a)/(1+a);var d=a*a,e=a*d,f=a*e,h=a*f,k=a*h,m=a*k,n=-.7291666666666666*e+.2278645833333333*h+.03987630208333334*m,p=.615234375*f-.21533203125*k,q=-.54140625*h+.20302734375*m,t=.48876953125*k,v=-.4488699776785715*m,F=Math.cos(2*b);return c/(1+a)*((1+.25*d+.015625*f+.00390625*k)*b+Math.sin(2*b)*(-1.5*a+.1875*e+.0234375*h+.00732421875*m-n+q-v+F*(2*(.9375*d-.234375*f-.03662109375*k)-4*p+6*t+F*(4*n-12*q+24*v+F*(8*p-
32*t+F*(16*q-80*v+F*(32*t+64*F*v)))))))}return c*(l.fG(b,a)-.5*a*Math.sin(2*b)/l.w(a,b))};l.w=function(c,a){a=Math.sin(a);return Math.sqrt(1-c*a*a)};l.av=function(c){return z.FC(c,1,2.220446049250313E-16)?1:1>c?l.Zw(0,1-c)-c/3*l.Ww(0,1-c):NaN};l.fG=function(c,a){var b=z.Mb(1,c);c=z.R(c);var d=Math.floor(c/1.570796326794897);if(1<a)a=0==c?0:NaN;else if(z.Dd(d))c=l.sin(c),a=c*l.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Ww(1-c*c,1-a*c*c);else{var e=g.P.truncate(d%2),f=l.av(a);0<e?(c=Math.sin(1.570796326794897*(d+
1)-c),a=c*l.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Ww(1-c*c,1-a*c*c),a=f*(d+1)-a):(c=Math.sin(c-1.570796326794897*d),a=c*l.Zw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Ww(1-c*c,1-a*c*c),a=f*d+a)}return a*b};l.sin=function(c){c=l.ca(c);var a=z.Mb(1,c);c=z.R(c);return z.$(c,3.141592653589793)?0:z.$(c,1.570796326794897)?1*a:Math.sin(c)*a};l.Ww=function(c,a){var b=c,d=a,e=1;a=0;c=1;for(var f,h,k,m;;){f=.2*(b+d+3*e);h=(f-b)/f;k=(f-d)/f;m=(f-e)/f;if(1E-4>z.R(h)&&1E-4>z.R(k)&&1E-4>z.R(m))break;m=Math.sqrt(d);f=Math.sqrt(e);m=Math.sqrt(b)*
(m+f)+m*f;a+=c/(f*(e+m));c*=.25;b=.25*(b+m);d=.25*(d+m);e=.25*(e+m)}b=h*k;e=m*m;d=b-e;e=b-6*e;h=e+d+d;return 3*a+c*(1+e*(-.2142857142857143+.10227272727272728*e-.1730769230769231*m*h)+m*(.1666666666666667*h+m*(-.4090909090909091*d+.1153846153846154*m*b)))/(f*Math.sqrt(f))};l.Zw=function(c,a){for(var b,d,e,f,h=1;;h=.25*(h+b)){b=(c+a+h)/3;d=2-(b+c)/b;e=2-(b+a)/b;f=2-(b+h)/b;if(1E-4>z.R(d)&&1E-4>z.R(e)&&1E-4>z.R(f))break;b=Math.sqrt(a);d=Math.sqrt(h);b=Math.sqrt(c)*(b+d)+b*d;c=.25*(c+b);a=.25*(a+b)}c=
d*e-f*f;a=d*e*f;return(1+(.04166666666666666*c-.1-.06818181818181818*a)*c+.07142857142857142*a)/Math.sqrt(b)};l.Sw=function(c,a){if(z.vi(c)||0==a||z.$(z.R(a),1.570796326794897))return a;if(.006884661117170036>c){var b=c*c,d=c*b,e=c*d,f=c*e,h=c*f,k=c*h,m=-(.02708333333333333*d+.03430059523809524*e+.03149181547619048*f+.02634359154541446*h+.02156896735835538*k),n=.007669890873015873*e+.01299603174603175*f+.0148051353064374*h+.01454454953803912*k,p=-(.002275545634920635*f+.004830845032667949*h+.006558395368616723*
k),q=6.957236677288761E-4*h+.001775193002406544*k,t=-(2.17324089394402E-4*k),v=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*b+.09375*d+.04878472222222222*e+.02916666666666667*f+.01938905423280423*h+.01388255931712963*k)-m+p-t+v*(2*(.1041666666666667*b+.0875*d+.06050347222222222*e+.04151785714285714*f+.02958958540013228*h+.02203667534722222*k)-4*n+6*q+v*(4*m-12*p+24*t+v*(8*n-32*q+v*(16*p-80*t+v*(32*q+64*v*t))))))}0==a||z.$(z.R(a),1.570796326794897)?b=a:(d=Math.sqrt(c),e=d*Math.sin(a),
b=Math.tan(.7853981633974483+a/2)*Math.pow((1-e)/(1+e),d/2),b=2*Math.atan(b)-1.570796326794897);return b};l.tO=function(c,a){if(z.vi(c)||0==a||z.$(z.R(a),1.570796326794897))return a;if(.006884661117170036>c){v=c*c;p=c*v;q=c*p;var b=c*q;t=c*b;var d=c*t,e=.05833333333333333*p+.07232142857142858*q+.05634300595238095*b+.0355325796406526*t+.020235546186067*d,f=.02653149801587302*q+.04379960317460317*b+.0429211791776896*t+.03255384637546096*d,h=.01294022817460318*b+.02668104344536636*t+.03155651254609588*
d,k=.00659454790965208*t+.0163075268674227*d,m=.003463473736911237*d,n=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*v+.08333333333333333*p+.03611111111111111*q+.01875*b+.01195601851851852*t+.008863673941798942*d-e+h-m+n*(2*(.1458333333333333*v+.1208333333333333*p+.07039930555555556*q+.03616071428571429*b+.01839451058201058*t+.01017113095238095*d)-4*f+6*k+n*(4*e-12*h+24*m+n*(8*f-32*k+n*(16*h-80*m+n*(32*k+64*n*m))))))}var p=Math.sqrt(c),q=p/2,t=Math.tan(.7853981633974483+a/2);c=0;e=
1;for(var v=a;0!=e;v=d)if(b=p*Math.sin(v),d=t*Math.pow((1+b)/(1-b),q),d=2*Math.atan(d)-1.570796326794897,c++,z.$(d,v)||3E4<c)e=0;return v};return l}()})(R||(R={}));(function(g){var z=function(){function l(c){this.wl=this.Ws=null;this.Kv=!1;this.BA=this.CA=0;this.CH=new g.h;this.SH=new g.h;this.FA=!1;this.xq=new g.l;this.rH=this.uw=0;this.vw=null;this.Bl=!1;this.Go=null;this.Xz=0;this.Re=c;this.Cs=g.Ab.zv(this.Re,0,!0);this.CH.Sc();this.SH.Sc();this.MH=NaN;var a=c.getCode();0<a?(this.Mk=a,g.qf.getCode(c)):
this.Mk=g.qf.getCode(c);0>this.Mk&&(this.Mk=0);var b=this.Re.getType();this.eH=b==g.Tc.PE_TYPE_PROJCS?2:1;if(b==g.Tc.PE_TYPE_PROJCS&&!c.loadConstants())throw g.i.O("PeProjcs.loadConstants failed");a=b==g.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs();b!=g.Tc.PE_TYPE_GEOGCS&&g.qf.getCode(a);this.Go=c.getUnit();this.MH=a.getPrimem().getLongitude();this.rH=c=a.getUnit().getUnitFactor();c=Math.PI/(180*c);1E-10>Math.abs(c-1)&&(c=1);this.BA=c;0!=(b&g.Tc.PE_TYPE_PROJCS)?(a=this.Re,this.CA=1/a.getUnit().getUnitFactor(),
this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=g.Eg.generate(a,g.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=g.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,b=1/a.getUnit().getUnitFactor(),this.uw=.001/a.getDatum().getSpheroid().getAxis()*b,this.Xz=0);this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}l.prototype.cs=function(){return this.Mk};l.prototype.mk=function(){return this.vw};l.Ky=function(c,a){return c==
a?!0:null!=c&&null!=a&&0==c.Mk&&0==a.Mk?c.Cs===a.Cs:!1};l.prototype.Xc=function(){return this.Bl};l.prototype.ih=function(c){c.L(this.uo)};l.prototype.rv=function(){return this.uo.v};l.prototype.qv=function(){return this.uo.C};l.prototype.BR=function(c){c.L(this.ww)};l.prototype.hY=function(){var c=this.Re.getType();if(c==g.Tc.PE_TYPE_PROJCS){c=this.Re;var a=this.mk().getCentralMeridian(),b=c.getGeogcs();if(null==b)throw g.i.ga("internal error");b=1/b.getUnit().getUnitFactor()*Math.PI;a=[[a+b,0]];
g.gj.geogToProj(c,1,a);a=a[0][0];b=c.getParameters()[g.Tc.PE_PARM_X0].getValue();var d=this.ol();c=new g.l;d.A(c);d=Math.abs(a-b);a=d+b;b=-1*d+b;d=c.H;c=c.G;var e=new g.l;e.L(b,c,a,d);null==this.uo&&(this.uo=e)}else if(c==g.Tc.PE_TYPE_GEOGCS)b=1/this.Re.getUnit().getUnitFactor()*Math.PI,c=new g.l,c.L(-b,-b/2,b,b/2),null==this.uo&&(this.uo=c);else throw g.i.ga("internal error");};l.prototype.iY=function(){var c=this.Re.getType();if(c==g.Tc.PE_TYPE_PROJCS){var a=this.Re;c=this.mk().getCentralMeridian();
a=a.getGeogcs();if(null==a)throw g.i.ga("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var b=this.Xr(),d=new g.l;b.A(d);b=new g.l;b.L(c-a,d.G,c+a,d.H);null==this.ww&&(this.ww=b)}else if(c==g.Tc.PE_TYPE_GEOGCS)a=1/this.Re.getUnit().getUnitFactor()*Math.PI,c=new g.l,c.L(-a,-a/2,a,a/2),null==this.ww&&(this.ww=c);else throw g.i.ga("internal error");};l.prototype.bf=function(){return this.BA};l.prototype.rm=function(){return this.CA};l.prototype.Xr=function(){if(this.Bl)return this.wl;var c=
this.wl;if(null!=c)return c;this.wx();return this.wl};l.prototype.Yr=function(){if(this.Bl)return null;if(null!=this.wl)return this.TG;this.wx();return this.TG};l.prototype.wx=function(){if(this.Re.getType()==g.Tc.PE_TYPE_PROJCS){var c=this.Re,a=c.getGeogcs(),b=c.horizonGcsGenerate();if(null!=b){var d=b[0].getNump(),e=b[0].getKind();c=0<b[0].getInclusive();var f=this.bf(),h=90*f,k=360*f,m=370*f,n=180*f*g.Tc.PE_HORIZON_DELTA/Math.PI,p=new g.l,q=null;if(1<d)for(var t=1;t<d;t++)if(b[t].getKind()==g.Tc.PE_HORIZON_LINE){null==
q&&(q=new g.Ua);var v=b[t].getCoord();q.rx(v[0][0],v[0][1]);q.Aj(v[1][0],v[1][1])}if(e==g.Tc.PE_HORIZON_RECT)b=b[0].getCoord(),p.L(b[0][0],b[0][1]),p.$b(b[1][0],b[1][1]),Math.abs(p.H-h)<1E-7*n&&(p.H=h),Math.abs(p.G+h)<1E-7*n&&(p.G=-h),p.S()>m&&(b=-400*f,p.L(b,p.G,b+5*k,p.H)),b=new g.Hh(p),null==this.wl&&(this.wl=b,this.Kv=c);else{m=new g.Ea;k=this.mk().isGcsHorizonMultiOverlap();p=g.iu.XE(a,g.ju.Integer64);if(k){m=new g.bL;n=g.Ih.local().W(m,p,null);for(t=0;t<d;t++)if(b[t].getKind()==g.Tc.PE_HORIZON_POLY){a=
b[t].getSize();f=b[t].getCoord();e=[];for(h=0;h<a;h++)e[h]=g.h.construct(f[h][0],f[h][1]);b[t].getInclusive();k&&(f=new g.Ea,f.$k(e,a-1),m.VX(f),n.re())}m=n.next()}else for(t=0;t<d;t++)if(b[t].getKind()==g.Tc.PE_HORIZON_POLY){a=b[t].getSize();f=b[t].getCoord();k=[];for(h=0;h<a;h++)k[h]=g.h.construct(f[h][0],f[h][1]);b[t].getInclusive();m.$k(k,a-1)}c?g.Zj.local().yn(m,p,1):g.mp.local().yn(m,p,1);g.fj.local().yn(m,p,1);null==this.wl&&(this.wl=m,this.Kv=c,this.TG=q)}}}};l.prototype.kv=function(){if(this.Bl)return this.Kv;
null==this.wl&&this.wx();return this.Kv};l.prototype.yK=function(){if(2==this.eH){var c=this.Re.horizonPcsGenerate();if(null!=c){var a=c[0].getKind();c[0].getInclusive();var b=c[0].getNump(),d=!1;if(a==g.Tc.PE_HORIZON_RECT)c=c[0].getCoord(),b=new g.l,b.L(c[0][0],c[0][1]),b.$b(c[1][0],c[1][1]),c=new g.Hh(b);else{a=-1;for(d=0;d<b;d++)c[d].getKind()==g.Tc.PE_HORIZON_POLY&&(a=d);d=c[a].getSize()-1;c=c[a].getCoord();b=[];for(a=0;a<d;a++)b[a]=g.h.construct(c[a][0],c[a][1]);c=a=new g.Ea;a.$k(b,d);d=!0}this.mk().isDensificationNeeded()&&
(b=1E5*this.rm(),c=g.Zl.local().W(c,b,null));d&&(d=new g.Hh,c.dn(d),c.He(),c.Rb(),c.kR(),g.Zj.local().yn(c,null,1));null==this.Ws&&(this.Ws=c)}}};l.prototype.ol=function(){if(this.Bl)return this.Ws;var c=this.Ws;if(null!=c)return c;this.yK();return this.Ws};l.prototype.jY=function(){if(this.Re.getType()==g.Tc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]];g.gj.geogToProj(this.Re,2,c);var a=this.mk(),b=a.getNorthPoleLocation()!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY;
this.FA||(b&&this.CH.na(c[0][0],c[0][1]),a&&this.SH.na(c[1][0],c[1][1]))}this.FA=!0};l.prototype.xK=function(){if(1==this.eH){var c=400*this.bf();this.xq.L(-c,-c,c,c)}else c=g.Eg.generate(this.Re,g.Eg.PE_PCSINFO_OPTION_DOMAIN),c=g.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.xq.B()&&this.xq.L(c)};l.prototype.cR=function(c){this.Bl&&c.L(this.xq);this.xq.B()&&this.xK();c.L(this.xq)};l.prototype.Wp=function(){return this.MH};l.prototype.Bi=function(){return this.Xz};
l.prototype.Id=function(){return this.Go};l.prototype.Zr=function(){return this.rH};return l}();g.JC=z})(R||(R={}));(function(g){var z=function(){function l(c){this.FT=c;this.Cs=g.Ab.zv(c,0,!0);var a=c.getCode();this.us=0<a?a:g.qf.getCode(c);0>this.us&&(this.us=0);this.Go=a=this.FT.getUnit();this.DH=1/a.getUnitFactor();g.qf.getCode(c)}l.Ky=function(c,a){return c==a?!0:null!=c&&null!=a&&0==c.us&&0==a.us?c.Cs===a.Cs:!1};l.prototype.cs=function(){return this.us};return l}();g.KL=z})(R||(R={}));(function(g){g.$g=
function(){function z(){}z.ub=function(l,c,a,b,d,e,f,h){if(null!=e||null!=f||null!=h){b=g.F.ca(b);c=g.F.ca(c);a=g.F.ca(a);d=g.F.ca(d);1.570796326794897<g.s.R(a)&&(a=g.s.Mb(3.141592653589793,a)-a,c=g.F.ca(c+3.141592653589793));1.570796326794897<g.s.R(d)&&(d=g.s.Mb(3.141592653589793,d)-d,b=g.F.ca(b+3.141592653589793));var k=g.F.ca(b-c);if(g.s.$(a,d)&&(g.s.$(c,b)||g.s.$(g.s.R(a),1.570796326794897)))null!=e&&(e.u=0),null!=f&&(f.u=0),null!=h&&(h.u=0);else{if(g.s.$(a,-d)){if(g.s.$(g.s.R(a),1.570796326794897)){null!=
e&&(e.u=3.141592653589793*l);null!=f&&(f.u=0<a?g.F.ca(3.141592653589793-g.F.ca(b)):g.F.ca(b));null!=h&&(h.u=0<a?g.F.ca(b):g.F.ca(3.141592653589793-g.F.ca(b)));return}if(g.s.$(g.s.R(k),3.141592653589793)){null!=e&&(e.u=3.141592653589793*l);null!=f&&(f.u=0);null!=h&&(h.u=0);return}}var m=1.570796326794897==g.s.R(a)?0:Math.cos(a),n=Math.sin(a),p=1.570796326794897==g.s.R(d)?0:Math.cos(d),q=Math.sin(d),t=1.570796326794897==g.s.R(k)?0:Math.cos(k),v=3.141592653589793==g.s.R(k)?0:Math.sin(k);if(null!=e){var F=
Math.sin((d-a)/2);k=Math.sin(k/2);e.u=2*Math.asin(Math.sqrt(F*F+m*p*k*k))*l}null!=f&&(f.u=g.s.$(g.s.R(a),1.570796326794897)?0>a?b:g.F.ca(3.141592653589793-b):Math.atan2(p*v,m*q-n*p*t));null!=h&&(g.s.$(g.s.R(d),1.570796326794897)?h.u=0>d?c:g.F.ca(3.141592653589793-c):(h.u=Math.atan2(m*v,q*m*t-p*n),h.u=g.F.ca(h.u+3.141592653589793)))}}};z.sf=function(l,c,a,b,d,e,f){if(null!=e||null!=f){c=g.F.ca(c);a=g.F.ca(a);1.570796326794897<g.s.R(a)&&(a=g.s.Mb(3.141592653589793,a)-a,c=g.F.ca(c+3.141592653589793));
g.s.$(g.s.R(a),1.570796326794897)&&(c=0);d=g.F.ca(d);var h=g.s.$(g.s.R(d),1.570796326794897)?0:Math.cos(d),k=g.s.$(g.s.R(d),3.141592653589793)?0:Math.sin(d),m=g.s.$(g.s.R(a),1.570796326794897)?0:Math.cos(a),n=Math.sin(a);l=b/l;b=g.s.$(g.s.R(l),1.570796326794897)?0:Math.cos(l);var p=g.s.$(g.s.R(l),3.141592653589793)?0:Math.sin(l),q=Math.asin(n*b+m*p*h);null!=f&&(f.u=q);null!=e&&(e.u=g.s.$(g.s.R(q),1.570796326794897)?g.s.$(a,-q)?0>q?d:g.F.ca(3.141592653589793-d):c:g.s.$(g.s.R(a),1.570796326794897)&&
g.s.$(l,3.141592653589793)?0>a?d:g.F.ca(3.141592653589793-d):g.F.ca(c+Math.atan2(p*k,m*b-n*p*h)))}};return z}()})(R||(R={}));(function(g){g.Yk=function(){function z(){}z.ub=function(l,c,a,b,d,e,f,h,k){var m=new g.ha(0),n=new g.ha(0),p=[0,0,0],q=[0,0,0],t=[0,0,0],v=new g.ha(0),F=new g.ha(0),W=new g.ha(0),ba=new g.ha(0),aa=new g.ha(0);if(null!=f||null!=h||null!=k)if(g.s.vi(c))g.$g.ub(l,a,b,d,e,f,h,k);else{d=g.F.ca(d);a=g.F.ca(a);var fa=g.F.ca(d-a);if(g.s.$(b,e)&&(g.s.$(a,d)||g.s.$(g.s.R(b),1.570796326794897)))null!=
f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.$(b,-e)){if(g.s.$(g.s.R(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ch(l,c));null!=h&&(h.u=0<b?g.F.ca(3.141592653589793-g.F.ca(d)):g.F.ca(d));null!=k&&(k.u=0<b?g.F.ca(d):g.F.ca(3.141592653589793-g.F.ca(d)));return}g.s.$(g.s.R(fa),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ch(l,c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else if(g.s.$(g.s.R(b),1.570796326794897)||g.s.$(g.s.R(e),1.570796326794897))g.s.$(g.s.R(b),1.570796326794897)?a=d:d=a;var ka=0;if(0>
fa){ka=1;var la=a;a=d;d=la;la=b;b=e;e=la}fa=g.F.pt(c,b);var ma=g.F.pt(c,e);if(null!=h||null!=k)g.$g.ub(l,a,fa,d,ma,null,m,n),m=Math.atan2(Math.sin(m.u)*Math.cos(b-fa),Math.cos(m.u)),n=Math.atan2(Math.sin(n.u)*Math.cos(e-ma),Math.cos(n.u)),0!=ka&&(la=m,m=n,n=la),null!=h&&(h.u=m),null!=k&&(k.u=n);null!=f&&(g.F.el(1,c,b,a,0,W,ba,aa),p[0]=W.u,p[1]=ba.u,p[2]=aa.u,g.F.el(1,c,e,d,0,W,ba,aa),q[0]=W.u,q[1]=ba.u,q[2]=aa.u,t[0]=p[1]*q[2]-q[1]*p[2],t[1]=-(p[0]*q[2]-q[0]*p[2]),t[2]=p[0]*q[1]-q[0]*p[1],c=1-g.F.w(c,
g.F.Xq(c,g.F.Sj(c,Math.acos(t[2]/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))))),c*=2-c,h=Math.atan2(-t[1],-t[0]),t=g.F.ca(h-1.570796326794897),h=g.F.ca(h+1.570796326794897),t=g.s.R(g.F.ca(a-t))<=g.s.R(g.F.ca(a-h))?t:h,g.$g.ub(1,t,0,a,fa,v,null,null),g.$g.ub(1,t,0,d,ma,F,null,null),3.141592653589793<v.u+F.u&&(t=g.F.ca(t+3.141592653589793),g.$g.ub(1,t,0,a,fa,v,null,null),g.$g.ub(1,t,0,d,ma,F,null,null)),v.u*=g.s.Mb(1,b),F.u*=g.s.Mb(1,e),v.u=g.F.Sj(c,v.u),F.u=g.F.Sj(c,F.u),a=g.F.q(l,c,v.u),l=g.F.q(l,c,
F.u),f.u=g.s.R(l-a))}}};z.sf=function(l,c,a,b,d,e,f,h){var k=0,m=new g.ha(0),n=new g.ha(0),p=[0,0,0],q=[0,0,0],t=new g.ha(0),v=new g.ha(0),F=new g.ha(0);if(null!=f||null!=h)if(g.s.vi(c))g.$g.sf(l,a,b,d,e,f,h);else if(g.s.Dd(d))null!=f&&(f.u=a),null!=h&&(h.u=b);else if(e=g.F.ca(e),0>d&&(d=g.s.R(d),e=g.F.ca(e+3.141592653589793)),a=g.F.ca(a),b=g.F.ca(b),1.570796326794897<g.s.R(b)&&(a=g.F.ca(a+3.141592653589793),b=g.s.Mb(3.141592653589793,b)-b),g.s.$(g.s.R(b),1.570796326794897)&&(a=0),g.s.Dd(b)){var W=
g.s.R(1.570796326794897-g.s.R(e));W=g.F.Sj(c,W);W=1-g.F.w(c,g.F.Xq(c,W));W*=2-W;l=d/g.F.Ch(l,W)*1.570796326794897;l=g.F.Tq(W,l);l=g.F.pt(W,l);g.$g.sf(1,a,b,l,e,f,m);null!=h&&(k=m.u);null!=h&&(h.u=g.F.Sj(c,k))}else if(g.s.$(g.s.R(b),1.570796326794897))k=g.F.Ch(l,c),m=2*k,l=g.s.Mb(1.570796326794897,b),e=0<l?g.F.ca(3.141592653589793-e):e,b=k-d,g.s.R(b)<=k?null!=f&&(f.u=e):(b=Math.floor(d/m),0==g.P.truncate(b%2)?(null!=f&&(f.u=e),d-=b*m):(null!=f&&(f.u=g.F.ca(e+3.141592653589793)),d=(b+1)*m-d),b=k-d),
null!=h&&(h.u=g.F.Tq(c,b/k*l));else{W=g.F.pt(c,b);e=Math.atan2(Math.sin(e),Math.cos(e)*Math.cos(b-W));var ba=g.P.truncate(g.s.Mb(1,W))*(1.570796326794897>=g.s.R(e)?1:-1);e=g.F.ca(a+Math.atan(Math.tan(e)*-Math.sin(W)));g.$g.ub(l,e,0,a,W,null,n,null);W=g.s.R(1.570796326794897-g.s.R(n.u));W=g.F.Sj(c,W);W=1-g.F.w(c,g.F.Xq(c,W));W*=2-W;g.F.el(1,c,0,e,0,t,v,F);p[0]=t.u;p[1]=v.u;p[2]=F.u;g.F.el(1,c,b,a,0,t,v,F);q[0]=t.u;q[1]=v.u;q[2]=F.u;b=Math.acos((p[0]*q[0]+p[1]*q[1]+p[2]*q[2])/Math.sqrt(q[0]*q[0]+q[1]*
q[1]+q[2]*q[2]));b=g.F.Sj(W,b);b=g.F.q(l,W,b)+d*ba;d=0<b?n.u:g.F.ca(n.u+3.141592653589793);l=g.s.R(b)/g.F.Ch(l,W)*1.570796326794897;l=g.F.Tq(W,l);l=g.F.pt(W,l);g.$g.sf(1,e,0,l,d,f,m);null!=h&&(k=m.u);null!=h&&(h.u=g.F.Sj(c,k))}};return z}()})(R||(R={}));(function(g){g.eu=function(){function z(){}z.ub=function(l,c,a,b,d,e,f,h,k){var m=0,n=0,p=0;if(null!=f||null!=h||null!=k)if(g.s.vi(c))g.$g.ub(l,a,b,d,e,f,h,k);else{var q=g.F.ca(d-a);if(g.s.$(b,e)&&(g.s.Dd(q)||g.s.$(g.s.R(b),1.570796326794897)))null!=
f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.$(b,-e)){if(g.s.$(g.s.R(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ch(l,c));null!=h&&(h.u=0<b?g.F.ca(3.141592653589793-g.F.ca(d)):g.F.ca(d));null!=k&&(k.u=0<b?g.F.ca(d):g.F.ca(3.141592653589793-g.F.ca(d)));return}g.s.$(g.s.R(q),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ch(l,c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else{if(g.s.$(g.s.R(b),1.570796326794897)||g.s.$(g.s.R(e),1.570796326794897)){g.Yk.ub(l,c,a,b,d,e,f,h,k);return}if(g.s.Dd(q)||g.s.$(g.s.R(q),
3.141592653589793)){g.Yk.ub(l,c,a,b,d,e,f,h,k);return}}var t=1-Math.sqrt(1-c),v=c/(1-c),F=l*(1-t);l=g.F.Xq(c,b);var W=g.F.Xq(c,e);c=1.570796326794897==g.s.R(l)?0:Math.cos(l);var ba=Math.sin(l),aa=1.570796326794897==g.s.R(W)?0:Math.cos(W),fa=Math.sin(W),ka=q,la=Math.cos(ka),ma=Math.sin(ka),sa=1,wa=0;do{var Ga=ka,Fa=Math.sqrt(Math.pow(aa*ma,2)+Math.pow(c*fa-ba*aa*la,2)),Sa=ba*fa+c*aa*la,Qa=Math.atan2(Fa,Sa);if(0==Fa){sa=0;break}var Xa=c*aa*ma/Fa;m=Math.cos(Math.asin(Xa));m*=m;n=Sa-2*ba*fa/m;1<g.s.R(n)&&
(n=g.s.Mb(1,n));p=n*n;ka=t/16*m*(4+t*(4-3*m));ka=q+(1-ka)*t*Xa*(Qa+ka*Fa*(n+ka*Sa*(2*p-1)));la=Math.cos(ka);ma=Math.sin(ka);wa++;if(3.141592653589793<g.s.R(ka)&&30<wa){sa=0;break}}while(5E3>=wa&&!g.s.$(Ga,ka));if(0!=sa)v*=m,t=v*(256+v*(-128+v*(74-47*v)))/1024,null!=f&&(f.u=F*(1+v*(4096+v*(-768+v*(320-175*v)))/16384)*(Qa-t*Fa*(n+t/4*(Sa*(2*p-1)-t/6*n*(4*Fa*Fa-3)*(4*p-3))))),null!=h&&(h.u=g.s.$(g.s.R(b),1.570796326794897)?0>b?d:g.F.ca(3.141592653589793-d):Math.atan2(aa*ma,c*fa-ba*aa*la)),null!=k&&(g.s.$(g.s.R(e),
1.570796326794897)?k.u=0>e?a:g.F.ca(3.141592653589793-a):(k.u=Math.atan2(c*ma,c*fa*la-ba*aa),k.u=g.F.ca(k.u+3.141592653589793)));else{ka=g.s.Mb(3.141592653589793,q);Sa=ba*fa-c*aa;Qa=Math.acos(Sa);Fa=Math.sin(Qa);m=1;wa=Xa=0;do p=Xa,m*=m,la=m*m,Xa=t*m*(1+t+t*t),n=t*t*la*(1+2.25*t),sa=t*t*t*la*m,la=1-.25*Xa+.1875*n-.1953125*sa,Xa=.25*Xa-.25*n+.29296875*sa,ma=.03125*n-.05859375*sa,sa*=.00651041666666667,n=Sa-2*ba*fa/m,1<g.s.R(n)&&(n=g.s.Mb(1,n)),m=Math.acos(n),Sa=Math.cos(2*m),Ga=Math.cos(3*m),Xa=g.s.$(b,
-e)?g.F.ca(3.141592653589793-q)/(3.141592653589793*t*la):g.F.ca(ka-q)/(t*(la*Qa+Xa*Fa*n+ma*Math.sin(2*Qa)*Sa+sa*Math.sin(3*Qa)*Ga)),ma=Xa*Fa/(c*aa),ka=1.570796326794897<g.s.R(q)?g.s.Mb(3.141592653589793,ma)-Math.asin(ma):Math.asin(ma),la=Math.cos(ka),Fa=Math.sqrt(Math.pow(aa*ma,2)+Math.pow(c*fa-ba*aa*la,2)),Qa=3.141592653589793-Math.asin(g.s.R(Fa)),Sa=Math.cos(Qa),m=Math.cos(Math.asin(Xa)),wa++;while(70>=wa&&!g.s.$(p,Xa));null!=f&&(m*=m,v*=m,la=1+v*(4096+v*(-768+v*(320-175*v)))/16384,g.s.$(b,-e)?
f.u=3.141592653589793*F*la:(n=Sa-2*ba*fa/m,m=Math.acos(n),Sa=Math.cos(2*m),Ga=Math.cos(3*m),f.u=F*(la*Qa+v*(-512+v*(128+v*(-60+35*v)))/2048*Fa*n+v*(-4+5*v)/6144*v*v*Math.sin(2*Qa)*Sa+sa*Math.sin(3*Qa)*Ga+-7.62939453125E-5*v*v*v*v*Math.sin(4*Qa)*Math.cos(4*m))));null!=h&&(g.s.Dd(b)&&g.s.Dd(e)?(m=Math.sqrt(1-Xa*Xa),h.u=Math.acos(m),0>q&&(h.u*=-1)):g.s.$(g.s.R(b),1.570796326794897)?h.u=0>b?d:g.F.ca(3.141592653589793-d):(f=Xa/c,F=Math.sqrt(1-f*f),0>c*fa-ba*aa*Math.cos(ka)&&(F*=-1),h.u=Math.atan2(f,F),
g.s.$(b,-e)&&g.s.R(g.F.ca(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(0<b&&1.570796326794897>g.s.R(h.u)||0>b&&1.570796326794897<g.s.R(h.u))&&(h.u=g.s.Mb(3.141592653589793,h.u)-h.u)));if(null!=k)if(g.s.Dd(b)&&g.s.Dd(e))m=Math.sqrt(1-Xa*Xa),k.u=Math.acos(m),0<=q&&(k.u*=-1);else if(g.s.$(g.s.R(e),1.570796326794897))k.u=0>e?a:g.F.ca(3.141592653589793-a);else if(q=Xa/aa,f=Math.sqrt(1-q*q),F=Math.sin(ka/2),0>Math.sin(W-l)-2*c*fa*F*F&&(f*=-1),k.u=Math.atan2(q,f),k.u=g.F.ca(k.u+3.141592653589793),g.s.$(b,
-e)&&!g.s.Dd(b)&&!g.s.$(g.s.R(b),1.570796326794897)&&g.s.R(g.F.ca(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(null!=h?F=h.u:(f=Xa/c,F=Math.sqrt(1-f*f),0>c*fa-ba*aa*Math.cos(ka)&&(F*=-1),F=Math.atan2(f,F),g.s.$(b,-e)&&g.s.R(g.F.ca(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(0<b&&1.570796326794897>g.s.R(F)||0>b&&1.570796326794897<g.s.R(F))&&(F=g.s.Mb(3.141592653589793,F)-F)),1.570796326794897>=g.s.R(F)&&1.570796326794897<g.s.R(k.u)||1.570796326794897<=g.s.R(F)&&1.570796326794897>g.s.R(k.u)))k.u=-1*
g.F.ca(k.u+3.141592653589793)}}}};z.sf=function(l,c,a,b,d,e,f,h){if(null!=f||null!=h)if(g.s.vi(c))g.$g.sf(l,a,b,d,e,f,h);else if(e=g.F.ca(e),g.s.$(g.s.R(b),1.570796326794897)||g.s.Dd(e)||g.s.$(g.s.R(e),3.141592653589793))g.Yk.sf(l,c,a,b,d,e,f,h);else{var k=1.570796326794897==g.s.R(e)?0:Math.cos(e),m=3.141592653589793==g.s.R(e)?0:Math.sin(e);g.s.$(g.s.R(b),1.570796326794897)&&(a=0);e=1-Math.sqrt(1-c);var n=g.F.Xq(c,b);b=1.570796326794897==g.s.R(n)?0:Math.cos(n);var p=Math.sin(n);n=Math.atan2(Math.tan(n),
k);var q=b*m,t=q*q,v=1-t,F=c/(1-c)*v;c=F*(256+F*(-128+F*(74-47*F)))/1024;var W=c/4,ba=c/6,aa=d/(l*(1-e)*(1+F*(4096+F*(-768+F*(320-175*F)))/16384)),fa=aa;do{var ka=fa;d=1.570796326794897==g.s.R(fa)?0:Math.cos(fa);F=3.141592653589793==g.s.R(fa)?0:Math.sin(fa);var la=F*F;l=Math.cos(2*n+fa);fa=l*l;fa=c*F*(l+W*(d*(2*fa-1)-ba*l*(4*la-3)*(4*fa-3)))+aa}while(!g.s.$(ka,fa));d=1.570796326794897==g.s.R(fa)?0:Math.cos(fa);F=3.141592653589793==g.s.R(fa)?0:Math.sin(fa);null!=f&&(m=Math.atan2(F*m,b*d-p*F*k),v=e/
16*v*(4+e*(4-3*v)),l=Math.cos(2*n+fa),f.u=g.F.ca(a+(m-(1-v)*e*q*(fa+v*F*(l+v*d*(2*l*l-1))))));null!=h&&(v=p*F-b*d*k,v=(1-e)*Math.sqrt(t+v*v),h.u=Math.atan2(p*d+b*F*k,v))}};return z}()})(R||(R={}));(function(g){g.KC=function(){function z(){}z.ub=function(l,c,a,b,d,e,f,h,k){var m=g.F.ca(d-a),n=g.s.$(g.s.R(b),1.570796326794897),p=g.s.$(g.s.R(e),1.570796326794897);if(g.s.$(b,e)&&(g.s.Dd(m)||n))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.vi(c)){var q=Math.sin(b),t=Math.sin(e);q=Math.sqrt((1+
q)/(1-q));t=Math.sqrt((1+t)/(1-t));q=Math.log(t)-Math.log(q);q=Math.atan2(m,q);null!=f&&(f.u=g.s.$(b,e)?g.s.R(l*Math.cos(b)*m):g.s.R((l*e-l*b)/Math.cos(q)))}else t=g.F.Sw(c,e),q=Math.sin(g.F.Sw(c,b)),t=Math.sin(t),q=Math.sqrt((1+q)/(1-q)),t=Math.sqrt((1+t)/(1-t)),q=Math.log(t)-Math.log(q),q=Math.atan2(m,q),null!=f&&(g.s.$(b,e)?f.u=g.s.R(l*m*Math.cos(b)/g.F.w(c,b)):(m=g.F.q(l,c,b),l=g.F.q(l,c,e),f.u=g.s.R((l-m)/Math.cos(q))));if(null!=h||null!=k)f=g.F.ca(q+3.141592653589793),n&&p||!n&&!p||(n?q=0>b?
d:g.F.ca(3.141592653589793-d):p&&(f=0>e?a:g.F.ca(3.141592653589793-a))),null!=h&&(h.u=q),null!=k&&(k.u=f)}};z.sf=function(l,c,a,b,d,e,f,h){e=g.F.ca(e);0>d&&(d=g.s.R(d),e=g.F.ca(e+3.141592653589793));g.s.vi(c)?g.s.$(g.s.R(b),1.570796326794897)?(a=0>b?e:g.F.ca(3.141592653589793-e),e=d/l%6.283185307179586,3.141592653589793>=e?l=b-g.s.Mb(e,b):(a=g.F.ca(a+3.141592653589793),l=-b+g.s.Mb(e-3.141592653589793,b))):g.s.$(g.s.R(e),1.570796326794897)?(a=g.F.ca(a+g.s.Mb(d,e)/(l*Math.cos(b))),l=b):(l=b+d*Math.cos(e)/
l,1.570796326794897<g.s.R(l)&&(l=1.570796326794897),g.s.$(g.s.R(l),1.570796326794897)&&(g.s.Dd(e)||g.s.$(g.s.R(e),3.141592653589793))||(1.570796316258184<g.s.R(l)&&(l=g.s.Mb(1.570796316258184,l)),c=Math.sin(b),b=Math.sin(l),c=Math.sqrt((1+c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=g.F.ca(a+Math.tan(e)*c))):g.s.$(g.s.R(b),1.570796326794897)?(a=0>b?e:g.F.ca(3.141592653589793-e),e=d/g.F.lW(l,c),e%=6.283185307179586,3.141592653589793>=e?l=b-g.s.Mb(e,b):(a=g.F.ca(a+3.141592653589793),
l=-b+g.s.Mb(e-3.141592653589793,b)),l=g.F.Tq(c,l)):g.s.$(g.s.R(e),1.570796326794897)?(a=g.F.ca(a+g.s.Mb(d,e)*g.F.w(c,b)/(l*Math.cos(b))),l=b):(l=1.570796326794897*(d*Math.cos(e)+g.F.q(l,c,b))/g.F.Ch(l,c),1.570796326794897<g.s.R(l)&&(l=g.s.Mb(1.570796326794897,l)),l=g.F.Tq(c,l),g.s.$(g.s.R(l),1.570796326794897)&&(g.s.Dd(e)||g.s.$(g.s.R(e),3.141592653589793))||(d=g.F.Sw(c,b),b=g.F.Sw(c,l),1.570796316258184<g.s.R(b)&&(b=g.s.Mb(1.570796316258184,l),l=g.F.tO(c,b)),c=Math.sin(d),b=Math.sin(b),c=Math.sqrt((1+
c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=g.F.ca(a+Math.tan(e)*c)));null!=f&&(f.u=a);null!=h&&(h.u=l)};return z}()})(R||(R={}));(function(g){g.kb=function(){function z(){}z.Sy=function(l,c,a,b,d,e,f){g.eu.ub(l,c,a,b,d,e,null,f,null)};z.Ai=function(l,c,a,b,d,e,f,h){g.eu.sf(l,c,a,b,d,e,f,h)};z.xd=function(l,c,a,b,d,e,f,h,k,m){switch(m){case 2:g.Yk.ub(l,c,a,b,d,e,f,h,k);break;case 3:g.LC.ub(l,c,a,b,d,e,f,h,k);break;case 1:g.KC.ub(l,c,a,b,d,e,f,h,k);break;default:g.eu.ub(l,c,a,b,
d,e,f,h,k)}};z.qj=function(l,c,a,b,d,e,f,h,k){switch(k){case 2:g.Yk.sf(l,c,a,b,d,e,f,h);break;case 3:g.LC.sf(l,c,a,b,d,e,f,h);break;case 1:g.KC.sf(l,c,a,b,d,e,f,h);break;default:g.eu.sf(l,c,a,b,d,e,f,h)}};return z}()})(R||(R={}));(function(g){var z=function(){function c(){this.y=this.x=null}c.construct=function(a){var b=new c;b.x=new g.Xb;b.x.set(a.x);b.y=new g.Xb;b.y.set(a.y);return b};c.QE=function(a,b){var d=new c;d.x=new g.Xb;d.x.set(a);d.y=new g.Xb;d.y.set(b);return d};c.prototype.rg=function(){return this.x.rg()&&
this.y.rg()};c.prototype.value=function(){return g.h.construct(this.x.value(),this.y.value())};return c}();g.rY=z;var l=function(){function c(){this.z=this.y=this.x=null}c.construct=function(a){var b=new c;b.x=new g.Xb;b.x.set(a.x);b.y=new g.Xb;b.y.set(a.y);b.z=new g.Xb;b.z.set(a.z);return b};c.QE=function(a,b,d){var e=new c;e.x=new g.Xb;e.x.set(a);e.y=new g.Xb;e.y.set(b);e.z=new g.Xb;e.z.set(d);return e};c.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()};c.prototype.value=function(){return new g.Od(this.x.value(),
this.y.value(),this.z.value())};c.prototype.Sh=function(a){var b=new g.Xb,d=new g.Xb,e=new g.Xb;b.Ml(this.x,a.x);d.Ml(this.y,a.y);e.Ml(this.z,a.z);a=new g.Xb;a.ZM(b,d);a.add(e);return a};c.prototype.YE=function(a){var b=new c;b.x.Ml(this.y,a.z);b.y.Ml(this.z,a.x);b.z.Ml(this.x,a.y);var d=new g.Xb,e=new g.Xb,f=new g.Xb;d.Ml(this.z,a.y);e.Ml(this.x,a.z);f.Ml(this.y,a.x);b.x.sub(d);b.y.sub(e);b.z.sub(f);return b};return c}();g.sY=l;g.Nx=function(){function c(){}c.zP=function(a,b,d){var e=b.x;b=b.y;c.el(1,
a,Math.cos(e),Math.sin(e),Math.cos(b),Math.sin(b),d)};c.yP=function(a,b){var d=new g.Od;c.zP(a,b,d);return d};c.el=function(a,b,d,e,f,h,k){a/=Math.sqrt(1-b*h*h);k.L(a*f*d,a*f*e,a*(1-b)*h)};c.$u=function(a,b){var d=new g.Xb,e=new g.Xb,f=new g.Xb,h=new g.Xb;d.cos(b.x);e.sin(b.x);f.cos(b.y);h.sin(b.y);var k=new g.Xb;k.set(h);k.Bg(h);k.Po(a);k.Po(-1);k.fN();k.sqrt();b=new g.Xb;b.set(1);b.lm(k);k=new g.Xb;k.set(b);k.Bg(f);k.Bg(d);d=new g.Xb;d.set(b);d.Bg(f);d.Bg(e);e=new g.Xb;e.set(b);e.Po(1-a);e.Bg(h);
return l.QE(k,d,e)};c.NS=function(a,b,d,e){if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||(Math.abs(b.y)==.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x)return NaN;e=c.YA(e,Math.min(b.x,d.x),Math.max(b.x,d.x));if(!(new g.Oc(b.x,d.x)).contains(e))return NaN;var f=z.construct(b);d=z.construct(d);f=c.$u(a,f);d=c.$u(a,d);d=f.YE(d);if(d.z.rg())return b=b.y;var h=new g.Xb;h.set(d.x);h.lm(d.z);h.Po(-1);var k=new g.Xb;k.set(d.y);k.lm(d.z);k.Po(-1);var m=new g.Xb;m.set(k);
m.Bg(k);f=new g.Xb;f.set(h);f.Bg(h);f.add(m);f.sqrt();if(f.rg()||h.rg()&&k.rg())return b=b.y;b=Math.atan2(k.value(),h.value());b=Math.atan2(f.value()*Math.cos(b-e),1-a);e=c.yP(a,g.h.construct(e,b));a=new g.Od(e.x,e.y,-e.z);e=d.value().Sh(e);a=d.value().Sh(a);Math.abs(a)<Math.abs(e)&&(b=-b);return b};c.Jz=function(a,b,d,e,f){f[0]=NaN;f[1]=NaN;if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||(Math.abs(b.y)==.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x||Math.abs(e)>=
.5*Math.PI||0<b.y&&0<d.y&&b.y>e&&d.y>e||0>b.y&&0>d.y&&b.y<e&&d.y<e)return 0;var h=z.construct(b),k=z.construct(d);h=c.$u(a,h);k=c.$u(a,k);var m=h.YE(k);if(m.z.rg())return(new g.Oc(b.y,d.y)).contains(e)?(f[0]=b.x,1):0;k=new g.Xb;k.set(m.x);k.lm(m.z);k.Po(-1);h=new g.Xb;h.set(m.y);h.lm(m.z);h.Po(-1);m=new g.Xb;m.set(h);m.Bg(h);var n=new g.Xb;n.set(k);n.Bg(k);n.add(m);n.sqrt();if(n.rg()||k.rg()&&h.rg())return 0==e?(f[0]=b.x,f[1]=d.x,2):0;a=(1-a)*Math.tan(e)/n.value();if(1<Math.abs(a))return 0;a=Math.acos(a);
m=Math.atan2(h.value(),k.value());k=Math.min(b.x,d.x);h=Math.max(b.x,d.x);d=c.YA(m-a,k,h);a=0!=e?c.YA(m+a,k,h):d;e=0;k<=d&&d<=h&&(f[e]=d,e++);a!=d&&k<=a&&a<=h&&(f[e]=a,e++,2==e&&Math.abs(f[0]-b.x)>Math.abs(f[1]-b.x)&&(b=f[0],f[0]=f[1],f[1]=b));return e};c.YA=function(a,b,d){a>d?(b=Math.ceil((a-d)/(2*Math.PI)),a-=2*b*Math.PI):a<b&&(b=Math.ceil((b-a)/(2*Math.PI)),a+=2*b*Math.PI);return a};return c}()})(R||(R={}));(function(g){g.SK=function(){function z(){}z.WX=function(l,c){var a=[0,0,0,0],b=new g.h;
b.N(c);b.scale(9102==g.cb.tc(l).Id().Fc()?1:g.cb.tc(l).Id().ci/3.141592653589793*180);-180>b.x?(b.x-=b.x%360,-180>b.x&&(b.x+=360)):180<b.x&&(b.x-=b.x%360,180<b.x&&(b.x-=360));90<b.y&&(b.y=90);-90>b.y&&(b.y=-90);l=40;c=(l+31)/32;for(var d=-180,e=180,f=l-1,h=c-1;0<=h;h--)for(var k=f-32*h,m=Math.min(32,l-32*h),n=1;n<m;n+=2){var p=.5*(e+d);b.x>=p?(a[h]|=1<<k,d=p):e=p;k-=2;f-=2}d=-90;e=90;f=l-2;for(h=c-1;0<=h;h--)for(k=f-32*h,m=Math.min(32,l-32*h),n=0;n<m;n+=2)p=.5*(e+d),b.y>=p?(a[h]|=1<<k,d=p):e=p,k-=
2,f-=2;return z.VP(a,8,8)};z.VP=function(l,c,a){for(var b=[],d=0;d<c;d++)b[d]="";for(var e=d=0,f=0;f<c;f++){var h=l[d]>>e&31;e+=5;if(31<e){var k=37-e;h&=(1<<k)-1;e-=32;d++;h|=(l[d]&(1<<e)-1)<<k}b[c-1-f]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[h]}if(a>c)for(f=0;f<a-c;f++)b.push("0");else a<c&&(b.length=a);return b.join("")};return z}()})(R||(R={}));(function(g){var z={gcstol:[0,2E-9,1,2.241706620489156E-9,2,2.313672246530541E-9,3,8.98240164660333E-9,4,8.982433838020134E-9,5,8.982439417325895E-9,
6,8.982466029667677E-9,7,8.982476760268133E-9,8,8.982492642167149E-9,9,8.98251968292634E-9,10,8.98253685210448E-9,11,8.982546725256576E-9,12,8.982557456049832E-9,13,8.98257333682596E-9,14,8.982575482995276E-9,15,8.982578488197342E-9,16,8.982579775336987E-9,17,8.9825840676828E-9,18,8.982599090925448E-9,19,8.982605529473397E-9,20,8.982609220517402E-9,21,8.982611968030573E-9,22,8.982616260407152E-9,23,8.982620552787834E-9,24,8.982633429954492E-9,25,8.982637722351582E-9,26,8.98264416095491E-9,27,8.982646307158072E-9,
28,8.982654891980968E-9,29,8.982667769246082E-9,30,8.982674207892485E-9,31,8.982680646548117E-9,32,8.982682792768713E-9,33,8.982685798042582E-9,34,8.982689231436652E-9,35,8.98269137766135E-9,36,8.98269266624163E-9,37,8.982705114087017E-9,38,8.982706830791106E-9,39,8.982711958374661E-9,40,8.982712839964735E-9,41,8.982717991496125E-9,42,8.982721424914803E-9,43,8.982723571154887E-9,44,8.982727863638127E-9,45,8.982730868942154E-9,46,8.982734302370678E-9,47,8.982745033612112E-9,48,8.982751472369276E-9,
49,8.982755764879183E-9,50,8.982762203651733E-9,51,8.982764776628385E-9,52,8.982766496171896E-9,53,8.98277722749025E-9,54,8.98278152002477E-9,55,8.98279933943848E-9,56,8.9829143024805E-9,57,8.982922161948598E-9,58,8.98292327314211E-9,59,8.982925667349601E-9,60,8.982932222965576E-9,61,8.982961298941316E-9,62,8.982965524049989E-9,63,8.982994818246099E-9,64,8.982994895706967E-9,65,8.98299489597736E-9,66,8.983000733443498E-9,67,8.983055097289157E-9,68,8.983064111047368E-9,69,8.983111996941178E-9,70,8.983120447446023E-9,
71,8.98312748954554E-9,72,8.983134531656096E-9,73,8.983141573777694E-9,74,8.983148615910332E-9,75,8.983152841195215E-9,76,8.983153545409748E-9,77,8.983153827095593E-9,78,8.98315396793852E-9,79,8.983154249624393E-9,80,8.983155658054012E-9,81,8.983960794340072E-9,82,8.984061344391998E-9,83,8.984072829255685E-9,84,8.984194981201908E-9,85,8.984275233099427E-9,86,8.984326127007554E-9,87,8.984330099816539E-9,88,8.98433275258421E-9,89,8.984333047023206E-9,90,8.984333885258723E-9,91,8.984337959508212E-9,
92,8.984365176209457E-9,93,8.984727360418079E-9,94,8.984901041679577E-9,95,8.98542662091587E-9,96,8.98610024130669E-9,97,8.992894229037531E-9,98,8.993203677616635E-9,99,8.993206178094346E-9,100,8.993216059187305E-9,101,8.99322029394808E-9,102,8.994627867045891E-9,103,9.467559984315793E-9,104,9.46881168618118E-9,105,9.980888154931644E-9,106,9.981105353606775E-9,107,9.983807356573187E-9,108,1.687060485811522E-8,109,1.688447560354875E-8,110,2.176606011487185E-8,111,2.225078816042032E-8,112,2.348476432064694E-8,
113,2.348765250187846E-8,114,2.378108974103778E-8,115,3.14559636297708E-8,116,3.297788621680806E-8,117,3.667892343788279E-8,118,4.235973644320739E-8,119,4.794625900676345E-8,120,7.262742998235812E-8,121,7.499447580246377E-8,122,7.525056410964318E-8,123,7.979913581209237E-8,124,9.662020153976783E-8,125,9.799175562353741E-8,126,9.897353517547472E-8,127,1.02313891987647E-7,128,1.081460541960784E-7,129,1.21905913857622E-7,130,2.246893314238523E-7,131,2.297344808062643E-7,132,2.42984645941825E-7,133,2.754604784282804E-7,
134,2.884548130346993E-7,135,3.370339971357784E-7,136,4.307953346848296E-7,137,5.208707228462029E-7,138,5.509209568565608E-7,139,6.452227422644406E-7,140,6.740679942715567E-7,141,6.861770001566745E-7,142,7.252630318111686E-7,143,7.441010326374328E-7,144,7.742672907173287E-7,145,9.629542775307953E-7,146,1.061032953945969E-6,147,1.143628333594458E-6,148,1.162186197019925E-6,149,1.36418522650196E-6,150,1.367441038498385E-6,151,1.432394487827058E-6,152,1.736235742820677E-6,153,1.848250952034914E-6,154,
1.909859317102744E-6,155,1.975716534933873E-6,156,2.122065907891938E-6,157,2.72837045300392E-6,158,3.183098861837907E-6,159,3.580986219567645E-6,160,3.819718634205488E-6,161,4.09255567950588E-6,162,4.407367654852486E-6,163,4.774648292756861E-6,164,5.161781938115525E-6,165,5.20870722846203E-6,166,5.729577951308232E-6,167,6.031134685587613E-6,168,6.987290184522236E-6,169,9.241254760174569E-6,170,1.145915590261646E-5],pcstol:[0,6.666666666666667E-9,1,2E-8,2,4.970973863636364E-5,3,4.970978156565657E-5,
4,4.970980410559237E-5,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,
2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,
2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,
2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,
2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,
2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,
2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,
3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,
4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,
37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,
102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,
6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,
6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103E3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,
6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,
6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,
6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,
6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,
6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,
6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,
6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,
103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,
103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,
102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9E3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,
102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,
31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,
11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,
5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,
10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,
5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,
5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,
6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,
10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,
5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,
10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,
24600,5,25E3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,
5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,
5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,
10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,
10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,
5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,
5,103946,10],pcsidc:[[2E3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,
5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,
3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],
[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,
8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,
24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,
5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32E3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,
5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,
102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,
5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],
[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,
103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,
89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,
55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,
63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,
60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,
75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,
37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,
84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,
104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,
104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,
159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,
104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},
l={c:[[2E3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,
2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],
[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,
9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,
4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],
[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,
9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9E3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,
20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],
[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,
28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32E3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],
[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,
9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,
9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,
9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,
2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,
9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,
3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,
9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,
3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,
9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,
4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,
9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,
5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,
9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,
6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,
9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,
6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,
9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,
6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,
9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,
7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,
9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,
8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,
9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,
8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,
9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,
9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,
9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,
9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,
9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,
9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,
9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,
9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,
9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};g.yr=function(){function c(){}c.Ny=function(a){!1===c.zp&&c.zt();var b=c.AQ(a);if(-1==b){var d=c.Ax(a);d!=a&&(b=c.Ny(d))}-1==
b&&(d=c.AK(a),d!=a&&(b=c.Ny(d)));return b};c.AQ=function(a){return void 0!==c.Hw[a]?c.Hw[a]:-1};c.xQ=function(a){!1===c.zp&&c.zt();var b=c.iF(a);if(1E38==b){var d=c.Ax(a);d!=a&&(b=c.iF(d));if(1E38==b)return 1E-10}return b};c.US=function(a){if(void 0!==c.Ks[a])return!0;var b=c.Ax(a);return b!=a&&void 0!==c.Ks[b]?!0:!1};c.WS=function(a){if(void 0!==c.zo[a])return!0;var b=c.Ax(a);return b!=a&&void 0!==c.zo[b]?!0:!1};c.iF=function(a){!1===c.zp&&c.zt();return void 0!==c.Ks[a]?c.Ks[a]:void 0!==c.zo[a]?
c.zo[a]:1E38};c.AK=function(a){!1===c.zp&&c.zt();return void 0!==c.RA[a]?c.RA[a]:a};c.Ax=function(a){!1===c.zp&&c.zt();return void 0!==c.SA[a]?c.SA[a]:a};c.zt=function(){for(var a=z,b,d=0;d<a.pcsid.length;d+=2)c.zo[a.pcsid[d]]=a.pcstol[2*a.pcsid[d+1]+1];for(d=0;d<a.pcsidc.length;d+=1){b=a.pcsidc[d];for(var e=b[0];e<=b[1];e++)c.zo[e]=a.pcstol[2*b[2]+1]}for(d=0;d<a.gcsid.length;d+=2)c.Ks[a.gcsid[d]]=a.gcstol[2*a.gcsid[d+1]+1];for(d=0;d<a.gcsidc.length;d+=1)for(b=a.gcsidc[d],e=b[0];e<=b[1];e++)c.zo[e]=
a.gcstol[2*b[2]+1];for(d=0;d<l.c.length;d+=1)for(b=l.c[d],e=b[0];e<=b[1];e++)c.Hw[e]=b[2];for(d=0;d<l.nc.length;d+=2)c.Hw[l.nc[d]]=l.nc[d+1];l=null;for(d=0;d<a.newtoold.length;d+=2)c.RA[a.newtoold[d+1]]=a.newtoold[d],c.SA[a.newtoold[d]]=a.newtoold[d+1];z=null;c.zp=!0};c.zp=!1;c.Ks=[];c.zo=[];c.RA=[];c.SA=[];c.Hw=[];return c}()})(R||(R={}));(function(g){function z(c){return 0===c.length?'""':'"'==c[0]||"."==c[0]||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var l=[];g.SC=function(){function c(){}c.zQ=function(a){try{for(var b=
0;b<l.length;b++)if(l[b].wkttext===a)return l[b].unit;for(var d,e=b="",f=!1,h=0;h<a.length;h++){var k=a[h];!0===f?'"'==k?'"'==a[h+1]?b+=k:f=f=!1:b+=k:/[\s]/.test(k)||(","==k?(e=""!==b?e+(z(b)+","):e+",",b=""):")"==k||"]"==k?(e=""!==b?e+(z(b)+"]}"):e+"]}",b=""):"("==k||"["==k?(e+='{ "entity": "'+b.toUpperCase().trim()+'", "values":[',b=""):'"'==k?(f=!0,b=""):b+=k)}d=JSON.parse(e);var m=c.hF(d);if(null===m)return null;d=null;for(k=0;k<m.values.length;k++)if("object"===typeof m.values[k]&&"UNIT"===m.values[k].entity){d=
m.values[k];break}if(null===d)return null;var n=g.Uc.UO("GEOGCS"===m.entity?1:0,d.values[1],d.values[2]);l.push({wkttext:a,unit:n});10<l.length&&l.shift();return n}catch(p){return null}};c.hF=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var b=[],d=0;d<a.values.length;d++)if("object"===typeof a.values[d]&&void 0!==a.values[d].entity){if("GEOGCS"===a.values[d].entity||"PROJCS"==a.values[d].entity)return a.values[d];b.push(a.values[d])}for(a=0;a<b.length;a++)if(d=
c.hF(b[a]),null!==d)return d;return null};c.yQ=function(a){var b=-1;if(null!=a&&0<a.length){var d=a.indexOf("PROJCS");if(0<=d){var e=0;d=a.lastIndexOf("UNIT");if(0<=d&&(d=a.indexOf(",",d+4),0<d)){d++;var f=a.indexOf("]",d+1);if(0<f)try{e=parseFloat(a.substring(d,f))}catch(k){e=0}}0<e&&(b=.001/e)}else if(d=a.indexOf("GEOGCS"),0<=d){var h=0;e=0;d=a.indexOf("SPHEROID",d+6);if(0<d&&(d=a.indexOf(",",d+8),0<d)){d++;f=a.indexOf(",",d+1);if(0<f)try{h=parseFloat(a.substring(d,f))}catch(k){h=0}if(0<h&&(d=a.indexOf("UNIT",
f+1),0<=d&&(d=a.indexOf(",",d+4),0<d&&(d++,f=a.indexOf("]",d+1),0<f))))try{e=parseFloat(a.substring(d,f))}catch(k){e=0}}0<h&&0<e&&(b=.001/(h*e))}}return b};return c}()})(R||(R={}));(function(g){(function(l){l[l.NONE=0]="NONE";l[l.LINEAR=1]="LINEAR";l[l.ANGULAR=2]="ANGULAR"})(g.$K||(g.$K={}));(function(l){l[l.enumFloat=0]="enumFloat";l[l.enumDouble=1]="enumDouble";l[l.enumInt32=2]="enumInt32";l[l.enumInt64=3]="enumInt64";l[l.enumInt8=4]="enumInt8";l[l.enumInt16=5]="enumInt16"})(g.LL||(g.LL={}));(function(l){l[l.POSITION=
0]="POSITION";l[l.Z=1]="Z";l[l.M=2]="M";l[l.ID=3]="ID";l[l.NORMAL=4]="NORMAL";l[l.TEXTURE1D=5]="TEXTURE1D";l[l.TEXTURE2D=6]="TEXTURE2D";l[l.TEXTURE3D=7]="TEXTURE3D";l[l.ID2=8]="ID2";l[l.MAXSEMANTICS=10]="MAXSEMANTICS"})(g.Kh||(g.Kh={}));var z=function(){function l(c,a){this.Xs=this.Be=null;this.Qq=this.Ba=0;this.wh=this.dg=null;this.yl=0;if(void 0!==a){this.Ba=a.Ba;this.Qq=a.Qq;this.dg=a.dg.slice(0);this.wh=a.wh.slice(0);this.yl=a.yl;this.Xs=[];for(c=a=0;c<this.Ba;c++)this.Xs[c]=a,a+=l.Wa(this.dg[c]);
this.Qq=a;this.Be=[];for(c=0;c<this.Ba;c++){a=l.Wa(this.ld(c));for(var b=l.te(this.ld(c)),d=0;d<a;d++)this.Be[this.Xs[c]+d]=b}}else this.Qq=this.Ba=0}l.prototype.ld=function(c){if(0>c||c>this.Ba)throw g.i.O();return this.dg[c]};l.prototype.Rf=function(c){return this.wh[c]};l.gz=function(c){return l.EM[c]};l.Vp=function(c){return l.NM[c]};l.Wa=function(c){return l.mM[c]};l.prototype.hasAttribute=function(c){return 0<=this.wh[c]};l.prototype.dG=function(){return this.hasAttribute(1)};l.te=function(c){return l.$C[c]};
l.prototype.GR=function(c){return this.Xs[c]};l.yG=function(c,a){return l.$C[c]===a};l.prototype.Nb=function(c){return this===c};l.prototype.Cn=function(){for(var c=g.P.Vh(this.dg[0]),a=1;a<this.Ba;a++)c=g.P.Vh(this.dg[a],c);return c};l.prototype.bk=function(c){return this.Xs[c]};l.prototype.dc=function(){return this.yl};l.prototype.Fd=function(c){return this.dg[c]};l.$C=[0,0,NaN,0,0,0,0,0,0];l.EM=[1,1,1,0,2,1,1,1,0];l.NM=[1,1,1,2,0,0,0,0,2];l.mM=[2,1,1,1,3,1,2,3,2];return l}();g.sa=z})(R||(R={}));
(function(g){function z(f,h,k){var m=h-(f=new e(f)).e,n=f.c;n.length>++h&&l(f,m,e.gu);for(n[0]?k?m=h:(n=f.c,m=f.e+m+1):++m;n.length<m;n.push(0));m=f.e;return 1===k||k&&(h<=m||m<=a)?(0>f.Cd&&n[0]?"-":"")+(1<n.length?n[0]+"."+n.join("").slice(1):n[0])+(0>m?"e":"e+")+m:f.toString()}function l(f,h,k,m){var n=f.c,p=f.e+h+1;1===k?m=5<=n[p]:2===k?m=5<n[p]||5==n[p]&&(m||0>p||void 0!==n[p+1]||n[p-1]&1):3===k?m=m||void 0!==n[p]||0>p:(m=!1,0!==k&&c("!Big.RM!"));if(1>p||!n[0])m?(f.e=-h,f.c=[1]):f.c=[f.e=0];else{n.length=
p--;if(m)for(;9<++n[p];)n[p]=0,p--||(++f.e,n.unshift(1));for(p=n.length;!n[--p];n.pop());}return f}function c(f){f=Error(f);f.name="BigError";throw f;}var a=-7,b=21,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,e=function(){function f(h){if(h instanceof f)this.Cd=h.Cd,this.e=h.e,this.c=h.c.slice();else{var k,m,n;0===h&&0>1/h?h="-0":d.test(h+="")||c(NaN);this.Cd="-"==h.charAt(0)?(h=h.slice(1),-1):1;-1<(k=h.indexOf("."))&&(h=h.replace(".",""));0<(m=h.search(/e/i))?(0>k&&(k=m),k+=+h.slice(m+1),h=h.substring(0,
m)):0>k&&(k=h.length);for(m=0;"0"==h.charAt(m);m++);if(m==(n=h.length))this.c=[this.e=0];else{for(;"0"==h.charAt(--n););this.e=k-m-1;this.c=[];for(k=0;m<=n;this.c[k++]=+h.charAt(m++));}}}f.prototype.abs=function(){var h=new f(this);h.Cd=1;return h};f.prototype.cmp=function(h){var k=this.c,m=(h=new f(h)).c,n=this.Cd,p=h.Cd,q=this.e,t=h.e;if(!k[0]||!m[0])return k[0]?n:m[0]?-p:0;if(n!=p)return n;h=0>n;if(q!=t)return q>(t^h)?1:-1;n=-1;for(p=(q=k.length)<(t=m.length)?q:t;++n<p;)if(k[n]!=m[n])return k[n]>
(m[n]^h)?1:-1;return q==t?0:q>(t^h)?1:-1};f.prototype.lm=function(h){var k=this.c,m=(h=new f(h)).c,n=this.Cd==h.Cd?1:-1,p=f.tr;(p!==~~p||0>p||1E6<p)&&c("!Big.DP!");if(!k[0]||!m[0])return k[0]==m[0]&&c(NaN),m[0]||c(n/0),new f(0*n);var q,t,v=m.slice(),F=q=m.length,W=k.length,ba=k.slice(0,q),aa=ba.length,fa=h,ka=fa.c=[],la=0,ma=p+(fa.e=this.e-h.e)+1;fa.Cd=n;n=0>ma?0:ma;for(v.unshift(0);aa++<q;ba.push(0));do{for(t=0;10>t;t++){if(q!=(aa=ba.length))var sa=q>aa?1:-1;else{var wa=-1;for(sa=0;++wa<q;)if(m[wa]!=
ba[wa]){sa=m[wa]>ba[wa]?1:-1;break}}if(0>sa){for(h=aa==q?m:v;aa;){if(ba[--aa]<h[aa]){for(wa=aa;wa&&!ba[--wa];ba[wa]=9);--ba[wa];ba[aa]+=10}ba[aa]-=h[aa]}for(;!ba[0];ba.shift());}else break}ka[la++]=sa?t:++t;ba[0]&&sa?ba[aa]=k[F]||0:ba=[k[F]]}while((F++<W||void 0!==ba[0])&&n--);ka[0]||1==la||(ka.shift(),fa.e--);la>ma&&l(fa,p,f.gu,void 0!==ba[0]);return fa};f.prototype.aS=function(){return 0<this.cmp(0)};f.prototype.iT=function(){return 0>this.cmp(0)};f.prototype.kt=function(h){var k,m=this.Cd,n=(h=
new f(h)).Cd;if(m!=n)return h.Cd=-n,this.oI(h);var p=this.c.slice(),q=this.e,t=h.c,v=h.e;if(!p[0]||!t[0])return t[0]?(h.Cd=-n,h):new f(p[0]?this:0);if(m=q-v){(k=0>m)?(m=-m,q=p):(v=q,q=t);q.reverse();for(n=m;n--;q.push(0));q.reverse()}else for(q=((k=p.length<t.length)?p:t).length,m=n=0;n<q;n++)if(p[n]!=t[n]){k=p[n]<t[n];break}k&&(q=p,p=t,t=q,h.Cd=-h.Cd);if(0<(n=(q=t.length)-(k=p.length)))for(;n--;p[k++]=0);for(n=k;q>m;){if(p[--q]<t[q]){for(k=q;k&&!p[--k];p[k]=9);--p[k];p[q]+=10}p[q]-=t[q]}for(;0==
p[--n];p.pop());for(;0==p[0];)p.shift(),--v;p[0]||(h.Cd=1,p=[v=0]);h.c=p;h.e=v;return h};f.prototype.oI=function(h){var k=this.Cd,m=(h=new f(h)).Cd;if(k!=m)return h.Cd=-m,this.kt(h);m=this.e;var n=this.c,p=h.e,q=h.c;if(!n[0]||!q[0])return q[0]?h:new f(n[0]?this:0*k);n=n.slice();if(k=m-p){0<k?(p=m,m=q):(k=-k,m=n);for(m.reverse();k--;m.push(0));m.reverse()}0>n.length-q.length&&(m=q,q=n,n=m);k=q.length;for(m=0;k;)m=(n[--k]=n[k]+q[k]+m)/10|0,n[k]%=10;m&&(n.unshift(m),++p);for(k=n.length;0==n[--k];n.pop());
h.c=n;h.e=p;return h};f.prototype.pow=function(h){var k=this,m=new f(1),n=m,p=0>h;(h!==~~h||-1E6>h||1E6<h)&&c("!pow!");for(h=p?-h:h;;){h&1&&(n=n.nr(k));h>>=1;if(!h)break;k=k.nr(k)}return p?m.lm(n):n};f.prototype.round=function(h,k){var m=this;null==h?h=0:(h!==~~h||0>h||1E6<h)&&c("!round!");l(m=new f(m),h,null==k?f.gu:k);return m};f.prototype.sqrt=function(){var h=this.c,k=this.Cd,m=this.e,n=new f("0.5");if(!h[0])return new f(this);0>k&&c(NaN);k=Math.sqrt(this.toString());0==k||k==1/0?(k=h.join(""),
k.length+m&1||(k+="0"),h=new f(Math.sqrt(k).toString()),h.e=((m+1)/2|0)-(0>m||m&1)):h=new f(k.toString());k=h.e+(f.tr+=4);do m=h,h=n.nr(m.oI(this.lm(m)));while(m.c.slice(0,k).join("")!==h.c.slice(0,k).join(""));l(h,f.tr-=4,f.gu);return h};f.prototype.nr=function(h){var k=this.c,m=(h=new f(h)).c,n=k.length,p=m.length,q=this.e,t=h.e;h.Cd=this.Cd==h.Cd?1:-1;if(!k[0]||!m[0])return new f(0*h.Cd);h.e=q+t;if(n<p){var v=k;k=m;m=v;t=n;n=p;p=t}for(v=Array(t=n+p);t--;v[t]=0);for(q=p;q--;){p=0;for(t=n+q;t>q;)p=
v[t]+m[q]*k[t-q-1]+p,v[t--]=p%10,p=p/10|0;v[t]=(v[t]+p)%10}p&&++h.e;v[0]||v.shift();for(q=v.length;!v[--q];v.pop());h.c=v;return h};f.prototype.toString=function(){var h=this.e,k=this.c.join(""),m=k.length;if(h<=a||h>=b)k=k.charAt(0)+(1<m?"."+k.slice(1):"")+(0>h?"e":"e+")+h;else if(0>h){for(;++h;k="0"+k);k="0."+k}else if(0<h)if(++h>m)for(h-=m;h--;k+="0");else h<m&&(k=k.slice(0,h)+"."+k.slice(h));else 1<m&&(k=k.charAt(0)+"."+k.slice(1));return 0>this.Cd&&this.c[0]?"-"+k:k};f.prototype.toExponential=
function(h){null==h?h=this.c.length-1:(h!==~~h||0>h||1E6<h)&&c("!toExp!");return z(this,h,1)};f.prototype.toFixed=function(h){var k=a,m=b;a=-(b=1/0);if(null==h)var n=this.toString();else h===~~h&&0<=h&&1E6>=h&&(n=z(this,this.e+h),0>this.Cd&&this.c[0]&&0>n.indexOf("-")&&(n="-"+n));a=k;b=m;n||c("!toFix!");return n};f.prototype.toPrecision=function(h){if(null==h)return this.toString();(h!==~~h||1>h||1E6<h)&&c("!toPre!");return z(this,h-1,2)};f.tr=20;f.gu=1;return f}();g.jp=e})(R||(R={}));(function(g){var z=
function(){function l(c){this.lf=c}l.prototype.qr=function(c,a,b){var d=new g.h,e=new g.h,f=this.lf;b.Wd(c,a,function(h,k){f.uc(2*h,d);f.uc(2*k,e);return d.compare(e)})};l.prototype.bq=function(c){return this.lf.read(2*c+1)};return l}();g.si=function(){function l(){}l.cq=function(c){if(c.B())return!1;var a=c.K();return 1736==a?0==c.He()?!1:!0:1607==a?(a=[!1],l.nE(c,!0,a),a[0]):197==a||g.ba.zd(a)&&!c.wG()?!0:!1};l.im=function(c){var a=c.K();if(1736==a)return a=new g.Ua(c.description),c.B()||c.ZC(a),
a;if(1607==a)return l.nE(c,!1,null);if(197==a)return a=new g.Ua(c.description),c.B()||a.bd(c,!1),a;if(g.ba.zd(a)){a=new g.ee(c.description);if(!c.B()&&!c.wG()){var b=new g.Ta;c.Vo(b);a.add(b);c.Ro(b);a.add(b)}return a}if(g.ba.Tn(a))return null;throw g.i.O();};l.nE=function(c,a,b){null!=b&&(b[0]=!1);var d=null;a||(d=new g.ee(c.description));if(!c.B()){var e=new g.ja(0);e.Jb(2*c.ea());for(var f=0,h=c.ea();f<h;f++)if(0<c.Ka(f)&&!c.Pn(f)){var k=c.Ca(f);e.add(k);k=c.Wc(f)-1;e.add(k)}if(0<e.size){h=new g.Zt;
f=c.vb(0);h.sort(e,0,e.size,new z(f));h=new g.h;f.uc(2*e.get(0),h);k=0;for(var m=1,n=new g.Ta,p=new g.h,q=1,t=e.size;q<t;q++)if(f.uc(2*e.get(q),p),p.rb(h))e.get(k)>e.get(q)?(e.set(k,2147483647),k=q):e.set(q,2147483647),m++;else{if(0==(m&1))e.set(k,2147483647);else if(a)return null!=b&&(b[0]=!0),null;h.N(p);k=q;m=1}if(0==(m&1))e.set(k,2147483647);else if(a)return null!=b&&(b[0]=!0),null;if(!a)for(e.Wd(0,e.size,function(v,F){return v-F}),q=0,t=e.size;q<t&&2147483647!=e.get(q);q++)c.we(e.get(q),n),d.add(n)}}return a?
null:d};return l}()})(R||(R={}));(function(g){var z=function(){function l(){this.zf=new g.ja(0);this.As=new g.ja(0);this.zH=1;this.Gs=NaN}l.prototype.sort=function(c,a,b,d){if(32>b-a)d.qr(a,b,c);else{var e=!0;try{for(var f=Infinity,h=-Infinity,k=a;k<b;k++){var m=d.bq(c.get(k));m<f&&(f=m);m>h&&(h=m)}if(this.reset(b-a,f,h,b-a)){for(k=a;k<b;k++){var n=c.get(k);m=d.bq(n);var p=this.uF(m);this.zf.set(p,this.zf.get(p)+1);this.As.write(k-a,n)}var q=this.zf.get(0);this.zf.set(0,0);k=1;for(var t=this.zf.size;k<
t;k++){var v=this.zf.get(k);this.zf.set(k,q);q+=v}for(k=a;k<b;k++){n=this.As.read(k-a);m=d.bq(n);p=this.uF(m);var F=this.zf.get(p);c.set(F+a,n);this.zf.set(p,F+1)}e=!1}}catch(W){this.zf.resize(0),this.As.resize(0)}if(e)d.qr(a,b,c);else{k=b=0;for(t=this.zf.size;k<t;k++)e=b,b=this.zf.get(k),b>e&&d.qr(a+e,a+b,c);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}};l.prototype.reset=function(c,a,b,d){if(2>c||b==a)return!1;c=Math.min(l.cL,c);this.zf.Jb(c);this.zf.resize(c);this.zf.Yj(0,0,this.zf.size);
this.zH=a;this.As.resize(d);this.Gs=(b-a)/(c-1);return!0};l.prototype.uF=function(c){return g.P.truncate((c-this.zH)/this.Gs)};l.cL=65536;return l}();g.Zt=z})(R||(R={}));(function(g){var z;(function(e){e[e.enum_line=1]="enum_line";e[e.enum_arc=2]="enum_arc";e[e.enum_dummy=4]="enum_dummy";e[e.enum_concave_dip=8]="enum_concave_dip";e[e.enum_connection=3]="enum_connection"})(z||(z={}));var l=function(){function e(){}e.Su=function(f,h,k,m,n,p){var q=new e;q.Km=new g.h;q.Xm=new g.h;q.cw=new g.h;q.Km.N(f);
q.Xm.N(h);q.cw.N(k);q.Eo=m;q.sh=n;q.uh=p;return q};e.construct=function(f,h,k,m){var n=new e;n.Km=new g.h;n.Xm=new g.h;n.cw=new g.h;n.Km.N(f);n.Xm.N(h);n.cw.Sc();n.Eo=4;n.sh=k;n.uh=m;return n};return e}(),c=function(){function e(f,h,k,m,n,p){this.$v=null;this.za=0;this.zA=f;this.XH=this.VH=0;this.La=h;this.Oj=k;this.xk=m;this.Fq=n;this.Vb=p}e.prototype.next=function(){for(var f=new g.Ta;;){if(this.za==this.zA.I())return null;this.zA.we(this.za,f);this.za++;if(!f.B())break}var h=!1;null==this.$v&&
(this.VH=f.Ng(),this.XH=f.kh(),this.$v=d.buffer(f,this.La,this.Oj,this.xk,this.Fq,this.Vb),h=!0);if(this.za<this.zA.I()){var k=new g.Ea;this.$v.copyTo(k)}else k=this.$v;if(!h){h=new g.Ed;var m=f.Ng()-this.VH;f=f.kh()-this.XH;h.ig(m,f);k.Pc(h)}return k};e.prototype.Ma=function(){return 0};e.prototype.re=function(){};return e}(),a=function(){function e(f,h){this.Xa=f;this.za=0;this.qq=h}e.prototype.next=function(){var f=this.Xa.Y;if(this.za<f.ea()){var h=this.za;this.za++;if(!f.Pn(h))for(var k=f.Oa(f.Wc(h)-
1);this.za<f.ea();){var m=f.Oa(f.Ca(this.za));if(f.Pn(this.za))break;if(m!=k)break;k=f.Oa(f.Wc(this.za)-1);this.za++}if(1==this.za-h)return this.Xa.fE(this.Xa.Y,h,this.qq);k=new g.Ua(this.Xa.Y.description);k.addPath(this.Xa.Y,h,!0);for(h+=1;h<this.za;h++)k.Fr(this.Xa.Y,h,0,f.tv(h),!1);return this.Xa.fE(k,0,this.qq)}return null};e.prototype.Ma=function(){return 0};e.prototype.re=function(){};return e}(),b=function(){function e(f){this.Xa=f;this.za=0}e.prototype.next=function(){var f=this.Xa.Y;if(this.za<
f.ea()){var h=this.za;f.Kr(this.za);for(this.za++;this.za<f.ea()&&!(0<f.Kr(this.za));)this.za++;return 0==h&&this.za==f.ea()?this.Xa.ly(f,0,f.ea()):this.Xa.ly(f,h,this.za)}return null};e.prototype.Ma=function(){return 0};e.prototype.re=function(){};return e}(),d=function(){function e(f){this.Ms=this.nw=this.Ns=this.Jd=null;this.$d=[];this.Vb=f;this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0;this.jA=this.xk=-1;this.qq=!0}e.buffer=function(f,h,k,m,n,p){if(null==f)throw g.i.O();if(0>m)throw g.i.O();
if(f.B())return new g.Ea(f.description);var q=new g.l;f.yc(q);0<h&&q.X(h,h);p=new e(p);p.Oj=k;p.Y=f;p.ra=g.ua.Xd(k,q,!0);p.dt=g.ua.Xd(null,q,!0);p.La=h;p.ET=f.K();0>=n&&(n=96);p.sb=Math.abs(p.La);p.Mv=0!=p.sb?1/p.sb:0;isNaN(m)||0==m?m=1E-5*p.sb:m>.5*p.sb&&(m=.5*p.sb);12>n&&(n=12);f=Math.abs(h)*(1-Math.cos(Math.PI/n));f>m?m=f:(f=Math.PI/Math.acos(1-m/Math.abs(h)),f<n-1&&(n=g.P.truncate(f),12>n&&(n=12,m=Math.abs(h)*(1-Math.cos(Math.PI/n)))));p.xk=m;p.Fq=n;p.oA=Math.min(p.dt,.25*m);return p.gE()};e.prototype.ev=
function(){if(null==this.Jd)this.Jd=[];else if(0!==this.Jd.length)return;var f=this.lE();f=g.P.truncate((f+3)/4);var h=.5*Math.PI/f;this.jA=h;for(var k=0;k<4*f;k++)this.Jd.push(null);var m=Math.cos(h);h=Math.sin(h);var n=g.h.construct(0,1);for(k=0;k<f;k++)this.Jd[k+0*f]=g.h.construct(n.y,-n.x),this.Jd[k+1*f]=g.h.construct(-n.x,-n.y),this.Jd[k+2*f]=g.h.construct(-n.y,n.x),this.Jd[k+3*f]=n,n=g.h.construct(n.x,n.y),n.Ct(m,h)};e.prototype.gE=function(){var f=this.Y.K();if(g.ba.zd(f))return f=new g.Ua(this.Y.description),
f.pc(this.Y,!0),this.Y=f,this.gE();if(this.La<=this.ra)if(g.ba.PS(f)){if(0>=this.La&&(f=new g.l,this.Y.A(f),f.S()<=2*-this.La||f.da()<=2*this.La))return new g.Ea(this.Y.description)}else return new g.Ea(this.Y.description);switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw g.i.Ra();}};e.prototype.MN=function(){if(this.zG(this.Y)){var f=new g.Ta;this.Y.we(0,f);var h=new g.l;this.Y.A(h);
f.Db(h.tf());return this.Iu(f)}this.Y=this.RV(this.Y);f=new a(this,this.qq);return g.Ih.local().W(f,this.Oj,this.Vb).next()};e.prototype.LN=function(){if(0==this.La)return this.Y;var f=g.$l.local();this.ev();this.Y=f.W(this.Y,null,!1,this.Vb);if(0>this.La){var h=this.Y;h=this.ly(h,0,h.ea());return f.W(h,this.Oj,!1,this.Vb)}if(this.zG(this.Y))return f=new g.Ta,this.Y.we(0,f),h=new g.l,this.Y.A(h),f.Db(h.tf()),this.Iu(f);f=new b(this);return g.Ih.local().W(f,this.Oj,this.Vb).next()};e.prototype.ly=
function(f,h,k){for(var m=new g.Ea(f.description);h<k;h++)if(!(1>f.Ka(h))){var n=f.Kr(h),p=new g.l;f.Tj(h,p);if(0<this.La)if(0<n)if(this.AG(f,h))n=new g.Ta,f.we(f.Ca(h),n),n.Db(p.tf()),this.Au(m,n);else{var q=n=new g.Ua(f.description);q=g.au.EG(this.Y,h)||2==this.Bn(this.Y,h,q,!0,1)?this.eE(f,h):this.An(n);m.add(q,!1)}else{if(!(p.S()+this.ra<=2*this.sb||p.da()+this.ra<=2*this.sb||(q=n=new g.Ua(f.description),this.Bn(this.Y,h,q,!0,1),n.B()))){var t=new g.l;t.L(p);t.X(this.sb,this.sb);q.vp(t);q=this.An(n);
p=1;for(n=q.ea();p<n;p++)m.addPath(q,p,!0)}}else if(0<n){if(!(p.S()+this.ra<=2*this.sb||p.da()+this.ra<=2*this.sb||(q=n=new g.Ua(f.description),this.Bn(this.Y,h,q,!0,-1),n.B())))for(t=new g.l,q.yc(t),t.X(this.sb,this.sb),q.vp(t),q=this.An(n),p=1,n=q.ea();p<n;p++)m.addPath(q,p,!0)}else for(q=n=new g.Ua(f.description),this.Bn(this.Y,h,q,!0,-1),q=this.An(n),p=0,n=q.ea();p<n;p++)m.addPath(q,p,!0)}if(0<this.La)return 1<m.ea()?m=this.An(m):e.kx(m);f=new g.l;m.yc(f);if(m.B())return e.kx(m);f.X(this.sb,this.sb);
m.vp(f);m=this.An(m);f=new g.Ea(m.description);p=1;for(n=m.ea();p<n;p++)f.addPath(m,p,!1);return e.kx(f)};e.prototype.KN=function(){return this.Iu(this.Y)};e.prototype.Iu=function(f){var h=new g.Ea(this.Y.description);this.Au(h,f);return this.oX(h)};e.prototype.JN=function(){var f=new c(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return g.Ih.local().W(f,this.Oj,this.Vb).next()};e.prototype.GN=function(){var f=new g.Ea(this.Y.description);if(0>=this.La){if(0==this.La)f.bd(this.Y,!1);else{var h=
new g.Hh;this.Y.dn(h);h.X(this.La,this.La);f.bd(h,!1)}return f}f.bd(this.Y,!1);this.Y=f;return this.eE(f,0)};e.prototype.eE=function(f,h){this.ev();var k=new g.Ea(f.description),m=new g.h,n=new g.h,p=new g.h,q=new g.h,t=new g.h,v=new g.h,F=new g.h,W=new g.h,ba=f.Ka(h),aa=f.Ca(h),fa=0;for(h=f.Ka(h);fa<h;fa++){f.D(aa+fa,n);f.D(aa+(fa+1)%ba,q);f.D(aa+(fa+2)%ba,v);F.vc(q,n);if(0==F.length())throw g.i.Ra();F.Jv();F.normalize();F.scale(this.sb);m.add(F,n);p.add(F,q);0==fa?k.Nt(m):k.Ei(m);k.Ei(p);W.vc(v,
q);if(0==W.length())throw g.i.Ra();W.Jv();W.normalize();W.scale(this.sb);t.add(W,q);this.BD(k,q,p,t,!1)}return e.kx(k)};e.prototype.fE=function(f,h,k){this.ev();if(1>f.Ka(h))return null;if(this.AG(f,h)&&0<this.La){k=new g.Ta;f.we(f.Ca(h),k);var m=new g.l;f.Tj(h,m);k.Db(m.tf());return this.Iu(k)}m=new g.Ua(f.description);if(f.Pn(h))this.Bn(f,h,m,k,1),this.Bn(f,h,m,k,-1);else{var n=new g.Ua(f.description);n.addPath(f,h,!1);n.Fr(f,h,0,f.tv(h),!1);this.Bn(n,0,m,k,1)}return this.An(m)};e.prototype.Zq=
function(){this.$s++;if(0==this.$s%1024&&null!=this.Vb&&!this.Vb.progress(-1,-1))throw g.i.hu("user_canceled");};e.prototype.An=function(f){return g.Hg.Ok(f,this.dt,!0,!0,this.Vb)};e.prototype.lE=function(){if(0==this.xk)return this.Fq;var f=1-this.xk*Math.abs(this.Mv);f=-1>f?4:2*Math.PI/Math.acos(f)+.5;4>f?f=4:f>this.Fq&&(f=this.Fq);return g.P.truncate(f)};e.prototype.BD=function(f,h,k,m,n){this.ev();var p=new g.h;p.vc(k,h);p.scale(this.Mv);var q=new g.h;q.vc(m,h);q.scale(this.Mv);p=Math.atan2(p.y,
p.x)/this.jA;0>p&&(p=this.Jd.length+p);p=this.Jd.length-p;q=Math.atan2(q.y,q.x)/this.jA;0>q&&(q=this.Jd.length+q);q=this.Jd.length-q;q<p&&(q+=this.Jd.length);var t=g.P.truncate(q);q=g.P.truncate(Math.ceil(p));p=new g.h;p.N(this.Jd[q%this.Jd.length]);p.Dt(this.sb,h);var v=10*this.ra;p.sub(k);p.length()<v&&(q+=1);p.N(this.Jd[t%this.Jd.length]);p.Dt(this.sb,h);p.sub(m);p.length()<v&&--t;k=t-q;k++;t=0;for(q%=this.Jd.length;t<k;t++,q=(q+1)%this.Jd.length)p.N(this.Jd[q]),p.Dt(this.sb,h),f.Ei(p),this.Zq();
n&&f.Ei(m)};e.prototype.Bn=function(f,h,k,m,n){var p=new g.hd,q=p.hN(f,h);p.Ip(this.oA,!1,!1);if(2>p.I(q)){if(0>n)return 1;n=f;p=new g.Ta;n.we(n.Ca(h),p);this.Au(k,p);return 1}var t=p.Oa(p.Ya(p.Ob(q))),v=new g.Ed;v.ig(-t.x,-t.y);p.Pc(v);if(m&&(this.oQ(p,q,n),2>p.I(q))){if(0>n)return 1;n=f;p=new g.Ta;n.we(n.Ca(h),p);this.Au(k,p);return 1}this.$d.length=0;var F=p.Ob(q);h=p.Ya(F);var W=1==n?p.Na(h):p.V(h);f=1==n?p.V(h):p.Na(h);var ba=!0;m=new g.h;q=new g.h;var aa=new g.h,fa=new g.h,ka=new g.h,la=new g.h,
ma=new g.h,sa=new g.h,wa=new g.h,Ga=new g.h,Fa=this.sb;F=p.Ka(F);for(var Sa=0;Sa<F;Sa++)p.D(f,q),ba&&(p.D(h,m),p.D(W,aa),sa.vc(m,aa),sa.normalize(),Ga.HG(sa),Ga.scale(Fa),fa.add(Ga,m)),ma.vc(q,m),ma.normalize(),wa.HG(ma),wa.scale(Fa),ka.add(m,wa),W=sa.yi(ma),ba=sa.Sh(ma),0>W||0>ba&&0==W?this.$d.push(l.Su(fa,ka,m,2,this.$d.length+1,this.$d.length-1)):fa.rb(ka)||(this.$d.push(l.construct(fa,m,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(l.construct(m,ka,this.$d.length+1,this.$d.length-1,
"dummy"))),la.add(q,wa),this.$d.push(l.Su(ka,la,m,1,this.$d.length+1,this.$d.length-1)),fa.N(la),Ga.N(wa),aa.N(m),m.N(q),sa.N(ma),W=h,h=f,ba=!1,f=1==n?p.V(h):p.Na(h);this.$d[this.$d.length-1].sh=0;this.$d[0].uh=this.$d.length-1;this.TV(k);v.ig(t.x,t.y);k.TD(v,k.ea()-1);return 1};e.prototype.TV=function(f){for(var h=this.uO(),k=!0,m=h+1,n=h;m!=h;n=m){var p=this.$d[n];m=-1!=p.sh?p.sh:(n+1)%this.$d.length;0!=p.Eo&&(k&&f.Nt(p.Km),2==p.Eo?this.BD(f,p.cw,p.Km,p.Xm,!0):f.Ei(p.Xm),k=!1)}};e.prototype.uO=
function(){null==this.Ms&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var f=0,h=0,k=this.$d.length;h<k;){var m=this.$d[h];if(0!=(m.Eo&3)){f=h;break}h=m.sh}k=f+1;for(h=f;k!=f;h=k){m=this.$d[h];k=m.sh;for(var n=1,p=null;k!=h;){p=this.$d[k];if(0!=(p.Eo&3))break;k=p.sh;n++}1!=n&&1==(m.Eo&p.Eo)&&(null==this.Ns&&(this.Ns=new g.zb,this.nw=new g.zb),this.Ns.Ec(m.Km),this.Ns.Rc(m.Xm),this.nw.Ec(p.Km),this.nw.Rc(p.Xm),1==this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)&&(m.Xm.N(this.Ms[0]),p.Km.N(this.Ms[0]),
m.sh=k,p.uh=h))}return f};e.prototype.Hv=function(f,h,k){var m=new g.h;m.vc(k,f);k=m.length();k=this.sb*this.sb-k*k*.25;if(0<k){k=Math.sqrt(k);m.normalize();m.cr();var n=new g.h;n.vc(h,f);if(n.Sh(m)+k>=this.sb)return!0}return!1};e.prototype.oQ=function(f,h,k){for(var m=0;1>m;m++){var n=!1,p=f.Ob(h),q=f.Ka(p);if(0==q)break;var t=q;if(3>q)break;!f.ec(p)&&(t=q-1);p=f.Ya(p);q=0<k?f.Na(p):f.V(p);for(var v=0<k?f.V(p):f.Na(p),F=q,W=!0,ba=new g.h,aa=new g.h,fa=new g.h,ka=new g.h,la=new g.h,ma=g.h.construct(0,
0),sa=new g.h,wa=new g.h,Ga=new g.h,Fa=new g.h,Sa=this.sb,Qa=0,Xa=0;Xa<t;){f.D(v,aa);W&&(f.D(p,ba),f.D(q,fa),F=q);wa.vc(ba,fa);wa.normalize();sa.vc(aa,ba);sa.normalize();if(F==v)break;var Ya=wa.yi(sa),bb=wa.Sh(sa),eb=!0;0>Ya||0>bb&&0==Ya||!this.Hv(fa,ba,aa)||(ma.N(aa),eb=!1,++Qa,n=!0);if(eb){if(0<Qa)for(;;){Ya=0<k?f.Na(F):f.V(F);if(Ya==p)break;f.D(Ya,ka);if(this.Hv(ka,fa,ma))fa.N(ka),F=Ya,eb=!1,++Qa;else{Ya!=v&&this.Hv(ka,fa,aa)&&this.Hv(ka,ba,aa)&&(fa.N(ka),F=Ya,eb=!1,++Qa);break}}if(!eb)continue;
if(0<Qa){F=0<k?f.Na(q):f.V(q);for(W=1;W<Qa;W++)eb=0<k?f.Na(F):f.V(F),f.qd(F,!0),F=eb;Ga.vc(ba,fa);Qa=Ga.length();Qa=Sa*Sa-Qa*Qa*.25;Qa=Math.sqrt(Qa);Sa-Qa>.5*this.xk?(la.add(fa,ba),la.scale(.5),Ga.normalize(),Ga.cr(),Fa.N(Ga),Fa.scale(Sa-Qa),la.add(Fa),f.mf(q,la)):f.qd(q,!0);Qa=0}fa.N(ba);F=p}ba.N(aa);q=p;p=v;v=0<k?f.V(p):f.Na(p);Xa++;W=!1}if(0<Qa){F=0<k?f.Na(q):f.V(q);for(W=1;W<Qa;W++)eb=0<k?f.Na(F):f.V(F),f.qd(F,!0),F=eb;la.add(fa,ba);la.scale(.5);Ga.vc(ba,fa);Qa=Ga.length();Qa=Sa*Sa-Qa*Qa*.25;
Qa=Math.sqrt(Qa);Ga.normalize();Ga.cr();Fa.N(Ga);Fa.scale(Sa-Qa);la.add(Fa);f.mf(q,la)}f.Ip(this.oA,!1,!1);if(!n)break}};e.prototype.AG=function(f,h){if(1==f.Ka(h))return!0;var k=new g.l;f.Tj(h,k);return Math.max(k.S(),k.da())<.5*this.xk?!0:!1};e.prototype.zG=function(f){var h=new g.l;f.A(h);return Math.max(h.S(),h.da())<.5*this.xk?!0:!1};e.prototype.RV=function(f){f=g.zC.local().W(f,.25*this.xk,!1,this.Vb);for(var h=0,k=0,m=f.ea();k<m;k++)h=Math.max(f.Ka(k),h);if(32>h)return this.qq=!1,f;this.qq=
!0;return g.Hg.Ok(f,this.dt,!1,!0,this.Vb)};e.prototype.Au=function(f,h){h=h.D();if(null!=this.Jd&&0!==this.Jd.length){var k=new g.h;k.N(this.Jd[0]);k.Dt(this.sb,h);f.Nt(k);for(var m=1,n=this.Jd.length;m<n;m++)k.N(this.Jd[m]),k.Dt(this.sb,h),f.Ei(k)}else{m=this.lE();k=g.P.truncate((m+3)/4);m=.5*Math.PI/k;n=Math.cos(m);for(var p=Math.sin(m),q=new g.h,t=3;0<=t;t--){q.na(0,this.sb);switch(t){case 0:for(m=0;m<k;m++)f.Aj(q.x+h.x,q.y+h.y),q.Ct(n,p);break;case 1:for(m=0;m<k;m++)f.Aj(-q.y+h.x,q.x+h.y),q.Ct(n,
p);break;case 2:for(m=0;m<k;m++)f.Aj(-q.x+h.x,-q.y+h.y),q.Ct(n,p);break;default:for(f.rx(q.y+h.x,-q.x+h.y),m=1;m<k;m++)q.Ct(n,p),f.Aj(q.y+h.x,-q.x+h.y)}this.Zq()}}};e.kx=function(f){f.Eh(1,0);return f};e.prototype.oX=function(f){f.Eh(2,this.ra);f.hm();return f};return e}();g.CK=d})(R||(R={}));(function(g){var z=function(){function l(c){this.Da=c;this.g=new g.hd;this.ed=new g.ja(0)}l.prototype.Nh=function(c,a,b){switch(a){case 0:if(c.v<b&&c.C<=b)break;else return c.v>=b?1:-1;case 1:if(c.G<b&&c.H<=
b)break;else return c.G>=b?1:-1;case 2:if(c.v>=b&&c.C>b)break;else return c.C<=b?1:-1;case 3:if(!(c.G>=b&&c.H>b))return c.H<=b?1:-1}return 0};l.prototype.vy=function(c,a){return 1736==c.K()?this.xy(c,a):this.yy(c)};l.prototype.xy=function(c,a){if(0==this.Da.S()||0==this.Da.da())return c.Ja();var b=new g.l;c.yc(b);this.Y=this.g.Ib(c);var d=new g.l,e=new g.l,f=new g.h,h=new g.h,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new g.jg;var n=new g.zb,p=new g.ja(0);p.Jb(Math.min(100,c.I()));for(var q=!1,t=
0;!q&&4>t;t++){var v=!1,F=0!=(t&1),W=0;switch(t){case 0:W=this.Da.v;v=b.v<=W&&b.C>=W;break;case 1:W=this.Da.G;v=b.G<=W&&b.H>=W;break;case 2:W=this.Da.C;v=b.v<=W&&b.C>=W;break;case 3:W=this.Da.H,v=b.G<=W&&b.H>=W}if(v)for(q=!0,v=this.g.Ob(this.Y);-1!=v;){var ba=-1,aa=-1,fa=this.g.Ya(v),ka=fa;do{var la=this.g.cc(ka);null==la&&(la=n,this.g.D(ka,f),la.Ec(f),this.g.D(this.g.V(ka),h),la.Rc(h));la.A(d);var ma=this.Nh(d,t,W),sa=0,wa=-1;if(-1==ma){la=la.fq(F,W,k,m);sa=0<la?this.g.Wl(ka,m,la):0;sa+=1;var Ga=
ka,Fa=this.g.V(Ga);for(la=0;la<sa;la++){this.g.D(Ga,f);this.g.D(Fa,h);wa=this.g.cc(Ga);null==wa&&(wa=n,wa.Ec(f),wa.Rc(h));wa.A(e);wa=this.Nh(e,t,W);if(-1==wa){if(F)wa=Math.abs(f.y-W),Sa=Math.abs(h.y-W),wa<Sa?(f.y=W,this.g.mf(Ga,f)):(h.y=W,this.g.mf(Fa,h));else{wa=Math.abs(f.x-W);var Sa=Math.abs(h.x-W);wa<Sa?(f.x=W,this.g.mf(Ga,f)):(h.x=W,this.g.mf(Fa,h))}wa=this.g.cc(Ga);null==wa&&(wa=n,wa.Ec(f),wa.Rc(h));wa.A(e);wa=this.Nh(e,t,W)}Sa=ba;ba=wa;-1==aa&&(aa=ba);0==Sa&&1==ba||1==Sa&&0==ba||0!=Sa||0!=
ba||p.add(Ga);1==ba&&(q=!1);wa=Ga=Fa;Fa=this.g.V(Fa)}}0==sa&&(Sa=ba,ba=ma,-1==aa&&(aa=ba),0==Sa&&1==ba||1==Sa&&0==ba||0!=Sa||0!=ba||p.add(ka),1==ba&&(q=!1),wa=this.g.V(ka));ka=wa}while(ka!=fa);0==aa&&0==ba&&p.add(fa);la=0;for(ba=p.size;la<ba;la++)aa=p.get(la),this.g.qd(aa,!1);p.clear(!1);v=3>this.g.Ka(v)?this.g.ar(v):this.g.Sb(v)}}if(q)return c.Ja();this.AB();0<a&&this.Hy(a);return this.g.Ke(this.Y)};l.prototype.yy=function(c){var a=new g.l,b=new g.l,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],f=
new g.jg,h=c,k=new g.l;c.yc(k);for(var m=0;4>m;m++){var n=!1,p=0!=(m&1),q=0;switch(m){case 0:q=this.Da.v;n=k.v<=q&&k.C>=q;break;case 1:q=this.Da.G;n=k.G<=q&&k.H>=q;break;case 2:q=this.Da.C;n=k.v<=q&&k.C>=q;break;case 3:q=this.Da.H,n=k.G<=q&&k.H>=q}if(n){n=h;h=c.Ja();n=n.Ha();n.aj();for(var t,v=new g.h;n.ab();)for(var F,W=!0;n.Ia();){var ba=n.ia();ba.A(a);var aa=this.Nh(a,m,q);if(-1==aa){if(aa=ba.fq(p,q,d,e),0<aa){var fa=0;t=ba.bc();for(var ka=0;ka<=aa;ka++)if(F=ka<aa?e[ka]:1,fa!=F){ba.dh(fa,F,f);
var la=f.get();la.Ec(t);ka<aa&&(p?(v.x=d[ka],v.y=q):(v.x=q,v.y=d[ka]),la.Rc(v));la.A(b);var ma=this.Nh(b,m,q);if(-1==ma){t=la.bc();fa=la.xc();if(p)ma=Math.abs(t.y-q),sa=Math.abs(fa.y-q),ma<sa?(t.y=q,la.Ec(t)):(fa.y=q,la.Rc(fa));else{ma=Math.abs(t.x-q);var sa=Math.abs(fa.x-q);ma<sa?(t.x=q,la.Ec(t)):(fa.x=q,la.Rc(fa))}la.A(b);ma=this.Nh(b,m,q)}t=la.xc();fa=F;F=ma;1==F?(h.pc(la,W),W=!1):W=!0}}}else F=aa,1==F?(h.pc(ba,W),W=!1):W=!0}}}return h};l.prototype.AB=function(){this.li=-1;this.Xl(!1,this.Da.v);
this.Xl(!1,this.Da.C);this.Xl(!0,this.Da.G);this.Xl(!0,this.Da.H);this.ed.resize(0);this.ed.Jb(100);this.li=this.g.Hd();for(var c=new g.h,a=this.g.Ob(this.Y);-1!=a;a=this.g.Sb(a))for(var b=this.g.Ya(a),d=0,e=this.g.Ka(a);d<e;d++,b=this.g.V(b))if(this.g.D(b,c),this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)this.g.Sa(b,this.li,this.ed.size),this.ed.add(b);this.Pl(!1,this.Da.v);this.Pl(!1,this.Da.C);this.Pl(!0,this.Da.G);this.Pl(!0,this.Da.H);this.Oy()};l.prototype.Hy=function(c){for(var a=
new g.h,b=new g.h,d=g.P.mg(2048,0),e=this.g.Ob(this.Y);-1!=e;e=this.g.Sb(e)){var f=this.g.Ya(e),h=f;do{var k=this.g.V(h);this.g.D(h,a);var m=-1;a.x==this.Da.v?(this.g.D(k,b),b.x==this.Da.v&&(m=1)):a.x==this.Da.C&&(this.g.D(k,b),b.x==this.Da.C&&(m=1));a.y==this.Da.G?(this.g.D(k,b),b.y==this.Da.G&&(m=0)):a.y==this.Da.H&&(this.g.D(k,b),b.y==this.Da.H&&(m=0));if(-1!=m&&(m=g.h.ub(a,b),m=g.P.truncate(Math.min(Math.ceil(m/c),2048)),!(1>=m))){for(var n=1;n<m;n++)d[n-1]=1*n/m;this.g.Wl(h,d,m-1)}h=k}while(h!=
f)}};l.prototype.Xl=function(c,a){var b=this.g.Hd(),d=new g.h,e=new g.ja(0);e.Jb(100);for(var f=this.g.Ob(this.Y);-1!=f;f=this.g.Sb(f))for(var h=this.g.Ya(f),k=0,m=this.g.Ka(f);k<m;k++){var n=this.g.V(h);this.g.D(h,d);if(c?d.y==a:d.x==a)if(this.g.D(n,d),c?d.y==a:d.x==a)1!=this.g.Qa(h,b)&&(e.add(h),this.g.Sa(h,b,1)),1!=this.g.Qa(n,b)&&(e.add(n),this.g.Sa(n,b,1));h=n}this.g.Ud(b);if(!(3>e.size)){var p=this;e.Wd(0,e.size,function(ma,sa){return p.Oh(ma,sa)});b=new g.h;f=new g.h;h=new g.h;f.Sc();var q=
-1;k=new g.ja(0);m=new g.ja(0);n=this.g.Hd();for(var t=this.g.Hd(),v=0,F=e.size;v<F;v++){var W=e.get(v);this.g.D(W,d);if(!d.rb(f)){if(-1!=q){for(var ba=q;ba<v;ba++){q=e.get(ba);var aa=this.g.V(q);W=this.g.Na(q);var fa=!1;0>this.Oh(q,aa)&&(this.g.D(aa,b),c?b.y==a:b.x==a)&&(k.add(q),fa=!0,this.g.Sa(q,t,1));0>this.Oh(q,W)&&(this.g.D(W,b),c?b.y==a:b.x==a)&&(fa||k.add(q),this.g.Sa(q,n,1))}ba=0;for(fa=k.size;ba<fa;ba++){q=k.get(ba);W=this.g.Qa(q,n);aa=this.g.Qa(q,t);if(1==W){W=this.g.Na(q);this.g.D(W,h);
var ka=[0];ka[0]=0;if(!h.rb(d)){var la=g.h.ub(f,h);ka[0]=g.h.ub(h,d)/la;0==ka[0]?ka[0]=2.220446049250313E-16:1==ka[0]&&(ka[0]=.9999999999999998);this.g.Wl(W,ka,1);W=this.g.Na(q);this.g.mf(W,d);m.add(W);this.g.Sa(W,n,1);this.g.Sa(W,t,-1)}}1==aa&&(aa=this.g.V(q),this.g.D(aa,h),ka=[0],ka[0]=0,h.rb(d)||(la=g.h.ub(f,h),ka[0]=g.h.ub(f,d)/la,0==ka[0]?ka[0]=2.220446049250313E-16:1==ka[0]&&(ka[0]=.9999999999999998),this.g.Wl(q,ka,1),W=this.g.V(q),this.g.mf(W,d),m.add(W),this.g.Sa(W,n,-1),this.g.Sa(W,t,1)))}q=
k;k=m;m=q;m.clear(!1)}q=v;f.N(d)}}this.g.Ud(n);this.g.Ud(t)}};l.prototype.Pl=function(c,a){var b=new g.h,d=new g.ja(0);d.Jb(100);for(var e=this.g.Hd(),f=0,h=this.ed.size;f<h;f++){var k=this.ed.get(f);if(-1!=k){var m=this.g.V(k);this.g.D(k,b);if(c?b.y==a:b.x==a)if(this.g.D(m,b),c?b.y==a:b.x==a)-2!=this.g.Qa(k,e)&&(d.add(k),this.g.Sa(k,e,-2)),-2!=this.g.Qa(m,e)&&(d.add(m),this.g.Sa(m,e,-2))}}if(0!=d.size){var n=this;d.Wd(0,d.size,function(sa,wa){return n.Oh(sa,wa)});f=0;for(h=d.size;f<h;f++){var p=
d.get(f);this.g.Sa(p,e,f)}k=new g.h;m=new g.h;m.Sc();var q=-1;f=0;for(h=d.size;f<h;f++)if(p=d.get(f),-1!=p&&(this.g.D(p,b),!b.rb(m))){if(-1!=q)for(;;){p=!1;for(var t=1<f-q?f-1:f,v=q;v<t;v++){var F=d.get(v);if(-1!=F){var W=-1,ba=this.g.V(F);0>this.Oh(F,ba)&&(this.g.D(ba,k),c?k.y==a:k.x==a)&&(W=ba);ba=-1;var aa=this.g.Na(F);0>this.Oh(F,aa)&&(this.g.D(aa,k),c?k.y==a:k.x==a)&&(ba=aa);if(-1!=W&&-1!=ba)this.Mh(F,d,e),this.g.qd(F,!1),this.Mh(W,d,e),this.g.qd(W,!1),p=!0;else if(-1!=W||-1!=ba){for(aa=v+1;aa<
f;aa++){var fa=d.get(aa);if(-1!=fa){var ka=this.g.V(fa),la=-1;0>this.Oh(fa,ka)&&(this.g.D(ka,k),c?k.y==a:k.x==a)&&(la=ka);ka=this.g.Na(fa);var ma=-1;0>this.Oh(fa,ka)&&(this.g.D(ka,k),c?k.y==a:k.x==a)&&(ma=ka);if(-1!=la&&-1!=ma){this.Mh(fa,d,e);this.g.qd(fa,!1);this.Mh(la,d,e);this.g.qd(la,!1);p=!0;break}if(-1!=W&&-1!=ma){this.At(d,F,W,fa,ma,e);p=!0;break}else if(-1!=ba&&-1!=la){this.At(d,fa,la,F,ba,e);p=!0;break}}}if(p)break}}}if(!p)break}q=f;m.N(b)}}this.g.Ud(e)};l.prototype.Mh=function(c,a,b){b=
this.g.Qa(c,b);a.set(b,-1);b=this.g.Qa(c,this.li);this.ed.set(b,-1);a=this.g.cd(c);-1!=a&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))};l.prototype.At=function(c,a,b,d,e,f){this.g.Cc(a,d);this.g.Dc(d,a);this.g.Dc(b,e);this.g.Cc(e,b);this.Mh(d,c,f);this.g.oi(d,!1);this.Mh(e,c,f);this.g.oi(e,!0)};l.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var b=this.ed.get(c);-1!=b&&this.g.cj(b,-1)}for(var d=0,e=0,f=this.g.Ob(this.Y);-1!=f;){var h=this.g.Ya(f);if(-1==h||f!=this.g.cd(h)){var k=
f;f=this.g.Sb(f);this.g.Kf(k,-1);this.g.br(k)}else{b=h;k=0;do this.g.cj(b,f),k++,b=this.g.V(b);while(b!=h);2>=k?(b=this.g.Qa(h,this.li),this.ed.set(b,-1),h=this.g.qd(h,!1),2==k&&(b=this.g.Qa(h,this.li),this.ed.set(b,-1),this.g.qd(h,!1)),k=f,f=this.g.Sb(f),this.g.Kf(k,-1),this.g.br(k)):(this.g.fp(f,!1),this.g.Yg(f,this.g.Na(h)),this.g.Xj(f,k),e+=k,d++,f=this.g.Sb(f))}}c=0;for(a=this.ed.size;c<a;c++)if(b=this.ed.get(c),-1!=b&&(f=this.g.cd(b),-1==f)){f=this.g.wf(this.Y,-1);k=0;h=b;do this.g.cj(b,f),
k++,b=this.g.V(b);while(b!=h);2>=k?(b=this.g.Qa(h,this.li),this.ed.set(b,-1),h=this.g.qd(h,!1),2==k&&(b=this.g.Qa(h,this.li),0<=b&&this.ed.set(b,-1),this.g.qd(h,!1)),k=f,this.g.Kf(k,-1),this.g.br(k)):(this.g.mn(f,!0),this.g.Xj(f,k),this.g.Kf(f,h),this.g.Yg(f,this.g.Na(h)),this.g.fp(f,!1),e+=k,d++)}this.g.Tl(this.Y,d);this.g.Vj(this.Y,e);c=0;for(a=this.g.md;-1!=a;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)};l.wy=function(c,a,b){return(new l(a)).vy(c,b)};l.clip=function(c,a,b,d){if(c.B())return c;if(a.B())return c.Ja();
b=c.K();if(33==b)return d=c.D(),a.contains(d)?c:c.Ja();if(197==b)return d=new g.l,c.A(d),d.Fa(a)?(a=new g.Hh,c.copyTo(a),a.Zo(d),a):c.Ja();var e=new g.l;c.yc(e);if(a.contains(e))return c;if(!a.isIntersecting(e))return c.Ja();e=c.Cb;if(null!=e&&(e=e.Hk,null!=e)){e=e.To(a);if(1==e){if(1736!=b)throw g.i.Ra();c=new g.Ea(c.description);c.vp(a);return c}if(0==e)return c.Ja()}switch(b){case 550:b=null;e=c.I();for(var f=c.vb(0),h=0,k=0;k<e;k++)d=new g.h,f.uc(2*k,d),a.contains(d)||(0==h&&(b=c.Ja()),h<k&&b.Gd(c,
h,k),h=k+1);0<h&&b.Gd(c,h,e);return 0==h?c:b;case 1736:case 1607:return l.wy(c,a,d);default:throw g.i.Ra();}};l.prototype.Oh=function(c,a){var b=new g.h;this.g.D(c,b);c=new g.h;this.g.D(a,c);return b.compare(c)};return l}();g.Vd=z})(R||(R={}));(function(g){var z=function(){function l(c,a){this.Da=c;this.g=new g.hd;this.ed=new g.ja(0);this.od=a}l.prototype.Nh=function(c,a,b){switch(a){case 0:if(c.v<b&&c.C<=b)break;else return c.v>=b?1:-1;case 1:if(c.G<b&&c.H<=b)break;else return c.G>=b?1:-1;case 2:if(c.v>=
b&&c.C>b)break;else return c.C<=b?1:-1;case 3:if(!(c.G>=b&&c.H>b))return c.H<=b?1:-1}return 0};l.prototype.vy=function(c,a){return 1736==c.K()?this.xy(c,a):this.yy(c)};l.prototype.xy=function(c,a){if(0==this.Da.S()||0==this.Da.da())return c.Ja();var b=new g.l;c.yc(b);this.Y=this.g.Ib(c);var d=new g.l,e=new g.l,f=new g.h,h=new g.h,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],n=new g.zb,p=new g.ja(0);p.Jb(256);for(var q=!1,t=0;!q&&4>t;t++){var v=!1,F=0!=(t&1),W=0;switch(t){case 0:W=this.Da.v;v=b.v<=
W&&b.C>=W;break;case 1:W=this.Da.G;v=b.G<=W&&b.H>=W;break;case 2:W=this.Da.C;v=b.v<=W&&b.C>=W;break;case 3:W=this.Da.H,v=b.G<=W&&b.H>=W}if(v)for(q=!0,v=this.g.Ob(this.Y);-1!=v;){var ba=!0,aa=-1,fa=-1,ka=this.g.Ya(v),la=ka;do{var ma=this.g.cc(la);null==ma&&(ma=n,this.g.D(la,f),ma.Ec(f),this.g.D(this.g.V(la),h),ma.Rc(h));ma.A(d);var sa=this.Nh(d,t,W),wa=0,Ga=-1;if(-1==sa){ma=ma.fq(F,W,k,m);wa=0<ma?this.g.HX(la,m,ma):0;wa+=1;var Fa=la,Sa=this.g.V(Fa);for(ma=0;ma<wa;ma++){this.g.D(Fa,f);this.g.D(Sa,h);
Ga=this.g.cc(Fa);null==Ga&&(Ga=n,Ga.Ec(f),Ga.Rc(h));Ga.A(e);Ga=this.Nh(e,t,W);if(-1==Ga){if(F)Ga=Math.abs(f.y-W),Qa=Math.abs(h.y-W),Ga<Qa?(f.y=W,this.g.mf(Fa,f)):(h.y=W,this.g.mf(Sa,h));else{Ga=Math.abs(f.x-W);var Qa=Math.abs(h.x-W);Ga<Qa?(f.x=W,this.g.mf(Fa,f)):(h.x=W,this.g.mf(Sa,h))}Ga=this.g.cc(Fa);null==Ga&&(Ga=n,Ga.Ec(f),Ga.Rc(h));Ga.A(e);Ga=this.Nh(e,t,W)}Qa=aa;aa=Ga;-1==fa&&(fa=aa);0==Qa&&1==aa||1==Qa&&0==aa||0!=Qa||0!=aa||p.add(Fa);1==aa&&(ba=q=!1);Ga=Fa=Sa;Sa=this.g.V(Sa)}}0==wa&&(Qa=aa,
aa=sa,-1==fa&&(fa=aa),0==Qa&&1==aa||1==Qa&&0==aa||0!=Qa||0!=aa||p.add(la),1==aa&&(ba=q=!1),Ga=this.g.V(la));la=Ga;if(256<=p.size){ma=1;for(sa=p.size-1;ma<sa;ma++)wa=p.get(ma),this.g.qd(wa,!1);p.set(1,p.Gc());p.Dh(2)}}while(la!=ka);if(!ba)for(0==fa&&0==aa&&p.add(ka),ma=0,sa=p.size;ma<sa;ma++)wa=p.get(ma),this.g.qd(wa,!1);p.clear(!1);v=ba||0==this.g.Ka(v)?this.g.ar(v):this.g.Sb(v)}}if(q)return c.Ja();this.AB();0<a&&this.Hy(a);return this.g.Ke(this.Y)};l.prototype.yy=function(c){var a=new g.l,b=new g.l,
d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],f=new g.jg,h=c,k=new g.l;c.yc(k);for(var m=new g.h,n=new g.h,p=null,q=null,t=0;4>t;t++){var v=!1,F=0!=(t&1),W=0;switch(t){case 0:W=this.Da.v;v=k.v<=W&&k.C>=W;break;case 1:W=this.Da.G;v=k.G<=W&&k.H>=W;break;case 2:W=this.Da.C;v=k.v<=W&&k.C>=W;break;case 3:W=this.Da.H,v=k.G<=W&&k.H>=W}if(v)for(v=h,h=c.Ja(),v=v.Ha(),v.aj();v.ab();)for(var ba,aa=!0;v.Ia();){var fa=v.ia();fa.A(a);var ka=this.Nh(a,t,W);if(-1==ka){if(ka=fa.fq(F,W,d,e),0<ka){var la=0;fa.$p(m);for(var ma=
0;ma<=ka;ma++)if(ba=ma<ka?e[ma]:1,la!=ba){fa.dh(la,ba,f);var sa=f.get();sa.Ec(m);ma<ka&&(F?(n.x=d[ma],n.y=W):(n.x=W,n.y=d[ma]),sa.Rc(n));sa.A(b);var wa=this.Nh(b,t,W);-1==wa&&(null==p&&(p=new g.h),null==q&&(q=new g.h),sa.$p(p),sa.Vr(q),F?(la=Math.abs(p.y-W),wa=Math.abs(q.y-W),la<wa?(p.y=W,sa.Ec(p)):(q.y=W,sa.Rc(q))):(la=Math.abs(p.x-W),wa=Math.abs(q.x-W),la<wa?(p.x=W,sa.Ec(p)):(q.x=W,sa.Rc(q))),sa.A(b),wa=this.Nh(b,t,W));sa.Vr(m);la=ba;ba=wa;1==ba?(h.pc(sa,aa),aa=!1):aa=!0}}}else ba=ka,1==ba?(h.pc(fa,
aa),aa=!1):aa=!0}}return h};l.prototype.AB=function(){this.li=-1;this.Xl(!1,this.Da.v);this.Xl(!1,this.Da.C);this.Xl(!0,this.Da.G);this.Xl(!0,this.Da.H);this.ed.resize(0);this.ed.Jb(100);this.li=this.g.Hd();for(var c=new g.h,a=this.g.Ob(this.Y);-1!=a;a=this.g.Sb(a))for(var b=this.g.Ya(a),d=0,e=this.g.Ka(a);d<e;d++,b=this.g.V(b))if(this.g.D(b,c),this.Da.v==c.x||this.Da.C==c.x||this.Da.G==c.y||this.Da.H==c.y)this.g.Sa(b,this.li,this.ed.size),this.ed.add(b);this.Pl(!1,this.Da.v);this.Pl(!1,this.Da.C);
this.Pl(!0,this.Da.G);this.Pl(!0,this.Da.H);this.Oy()};l.prototype.Hy=function(c){for(var a=new g.h,b=new g.h,d=null,e=null,f=g.P.mg(2048,0),h=this.g.Ob(this.Y);-1!=h;h=this.g.Sb(h)){var k=this.g.Ya(h),m=k;do{var n=this.g.V(m);this.g.D(m,a);var p=-1;a.x==this.Da.v?(this.g.D(n,b),b.x==this.Da.v&&(p=1)):a.x==this.Da.C&&(this.g.D(n,b),b.x==this.Da.C&&(p=1));a.y==this.Da.G?(this.g.D(n,b),b.y==this.Da.G&&(p=0)):a.y==this.Da.H&&(this.g.D(n,b),b.y==this.Da.H&&(p=0));if(-1!=p){null==d&&(d=new g.h);null==
e&&(e=new g.h);d.N(a);e.na(0,0);if(0==p){var q=a.x-this.Da.v;e.x=g.mc.sign(b.x-a.x);d.x=c*g.mc.En(Math.floor(Math.abs(q/c)),q)+this.Da.v;0>d.x&&(d.x+=c)}else q=a.y-this.Da.G,e.y=g.mc.sign(b.y-a.y),d.y=c*g.mc.En(Math.floor(Math.abs(q/c)),q)+this.Da.G,0>d.y&&(d.y+=c);q=0!=p?b.y-a.y:b.x-a.x;var t=Math.abs(q);if(65536<t/c)throw g.i.ga("internal error");if(0<t){t=g.P.truncate(t/c)+2;f.length<t&&(f=g.P.mg(t));for(var v=t=0;;v++){var F=new g.h;F.x=d.x+e.x*v*c;F.y=d.y+e.y*v*c;F=(0!=p?F.y-a.y:F.x-a.x)/q;if(1<=
F)break;0>=F||(f[t]=F,t++)}0!=t&&this.g.Wl(m,f,t)}}m=n}while(m!=k)}};l.prototype.Xl=function(c,a){for(var b=-1,d=new g.h,e=null,f=this.g.Ob(this.Y);-1!=f;f=this.g.Sb(f))for(var h=this.g.Ya(f),k=0,m=this.g.Ka(f);k<m;k++){var n=this.g.V(h);this.g.D(h,d);if(c?d.y==a:d.x==a)if(this.g.D(n,d),c?d.y==a:d.x==a)-1==b&&(b=this.g.Hd()),null==e&&(e=new g.ja(0),e.Jb(100)),1!=this.g.Qa(h,b)&&(e.add(h),this.g.Sa(h,b,1)),1!=this.g.Qa(n,b)&&(e.add(n),this.g.Sa(n,b,1));h=n}-1!=b&&this.g.Ud(b);if(!(null==e||3>e.size)){var p=
this;e.Wd(0,e.size,function(ma,sa){return p.Oh(ma,sa)});b=new g.h;f=new g.h;h=new g.h;f.Sc();var q=-1;k=new g.ja(0);m=new g.ja(0);n=null;for(var t=this.g.Hd(),v=this.g.Hd(),F=0,W=e.size;F<W;F++){var ba=e.get(F);this.g.D(ba,d);if(!d.rb(f)){if(-1!=q){for(var aa=q;aa<F;aa++){q=e.get(aa);var fa=this.g.V(q);ba=this.g.Na(q);var ka=!1;this.g.D(fa,b);0>f.compare(b)&&(c?b.y==a:b.x==a)&&(k.add(q),ka=!0,this.g.Sa(q,v,1));this.g.D(ba,b);0>f.compare(b)&&(c?b.y==a:b.x==a)&&(ka||k.add(q),this.g.Sa(q,t,1))}aa=0;
for(ka=k.size;aa<ka;aa++){q=k.get(aa);ba=this.g.Qa(q,t);fa=this.g.Qa(q,v);if(1==ba&&(ba=this.g.Na(q),this.g.D(ba,h),!h.rb(d))){null==n&&(n=[]);var la=g.h.ub(f,h);n[0]=g.h.ub(h,d)/la;0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998);this.g.Wl(ba,n,1);ba=this.g.Na(q);this.g.mf(ba,d);m.add(ba);this.g.Sa(ba,t,1);this.g.Sa(ba,v,-1)}1==fa&&(fa=this.g.V(q),this.g.D(fa,h),h.rb(d)||(null==n&&(n=[]),la=g.h.ub(f,h),n[0]=g.h.ub(f,d)/la,0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998),
this.g.Wl(q,n,1),ba=this.g.V(q),this.g.mf(ba,d),m.add(ba),this.g.Sa(ba,t,-1),this.g.Sa(ba,v,1)))}q=k;k=m;m=q;m.clear(!1)}q=F;f.N(d)}}this.g.Ud(t);this.g.Ud(v)}};l.prototype.Pl=function(c,a){for(var b=new g.h,d=null,e=-1,f=0,h=this.ed.size;f<h;f++){var k=this.ed.get(f);if(-1!=k){var m=this.g.V(k);this.g.D(k,b);if(c?b.y==a:b.x==a)if(this.g.D(m,b),c?b.y==a:b.x==a)-1==e&&(e=this.g.Hd()),null==d&&(d=new g.ja(0),d.Jb(100)),-2!=this.g.Qa(k,e)&&(d.add(k),this.g.Sa(k,e,-2)),-2!=this.g.Qa(m,e)&&(d.add(m),this.g.Sa(m,
e,-2))}}if(null==d)-1!=e&&this.g.Ud(e);else{var n=this;d.Wd(0,d.size,function(sa,wa){return n.Oh(sa,wa)});f=0;for(h=d.size;f<h;f++){var p=d.get(f);this.g.Sa(p,e,f)}k=new g.h;m=new g.h;m.Sc();var q=-1;f=0;for(h=d.size;f<h;f++)if(p=d.get(f),-1!=p&&(this.g.D(p,b),!b.rb(m))){if(-1!=q)for(;;){p=!1;for(var t=1<f-q?f-1:f,v=q;v<t;v++){var F=d.get(v);if(-1!=F){var W=-1,ba=this.g.V(F);this.g.D(ba,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(W=ba);ba=-1;var aa=this.g.Na(F);this.g.D(aa,k);0>m.compare(k)&&(c?k.y==a:
k.x==a)&&(ba=aa);if(-1!=W&&-1!=ba)this.Mh(F,d,e),this.g.qd(F,!1),this.Mh(W,d,e),this.g.qd(W,!1),p=!0;else if(-1!=W||-1!=ba){for(aa=v+1;aa<f;aa++){var fa=d.get(aa);if(-1!=fa){var ka=this.g.V(fa),la=-1;this.g.D(ka,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(la=ka);ka=this.g.Na(fa);var ma=-1;this.g.D(ka,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ma=ka);if(-1!=la&&-1!=ma){this.Mh(fa,d,e);this.g.qd(fa,!1);this.Mh(la,d,e);this.g.qd(la,!1);p=!0;break}if(-1!=W&&-1!=ma){this.At(d,F,W,fa,ma,e);p=!0;break}else if(-1!=
ba&&-1!=la){this.At(d,fa,la,F,ba,e);p=!0;break}}}if(p)break}}}if(!p)break}q=f;m.N(b)}this.g.Ud(e)}};l.prototype.Mh=function(c,a,b){b=this.g.Qa(c,b);a.set(b,-1);b=this.g.Qa(c,this.li);this.ed.set(b,-1);a=this.g.cd(c);-1!=a&&this.g.Ya(a)==c&&(this.g.Kf(a,-1),this.g.Yg(a,-1))};l.prototype.At=function(c,a,b,d,e,f){this.g.Cc(a,d);this.g.Dc(d,a);this.g.Dc(b,e);this.g.Cc(e,b);this.Mh(d,c,f);this.g.oi(d,!1);this.Mh(e,c,f);this.g.oi(e,!0)};l.prototype.Oy=function(){for(var c=0,a=this.ed.size;c<a;c++){var b=
this.ed.get(c);-1!=b&&this.g.cj(b,-1)}for(var d=0,e=0,f=this.g.Ob(this.Y);-1!=f;){var h=this.g.Ya(f);if(-1==h||f!=this.g.cd(h)){var k=f;f=this.g.Sb(f);this.g.Kf(k,-1);this.g.br(k)}else{b=h;k=0;do this.g.cj(b,f),k++,b=this.g.V(b);while(b!=h);this.g.fp(f,!1);this.g.Yg(f,this.g.Na(h));this.g.Xj(f,k);e+=k;d++;f=this.g.Sb(f)}}c=0;for(a=this.ed.size;c<a;c++)if(b=this.ed.get(c),-1!=b&&(f=this.g.cd(b),-1==f)){f=this.g.wf(this.Y,-1);k=0;h=b;do this.g.cj(b,f),k++,b=this.g.V(b);while(b!=h);2>=k?(b=this.g.Qa(h,
this.li),this.ed.set(b,-1),h=this.g.qd(h,!1),2==k&&(b=this.g.Qa(h,this.li),0<=b&&this.ed.set(b,-1),this.g.qd(h,!1)),k=f,this.g.Kf(k,-1),this.g.br(k)):(this.g.mn(f,!0),this.g.Xj(f,k),this.g.Kf(f,h),this.g.Yg(f,this.g.Na(h)),this.g.fp(f,!1),e+=k,d++)}this.g.Tl(this.Y,d);this.g.Vj(this.Y,e);c=0;for(a=this.g.md;-1!=a;a=this.g.ve(a))c+=this.g.I(a);this.g.XB(c)};l.wy=function(c,a,b,d){return(new l(a,d)).vy(c,b)};l.clip=function(c,a,b,d,e){return l.Pu(c,a,null,b,d,e)};l.Pu=function(c,a,b,d,e,f){var h=c.K();
if(33==h)return e=c.D(),a.contains(e)?c:c.Ja();if(197==h)return e=new g.l,c.A(e),e.Fa(a)?(a=new g.Hh,c.copyTo(a),a.Zo(e),a):c.Ja();if(c.B())return c;if(a.B())return c.Ja();var k=new g.l;c.yc(k);if(a.contains(k))return c;if(!a.isIntersecting(k))return c.Ja();(null!=b||isNaN(d))&&g.ua.oy(b,a,!1);if(!g.ba.zj(h))throw g.i.O();b=c.Cb;if(null!=b&&(b=b.Hk,null!=b)){b=b.To(a);if(1==b){if(1736!=h)throw g.i.ga("internal error");c=new g.Ea(c.description);c.vp(a);return c}if(0==b)return c.Ja()}switch(h){case 550:f=
null;h=c.I();b=c.vb(0);d=0;e=new g.h;for(k=0;k<h;k++)b.uc(2*k,e),a.contains(e)||(0==d&&(f=c.Ja()),d<k&&f.Gd(c,d,k),d=k+1);0<d&&f.Gd(c,d,h);return 0==d?c:f;case 1736:case 1607:return l.wy(c,a,e,f);default:throw g.i.ga("internal error");}};l.prototype.Oh=function(c,a){var b=new g.h;this.g.D(c,b);c=new g.h;this.g.D(a,c);return b.compare(c)};return l}();g.ti=z})(R||(R={}));(function(g){var z=new g.h,l=function(){function a(b,d,e,f,h){this.Rm=new g.h;this.Fk=new g.h;this.Ri=new g.h;this.g=b;this.Cw=e;
this.po=f;this.Rm=d;this.Al=h;this.Fk.Sc();this.Ri.Sc()}a.prototype.sE=function(b){this.g.D(b,this.Fk);b=g.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var d=g.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return c.eG(b,d)};a.prototype.ez=function(b){return this.g.Qa(b,this.Al)};a.prototype.Ky=function(b,d){this.g.D(b,this.Fk);this.g.D(d,this.Ri);return c.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)};return a}();g.oY=function(){return function(){}}();var c=function(){function a(){this.Rm=new g.h;
this.rq=[0,0,0,0];this.zs=[0,0,0,0];this.so=this.Al=-1}a.dQ=function(b,d){var e=new a;e.g=b;e.ra=d;e.Cw=d*d;e.bw=2*d;e.po=1/e.bw;return e.wO()};a.Ev=function(b,d,e,f,h){b-=e;d-=f;return b*b+d*d<=h};a.eG=function(b,d){return g.P.Vh(d,g.P.Vh(b))};a.prototype.yO=function(b,d){this.g.Hc(b,z);for(var e=(z.y-this.Rm.y)*this.po,f=g.P.truncate((z.x-this.Rm.x)*this.po),h=g.P.truncate(e),k=e=0;1>=k;k+=1)for(var m=0;1>=m;m+=1){var n=a.eG(f+k,h+m),p=this.zl.lR(n);-1!=p&&(this.rq[e]=p,this.zs[e]=n,e++)}for(f=
e-1;1<=f;f--)for(p=this.rq[f],h=f-1;0<=h;h--)if(p==this.rq[h]){this.zs[h]=-1;e--;f!=e&&(this.zs[f]=this.zs[e],this.rq[f]=this.rq[e]);break}for(h=0;h<e;h++)this.zO(b,this.zs[h],z,this.rq[h],d)};a.prototype.zO=function(b,d,e,f,h){for(var k=new g.h;-1!=f;f=this.zl.zR(f)){var m=this.zl.ka(f);b==m||-1!=d&&this.g.Qa(m,this.Al)!=d||(this.g.Hc(m,k),a.Ev(e.x,e.y,k.x,k.y,this.Cw)&&h.add(f))}};a.prototype.Zm=function(b,d,e){var f=this.g.Qa(b,this.so),h=this.g.Qa(d,this.so);-1==f&&(f=this.Ad.Rh(),this.Ad.addElement(f,
b),this.g.Sa(b,this.so,f));-1==h?this.Ad.addElement(f,d):this.Ad.Cy(f,h);this.g.Sa(d,this.so,-2);d=this.TT(b,d);e&&(e=this.mw.sE(b),this.g.Sa(b,this.Al,e));return d};a.RT=function(b,d,e){b.Nb(d);e=b;var f=new g.h;a.ST(b.D(),d.D(),f);e.Db(f)};a.ST=function(b,d,e){var f=b.x;b.x!=d.x&&(f=(1*b.x+1*d.x)/2);var h=b.y;b.y!=d.y&&(h=(1*b.y+1*d.y)/2);e.na(f,h)};a.prototype.TT=function(b,d){var e=new g.h;this.g.D(b,e);var f=new g.h;this.g.D(d,f);var h=this.g.YF(b);d=this.g.YF(d);var k=h+d,m=0,n=e.x;e.x!=f.x&&
(n=(e.x*h+f.x*d)/k,m++);var p=e.y;e.y!=f.y&&(p=(e.y*h+f.y*d)/k,m++);0<m&&this.g.Db(b,n,p);this.g.rX(b,k);return 0!=m};a.prototype.wO=function(){var b=this.g.gd,d=this.g.DF();this.Rm=d.hz();d=Math.max(d.da(),d.S())/2147483646;this.bw<d&&(this.bw=d,this.po=1/this.bw);this.Ad=new g.cu;this.Ad.Bt(g.P.truncate(this.g.gd/3+1));this.Ad.hn(g.P.truncate(this.g.gd/3+1));this.Al=this.g.Hd();this.so=this.g.Hd();this.mw=new l(this.g,this.Rm,this.Cw,this.po,this.Al);this.zl=new g.ZK(g.P.truncate(4*b/3),this.mw);
this.zl.vW(this.g.gd);b=!1;for(d=this.g.md;-1!=d;d=this.g.ve(d))for(var e=this.g.Ob(d);-1!=e;e=this.g.Sb(e))for(var f=this.g.Ya(e),h=0,k=this.g.Ka(e);h<k;h++){var m=this.mw.sE(f);this.g.Sa(f,this.Al,m);this.zl.addElement(f,m);f=this.g.V(f)}var n=new g.ja(0);n.Jb(10);for(d=this.g.md;-1!=d;d=this.g.ve(d))for(e=this.g.Ob(d);-1!=e;e=this.g.Sb(e))for(f=this.g.Ya(e),h=0,k=this.g.Ka(e);h<k;h++){if(-2!=this.g.Qa(f,this.so))for(m=this.g.Qa(f,this.Al),this.zl.kd(f,m);;){this.yO(f,n);if(0==n.size)break;m=!1;
for(var p=0,q=n.size;p<q;p++){var t=n.get(p),v=this.zl.ka(t);this.zl.wd(t);m=this.Zm(f,v,p+1==q)||m}b=b||m;n.clear(!1);if(!m)break}f=this.g.V(f)}b&&this.qN();this.mw=this.zl=null;this.g.Ud(this.Al);this.g.Ud(this.so);return b};a.prototype.qN=function(){for(var b=new g.h,d=this.Ad.ke;-1!=d;d=this.Ad.lz(d)){var e=this.Ad.sc(d);this.g.D(this.Ad.ka(e),b);for(e=this.Ad.lb(e);-1!=e;e=this.Ad.lb(e))this.g.mf(this.Ad.ka(e),b)}};return a}();g.$t=c})(R||(R={}));(function(g){var z=function(){function l(c){void 0===
c&&(c=null);this.zg=null;this.Pb=!1;this.zg=null===c?[]:c}l.prototype.copyTo=function(c){if(c.Pb)throw g.i.ga("CompositeGeographicTransformation is read-only");for(var a=0;a<this.zg.length;a++)c.zg.push(this.zg[a].Qf())};l.prototype.count=function(){return this.zg.length};l.prototype.add=function(c){if(this.Pb)throw g.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(c.Qf())};l.prototype.clear=function(){if(this.Pb)throw g.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=
0};l.prototype.remove=function(c){if(this.Pb)throw g.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(c,1)};l.prototype.kg=function(){var c=new l;this.copyTo(c);return c};l.prototype.Qf=function(){return this.kg()};l.prototype.transform=function(c,a,b,d){if(c.length<a)throw g.i.ga("invalid Argument");var e=b;for(b=0;b<this.zg.length;b++){var f=this.zg[b];if(null!=f.sm()){var h=f.Wn,k=h?1:0,m=h?f.sm().getGeogcs2():f.sm().getGeogcs1();m=m.getUnit().getUnitFactor();m=e/m;if(3.552713678800501E-15<
Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;g.HC.geogToGeog(f.sm(),a,c,null,k);e=(h?f.sm().getGeogcs1():f.sm().getGeogcs2()).getUnit().getUnitFactor()}}m=e/d;if(3.552713678800501E-15<Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;return a};l.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof l)||this.zg.length!=c.zg.length)return!1;for(var a=0;a<this.zg.length;a++)if(!this.zg[a].Nb(c.zg[a]))return!1;return!0};l.prototype.ix=function(){this.Pb=!0};l.prototype.toString=function(){for(var c=
"CGT ("+this.count()+") ",a=0,b=this.count();a<b;++a)c+=this.zg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c};l.create=function(){return new l};return l}();g.rC=z})(R||(R={}));(function(g){var z=Math.PI,l=2*Math.PI,c=Math.PI/2,a=function(){function e(){}e.OO=function(f,h){var k=new e;k.x=f;k.y=h;k.type=0;k.Wh=0;return k};e.cl=function(f){var h=new e;h.x=f.x;h.y=f.y;h.type=0;h.Wh=0;return h};e.NO=function(f){var h=new e;h.x=f.x;h.y=f.y;h.type=
f.type;h.Wh=f.Wh;return h};e.Qd=function(f,h,k){var m=new e;m.x=f.x+h*Math.cos(k);m.y=f.y+h*Math.sin(k);m.type=f.type;m.Wh=f.Wh;return m};e.Ru=function(f,h){var k=new e;k.x=.5*(f.x+h.x);k.y=.5*(f.y+h.y);k.type=f.type;k.Wh=f.Wh;return k};e.OE=function(f,h){var k=new e;k.x=f.x+.001*(h.x-f.x);k.y=f.y+.001*(h.y-f.y);k.type=f.type;k.Wh=f.Wh;return k};return e}(),b=function(){return function(){}}();(function(e){e[e.Round=0]="Round";e[e.Bevel=1]="Bevel";e[e.Miter=2]="Miter";e[e.Square=3]="Square"})(g.aL||
(g.aL={}));var d=function(){function e(f){this.IA=this.Zb=this.xg=null;this.od=f}e.W=function(f,h,k,m,n,p){if(null==f)throw g.i.O();if(1>f.Eb())throw g.i.O();if(0==h||f.B())return f;p=new e(p);p.mo=f;p.La=h;p.ra=n;p.Mi=k;p.xA=m;return p.Qx()};e.prototype.$L=function(){var f=this.mo,h=f.bc(),k=f.xc(),m=new g.h;m.vc(k,h);m.normalize();m.Jv();m.scale(this.La);h.add(m);k.add(m);m=f.Ja();f.Ec(h);f.Rc(k);return m};e.prototype.ZL=function(){var f=this.mo;if(0<this.La&&2!=this.Mi){var h=new g.Ea;h.bd(f,!1);
this.mo=h;return this.Qx()}f=new g.Hh(f.aa);f.X(this.La,this.La);return f};e.prototype.oJ=function(f,h,k,m){return(h.x-f.x)*(m.x-k.x)+(h.y-f.y)*(m.y-k.y)};e.prototype.hc=function(f,h){if(void 0===h)this.Zb.push(f),this.gf++;else if(0==this.gf)this.hc(f);else{var k=this.Dw,m=this.xg[0==h?k-1:h-1],n=this.xg[h],p=this.oJ(m,n,this.Zb[this.gf-1],f);0<p?this.hc(f):0>p&&(0<this.oJ(m,n,n,this.Zb[this.gf-1])?(n=this.xg[0==h?k-2:1==h?k-1:h-2],k=a.Qd(m,this.La,Math.atan2(m.y-n.y,m.x-n.x)-c),this.Zb[this.gf-
1]=k,1==this.Mi||2==this.Mi?(k=a.Ru(k,m),this.hc(k),k=a.Qd(m,this.La,this.Lv+c),m=a.Ru(k,m),m.type|=256,this.hc(m)):(k=a.Qd(m,this.La,this.Lv+c),k.type|=256),this.hc(k),this.hc(f,h)):(k=a.Qd(n,this.La,this.Lv+c),this.hc(k),1==this.Mi||2==this.Mi?(k=a.Ru(k,n),this.hc(k),k=a.Qd(n,this.La,this.Wz-c),m=a.Ru(k,n),m.type|=256,this.hc(m)):(k=a.Qd(n,this.La,this.Wz-c),k.type|=256),this.hc(k)))}};e.prototype.hE=function(){var f,h=this.Dw;this.gf=0;var k=.5*this.ra,m=0,n=0;for(f=0;f<h;f++){var p=this.xg[f],
q=0==f?this.xg[h-1]:this.xg[f-1],t=f==h-1?this.xg[0]:this.xg[f+1],v=q.x-p.x,F=q.y-p.y,W=t.x-p.x,ba=t.y-p.y,aa=Math.atan2(F,v),fa=Math.atan2(ba,W);this.Lv=aa;this.Wz=fa;0==f&&(m=aa,n=fa);v=v*ba-W*F;F=fa;fa<aa&&(fa+=l);if(0<v*this.La)1==this.Mi||2==this.Mi?(aa=a.Qd(p,this.La,aa+c),this.hc(aa),aa=a.OE(p,aa),this.hc(aa),aa=a.Qd(p,this.La,fa-c),p=a.OE(p,aa),p.type|=256,this.hc(p),this.hc(aa)):(v=.5*(fa-aa),v=this.La/Math.abs(Math.sin(v)),aa=a.Qd(p,v,.5*(aa+fa)),this.hc(aa,f));else if(0!=(p.type&512)){v=
1-k/Math.abs(this.La);q=1;t=0>this.La?-z:z;-1<v&&1>v&&(F=2*Math.acos(v),.017453292519943295>F&&(F=.017453292519943295),q=g.P.truncate(z/F+1.5),1<q&&(t/=q));F=aa+c;aa=a.Qd(p,this.La,F);0==f&&(aa.type|=1024);this.hc(aa,f);v=this.La/Math.cos(t/2);F+=t/2;aa=a.Qd(p,v,F);aa.type|=1024;for(this.hc(aa);0<--q;)F+=t,aa=a.Qd(p,v,F),aa.type|=1024,this.hc(aa);aa=a.Qd(p,this.La,fa-c);aa.type|=1024;this.hc(aa)}else if(1==this.Mi)aa=a.Qd(p,this.La,aa+c),this.hc(aa,f),aa=a.Qd(p,this.La,fa-c),this.hc(aa);else if(0==
this.Mi)for(v=1-k/Math.abs(this.La),q=1,t=fa-c-(aa+c),-1<v&&1>v&&(F=2*Math.acos(v),.017453292519943295>F&&(F=.017453292519943295),q=g.P.truncate(Math.abs(t)/F+1.5),1<q&&(t/=q)),v=this.La/Math.cos(.5*t),F=aa+c+.5*t,aa=a.Qd(p,v,F),this.hc(aa,f);0<--q;)F+=t,aa=a.Qd(p,v,F),this.hc(aa);else 2==this.Mi?(v=q.x-p.x,F=q.y-p.y,W=t.x-p.x,ba=t.y-p.y,q=(v*W+F*ba)/Math.sqrt(v*v+F*F)/Math.sqrt(W*W+ba*ba),.99999999<q?(aa=a.Qd(p,1.4142135623730951*this.La,fa-.25*z),this.hc(aa,f),aa=a.Qd(p,1.4142135623730951*this.La,
fa+.25*z),this.hc(aa)):(q=Math.abs(this.La/Math.sin(.5*Math.acos(q))),t=Math.abs(this.xA*this.La),q>t?(v=.5*(fa-aa),v=this.La/Math.abs(Math.sin(v)),aa=a.Qd(p,v,.5*(aa+fa)),fa=g.h.construct(aa.x,aa.y),aa=g.h.construct(p.x,p.y),p=new g.h,p.vc(fa,aa),fa=new g.h,fa.BW(t/p.length(),p,aa),aa=(q-t)*Math.abs(this.La)/Math.sqrt(q*q-this.La*this.La),0<this.La?p.Jv():p.cr(),p.scale(aa/p.length()),aa=new g.h,aa.add(fa,p),q=new g.h,q.vc(fa,p),aa=a.cl(aa),this.hc(aa,f),aa=a.cl(q),this.hc(aa)):(v=.5*(fa-aa),v=this.La/
Math.abs(Math.sin(v)),aa=a.Qd(p,v,.5*(aa+fa)),this.hc(aa,f)))):(fa=F,0<this.La?(fa>aa&&(fa-=l),q=aa-fa<c):(fa<aa&&(fa+=l),q=fa-aa<c),q?(v=1.4142135623730951*this.La,F=0>v?aa+.25*z:aa+.75*z,aa=a.Qd(p,v,F),this.hc(aa,f),F=0>v?fa-.25*z:fa-.75*z,aa=a.Qd(p,v,F),this.hc(aa)):(v=.5*(fa-aa),v=this.La/Math.abs(Math.sin(v)),fa<aa&&(fa+=l),aa=a.Qd(p,v,(aa+fa)/2),this.hc(aa,f)))}this.Lv=m;this.Wz=n;this.hc(this.Zb[0],0);p=a.NO(this.Zb[this.gf-1]);this.Zb[0]=p;return this.rW()};e.prototype.Cu=function(f,h){if(!(2>
h))for(var k=0;k<h;k++){var m=this.Zb[f+k];0!=k?this.IA.Ei(g.h.construct(m.x,m.y)):this.IA.Nt(g.h.construct(m.x,m.y))}};e.prototype.aM=function(f,h,k){var m=f.Ca(h),n=f.Wc(h);this.Zb=[];this.IA=k;if(f.ec(h)){for(h=f.Oa(m);f.Oa(n-1).rb(h);)n--;if(2<=n-m){this.Dw=n-m;this.xg=[];for(h=m;h<n;h++)this.xg.push(a.cl(f.Oa(h)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(h=f.Oa(m);m<n&&f.Oa(m+1).rb(h);)m++;for(h=f.Oa(n-1);m<n&&f.Oa(n-2).rb(h);)n--;if(2<=n-m){this.Dw=2*(n-m)-2;this.xg=[];k=a.cl(f.Oa(m));k.type|=
1536;this.xg.push(k);for(h=m+1;h<n-1;h++)k=a.cl(f.Oa(h)),this.xg.push(k);k=a.cl(f.Oa(n-1));k.type|=512;this.xg.push(k);for(h=n-2;h>=m+1;h--)k=a.cl(f.Oa(h)),k.type|=1024,this.xg.push(k);if(this.hE())if(2<=this.Zb.length){f=-1;(n=0!=(this.Zb[this.gf-1].type&1024))||(f=0);for(h=1;h<this.gf;h++)(m=0!=(this.Zb[h].type&1024))?n||(n=h-1,1<n-f+1&&this.Cu(f,n-f+1)):n&&(f=h-1),n=m;n||(n=this.gf-1,1<n-f+1&&this.Cu(f,n-f+1))}else f=0,n=this.gf-1,0<=f&&1<=n-f&&this.Cu(f,n-f+1)}}this.xg=null;this.Dw=0;this.Zb=
null;this.gf=0};e.prototype.rW=function(){for(var f=!1,h=0;h<this.gf;h++){var k=this.Zb[h];k.sh=h+1;k.uh=h-1;this.Zb[h]=k}k=this.Zb[0];k.uh=this.gf-2;this.Zb[0]=k;k=this.Zb[this.gf-2];k.sh=0;this.Zb[this.gf-2]=k;for(h=k=0;h<this.gf;h++)if(0!=(this.Zb[k].type&256)){var m=this.BP(k);if(-1!=m)k=m;else{f=!0;break}}else k=this.Zb[k].sh;if(f)return!1;this.LO(k);return!0};e.prototype.BP=function(f){for(var h=this.gf-1,k=f,m,n,p=1;p<=h-2;p++){m=k=this.Zb[k].sh;n=f;for(var q=1;q<=p;q++){n=this.Zb[n].uh;if(0==
(this.Zb[n].type&256)&&0==(this.Zb[m].type&256)){var t=this.bS(n,m);if(-1!=t)return t}m=this.Zb[m].uh}}return-1};e.prototype.bS=function(f,h){var k=this.Zb[this.Zb[f].uh],m=this.Zb[f],n=this.Zb[this.Zb[h].uh],p=this.Zb[h];if(!this.EW(k,m,n,p))return-1;var q=new b;return this.sQ(k,m,n,p,q)&&!q.XD&&g.P.XJ((m.x-k.x)*(p.y-n.y)-(m.y-k.y)*(p.x-n.x))!=g.P.XJ(this.La)?(k=this.Zb[f].uh,q.cn.type=m.type,q.cn.sh=h,q.cn.uh=k,this.Zb[f]=q.cn,q.cn=this.Zb[h],q.cn.uh=f,this.Zb[h]=q.cn,h):-1};e.prototype.EW=function(f,
h,k,m){return Math.max(f.x,h.x)>=Math.min(k.x,m.x)&&Math.max(k.x,m.x)>=Math.min(f.x,h.x)&&Math.max(f.y,h.y)>=Math.min(k.y,m.y)&&Math.max(k.y,m.y)>=Math.min(f.y,h.y)};e.prototype.sQ=function(f,h,k,m,n){n.XD=!1;var p=(h.y-f.y)*(m.x-k.x)-(h.x-f.x)*(m.y-k.y),q=(k.y-f.y)*(h.x-f.x)-(k.x-f.x)*(h.y-f.y);p=0==p?2:q/p;if(0<=p&&1>=p){var t=p;p=(m.y-k.y)*(h.x-f.x)-(m.x-k.x)*(h.y-f.y);q=(f.y-k.y)*(m.x-k.x)-(f.x-k.x)*(m.y-k.y);p=0==p?2:q/p;if(0<=p&&1>=p)return n.cn=a.OO(f.x+p*(h.x-f.x),f.y+p*(h.y-f.y)),n.cn.Wh=
k.Wh+t*(m.Wh-k.Wh),0!=t&&1!=t||0!=p&&1!=p||(n.XD=!0),n.RY=p,n.SY=t,(0==t||1==t)&&0<p&&1>p||(0==p||1==p)&&0<t&&1>t?!1:!0}return!1};e.prototype.LO=function(f){for(;this.Zb[f].uh<f;)f=this.Zb[f].uh;var h=0,k=f;do k=this.Zb[k],this.Zb[h]=k,k=k.sh,h++;while(k!=f);this.Zb[h]=this.Zb[0];this.gf=h+1};e.prototype.VC=function(f){var h=this.mo,k=h.Ha();if(null!=k){k.aj();for(var m=-1;k.ab();)m++,this.aM(h,m,f)}};e.prototype.Qx=function(){var f=this.mo.K();return 322==f?this.$L():197==f?this.ZL():g.ba.zd(f)?
(f=new g.Ua,f.pc(this.mo,!0),this.mo=f,this.Qx()):1607==f?(f=new g.Ua,this.VC(f),f):1736==f?(f=new g.Ea,this.VC(f),f):null};return e}();g.DK=d})(R||(R={}));(function(g){var z=function(){function b(d){this.sk=d}b.prototype.D=function(d,e){this.sk.g.D(d,e)};b.prototype.wd=function(d){var e=this.sk.Ga.ka(d);this.sk.Ga.wd(d,-1);this.sk.g.qd(e,!1)};return b}(),l=function(){function b(d){this.sk=d}b.prototype.D=function(d,e){this.sk.DT.D(d,e)};b.prototype.wd=function(d){this.sk.Ga.wd(d,-1)};return b}(),
c=function(){function b(d){this.sk=d}b.prototype.D=function(d,e){e.N(this.sk.GT[d])};b.prototype.wd=function(d){this.sk.Ga.wd(d,-1)};return b}(),a=function(){function b(d){void 0===d?(this.Ga=new g.$j,this.Ga.Ee(20),this.g=new g.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new z(this)):d instanceof Array?(this.Ga=new g.$j,this.Ga.Ee(20),this.GT=d,this.Zh=new c(this)):(this.Ga=new g.$j,this.Ga.Ee(20),this.DT=d,this.Zh=new l(this))}b.prototype.Ib=function(d){var e=d.K();if(g.Fx.zj(e))this.eN(d);
else if(g.Xk.zd(e))this.jN(d);else if(197==e)this.bN(d);else if(33==e)this.iN(d);else throw g.i.O("invalid shape type");};b.prototype.YQ=function(){var d=new g.Ta,e=this.Ga.sc(-1),f=new g.Ea(this.g.it);this.g.Xi(this.Ga.ka(e),d);f.nf(d);for(e=this.Ga.lb(e);-1!=e;e=this.Ga.lb(e))this.g.Xi(this.Ga.ka(e),d),f.lineTo(d);return f};b.MO=function(d){var e=new b(d),f=d.I(),h=1,k=new g.h,m=new g.h,n=new g.h;for(d.D(0,k);;){d.D(h,m);if(!(m.Mz(k)&&h<f-1))break;h++}e.Ga.addElement(0,-1);e.Ga.zn(h);for(f=h+1;f<
d.I();f++)d.D(f,n),h=e.kC(n),-1!=h&&e.Ga.Uj(h,f);n=new g.Ta;h=e.Ga.sc(-1);f=new g.Ea(d.description);d.we(e.Ga.ka(h),n);f.nf(n);for(h=e.Ga.lb(h);-1!=h;h=e.Ga.lb(h))d.we(e.Ga.ka(h),n),f.lineTo(n);return f};b.construct=function(d,e,f){for(var h=new b(d),k=1,m=d[0];d[k].Mz(m)&&k<e-1;)k++;h.Ga.addElement(0,-1);h.Ga.zn(k);for(k+=1;k<e;k++)m=h.kC(d[k]),-1!=m&&h.Ga.Uj(m,k);d=0;for(e=h.Ga.sc(-1);-1!=e;e=h.Ga.lb(e))f[d++]=h.Ga.ka(e);return d};b.EG=function(d,e){var f=d.Ca(e),h=d.Wc(e);e=!d.ec(e)&&d.Pn(e);d=
d.vb(0);f*=2;h*=2;e&&(h-=2);if(6>h-f)return!0;e=new g.h;var k=new g.h,m=new g.h;d.uc(f,e);d.uc(f+2,k);d.uc(f+4,m);var n=b.Yu(k,m,e);if(n.rs()||!b.wm(n.value()))return!1;var p=g.h.construct(k.x,k.y),q=new g.h;for(f+=6;f<h;f+=2){q.N(k);k.N(m);d.uc(f,m);n=b.Yu(k,m,e);if(n.rs()||!b.wm(n.value()))return!1;n=b.Yu(p,m,e);if(n.rs()||!b.wm(n.value()))return!1;n=b.Yu(k,m,q);if(n.rs()||!b.wm(n.value()))return!1}return!0};b.prototype.eN=function(d){for(var e=new g.Ta,f=new g.h,h=0;h<d.I();h++){d.D(h,f);var k=
this.Er(f);if(-1!=k){d.we(h,e);var m=this.g.hc(this.Us,e);this.Ga.Uj(k,m)}}};b.prototype.bN=function(d){for(var e=new g.Ta,f=new g.h,h=0;4>h;h++){d.hB(h,f);var k=this.Er(f);if(-1!=k){d.If(h,e);var m=this.g.hc(this.Us,e);this.Ga.Uj(k,m)}}};b.prototype.jN=function(d){var e=new g.Ta,f=d.bc();f=this.Er(f);if(-1!=f){d.Vo(e);var h=this.g.hc(this.Us,e);this.Ga.Uj(f,h)}f=d.xc();f=this.Er(f);-1!=f&&(d.Ro(e),d=this.g.hc(this.Us,e),this.Ga.Uj(f,d))};b.prototype.iN=function(d){var e=d.D();e=this.Er(e);-1!=e&&
(d=this.g.hc(this.Us,d),this.Ga.Uj(e,d))};b.prototype.Er=function(d){var e=-1;if(0==this.Ga.size(-1))return e=this.Ga.addElement(-4,-1);if(1==this.Ga.size(-1)){var f=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));d.Mz(f)||(e=this.Ga.zn(-5));return e}return e=this.kC(d)};b.prototype.kC=function(d){var e=-1,f=this.Ga.sc(-1),h=this.Ga.Gc(-1),k=this.Ga.ka(f),m=this.Ga.ka(h),n=new g.h,p=new g.h;this.Zh.D(k,n);this.Zh.D(m,p);k=g.h.Wq(p,d,n);if(b.wm(k))e=this.Ga.zn(-1),n=this.iC(d,h,f),n!=f&&this.jC(d,f,this.Ga.xe(n));
else if(b.xG(k)){p=this.Ga.uv(-1);var q=this.Ga.sc(-1),t=this.Ga.Gc(-1);k=new g.h;for(m=new g.h;q!=this.Ga.xe(t);){var v=this.Ga.ka(p);this.Zh.D(v,k);v=g.h.Wq(k,d,n);b.xG(v)?(t=p,p=this.Ga.nl(p)):(q=p,p=this.Ga.Zp(p))}p=t;n=q;v=this.Ga.ka(p);q=this.Ga.ka(n);this.Zh.D(v,k);this.Zh.D(q,m);if(n==f||(k=g.h.Wq(m,d,k),b.wm(k)))e=this.Ga.Bu(n,p,-2,!1),this.jC(d,p,h),this.iC(d,n,f)}else null==this.tb&&(this.tb=new g.zb),this.tb.Ec(p),this.tb.Rc(n),n=this.tb.ge(d,!0),0>n?(n=this.Ga.xe(h),this.Ga.wd(h,-1),
e=this.Ga.zn(-3),this.iC(d,n,f)):1<n&&(n=this.Ga.lb(f),this.Ga.wd(f,-1),e=this.Ga.Bu(-1,n,-3,!1),this.jC(d,n,h));return e};b.prototype.jC=function(d,e,f){if(e!=f){var h=this.Ga.ka(e),k=this.Ga.lb(e),m=new g.h,n=new g.h;for(this.Zh.D(h,m);e!=f&&2<this.Ga.size(-1);){this.Zh.D(this.Ga.ka(k),n);h=g.h.Wq(n,d,m);if(b.wm(h))break;h=e;e=k;m.N(n);k=this.Ga.lb(e);this.Zh.wd(h)}}};b.prototype.iC=function(d,e,f){if(e==f)return f;var h=this.Ga.ka(e),k=this.Ga.xe(e),m=new g.h,n=new g.h;for(this.Zh.D(h,m);e!=f&&
2<this.Ga.size(-1);){this.Zh.D(this.Ga.ka(k),n);h=g.h.Wq(m,d,n);if(b.wm(h))break;h=e;e=k;m.N(n);k=this.Ga.xe(e);this.Zh.wd(h)}return e};b.Yu=function(d,e,f){var h=new g.Xb;h.set(e.x);h.sub(d.x);var k=new g.Xb;k.set(f.y);k.sub(d.y);var m=new g.Xb;m.set(e.y);m.sub(d.y);e=new g.Xb;e.set(f.x);e.sub(d.x);h.Bg(k);m.Bg(e);h.sub(m);return h};b.wm=function(d){return 0>d};b.xG=function(d){return 0<d};return b}();g.au=a})(R||(R={}));(function(g){var z=function(){function l(c){this.g=null;this.oH=!0;this.od=
c}l.uU=function(c,a,b){c=g.ua.Gr(c);return g.$t.Ev(a.Ng(),a.kh(),b.Ng(),b.kh(),g.mc.ox(c))};l.xO=function(c,a){var b=new g.Ta;g.$t.RT(c,a,b);return b};l.W=function(c,a,b,d){b=new l(b);b.g=c;b.ra=a;b.oH=d;return b.zM()};l.prototype.iM=function(c){return g.$t.dQ(this.g,c)};l.prototype.nM=function(c){return g.bu.W(this.g,c,this.od)};l.prototype.zM=function(){var c=this.ra,a=g.ua.Gr(c);c=g.ua.mN(c);var b=1.00001*c;c*=1.000001;for(var d=!1,e=30<this.g.gd+10?1E3:(this.g.gd+10)*(this.g.gd+10),f=0,h=this.g.eS();;f++){if(f>
e)throw g.i.ga("Internal Error: max number of iterations exceeded");var k=this.iM(a);d=d||k;this.oH&&(k=0!=this.g.Ip(a,!0,!1),d=d||k);k=!1;if(0==f||h||g.bu.fI(!0,this.g,c,null,this.od))k=this.nM(b),d=d||k;if(!k)break;g.op.Bp(this.od)}return d};return l}();g.Vk=z})(R||(R={}));(function(g){var z=function(){function c(a){this.ae=this.Nc=null;this.$s=0;this.Vb=a;this.Yz=!0}c.prototype.wv=function(a,b){var d=this.g.cc(a);if(null==d){if(!this.g.fd(a,b))return null;d=b}return d};c.prototype.Zq=function(){var a;
void 0===a&&(a=!1);this.$s++;if(a||0==(this.$s&4095))this.$s=0,g.op.Bp(this.Vb)};c.prototype.iP=function(){var a=this.g.$q(!1),b=!1,d=new g.zb,e=new g.zb,f=new g.l;f.Pa();var h=new g.l;h.Pa();for(var k=new g.Ta,m=new g.OC,n=a.next();-1!=n;n=a.next()){g.op.Bp(this.Vb);var p=null,q=!1;if(!g.ba.Tn(this.g.jc(a.ek))){p=this.wv(n,d);if(null==p)continue;p.A(f);f.X(this.ra,this.ra);if(p.Di(this.ra))if(p.Di(0))q=!0,p=null;else continue}var t=this.g.$q(a),v=t.next();for(-1!=v&&(v=t.next());-1!=v;v=t.next()){var F=
null,W=!1;if(!g.ba.Tn(this.g.jc(t.ek))){F=this.wv(v,e);if(null==F)continue;F.A(h);if(F.Di(this.ra))if(F.Di(0))W=!0,F=null;else continue}var ba=0,aa=0;if(null!=p&&null!=F)f.CG(h)&&(m.Qo(p),m.Qo(F),m.Fa(this.ra,!1),ba=m.ql(0),aa=m.ql(1),0<ba+aa&&(this.g.lr(n,m,0,!0),this.g.lr(v,m,1,!0)),m.clear());else if(null!=p){var fa=new g.h;this.g.D(v,fa);if(f.contains(fa)){m.Qo(p);this.g.Xi(v,k);m.Fz(this.ra,k,!1);ba=m.ql(0);if(0<ba)if(this.g.lr(n,m,0,!0),W){W=-1;for(fa=this.g.V(v);-1!=fa&&fa!=v&&(F=this.wv(fa,
e),W=fa,null!=F&&F.Di(0));fa=this.g.V(fa));for(fa=v;-1!=fa&&(this.g.Fh(fa,m.Cf),fa!=W);fa=this.g.V(fa));}else this.g.Fh(v,m.Cf);m.clear()}}else if(null!=F){if(fa=new g.h,this.g.D(n,fa),h.X(this.ra,this.ra),h.contains(fa)){m.Qo(F);this.g.Xi(n,k);m.Fz(this.ra,k,!1);aa=m.ql(0);if(0<aa)if(this.g.lr(v,m,0,!0),q){W=-1;for(fa=this.g.V(n);-1!=fa&&fa!=n&&(F=this.wv(fa,e),W=fa,null!=F&&F.Di(0));fa=this.g.V(fa));for(fa=n;-1!=fa&&(this.g.Fh(fa,m.Cf),fa!=W);fa=this.g.V(fa));}else this.g.Fh(n,m.Cf);m.clear()}}else continue;
if(0!=ba+aa){if(0!=ba){p=this.g.cc(n);if(null==p){if(!this.g.fd(n,d))continue;p=d;d.A(f)}else p.A(f);if(p.Di(this.ra))break}b=!0}}}return b};c.prototype.jP=function(){return this.LU()};c.prototype.LU=function(){return(new g.MC).LX(this.g,this.ra)};c.prototype.gI=function(){var a=!1;null==this.Nc&&(this.Nc=new g.$j);var b=new g.ja(0);b.Jb(this.g.gd+1);for(var d=this.g.$q(),e=d.next();-1!=e;e=d.next())b.add(e);this.g.nx(b,b.size);b.add(-1);d=this.g.Hd();e=this.g.Hd();this.ae=new g.PC(this.g,this.ra,
!this.Yz);this.Nc.Xo(this.ae);var f=new g.ja(0),h=new g.ja(0),k=0;new g.h;var m=this.g.ud;this.g.wb.oc();for(var n=this.g.wb.Aa[0].o,p,q,t=b.get(k++);-1!=t;){q=m.U(t,0);p=n[2*q];q=n[2*q+1];var v=p,F=q;do{var W=m.U(t,2),ba=m.U(t,1);if(-1!=W){var aa=m.U(W,0),fa=n[2*aa];aa=n[2*aa+1];0>(F<aa?-1:F>aa?1:v<fa?-1:v>fa?1:0)&&(h.add(t),h.add(W))}-1!=ba&&(aa=m.U(ba,0),fa=n[2*aa],aa=n[2*aa+1],0>(F<aa?-1:F>aa?1:v<fa?-1:v>fa?1:0)&&(h.add(ba),h.add(ba)));fa=this.g.Qa(t,d);-1!=fa&&(f.add(fa),this.g.Sa(t,d,-1));fa=
this.g.Qa(t,e);-1!=fa&&(f.add(fa),this.g.Sa(t,e,-1));t=b.get(k++);-1!==t&&(F=m.U(t,0),v=n[2*F],F=n[2*F+1])}while(-1!=t&&v===p&&F===q);v=1==f.size&&2==h.size;fa=F=-1;W=0;for(ba=f.size;W<ba;W++){aa=f.get(W);var ka=this.Nc.xe(aa);-1==ka||f.cG(ka)||(F=ka);aa=this.Nc.lb(aa);-1==aa||f.cG(aa)||(fa=aa);if(-1!=F&&-1!=fa)break}this.ae.VJ(q,p);W=0;for(ba=f.size;W<ba;W++)aa=f.get(W),this.Nc.wd(aa,-1);f.clear(!1);if(!v&&-1!=F&&-1!=fa&&this.lO(F,fa)){a=!0;this.Pi=this.ae.tm();break}W=0;for(ba=h.size;W<ba;W+=2){q=
h.get(W);p=h.get(W+1);v?(q=this.Nc.Bu(F,fa,q,!0),v=!1):q=this.Nc.addElement(q,-1);if(this.ae.sg){this.Pi=this.ae.tm();a=!0;break}-1==this.g.Qa(p,d)?this.g.Sa(p,d,q):this.g.Sa(p,e,q)}if(a)break;h.Dh(0)}this.g.Ud(d);this.g.Ud(e);return a};c.prototype.lO=function(a,b){this.ae.compare(this.Nc,this.Nc.ka(a),b);a=this.ae.sg;this.ae.Mr();return a};c.tE=function(a){for(var b=a.md;-1!=b;b=a.ve(b))if(g.ba.Ic(a.jc(b)))return!0;return!1};c.aQ=function(a,b,d,e){if(!c.tE(a))return!1;b=new c(e);b.g=a;b.ra=d;if(15>
a.gd)a=b.iP();else return b.jP();return a};c.W=function(a,b,d){return c.aQ(a,a.DF(),b,d)};c.fI=function(a,b,d,e,f){if(!c.tE(b))return!1;var h=new c(f);h.g=b;h.ra=d;h.Yz=a;if(h.gI())return null!=e&&e.Yt(h.Pi),!0;var k=new g.Ed;k.VB();b.Pc(k);h=new c(f);h.g=b;h.ra=d;h.Yz=a;a=h.gI();k.VB();b.Pc(k);return a?(null!=e&&e.Yt(h.Pi),!0):!1};c.Ol=function(a,b){a=a.I();return 16>a?!1:2*a+Math.log(a)*Math.LOG10E/Math.log(2)*b<1*a*b};c.gP=function(a,b,d,e){if(g.ba.Ic(b.K()))return(new c(e)).hP(a,b,d);throw g.i.ga("crack_A_with_B");
};c.prototype.hP=function(a,b,d){var e=new g.l;a.yc(e);var f=new g.l;b.yc(f);f.X(d,d);if(!f.isIntersecting(e))return a;var h=a.Cb,k=null;null!=h&&(k=h.Gb);c.Ol(a,a.I())&&(k=g.ua.lj(a,f));var m=null!=k?k.getIterator():null,n=b.Ha();b=a.Ha();var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(f=[];n.ab();)for(;n.Ia();){var q=n.ia();if(null!=k)for(m.Wo(q,d),h=m.next();-1!=h;h=m.next()){if(this.Zq(),b.Wb(k.ka(h),-1),b.Ia()){h=b.ia();var t=h.Fa(q,null,p,null,d);for(h=0;h<t;++h){var v=p[h];if(0!=v&&1!=v){var F=b.xb(),
W=new l;W.t=v;W.index=F;f.push(W)}}}}else{var ba=new g.l;q.yc(ba);ba.X(d,d);if(e.isIntersecting(ba))for(b.aj();b.ab();)for(;b.Ia();)if(this.Zq(),h=b.ia(),v=new g.l,h.yc(v),v.isIntersecting(ba))for(t=h.Fa(q,null,p,null,d),h=0;h<t;++h)v=p[h],0!=v&&1!=v&&(F=b.xb(),W=new l,W.t=v,W.index=F,f.push(W))}}if(0==f.length)return a;f=f.sort(l.zy);a=a.Ja();for(b.aj();b.ab()&&!b.Ia(););d=b.ia();e=new g.jg;k=-1;h=0;for(m=f.length;h<m;){p=f[h].index;for(n=h+1;n<m&&f[n].index==p;)++n;for(;b.xb()<p;){this.Zq();q=b.Ia();
v=b.gb;(ba=q||!b.Qn()||b.Rn())&&a.pc(d,k!=v);k=v;if(!q)for(;b.ab()&&!b.Ia(););d=b.ia()}for(p=0;h<n;h++)v=f[h].t,v!=p&&(d.dh(p,v,e),p=v,v=b.gb,a.pc(e.get(),k!=v),k=v);if(ba=(q=b.Ia())||!b.Qn()||b.Rn())d.dh(p,1,e),a.pc(e.get(),!1);if(q)d=b.ia();else{for(;b.ab()&&!b.Ia(););d=b.Ia()?b.ia():null}h=n}null!=d&&(v=b.gb,(ba=(q=b.Ia())||!b.Qn()||b.Rn())&&a.pc(d,k!=v),k=v);for(q=b.Ia();;){if(!q){for(;b.ab()&&!(q=b.Ia()););if(!q)break}d=b.ia();v=b.gb;(ba=(q=b.Ia())||!b.Qn()||b.Rn())&&a.pc(d,k!=v);k=v}return a};
return c}();g.bu=z;var l=function(){function c(){}c.zy=function(a,b){return a.index==b.index?a.t>b.t?1:a.t<b.t?-1:0:a.index>b.index?1:-1};return c}()})(R||(R={}));(function(g){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(g.FK||(g.FK={}));var z=function(){return function(a,b,d,e,f,h,k,m,n,p,q){this.Y=a;this.ct=b;this.Ps=d;this.ug=e;this.Nm=p;this.Cl=q}}();g.qY=z;var l=function(){function a(b,d){this.EH=b;this.Ji=
d}a.prototype.lM=function(b,d){var e=new g.h;this.Ji.D(b,e);var f=new g.h;this.Ji.D(d,f);e=e.compare(f);if(0!=e)return e;b=this.Ji.Qa(b,this.EH);d=this.Ji.Qa(d,this.EH);return b<d?-1:b==d?0:1};return a}(),c=function(){return function(a,b,d,e,f,h,k,m,n){this.ug=a;this.Ps=b;this.JA=d;this.PH=e;this.Gi=f;this.Cl=h;this.Nm=k;this.QH=m;this.JT=n}}();g.pY=c;g.GK=function(){function a(){}a.EK=function(b,d,e,f,h,k){if(d.B())b=new z(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else if(e.B())b=
new z(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else{var m=new g.hd;m.Ib(d);m.Ib(e);g.Vk.W(m,f,k,!0);if(0==m.gd)b=new z(d.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else{d=0;e=m.Hd();for(f=m.md;-1!=f;f=m.ve(f))for(k=m.Ob(f);-1!=k;k=m.Sb(k))for(var n=m.Ya(k),p=0,q=m.Ka(k);p<q;n=m.V(n),p++)m.Sa(n,e,d++);d=a.CM(e,m);a.YL(b,d,m,h)}}};a.CM=function(b,d){for(var e=d.gd,f=new g.ja(0),h=d.md;-1!=h;h=d.ve(h))for(var k=d.Ob(h);-1!=k;k=d.Sb(k))for(var m=d.Ya(k),n=0,p=d.Ka(k);n<
p;m=d.V(m),n++)f.add(m);var q=new l(b,d);f.Wd(0,e,function(Ga,Fa){return q.lM(Ga,Fa)});b=[];var t=[],v=d.Hd(),F=d.Hd();h=d.md;k=d.ve(h);p=new g.h;var W=new g.h,ba=f.get(0),aa=d.cd(ba),fa=d.Sf(aa);d.D(ba,p);var ka=1;for(m=0;ka<e-1;){var la=!1;for(n=ka;n<e;n++)if(n!=m){var ma=f.get(n),sa=d.cd(ma),wa=d.Sf(sa);d.D(ma,W);if(p.rb(W))fa==h&&wa==k&&(la=a.pM(v,F,d,b,t,aa,ba,sa,ma));else break}if(la||m==ka-1){la&&m==ka-1&&ka--;if(++m==e)break;ba=f.get(m);aa=d.cd(ba);fa=d.Sf(aa);d.D(ba,p)}la||(ka=m+1)}e=[];
for(h=d.md;-1!=h;h=d.ve(h))for(k=d.Ob(h);-1!=k;k=d.Sb(k))for(f=d.Ya(k),n=0,p=d.Ka(k);n<p;f=d.V(f),n++){m=d.Qa(f,F);if(0<=m)for(;m<t.length&&t[m].ug==f;)e.push(t[m++]);m=d.Qa(f,v);if(0<=m)for(;m<b.length&&b[m].ug==f;)e.push(b[m++])}d.Ud(v);d.Ud(F);return e};a.pM=function(b,d,e,f,h,k,m,n,p){var q=e.tj(k),t=e.tj(n),v=e.Ya(k),F=e.Ya(n),W=e.Na(m),ba=e.Na(p),aa=!1,fa=!1,ka=!1,la=!1;m!=v&&(p!=F&&(aa=a.qM(b,e,f,k,W,n,ba)),p!=t&&(fa=a.rM(b,e,f,k,W,n,p)));m!=q&&(p!=F&&(ka=a.sM(d,e,h,k,m,n,ba,v)),p!=t&&(la=
a.tM(d,e,h,k,m,n,p,v)));aa&&fa&&ka?(b=f.length-1,2==h[la?h.length-2:h.length-1].Gi&&(f[b-1]=f[b],--f.length)):aa&&fa&&la&&2==h[h.length-1].Gi&&(h=f[f.length-1],--f.length,e.Qa(h.ug,b)==f.length&&e.Sa(h.ug,b,-1));return aa||fa||ka||la};a.qM=function(b,d,e,f,h,k,m){var n=new g.zb,p=new g.zb,q=[0,0],t=[0,0],v=d.cc(h);null==v&&(d.fd(h,n),v=n);n=d.cc(m);null==n&&(d.fd(m,p),n=p);v=v.Fa(n,null,q,t,0);2>v&&(f=new c(h,f,q[0],NaN,v,m,k,t[0],NaN),e.push(f),f=d.Qa(h,b),0>f&&d.Sa(h,b,e.length-1));return!0};a.rM=
function(b,d,e,f,h,k,m){var n=new g.zb,p=new g.zb,q=[0,0],t=[0,0],v=d.cc(h);null==v&&(d.fd(h,n),v=n);n=d.cc(m);null==n&&(d.fd(m,p),n=p);v=v.Fa(n,null,q,t,0);return 2>v?(f=new c(h,f,q[0],NaN,v,m,k,t[0],NaN),e.push(f),f=d.Qa(h,b),0>f&&d.Sa(h,b,e.length-1),!0):!1};a.sM=function(b,d,e,f,h,k,m,n){var p=new g.zb,q=new g.zb,t=[0,0],v=[0,0],F=d.cc(h);null==F&&(d.fd(h,p),F=p);p=d.cc(m);null==p&&(d.fd(m,q),p=q);F=F.Fa(p,null,t,v,0);if(2==F)return f=new c(h,f,t[0],t[1],F,m,k,v[0],v[1]),e.push(f),f=d.Qa(h,b),
0>f&&d.Sa(h,b,e.length-1),!0;q=!1;h==n&&(f=new c(h,f,t[0],NaN,F,m,k,v[0],NaN),e.push(f),f=d.Qa(h,b),0>f&&d.Sa(h,b,e.length-1),q=!0);return q};a.tM=function(b,d,e,f,h,k,m,n){var p=new g.zb,q=new g.zb,t=[0,0],v=[0,0],F=d.cc(h);null==F&&(d.fd(h,p),F=p);p=d.cc(m);null==p&&(d.fd(m,q),p=q);F=F.Fa(p,null,t,v,0);if(2==F)return f=new c(h,f,t[0],t[1],F,m,k,v[0],v[1]),e.push(f),f=d.Qa(h,b),0>f&&d.Sa(h,b,e.length-1),!0;q=!1;h==n&&(f=new c(h,f,t[0],NaN,F,m,k,v[0],NaN),e.push(f),f=d.Qa(h,b),0>f&&d.Sa(h,b,e.length-
1),q=!0);return q};a.YL=function(b,d,e,f){var h=[];h[0]=new g.h;h[1]=new g.h;h[2]=new g.h;h[3]=new g.h;var k=new g.h,m=new g.h,n=new g.h,p=new g.h,q=null;null!=f&&(q=new g.jg,q.Qr());var t=0,v=null,F=new g.zb;new g.zb;for(var W=e.Ob(e.md);-1!=W;W=e.Sb(W)){for(var ba=4,aa=-1,fa=-1,ka=-1,la=-1,ma=NaN,sa=!0,wa=!1,Ga=!0,Fa=!0,Sa=!0,Qa=0,Xa=W,Ya=0,bb=e.Ya(W),eb=e.Ka(W),jb=0;jb<eb;bb=e.V(bb),jb++){var hb=e.cc(bb);if(null==hb){if(!e.fd(bb,F))continue;hb=F}-1==fa&&(fa=bb);for(var ab=0;t<d.length&&bb==d[t].ug;){aa=
d[t].Ps;var cb=d[t].ug,$a=d[t].JA,ib=d[t].Nm,gb=d[t].Cl,lb=d[t].QH;if(2==d[t].Gi){if(wa||(Xa=aa,fa=cb,Ya=$a,ka=ib,la=gb,ma=lb,ba=2,null!=f?v=new g.Ua:Qa=0,Sa=!1,Fa=!0),$a=d[t].PH,lb=d[t].JT,null!=f?(hb.dh(ab,d[t].PH,q),v.pc(q.get(),Fa)):Qa++,ab=$a,wa=!0,Fa=sa=!1,t+1==d.length||2!=d[t+1].Gi||d[t+1].ug==cb&&d[t+1].JA!=ab){if(null!=f){var db=new z(v,2,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma);f.push(db)}else null.add(Qa);Xa=aa;fa=cb;Ya=$a;ka=ib;la=gb;ma=lb;ba=2;wa=sa=!1;Fa=Sa=!0}}else{var kb=e.V(cb);if(t<
d.length-1&&d[t+1].ug==kb&&d[t+1].Cl==gb&&2==d[t+1].Gi)$a!=ab&&(Sa&&(null!=f?v=new g.Ua:Qa=0),sa=0<t&&d[t-1].Ps==aa?1==ba?0:0==ba?1:3:3,null!=f?(hb.dh(ab,$a,q),v.pc(q.get(),Fa),db=new z(v,sa,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):(Qa++,null.add(Qa)),ab=$a,Xa=aa,fa=cb,Ya=$a,ka=ib,la=gb,ma=lb,ba=sa,sa=Ga=!1,Fa=Sa=!0);else if(!a.xM(b,e,d,t,k,m)){a.uM(e,d,t,W,bb,n,p);var fb=!1;kb=!1;db=!0;if(!(k.rb(n)||m.rb(n)||k.rb(p)||m.rb(p))){h[0].N(k);h[1].N(m);h[2].N(n);h[3].N(p);h.sort(g.h.pu);var mb=
h[0],nb=h[1],ob=h[2],pb=h[3];mb.rb(k)?nb.rb(m)?b?(kb=fb=!0,db=!1):fb=!1:pb.rb(m)?b?db=kb=fb=!0:fb=!1:(fb=!0,db=nb.rb(n)):nb.rb(k)?ob.rb(m)?b?(kb=fb=!0,db=!1):fb=!1:mb.rb(m)?b?db=kb=fb=!0:fb=!1:(fb=!0,db=ob.rb(n)):ob.rb(k)?pb.rb(m)?b?(kb=fb=!0,db=!1):fb=!1:nb.rb(m)?b?db=kb=fb=!0:fb=!1:(fb=!0,db=pb.rb(n)):mb.rb(m)?b?(kb=fb=!0,db=!1):fb=!1:ob.rb(m)?b?db=kb=fb=!0:fb=!1:(fb=!0,db=mb.rb(n))}if(fb){fb=bb==cb;if($a!=ab||fb&&0==ab)Sa&&(null!=f?v=new g.Ua:Qa=0),null!=f?(hb.dh(ab,$a,q),v.pc(q.get(),Fa)):Qa++;
if(db)if(1!=ba){if($a!=ab||fb&&0==ab)null!=f?(db=new z(v,1,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):null.add(Qa);if(!kb)ba=1;else if(t>=d.length-2||d[t+2].Ps!=aa)ba=0}else{if($a!=ab||fb&&0==ab)null!=f?(db=new z(v,3,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):null.add(Qa);ba=1}else if(0!=ba){if($a!=ab||fb&&0==ab)null!=f?(db=new z(v,0,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):null.add(Qa);if(!kb)ba=0;else if(t>=d.length-2||d[t+2].Ps!=aa)ba=1}else{if($a!=ab||fb&&0==ab)null!=
f?(db=new z(v,3,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):null.add(Qa);ba=0}if($a!=ab||fb&&0==ab)ab=$a,Xa=aa,fa=cb,Ya=$a,ka=ib,la=gb,ma=lb,sa=Ga=!1,Fa=Sa=!0}}}t++}1!=ab&&(Sa&&(null!=f?v=new g.Ua:Qa=0),null!=f?(hb.dh(ab,1,q),v.pc(q.get(),Fa)):Qa++,Fa=Sa=!1,Ga=!0)}Ga&&($a=1,cb=e.tj(W),cb=e.Na(cb),gb=ib=-1,lb=NaN,sa?null!=f?(db=new z(v,4,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):null.add(Qa):(sa=1==ba?0:0==ba?1:3,null!=f?(db=new z(v,sa,aa,cb,$a,ba,Xa,fa,Ya,ib,gb,lb,ka,la,ma),f.push(db)):
null.add(Qa)))}};a.xM=function(b,d,e,f,h,k){var m=e[f].QH;if(1==m)return a.vM(b,d,e,f,h,k);if(0==m)return a.wM(b,d,e,f,h,k);throw g.i.Ra();};a.vM=function(b,d,e,f,h,k){var m=new g.zb,n=e[f].ug,p=e[f].Nm,q=e[f].Cl,t=-1,v=-1,F=-1,W=-1;if(!b&&0<f){var ba=e[f-1];t=ba.ug;v=ba.Nm;F=ba.Cl;W=ba.Gi}var aa=-1,fa=-1,ka=-1,la=-1;f<e.length-1&&(ba=e[f+1],aa=ba.ug,fa=ba.Nm,ka=ba.Cl,la=ba.Gi);var ma=d.V(n);ba=d.V(q);if(!b)return 0<f&&t==n&&v==p&&F==ba&&2==W||f<e.length-1&&aa==ma&&fa==p&&ka==ba&&2==la?(b=d.cc(q),
null==b&&(d.fd(q,m),b=m),k.N(b.lg()),h.nt(k),k.normalize(),h.normalize(),!1):f<e.length-1&&aa==n&&fa==p&&ka==ba?(b=d.cc(q),null==b&&(d.fd(q,m),b=m),h.N(b.lg()),b=d.cc(ba),null==b&&(d.fd(ba,m),b=m),k.N(b.lg()),h.Uq(),k.normalize(),h.normalize(),!1):!0;if(f==e.length-1||aa!=n||fa!=p||ka!=ba||2==la)return b=d.cc(q),null==b&&(d.fd(q,m),b=m),k.N(b.lg()),h.nt(k),k.normalize(),h.normalize(),!1;b=d.cc(q);null==b&&(d.fd(q,m),b=m);h.N(b.lg());b=d.cc(ba);null==b&&(d.fd(ba,m),b=m);k.N(b.lg());h.Uq();k.normalize();
h.normalize();return!1};a.wM=function(b,d,e,f,h,k){var m=new g.zb,n=e[f].ug,p=e[f].Nm,q=e[f].Cl,t=-1,v=-1,F=-1,W=-1;if(!b&&f<e.length-1){var ba=e[f+1];t=ba.ug;v=ba.Nm;F=ba.Cl;W=ba.Gi}var aa=-1,fa=-1,ka=-1;ba=-1;0<f&&(ba=e[f-1],aa=ba.ug,fa=ba.Nm,ka=ba.Cl,ba=ba.Gi);var la=d.V(n),ma=d.Na(q);return b?0==f||aa!=n||fa!=p||ka!=ma||2==ba?(b=d.cc(q),null==b&&(d.fd(q,m),b=m),k.N(b.lg()),h.nt(k),k.normalize(),h.normalize(),!1):!0:0<f&&aa==n&&fa==p&&ka==ma&&2==ba||f<e.length-1&&t==la&&v==p&&F==ma&&2==W?(b=d.cc(q),
null==b&&(d.fd(q,m),b=m),k.N(b.lg()),h.nt(k),k.normalize(),h.normalize(),!1):!0};a.uM=function(b,d,e,f,h,k,m){var n=new g.zb,p=b.cc(h);null==p&&(b.fd(h,n),p=n);e=d[e];d=e.ug;e=e.JA;h=b.V(d);if(1==e)k.N(p.lg()),-1!=h&&h!=b.tj(f)?(p=b.cc(h),null==p&&(b.fd(h,n),p=n),m.N(p.lg()),p=b.cc(d),null==p&&b.fd(d,n)):m.N(k),k.Uq(),m.normalize(),k.normalize();else if(0==e)m.N(p.lg()),k.nt(m),m.normalize(),k.normalize();else throw g.i.Ra();};return a}()})(R||(R={}));(function(g){(function(f){f[f.Linear=0]="Linear";
f[f.Angular=1]="Angular";f[f.Area=2]="Area"})(g.XL||(g.XL={}));var z=function(){function f(h,k,m){this.pd=k;this.ci=m;this.qA=h}f.prototype.Nb=function(h){return h instanceof f?this.ci===h.ci:!1};f.WF=function(h){return 0!==h.pd?null:-1===h.qA?new f(-1,2,h.ci*h.ci):f.ah(d[h.qA])};f.ah=function(h){h=b[h];return void 0===h?null:h};f.UO=function(h,k,m){var n=null;if(void 0!==m&&null!==m)try{"EPSG"===m.values[0]&&(n=f.ah(parseInt(m.values[1])))}catch(p){}null===n&&(n=new f(-1,h,k));return n};f.prototype.Fc=
function(){return this.qA};f.prototype.xF=function(h){if(h.pd!=this.pd)throw g.i.Hb();return this.ci/h.ci};f.Ph=function(h,k,m){return k.xF(m)*h};f.SE=function(h,k,m,n,p){m=m.xF(n);for(n=0;n<k;n++)p[n]=h[n]*m};return f}();g.Uc=z;for(var l=[109401,1E4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2589998.4703195216,
109414,1E6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,
109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988.110336,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1E-4,109452,1E-6,109453,6.4516E-4,109454,6.451625806477421E-4,109455,25.292852640000003,109456,25.29295381171408,109457,
3434528.1495040003,109458,3434290.937856,109459,2.89612324,109460,25E8,109461,225E8,109462,.7168473118308245,109463,100,109464,1.244521604938272E-7,109465,1E-12,109466,1E-18],c=[1031,4.84813681109536E-9,9101,1,9102,.0174532925199433,9103,2.908882086657216E-4,9104,4.84813681109536E-6,9105,.01570796326794897,9106,.01570796326794897,9109,1E-6,9112,1.570796326794897E-4,9113,1.570796326794897E-6,9114,9.817477042468104E-4],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,
109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1E3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,
.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,
109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,3.527777777777778E-4,109464,109017,1E-6,109465,109018,1E-9,109466,109030,5E4,109460,109031,
15E4,109461],b=[],d=[],e=0;e<l.length;e+=2)b[l[e]]=new z(l[e],2,l[e+1]);l=null;for(e=0;e<c.length;e+=2)b[c[e]]=new z(c[e],1,c[e+1]);c=null;for(e=0;e<a.length;e+=3)b[a[e]]=new z(a[e],0,a[e+1]),d[a[e]]=a[e+2];a=null})(R||(R={}));(function(g){var z=function(){function l(){this.yb=this.pb=0}l.prototype.set=function(c,a){void 0!==a?(this.pb=c,this.yb=a):"number"===typeof c?(this.pb=c,this.yb=0):(this.pb=c.pb,this.yb=c.yb)};l.prototype.value=function(){return this.pb};l.prototype.add=function(c){var a=
this.pb+c.pb;c=this.yb+c.yb+2.220446049250313E-16*Math.abs(a);this.pb=a;this.yb=c};l.prototype.fN=function(){var c=this.pb+1,a=this.yb+2.220446049250313E-16*Math.abs(c);this.pb=c;this.yb=a};l.prototype.ZM=function(c,a){this.pb=c.pb+a.pb;this.yb=c.yb+a.yb+2.220446049250313E-16*Math.abs(this.pb)};l.prototype.sub=function(c){if("number"===typeof c){var a=this.pb-c;c=this.yb+2.220446049250313E-16*Math.abs(a)}else a=this.pb-c.pb,c=this.yb+c.yb+2.220446049250313E-16*Math.abs(a);this.pb=a;this.yb=c};l.prototype.Bg=
function(c){var a=this.pb*c.pb;this.yb=this.yb*Math.abs(c.pb)+c.yb*Math.abs(this.pb)+this.yb*c.yb+2.220446049250313E-16*Math.abs(a);this.pb=a};l.prototype.Po=function(c){var a=this.pb*c;this.yb=this.yb*Math.abs(c)+2.220446049250313E-16*Math.abs(a);this.pb=a};l.prototype.Ml=function(c,a){var b=Math.abs(c.pb)*Math.abs(a.pb);this.yb=c.yb*Math.abs(a.pb)+a.yb*Math.abs(c.pb)+c.yb*a.yb+2.220446049250313E-16*Math.abs(b);this.pb=b};l.prototype.lm=function(c){var a=Math.abs(c.pb),b=this.pb/c.pb,d=(this.yb+
Math.abs(b)*c.yb)/a;c.yb>.01*a&&(c=c.yb/a,d*=1+(1+c)*c);this.pb=b;this.yb=d+2.220446049250313E-16*Math.abs(b)};l.prototype.sqrt=function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.yb?.5*this.yb/c:this.pb>this.yb?c-Math.sqrt(this.pb-this.yb):Math.max(c,Math.sqrt(this.pb+this.yb)-c);a+=2.220446049250313E-16*Math.abs(c)}else this.pb<-1*this.yb?a=c=NaN:(c=0,a=Math.sqrt(this.yb));this.pb=c;this.yb=a};l.prototype.sin=function(c){var a=Math.sin(c.pb),b=Math.cos(c.pb);this.pb=a;a=Math.abs(a);
this.yb=(Math.abs(b)+.5*a*c.yb)*c.yb+2.220446049250313E-16*a};l.prototype.cos=function(c){var a=Math.sin(c.pb),b=Math.cos(c.pb);this.pb=b;b=Math.abs(b);this.yb=(Math.abs(a)+.5*b*c.yb)*c.yb+2.220446049250313E-16*b};l.prototype.rg=function(){return Math.abs(this.pb)<=this.yb};l.prototype.rs=function(){return this.rg()&&0!=this.yb};return l}();g.Xb=z})(R||(R={}));var ra=new R.h,ya=new R.h,na=new R.h,ta=new R.h,Da=new R.h;(function(g){var z;(function(c){c[c.closedPath=1]="closedPath";c[c.exteriorPath=
2]="exteriorPath";c[c.ringAreaValid=4]="ringAreaValid"})(z||(z={}));var l=function(){function c(a,b,d,e,f,h,k){void 0!==b?(this.ib=a,this.ek=b,this.dl=d,this.ki=e,this.za=h,this.cA=k,this.gw=f):(this.ib=a.ib,this.ek=a.ek,this.dl=a.dl,this.ki=a.ki,this.za=a.za,this.cA=a.cA,this.gw=a.gw);this.XG=!0}c.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):-1!=this.ki?(this.ki=this.ib.V(this.ki),this.za++,-1!=this.ki&&this.ki!=this.gw?this.ki:this.VT()):-1};c.prototype.VT=function(){this.dl=this.ib.Sb(this.dl);
for(this.za=0;-1!=this.ek;){for(;-1!=this.dl;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),-1!=this.ki)return this.ki;this.ek=this.ib.ve(this.ek);if(-1==this.ek)break;if(!this.cA||g.ba.Ic(this.ib.jc(this.ek)))this.dl=this.ib.Ob(this.ek)}return-1};c.vP=function(a,b,d,e,f,h,k){return new c(a,b,d,e,f,h,k)};return c}();g.vY=l;z=function(){function c(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null;this.sw=this.md=-1;this.gd=0;
this.aA=!1;this.it=this.jt=this.wb=null}c.prototype.Uh=function(a){return null!=this.Te?this.Te[a]:null};c.prototype.Zg=function(a,b){if(null==this.Te){if(null==b)return;this.Te=[];for(var d=0,e=this.wb.I();d<e;d++)this.Te.push(null)}this.Te[a]=b};c.prototype.ep=function(a,b){this.nd.T(a,1,b)};c.prototype.cp=function(a,b){this.nd.T(a,2,b)};c.prototype.QB=function(a,b){this.nd.T(a,6,b)};c.prototype.Up=function(a){return this.nd.U(a,6)};c.prototype.gx=function(a,b){this.nd.T(a,7,b)};c.prototype.sv=
function(a){return this.nd.U(a,0)};c.prototype.JJ=function(a,b){this.dd.T(a,1,b)};c.prototype.NJ=function(a,b){this.dd.T(a,0,b)};c.prototype.EF=function(a){return this.dd.U(a,7)};c.prototype.ap=function(a,b){this.dd.T(a,3,b)};c.prototype.bp=function(a,b){this.dd.T(a,4,b)};c.prototype.pU=function(a){null==this.dd&&(this.dd=new g.ad(8));var b=this.dd.De();this.dd.T(b,2,a);this.dd.T(b,5,0);this.dd.T(b,6,0);this.dd.T(b,7,b);return b};c.prototype.JQ=function(a){this.dd.kd(a)};c.prototype.rU=function(a){null==
this.nd&&(this.nd=new g.ad(8),this.ud=new g.ad(5),this.Qi=new g.ce(0),this.xo=new g.ce(0));var b=this.nd.De();this.nd.T(b,0,b);this.nd.T(b,3,0);this.nd.T(b,6,0);this.gx(b,a);b>=this.Qi.size&&(a=16>b?16:g.P.truncate(3*b/2),this.Qi.resize(a),this.xo.resize(a));this.Qi.set(b,0);this.xo.set(b,0);return b};c.prototype.nF=function(a){this.nd.kd(a)};c.prototype.Qy=function(a){this.ud.kd(a);this.gd--};c.prototype.jI=function(a){null==this.nd&&(this.nd=new g.ad(8),this.ud=new g.ad(5),this.Qi=new g.ce(0),this.xo=
new g.ce(0));var b=this.ud.De(),d=0<=a?a:b;this.ud.T(b,0,d);if(0>a){if(d>=this.wb.I()){a=16>d?16:g.P.truncate(3*d/2);this.wb.resize(a);if(null!=this.Te)for(var e=0;e<a;e++)this.Te.push(null);null!=this.Ug&&this.Ug.resize(a);this.jt=this.wb.vb(0)}this.wb.Db(d,-1E38,-1E38);null!=this.Te&&(this.Te[d]=null);null!=this.Ug&&this.Ug.write(d,1)}this.ud.T(b,4,2*d);this.gd++;return b};c.prototype.yj=function(a,b,d){var e=-1!=b?this.Na(b):this.tj(a),f=-1!=e?this.V(e):-1,h=this.jI(null==d?this.gd:-1),k=this.Va(h);
null!=d&&this.wb.It(k,d);this.cj(h,a);this.Cc(h,f);this.Dc(h,e);-1!=f&&this.Dc(f,h);-1!=e&&this.Cc(e,h);d=this.ec(a);e=this.Ya(a);-1==b&&this.Yg(a,h);b==e&&this.Kf(a,h);d&&-1==f&&(this.Cc(h,h),this.Dc(h,h));this.Xj(a,this.Ka(a)+1);a=this.Sf(a);this.Vj(a,this.I(a)+1);return h};c.prototype.pm=function(){null==this.lo&&(this.lo=new g.Ta(this.wb.description));return this.lo};c.prototype.$o=function(a,b){this.dd.T(a,2,this.dd.U(a,2)&-134217729||(1==b?134217728:0))};c.prototype.Kn=function(a){return 0!=
(this.dd.U(a,2)&134217728)?1:0};c.prototype.cN=function(a){var b=this.Kg(a.K(),a.description);1736==a.K()&&this.$o(b,a.Kn());this.PD(b,a);return b};c.prototype.dN=function(a){var b=this.Kg(a.K(),a.description);this.QD(b,a);return b};c.prototype.SV=function(a,b){null==this.nd&&(this.nd=new g.ad(8),this.ud=new g.ad(5),this.Qi=new g.ce(0),this.xo=new g.ce(0));this.nd.Ee(this.nd.Jg+a);this.ud.Ee(this.ud.Jg+b);this.Qi.Jb(this.Qi.size+a);this.xo.Jb(this.xo.size+a)};c.prototype.PD=function(a,b){this.SV(b.ea(),
b.I());this.Kl.Gd(b,0,b.I());this.jt=this.wb.vb(0);for(var d=null!=this.Te&&null!=b.Se,e=0,f=b.ea();e<f;e++)if(!(2>b.Ka(e))){var h=this.wf(a,-1);this.mn(h,b.ec(e));for(var k=b.Ca(e),m=b.Wc(e);k<m;k++){var n=this.yj(h,-1,null);if(d)if(n=this.Va(n),0!=(b.UF(k)&1))this.Zg(n,null);else{var p=new g.jg;b.cc(k,p,!0);this.Zg(n,p.get())}}}};c.prototype.QD=function(a,b){this.Kl.Gd(b,0,b.I());this.jt=this.wb.vb(0);a=this.wf(a,-1);var d=0;for(b=b.I();d<b;d++)this.yj(a,-1,null)};c.prototype.JX=function(a,b,d){var e=
this.V(a);if(-1==e)throw g.i.Ra();for(var f=this.pm(),h=this.cd(a),k=0,m=b.ql(d);k<m;k++){var n=this.Va(a),p=this.V(a),q=b.Xp(d,k);0==k&&(q.Vo(f),this.Fh(a,f));322==q.K()?this.Zg(n,null):this.Zg(n,g.ba.kg(q));q.Ro(f);k<m-1?a=this.yj(h,p,f):this.Fh(e,f)}};c.prototype.IX=function(a,b,d){var e=this.V(a);if(-1==e)throw g.i.Ra();for(var f=this.pm(),h=this.cd(a),k=0,m=b.ql(d);k<m;k++){var n=this.Va(a),p=this.V(a),q=b.Xp(d,m-k-1);0==k&&(q.Ro(f),this.Fh(a,f));322==q.K()?this.Zg(n,null):this.Zg(n,g.ba.kg(q));
q.Vo(f);k<m-1?a=this.yj(h,p,f):this.Fh(e,f)}};c.prototype.DF=function(){var a=new g.l;a.Pa();for(var b=this.$q(),d=new g.h,e=!0,f=b.next();-1!=f;f=b.next())this.D(f,d),e?a.$b(d.x,d.y):a.Nk(d.x,d.y),e=!1;return a};c.prototype.Ib=function(a){var b=a.K();if(g.ba.Ic(b))return this.cN(a);if(550==b)return this.dN(a);throw g.i.Ra();};c.prototype.pN=function(a,b){var d=b.K();if(g.ba.Ic(d))this.PD(a,b);else if(550==d)this.QD(a,b);else throw g.i.Ra();};c.prototype.hN=function(a,b){var d=this.Kg(1736,a.description);
if(2>a.Ka(b))return d;this.Kl.Gd(a,a.Ca(b),a.Wc(b));this.jt=this.wb.vb(0);var e=this.wf(d,-1);this.mn(e,a.ec(b)||!0);var f=null!=this.Te&&null!=a.Se,h=a.Ca(b);for(b=a.Wc(b);h<b;h++){var k=this.yj(e,-1,null);if(f)if(k=this.Va(k),0!=(a.UF(h)&1))this.Zg(k,null);else{var m=new g.jg;a.cc(h,m,!0);this.Zg(k,m.get())}}return d};c.prototype.Ke=function(a){var b=this.jc(a),d=g.UK.Kg(b,this.Kl.description),e=this.I(a);if(0==e)return d;if(g.ba.Ic(b)){b=this.ea(a);for(var f=g.Zc.Qh(b+1),h=g.Zc.Or(b+1,0),k=d.description,
m=0,n=k.Ba;m<n;m++){for(var p=k.ld(m),q=g.sa.Wa(p),t=g.Zc.TE(p,e),v=this.wb.vb(p),F=0,W=0,ba=0,aa=this.Ob(a);-1!=aa;aa=this.Sb(aa)){var fa=0;this.ec(aa)&&(fa|=1);this.TS(aa)&&(fa|=4);0!=fa&&h.uJ(W,fa);var ka=this.Ka(aa);f.write(W++,ba);ba+=ka;if(0==p){ka=v;var la=t,ma=new g.h;for(fa=this.Ya(aa);F<ba;fa=this.V(fa),F++){var sa=this.Va(fa);ka.uc(2*sa,ma);la.Vt(2*F,ma)}}else for(fa=this.Ya(aa);F<ba;fa=this.V(fa),F++)for(sa=this.Va(fa),la=0;la<q;la++)ma=v.gg(sa*q+la),t.rr(F*q+la,ma)}d.kn(p,t);f.write(b,
e)}d.KJ(h);d.LJ(f);d.Qc(16777215)}else if(550==b){k=d.description;d.resize(e);m=0;for(n=k.Ba;m<n;m++){p=k.ld(m);q=g.sa.Wa(p);t=d.vb(p);v=this.wb.vb(p);F=0;aa=this.Ob(a);ka=this.Ka(aa);for(fa=this.Ya(aa);F<ka;fa=this.V(fa),F++)for(sa=this.Va(fa),la=0;la<q;la++)ma=v.gg(sa*q+la),t.rr(F*q+la,ma);d.kn(p,t)}d.Qc(16777215)}return d};c.prototype.wB=function(a){for(var b=this.Ob(a);-1!=b;b=this.ar(b));b=this.KR(a);var d=this.ve(a);-1!=b?this.JJ(b,d):this.md=d;-1!=d?this.NJ(d,b):this.sw=b;this.JQ(a)};c.prototype.Kg=
function(a,b){return void 0===b?this.VE(a,g.fe.pg()):this.VE(a,b)};c.prototype.VE=function(a,b){a=this.pU(a);null==this.wb?this.wb=this.Kl=new g.ee(b):this.Kl.Ll(b);this.it=this.Kl.description;this.aA=1<this.it.Ba;-1==this.md?this.md=a:(this.NJ(a,this.sw),this.JJ(this.sw,a));return this.sw=a};c.prototype.ve=function(a){return this.dd.U(a,1)};c.prototype.KR=function(a){return this.dd.U(a,0)};c.prototype.jc=function(a){return this.dd.U(a,2)&2147483647};c.prototype.CJ=function(a,b,d){b=this.yk[b];a=
this.EF(a);a>=b.size&&b.resize(Math.max(g.P.truncate(1.25*a),16),-1);b.write(a,d)};c.prototype.FF=function(a,b){a=this.EF(a);b=this.yk[b];return a<b.size?b.read(a):-1};c.prototype.WE=function(){null==this.yk&&(this.yk=[]);for(var a=0;a<this.yk.length;a++)if(null==this.yk[a])return this.yk[a]=g.Zc.Qh(0),a;this.yk.push(g.Zc.Qh(0));return this.yk.length-1};c.prototype.sW=function(a){this.yk[a]=null};c.prototype.Ob=function(a){return this.dd.U(a,3)};c.prototype.mv=function(a){return this.dd.U(a,4)};c.prototype.I=
function(a){return this.dd.U(a,5)};c.prototype.ea=function(a){return this.dd.U(a,6)};c.prototype.Ip=function(a,b,d){for(var e=0,f=this.md;-1!=f;f=this.ve(f)){var h=this.jc(f);if(g.ba.Ic(h)&&(!d||1736==h)){h=1736==this.jc(f);for(var k=this.Ob(f);-1!=k;){for(var m=0,n=this.Ya(k);m<g.P.truncate(this.Ka(k)/2);){var p=this.V(n);if(-1==p)break;var q=this.Va(n),t=this.Uh(q);null!=t?q=t.Rb():(t=this.Va(p),q=this.wb.Ar(q,t));q<=a?(0==q?0==e&&(e=-1):e=1,p!=this.tj(k)&&(this.gC(p,n),this.qd(p,!0))):n=this.V(n);
m++}m=this.Ya(k);for(n=this.ec(k)?m:this.tj(k);0<this.Ka(k);)if(p=this.Na(n),-1!=p){var v=this.Va(p);t=this.Uh(v);null!=t?q=t.Rb():(q=this.Va(n),q=this.wb.Ar(q,v));if(q<=a)0==q?0==e&&(e=-1):e=1,this.gC(p,n),this.qd(p,!1),m==p&&(m=this.Ya(k));else if(n=this.Na(n),n==m)break}else{this.qd(n,!0);0==e&&(e=-1);break}n=this.Ka(k);b&&(h?3>n:2>n)?(k=this.ar(k),e=0<n?1:0==e?-1:e):k=this.Sb(k)}}}return e};c.prototype.gC=function(a,b){var d=this.Va(a),e=this.Va(b);null!=this.Ug&&(d=this.Ug.read(d),this.Ug.write(e,
d));if(null!=this.di)for(e=0,d=this.di.length;e<d;e++)if(null!=this.di[e]){var f=this.Qa(a,e);-1!=f&&this.Sa(b,e,f)}};c.prototype.Wl=function(a,b,d){var e=0,f=this.V(a);if(-1==f)throw g.i.Ra();for(var h=this.Va(a),k=this.Va(f),m=this.Uh(h),n=null==m?this.wb.Ar(h,k):m.Rb(),p=0;p<d;p++){var q=b[p];if(0<q&&1>q){var t=q;null!=m&&(t=0<n?m.Tx(q)/n:0);this.wb.fD(h,k,t,this.pm());var v=this.yj(this.cd(a),f,this.pm());e++;if(null!=m){var F=m.fl(0,q);t=this.Va(this.Na(v));this.Zg(t,F);this.mf(v,F.xc());if(p==
d-1||1==b[p+1])q=m.fl(q,1),this.Zg(t,q)}}}return e};c.prototype.HX=function(a,b,d){var e=0,f=this.V(a);if(-1==f)throw g.i.ga("internal error");var h=this.Va(a),k=this.Va(f),m=this.Uh(h),n=null==m?this.wb.Ar(h,k):m.Rb(),p=0;a=this.cd(a);for(var q=0;q<d;q++){var t=b[q];if(p<t&&1>t){var v=t;null!=m&&(v=0<n?m.Tx(t)/n:0);this.wb.fD(h,k,v,this.pm());v=this.tS(a,f,this.pm());e++;if(null!=m){p=m.fl(p,t);var F=this.Va(this.Na(v));this.Zg(F,p);this.Db(v,p.qa,p.ma);if(q==d-1||1==b[q+1])p=m.fl(t,1),v=this.Va(v),
this.Zg(v,p)}}p=t}return e};c.prototype.tS=function(a,b,d){var e=-1!=b?this.Na(b):this.tj(a),f=-1!=e?this.V(e):-1,h=this.jI(null==d?this.gd:-1),k=this.Va(h);null!=d&&this.wb.It(k,d);this.cj(h,a);this.Cc(h,f);this.Dc(h,e);-1!=f&&this.Dc(f,h);-1!=e&&this.Cc(e,h);d=this.ec(a);e=this.Ya(a);-1==b&&this.Yg(a,h);b==e&&(d&&-1!=e||this.Kf(a,h));d&&-1==f&&(this.Cc(h,h),this.Dc(h,h));this.Xj(a,this.Ka(a)+1);a=this.Sf(a);this.Vj(a,this.I(a)+1);return h};c.prototype.pE=function(a,b,d){var e=this.Va(b),f=this.Va(d);
if(0>e||f>this.gd-1)throw g.i.O("invalid call");if(e>f&&!this.ec(a))throw g.i.O("cannot iterate across an open path");for(a=0;b!=d;b=this.V(b))e=this.Va(b),f=this.Uh(e),null!=f?a+=f.Rb():(f=this.Va(this.V(b)),a+=this.wb.Ar(e,f));return a};c.prototype.Fh=function(a,b){var d=this.Va(a);this.wb.It(d,b);d=this.Uh(d);null!=d&&d.setStart(b);a=this.Na(a);-1!=a&&(a=this.Va(a),null!=this.Uh(a)&&d.setEnd(b))};c.prototype.Xi=function(a,b){a=this.Va(a);this.wb.we(a,b)};c.prototype.mf=function(a,b){this.Db(a,
b.x,b.y)};c.prototype.Db=function(a,b,d){var e=this.Va(a);this.wb.Db(e,b,d);e=this.Uh(e);null!=e&&e.UB(b,d);a=this.Na(a);-1!=a&&(a=this.Va(a),null!=this.Uh(a)&&e.Sl(b,d))};c.prototype.D=function(a,b){this.wb.D(this.ud.U(a,0),b)};c.prototype.Hc=function(a,b){this.wb.Aa[0].uc(2*this.ud.U(a,0),b)};c.prototype.Oa=function(a){var b=new g.h;this.wb.D(this.ud.U(a,0),b);return b};c.prototype.ZF=function(a,b){this.jt.uc(2*a,b)};c.prototype.Vc=function(a,b,d){return this.wb.Vc(a,this.Va(b),d)};c.prototype.setAttribute=
function(a,b,d,e){this.wb.setAttribute(a,this.Va(b),d,e)};c.prototype.Va=function(a){return this.ud.U(a,0)};c.prototype.kh=function(){var a=new g.h;this.D(void 0,a);return a.y};c.prototype.hq=function(a,b){a=this.Va(a);b=this.Va(b);var d=this.wb.Aa[0].o;return d[2*a]===d[2*b]&&d[2*a+1]===d[2*b+1]};c.prototype.Fv=function(a,b){a=this.Va(a);var d=this.wb.Aa[0].o;return d[2*a]===b.x&&d[2*a+1]===b.y};c.prototype.rX=function(a,b){1>b&&(b=1);if(null==this.Ug){if(1==b)return;this.Ug=g.Zc.Fn(this.wb.I(),
1)}a=this.Va(a);a>=this.Ug.size&&this.Ug.resize(a+1,1);this.Ug.write(a,b)};c.prototype.YF=function(a){a=this.Va(a);return null==this.Ug||a>=this.Ug.size?1:this.Ug.read(a)};c.prototype.Sa=function(a,b,d){b=this.di[b];a=this.Va(a);b.size<this.wb.I()&&b.resize(this.wb.I(),-1);b.write(a,d)};c.prototype.Qa=function(a,b){a=this.Va(a);b=this.di[b];return a<b.size?b.read(a):-1};c.prototype.Hd=function(){null==this.di&&(this.di=[]);for(var a=0;a<this.di.length;a++)if(null==this.di[a])return this.di[a]=g.Zc.Qh(0,
-1),a;this.di.push(g.Zc.Qh(0,-1));return this.di.length-1};c.prototype.Ud=function(a){this.di[a]=null};c.prototype.cc=function(a){return null!=this.Te?(a=this.Va(a),this.Te[a]):null};c.prototype.fd=function(a,b){var d=this.ud.U(a,2);if(-1==d)return!1;if(this.aA){var e=new g.Ta;this.Xi(a,e);b.setStart(e);this.Xi(d,e);b.setEnd(e)}else this.wb.Hc(this.ud.U(a,0),ra),b.gm(0,ra),this.wb.Hc(this.ud.U(d,0),ra),b.gm(1,ra);return!0};c.prototype.hW=function(a,b,d){if(this.aA){var e=new g.Ta;this.Xi(a,e);d.setStart(e);
this.Xi(b,e);d.setEnd(e)}else this.wb.Hc(a,ra),d.gm(0,ra),this.wb.Hc(b,ra),d.gm(1,ra)};c.prototype.wf=function(a,b){if(-1!=b){if(a!=this.Sf(b))throw g.i.Ra();var d=this.es(b)}else d=this.mv(a);var e=this.rU(a);-1!=b&&this.ep(b,e);this.cp(e,b);this.ep(e,d);-1!=d?this.cp(d,e):this.ap(a,e);-1==b&&this.bp(a,e);this.Tl(a,this.ea(a)+1);return e};c.prototype.iG=function(a,b,d,e){a=this.wf(a,-1);for(var f=0,h=b,k=!1;h==d&&(k=!0),this.cj(h,a),f++,h=this.V(h),h!=b;);this.mn(a,!0);this.Xj(a,f);k&&(b=d);this.Kf(a,
b);this.Yg(a,this.Na(b));this.fp(a,!1);null!=e&&(e[0]=k);return a};c.prototype.ar=function(a){var b=this.es(a),d=this.Sb(a),e=this.Sf(a);-1!=b?this.cp(b,d):this.ap(e,d);-1!=d?this.ep(d,b):this.bp(e,b);this.vO(a);this.Tl(e,this.ea(e)-1);this.nF(a);return d};c.prototype.vO=function(a){var b=this.Ya(a);if(-1!=b){for(var d=0,e=this.Ka(a);d<e;d++){var f=b;b=this.V(b);this.Qy(f)}b=this.Sf(a);this.Vj(b,this.I(b)-this.Ka(a))}this.Xj(a,0)};c.prototype.Sb=function(a){return this.nd.U(a,2)};c.prototype.es=function(a){return this.nd.U(a,
1)};c.prototype.Ka=function(a){return this.nd.U(a,3)};c.prototype.ec=function(a){return 0!=(this.Up(a)&1)};c.prototype.mn=function(a,b){if(this.ec(a)!=b){if(0<this.Ka(a)){var d=this.Ya(a),e=this.tj(a);b?(this.Cc(e,d),this.Dc(d,e),d=this.Va(e)):(this.Cc(e,-1),this.Dc(d,-1),d=this.Va(e));this.Zg(d,null)}this.QB(a,(this.Up(a)|1)-1|(b?1:0))}};c.prototype.Sf=function(a){return this.nd.U(a,7)};c.prototype.TS=function(a){return 0!=(this.Up(a)&2)};c.prototype.KB=function(a,b){this.QB(a,(this.Up(a)|2)-2|(b?
2:0))};c.prototype.qz=function(a){if(this.YS(a))return this.Qi.get(this.sv(a));var b=new g.zb,d=this.Ya(a);if(-1==d)return 0;var e=new g.h;this.D(d,e);for(var f=0,h=0,k=this.Ka(a);h<k;h++,d=this.V(d)){var m=this.cc(d);if(null==m){if(!this.fd(d,b))continue;m=b}f+=m.Sx(e.x,e.y)}this.fp(a,!0);this.Qi.set(this.sv(a),f);return f};c.prototype.ir=function(a,b,d){b=this.Ek[b];a=this.sv(a);b.size<this.Qi.size&&b.resize(this.Qi.size,-1);b.write(a,d)};c.prototype.uj=function(a,b){a=this.sv(a);b=this.Ek[b];return a<
b.size?b.read(a):-1};c.prototype.Fy=function(){null==this.Ek&&(this.Ek=[]);for(var a=0;a<this.Ek.length;a++)if(null==this.Ek[a])return this.Ek[a]=g.Zc.Qh(0),a;this.Ek.push(g.Zc.Qh(0));return this.Ek.length-1};c.prototype.xB=function(a){this.Ek[a]=null};c.prototype.UT=function(a,b,d){if(-1==d)throw g.i.O();if(b!=d){var e=this.Sb(d),f=this.es(d),h=this.Sf(d);-1==f?this.ap(h,e):this.cp(f,e);-1==e?this.bp(h,f):this.ep(e,f);this.Vj(h,this.I(h)-this.Ka(d));this.Tl(h,this.ea(h)-1);f=-1==b?this.mv(a):this.es(b);
this.ep(d,f);this.cp(d,b);-1==b?this.bp(a,d):this.ep(b,d);-1==f?this.ap(a,d):this.cp(f,d);this.Vj(a,this.I(a)+this.Ka(d));this.Tl(a,this.ea(a)+1);this.gx(d,a)}};c.prototype.kj=function(a,b){this.wb.we(this.Va(b),this.pm());this.yj(a,-1,this.pm())};c.prototype.qd=function(a,b){var d=this.cd(a),e=this.Na(a),f=this.V(a);-1!=e&&this.Cc(e,f);var h=this.Ka(d);a==this.Ya(d)&&this.Kf(d,1<h?f:-1);-1!=f&&this.Dc(f,e);a==this.tj(d)&&this.Yg(d,1<h?e:-1);if(-1!=e&&-1!=f){e=this.Va(e);var k=this.Va(f);b?(b=this.Uh(e),
null!=b&&(e=new g.h,this.wb.D(k,e),b.Rc(e))):(k=this.Va(a),b=this.Uh(k),this.Zg(e,b),null!=b&&(e=this.wb.Oa(e),b.Ec(e)))}this.Xj(d,h-1);d=this.Sf(d);this.Vj(d,this.I(d)-1);this.Qy(a);return f};c.prototype.Ya=function(a){return this.nd.U(a,4)};c.prototype.tj=function(a){return this.nd.U(a,5)};c.prototype.V=function(a){return this.ud.U(a,2)};c.prototype.Na=function(a){return this.ud.U(a,1)};c.prototype.cd=function(a){return this.ud.U(a,3)};c.prototype.hc=function(a,b){return this.yj(a,-1,b)};c.prototype.$q=
function(a){if(void 0===a)return this.$q(!1);if(a instanceof l)return new l(a);var b,d=-1,e=-1,f=-1,h=0,k=!1;for(b=this.md;-1!=b;b=this.ve(b))if(!a||g.ba.Ic(this.jc(b))){for(d=this.Ob(b);-1!=d;d=this.Sb(d))if(f=e=this.Ya(d),h=0,-1!=e){k=!0;break}if(k)break}return l.vP(this,b,d,e,f,h,a)};c.prototype.Pc=function(a){this.Kl.Pc(a);if(null!=this.Te)for(var b=0,d=this.Te.length;b<d;b++)null!=this.Te[b]&&this.Te[b].Pc(a)};c.prototype.lr=function(a,b,d,e){e?this.JX(a,b,d):this.IX(a,b,d)};c.prototype.Dc=function(a,
b){this.ud.T(a,1,b)};c.prototype.Cc=function(a,b){this.ud.T(a,2,b)};c.prototype.cj=function(a,b){this.ud.T(a,3,b)};c.prototype.Xj=function(a,b){this.nd.T(a,3,b)};c.prototype.Kf=function(a,b){this.nd.T(a,4,b)};c.prototype.Yg=function(a,b){this.nd.T(a,5,b)};c.prototype.Tl=function(a,b){this.dd.T(a,6,b)};c.prototype.Vj=function(a,b){this.dd.T(a,5,b)};c.prototype.kJ=function(a){var b=a;do{var d=this.V(b);this.Cc(b,this.Na(b));this.Dc(b,d);b=d}while(b!=a)};c.prototype.XB=function(a){this.gd=a};c.prototype.br=
function(a){var b=this.es(a),d=this.Sb(a),e=this.Sf(a);-1!=b?this.cp(b,d):this.ap(e,d);-1!=d?this.ep(d,b):this.bp(e,b);this.Kf(a,-1);this.Yg(a,-1);this.nF(a)};c.prototype.oi=function(a,b){var d=this.Na(a),e=this.V(a);-1!=d&&this.Cc(d,e);-1!=e&&this.Dc(e,d);if(-1!=d&&-1!=e)if(d=this.Va(d),e=this.Va(e),b){if(b=this.Uh(d),null!=b){var f=new g.h;this.wb.D(e,f);b.Rc(f)}}else b=this.Va(a),b=this.Uh(b),this.Zg(d,b),null!=b&&(f=new g.h,this.wb.D(d,f),b.Ec(f));this.Qy(a)};c.prototype.YS=function(a){return 0!=
(this.Up(a)&4)};c.prototype.fp=function(a,b){this.QB(a,(this.Up(a)|4)-4|(b?4:0))};c.prototype.nx=function(a,b){var d=this.ud.o;this.wb.oc();var e=this.wb.Aa[0].o;a.Wd(0,b,function(f,h){var k=d[5*f];f=d[5*h];h=e[2*k];k=e[2*k+1];var m=e[2*f];f=e[2*f+1];return k<f?-1:k>f?1:h<m?-1:h>m?1:0})};c.prototype.eS=function(){for(var a=this.md;-1!=a;a=this.ve(a))if(!g.ba.Ic(this.jc(a)))return!0;return!1};c.prototype.cC=function(a,b){for(var d=this.Ob(a),e=this.Ob(b),f=this.mv(a),h=this.mv(b),k=this.Ob(a);-1!=
k;k=this.Sb(k))this.gx(k,b);for(k=this.Ob(b);-1!=k;k=this.Sb(k))this.gx(k,a);this.ap(a,e);this.ap(b,d);this.bp(a,h);this.bp(b,f);d=this.I(a);e=this.ea(a);f=this.ea(b);this.Vj(a,this.I(b));this.Vj(b,d);this.Tl(a,f);this.Tl(b,e);d=this.dd.U(a,2);this.dd.T(a,2,this.dd.U(b,2));this.dd.T(b,2,d)};return c}();g.hd=z})(R||(R={}));(function(g){var z=function(l){function c(a,b,d,e){var f=l.call(this)||this;f.aa=new g.l;void 0===a?f.PE():"number"===typeof a?f.QO(a,b,d,e):a instanceof g.Ta?void 0!==b?f.Su(a,
b,d):f.RO(a):a instanceof g.sa?void 0!==b?f.TO(a,b):f.SO(a):a instanceof g.l?f.PO(a):f.PE();return f}Na(c,l);c.prototype.Su=function(a,b,d){this.description=g.fe.pg();this.aa.Pa();a.B()||this.vu(a,b,d)};c.prototype.PO=function(a){this.description=g.fe.pg();this.aa.L(a);this.aa.normalize()};c.prototype.SO=function(a){if(null==a)throw g.i.O();this.description=a;this.aa.Pa()};c.prototype.TO=function(a,b){if(null==a)throw g.i.O();this.description=a;this.aa.L(b);this.aa.normalize()};c.prototype.PE=function(){this.description=
g.fe.pg();this.aa.Pa()};c.prototype.RO=function(a){this.description=g.fe.pg();this.aa.Pa();a.B()||this.vu(a)};c.prototype.QO=function(a,b,d,e){this.description=g.fe.pg();this.L(a,b,d,e)};c.prototype.L=function(a,b,d,e){this.wc();if("number"===typeof a)this.aa.L(a,b,d,e);else for(this.Pa(),b=0,d=a.length;b<d;b++)this.$b(a[b])};c.prototype.Zo=function(a){this.wc();if(!a.aT())throw g.i.O();this.aa.L(a)};c.prototype.Pa=function(){this.wc();this.aa.Pa()};c.prototype.B=function(){return this.aa.B()};c.prototype.S=
function(){return this.aa.S()};c.prototype.da=function(){return this.aa.da()};c.prototype.ik=function(){return this.aa.ik()};c.prototype.Lp=function(){return this.aa.Lp()};c.prototype.Kp=function(){return this.aa.tf()};c.prototype.$b=function(a){if(a instanceof g.h)this.wc(),this.aa.$b(a);else if(a instanceof g.l)this.wc(),this.aa.$b(a);else if(a instanceof g.Ta){if(this.wc(),!a.Bc()){var b=a.description;this.description!=b&&this.Ll(b);if(this.B())this.vu(a);else{this.aa.$b(a.D());for(var d=1,e=b.Ba;d<
e;d++)for(var f=b.Fd(d),h=g.sa.Wa(f),k=0;k<h;k++){var m=a.Vc(f,k),n=this.Vg(f,k);n.$b(m);this.setInterval(f,k,n)}}}}else if(a instanceof c&&!a.B())for(b=a.description,b!=this.description&&this.Ll(b),this.aa.$b(a.aa),d=1,e=b.Ba;d<e;d++)for(f=b.ld(d),h=g.sa.Wa(f),k=0;k<h;k++)m=a.Vg(f,k),n=this.Vg(f,k),n.$b(m),this.setInterval(f,k,n)};c.prototype.vu=function(a,b,d){if(void 0!==b){this.aa.L(a.D(),b,d);b=a.description;d=1;for(var e=b.Ba;d<e;d++)for(var f=b.Fd(d),h=g.sa.Wa(f),k=0;k<h;k++){var m=a.Vc(f,
k);this.setInterval(f,k,m,m)}}else for(this.aa.L(a.la[0],a.la[1]),b=a.description,d=1,e=b.Ba;d<e;d++)for(f=b.Fd(d),h=g.sa.Wa(f),k=0;k<h;k++)m=a.Vc(f,k),this.setInterval(f,k,m,m)};c.prototype.setInterval=function(a,b,d,e){d="number"===typeof d?new g.Oc(d,e):d;this.wc();if(0==a)if(0==b)this.aa.v=d.pa,this.aa.C=d.wa;else if(1==b)this.aa.G=d.pa,this.aa.H=d.wa;else throw g.i.de();else this.qD(0,a,b,d.pa),this.qD(1,a,b,d.wa)};c.prototype.X=function(a,b){this.wc();this.aa.X(a,b)};c.prototype.Pc=function(a){if(a instanceof
g.Ed)this.wc(),a.hC(this.aa);else if(this.wc(),!this.aa.B()){var b=new g.JK;this.So(b);b.SS()?b.Pa():a.hC(b)}};c.prototype.copyTo=function(a){if(a.K()!=this.K())throw g.i.O();a.wc();a.description=this.description;a.aa.L(this.aa);a.la=null;if(null!=this.la){a.qu();for(var b=0;b<2*(this.description.Be.length-2);b++)a.la[b]=this.la[b]}};c.prototype.Ja=function(){return new c(this.description)};c.prototype.He=function(){return this.aa.rF()};c.prototype.Rb=function(){return this.aa.tR()};c.prototype.K=
function(){return 197};c.prototype.Eb=function(){return 2};c.prototype.dn=function(a){this.copyTo(a)};c.prototype.A=function(a){a.v=this.aa.v;a.G=this.aa.G;a.C=this.aa.C;a.H=this.aa.H};c.prototype.So=function(a){a.v=this.aa.v;a.G=this.aa.G;a.C=this.aa.C;a.H=this.aa.H;a.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))};c.prototype.Vg=function(a,b){var d=new g.Oc;d.L(this.Pd(0,a,b),this.Pd(1,a,b));return d};c.prototype.If=function(a,b){b.Pf(this.description);var d=this.description.Ba-
1;switch(a){case 0:for(a=0;a<d;a++)for(var e=this.description.ld(a),f=g.sa.Wa(e),h=0;h<f;h++)b.setAttribute(e,h,this.Pd(0,e,h));b.Db(this.aa.v,this.aa.G);break;case 1:for(a=0;a<d;a++)for(e=this.description.ld(a),f=g.sa.Wa(e),h=0;h<f;h++)b.setAttribute(e,h,this.Pd(1,e,h));b.Db(this.aa.v,this.aa.H);break;case 2:for(a=0;a<d;a++)for(e=this.description.ld(a),f=g.sa.Wa(e),h=0;h<f;h++)b.setAttribute(e,h,this.Pd(0,e,h));b.Db(this.aa.C,this.aa.H);break;case 3:for(a=0;a<d;a++)for(e=this.description.ld(a),f=
g.sa.Wa(e),h=0;h<f;h++)b.setAttribute(e,h,this.Pd(1,e,h));b.Db(this.aa.C,this.aa.G);break;default:throw g.i.de();}};c.prototype.hB=function(a,b){a=this.aa.hB(a);b.na(a.x,a.y)};c.prototype.fR=function(a,b){return b*(a.Qq-2)};c.prototype.sF=function(a,b,d){if(this.aa.B())throw g.i.ga("empty geometry");if(0==b)return 0!=a?0!=d?this.aa.H:this.aa.C:0!=d?this.aa.G:this.aa.v;if(d>=g.sa.Wa(b))throw g.i.O();var e=this.description.Rf(b);this.qu();return 0<=e?this.la[this.fR(this.description,a)+this.description.GR(e)-
2+d]:g.sa.te(b)};c.prototype.qu=function(){this.wc();if(null==this.la&&2<this.description.Be.length){this.la=[];for(var a=c.Ig(this.description,0),b=c.Ig(this.description,1),d=0,e=1,f=this.description.Ba;e<f;e++){var h=this.description.ld(e),k=g.sa.Wa(h);h=g.sa.te(h);for(var m=0;m<k;m++)this.la[a+d]=h,this.la[b+d]=h,d++}}};c.prototype.un=function(a){if(null!=this.la)if(2<a.Be.length){for(var b=g.fe.Kw(a,this.description),d=[],e=c.Ig(this.description,0),f=c.Ig(this.description,1),h=c.Ig(a,0),k=c.Ig(a,
1),m=0,n=1,p=a.Ba;n<p;n++){var q=a.ld(n),t=g.sa.Wa(q);if(-1==b[n]){var v=g.sa.te(q);for(q=0;q<t;q++)d[h+m]=v,d[k+m]=v,m++}else for(v=this.description.bk(b[n])-2,q=0;q<t;q++)d[h+m]=this.la[e+v],d[k+m]=this.la[f+v],m++,v++}this.la=d}else this.la=null;this.description=a};c.prototype.Pd=function(a,b,d){if(this.aa.B())throw g.i.ga("This operation was performed on an Empty Geometry.");if(0==b)return 0!=a?0!=d?this.aa.H:this.aa.C:0!=d?this.aa.G:this.aa.v;if(d>=g.sa.Wa(b))throw g.i.de();var e=this.description.Rf(b);
return 0<=e?(this.qu(),this.la[c.Ig(this.description,a)+this.description.bk(e)-2+d]):g.sa.te(b)};c.prototype.qD=function(a,b,d,e){this.wc();if(0==b)0!=a?0!=d?this.aa.H=e:this.aa.C=e:0!=d?this.aa.G=e:this.aa.v=e;else{if(d>=g.sa.Wa(b))throw g.i.de();if(!this.hasAttribute(b)){if(g.sa.yG(b,e))return;this.se(b)}b=this.description.Rf(b);this.qu();this.la[c.Ig(this.description,a)+this.description.bk(b)-2+d]=e}};c.Ig=function(a,b){return b*(a.Be.length-2)};c.prototype.Fa=function(a){this.wc();var b=new g.l;
a.A(b);return this.aa.Fa(b)};c.prototype.isIntersecting=function(a){return a instanceof g.l?this.aa.isIntersecting(a):this.aa.isIntersecting(a.aa)};c.prototype.Lu=function(a,b){this.wc();a.B()?this.Pa():void 0!==b?this.vu(a,b,void 0):this.aa.Lu(a.Ng(),a.kh())};c.prototype.offset=function(a,b){this.wc();this.aa.offset(a,b)};c.prototype.normalize=function(){this.wc();this.aa.normalize()};c.prototype.tf=function(a){if(void 0!==a)if(a.Pf(this.description),this.B())a.Pa();else{for(var b=this.description.Ba,
d=1;d<b;d++)for(var e=this.description.ld(d),f=g.sa.Wa(e),h=0;h<f;h++){var k=.5*(this.sF(0,e,h)+this.sF(1,e,h));a.setAttribute(e,h,k)}a.Db(this.aa.tf())}else{a=new g.Ta(this.description);if(this.B())return a;b=this.description.Ba;for(d=1;d<b;d++)for(e=this.description.Fd(d),f=g.sa.Wa(e),h=0;h<f;h++)k=.5*(this.Pd(0,e,h)+this.Pd(1,e,h)),a.setAttribute(e,h,k);a.Db(this.aa.ik(),this.aa.Lp());return a}};c.prototype.hz=function(){return new g.Ta(this.aa.hz())};c.prototype.contains=function(a){return a instanceof
g.Ta?a.B()?!1:this.aa.contains(a.Ng(),a.kh()):this.aa.contains(a.aa)};c.prototype.ZO=function(a){return this.aa.contains(a)};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return a.B()?!0:!1;if(!this.aa.Nb(a.aa))return!1;for(var b=0,d=2*(this.description.Be.length-2);b<d;b++)if(this.la[b]!=a.la[b])return!1;return!0};c.prototype.dc=function(){var a=this.description.dc();a=g.P.Vh(a,this.aa.dc());if(!this.B()&&null!=this.la)for(var b=
0,d=2*(this.description.Be.length-2);b<d;b++)a=g.P.Vh(a,this.la[b]);return a};c.prototype.gs=function(){return this.aa.v};c.prototype.js=function(){return this.aa.G};c.prototype.fs=function(){return this.aa.C};c.prototype.hs=function(){return this.aa.H};c.prototype.ng=function(){return g.si.im(this,null)};c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"};return c}(g.ba);g.Hh=z})(R||(R={}));(function(g){var z=function(){function l(c,
a,b,d){void 0===c?this.Pa():(this.v=c,this.G=a,this.C=b,this.H=d)}l.construct=function(c,a,b,d){var e=new l;e.v=c;e.G=a;e.C=b;e.H=d;return e};l.prototype.L=function(c,a,b,d){"number"===typeof c?void 0!==b?(this.v=c,this.G=a,this.C=b,this.H=d,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof g.h?void 0!==a?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*b,this.H=this.G+b,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof l?this.L(c.v,c.G,c.C,c.H):c instanceof
g.Oc&&(c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa))};l.prototype.bx=function(c,a){if(void 0!==a)if(0==a)this.Pa();else{this.v=c[0].x;this.G=c[0].y;this.C=this.v;this.H=this.G;for(var b=1;b<a;b++){var d=c[b];d.x<this.v?this.v=d.x:d.x>this.C&&(this.C=d.x);d.y<this.G?this.G=d.y:d.y>this.H&&(this.H=d.y)}}else if(null==c||0==c.length)this.Pa();else for(d=c[0],this.L(d.x,d.y),b=1;b<c.length;b++)a=c[b],this.Nk(a.x,a.y)};l.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN};
l.prototype.B=function(){return isNaN(this.v)};l.prototype.$b=function(c,a){"number"===typeof c?this.B()?(this.v=c,this.G=a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof g.h?this.$b(c.x,c.y):c instanceof g.Od?this.$b(c.x,c.y):c instanceof l&&!c.B()&&(this.$b(c.v,c.G),this.$b(c.C,c.H))};l.prototype.Nk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c);this.G>a?this.G=a:this.H<a&&(this.H=a)};l.prototype.X=function(c,a){this.B()||(this.v-=
c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Pa())};l.prototype.scale=function(c){0>c&&this.Pa();this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)};l.prototype.zoom=function(c,a){this.B()||this.L(this.tf(),c*this.S(),a*this.da())};l.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)};l.prototype.CG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=
this.G)};l.prototype.Fa=function(c){if(this.B()||c.B())return!1;c.v>this.v&&(this.v=c.v);c.C<this.C&&(this.C=c.C);c.G>this.G&&(this.G=c.G);c.H<this.H&&(this.H=c.H);(c=this.v<=this.C&&this.G<=this.H)||this.Pa();return c};l.prototype.hB=function(c){switch(c){case 0:return g.h.construct(this.v,this.G);case 1:return g.h.construct(this.v,this.H);case 2:return g.h.construct(this.C,this.H);case 3:return g.h.construct(this.C,this.G);default:throw g.i.de();}};l.prototype.iB=function(c){if(null==c||4>c.length)throw g.i.O();
null!=c[0]?c[0].na(this.v,this.G):c[0]=g.h.construct(this.v,this.G);null!=c[1]?c[1].na(this.v,this.H):c[1]=g.h.construct(this.v,this.H);null!=c[2]?c[2].na(this.C,this.H):c[2]=g.h.construct(this.C,this.H);null!=c[3]?c[3].na(this.C,this.G):c[3]=g.h.construct(this.C,this.G)};l.prototype.rF=function(){return this.B()?0:this.S()*this.da()};l.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())};l.prototype.ik=function(){return(this.C+this.v)/2};l.prototype.Lp=function(){return(this.H+this.G)/
2};l.prototype.S=function(){return this.C-this.v};l.prototype.da=function(){return this.H-this.G};l.prototype.move=function(c,a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)};l.prototype.Lu=function(c,a){if(void 0!==a)this.move(c-this.ik(),a-this.Lp());else if(c instanceof g.h)this.Lu(c.x,c.y);else if(c instanceof g.Ta){a=(this.C-this.v)/2;var b=(this.H-this.G)/2;this.v=c.Ng()-a;this.C=c.Ng()+a;this.G=c.kh()-b;this.H=c.kh()+b}else throw g.i.O();};l.prototype.offset=function(c,a){this.v+=c;
this.C+=c;this.G+=a;this.H+=a};l.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,this.C);this.v=c;this.C=a;c=Math.min(this.G,this.H);a=Math.max(this.G,this.H);this.G=c;this.H=a}};l.prototype.fn=function(c){c.na(this.v,this.G)};l.prototype.VI=function(c){c.na(this.C,this.G)};l.prototype.YI=function(c){c.na(this.v,this.H)};l.prototype.gn=function(c){c.na(this.C,this.H)};l.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H};l.prototype.tf=
function(){return g.h.construct((this.C+this.v)/2,(this.H+this.G)/2)};l.prototype.hz=function(){return g.h.construct(this.v,this.G)};l.prototype.contains=function(c,a){if(void 0!==a)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof g.Ta)return this.contains(c.Ng(),c.kh());if(c instanceof g.h)return this.contains(c.x,c.y);if(c instanceof l)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw g.i.O();};l.prototype.jm=function(c,a){if(void 0!==a)return c>this.v&&c<this.C&&
a>this.G&&a<this.H;if(c instanceof g.h)return this.jm(c.x,c.y);if(c instanceof l)return c.v>this.v&&c.C<this.C&&c.G>this.G&&c.H<this.H;throw g.i.O();};l.prototype.Nb=function(c){return c==this?!0:c instanceof l?this.B()&&c.B()?!0:this.v!=c.v||this.G!=c.G||this.C!=c.C||this.H!=c.H?!1:!0:!1};l.prototype.dc=function(){var c=this.v;c=g.P.truncate(c^c>>>32);var a=g.P.Vh(c);c=this.C;c=g.P.truncate(c^c>>>32);a=g.P.Vh(c,a);c=this.G;c=g.P.truncate(c^c>>>32);a=g.P.Vh(c,a);c=this.H;c=g.P.truncate(c^c>>>32);
return a=g.P.Vh(c,a)};l.prototype.zr=function(){return this.B()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)};l.prototype.uy=function(c,a){var b=this.ak(c),d=this.ak(a);if(0!=(b&d))return 0;if(0==(b|d))return 4;var e=(0!=b?1:0)|(0!=d?2:0);do{var f=a.x-c.x,h=a.y-c.y;f>h?0!=(b&l.TC)?(0!=(b&l.lu)?(c.y+=h*(this.v-c.x)/f,c.x=this.v):(c.y+=h*(this.C-c.x)/f,c.x=this.C),b=this.ak(c)):0!=(d&l.TC)?(0!=(d&l.lu)?(a.y+=h*(this.v-a.x)/f,a.x=
this.v):(a.y+=h*(this.C-a.x)/f,a.x=this.C),d=this.ak(a)):0!=b?(0!=(b&l.mu)?(c.x+=f*(this.G-c.y)/h,c.y=this.G):(c.x+=f*(this.H-c.y)/h,c.y=this.H),b=this.ak(c)):(0!=(d&l.mu)?(a.x+=f*(this.G-a.y)/h,a.y=this.G):(a.x+=f*(this.H-a.y)/h,a.y=this.H),d=this.ak(a)):0!=(b&l.UC)?(0!=(b&l.mu)?(c.x+=f*(this.G-c.y)/h,c.y=this.G):(c.x+=f*(this.H-c.y)/h,c.y=this.H),b=this.ak(c)):0!=(d&l.UC)?(0!=(d&l.mu)?(a.x+=f*(this.G-a.y)/h,a.y=this.G):(a.x+=f*(this.H-a.y)/h,a.y=this.H),d=this.ak(a)):0!=b?(0!=(b&l.lu)?(c.y+=h*(this.v-
c.x)/f,c.x=this.v):(c.y+=h*(this.C-c.x)/f,c.x=this.C),b=this.ak(c)):(0!=(d&l.lu)?(a.y+=h*(this.v-a.x)/f,a.x=this.v):(a.y+=h*(this.C-a.x)/f,a.x=this.C),d=this.ak(a));if(0!=(b&d))return 0}while(0!=(b|d));return e};l.prototype.ak=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3};l.prototype.Di=function(c){return!this.B()&&(this.S()<=c||this.da()<=c)};l.prototype.ub=function(c){return c instanceof g.h?Math.sqrt(this.dK(c)):Math.sqrt(this.px(c))};l.prototype.px=
function(c){var a=0,b=0,d=this.v-c.C;d>a&&(a=d);d=this.G-c.H;d>b&&(b=d);d=c.v-this.C;d>a&&(a=d);d=c.G-this.H;d>b&&(b=d);return a*a+b*b};l.prototype.dK=function(c){var a=0,b=0,d=this.v-c.x;d>a&&(a=d);d=this.G-c.y;d>b&&(b=d);d=c.x-this.C;d>a&&(a=d);d=c.y-this.H;d>b&&(b=d);return a*a+b*b};l.prototype.en=function(c){this.B()?c.Pa():c.L(this.v,this.C)};l.lu=1;l.mu=4;l.TC=3;l.UC=12;return l}();g.l=z})(R||(R={}));(function(g){var z;(function(c){c[c.initialize=0]="initialize";c[c.initializeRed=1]="initializeRed";
c[c.initializeBlue=2]="initializeBlue";c[c.initializeRedBlue=3]="initializeRedBlue";c[c.sweep=4]="sweep";c[c.sweepBruteForce=5]="sweepBruteForce";c[c.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";c[c.sweepRedBlue=7]="sweepRedBlue";c[c.sweepRed=8]="sweepRed";c[c.sweepBlue=9]="sweepBlue";c[c.iterate=10]="iterate";c[c.iterateRed=11]="iterateRed";c[c.iterateBlue=12]="iterateBlue";c[c.iterateBruteForce=13]="iterateBruteForce";c[c.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";c[c.resetRed=
15]="resetRed";c[c.resetBlue=16]="resetBlue"})(z||(z={}));var l=function(){function c(a,b){this.ei=a;this.ZG=b}c.prototype.qr=function(a,b,d){this.ei.FX(d,a,b,this.ZG)};c.prototype.bq=function(a){return this.ei.Tr(a,this.ZG)};return c}();z=function(){function c(){this.qw=this.qo=this.ff=this.sd=null;this.yq=new g.l;this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null;this.Yb=-1;this.ra=0;this.Pk()}c.prototype.mr=function(){this.Pk();this.Rv=!0;null==this.Fb?(this.io=
new g.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)};c.prototype.bd=function(a,b){if(!this.Rv)throw g.i.Hb();var d=new g.l;d.L(b);this.io.add(a);this.Fb.push(d)};c.prototype.Hp=function(){if(!this.Rv)throw g.i.Hb();this.Rv=!1;null!=this.Fb&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)};c.prototype.kK=function(){this.Pk();this.Qv=!0;null==this.Fb?(this.io=new g.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)};c.prototype.DD=function(a,b){if(!this.Qv)throw g.i.Hb();var d=new g.l;d.L(b);this.io.add(a);
this.Fb.push(d)};c.prototype.dF=function(){if(!this.Qv)throw g.i.Hb();this.Qv=!1;null!=this.Fb&&0<this.Fb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Yb?this.Yb=3:2==this.Yb?this.Yb=3:3!=this.Yb&&(this.Yb=1),this.Jc=!1)};c.prototype.jK=function(){this.Pk();this.Pv=!0;null==this.rd?(this.ew=new g.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)};c.prototype.zD=function(a,b){if(!this.Pv)throw g.i.Hb();var d=new g.l;d.L(b);this.ew.add(a);this.rd.push(d)};c.prototype.cF=function(){if(!this.Pv)throw g.i.Hb();
this.Pv=!1;null!=this.Fb&&0<this.Fb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Yb?this.Yb=3:1==this.Yb?this.Yb=3:3!=this.Yb&&(this.Yb=2),this.Jc=!1)};c.prototype.next=function(){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Yb){case 0:a=this.Bz();break;case 1:a=this.mS();break;case 2:a=this.jS();break;case 3:a=this.lS();break;case 4:a=this.QX();break;case 5:a=this.MX();break;case 6:a=this.NX();break;case 7:a=this.OX();break;case 8:a=this.tx();break;case 9:a=this.dC();break;case 10:a=this.Pz();
break;case 11:a=this.eT();break;case 12:a=this.bT();break;case 13:a=this.cT();break;case 14:a=this.dT();break;case 15:a=this.fJ();break;case 16:a=this.eJ();break;default:throw g.i.Ra();}return this.Jc?!1:!0};c.prototype.WB=function(a){this.ra=a};c.prototype.oz=function(a){return this.Fb[a]};c.prototype.Wy=function(a){return this.rd[a]};c.prototype.pl=function(a){return this.io.read(a)};c.prototype.jl=function(a){return this.ew.read(a)};c.Oz=function(a){return 1==(a&1)};c.gq=function(a){return 0==
(a&1)};c.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1;this.Df=this.Ef=this.Tg=this.qe=-1;this.Jc=!0};c.prototype.Bz=function(){this.Bf=this.Xf=-1;if(10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;null==this.sd&&(this.sd=new g.ur(!0),this.qo=this.sd.getIterator(),this.Md=new g.ja(0));this.sd.mr();for(var a=0;a<this.Fb.length;a++){var b=this.Fb[a];this.sd.Dr(b.v,b.C)}this.sd.Hp();this.Md.Jb(2*this.Fb.length);this.Md.resize(0);for(a=0;a<2*this.Fb.length;a++)this.Md.add(a);this.Mt(this.Md,
2*this.Fb.length,!0);this.qe=2*this.Fb.length;this.Yb=4;return!0};c.prototype.mS=function(){this.Bf=this.Xf=-1;if(10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;null==this.sd&&(this.sd=new g.ur(!0),this.qo=this.sd.getIterator(),this.Md=new g.ja(0));this.sd.mr();for(var a=0;a<this.Fb.length;a++){var b=this.Fb[a];this.sd.Dr(b.v,b.C)}this.sd.Hp();this.Md.Jb(2*this.Fb.length);this.Md.resize(0);for(a=0;a<2*this.Fb.length;a++)this.Md.add(a);this.Mt(this.Md,this.Md.size,
!0);this.qe=this.Md.size;-1!=this.Ef&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1);this.Yb=7;return this.eJ()};c.prototype.jS=function(){this.Bf=this.Xf=-1;if(10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;null==this.ff&&(this.ff=new g.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new g.ja(0));this.ff.mr();for(var a=0;a<this.rd.length;a++){var b=this.rd[a];this.ff.Dr(b.v,b.C)}this.ff.Hp();this.Ff.Jb(2*this.rd.length);this.Ff.resize(0);for(a=0;a<2*this.rd.length;a++)this.Ff.add(a);
this.Mt(this.Ff,this.Ff.size,!1);this.Tg=this.Ff.size;-1!=this.Df&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1);this.Yb=7;return this.fJ()};c.prototype.lS=function(){this.Bf=this.Xf=-1;if(10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;null==this.sd&&(this.sd=new g.ur(!0),this.qo=this.sd.getIterator(),this.Md=new g.ja(0));null==this.ff&&(this.ff=new g.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new g.ja(0));this.sd.mr();for(var a=0;a<this.Fb.length;a++){var b=
this.Fb[a];this.sd.Dr(b.v,b.C)}this.sd.Hp();this.ff.mr();for(a=0;a<this.rd.length;a++)b=this.rd[a],this.ff.Dr(b.v,b.C);this.ff.Hp();this.Md.Jb(2*this.Fb.length);this.Ff.Jb(2*this.rd.length);this.Md.resize(0);this.Ff.resize(0);for(a=0;a<2*this.Fb.length;a++)this.Md.add(a);for(a=0;a<2*this.rd.length;a++)this.Ff.add(a);this.Mt(this.Md,this.Md.size,!0);this.Mt(this.Ff,this.Ff.size,!1);this.qe=this.Md.size;this.Tg=this.Ff.size;-1!=this.Ef&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1);-1!=this.Df&&
(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1);this.Yb=7;return!0};c.prototype.QX=function(){var a=this.Md.get(--this.qe),b=a>>1;if(c.gq(a))return this.sd.remove(b),0==this.qe?(this.Bf=this.Xf=-1,this.Jc=!0,!1):!0;this.qo.zB(this.Fb[b].v,this.Fb[b].C,this.ra);this.Xf=b;this.Yb=10;return!0};c.prototype.MX=function(){if(-1==--this.qe)return this.Bf=this.Xf=-1,this.Jc=!0,!1;this.Tg=this.Xf=this.qe;this.Yb=13;return!0};c.prototype.NX=function(){if(-1==--this.qe)return this.Bf=this.Xf=-1,this.Jc=!0,
!1;this.Xf=this.qe;this.Tg=this.rd.length;this.Yb=14;return!0};c.prototype.OX=function(){var a=this.Md.get(this.qe-1),b=this.Ff.get(this.Tg-1),d=this.Tr(a,!0),e=this.Tr(b,!1);return d>e?this.tx():d<e?this.dC():c.Oz(a)?this.tx():c.Oz(b)?this.dC():this.tx()};c.prototype.tx=function(){var a=this.Md.get(--this.qe),b=a>>1;if(c.gq(a))return-1!=this.Ef&&-1!=this.Kj.get(b)?(this.Bd.kd(this.Ef,this.Kj.get(b)),this.Kj.set(b,-1)):this.sd.remove(b),0==this.qe?(this.Bf=this.Xf=-1,this.Jc=!0,!1):!0;if(-1!=this.Df&&
0<this.Bd.ds(this.Df))for(a=this.Bd.sc(this.Df);-1!=a;){var d=this.Bd.getData(a);this.ff.xj(d);this.Jj.set(d,-1);d=this.Bd.lb(a);this.Bd.kd(this.Df,a);a=d}0<this.ff.size()?(this.qw.zB(this.Fb[b].v,this.Fb[b].C,this.ra),this.Xf=b,this.Yb=12):(-1==this.Ef&&(null==this.Bd&&(this.Bd=new g.lp),this.Kj=new g.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(b,this.Bd.addElement(this.Ef,b)),this.Yb=7);return!0};c.prototype.dC=function(){var a=this.Ff.get(--this.Tg),
b=a>>1;if(c.gq(a))return-1!=this.Df&&-1!=this.Jj.get(b)?(this.Bd.kd(this.Df,this.Jj.get(b)),this.Jj.set(b,-1)):this.ff.remove(b),0==this.Tg?(this.Bf=this.Xf=-1,this.Jc=!0,!1):!0;if(-1!=this.Ef&&0<this.Bd.ds(this.Ef))for(a=this.Bd.sc(this.Ef);-1!=a;){var d=this.Bd.getData(a);this.sd.xj(d);this.Kj.set(d,-1);d=this.Bd.lb(a);this.Bd.kd(this.Ef,a);a=d}0<this.sd.size()?(this.qo.zB(this.rd[b].v,this.rd[b].C,this.ra),this.Bf=b,this.Yb=11):(-1==this.Df&&(null==this.Bd&&(this.Bd=new g.lp),this.Jj=new g.ja(0),
this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(b,this.Bd.addElement(this.Df,b)),this.Yb=7);return!0};c.prototype.Pz=function(){this.Bf=this.qo.next();if(-1!=this.Bf)return!1;var a=this.Md.get(this.qe)>>1;this.sd.xj(a);this.Yb=4;return!0};c.prototype.eT=function(){this.Xf=this.qo.next();if(-1!=this.Xf)return!1;this.Bf=this.Xf=-1;var a=this.Ff.get(this.Tg)>>1;this.ff.xj(a);this.Yb=7;return!0};c.prototype.bT=function(){this.Bf=this.qw.next();if(-1!=
this.Bf)return!1;var a=this.Md.get(this.qe)>>1;this.sd.xj(a);this.Yb=7;return!0};c.prototype.cT=function(){if(-1==--this.Tg)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var a=this.Fb[this.Tg];this.yq.X(this.ra,this.ra);return this.yq.isIntersecting(a)?(this.Bf=this.Tg,!1):!0};c.prototype.dT=function(){if(-1==--this.Tg)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var a=this.rd[this.Tg];this.yq.X(this.ra,this.ra);return this.yq.isIntersecting(a)?(this.Bf=this.Tg,!1):!0};c.prototype.fJ=function(){if(null==
this.sd)return this.Jc=!0,!1;this.qe=this.Md.size;0<this.sd.size()&&this.sd.reset();-1!=this.Ef&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1);this.Jc=!1;return!0};c.prototype.eJ=function(){if(null==this.ff)return this.Jc=!0,!1;this.Tg=this.Ff.size;0<this.ff.size()&&this.ff.reset();-1!=this.Df&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1);this.Jc=!1;return!0};c.prototype.Mt=function(a,b,d){null==this.Cm&&(this.Cm=new g.Zt);d=new l(this,d);this.Cm.sort(a,0,b,d)};c.prototype.FX=function(a,
b,d,e){var f=this;a.Wd(b,d,function(h,k){var m=f.Tr(h,e),n=f.Tr(k,e);return m<n||m==n&&c.gq(h)&&c.Oz(k)?-1:1})};c.prototype.Tr=function(a,b){var d=.5*this.ra;if(b)return b=this.Fb[a>>1],a=c.gq(a)?b.G-d:b.H+d;b=this.rd[a>>1];return a=c.gq(a)?b.G-d:b.H+d};return c}();g.sC=z})(R||(R={}));(function(g){var z=function(){function l(){}l.construct=function(c,a,b,d,e,f){var h=new l;h.v=c;h.G=a;h.Xe=b;h.C=d;h.H=e;h.Dg=f;return h};l.prototype.Pa=function(){this.Xe=this.v=NaN};l.prototype.B=function(){return isNaN(this.v)};
l.prototype.SS=function(){return isNaN(this.Xe)};l.prototype.L=function(c,a,b,d,e,f){void 0!==d?"number"===typeof c?(this.v=c,this.G=a,this.Xe=b,this.C=d,this.H=e,this.Dg=f):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*b,this.H=this.G+b,this.Xe=c.z-.5*d,this.Dg=this.Xe+d):(this.v=c,this.G=a,this.Xe=b,this.C=c,this.H=a,this.Dg=b)};l.prototype.move=function(c){this.v+=c.x;this.G+=c.y;this.Xe+=c.z;this.C+=c.x;this.H+=c.y;this.Dg+=c.z};l.prototype.copyTo=function(c){c.v=this.v;c.G=this.G;c.C=this.C;
c.H=this.H};l.prototype.Nk=function(c,a,b){this.v>c?this.v=c:this.C<c&&(this.C=c);this.G>a?this.G=a:this.H<a&&(this.H=a);0==isNaN(this.Xe)?this.Xe>b?this.Xe=b:this.Dg<b&&(this.Dg=b):this.Dg=this.Xe=b};l.prototype.$b=function(c,a,b){if("number"===typeof c)this.B()?(this.v=c,this.G=a,this.Xe=b,this.C=c,this.H=a,this.Dg=b):this.Nk(c,a,b);else if(c instanceof g.Od)this.$b(c.x,c.y,c.z);else if(c instanceof l)c.B()||(this.$b(c.v,c.G,c.Xe),this.$b(c.C,c.H,c.Dg));else throw g.i.O();};l.prototype.construct=
function(c,a,b){c.B()||a.B()?this.Pa():(this.v=c.pa,this.C=c.wa,this.G=a.pa,this.H=a.wa,this.Xe=b.pa,this.Dg=b.wa)};l.prototype.iB=function(c){if(null==c||8>c.length)throw g.i.O();c[0]=new g.Od(this.v,this.G,this.Xe);c[1]=new g.Od(this.v,this.H,this.Xe);c[2]=new g.Od(this.C,this.H,this.Xe);c[3]=new g.Od(this.C,this.G,this.Xe);c[4]=new g.Od(this.v,this.G,this.Dg);c[5]=new g.Od(this.v,this.H,this.Dg);c[6]=new g.Od(this.C,this.H,this.Dg);c[7]=new g.Od(this.C,this.G,this.Dg)};l.prototype.bx=function(c){if(null==
c||0==c.length)this.Pa();else{var a=c[0];this.L(a.x,a.y,a.z);for(a=1;a<c.length;a++){var b=c[a];this.Nk(b.x,b.y,b.z)}}};return l}();g.JK=z})(R||(R={}));(function(g){(function(z){z.Ra=function(){var l=Error();l.message="Internal Error";return l};z.Fe=function(){var l=Error();l.message="Not Implemented";return l};z.Zk=function(){var l=Error();l.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return l};z.Hb=function(){var l=Error();l.message=
"Invalid Call";return l};z.O=function(l){var c=Error();c.message="Illegal Argument Exception";void 0!==l&&(c.message+=": "+l);return c};z.hu=function(l){var c=Error();c.message=void 0!==l?"Runtime Exception: "+l:"Runtime Exception.";return c};z.ga=function(l){var c=Error();c.message="Geometry Exception: "+l;return c};z.BK=function(){var l=Error();l.message="Assert Failed Exception";return l};z.de=function(){var l=Error();l.message="IndexOutOfBoundsException";return l};z.RC=function(){var l=Error();
l.message="UserCancelException";return l}})(g.i||(g.i={}))})(R||(R={}));(function(g){g=g.dm||(g.dm={});g[g.forward=0]="forward";g[g.reverse=1]="reverse"})(R||(R={}));(function(g){var z=function(){function a(b,d){this.Xa=b;this.AH=d;this.GH=-1;this.ul=!1}a.prototype.re=function(){};a.prototype.next=function(){if(++this.GH==this.AH.I())return null;var b=this.AH.Oa(this.GH);b.scale(this.Xa.fc);var d=new g.Ea;this.Xa.ny(b,this.ul,d);return d};a.prototype.Ma=function(){return 0};return a}(),l=function(){function a(b,
d,e){this.Xa=b;this.tw=d;this.Zn=!1;this.fo=e;this.dw=[0];this.uk=[0];this.Pj=[0];this.Is=[0];this.ul=!1;this.sq=new g.Ea;this.wk=[]}a.prototype.re=function(){};a.prototype.next=function(){if(this.Zn){this.Zn=!1;this.td.ia();var b=g.ba.kg(this.sq);return b=g.Hg.Ok(b,this.Xa.Cq,!0,!0,this.Xa.Vb)}null==this.td&&(this.td=this.tw.Ha(),this.td.ab(),null!=this.fo&&this.fo.$k(null,0));if(!this.td.Ia()){if(!this.td.ab())return null;null!=this.fo&&this.fo.$k(null,0)}b=null;this.uk[0]=0;this.AA=this.dw[0]=
0;this.fi=NaN;this.Zn=!1;for(var d=this.wk.length=0,e=new g.h,f=new g.h,h=[0];this.td.Ia()&&8>this.AA;){var k=this.td.ia();e.N(k.bc());f.N(k.xc());e.scale(this.Xa.fc);f.scale(this.Xa.fc);g.ej.Ou(e,f)?e.x=f.x:g.ej.Mu(e,f)&&(f.x=e.x);this.wk.length=0;g.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,e,f,this.Xa.LA,this.Xa.at,h,this.Pj,this.Is,this.wk,this.dw);null!=this.fo&&(k=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,k,k.length-1));g.ej.Nu(e,f)?(this.sq.Pa(),this.Xa.ny(e,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),
this.Zn=this.sy(h[0],this.sq));if(this.Zn){this.td.ni();if(this.td.zz()){this.td.ni();this.td.ia();break}this.td.xW();break}null==b&&(b=new g.Ea,b.$k(null,0));this.JD(b);d++}this.dw[0]=0;if(0<d){for(h=this.td.xb();0<d;)this.td.ni(),e.N(this.tw.Oa(this.td.xb())),f.N(this.tw.Oa(this.td.kk())),e.scale(this.Xa.fc),f.scale(this.Xa.fc),this.ul&&(g.ej.Ou(e,f)?e.x=f.x:g.ej.Mu(e,f)&&(f.x=e.x)),this.wk.length=0,g.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,f,e,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,
this.dw),this.JD(b),d--;e.N(this.tw.Oa(this.td.xb()));e.scale(this.Xa.fc);c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,e,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,b,NaN,NaN);this.td.Wb(h);this.td.ia();d=g.ua.mj(null,b,!0);return b=g.Hg.Ok(b,d,!0,!0,this.Xa.Vb)}this.Zn=!1;this.td.ia();b=g.ba.kg(this.sq);return b=g.Hg.Ok(b,this.Xa.Cq,!0,!0,this.Xa.Vb)};a.prototype.JD=function(b){var d=this.wk[0],e=this.Pj[0]-1.570796326794897,f=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=
this.Pj[0]){var h=this.fi+1.570796326794897;e=h+3.141592653589793-(this.fi-this.Pj[0])}else h=this.fi+1.570796326794897,e=h+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var k=this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0]?!1:this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi?!1:!0,m=!1;if(Math.abs(e-h)<=.5*this.Xa.co)if(k){var n=b.Oa(b.I()-2);n.scale(this.Xa.fc);var p=new g.ha(0);g.kb.Sy(this.Xa.Ub,this.Xa.lc,d.x,d.y,n.x,n.y,p);for(n=p.u;n<=h;)n+=6.283185307179586;
for(;n>h;)n-=6.283185307179586;n<e&&(m=!0)}else m=!0;m?(b.yB(0,b.I()-1),this.ul||(d=new g.h,d.N(b.Oa(b.I()-1)),d.scale(this.Xa.fc),-3.141592653589793>d.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<d.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),k||(e=.5*(e+h))):(k?(h=new g.h,h.N(d),h.scale(1/this.Xa.fc),b.xf(0,-1,h)):c.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],h,e,this.Xa.co,this.ul,this.uk,b,NaN,NaN),this.AA+=1)}c.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,
this.wk,e,f,this.ul,this.uk,b);this.fi=this.Is[0]};a.prototype.sy=function(b,d){return this.Xa.sy(this.wk,b,this.Pj[0],this.Is[0],this.ul,d)};a.prototype.Ma=function(){return 0};return a}(),c=function(){function a(){}a.buffer=function(b,d,e,f,h,k){if(null==b)throw g.i.O("Geometry::Geodesic_bufferer::buffer");if(b.B())return new g.Ea(b.description);var m=new a;m.Sg=d;m.Kc=g.cb.tc(d);var n=g.cb.xv(m.Kc);m.Vb=k;m.Ub=g.cb.gv(m.Kc);m.lc=n*(2-n);m.fc=m.Kc.Id().ci;m.ra=m.Sg.Mn();m.Cq=m.Kc.Mn();m.at=m.Cq*
m.fc;m.Bq=1.570796326794897/m.fc;m.KY=3.141592653589793/m.fc;m.Ls=6.283185307179586/m.fc;m.LY=m.Ls/6;m.GA=0;m.JY=1.5707963267948966*m.Ub/m.GA;4==e?(m.Ae=2,m.Yv=!0):(m.Ae=e,m.Yv=!1);m.La=f;m.sb=Math.abs(f);isNaN(h)||.001>h?m.tX():m.bo=h;e=b.K();g.ba.zd(e)?(e=new g.Ua(b.description),e.pc(b,!0),b=e,e=1607):197==e&&(e=new g.l,b.A(e),e.S()<=m.ra||e.da()<=m.ra?(e=new g.Ua(b.description),e.bd(b,!1),b=e,e=1607):(e=new g.Ea(b.description),e.bd(b,!1),b=e,e=1736));m.uX();g.ba.Tn(e)||m.vX();if(m.sb<=.5*m.bo)return 1736!=
e?new g.Ea(b.description):m.Yv?b:g.ej.Sr(b,m.Sg,m.Ae,m.LA,-1,k);if(0>m.La&&1736!=e)return new g.Ea(b.description);m.Yv&&g.ba.Ic(e)?(d=g.ej.Sr(b,d,4,NaN,m.bo,k),b=g.cb.Bh(d,m.Sg,m.Kc)):b=g.cb.Bh(b,m.Sg,m.Kc);b=g.Jh.nj(b,m.Kc);if(b.B())return new g.Ea(b.description);!m.Yv&&g.ba.Ic(e)&&(b=g.ej.kI(m.fc,b));b=a.GX(b,m.Kc);switch(e){case 1736:d=m.PN(b);break;case 1607:d=m.QN(b);break;case 550:d=m.NN(b);break;case 33:d=m.ON(b);break;default:throw g.i.ga("corrupted_geometry");}m=g.cb.Bh(d,m.Kc,m.Sg);m.Ll(b.description);
return m};a.prototype.PN=function(b){var d=new g.Ea;b=new l(this,b,d);b=g.Ih.local().W(b,this.Kc,this.Vb).next();b=g.kp.pj(b,this.Kc,2);var e=new g.Ed;e.scale(1/this.fc,1/this.fc);d.Pc(e);d=g.kp.pj(d,this.Kc,2);return 0<=this.La?g.Ih.local().W(d,b,this.Kc,this.Vb):g.mp.local().W(d,b,this.Kc,this.Vb)};a.prototype.QN=function(b){b=new l(this,b,null);b=g.Ih.local().W(b,this.Kc,this.Vb).next();return b=g.kp.pj(b,this.Kc,2)};a.prototype.NN=function(b){b=new z(this,b);b=g.Ih.local().W(b,this.Kc,this.Vb).next();
return b=g.kp.pj(b,this.Kc,2)};a.prototype.ON=function(b){b=b.D();b.scale(this.fc);var d=new g.Ea;this.ny(b,!1,d);return d=g.kp.pj(d,this.Kc,2)};a.prototype.sy=function(b,d,e,f,h,k){var m=b[0],n=b[b.length-1],p=m.y>n.y?m.y:n.y,q=g.F.q(this.Ub,this.lc,m.y<n.y?m.y:n.y);p=g.F.q(this.Ub,this.lc,p);if(.001<this.GA-(q+d+this.sb)&&.001<this.GA+(p-d-this.sb))return!1;d=e-1.570796326794897;e=f+1.570796326794897;q=d-3.141592653589793;p=d+3.141592653589793;var t=e+3.141592653589793,v=[NaN],F=[NaN],W=[NaN],ba=
[NaN];f=!1;a.ZI(this.Ub,this.lc,this.sb,m,d,q,n,e,v,F);a.ZI(this.Ub,this.lc,this.sb,n,t,e,m,q,W,ba);e<v[0]&&v[0]<t?f=!0:e<F[0]&&F[0]<t&&(f=!0);f||(q<W[0]&&W[0]<d?f=!0:q<ba[0]&&ba[0]<d&&(f=!0));if(!f&&h)return!1;for(var aa=[],fa=b.length-1;0<=fa;fa--)aa.push(b[fa]);k.Pa();k.$k(null,0);fa=[0];a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,b,d,e,h,fa,k);a.Jr(this.Ub,this.lc,this.fc,this.sb,n,e,t,this.co,h,fa,k,v[0],F[0]);a.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,aa,t,p,h,fa,k);a.Jr(this.Ub,this.lc,
this.fc,this.sb,m,q,d,this.co,h,fa,k,W[0],ba[0]);b=!1;h||(b=this.DE(this.fc,k));return f||b};a.prototype.ny=function(b,d,e){e.Pa();e.$k(null,0);a.Jr(this.Ub,this.lc,this.fc,this.sb,b,-this.co,6.283185307179586,this.co,d,[0],e,NaN,NaN);d||this.DE(this.fc,e)};a.prototype.DE=function(b,d){var e=this.qO(b,d);b=this.rO(b,d);return e||b};a.prototype.qO=function(b,d){var e=d.I(),f=!1,h=new g.l;d.A(h);if(!g.s.$(h.H*b,1.570796326794897)&&!g.s.$(h.G*b,-1.570796326794897))return!1;var k=new g.h;for(--e;0<=e;e--)d.D(e,
k),k.y==h.H&&g.s.$(k.y*b,1.570796326794897)?(f=!0,this.JI(k,e,d)):k.y==h.G&&g.s.$(k.y*b,-1.570796326794897)&&(f=!0,this.JI(k,e,d));return f};a.prototype.rO=function(b,d){var e=d.Oa(0),f=d.Oa(d.I()-1);return 3.141592653589793<Math.abs(e.x-f.x)*b?(this.QV(d),!0):this.pO(d)};a.prototype.pO=function(b){return 0>b.He()?(this.PV(b),!0):!1};a.prototype.JI=function(b,d,e){var f=e.I(),h=0<d?d-1:f-1;f=e.Oa(d<f-1?d+1:0);h=e.Oa(h);if(!g.s.$(f.y,b.y)&&!g.s.$(f.x,b.x)){var k=new g.h;k.na(f.x,b.y);e.Db(d,k)}g.s.$(h.y,
b.y)||g.s.$(h.x,b.x)||(f=new g.h,f.na(h.x,b.y),e.xf(0,d,f))};a.prototype.QV=function(b){var d=new g.Ea,e=new g.Ea,f=new g.Ed,h=b.Oa(0),k=b.Oa(b.I()-1),m=new g.h;h.x>k.x?(k=this.Bq,f.ig(-this.Ls,0)):(k=-this.Bq,f.ig(this.Ls,0));d.add(b,!1);b.Pa();e.add(d,!1);e.Pc(f);h=new g.l;e.A(h);h.X((this.Ls-h.S())/2,0);h.G=-this.Bq;h.H=this.Bq;for(var n=0;n<e.I();n++)e.D(n,m),d.xf(0,-1,m);e.Pc(f);for(n=0;n<e.I();n++)e.D(n,m),d.xf(0,-1,m);e=d.Oa(0);f=d.Oa(d.I()-1);m.na(f.x,k);d.xf(0,-1,m);m.na(.5*(f.x+e.x),k);
d.xf(0,-1,m);m.na(e.x,k);d.xf(0,-1,m);d=g.Jh.ms(d,this.Kc,2,!0,h.v);d=g.Jh.ms(d,this.Kc,2,!0,h.C);d=g.Vd.clip(d,h,this.Cq,NaN);b.add(d,!1)};a.prototype.PV=function(b){var d=new g.l;b.A(d);d.X((this.Ls-d.S())/2,0);d.G=-this.Bq;d.H=this.Bq;b.$k(null,0);var e=new g.h;e.na(d.v,d.G);b.xf(1,-1,e);e.na(d.v,d.H);b.xf(1,-1,e);e.na(.5*(d.v+d.C),d.H);b.xf(1,-1,e);e.na(d.C,d.H);b.xf(1,-1,e);e.na(d.C,d.G);b.xf(1,-1,e);e.na(.5*(d.v+d.C),d.G);b.xf(1,-1,e)};a.my=function(b,d,e,f,h,k,m,n,p,q,t){var v=null;p||(v=new g.h,
v.Sc(),0<t.I()&&(v.N(t.Oa(t.I()-1)),v.scale(e)));var F=new g.ha(0),W=new g.ha(0),ba=new g.ha(0),aa=new g.h,fa=new g.h,ka=k[k.length-1];e=1/e;for(var la=0;la<k.length;la++){var ma=k[la];if(0==la)var sa=m;else la==k.length-1?sa=n:(g.kb.xd(b,d,ka.x,ka.y,ma.x,ma.y,null,null,F,h),sa=F.u-1.570796326794897);g.kb.Ai(b,d,ma.x,ma.y,f,sa,W,ba);p?fa.na(W.u,ba.u):(aa.na(W.u,ba.u),a.bJ(ma.x,aa.x,v.x,q),fa.na(q[0]+aa.x,aa.y),v.N(fa));fa.scale(e);t.xf(0,-1,fa)}};a.Jr=function(b,d,e,f,h,k,m,n,p,q,t,v,F){if(!(m-k<
n)){var W=new g.ha(0),ba=new g.ha(0),aa=new g.h,fa=new g.h,ka=null;p||(ka=new g.h,ka.Sc(),0<t.I()&&(ka.N(t.Oa(t.I()-1)),ka.scale(e)));var la=g.P.truncate(Math.ceil(k/n)),ma=la++*n;ma==k&&(ma=la++*n);for(e=1/e;ma<m+n;){k<v&&v<ma?(ma=v,la--):k<F&&F<ma&&(ma=F,la--);if(ma>=m)break;g.kb.Ai(b,d,h.x,h.y,f,ma,W,ba);p?fa.na(W.u,ba.u):(aa.na(W.u,ba.u),a.bJ(h.x,aa.x,ka.x,q),fa.na(q[0]+aa.x,aa.y),ka.N(fa));fa.scale(e);t.xf(0,-1,fa);k=ma;ma=la++*n}}};a.ZI=function(b,d,e,f,h,k,m,n,p,q){var t=new g.h,v=new g.h,
F=new g.ha(0),W=new g.ha(0);g.kb.Ai(b,d,f.x,f.y,e,h,F,W);t.na(F.u,W.u);g.kb.Ai(b,d,f.x,f.y,e,k,F,W);v.na(F.u,W.u);e=new g.ha(0);g.kb.Sy(b,d,m.x,m.y,t.x,t.y,e);p[0]=e.u;g.kb.Sy(b,d,m.x,m.y,v.x,v.y,e);for(q[0]=e.u;p[0]<=q[0];)p[0]+=6.283185307179586;for(;p[0]>q[0];)p[0]-=6.283185307179586;for(;p[0]>=n;)p[0]-=6.283185307179586,q[0]-=6.283185307179586;for(;p[0]<n;)p[0]+=6.283185307179586,q[0]+=6.283185307179586};a.bJ=function(b,d,e,f){if(isNaN(e)){for(;3.141592653589793<f[0]+d-b;)f[0]-=6.283185307179586;
for(;3.141592653589793<b-(f[0]+d);)f[0]+=6.283185307179586}else 3.141592653589793<f[0]+d-e?f[0]-=6.283185307179586:3.141592653589793<e-(f[0]+d)&&(f[0]+=6.283185307179586)};a.GX=function(b,d){var e=b.K(),f=g.ba.Ic(e)?b.ea():550==e?b.I():1;if(1==f)return b;var h=new g.ja(0);h.resize(f);for(var k=[],m=new g.l,n=0;n<f;n++){h.write(n,n);if(g.ba.Ic(e)){b.Tj(n,m);var p=m.tf()}else p=b.Oa(n);p=g.SK.WX(d,p);k[n]=p}h.Wd(0,h.size,function(q,t){return k[q]<k[t]?-1:k[q]>k[t]?1:0});d=b.Ja();for(n=0;n<f;n++)m=h.read(n),
g.ba.Ic(e)?d.addPath(b,m,!0):d.Gd(b,m,m+1);return d};a.prototype.uX=function(){var b=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);b=Math.min(b,.39269908169872414*this.Ub);var d=new g.h;d.na(0,10*this.fc);var e=45*this.fc,f=new g.ha(0),h=new g.ha(0),k=new g.ha(0),m=new g.ha(0),n=new g.ha(0),p=new g.ha(0),q=new g.ha(0),t=new g.ha(0),v=new g.h,F=new g.h,W=new g.h,ba=new g.h;g.kb.Ai(this.Ub,this.lc,d.x,d.y,b,0,f,h);v.na(f.u,h.u);g.kb.Ai(this.Ub,this.lc,d.x,d.y,b,e,k,m);F.na(k.u,m.u);f=new g.ha(0);
h=new g.ha(0);for(var aa=new g.ha(0);;){g.kb.Ai(this.Ub,this.lc,d.x,d.y,b,.5*(0+e),n,p);W.na(n.u,p.u);g.kb.xd(this.Ub,this.lc,v.x,v.y,F.x,F.y,f,h,null,2);g.kb.qj(this.Ub,this.lc,v.x,v.y,.5*f.u,h.u,q,t,2);ba.na(q.u,t.u);g.kb.xd(this.Ub,this.lc,W.x,W.y,ba.x,ba.y,aa,null,null,2);if(aa.u<=this.bo)break;e*=.9;g.kb.Ai(this.Ub,this.lc,d.x,d.y,b,e,k,m);F.na(k.u,m.u)}this.co=6.283185307179586/Math.ceil(6.283185307179586/(e-0))};a.prototype.vX=function(){var b=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);
b=Math.min(b,.39269908169872414*this.Ub);var d=new g.h,e=new g.h;d.na(0,10*this.fc);e.na(10*this.fc,10*this.fc);var f=new g.ha(0),h=new g.ha(0),k=new g.ha(0);g.kb.xd(this.Ub,this.lc,d.x,d.y,e.x,e.y,k,f,h,this.Ae);var m=new g.ha(0),n=new g.ha(0),p=new g.ha(0),q=new g.ha(0),t=new g.h,v=new g.ha(0),F=new g.ha(0),W=new g.ha(0),ba=new g.ha(0),aa=new g.ha(0),fa=new g.ha(0),ka=new g.ha(0),la=new g.ha(0),ma=new g.ha(0),sa=new g.h,wa=new g.h,Ga=new g.h,Fa=new g.h,Sa=1;f=f.u;h=h.u+1.570796326794897;k=k.u;g.kb.Ai(this.Ub,
this.lc,d.x,d.y,b,f-1.570796326794897,F,W);sa.na(F.u,W.u);g.kb.Ai(this.Ub,this.lc,e.x,e.y,b,h,ba,aa);wa.na(ba.u,aa.u);F=new g.ha(0);W=new g.ha(0);h=new g.ha(0);for(var Qa=new g.ha(0);;){g.kb.qj(this.Ub,this.lc,d.x,d.y,.5*(0+Sa)*k,f,m,n,this.Ae);t.na(m.u,n.u);g.kb.xd(this.Ub,this.lc,d.x,d.y,t.x,t.y,null,null,v,this.Ae);g.kb.Ai(this.Ub,this.lc,t.x,t.y,b,v.u+1.570796326794897,fa,ka);Ga.na(fa.u,ka.u);g.kb.xd(this.Ub,this.lc,sa.x,sa.y,wa.x,wa.y,F,W,null,2);g.kb.qj(this.Ub,this.lc,sa.x,sa.y,.5*F.u,W.u,
la,ma,2);Fa.na(la.u,ma.u);g.kb.xd(this.Ub,this.lc,Ga.x,Ga.y,Fa.x,Fa.y,h,null,null,2);if(h.u<=this.bo)break;Sa*=.9;g.kb.qj(this.Ub,this.lc,d.x,d.y,Sa*k,f,p,q,this.Ae);e.na(p.u,q.u);g.kb.xd(this.Ub,this.lc,d.x,d.y,e.x,e.y,null,null,Qa,this.Ae);g.kb.Ai(this.Ub,this.lc,e.x,e.y,b,Qa.u+1.570796326794897,ba,aa);wa.na(ba.u,aa.u)}b=Sa*k;1E5<b&&(b=1E5);this.LA=b};a.prototype.tX=function(){var b=5E4<this.sb?100:1E4<this.sb?10:1;500>this.sb/b&&(b=this.sb/500);.01>b&&(b=.01);this.bo=b};return a}();g.QK=c})(R||
(R={}));(function(g){var z=function(){function l(){}l.Of=function(c,a){var b=new g.h;b.N(a);c.push(b)};l.wp=function(c,a){c.add(a.x);c.add(a.y)};l.cB=function(c){c.Dh(c.size-2)};l.jB=function(c,a){a.na(c.get(c.size-2),c.get(c.size-1))};l.Sr=function(c,a,b,d,e,f){if(null==c)throw g.i.O();var h=c.K();if(c.B()||g.ba.Tn(h))return c;var k=new l;k.Sg=a;k.Kc=g.cb.tc(a);var m=g.cb.xv(k.Kc);k.Vb=f;k.Ub=g.cb.gv(k.Kc);k.lc=m*(2-m);k.fc=k.Kc.Id().ci;k.Cq=k.Kc.Mn();k.at=k.Cq*k.fc;k.vA=d;k.uA=e;k.Ae=b;197==h?(b=
new g.Ea(c.description),b.bd(c,!1)):g.ba.zd(h)?(b=new g.Ua(c.description),b.pc(c,!0)):b=c;if(4!=k.Ae){a=0==k.Sg.Nb(k.Kc)?g.cb.Bh(b,k.Sg,k.Kc):g.Jh.nj(b,k.Kc);if(a.B())return a;a=l.kI(k.fc,a);a=k.Uy(a);a=g.kp.pj(a,k.Kc,k.Ae);k=g.cb.Bh(a,k.Kc,k.Sg)}else{2==g.Gg.Tb(a)?(c=g.cb.ol(),a=g.Zj.local().W(b,c,a,f),a==c&&(a=new g.Ea,c.copyTo(a))):a=g.Jh.nj(b,k.Kc);if(a.B())return a;k=k.yX(a)}return k};l.kI=function(c,a){var b=new g.l;a.yc(b);if(3.141592653589793>b.S()*c)return a;var d=!1;b=a.Ha();for(var e=new g.h,
f=new g.h;b.ab();)for(;b.Ia();){var h=b.ia();e.N(h.bc());f.N(h.xc());e.scale(c);f.scale(c);if(3.141592653589793<Math.abs(e.x-f.x)){var k=l.Nu(e,f);if(!k){d=!0;break}if(6.283185307179586<Math.abs(e.x-f.x)){d=!0;break}}}if(!d)return a;d=a.Ja();var m=1<a.description.Ba,n=new g.h,p=new g.h,q=new g.h,t=new g.h,v=new g.Ta;for(b.aj();b.ab();)for(var F=NaN,W=[0];b.Ia();){h=b.ia();e.N(h.bc());f.N(h.xc());e.scale(c);f.scale(c);isNaN(F)?(l.Yi(e.x,NaN,W),p.N(e)):p.N(q);F=p.x;if(k=l.Nu(e,f)){if(6.283185307179586<
f.x-e.x)for(;6.283185307179586<f.x-e.x;)f.x-=6.283185307179586;if(-6.283185307179586>f.x-e.x)for(;-6.283185307179586>f.x-e.x;)f.x+=6.283185307179586;l.Yi(f.x,NaN,W);q.N(f)}else n.N(f),l.vU(n),l.Yi(n.x,F,W),q.na(W[0]+n.x,n.y);.5>Math.abs(q.x-f.x)&&q.N(f);m?(h.Vw(0,v),t.N(p),t.scale(1/c),v.Db(t),(k=b.xm())?d.nf(v):d.lineTo(v),b.Sn()&&!a.ec(b.gb)&&(h.Vw(1,v),t.N(q),t.scale(1/c),v.Db(t),d.lineTo(v))):((k=b.xm())&&d.Cz(null,0),h=d.ea()-1,t.N(p),t.scale(1/c),d.xf(h,-1,t),b.Sn()&&!a.ec(b.gb)&&(t.N(q),t.scale(1/
c),d.xf(h,-1,t)))}return d};l.oF=function(c,a,b,d,e,f,h,k,m,n,p,q){var t=new g.h,v=new g.h,F=0<d.compare(e);l.aJ(F,d,e,t,v);l.pF(c,a,b,t,v,f,NaN,h,k,m,n,null,p,q);F&&l.aC(m,n,null,p)};l.prototype.Uy=function(c){var a=c.Ja(),b=c.Ha(),d=[],e=null,f=null,h=1<c.description.Ba;h&&(e=new g.ce(0),f=new g.jg);for(var k=[0],m=new g.h,n=new g.h,p=new g.h,q=new g.h;b.ab();)for(k[0]=0;b.Ia();){var t=b.ia();m.N(t.bc());n.N(t.xc());m.scale(this.fc);n.scale(this.fc);var v=0<m.compare(n);l.aJ(v,m,n,p,q);d.length=
0;null!=e&&e.Dh(0);0<this.vA?l.pF(this.Ub,this.lc,this.Ae,p,q,this.vA,this.uA,this.at,null,null,null,h?e:null,d,k):l.WQ(this.Ub,this.lc,this.Ae,p,q,this.uA,this.at,h?e:null,d,k);v&&l.aC(null,null,h?e:null,d);d[0].N(t.bc());d[d.length-1].N(t.xc());for(var F=1;F<d.length-1;F++)d[F].scale(1/this.fc);h?(v=l.$I(v,t,f),l.OD(b.xm(),b.Sn()&&!c.ec(b.gb),t,v,e,d,a)):l.ND(b.xm(),b.Sn()&&!c.ec(b.gb),d,a)}return a};l.prototype.yX=function(c){var a=c.Ja(),b=c.Ha(),d=[],e=null,f=new g.jg,h=1<c.description.Ba;for(h&&
(e=new g.ce(0));b.ab();)for(;b.Ia();){var k=b.ia(),m=k.bc(),n=k.xc();m=0<m.compare(n);n=l.$I(m,k,f);d.length=0;null!=e&&e.Dh(0);l.xX(this.Ub,this.lc,this.fc,n,this.Sg,this.vA,this.uA,h?e:null,d);m&&l.aC(null,null,h?e:null,d);h?l.OD(b.xm(),b.Sn()&&!c.ec(b.gb),k,n,e,d,a):l.ND(b.xm(),b.Sn()&&!c.ec(b.gb),d,a)}return a};l.ND=function(c,a,b,d){c&&d.Cz(null,0);c=d.ea()-1;var e=b.slice(0);d.lG(c,e,e.length-1);a&&d.xf(c,-1,b[b.length-1])};l.OD=function(c,a,b,d,e,f,h){var k=new g.Ta;b.Vo(k);c?h.nf(k):h.lineTo(k);
if(2<f.length){c=d.Rb();for(var m=1;m<f.length-1;m++){var n=d.IG(e.get(m)*c);d.Vw(n,k);k.Db(f[m]);h.lineTo(k)}}a&&(b.Ro(k),h.lineTo(k))};l.pF=function(c,a,b,d,e,f,h,k,m,n,p,q,t,v){var F=new g.ha(0),W=new g.ha(0),ba=new g.ha(0);g.kb.xd(c,a,d.x,d.y,e.x,e.y,ba,F,W,b);ba=ba.u;var aa=F=F.u;W=W.u;0>aa&&(aa+=6.283185307179586);0>W&&(W+=6.283185307179586);null!=m&&(m[0]=ba);null!=n&&(n[0]=aa);null!=p&&(p[0]=W);n=m=NaN;null!=q&&(n=g.F.Ch(c,a),p=g.F.q(c,a,d.y),m=(n-p)/ba,n=(n+p)/ba);p=l.Ou(d,e);W=l.Mu(d,e);
aa=p||W;var fa=l.AE(d,e,k),ka=new g.ha(0),la=new g.ha(0),ma=new g.h,sa=new g.h,wa=new g.h;l.Yi(d.x,NaN,v);var Ga=[v[0]];if(ba<=f)l.Of(t,d),l.Yi(e.x,NaN,v),null!=q&&q.add(0),aa?(p&&l.fB(d,e,q,t),W&&l.dB(d,e,q,t)):fa?l.eB(d,e,F,m,n,q,t):0<h&&(sa.na(d.x-Ga[0],d.y),ma.na(e.x-v[0],e.y),l.Ty(c,a,b,d,ba,F,sa,ma,0,1,h,q,t,Ga)),l.Of(t,e);else{f=1+g.P.truncate(Math.ceil(ba/f));var Fa=ba/(f-1),Sa=new g.h,Qa=0;l.Of(t,d);Sa.N(d);sa.na(d.x-v[0],d.y);null!=q&&q.add(0);for(var Xa=1;Xa<f;Xa++){if(Xa<f-1){g.kb.qj(c,
a,d.x,d.y,Xa*Fa,F,ka,la,b);ma.na(ka.u,la.u);l.Yi(ma.x,Sa.x,v);wa.na(v[0]+ma.x,ma.y);var Ya=Xa/(f-1)}else l.Yi(e.x,NaN,v),ma.na(e.x-v[0],e.y),wa.N(e),Ya=1;aa?(1==Xa&&p&&l.fB(d,wa,q,t),Xa==f-1&&W&&l.dB(Sa,e,q,t)):fa?l.zE(Sa,wa,k)&&(d.x<e.x?Sa.x>wa.x&&(v[0]+=6.283185307179586,wa.na(v[0]+ma.x,ma.y)):Sa.x<wa.x&&(v[0]-=6.283185307179586,wa.na(v[0]+ma.x,ma.y)),l.eB(Sa,wa,F,m,n,q,t)):0<h&&l.Ty(c,a,b,d,ba,F,sa,ma,Qa,Ya,h,q,t,Ga);l.Of(t,wa);null!=q&&q.add(Ya);Sa.N(wa);sa.N(ma);Ga[0]=v[0];Qa=Ya}}};l.WQ=function(c,
a,b,d,e,f,h,k,m,n){var p=new g.ha(0),q=new g.ha(0),t=new g.ha(0);g.kb.xd(c,a,d.x,d.y,e.x,e.y,t,p,q,b);q=t.u;p=p.u;var v=t=NaN;if(null!=k){v=g.F.Ch(c,a);var F=g.F.q(c,a,d.y);t=(v-F)/q;v=(v+F)/q}F=l.Ou(d,e);var W=l.Mu(d,e),ba=F||W;h=l.AE(d,e,h);var aa=l.Nu(d,e);aa=ba||h||aa;l.Yi(d.x,NaN,n);var fa=new g.h;l.Of(m,d);fa.N(d);null!=k&&k.add(0);aa?(ba?(F&&l.fB(d,e,k,m),W&&l.dB(d,e,k,m)):h&&l.eB(d,e,p,t,v,k,m),l.Yi(e.x,NaN,n),l.Of(m,e)):q<=f?(l.Yi(e.x,NaN,n),l.Of(m,e)):(t=new g.h,h=new g.h,t.N(d),h.N(e),
t.x-=n[0],h.x-=n[0],-3.141592653589793>h.x?h.x+=6.283185307179586:3.141592653589793<h.x&&(h.x-=6.283185307179586),l.Ty(c,a,b,d,q,p,t,h,0,1,f,k,m,n),l.Of(m,e),l.Yi(e.x,NaN,n));null!=k&&k.add(1)};l.Ty=function(c,a,b,d,e,f,h,k,m,n,p,q,t,v){var F=new g.h,W=new g.h;F.na(h.x+v[0],h.y);new g.ha(0);new g.ha(0);new g.ha(0);new g.ha(0);var ba=new g.ha(0),aa=new g.ha(0),fa=new g.ha(0),ka=new g.h,la=new g.h,ma=new g.h,sa=new g.h;ka.N(h);la.N(k);h=new g.ce(0);k=new g.ce(0);l.wp(h,la);k.add(n);var wa=new g.h,Ga=
new g.zb,Fa=[];for(l.TJ(4,Fa);0<h.size;){for(var Sa=!1,Qa,Xa=NaN,Ya=0;3>Ya;Ya++)if(Qa=Fa[Ya]*n+(1-Fa[Ya])*m,g.kb.qj(c,a,d.x,d.y,Qa*e,f,ba,aa,b),ma.na(ba.u,aa.u),0==Ya&&(Xa=Qa,sa.N(ma)),l.RW(ka,ma,la,Ga),Ga.ic(Ga.ge(ma,!0),wa),g.kb.xd(c,a,ma.x,ma.y,wa.x,wa.y,fa,null,null,2),fa.u>p){Sa=!0;break}Sa?(la.N(sa),n=Xa,l.wp(h,la),k.add(n)):(l.cB(h),k.Gn(k.size-1,1,k.size-1),0<h.size&&(l.Yi(la.x,F.x,v),W.na(v[0]+la.x,la.y),l.Of(t,W),F.N(W),null!=q&&q.add(n),ka.N(la),m=n,l.jB(h,la),n=k.get(k.size-1)))}};l.xX=
function(c,a,b,d,e,f,h,k,m){var n=new g.h,p=new g.h,q=new g.h,t=new g.h,v=new g.h,F=new g.h,W=new g.h,ba=new g.h,aa=new g.h,fa=new g.h,ka=new g.ha(0),la=new g.ha(0),ma=new g.h,sa=[[],[]],wa=1==g.Gg.Tb(e);e=e.Yd(0);var Ga=d.bc(),Fa=d.xc();wa?(F.na(Ga.x*b,Ga.y*b),W.na(Fa.x*b,Fa.y*b)):(sa[0][0]=Ga.x,sa[0][1]=Ga.y,sa[1][0]=Fa.x,sa[1][1]=Fa.y,g.cb.wt(),F.x=sa[0][0]*b,F.y=sa[0][1]*b,W.x=sa[1][0]*b,W.y=sa[1][1]*b);var Sa=0,Qa=0,Xa=1,Ya=d.Rn();n.N(Ga);p.N(Fa);Fa=new g.ce(0);var bb=new g.ce(0),eb=new g.ce(0);
l.wp(Fa,p);l.wp(bb,W);eb.add(Xa);l.Of(m,n);null!=k&&k.add(Qa);var jb=[],hb=0<h?Ya?5:3:Ya?5:1;l.TJ(hb,jb);for(var ab=new g.ha(0),cb=new g.ha(0),$a=new g.ha(0),ib=new g.ha(0),gb=new g.ha(0),lb=new g.ha(0),db=new g.ha(0);0<bb.size;){var kb=!1,fb=NaN;g.kb.xd(c,a,F.x,F.y,W.x,W.y,ab,cb,null,2);for(Ga=0;Ga<hb;Ga++){if(0==Ga){if(!Ya&&0>=h&&ab.u<=f&&3.141592653589793>Math.abs(F.x-W.x))break;if(d.Tx(Qa,Xa)<=e)break}var mb=jb[Ga]*Xa+(1-jb[Ga])*Qa;d.ic(mb,q);wa?ba.na(q.x*b,q.y*b):(sa[0][0]=q.x,sa[0][1]=q.y,g.cb.wt(),
ba.x=sa[0][0]*b,ba.y=sa[0][1]*b);if(0==Ga&&(fb=mb,v.N(q),fa.N(ba),0<f&&(ab.u>f||3.141592653589793<=Math.abs(F.x-W.x)))){kb=!0;break}if(Ya&&0<f){if(g.kb.xd(c,a,F.x,F.y,ba.x,ba.y,$a,null,null,2),$a.u>f||3.141592653589793<=Math.abs(F.x-ba.x)){kb=!0;break}}else if(0<h)if(Ya?(t.IS(n,p,jb[Ga]),wa?aa.na(t.x*b,t.y*b):(sa[0][0]=t.x,sa[0][1]=t.y,g.cb.wt(),aa.x=sa[0][0]*b,aa.y=sa[0][1]*b)):(t.N(q),aa.N(ba)),g.kb.xd(c,a,F.x,F.y,aa.x,aa.y,ib,null,null,2),ib.u<=ab.u){g.kb.qj(c,a,F.x,F.y,ib.u,cb.u,ka,la,2);ma.na(ka.u,
la.u);g.kb.xd(c,a,ma.x,ma.y,ba.x,ba.y,gb,null,null,2);if(gb.u>h){kb=!0;break}if(Ya){g.kb.xd(c,a,ma.x,ma.y,aa.x,aa.y,lb,null,null,2);if(lb.u>h){kb=!0;break}g.kb.xd(c,a,aa.x,aa.y,ba.x,ba.y,db,null,null,2);if(db.u>h){kb=!0;break}}}else{kb=!0;break}}kb?(p.N(v),W.N(fa),Xa=fb,l.wp(Fa,p),l.wp(bb,W),eb.add(Xa)):(l.cB(Fa),l.cB(bb),eb.Gn(eb.size-1,1,eb.size-1),l.Of(m,p),Sa+=ab.u,null!=k&&k.add(Sa),0<bb.size&&(n.N(p),F.N(W),Qa=Xa,l.jB(Fa,p),l.jB(bb,W),Xa=eb.get(eb.size-1)))}if(null!=k)for(c=1/Sa,Ga=0;Ga<k.size;Ga++)k.write(Ga,
k.read(Ga)*c)};l.aC=function(c,a,b,d){d.reverse();null!=b&&b.pi(0,b.size,1);b=null!=c?c[0]:NaN;d=null!=a?a[0]:NaN;null!=c&&(c[0]=d);null!=a&&(a[0]=b)};l.aJ=function(c,a,b,d,e){c?(d.N(b),e.N(a)):(d.N(a),e.N(b))};l.$I=function(c,a,b){if(!c)return a;b.create(a.K());a.copyTo(b.get());b.get().reverse();return b.get()};l.Yi=function(c,a,b){if(isNaN(a)){for(;3.141592653589793<b[0]-c;)b[0]-=6.283185307179586;for(;3.141592653589793<c-b[0];)b[0]+=6.283185307179586}else 3.141592653589793<b[0]+c-a?b[0]-=6.283185307179586:
3.141592653589793<a-(b[0]+c)&&(b[0]+=6.283185307179586)};l.RW=function(c,a,b,d){3.141592653589793>Math.abs(a.x-c.x)?(d.Ec(c),3.141592653589793<=b.x-c.x?d.Sl(b.x-6.283185307179586,b.y):3.141592653589793<=c.x-b.x?d.Sl(b.x+6.283185307179586,b.y):d.Sl(b.x,b.y)):(d.Ec(b),3.141592653589793<=c.x-b.x?d.Sl(c.x-6.283185307179586,c.y):3.141592653589793<=b.x-c.x?d.Sl(c.x+6.283185307179586,c.y):d.Sl(c.x,c.y))};l.TJ=function(c,a){for(var b=0;b<c;b++){var d=Math.ceil(b/2)/(c+1);0!=b%2&&(d=-d);a[b]=.5+d}};l.Ou=function(c,
a){return g.s.$(c.y,1.570796326794897)&&!g.s.$(a.y,1.570796326794897)||g.s.$(c.y,-1.570796326794897)&&!g.s.$(a.y,-1.570796326794897)?!0:!1};l.Mu=function(c,a){return g.s.$(a.y,1.570796326794897)&&!g.s.$(c.y,1.570796326794897)||g.s.$(a.y,-1.570796326794897)&&!g.s.$(c.y,-1.570796326794897)?!0:!1};l.AE=function(c,a,b){return!l.zE(c,a,b)||g.s.$(c.y,1.570796326794897)||g.s.$(c.y,-1.570796326794897)||g.s.$(a.y,1.570796326794897)||g.s.$(a.y,-1.570796326794897)?!1:!0};l.zE=function(c,a,b){return Math.abs(Math.abs(c.x-
a.x)-3.141592653589793)<=b?!0:!1};l.Nu=function(c,a){return g.s.$(c.y,1.570796326794897)&&g.s.$(a.y,1.570796326794897)||g.s.$(c.y,-1.570796326794897)&&g.s.$(a.y,-1.570796326794897)?!0:!1};l.fB=function(c,a,b,d){if(0<c.y){var e=new g.h;e.na(a.x,1.570796326794897)}else e=new g.h,e.na(a.x,-1.570796326794897);g.s.$(c.x,e.x)||g.s.$(a.y,e.y)||(l.Of(d,e),null!=b&&b.add(0))};l.dB=function(c,a,b,d){if(0<a.y){var e=new g.h;e.na(c.x,1.570796326794897)}else e=new g.h,e.na(c.x,-1.570796326794897);g.s.$(a.x,e.x)||
g.s.$(c.y,e.y)||(l.Of(d,e),null!=b&&b.add(1))};l.eB=function(c,a,b,d,e,f,h){g.s.Dd(b)?(0<1.570796326794897-c.y&&(b=new g.h,b.na(c.x,1.570796326794897),l.Of(h,b),null!=f&&f.add(d)),0<1.570796326794897-a.y&&(b=new g.h,b.na(a.x,1.570796326794897),l.Of(h,b),null!=f&&f.add(d))):(0<1.570796326794897+c.y&&(b=new g.h,b.na(c.x,-1.570796326794897),l.Of(h,b),null!=f&&f.add(e)),0<1.570796326794897+a.y&&(b=new g.h,b.na(a.x,-1.570796326794897),l.Of(h,b),null!=f&&f.add(e)))};l.vU=function(c){if(-3.141592653589793>
c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586};return l}();g.ej=z})(R||(R={}));(function(g){g.kp=function(){function z(){}z.pj=function(l,c,a){if(null==l||null==c||!g.cb.Xc(c))throw g.i.O();if(l.B())return l;var b=l,d=b.K();if(g.ba.Ic(d)){b=g.Jh.nj(l,c);l=new g.l;b.A(l);d=g.ua.Xd(c,l,!1);for(var e=g.cb.ih(c),f=Math.floor((l.v-e.v)/e.S())*e.S()+e.v;f<l.C;)f>l.v+d&&f<l.C-d&&(b=g.Jh.ms(b,c,a,!0,f)),f+=e.S()}else{if(197==
d)return l=new g.Ea(b.description),l.bd(b,!1),z.pj(l,c,a);if(g.ba.zd(d))return l=new g.Ua(b.description),l.pc(b,!0),z.pj(l,c,a)}return z.Py(b,c)};z.Py=function(l,c){if(null==l||null==c||!g.cb.Xc(c))throw g.i.O();if(l.B())return l;var a=l.K();197==a?(a=new g.Ea(l.description),a.bd(l,!1)):g.ba.zd(a)?(a=new g.Ua(l.description),a.pc(l,!0)):a=l;a=g.Jh.nj(a,c);return a.B()?a:1==g.Gg.Tb(c)?g.Jh.Hn(a,c,0,a!=l,0):z.IQ(a,c,a!=l)};z.IQ=function(l,c,a){if(!g.cb.Xc(c))throw g.i.O();if(l.B())return l;var b=g.cb.bf(c),
d=-(180*b);b*=360;2==g.Gg.Tb(c)&&(d=g.cb.ih(c),b=d.C,d=d.v,b-=d);return g.Jh.Jp(l,d,b,c,a,0,!0)};return z}()})(R||(R={}));(function(g){g.xY=function(){function z(){}z.R=function(l){return 0>l?-l:l};z.Mb=function(l,c){return 0<=c?z.R(l):-z.R(l)};z.$=function(l,c){return l==c||z.R(l-c)<=z.EC*(1+(z.R(l)+z.R(c))/2)};z.Dd=function(l){return 0==l||z.R(l)<=z.EC};z.Ch=function(l,c){c=Math.sqrt(1-c);c=(1-c)/(1+c);var a=c*c;return l/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*z.zL};z.zL=1.5707963267948966;z.EC=3.552713678800501E-15;
return z}()})(R||(R={}));(function(g){var z=function(){return function(c){this.Yf=c;this.Mk=this.Yf.getCode();0>this.Mk&&(this.Mk=0)}}();g.zY=z;var l=function(){function c(a){void 0===a&&(a=null);this.Ej=null;this.Wn=!1;null!==a&&(this.Ej=new z(a))}c.prototype.Fc=function(){return null!=this.Ej?this.Ej.Mk:0};c.prototype.Qf=function(){var a=new c;this.copyTo(a);return a};c.prototype.copyTo=function(a){a.Ej=this.Ej;a.Wn=this.Wn};c.prototype.Lz=function(){this.Wn=!this.Wn};c.prototype.sm=function(){return null!=
this.Ej?this.Ej.Yf:null};c.prototype.GJ=function(a){if(0>=a)throw g.i.O();if(a!=this.Fc()){a=g.qf.geogtran(a);if(null==a)throw g.i.O("Geogtran not found.");this.Ej=new z(a)}};c.prototype.wz=function(){return null==this.Ej?null:this.Ej.Yf.toString()};c.prototype.pX=function(a){if(null==a)throw g.i.O();var b=null;try{b=g.qf.fromString(g.Tc.PE_TYPE_GEOGTRAN,a)}catch(d){throw g.i.O();}this.Ej=new z(b)};c.prototype.Nb=function(a){return a==this?!0:a instanceof c&&(!(0>=this.Fc()||this.Fc()!=a.Fc())||this.sm().isEqual(a.sm()))?
this.Wn==a.Wn:!1};c.prototype.toString=function(){var a="GeographicTransformation: "+this.wz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a};c.create=function(a,b){var d=new c;d.GJ(a);b&&d.Lz();return d};c.pP=function(a,b){var d=new c;d.pX(a);b&&d.Lz();return d};return c}();g.Cx=l})(R||(R={}));(function(g){var z=function(){function c(){}c.construct=function(a,b,d,e){var f=new c;f.jw=a;f.kw=b;f.MY=d;f.NY=e;return f};c.zy=function(a,b){return a.jw==b.jw?a.kw==
b.kw?0:a.kw<b.kw?-1:1:a.jw<b.jw?-1:1};return c}(),l=function(){function c(){this.tT=[];this.uT=[];this.sp()}c.fz=function(){null==c.eK&&(c.eK=new c);return c.eK};c.prototype.sp=function(){this.dD(this.tT);this.dD(this.uT)};c.prototype.dD=function(a){try{var b=[];b=b.sort(z.zy);for(var d=0;d<b.length;d++)a.push(b[d])}catch(e){}};return c}();g.yY=l})(R||(R={}));(function(g){var z=function(){function l(){}l.prototype.tD=function(c){this.Hk=c};l.prototype.RM=function(c){this.Gb=c};l.prototype.sD=function(c){this.Bo=
c};l.xE=function(c){return c.B()||1607!=c.K()&&1736!=c.K()?!1:!0};l.vE=function(c){return c.B()||1607!=c.K()&&1736!=c.K()||20>c.I()?!1:!0};l.wE=function(c){return c.B()||1607!=c.K()&&1736!=c.K()||20>c.I()?!1:!0};return l}();g.Wk=z})(R||(R={}));(function(g){g.ac=function(){function z(){}z.OT=function(l){var c=new g.Ea;c.rx(l.gs(),l.js());c.Aj(l.gs(),l.hs());c.Aj(l.fs(),l.hs());c.Aj(l.fs(),l.js());return c};z.Bh=function(l,c){return null===l?null:g.Gx.local().W(l,c,null)};z.fY=function(l,c){var a=g.Ih.local();
l=new g.$c(l);return a.W(l,c,null).next()};z.km=function(l,c,a){return g.mp.local().W(l,c,a,null)};z.gp=function(l,c,a){return g.Jx.local().W(l,c,a,null)};z.RX=function(l,c,a){var b=g.Jx.local();l=new g.$c(l);c=new g.$c(c);a=b.W(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};z.Nb=function(l,c,a){return g.fj.local().W(3,l,c,a,null)};z.OP=function(l,c,a){return g.fj.local().W(4,l,c,a,null)};z.MS=function(l,c,a){var b=g.Zj.local();l=new g.$c(l);c=new g.$c(c);a=b.W(l,c,a,null);for(b=[];null!=
(c=a.next());)b.push(c);return b};z.LP=function(l,c,a){var b=g.mp.local();l=new g.$c(l);c=new g.$c(c);a=b.W(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};z.Fa=function(l,c,a){return g.Zj.local().W(l,c,a,null)};z.LS=function(l,c,a){l=g.Zj.local().W(l,c,a,null,1);if(null===l)return[];if(550===l.K()){c=[];for(a=0;a<l.xa;a++)c.push(l.FR(a));return c}return 33===l.K()?[l]:[]};z.mY=function(l,c,a){return g.fj.local().W(2,l,c,a,null)};z.contains=function(l,c,a){return g.fj.local().W(1,l,c,
a,null)};z.wP=function(l,c,a){return g.fj.local().W(16,l,c,a,null)};z.touches=function(l,c,a){return g.fj.local().W(8,l,c,a,null)};z.yU=function(l,c,a){return g.fj.local().W(32,l,c,a,null)};z.OS=function(l,c,a){return g.fj.local().W(1073741824,l,c,a,null)};z.tB=function(l,c,a,b){return g.uL.local().W(l,c,a,b,null)};z.ub=function(l,c,a,b){var d=null;if(null!=a){if(d=a.Id(),null!=b&&d.Fc()!=b.Fc()&&d.pd!=b.pd)throw g.i.Zk();}else if(null!=b)throw g.i.O();l=g.lL.local().W(l,c,null);null!==d&&null!==
b&&(l=g.Uc.Ph(l,d,b));return l};z.clip=function(l,c,a){return g.fL.local().W(l,g.l.construct(c.gs(),c.js(),c.fs(),c.hs()),a,null)};z.fl=function(l,c,a){if(null==l||null==c)return null;l=g.hL.local().W(!0,l,c,a,null);for(c=[];null!=(a=l.next());)a.B()||c.push(a);return c.slice(0)};z.HN=function(l,c,a,b,d,e,f,h){if(!0===d)return z.IN(l,c,a,b,e,f,h);d=a;if(null!=c){if(f=c.Id(),null!=b&&f.Fc()!=b.Fc()){if(f.pd!=b.pd)throw g.i.Zk();d=[];g.Uc.SE(a,a.length,b,f,d)}}else if(null!=b)throw g.i.O();a=g.vC.local();
if(e){l=new g.$c(l);c=a.W(l,c,d,e,null);for(l=[];null!=(e=c.next());)l.push(e);e=l.slice(0)}else for(e=[],b=0;b<l.length;b++)e[b]=a.W(l[b],c,d[b],null);return e};z.IN=function(l,c,a,b,d,e,f){if(null===c)throw g.i.O();if(null===b||void 0===b)b=4326!==c.Fc()?c.Id():g.Uc.ah(9001);if(0!==b.pd)throw g.i.O();g.Uc.SE(a,a.length,b,g.Uc.ah(9001),a);b=g.AC.local();if(d){l=new g.$c(l);c=b.W(l,c,e,a,f,!1,d,null);for(a=[];null!=(e=c.next());)a.push(e);d=a.slice(0)}else{d=[];for(var h=0;h<l.length;h++)d[h]=b.W(l[h],
c,e,a[h],f,!1,null)}return d};z.buffer=function(l,c,a,b,d,e,f){var h=a;if(!1===d){if(null!=c){if(d=c.Id(),null!=b&&d.Fc()!=b.Fc()){if(d.pd!=b.pd)throw g.i.Zk();h=g.Uc.Ph(a,b,d)}}else if(null!=b)throw g.i.O();l=g.vC.local().W(l,c,h,null)}else{if(null===c)throw g.i.O();if(null===b||void 0===b)b=4326!==c.Fc()?c.Id():g.Uc.ah(9001);if(0!==b.pd)throw g.i.O();h=g.Uc.Ph(a,b,g.Uc.ah(9001));l=g.AC.local().W(l,c,e,h,f,!1,null)}return l};z.wU=function(l,c,a,b,d,e,f){if(null!=c){var h=c.Id();if(null!=f&&h.Fc()!=
f.Fc()){if(h.pd!=f.pd)throw g.i.Zk();a=g.Uc.Ph(a,f,h)}}else if(null!=f)throw g.i.O();l=new g.$c(l);c=g.DC.local().W(l,c,a,b,d,e,null);for(a=[];null!=(b=c.next());)a.push(b);return a.slice(0)};z.offset=function(l,c,a,b,d,e,f){if(null!=c){var h=c.Id();if(null!=f&&h.Fc()!=f.Fc()){if(h.pd!=f.pd)throw g.i.Zk();a=g.Uc.Ph(a,f,h)}}else if(null!=f)throw g.i.O();return g.DC.local().W(l,c,a,b,d,e,null)};z.dP=function(l){return g.xC.local().W(l,null)};z.eP=function(l,c){var a=g.xC.local();l=new g.$c(l);c=a.W(l,
c,null);for(a=[];null!=(l=c.next());)a.push(l);return a};z.iz=function(l,c,a){return g.Hx.local().iz(l,c,a)};z.jz=function(l,c){return g.Hx.local().jz(l,c)};z.kz=function(l,c,a,b){return g.Hx.local().kz(l,c,a,b)};z.$B=function(l,c){return g.$l.local().W(l,c,!1,null)};z.ZS=function(l,c){return g.$l.local().ts(l,c,null)};z.LQ=function(l,c,a,b,d){var e=g.zC.local();if(null!=c){if(c=c.Id(),null!=d&&c.Fc()!=d.Fc()){if(c.pd!=d.pd)throw g.i.Zk();a=g.Uc.Ph(a,d,c)}}else if(null!=d)throw g.i.O();return e.W(l,
a,b,null)};z.Sr=function(l,c,a,b){var d=g.Zl.local();if(null!=c){if(c=c.Id(),null!=b&&c.Fc()!=b.Fc()){if(c.pd!=b.pd)throw g.i.Zk();a=g.Uc.Ph(a,b,c)}}else if(null!=b)throw g.i.O();return d.W(l,a,null)};z.Ry=function(l,c,a,b,d){void 0===d&&(d=0);var e=g.nL.local();if(4==d)throw g.i.Fe();if(0!==d)throw g.i.Fe();if(null!==b){if(0!==b.pd)throw g.i.O("Unit must be a linear unit type");a=g.Uc.Ph(a,b,g.Uc.ah(9001))}return e.W(l,a,c,d,null)};z.RQ=function(l,c,a,b){if(null===l)return 0;if(4==b)throw g.i.Fe();
if(0!==b)throw g.i.Fe();if(197==l.K())l=z.OT(l);else if(1736!=l.K())return 0;b=g.cb.tc(c);l=g.cb.Bh(l,c,b);l=g.PK.SQ([l])[0];if(null!==a){if(2!==a.pd)throw g.i.O("Unit must be a area unit type");l=g.Uc.Ph(l,g.Uc.ah(109404),a)}return l};z.UQ=function(l,c,a,b){l=g.qL.local().W(l,c,b,null);if(null!==a){if(0!==a.pd)throw g.i.O("Unit must be a linear unit type");l=g.Uc.Ph(l,g.Uc.ah(9001),a)}return l};z.EU=function(l,c,a){if(null===l)return 0;var b=null;if(null!=c){b=c.Id();if(0==b.pd&&(b=g.Uc.WF(b),null==
b&&null!==a))throw g.i.O();if(null!=a&&b.Fc()!=a.Fc()&&b.pd!=a.pd)throw g.i.Zk();}else if(null!=a)throw g.i.O();return 1736==l.K()||197==l.K()?(l=l.He(),null!==a?g.Uc.Ph(l,b,a):l):0};z.FU=function(l,c,a){if(null===l||l.B()||1>l.Eb())return 0;var b=null;if(null!=c){if(b=c.Id(),null!=a&&b.Fc()!=a.Fc()&&b.pd!=a.pd)throw g.i.Zk();}else if(null!=a)throw g.i.O();1736==l.K()||197==l.K()?c=l.ng():g.ba.zd(l.K())?(c=new g.Ua(l.description),c.pc(l,!0)):c=l;l=0;c=c.Ha();for(var d=new g.h,e=new g.h;c.ab();)for(;c.Ia();){var f=
c.ia();f.$p(d);f.Vr(e);l+=g.h.ub(d,e)}null!==b&&null!==a&&(l=g.Uc.Ph(l,b,a));return l};z.aP=function(l){return void 0!==l.points?z.hS(l,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM):void 0!==l.rings?z.gG(l.rings,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"P"):void 0!==l.paths?z.gG(l.paths,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"L"):void 0!==l.x?z.iS(l):void 0!==l.xmin?z.gS(l):null};z.iS=function(l){if(null==l.x||"NaN"==l.x)return new g.Ta;var c=new g.Ta(l.x,l.y);void 0!==
l.z&&null!==l.z&&c.sX(l.z);void 0!==l.m&&null!==l.m&&c.cX(l.m);return c};z.gS=function(l){if(null==l.xmin||"NaN"==l.xmin)return new g.Hh;var c=new g.Hh(l.xmin,l.ymin,l.xmax,l.ymax);void 0!==l.zmin&&null!==l.zmin&&c.setInterval(1,0,l.zmin,l.zmax);void 0!==l.mmin&&null!==l.mmin&&c.setInterval(2,0,l.mmin,l.mmax);return c};z.hS=function(l,c,a){var b=0,d=new g.ee,e=3*l.points.length;0!=e%2&&e++;2>e&&(e=2);var f=g.P.truncate(3*l.points.length/2);4>f?f=4:16>f&&(f=16);e=g.Zc.Fn(e,0);var h=g.Zc.Fn(f);f=g.Zc.Fn(f);
for(var k=0;k<l.points.length;k++)e.write(2*k,l.points[k][0]),e.write(2*k+1,l.points[k][1]),h.write(k,c||a?l.points[k][2]:NaN),f.write(k,a&&c?l.points[k][3]:NaN),b++;0!=b&&(d.resize(b),d.kn(0,e));c&&(d.se(1),d.kn(1,h));a&&(d.se(2),d.kn(2,0==c?h:f));d.Qc(16777215);return d};z.gG=function(l,c,a,b){var d=0,e=2;if("P"==b){var f=new g.Ea;d=1;e=3}else f=new g.Ua;for(var h=g.Zc.Qh(0),k=g.Zc.Or(0),m=0,n=0,p=[],q=[],t=0;t<l.length;t++){var v=l[t].length;p[t]=!1;if("P"===b&&l[t][0][0]===l[t][l[t].length-1][0]&&
l[t][0][1]===l[t][l[t].length-1][1]){var F=0==a?!0:l[t][0][3]===l[t][l[t].length-1][3]||void 0===l[t][0][3]&&void 0===l[t][l[t].length-1][3];(0==c||l[t][0][2]===l[t][l[t].length-1][2]||void 0===l[t][0][2]&&void 0===l[t][l[t].length-1][2])&&F&&(p[t]=!0,--v)}v>=e?(q[t]=!1,n+=1,h.add(m),k.add(d),m+=v):q[t]=!0}b=3*m;0!=b%2&&b++;2>b&&(b=2);t=g.P.truncate(3*m/2);4>t?t=4:16>t&&(t=16);b=g.Zc.Fn(b,0);d=g.Zc.Fn(t);e=g.Zc.Fn(t);for(t=v=0;t<l.length;t++)if(!1===q[t])for(F=0;F<l[t].length;F++){var W=!1;F===l[t].length-
1&&!0===p[t]&&(W=!0);W||(b.write(2*v,l[t][F][0]),b.write(2*v+1,l[t][F][1]),d.write(v,c||a?l[t][F][2]:NaN),e.write(v,a&&c?l[t][F][3]:NaN),v++)}0!=m&&(l=f,h.resize(n),k.resize(n),0<m&&(h.add(m),k.add(0)),l.kn(0,b),l.KJ(k),l.LJ(h));c&&(f.se(1),f.kn(1,d));a&&(f.se(2),f.kn(2,0==c?d:e));f.Qc(16777215);return f};return z}()})(R||(R={}));(function(g){g.Dx=function(){function z(){}z.dr=function(l){var c=0,a,b=l.length,d=l[0];for(a=0;a<b-1;a++){var e=l[a+1];c+=(e[0]-d[0])*(e[1]+d[1]);d=e}return 0<=c};z.rotate=
function(l,c,a){c=c*Math.PI/180;var b=Math.cos(c),d=Math.sin(c);if(void 0!==l.paths){c={paths:[]};for(var e=0;e<l.paths.length;e++){for(var f=l.paths[e],h=[],k=0;k<f.length;k++){var m=f[k].slice(0);h.push(m);var n=b*(f[k][0]-a.x)-d*(f[k][1]-a.y)+a.x,p=d*(f[k][0]-a.x)+b*(f[k][1]-a.y)+a.y;m[0]=n;m[1]=p}c.paths.push(h);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM)}return c}if(void 0!==l.rings){c={rings:[]};for(e=0;e<l.rings.length;e++){f=l.rings[e];h=[];var q=z.dr(f);for(k=0;k<f.length;k++)m=
f[k].slice(0),h.push(m),n=b*(f[k][0]-a.x)-d*(f[k][1]-a.y)+a.x,p=d*(f[k][0]-a.x)+b*(f[k][1]-a.y)+a.y,m[0]=n,m[1]=p;z.dr(h)!==q&&h.reverse();c.rings.push(h);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM)}return c}if(void 0!==l.x)return c={x:b*(l.x-a.x)-d*(l.y-a.y)+a.x,y:d*(l.x-a.x)+b*(l.y-a.y)+a.y},void 0!==l.z&&(c.z=l.z),void 0!==l.m&&(c.m=l.m),void 0!==l.hasZ&&(c.hasZ=l.hasZ),void 0!==l.hasM&&(c.hasM=l.hasM),c;if(void 0!==l.points){c={points:[]};e=l.points;for(k=0;k<e.length;k++)f=
e[k].slice(0),f[0]=b*(e[k][0]-a.x)-d*(e[k][1]-a.y)+a.x,f[1]=d*(e[k][0]-a.x)+b*(e[k][1]-a.y)+a.y,c.points.push(f);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM);return c}return null};z.EQ=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],f=0;f<d.length;f++){var h=d[f].slice(0);e.push(h);var k=c.x-d[f][0];h[0]=d[f][0]+2*k}a.paths.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==
l.rings){a={rings:[]};for(b=0;b<l.rings.length;b++){d=l.rings[b];var m=z.dr(d);e=[];for(f=0;f<d.length;f++)h=d[f].slice(0),e.push(h),k=c.x-d[f][0],h[0]=d[f][0]+2*k;z.dr(e)!==m&&e.reverse();a.rings.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.x)return k=c.x-l.x,a={x:l.x+2*k,y:l.y},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a;if(void 0!==l.points){a={points:[]};b=l.points;for(f=
0;f<b.length;f++)d=b[f].slice(0),k=c.x-d[0],d[0]+=2*k,a.points.push(d);void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}return void 0!==l.xmin?(a={v:l.xmin,G:l.ymin,C:l.xmax,H:l.ymax},void 0!==l.zmin&&(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.x-l.xmin,a.xmax=l.xmin+2*k,k=c.x-l.xmax,a.xmin=l.xmax+2*k,void 0!==l.zmin&&(a.zmin=l.zmin),void 0!==l.zmax&&(a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin),void 0!==l.mmax&&(a.mmax=l.mmax),void 0!==
l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a):null};z.FQ=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],f=0;f<d.length;f++){var h=d[f].slice(0);e.push(h);var k=c.y-d[f][1];h[1]=d[f][1]+2*k}a.paths.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.rings){a={rings:[]};for(b=0;b<l.rings.length;b++){d=l.rings[b];var m=z.dr(d);e=[];for(f=0;f<d.length;f++)h=d[f].slice(0),e.push(h),k=
c.y-d[f][1],h[1]=d[f][1]+2*k;z.dr(e)!==m&&e.reverse();a.rings.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.x)return k=c.y-l.y,a={y:l.y+2*k,x:l.x},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a;if(void 0!==l.points){a={points:[]};b=l.points;for(f=0;f<b.length;f++)d=b[f].slice(0),k=c.y-d[1],d[1]+=2*k,a.points.push(d);void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);
return a}return void 0!==l.xmin?(a={v:l.xmin,G:l.ymin,C:l.xmax,H:l.ymax},void 0!==l.zmin&&(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.y-l.ymin,a.ymax=l.ymin+2*k,k=c.y-l.ymax,a.ymin=l.ymax+2*k,void 0!==l.zmin&&(a.zmin=l.zmin),void 0!==l.zmax&&(a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin),void 0!==l.mmax&&(a.mmax=l.mmax),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a):null};return z}()})(R||(R={}));(function(g){g.UK=function(){function z(){}
z.Kg=function(l,c){null==c&&(c=g.fe.pg());switch(l){case 33:return new g.Ta(c);case 322:return new g.zb(c);case 197:return new g.Hh(c);case 550:return new g.ee(c);case 1607:return new g.Ua(c);case 1736:return new g.Ea(c);default:throw g.i.ga("invalid argument.");}};return z}()})(R||(R={}));(function(g){var z=function(){function l(c,a){this.Qe=g.ja.rf(c,-1);this.va=new g.cu;this.yl=a}l.prototype.vW=function(c){this.va.Bt(Math.min(this.Qe.size,c));this.va.hn(c)};l.prototype.addElement=function(c,a){if(void 0===
a)return this.$M(c);a=g.P.truncate(a%this.Qe.size);var b=this.Qe.get(a);-1==b&&(b=this.va.Rh(),this.Qe.set(a,b));return this.va.addElement(b,c)};l.prototype.$M=function(c){var a=this.yl.ez(c);a=g.P.truncate(a%this.Qe.size);var b=this.Qe.get(a);-1==b&&(b=this.va.Rh(),this.Qe.set(a,b));return this.va.addElement(b,c)};l.prototype.kd=function(c,a){if(void 0===a)this.FP(c);else{a=g.P.truncate(a%this.Qe.size);var b=this.Qe.get(a);if(-1==b)throw g.i.O();for(var d=this.va.sc(b),e=-1;-1!=d;){var f=this.va.lb(d);
this.va.ka(d)==c?(this.va.kd(b,e,d),-1==this.va.sc(b)&&(this.va.eh(b),this.Qe.set(a,-1))):e=d;d=f}}};l.prototype.FP=function(c){var a=this.yl.ez(c);a=g.P.truncate(a%this.Qe.size);var b=this.Qe.get(a);if(-1==b)throw g.i.O();for(var d=this.va.sc(b),e=-1;-1!=d;){var f=this.va.lb(d);this.va.ka(d)==c?(this.va.kd(b,e,d),-1==this.va.sc(b)&&(this.va.eh(b),this.Qe.set(a,-1))):e=d;d=f}};l.prototype.lR=function(c){c=g.P.truncate(c%this.Qe.size);c=this.Qe.get(c);return-1==c?-1:this.va.sc(c)};l.prototype.zR=function(c){return this.va.lb(c)};
l.prototype.wd=function(c){var a=this.yl.ez(this.ka(c));a=g.P.truncate(a%this.Qe.size);var b=this.Qe.get(a);if(-1==b)throw g.i.O();for(var d=this.va.sc(b),e=-1;-1!=d;){if(d==c){this.va.kd(b,e,d);-1==this.va.sc(b)&&(this.va.eh(b),this.Qe.set(a,-1));return}e=d;d=this.va.lb(d)}throw g.i.O();};l.prototype.ka=function(c){return this.va.ka(c)};l.prototype.clear=function(){this.Qe=g.ja.rf(this.Qe.size,-1);this.va.clear()};l.prototype.size=function(){return this.va.OF()};return l}();g.ZK=z})(R||(R={}));(function(g){var z=
function(){function l(){this.Ni=new g.ad(3);this.va=new g.ad(6);this.mT=!1;this.ke=-1}l.prototype.hl=function(c){this.Ni.kd(c)};l.prototype.Rw=function(){return this.Ni.De()};l.prototype.dv=function(c){this.va.kd(c)};l.prototype.VA=function(){return this.va.De()};l.prototype.RB=function(c,a){this.Ni.T(c,1,a)};l.prototype.fx=function(c,a){this.Ni.T(c,2,a)};l.prototype.bX=function(c,a){this.Ni.T(c,3,a)};l.prototype.PB=function(c,a){this.va.T(c,4,a)};l.prototype.eX=function(c,a){this.va.T(c,3,a)};l.prototype.OJ=
function(c,a){this.va.T(c,2,a)};l.prototype.Rh=function(c){var a=this.VA();this.va.T(a,3,this.ke);this.va.T(a,4,0);this.va.T(a,5,c);-1!=this.ke&&this.OJ(this.ke,a);return this.ke=a};l.prototype.eh=function(c){this.GE(c);var a=this.va.U(c,2),b=this.va.U(c,3);-1!=a?this.eX(a,b):this.ke=b;-1!=b&&this.OJ(b,a);this.dv(c);return b};l.prototype.Bt=function(c){this.va.Ee(c)};l.prototype.KF=function(c){return this.va.U(c,5)};l.prototype.aX=function(c,a){this.va.T(c,5,a)};l.prototype.addElement=function(c,
a){return this.oS(c,a)};l.prototype.oS=function(c,a){var b=this.Rw();this.fx(b,-1);-1==this.va.U(c,0)&&this.va.T(c,0,b);var d=this.va.U(c,1);this.RB(b,d);-1!=d&&this.fx(d,b);this.va.T(c,1,b);this.setData(b,a);this.PB(c,this.ds(c)+1);this.mT&&this.bX(b,c);return b};l.prototype.kd=function(c,a){var b=this.xe(a),d=this.lb(a);-1!=b?this.fx(b,d):this.va.T(c,0,d);-1!=d?this.RB(d,b):this.va.T(c,1,b);this.hl(a);this.PB(c,this.ds(c)-1);return d};l.prototype.hn=function(c){this.Ni.Ee(c)};l.prototype.getData=
function(c){return this.Ni.U(c,0)};l.prototype.setData=function(c,a){this.Ni.T(c,0,a)};l.prototype.lb=function(c){return this.Ni.U(c,2)};l.prototype.xe=function(c){return this.Ni.U(c,1)};l.prototype.sc=function(c){return this.va.U(c,0)};l.prototype.Gc=function(c){return this.va.U(c,1)};l.prototype.clear=function(){for(var c=this.ke;-1!=c;)c=this.eh(c)};l.prototype.GE=function(c){for(var a=this.Gc(c);-1!=a;){var b=a;a=this.xe(b);this.hl(b)}this.va.T(c,0,-1);this.va.T(c,1,-1);this.PB(c,0)};l.prototype.B=
function(){return 0==this.Ni.size};l.prototype.OF=function(){return this.Ni.size};l.prototype.ds=function(c){return this.va.U(c,4)};l.prototype.lz=function(c){return this.va.U(c,3)};return l}();g.lp=z})(R||(R={}));(function(g){var z=function(){function l(c){void 0===c?(this.vg=new g.ad(2),this.va=new g.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new g.ad(2),this.va=new g.ad(c?4:2),this.ke=-1,this.Sv=c)}l.prototype.hl=function(c){this.vg.kd(c)};l.prototype.Rw=function(){return this.vg.De()};l.prototype.dv=
function(c){this.va.kd(c)};l.prototype.VA=function(){return this.va.De()};l.prototype.Rh=function(){var c=this.VA();this.Sv&&(this.va.T(c,3,this.ke),-1!=this.ke&&this.va.T(this.ke,2,c),this.ke=c);return c};l.prototype.eh=function(c){for(var a=this.sc(c);-1!=a;){var b=a;a=this.lb(a);this.hl(b)}this.Sv&&(a=this.va.U(c,2),b=this.va.U(c,3),-1!=a?this.va.T(a,3,b):this.ke=b,-1!=b&&this.va.T(b,2,a));this.dv(c)};l.prototype.Bt=function(c){this.va.Ee(c)};l.prototype.addElement=function(c,a){var b=this.va.U(c,
1),d=this.Rw();-1!=b?this.vg.T(b,1,d):this.va.T(c,0,d);this.va.T(c,1,d);this.vg.T(d,0,a);return d};l.prototype.hn=function(c){this.vg.Ee(c)};l.prototype.kd=function(c,a,b){-1!=a?(this.vg.T(a,1,this.vg.U(b,1)),this.va.U(c,1)==b&&this.va.T(c,1,a)):(this.va.T(c,0,this.vg.U(b,1)),this.va.U(c,1)==b&&this.va.T(c,1,-1));this.hl(b)};l.prototype.Cy=function(c,a){var b=this.va.U(c,1),d=this.va.U(a,0);-1!=d&&(-1!=b?this.vg.T(b,1,d):this.va.T(c,0,d),this.va.T(c,1,this.va.U(a,1)));this.Sv&&(c=this.va.U(a,2),b=
this.va.U(a,3),-1!=c?this.va.T(c,3,b):this.ke=b,-1!=b&&this.va.T(b,2,c));this.dv(a)};l.prototype.ka=function(c){return this.vg.U(c,0)};l.prototype.Uj=function(c,a){this.vg.T(c,0,a)};l.prototype.lb=function(c){return this.vg.U(c,1)};l.prototype.sc=function(c){return this.va.U(c,0)};l.prototype.Ln=function(c){return this.ka(this.sc(c))};l.prototype.clear=function(){this.vg.oj(!0);this.va.oj(!0);this.ke=-1};l.prototype.B=function(){return 0==this.vg.size};l.prototype.OF=function(){return this.vg.size};
l.prototype.lz=function(c){return this.va.U(c,3)};return l}();g.cu=z})(R||(R={}));(function(g){g.ua=function(){function z(){}z.Xd=function(l,c,a){c=c.zr();l=null!=l&&void 0!==l.Yd?l.Yd(0):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};z.Gr=function(l){return 2*Math.sqrt(2)*l};z.mN=function(l){return Math.sqrt(2)*l};z.mj=function(l,c,a){var b=new g.l;c.A(b);return z.Xd(l,b,a)};z.rE=function(l,c,a){c=c.Vg(1,0).zr();l=null!=l?l.Yd(1):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};z.ov=function(l,c){var a=new g.l;
l.yc(a);l=new g.l;c.yc(l);a.$b(l);return a};z.TN=function(l){var c=new g.l;l.yc(c);if(c.B())return null;var a=new g.fu(c,8),b=-1,d=new g.l,e=!1;do for(var f=0,h=l.ea();f<h;f++)if(l.Tj(f,d),b=a.Ez(f,d,b),-1==b){if(e)throw g.i.ga("internal error");l.Ap(c,!1);e=!0;a.reset(c,8);break}else e=!1;while(e);return a};z.iE=function(l){var c=new g.l;l.yc(c);for(var a=new g.fu(c,8),b=-1,d=l.Ha(),e=new g.l,f=!1;d.ab();)for(;d.Ia();){var h=d.ia(),k=d.xb();h.A(e);b=a.Ez(k,e,b);if(-1==b){if(f)throw g.i.Ra();l.Ap(c,
!1);f=!0;a.reset(c,8);d.aj();break}}return a};z.lj=function(l,c){var a=new g.l;l.yc(a);for(var b=new g.fu(a,8),d=-1,e=new g.l,f=l.Ha(),h=!1;f.ab();)for(;f.Ia();){var k=f.ia(),m=f.xb();k.A(e);if(e.isIntersecting(c)&&(d=b.Ez(m,e,d),-1==d)){if(h)throw g.i.ga("internal error.");l.Ap(a,!1);h=!0;b.reset(a,8);f.aj();break}}return b};z.jE=function(l,c){for(var a=new g.fu(c,8),b=new g.h,d=!1,e=new g.l,f=0;f<l.I();f++)if(l.D(f,b),c.contains(b)&&(e.L(b),-1==a.xj(f,e))){if(d)throw g.i.Ra();d=!0;f=new g.l;l.Ap(f,
!1);a.reset(f,8);f=-1}return a};z.gR=function(l,c,a){var b=new g.l,d=new g.l;l.yc(b);c.yc(d);b.X(a,a);d.X(a,a);var e=new g.l;e.L(b);e.Fa(d);l=l.Ha();c=c.Ha();var f=new g.sC;f.WB(a);var h=!1;for(f.kK();l.ab();)for(;l.Ia();)l.ia().A(b),b.isIntersecting(e)&&(h=!0,a=new g.l,a.L(b),f.DD(l.xb(),a));f.dF();if(!h)return null;b=!1;for(f.jK();c.ab();)for(;c.Ia();)c.ia().A(d),d.isIntersecting(e)&&(b=!0,a=new g.l,a.L(d),f.zD(c.xb(),a));f.cF();return b?f:null};z.hR=function(l,c,a,b,d){var e=l.K(),f=c.K(),h=new g.l,
k=new g.l;l.yc(h);c.yc(k);h.X(a,a);k.X(a,a);var m=new g.l;m.L(h);m.Fa(k);var n=new g.sC;n.WB(a);var p=!1;n.kK();var q=0;for(a=l.ea();q<a;q++)if(!b||1736!=e||l.Gv(q))l.Tj(q,h),h.isIntersecting(m)&&(p=!0,n.DD(q,h));n.dF();if(!p)return null;l=!1;n.jK();b=0;for(a=c.ea();b<a;b++)if(!d||1736!=f||c.Gv(b))c.Tj(b,k),k.isIntersecting(m)&&(l=!0,n.zD(b,k));n.cF();return l?n:null};z.Tu=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==l[b]?l[b]=g.h.cl(c[b]):l[b].N(c[b])};z.Ey=function(l,c,a,b){var d=0;for(b+=
0;d<b;a++,d++)null==l[d]&&(l[d]=[0,0]),l[d][0]=c[a].x,l[d][1]=c[a].y};z.Dy=function(l,c,a,b){var d=c,e=0;for(c=b+c;d<c;e++,d++)null==l[d]?l[d]=g.h.construct(a[e][0],a[e][1]):l[d].na(a[e][0],a[e][1])};z.fP=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==l[b]?l[b]=new g.Ta(c[b]):c[b].copyTo(l[b])};z.qE=function(l,c,a,b){var d=0;null!=l&&(d=l.Yd(0),b&&!a||null==l||(d+=1.01*l.pz(0)));a&&(c*=4,d*=1.01);return Math.max(d,c)};z.oy=function(l,c,a){return z.qE(l,c.zr(),a,!1)};z.bO=function(l,c){var a=new g.l;
c.A(a);return z.oy(l,a,!0)};z.py=function(l,c){return z.qE(l,c.zr(),!1,!0)};z.Ju=function(l,c){var a=new g.l;c.A(a);return z.py(l,a)};z.vG=function(l,c,a,b){b*=b;var d=new g.h;d.vc(l,c);l=new g.h;l.vc(a,c);c=d.Uk();a=l.Uk();if(c<=b&&a<=b)return!0;var e=g.mc.ox(d.yi(l));return e<=b*c||e<=b*a?0<=d.Sh(l):!1};z.ZJ=function(l,c,a,b){for(var d=0;d<c;d++){var e=l[d].y,f=g.P.Tk(e,a,b);f!=e&&(l[d].y=f)}};return z}()})(R||(R={}));(function(g){var z=function(){function d(e){this.Za=e}d.prototype.compare=function(e,
f,h){e=e.ka(h);h=this.Za.qk(f);var k=this.Za.qk(e);return h<k?-1:h==k?b.iq(f)&&b.Iv(e)?-1:b.iq(e)&&b.Iv(f)?1:0:1};return d}(),l=function(){function d(e){this.Za=e}d.prototype.qr=function(e,f,h){this.Za.CX(h,e,f)};d.prototype.bq=function(e){return this.Za.qk(e)};return d}(),c;(function(d){d[d.initialize=0]="initialize";d[d.pIn=1]="pIn";d[d.pL=2]="pL";d[d.pR=3]="pR";d[d.pT=4]="pT";d[d.right=5]="right";d[d.left=6]="left";d[d.all=7]="all"})(c||(c={}));var a=function(){function d(){this.Za=null;this.Si=
new g.Oc;this.ji=new g.ja(0);this.tg=[0,0]}d.prototype.Zi=function(e,f){this.Si.pa=e.pa-f;this.Si.wa=e.wa+f;this.ji.resize(0);this.ie=0;this.tg[0]=0};d.prototype.zB=function(e,f,h){if(e>f)throw g.i.O();this.Si.pa=e-h;this.Si.wa=f+h;this.ji.resize(0);this.ie=0;this.tg[0]=0};d.prototype.Wo=function(e,f){this.Si.pa=e-f;this.Si.wa=e+f;this.ji.resize(0);this.ie=0;this.tg[0]=0};d.prototype.next=function(){if(!this.Za.nq)throw g.i.Hb();if(0>this.ie)return-1;for(var e=!0;e;)switch(this.tg[this.ie]){case 1:e=
this.AU();break;case 2:e=this.BU();break;case 3:e=this.CU();break;case 4:e=this.DU();break;case 5:e=this.AW();break;case 6:e=this.fT();break;case 7:e=this.oN();break;case 0:e=this.Bz();break;default:throw g.i.Ra();}return-1!=this.Qg?this.Op()>>1:-1};d.construct=function(e){var f=new d;f.Za=e;f.ji.Jb(20);f.ie=-1;return f};d.prototype.Bz=function(){this.Qg=this.qH=this.Oi=this.Mc=-1;if(null!=this.Za.ne&&0<this.Za.ne.size)return this.tg[0]=1,this.Oi=this.Za.kf,!0;this.ie=-1;return!1};d.prototype.AU=
function(){this.Mc=this.Oi;if(-1==this.Mc)return this.Qg=this.ie=-1,!1;var e=this.Za.Pp(this.Mc);if(this.Si.wa<e)return e=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=6),!0;if(e<this.Si.pa)return e=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),-1!=e&&(this.gi=this.Za.bs(e),this.tg[++this.ie]=5),!0;this.tg[this.ie]=2;this.qH=this.Mc;e=this.Za.pk(this.Mc);this.Oi=this.Za.sj(this.Mc);-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=7);return!0};d.prototype.BU=
function(){this.Mc=this.Oi;if(-1==this.Mc)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var e=this.Za.pk(this.Mc);this.Oi=this.Za.nk(this.Mc);-1!=e&&(this.gi=this.Za.bs(e),this.tg[++this.ie]=5);return!0}e=this.Za.pk(this.Mc);this.Oi=this.Za.sj(this.Mc);-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=7);e=this.Za.nk(this.Mc);-1!=e&&this.ji.add(e);return!0};d.prototype.CU=function(){this.Mc=this.Oi;if(-1==this.Mc)return this.tg[this.ie]=4,!0;if(this.Si.wa<
this.Za.Pp(this.Mc)){var e=this.Za.pk(this.Mc);this.Oi=this.Za.sj(this.Mc);-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=6);return!0}e=this.Za.pk(this.Mc);this.Oi=this.Za.nk(this.Mc);-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=7);e=this.Za.sj(this.Mc);-1!=e&&this.ji.add(e);return!0};d.prototype.DU=function(){if(0==this.ji.size)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1);this.ji.resize(this.ji.size-1);var e=this.Za.pk(this.Mc);-1!=e&&(this.gi=this.Za.ml(e),this.tg[++this.ie]=
7);-1!=this.Za.sj(this.Mc)&&this.ji.add(this.Za.sj(this.Mc));-1!=this.Za.nk(this.Mc)&&this.ji.add(this.Za.nk(this.Mc));return!0};d.prototype.fT=function(){this.Qg=this.gi;if(-1!=this.Qg&&b.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa)return this.gi=this.NF(),!1;this.ie--;return!0};d.prototype.AW=function(){this.Qg=this.gi;if(-1!=this.Qg&&b.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa)return this.gi=this.LR(),!1;this.ie--;return!0};d.prototype.oN=function(){this.Qg=this.gi;if(-1!=this.Qg&&
b.iq(this.Op()))return this.gi=this.NF(),!1;this.ie--;return!0};d.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)};d.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)};d.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)};return d}();g.AY=a;var b=function(){function d(e){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null;this.Uf=e;this.nq=this.Uv=!1}d.prototype.mr=
function(){this.Pk(!0)};d.prototype.Dr=function(e,f){if(!this.Uv)throw g.i.Hb();this.Hj.push(new g.Oc(e,f))};d.prototype.Hp=function(){if(!this.Uv)throw g.i.ga("invalid call");this.Uv=!1;this.nq=!0;this.Uf||(this.qS(),this.aw=this.Hj.length)};d.prototype.xj=function(e){if(!this.Uf||!this.nq)throw g.i.O("invalid call");if(-1==this.kf){var f=this.Hj.length;if(this.dA){var h=new g.ja(0);h.Jb(2*f);this.XI(h);this.bi.Jb(2*f);this.bi.resize(0);this.WI(h);this.Mm.resize(f,-1);this.Mm.Yj(-1,0,f);this.dA=
!1}else this.Mm.Yj(-1,0,f);this.kf=this.Vu()}f=this.kG(e<<1,this.kf);h=this.bg.addElement((e<<1)+1,this.rz(f));this.QJ(f,h);this.Mm.set(e,f);this.aw++};d.prototype.remove=function(e){if(!this.Uf||!this.nq)throw g.i.ga("invalid call");var f=this.Mm.get(e);if(-1==f)throw g.i.O("the interval does not exist in the interval tree");this.Mm.set(e,-1);this.aw--;var h=this.rz(f),k=this.bg.UR(h);this.bg.wd(this.rR(f),h);this.bg.wd(this.OR(f),h);e=this.bg.size(h);0==e&&(this.bg.HP(h),this.UJ(k,-1));this.Gj.kd(f);
h=this.PF(k);var m=this.sj(k),n=this.nk(k);for(f=0;!(0<e||k==this.kf||-1!=m&&-1!=n);)k==this.sj(h)?-1!=m?(this.Qk(h,m),this.Wj(m,h),this.Qk(k,-1)):-1!=n?(this.Qk(h,n),this.Wj(n,h),this.Sk(k,-1)):this.Qk(h,-1):-1!=m?(this.Sk(h,m),this.Wj(m,h),this.Qk(k,-1)):-1!=n?(this.Sk(h,n),this.Wj(n,h),this.Sk(k,-1)):this.Sk(h,-1),this.Wj(k,-1),f++,k=h,h=this.pk(k),e=-1!=h?this.bg.size(h):0,m=this.sj(k),n=this.nk(k),h=this.PF(k)};d.prototype.reset=function(){if(!this.Uf||!this.nq)throw g.i.O("invalid call");this.Pk(!1)};
d.prototype.size=function(){return this.aw};d.prototype.getIterator=function(){return a.construct(this)};d.prototype.XI=function(e){for(var f=this.Hj.length,h=0;h<2*f;h++)e.add(h);this.DX(e,2*f)};d.prototype.WI=function(e){for(var f=NaN,h=0;h<e.size;h++){var k=e.get(h),m=this.qk(k);m!=f&&(this.bi.add(k),f=m)}};d.prototype.qS=function(){var e=this.Hj.length,f=new g.ja(0);f.Jb(2*e);this.XI(f);this.bi.Jb(2*e);this.bi.resize(0);this.WI(f);this.Gj.Ee(e);this.Vi.hn(2*e);var h=g.Zc.Qh(e);h.Yj(-1,0,e);this.kf=
this.Vu();for(e=0;e<f.size;e++){var k=f.get(e),m=h.get(k>>1);-1!=m?this.QJ(m,this.Vi.addElement(this.rz(m),k)):(m=this.kG(k,this.kf),h.set(k>>1,m))}};d.prototype.kG=function(e,f){var h=f,k=f,m=-1,n=0,p=this.bi.size-1,q=0,t=e>>1,v=NaN,F=NaN,W=!0,ba=this.yR(t);for(t=this.vR(t);W;){n<p?(q=n+g.P.truncate((p-n)/2),-1==this.bz(h)&&this.AJ(h,this.bi.get(q),this.bi.get(q+1))):-1==this.bz(h)&&this.AJ(h,this.bi.get(n),this.bi.get(n));var aa=this.Pp(h);if(t<aa)-1!=f&&(f==h?(k=h,v=aa,f=this.sj(h),F=-1!=f?this.Pp(f):
NaN):F>aa&&(aa<v?this.Qk(k,h):this.Sk(k,h),this.Sk(h,f),this.Uf&&(this.Wj(h,k),this.Wj(f,h)),k=h,v=aa,f=-1,F=NaN)),p=this.sR(h),-1==p&&(p=this.Vu(),this.ZW(h,p)),h=p,p=q;else if(ba>aa)-1!=f&&(f==h?(k=h,v=aa,f=this.nk(h),F=-1!=f?this.Pp(f):NaN):F<aa&&(aa<v?this.Qk(k,h):this.Sk(k,h),this.Qk(h,f),this.Uf&&(this.Wj(h,k),this.Wj(f,h)),k=h,v=aa,f=-1,F=NaN)),n=this.PR(h),-1==n&&(n=this.Vu(),this.jX(h,n)),h=n,n=q+1;else{W=this.pk(h);-1==W&&(W=this.uP(h),this.UJ(h,W));var fa=this.aN(W,e);m=this.sP();this.mX(m,
W);this.YW(m,fa);h!=f&&(aa<v?this.Qk(k,h):this.Sk(k,h),this.Uf&&this.Wj(h,k),-1!=f&&(F<aa?this.Qk(h,f):this.Sk(h,f),this.Uf&&this.Wj(f,h)));W=!1}}return m};d.prototype.Vu=function(){return this.ne.De()};d.prototype.uP=function(e){return this.Uf?this.bg.Rr(e):this.Vi.Rh(e)};d.prototype.sP=function(){return this.Gj.De()};d.prototype.Pk=function(e){e?(this.Uv=this.dA=!0,this.nq=!1,null==this.bi?this.bi=g.Zc.Qh(0):this.bi.resize(0),null==this.Hj?this.Hj=[]:this.Hj.length=0):this.dA=!1;this.Uf?null==this.Mm?
(this.Mm=g.Zc.Qh(0),this.bg=new g.$j,this.bg.Xo(new z(this))):this.bg.clear():null==this.Vi?this.Vi=new g.lp:this.Vi.clear();null==this.ne?(this.Gj=new g.ad(3),this.ne=new g.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1));this.kf=-1;this.aw=0};d.prototype.AJ=function(e,f,h){this.SW(e,f);this.TW(e,h)};d.prototype.Pp=function(e){var f=this.bz(e);if(-1==f)return NaN;f=this.qk(f);e=this.qk(this.bR(e));return f==e?f:.5*(f+e)};d.prototype.SW=function(e,f){this.ne.T(e,0,f)};d.prototype.TW=function(e,f){this.ne.T(e,
1,f)};d.prototype.ZW=function(e,f){this.ne.T(e,3,f)};d.prototype.jX=function(e,f){this.ne.T(e,4,f)};d.prototype.UJ=function(e,f){this.ne.T(e,2,f)};d.prototype.Qk=function(e,f){this.ne.T(e,5,f)};d.prototype.Sk=function(e,f){this.ne.T(e,6,f)};d.prototype.Wj=function(e,f){this.ne.T(e,7,f)};d.prototype.mX=function(e,f){this.Gj.T(e,0,f)};d.prototype.aN=function(e,f){return this.Uf?this.bg.addElement(f,e):this.Vi.addElement(e,f)};d.prototype.YW=function(e,f){this.Gj.T(e,1,f)};d.prototype.QJ=function(e,
f){this.Gj.T(e,2,f)};d.prototype.ml=function(e){return this.Uf?this.bg.sc(e):this.Vi.sc(e)};d.prototype.bs=function(e){return this.Uf?this.bg.Gc(e):this.Vi.Gc(e)};d.iq=function(e){return 0==(e&1)};d.Iv=function(e){return 1==(e&1)};d.prototype.bz=function(e){return this.ne.U(e,0)};d.prototype.bR=function(e){return this.ne.U(e,1)};d.prototype.pk=function(e){return this.ne.U(e,2)};d.prototype.sR=function(e){return this.ne.U(e,3)};d.prototype.PR=function(e){return this.ne.U(e,4)};d.prototype.sj=function(e){return this.ne.U(e,
5)};d.prototype.nk=function(e){return this.ne.U(e,6)};d.prototype.PF=function(e){return this.ne.U(e,7)};d.prototype.rz=function(e){return this.Gj.U(e,0)};d.prototype.rR=function(e){return this.Gj.U(e,1)};d.prototype.OR=function(e){return this.Gj.U(e,2)};d.prototype.yR=function(e){return this.Hj[e].pa};d.prototype.vR=function(e){return this.Hj[e].wa};d.prototype.DX=function(e,f){null==this.Cm&&(this.Cm=new g.Zt);var h=new l(this);this.Cm.sort(e,0,f,h)};d.prototype.CX=function(e,f,h){var k=this;e.Wd(f,
h,function(m,n){var p=k.qk(m),q=k.qk(n);return p<q||p==q&&d.iq(m)&&d.Iv(n)?-1:1})};d.prototype.qk=function(e){var f=this.Hj[e>>1];return d.iq(e)?f.pa:f.wa};return d}();g.ur=b})(R||(R={}));(function(g){var z=function(){function l(c){if(null==c)throw g.i.ga("Invalid arguement");this.hf=c;var a=c.iR();a.cS()?c.ef.DG()?this.no=g.ui.PannableFold:this.no=g.ui.Clip:this.no=g.ui.DontClip;a.dS()?c.$f.DG()?this.Sm=g.ui.PannableFold:this.Sm=g.ui.Clip:this.Sm=g.ui.DontClip;this.Dm=a.Lr;this.hH=a.Xu;c=this.hf.nH;
this.WG=c.ks(2147483648);this.Wv=c.ks(1073741824)}l.Bh=function(c,a,b){return a.yw.Bh(c,b)};l.Tt=function(c,a,b,d){return c.yw.Tt(a,b,d)};l.St=function(c,a,b,d){b=0>b?a.length:b;c=c.yw.Tt(a,b,d);if(c==b)return c;for(var e=a=0;e<b;e++){var f=d[e];f.isNaN()||(a<e&&d[a].N(f),a++)}for(;a<b;a++)d[a].Sc();return c};l.transform=function(c,a,b,d,e){if(c.isIdentity())return g.ua.fP(d,a,b),b;for(var f=[],h=0,k=0;k<b;){for(var m=Math.min(f.length,b-k),n=k,p=0;n<m;n++,p++)null==f[p]?f[p]=a[n].D():a[n].D(f[p]);
var q=e?l.St(c,f,m,f):l.Tt(c,f,m,f);for(p=n=0;n<q;n++,p++)null==d[k]&&(d[k]=new g.Ta(a[k])),d[k].Db(f[p]);k+=m;h+=q}return h};l.prototype.Tt=function(c,a,b){if(this.hf.isIdentity())return c!=b&&g.ua.Tu(b,c,a),a;var d=this.hf.ef,e=this.hf.$f,f=d.Tb(),h=e.Tb();if(0==f&&f===h){var k=d.Sp();e=e.Sp();e=k/e;k=new g.Ed;k.Jt(e,e);k.aY(c,a,b);return a}k=g.P.Hu(Math.min(a,64));if(3==f){var m=d.Li;d=m.hk();f=d.Tb();b!=c&&g.ua.Tu(b,c,a);g.Ab.bl(m,b,a,!0);m.St(g.dm.forward,b,a);g.Ab.al(m,b,a,!0)}if(3==f||3===
h)throw g.i.ga("image: transform_in_place_");if(2==f)this.no==g.ui.Clip?(b!=c&&g.ua.Tu(b,c,a),c=d.ol(),g.Ab.JS(c,d,b,a)):(b!=c&&g.ua.Tu(b,c,a),d.Xc()&&(f=d.Yd(0),m=d.Le(),g.Ab.AX(b,a,m,f),g.Ab.lF(b,a,d,0))),g.Ab.DL(d,b,a,k);else for(f=d.Yd(0),m=d.Le(),d=0;d<a;d++)g.Ab.BX(c[d],m,f,b[d]);g.Ab.BL(this.hf,b,a,k);c=0;(h=2==h)?c=e.Bi():isNaN(this.Dm)||(c=this.Dm);h&&this.Sm!=g.ui.Clip||g.Ab.lF(b,a,e.tc(),c);h&&(g.Ab.tG(b,a,e,this.Sm),g.Ab.CL(e,b,a,k));c=a;for(d=0;d<a;++d)b[d].isNaN()&&c--;return c};l.prototype.Bh=
function(c,a){if(this.hf.isIdentity()||c.B())return c;if(33==c.K())return this.SI(c);var b=this.hf.ef,d=this.hf.$f,e=b.Tb(),f=d.Tb();if(0==e&&e==f)return a=b.Sp(),d=d.Sp(),a/=d,d=new g.Ed,d.Jt(a,a),c=g.ba.kg(c),c.Pc(d),c;switch(c.K()){case 1607:case 1736:c=this.QI(c,a);break;case 550:c=this.aW(c,a);break;case 197:c=this.$V(c,a);break;default:throw g.i.ga("");}return c};l.prototype.SI=function(c){var a=c.D(),b=[];b[0]=a;this.Tt(b,1,b);c=new g.Ta(c);c.Db(b[0]);return c};l.prototype.QI=function(c,a){if(c.vm())throw g.i.ga("curves not supported");
var b=c.K();if(1736==b)return this.bW(c,a);if(1607==b)return this.cW(c,a);throw g.i.ga("projectMultiPath");};l.prototype.bW=function(c,a){var b=this.hf.ef,d=this.hf.$f,e=b.Tb(),f=d.Tb(),h=g.P.Hu(Math.min(c.I(),64)),k=g.Ea.kg(c);3==e&&(c=b.Li,b=c.hk(),e=b.Tb(),k=c.bl(k,!0),this.yp(c,g.dm.forward,k),k=c.al(k,!0));c=null;3==f&&(c=d.Li,d=c.hk(),f=d.Tb());var m=2==e,n=2==f,p=n?d.tc():d,q=!n&&!this.Wv;f=!1;var t=k;if(m){if(t=g.Ab.OI(t,b,this.no,a),t.B())return t}else{k=new g.l;t.yc(k);e=b.Le();if(k.G<e.G||
k.H>e.H){var v=g.l.construct(k.v-1,e.G,k.C+1,e.H);t=g.ti.Pu(t,v,b,NaN,0,a);if(t.B())return t}k.S()>2*e.S()&&(t=g.Ab.Jp(t,-2*e.S(),2*e.S(),b,!0,0,!0,a))}k=this.hH;(e=!isNaN(k))&&(t=g.Zl.local().W(t,k,a));v=n?d.mk():null;var F=NaN;m&&(F=b.Bi());var W=null!=d.Yr();if(this.WG)m&&(g.Ab.wr(b,F,t,h),e&&(m=b.jh(),F=b.tc().jh(),k*=F/m)),g.Ab.vr(this.hf,t,q,h),e&&(m=b.tc().jh(),F=d.tc().jh(),k*=F/m),b=t;else{var ba=new g.Ua(t.description);ba.yD(t);m&&(g.Ab.wr(b,F,ba,h),e&&(m=b.jh(),F=b.tc().jh(),k*=F/m));g.Ab.vr(this.hf,
ba,q,h);e&&(m=b.tc().rm(),F=d.tc().rm(),k*=F/m);q=NaN;n?(v=d.mk(),q=d.Bi()):isNaN(this.Dm)||(q=this.Dm);m=l.vv(b)|l.vv(d);F=10*p.Yd(0);this.Wv&&(m=3,F=0);b=g.Ab.PQ(t,b,ba,p,q,a,m,F)}W&&(b=g.Ab.SD(b,d,a));n&&(f||(n=p.Le().S(),b.Vg(0,0).S()>=n-p.Yd(0)&&(p=v.getNorthPoleLocation(),n=v.getSouthPoleLocation(),t=v.getNorthPoleGeometry(),v=v.getSouthPoleGeometry(),q=0,t==g.Eg.PE_POLE_POINT&&p!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(q=1),v==g.Eg.PE_POLE_POINT&&n!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(q|=2),0!==q&&(f=
!0))),b=g.Ab.Hz(b,d,this.Sm,a),e&&(b=g.Zl.local().W(b,k,a)),g.Ab.Kx(d,b,h));if(b.B())return b;f&&(b=g.$l.local().W(b,d,!1,a));null!=c&&(b=c.al(b,!1),this.yp(c,g.dm.reverse,b),b=c.bl(b,!1));return b};l.vv=function(c){if(2!=c.Tb())return 0;var a=0,b=c.mk();c=b.getNorthPoleLocation();var d=b.getSouthPoleLocation(),e=b.getNorthPoleGeometry();b=b.getSouthPoleGeometry();e==g.Eg.PE_POLE_POINT&&c!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1);b==g.Eg.PE_POLE_POINT&&d!=g.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2);return a};
l.prototype.cW=function(c,a){var b=this.hf.ef,d=this.hf.$f,e=b.Tb(),f=d.Tb(),h=g.P.Hu(Math.min(c.I(),64)),k=g.Ua.kg(c);3==e&&(c=b.Li,b=c.hk(),e=b.Tb(),k=c.bl(k,!0),this.yp(c,g.dm.forward,k),k=c.al(k,!0));c=null;3==f&&(c=d.Li,d=c.hk(),f=d.Tb());var m=2==e;e=(f=2==f)?d.tc():d;var n=!f&&!this.Wv;if(m){if(k=g.Ab.OI(k,b,this.no,a),k.B())return k}else{var p=new g.l;k.yc(p);var q=b.Le();if(p.G<q.G||p.H>q.H)if(p=g.l.construct(p.v-1,q.G,p.C+1,q.H),k=g.ti.Pu(k,p,b,NaN,0,a),k.B())return k}var t=NaN;m&&(t=b.Bi());
p=null!=d.Yr();q=this.hH;var v=!isNaN(q);v&&(k=g.Zl.local().W(k,q,a));if(this.WG)m&&g.Ab.wr(b,t,k,h),v&&(m=b.jh(),t=b.tc().jh(),q*=t/m),g.Ab.vr(this.hf,k,n,h),v&&(m=b.tc().jh(),t=d.tc().jh(),q*=t/m),b=k;else{var F=new g.Ua(k.description);F.yD(k);m&&(g.Ab.wr(b,t,F,h),v&&(m=b.jh(),t=b.tc().jh(),q*=t/m));g.Ab.vr(this.hf,F,n,h);v&&(m=b.tc().jh(),t=d.tc().jh(),q*=t/m);n=NaN;f?n=d.Bi():isNaN(this.Dm)||(n=this.Dm);m=l.vv(b)|l.vv(d);t=10*e.Yd(0);this.Wv&&(m=3,t=0);b=g.Ab.QQ(k,b,F,e,n,a,m,t)}p&&(b=g.Ab.SD(b,
d,a));f&&(b=g.Ab.Hz(b,d,this.Sm,a),v&&(b=g.Zl.local().W(b,q,a)),g.Ab.Kx(d,b,h));if(b.B())return b;null!=c&&(b=c.al(b,!1),this.yp(c,g.dm.reverse,b),b=c.bl(b,!1));return b};l.prototype.$V=function(c,a){var b=(c.da()+c.S())/400;0!=b?(b=g.Zl.local().W(c,b,a),b=this.QI(b,a),a=c.Ja(),b.dn(a)):(a=new g.Ta(c.Kp()),b=this.SI(a),a=c.Ja(),b.B()?a.Pa():(c.copyTo(a),c=b.D(),a.L(c.x,c.y,c.x,c.y)));return a};l.prototype.aW=function(c,a){c=g.ba.kg(c);var b=this.hf.ef,d=this.hf.$f,e=b.Tb(),f=d.Tb(),h=g.P.Hu(Math.min(c.I(),
64));if(3==e){var k=b.Li;b=k.hk();e=b.Tb();c=k.al(c,!0);this.yp(k,g.dm.forward,c);c=k.bl(c,!0)}if(2==e){this.no==g.ui.Clip?c=g.Zj.local().W(c,b.ol(),b,a):b.Xc()&&(e=new g.l,c.yc(e),b.Le().contains(e)||(this.no==g.ui.PannableFold&&(c=g.Ab.nj(c,b)),g.Ab.Lt(c,b.Le(),b.Yd(0),!0),c=g.Ab.Hn(c,b,0,!0,0,a)));if(c.B())return c;g.Ab.wr(b,0,c,h)}else g.Ab.Lt(c,b.Le(),b.Yd(0),!0);g.Ab.vr(this.hf,c,!1,h);b=0;e=!1;k=null;3==f&&(e=!0,k=d.Li,d=k.hk(),f=d.Tb());(f=2==f)?b=d.Bi():isNaN(this.Dm)||(b=this.Dm);f&&this.Sm!=
g.ui.Clip||(c=g.Ab.Hn(c,d.tc(),b,!1,0,a));if(f&&(c=g.Ab.Hz(c,d,this.Sm,a),g.Ab.Kx(d,c,h),c.B()))return c;e&&(c=k.al(c,!0),this.yp(k,g.dm.reverse,c),c=k.bl(c,!0));return c};l.prototype.yp=function(c,a,b){var d=b.I();if(0!=d){for(var e=b.vb(0),f=g.P.mg(200,0),h=[],k=0;k<d;){var m=Math.min(100,d-k);e.Xw(2*k,2*m,f,2,!0);for(var n=0;n<m;++n)h[n]=g.h.construct(f[2*k],f[2*k+1]);c.St(a,h,m);k+=m}b.Qc(1993)}};l.Py=function(c,a,b){if(null==c||null==a||!a.Xc())throw g.i.ga("Invalid Arguement");if(c.B())return c;
var d=c.K();197==d?(d=new g.Ea(c.description),d.bd(c,!1)):g.ba.zd(d)?(d=new g.Ua(c.description),d.pc(c,!0)):d=c;d=g.Ab.nj(d,a);return d.B()?d:g.Ab.Hn(d,a,0,d!=c,0,b)};l.pj=function(c,a,b,d){if(null==c||null==a||!a.Xc())throw g.i.ga("Invalid Arguement");if(c.B())return c;var e=c.K();if(g.ba.Ic(e)){c=g.Ab.nj(c,a);e=new g.l;c.A(e);for(var f=g.ua.oy(a,e,!1),h=a.ih(),k=Math.floor((e.v-h.v)/h.S())*h.S()+h.v;k<e.C;)k>e.v+f&&k<e.C-f&&(c=g.Ab.pS(c,a,b,k)),k+=h.S()}else{if(197==e)return e=new g.Ea(c.description),
e.bd(c,!1),l.pj(e,a,b,d);if(g.ba.zd(e))return e=new g.Ua(c.description),e.pc(c,!0),l.pj(e,a,b,d)}return l.Py(c,a,d)};return l}();g.du=z})(R||(R={}));(function(g){var z=function(l){function c(a,b,d,e){var f=l.call(this)||this;void 0===a?f.description=g.fe.pg():void 0===d?f.description=a:(f.description=g.fe.pg(),f.UB(a,b),f.Sl(d,e));return f}Na(c,l);c.prototype.K=function(){return 322};c.prototype.Rb=function(){var a=this.ta-this.qa,b=this.oa-this.ma;return Math.sqrt(a*a+b*b)};c.prototype.Di=function(a){var b=
this.ta-this.qa,d=this.oa-this.ma;return Math.sqrt(b*b+d*d)<=a};c.prototype.Rn=function(){return!1};c.prototype.lg=function(){var a=new g.h;a.vc(this.xc(),this.bc());return a};c.YO=function(a,b){return new c(a.x,a.y,b.x,b.y)};c.prototype.dn=function(a){a.Pa();a.Pf(this.description);var b=new g.l;this.A(b);a.Zo(b);b=1;for(var d=this.description.Ba;b<d;b++)for(var e=this.description.ld(b),f=g.sa.Wa(e);b<f;b++){var h=this.Vg(e,0);a.setInterval(e,0,h)}};c.prototype.A=function(a){a.L(this.ta,this.oa,this.qa,
this.ma);a.normalize()};c.prototype.So=function(a){a.Pa();a.$b(this.ta,this.oa,this.Pd(0,1,0));a.$b(this.qa,this.ma,this.Pd(1,1,0))};c.prototype.Pc=function(a){if(a instanceof g.Ed){this.wc();var b=new g.h;b.x=this.ta;b.y=this.oa;a.Gh(b,b);this.ta=b.x;this.oa=b.y;b.x=this.qa;b.y=this.ma;a.Gh(b,b);this.qa=b.x;this.ma=b.y}else this.wc(),b=new g.Od,b.x=this.ta,b.y=this.oa,b.z=this.Pd(0,1,0),b=a.hp(b),this.ta=b.x,this.oa=b.y,this.vn(0,1,0,b.z),b.x=this.qa,b.y=this.ma,b.z=this.Pd(1,1,0),b=a.hp(b),this.qa=
b.x,this.ma=b.y,this.vn(1,1,0,b.z)};c.prototype.Ja=function(){return new c(this.description)};c.prototype.Sx=function(a,b){return(this.qa-a-(this.ta-a))*(this.ma-b+(this.oa-b))*.5};c.prototype.ux=function(a){return a*this.Rb()};c.prototype.IG=function(a){return a/this.Rb()};c.prototype.yF=function(a){return g.mc.jq(this.ta,this.qa,a)};c.prototype.aR=function(a){return g.mc.jq(this.oa,this.ma,a)};c.prototype.fl=function(a,b){var d=new g.jg;this.dh(a,b,d);return d.get()};c.prototype.dh=function(a,b,
d){if(null==d)throw g.i.O();d.Qr();d=d.get();d.Pf(this.description);var e=new g.h;this.ic(a,e);d.UB(e.x,e.y);this.ic(b,e);d.Sl(e.x,e.y);e=1;for(var f=this.description.Ba;e<f;e++)for(var h=this.description.Fd(e),k=g.sa.Wa(h),m=0;m<k;m++){var n=this.Vc(a,h,m);d.TB(h,m,n);n=this.Vc(b,h,m);d.JB(h,m,n)}};c.prototype.Vc=function(a,b,d){if(0==b)return 0==d?this.ic(a).x:this.ic(a).y;switch(g.sa.gz(b)){case 0:return.5>a?this.yv(b,d):this.jv(b,d);case 1:var e=this.yv(b,d);b=this.jv(b,d);return g.mc.jq(e,b,
a);case 2:throw g.i.ga("not implemented");}throw g.i.Ra();};c.prototype.ge=function(a,b){var d=this.qa-this.ta,e=this.ma-this.oa,f=d*d+e*e;if(0==f)return.5;a=((a.x-this.ta)*d+(a.y-this.oa)*e)/f;b||(0>a?a=0:1<a&&(a=1));return a};c.prototype.fq=function(a,b,d,e){if(a){a=this.ma-this.oa;if(0==a)return b==this.ma?-1:0;b=(b-this.oa)/a;if(0>b||1<b)return 0;null!=d&&(d[0]=this.yF(b))}else{a=this.qa-this.ta;if(0==a)return b==this.qa?-1:0;b=(b-this.ta)/a;if(0>b||1<b)return 0;null!=d&&(d[0]=this.aR(b))}null!=
e&&(e[0]=b);return 1};c.prototype.Me=function(a,b){var d=this.ma-this.oa;if(0==d)return a==this.ma?b:NaN;a=(a-this.oa)/d;b=this.yF(a);1==a&&(b=this.qa);return b};c.prototype.tu=function(a,b,d){return 0<=this.tp(a.x,a.y,b,d)};c.prototype.xi=function(a,b,d){return 0<=this.tp(a,b,d,!0)};c.prototype.ss=function(a,b){return this.tu(a,b,!1)};c.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var a=this.ta;this.ta=this.qa;this.qa=a;a=this.oa;this.oa=this.ma;this.ma=a;a=0;for(var b=
this.description.Qq-2;a<b;a++){var d=this.la[a];this.la[a]=this.la[a+b];this.la[a+b]=d}}};c.prototype.wu=function(a,b){b=g.h.construct(a,b);b.sub(this.bc());var d=new g.h;d.vc(this.xc(),this.bc());a=d.yi(b);b=8.881784197001252E-16*(Math.abs(d.x*b.y)+Math.abs(d.y*b.x));return a>b?-1:a<-b?1:0};c.prototype.tp=function(a,b,d,e){var f=this.ta,h=this.oa,k=a-f,m=b-h;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,6.661338147750939E-16*k))return e&&0==k?NaN:0;k=a-this.qa;m=b-this.ma;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,
6.661338147750939E-16*k))return e&&0==k?NaN:1;k=this.qa-this.ta;m=this.ma-this.oa;e=Math.sqrt(k*k+m*m);if(0<e){var n=1/e;k*=n;m*=n;var p=a-f,q=b-h,t=p*k+q*m,v=1.7763568394002505E-15*(Math.abs(p*k)+Math.abs(q*m)),F=k;k=-m;m=F;v=Math.max(d,v);if(t<-v||t>e+v)return NaN;if(Math.abs(p*k+q*m)<=Math.max(d,1.7763568394002505E-15*(Math.abs(p*k)+Math.abs(q*m)))&&(k=g.P.Tk(t*n,0,1),.5>=k?(m=this.ta+(this.qa-this.ta)*k,e=this.oa+(this.ma-this.oa)*k):(m=this.qa-(this.qa-this.ta)*(1-k),e=this.ma-(this.ma-this.oa)*
(1-k)),g.h.Jy(m,e,a,b)<=d)){if(.5>k){if(g.h.Jy(m,e,f,h)<=d)return 0}else if(g.h.Jy(m,e,this.qa,this.ma)<=d)return 1;return k}}return NaN};c.prototype.Nb=function(a){return null==a?!1:a==this?!0:a.constructor!==this.constructor?!1:this.AM(a)};c.prototype.mD=function(a,b,d){var e=d?this.ta:this.qa;d=d?this.oa:this.ma;var f=new g.h;f.x=a.qa-e;f.y=a.ma-d;return b.Sh(f)>6.661338147750939E-16*b.aD(f)?(f.x=a.ta-e,f.y=a.oa-d,b.Sh(f)<=6.661338147750939E-16*b.aD(f)):!0};c.prototype.lD=function(a){var b=new g.h;
b.x=this.qa-this.ta;b.y=this.ma-this.oa;if(!this.mD(a,b,!1))return!1;b.Uq();return this.mD(a,b,!0)?!0:!1};c.IM=function(a,b){var d=a.wu(b.ta,b.oa),e=a.wu(b.qa,b.ma);if(0>d&&0>e||0<d&&0<e)return!1;d=b.wu(a.ta,a.oa);e=b.wu(a.qa,a.ma);if(0>d&&0>e||0<d&&0<e)return!1;d=a.Rb();e=b.Rb();return d>e?a.lD(b):b.lD(a)};c.GM=function(a,b,d){var e=g.h.construct(NaN,NaN),f=a.qa-a.ta,h=a.ma-a.oa,k=b.qa-b.ta,m=b.ma-b.oa,n=k*h-f*m;if(0==n)return e;var p=8.881784197001252E-16*(Math.abs(k*h)+Math.abs(f*m)),q=b.ta-a.ta,
t=b.oa-a.oa,v=k*t-q*m,F=v/n,W=Math.abs(n);k=(8.881784197001252E-16*(Math.abs(k*t)+Math.abs(q*m))*W+p*Math.abs(v))/(n*n)+2.220446049250313E-16*Math.abs(F);if(F<-k||F>1+k)return e;m=f*t-q*h;k=m/n;f=(8.881784197001252E-16*(Math.abs(f*t)+Math.abs(q*h))*W+p*Math.abs(m))/(n*n)+2.220446049250313E-16*Math.abs(k);if(k<-f||k>1+f)return e;F=g.P.Tk(F,0,1);f=g.P.Tk(k,0,1);h=a.ic(F);n=b.ic(f);p=new g.h;p.vc(h,n);if(p.length()>d&&(p.add(h,n),p.scale(.5),F=a.ge(p,!1),f=b.ge(p,!1),a=a.ic(F),b=b.ic(f),a.sub(b),a.length()>
d))return e;e.na(F,f);return e};c.JM=function(a,b,d,e){var f=0;if(a.ta==b.ta&&a.oa==b.oa||a.ta==b.qa&&a.oa==b.ma)if(f++,!e)return 1;if(a.qa==b.ta&&a.ma==b.oa||a.qa==b.qa&&a.ma==b.ma){f++;if(2==f)return 2;if(!e)return 1}return b.xi(a.ta,a.oa,d)||b.xi(a.qa,a.ma,d)||a.xi(b.ta,b.oa,d)||a.xi(b.qa,b.ma,d)?1:e&&0!=f?0:0==c.IM(a,b)?0:1};c.Yx=function(a,b,d,e,f,h){var k=0,m=a.tp(b.ta,b.oa,h,!1),n=a.tp(b.qa,b.ma,h,!1),p=b.tp(a.ta,a.oa,h,!1),q=b.tp(a.qa,a.ma,h,!1);isNaN(m)||(null!=e&&(e[k]=m),null!=f&&(f[k]=
0),null!=d&&(d[k]=g.h.construct(b.ta,b.oa)),k++);isNaN(n)||(null!=e&&(e[k]=n),null!=f&&(f[k]=1),null!=d&&(d[k]=g.h.construct(b.qa,b.ma)),k++);2==k||isNaN(p)||0==m&&0==p||0==n&&1==p||(null!=e&&(e[k]=0),null!=f&&(f[k]=p),null!=d&&(d[k]=g.h.construct(a.ta,a.oa)),k++);2==k||isNaN(q)||1==m&&0==q||1==n&&1==q||(null!=e&&(e[k]=1),null!=f&&(f[k]=q),null!=d&&(d[k]=g.h.construct(b.qa,b.ma)),k++);if(0<k)return 2==k&&null!=e&&e[0]>e[1]&&(a=e[0],e[0]=e[1],e[1]=a,null!=f&&(e=f[0],f[0]=f[1],f[1]=e),null!=d&&(f=g.h.construct(d[0].x,
d[0].y),d[0]=d[1],d[1]=f)),k;k=c.GM(a,b,h);if(isNaN(k.x))return 0;null!=d&&(d[0]=a.ic(k.x));null!=e&&(e[0]=k.x);null!=f&&(f[0]=k.y);return 1};c.prototype.$F=function(){return 0};c.prototype.qp=function(){};c.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"};return c}(g.NC);g.zb=z})(R||(R={}));(function(g){var z=function(){function l(){this.Lm=[];this.za=-1}l.prototype.Ma=function(){return this.za};l.prototype.next=
function(){if(null!=this.Lm&&0!=this.Lm.length){this.za++;var c=this.Lm[0];this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1);return c}return this.Lm=null};l.prototype.VX=function(c){this.Lm.push(c)};l.prototype.re=function(){};return l}();g.bL=z})(R||(R={}));(function(g){(function(l){l[l.enumFillRuleOddEven=0]="enumFillRuleOddEven";l[l.enumFillRuleWinding=1]="enumFillRuleWinding"})(g.NL||(g.NL={}));var z=function(l){function c(a,b){var d=l.call(this)||this;d.yf=!1;d.Gq=null;d.uq=0;d.tq=0;d.Cj=null;d.Og=
!1;d.nb=null;d.mb=null;d.Se=null;d.Nj=null;d.Td=null;d.vq=0;d.gb=0;d.zq=0;if(void 0===b)d.yf=a,d.Og=!1,d.vq=0,d.uq=0,d.tq=0,d.xa=0,d.description=g.fe.pg();else{if(null==b)throw g.i.O();d.yf=a;d.Og=!1;d.vq=0;d.uq=0;d.tq=0;d.xa=0;d.description=b}d.Cj=null;d.gb=0;return d}Na(c,l);c.prototype.vm=function(){return 0<this.vq};c.prototype.Xx=function(){this.wc();null==this.Gq?this.Gq=new g.Ta(this.description):this.Gq.Pf(this.description)};c.prototype.rx=function(a,b){var d=new g.h;d.x=a;d.y=b;this.Nt(d)};
c.prototype.Nt=function(a){this.Xx();this.Gq.Db(a);this.Og=!0};c.prototype.nf=function(a){if(a.B())throw g.i.O();this.Ll(a.description);this.Xx();a.copyTo(this.Gq);this.Og=!0};c.prototype.Rx=function(){var a=1;this.Og&&(this.Xx(),null==this.nb?(this.nb=g.Zc.Qh(2),this.nb.write(0,0),this.mb=g.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),a++);var b=this.xa;this.nb.write(this.nb.size-1,this.xa+a);this.fm(b+a);this.mb.write(this.nb.size-
1,0);this.Og&&(this.It(b,this.Gq),this.Og=!1)};c.prototype.Aj=function(a,b){this.Rx();this.Db(this.xa-1,a,b)};c.prototype.Ei=function(a){this.Rx();this.Db(this.xa-1,a)};c.prototype.lineTo=function(a){this.Rx();this.It(this.xa-1,a)};c.prototype.xU=function(a){this.wc();if(this.yf)throw g.i.Ra();var b=this.ea();if(a>b)throw g.i.Ra();if(this.ec(a)){if(null==this.mb)throw g.i.Ra();var d=this.xa,e=this.Ca(a),f=this.Wc(a);this.fm(this.xa+1);this.oc();for(var h=0,k=this.description.Ba;h<k;h++)if(null!=this.Aa[h]){var m=
g.sa.Wa(this.description.Fd(h));this.Aa[h].On(m*f,this.Aa[h],m*e,m,!0,1,m*d)}for(;b>a;b--)d=this.nb.read(b),this.nb.write(b,d+1);this.mb.FE(a,1)}};c.prototype.Cp=function(){this.vx();if(void 0===a){this.Og=!1;var a=this.ea()-1}var b=this.mb.read(a);this.mb.write(a,b|1);null!=this.Se&&(a=this.Wc(a)-1,this.Se.write(a,1),this.Nj.write(a,-1))};c.prototype.ec=function(a){return 0!=(this.mb.read(a)&1)};c.prototype.Pn=function(a){if(this.ec(a))return!0;var b=this.Ca(a);a=this.Wc(a)-1;if(b>a)return!1;b=this.Oa(b);
a=this.Oa(a);return b.rb(a)};c.prototype.Av=function(a){return 0!=(this.mb.read(a)&2)};c.prototype.pc=function(a,b){this.Ll(a.description);if(322==a.K()){var d=new g.Ta;if(b||this.B())a.Vo(d),this.nf(d);a.Ro(d);this.lineTo(d)}else throw g.i.Ra();};c.prototype.vp=function(a){var b=0==this.xa;this.rx(a.v,a.G);this.Aj(a.v,a.H);this.Aj(a.C,a.H);this.Aj(a.C,a.G);this.Cp();this.Og=!1;b&&this.Nf(256,!1)};c.prototype.bd=function(a,b){if(!a.B()){for(var d=0==this.xa,e=new g.Ta(this.description),f=0;4>f;f++)a.If(b?
4-f-1:f,e),0==f?this.nf(e):this.lineTo(e);this.Cp();this.Og=!1;d&&!b&&this.Nf(256,!1)}};c.prototype.add=function(a,b){for(var d=0;d<a.ea();d++)this.addPath(a,d,!b)};c.prototype.addPath=function(a,b,d){this.wf(-1,a,b,d)};c.prototype.$k=function(a,b){this.Cz(a,b)};c.prototype.Fr=function(a,b,d,e,f){f||0!=this.ea()||(f=!0);0>b&&(b=a.ea()-1);if(b>=a.ea()||0>d||0>e||e>a.tv(b))throw g.i.ga("index out of bounds");if(0!=e){var h=a.ec(b)&&d+e==a.tv(b);if(!h||1!=e){this.Og=!1;this.Ll(a.description);d=a.Ca(b)+
d+1;f&&(e++,d--);h&&e--;h=this.xa;this.fm(this.xa+e);this.oc();if(f){if(0==e)return;this.nb.add(this.xa);f=a.mb.read(b);f&=-5;this.yf&&(f|=1);this.mb.write(this.mb.size-1,f);this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);f=0;for(var k=this.description.Ba;f<k;f++){var m=this.description.ld(f),n=g.sa.Wa(m),p=a.description.Rf(m);0>p||null==a.Aa[p]?this.Aa[f].Nn(n*h,g.sa.te(m),e*n,n*h):this.Aa[f].On(n*h,a.Aa[p],n*d,e*n,!0,n,n*h)}if(this.vm())throw g.i.Ra();if(a.Av(b))throw g.i.Ra();this.Qc(1993)}}};
c.prototype.jJ=function(){for(var a=0,b=this.ea();a<b;a++)this.zW(a)};c.prototype.zW=function(a){this.oc();if(a>=this.ea())throw g.i.O();var b=this.Ca(a),d=this.Ka(a);a=this.ec(a)?1:0;for(var e=0,f=this.description.Ba;e<f;e++)if(null!=this.Aa[e]){var h=g.sa.Wa(this.description.Fd(e));this.Aa[e].pi(h*(b+a),h*(d-a),h)}this.Qc(1993)};c.prototype.ar=function(a){this.oc();var b=this.ea();0>a&&(a=b-1);if(a>=b)throw g.i.O();for(var d=this.Ca(a),e=this.Ka(a),f=0,h=this.description.Ba;f<h;f++)if(null!=this.Aa[f]){var k=
g.sa.Wa(this.description.Fd(f));this.Aa[f].Gn(k*d,k*e,k*this.xa)}for(d=a+1;d<=b;d++)f=this.nb.read(d),this.nb.write(d-1,f-e);if(null==this.mb)for(d=a+1;d<=b;d++)a=this.mb.read(d),this.mb.write(d-1,a);this.nb.resize(b);this.mb.resize(b);this.xa-=e;this.Rg-=e;this.Qc(1993)};c.prototype.wf=function(a,b,d,e){if(b==this)throw g.i.O();if(d>=b.ea())throw g.i.O();var f=this.ea();if(a>f)throw g.i.O();0>a&&(a=f);0>d&&(d=b.ea()-1);this.Og=!1;this.Ll(b.description);b.oc();var h=b.Ca(d),k=b.Ka(d),m=this.xa,n=
b.ec(d)&&!e?1:0;this.fm(this.xa+k);this.oc();for(var p=a<f?this.Ca(a):m,q=0,t=this.description.Ba;q<t;q++){var v=this.description.Fd(q),F=b.description.Rf(v),W=g.sa.Wa(v);0<=F&&null!=b.Aa[F]?(0!=n&&this.Aa[q].On(p*W,b.Aa[F],W*h,W,!0,W,W*m),this.Aa[q].On((p+n)*W,b.Aa[F],W*(h+n),W*(k-n),e,W,W*(m+n))):this.Aa[q].Nn(p*W,g.sa.te(v),W*k,W*m)}this.nb.add(m+k);for(e=f;e>=a+1;e--)h=this.nb.read(e-1),this.nb.write(e,h+k);b.Av(d);this.mb.add(0);for(e=f-1;e>=a+1;e--)f=this.mb.read(e),f&=-5,this.mb.write(e+1,
f);f=b.ER().read(d);f&=-5;this.yf&&(f|=1);this.mb.write(a,f)};c.prototype.Cz=function(a,b){var d=-1,e=this.ea();if(d>e)throw g.i.O();0>d&&(d=e);this.Og=!1;var f=this.xa;this.fm(this.xa+b);this.oc();var h=d<e?this.Ca(d):f;if(null!=a)this.Aa[0].Dz(2*h,a,0,b,!0,2*f);else{var k=g.sa.te(0);this.Aa[0].Nn(2*h,k,2*b,2*f)}a=1;for(var m=this.description.Ba;a<m;a++){k=this.description.ld(a);var n=g.sa.Wa(k);k=g.sa.te(k);this.Aa[a].Nn(h*n,k,n*b,n*f)}this.nb.add(this.xa);for(f=e;f>=d+1;f--)h=this.nb.read(f-1),
this.nb.write(f,h+b);this.mb.add(0);for(f=e-1;f>=d+1;f--)b=this.mb.read(f),b&=-5,this.mb.write(f+1,b);this.yf&&this.mb.write(d,1)};c.prototype.lG=function(a,b,d){var e=-1;0>a&&(a=this.ea());if(a>this.ea()||e>this.Ka(a)||d>b.length)throw g.i.ga("index out of bounds");if(0!=d){a==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0));0>e&&(e=this.Ka(a));this.oc();var f=this.xa;this.fm(this.xa+d);this.oc();for(var h=0,k=this.description.Ba;h<k;h++){var m=this.description.Fd(h),n=g.sa.Wa(m);
this.Aa[h].Wt(n*(this.Ca(a)+e+d),(f-this.Ca(a)-e)*n,this.Aa[h],n*(this.Ca(a)+e),!0,n);0==h?this.Aa[h].qC(n*(this.Ca(a)+e),d,b,0,!0):this.Aa[h].Yj(g.sa.te(m),(this.Ca(a)+e)*n,d*n)}this.vm()&&(this.Se.Wt(this.Ca(a)+e+d,f-this.Ca(a)-e,this.Se,this.Ca(a)+e,!0,1),this.Nj.Wt(this.Ca(a)+e+d,f-this.Ca(a)-e,this.Nj,this.Ca(a)+e,!0,1),this.Se.Yj(1,this.Ca(a)+e,d),this.Nj.Yj(-1,this.Ca(a)+e,d));a+=1;for(b=this.ea();a<=b;a++)this.nb.write(a,this.nb.read(a)+d)}};c.prototype.xf=function(a,b,d){var e=this.ea();
0>a&&(a=this.ea());if(a>=e||b>this.Ka(a))throw g.i.ga("index out of bounds");a==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0));0>b&&(b=this.Ka(a));var f=this.xa;this.fm(this.xa+1);this.oc();var h=this.Ca(a);this.Aa[0].xj(2*(h+b),d,2*f);d=1;for(var k=this.description.Ba;d<k;d++){var m=this.description.Fd(d),n=g.sa.Wa(m);this.Aa[d].Nn(n*(h+b),g.sa.te(m),n,n*f)}for(a+=1;a<=e;a++)this.nb.write(a,this.nb.read(a)+1)};c.prototype.yB=function(a,b){var d=this.ea();0>a&&(a=d-1);if(a>=
d||b>=this.Ka(a))throw g.i.ga("index out of bounds");this.oc();var e=this.Ca(a);0>b&&(b=this.Ka(a)-1);b=e+b;e=0;for(var f=this.description.Ba;e<f;e++)if(null!=this.Aa[e]){var h=g.sa.Wa(this.description.Fd(e));this.Aa[e].Gn(h*b,h,h*this.xa)}for(;d>=a+1;d--)b=this.nb.read(d),this.nb.write(d,b-1);this.xa--;this.Rg--;this.Qc(1993)};c.prototype.pE=function(a,b,d,e){a=this.Ca(a)+b;d=this.Ca(d)+e;if(d<a||0>a||d>this.I()-1)throw g.i.O();e=this.Ha();b=0;e.Wb(a);do{for(;e.Ia();){a=e.ia();if(e.xb()==d)break;
a=a.Rb();b+=a}if(e.xb()==d)break}while(e.ab());return b};c.prototype.aO=function(a,b,d){b=this.Ca(a)+b;d=this.Ca(a)+d;if(0>b||d>this.I()-1)throw g.i.O();var e=this.Ha();if(b>d){if(!this.ec(a))throw g.i.O("cannot iterate across an open path");e.EB()}var f=a=0;e.Wb(b);do f+=a,a=e.ia().Rb();while(e.xb()!=d);return f};c.prototype.ng=function(){return g.si.im(this,null)};c.prototype.FS=function(a,b,d){for(var e=a;e<d-1;e++)if(this.ec(e))throw g.i.O("cannot interpolate across closed paths");e=this.description.Ba;
if(1!=e){var f=this.pE(a,b,d,void 0);if(0!=f)for(var h=1;h<e;h++){var k=this.description.ld(h);if(2!=g.sa.gz(k))for(var m=g.sa.Wa(k),n=0;n<m;n++)this.HS(k,a,b,d,f,n)}}};c.prototype.ES=function(a,b,d){var e=this.description.Ba;if(1!=e){var f=this.aO(a,b,d);if(0!=f)for(var h=1;h<e;h++){var k=this.description.ld(h);if(2!=g.sa.gz(k))for(var m=g.sa.Wa(k),n=0;n<m;n++)this.GS(k,a,b,d,f,n)}}};c.prototype.HS=function(a,b,d,e,f,h){var k=this.Ha(),m=this.Ca(b)+d;e=this.Ca(e)+void 0;b=this.Vc(a,m,h);d=this.Vc(a,
e,h);var n=b,p=0;k.Wb(m);do if(k.Ia()){k.ia();if(k.xb()==e)break;this.setAttribute(a,k.xb(),h,n);k.ni();do{m=k.ia();if(k.kk()==e)return;m=m.Rb();p+=m;n=g.mc.jq(b,d,p/f);k.Qn()||this.setAttribute(a,k.kk(),h,n)}while(k.Ia())}while(k.ab())};c.prototype.GS=function(a,b,d,e,f,h){var k=this.Ha(),m=this.Ca(b)+d;b=this.Ca(b)+e;if(b!=m){e=this.Vc(a,m,h);d=this.Vc(a,b,h);var n=0;k.Wb(m);k.EB();m=e;do{var p=k.ia();this.setAttribute(a,k.xb(),h,m);m=p.Rb();n+=m;m=g.mc.jq(e,d,n/f)}while(k.kk()!=b)}};c.prototype.Pa=
function(){this.vq=0;this.Og=!1;this.Td=this.Se=this.Nj=this.mb=this.nb=null;this.rD()};c.prototype.Pc=function(a){a instanceof g.Ed?this.TD(a,-1):this.rN(a)};c.prototype.TD=function(a,b){if(!this.B()&&!a.isIdentity()){this.oc();var d=this.Aa[0],e=new g.h,f=new g.h;if(0>b){var h=this.vm(),k=0;b=this.xa}else h=this.Av(b),k=this.Ca(b),b=this.Wc(b);for(;k<b;k++){e.x=d.read(2*k);e.y=d.read(2*k+1);if(h){var m=this.Nj.read(k);if(0<=m)switch(this.Se.read(k)&7){case 2:f.x=this.Td.read(m);f.y=this.Td.read(m+
1);a.Gh(f,f);this.Td.write(m,f.x);this.Td.write(m+1,f.y);f.x=this.Td.read(m+3);f.y=this.Td.read(m+4);a.Gh(f,f);this.Td.write(m+3,f.x);this.Td.write(m+4,f.y);break;case 4:throw g.i.Ra();}}a.Gh(e,e);d.write(2*k,e.x);d.write(2*k+1,e.y)}this.Qc(1993)}};c.prototype.rN=function(a){if(!this.B()){this.se(1);this.oc();for(var b=this.Aa[0],d=this.Aa[1],e=new g.Od,f=new g.Od,h=this.vm(),k=0;k<this.xa;k++){e.x=b.read(2*k);e.y=b.read(2*k+1);e.z=d.read(k);if(h){var m=this.Nj.read(k);if(0<=m)switch(this.Se.read(k)&
7){case 2:f.x=this.Td.read(m);f.y=this.Td.read(m+1);f.z=this.Td.read(m+2);f=a.hp(f);this.Td.write(m,f.x);this.Td.write(m+1,f.y);this.Td.write(m+1,f.z);f.x=this.Td.read(m+3);f.y=this.Td.read(m+4);f.z=this.Td.read(m+5);f=a.hp(f);this.Td.write(m+3,f.x);this.Td.write(m+4,f.y);this.Td.write(m+5,f.z);break;case 4:throw g.i.Ra();}}e=a.hp(e);b.write(2*k,e.x);b.write(2*k+1,e.y);d.write(k,e.z)}this.Qc(1993)}};c.prototype.ey=function(){null==this.nb&&(this.nb=g.Zc.Qh(1,0),this.mb=g.Zc.Or(1,0));null!=this.Se&&
(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))};c.prototype.qp=function(a){a.Og=!1;a.vq=this.vq;a.zq=this.zq;a.nb=null!=this.nb?g.ja.Dn(this.nb):null;a.mb=null!=this.mb?g.rn.Dn(this.mb):null;a.Nj=null!=this.Nj?g.ja.Dn(this.Nj):null;a.Se=null!=this.Se?g.rn.Dn(this.Se):null;a.Td=null!=this.Td?g.ce.Dn(this.Td):null;a.uq=this.uq;a.tq=this.tq;a.Cj=this.ck(1024)?null:this.Cj};c.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var a=this.Ha(),b=new g.Ex(0);a.ab();)for(;a.Ia();)b.add(a.ia().Rb());
this.uq=b.tm();this.Nf(512,!1);return b.tm()};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c&&l.prototype.Nb.call(this,a)))return!1;var b=this.ea();return b!=a.ea()||null!=this.nb&&!this.nb.Nb(a.nb,0,b+1)||this.zq!=a.zq||null!=this.mb&&!this.mb.Nb(a.mb,0,b)?!1:l.prototype.Nb.call(this,a)};c.prototype.Ha=function(){return new g.TL(this)};c.prototype.dy=function(a){l.prototype.dy.call(this,a);if(this.vm())for(a=this.Ha();a.ab();)for(;a.Ia();)break};c.prototype.Ap=function(a,b){l.prototype.Ap.call(this,
a,b);if(this.vm())for(a=this.Ha();a.ab();)for(;a.Ia();)break};c.prototype.Zx=function(){this.xa=null==this.nb||0==this.nb.size?0:this.nb.read(this.nb.size-1)};c.prototype.He=function(){if(!this.yf)return 0;this.zu();return this.tq};c.prototype.Gv=function(a){if(!this.yf)return!1;if(!this.ck(8))return 0!=(this.mb.read(a)&4);this.zu();return 0<this.Cj.read(a)};c.prototype.Kr=function(a){if(!this.yf)return 0;this.zu();return this.Cj.read(a)};c.prototype.zu=function(){if(this.ck(1024)){var a=this.ea();
null==this.Cj?this.Cj=new g.ce(a):this.Cj.size!=a&&this.Cj.resize(a);a=new g.Ex(0);for(var b=new g.Ex(0),d=new g.h,e=0,f=this.Ha();f.ab();){b.reset();for(this.D(this.Ca(f.gb),d);f.Ia();)b.add(f.ia().Sx(d.x,d.y));a.add(b.tm());var h=e++;this.Cj.write(h,b.tm())}this.tq=a.tm();this.Nf(1024,!1)}};c.prototype.AR=function(){if(this.yf){this.hm();for(var a=0,b=this.ea(),d=0;d<b;d++)0!=(this.mb.read(d)&4)&&a++}};c.prototype.hm=function(){if(this.ck(8)){this.zu();var a=this.ea();if(null==this.mb||this.mb.size<
a)this.mb=g.Zc.Or(a+1);for(var b=1,d=0;d<a;d++){var e=this.Cj.read(d);0==d&&(b=0<e?1:-1);0<e*b?this.mb.uJ(d,4):this.mb.FE(d,4)}this.Nf(8,!1)}};c.prototype.nz=function(a){var b=this.gb,d=this.ea();if(0<=b&&b<d){if(a<this.Wc(b)){if(a>=this.Ca(b))return b;b--}else b++;if(0<=b&&b<d&&a>=this.Ca(b)&&a<this.Wc(b))return this.gb=b}if(5>d){for(b=0;b<d;b++)if(a<this.Wc(b))return this.gb=b;throw g.i.ga("corrupted geometry");}b=0;for(--d;d>b;){var e=b+(d-b>>1),f=this.Ca(e);if(a<f)d=e-1;else if(b=this.Wc(e),a>=
b)b=e+1;else return this.gb=e}return this.gb=b};c.prototype.sz=function(){var a=this.I();if(!this.yf){a-=this.ea();for(var b=0,d=this.ea();b<d;b++)this.ec(b)&&a++}return a};c.prototype.tv=function(a){var b=this.Ka(a);this.ec(a)||b--;return b};c.prototype.Ja=function(){return new c(this.yf,this.description)};c.prototype.Eb=function(){return this.yf?2:1};c.prototype.K=function(){return this.yf?1736:1607};c.prototype.LJ=function(a){this.nb=a;this.Qc(16777215)};c.prototype.QR=function(){this.vx();return this.Se};
c.prototype.ER=function(){this.vx();return this.mb};c.prototype.KJ=function(a){this.mb=a;this.Qc(16777215)};c.prototype.ea=function(){return null!=this.nb?this.nb.size-1:0};c.prototype.Wc=function(a){return this.nb.read(a+1)};c.prototype.Ka=function(a){return this.nb.read(a+1)-this.nb.read(a)};c.prototype.Ca=function(a){return this.nb.read(a)};c.prototype.nu=function(a,b){null==this.Cb&&(this.Cb=new g.Wk);b=g.Mx.kW(b);var d=this.Cb.Hk;if(null!=d)if(d.Kk<a||b>d.MR())this.Cb.tD(null);else return!0;
d=g.Mx.create(this,a,b);this.Cb.tD(d);return!0};c.prototype.dc=function(){var a=l.prototype.dc.call(this);if(!this.Bc()){var b=this.ea();null!=this.nb&&this.nb.Cn(a,0,b+1);null!=this.mb&&this.mb.Cn(a,0,b)}return a};c.prototype.UF=function(a){return null!=this.Se?this.Se.read(a):1};c.prototype.cc=function(a,b,d){var e=this.nz(a);if(a==this.Wc(e)-1&&!this.ec(e))throw g.i.ga("index out of bounds");this.oc();var f=this.Se,h=1;null!=f&&(h=f.read(a)&7);switch(h){case 1:b.Qr();break;case 2:throw g.i.Ra();
case 4:throw g.i.Ra();default:throw g.i.Ra();}b=b.get();d?b.Pf(g.fe.pg()):b.Pf(this.description);e=a==this.Wc(e)-1&&this.ec(e)?this.Ca(e):a+1;f=new g.h;this.D(a,f);b.Ec(f);this.D(e,f);b.Rc(f);if(!d)for(d=1,f=this.description.Ba;d<f;d++){h=this.description.Fd(d);for(var k=g.sa.Wa(h),m=0;m<k;m++){var n=this.Vc(h,a,m);b.TB(h,m,n);n=this.Vc(h,e,m);b.JB(h,m,n)}}};c.prototype.Tj=function(a,b){if(a>=this.ea())throw g.i.O();if(this.B())b.Pa();else{if(this.Av(a))throw g.i.ga("not implemented");var d=this.vb(0),
e=new g.h,f=new g.l;f.Pa();var h=this.Ca(a);for(a=this.Wc(a);h<a;h++)d.uc(2*h,e),f.$b(e);b.L(f)}};c.prototype.hj=function(a){null==this.Cb&&(this.Cb=new g.Wk);if(0==a||16>this.I())return!1;a=g.ua.iE(this);this.Cb.RM(a);return!0};c.prototype.cM=function(){null==this.Cb&&(this.Cb=new g.Wk);if(null==this.Cb.Bo){this.Cb.sD(null);var a=g.ua.TN(this);this.Cb.sD(a)}};c.prototype.$o=function(a){this.zq=a};c.prototype.Kn=function(){return this.zq};c.prototype.yD=function(a){if(this==a)throw g.i.ga("MultiPathImpl.add");
for(var b=this.ea(),d=0;d<a.ea();d++)this.addPath(a,d,!0),this.xU(b),b++};c.prototype.fO=function(a){var b=this.nz(a),d=this.Ca(b);if(d!=a){b=this.Wc(b);if(a>=b||a<d)throw g.i.ga("change_ring_start_point");for(var e=0,f=this.description.Ba;e<f;e++){var h=this.description.ld(e);h=g.sa.Wa(h);this.Aa[e].rotate(d*h,a*h,b*h)}}};return c}(g.Fx);g.Xk=z})(R||(R={}));(function(g){var z=function(l){function c(a){var b=l.call(this)||this;if(void 0!==a){if(null==a)throw g.i.O();b.description=a}else b.description=
g.fe.pg();b.xa=0;return b}Na(c,l);c.prototype.Ja=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.xa+1);this.Fh(this.xa-1,a)};c.prototype.Du=function(a,b){this.resize(this.xa+1);var d=new g.h;d.na(a,b);this.Db(this.xa-1,d)};c.prototype.Gd=function(a,b,d){d=0>d?a.I():d;if(0>b||b>a.I()||d<b)throw g.i.O();if(b!=d){this.Ll(a.description);d-=b;var e=this.xa;this.resize(this.xa+d);this.oc();for(var f=0,h=a.description.Ba;f<h;f++){var k=a.description.Fd(f),m=g.sa.Wa(k),
n=this.vb(k);k=a.vb(k);n.On(e*m,k,b*m,d*m,!0,1,e*m)}}};c.prototype.CD=function(a,b){var d=a.length;b=0>b?d:b;if(0>d||0>b)throw g.i.O();if(0!=b){d=b-0;b=this.xa;this.resize(this.xa+d);for(var e=0;e<d;e++)this.Db(b+e,a[0+e])}};c.prototype.yB=function(a){if(0>a||a>=this.I())throw g.i.ga("index out of bounds");this.oc();for(var b=0,d=this.description.Ba;b<d;b++)if(null!=this.Aa[b]){var e=g.sa.Wa(this.description.Fd(b));this.Aa[b].Gn(e*a,e,e*this.xa)}this.xa--;this.Rg--;this.Qc(1993)};c.prototype.resize=
function(a){this.fm(a)};c.prototype.qp=function(){};c.prototype.Pa=function(){l.prototype.rD.call(this)};c.prototype.Pc=function(a){if(a instanceof g.Ed){if(this.B())return;this.oc();for(var b=this.Aa[0],d=new g.h,e=0;e<this.xa;e++)d.x=b.read(2*e),d.y=b.read(2*e+1),a.Gh(d,d),b.write(2*e,d.x),b.write(2*e+1,d.y)}else{if(this.B())return;this.oc();this.se(1);this.oc();b=this.Aa[0];d=this.Aa[1];var f=new g.Od;for(e=0;e<this.xa;e++){f.x=b.read(2*e);f.y=b.read(2*e+1);f.z=d.read(e);var h=a.hp(f);b.write(2*
e,h.x);b.write(2*e+1,h.y);d.write(e,h.z)}}this.Qc(1993)};c.prototype.Eb=function(){return 0};c.prototype.K=function(){return 550};c.prototype.He=function(){return 0};c.prototype.Rb=function(){return 0};c.prototype.Nb=function(a){return a==this?!0:a instanceof c?l.prototype.Nb.call(this,a):!1};c.prototype.gW=function(a,b){var d=this.xa;d=Math.min(d,b+1E3);if(0>b||b>=this.xa||d<b||1E3!=a.length)throw g.i.O();var e=this.vb(0),f=d-b,h=[];e.Xw(2*b,2*f,h,0,!0);for(b=0;b<f;b++)a[b]=g.h.construct(h[2*b],
h[2*b+1]);return d};c.prototype.Zx=function(){};c.prototype.ey=function(){};c.prototype.nu=function(){return!1};c.prototype.hj=function(){return!1};c.prototype.ng=function(){return null};return c}(g.Fx);g.ee=z})(R||(R={}));(function(g){(function(l){l[l.NotDetermined=0]="NotDetermined";l[l.Structure=1]="Structure";l[l.DegenerateSegments=2]="DegenerateSegments";l[l.Clustering=3]="Clustering";l[l.Cracking=4]="Cracking";l[l.CrossOver=5]="CrossOver";l[l.RingOrientation=6]="RingOrientation";l[l.RingOrder=
7]="RingOrder";l[l.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";l[l.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";l[l.OGCDisconnectedInterior=10]="OGCDisconnectedInterior"})(g.dL||(g.dL={}));var z=function(){function l(c,a,b){void 0===c?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=c,this.Lo=a,this.Mo=b)}l.prototype.Yt=function(c){this.Lj=c.Lj;this.Lo=c.Lo;this.Mo=c.Mo};return l}();g.Nd=z})(R||(R={}));(function(g){g.P=function(){function z(){}z.assert=function(l){if(!1===l)throw g.i.BK();};
z.XJ=function(l){return isNaN(l)?NaN:0===l?l:0<l?1:-1};z.Hu=function(l){var c;void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=z.mg(2,c);return a};z.mg=function(l,c){void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=c;return a};z.bv=function(l,c){var a,b;void 0===a&&(a=0);for(void 0===b&&(b=l.length-1);a<=b;a++)l[a]=c};z.Tk=function(l,c,a){return l<c?c:l>a?a:l};z.Vh=function(l,c){var a=5381;a=void 0!==c?(c<<5)+c+(l&255):(a<<5)+a+(l&255);a=(a<<5)+a+(l>>8&255);a=(a<<5)+a+(l>>16&255);return(a<<5)+a+(l>>
24&255)&2147483647};z.wj=function(){throw Error("Not Implemented");};z.XA=function(l){return z.WT(l)+12345&2147483647};z.SG=function(l){var c=32,a=l%z.Px|0,b=l/z.Px|0;if(0===(c&=63))return l;32>c?(l=a>>>c|b<<32-c,c=b>>c):(l=b>>c-32,c=0<=b?0:-1);return c*z.Px+(l>>>0)};z.WT=function(l){l|=0;return(1103495168*l|0)+(20077*l|0)|0};z.truncate=function(l){return 0>l?-1*Math.floor(Math.abs(l)):Math.floor(l)};z.MAX_SAFE_INTEGER=Math.pow(2,53)-1;z.MIN_SAFE_INTEGER=-z.MAX_SAFE_INTEGER;z.QC=65536;z.Px=z.QC*z.QC;
return z}()})(R||(R={}));(function(g){(function(l){l[l.Project=0]="Project";l[l.Union=1]="Union";l[l.Difference=2]="Difference";l[l.Proximity2D=3]="Proximity2D";l[l.Relate=4]="Relate";l[l.Equals=5]="Equals";l[l.Disjoint=6]="Disjoint";l[l.Intersects=7]="Intersects";l[l.Within=8]="Within";l[l.Contains=9]="Contains";l[l.Crosses=10]="Crosses";l[l.Touches=11]="Touches";l[l.Overlaps=12]="Overlaps";l[l.Buffer=13]="Buffer";l[l.Distance=14]="Distance";l[l.Intersection=15]="Intersection";l[l.Clip=16]="Clip";
l[l.Cut=17]="Cut";l[l.DensifyByLength=18]="DensifyByLength";l[l.DensifyByAngle=19]="DensifyByAngle";l[l.LabelPoint=20]="LabelPoint";l[l.GeodesicBuffer=21]="GeodesicBuffer";l[l.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";l[l.ShapePreservingDensify=23]="ShapePreservingDensify";l[l.GeodeticLength=24]="GeodeticLength";l[l.GeodeticArea=25]="GeodeticArea";l[l.Simplify=26]="Simplify";l[l.SimplifyOGC=27]="SimplifyOGC";l[l.Offset=28]="Offset";l[l.Generalize=29]="Generalize";l[l.SymmetricDifference=
30]="SymmetricDifference";l[l.ConvexHull=31]="ConvexHull";l[l.Boundary=32]="Boundary";l[l.SimpleRelation=33]="SimpleRelation"})(g.xL||(g.xL={}));var z=function(){function l(){}l.prototype.K=function(){return null};l.prototype.yn=function(){};l.prototype.Ku=function(){return!1};return l}();g.Ge=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 13};c.local=function(){null===c.instance&&(c.instance=new c);
return c.instance};c.prototype.W=function(a,b,d,e,f){return a instanceof g.ba?(f=new g.$c(a),this.W(f,b,[d],!1,e).next()):!0===e?(d=new g.wC(a,b,d,!1,f),g.Ih.local().W(d,b,f)):new g.wC(a,b,d,!1,f)};c.instance=null;return c}(g.Ge);g.vC=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e){this.za=-1;this.Sd=c;this.Vz=a;this.Es=b;this.nT=new g.l;this.nT.Pa();this.ho=-1;this.Vb=e}l.prototype.next=function(){for(var c;null!=(c=this.Sd.next());)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&
this.ho++,this.buffer(c,this.Es[this.ho]);return null};l.prototype.Ma=function(){return this.za};l.prototype.buffer=function(c,a){return g.CK.buffer(c,a,this.Vz,NaN,96,this.Vb)};l.prototype.re=function(){};return l}();g.wC=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 16};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e){return a instanceof g.ba?
(a=new g.$c(a),this.W(a,b,d,e).next()):new g.gL(a,b,d,e)};c.instance=null;return c}(g.Ge);g.fL=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b){this.za=-1;if(null==c)throw g.i.O();this.aa=a;this.Ak=c;this.ra=g.ua.Xd(b,a,!1)}l.prototype.next=function(){var c;return null!=(c=this.Ak.next())?(this.za=this.Ak.Ma(),g.Vd.clip(c,this.aa,this.ra,0)):null};l.prototype.Ma=function(){return this.za};l.prototype.re=function(){};return l}();g.gL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 31};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d){return a instanceof g.ba?g.yC.mE(a):new g.yC(b,a,d)};c.instance=null;return c}(g.Ge);g.xC=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b){this.pA=new g.au;this.za=-1;if(null==a)throw g.i.O();this.YG=c;this.Jc=!1;this.Ak=a;this.Vb=b}l.prototype.next=function(){if(this.YG){if(!this.Jc){var c=this.ZN(this.Ak);
this.Jc=!0;return c}return null}if(!this.Jc){c=this.Ak.next();if(null!=c)return this.za=this.Ak.Ma(),l.mE(c);this.Jc=!0}return null};l.prototype.Ma=function(){return this.za};l.prototype.ZN=function(c){for(var a;null!=(a=c.next());)this.pA.Ib(a);return this.pA.YQ()};l.prototype.re=function(){if(!this.Jc){if(!this.YG)throw g.i.ga("Invalid call for non merging convex hull.");var c=this.Ak.next();if(null!=c)this.pA.Ib(c);else throw g.i.ga("Expects a non-null geometry.");}};l.mE=function(c){if(l.QS(c))return c;
var a=c.K();if(g.Xk.zd(a))return a=new g.Ua(c.description),a.pc(c,!0),a;if(550==a&&2==c.I()){var b=new g.Ta;a=new g.Ua(c.description);c.we(0,b);a.nf(b);c.we(1,b);a.lineTo(b);return a}return g.au.MO(c)};l.QS=function(c){if(c.B())return!0;var a=c.K();return 33==a||197==a?!0:g.Xk.zd(a)?!1:550==a?1==c.I()?!0:!1:1607==a?1==c.ea()&&2>=c.I()?!0:!1:1!=c.ea()?!1:2>=c.I()?!0:g.au.EG(c,0)};return l}();g.yC=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}
Na(c,l);c.prototype.K=function(){return 17};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e,f){return new g.iL(a,b,d,e,f)};c.instance=null;return c}(g.Ge);g.hL=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e){this.Vf=null;if(null==a||null==b)throw g.i.ga("invalid argument");this.kT=c;this.iA=a;this.gH=b;c=g.ua.ov(a,b);this.ra=g.ua.Xd(d,c,!0);this.fH=-1;this.od=e}l.prototype.Ma=function(){return 0};l.prototype.next=function(){this.MQ();
return++this.fH<this.Vf.length?this.Vf[this.fH]:null};l.prototype.MQ=function(){if(null==this.Vf)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}};l.prototype.OQ=function(){var c=new g.Ua,a=new g.Ua,b=new g.Ua;this.Vf.push(c);this.Vf.push(a);var d=[];g.GK.EK(this.kT,this.iA,this.gH,this.ra,d,this.od);for(var e=0;e<d.length;e++){var f=d[e];if(0==f.ct)c.add(f.Y,!1);else if(1==f.ct||2==f.ct)a.add(f.Y,!1);else if(3==f.ct)this.Vf.push(f.Y);else if(4==f.ct)b.add(f.Y,!1);else throw g.i.ga("internal");
}b.B()||c.B()&&a.B()&&!(3<=this.Vf.length)||this.Vf.push(b);c.B()&&a.B()&&3>this.Vf.length&&(this.Vf.length=0)};l.prototype.NQ=function(){var c=new g.ja(0),a=new g.hd,b=a.WE(),d=a.Ib(this.iA),e=a.Ib(this.gH),f=new g.Hg;try{f.Gt(a,this.ra,this.od);f.fl(b,d,e,c);var h=a.Ke(d),k=new g.Ea,m=new g.Ea;this.Vf.length=0;this.Vf.push(k);this.Vf.push(m);for(d=0;d<c.size;d++){var n=new g.hd,p=n.Ib(h),q=n.Ib(a.Ke(c.get(d)));f.fr(n,this.od);var t=f.Cv(p,q),v=n.Ke(t);if(!v.B()){var F=a.FF(c.get(d),b);2==F?k.add(v,
!1):1==F?m.add(v,!1):this.Vf.push(v);var W=new g.hd;p=W.Ib(h);q=W.Ib(a.Ke(c.get(d)));f.fr(W,this.od);h=W.Ke(f.km(p,q))}}!h.B()&&0<c.size&&this.Vf.push(h);k.B()&&m.B()&&(this.Vf.length=0)}finally{f.Wg()}};l.prototype.re=function(){};return l}();g.iL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,
d){if(a instanceof g.ba)return a=new g.$c(a),this.W(a,b,d).next();if(0>=b)throw g.i.O();return new g.jL(a,b,d)};c.instance=null;return c}(g.Ge);g.Zl=z})(R||(R={}));(function(g){var z=function(){function l(c,a){this.za=-1;this.Sd=c;this.Rs=a}l.prototype.Ma=function(){return this.za};l.prototype.next=function(){var c;return null!=(c=this.Sd.next())?(this.za=this.Sd.Ma(),this.IP(c)):null};l.prototype.IP=function(c){if(c.B()||1>c.Eb())return c;var a=c.K();if(1736==a||1607==a)return this.Iy(c);if(g.ba.zd(a))return this.KP(c);
if(197==a)return this.JP(c);throw g.i.Ra();};l.prototype.KP=function(c){if(c.Rb()<=this.Rs)return c;var a=new g.Ua(c.description);a.pc(c,!0);return this.Iy(a)};l.prototype.JP=function(c){var a=new g.Ea(c.description);a.bd(c,!1);var b=new g.l;c.A(b);c=b.da();return b.S()<=this.Rs&&c<=this.Rs?a:this.Iy(a)};l.prototype.Iy=function(c){for(var a=c.Ja(),b=c.Ha();b.ab();)for(var d=!0;b.Ia();){var e=b.ia();if(322!=e.K())throw g.i.ga("not implemented");var f=b.Qn(),h=e.Rb();if(h>this.Rs){var k=Math.ceil(h/
this.Rs);h=new g.Ta(c.description);d&&(e.Vo(h),a.nf(h));var m=d=1/k,n=0;for(--k;n<k;n++)e.Vw(m,h),a.lineTo(h),m+=d;f?a.Cp():(e.Ro(h),a.lineTo(h))}else f?a.Cp():a.pc(e,d);d=!1}return a};l.prototype.re=function(){};return l}();g.jL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.K=function(){return 2};c.prototype.W=function(a,b,d,e){return a instanceof
g.ba?(a=new g.$c(a),b=new g.$c(b),this.W(a,b,d,e).next()):new g.kL(a,b,d,e)};c.km=function(a,b,d,e){if(a.B()||b.B())return a;var f=a.Eb(),h=b.Eb();if(f>h)return a;var k=a.K(),m=b.K(),n=new g.l,p=new g.l,q=new g.l;a.A(n);b.A(p);q.L(n);q.$b(p);q=g.ua.Xd(d,q,!0);var t=q*Math.sqrt(2)*1.00001,v=new g.l;v.L(n);v.X(t,t);if(!v.isIntersecting(p))return a;if(1==f&&2==h)return c.FV(a,b,m,d,e);if(33==k)switch(g.Xk.zd(m)?(d=new g.Ua(b.description),d.pc(b,!0)):d=b,m){case 1736:return c.SU(a,d,q);case 1607:return c.TU(a,
d,q);case 550:return c.QU(a,d,q);case 197:return c.PU(a,d,q);case 33:return c.RU(a,d,q);default:throw g.i.O();}else if(550==k)switch(m){case 1736:return c.iU(a,b,q);case 197:return c.gU(a,b,q);case 33:return c.hU(a,b,q)}return g.Hg.km(a,b,d,e)};c.SU=function(a,b,d){return 0==g.jd.FG(b,a,d)?a:a.Ja()};c.TU=function(a,b,d){var e=a.D();b=b.Ha();for(var f=d*Math.sqrt(2)*1.00001,h=f*f,k=new g.l;b.ab();)for(;b.Ia();){var m=b.ia();m.A(k);k.X(f,f);if(k.contains(e)){if(m.ss(e,d))return a.Ja();var n=m.bc();
if(g.h.zc(e,n)<=h)return a.Ja();n=m.xc();if(g.h.zc(e,n)<=h)return a.Ja()}}return a};c.QU=function(a,b,d){var e=b.vb(0);b=b.I();var f=a.D(),h=new g.h;d=d*Math.sqrt(2)*1.00001;d*=d;for(var k=0;k<b;k++)if(e.uc(2*k,h),g.h.zc(h,f)<=d)return a.Ja();return a};c.PU=function(a,b,d){var e=new g.l;b.A(e);e.X(d,d);b=a.D();return e.contains(b)?a.Ja():a};c.RU=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.D();b=b.D();return g.h.zc(e,b)<=d?a.Ja():a};c.iU=function(a,b,d){var e=new g.l;b.A(e);e.X(d,d);for(var f=
a.I(),h=!1,k=[],m=0;m<f;m++)k[m]=!1;var n=new g.h;for(m=0;m<f;m++)a.D(m,n),e.contains(n)&&0!=g.jd.Zd(b,n,d)&&(h=!0,k[m]=!0);if(!h)return a;b=a.Ja();for(m=0;m<f;m++)k[m]||b.Gd(a,m,m+1);return b};c.gU=function(a,b,d){var e=new g.l;b.A(e);e.X(d,d);b=a.I();var f=!1;d=[];for(var h=0;h<b;h++)d[h]=!1;var k=new g.h;for(h=0;h<b;h++)a.D(h,k),e.contains(k)&&(f=!0,d[h]=!0);if(!f)return a;e=a.Ja();for(h=0;h<b;h++)d[h]||e.Gd(a,h,h+1);return e};c.hU=function(a,b,d){var e=a.vb(0),f=a.I(),h=b.D(),k=new g.h,m=!1;b=
[];for(var n=0;n<f;n++)b[n]=!1;n=d*Math.sqrt(2)*1.00001;d=n*n;for(n=0;n<f;n++)e.uc(2*n,k),g.h.zc(k,h)<=d&&(m=!0,b[n]=!0);if(!m)return a;e=a.Ja();for(n=0;n<f;n++)b[n]||e.Gd(a,n,n+1);return e};c.FV=function(a,b,d,e,f){var h=new g.Hh;a.dn(h);var k=new g.l;b.A(k);h.$b(k);h.X(.1*h.S(),.1*h.da());k=new g.Ea;k.bd(h,!1);1736==d?k.add(b,!0):k.bd(b,!0);return g.Zj.local().W(a,k,e,f)};c.instance=null;return c}(g.Ge);g.mp=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d){this.vs=null==a;this.za=
-1;this.Sd=c;this.Vz=b;this.rT=a.next();this.Vb=d}l.prototype.next=function(){if(this.vs)return null;var c;return null!=(c=this.Sd.next())?(this.za=this.Sd.Ma(),g.mp.km(c,this.rT,this.Vz,this.Vb)):null};l.prototype.Ma=function(){return this.za};l.prototype.re=function(){};return l}();g.kL=z})(R||(R={}));(function(g){var z=function(){function c(a){this.od=a;this.Dj=new g.l;this.Dj.Pa();this.qh=new g.l;this.qh.Pa()}c.prototype.Pt=function(){var a=this.Dj.v;this.Dj.v=this.qh.v;this.qh.v=a;a=this.Dj.C;
this.Dj.C=this.qh.C;this.qh.C=a;a=this.Dj.G;this.Dj.G=this.qh.G;this.qh.G=a;a=this.Dj.H;this.Dj.H=this.qh.H;this.qh.H=a};c.prototype.$P=function(a,b){if(null!=this.od&&!this.od.progress(-1,-1))throw g.i.hu("user_canceled");var d=!this.Dj.isIntersecting(this.qh);if(g.ba.Ic(a.K())&&g.ba.Ic(b.K())){if(a.I()>b.I())return this.bE(a,b,d);this.Pt();a=this.bE(b,a,d);this.Pt();return a}if(550==a.K()&&g.ba.Ic(b.K()))return a=this.cE(b,a,d),this.Pt(),a;if(550==b.K()&&g.ba.Ic(a.K()))return this.cE(a,b,d);if(550==
a.K()&&550==b.K()){if(a.I()>b.I())return this.dE(a,b);this.Pt();a=this.dE(b,a);this.Pt();return a}return 0};c.prototype.bE=function(a,b,d){var e=a.Ha(),f=b.Ha(),h=new g.l,k=new g.l,m=1.7976931348623157E308;if(!d&&this.lY(a,b,e,f))return 0;for(;e.ab();)for(;e.Ia();)if(a=e.ia(),a.A(h),!(h.px(this.qh)>m)){for(;f.ab();)for(;f.Ia();)if(b=f.ia(),b.A(k),h.px(k)<m&&(b=a.ub(b,d),b*=b,b<m)){if(0==b)return 0;m=b}f.aj()}return Math.sqrt(m)};c.prototype.cE=function(a,b,d){var e=a.Ha(),f=new g.l,h=1.7976931348623157E308,
k=new g.h,m=b.I();for(d=!d&&1736==a.K();e.ab();)for(;e.Ia();){var n=e.ia();n.A(f);if(!(1<m&&f.px(this.qh)>h)){for(var p=0;p<m;p++){b.D(p,k);if(d&&0!=g.jd.Zd(a,k,0))return 0;var q=n.ge(k,!1);k.sub(n.ic(q));q=k.Uk();if(q<h){if(0==q)return 0;h=q}}d=!1}}return Math.sqrt(h)};c.prototype.dE=function(a,b){for(var d=1.7976931348623157E308,e=new g.h,f=new g.h,h,k=a.I(),m=b.I(),n=0;n<k;n++)if(a.D(n,e),!(1<m&&this.qh.dK(e)>d))for(var p=0;p<m;p++)if(b.D(p,f),h=g.h.zc(e,f),h<d){if(0==h)return 0;d=h}return Math.sqrt(d)};
c.prototype.lY=function(a,b,d,e){if(1736==a.K()){for(;e.ab();)if(e.Ia()){var f=e.ia();if(0!=g.jd.Zd(a,f.xc(),0))return!0}e.aj()}if(1736==b.K()){for(;d.ab();)if(d.Ia()&&(a=d.ia(),0!=g.jd.Zd(b,a.xc(),0)))return!0;d.aj()}return!1};c.prototype.im=function(a,b){if(a.B()||b.B())return NaN;a.A(this.Dj);b.A(this.qh);return this.$P(a,b)};return c}(),l=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}Na(a,c);a.prototype.W=function(b,d,e){if(null==b||null==d)throw g.i.O();if(b.B()||d.B())return NaN;
var f=b.K(),h=d.K();if(33==f){if(33==h)return g.h.ub(b.D(),d.D());if(197==h)return e=new g.l,d.A(e),e.ub(b.D());f=new g.ee;f.add(b);b=f}else if(197==f){if(197==h)return h=new g.l,b.A(h),e=new g.l,d.A(e),e.ub(h);f=new g.Ea;f.bd(b,!1);b=f}33==h?(h=new g.ee,h.add(d),d=h):197==h&&(h=new g.Ea,h.bd(d,!1),d=h);return(new z(e)).im(b,d)};a.local=function(){null===a.instance&&(a.instance=new a);return a.instance};a.prototype.K=function(){return 14};a.instance=null;return a}(g.Ge);g.lL=l})(R||(R={}));(function(g){var z=
function(){function l(c,a,b,d){this.uH=c;this.yH=a;this.od=d;this.VG=b}l.prototype.next=function(){var c=this.uH.next();return null==c?null:this.uC(c)};l.prototype.Ma=function(){return this.uH.Ma()};l.prototype.uC=function(c){var a=c.K();if(g.ba.Tn(a))return c;if(197==a)return a=new g.Ea(c.description),a.bd(c,!1),this.uC(a);if(c.B())return c;if(null==c)throw g.i.Ra();a=c.Ja();for(var b=new g.zb,d=0,e=c.ea();d<e;d++)this.OK(c,d,a,b);return a};l.prototype.OK=function(c,a,b,d){if(!(2>c.Ka(a))){var e=
c.Ca(a),f=c.Wc(a)-1,h=c.vb(0),k=c.ec(a),m=new g.ja(0);m.Jb(c.Ka(a)+1);var n=new g.ja(0);n.Jb(c.Ka(a)+1);m.add(k?e:f);m.add(e);for(e=new g.h;1<m.size;){var p=m.Gc();m.Jf();var q=m.Gc();c.D(p,e);d.Ec(e);c.D(q,e);d.Rc(e);q=this.NK(d,e,h,p,q,f);0<=q?(m.add(q),m.add(p)):n.add(p)}k||n.add(m.get(0));if(n.size==m.size)b.addPath(c,a,!0);else if(2<=n.size&&(!this.VG||2!=n.size||!(k||g.h.ub(c.Oa(n.get(0)),c.Oa(n.get(1)))<=this.yH))){a=new g.Ta;d=0;for(f=n.size;d<f;d++)c.we(n.get(d),a),0==d?b.nf(a):b.lineTo(a);
k&&(this.VG||2!=n.size||b.lineTo(a),b.Cp())}}};l.prototype.NK=function(c,a,b,d,e,f){var h=e-1;e<=d&&(h=f);f=e=-1;for(d+=1;d<=h;d++){b.uc(2*d,a);var k=a.x,m=a.y;c.ic(c.ge(a,!1),a);a.x-=k;a.y-=m;k=a.length();k>this.yH&&k>f&&(e=d,f=k)}return e};l.prototype.re=function(){};return l}();g.mL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 29};c.prototype.W=function(a,b,d,e){return a instanceof g.ba?(a=new g.$c(a),
this.W(a,b,d,e).next()):new g.mL(a,b,d,e)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(g.Ge);g.zC=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 21};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e,f,h,k,m){return a instanceof g.ba?(m=new g.$c(a),this.W(m,b,d,[e],f,h,!1,k).next()):!0===
k?(d=new g.BC(a,b,d,e,f,!1,!1,m),g.Ih.local().W(d,b,m)):new g.BC(a,b,d,e,f,!1,!1,m)};c.instance=null;return c}(g.Ge);g.AC=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e,f,h,k){if(f)throw g.i.Fe();if(null==a)throw g.i.O();this.za=-1;this.Os=c;this.wg=a;this.Ae=b;this.Es=d;this.bo=e;this.ho=-1;this.Vb=k;this.oT=new g.l;this.oT.Pa()}l.prototype.next=function(){for(var c;null!=(c=this.Os.next());)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(c,this.Es[this.ho]);
return null};l.prototype.Ma=function(){return this.za};l.prototype.VQ=function(c,a){return g.QK.buffer(c,this.wg,this.Ae,a,this.bo,this.Vb)};l.prototype.re=function(){};return l}();g.BC=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 24};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d){if(null==b)throw g.i.O();if(a.B()||1>a.Eb())return 0;if(4==
d)throw g.i.Fe();var e=g.cb.tc(b),f=g.cb.xv(e),h=g.cb.gv(e);f*=2-f;var k=e.Id().ci,m=a.K();if(1736==m||197==m)var n=a.ng();else g.ba.zd(m)?(n=new g.Ua(a.description),n.pc(a,!0)):n=a;if(0==e.Nb(b)){if(g.cb.Xc(b)){n=g.Jh.nj(n,b);1607==m&&n==a&&(n=g.ba.kg(a));a=new g.Oc;g.cb.ih(b).en(a);m=0;for(var p=n.I();m<p;m++){var q=n.Oa(m);q.x=g.Jh.an(q.x,a);n.Db(m,q)}}a=n.Ja();n=g.Jh.RI(b,e,n,a)?a:g.cb.Bh(n,b,e)}return this.cQ(n,d,h,f,k)};c.prototype.cQ=function(a,b,d,e,f){var h=new g.ha(0),k=0;for(a=a.Ha();a.ab();)for(;a.Ia();){var m=
a.ia(),n=m.bc();m=m.xc();n.scale(f);m.scale(f);g.kb.xd(d,e,n.x,n.y,m.x,m.y,h,null,null,b);k+=h.u}return k};c.instance=null;return c}(g.Ge);g.qL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e,f){return a instanceof g.ba?(a=new g.$c(a),this.W(a,b,d,e,f).next()):new g.oL(a,d,e,b,-1,-1,f)};c.instance=
null;return c}(g.Ge);g.nL=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e,f){if(0<f)throw g.i.Fe();if(4!=b&&0<e)throw g.i.Fe();if(null==a)throw g.i.O();this.za=-1;this.Os=c;this.wg=a;this.Ae=b;this.yT=d;this.xT=e}l.prototype.next=function(){for(var c;null!=(c=this.Os.next());)return this.za=this.Os.Ma(),this.Uy(c);return null};l.prototype.Ma=function(){return this.za};l.prototype.Uy=function(c){return g.ej.Sr(c,this.wg,this.Ae,this.yT,this.xT,this.Vb)};l.prototype.re=function(){};
return l}();g.oL=z})(R||(R={}));(function(g){(function(z){z[z.Unknown=0]="Unknown";z[z.Contains=1]="Contains";z[z.Within=2]="Within";z[z.Equals=3]="Equals";z[z.Disjoint=4]="Disjoint";z[z.Touches=8]="Touches";z[z.Crosses=16]="Crosses";z[z.Overlaps=32]="Overlaps";z[z.NoThisRelation=64]="NoThisRelation";z[z.Intersects=1073741824]="Intersects";z[z.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(g.YK||(g.YK={}));g.rL=function(){function z(){}z.iW=function(l,c){var a=l.K(),b=c.K();if(g.ba.zj(a)){var d=
l.Cb;if(null!=d&&(d=d.Hk,null!=d)){if(33==b){var e=c.D();d=d.Uo(e.x,e.y)}else e=new g.l,c.A(e),d=d.To(e);if(1==d)return 1;if(0==d)return 4}}if(g.ba.zj(b)&&(d=c.Cb,null!=d&&(d=d.Hk,null!=d))){33==a?(l=l.D(),d=d.Uo(l.x,l.y)):(c=new g.l,l.A(c),d=d.To(c));if(1==d)return 2;if(0==d)return 4}return 0};return z}()})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.K=
function(){return 15};c.prototype.W=function(a,b,d,e,f){return a instanceof g.ba?(a=new g.$c(a),b=new g.$c(b),this.W(a,b,d,e,void 0===f?-1:f).next()):void 0===f?new g.CC(a,b,d,e,-1):new g.CC(a,b,d,e,f)};c.prototype.yn=function(a,b,d){this.Ku(a)&&(b=g.ua.mj(b,a,!1),a.hj(d)||a.nu(b,d))};c.prototype.Ku=function(a){return g.Mx.uE(a)};c.instance=null;return c}(g.Ge);g.Zj=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e){this.vs=null==a;this.za=-1;this.Sd=c;this.wg=b;this.Pe=a.next();this.Fj=
this.Pe.K();this.Vb=d;this.Hi=e;if(-1!=this.Hi&&(0>=this.Hi||7<this.Hi))throw g.i.O("bad dimension mask");}l.prototype.next=function(){if(this.vs)return null;if(null!=this.Bw){var c=this.Bw.next();if(null!=c)return c;this.Bw=null}for(;null!=(c=this.Sd.next());)return this.za=this.Sd.Ma(),-1==this.Hi?c=this.Fa(c):(this.Bw=this.KS(c),c=this.Bw.next()),c;return null};l.prototype.Ma=function(){return this.za};l.prototype.Fa=function(c){var a=this.uK(c);if(null!=a)return a;a=g.ua.ov(this.Pe,c);var b=g.ua.Xd(this.wg,
a,!0);a=new g.l;this.Pe.A(a);var d=new g.l;c.A(d);a.X(2*b,2*b);a.Fa(d);a.X(100*b,100*b);b=g.Vd.clip(this.Pe,a,0,0);c=g.Vd.clip(c,a,0,0);return g.Hg.Cv(c,b,this.wg,this.Vb)};l.prototype.KI=function(c,a,b){var d=0;if(0!=(a&1))null==b[0]&&(b[0]=new g.ee(c)),d++;else for(var e=0;e<b.length-1;e++)b[e]=b[e+1];if(0!=(a&2))null==b[d]&&(b[d]=new g.Ua(c)),d++;else for(e=d;e<b.length-1;e++)b[e]=b[e+1];if(0!=(a&4))null==b[d]&&(b[d]=new g.Ea(c)),d++;else for(e=d;e<b.length-1;e++)b[e]=b[e+1];if(3!=d){c=[];for(e=
0;e<d;e++)c[e]=b[e];return new g.$c(c)}return new g.$c(b)};l.prototype.KS=function(c){var a=this.uK(c);if(null!=a){var b=[null,null,null];b[a.Eb()]=a;return this.KI(c.description,this.Hi,b)}a=g.ua.ov(this.Pe,c);b=g.ua.Xd(this.wg,a,!0);a=new g.l;this.Pe.A(a);a.X(2*b,2*b);var d=new g.l;c.A(d);a.Fa(d);a.X(100*b,100*b);b=g.Vd.clip(this.Pe,a,0,0);a=g.Vd.clip(c,a,0,0);b=g.Hg.Kz(a,b,this.wg,this.Vb);return this.KI(c.description,this.Hi,b)};l.prototype.uK=function(c){var a=g.ua.ov(c,this.Pe),b=g.ua.Xd(this.wg,
a,!0);a=c.K();var d=c.B(),e=this.Pe.B();e=d||e;if(!e){e=new g.l;c.A(e);var f=new g.l;this.Pe.A(f);f.X(2*b,2*b);e=!e.isIntersecting(f)}if(!e)if(f=g.rL.iW(this.Pe,c),4==f)e=!0;else{if(0!=(f&2))return this.Pe;if(0!=(f&1))return c}if(e)return b=g.ba.uf(a),e=g.ba.uf(this.Fj),b<e?l.CB(c,d):b>e?this.iJ():0==b?550==a&&33==this.Fj?this.iJ():l.CB(c,d):l.CB(c,d);if((-1==this.Hi||4==this.Hi)&&197==a&&197==this.Fj)return b=this.Pe,a=new g.l,c.A(a),d=new g.l,b.A(d),a.Fa(d),b=new g.Hh,c.copyTo(b),b.Zo(a),b;if(197==
a&&0==g.ba.uf(this.Fj)||197==this.Fj&&0==g.ba.uf(a))return d=197==a?c:this.Pe,c=197==a?this.Pe:c,a=new g.l,d.A(a),g.Vd.clip(c,a,b,0);if(0==g.ba.uf(a)&&0<g.ba.uf(this.Fj)||0<g.ba.uf(a)&&0==g.ba.uf(this.Fj)){b=g.ua.mj(this.wg,c,!1);if(550==a||33==a)return g.Hg.uG(c,this.Pe,b);if(550==this.Fj||33==this.Fj)return g.Hg.uG(this.Pe,c,b);throw g.i.Ra();}return-1!=this.Hi&&2!=this.Hi||1607!=a||1736!=this.Fj?-1!=this.Hi&&2!=this.Hi||1736!=a||1607!=this.Fj?null:this.rK(this.Pe,c):this.rK(c,this.Pe)};l.prototype.rK=
function(c,a){var b=c,d=a,e=g.ua.mj(this.wg,a,!1),f=new g.l;d.A(f);var h=new g.l;b.A(h);h.X(2*e,2*e);f.Fa(h);f.X(10*e,10*e);b=c=g.Vd.clip(c,f,0,0);h=new g.ja(0);var k=-1,m=d.Cb;if(null!=m){var n=m.Hk;if(null!=n){k=0;h.Jb(b.I()+b.ea());for(var p=new g.l,q=b.Ha();q.ab();)for(;q.Ia();){q.ia().A(p);var t=n.To(p);1==t?h.add(1):0==t?h.add(0):(h.add(-1),k++)}}}5<a.I()&&(d=a=g.Vd.clip(a,f,0,0),m=d.Cb);0>k&&(k=b.sz());f=b.I()+d.I();if(k*d.I()>Math.log(f)*f*4)return null;f=null;k=d.Ha();null!=m&&null!=m.Gb&&
(f=m.Gb);null==f&&20<d.I()&&(f=g.ua.iE(d));c=c.Ja();d=null;m=b.Ha();n=[0,0,0,0,0,0,0,0,0];p=new g.ce(0);q=new g.jg;t=-1;for(var v=0,F=0,W=0<h.size,ba=-1;m.ab();){ba=m.gb;var aa=0;t=-1;for(v=0;m.Ia();){var fa=W?g.P.truncate(h.get(F)):-1;F++;var ka=m.ia();if(0>fa){if(null!=f)for(null==d?d=f.qR(ka,e):d.Wo(ka,e),fa=d.next();-1!=fa;fa=d.next()){k.Wb(f.ka(fa));fa=k.ia();var la=ka.Fa(fa,null,n,null,e);for(fa=0;fa<la;fa++)p.add(n[fa])}else for(k.aj();k.ab();)for(;k.Ia();)for(fa=k.ia(),la=ka.Fa(fa,null,n,
null,e),fa=0;fa<la;fa++)p.add(n[fa]);if(0<p.size){p.Wd(0,p.size,function(Fa,Sa){return Fa-Sa});var ma=0;p.add(1);la=-1;fa=0;for(var sa=p.size;fa<sa;fa++){var wa=p.get(fa);if(wa!=ma){var Ga=!1;0!=ma||1!=wa?(ka.dh(ma,wa,q),ma=q.get()):(ma=ka,Ga=!0);if(2<=aa){c.Fr(b,ba,t,v,3==aa);if(1!=this.LD(a,ma.bc(),e)&&1!=this.MD(a,ma,e))return null;c.pc(ma,!1);aa=1;v=0}else switch(la=this.MD(a,ma,e),la){case 1:Ga?2>aa?(t=m.xb()-b.Ca(ba),v=1,aa=0==aa?3:2):v++:(c.pc(ma,0==aa),aa=1);break;case 0:aa=0;t=-1;v=0;break;
default:return null}ma=wa}}}else{fa=this.LD(a,ka.bc(),e);if(0>fa)return null;1==fa?(2>aa&&(t=m.xb()-b.Ca(ba),aa=0==aa?3:2),v++):(t=-1,v=0)}p.clear(!1)}else 0!=fa&&1==fa&&(0==aa?(aa=3,t=m.xb()-b.Ca(ba)):1==aa?(aa=2,t=m.xb()-b.Ca(ba)):v++)}2<=aa&&(c.Fr(b,ba,t,v,3==aa),t=-1)}return c};l.prototype.LD=function(c,a,b){return g.Fg.ym(c,a,b)};l.prototype.MD=function(c,a,b){var d=a.bc();a=a.xc();var e=g.Fg.ym(c,d,b),f=g.Fg.ym(c,a,b);if(1==e&&0==f||0==e&&1==f)return-1;if(0==e||0==f)return 0;if(1==e||1==f)return 1;
e=new g.h;e.add(d,a);e.scale(.5);c=g.Fg.ym(c,e,b);return 0==c?0:1==c?1:-1};l.CB=function(c,a){return a?c:c.Ja()};l.prototype.iJ=function(){null==this.tH&&(this.tH=this.Pe.Ja());return this.tH};l.prototype.re=function(){};return l}();g.CC=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 28};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e,f,h,k){return a instanceof
g.ba?(a=new g.$c(a),this.W(a,b,d,e,f,h,k).next()):new g.sL(a,b,d,e,f,h,k)};c.instance=null;return c}(g.Ge);g.DC=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d,e,f,h){this.za=-1;this.Sd=c;this.Oj=a;this.La=b;this.Mi=d;this.xA=e;this.pH=f;this.od=h}l.prototype.next=function(){var c=this.Sd.next();return null!=c?(this.za=this.Sd.Ma(),this.eL(c)):null};l.prototype.Ma=function(){return this.za};l.prototype.eL=function(c){var a=0>=this.pH?g.ua.mj(this.Oj,c,!1):this.pH;return g.DK.W(c,this.La,
this.Mi,this.xA,a,this.od)};l.prototype.re=function(){};return l}();g.sL=z})(R||(R={}));(function(g){(function(l){l[l.clipToDomainOnly=1]="clipToDomainOnly";l[l.clipWithHorizon=2]="clipWithHorizon";l[l.foldAndClipWithHorizon=3]="foldAndClipWithHorizon"})(g.IK||(g.IK={}));var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 0};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d){return a instanceof
g.ba?(a=new g.$c(a),this.W(a,b,d).next()):new g.tL(a,b,d)};c.prototype.transform=function(a,b,d,e){return g.du.transform(a,b,d,e,!0)};c.prototype.St=function(a,b,d,e){return g.du.St(a,b,d,e)};c.instance=null;return c}(g.Ge);g.Gx=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b){this.za=-1;this.Sd=c;this.HT=a;this.od=b}l.prototype.next=function(){var c=this.Sd.next();return null!=c?(this.za=this.Sd.Ma(),g.du.Bh(c,this.HT,this.od)):null};l.prototype.Ma=function(){return this.za};l.prototype.re=
function(){};return l}();g.tL=z})(R||(R={}));(function(g){var z=function(){function c(){}c.prototype.reset=function(){this.rh=this.zk=-1;this.ws=this.mq=!1};c.prototype.vQ=function(a,b,d){for(a.Wb(b,d);a.Ia();){var e=a.ia();e=e.Rb();if(0!=e)return a.xb()}for(a.Wb(b,d);a.zz();)if(e=a.ni(),e=e.Rb(),0!=e)return a.xb();return-1};c.prototype.wQ=function(a,b){for(a.Wb(b,-1);a.zz();)if(0!=a.ni().Rb())return a.xb();return-1};c.prototype.uQ=function(a,b){a.Wb(b,-1);for(a.ia();a.Ia();)if(0!=a.ia().Rb())return a.xb();
return-1};c.prototype.tQ=function(a,b,d,e){this.zk=this.vQ(b,d,e);if(-1!=this.zk){b.Wb(this.zk,-1);var f=b.ia(),h=f.ic(f.ge(a,!1));d=g.h.zc(h,a);e=new g.h;e.N(h);e.sub(f.bc());h=new g.h;h.N(a);h.sub(f.bc());this.mq=0>e.yi(h);this.rh=this.uQ(b,this.zk);if(-1!=this.rh){b.Wb(this.rh,-1);f=b.ia();var k=f.ge(a,!1);k=f.ic(k);var m=g.h.zc(k,a);m>d?this.rh=-1:(e.N(k),e.sub(f.bc()),h.N(a),h.sub(f.bc()),this.ws=0>e.yi(h))}-1==this.rh&&(this.rh=this.wQ(b,this.zk),-1!=this.rh&&(b.Wb(this.rh,-1),f=b.ia(),k=f.ge(a,
!1),k=f.ic(k),m=g.h.zc(k,a),m>d?this.rh=-1:(e.N(k),e.sub(f.bc()),h.N(a),h.sub(f.bc()),this.ws=0>e.yi(h),a=this.zk,this.zk=this.rh,this.rh=a,a=this.mq,this.mq=this.ws,this.ws=a)))}};c.prototype.YN=function(a,b,d,e,f){d=d.Ha();this.tQ(a,d,e,f);if(-1!=this.zk&&-1==this.rh)return this.mq;if(-1!=this.zk&&-1!=this.rh){if(this.mq==this.ws)return this.mq;d.Wb(this.zk,-1);a=d.ia().lg();d.Wb(this.rh,-1);b=d.ia().lg();return 0<=a.yi(b)?!0:!1}return b};return c}(),l=function(c){function a(){return null!==c&&
c.apply(this,arguments)||this}Na(a,c);a.local=function(){null===a.instance&&(a.instance=new a);return a.instance};a.prototype.K=function(){return 3};a.prototype.iz=function(b,d,e){var f;void 0===f&&(f=!1);if(b.B())return new g.bm;d=d.D();var h=b,k=b.K();197==k&&(h=new g.Ea,h.bd(b,!1),k=1736);switch(k){case 33:return this.sI(h,d);case 550:return this.eI(h,d);case 1607:case 1736:return this.XT(h,d,e,f);default:throw g.i.ga("not implemented");}};a.prototype.jz=function(b,d){if(b.B())return new g.bm;
d=d.D();var e=b,f=b.K();197==f&&(e=new g.Ea,e.bd(b,!1),f=1736);switch(f){case 33:return this.sI(e,d);case 550:case 1607:case 1736:return this.eI(e,d);default:throw g.i.ga("not implemented");}};a.prototype.kz=function(b,d,e,f){if(0>f)throw g.i.O();if(b.B())return[];d=d.D();var h=b,k=b.K();197==k&&(h=new g.Ea,h.bd(b,!1),k=1736);switch(k){case 33:return this.OU(h,d,e,f);case 550:case 1607:case 1736:return this.oU(h,d,e,f);default:throw g.i.ga("not implemented");}};a.prototype.XT=function(b,d,e,f){if(1736==
b.K()&&e&&(e=new g.l,b.A(e),e=g.ua.Xd(null,e,!1),0!=(f?g.jd.Zd(b,d,0):g.jd.Zd(b,d,e)))){var h=new g.bm(d,0,0);f&&h.RJ(!0);return h}var k=b.Ha();h=new g.h;for(var m=e=-1,n=1.7976931348623157E308,p=0;k.ab();)for(;k.Ia();){var q=k.ia();q=q.ic(q.ge(d,!1));var t=g.h.zc(q,d);t<n?(p=1,h=q,e=k.xb(),m=k.gb,n=t):t==n&&p++}h=new g.bm(h,e,Math.sqrt(n));f&&(k.Wb(e,m),q=k.ia(),f=0>g.h.Wq(d,q.bc(),q.xc()),1<p&&(p=new z,p.reset(),f=p.YN(d,f,b,e,m)),h.RJ(f));return h};a.prototype.sI=function(b,d){b=b.D();d=g.h.ub(b,
d);return new g.bm(b,0,d)};a.prototype.eI=function(b,d){for(var e=b.vb(0),f=b.I(),h=b=0,k=0,m=1.7976931348623157E308,n=0;n<f;n++){var p=new g.h;e.uc(2*n,p);var q=g.h.zc(p,d);q<m&&(h=p.x,k=p.y,b=n,m=q)}d=new g.bm;d.by(h,k,b,Math.sqrt(m));return d};a.prototype.OU=function(b,d,e,f){if(0==f)return e=[];e*=e;b=b.D();d=g.h.zc(b,d);d<=e?(e=[],f=new g.bm,f.by(b.x,b.y,0,Math.sqrt(d)),e[0]=f):e=[];return e};a.prototype.oU=function(b,d,e,f){if(0==f)return f=[];var h=b.vb(0),k=b.I();b=[];e*=e;for(var m=0;m<k;m++){var n=
h.read(2*m),p=h.read(2*m+1),q=d.x-n,t=d.y-p;q=q*q+t*t;q<=e&&(t=new g.bm,t.by(n,p,m,Math.sqrt(q)),b.push(t))}d=b.length;b.sort(function(v,F){return v.La<F.La?-1:v.La==F.La?0:1});if(f>=d)return b.slice(0);b.length=f;return b.slice(0)};a.instance=null;return a}(g.Ge);g.Hx=l})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 4};c.prototype.W=function(a,b,d,e,f){return g.cm.tB(a,b,d,e,f)};c.local=function(){null===
c.instance&&(c.instance=new c);return c.instance};c.prototype.Ku=function(a){return g.Xt.ry(a)};c.prototype.yn=function(a,b,d){g.Xt.xD(a,b,d)};c.instance=null;return c}(g.Ge);g.uL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 33};c.prototype.W=function(a,b,d,e,f){return 1073741824===a?!g.vd.uB(b,d,e,4,f):g.vd.uB(b,d,e,a,f)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};
c.prototype.Ku=function(a){return g.Xt.ry(a)};c.prototype.yn=function(a,b,d){g.Xt.xD(a,b,d)};c.instance=null;return c}(g.Ge);g.fj=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d){this.od=d;this.lT=b;this.za=-1;if(null==c)throw g.i.O();this.Ak=c;this.Oj=a}l.prototype.next=function(){var c;if(null!=(c=this.Ak.next())){this.za=this.Ak.Ma();if(null!=this.od&&!this.od.progress(-1,-1))throw g.i.hu("user_canceled");return this.$B(c)}return null};l.prototype.Ma=function(){return this.za};
l.prototype.$B=function(c){if(null==c)throw g.i.O();return g.Ix.YJ(c,this.Oj,this.lT,this.od)};l.prototype.re=function(){};return l}();g.vL=z})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 26};c.prototype.W=function(a,b,d,e){return a instanceof g.ba?(a=new g.$c(a),this.W(a,b,d,e).next()):new g.vL(a,b,d,e)};c.prototype.ts=function(a,b,d,e,f){return 0<(void 0!==e?g.Ix.ts(a,b,d,e,f):g.Ix.ts(a,b,!1,null,d))};
c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(g.Ge);g.$l=z})(R||(R={}));(function(g){var z=function(){function f(){this.Aq=0}f.prototype.iX=function(h){this.Aq&=-2;this.Aq|=h?1:0};f.prototype.Yp=function(){return 0!=(this.Aq&1)};f.prototype.SF=function(){return this.Yp()?0:1};return f}();g.tY=z;var l=function(){return function(){}}(),c=function(){return function(f,h,k,m){this.x=f;this.y=h;this.Ci=k;this.zm=m}}(),a=function(){function f(h){this.Ce=
h}f.prototype.compare=function(h,k,m){h=h.ka(m);k=this.Ce.lf.read(2*k);h=this.Ce.lf.read(2*h);k-=h;return 0>k?-1:0<k?1:0};return f}(),b=function(){function f(h){this.Ce=h}f.prototype.compare=function(h,k,m){k=this.Ce.hb[k];h=this.Ce.hb[h.ka(m)];var n=k.Yp(),p=h.Yp();m=k.oe.Me(this.Ce.Oo,0);var q=h.oe.Me(this.Ce.Oo,0);m==q&&(m=Math.min(n?k.oe.oa:k.oe.ma,p?h.oe.oa:h.oe.ma),n=.5*(m-this.Ce.Oo)+this.Ce.Oo,n==this.Ce.Oo&&(n=m),m=k.oe.Me(n,0),q=h.oe.Me(n,0));return m<q?-1:m>q?1:0};return f}(),d=function(){function f(h,
k){this.TI=new g.h;this.parent=h;this.ZR=k}f.prototype.qr=function(h,k,m){var n=this.parent,p=this.ZR;m.Wd(h,k,function(q,t){return n.Oh(q,t,p)})};f.prototype.bq=function(h){h=this.parent.ii.get(h);this.parent.lf.uc(2*(h>>1),this.TI);return this.TI.y+(0!=(h&1)?this.parent.Qj:-this.parent.Qj)};return f}(),e=function(){function f(h,k,m,n,p){this.iH=h.description;this.Y=h;this.Sg=k;this.Qj=g.ua.mj(this.Sg,h,!1);this.Do=g.ua.mj(this.Sg,h,!0);this.sA=m;this.jT=this.iH.Ba;this.hb=[];this.ro=[];this.oh=
new g.lp;this.fb=new g.$j;this.le=new g.Nd;this.UG=this.sl=p}f.prototype.$S=function(){this.UG=!0;return(!g.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?g.ba.Ic(this.Y.K())?this.kO()?1607==this.Y.K()?this.mO()?2:0:this.nO()?this.oO():0:0:2:0};f.prototype.fC=function(h,k){var m=this.lf.read(2*h);h=this.lf.read(2*h+1);var n=this.lf.read(2*k);k=this.lf.read(2*k+1);var p=!g.$t.Ev(m,h,n,k,this.Qj*this.Qj);return p?p:0==this.Y.Eb()?!1:m==n&&h==k};f.prototype.BE=function(){for(var h=this.Y,k=h.yf?
3:2,m=0,n=h.ea();m<n;m++)if(h.Ka(m)<k)return this.le=new g.Nd(1,m,0),!1;return!0};f.prototype.yE=function(h){var k=this.Y,m=k.Ha(),n=k.hasAttribute(1);for(k=n?g.ua.rE(this.Sg,k,!1):0;m.ab();)for(;m.Ia();){var p=m.ia();if(!(p.Rb()>this.Qj)){if(h&&n){var q=p.yv(1,0);p=p.yv(1,0);if(Math.abs(p-q)>k)continue}this.le=new g.Nd(2,m.xb(),-1);return!1}}return!0};f.prototype.hO=function(){var h=this.Y,k=null;g.ba.Ic(this.Y.K())&&(k=this.Y);var m=(this.UG||this.sl)&&null!=k,n=h.I();this.lf=h.vb(0);this.ii=new g.ja(0);
this.ii.Jb(2*n);this.hi=new g.ja(0);this.hi.Jb(2*n);m&&(null==this.Hl&&(this.Hl=new g.ja(0)),this.Hl.Jb(n));for(var p=h=0;p<n;p++)if(this.ii.add(2*p),this.ii.add(2*p+1),this.hi.add(2*p),this.hi.add(2*p+1),m){for(;p>=k.Wc(h);)h++;this.Hl.add(h)}(new g.Zt).sort(this.hi,0,2*n,new d(this,m));this.fb.clear();this.fb.Xo(new a(this));this.fb.Ee(n);k=0;for(n*=2;k<n;k++)if(m=this.hi.get(k),h=this.ii.get(m),m=h>>1,0==(h&1)){h=this.fb.addElement(m,-1);p=this.fb.xe(h);if(-1!=p&&!this.fC(this.fb.ka(p),m))return this.le=
new g.Nd(3,m,this.fb.ka(p)),!1;var q=this.fb.lb(h);if(-1!=q&&!this.fC(this.fb.ka(q),m))return this.le=new g.Nd(3,m,this.fb.ka(q)),!1}else if(h=this.fb.search(m,-1),p=this.fb.xe(h),q=this.fb.lb(h),this.fb.wd(h,-1),-1!=p&&-1!=q&&!this.fC(this.fb.ka(p),this.fb.ka(q)))return this.le=new g.Nd(3,this.fb.ka(p),this.fb.ka(q)),!1;return!0};f.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()};f.prototype.jO=function(){var h=new g.hd;h.Ib(this.Y);var k=new g.Nd;return g.bu.fI(!1,h,this.Qj,k,this.od)?
(k.Lo=h.Va(k.Lo),k.Mo=h.Va(k.Mo),this.le.Yt(k),!1):!0};f.prototype.iO=function(){var h=this.Y,k=h.Ha();for(h=h.Ha();k.ab();)for(;k.Ia();){var m=k.ia();if(!k.Sn()||!k.VS()){h.wW(k);do for(;h.Ia();){var n=h.ia();n=m.Br(n,this.Qj,!0);if(0!=n)return this.le=new g.Nd(2==n?5:4,k.xb(),h.xb()),!1}while(h.ab())}}return!0};f.prototype.nO=function(){var h=this.Y;this.hb.length=0;this.ro.length=0;this.ag=h.Ha();this.ag.EB();var k=new g.ja(0);k.Jb(10);var m=NaN,n=0,p=0;for(h=2*h.I();p<h;p++){var q=this.hi.get(p);
q=this.ii.get(q);if(0==(q&1)){q>>=1;var t=this.lf.read(2*q),v=this.lf.read(2*q+1);if(0!=k.size&&(t!=m||v!=n)){if(!this.LI(k))return!1;null!=k&&k.clear(!1)}k.add(q);m=t;n=v}}return this.LI(k)?!0:!1};f.prototype.mO=function(){for(var h=this.Y,k=Array(h.ea()),m=0,n=h.ea();m<n;m++)k[m]=h.Pn(m);n=new l;var p=new g.h;m=this.hi.get(0);m=this.ii.get(m);var q=m>>1;this.lf.uc(2*q,p);m=this.Hl.get(q);var t=k[m],v=h.Ca(m),F=h.Wc(m)-1;n.gl=q==v||q==F;n.jy=this.sl?!t&&n.gl:n.gl;n.Ci=m;n.x=p.x;n.y=p.y;n.zm=q;for(var W=
new l,ba=1,aa=this.hi.size;ba<aa;ba++)if(m=this.hi.get(ba),m=this.ii.get(m),0==(m&1)){q=m>>1;this.lf.uc(2*q,p);m=this.Hl.get(q);m!=n.Ci&&(t=k[m],v=h.Ca(m),F=h.Wc(m)-1);var fa=q==v||q==F,ka=this.sl?!t&&n.gl:n.gl;W.x=p.x;W.y=p.y;W.Ci=m;W.zm=q;W.jy=ka;W.gl=fa;if(W.x==n.x&&W.y==n.y)if(this.sl){if(!W.jy||!n.jy)if(W.Ci!=n.Ci||!W.gl&&!n.gl)return this.le=new g.Nd(8,W.zm,n.zm),!1}else if(!W.gl||!n.gl)return this.le=new g.Nd(5,W.zm,n.zm),!1;m=n;n=W;W=m}return!0};f.prototype.EE=function(){for(var h=this.Y,
k=[],m=-1,n=!1,p=0,q=h.ea();p<q;p++)h.Gv(p)&&(n=!1,m++,p<q-1&&(h.Gv(p+1)||(n=!0))),k[p]=n?m:-1;n=new g.h;p=this.hi.get(0);p=this.ii.get(p);var t=p>>1;this.lf.uc(2*t,n);p=this.Hl.get(t);m=new c(n.x,n.y,p,t,k[p]);h=[];var v=1;for(q=this.hi.size;v<q;v++)if(p=this.hi.get(v),p=this.ii.get(p),0==(p&1)){t=p>>1;this.lf.uc(2*t,n);p=this.Hl.get(t);p=new c(n.x,n.y,p,t,k[p]);if(p.x==m.x&&p.y==m.y){if(p.Ci==m.Ci)return this.le=new g.Nd(9,p.zm,m.zm),!1;0<=k[p.Ci]&&k[p.Ci]==k[m.Ci]&&(0!=h.length&&h[h.length-1]==
m||h.push(m),h.push(p))}m=p}if(0==h.length)return!0;p=new g.lp(!0);g.P.bv(k,-1);n=-1;v=new g.h;v.Sc();m=0;for(q=h.length;m<q;m++){t=h[m];if(t.x!=v.x||t.y!=v.y)n=p.Rh(0),v.x=t.x,v.y=t.y;var F=k[t.Ci];-1==F&&(F=p.Rh(2),k[t.Ci]=F);p.addElement(F,n);p.addElement(n,F)}q=new g.ja(0);q.Jb(10);for(m=p.ke;-1!=m;m=p.lz(m))if(h=p.KF(m),0==(h&1)&&0!=(h&2)){h=-1;q.add(m);for(q.add(-1);0<q.size;){n=q.Gc();q.Jf();v=q.Gc();q.Jf();t=p.KF(v);if(0!=(t&1)){h=0==(t&2)?n:v;break}p.aX(v,t|1);for(t=p.sc(v);-1!=t;t=p.lb(t))F=
p.getData(t),F!=n&&(q.add(F),q.add(v))}if(-1!=h){p=-1;m=0;for(q=k.length;m<q;m++)if(k[m]==h){p=m;break}this.le=new g.Nd(10,p,-1);return!1}}return!0};f.prototype.oO=function(){var h=this.Y;if(0>=h.He())return this.le=new g.Nd(6,1==h.ea()?1:-1,-1),0;if(1==h.ea())return this.sl&&!this.EE()?0:2;this.vo=g.ja.rf(h.ea(),0);this.EA=g.ja.rf(h.ea(),-1);for(var k=-1,m=0,n=0,p=h.ea();n<p;n++){var q=h.Kr(n);this.vo.write(n,0>q?0:256);if(0<q)k=n,m=q;else{if(0==q)return this.le=new g.Nd(6,n,-1),0;if(0>k||m<Math.abs(q))if(this.le=
new g.Nd(7,n,-1),this.sl)return 0;this.EA.write(n,k)}}this.et=h.ea();this.Qm=new g.ja(0);this.Qm.Jb(10);p=h.I();this.Oo=NaN;h=new g.ja(0);h.Jb(10);this.Sq=g.ja.rf(p,-1);this.Jw=g.ja.rf(p,-1);null!=this.Bj?this.Bj.clear(!1):this.Bj=new g.ja(0);this.Bj.Jb(10);this.fb.clear();this.fb.Xo(new b(this));k=0;for(p*=2;0<this.et&&k<p;k++)if(m=this.hi.get(k),m=this.ii.get(m),0==(m&1)){m>>=1;n=this.lf.read(2*m+1);if(n!=this.Oo&&0!=h.size){if(!this.vt(h))return 0;null!=h&&h.clear(!1)}h.add(m);this.Oo=n}return 0<
this.et&&!this.vt(h)?0:this.sl?0==this.le.Lj&&this.EE()?2:0:0==this.le.Lj?2:1};f.prototype.LI=function(h){if(1==h.size)return!0;for(var k=0,m=h.size;k<m;k++){var n=h.get(k);this.ag.Wb(n);var p=this.ag.ni();this.hb.push(this.Uu(p,n,this.ag.gb,!0));this.ag.ia();p=this.ag.ia();this.hb.push(this.Uu(p,n,this.ag.gb,!1))}var q=this;this.hb.sort(function(F,W){return q.SP(F,W)});n=this.oh.ke;-1==n&&(n=this.oh.Rh(0));this.oh.hn(this.hb.length);k=0;for(m=this.hb.length;k<m;k++)this.oh.addElement(n,k);k=!0;for(var t=
m=-1;k;){k=!1;p=this.oh.sc(n);if(-1==p)break;for(var v=this.oh.lb(p);-1!=v;){m=this.oh.getData(p);t=this.oh.getData(v);m=this.hb[m].Ko;t=this.hb[t].Ko;if(m==t)if(k=!0,this.oh.kd(n,p),p=this.oh.xe(v),v=this.oh.kd(n,v),-1==v||-1==p)break;else continue;p=v;v=this.oh.lb(p)}}k=this.oh.ds(n);this.oh.GE(n);if(0<k)return this.le=new g.Nd(5,m,t),!1;k=0;for(m=h.size;k<m;k++)this.qB(this.hb[k]);this.hb.length=0;return!0};f.prototype.vt=function(h){for(var k=0,m=h.size;k<m;k++){var n=h.get(k),p=this.Sq.read(n);
if(-1!=p){var q=this.fb.ka(p);this.Bj.add(q);this.fb.wd(p,-1);this.qB(this.hb[q]);this.hb[q]=null;this.Sq.write(n,-1)}p=this.Jw.read(n);-1!=p&&(q=this.fb.ka(p),this.Bj.add(q),this.fb.wd(p,-1),this.qB(this.hb[q]),this.hb[q]=null,this.Jw.write(n,-1))}k=0;for(m=h.size;k<m;k++){n=h.get(k);this.ag.Wb(n);p=this.ag.ni();if(p.oa>p.ma){var t=this.ag.xb(),v=this.Uu(p,n,this.ag.gb,!0);0<this.Bj.size?(q=this.Bj.Gc(),this.Bj.Jf(),this.hb[q]=v):(q=this.hb.length,this.hb.push(v));p=this.fb.addElement(q,-1);-1==
this.Sq.read(t)?this.Sq.write(t,p):this.Jw.write(t,p);0==(this.vo.read(this.ag.gb)&3)&&this.Qm.add(p)}this.ag.ia();p=this.ag.ia();p.oa<p.ma&&(t=this.ag.kk(),v=this.Uu(p,n,this.ag.gb,!1),0<this.Bj.size?(q=this.Bj.Gc(),this.Bj.Jf(),this.hb[q]=v):(q=this.hb.length,this.hb.push(v)),p=this.fb.addElement(q,-1),-1==this.Sq.read(t)?this.Sq.write(t,p):this.Jw.write(t,p),0==(this.vo.read(this.ag.gb)&3)&&this.Qm.add(p))}k=0;for(m=this.Qm.size;k<m&&0<this.et;k++)if(p=this.Qm.get(k),0==(this.vo.read(this.hb[this.fb.ka(p)].DA)&
3)){h=-1;n=this.fb.xe(p);var F=p;v=null;q=-1;for(var W=0;-1!=n;){q=this.fb.ka(n);v=this.hb[q];q=v.DA;W=this.vo.read(q);if(0!=(W&3))break;F=n;n=this.fb.xe(n)}-1==n?(t=1,n=F):(h=1==(W&3)?q:this.EA.read(q),t=0!=v.SF()?0:1,n=this.fb.lb(n));do{q=this.fb.ka(n);v=this.hb[q];q=v.DA;F=this.vo.read(q);if(0==(F&3)){if(t!=v.SF())return this.le=new g.Nd(6,q,-1),!1;W=0==t||v.Yp()?2:1;F=F&252|W;this.vo.write(q,W);if(2==W&&0==this.le.Lj&&this.EA.read(q)!=h&&(this.le=new g.Nd(7,q,-1),this.sl))return!1;this.et--;if(0==
this.et)return!0}1==(F&3)&&(h=q);F=n;n=this.fb.lb(n);t=0!=t?0:1}while(F!=p)}null!=this.Qm?this.Qm.clear(!1):this.Qm=new g.ja(0);return!0};f.prototype.Uu=function(h,k,m,n){if(322==h.K())h=this.nP(h);else throw g.i.Ra();h.Ko=k;h.DA=m;h.Aq=0;h.iX(n);return h};f.prototype.nP=function(h){if(0<this.ro.length){var k=this.ro[this.ro.length-1];--this.ro.length;h.copyTo(k.oe)}else k=new z,k.oe=g.NC.kg(h);return k};f.prototype.qB=function(h){322==h.oe.K()&&this.ro.push(h)};f.prototype.fU=function(){for(var h=
this.Y.I(),k=new g.ja(0),m=0;m<h;m++)k.add(m);var n=this;k.Wd(0,h,function(p,q){return n.Qu(p,q)});for(m=1;m<h;m++)if(0==this.Qu(k.get(m-1),k.get(m)))return this.le=new g.Nd(3,k.get(m-1),k.get(m)),0;return 2};f.prototype.EV=function(){return this.BE()?this.yE(!0)?2:0:0};f.prototype.jV=function(){return this.$S()};f.prototype.kU=function(){for(var h=this.Y.I(),k=new g.ja(0),m=0;m<h;m++)k.add(m);var n=this;k.Wd(0,h,function(F,W){return n.KO(F,W)});var p=Array(h);g.P.bv(p,!1);p[k.get(0)]=!0;for(m=1;m<
h;m++){var q=k.get(m-1),t=k.get(m);0==this.Qu(q,t)?p[t]=!1:p[t]=!0}k=this.Y.Ja();q=this.Y;t=0;var v=1;for(m=0;m<h;m++)p[m]?v=m+1:(t<v&&k.Gd(q,t,v),t=m+1);t<v&&k.Gd(q,t,v);k.Eh(2,this.Do);return k};f.prototype.IV=function(){var h=this.Y,k=h.Ha(),m=h.Ha(),n=this.Y.Ja(),p=this.Y,q=h.hasAttribute(1),t=q?g.ua.rE(this.Sg,h,!0):0,v=new g.ja(0),F=new g.ja(0);v.Jb(g.P.truncate(h.I()/2+1));for(F.Jb(g.P.truncate(h.I()/2+1));k.ab();)if(m.ab(),!(2>h.Ka(k.gb))){m.yW();for(var W,ba,aa=!0;k.Ia();){var fa=k.ia(),
ka=m.ni();if(k.xb()>m.xb())break;aa&&(v.add(k.xb()),F.add(m.kk()),aa=!1);ba=v.Gc();var la=k.kk();if(1<la-ba){var ma=new g.h;ma.vc(h.Oa(ba),h.Oa(la));W=ma.length()}else W=fa.Rb();ba=F.Gc();la=m.xb();1<la-ba?(ma=new g.h,ma.vc(h.Oa(ba),h.Oa(la)),ba=ma.length()):ba=ka.Rb();W>this.Do?v.add(k.kk()):q&&(W=h.Vc(1,v.Gc(),0),fa=fa.jv(1,0),Math.abs(fa-W)>t&&v.add(k.kk()));ba>this.Do?F.add(m.xb()):q&&(W=h.Vc(1,F.Gc(),0),fa=ka.jv(1,0),Math.abs(fa-W)>t&&F.add(m.xb()))}v.Gc()<F.Gc()?v.size>F.size?v.Jf():F.Jf():
(v.Gc()!=F.Gc()&&F.Jf(),F.Jf());if(2<=F.size+v.size){aa=new g.Ta;ka=0;for(fa=v.size;ka<fa;ka++)p.we(v.get(ka),aa),0==ka?n.nf(aa):n.lineTo(aa);for(ka=F.size-1;0<ka;ka--)p.we(F.get(ka),aa),n.lineTo(aa);p.ec(k.gb)?n.Cp():0<F.size&&(p.we(F.get(0),aa),n.lineTo(aa))}null!=v&&v.clear(!1);null!=F&&F.clear(!1)}n.Eh(2,this.Do);return n};f.prototype.mV=function(){return this.zX()};f.prototype.zX=function(){if(1736==this.Y.K()&&1==this.Y.Kn())return g.Hg.Ok(this.Y,this.Do,!0,!1,this.od);this.Ji=new g.hd;this.Ji.Ib(this.Y);
0!=this.Ji.gd&&(1!=this.sA&&g.Vk.W(this.Ji,this.Do,this.od,!0),1736==this.Y.K()&&g.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od));this.Y=this.Ji.Ke(this.Ji.md);1736==this.Y.K()&&(this.Y.hm(),this.Y.$o(0));this.Y.Eh(2,this.Do);return this.Y};f.ts=function(h,k,m,n,p){null!=n&&(n.Lj=0,n.Lo=-1,n.Mo=-1);if(h.B())return 1;var q=h.K();if(33==q)return 1;var t=g.ua.mj(k,h,!1);if(197==q)return k=new g.l,h.A(k),k.Di(t)?(null!=n&&(n.Lj=2,n.Lo=-1,n.Mo=-1),0):1;if(g.ba.zd(q))return t=new g.Ua(h.description),t.pc(h,
!0),f.ts(t,k,m,n,p);var v=h.qm(t);m=m?-1:v;if(-1!=m)return m;k=new f(h,k,m,p,!1);if(550==q)m=k.fU();else if(1607==q)m=k.EV();else if(1736==q)m=k.jV();else throw g.i.Ra();h.Eh(m,t);null!=n&&0==m&&n.Yt(k.le);return m};f.YJ=function(h,k,m,n){if(h.B())return h;var p=h.K();if(33==p)return h;var q=g.ua.mj(k,h,!1);if(197==p)return k=new g.l,h.A(k),k.Di(q)?h.Ja():h;if(g.ba.zd(p))return p=new g.Ua(h.description),p.pc(h,!0),f.YJ(p,k,m,n);q=h.qm(q);m=m?-1:q;if(2==m)return h;h=new f(h,k,m,n,!1);if(550==p)h=h.kU();
else if(1607==p)h=h.IV();else if(1736==p)h=h.mV();else throw g.i.Ra();return h};f.prototype.Oh=function(h,k,m){if(h==k)return 0;h=this.ii.get(h);var n=this.ii.get(k);k=h>>1;var p=n>>1,q=new g.h,t=new g.h;this.lf.uc(2*k,q);q.y+=0!=(h&1)?this.Qj:-this.Qj;this.lf.uc(2*p,t);t.y+=0!=(n&1)?this.Qj:-this.Qj;h=q.compare(t);return 0==h&&m?(m=this.Hl.get(k)-this.Hl.get(p),0>m?-1:0<m?1:0):h};f.prototype.Qu=function(h,k){if(h==k)return 0;var m=this.Y,n=m.Oa(h),p=m.Oa(k);if(n.x<p.x)return-1;if(n.x>p.x)return 1;
if(n.y<p.y)return-1;if(n.y>p.y)return 1;for(n=1;n<this.jT;n++){p=this.iH.ld(n);for(var q=g.sa.Wa(p),t=0;t<q;t++){var v=m.Vc(p,h,t),F=m.Vc(p,k,t);if(v<F)return-1;if(v>F)return 1}}return 0};f.prototype.KO=function(h,k){var m=this.Qu(h,k);return 0==m?h<k?-1:1:m};f.prototype.SP=function(h,k){if(h===k)return 0;var m=h.oe.lg();h.Yp()&&m.Uq();h=k.oe.lg();k.Yp()&&h.Uq();k=m.su();var n=h.su();return n==k?(k=m.yi(h),Math.abs(k)<=8.881784197001252E-16*(Math.abs(h.x*m.y)+Math.abs(h.y*m.x))&&(k--,k++),0>k?1:0<
k?-1:0):k<n?-1:1};return f}();g.Ix=e})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 30};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.W=function(a,b,d,e){return a instanceof g.ba?(a=new g.$c(a),b=new g.$c(b),this.W(a,b,d,e).next()):new g.wL(a,b,d,e)};c.gp=function(a,b,d,e){var f=a.Eb(),h=b.Eb();if(a.B()&&b.B())return f>h?a:b;if(a.B())return b;if(b.B())return a;
var k=new g.l,m=new g.l,n=new g.l;a.A(k);b.A(m);n.L(k);n.$b(m);k=g.ua.Xd(d,n,!0);m=a.K();n=b.K();return 33==m&&33==n?c.WU(a,b,k):m!=n?0<f||0<h?f>h?a:b:550==m?c.dI(a,b,k):c.dI(b,a,k):g.Hg.gp(a,b,d,e)};c.WU=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.D(),f=b.D(),h=new g.ee(a.description);g.h.zc(e,f)>d&&(h.add(a),h.add(b));return h};c.dI=function(a,b,d){var e=a.vb(0),f=a.I(),h=b.D(),k=a.Ja();d=d*Math.sqrt(2)*1.00001;var m=new g.l;a.A(m);m.X(d,d);if(m.contains(h)){d*=d;m=!1;for(var n=[],p=0;p<
f;p++)n[p]=!1;for(p=0;p<f;p++){var q=e.read(2*p),t=e.read(2*p+1);q-=h.x;t-=h.y;q*q+t*t<=d&&(m=!0,n[p]=!0)}if(m)for(p=0;p<f;p++)n[p]||k.Gd(a,p,p+1);else k.Gd(a,0,f),k.add(b)}else k.Gd(a,0,f),k.add(b);return k};c.instance=null;return c}(g.Ge);g.Jx=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b,d){this.vs=null==a;this.za=-1;this.Sd=c;this.wg=b;this.IT=a.next();this.Vb=d}l.prototype.next=function(){if(this.vs)return null;var c;return null!=(c=this.Sd.next())?(this.za=this.Sd.Ma(),g.Jx.gp(c,
this.IT,this.wg,this.Vb)):null};l.prototype.Ma=function(){return this.za};l.prototype.re=function(){};return l}();g.wL=z})(R||(R={}));(function(g){var z=function(){function a(){}a.prototype.Az=function(){this.Vy=null;this.zx=-1;this.vK=!1};return a}(),l=function(){function a(){this.Ir=0;this.rj=[]}a.prototype.kN=function(b){this.Ir+=b.zx;this.rj.push(b)};a.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx;--this.rj.length};a.prototype.iy=function(){return this.rj[this.rj.length-1]};a.prototype.Nb=
function(b){return b===this};return a}(),c=function(){function a(b,d,e){this.za=-1;this.Jc=!1;this.vH=[!1,!1,!1,!1];this.wq=[0,0,0,0];this.eA=!1;this.Bk=-1;this.kq=0;this.eo=-1;this.Fo=[];this.Sd=b;this.wg=d;this.Vb=e}a.ZD=function(b){var d=[],e=0;for(b=Object.keys(b);e<b.length;e++)d.push(Number(b[e]));d.sort(function(f,h){return f-h});return d};a.prototype.aG=function(b){var d=this.Fo[b],e=a.ZD(d)[0],f=d[e],h=f.iy().Vy;f=f.iy().vK;delete d[e];f&&(h=g.$l.local().W(h,this.wg,!1,this.Vb),0==b&&33==
h.K()&&(b=new g.ee(h.description),h.B()||b.add(h),h=b));return h};a.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(-1==this.Bk)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw g.i.Ra();if(this.vH[this.eo])break}this.za++;return this.aG(this.eo)}this.za=0;this.eo=this.Bk;return this.aG(this.Bk)};a.prototype.Ma=function(){return this.za};a.prototype.lK=function(){if(this.Jc)return!0;var b=null;null!=this.Sd&&(b=this.Sd.next(),null==
b&&(this.Jc=!0,this.Sd=null));g.op.Bp(this.Vb);if(null!=b){var d=b.Eb();this.vH[d]=!0;d>=this.Bk&&!this.eA&&(this.HD(d,!1,b),d>this.Bk&&!this.eA&&this.uW(d))}if(0<this.kq)for(d=0;d<=this.Bk;d++)for(;1<this.wq[d];)if(b=this.AO(d),0!=b.length)b=g.Hg.QP(b,this.wg,this.Vb),this.HD(d,!0,b);else break;return this.Jc};a.prototype.AO=function(b){for(var d=[],e=[],f=this.Fo[b],h=a.ZD(f),k=0;k<h.length;k++){var m=h[k],n=f[m];if(this.Jc||1E4<n.Ir&&1<n.rj.length){this.wq[b]-=n.rj.length;for(this.kq-=n.rj.length;0<
n.rj.length;)d.push(n.iy().Vy),n.OV();e.push(m)}}for(k=0;k<e.length;k++)delete f[e[k]];return d};a.prototype.uW=function(b){for(var d=0;d<b;d++)this.Fo[d]=[],this.kq-=this.wq[d],this.wq[d]=0};a.prototype.HD=function(b,d,e){var f=new z;f.Az();f.Vy=e;e=a.$R(e);f.zx=e;e=a.YR(e);if(b+1>this.Fo.length)for(var h=0,k=Math.max(2,b+1);h<k;h++)this.Fo.push([]);h=this.Fo[b][e];void 0===h&&(h=new l,this.Fo[b][e]=h);f.vK=d;h.kN(f);this.wq[b]++;this.kq++;this.Bk=Math.max(this.Bk,b)};a.YR=function(b){return 0<b?
g.P.truncate(Math.log(b)/Math.log(4)+.5):0};a.$R=function(b){var d=b.K();if(g.ba.zj(d))return b.I();if(33==d)return 1;if(197==d)return 4;if(g.ba.zd(d))return 2;throw g.i.Ra();};a.prototype.re=function(){this.lK()};return a}();g.yL=c})(R||(R={}));(function(g){var z=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Na(c,l);c.prototype.K=function(){return 1};c.prototype.W=function(a,b,d,e){return void 0===e?new g.yL(a,b,d):this.bQ(a,b,d,e)};c.prototype.bQ=function(a,b,d,e){a=new g.$c([a,
b]);return this.W(a,d,e).next()};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(g.Ge);g.Ih=z})(R||(R={}));(function(g){var z;(function(l){l[l.nextPath=0]="nextPath";l[l.nextSegment=1]="nextSegment";l[l.iterate=2]="iterate"})(z||(z={}));z=function(){function l(c,a,b,d){this.Vs=new g.l;this.BT=c;this.CT=a;this.oq=d;this.wo=-1;this.tl=!1;var e=c.Cb;null!=e&&(e=d?e.Bo:e.Gb,null!=e&&(this.Jc=!1,this.ra=b,this.Gb=e,this.zw=this.Gb.getIterator(),this.pq=
this.tl=!0,this.Yb=0,d?this.wo=a.ea():this.td=a.Ha()));this.tl||(e=a.Cb,null!=e&&(e=d?e.Bo:e.Gb,null!=e&&(this.Jc=!1,this.ra=b,this.Gb=e,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,d?this.wo=c.ea():this.td=c.Ha())));this.tl||(this.ei=d?g.ua.hR(c,a,b,1<=c.qm(0),1<=a.qm(0)):g.ua.gR(c,a,b))}l.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var c=!0;c;)switch(this.Yb){case 0:c=this.sU();break;case 1:c=this.tU();break;case 2:c=this.Pz();break;default:throw g.i.ga("internal error");
}return this.Jc?!1:!0}return null==this.ei?!1:this.ei.next()};l.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)};l.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)};l.prototype.oz=function(){if(!this.oq)throw g.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)};l.prototype.Wy=function(){if(!this.oq)throw g.i.ga("internal error");
return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)};l.prototype.sU=function(){if(!this.oq){if(!this.td.ab())return this.Jc=!0,!1;this.Yb=1;return!0}if(-1==--this.wo)return this.Jc=!0,!1;this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs);this.zw.Zi(this.Vs,this.ra);this.Yb=2;return!0};l.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var c=this.td.ia();this.zw.Wo(c,this.ra);this.Yb=2;return!0};l.prototype.Pz=function(){this.Hs=this.zw.next();return-1==
this.Hs?(this.Yb=this.oq?0:1,!0):!1};return l}();g.am=z})(R||(R={}));(function(g){g=g.JL||(g.JL={});g[g.enumClosed=1]="enumClosed";g[g.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";g[g.enumOGCStartPolygon=4]="enumOGCStartPolygon";g[g.enumCalcMask=4]="enumCalcMask"})(R||(R={}));(function(g){g.LC=function(){function z(){}z.ub=function(l,c,a,b,d,e,f,h,k){var m=[0,0,0],n=[0,0,0],p=[0,0,0],q=[0,0,0,0],t=new g.ha(0),v=new g.ha(0),F=new g.ha(0);if(null!=f||null!=h||null!=k)if(g.s.vi(c))g.$g.ub(l,
a,b,d,e,f,h,k);else{d=g.F.ca(d);a=g.F.ca(a);var W=g.F.ca(d-a);if(g.s.$(b,e)&&(g.s.$(a,d)||g.s.$(g.s.R(b),1.570796326794897)))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.$(b,-e)){if(g.s.$(g.s.R(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ch(l,c));null!=h&&(h.u=0<b?g.F.ca(3.141592653589793-g.F.ca(d)):g.F.ca(d));null!=k&&(k.u=0<b?g.F.ca(d):g.F.ca(3.141592653589793-g.F.ca(d)));return}g.s.$(g.s.R(W),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ch(l,c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else{if(g.s.$(g.s.R(b),
1.570796326794897)||g.s.$(g.s.R(e),1.570796326794897)){g.Yk.ub(l,c,a,b,d,e,f,h,k);return}if(g.s.$(a,d)||g.s.$(g.s.R(W),3.141592653589793)){g.Yk.ub(l,c,a,b,d,e,f,h,k);return}if(g.s.Dd(b)){g.Yk.ub(l,c,a,b,d,e,f,h,k);return}}var ba=Math.sqrt(1-c);d=g.F.ca(d-a);a=0;g.F.el(1,c,b,a,0,t,v,F);m[0]=t.u;m[1]=v.u;m[2]=F.u;g.F.el(1,c,e,d,0,t,v,F);n[0]=t.u;n[1]=v.u;n[2]=F.u;p[0]=0;p[1]=0;p[2]=-1*c*g.F.n(1,c,b)*Math.sin(b);0>d?g.F.Yq(p,n,m,q,0):g.F.Yq(p,m,n,q,0);v=[0,0,0];F=[0,0,0];var aa=[0,0,0];m=[0,0,0];t=[0,
0,0];var fa=Math.acos(q[2]/1),ka=1-c,la=Math.tan(fa),ma=1+la*la/ka,sa=2*p[2]*la/ka;la=Math.sqrt(sa*sa-4*ma*(p[2]*p[2]/ka-1));ma*=2;ka=(-sa+la)/ma;sa=(-sa-la)/ma;la=Math.tan(fa);ma=la*ka+p[2];fa=(ka+sa)/2;p=(ma+(la*sa+p[2]))/2;la=g.F.ip(ka-fa,ma-p);ka=p/ba*1.570796326794897;for(sa=0;100>sa;sa++){ma=g.F.w(c,ka);ma=ma*ma/Math.cos(ka)*(Math.sin(ka)-p*ma/(1-c));if(g.s.Dd(ma))break;ka-=ma}p=g.F.n(1,c,ka)*Math.cos(ka);p=Math.sqrt((p-fa)*(p+fa));la=1-la/p;la*=2-la;ma=g.F.qn(v);fa=g.F.qn(F);ka=g.F.qn(aa);
var wa=g.F.Ut(aa,v);sa=g.F.Ut(aa,F);g.F.yx(aa,v,m);g.F.yx(aa,F,t);v=Math.acos(wa/(ka*ma));F=Math.acos(sa/(ka*fa));F*=g.s.Mb(1,g.F.Ut(m,t));if(1.570796326794897<=g.s.R(v)&&1.570796326794897<=g.s.R(F)||3.141592653589793<g.s.R(v-F))v=(3.141592653589793-g.s.R(v))*g.s.Mb(1,v),F=(3.141592653589793-g.s.R(F))*g.s.Mb(1,F);m=g.F.Sj(la,F);t=g.F.q(p,la,g.F.Sj(la,v));m=g.F.q(p,la,m);m=g.s.R(m-t)*l;v=new g.ha(0);F=new g.ha(0);aa=q[1]/1;aa*=-g.s.Mb(1,W);t=Math.acos(aa)*g.s.Mb(1,W);z.sf(l,c,a,b,m,t,v,F);g.s.$(d,
v.u)&&g.s.$(e,F.u)||(la=g.F.ip(g.F.ca(d-v.u),e-F.u),z.sf(l,c,a,b,m,g.F.ca(t+3.141592653589793),v,F),ma=g.F.ip(g.F.ca(d-v.u),e-F.u),ma<la&&(t=g.F.ca(t+3.141592653589793)));v=[0,0,0,0];F=[0,0,0,0];p=[0,0,0];la=[0,0,0];l=[0,0,0];a=[0,0,0];b=[0,0,0];aa=[0,0,0];p[0]=0;p[1]=0;p[2]=ba;la[0]=0;la[1]=0;la[2]=0;g.F.Yq(la,p,n,v,0);g.s.Dd(e)?(l[0]=n[0],l[1]=n[1],l[2]=1,a[0]=1*Math.cos(d)-1*Math.sin(d),a[1]=1*Math.sin(d)+1*Math.cos(d)):(c=g.F.n(1,c,e)*Math.cos(e),l[0]=0,l[1]=0,n[2]+=Math.tan(1.570796326794897-
g.s.R(e))*c*g.s.Mb(1,e),a[0]=c*Math.cos(d)-c*Math.sin(d),a[1]=c*Math.sin(d)+c*Math.cos(d));a[2]=n[2];g.F.Yq(n,a,l,F,1);g.F.yx(F,v,b);g.F.yx(F,q,aa);aa=g.F.Ut(b,aa)/(g.F.qn(b)*g.F.qn(aa));aa*=g.s.Mb(1,W);d=Math.acos(aa)*-g.s.Mb(1,W);0<t&&0<d?d=g.F.ca(d+3.141592653589793):0>t&&0>d&&(d=g.F.ca(d+3.141592653589793));null!=f&&(f.u=m);null!=h&&(h.u=t);null!=k&&(k.u=d)}}};z.sf=function(l,c,a,b,d,e,f,h){var k=[0,0,0],m=[0,0,0],n=[0,0,0],p=[0,0,0],q=[0,0,0],t=[0,0,0],v=[0,0,0],F=[0,0,0,0],W=new g.ha(0),ba=
new g.ha(0),aa=new g.ha(0),fa=new g.ha(0),ka=new g.ha(0),la=new g.ha(0);if(null!=f&&null!=h)if(g.s.vi(c))g.$g.sf(l,a,b,d,e,f,h);else if(g.s.Dd(d))null!=f&&(f.u=a),null!=h&&(h.u=b);else if(e=g.F.ca(e),0>d&&(d=g.s.R(d),e=g.F.ca(e+3.141592653589793)),a=g.F.ca(a),b=g.F.ca(b),1.570796326794897<g.s.R(b)&&(a=g.F.ca(a+3.141592653589793),b=g.s.Mb(3.141592653589793,b)-b),g.s.$(g.s.R(b),1.570796326794897)||g.s.Dd(b)||g.s.Dd(e)||g.s.$(g.s.R(e),3.141592653589793))g.Yk.sf(l,c,a,b,d,e,f,h);else{var ma=Math.sqrt(1-
c);l=d/l;g.F.el(1,c,b,0,0,fa,ka,la);k[0]=fa.u;k[1]=ka.u;k[2]=ka.u;v[0]=0;v[1]=0;v[2]=-1*c*g.F.n(1,c,b)*Math.sin(b);fa=g.F.n(1,c,b);ka=g.F.ca(1.570796326794897-e);la=Math.sin(ka);d=Math.cos(b);b=Math.sin(b);q[0]=fa*d-b*la;q[1]=Math.cos(ka);q[2]=(1-c)*fa*b+d*la;0>e?g.F.Yq(v,q,k,F,0):g.F.Yq(v,k,q,F,0);k=Math.acos(F[2]/1);F=Math.atan2(-F[1],-F[0]);b=1-c;q=Math.tan(k);ka=1+q*q/b;fa=2*v[2]*q/b;q=Math.sqrt(fa*fa-4*ka*(v[2]*v[2]/b-1));ka*=2;b=(-fa+q)/ka;fa=(-fa-q)/ka;q=Math.tan(k);ka=q*b+v[2];k=(b+fa)/2;
v=(ka+(q*fa+v[2]))/2;q=g.F.ip(b-k,ka-v);ma=v/ma*1.570796326794897;for(b=0;100>b;b++){fa=g.F.w(c,ma);fa=fa*fa/Math.cos(ma)*(Math.sin(ma)-v*fa/(1-c));if(g.s.Dd(fa))break;ma-=fa}ma=g.F.n(1,c,ma)*Math.cos(ma);ma=Math.sqrt((ma-k)*(ma+k));v=1-q/ma;v*=2-v;t=Math.acos(g.F.Ut(t,m)/(g.F.qn(t)*g.F.qn(m)));t*=g.s.Mb(1,m[0]);e=(g.F.q(ma,v,g.F.Sj(v,t))+l*g.s.Mb(1,e))/g.F.Ch(ma,v);e=g.F.ca(1.570796326794897*e);e=g.F.Tq(v,e);g.F.n(ma,v,e);q=g.F.ca(F+a);a=Math.cos(q);e=Math.sin(q);n[0]=p[0]*a+p[1]*-e;n[1]=p[0]*e+
p[1]*a;n[2]=p[2];g.F.eO(c,n[0],n[1],n[2],aa,ba,W);null!=f&&(f.u=ba.u);null!=h&&(h.u=aa.u)}};return z}()})(R||(R={}));(function(g){var z=function(){function d(e){this.Za=null;this.xt=new g.h;this.yt=new g.h;this.g=e}d.prototype.compare=function(e,f,h){this.g.Hc(f,this.xt);this.g.Hc(e.ka(h),this.yt);return this.xt.compare(this.yt)};return d}(),l=function(){function d(e){this.Cf=new g.h;this.Fk=new g.h;this.g=e}d.prototype.Fh=function(e){this.Cf.N(e)};d.prototype.compare=function(e,f){this.g.Hc(e.ka(f),
this.Fk);return this.Cf.compare(this.Fk)};return d}(),c=function(d){function e(f){var h=d.call(this,f.g,f.ra,!1)||this;h.ib=f;return h}Na(e,d);e.prototype.compare=function(f,h,k){if(this.sg)return-1;var m=this.ib.Rd.Ln(this.ib.Th(h));f=f.ka(k);var n=this.ib.Rd.Ln(this.ib.Th(f));this.Fm=k;return this.ME(h,m,f,n)};return e}(g.PC),a=function(d){function e(f){var h=d.call(this,f.g,f.ra)||this;h.ib=f;return h}Na(e,d);e.prototype.compare=function(f,h){if(this.sg)return-1;f=this.ib.Rd.Ln(this.ib.Th(f.ka(h)));
this.Fm=h;return this.NE(h,f)};return e}(g.WL),b=function(){function d(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null;this.Pg=!1;this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null;this.zh=this.Lq=this.PA=this.ra=0;this.Zv=this.Yn=!1;this.Ao=new g.h;this.Ri=new g.h;this.hb=new g.ad(8);this.Ad=new g.ad(5);this.nh=new g.cu;this.Rd=new g.cu;this.Pg=!1;this.xh=new g.h;this.xh.na(0,0);this.ra=0;this.zh=-1;this.Yn=!1;this.g=null;this.df=new g.$j;this.Nc=new g.$j;
this.ph=new g.ja(0);this.Ik=new g.OC;this.Gf=new g.ja(0);this.Ck=new g.ja(0);this.lo=new g.Ta}d.prototype.LX=function(e,f){var h=new g.Ed;h.VB();e.Pc(h);this.gr(e);this.Yn=!1;this.ra=f;this.PA=f*f;f=this.eC();e.Pc(h);f||(this.lQ(),f||this.eC());-1!=this.zh&&(this.g.Ud(this.zh),this.zh=-1);this.g=null;return this.Yn};d.prototype.PX=function(e,f){this.gr(e);this.Yn=!1;this.ra=f;this.PA=f*f;this.Pg=!1;this.eC();this.Pg||(this.Pg=1==e.Ip(f,!0,!1));-1!=this.zh&&(this.g.Ud(this.zh),this.zh=-1);this.g=null};
d.prototype.qg=function(e,f){return this.hb.U(e,0+f)};d.prototype.GB=function(e,f,h){this.hb.T(e,0+f,h)};d.prototype.Th=function(e){return this.hb.U(e,2)};d.prototype.UW=function(e,f){this.hb.T(e,2,f)};d.prototype.MF=function(e,f){return this.hb.U(e,3+f)};d.prototype.Rp=function(e){return this.hb.U(e,7)};d.prototype.Rl=function(e,f){this.hb.T(e,7,f)};d.prototype.Tp=function(e,f){return this.hb.U(e,3+this.Qp(e,f))};d.prototype.hr=function(e,f,h){this.hb.T(e,3+this.Qp(e,f),h)};d.prototype.IR=function(e,
f){return this.hb.U(e,5+this.Qp(e,f))};d.prototype.jr=function(e,f,h){this.hb.T(e,5+this.Qp(e,f),h)};d.prototype.Ur=function(e){return this.Ad.U(e,0)};d.prototype.PW=function(e,f){this.Ad.T(e,0,f)};d.prototype.$y=function(e){return this.Ad.U(e,4)};d.prototype.er=function(e,f){this.Ad.T(e,4,f)};d.prototype.kl=function(e){return this.Ad.U(e,1)};d.prototype.nn=function(e,f){this.Ad.T(e,1,f)};d.prototype.Zy=function(e){return this.Ad.U(e,3)};d.prototype.Ft=function(e,f){this.Ad.T(e,3,f)};d.prototype.$m=
function(e){var f=this.Ad.De(),h=this.nh.Rh();this.PW(f,h);-1!=e?(this.nh.addElement(h,e),this.g.Sa(e,this.zh,f),this.er(f,this.g.Va(e))):this.er(f,-1);return f};d.prototype.CP=function(e){this.Ad.kd(e)};d.prototype.FD=function(e,f){this.nh.addElement(this.Ur(e),f);this.g.Sa(f,this.zh,e)};d.prototype.ot=function(e){var f=this.hb.De(),h=this.Rd.Rh();this.UW(f,h);-1!=e&&this.Rd.addElement(h,e);return f};d.prototype.GD=function(e,f){this.Rd.addElement(this.Th(e),f)};d.prototype.Wu=function(e){this.hb.kd(e);
e=this.ph.gF(e);0<=e&&this.ph.NV(e)};d.prototype.jj=function(e,f){if(-1==this.qg(e,0))this.GB(e,0,f);else if(-1==this.qg(e,1))this.GB(e,1,f);else throw g.i.Ra();this.gy(e,f)};d.prototype.gy=function(e,f){var h=this.kl(f);if(-1!=h){var k=this.Tp(h,f);this.jr(k,f,e);this.hr(e,f,k);this.hr(h,f,e);this.jr(e,f,h)}else this.jr(e,f,e),this.hr(e,f,e),this.nn(f,e)};d.prototype.Qp=function(e,f){return this.qg(e,0)==f?0:1};d.prototype.Zm=function(e,f){var h=this.Zy(f);-1!=h&&(this.df.wd(h,-1),this.Ft(f,-1));
var k;h=this.kl(f);if(-1!=h){var m=k=h;do{var n=!1,p=this.Qp(k,f),q=this.MF(k,p);if(this.qg(k,p+1&1)==e){this.Zu(k);this.Rd.eh(this.Th(k));this.Wu(k);if(k==q){h=-1;break}h==k&&(h=this.kl(f),m=q,n=!0)}k=q}while(k!=m||n);if(-1!=h){do p=this.Qp(k,f),q=this.MF(k,p),this.GB(k,p,e),k=q;while(k!=m);k=this.kl(e);-1!=k?(m=this.Tp(k,e),n=this.Tp(h,e),m==k?(this.nn(e,h),this.gy(k,e),this.nn(e,k)):n==h&&this.gy(h,e),this.hr(h,e,m),this.jr(m,e,h),this.hr(k,e,n),this.jr(n,e,k)):this.nn(e,h)}}h=this.Ur(e);k=this.Ur(f);
for(m=this.nh.sc(k);-1!=m;m=this.nh.lb(m))this.g.Sa(this.nh.ka(m),this.zh,e);this.nh.Cy(h,k);this.CP(f)};d.prototype.PT=function(e,f){var h=this.qg(e,0),k=this.qg(e,1),m=this.qg(f,0),n=this.qg(f,1);this.Rd.Cy(this.Th(e),this.Th(f));f==this.kl(h)&&this.nn(h,e);f==this.kl(k)&&this.nn(k,e);this.Zu(f);this.Wu(f);h==m&&k==n||k==m&&h==n||(this.Jn(h,this.Ao),this.Jn(m,this.Ri),this.Ao.rb(this.Ri)?(h!=m&&this.Zm(h,m),k!=n&&this.Zm(k,n)):(k!=m&&this.Zm(k,m),h!=n&&this.Zm(h,n)))};d.prototype.Zu=function(e){var f=
this.qg(e,1);this.ZE(e,this.qg(e,0));this.ZE(e,f)};d.prototype.ZE=function(e,f){var h=this.Tp(e,f),k=this.IR(e,f),m=this.kl(f);h!=e?(this.hr(k,f,h),this.jr(h,f,k),m==e&&this.nn(f,h)):this.nn(f,-1)};d.prototype.RD=function(e,f,h){var k=this.Rd.sc(e),m=this.Rd.ka(k);e=this.Ie(m);var n=this.Ie(this.g.V(m));this.g.lr(m,f,h,!0);for(k=this.Rd.lb(k);-1!=k;k=this.Rd.lb(k)){m=this.Rd.ka(k);var p=this.Ie(m)==e;this.g.lr(m,f,h,p)}k=f.Xp(h,0).bc();f=f.Xp(h,f.ql(h)-1).xc();this.wK(e,k);this.wK(n,f)};d.prototype.UE=
function(e,f,h){var k=this.Th(e),m=this.qg(e,0),n=this.qg(e,1),p=this.ot(-1);this.ph.add(p);this.Rl(p,-3);this.Gf.add(p);this.jj(p,m);e=1;for(f=f.ql(h);e<f;e++)h=this.$m(-1),this.Ck.add(h),this.Gf.add(h),this.jj(p,h),p=this.ot(-1),this.ph.add(p),this.Rl(p,-3),this.Gf.add(p),this.jj(p,h);this.jj(p,n);for(k=this.Rd.sc(k);-1!=k;k=this.Rd.lb(k))if(n=this.Rd.ka(k),this.Ie(n)==m){e=0;do 0<e&&(p=this.Gf.get(e-1),this.FD(p,n),-1==this.$y(p)&&this.er(p,this.g.Va(n))),p=this.Gf.get(e),e+=2,this.GD(p,n),n=this.g.V(n);
while(e<this.Gf.size)}else{e=this.Gf.size-1;do e<this.Gf.size-2&&(p=this.Gf.get(e+1),this.FD(p,n),0>this.$y(p)&&this.er(p,this.g.Va(n))),p=this.Gf.get(e),e-=2,this.GD(p,n),n=this.g.V(n);while(0<=e)}this.Gf.clear(!1)};d.prototype.Ie=function(e){return this.g.Qa(e,this.zh)};d.prototype.NI=function(e,f,h){var k=this.qg(f,0),m=new g.h;this.Jn(k,m);var n=new g.h,p=this.qg(f,1);this.Jn(p,n);var q=h.ql(e),t=h.Xp(e,0),v=new g.h;t.$p(v);if(!m.rb(v)){if(!this.Pg){var F=m.compare(this.xh);v=v.compare(this.xh);
0>F*v&&(this.Pg=!0)}this.qF(k,this.Gf);this.Ck.add(k)}!this.Pg&&1<q&&(F=m.compare(n),t=t.xc(),m.compare(t)!=F||t.compare(n)!=F?this.Pg=!0:0>t.compare(this.xh)&&(this.Pg=!0));t=h.Xp(e,q-1);e=t.xc();n.rb(e)||(this.Pg||(F=n.compare(this.xh),v=e.compare(this.xh),0>F*v&&(this.Pg=!0)),this.qF(p,this.Gf),this.Ck.add(p));this.Gf.add(f);n=0;for(p=this.Gf.size;n<p;n++)e=this.Gf.get(n),h=this.Rp(e),g.ad.GG(h)&&(this.Nc.wd(h,-1),this.Rl(e,-1)),e!=f&&-3!=this.Rp(e)&&(this.ph.add(e),this.Rl(e,-3));this.Gf.clear(!1)};
d.prototype.gO=function(e,f){this.ae.compare(this.Nc,this.Nc.ka(e),f);this.ae.sg&&(this.ae.Mr(),this.jF(e,f))};d.prototype.jF=function(e,f){this.Yn=!0;e=this.Nc.ka(e);f=this.Nc.ka(f);var h=this.Rd.Ln(this.Th(e)),k=this.Rd.Ln(this.Th(f)),m=this.g.cc(h);null==m&&(null==this.je&&(this.je=new g.zb),this.g.fd(h,this.je),m=this.je);h=this.g.cc(k);null==h&&(null==this.Pm&&(this.Pm=new g.zb),this.g.fd(k,this.Pm),h=this.Pm);this.Ik.Qo(m);this.Ik.Qo(h);this.Ik.Fa(this.ra,!0)&&(this.Pg=!0);this.cK(e,f,-1,this.Ik);
this.Ik.clear()};d.prototype.BQ=function(e,f){this.Yn=!0;f=this.Nc.ka(f);var h=this.Rd.Ln(this.Th(f)),k=this.g.cc(h);null==k&&(null==this.je&&(this.je=new g.zb),this.g.fd(h,this.je),k=this.je);h=this.wF(e);this.Ik.Qo(k);this.g.Xi(h,this.lo);this.Ik.Fz(this.ra,this.lo,!0);this.cK(f,-1,e,this.Ik);this.Ik.clear()};d.prototype.sS=function(){if(0!=this.ph.size)for(;0!=this.ph.size;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1);this.Pg=!0;break}var e=this.ph.Gc();this.ph.Jf();this.Rl(e,-1);
-1!=this.RS(e)&&this.rS(e);this.Xn=!1}};d.prototype.rS=function(e){if(this.Xn){var f=this.Nc.Bu(this.HH,this.BH,e,!0);this.Xn=!1}else f=this.Nc.ED(e);-1==f?this.PT(this.Nc.ka(this.Nc.AF()),e):(this.Rl(e,f),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,f)))};d.prototype.RS=function(e){var f=this.qg(e,0);e=this.qg(e,1);this.Jn(f,this.Ao);this.Jn(e,this.Ri);if(g.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var h=this.Ao.compare(this.xh),k=this.Ri.compare(this.xh);return 0>=h&&0<k?e:0>=k&&0<h?f:
-1};d.prototype.jQ=function(){var e=new g.ja(0);e.Jb(this.g.gd);for(var f=this.g.$q(),h=f.next();-1!=h;h=f.next())-1!=this.g.Qa(h,this.zh)&&e.add(h);this.g.nx(e,e.size);this.kQ(e)};d.prototype.kQ=function(e){this.df.clear();this.df.Ee(e.size);this.df.Xo(new z(this.g));var f=new g.h;f.Sc();for(var h=-1,k=new g.h,m=0,n=e.size;m<n;m++){var p=e.get(m);this.g.Hc(p,k);k.rb(f)?(p=this.g.Qa(p,this.zh),this.Zm(h,p)):(h=this.Ie(p),this.g.Hc(p,f),p=this.df.zn(p),this.Ft(h,p))}};d.prototype.lQ=function(){var e=
new g.ja(0);e.Jb(this.g.gd);for(var f=this.df.sc(-1);-1!=f;f=this.df.lb(f))e.add(this.df.ka(f));this.df.clear();this.g.nx(e,e.size);f=0;for(var h=e.size;f<h;f++){var k=e.get(f),m=this.Ie(k);k=this.df.zn(k);this.Ft(m,k)}};d.prototype.qF=function(e,f){var h=this.kl(e);if(-1!=h){var k=h;do g.ad.GG(this.Rp(k))&&f.add(k),k=this.Tp(k,e);while(k!=h)}};d.prototype.wK=function(e,f){for(e=this.nh.sc(this.Ur(e));-1!=e;e=this.nh.lb(e))this.g.mf(this.nh.ka(e),f)};d.prototype.cK=function(e,f,h,k){this.Zu(e);-1!=
f&&this.Zu(f);this.NI(0,e,k);-1!=f&&this.NI(1,f,k);-1!=h&&(k.Cf.D(this.Ao),this.Jn(h,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(h));h=0;for(var m=this.Ck.size;h<m;h++){var n=this.Ck.get(h),p=this.Zy(n);-1!=p&&(this.df.wd(p,-1),this.Ft(n,-1))}h=this.Th(e);m=-1!=f?this.Th(f):-1;this.RD(h,k,0);-1!=f&&this.RD(m,k,1);this.UE(e,k,0);-1!=f&&this.UE(f,k,1);this.Rd.eh(h);this.Wu(e);-1!=f&&(this.Rd.eh(m),this.Wu(f));h=0;for(m=this.Ck.size;h<m;h++)n=this.Ck.get(h),n==this.Lq&&(this.Zv=!0),p=this.Zy(n),-1==p&&
(p=this.df.ED(this.wF(n)),-1==p?(e=this.Ie(this.df.ka(this.df.AF())),this.Zm(e,n)):this.Ft(n,p));this.Ck.clear(!1)};d.prototype.Jn=function(e,f){this.g.ZF(this.$y(e),f)};d.prototype.wF=function(e){return this.nh.Ln(this.Ur(e))};d.prototype.eC=function(){this.Zv=!1;this.Lq=-1;null==this.ae&&(this.Nc.Tv=!1,this.ae=new c(this),this.Nc.ao=this.ae);var e=new g.ja(0),f=null,h=null;this.BH=this.HH=-1;this.Xn=!1;for(var k=this.df.sc(-1);-1!=k;){this.Xn=!1;var m=this.df.ka(k);this.Lq=this.Ie(m);this.g.Hc(m,
this.xh);this.ae.VJ(this.xh.y,this.xh.x);var n=this.kl(this.Lq),p=-1==n;if(!p){m=n;do{var q=this.Rp(m);-1==q?(this.ph.add(m),this.Rl(m,-3)):-3!=q&&e.add(q);m=this.Tp(m,this.Lq)}while(m!=n)}if(0<e.size){this.Xn=1==e.size&&1==this.ph.size;p=0;for(n=e.size;p<n;p++)m=this.Nc.ka(e.get(p)),this.Rl(m,-2);var t=-2,v=-2;p=0;for(n=e.size;p<n;p++){q=e.get(p);if(-2==t){var F=this.Nc.xe(q);-1!=F?(m=this.Nc.ka(F),m=this.Rp(m),-2!=m&&(t=F)):t=-1}-2==v&&(q=this.Nc.lb(q),-1!=q?(m=this.Nc.ka(q),m=this.Rp(m),-2!=m&&
(v=q)):v=-1);if(-2!=t&&-2!=v)break}p=0;for(n=e.size;p<n;p++)q=e.get(p),m=this.Nc.ka(q),this.Nc.wd(q,-1),this.Rl(m,-1);e.clear(!1);this.HH=-1!=t?t:-1;this.BH=-1!=v?v:-1;-1!=t&&-1!=v?this.Xn||this.gO(t,v):-1==t&&-1==v&&(this.Xn=!1)}else p&&(null==f&&(f=new a(this)),f.Fh(this.xh),this.Nc.pJ(f),f.sg&&(f.Mr(),this.BQ(this.Lq,f.Fm)));this.sS();this.Zv?(this.Zv=!1,null==h&&(h=new l(this.g)),h.Fh(this.xh),k=this.df.pJ(h)):k=this.df.lb(k)}return this.Yn};d.prototype.gr=function(e){this.g=e;this.zh=this.g.Hd();
this.hb.Ee(e.gd+32);this.Ad.Ee(e.gd);this.nh.Bt(e.gd);this.nh.hn(e.gd);this.Rd.Bt(e.gd+32);this.Rd.hn(e.gd+32);for(e=this.g.md;-1!=e;e=this.g.ve(e))if(g.ba.Ic(this.g.jc(e)))for(q=this.g.Ob(e);-1!=q;q=this.g.Sb(q)){var f=this.g.Ka(q),h=this.g.Ya(q),k=this.$m(h),m=this.ot(h);this.jj(m,k);t=this.g.V(h);h=0;for(f-=2;h<f;h++){var n=this.g.V(t),p=this.$m(t);this.jj(m,p);m=this.ot(t);this.jj(m,p);t=n}this.g.ec(q)?(p=this.$m(t),this.jj(m,p),m=this.ot(t),this.jj(m,p),this.jj(m,k)):(p=this.$m(t),this.jj(m,
p))}else for(var q=this.g.Ob(e);-1!=q;q=this.g.Sb(q)){var t=this.g.Ya(q);k=0;for(f=this.g.Ka(q);k<f;k++)this.$m(t),t=this.g.V(t)}this.jQ()};return d}();g.MC=b})(R||(R={}));(function(g){var z=function(l){function c(a,b,d){var e=l.call(this)||this;if(void 0!==a)if(void 0!==d){e.description=g.fe.pg();var f=new g.Od;f.L(a,b,d);e.ZB(f)}else if(void 0!==b)e.description=g.fe.pg(),e.Db(a,b);else if(a instanceof g.sa)e.description=a;else if(a instanceof g.h)e.description=g.fe.pg(),e.Db(a);else if(a instanceof
c)e.description=a.description,e.Db(a.Ng(),a.kh()),null!==a.la&&(e.la=a.la.slice(0));else throw g.i.O();else e.description=g.fe.pg();return e}Na(c,l);c.prototype.D=function(a){if(void 0!==a){if(this.Bc())throw g.i.ga("This operation should not be performed on an empty geometry.");a.na(this.la[0],this.la[1])}else{if(this.Bc())throw g.i.ga("This operation should not be performed on an empty geometry.");a=new g.h;a.na(this.la[0],this.la[1]);return a}};c.prototype.Db=function(a,b){"number"===typeof a?
(this.wc(),null==this.la&&this.wn(),this.la[0]=a,this.la[1]=b):(this.wc(),this.Db(a.x,a.y))};c.prototype.xz=function(){if(this.Bc())throw g.i.ga("This operation should not be performed on an empty geometry.");var a=new g.Od;a.x=this.la[0];a.y=this.la[1];a.z=this.description.dG()?this.la[2]:g.sa.te(1);return a};c.prototype.ZB=function(a){this.wc();var b=this.hasAttribute(1);b||g.sa.yG(1,a.z)||(this.se(1),b=!0);null==this.la&&this.wn();this.la[0]=a.x;this.la[1]=a.y;b&&(this.la[2]=a.z)};c.prototype.Ng=
function(){if(this.Bc())throw g.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]};c.prototype.YB=function(a){this.setAttribute(0,0,a)};c.prototype.kh=function(){if(this.Bc())throw g.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]};c.prototype.WJ=function(a){this.setAttribute(0,1,a)};c.prototype.XR=function(){return this.Vc(1,0)};c.prototype.sX=function(a){this.setAttribute(1,0,a)};c.prototype.uR=function(){return this.Vc(2,
0)};c.prototype.cX=function(a){this.setAttribute(2,0,a)};c.prototype.Fc=function(){return this.tF(3,0)};c.prototype.GJ=function(a){this.setAttribute(3,0,a)};c.prototype.Vc=function(a,b){var d=this.description.Rf(a);return 0<=d?this.la[this.description.bk(d)+b]:g.sa.te(a)};c.prototype.tF=function(a,b){var d=this.description.Rf(a);return 0<=d?this.la[this.description.bk(d)+b]:g.sa.te(a)};c.prototype.setAttribute=function(a,b,d){this.wc();var e=this.description.Rf(a);0>e&&(this.se(a),e=this.description.Rf(a));
null==this.la&&this.wn();this.la[this.description.bk(e)+b]=d};c.prototype.K=function(){return 33};c.prototype.Eb=function(){return 0};c.prototype.Pa=function(){this.wc();null!=this.la&&(this.la[0]=NaN,this.la[1]=NaN)};c.prototype.un=function(a){if(null!=this.la){for(var b=g.fe.Kw(a,this.description),d=[],e=0,f=0,h=a.Ba;f<h;f++){var k=a.ld(f),m=g.sa.Wa(k);if(-1==b[f]){var n=g.sa.te(k);for(k=0;k<m;k++)d[e]=n,e++}else for(n=this.description.bk(b[f]),k=0;k<m;k++)d[e]=this.la[n],e++,n++}this.la=d}this.description=
a};c.prototype.wn=function(){this.gJ(this.description.Be.length);c.YD(this.description.Be,this.la,this.description.Be.length);this.la[0]=NaN;this.la[1]=NaN};c.prototype.Pc=function(a){if(a instanceof g.Ed){if(!this.Bc()){var b=this.D();a.Gh(b,b);this.Db(b)}}else this.Bc()||(this.se(1),b=this.xz(),this.ZB(a.hp(b)))};c.prototype.copyTo=function(a){if(33!=a.K())throw g.i.O();a.wc();null==this.la?(a.Pa(),a.la=null,a.Pf(this.description)):(a.Pf(this.description),a.gJ(this.description.Be.length),c.YD(this.la,
a.la,this.description.Be.length))};c.prototype.Ja=function(){return new c(this.description)};c.prototype.B=function(){return this.Bc()};c.prototype.Bc=function(){return null==this.la||isNaN(this.la[0])||isNaN(this.la[1])};c.prototype.dn=function(a){a.Pa();this.description!=a.description&&a.Pf(this.description);a.$b(this)};c.prototype.A=function(a){this.Bc()?a.Pa():(a.v=this.la[0],a.G=this.la[1],a.C=this.la[0],a.H=this.la[1])};c.prototype.So=function(a){if(this.Bc())a.Pa();else{var b=this.xz();a.v=
b.x;a.G=b.y;a.Xe=b.z;a.C=b.x;a.H=b.y;a.Dg=b.z}};c.prototype.Vg=function(a,b){var d=new g.Oc;if(this.Bc())return d.Pa(),d;a=this.Vc(a,b);d.pa=a;d.wa=a;return d};c.prototype.gJ=function(a){if(null==this.la)this.la=g.P.mg(a);else if(this.la.length<a){for(var b=this.la.slice(0),d=this.la.length;d<a;d++)b[d]=0;this.la=b}};c.YD=function(a,b,d){if(0<d)for(d=0;d<a.length;d++)b[d]=a[d]};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Bc())return a.Bc()?
!0:!1;for(var b=0,d=this.description.Be.length;b<d;b++)if(this.la[b]!=a.la[b])return!1;return!0};c.prototype.dc=function(){var a=this.description.dc();if(!this.Bc())for(var b=0,d=this.description.Be.length;b<d;b++){var e=this.la[b];e=g.P.truncate(e^e>>>32);a=g.P.Vh(e,a)}return a};c.prototype.ng=function(){return null};return c}(g.ba);g.Ta=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b){void 0!==c&&(this.x=c,this.y=a,this.z=b)}l.construct=function(c,a,b){var d=new l;d.x=c;d.y=a;d.z=
b;return d};l.prototype.L=function(c,a,b){this.x=c;this.y=a;this.z=b};l.prototype.lx=function(){this.z=this.y=this.x=0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x/=c,this.y/=c,this.z/=c)};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.prototype.sub=function(c){return new l(this.x-c.x,this.y-c.y,this.z-c.z)};l.prototype.Bg=function(c){new l(this.x*c,this.y*c,this.z*c)};l.prototype.Sh=function(c){return this.x*c.x+this.y*c.y+this.z*
c.z};return l}();g.Od=z})(R||(R={}));(function(g){var z=function(){function l(c,a,b){this.Iw=this.yA=null;this.Zf=a;this.AT=a.y-b;this.zT=a.y+b;this.Gw=0;this.Zz=c;this.ra=b;this.MT=b*b;this.$z=0!=b;this.Nv=!1}l.prototype.result=function(){return 0!=this.Gw?1:0};l.prototype.UM=function(c){c=c.ic(c.ge(this.Zf,!1));return g.h.zc(c,this.Zf)<=this.MT?!0:!1};l.prototype.aF=function(c){if(!this.$z&&(this.Zz&&this.Zf.rb(c.bc())||this.Zf.rb(c.xc())))this.Nv=!0;else if(c.oa==this.Zf.y&&c.oa==c.ma){if(this.Zz&&
!this.$z){var a=Math.max(c.ta,c.qa);this.Zf.x>Math.min(c.ta,c.qa)&&this.Zf.x<a&&(this.Nv=!0)}}else{var b=!1;a=Math.max(c.ta,c.qa);this.Zf.x>a?b=!0:this.Zf.x>=Math.min(c.ta,c.qa)&&(b=0<c.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x);if(b){if(this.Zf.y==c.bc().y){if(this.Zf.y<c.xc().y)return}else if(this.Zf.y==c.xc().y&&this.Zf.y<c.bc().y)return;this.Gw=this.Zz?this.Gw^1:this.Gw+(c.bc().y>c.xc().y?1:-1)}}};l.prototype.MI=function(c){var a=c.Vg(0,1);if(a.pa>this.zT||a.wa<this.AT)return!1;if(this.$z&&
this.UM(c))return!0;if(a.pa>this.Zf.y||a.wa<this.Zf.y)return!1;null==this.yA&&(this.yA=[null,null,null,null,null]);null==this.Iw&&(this.Iw=[0,0,0]);a=c.$F();if(0<a)for(c=0;c<a;c++){var b=this.yA[c].get();this.aF(b);if(this.Nv)return!0}else if(this.aF(c),this.Nv)return!0;return!1};l.KM=function(c,a,b){a=new l(0==c.Kn(),a,b);for(c=c.Ha();c.ab();)for(;c.Ia();)if(b=c.ia(),a.MI(b))return-1;return a.result()};l.LM=function(c,a,b,d){var e=new g.l;c.yc(e);e.X(d,d);var f=new l(0==c.Kn(),b,d);c=c.Ha();var h=
new g.l;h.L(e);h.C=b.x+d;h.G=b.y-d;h.H=b.y+d;b=a.HF(h,d);for(d=b.next();-1!=d;d=b.next())if(c.Wb(a.ka(d)),c.Ia()&&(d=c.ia(),f.MI(d)))return-1;return f.result()};l.ym=function(c,a,b){if(c.B())return 0;var d=new g.l;c.yc(d);d.X(b,b);if(!d.contains(a))return 0;d=c.Cb;if(null!=d){var e=d.Hk;if(null!=e){e=e.Uo(a.x,a.y);if(1==e)return 1;if(0==e)return 0}d=d.Gb;if(null!=d)return l.LM(c,d,a,b)}return l.KM(c,a,b)};l.XS=function(c,a,b){return a.B()?0:l.ym(c,a.D(),b)};l.Ol=function(c,a){c=c.I();return 16>c?
!1:2*c+Math.log(c)/Math.log(2)*a<1*c*a};return l}();g.Fg=z})(R||(R={}));(function(g){var z=function(l){function c(a){return l.call(this,!0,a)||this}Na(c,l);c.prototype.Ja=function(){return new c(this.description)};c.prototype.Eb=function(){return 2};c.prototype.K=function(){return 1736};c.prototype.sG=function(a,b,d){this.ES(a,b,d)};c.prototype.kR=function(){this.AR()};return c}(g.Xk);g.Ea=z})(R||(R={}));(function(g){(function(z){z[z.PiPOutside=0]="PiPOutside";z[z.PiPInside=1]="PiPInside";z[z.PiPBoundary=
2]="PiPBoundary"})(g.ML||(g.ML={}));g.jd=function(){function z(){}z.FG=function(l,c,a){l=g.Fg.XS(l,c,a);return 0==l?0:1==l?1:2};z.Zd=function(l,c,a){l=g.Fg.ym(l,c,a);return 0==l?0:1==l?1:2};z.SX=function(l,c,a,b,d){if(c.length<a||d.length<a)throw g.i.O();for(var e=0;e<a;e++)d[e]=z.Zd(l,c[e],b)};z.nK=function(l,c,a,b,d){if(1736==l.K())z.SX(l,c,a,b,d);else if(197==l.K()){var e=new g.l;l.A(e);z.VM(e,c,a,b,d)}else throw g.i.ga("invalid_call");};z.VM=function(l,c,a,b,d){if(c.length<a||d.length<a)throw g.i.O();
if(l.B())for(b=0;b<a;b++)d[b]=0;else for(l.X(.5*-b,.5*-b),l.X(.5*b,.5*b),b=0;b<a;b++)l.contains(c[b])?d[b]=1:l.contains(c[b])?d[b]=2:d[b]=0};z.UX=function(l,c,a,b,d){for(var e=0;e<a;e++)d[e]=l.ss(c[e],b)?2:0};z.TX=function(l,c,a,b,d){var e=l.Cb,f=null;null!=e&&(f=e.Hk);e=a;for(var h=0;h<a;h++)if(d[h]=1,null!=f){var k=c[h];0==f.Uo(k.x,k.y)&&(d[h]=0,e--)}if(0!=e)for(l=l.Ha();l.ab()&&0!=e;)for(;l.Ia()&&0!=e;)for(f=l.ia(),h=0;h<a&&0!=e;h++)1==d[h]&&f.ss(c[h],b)&&(d[h]=2,e--);for(h=0;h<a;h++)1==d[h]&&
(d[h]=0)};z.oK=function(l,c,a,b,d){var e=l.K();if(1607==e)z.TX(l,c,a,b,d);else if(g.ba.zd(e))z.UX(l,c,a,b,d);else throw g.i.ga("Invalid call.");};return z}()})(R||(R={}));(function(g){var z=function(l){function c(a,b){if(2==arguments.length){var d=l.call(this,!1,a.description)||this;d.nf(a);d.lineTo(b)}else d=l.call(this,!1,a)||this;return d}Na(c,l);c.prototype.Ja=function(){return new c(this.description)};c.prototype.Eb=function(){return 1};c.prototype.K=function(){return 1607};c.prototype.sG=function(a,
b,d){this.FS(a,b,d)};return c}(g.Xk);g.Ua=z})(R||(R={}));(function(g){var z=function(){function l(){}l.prototype.progress=function(){return!0};l.Bp=function(c){if(null!=c&&!c.progress(-1,-1))throw g.i.RC();};return l}();g.op=z})(R||(R={}));(function(g){(function(a){a[a.clipWithInputHorizon=1]="clipWithInputHorizon";a[a.clipWithOutputHorizon=2]="clipWithOutputHorizon"})(g.KK||(g.KK={}));var z=function(){function a(){this.Mg=3;this.Xu=this.Lr=NaN}a.prototype.KW=function(b){this.LB(1,b)};a.prototype.LW=
function(b){this.LB(2,b)};a.prototype.cS=function(){return this.ks(1)};a.prototype.dS=function(){return this.ks(2)};a.prototype.LB=function(b,d){this.Mg=d?this.Mg|b:this.Mg&~b};a.prototype.ks=function(b){return 0!=(this.Mg&b)};a.prototype.Qf=function(){var b=new a;b.Lr=this.Lr;b.Xu=this.Xu;b.Mg=this.Mg;return b};return a}();g.tC=z;(function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon";a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"})(g.LK||(g.LK={}));var l=function(){function a(){this.Mg=
0}a.prototype.LB=function(b,d){this.Mg=d?this.Mg|b:this.Mg&~b};a.prototype.ks=function(b){return 0!=(this.Mg&b)};a.kg=function(b){var d=new a;d.Mg=b.Mg;return d};a.prototype.hM=function(b){this.Mg=b.Mg};return a}();g.wY=l;var c=function(){function a(b,d,e){this.ef=b;this.$f=d;this.Wf=new g.l;this.Wf.L(e);this.vT=b.dc()+d.dc()+this.Wf.dc().toString()}a.prototype.dc=function(){return this.vT};a.prototype.Nb=function(b){return this==b||this.ef.Nb(b.ef)&&this.$f.Nb(b.$f)&&this.Wf.Nb(b.Wf)};return a}();
g.BY=c;c=function(){function a(){this.$f=this.ef=null;this.mH=new z;this.nH=new l;this.yw=this.Yf=null;this.ow=this.Vn=!0}a.Pr=function(b,d,e,f){var h;void 0===f&&(f=null);void 0===h&&(h=null);var k=new a;k.sp(b,d,e,f,h);return k};a.prototype.sp=function(b,d,e,f,h){if(null==b||null==d)throw g.i.ga("invalidArgument");this.ef=b;this.$f=d;this.ow=this.Vn=!1;null!=f&&(this.mH=f.Qf());null!=h&&this.nH.hM(h);h=!1;1==d.Tb()&&null!=f&&(f=f.Lr,isNaN(f)||0==f||(h=!0));if(b==d)this.Vn=!h,this.ow=!0;else{f=b.Tb();
var k=d.Tb();if(0==f||0==k){if(null!=e)throw g.i.O();null!=b.Id()&&null!=d.Id()&&(this.Vn=b.Id().Nb(d.Id()))}else 3==f||3==k?this.Vn=b.Nb(d):this.ef.fS(this.$f)?this.Vn=!h:this.Vn=!1,this.Yf=e,null!=this.Yf&&this.Yf.ix(),this.ow=(null==this.Yf||0==this.Yf.count())&&this.ef.tc().Nb(this.$f.tc())}this.kY()};a.prototype.isIdentity=function(){return this.Vn};a.prototype.iR=function(){return this.mH.Qf()};a.prototype.Nb=function(b){return b==this?!0:b instanceof a&&this.ef.Nb(b.ef)&&this.$f.Nb(b.$f)?this.Yf==
b.Yf?!0:null!=this.Yf&&null!=b.Yf&&this.Yf.Nb(b.Yf)?!0:!1:!1};a.prototype.kY=function(){this.yw=new g.du(this)};return a}();g.xr=c})(R||(R={}));(function(g){var z=function(){function l(){}l.Ep=function(c){return c*l.jW};l.mx=function(c,a){return l.bP(a-c)};l.cP=function(c){if(-360<=c&&720>c)return 0>c?c+=360:360<=c&&(c-=360),c;c=g.mc.MK(c);0>c&&(c+=360);return c};l.bP=function(c){c=l.cP(c);180<c&&(c-=360);return c};l.jW=57.29577951308232;return l}();g.sr=z;g.Jh=function(){function l(){}l.nj=function(c,
a){var b=new g.l;c.A(b);var d=g.cb.ih(a),e=new g.l;e.L(d);e.v=b.v;e.C=b.C;e.X(.01*e.da(),0);a=g.ua.Xd(a,b,!1);return e.contains(b)?c:g.Vd.clip(c,e,a,0)};l.ms=function(c,a,b,d,e){if(!g.cb.Xc(a))throw g.i.O();var f=g.ua.mj(a,c,!1),h=g.cb.ih(a),k=g.cb.tc(a),m=k.Id().ci,n=g.cb.xv(k);k=g.cb.gv(k);n*=2-n;var p=new g.Oc;h.en(p);var q=[[0,0],[0,0]];2==g.Gg.Tb(a)?d?(q[0][0]=l.an(e,p),q[0][1]=h.Lp(),g.cb.wt(),h=q[0][0]*m):(q[0][0]=h.ik(),q[0][1]=e,g.cb.wt(),h=q[0][1]*m):h=e*m;if(!d&&0!=h)throw g.i.O();var t=
new g.ha,v=new g.hd;c=v.Ib(c);for(var F=[0],W=new g.h,ba=new g.h,aa=new g.h,fa=new g.h,ka=new g.h,la=new g.h,ma=v.Ob(c);-1!=ma;ma=v.Sb(ma)){var sa=v.Ya(ma);v.D(sa,aa);for(var wa=!1,Ga=sa=v.V(sa);-1!=Ga;Ga=v.V(Ga)){if(Ga==sa){if(wa)break;wa=!0}v.D(Ga,fa);if(d&&f<e-aa.x&&fa.x-e>f||f<e-fa.x&&aa.x-e>f||!d&&f<-aa.y&&fa.y>f||f<-fa.y&&aa.y>f){do if(!(Math.abs(aa.x-fa.x)>=.5*p.S())){2==g.Gg.Tb(a)?(q[0][0]=l.an(aa.x,p),q[0][1]=aa.y,q[1][0]=l.an(fa.x,p),q[1][1]=fa.y,g.cb.ZV(),ka.x=q[0][0]*m,ka.y=q[0][1]*m,
la.x=q[1][0]*m,la.y=q[1][1]*m):(ka.x=aa.x*m,ka.y=aa.y*m,la.x=fa.x*m,la.y=fa.y*m);la.x=6.283185307179586*(fa.x-aa.x)/p.S()+ka.x;if(d){if(ba.x=h,ba.y=l.Iz(k,n,ka,la,h,b),isNaN(ba.y))break}else{ba.x=l.Gz(k,n,ka,la,b);if(isNaN(ba.x))break;ba.y=0}g.kb.xd(k,n,ka.x,ka.y,la.x,la.y,t,null,null,b);var Fa=t.u;g.kb.xd(k,n,ka.x,ka.y,ba.x,ba.y,t,null,null,b);var Sa=t.u;2==g.Gg.Tb(a)?(q[0][0]=ba.x/m,q[0][1]=ba.y/m,g.cb.XQ(),d?(W.y=q[0][1],W.x=e):(W.x=l.qs(q[0][0],aa.x,fa.x,p),W.y=e)):d?(W.x=e,W.y=ba.y/m):(W.x=l.qs(ba.x/
m,aa.x,fa.x,p),W.y=e);F[0]=0<Fa?g.P.Tk(Sa/Fa,0,1):.5;0!=F[0]&&1!=F[0]&&(Fa=v.Na(Ga),v.Wl(Fa,F,1),v.Db(v.V(Fa),W.x,W.y))}while(0)}aa.N(fa)}}return v.Ke(c)};l.Hn=function(c,a,b,d,e){if(c.B())return c;var f=g.cb.bf(a);return l.Jp(c,b-180*f,360*f,a,d,e,!0)};l.Iz=function(c,a,b,d,e,f){if(3.141592653589793<=Math.abs(b.x-d.x)||!l.Un(b.x,d.x,e))return NaN;if(b.x>d.x)var h=d;else h=b,b=d;d=new g.ha(0);var k=new g.ha(0),m=new g.ha(0);g.kb.xd(c,a,h.x,h.y,b.x,b.y,k,d,null,f);var n=k.u,p=0,q=1,t=new g.h;for(t.N(h);n*
(q-p)>1E-12*c;){var v=.5*(p+q);g.kb.qj(c,a,h.x,h.y,n*v,d.u,k,m,f);t.x=k.u;t.y=m.u;if(t.x==e)break;if(l.Un(h.x,t.x,e))q=v;else if(l.Un(b.x,t.x,e))p=v;else return NaN}return t.y};l.Un=function(c,a,b){c=z.Ep(c);a=z.mx(c,z.Ep(a));b=z.mx(c,z.Ep(b));return 0==b||0<a&&0<b&&b<=a||0>a&&0>b&&b>=a?!0:!1};l.an=function(c,a){var b=a.wa-a.pa;return a.Kt(c-Math.floor((c-a.pa)/b)*b)};l.qs=function(c,a,b,d){var e=new g.Oc;e.L(a,b);b=d.S();c=Math.floor((c-a)/b)*b+c;for(e=e.tf();Math.abs(c-e)>Math.abs(c+b-e);)c+=b;
return c};l.Gz=function(c,a,b,d,e){if(b.y>d.y)var f=d;else f=b,b=d;d=new g.Oc;d.L(f.y,b.y);if(!d.contains(0)||3.141592653589793<=Math.abs(f.x-b.x))return NaN;if(f.x==b.x)return f.x;var h=new g.ha(0),k=new g.ha(0),m=new g.ha(0);g.kb.xd(c,a,f.x,f.y,b.x,b.y,k,h,null,e);var n=k.u,p=0,q=1,t=new g.h;for(t.N(f);n*(q-p)>1E-12*c;){var v=.5*(p+q);g.kb.qj(c,a,f.x,f.y,n*v,h.u,k,m,e);t.x=k.u;t.y=m.u;d.L(f.y,t.y);if(0==t.y)break;if(d.contains(0))q=v;else if(d.L(b.y,t.y),d.contains(0))p=v;else return NaN}return t.x};
l.Jp=function(c,a,b,d,e,f,h){var k=new g.l;c.A(k);if(k.B())return c;var m=new g.Oc;k.en(m);var n=new g.Oc;n.L(a,a+b);if(n.contains(m)&&n.wa!=m.wa)return c;var p=new g.l;p.L(k);var q=c.K();if(33==q){p=e?c:c.Qf();k=p.Ng();if(k<n.pa||k>=n.wa||h&&k==n.wa)k+=Math.ceil((n.pa-k)/b)*b,k=n.Kt(k),p.YB(k);return p}if(550==q){p=e?c:c.Qf();d=p.vb(0);q=2*p.I();c=!1;for(e=0;e<q;e+=2)if(k=d.read(e),k<n.pa||k>=n.wa||h&&k==n.wa)c=!0,k+=Math.ceil((n.pa-k)/b)*b,k=n.Kt(k),d.write(e,k);c&&p.Qc(1993);return p}if(n.contains(m))return c;
if(197==q)return b=e?c:c.Qf(),k.Fa(p),b.Zo(k),b;var t=.1*Math.max(k.da(),k.S());p.X(0,t);h=c;n=d.Yd(0);c=g.Ih.local();e=new g.Ed;for(var v=0;;){var F=Math.floor((m.pa-a)/b),W=Math.ceil((m.wa-a)/b);if(3<W-F){F=Math.floor(.5*(W+F));p.v=k.v-t;p.C=a+b*F;var ba=g.Vd.clip(h,p,n,f);p.v=p.C;p.C=k.C+t;var aa=g.Vd.clip(h,p,n,f);e.ig((F-W)*b,0);aa.Pc(e);1736==q?h=c.W(ba,aa,d,null):(h=ba,h.add(aa,!1));h.A(k);k.en(m);v++}else break}p.v=a;p.C=a+b;a=new g.l;a.L(p);a.X(n,0);a=Math.floor((k.v-p.v)/b)*b;0!=a?(p.move(a,
0),e.ig(-a,0)):e.MB();a=1607==q?new g.Ua(h.description):new g.Ea(h.description);f=new g.l;for(m=new g.l;k.C>p.v;){t=g.Vd.clip(h,p,n,0);t.A(m);if(1607==q?!t.B()&&(m.S()>n||m.da()>n):!t.B()&&(1736!=q||m.S()>n))t.Pc(e),t.A(m),a.A(f),f.X(n,n),f.isIntersecting(m)&&1736==q?a=c.W(a,t,d,null):a.add(t,!1);p.move(b,0);e.shift(-b,0)}return a};l.RI=function(c,a,b,d){var e=new g.ee(b.description);e.Gd(b,0,-1);e=g.cb.Bh(e,c,a);var f=b.I();d.Pa();if(!g.cb.Xc(c)||f!=e.I())return!1;var h=new g.l;b.A(h);var k=new g.l;
e.A(k);h=h.S();k=k.S();if(0!=h&&0!=k){if(k/=h,c=g.cb.ih(a).S()/g.cb.ih(c).S(),1E-10<Math.abs(k/c-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);for(b=0;b<f;b++)c=e.Oa(b),d.Db(b,c);return!0};l.Jz=function(){throw g.i.Fe();};return l}()})(R||(R={}));(function(g){var z;(function(c){c[c.Clip=0]="Clip";c[c.DontClip=1]="DontClip";c[c.PannableFold=2]="PannableFold"})(z=g.ui||(g.ui={}));var l;(function(c){c[c.Geodesic=0]="Geodesic";c[c.Loxodrome=1]="Loxodrome";c[c.GreatElliptic=2]="GreatElliptic";c[c.NormalSection=
3]="NormalSection";c[c.ShapePreserving=4]="ShapePreserving"})(l=g.RK||(g.RK={}));g.Ab=function(){function c(){}c.zv=function(a,b,d){if(d||0<b){a=a.toString(g.Tc.PE_STR_NAME_CANON|g.Tc.PE_STR_AUTH_NONE);b=[];for(d=0;d<a.length;d++)b[d]="a"<=a[d]&&"z">=a[d]?b[d]=a[d].toUpperCase():a[d];return b.join()}return a.toString(g.Tc.PE_STR_AUTH_TOP)};c.wr=function(a,b,d,e){var f=e.length,h=d.I();if(0!=h){var k=d.vb(0),m=Math.min(h,f),n=0,p=a.gh();isNaN(b)&&(b=0);var q=a.Xc();a=q?a.tc().Le().S():0;for(var t=
179*a/360;0<h;){k.pB(n<<1,m,e);g.gj.projToGeogCenter(p,m,e,b);if(q)for(var v=0;v<m;v++){var F=e[v][0]-b,W=g.mc.sign(F),ba=k.read(2*(n+v));0>W*g.mc.sign(ba)&&Math.abs(F)>t&&(e[v][0]+=-W*a)}k.pC(n<<1,m,e);n+=m;h-=m;m=Math.min(h,f)}d.Qc(1993)}};c.DL=function(a,b,d,e){var f=0,h=a.gh();isNaN(f)&&(f=0);var k=a.Xc(),m=a.bf();a=360*m;m*=179;for(var n=e.length,p=0;p<d;){for(var q=p;q<d&&b[q].isNaN();++q)p++;var t=Math.min(n,d-p);if(0<t){q=1;for(var v=p+1;q<t;++q,++v)if(b[v].isNaN()){t=q;break}g.ua.Ey(e,b,
p,t);g.gj.projToGeogCenter(h,t,e,f);if(k)for(q=0,v=p;q<t;++q,++v){var F=b[v].x,W=e[q][0]-f,ba=g.mc.sign(W);0>ba*g.mc.sign(F)&&Math.abs(W)>m&&(e[q][0]-=ba*a)}g.ua.Dy(b,p,e,t);p+=t}}};c.Kx=function(a,b,d){var e=d.length,f=b.I();if(!(1>f)){var h=b.vb(0),k=Math.min(f,e),m=0,n=a.gh(),p=a.Xc(),q=p?a.Le().S():0,t=179*q/360,v=0;for(p&&(v=a.Bi());0<f;){h.pB(m<<1,k,d);g.gj.geogToProj(n,k,d);if(p)for(a=0;a<k;a++){var F=d[a][0],W=g.mc.sign(F),ba=h.read(2*(m+a))-v;0>W*g.mc.sign(ba)&&Math.abs(F)>t&&(d[a][0]+=-W*
q)}h.pC(m<<1,k,d);m+=k;f-=k;k=Math.min(f,e)}b.Qc(1993)}};c.CL=function(a,b,d,e){if(0!=d){var f=a.gh(),h=a.Xc(),k=h?a.Le().S():0,m=179*k/360,n=0;h&&(n=a.Bi());for(a=0;a<d;){for(var p=a;p<d&&b[p].isNaN();++p)a++;var q=Math.min(e.length,d-a);if(0<q){p=1;for(var t=a+1;p<q;++p,++t)if(b[t].isNaN()){q=p;break}g.ua.Ey(e,b,a,q);g.gj.geogToProj(f,q,e);if(h)for(p=0,t=a;p<q;p++){var v=e[p][0],F=g.mc.sign(v);0>F*g.mc.sign(b[t].x-n)&&Math.abs(v)>m&&(e[p][0]-=F*k)}g.ua.Dy(b,a,e,q);a+=q}}}};c.vr=function(a,b,d,e){var f=
b.I();if(0!=f){var h=b.vb(0),k=a.ef,m=a.$f,n=k.tc().Sp(),p=m.tc().Sp(),q=k.bf(),t=m.bf();a=a.Yf;if(null==a||0==a.count()){d=n/p;e=(k.Wp()-m.Wp())*t;p=-90*q;a=90*q;n=!1;t=1;for(k=2*f;t<k;)q=h.get(t),m=g.P.Tk(q,p,a),m!=q&&(h.set(t,m),n=!0),t+=2;if(0!=e||1!=d)for(n=!0,p=new g.h,t=0;t<f;t++)h.uc(2*t,p),p.x*=d,p.x+=e,p.y*=d,h.Vt(2*t,p);n&&b.Qc(1993)}else{k=e.length;m=Math.min(f,k);var v=g.P.mg(m),F=null,W=0,ba=NaN,aa=NaN,fa=360*t,ka=t/q;d&&(aa=90*t,ba=89.9*q,F=g.P.mg(m));for(var la=!0,ma=0;0!=f;){q=!1;
h.pB(W<<1,m,e);for(t=0;t<m;t++)v[t]=e[t][0];if(d)for(t=0;t<m;t++){var sa=Math.abs(e[t][1])-ba;0<sa&&(q=e[t][1],e[t][1]=g.mc.En(ba,q),F[t]=g.mc.En(sa,q),q=!0)}t=e[0][0];a.transform(e,m,n,p);la&&(ma=e[0][0]-ka*t,la=!1);for(t=0;t<m;t++)sa=e[t][0]-v[t]*ka-ma,200<Math.abs(sa)&&(e[t][0]=0<sa?e[t][0]-fa:e[t][0]+fa);if(q){for(t=0;t<m;t++)0!=F[t]&&(e[t][1]+=ka*F[t],e[t][1]>aa?e[t][1]=aa:e[t][1]<-aa&&(e[t][1]=-aa));for(q=0;q<m;q++)F[q]=0}h.pC(W<<1,m,e);W+=m;f-=m;m=Math.min(f,k)}b.Qc(1993)}}};c.BL=function(a,
b,d,e){if(a.ow)e=90*a.ef.bf(),g.ua.ZJ(b,d,-e,e);else{var f=a.Yf,h=a.ef,k=a.$f;a=h.Zr();var m=k.Zr(),n=h.bf(),p=90*n,q=k.bf();if(null==f||0==f.count()){if(e=a/m,f=(h.Wp()-k.Wp())*q,g.ua.ZJ(b,d,-p,p),0!=f||1!=e)for(q=0;q<d;q++)b[q].x*=e,b[q].x+=f,b[q].y*=e}else{h=Math.min(d,e.length);p=g.P.mg(h);k=360*q;n=q/n;for(var t=!0,v=0,F=0;0!=d;){for(q=0;q<h;q++)p[q]=b[q+F].x;q=b[0].x;g.ua.Ey(e,b,F,h);f.transform(e,h,a,m);g.ua.Dy(b,F,e,h);t&&(v=b[0].x-n*q,t=!1);for(q=0;q<h;q++){var W=b[F+q].x-p[q]*n-v;200<Math.abs(W)&&
(b[F+q].x=0<W?b[F+q].x-k:b[F+q].x+k)}F+=h;d-=h;h=Math.min(d,e.length)}}}};c.fv=function(a,b){a=a.ih();isNaN(b)||a.Lu(b,0);return a};c.PQ=function(a,b,d,e,f,h,k,m){for(var n=c.fv(e,f),p=n.S(),q=p/360,t=c.kE*q,v=a.vb(0),F=b.Xc(),W=F?p/b.Le().S():0,ba=!1,aa=new g.Ea(d.description),fa=0,ka=d.ea();fa<ka;++fa){var la=F,ma=new g.Ua(d.description);ma.addPath(d,fa,!0);if(0!=k){var sa=c.KD(!0,ma,n.H-m,n.H,k);(ba=ba||sa)&&(la=!1)}var wa=-1;la&&(wa=a.Ca(fa));var Ga=ma.vb(0),Fa=ma.I(),Sa=0,Qa=Ga.read(0),Xa=0;
sa=3*e.Yd(0);var Ya=!1,bb=new g.h;bb.Sc();var eb=new g.h;eb.Sc();for(var jb=!1,hb=1;hb<Fa;++hb){var ab=g.h.construct(Ga.gg(2*hb),Ga.gg(2*hb+1)),cb=ab.x,$a=cb+Sa,ib=$a-Qa;ab.x=$a;if(Math.abs(ib)>t){if(la){var gb=wa+(hb+1<Fa?hb:0),lb=v.read(2*(wa+hb-1));gb=(v.read(2*gb)-lb)*W;Math.abs(ib-gb)>1*q&&(la=!1)}la||(Sa-=g.mc.En(p,$a-Qa),$a=cb+Sa,++Xa,jb=0!=Sa,ab.x=$a)}else Ya||g.ua.vG(eb,bb,ab,sa)&&(Ya=!0);jb&&Ga.write(2*hb,$a);Qa=$a;eb.N(bb);bb.N(ab)}0<Xa&&ma.Qc(1993);la=ma.Oa(0);Fa=ma.Oa(Fa-1);ma=g.h.ub(la,
Fa)<sa?c.pQ(ma,e,f,h,Ya):c.qQ(a,fa,ma,e,f);aa.add(ma,!1)}f=e.Yd(0);d=n.S()/180;c.Lt(aa,n,.1*f,!1);f=g.ti.clip(aa,n,f,d,h);aa=aa!=f;a=a.He();m=f.He();k=0;0<m&&0>a?k=1:0>=m&&0<a&&(0==m?(m=NaN,2==b.Tb()?m=b.ol().He():1==b.Tb()&&(m=b.Le().rF()),a>.99*m&&(k=-1)):k=-1);0!=k&&(b=new g.Ea(f.description),b.vp(n),b=g.Zl.local().W(b,d,h),b.add(f,!1),aa=!0,f=b);aa&&(f=g.$l.local().W(f,e,!1,h));return f};c.qQ=function(a,b,d,e,f){var h=d.I(),k=d.Oa(0),m=d.Oa(h-1);e=c.fv(e,f);f=e.S();k=g.mc.sign(m.x-k.x);var n=
new g.l;d.yc(n);var p=e.ik();m=p-f;p+=f;if(0<=k){var q=Math.ceil((m-n.v)/f);for(q*=f;m>n.v+q;)q+=f;for(;m<n.C+q;)q-=f;var t=q;720<n.S()&&(p=m+360*Math.ceil(n.S()/360))}else{q=Math.ceil((p-n.C)/f);for(q*=f;p<n.C+q;)q-=f;for(;p>n.v+q;)q+=f;t=q;720<n.S()&&(m=p-360*Math.ceil(n.S()/360))}q=k*f;var v=g.l.construct(n.v,n.G,n.C,n.H);v.move(t,0);var F=new g.Ed;F.ig(t,0);d.Pc(F);n=new g.Ua(d.description);n.add(d,!1);t=d.Oa(h-1);f=0;for(var W=n.Oa(0).x,ba=0;0<k?v.C<p:v.v>m;)1024<=ba&&(ba=0),v.move(q,0),F.Lb=
q,d.Pc(F),W+=q,e.v<=W&&e.C>=W&&(f=n.I()-1),d.Db(0,t),t=d.Oa(h-1),n.Fr(d,0,0,h-1,!1);d=new g.Ea(n.description);h=0<a.Kr(b);d.add(n,!1);a=n.Oa(0);m=n.Oa(n.I()-1);b=d.ea()-1;(0>k?h:!h)?(k=g.h.construct(m.x,e.H),d.Ei(k),k=g.h.construct(e.ik(),e.H),d.Ei(k),e=g.h.construct(a.x,e.H)):(k=g.h.construct(m.x,e.G),d.Ei(k),k=g.h.construct(e.ik(),e.G),d.Ei(k),e=g.h.construct(a.x,e.G));d.Ei(e);d.sG(0,b,0);d.fO(f);return d};c.pQ=function(a,b,d,e,f){var h=new g.Ea(a.description);h.add(a,!1);h.yB(0,h.I()-1);var k=
new g.l;h.yc(k);d=c.fv(b,d);var m=d.S(),n=Math.ceil((d.v-k.v)/m);for(n*=m;d.v>k.v+n;)n+=m;for(;d.v<k.C+n;)n-=m;n+=m;if(0!=n){k.move(n,0);var p=new g.Ed;p.ig(n,0);h.Pc(p)}if(d.v<=k.v&&d.C>k.C)return f&&(f=h.He(),h=g.$l.local().W(h,b,!0,e),b=h.He(),(b=g.mc.sign(f)!=g.mc.sign(b))&&h.jJ()),h;a=new g.Ea(a.description);a.add(h,!1);for(f=f||k.S()>m-b.Yd(0);k.v<d.C;)k.move(m,0),p=new g.Ed,p.ig(m,0),h.Pc(p),a.add(h,!1);f&&(f=a.He(),a.$o(1),a=g.$l.local().W(a,b,!0,e),b=a.He(),(b=g.mc.sign(f)!=g.mc.sign(b))&&
a.jJ());return a};c.KD=function(a,b,d,e,f){for(var h=b.vb(0),k=b.I(),m=!1,n=0;n<k;n++){var p=g.h.construct(h.gg(2*n),h.gg(2*n+1));if(0!=(f&1)&&p.y>=d){m=!0;break}if(0!=(f&2)&&p.y<=-d){m=!0;break}}if(!m)return!1;h=!1;a&&(h=b.Pn(0));a=new g.hd;k=a.Ib(b);m=a.Ob(k);var q=-1,t=!0,v=new g.h;v.Sc();n=new g.Ta;for(var F=-1,W=a.Ya(m);-1!=W;W=a.V(W)){p=a.Oa(W);var ba=0!=(f&1)&&90<=p.y?1:0;ba|=0!=(f&2)&&p.y<=-d?2:0;if(0<q&&q!=ba){if(v.x!=p.x){v.x=p.x;a.Xi(a.Na(W),n);var aa=a.yj(m,W,n);a.mf(aa,v)}if(h)for(F=
-1!=F?a.V(F):a.Ya(m),aa=a.Na(W);F!=aa;)F=a.qd(F,!1);F=-1}0<ba&&(p.y=g.mc.En(e,p.y),a.mf(W,p),t||q==ba||(p.x!=v.x?(a.Xi(W,n),aa=a.yj(m,W,n),a.Db(aa,v.x,p.y),F=aa):F=W));q=ba;v=p;t=!1}if(h){if(-1!=F)for(F=a.V(F);-1!=F;)F=a.qd(F,!1);d=a.Ya(m);a.hq(d,a.tj(m))||(a.Xi(d,n),a.yj(m,-1,n))}a.Ke(k).copyTo(b);return!0};c.Hz=function(a,b,d,e){var f=a;if(f.B()||d==z.DontClip)return f;var h=f.K();if(33==h)return e=f,f=[e.D()],c.tG(f,1,b,d),f[0].isNaN()?e.Pa():e.Db(f[0]),a;a=b.tc();var k=a.bf(),m=90*k,n=180*k,p=
360*k,q=b.Bi(),t=.5*k,v=new g.l;f.A(v);var F=b.Xr(),W=b.KQ(),ba=197==F.K();b=new g.l;F.A(b);d==z.PannableFold&&(d=a.Le().S(),b.v=q-.5*d,b.C=b.v+d);if(v.G<-m||v.H>m){(new g.l).L(v.v-k,-m,v.C+k,m);f=g.ti.Pu(f,b,a,NaN,0,e);if(f.B())return f;f.A(v)}if(W&&(b.H<v.G||b.G>v.H))return f.Ja();v.S()>p&&(f=c.Jp(f,q-n,p,a,!0,0,!0,e),f.A(v));m=c.$N(v.v,v.C,b.v,b.C,p);0!=m&&v.move(m,0);if(v.C>b.C||v.v<b.v){if(v.C>b.C)for(;v.v>=b.C;)v.move(-p,0),m-=p;for(;v.v<b.C-p;)v.move(p,0),m+=p}d=g.ua.Ju(a,F);0!=m&&(k=new g.Ed,
k.ig(m,0),f.Pc(k));if(W){if(ba&&b.contains(v))return f;W=[null,null];for(m=0;2>m;m++){ba?k=g.ba.Ic(h)?g.ti.clip(f,b,d,t,e):g.ti.clip(f,b,d,0,e):(k=g.Zj.local().W(f,F,a,e),k==F&&(k=g.ba.kg(k)));if(b.v<=v.v&&b.C>=v.C||b.v>=v.v&&b.C<=v.C)return k;W[m]=k;0==m&&(v.move(-p,0),k=new g.Ed,k.ig(-p,0),f.Pc(k))}if(550==h)W[0].Gd(W[1],0,-1);else if(g.ba.Ic(h))W[0].add(W[1],!1);else if(33==h)W[0].B()&&(W[0]=W[1]);else throw g.i.ga("intersect_with_GCS_horizon: unexpected geometry type");return W[0]}if(b.H<v.G||
b.G>v.H)return f;for(h=0;!f.B()&&v.C>b.v;)0!=h&&(k=new g.Ed,k.ig(h,0),f.Pc(k)),g.fj.local().W(4,f,F,a,e)||(f=g.mp.local().W(f,F,a,e),F==f&&(f=g.ba.kg(f))),0!=h&&(t=new g.Ed,t.ig(-h,0),f.Pc(t)),h-=p,v.move(-p,0);return f};c.tG=function(a,b,d,e){if(0!=b&&e!=z.DontClip)if(e==z.PannableFold){e=d.CR();for(var f=b,h=0;h<b;h++)if(a[h].y>e.H||a[h].y<e.G)a[h].Sc(),f--;0!=f&&c.cv(a,b,e.v,e.S())}else{e=d.bf();var k=90*e,m=180*e;e*=360;f=b;for(h=0;h<b;h++)if(a[h].y>k||a[h].y<-k)a[h].Sc(),f--;if(0!=f){f=new g.l;
f.bx(a,b);k=d.Xr();var n=d.kv();h=197==k.K();var p=new g.l;k.A(p);if(!n||!(p.H<f.G||p.G>f.H))if(n)if(c.cv(a,b,p.ik()-m,e),f=b,h)for(h=0;h<b;h++)p.contains(a[h])||(a[h].Sc(),f--);else for(d=g.ua.Ju(d.tc(),k),h=0;h<b;h++)(m=0!=g.jd.Zd(k,a[h],d))||(a[h].Sc(),f--);else for(c.cv(a,b,-m,e),f=b,d=g.ua.Ju(d.tc(),k),h=0;h<b;h++)if(m=a[h],m.isNaN()&&f--,n=c.oE(m.x,p.v,p.C,e),m.x+=n,m=0!=g.jd.Zd(k,m,d))a[h].Sc(),f--}}};c.Jp=function(a,b,d,e,f,h,k,m){var n=a.K(),p=b+d;if(33===n){e=f?a:a.Qf();var q=e.Ng();if(q<
b||q>=p||k&&q==p)q+=Math.ceil((b-q)/d)*d,q=g.P.Tk(q,b,p),e.YB(q);return e}if(a.B())return a;q=new g.l;a.A(q);if(q.B())return a;var t=new g.Oc;q.en(t);var v=new g.Oc;v.L(b,p);if(v.contains(t))return a;p=new g.l;p.L(q);if(550===n){e=f?a:a.Qf();m=e.vb(0);n=2*e.I();p=!1;for(b=0;b<n;b+=2)if(q=m.read(b),q<v.pa||q>=v.wa||k&&q==v.wa)p=!0,q+=Math.ceil((v.pa-q)/d)*d,q=v.Kt(q),m.write(b,q);p&&e.Qc(1993);return e}if(197==n)return d=f?a:a.Qf(),q.Fa(p),d.Zo(q),d;var F=.1*Math.max(q.da(),q.S());p.X(0,F);k=a;v=e.Yd(0);
a=g.Ih.local();for(f=new g.Ed;;){var W=Math.floor((t.pa-b)/d),ba=Math.ceil((t.wa-b)/d);if(3<ba-W){W=Math.floor(.5*(ba+W));p.v=q.v-F;p.C=b+d*W;var aa=g.ti.clip(k,p,v,h,m);p.v=p.C;p.C=q.C+F;var fa=g.ti.clip(k,p,v,h,m);f.ig((W-ba)*d,0);fa.Pc(f);1736==n?k=a.W(aa,fa,e,null):(k=aa,k.add(fa,!1));k.A(q);q.en(t)}else break}p.v=b;p.C=b+d;b=new g.l;b.L(p);b.X(v,0);b=Math.floor((q.v-p.v)/d)*d;0!=b?(p.move(b,0),f.ig(-b,0)):f.MB();b=1607==n?new g.Ua(k.description):new g.Ea(k.description);h=new g.l;for(t=new g.l;q.C>
p.v;){F=g.ti.clip(k,p,v,0,m);F.A(t);if(1607==n?!F.B()&&(t.S()>v||t.da()>v):!F.B()&&(1736!=n||t.S()>v))F.Pc(f),F.A(t),b.A(h),h.X(v,v),h.isIntersecting(t)&&1736==n?b=a.W(b,F,e,null):b.add(F,!1);p.move(d,0);f.shift(-d,0)}return b};c.cv=function(a,b,d,e){for(var f=d+e,h=0;h<b;h++){var k=a[h].x;d<=k&&k<f||!(k<d||k>f||k==f)||(k+=Math.ceil((d-k)/e)*e,k=g.P.Tk(k,d,f),a[h].x=k)}};c.Hn=function(a,b,d,e,f,h){if(!b.Xc())throw g.i.ga("fold_into_360_degree_range");if(a.B())return a;if(2==b.Tb()){d=b.rv();var k=
b.qv()-d}else{var m=b.bf();k=360*m;d-=180*m}return c.Jp(a,d,k,b,e,f,!0,h)};c.lF=function(a,b,d,e){if(2==d.Tb())e=d.rv(),d=d.qv()-e;else{var f=d.bf();d=360*f;e-=180*f}c.cv(a,b,e,d)};c.nj=function(a,b){var d=b.Le();if(33==a.K()){var e=a.kh();return d.G<=e&&e<=d.H?a:a.Ja()}e=new g.l;a.A(e);var f=new g.l;f.L(d);f.v=e.v;f.C=e.C;f.X(.01*f.da(),0);d=g.ua.py(b,e);return f.contains(e)?a:g.ti.clip(a,f,d,0,null)};c.kr=function(a,b,d){return a>b.C&&a-b.C<d?b.C:a<b.v&&b.v-a<d?b.v:a};c.BX=function(a,b,d,e){e.x=
c.kr(a.x,b,d);e.y=a.y};c.AX=function(a,b,d,e){for(var f=0;f<b;f++)a[f].y<d.G||a[f].y>d.H?a[f].Sc():a[f].x=c.kr(a[f].x,d,e)};c.Lt=function(a,b,d,e){if(!a.B()){var f=a.K();if(!e||1736!=f)if(g.ba.zj(f)){e=a.vb(0);f=0;for(var h=a.I();f<h;f++){var k=e.read(2*f),m=c.kr(k,b,d);m!=k&&e.write(2*f,m)}a.Qc(1993)}else if(197==f)e=new g.l,a.A(e),e.v=c.kr(e.v,b,d),e.C=c.kr(e.C,b,d),a.Zo(e);else if(33==f)a.YB(c.kr(a.Ng(),b,d));else throw g.i.ga("internal error");}};c.pS=function(a,b,d,e){var f=new g.hd,h=f.Ib(a);
a=g.ua.Ju(b,a);c.ms(f,h,b,a,d,!0,e);return f.Ke(h)};c.ms=function(a,b,d,e,f,h,k){if(!d.Xc())throw g.i.O("invalid call");var m=d.Le(),n=d.tc(),p=n.gh().getDatum().getSpheroid();n=n.Id().ci;var q=p.getFlattening();p=p.getAxis();q*=2-q;var t=new g.Oc;m.en(t);var v=null,F=[[0,0],[0,0]];2==d.Tb()?(v=d.gh(),h?(F[0][0]=c.an(k,t),F[0][1]=m.Lp(),g.gj.projToGeog(v,1,F),m=F[0][0]*n):(F[0][0]=m.ik(),F[0][1]=k,g.gj.projToGeog(v,1,F),m=F[0][1]*n)):m=k*n;if(!h&&0!=m&&f!=l.GreatElliptic)throw g.i.ga("invalid argument");
var W=new g.ha,ba=[0],aa=new g.h,fa=new g.h,ka=new g.h,la=[null,null],ma=new g.h,sa=new g.h,wa=new g.h,Ga=new g.h;for(b=a.Ob(b);-1!=b;b=a.Sb(b)){var Fa=a.Ya(b);a.D(Fa,ma);for(var Sa=!1,Qa=Fa=a.V(Fa);-1!=Qa;Qa=a.V(Qa)){if(Qa==Fa){if(Sa)break;Sa=!0}a.D(Qa,sa);if(h&&(e<k-ma.x&&sa.x-k>e||e<k-sa.x&&ma.x-k>e)||!h&&(0!=k||e<-ma.y&&sa.y>e||e<-sa.y&&ma.y>e)){do if(!(Math.abs(ma.x-sa.x)>=.5*t.S())){2==d.Tb()?(F[0][0]=c.an(ma.x,t),F[0][1]=ma.y,F[1][0]=c.an(sa.x,t),F[1][1]=sa.y,g.gj.projToGeogCenter(v,2,F,0),
wa.x=F[0][0]*n,wa.y=F[0][1]*n,Ga.y=F[1][1]*n):(wa.x=ma.x*n,wa.y=ma.y*n,Ga.y=sa.y*n);Ga.x=2*(sa.x-ma.x)*Math.PI/t.S()+wa.x;if(h){fa.x=m;fa.y=c.Iz(p,q,wa,Ga,m,f);if(isNaN(fa.y))break;la[0]=fa;var Xa=1}else if(f==l.GreatElliptic){var Ya=[0,0];Xa=g.Nx.Jz(q,wa,Ga,m,Ya);if(0==Xa)break;fa.x=Ya[0];fa.y=m;la[0]=fa;2==Xa&&(ka.x=Ya[1],ka.y=m,la[1]=ka)}else{fa.x=c.Gz(p,q,wa,Ga,f);if(isNaN(fa.x))break;fa.y=0;la[0]=fa;Xa=1}var bb=-1;for(Ya=0;Ya<Xa;Ya++){g.kb.xd(p,q,wa.x,wa.y,Ga.x,Ga.y,W,null,null,f);var eb=W.u;
g.kb.xd(p,q,wa.x,wa.y,la[Ya].x,la[Ya].y,W,null,null,f);var jb=W.u;2==d.Tb()?(F[0][0]=la[Ya].x/n,F[0][1]=la[Ya].y/n,g.gj.geogToProj(v,1,F),h?(aa.y=F[0][1],aa.x=k):(aa.x=c.qs(F[0][0],ma.x,sa.x,t),aa.y=k)):h?(aa.x=k,aa.y=la[Ya].y/n):(aa.x=c.qs(la[Ya].x/n,ma.x,sa.x,t),aa.y=k);ba[0]=0<eb?g.P.Tk(jb/eb,0,1):.5;if(0==ba[0]||1==ba[0])break;bb>ba[0]||(bb=a.Na(Qa),a.Wl(bb,ba,1),a.Db(a.V(bb),aa.x,aa.y),bb=ba[0])}}while(0)}ma.N(sa)}}};c.an=function(a,b){var d=b.wa-b.pa;return b.Kt(a-Math.floor((a-b.pa)/d)*d)};
c.qs=function(a,b,d,e){var f=new g.Oc;f.L(b,d);d=e.S();a=Math.floor((a-b)/d)*d+a;for(f=f.tf();Math.abs(a-f)>Math.abs(a+d-f);)a+=d;return a};c.Un=function(a,b,d){a=g.sr.Ep(a);b=g.sr.mx(a,g.sr.Ep(b));d=g.sr.mx(a,g.sr.Ep(d));return 0==d||0<b&&0<d&&d<=b||0>b&&0>d&&d>=b?!0:!1};c.Iz=function(a,b,d,e,f,h){if(h==l.GreatElliptic)return g.Nx.NS(b,d,e,f);if(Math.abs(d.x-e.x)>=Math.PI||!c.Un(d.x,e.x,f))return NaN;if(d.x>e.x)var k=e;else k=d,d=e;e=new g.ha;var m=new g.ha,n=new g.ha;g.kb.xd(a,b,k.x,k.y,d.x,d.y,
m,e,null,h);var p=m.u,q=0,t=1,v=new g.h;for(v.N(k);p*(t-q)>1E-12*a;){var F=.5*(q+t);g.kb.qj(a,b,k.x,k.y,p*F,e.u,m,n,h);v.x=m.u;v.y=n.u;if(v.x==f)break;if(c.Un(k.x,v.x,f))t=F;else if(c.Un(d.x,v.x,f))q=F;else return NaN}return v.y};c.Gz=function(a,b,d,e,f){if(f==l.GreatElliptic)return a=[0,0],g.Nx.Jz(b,d,e,0,a),a[0];if(d.y>e.y)var h=e;else h=d,d=e;e=new g.Oc;e.L(h.y,d.y);if(!e.contains(0)||Math.abs(h.x-d.x)>=Math.PI)return NaN;if(h.x==d.x)return h.x;var k=new g.ha,m=new g.ha,n=new g.ha;g.kb.xd(a,b,
h.x,h.y,d.x,d.y,m,k,null,f);var p=m.u,q=0,t=1,v=new g.h;for(v.N(h);p*(t-q)>1E-12*a;){var F=.5*(q+t);g.kb.qj(a,b,h.x,h.y,p*F,k.u,m,n,f);v.x=m.u;v.y=n.u;e.L(h.y,v.y);if(0==v.y)break;if(e.contains(0))t=F;else if(e.L(d.y,v.y),e.contains(0))q=F;else return NaN}return v.x};c.RI=function(a,b,d,e){if(!a.ef.Xc())return!1;var f=new g.ee(b.description);f.Gd(b,0,-1);e=g.Gx.local().W(f,a,e);f=b.I();d.Pa();if(f!=e.I())return!1;var h=new g.l;b.A(h);var k=new g.l;e.A(k);h=h.S();k=k.S();if(0!=h&&0!=k){if(k/=h,a=a.$f.ih().S()/
a.ef.ih().S(),1E-10<Math.abs(k/a-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);b=new g.h;for(a=0;a<f;a++)e.D(a,b),d.Db(a,b);return!0};c.lN=function(a,b){a%=360*b;a>=180*b&&(a-=360*b);return a};c.OI=function(a,b,d,e){if(d==z.Clip){var f=b.ol();197==f.K()?(d=new g.l,f.A(d),f=g.ua.py(b,d),a=g.ti.clip(a,d,f,5E4*b.rm(),e)):g.fj.local().W(1,f,a,b,e)||(a=g.Zj.local().W(a,f,b,e),a==f&&(a=g.Xk.kg(a)))}else b.Xc()&&(e=new g.l,a.yc(e),b.Le().contains(e)||(c.Lt(a,b.Le(),b.Yd(0),!0),d==z.PannableFold&&(a=
c.nj(a,b)),a=c.Hn(a,b,0,!0,1E5*b.rm(),null)));return a};c.SD=function(a,b,d){var e=b.Yr();if(null==e)return a;b=b.tc();var f=b.Le().S(),h=new g.l;a.yc(h);var k=new g.Oc;h.en(k);h=e.Ha();e=null;for(var m=new g.Ed;h.ab();)for(;h.Ia();){var n=h.ia(),p=n.Vg(0,0),q=new g.Oc;q.L(p.pa,p.wa);for(p=0;q.wa>k.pa;)q.move(-f),--p;for(;q.pa<=k.wa;){if(q.isIntersecting(k)){null==e&&(e=new g.Ua);var t=g.zb.YO(n.bc(),n.xc());0!=p&&(m.ig(p*f,0),t.Pc(m));e.pc(t,!0)}q.move(f);++p}}return null!=e?(b=g.ua.bO(b,e),b=g.ua.Gr(b),
g.bu.gP(a,e,b,d)):a};c.$N=function(a,b,d,e,f){return a>=d&&b<=e?0:c.oE(.5*(b+a),d,e,f)};c.oE=function(a,b,d,e){return g.mc.round((.5*(d+b)-a)/e)*e};c.QQ=function(a,b,d,e,f,h,k,m){var n=c.fv(e,f),p=n.S(),q=p/360,t=c.kE*q,v=a.vb(0),F=b.Xc(),W=F?p/b.Le().S():0;b=a.Ja();for(var ba=0,aa=d.ea();ba<aa;++ba){var fa=F,ka=new g.Ua(d.description);ka.addPath(d,ba,!0);var la=d.ec(ba);0!=k&&(la=c.KD(la,ka,n.H-m,n.H,k))&&(fa=!1);var ma=-1;la=ka.I();var sa=!1;fa&&(ma=a.Ca(ba),sa=a.ec(ba));var wa=ka.vb(0),Ga=0,Fa=
wa.read(0),Sa=0,Qa=3*e.Yd(0),Xa=!1,Ya=new g.h;Ya.Sc();var bb=new g.h;bb.Sc();for(var eb=!1,jb=1;jb<la;++jb){var hb=g.h.construct(wa.gg(2*jb),wa.gg(2*jb+1)),ab=hb.x,cb=ab+Ga,$a=cb-Fa;hb.x=cb;if(Math.abs($a)>t){if(fa){var ib=ma+jb-1,gb=ma;if(!sa||jb+1<la)gb+=jb;ib=v.read(2*ib);gb=(v.read(2*gb)-ib)*W;Math.abs($a-gb)>1*q&&(F=!1)}fa||(Ga-=g.mc.En(p,cb-Fa),cb=ab+Ga,++Sa,eb=0!=Ga,hb.x=cb)}else Xa||g.ua.vG(Ya,bb,hb,Qa)&&(Xa=!0);eb&&wa.write(2*jb,cb);Fa=cb;Ya.N(bb);bb.N(hb)}0!=Sa&&ka.Qc(1993);fa=ka.Oa(0);
la=ka.Oa(la-1);g.h.ub(fa,la);ka=c.rQ(ka,e,isNaN(f)?0:f,h);b.add(ka,!1)}a=e.Yd(0);d=n.S()/180;c.Lt(b,n,.1*a,!1);return g.ti.clip(b,n,a,d,h)};c.rQ=function(a,b,d,e){return c.Hn(a,b,d,!0,0,e)};c.JS=function(a,b,d,e){var f=a.K();if(1736==f)for(b=null!=b?b.Yd(0):0,f=0;f<e;f++)1!=g.jd.Zd(a,d[f],b)&&d[f].Sc();else if(197==f)for(f=0;f<e;f++)a.ZO(d[f])||d[f].Sc();else throw g.i.O();};c.bl=function(a,b,d,e){if(32>d)for(var f=new g.Ta,h=0;h<d;h++)f.Db(b[h]),a.bl(f,e).D(b[h]);else{var k=new g.ee;k.se(3);k.CD(b,
d);f=k.vb(3);for(h=0;h<d;h++)f.write(h,h);h=a.bl(k,e);a=h.vb(0);f=h.vb(3);e=g.h.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=e;d=h.I();for(h=0;h<d;h++)e=f.read(h),a.uc(2*h,b[e])}};c.al=function(a,b,d,e){if(32>d)for(var f=new g.Ta,h=0;h<d;h++)f.Db(b[h]),a.al(f,e).D(b[h]);else{var k=new g.ee;k.se(3);k.CD(b,d);f=k.vb(3);for(h=0;h<d;h++)f.write(h,h);h=a.al(k,e);a=h.vb(0);f=h.vb(3);e=g.h.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=e;d=h.I();for(h=0;h<d;h++)e=f.read(h),a.uc(2*h,b[e])}};c.kE=210;return c}()})(R||
(R={}));(function(g){(function(l){l[l.rightSide=1]="rightSide"})(g.PL||(g.PL={}));var z=function(){function l(c,a,b){this.Ds=new g.h;void 0===c?this.Ko=-1:(this.Ds.N(c),this.Ko=a,this.La=b,this.pw=0)}l.prototype.RJ=function(c){this.pw=c?this.pw|1:this.pw&-2};l.prototype.B=function(){return 0>this.Ko};l.prototype.az=function(){if(this.B())throw g.i.ga("invalid call");return new g.Ta(this.Ds.x,this.Ds.y)};l.prototype.Va=function(){if(this.B())throw g.i.ga("invalid call");return this.Ko};l.prototype.cz=
function(){if(this.B())throw g.i.ga("invalid call");return this.La};l.prototype.Nz=function(){return 0!=(this.pw&1)};l.prototype.by=function(c,a,b,d){this.Ds.x=c;this.Ds.y=a;this.Ko=b;this.La=d};return l}();g.bm=z})(R||(R={}));(function(g){var z=function(){function c(){}c.prototype.Wo=function(a,b){this.vh.resize(0);this.Ki.length=0;this.vk=-1;a.yc(this.Gk);this.Gk.X(b,b);this.Gk.isIntersecting(this.Gb.Da)?((this.xs=g.ba.zd(a.K()))?(this.OH=a.bc(),this.NH=a.xc(),this.ra=b):this.ra=NaN,this.vh.add(this.Gb.kf),
this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1};c.prototype.Zi=function(a,b){this.vh.resize(0);this.Ki.length=0;this.vk=-1;this.Gk.L(a);this.Gk.X(b,b);this.ra=NaN;this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1};c.prototype.next=function(){if(0==this.vh.size)return-1;this.vk=this.Ss;var a=null,b=null,d=null,e=null;this.xs&&(a=new g.h,b=new g.h,d=new g.l);for(var f=!1;!f;){for(;-1!=this.vk;){var h=
this.Gb.Xy(this.Gb.hv(this.vk));if(h.isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),b.N(this.NH),d.L(h),d.X(this.ra,this.ra),0<d.uy(a,b)){f=!0;break}}else{f=!0;break}this.vk=this.Gb.pv(this.vk)}if(-1==this.vk){h=this.vh.Gc();var k=this.Ki[this.Ki.length-1];null==e&&(e=[],e[0]=new g.l,e[1]=new g.l,e[2]=new g.l,e[3]=new g.l);l.zJ(k,e);this.vh.Jf();--this.Ki.length;for(k=0;4>k;k++){var m=this.Gb.Np(h,k);if(-1!=m&&0<this.Gb.RR(m)&&e[k].isIntersecting(this.Gk))if(this.xs){if(a.N(this.OH),b.N(this.NH),
d.L(e[k]),d.X(this.ra,this.ra),0<d.uy(a,b)){var n=new g.l;n.L(e[k]);this.vh.add(m);this.Ki.push(n)}}else n=new g.l,n.L(e[k]),this.vh.add(m),this.Ki.push(n)}if(0==this.vh.size)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}this.Ss=this.Gb.pv(this.vk);return this.vk};c.XO=function(a,b,d){var e=new c;e.Gb=a;e.Gk=new g.l;e.vh=new g.ja(0);e.Ki=[];e.Wo(b,d);return e};c.WO=function(a,b,d){var e=new c;e.Gb=a;e.Gk=new g.l;e.vh=new g.ja(0);e.Ki=[];e.Zi(b,d);return e};c.VO=function(a){var b=new c;
b.Gb=a;b.Gk=new g.l;b.vh=new g.ja(0);b.Ki=[];return b};return c}();g.CY=z;var l=function(){function c(a,b){this.jf=new g.ad(11);this.ai=new g.ad(5);this.ys=[];this.iw=new g.ja(0);this.Da=new g.l;this.Pk(a,b)}c.prototype.reset=function(a,b){this.jf.oj(!1);this.ai.oj(!1);this.ys.length=0;this.iw.clear(!1);this.Pk(a,b)};c.prototype.xj=function(a,b){return this.Bv(a,b,0,this.Da,this.kf,!1,-1)};c.prototype.Ez=function(a,b,d){d=-1==d?this.kf:this.RF(d);var e=this.da(d),f=this.jR(d);return this.Bv(a,b,e,
f,d,!1,-1)};c.prototype.ka=function(a){return this.eR(a)};c.prototype.BF=function(a){return this.Xy(this.hv(a))};c.prototype.da=function(a){return this.lv(a)};c.prototype.jR=function(a){var b=new g.l;b.L(this.Da);var d=this.lv(a);a=this.LF(a);for(var e=0;e<2*d;e+=2){var f=g.P.truncate(3&a>>e);0==f?(b.v=.5*(b.v+b.C),b.G=.5*(b.G+b.H)):1==f?(b.C=.5*(b.v+b.C),b.G=.5*(b.G+b.H)):(2==f?b.C=.5*(b.v+b.C):b.v=.5*(b.v+b.C),b.H=.5*(b.G+b.H))}return b};c.prototype.RR=function(a){return this.vz(a)};c.prototype.qR=
function(a,b){return z.XO(this,a,b)};c.prototype.HF=function(a,b){return z.WO(this,a,b)};c.prototype.getIterator=function(){return z.VO(this)};c.prototype.Pk=function(a,b){if(0>b||32<2*b)throw g.i.O("invalid height");this.wT=b;this.Da.L(a);this.kf=this.jf.De();this.jx(this.kf,0);this.dx(this.kf,0);this.IJ(this.kf,0);this.FJ(this.kf,0)};c.prototype.Bv=function(a,b,d,e,f,h,k){if(!e.contains(b))return 0==d?-1:this.Bv(a,b,0,this.Da,this.kf,h,k);if(!h)for(var m=f;-1!=m;m=this.DR(m))this.jx(m,this.vz(m)+
1);m=new g.l;m.L(e);e=f;var n=[];n[0]=new g.l;n[1]=new g.l;n[2]=new g.l;for(n[3]=new g.l;d<this.wT&&this.dO(e);d++){c.zJ(m,n);for(var p=!1,q=0;4>q;q++)if(n[q].contains(b)){p=!0;var t=this.Np(e,q);-1==t&&(t=this.mP(e,q));this.jx(t,this.vz(t)+1);e=t;m.L(n[q]);break}if(!p)break}return this.nS(a,b,d,m,e,h,f,k)};c.prototype.nS=function(a,b,d,e,f,h,k,m){var n=this.IF(f);if(h){if(f==k)return m;this.NP(m);h=m}else h=this.oP(),this.IB(h,a),this.FW(this.hv(h),b);this.hX(h,f);-1!=n?(this.hx(h,n),this.ex(n,h)):
this.BJ(f,h);this.NB(f,h);this.dx(f,this.nv(f)+1);this.cO(f)&&this.HQ(d,e,f);return h};c.prototype.NP=function(a){var b=this.RF(a),d=this.IF(b),e=this.JR(a),f=this.pv(a);this.Wr(b)==a?(-1!=f?this.hx(f,-1):this.NB(b,-1),this.BJ(b,f)):d==a?(this.ex(e,-1),this.NB(b,e)):(this.hx(f,e),this.ex(e,f));this.hx(a,-1);this.ex(a,-1);this.dx(b,this.nv(b)-1)};c.zJ=function(a,b){var d=.5*(a.v+a.C),e=.5*(a.G+a.H);b[0].L(d,e,a.C,a.H);b[1].L(a.v,e,d,a.H);b[2].L(a.v,a.G,d,e);b[3].L(d,a.G,a.C,e)};c.prototype.cO=function(a){return 8==
this.nv(a)&&!this.bG(a)};c.prototype.HQ=function(a,b,d){var e=this.Wr(d);do{var f=this.hv(e),h=this.ai.U(e,0);f=this.Xy(f);this.Bv(h,f,a,b,d,!0,e);e=h=this.pv(e)}while(-1!=e)};c.prototype.dO=function(a){return 8<=this.nv(a)||this.bG(a)};c.prototype.bG=function(a){return-1!=this.Np(a,0)||-1!=this.Np(a,1)||-1!=this.Np(a,2)||-1!=this.Np(a,3)};c.prototype.mP=function(a,b){var d=this.jf.De();this.JW(a,b,d);this.jx(d,0);this.dx(d,0);this.Rk(d,a);this.FJ(d,this.lv(a)+1);this.IJ(d,b<<2*this.lv(a)|this.LF(a));
return d};c.prototype.oP=function(){var a=this.ai.De();if(0<this.iw.size){var b=this.iw.Gc();this.iw.Jf()}else b=this.ys.length,this.ys.push(new g.l);this.GW(a,b);return a};c.prototype.Np=function(a,b){return this.jf.U(a,b)};c.prototype.JW=function(a,b,d){this.jf.T(a,b,d)};c.prototype.Wr=function(a){return this.jf.U(a,4)};c.prototype.BJ=function(a,b){this.jf.T(a,4,b)};c.prototype.IF=function(a){return this.jf.U(a,5)};c.prototype.NB=function(a,b){this.jf.T(a,5,b)};c.prototype.LF=function(a){return this.jf.U(a,
6)};c.prototype.IJ=function(a,b){this.jf.T(a,6,b)};c.prototype.nv=function(a){return this.jf.U(a,7)};c.prototype.vz=function(a){return this.jf.U(a,8)};c.prototype.dx=function(a,b){this.jf.T(a,7,b)};c.prototype.jx=function(a,b){this.jf.T(a,8,b)};c.prototype.DR=function(a){return this.jf.U(a,9)};c.prototype.Rk=function(a,b){this.jf.T(a,9,b)};c.prototype.lv=function(a){return this.jf.U(a,10)};c.prototype.FJ=function(a,b){this.jf.T(a,10,b)};c.prototype.eR=function(a){return this.ai.U(a,0)};c.prototype.IB=
function(a,b){this.ai.T(a,0,b)};c.prototype.JR=function(a){return this.ai.U(a,1)};c.prototype.pv=function(a){return this.ai.U(a,2)};c.prototype.hx=function(a,b){this.ai.T(a,1,b)};c.prototype.ex=function(a,b){this.ai.T(a,2,b)};c.prototype.RF=function(a){return this.ai.U(a,3)};c.prototype.hX=function(a,b){this.ai.T(a,3,b)};c.prototype.hv=function(a){return this.ai.U(a,4)};c.prototype.GW=function(a,b){this.ai.T(a,4,b)};c.prototype.Xy=function(a){return this.ys[a]};c.prototype.FW=function(a,b){this.ys[a].L(b)};
return c}();g.fu=l})(R||(R={}));(function(g){(function(c){c[c.Outside=0]="Outside";c[c.Inside=1]="Inside";c[c.Border=2]="Border"})(g.WK||(g.WK={}));var z=function(){function c(a,b){this.KT=b;this.Xh=a}c.prototype.ax=function(a,b){this.dH!=b&&a.flush();this.dH=b};c.prototype.bF=function(a,b){for(var d=0;d<b;)for(var e=a[d++],f=a[d++],h=a[d++]*this.KT;e<f;e++)this.Xh[h+(e>>4)]|=this.dH<<2*(e&15)};return c}();g.DY=z;var l=function(){function c(a,b,d){this.Xh=null;this.NA=this.Kk=this.YH=this.WH=this.Gs=
this.lH=this.Hf=this.Wm=0;this.Ti=this.Lk=this.xl=null;this.Az(a,b,d)}c.create=function(a,b,d){if(!c.uE(a))throw g.i.O();return c.rP(a,b,d)};c.kW=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw g.i.ga("Internal Error");}return a};c.uE=function(a){return a.B()||1607!=a.K()&&1736!=a.K()?!1:!0};c.prototype.mQ=function(a,b){b=b.Ha();for(var d=new g.h,e=new g.h;b.ab();)for(;b.Ia();){var f=b.ia();if(322!=f.K())throw g.i.ga("Internal Error");a.Gh(f.bc(),
d);a.Gh(f.xc(),e);this.Ti.fy(d.x,d.y,e.x,e.y)}this.Ti.dJ(g.Ox.Bx)};c.prototype.nQ=function(){throw g.i.ga("Internal Error");};c.prototype.My=function(a,b){for(var d=1;4>d;d++)a.fy(b[d-1].x,b[d-1].y,b[d].x,b[d].y);a.fy(b[3].x,b[3].y,b[0].x,b[0].y);this.Ti.dJ(g.Ox.Bx)};c.prototype.mK=function(a,b,d){for(var e=[null,null,null,null],f=0;f<e.length;f++)e[f]=new g.h;b=b.Ha();d=this.Lk.$X(d)+1.5;f=new g.h;for(var h=new g.h,k=new g.h,m=new g.h,n=new g.h,p=new g.l,q=new g.h;b.ab();){var t=!1,v=!0;for(q.na(0,
0);b.Ia();){var F=b.ia();m.x=F.ta;m.y=F.oa;n.x=F.qa;n.y=F.ma;p.Pa();p.$b(m.x,m.y);p.Nk(n.x,n.y);if(this.xl.CG(p)){this.Lk.Gh(n,n);v?(this.Lk.Gh(m,m),q.N(m),v=!1):m.N(q);f.vc(n,m);F=f.length();var W=.5>F;0==F?f.na(1,0):(W||q.N(n),f.scale(d/F),h.na(-f.y,f.x),k.na(f.y,-f.x),m.sub(f),n.add(f),e[0].add(m,h),e[1].add(m,k),e[2].add(n,k),e[3].add(n,h),W?t=!0:this.My(a,e))}else t&&(this.My(a,e),t=!1),v=!0}t&&this.My(a,e)}};c.prototype.nC=function(a){return g.P.truncate(a*this.lH+this.WH)};c.prototype.oC=function(a){return g.P.truncate(a*
this.Gs+this.YH)};c.rP=function(a,b,d){return new c(a,b,d)};c.prototype.Az=function(a,b,d){this.Hf=Math.max(g.P.truncate(2*Math.sqrt(d)+.5),64);this.Wm=g.P.truncate((2*this.Hf+31)/32);this.xl=new g.l;this.Kk=b;d=0;for(var e=this.Hf,f=this.Wm;8<=e;)d+=e*f,e=g.P.truncate(e/2),f=g.P.truncate((2*e+31)/32);this.Xh=g.P.mg(d,0);this.Ti=new g.Ox;d=new z(this.Xh,this.Wm,this);this.Ti.wX(this.Hf,this.Hf,d);a.A(this.xl);this.xl.X(b,b);e=new g.l;f=g.l.construct(1,1,this.Hf-2,this.Hf-2);var h=b*f.S();b*=f.da();
e.L(this.xl.tf(),Math.max(h,this.xl.S()),Math.max(b,this.xl.da()));this.NA=this.Kk;this.Lk=new g.Ed;this.Lk.kS(e,f);new g.Ed;switch(a.K()){case 550:d.ax(this.Ti,2);this.nQ();break;case 1607:d.ax(this.Ti,2);this.mK(this.Ti,a,this.NA);break;case 1736:d.ax(this.Ti,1),this.mQ(this.Lk,a),d.ax(this.Ti,2),this.mK(this.Ti,a,this.NA)}this.lH=this.Lk.eb;this.Gs=this.Lk.bb;this.WH=this.Lk.Lb;this.YH=this.Lk.Qb;this.SN()};c.prototype.SN=function(){this.Ti.flush();for(var a=0,b=this.Hf*this.Wm,d=this.Hf,e=g.P.truncate(this.Hf/
2),f=this.Wm,h=g.P.truncate((2*e+31)/32);8<d;){for(d=0;d<e;d++)for(var k=2*d,m=2*d+1,n=0;n<e;n++){var p=2*n,q=2*n+1,t=p>>4;p=2*(p&15);var v=q>>4;q=2*(q&15);var F=this.Xh[a+f*k+t]>>p&3;F|=this.Xh[a+f*k+v]>>q&3;F|=this.Xh[a+f*m+t]>>p&3;F|=this.Xh[a+f*m+v]>>q&3;this.Xh[b+h*d+(n>>4)]|=F<<2*(n&15)}d=e;f=h;a=b;e=g.P.truncate(d/2);h=g.P.truncate((2*e+31)/32);b=a+f*d}};c.prototype.Uo=function(a,b){if(!this.xl.contains(a,b))return 0;a=this.nC(a);b=this.oC(b);if(0>a||a>=this.Hf||0>b||b>=this.Hf)return 0;b=
this.Xh[this.Wm*b+(a>>4)]>>2*(a&15)&3;return 0==b?0:1==b?1:2};c.prototype.To=function(a){if(!a.Fa(this.xl))return 0;var b=this.nC(a.v),d=this.nC(a.C),e=this.oC(a.G);a=this.oC(a.H);0>b&&(b=0);0>e&&(e=0);d>=this.Hf&&(d=this.Hf-1);a>=this.Hf&&(a=this.Hf-1);if(b>d||e>a)return 0;for(var f=Math.max(d-b,1)*Math.max(a-e,1),h=0,k=this.Wm,m=this.Hf,n=0;;){if(32>f||16>m){for(f=e;f<=a;f++)for(var p=b;p<=d;p++)if(n=this.Xh[h+k*f+(p>>4)]>>2*(p&15)&3,1<n)return 2;if(0==n)return 0;if(1==n)return 1}h+=k*m;m=g.P.truncate(m/
2);k=g.P.truncate((2*m+31)/32);b=g.P.truncate(b/2);e=g.P.truncate(e/2);d=g.P.truncate(d/2);a=g.P.truncate(a/2);f=Math.max(d-b,1)*Math.max(a-e,1)}};c.prototype.MR=function(){return this.Hf*this.Wm};return c}();g.Mx=l})(R||(R={}));(function(g){(function(c){c[c.contains=1]="contains";c[c.within=2]="within";c[c.equals=3]="equals";c[c.disjoint=4]="disjoint";c[c.touches=8]="touches";c[c.crosses=16]="crosses";c[c.overlaps=32]="overlaps";c[c.unknown=0]="unknown";c[c.intersects=1073741824]="intersects"})(g.QL||
(g.QL={}));var z=function(){function c(){}c.construct=function(a,b,d,e,f,h,k,m){var n=new c;n.rw=a;n.Om=b;n.Mj=d;n.Ui=e;n.wH=f;n.OY=h;n.PY=k;n.QY=m;return n};return c}();g.Xt=function(){function c(){}c.xD=function(a,b,d){if(c.ry(a)){var e=g.ua.mj(b,a,!1);b=!1;g.Wk.xE(a)&&(b=b||a.nu(e,d));e=a.K();1736!=e&&1607!=e||!g.Wk.vE(a)||0==d||(b=b||a.hj(d));1736!=e&&1607!=e||!g.Wk.wE(a)||0==d||b||a.cM()}};c.ry=function(a){return g.Wk.xE(a)||g.Wk.vE(a)||g.Wk.wE(a)};return c}();var l=function(){function c(){this.th=
[]}c.uB=function(a,b,d,e,f){var h=a.K(),k=b.K();if(197==h){if(197==k)return c.oW(a,b,d,e);if(33==k)return 2==e?e=1:1==e&&(e=2),c.cJ(b,a,d,e)}else if(33==h){if(197==k)return c.cJ(a,b,d,e);if(33==k)return c.qW(a,b,d,e)}if(a.B()||b.B())return 4==e?!0:!1;var m=new g.l;a.A(m);var n=new g.l;b.A(n);var p=new g.l;p.L(m);p.$b(n);d=g.ua.Xd(d,p,!1);if(c.fk(m,n,d))return 4==e?!0:!1;m=!1;g.Xk.zd(h)&&(h=new g.Ua(a.description),h.pc(a,!0),a=h,h=1607);g.Xk.zd(k)&&(k=new g.Ua(b.description),k.pc(b,!0),b=k,k=1607);
if(197!=h&&197!=k){if(a.Eb()<b.Eb()||33==h&&550==k)2==e?e=1:1==e&&(e=2)}else 1736!=h&&197!=k&&(2==e?e=1:1==e&&(e=2));switch(h){case 1736:switch(k){case 1736:m=c.st(a,b,d,e,f);break;case 1607:m=c.bn(a,b,d,e,f);break;case 33:m=c.rt(a,b,d,e);break;case 550:m=c.qt(a,b,d,e,f);break;case 197:m=c.BI(a,b,d,e,f)}break;case 1607:switch(k){case 1736:m=c.bn(b,a,d,e,f);break;case 1607:m=c.bB(a,b,d,e,f);break;case 33:m=c.ut(a,b,d,e,f);break;case 550:m=c.tt(a,b,d,e,f);break;case 197:m=c.HI(a,b,d,e)}break;case 33:switch(k){case 1736:m=
c.rt(b,a,d,e);break;case 1607:m=c.ut(b,a,d,e,f);break;case 550:m=c.mt(b,a,d,e)}break;case 550:switch(k){case 1736:m=c.qt(b,a,d,e,f);break;case 1607:m=c.tt(b,a,d,e,f);break;case 550:m=c.UA(a,b,d,e,f);break;case 33:m=c.mt(a,b,d,e);break;case 197:m=c.cI(a,b,d,e)}break;case 197:switch(k){case 1736:m=c.BI(b,a,d,e,f);break;case 1607:m=c.HI(b,a,d,e);break;case 550:m=c.cI(b,a,d,e)}}return m};c.oW=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;var f=new g.l,h=new g.l,k=new g.l;a.A(f);b.A(h);k.L(f);k.$b(h);
a=g.ua.Xd(d,k,!1);switch(e){case 4:return c.fk(f,h,a);case 2:return c.eF(h,f,a);case 1:return c.eF(f,h,a);case 3:return c.gk(f,h,a);case 8:return c.YP(f,h,a);case 32:return c.XP(f,h,a);case 16:return c.WP(f,h,a)}return!1};c.cJ=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;a=a.D();var f=new g.l,h=new g.l;b.A(f);h.L(a);h.$b(f);b=g.ua.Xd(d,h,!1);switch(e){case 4:return c.Tw(a,f,b);case 2:return c.$A(a,f,b);case 1:return c.MU(a,f,b);case 3:return c.qI(a,f,b);case 8:return c.ZA(a,f,b)}return!1};
c.qW=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;a=a.D();b=b.D();var f=new g.l;f.L(a);f.$b(b);d=g.ua.Xd(d,f,!1);switch(e){case 4:return c.NU(a,b,d);case 2:return c.pI(b,a,d);case 1:return c.pI(a,b,d);case 3:return c.rI(a,b,d)}return!1};c.st=function(a,b,d,e,f){switch(e){case 4:return c.fV(a,b,d);case 2:return c.Uw(b,a,d,f);case 1:return c.Uw(a,b,d,f);case 3:return c.iV(a,b,d);case 8:return c.qV(a,b,d);case 32:return c.lV(a,b,d,f)}return!1};c.bn=function(a,b,d,e,f){switch(e){case 4:return c.gV(a,
b,d);case 1:return c.aB(a,b,d,f);case 8:return c.rV(a,b,d,f);case 16:return c.bV(a,b,d)}return!1};c.rt=function(a,b,d,e){switch(e){case 4:return c.eV(a,b,d);case 1:return c.ZU(a,b,d);case 8:return c.pV(a,b,d)}return!1};c.qt=function(a,b,d,e){switch(e){case 4:return c.dV(a,b,d);case 1:return c.YU(a,b,d);case 8:return c.oV(a,b,d);case 16:return c.aV(a,b,d)}return!1};c.BI=function(a,b,d,e,f){if(c.cV(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.sV(a,b,d);case 1:return c.XU(a,b,
d);case 3:return c.hV(a,b,d);case 8:return c.nV(a,b,d,f);case 32:return c.kV(a,b,d,f);case 16:return c.$U(a,b,d,f)}return!1};c.bB=function(a,b,d,e){switch(e){case 4:return c.BV(a,b,d);case 2:return c.FI(b,a,d);case 1:return c.FI(a,b,d);case 3:return c.DV(a,b,d);case 8:return c.II(a,b,d);case 32:return c.HV(a,b,d);case 16:return c.GI(a,b,d)}return!1};c.ut=function(a,b,d,e){switch(e){case 4:return c.AV(a,b,d);case 1:return c.vV(a,b,d);case 8:return c.LV(a,b,d)}return!1};c.tt=function(a,b,d,e){switch(e){case 4:return c.zV(a,
b,d);case 1:return c.uV(a,b,d);case 8:return c.KV(a,b,d);case 16:return c.xV(a,b,d)}return!1};c.HI=function(a,b,d,e){if(c.yV(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.MV(a,b,d);case 1:return c.tV(a,b,d);case 3:return c.CV(a,b,d);case 8:return c.JV(a,b,d);case 32:return c.GV(a,b,d);case 16:return c.wV(a,b,d)}return!1};c.UA=function(a,b,d,e){switch(e){case 4:return c.bU(a,b,d);case 2:return c.$H(b,a,d);case 1:return c.$H(a,b,d);case 3:return c.dU(a,b,d);case 32:return c.jU(a,
b,d)}return!1};c.mt=function(a,b,d,e){switch(e){case 4:return c.aI(a,b,d);case 2:return c.nU(a,b,d);case 1:return c.ZT(a,b,d);case 3:return c.Pw(a,b,d)}return!1};c.cI=function(a,b,d,e){switch(e){case 4:return c.aU(a,b,d);case 2:return c.mU(a,b,d);case 1:return c.YT(a,b,d);case 3:return c.cU(a,b,d);case 8:return c.lU(a,b,d);case 16:return c.$T(a,b,d)}return!1};c.iV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.gk(e,f,d))return!1;e=c.rc(a,b,!1);if(4==e||1==e||2==e)return!1;if(c.ZH(a,b,
d))return!0;e=a.Rb();f=b.Rb();return Math.abs(e-f)>4*Math.max(a.I(),b.I())*d?!1:c.Rz(a,b,d,!0)};c.fV=function(a,b,d){var e=c.rc(a,b,!0);return 4==e?!0:1==e||2==e||1073741824==e?!1:c.zI(a,b,d)};c.qV=function(a,b,d){var e=c.rc(a,b,!1);return 4==e||1==e||2==e?!1:c.DI(a,b,d,null)};c.lV=function(a,b,d,e){var f=c.rc(a,b,!1);return 4==f||1==f||2==f?!1:c.AI(a,b,d,e)};c.Uw=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(!c.Ac(f,h,d))return!1;f=c.rc(a,b,!1);return 4==f||2==f?!1:1==f?!0:c.wI(a,b,
d,e)};c.gV=function(a,b,d){var e=c.rc(a,b,!0);return 4==e?!0:1==e||1073741824==e?!1:c.zI(a,b,d)};c.rV=function(a,b,d,e){var f=c.rc(a,b,!1);return 4==f||1==f?!1:c.EI(a,b,d,e)};c.bV=function(a,b,d){var e=c.rc(a,b,!1);return 4==e||1==e?!1:c.yI(a,b,d,null)};c.aB=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(!c.Ac(f,h,d))return!1;f=c.rc(a,b,!1);return 4==f?!1:1==f?!0:c.xI(a,b,d,e)};c.eV=function(a,b,d){return 0==g.jd.FG(a,b,d)?!0:!1};c.pV=function(a,b,d){b=b.D();return c.CI(a,b,d)};c.ZU=function(a,
b,d){b=b.D();return c.vI(a,b,d)};c.dV=function(a,b,d){var e=c.rc(a,b,!1);if(4==e)return!0;if(1==e)return!1;e=new g.l;a.A(e);e.X(d,d);for(var f=new g.h,h=0;h<b.I();h++)if(b.D(h,f),e.contains(f)){var k=g.jd.Zd(a,f,d);if(1==k||2==k)return!1}return!0};c.oV=function(a,b,d){var e=this.rc(a,b,!1);if(4==e||1==e)return!1;e=new g.l;a.A(e);e.X(d,d);for(var f=!1,h=a,k=!1,m=0;m<b.I();m++){var n=b.Oa(m);if(e.contains(n))if(n=g.jd.Zd(h,n,d),2==n)f=!0;else if(1==n)return!1;k||(!g.Fg.Ol(a,b.I()-1)||null!=a.Cb&&null!=
a.Cb.Gb?h=a:(h=new g.Ea,a.copyTo(h),h.hj(1)),k=!0)}return f?!0:!1};c.aV=function(a,b,d){var e=this.rc(a,b,!1);if(4==e||1==e)return!1;var f=new g.l;e=new g.l;var h=new g.l;a.A(f);b.A(h);e.L(f);e.X(d,d);h=f=!1;for(var k=a,m=!1,n=0;n<b.I();n++){var p=b.Oa(n);e.contains(p)?(p=g.jd.Zd(k,p,d),0==p?h=!0:1==p&&(f=!0)):h=!0;if(f&&h)return!0;m||(!g.Fg.Ol(a,b.I()-1)||null!=a.Cb&&null!=a.Cb.Gb?k=a:(k=new g.Ea,a.copyTo(k),k.hj(1)),m=!0)}return!1};c.YU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!this.Ac(e,
f,d))return!1;f=this.rc(a,b,!1);if(4==f)return!1;if(1==f)return!0;f=!1;for(var h=a,k=!1,m=0;m<b.I();m++){var n=b.Oa(m);if(!e.contains(n))return!1;n=g.jd.Zd(h,n,d);if(1==n)f=!0;else if(0==n)return!1;k||(!g.Fg.Ol(a,b.I()-1)||null!=a.Cb&&null!=a.Cb.Gb?h=a:(h=new g.Ea,a.copyTo(h),h.hj(1)),k=!0)}return f};c.hV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.gk(e,f,d))return!1;e=new g.Ea;e.bd(b,!1);return c.Rz(a,e,d,!0)};c.cV=function(a,b,d){var e=c.rc(a,b,!1);if(4==e)return!0;if(1==e||2==e)return!1;
var f=new g.l;e=new g.l;a.A(f);b.A(e);if(c.Ac(e,f,d))return!1;f=new g.h;e.fn(f);b=g.jd.Zd(a,f,d);if(0!=b)return!1;e.VI(f);b=g.jd.Zd(a,f,d);if(0!=b)return!1;e.gn(f);b=g.jd.Zd(a,f,d);if(0!=b)return!1;e.YI(f);b=g.jd.Zd(a,f,d);if(0!=b)return!1;b=a.vb(0);f=new g.l;f.L(e);f.X(d,d);for(var h=0,k=a.I();h<k;h++){var m=b.read(2*h),n=b.read(2*h+1);if(f.contains(m,n))return!1}return!c.NG(a,e,d)};c.nV=function(a,b,d,e){var f=c.rc(a,b,!1);if(4==f||1==f||2==f)return!1;f=new g.l;var h=new g.l;a.A(f);b.A(h);if(c.Ac(h,
f,d))return!1;if(h.S()<=d&&h.da()<=d)return b=b.Kp(),c.CI(a,b,d);if(h.S()<=d||h.da()<=d)return f=new g.Ua,h=new g.Ta,b.If(0,h),f.nf(h),b.If(2,h),f.lineTo(h),c.EI(a,f,d,e);f=new g.Ea;f.bd(b,!1);return c.DI(a,f,d,e)};c.kV=function(a,b,d,e){var f=c.rc(a,b,!1);if(4==f||1==f||2==f)return!1;f=new g.l;var h=new g.l;a.A(f);b.A(h);if(c.Ac(h,f,d)||h.S()<=d||h.da()<=d)return!1;f=new g.Ea;f.bd(b,!1);return c.AI(a,f,d,e)};c.sV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.Ac(f,e,d)};c.XU=function(a,
b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.Ac(e,f,d))return!1;e=c.rc(a,b,!1);if(4==e||2==e)return!1;if(1==e)return!0;if(f.S()<=d&&f.da()<=d)return b=b.Kp(),c.vI(a,b,d);if(f.S()<=d||f.da()<=d)return f=new g.Ua,e=new g.Ta,b.If(0,e),f.nf(e),b.If(2,e),f.lineTo(e),c.xI(a,f,d,null);f=new g.Ea;f.bd(b,!1);return c.wI(a,f,d,null)};c.$U=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(c.Ac(h,f,d)||h.da()>d&&h.S()>d||h.da()<=d&&h.S()<=d)return!1;f=new g.Ua;h=new g.Ta;b.If(0,h);f.nf(h);b.If(2,
h);f.lineTo(h);return c.yI(a,f,d,e)};c.DV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.gk(e,f,d)&&4!=c.rc(a,b,!1)?c.ZH(a,b,d)?!0:c.Rz(a,b,d,!1):!1};c.BV=function(a,b,d){return 4==this.rc(a,b,!1)?!0:(new g.am(a,b,d,!0)).next()?!this.OG(a,b,d):!1};c.II=function(a,b,d){if(4==c.rc(a,b,!1))return!1;var e=new g.ce(0);if(0!=c.Sz(a,b,d,e))return!1;for(var f=new g.ee,h=0;h<e.size;h+=2){var k=e.read(h),m=e.read(h+1);f.Du(k,m)}a=a.ng();b=b.ng();a.Gd(b,0,b.I());return c.Ow(a,f,d)};c.GI=function(a,
b,d){if(4==c.rc(a,b,!1))return!1;var e=new g.ce(0);if(0!=c.Sz(a,b,d,e))return!1;for(var f=new g.ee,h=0;h<e.size;h+=2){var k=e.read(h),m=e.read(h+1);f.Du(k,m)}a=a.ng();b=b.ng();a.Gd(b,0,b.I());return!c.Ow(a,f,d)};c.HV=function(a,b,d){return 4==c.rc(a,b,!1)?!1:c.QG(a,b,d)};c.FI=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.Ac(e,f,d)&&4!=c.rc(a,b,!1)?c.Am(b,a,d,!1):!1};c.AV=function(a,b,d){if(4==c.rc(a,b,!1))return!0;b=b.D();return!c.Tz(a,b,d)};c.LV=function(a,b,d){if(4==c.rc(a,b,!1))return!1;
b=b.D();return c.Uz(a,b,d)};c.vV=function(a,b,d){if(4==c.rc(a,b,!1))return!1;b=b.D();return c.MG(a,b,d)};c.zV=function(a,b,d){return 4==c.rc(a,b,!1)?!0:!c.PG(a,b,d,!1)};c.KV=function(a,b,d){if(4==this.rc(a,b,!1))return!1;var e=a.Ha(),f=new g.l,h=new g.l,k=new g.l;a.A(f);b.A(h);f.X(d,d);h.X(d,d);k.L(f);k.Fa(h);f=null;var m=a.Cb;if(null!=m){var n=m.Gb;f=m.Bo;null==n&&(n=m=g.ua.lj(a,k))}else n=m=g.ua.lj(a,k);var p=n.getIterator(),q=null;null!=f&&(q=f.getIterator());var t=new g.h,v=new g.h,F=!1,W=d*d;
f=new g.rn(b.I());for(m=0;m<b.I();m++)f.write(m,0);for(m=0;m<b.I();m++)if(b.D(m,t),k.contains(t))if(h.L(t.x,t.y,t.x,t.y),null==q||(q.Zi(h,d),-1!=q.next())){p.Zi(h,d);for(var ba=p.next();-1!=ba;ba=p.next())if(e.Wb(n.ka(ba)),ba=e.ia(),ba.ic(ba.ge(t,!1),v),g.h.zc(t,v)<=W){f.write(m,1);F=!0;break}}if(!F)return!1;a=a.ng();e=new g.ee;h=new g.h;for(m=0;m<b.I();m++)0!=f.read(m)&&(b.D(m,h),e.Du(h.x,h.y));return this.Ow(a,e,d)};c.xV=function(a,b,d){if(4==this.rc(a,b,!1))return!1;var e=a.Ha(),f=new g.l,h=new g.l,
k=new g.l;a.A(f);b.A(h);f.X(d,d);h.X(d,d);k.L(f);k.Fa(h);f=null;var m=a.Cb;if(null!=m){var n=m.Gb;f=m.Bo;null==n&&(n=m=g.ua.lj(a,k))}else n=m=g.ua.lj(a,k);var p=n.getIterator(),q=null;null!=f&&(q=f.getIterator());var t=new g.h,v=new g.h,F=!1,W=!1,ba=d*d;f=new g.rn(b.I());for(m=0;m<b.I();m++)f.write(m,0);for(m=0;m<b.I();m++)if(b.D(m,t),k.contains(t))if(h.L(t.x,t.y,t.x,t.y),null!=q&&(q.Zi(h,d),-1==q.next()))W=!0;else{p.Zi(h,d);for(var aa=!1,fa=p.next();-1!=fa;fa=p.next())if(e.Wb(n.ka(fa)),fa=e.ia(),
fa.ic(fa.ge(t,!1),v),g.h.zc(t,v)<=ba){f.write(m,1);aa=F=!0;break}aa||(W=!0)}else W=!0;if(!F||!W)return!1;a=a.ng();e=new g.ee;h=new g.h;for(m=0;m<b.I();m++)0!=f.read(m)&&(b.D(m,h),e.Du(h.x,h.y));return!this.Ow(a,e,d)};c.uV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.Ac(e,f,d)||4==c.rc(a,b,!1)||!c.PG(a,b,d,!0))return!1;a=a.ng();return!c.bI(a,b,d)};c.CV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return f.da()>d&&f.S()>d?!1:c.gk(e,f,d)};c.yV=function(a,b,d){var e=new g.l,f=
new g.l;a.A(e);b.A(f);return c.Ac(f,e,d)?!1:!c.NG(a,f,d)};c.JV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(f.da()<=d&&f.S()<=d)return f=b.Kp(),c.Uz(a,f,d);if(f.da()<=d||f.S()<=d)return f=new g.Ua,e=new g.Ta,b.If(0,e),f.nf(e),b.If(2,e),f.lineTo(e),c.II(a,f,d);a=a.Ha();b=new g.l;e=new g.l;b.L(f);e.L(f);b.X(-d,-d);e.X(d,d);f=!1;for(var h=new g.l,k=new g.l;a.ab();)for(;a.Ia();){a.ia().A(h);k.L(b);k.Fa(h);if(!k.B()&&(k.da()>d||k.S()>d))return!1;k.L(e);k.Fa(h);k.B()||(f=!0)}return f};c.GV=
function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.Ac(e,f,d)||c.Ac(f,e,d)||c.Ac(f,e,d)||f.da()>d&&f.S()>d||f.da()<=d&&f.S()<=d)return!1;e=new g.Ua;f=new g.Ta;b.If(0,f);e.nf(f);b.If(2,f);e.lineTo(f);return c.QG(a,e,d)};c.MV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.Ac(f,e,d)||f.da()<=d&&f.S()<=d)return!1;if(f.da()<=d||f.S()<=d)return c.Ac(f,e,d);a=a.Ha();b=new g.l;b.L(f);b.X(-d,-d);f=!1;e=new g.l;for(var h=new g.l;a.ab();)for(;a.Ia();)a.ia().A(e),b.jm(e)?f=!0:(h.L(b),h.Fa(e),
!h.B()&&(h.da()>d||h.S()>d)&&(f=!0));return f};c.tV=function(a,b,d){var e=new g.l,f=new g.l;b.A(f);a.A(e);if(!c.Ac(e,f,d)||f.da()>d&&f.S()>d)return!1;if(f.da()<=d&&f.S()<=d)return b=b.Kp(),c.MG(a,b,d);e=new g.Ua;f=new g.Ta;b.If(0,f);e.nf(f);b.If(2,f);e.lineTo(f);return c.Am(e,a,d,!1)};c.wV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.Ac(f,e,d)||f.da()<=d&&f.S()<=d)return!1;if(f.da()<=d||f.S()<=d)return e=new g.Ua,f=new g.Ta,b.If(0,f),e.nf(f),b.If(2,f),e.lineTo(f),c.GI(a,e,d);a=a.Ha();
b=new g.l;e=new g.l;e.L(f);b.L(f);e.X(-d,-d);b.X(d,d);for(var h=f=!1,k=new g.l,m=new g.l;a.ab();)for(;a.Ia();)if(a.ia().A(k),h||b.contains(k)||(h=!0),f||(m.L(e),m.Fa(k),!m.B()&&(m.da()>d||m.S()>d)&&(f=!0)),f&&h)return!0;return!1};c.dU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.gk(e,f,d)?c.eU(a,b,d)?!0:c.TA(a,b,d,!1,!0,!1):!1};c.bU=function(a,b,d){return!c.bI(a,b,d)};c.jU=function(a,b,d){return c.TA(a,b,d,!1,!1,!0)};c.$H=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.Ac(e,
f,d)?c.TA(b,a,d,!0,!1,!1):!1};c.Ow=function(a,b,d){d*=d;for(var e=new g.h,f=new g.h,h=0;h<b.I();h++){b.D(h,f);for(var k=!1,m=0;m<a.I();m++)if(a.D(m,e),g.h.zc(e,f)<=d){k=!0;break}if(!k)return!1}return!0};c.Pw=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.gk(e,f,d)};c.aI=function(a,b,d){b=b.D();return c.lt(a,b,d)};c.nU=function(a,b,d){return c.Pw(a,b,d)};c.ZT=function(a,b,d){return!c.aI(a,b,d)};c.cU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return f.da()>d||f.S()>d?!1:c.gk(e,
f,d)};c.aU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.Ac(f,e,d))return!1;b=new g.l;b.L(f);b.X(d,d);d=new g.h;for(f=0;f<a.I();f++)if(a.D(f,d),b.contains(d))return!1;return!0};c.lU=function(a,b,d){var e=new g.l,f=new g.l,h=new g.l;b.A(e);if(e.da()<=d&&e.S()<=d)return!1;if(e.da()<=d||e.S()<=d){b=new g.h;var k=!1;f.L(e);h.L(e);f.X(d,d);e.da()>d?h.X(0,-d):h.X(-d,0);for(var m=0;m<a.I();m++)if(a.D(m,b),f.contains(b)){if(e.da()>d){if(b.y>h.G&&b.y<h.H)return!1}else if(b.x>h.v&&b.x<h.C)return!1;
k=!0}return k}f.L(e);h.L(e);f.X(d,d);h.X(-d,-d);b=new g.h;k=!1;for(m=0;m<a.I();m++)if(a.D(m,b),f.contains(b)){if(h.jm(b))return!1;k=!0}return k};c.mU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.Ac(f,e,d))return!1;if(f.da()<=d&&f.S()<=d)return c.gk(e,f,d);if(f.da()<=d||f.S()<=d){b=!1;e=new g.l;var h=new g.l;e.L(f);h.L(f);f.da()>d?e.X(0,-d):e.X(-d,0);h.X(d,d);for(var k=new g.h,m=0;m<a.I();m++){a.D(m,k);if(!h.contains(k))return!1;f.da()>d?k.y>e.G&&k.y<e.H&&(b=!0):k.x>e.v&&k.x<e.C&&(b=
!0)}return b}b=!1;e=new g.l;h=new g.l;e.L(f);h.L(f);e.X(-d,-d);h.X(d,d);k=new g.h;for(m=0;m<a.I();m++){a.D(m,k);if(!h.contains(k))return!1;e.jm(k)&&(b=!0)}return b};c.YT=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.Ac(e,f,d)||f.da()>d||f.S()>d)return!1;b=b.Kp();return!c.lt(a,b,d)};c.$T=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.Ac(f,e,d)||f.da()<=d&&f.S()<=d)return!1;if(f.da()<=d||f.S()<=d){b=new g.l;e=new g.l;b.L(f);f.da()>d?b.X(0,-d):b.X(-d,0);e.L(f);e.X(d,d);for(var h=
new g.h,k=!1,m=!1,n=0;n<a.I();n++)if(a.D(n,h),k||(f.da()>d?h.y>b.G&&h.y<b.H&&(k=!0):h.x>b.v&&h.x<b.C&&(k=!0)),m||e.contains(h)||(m=!0),k&&m)return!0;return!1}b=new g.l;e=new g.l;b.L(f);b.X(-d,-d);e.L(f);e.X(d,d);h=new g.h;m=k=!1;for(n=0;n<a.I();n++)if(a.D(n,h),!k&&b.jm(h)&&(k=!0),m||e.contains(h)||(m=!0),k&&m)return!0;return!1};c.rI=function(a,b,d){return g.h.zc(a,b)<=d*d?!0:!1};c.NU=function(a,b,d){return g.h.zc(a,b)>d*d?!0:!1};c.pI=function(a,b,d){return c.rI(a,b,d)};c.qI=function(a,b,d){var e=
new g.l;e.L(a);return c.gk(e,b,d)};c.Tw=function(a,b,d){var e=new g.l;e.L(b);e.X(d,d);return!e.contains(a)};c.ZA=function(a,b,d){if(b.da()<=d&&b.S()<=d)return!1;var e=new g.l,f=new g.l;e.L(b);e.X(d,d);if(!e.contains(a))return!1;if(b.da()<=d||b.S()<=d){f.L(b);b.da()>d?f.X(0,-d):f.X(-d,0);if(b.da()>d){if(a.y>f.G&&a.y<f.H)return!1}else if(a.x>f.v&&a.x<f.C)return!1;return!0}f.L(b);f.X(-d,-d);return f.jm(a)?!1:!0};c.$A=function(a,b,d){if(b.da()<=d&&b.S()<=d)return!0;if(b.da()<=d||b.S()<=d){var e=new g.l;
e.L(b);b.da()>d?e.X(0,-d):e.X(-d,0);var f=!1;b.da()>d?a.y>e.G&&a.y<e.H&&(f=!0):a.x>e.v&&a.x<e.C&&(f=!0);return f}e=new g.l;e.L(b);e.X(-d,-d);return e.jm(a)};c.MU=function(a,b,d){return c.qI(a,b,d)};c.gk=function(a,b,d){return c.Ac(a,b,d)&&c.Ac(b,a,d)};c.fk=function(a,b,d){var e=new g.l;e.L(b);e.X(d,d);return!a.isIntersecting(e)};c.YP=function(a,b,d){if(a.da()<=d&&a.S()<=d){var e=a.tf();return c.ZA(e,b,d)}if(b.da()<=d&&b.S()<=d)return e=b.tf(),c.ZA(e,a,d);a.da()>d&&a.S()>d&&(b.da()<=d||b.S()<=d)?e=
b:(e=a,a=b);if(e.da()<=d||e.S()<=d){if(a.da()<=d||a.S()<=d){b=new g.zb;var f=new g.zb,h=[0,0],k=[0,0],m=new g.h;e.fn(m);b.Ec(m);e.gn(m);b.Rc(m);a.fn(m);f.Ec(m);a.gn(m);f.Rc(m);b.Fa(f,null,h,k,d);return 1!=b.Fa(f,null,null,null,d)?!1:0==h[0]||1==h[1]||0==k[0]||1==k[1]}b=new g.l;f=new g.l;b.L(a);b.X(-d,-d);f.L(b);f.Fa(e);return!f.B()&&(f.da()>d||f.S()>d)?!1:!0}a.X(d,d);f=new g.l;f.L(e);f.Fa(a);return f.B()||!f.B()&&f.da()>d&&f.S()>d?!1:!0};c.XP=function(a,b,d){if(c.Ac(a,b,d)||c.Ac(b,a,d)||a.da()<=d&&
a.S()<=d||b.da()<=d&&b.S()<=d)return!1;if(a.da()<=d||a.S()<=d){if(b.da()>d&&b.S()>d)return!1;var e=new g.zb,f=new g.zb,h=[0,0],k=[0,0],m=new g.h;a.fn(m);e.Ec(m);a.gn(m);e.Rc(m);b.fn(m);f.Ec(m);b.gn(m);f.Rc(m);e.Fa(f,null,h,k,d);return 2!=e.Fa(f,null,null,null,d)?!1:(0<h[0]||1>h[1])&&(0<k[0]||1>k[1])}if(b.da()<=d||b.S()<=d)return!1;e=new g.l;e.L(a);e.Fa(b);return e.B()||e.da()<=d||e.S()<=d?!1:!0};c.eF=function(a,b,d){if(!c.Ac(a,b,d))return!1;if(a.da()<=d&&a.S()<=d)return a=a.tf(),c.$A(a,b,d);if(b.da()<=
d&&b.S()<=d)return b=b.tf(),c.$A(b,a,d);if(a.da()<=d||a.S()<=d)return c.Ac(a,b,d);if(b.da()<=d||b.S()<=d){var e=new g.l;e.L(a);e.X(-d,-d);if(e.jm(b))return!0;a=new g.l;a.L(e);a.Fa(b);return a.B()||a.da()<=d&&a.S()<=d?!1:!0}return c.Ac(a,b,d)};c.WP=function(a,b,d){if(c.Ac(a,b,d)||c.Ac(b,a,d)||a.da()<=d&&a.S()<=d||b.da()<=d&&b.S()<=d||b.da()>d&&b.S()>d&&a.da()>d&&a.S()>d)return!1;if(a.da()>d&&a.S()>d)var e=b;else e=a,a=b;if(a.da()>d&&a.S()>d){b=new g.l;var f=new g.l;f.L(a);f.X(-d,-d);b.L(f);b.Fa(e);
return b.B()||b.da()<=d&&b.S()<=d?!1:!0}b=new g.zb;f=new g.zb;var h=[0,0],k=[0,0],m=new g.h;e.fn(m);b.Ec(m);e.gn(m);b.Rc(m);a.fn(m);f.Ec(m);a.gn(m);f.Rc(m);b.Fa(f,null,h,k,d);return 1!=b.Fa(f,null,null,null,d)?!1:0<h[0]&&1>h[1]&&0<k[0]&&1>k[1]};c.zI=function(a,b,d){var e=new g.l,f=new g.l,h=new g.am(a,b,d,!0);if(!h.next())return!0;if(this.OG(a,b,d))return!1;var k=a,m=null;1736==b.K()&&(m=b);var n=!1,p=!1;do{var q=h.pl(),t=h.jl();t=b.Oa(b.Ca(t));e.L(h.oz());e.X(d,d);if(e.contains(t)&&(t=g.jd.Zd(k,
t,0),0!=t)||1736==b.K()&&(q=a.Oa(a.Ca(q)),f.L(h.Wy()),f.X(d,d),f.contains(q)&&(t=g.jd.Zd(m,q,0),0!=t)))return!1;n||(!g.Fg.Ol(a,b.ea()-1)||null!=a.Cb&&null!=a.Cb.Gb?k=a:(k=new g.Ea,a.copyTo(k),k.hj(1)),n=!0);1736!=b.K()||p||(p=b,!g.Fg.Ol(p,a.ea()-1)||null!=b.Cb&&null!=b.Cb.Gb?m=b:(m=new g.Ea,p.copyTo(m),m.hj(1)),p=!0)}while(h.next());return!0};c.Ac=function(a,b,d){var e=new g.l;e.L(a);e.X(d,d);return e.contains(b)};c.ns=function(a,b,d){var e=new g.l;e.L(b);e.X(d,d);b=new g.h;a.fn(b);if(!e.contains(b))return!0;
a.VI(b);if(!e.contains(b))return!0;a.YI(b);if(!e.contains(b))return!0;a.gn(b);return e.contains(b)?!1:!0};c.ZH=function(a,b,d){if(a.ea()!=b.ea()||a.I()!=b.I())return!1;var e=new g.h,f=new g.h,h=!0;d*=d;for(var k=0;k<a.ea();k++){if(a.Wc(k)!=b.Wc(k)){h=!1;break}for(var m=a.Ca(k);m<b.Wc(k);m++)if(a.D(m,e),b.D(m,f),g.h.zc(e,f)>d){h=!1;break}if(!h)break}return h?!0:!1};c.eU=function(a,b,d){if(a.I()!=b.I())return!1;var e=new g.h,f=new g.h,h=!0;d*=d;for(var k=0;k<a.I();k++)if(a.D(k,e),b.D(k,f),g.h.zc(e,
f)>d){h=!1;break}return h?!0:!1};c.TA=function(a,b,d,e,f,h){var k=!1;if(a.I()>b.I()){e&&(e=!1,k=!0);var m=b}else m=a,a=b;b=null;if(f||h||k){b=new g.rn(a.I());for(var n=0;n<a.I();n++)b.write(n,0)}n=new g.l;var p=new g.l,q=new g.l;m.A(n);a.A(p);n.X(d,d);p.X(d,d);q.L(n);q.Fa(p);p=new g.h;for(var t=new g.h,v=!0,F=g.ua.jE(a,q),W=F.getIterator(),ba=d*d,aa=0;aa<m.I();aa++)if(m.D(aa,p),q.contains(p)){var fa=!1;n.L(p.x,p.y,p.x,p.y);W.Zi(n,d);for(var ka=W.next();-1!=ka&&!(ka=F.ka(ka),a.D(ka,t),g.h.zc(p,t)<=
ba&&((f||h||k)&&b.write(ka,1),fa=!0,e));ka=W.next());if(!fa&&(v=!1,f||e))return!1}else{if(f||e)return!1;v=!1}if(h&&v)return!1;if(e)return!0;for(n=0;n<a.I();n++)if(1==b.read(n)){if(h)return!0}else if(f||k)return!1;return h?!1:!0};c.bI=function(a,b,d){if(a.I()>b.I())var e=b;else e=a,a=b;b=new g.l;var f=new g.l,h=new g.l;e.A(b);a.A(f);b.X(d,d);f.X(d,d);h.L(b);h.Fa(f);f=new g.h;for(var k=new g.h,m=d*d,n=g.ua.jE(a,h),p=n.getIterator(),q=0;q<e.I();q++)if(e.D(q,f),h.contains(f)){b.L(f.x,f.y,f.x,f.y);p.Zi(b,
d);for(var t=p.next();-1!=t;t=p.next())if(a.D(n.ka(t),k),g.h.zc(f,k)<=m)return!0}return!1};c.Rz=function(a,b,d,e){return c.Am(a,b,d,e)&&c.Am(b,a,d,e)};c.Am=function(a,b,d,e){function f(Sa,Qa){return q.LE(Sa,Qa)}var h=!0,k=[0,0],m=[0,0],n=0,p=new g.ja(0),q=new c,t,v=new g.l,F=new g.l,W=new g.l;a.A(v);b.A(F);v.X(d,d);F.X(d,d);W.L(v);W.Fa(F);a=a.Ha();F=b.Ha();var ba=null,aa=ba=null,fa=b.Cb;null!=fa?(ba=fa.Gb,aa=fa.Bo,null==ba&&(ba=g.ua.lj(b,W))):ba=g.ua.lj(b,W);b=ba.getIterator();fa=null;for(null!=aa&&
(fa=aa.getIterator());a.ab();)for(;a.Ia();){var ka=!1,la=a.ia();la.A(v);if(!v.isIntersecting(W))return!1;if(null!=fa&&(fa.Zi(v,d),-1==fa.next()))return h=!1;aa=la.Rb();b.Wo(la,d);for(t=b.next();-1!=t;t=b.next()){F.Wb(ba.ka(t));t=F.ia();var ma=la.Fa(t,null,k,m,d);if(2==ma&&(!e||m[0]<=m[1])){ma=k[0];var sa=k[1],wa=m[0],Ga=m[1];if(ma*aa<=d&&(1-sa)*aa<=d){ka=!0;n=0;p.resize(0);q.th.length=0;var Fa=a.xb();for(wa=!0;wa;){if(a.Ia()){la=a.ia();aa=la.Rb();ma=la.Fa(t,null,k,m,d);if(2==ma&&(!e||m[0]<=m[1])&&
(ma=k[0],sa=k[1],ma*aa<=d&&(1-sa)*aa<=d)){Fa=a.xb();continue}if(F.Ia()&&(t=F.ia(),ma=la.Fa(t,null,k,m,d),2==ma&&(!e||m[0]<=m[1])&&(ma=k[0],sa=k[1],ma*aa<=d&&(1-sa)*aa<=d))){Fa=a.xb();continue}}wa=!1}Fa!=a.xb()&&(a.Wb(Fa),a.ia());break}else Fa=a.xb(),t=z.construct(Fa,a.gb,ma,sa,F.xb(),F.gb,wa,Ga),q.th.push(t),p.add(p.size)}}if(!ka){if(n==q.th.length)return!1;1<p.size-n&&p.Wd(n,p.size,f);for(ka=0;n<q.th.length;n++)if(t=q.th[p.get(n)],!(t.Mj<ka&&t.Ui<ka)){if(aa*(t.Mj-ka)>d)return!1;ka=t.Ui;if(aa*(1-
ka)<=d||1==ka)break}if(aa*(1-ka)>d)return!1;n=0;p.resize(0);q.th.length=0}}return h};c.QG=function(a,b,d){if(1>c.Sz(a,b,d,null))return!1;var e=new g.l,f=new g.l;a.A(e);b.A(f);var h=c.ns(e,f,d);e=c.ns(f,e,d);return h&&e?!0:h&&!e?!c.Am(b,a,d,!1):e&&!h?!c.Am(a,b,d,!1):!c.Am(a,b,d,!1)&&!c.Am(b,a,d,!1)};c.Sz=function(a,b,d,e){function f(bb,eb){return v.LE(bb,eb)}if(a.sz()>b.sz())var h=b,k=a;else h=a,k=b;a=h.Ha();b=k.Ha();var m=[0,0],n=[0,0],p=-1,q=0,t=new g.ja(0),v=new c,F=new g.l,W=new g.l,ba=new g.l;
h.A(F);k.A(W);F.X(d,d);W.X(d,d);ba.L(F);ba.Fa(W);h=null;null!=e&&(h=new g.h);var aa=W=W=null,fa=k.Cb;null!=fa?(W=fa.Gb,aa=fa.Bo,null==W&&(W=g.ua.lj(k,ba))):W=g.ua.lj(k,ba);k=W.getIterator();fa=null;for(null!=aa&&(fa=aa.getIterator());a.ab();)for(aa=0;a.Ia();){var ka=a.ia();ka.A(F);if(F.isIntersecting(ba)&&(null==fa||(fa.Zi(F,d),-1!=fa.next()))){var la=ka.Rb();k.Wo(ka,d);for(var ma=k.next();-1!=ma;ma=k.next()){var sa=W.ka(ma);b.Wb(sa);var wa=b.ia(),Ga=wa.Rb(),Fa=ka.Fa(wa,null,m,n,d);if(0<Fa){ma=m[0];
p=n[0];var Sa=2==Fa?m[1]:NaN,Qa=2==Fa?n[1]:NaN;if(2==Fa){if(la*(Sa-ma)>d)return p=1;var Xa=la*(Sa-ma);if(b.Ia()){wa=b.ia();Fa=ka.Fa(wa,null,m,null,d);if(2==Fa){Fa=m[0];var Ya=m[1];Fa=la*(Ya-Fa);if(Xa+Fa>d)return p=1}b.Wb(sa);b.ia()}if(!b.xm()){b.ni();wa=b.ni();Fa=ka.Fa(wa,null,m,null,d);if(2==Fa&&(Fa=m[0],Ya=m[1],Fa=la*(Ya-Fa),Xa+Fa>d))return p=1;b.Wb(sa);b.ia()}if(a.Ia()){sa=a.xb();ka=a.ia();Fa=ka.Fa(wa,null,m,null,d);if(2==Fa&&(Fa=m[0],Ya=m[1],Fa=la*(Ya-Fa),Xa+Fa>d))return p=1;a.Wb(sa);a.ia()}if(!a.xm()){sa=
a.xb();a.ni();ka=a.ni();Fa=ka.Fa(wa,null,m,null,d);if(2==Fa&&(Fa=m[0],Ya=m[1],Fa=Ga*(Ya-Fa),Xa+Fa>d))return p=1;a.Wb(sa);a.ia()}wa=z.construct(a.xb(),a.gb,ma,Sa,b.xb(),b.gb,p,Qa);v.th.push(wa);t.add(t.size)}p=0;null!=e&&(ka.ic(ma,h),e.add(h.x),e.add(h.y))}}if(q<v.th.length){t.Wd(q,t.size,f);ka=0;for(ma=v.th[t.get(q)].Om;q<v.th.length;q++)if(wa=v.th[t.get(q)],!(wa.Mj<ka&&wa.Ui<ka))if(la*(wa.Mj-ka)>d)aa=la*(wa.Ui-wa.Mj),ka=wa.Ui,ma=wa.Om;else{wa.Om!=ma?(aa=la*(wa.Ui-wa.Mj),ma=wa.Om):aa+=la*(wa.Ui-wa.Mj);
if(aa>d)return p=1;ka=wa.Ui;if(1==ka)break}la*(1-ka)>d&&(aa=0);q=0;t.resize(0);v.th.length=0}}}return p};c.OG=function(a,b,d){var e=a.Ha(),f=b.Ha();for(a=new g.am(a,b,d,!1);a.next();){b=a.pl();var h=a.jl();e.Wb(b);f.Wb(h);b=e.ia();if(0<f.ia().Fa(b,null,null,null,d))return!0}return!1};c.PG=function(a,b,d,e){var f=a.Ha(),h=new g.l,k=new g.l,m=new g.l;a.A(h);b.A(k);h.X(d,d);h.contains(k);k.X(d,d);m.L(h);m.Fa(k);h=a.Cb;null!=h?(h=h.Gb,null==h&&(h=g.ua.lj(a,m))):h=g.ua.lj(a,m);a=h.getIterator();for(var n=
new g.h,p=new g.h,q=d*d,t=0;t<b.I();t++)if(b.D(t,n),m.contains(n)){k.L(n.x,n.y,n.x,n.y);a.Zi(k,d);for(var v=!1,F=a.next();-1!=F;F=a.next())if(f.Wb(h.ka(F)),F=f.ia(),F.ic(F.ge(n,!1),p),g.h.zc(p,n)<=q){v=!0;break}if(e){if(!v)return!1}else if(v)return!0}return e?!0:!1};c.Tz=function(a,b,d){var e=new g.h,f=d*d,h=a.Ha();a=a.Cb;if(null!=a&&(a=a.Gb,null!=a)){var k=new g.l;k.L(b);d=a.HF(k,d);for(k=d.next();-1!=k;k=d.next())if(h.Wb(a.ka(k)),h.Ia()){k=h.ia();var m=k.ge(b,!1);k.ic(m,e);if(g.h.zc(b,e)<=f)return!0}return!1}for(a=
new g.l;h.ab();)for(;h.Ia();)if(k=h.ia(),k.A(a),a.X(d,d),a.contains(b)&&(m=k.ge(b,!1),k.ic(m,e),g.h.zc(b,e)<=f))return!0;return!1};c.MG=function(a,b,d){return c.Tz(a,b,d)&&!c.Uz(a,b,d)};c.Uz=function(a,b,d){a=a.ng();return!c.lt(a,b,d)};c.NG=function(a,b,d){if(a.vm()){var e=new g.zb(b.v,b.G,b.v,b.H),f=new g.zb(b.v,b.H,b.C,b.H),h=new g.zb(b.C,b.H,b.C,b.G);b=new g.zb(b.C,b.G,b.v,b.G);for(a=a.Ha();a.ab();)for(;a.Ia();){var k=a.ia();if(k.isIntersecting(e,d)||k.isIntersecting(f,d)||k.isIntersecting(h,d)||
k.isIntersecting(b,d))return!0}}else{e=new g.l;e.L(b);e.X(d,d);d=a.vb(0);f=new g.h;h=new g.h;b=new g.h;k=new g.h;for(var m=0,n=a.ea();m<n;m++)for(var p=!0,q=a.Ca(m),t=a.Wc(m);q<t;q++)if(p)d.uc(2*q,h),p=!1;else{d.uc(2*q,f);b.N(h);k.N(f);if(0!=e.uy(b,k))return!0;h.N(f)}}return!1};c.rc=function(a,b,d){var e=a.K(),f=b.K();if(g.ba.zj(e)){var h=a.Cb;if(null!=h&&(h=h.Hk,null!=h))if(33==f){var k=b.D();k=h.Uo(k.x,k.y);if(1==k)return 1;if(0==k)return 4}else{k=new g.l;b.A(k);k=h.To(k);if(1==k)return 1;if(0==
k)return 4;if(d&&g.ba.zj(f)&&c.CE(b,h))return 1073741824}}if(g.ba.zj(f)&&(h=b.Cb,null!=h&&(h=h.Hk,null!=h)))if(33==e){a=a.D();k=h.Uo(a.x,a.y);if(1==k)return 2;if(0==k)return 4}else{b=new g.l;a.A(b);k=h.To(b);if(1==k)return 2;if(0==k)return 4;if(d&&g.ba.zj(e)&&c.CE(a,h))return 1073741824}return 0};c.CE=function(a,b){for(var d=a.I(),e=new g.h,f=0;f<d;f++)if(a.D(f,e),1==b.Uo(e.x,e.y))return!0;return!1};c.DI=function(a,b,d,e){for(var f=1<=a.qm(0)&&1<=b.qm(0),h=a.Ha(),k=b.Ha(),m=[0,0],n=[0,0],p=new g.am(a,
b,d,!1),q=!1;p.next();){var t=p.pl(),v=p.jl();h.Wb(t);k.Wb(v);t=h.ia();v=k.ia().Fa(t,null,n,m,d);if(2==v){q=m[0];v=m[1];t=t.Rb();if(f&&(v-q)*t>d)return!1;q=!0}else if(0!=v){q=m[0];t=n[0];if(0<q&&1>q&&0<t&&1>t)return!1;q=!0}}if(!q)return!1;h=new g.l;k=new g.l;f=new g.l;a.A(h);b.A(k);h.X(1E3*d,1E3*d);k.X(1E3*d,1E3*d);f.L(h);f.Fa(k);return 10<a.I()&&(a=g.Vd.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Vd.clip(b,f,d,0),b.B())?!1:g.cm.st(a,b,d,"F********",e)};c.AI=function(a,b,d,e){var f=1<=a.qm(0)&&1<=b.qm(0),
h=new g.l,k=new g.l,m=new g.l;a.A(h);b.A(k);for(var n=!1,p=c.ns(h,k,d),q=c.ns(k,h,d),t=a.Ha(),v=b.Ha(),F=[0,0],W=[0,0],ba=new g.am(a,b,d,!1);ba.next();){var aa=ba.pl(),fa=ba.jl();t.Wb(aa);v.Wb(fa);fa=t.ia();aa=v.ia().Fa(fa,null,W,F,d);if(2==aa){aa=F[0];var ka=F[1];fa=fa.Rb();if(f&&(ka-aa)*fa>d&&(n=!0,p&&q))return!0}else if(0!=aa&&(aa=F[0],fa=W[0],0<aa&&1>aa&&0<fa&&1>fa))return!0}f=new g.l;t=new g.l;f.L(h);f.X(1E3*d,1E3*d);t.L(k);t.X(1E3*d,1E3*d);m.L(f);m.Fa(t);h="";h=n?h+"**":h+"T*";if(p){if(10<b.I()&&
(b=g.Vd.clip(b,m,d,0),b.B()))return!1;h+="****"}else h+="T***";if(q){if(10<a.I()&&(a=g.Vd.clip(a,m,d,0),a.B()))return!1;h+="***"}else h+="T**";return g.cm.st(a,b,d,h.toString(),e)};c.wI=function(a,b,d,e){var f=[!1],h=c.uI(a,b,d,f);if(f[0])return h;f=new g.l;b.A(f);f.X(1E3*d,1E3*d);return 10<a.I()&&(a=g.Vd.clip(a,f,d,0),a.B())?!1:g.cm.Uw(a,b,d,e)};c.uI=function(a,b,d,e){e[0]=!1;for(var f=a.Ha(),h=b.Ha(),k=[0,0],m=[0,0],n=new g.am(a,b,d,!1),p=!1;n.next();){var q=n.pl(),t=n.jl();f.Wb(q,-1);h.Wb(t,-1);
q=f.ia();q=h.ia().Fa(q,null,m,k,d);if(0!=q&&(p=!0,1==q&&(q=k[0],t=m[0],0<q&&1>q&&0<t&&1>t)))return e[0]=!0,!1}if(!p){e[0]=!0;k=new g.l;a.A(k);k.X(d,d);n=a;p=!1;m=new g.l;e=0;for(f=b.ea();e<f;e++)if(0<b.Ka(e)){b.Tj(e,m);if(k.isIntersecting(m)){if(h=b.Oa(b.Ca(e)),h=g.Fg.ym(n,h,0),0==h)return!1}else return!1;p||(!g.Fg.Ol(a,b.ea()-1)||null!=a.Cb&&null!=a.Cb.Gb?n=a:(h=new g.Ea,a.copyTo(h),h.hj(1),n=h),p=!0)}if(1==a.ea()||1607==b.K())return!0;k=new g.l;b.A(k);k.X(d,d);m=b;n=!1;d=new g.l;e=0;for(f=a.ea();e<
f;e++)if(0<a.Ka(e)){a.Tj(e,d);if(k.isIntersecting(d)&&(h=a.Oa(a.Ca(e)),h=g.Fg.ym(m,h,0),1==h))return!1;n||(!g.Fg.Ol(b,a.ea()-1)||null!=b.Cb&&null!=b.Cb.Gb?m=b:(h=new g.Ea,b.copyTo(h),h.hj(1),m=h),n=!0)}return!0}return!1};c.EI=function(a,b,d,e){for(var f=a.Ha(),h=b.Ha(),k=[0,0],m=[0,0],n=new g.am(a,b,d,!1),p=!1;n.next();){var q=n.pl(),t=n.jl();f.Wb(q);h.Wb(t);q=f.ia();q=h.ia().Fa(q,null,m,k,d);if(2==q)p=!0;else if(0!=q){p=k[0];q=m[0];if(0<p&&1>p&&0<q&&1>q)return!1;p=!0}}if(!p)return!1;h=new g.l;k=
new g.l;f=new g.l;a.A(h);b.A(k);h.X(1E3*d,1E3*d);k.X(1E3*d,1E3*d);f.L(h);f.Fa(k);return 10<a.I()&&(a=g.Vd.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Vd.clip(b,f,d,0),b.B())?!1:g.cm.bn(a,b,d,"F********",e)};c.yI=function(a,b,d,e){for(var f=a.Ha(),h=b.Ha(),k=[0,0],m=[0,0],n=new g.am(a,b,d,!1),p=!1;n.next();){var q=n.pl(),t=n.jl();f.Wb(q);h.Wb(t);q=f.ia();q=h.ia().Fa(q,null,m,k,d);if(2==q)p=!0;else if(0!=q){p=k[0];q=m[0];if(0<p&&1>p&&0<q&&1>q)return!0;p=!0}}if(!p)return!1;h=new g.l;k=new g.l;m=new g.l;n=new g.l;
f=new g.l;a.A(h);b.A(k);return c.ns(k,h,d)?(m.L(h),m.X(1E3*d,1E3*d),n.L(k),n.X(1E3*d,1E3*d),f.L(m),f.Fa(n),10<a.I()&&(a=g.Vd.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Vd.clip(b,f,d,0),b.B())?!1:d=g.cm.bn(a,b,d,"T********",e)):d=g.cm.bn(a,b,d,"T*****T**",e)};c.xI=function(a,b,d,e){var f=[!1],h=c.uI(a,b,d,f);if(f[0])return h;f=new g.l;b.A(f);f.X(1E3*d,1E3*d);return 10<a.I()&&(a=g.Vd.clip(a,f,d,0),a.B())?!1:g.cm.aB(a,b,d,e)};c.vI=function(a,b,d){return 1==g.jd.Zd(a,b,d)?!0:!1};c.CI=function(a,b,d){return 2==
g.jd.Zd(a,b,d)?!0:!1};c.lt=function(a,b,d){var e=new g.h;d*=d;for(var f=0;f<a.I();f++)if(a.D(f,e),g.h.zc(e,b)<=d)return!1;return!0};c.prototype.LE=function(a,b){a=this.th[a];b=this.th[b];return a.Om<b.Om||a.Om==b.Om&&(a.rw<b.rw||a.rw==b.rw&&(a.Mj<b.Mj||a.Mj==b.Mj&&(a.Ui<b.Ui||a.Ui==b.Ui&&a.wH<b.wH)))?-1:1};return c}();g.vd=l})(R||(R={}));(function(g){var z;(function(c){c[c.InteriorInterior=0]="InteriorInterior";c[c.InteriorBoundary=1]="InteriorBoundary";c[c.InteriorExterior=2]="InteriorExterior";
c[c.BoundaryInterior=3]="BoundaryInterior";c[c.BoundaryBoundary=4]="BoundaryBoundary";c[c.BoundaryExterior=5]="BoundaryExterior";c[c.ExteriorInterior=6]="ExteriorInterior";c[c.ExteriorBoundary=7]="ExteriorBoundary";c[c.ExteriorExterior=8]="ExteriorExterior"})(z||(z={}));var l;(function(c){c[c.AreaAreaPredicates=0]="AreaAreaPredicates";c[c.AreaLinePredicates=1]="AreaLinePredicates";c[c.LineLinePredicates=2]="LineLinePredicates";c[c.AreaPointPredicates=3]="AreaPointPredicates";c[c.LinePointPredicates=
4]="LinePointPredicates";c[c.PointPointPredicates=5]="PointPointPredicates"})(l||(l={}));z=function(){function c(){this.me=0;this.j=new g.ku;this.J=[0,0,0,0,0,0,0,0,0];this.$a=[0,0,0,0,0,0,0,0,0];this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Um=this.xw=-1}c.tB=function(a,b,d,e,f){if(9!=e.length)throw g.i.ga("relation string length has to be 9 characters");for(var h=0;9>h;h++){var k=e.charAt(h);if("*"!=k&&"T"!=k&&"F"!=k&&"0"!=k&&"1"!=k&&"2"!=k)throw g.i.ga("relation string");}h=this.HR(e,a.Eb(),b.Eb());
if(0!=h)return g.vd.uB(a,b,d,h,f);h=new g.l;a.A(h);k=new g.l;b.A(k);var m=new g.l;m.L(h);m.$b(k);d=g.ua.Xd(d,m,!1);a=this.RE(a,d);b=this.RE(b,d);if(a.B()||b.B())return this.pW(a,b,e);h=b.K();k=!1;switch(a.K()){case 1736:switch(h){case 1736:k=this.st(a,b,d,e,f);break;case 1607:k=this.bn(a,b,d,e,f);break;case 33:k=this.rt(a,b,d,e);break;case 550:k=this.qt(a,b,d,e,f)}break;case 1607:switch(h){case 1736:k=this.bn(b,a,d,this.aq(e),f);break;case 1607:k=this.bB(a,b,d,e,f);break;case 33:k=this.ut(a,b,d,e,
f);break;case 550:k=this.tt(a,b,d,e,f)}break;case 33:switch(h){case 1736:k=this.rt(b,a,d,this.aq(e));break;case 1607:k=this.ut(b,a,d,this.aq(e),f);break;case 33:k=this.VU(a,b,d,e);break;case 550:k=this.mt(b,a,d,this.aq(e))}break;case 550:switch(h){case 1736:k=this.qt(b,a,d,this.aq(e),f);break;case 1607:k=this.tt(b,a,d,this.aq(e),f);break;case 550:k=this.UA(a,b,d,e,f);break;case 33:k=this.mt(a,b,d,e)}break;default:k=!1}return k};c.st=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.sJ();var k=new g.l,
m=new g.l;a.A(k);b.A(m);e=!1;g.vd.fk(k,m,d)&&(h.Eu(a,b),e=!0);e||(k=g.vd.rc(a,b,!1),4==k?(h.Eu(a,b),e=!0):1==k?(h.hy(b),e=!0):2==k&&(h.UD(a),e=!0));e||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.Dp(a,b),h.j.Wg());return c.hg(h.J,h.Yc)};c.Uw=function(a,b,d,e){var f=new c;f.$i();f.dj("T*****F**");f.sJ();var h=new g.l,k=new g.l;a.A(h);b.A(k);var m=!1;g.vd.fk(h,k,d)&&(f.Eu(a,b),m=!0);m||(h=g.vd.rc(a,b,!1),4==h?(f.Eu(a,b),m=!0):1==h?(f.hy(b),m=!0):2==h&&(f.UD(a),m=!0));if(m)return h=this.hg(f.J,f.Yc);
m=new g.hd;a=m.Ib(a);h=m.Ib(b);g.Vk.W(m,d,e,!1);d=m.Ke(h).ng();m.Ip(0,!0,!0);g.tn.W(m,a,-1,!1,e);if(0==m.I(a))return!1;g.tn.W(m,h,-1,!1,e);f.gr(m,e);b=0==m.I(h);if(!b&&(f.Dp(a,h),f.j.Wg(),h=this.hg(f.J,f.Yc),!h))return h;a=m.Ke(a);m=new g.hd;a=m.Ib(a);h=m.Ib(d);f.gr(m,e);f.me=0;f.$i();f.dj(b?"T*****F**":"******F**");f.DB();f.Dp(a,h);f.j.Wg();return h=this.hg(f.J,f.Yc)};c.bn=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.DB();var k=new g.l,m=new g.l;a.A(k);b.A(m);e=!1;g.vd.fk(k,m,d)&&(h.Fu(a,b),
e=!0);e||(k=g.vd.rc(a,b,!1),4==k?(h.Fu(a,b),e=!0):1==k&&(h.VD(b),e=!0));e||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.mh=h.j.Fp(),c.Lw(b,h.j,h.mh),h.Dp(a,b),h.j.Gp(h.mh),h.j.Wg());return c.hg(h.J,h.Yc)};c.aB=function(a,b,d,e){var f=new c;f.$i();f.dj("T*****F**");f.DB();var h=new g.l,k=new g.l;a.A(h);b.A(k);var m=!1;g.vd.fk(h,k,d)&&(f.Fu(a,b),m=!0);m||(h=g.vd.rc(a,b,!1),4==h?(f.Fu(a,b),m=!0):1==h&&(f.VD(b),m=!0));if(m)return d=this.hg(f.J,f.Yc);m=new g.hd;a=m.Ib(a);b=m.Ib(b);f.Yo(m,d,e);if(0==m.I(a))return!1;
f.Dp(a,b);f.j.Wg();return d=this.hg(f.J,f.Yc)};c.qt=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.tJ();var k=new g.l,m=new g.l;a.A(k);b.A(m);e=!1;g.vd.fk(k,m,d)&&(h.Gu(a),e=!0);e||(k=g.vd.rc(a,b,!1),4==k?(h.Gu(a),e=!0):1==k&&(h.uN(),e=!0));e||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.By(a,b),h.j.Wg());return c.hg(h.J,h.Yc)};c.bB=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.$W();e=new g.l;var k=new g.l;a.A(e);b.A(k);var m=!1;g.vd.fk(e,k,d)&&(h.KG(a,b),m=!0);m||4!=g.vd.rc(a,b,!1)||(h.KG(a,
b),m=!0);m||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.$h=h.j.Fp(),h.mh=h.j.Fp(),c.Lw(a,h.j,h.$h),c.Lw(b,h.j,h.mh),h.Dp(a,b),h.j.Gp(h.$h),h.j.Gp(h.mh),h.j.Wg());return c.hg(h.J,h.Yc)};c.tt=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.HJ();e=new g.l;var k=new g.l;a.A(e);b.A(k);var m=!1;g.vd.fk(e,k,d)&&(h.Qz(a),m=!0);m||4!=g.vd.rc(a,b,!1)||(h.Qz(a),m=!0);m||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.$h=h.j.Fp(),c.Lw(a,h.j,h.$h),h.By(a,b),h.j.Gp(h.$h),h.j.Wg());return c.hg(h.J,h.Yc)};c.UA=
function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.MJ();e=new g.l;var k=new g.l;a.A(e);b.A(k);var m=!1;g.vd.fk(e,k,d)&&(h.tI(),m=!0);m||(e=new g.hd,a=e.Ib(a),b=e.Ib(b),h.Yo(e,d,f),h.By(a,b),h.j.Wg());return c.hg(h.J,h.Yc)};c.rt=function(a,b,d,e){var f=new c;f.$i();f.dj(e);f.tJ();var h=new g.l;a.A(h);b=b.D();var k=!1;g.vd.Tw(b,h,d)&&(f.Gu(a),k=!0);k||(d=g.jd.Zd(a,b,d),1==d?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):2==d?(f.J[6]=-1,0!=a.He()?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=
-1,f.J[5]=-1,d=new g.l,a.A(d),f.J[2]=0==d.da()&&0==d.S()?-1:1)):f.Gu(a));return this.hg(f.J,e)};c.ut=function(a,b,d,e,f){var h=new c;h.$i();h.dj(e);h.HJ();var k=new g.l;a.A(k);e=b.D();var m=!1;g.vd.Tw(e,k,d)&&(h.Qz(a),m=!0);if(!m){k=null;var n=m=!1;if(h.fa[0]||h.fa[6])g.vd.Tz(a,e,d)?(h.fa[0]&&(k=g.si.im(a,f),n=!g.vd.lt(k,e,d),m=!0,h.J[0]=n?-1:0),h.J[6]=-1):(h.J[0]=-1,h.J[6]=0);h.fa[3]&&(null!=k&&k.B()?h.J[3]=-1:(m||(null==k&&(k=g.si.im(a,f)),n=!g.vd.lt(k,e,d),m=!0),h.J[3]=n?0:-1));h.fa[5]&&(null!=
k&&k.B()?h.J[5]=-1:m&&!n?h.J[5]=0:(null==k&&(k=g.si.im(a,f)),f=g.vd.Pw(k,b,d),h.J[5]=f?-1:0));h.fa[2]&&(0!=a.Rb()?h.J[2]=1:(f=new g.ee(a.description),f.Gd(a,0,a.I()),a=g.vd.Pw(f,b,d),h.J[2]=a?-1:0))}return this.hg(h.J,h.Yc)};c.mt=function(a,b,d,e){var f=new c;f.$i();f.dj(e);f.MJ();var h=new g.l;a.A(h);b=b.D();var k=!1;g.vd.Tw(b,h,d)&&(f.tI(),k=!0);if(!k){h=!1;k=!0;d*=d;for(var m=0;m<a.I();m++){var n=a.Oa(m);g.h.zc(n,b)<=d?h=!0:k=!1;if(h&&!k)break}h?(f.J[0]=0,f.J[2]=k?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=
0,f.J[6]=0)}return c.hg(f.J,e)};c.VU=function(a,b,d,e){a=a.D();b=b.D();for(var f=[],h=0;9>h;h++)f[h]=-1;g.h.zc(a,b)<=d*d?f[0]=0:(f[2]=0,f[6]=0);f[8]=2;return c.hg(f,e)};c.hg=function(a,b){for(var d=0;9>d;d++)switch(b.charAt(d)){case "T":if(-1==a[d])return!1;break;case "F":if(-1!=a[d])return!1;break;case "0":if(0!=a[d])return!1;break;case "1":if(1!=a[d])return!1;break;case "2":if(2!=a[d])return!1}return!0};c.pW=function(a,b,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.B()&&b.B()){for(var f=0;9>f;f++)e[f]=
-1;return this.hg(e,d)}f=!1;a.B()&&(a=b,f=!0);e[0]=-1;e[1]=-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;b=a.K();g.ba.Ic(b)?1736==b?0!=a.He()?(e[2]=2,e[5]=1):(e[5]=-1,b=new g.l,a.A(b),e[2]=0==b.da()&&0==b.S()?0:1):(b=0!=a.Rb(),e[2]=b?1:0,e[5]=g.si.cq(a)?0:-1):(e[2]=0,e[5]=-1);f&&this.qK(e);return this.hg(e,d)};c.HR=function(a,b,d){return c.ZP(a)?3:c.PP(a)?4:c.ZX(a,b,d)?8:c.xP(a,b,d)?16:c.$O(a)?1:c.zU(a,b,d)?32:0};c.ZP=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&
"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.PP=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.ZX=function(a,b,d){if(0==b&&0==d)return!1;if(2!=b||2!=d)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||
1==b&&1==d&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=d&&"F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.xP=function(a,b,d){return b>d?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&
"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==b&&1==d&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.$O=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.zU=function(a,b,d){if(b==d){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&
"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};c.Lw=function(a,b,d){a=b.Ma(a);for(var e=b.Oe;-1!=e;e=b.Tf(e))if(0!=(b.yd(e)&a)){var f=b.Je(e);if(-1==f)b.pn(e,d,0);else{var h=f,k=0;do 0!=(b.fh(h)&a)&&k++,h=b.kc(b.ya(h));while(h!=f);b.pn(e,
d,k)}}};c.aq=function(a){var b=""+a.charAt(0);b+=a.charAt(3);b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+=a.charAt(8)};c.prototype.$i=function(){for(var a=0;9>a;a++)this.J[a]=-2,this.$a[a]=-2};c.qK=function(a){var b=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=d;a[7]=e};c.prototype.dj=function(a){this.Yc=a;for(a=0;9>a;a++)"*"!=this.Yc.charAt(a)?(this.fa[a]=!0,this.me++):this.fa[a]=!1};c.prototype.PJ=function(){for(var a=0;9>a;a++)this.fa[a]&&
-2==this.J[a]&&(this.J[a]=-1,this.fa[a]=!1)};c.prototype.qc=function(a){if(-2==this.J[a])return!1;if(-1==this.J[a])return this.fa[a]=!1,this.me--,!0;if("T"!=this.Yc.charAt(a)&&"F"!=this.Yc.charAt(a)){if(this.J[a]<this.$a[a])return!1;this.fa[a]=!1;this.me--;return!0}this.fa[a]=!1;this.me--;return!0};c.prototype.sJ=function(){this.xw=0;this.$a[0]=2;this.$a[1]=1;this.$a[2]=2;this.$a[3]=1;this.$a[4]=1;this.$a[5]=1;this.$a[6]=2;this.$a[7]=1;this.$a[8]=2;this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};
c.prototype.DB=function(){this.xw=1;this.Um=3;this.$a[0]=1;this.$a[1]=0;this.$a[2]=2;this.$a[3]=1;this.$a[4]=0;this.$a[5]=1;this.$a[6]=1;this.$a[7]=0;this.$a[8]=2;this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};c.prototype.$W=function(){this.xw=2;this.Um=4;this.$a[0]=1;this.$a[1]=0;this.$a[2]=1;this.$a[3]=0;this.$a[4]=0;this.$a[5]=0;this.$a[6]=1;this.$a[7]=0;this.$a[8]=2;this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};c.prototype.tJ=function(){this.Um=3;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=
2;this.$a[3]=0;this.$a[4]=-1;this.$a[5]=1;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--);this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--);this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--);this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};c.prototype.HJ=function(){this.Um=4;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=1;this.$a[3]=0;this.$a[4]=-1;this.$a[5]=0;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--);this.fa[4]&&
(this.J[4]=-1,this.fa[4]=!1,this.me--);this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--);this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};c.prototype.MJ=function(){this.Um=5;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=0;this.$a[3]=-1;this.$a[4]=-1;this.$a[5]=-1;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--);this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--);this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--);this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--);
this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--);this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)};c.prototype.sN=function(a,b,d){var e=!0;this.fa[0]&&(this.xS(a,b,d),e=e&&this.qc(0));this.fa[1]&&(this.nG(a,b,1),e=e&&this.qc(1));this.fa[2]&&(this.oG(a,b,d,2),e=e&&this.qc(2));this.fa[3]&&(this.nG(a,d,3),e=e&&this.qc(3));this.fa[4]&&(this.wN(a,b,d),e=e&&this.qc(4));this.fa[5]&&(this.$D(a,d,5),e=e&&this.qc(5));this.fa[6]&&(this.oG(a,d,b,6),e=e&&this.qc(6));this.fa[7]&&(this.$D(a,b,7),e=e&&this.qc(7));
return e};c.prototype.Eu=function(a,b){this.J[0]=-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;this.Hr(a,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5));this.Hr(b,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))};c.prototype.Hr=function(a,b,d,e,f){if(-1!=b||-1!=e)("T"!=d&&"F"!=d&&-1!=b||"T"!=f&&"F"!=f&&-1!=e?0!=a.He():1)?(-1!=b&&(this.J[b]=2),-1!=e&&(this.J[e]=1)):(-1!=e&&(this.J[e]=-1),-1!=b&&(d=new g.l,a.A(d),this.J[b]=0==d.da()&&0==d.S()?0:1))};c.prototype.hy=
function(a){this.J[2]=2;this.J[3]=-1;this.J[4]=-1;this.J[5]=1;this.J[6]=-1;this.J[7]=-1;this.Hr(a,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))};c.prototype.UD=function(a){this.hy(a);c.qK(this.J)};c.prototype.Fu=function(a,b){this.J[0]=-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;if(this.fa[6]){var d=this.Yc.charAt(6);d="T"!=d&&"F"!=d?0!=b.Rb():!0;this.J[6]=d?1:0}this.fa[7]&&(b=g.si.cq(b),this.J[7]=b?0:-1);this.Hr(a,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))};
c.prototype.VD=function(a){if(this.fa[0]){var b=this.Yc.charAt(0);b="T"!=b&&"F"!=b?0!=a.Rb():!0;this.J[0]=b?1:0}this.fa[1]&&(a=g.si.cq(a),this.J[1]=a?0:-1);this.J[2]=2;this.J[3]=-1;this.J[4]=-1;this.J[5]=1;this.J[6]=-1;this.J[7]=-1};c.prototype.Gu=function(a){this.J[0]=-1;this.J[3]=-1;this.J[6]=0;this.Hr(a,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))};c.prototype.uN=function(){this.J[0]=0;this.J[2]=2;this.J[3]=-1;this.J[5]=1;this.J[6]=-1};c.prototype.KG=function(a,b){this.J[0]=
-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;if(this.fa[2]){var d=this.Yc.charAt(2);d="T"!=d&&"F"!=d?0!=a.Rb():!0;this.J[2]=d?1:0}this.fa[5]&&(a=g.si.cq(a),this.J[5]=a?0:-1);this.fa[6]&&(d=this.Yc.charAt(6),d="T"!=d&&"F"!=d?0!=b.Rb():!0,this.J[6]=d?1:0);this.fa[7]&&(b=g.si.cq(b),this.J[7]=b?0:-1)};c.prototype.Qz=function(a){this.J[0]=-1;this.J[3]=-1;if(this.fa[2]){var b=this.Yc.charAt(2);b="T"!=b&&"F"!=b?0!=a.Rb():!0;this.J[2]=b?1:0}this.fa[5]&&(a=g.si.cq(a),this.J[5]=a?0:-1);this.J[6]=0};c.prototype.tI=
function(){this.J[0]=-1;this.J[2]=0;this.J[6]=0};c.prototype.tN=function(a,b,d){var e=!0;this.fa[0]&&(this.yS(a,b),e=e&&this.qc(0));this.fa[1]&&(this.uS(a,b,d,this.mh),e=e&&this.qc(1));this.fa[2]&&(this.vS(a,b),e=e&&this.qc(2));this.fa[3]&&(this.AN(a,b,d,this.mh),e=e&&this.qc(3));this.fa[4]&&(this.xN(a,b,d,this.mh),e=e&&this.qc(4));this.fa[5]&&(this.yN(a,b,d),e=e&&this.qc(5));this.fa[6]&&(this.gQ(a,b),e=e&&this.qc(6));this.fa[7]&&(this.fQ(a,b,d,this.mh),e=e&&this.qc(7));return e};c.prototype.hT=function(a,
b,d){var e=!0;this.fa[0]&&(this.BS(a,b,d,this.$h,this.mh),e=e&&this.qc(0));this.fa[1]&&(this.pG(a,b,d,this.$h,this.mh,1),e=e&&this.qc(1));this.fa[2]&&(this.qG(a,b,d,2),e=e&&this.qc(2));this.fa[3]&&(this.pG(a,d,b,this.mh,this.$h,3),e=e&&this.qc(3));this.fa[4]&&(this.CN(a,b,d,this.$h,this.mh),e=e&&this.qc(4));this.fa[5]&&(this.aE(a,d,this.$h,5),e=e&&this.qc(5));this.fa[6]&&(this.qG(a,d,b,6),e=e&&this.qc(6));this.fa[7]&&(this.aE(a,b,this.mh,7),e=e&&this.qc(7));return e};c.prototype.WD=function(a,b,d){var e=
!0;this.fa[0]&&(this.zS(a,b),e=e&&this.qc(0));this.fa[2]&&(this.wS(a,b),e=e&&this.qc(2));this.fa[3]&&(this.BN(a,b,d),e=e&&this.qc(3));this.fa[5]&&(this.zN(a,b),e=e&&this.qc(5));this.fa[6]&&(this.hQ(a,b),e=e&&this.qc(6));return e};c.prototype.LG=function(a,b,d){var e=!0;this.fa[0]&&(this.CS(a,b,d,this.$h),e=e&&this.qc(0));this.fa[2]&&(this.AS(a,d),e=e&&this.qc(2));this.fa[3]&&(this.EN(a,b,d,this.$h),e=e&&this.qc(3));this.fa[5]&&(this.DN(a,b,d,this.$h),e=e&&this.qc(5));this.fa[6]&&(this.iQ(a,b,d),e=
e&&this.qc(6));return e};c.prototype.UU=function(a,b,d){var e=!0;this.fa[0]&&(this.DS(a,b,d),e=e&&this.qc(0));this.fa[2]&&(this.rG(a,b,d,2),e=e&&this.qc(2));this.fa[6]&&(this.rG(a,d,b,6),e=e&&this.qc(6));return e};c.prototype.xS=function(a,b,d){2!=this.J[0]&&(a=this.j.af(a),0!=(a&b)&&0!=(a&d)&&(this.J[0]=2))};c.prototype.nG=function(a,b,d){if(1!=this.J[d]){var e=this.j.af(this.j.ya(a));0!=(this.j.af(a)&b)&&0!=(e&b)&&(this.J[d]=1)}};c.prototype.oG=function(a,b,d,e){2!=this.J[e]&&(a=this.j.af(a),0!=
(a&b)&&0==(a&d)&&(this.J[e]=2))};c.prototype.wN=function(a,b,d){if(1!=this.J[4]){var e=this.j.fh(a);0!=(e&b)&&0!=(e&d)?this.J[4]=1:0!=this.J[4]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)&&(a=this.j.yd(this.j.vf(a)),0!=(a&b)&&0!=(a&d)&&(this.J[4]=0))}};c.prototype.$D=function(a,b,d){if(1!=this.J[d]){var e=this.j.af(this.j.ya(a));0==(this.j.af(a)&b)&&0==(e&b)&&(this.J[d]=1)}};c.prototype.yS=function(a,b){if(1!=this.J[0]){var d=this.j.af(this.j.ya(a));0!=(this.j.af(a)&b)&&0!=(d&b)&&(this.J[0]=1)}};
c.prototype.uS=function(a,b,d,e){if(0!=this.J[1]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)){var f=this.j.vf(a),h=this.j.yd(f);0==(h&b)&&0!=(this.j.af(a)&b)&&(a=this.j.og(f,e),0!=(h&d)&&0!=a%2&&(this.J[1]=0))}};c.prototype.vS=function(a,b){2!=this.J[2]&&0!=(this.j.fh(a)&b)&&(this.J[2]=2)};c.prototype.AN=function(a,b,d,e){if(1!=this.J[3]){var f=this.j.fh(a);0!=(f&b)&&0!=(f&d)?this.J[3]=1:0!=this.J[3]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)&&(f=this.j.vf(a),a=this.j.yd(f),0!=(a&b)&&(b=this.j.og(f,
e),0!=(a&d)&&0==b%2&&(this.J[3]=0)))}};c.prototype.xN=function(a,b,d,e){if(0!=this.J[4]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)){var f=this.j.vf(a);a=this.j.yd(f);0!=(a&b)&&(b=this.j.og(f,e),0!=(a&d)&&0!=b%2&&(this.J[4]=0))}};c.prototype.yN=function(a,b,d){1!=this.J[5]&&(a=this.j.fh(a),0!=(a&b)&&0==(a&d)&&(this.J[5]=1))};c.prototype.gQ=function(a,b){if(1!=this.J[6]){var d=this.j.af(this.j.ya(a));0==(this.j.af(a)&b)&&0==(d&b)&&(this.J[6]=1)}};c.prototype.fQ=function(a,b,d,e){if(0!=this.J[7]&&
1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)){var f=this.j.vf(a),h=this.j.yd(f);0==(h&b)&&0==(this.j.af(a)&b)&&(a=this.j.og(f,e),0!=(h&d)&&0!=a%2&&(this.J[7]=0))}};c.prototype.BS=function(a,b,d,e,f){if(1!=this.J[0]){var h=this.j.fh(a);0!=(h&b)&&0!=(h&d)?this.J[0]=1:0!=this.J[0]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)&&(a=this.j.vf(a),h=this.j.yd(a),0!=(h&b)&&0!=(h&d)&&(b=this.j.og(a,e),f=this.j.og(a,f),0==b%2&&0==f%2&&(this.J[0]=0)))}};c.prototype.pG=function(a,b,d,e,f,h){if(0!=this.J[h]&&
1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)){a=this.j.vf(a);var k=this.j.yd(a);0!=(k&b)&&0!=(k&d)&&(b=this.j.og(a,e),f=this.j.og(a,f),0==b%2&&0!=f%2&&(this.J[h]=0))}};c.prototype.qG=function(a,b,d,e){1!=this.J[e]&&(a=this.j.fh(a),0!=(a&b)&&0==(a&d)&&(this.J[e]=1))};c.prototype.CN=function(a,b,d,e,f){if(0!=this.J[4]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)){a=this.j.vf(a);var h=this.j.yd(a);0!=(h&b)&&0!=(h&d)&&(b=this.j.og(a,e),f=this.j.og(a,f),0!=b%2&&0!=f%2&&(this.J[4]=0))}};c.prototype.aE=
function(a,b,d,e){0!=this.J[e]&&1!=this.j.Bb(this.j.ue(this.j.ya(a)),this.Wi)&&(a=this.j.vf(a),0==(this.j.yd(a)&b)&&0!=this.j.og(a,d)%2&&(this.J[e]=0))};c.prototype.zS=function(a,b){0!=this.J[0]&&0==(this.j.yd(a)&b)&&0!=(this.j.jk(this.j.Yy(a))&b)&&(this.J[0]=0)};c.prototype.wS=function(a,b){2!=this.J[2]&&0!=(this.j.yd(a)&b)&&(this.J[2]=2)};c.prototype.BN=function(a,b,d){0!=this.J[3]&&(a=this.j.yd(a),0!=(a&b)&&0!=(a&d)&&(this.J[3]=0))};c.prototype.zN=function(a,b){1!=this.J[5]&&0!=(this.j.yd(a)&b)&&
(this.J[5]=1)};c.prototype.hQ=function(a,b){0!=this.J[6]&&0==(this.j.yd(a)&b)&&0==(this.j.jk(this.j.Yy(a))&b)&&(this.J[6]=0)};c.prototype.CS=function(a,b,d,e){if(0!=this.J[0]){var f=this.j.yd(a);0!=(f&b)&&0!=(f&d)&&0==this.j.og(a,e)%2&&(this.J[0]=0)}};c.prototype.AS=function(a,b){1!=this.J[2]&&(-1!=this.j.Je(a)?this.J[2]=1:0!=this.J[2]&&0==(this.j.yd(a)&b)&&(this.J[2]=0))};c.prototype.EN=function(a,b,d,e){if(0!=this.J[3]){var f=this.j.yd(a);0!=(f&b)&&0!=(f&d)&&0!=this.j.og(a,e)%2&&(this.J[3]=0)}};
c.prototype.DN=function(a,b,d,e){if(0!=this.J[5]){var f=this.j.yd(a);0!=(f&b)&&0==(f&d)&&0!=this.j.og(a,e)%2&&(this.J[5]=0)}};c.prototype.iQ=function(a,b,d){0!=this.J[6]&&(a=this.j.yd(a),0==(a&b)&&0!=(a&d)&&(this.J[6]=0))};c.prototype.DS=function(a,b,d){0!=this.J[0]&&(a=this.j.yd(a),0!=(a&b)&&0!=(a&d)&&(this.J[0]=0))};c.prototype.rG=function(a,b,d,e){0!=this.J[e]&&(a=this.j.yd(a),0!=(a&b)&&0==(a&d)&&(this.J[e]=0))};c.prototype.Dp=function(a,b){var d=!1;a=this.j.Ma(a);b=this.j.Ma(b);this.Wi=this.j.bh();
for(var e=this.j.Oe;-1!=e;e=this.j.Tf(e)){var f=this.j.Je(e);if(-1==f){if(-1!=this.Um)switch(this.Um){case 3:d=this.WD(e,a,b);break;case 4:d=this.LG(e,a,b);break;default:throw g.i.ga("internal error");}}else{var h=f;do{var k=h;if(1!=this.j.Bb(k,this.Wi)){do{switch(this.xw){case 0:d=this.sN(k,a,b);break;case 1:d=this.tN(k,a,b);break;case 2:d=this.hT(k,a,b);break;default:throw g.i.ga("internal error");}if(d)break;this.j.Kb(k,this.Wi,1);k=this.j.kc(k)}while(k!=h&&!d)}if(d)break;h=this.j.kc(this.j.ya(k))}while(h!=
f);if(d)break}}d||this.PJ();this.j.Lg(this.Wi)};c.prototype.By=function(a,b){var d=!1;a=this.j.Ma(a);b=this.j.Ma(b);for(var e=this.j.Oe;-1!=e;e=this.j.Tf(e)){switch(this.Um){case 3:d=this.WD(e,a,b);break;case 4:d=this.LG(e,a,b);break;case 5:d=this.UU(e,a,b);break;default:throw g.i.Ra();}if(d)break}d||this.PJ()};c.prototype.gr=function(a,b){this.j.fr(a,b)};c.prototype.Yo=function(a,b,d){this.TP(a,b,d);this.gr(a,d)};c.prototype.TP=function(a,b,d){g.Vk.W(a,b,d,!1);a.Ip(0,!0,!0);for(b=a.md;-1!=b;b=a.ve(b))1736==
a.jc(b)&&g.tn.W(a,b,-1,!1,d)};c.RE=function(a,b){var d=a.K();if(g.ba.zd(d))return b=new g.Ua(a.description),b.pc(a,!0),b;if(197==d){d=new g.l;a.A(d);if(d.da()<=b&&d.S()<=b)return b=new g.Ta(a.description),a.tf(b),b;if(d.da()<=b||d.S()<=b)return b=new g.Ua(a.description),d=new g.Ta,a.If(0,d),b.nf(d),a.If(2,d),b.lineTo(d),b;b=new g.Ea(a.description);b.bd(a,!1);return b}return a};return c}();g.cm=z})(R||(R={}));(function(g){var z=function(){function a(b){this.Gm=new g.ja(0);this.fw=new g.ja(0);this.xt=
new g.h;this.yt=new g.h;this.g=b;this.Js=-1}a.prototype.cc=function(b){return this.g.cc(this.uz(b))};a.prototype.Dv=function(b){var d=this.dz(b);b=this.CF(b);if(this.g.Na(d)==b){var e=d;d=b;b=e}this.g.Hc(d,this.xt);this.g.Hc(b,this.yt);return this.xt.y<this.yt.y};a.prototype.uz=function(b){var d=this.dz(b);b=this.CF(b);return this.g.V(d)==b?d:b};a.prototype.dz=function(b){return this.Gm.get(b)};a.prototype.CF=function(b){return this.fw.get(b)};a.prototype.mF=function(b){this.Gm.set(b,this.Js);this.Js=
b};a.prototype.iI=function(b){if(-1!=this.Js){var d=this.Js;this.Js=this.Gm.get(d);this.Gm.set(d,b);this.fw.set(d,this.g.V(b));return d}null==this.Gm&&(this.Gm=new g.ja(0),this.fw=new g.ja(0));d=this.Gm.size;this.Gm.add(b);this.fw.add(this.g.V(b));return d};a.prototype.mz=function(b){return this.g.cd(this.dz(b))};return a}();g.uY=z;var l=function(){function a(b){this.Ce=b;this.je=new g.zb;this.Pm=new g.zb;this.xH=0;this.Co=null;this.tA=-1}a.prototype.compare=function(b,d,e){e=b.ka(e);var f=this.Ce.hb;
if(this.tA==d)var h=this.xH;else this.Co=f.cc(d),null==this.Co?(b=f.g,b.fd(f.uz(d),this.je),this.Co=this.je,h=this.je.Me(this.Ce.Ah,0)):h=this.Co.Me(this.Ce.Ah,0),this.xH=h,this.tA=d;b=f.cc(e);if(null==b){b=f.g;b.fd(f.uz(e),this.Pm);b=this.Pm;var k=this.Pm.Me(this.Ce.Ah,0)}else k=b.Me(this.Ce.Ah,0);h==k&&(d=f.Dv(d),e=f.Dv(e),e=Math.min(d?this.Co.ma:this.Co.oa,e?b.ma:b.oa),d=.5*(e+this.Ce.Ah),d==this.Ce.Ah&&(d=e),h=this.Co.Me(d,0),k=b.Me(d,0));return h<k?-1:h>k?1:0};a.prototype.reset=function(){this.tA=
-1};return a}(),c=function(){function a(){this.Ym=this.Il=null;this.fb=new g.$j;this.fb.MP();this.ae=new l(this);this.fb.Xo(this.ae)}a.prototype.CQ=function(){var b=!1;this.hw&&(b=this.DQ());if(1==this.g.ea(this.Y)){var d=this.g.Ob(this.Y);b=this.g.qz(d);this.g.KB(d,!0);return 0>b?(b=this.g.Ya(d),this.g.kJ(b),this.g.Yg(d,this.g.Na(b)),!0):!1}this.Gl=this.g.Fy();this.yo=this.g.Fy();for(d=this.g.Ob(this.Y);-1!=d;d=this.g.Sb(d))this.g.ir(d,this.Gl,0),this.g.ir(d,this.yo,-1);d=new g.ja(0);this.Ah=NaN;
var e=new g.h;this.ft=this.g.ea(this.Y);this.to=this.g.Hd();this.Ts=this.g.Hd();for(var f=this.Il.sc(this.Il.ke);-1!=f;f=this.Il.lb(f)){var h=this.Il.getData(f);this.g.Hc(h,e);e.y!=this.Ah&&0!=d.size&&(b=this.vt(d)||b,this.ae.reset(),d.clear(!1));d.add(h);this.Ah=e.y;if(0==this.ft)break}0<this.ft&&(b=this.vt(d)||b,d.clear(!1));this.g.Ud(this.to);this.g.Ud(this.Ts);for(d=this.g.Ob(this.Y);-1!=d;)if(3==this.g.uj(d,this.Gl)){this.g.KB(d,!0);e=d;for(d=this.g.uj(d,this.yo);-1!=d;)f=this.g.uj(d,this.yo),
this.g.UT(this.Y,this.g.Sb(e),d),e=d,d=f;d=this.g.Sb(e)}else this.g.KB(d,!1),d=this.g.Sb(d);this.g.xB(this.Gl);this.g.xB(this.yo);return b};a.prototype.vt=function(b){return this.VV(b)};a.prototype.VV=function(b){var d=!1;null==this.hb&&(this.hb=new z(this.g));null==this.Ym?(this.Ym=new g.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1);this.UV(b);for(var e=0,f=b.size;e<f;e++){var h=b.get(e);-1!=h&&this.jG(h,-1)}for(e=0;e<this.Ym.size&&0<this.ft;e++)if(b=this.Ym.get(e),h=this.hb.mz(this.fb.ka(b)),f=-1,0==
this.g.uj(h,this.Gl)){h=this.fb.xe(b);for(var k=b,m;-1!=h;){var n=this.fb.ka(h),p=this.hb.mz(n),q=this.g.uj(p,this.Gl);if(0!=q){f=p;break}k=h;h=this.fb.xe(h)}-1==h?(m=!0,h=k):(n=this.fb.ka(h),m=this.hb.Dv(n),h=this.fb.lb(h),m=!m);do{n=this.fb.ka(h);p=this.hb.mz(n);q=this.g.uj(p,this.Gl);if(0==q&&(m!=this.hb.Dv(n)&&(d=this.g.Ya(p),this.g.kJ(d),this.g.Yg(p,this.g.Na(d)),d=!0),this.g.ir(p,this.Gl,m?3:2),m||(k=this.g.uj(f,this.yo),this.g.ir(f,this.yo,p),this.g.ir(p,this.yo,k)),this.ft--,0==this.ft))return d;
f=p;k=h;h=this.fb.lb(h);m=!m}while(k!=b)}return d};a.prototype.UV=function(b){for(var d=0,e=b.size;d<e;d++){var f=b.get(d),h=this.g.Qa(f,this.to),k=this.g.Qa(f,this.Ts);if(-1!=h){var m=this.fb.ka(h);this.hb.mF(m);this.g.Sa(f,this.to,-1)}-1!=k&&(m=this.fb.ka(k),this.hb.mF(m),this.g.Sa(f,this.Ts,-1));m=-1;-1!=h&&-1!=k?(this.fb.wd(h,-1),this.fb.wd(k,-1),b.set(d,-1)):m=-1!=h?h:k;-1!=m&&(this.jG(f,m)||this.fb.wd(m,-1),b.set(d,-1))}};a.prototype.jG=function(b,d){var e=new g.h,f=new g.h;this.g.Hc(b,e);var h=
this.g.V(b);this.g.Hc(h,f);var k=!1;if(e.y<f.y){k=!0;var m=this.hb.iI(b);if(-1==d)var n=this.fb.addElement(m,-1);else n=d,this.fb.Uj(n,m);m=this.g.Qa(h,this.to);-1==m?this.g.Sa(h,this.to,n):this.g.Sa(h,this.Ts,n);h=this.g.cd(b);0==this.g.uj(h,this.Gl)&&this.Ym.add(n)}h=this.g.Na(b);this.g.Hc(h,f);e.y<f.y&&(k=!0,m=this.hb.iI(h),-1==d?n=this.fb.addElement(m,-1):(n=d,this.fb.Uj(n,m)),m=this.g.Qa(h,this.to),-1==m?this.g.Sa(h,this.to,n):this.g.Sa(h,this.Ts,n),h=this.g.cd(b),0==this.g.uj(h,this.Gl)&&this.Ym.add(n));
return k};a.W=function(b,d,e,f){var h=new a;h.g=b;h.Y=d;h.Il=e;h.hw=f;return h.CQ()};a.prototype.DQ=function(){var b=new g.ja(0),d=new g.ja(0),e=-1,f=-1,h=new g.h;h.Sc();for(var k=-1,m=-1,n=-1,p=new g.h,q=this.Il.sc(this.Il.ke);-1!=q;q=this.Il.lb(q)){var t=this.Il.getData(q);this.g.Hc(t,p);var v=this.g.cd(t);h.rb(p)&&m==v?(-1==f&&(e=this.g.Fy(),f=this.g.Hd()),-1==n&&(n=d.size,this.g.Sa(k,f,n),d.add(1),-1==this.g.uj(v,e)&&(this.g.ir(v,e,k),b.add(v))),this.g.Sa(t,f,n),d.XW(d.Gc()+1)):(n=-1,h.N(p));
k=t;m=v}if(0==b.size)return!1;h=new g.ja(0);k=new g.ja(0);m=0;for(n=b.size;m<n;m++){v=b.get(m);var F=this.g.uj(v,e);t=this.g.Qa(F,f);h.clear(!1);k.clear(!1);h.add(F);k.add(t);for(t=this.g.V(F);t!=F;t=this.g.V(t)){var W=t;p=this.g.Qa(W,f);if(-1!=p)if(0==k.size)k.add(p),h.add(W);else if(k.Gc()==p){q=h.Gc();var ba=this.g.V(q);F=this.g.V(W);this.g.Cc(q,F);this.g.Dc(F,q);this.g.Cc(W,ba);this.g.Dc(ba,W);W=[!1];ba=this.g.iG(this.Y,ba,this.g.Ya(v),W);this.g.Sa(t,f,-1);W[0]&&this.g.Kf(v,F);t=this.g.Ka(v);
F=this.g.Ka(ba);t-=F;this.g.Xj(v,t);d.set(p,d.get(p)-1);1==d.get(p)&&(d.set(p,0),k.Jf(),h.Jf());t=F=q}else h.add(t),k.add(p)}}this.g.xB(e);this.g.Ud(f);return!0};return a}();g.RL=c})(R||(R={}));(function(g){var z=function(){function l(){}l.prototype.jg=function(){this.KA=this.tb=null};l.prototype.get=function(){return this.KA};l.prototype.set=function(c){this.KA=c;if(null!=c)throw 322==c.K()&&(this.tb=c),g.i.Ra();};l.prototype.create=function(c){if(322==c)this.Qr();else throw g.i.ga("Not Implemented");
};l.prototype.Qr=function(){null==this.tb&&(this.tb=new g.zb);this.KA=this.tb};return l}();g.jg=z})(R||(R={}));(function(g){g=g.SL||(g.SL={});g[g.enumLineSeg=1]="enumLineSeg";g[g.enumBezierSeg=2]="enumBezierSeg";g[g.enumArcSeg=4]="enumArcSeg";g[g.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";g[g.enumSegmentMask=7]="enumSegmentMask";g[g.enumDensified=8]="enumDensified"})(R||(R={}));(function(g){var z=function(){return function(c){this.bj=c;this.lC=this.mC=1;this.nB=this.mB=this.oB=0}}(),l=
function(){function c(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Cf=new g.Ta;this.ra=this.Ew=0;this.oo=[];this.bt=[];this.Aw=[];this.Kq=[];this.HA=[]}c.prototype.rB=function(a){if(null!=a){for(var b=0,d=a.length;b<d;b++)this.mW(a[b]);a.length=0}};c.prototype.mW=function(a){a.bj=null;this.Kq.push(a)};c.prototype.Qw=function(a){if(0===this.Kq.length)var b=new z(a);else b=this.Kq[this.Kq.length-1],b.bj=a,--this.Kq.length;return b};c.prototype.NR=function(a,
b){return 0==a?this.bt[b]:this.Aw[b]};c.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new g.jg);var a=this.HA[this.Ew];this.Ew++;return a};c.prototype.clear=function(){this.rB(this.oo);this.rB(this.bt);this.rB(this.Aw);this.Ew=0};c.prototype.Qo=function(a){this.oo.push(this.Qw(a))};c.prototype.ql=function(a){return 0==a?this.bt.length:this.Aw.length};c.prototype.Xp=function(a,b){return this.NR(a,b).bj};c.prototype.Fa=function(a,b){if(2!=this.oo.length)throw g.i.Ra();this.ra=a;var d=
g.mc.ox(.01*a),e=!1,f=this.oo[0],h=this.oo[1];if(b||0!=(f.bj.Br(h.bj,a,!0)&5)){if(322==f.bj.K()){var k=f.bj;if(322==h.bj.K()){b=h.bj;var m=g.zb.Yx(k,b,null,this.Hq,this.Dk,a);if(0==m)throw g.zb.Yx(k,b,null,this.Hq,this.Dk,a),g.i.Ra();a=Array(9);g.P.bv(a,null);for(var n=0;n<m;n++){var p=this.Hq[n],q=this.Dk[n],t=f.nB,v=1;0==p?(t=f.oB,v=f.mC):1==p&&(t=f.mB,v=f.lC);var F=h.nB,W=1;0==q?(F=h.oB,W=h.mC):1==q&&(F=h.mB,W=h.lC);var ba=new g.h;t==F?(t=new g.h,k.ic(p,t),p=new g.h,b.ic(q,p),q=v+W,W/=q,g.mc.JG(t,
p,W,ba),g.h.zc(ba,t)+g.h.zc(ba,p)>d&&(e=!0)):t>F?(k.ic(p,ba),p=new g.h,b.ic(q,p),g.h.zc(ba,p)>d&&(e=!0)):(b.ic(q,ba),t=new g.h,k.ic(p,t),g.h.zc(ba,t)>d&&(e=!0));a[n]=ba}f=0;h=-1;for(n=0;n<=m;n++)W=n<m?this.Hq[n]:1,W!=f&&(d=this.WA(),k.dh(f,W,d),-1!=h&&d.get().Ec(a[h]),n!=m&&d.get().Rc(a[n]),f=W,this.bt.push(this.Qw(d.get()))),h=n;k=[0,0,0,0,0,0,0,0,0];for(n=0;n<m;n++)k[n]=n;1<m&&this.Dk[0]>this.Dk[1]&&(W=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=W,n=k[0],k[0]=k[1],k[1]=n);f=0;h=-1;for(n=0;n<=m;n++)W=
n<m?this.Dk[n]:1,W!=f&&(d=this.WA(),b.dh(f,W,d),-1!=h&&(f=k[h],d.get().Ec(a[f])),n!=m&&(f=k[n],d.get().Rc(a[f])),f=W,this.Aw.push(this.Qw(d.get()))),h=n;return e}}throw g.i.Ra();}return!1};c.prototype.Fz=function(a,b,d){b.copyTo(this.Cf);if(1!=this.oo.length)throw g.i.Ra();this.ra=a;var e=this.oo[0];if(d||e.bj.tu(b.D(),a,!0))if(322==e.bj.K()){a=e.bj;var f=a.ge(b.D(),!1);this.Hq[0]=f;var h=e.nB;d=1;0==f?(h=e.oB,d=e.mC):1==f&&(h=e.mB,d=e.lC);e=new g.h;0==h?(h=new g.h,a.ic(f,h),b=b.D(),g.mc.JG(h,b,1/
(d+1),e)):0<h?(e=new g.h,a.ic(f,e)):e=b.D();d=0;f=-1;for(h=0;1>=h;h++){b=1>h?this.Hq[h]:1;if(b!=d){var k=this.WA();a.dh(d,b,k);-1!=f&&k.get().Ec(e);1!=h&&k.get().Rc(e);d=b;this.bt.push(this.Qw(k.get()))}f=h}this.Cf.Db(e)}else throw g.i.Ra();};return c}();g.OC=l})(R||(R={}));(function(g){var z=function(){function l(c){this.Fs=this.tk=this.tb=null;this.cg=0;this.Bm=!1;this.Af=-1;this.El=this.Kd=0;this.gb=-1;this.ib=c;this.cg=this.Vx(this.El);this.Bm=!1;this.tk=null;this.Fs=new g.h}l.prototype.wW=function(c){if(this.ib!=
c.ib)throw g.i.Hb();this.Af=c.Af;this.Kd=c.Kd;this.gb=c.gb;this.El=c.El;this.cg=c.cg;this.Bm=c.Bm;this.tk=null};l.prototype.ia=function(){this.Af!=this.Kd&&this.wD();if(this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw g.i.de();this.Kd++}return this.tk};l.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(0==this.Kd)throw g.i.de();this.Kd--}this.Kd!=this.Af&&this.wD();return this.tk};l.prototype.xW=function(){this.Af=-1;this.Kd=0};l.prototype.yW=function(){this.Kd=
this.cg;this.Af=-1};l.prototype.Wb=function(c,a){void 0===a&&(a=-1);if(0<=this.gb&&this.gb<this.ib.ea()){var b=this.DM();if(c>=b&&c<this.ib.Wc(this.gb)){this.Af=-1;this.Kd=c-b;return}}a=0<=a&&a<this.ib.ea()&&c>=this.ib.Ca(a)&&c<this.ib.Wc(a)?a:this.ib.nz(c);this.El=a+1;this.gb=a;this.Af=-1;this.Kd=c-this.ib.Ca(a);this.cg=this.Vx(a);this.ib.Ca(this.gb);this.ib.ec(this.gb)};l.prototype.ab=function(){this.gb=this.El;if(this.gb>=this.ib.ea())return!1;this.Af=-1;this.Kd=0;this.cg=this.Vx(this.gb);this.ib.Ca(this.gb);
this.ib.ec(this.gb);this.El++;return!0};l.prototype.aj=function(){this.cg=this.Kd=this.Af=-1;this.El=0;this.gb=-1};l.prototype.Vx=function(c){if(this.ib.Bc())return 0;var a=1;this.ib.ec(c)&&(a=0);return this.ib.Ka(c)-a};l.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)};l.prototype.EB=function(){this.Bm=!0};l.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af};l.prototype.DM=function(){return this.ib.Ca(this.gb)};l.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):
this.xb()+1};l.prototype.xm=function(){return 0==this.Af};l.prototype.Sn=function(){return this.Af==this.cg-1};l.prototype.Ia=function(){return this.Kd<this.cg};l.prototype.zz=function(){return 0<this.Kd};l.prototype.Qf=function(){var c=new l(this.ib);c.Af=this.Af;c.Kd=this.Kd;c.cg=this.cg;c.gb=this.gb;c.El=this.El;c.ib=this.ib;c.Bm=this.Bm;return c};l.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw g.i.de();this.Af=this.Kd;var c=this.xb();this.ib.oc();var a=this.ib.Se,b=1;null!=a&&(b=
a.read(c)&7);a=this.ib.description;switch(b){case 1:null==this.tb&&(this.tb=new g.zb);this.tk=this.tb;break;case 2:throw g.i.ga("internal error");case 4:throw g.i.Ra();default:throw g.i.Ra();}this.tk.Pf(a);b=this.kk();this.ib.Hc(c,this.Fs);this.tk.Ec(this.Fs);this.ib.Hc(b,this.Fs);this.tk.Rc(this.Fs);for(var d=1,e=a.Ba;d<e;d++)for(var f=a.ld(d),h=g.sa.Wa(f),k=0;k<h;k++){var m=this.ib.Vc(f,c,k);this.tk.TB(f,k,m);m=this.ib.Vc(f,b,k);this.tk.JB(f,k,m)}};l.prototype.VS=function(){return this.gb==this.ib.ea()-
1};l.prototype.Rn=function(){var c=this.ib.QR();return null!=c?1!=(c.read(this.Af)&7):!1};return l}();g.TL=z})(R||(R={}));(function(g){var z=function(){function l(c){c instanceof g.ba?(this.sH=c,this.za=-1,this.Gi=1):(this.qT=c.slice(0),this.za=-1,this.Gi=c.length)}l.prototype.Ma=function(){return this.za};l.prototype.next=function(){return this.za<this.Gi-1?(this.za++,null!=this.sH?this.sH:this.qT[this.za]):null};l.prototype.re=function(){};return l}();g.$c=z})(R||(R={}));(function(g){var z=function(){return function(){this.next=
null}}(),l=function(){function c(){this.Vq=this.Mw=this.Nw=0;this.fF=!1;this.bK=0;this.jn=this.Lf=this.Yl=this.Lh=null;this.Ql=0;this.qy=null;this.rl=this.ri=-1}c.prototype.wX=function(a,b,d){this.ri=a;this.rl=b;this.Lh=this.Yl=null;this.Vq=0;this.qy=d;null==this.jn&&(this.jn=g.P.mg(384,0));this.iK()};c.prototype.S=function(){return this.ri};c.prototype.da=function(){return this.rl};c.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)};c.prototype.iK=function(){if(0<this.Vq){for(var a=
0;a<this.rl;a++){for(var b=this.Yl[a];null!=b;){var d=b;b=b.next;d.next=null}this.Yl[a]=null}this.Lh=null}this.Nw=this.rl;this.Mw=-1;this.Vq=0};c.prototype.dJ=function(a){this.fF=a==c.Bx;for(a=this.Nw;a<=this.Mw;a++)this.nN(),this.gN(a),this.UP();this.iK()};c.prototype.fy=function(a,b,d,e){if(b!=e){var f=1;b>e&&(f=a,a=d,d=f,f=b,b=e,e=f,f=-1);if(!(0>e||b>=this.rl)){0>a&&0>d?d=a=-1:a>=this.ri&&d>=this.ri&&(d=a=this.ri);var h=(d-a)/(e-b);e>this.rl&&(e=this.rl,d=h*(e-b)+a);0>b&&(a=h*(0-b)+a,b=0);var k=
Math.max(this.ri+1,8388607);-8388607>a?(b=(0-a)/h+b,a=0):a>k&&(b=(this.ri-a)/h+b,a=this.ri);-8388607>d?e=(0-a)/h+b:d>k&&(e=(this.ri-a)/h+b);b=g.P.truncate(b);e=g.P.truncate(e);b!=e&&(d=new z,d.x=g.P.truncate(4294967296*a),d.y=b,d.H=e,d.RP=g.P.truncate(4294967296*h),d.dir=f,null==this.Yl&&(this.Yl=g.P.mg(this.rl,null)),d.next=this.Yl[d.y],this.Yl[d.y]=d,d.y<this.Nw&&(this.Nw=d.y),d.H>this.Mw&&(this.Mw=d.H),this.Vq++)}}};c.prototype.nN=function(){if(null!=this.Lh){for(var a=!1,b=null,d=this.Lh;null!=
d;)if(d.y++,d.y==d.H){var e=d;d=d.next;null!=b?b.next=d:this.Lh=d;e.next=null}else d.x+=d.RP,null!=b&&b.x>d.x&&(a=!0),b=d,d=d.next;a&&(this.Lh=this.aK(this.Lh))}};c.prototype.gN=function(a){if(!(a>=this.rl)){var b=this.Yl[a];if(null!=b){this.Yl[a]=null;b=this.aK(b);this.Vq-=this.bK;a=this.Lh;for(var d=!0,e=b,f=null;null!=a&&null!=e;)a.x>e.x?(d&&(this.Lh=e),d=e.next,e.next=a,null!=f&&(f.next=e),f=e,e=d):(d=a.next,a.next=e,null!=f&&(f.next=a),f=a,a=d),d=!1;null==this.Lh&&(this.Lh=b)}}};c.$J=function(a,
b){return 0>a?0:a>b?b:a};c.prototype.UP=function(){if(null!=this.Lh)for(var a=0,b=this.Lh,d=g.P.truncate(g.P.SG(b.x)),e=b.next;null!=e;e=e.next)if(a=this.fF?a^1:a+e.dir,e.x>b.x){var f=g.P.truncate(g.P.SG(e.x));0!=a&&(b=c.$J(d,this.ri),d=c.$J(f,this.ri),d>b&&b<this.ri&&(this.jn[this.Ql++]=b,this.jn[this.Ql++]=d,this.jn[this.Ql++]=e.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)));b=e;d=f}};c.prototype.aK=function(a){for(var b=0,d=a;null!=d;d=d.next)b++;this.bK=b;if(1==b)return a;
null==this.Lf?this.Lf=g.P.mg(Math.max(b,16),null):this.Lf.length<b&&(this.Lf=g.P.mg(Math.max(b,2*this.Lf.length),null));var e=0;for(d=a;null!=d;d=d.next)this.Lf[e++]=d;2==b?this.Lf[0].x>this.Lf[1].x&&(a=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=a):c.vN(this.Lf,b,function(f,h){return f==h?0:f.x<h.x?-1:f.x>h.x?1:0});a=this.Lf[0];this.Lf[0]=null;d=a;for(e=1;e<b;e++)d.next=this.Lf[e],d=this.Lf[e],this.Lf[e]=null;d.next=null;return a};c.vN=function(a,b,d){if(b==a.length)a.sort(d);else{var e=a.slice(0,
0),f=a.slice(b);b=a.slice(0,b).sort(d);a.length=0;a.push.apply(a,e.concat(b).concat(f))}};c.Bx=0;return c}();g.Ox=l})(R||(R={}));(function(g){var z=function(){function l(){}l.prototype.wi=function(c,a){var b=this.g.Qa(c,this.Rq);this.Fl==b&&(this.Fl=this.pe.lb(this.Fl));this.jo==b&&(this.jo=this.pe.lb(this.jo));this.pe.kd(this.MA,b);this.dk(c);if(a&&(a=this.g.cd(c),-1!=a&&this.g.Ya(a)==c)){var d=this.g.V(c);if(d!=c){b=this.g.cd(d);if(b==a){this.g.Kf(a,d);return}d=this.g.Na(c);if(d!=c&&(b=this.g.cd(d),
b==a)){this.g.Kf(a,d);return}}this.g.Kf(a,-1);this.g.Yg(a,-1)}};l.prototype.kD=function(){for(var c=!1,a=0,b=new g.h;;){a++;null==this.Yh?(this.Yh=new g.ja(0),this.Bs=new g.ja(0),this.ye=new g.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var d=this.jo,e=0,f=!0;d!=this.Fl;){var h=this.pe.getData(d),k=new g.h;this.g.Hc(h,k);f&&(this.g.Hc(h,b),f=!1);k=this.g.Na(h);var m=this.g.V(h);-559038737!=this.g.Qa(k,this.Ag)&&(this.Yh.add(k),this.g.Sa(k,this.Ag,-559038737),this.Bs.add(h),
this.ye.add(e++));-559038737!=this.g.Qa(m,this.Ag)&&(this.Yh.add(m),this.g.Sa(m,this.Ag,-559038737),this.Bs.add(h),this.ye.add(e++));d=this.pe.lb(d)}if(2>this.Yh.size)break;var n=this;this.ye.Wd(0,this.ye.size,function(p,q){return n.kM(p,q)});d=0;for(e=this.ye.size;d<e;d++)f=this.ye.get(d),f=this.Yh.get(f),this.g.Sa(f,this.Ag,d),k=new g.h,this.g.Hc(f,k);k=this.OM(b);d=0;for(e=this.ye.size;d<e;d++)f=this.ye.get(d),-1!=f&&(f=this.Yh.get(f),this.g.Sa(f,this.Ag,-1));if(k)c=!0;else break}return c};l.prototype.OM=
function(c){for(var a=!1,b=!0;b;){b=!1;var d=0;-1==this.ye.get(d)&&(d=this.em(d));for(var e=this.em(d),f=0,h=this.ye.size;f<h&&-1!=d&&-1!=e&&d!=e;f++){var k=this.ye.get(d);e=this.ye.get(e);k=this.Yh.get(k);e=this.Yh.get(e);var m=this.g.V(k);this.g.Fv(m,c)||(m=this.g.Na(k));var n=this.g.V(e);this.g.Fv(n,c)||(n=this.g.Na(e));var p=this.ru(m,k),q=this.ru(n,e),t=p?this.g.Na(m):this.g.V(m),v=q?this.g.Na(n):this.g.V(n),F=!1;this.up(m)?F=!0:this.up(n)?F=!0:this.up(k)?F=!0:this.up(e)?F=!0:this.up(t)?F=!0:
this.up(v)&&(F=!0);!F&&this.g.hq(k,e)&&(F=!0,this.oD(p,q,m,k,n,e));!F&&this.g.hq(t,v)&&(F=!0,this.oD(!p,!q,m,t,n,v));F&&(a=!0);b=b||F;d=this.em(d);e=this.em(d)}}if(!a)for(d=0,-1==this.ye.get(d)&&(d=this.em(d)),e=this.em(d),f=0,h=this.ye.size;f<h&&-1!=d&&-1!=e&&d!=e;f++)k=this.ye.get(d),e=this.ye.get(e),k=this.Yh.get(k),e=this.Yh.get(e),m=this.g.V(k),this.g.Fv(m,c)||(m=this.g.Na(k)),n=this.g.V(e),this.g.Fv(n,c)||(n=this.g.Na(e)),p=this.ru(m,k),q=this.ru(n,e),t=p?this.g.Na(m):this.g.V(m),v=q?this.g.Na(n):
this.g.V(n),this.yM(p,q,k,m,t,e,n,v)&&(a=!0),d=this.em(d),e=this.em(d);return a};l.prototype.SM=function(){1736==this.g.jc(this.Y)&&1==this.g.Kn(this.Y)&&(new g.Hg).HU(this.hw,this.g,this.Y,this.od);var c=!1,a=!0;this.Ag=this.Rq=-1;var b=this.g.I(this.Y),d=new g.ja(0);d.Jb(b);for(var e=this.g.Ob(this.Y);-1!=e;e=this.g.Sb(e))for(var f=this.g.Ya(e),h=0,k=this.g.Ka(e);h<k;h++)d.add(f),f=this.g.V(f);var m=this.g.ud.o,n=this.g.ud.Mf;this.g.wb.oc();var p=this.g.wb.Aa[0].o;d.Wd(0,b,function(t,v){var F=m[n*
t],W=m[n*v],ba=p[2*F];F=p[2*F+1];var aa=p[2*W];W=p[2*W+1];ba=F<W?-1:F>W?1:ba<aa?-1:ba>aa?1:0;0==ba&&(t=m[n*t+3],v=m[n*v+3],ba=t<v?-1:t==v?0:1);return ba});this.Rq=this.g.Hd();this.pe=new g.lp;this.MA=this.pe.Rh(0);this.pe.hn(b);for(e=0;e<b;e++)f=d.get(e),h=this.pe.addElement(this.MA,f),this.g.Sa(f,this.Rq,h);this.Ag=this.g.Hd();this.Fl=-1;for(this.YC()&&(c=!0);a;){a=!1;b=0;d=!1;do{d=!1;this.jo=-1;k=0;e=new g.h;h=new g.h;for(var q=this.pe.sc(this.MA);-1!=q;)f=this.pe.getData(q),-1!=this.jo?(this.g.Hc(f,
h),e.rb(h))?k++:(e.N(h),this.Fl=q,0<k&&(f=this.kD())&&(d=!0,-1!=this.Fl&&(f=this.pe.getData(this.Fl),this.g.Hc(f,e))),this.jo=q=this.Fl,k=0):(this.jo=q,this.g.Hc(this.pe.getData(q),e),k=0),-1!=q&&(q=this.pe.lb(q));this.Fl=-1;0<k&&(f=this.kD())&&(d=!0);if(10<b++)throw g.i.Ra();d&&this.BM();this.YC()&&(d=!0);a=a||d&&!1;c=c||d}while(d)}this.g.Ud(this.Rq);this.g.Ud(this.Ag);return c=g.RL.W(this.g,this.Y,this.pe,this.hw)||c};l.prototype.ru=function(c,a){return this.g.V(a)==c?!1:!0};l.prototype.yM=function(c,
a,b,d,e,f,h,k){if(d==h)return this.dk(b),this.dk(f),!1;var m=this.g.Qa(b,this.Ag),n=this.g.Qa(e,this.Ag),p=this.g.Qa(f,this.Ag),q=this.g.Qa(k,this.Ag);b=[0,0,0,0,0,0,0,0];var t=[0,0,0,0];b[0]=0;t[0]=m;b[1]=0;t[1]=n;b[2]=1;t[2]=p;b[3]=1;t[3]=q;for(m=1;4>m;m++){n=t[m];p=b[m];for(q=m-1;0<=q&&t[q]>n;)t[q+1]=t[q],b[q+1]=b[q],q--;t[q+1]=n;b[q+1]=p}t=0;0!=b[0]&&(t|=1);0!=b[1]&&(t|=2);0!=b[2]&&(t|=4);0!=b[3]&&(t|=8);if(5!=t&&10!=t)return!1;c==a?c?(this.g.Cc(k,d),this.g.Dc(d,k),this.g.Cc(e,h),this.g.Dc(h,
e)):(this.g.Dc(k,d),this.g.Cc(d,k),this.g.Dc(e,h),this.g.Cc(h,e)):c?(this.g.Dc(d,f),this.g.Cc(f,d),this.g.Dc(h,e),this.g.Cc(e,h)):(this.g.Cc(d,f),this.g.Dc(f,d),this.g.Cc(h,e),this.g.Dc(e,h));return!0};l.prototype.oD=function(c,a,b,d,e,f){this.IY?this.QM():this.PM(c,a,b,d,e,f)};l.prototype.QM=function(){throw g.i.ga("not implemented.");};l.prototype.PM=function(c,a,b,d,e,f){if(c!=a)c?(this.g.Cc(b,e),this.g.Dc(e,b),this.g.Cc(f,d),this.g.Dc(d,f),this.xn(e,b),this.wi(e,!0),this.g.oi(e,!0),this.dk(b),
this.xn(f,d),this.wi(f,!0),this.g.oi(f,!1)):(this.g.Cc(e,b),this.g.Dc(b,e),this.g.Cc(d,f),this.g.Dc(f,d),this.xn(e,b),this.wi(e,!0),this.g.oi(e,!1),this.dk(b),this.xn(f,d),this.wi(f,!0),this.g.oi(f,!0)),this.dk(d);else{var h=c?b:d,k=a?e:f;c=c?d:b;a=a?f:e;e=!1;this.g.Cc(h,k);this.g.Cc(k,h);this.g.Dc(c,a);this.g.Dc(a,c);for(f=a;f!=k;)b=this.g.Na(f),d=this.g.V(f),this.g.Dc(f,d),this.g.Cc(f,b),e=e||f==h,f=d;e||(b=this.g.Na(k),d=this.g.V(k),this.g.Dc(k,d),this.g.Cc(k,b));this.xn(k,h);this.wi(k,!0);this.g.oi(k,
!1);this.dk(h);this.xn(a,c);this.wi(a,!0);this.g.oi(a,!1);this.dk(c)}};l.prototype.YC=function(){for(var c=!1,a=this.g.Ob(this.Y);-1!=a;){for(var b=this.g.Ya(a),d=0,e=this.g.Ka(a);d<e&&1<e;){var f=this.g.Na(b),h=this.g.V(b);this.g.hq(f,h)?(c=!0,this.wi(b,!1),this.g.qd(b,!0),this.wi(h,!1),this.g.qd(h,!0),b=f,d=0,e=this.g.Ka(a)):(b=h,d++)}if(2>this.g.Ka(a)){c=this.g.Ya(a);d=0;for(e=this.g.Ka(a);d<e;d++)this.wi(c,!1),c=this.g.V(c);a=this.g.ar(a);c=!0}else a=this.g.Sb(a)}return c};l.prototype.up=function(c){for(var a=
!1;;){var b=this.g.V(c),d=this.g.Na(c);if(b==c)return this.wi(c,!0),this.g.oi(c,!1),!0;if(!this.g.hq(b,d))break;a=!0;this.dk(d);this.dk(b);this.wi(c,!0);this.g.oi(c,!1);this.xn(b,d);this.wi(b,!0);this.g.oi(b,!0);if(b==d)break;c=d}return a};l.prototype.BM=function(){for(var c=0,a=this.pe.sc(this.pe.ke);-1!=a;a=this.pe.lb(a)){var b=this.pe.getData(a);this.g.cj(b,-1)}for(var d=0,e=this.g.Ob(this.Y);-1!=e;)if(a=this.g.Ya(e),-1==a||-1!=this.g.cd(a))b=e,e=this.g.Sb(e),this.g.br(b);else{this.g.cj(a,e);var f=
1;for(b=this.g.V(a);b!=a;b=this.g.V(b))this.g.cj(b,e),f++;this.g.fp(e,!1);this.g.Xj(e,f);this.g.Yg(e,this.g.Na(a));d+=f;c++;e=this.g.Sb(e)}for(a=this.pe.sc(this.pe.ke);-1!=a;a=this.pe.lb(a))b=this.pe.getData(a),-1==this.g.cd(b)&&(e=this.g.iG(this.Y,b,b,null),d+=this.g.Ka(e),c++);this.g.Tl(this.Y,c);this.g.Vj(this.Y,d);c=0;for(d=this.g.md;-1!=d;d=this.g.ve(d))c+=this.g.I(d);this.g.XB(c)};l.prototype.em=function(c){for(var a=0,b=this.ye.size-1;a<b;a++)if(c=(c+1)%this.ye.size,-1!=this.ye.get(c))return c;
return-1};l.prototype.xn=function(c,a){var b=this.g.Qa(a,this.Rq),d=this.g.Qa(a,this.Ag);this.g.gC(c,a);this.g.Sa(a,this.Rq,b);this.g.Sa(a,this.Ag,d)};l.prototype.dk=function(c){var a=this.g.Qa(c,this.Ag);-1!=a&&(this.ye.set(a,-1),this.g.Sa(c,this.Ag,-1))};l.W=function(c,a,b,d,e){var f=new l;f.g=c;f.Y=a;f.sA=b;f.hw=d;f.od=e;return f.SM()};l.prototype.kM=function(c,a){var b=this.Yh.get(c),d=new g.h;this.g.Hc(b,d);b=new g.h;var e=this.Yh.get(a);this.g.Hc(e,b);if(d.rb(b))return 0;e=this.Bs.get(c);c=
new g.h;this.g.Hc(e,c);e=this.Bs.get(a);a=new g.h;this.g.Hc(e,a);e=new g.h;e.vc(d,c);d=new g.h;d.vc(b,a);return g.h.pu(e,d)};return l}();g.tn=z})(R||(R={}));(function(g){(function(l){l[l.Local=0]="Local";l[l.Geographic=1]="Geographic";l[l.Projected=2]="Projected";l[l.Image=3]="Image";l[l.Unknown=4]="Unknown"})(g.VL||(g.VL={}));(function(l){l[l.Integer32=0]="Integer32";l[l.Integer64=1]="Integer64";l[l.FloatingPoint=2]="FloatingPoint"})(g.OL||(g.OL={}));var z=function(){function l(){this.hA=null;this.rp=
"";this.uu=null;this.fg=0;this.UH=this.Jo=-1;this.yh=null}l.prototype.Fc=function(){return this.fg};l.prototype.QF=function(){return 1};l.prototype.QW=function(c){this.hA=c};l.prototype.Yd=function(){if(null!==this.hA)return this.hA;var c=.001;0!=this.fg?c=g.yr.xQ(this.fg):null!=this.yh&&(c=g.SC.yQ(this.yh));return c};l.prototype.wz=function(){return this.yh};l.prototype.Id=function(){if(0!=this.fg)return g.Uc.ah(g.yr.Ny(this.fg));if(null!=this.yh)return g.SC.zQ(this.yh)};l.Tb=function(c){if(0!=c.fg){if(!0===
g.yr.US(c.fg))return 1;if(!0===g.yr.WS(c.fg))return 2}return 4};l.prototype.cs=function(){var c=this.Fc();if(-1!=this.Jo)return this.Jo;this.Jo=g.yr.AK(c);return-1!=this.Jo?this.Jo:c};l.create=function(c){if(0>=c)throw g.i.O("Invalid or unsupported wkid: "+c);var a=new l;a.fg=c;return a};l.lP=function(c){if(null==c||0==c.length)throw g.i.O("Cannot create SpatialReference from null or empty text.");var a=new l;a.yh=c;return a};l.prototype.Nb=function(c){return this==c?!0:null==c||this.constructor!=
c.constructor||this.fg!=c.fg||0==this.fg&&this.yh!==c.yh?!1:!0};l.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"};l.prototype.dc=function(){if(""!==this.rp)return this.rp;var c=this.toString();if(Array.prototype.reduce)return this.rp="S"+c.split("").reduce(function(d,e){d=(d<<5)-d+e.charCodeAt(0);return d&d},0);var a=0;if(0===c.length)return"";for(var b=0;b<c.length;b++)a=(a<<5)-a+c.charCodeAt(b),a&=a;return this.rp="S"+a};l.prototype.Mn=function(){return this.Yd(0)};
l.prototype.hh=function(){return null!==this.uu?this.uu:this.uu=g.iu.tP(this)};l.UN=2147483645;l.VN=9007199254740990;return l}();g.Gg=z})(R||(R={}));(function(g){var z=function(l){function c(){var a=null!==l&&l.apply(this,arguments)||this;a.Li=null;a.NT=null;a.Jq=new g.UL;a.Go=null;a.lw=null;return a}Na(c,l);c.tP=function(a){var b=new c;b.fg=a.fg;b.Jo=a.Jo;b.UH=a.UH;b.yh=a.yh;if(""!==b.yh&&null!==b.yh){a=c.fM(b.yh);var d=c.dM(b.yh);b.Jq.Wx(a,d,g.ju.Integer64);b.ay(a);b.cy(d);b.fg=a.cs()}else a=c.eM(b.fg),
b.ay(a),b.cy(null),b.Jq.Wx(a,null,g.ju.Integer64);return b};c.prototype.Yd=function(a){return this.Jq.Mn(a)};c.dM=function(a){if(0>=a.length)throw g.i.O();var b=null;try{b=g.IC.fromString(a)}catch(d){b=null}return null==b?null:c.XC(b,!0)};c.prototype.ay=function(a){this.Ld=a;this.Go=this.Ld.Id()};c.prototype.cy=function(a){this.FH=a;this.NT=null!=this.FH?this.FH.Go:null};c.prototype.Xc=function(){return 0==this.Tb()||3==this.Tb()?!1:this.Ld.Xc()};c.prototype.DG=function(){return 0==this.Tb()?!1:3==
this.Tb()?this.Li.hk().Xc():this.Ld.Xc()};c.prototype.gh=function(){return null!=this.Ld?this.Ld.Re:null};c.prototype.rm=function(){return this.Ld.rm()};c.prototype.bf=function(){return this.Ld.bf()};c.prototype.jh=function(){return null!=this.Ld?this.Ld.uw:NaN};c.prototype.Wp=function(){return this.Ld.Wp()};c.prototype.Yr=function(){return this.Ld.Yr()};c.prototype.mk=function(){return this.Ld.mk()};c.prototype.fS=function(a){return g.JC.Ky(this.Ld,a.Ld)};c.prototype.ol=function(){return this.Ld.ol()};
c.prototype.Xr=function(){return this.Ld.Xr()};c.prototype.Bi=function(){return 3==this.Tb()?this.Li.hk().Bi():this.Ld.Bi()};c.prototype.ih=function(){if(!this.Xc())throw g.i.O("!isPannable()");var a=new g.l;this.Ld.ih(a);return a};c.prototype.Le=function(){if(!this.Xc())throw g.i.O("!isPannable()");return this.Ld.uo};c.prototype.CR=function(){if(!this.Xc())throw g.i.O("!isPannable()");var a=new g.l;this.Ld.BR(a);return a};c.prototype.rv=function(){if(!this.Xc())throw g.i.O("!isPannable()");return this.Ld.rv()};
c.prototype.qv=function(){if(!this.Xc())throw g.i.O("!isPannable()");return this.Ld.qv()};c.prototype.Zr=function(){return null!=this.Li?this.Li.hk().Zr():this.Ld.Zr()};c.prototype.KQ=function(){return this.Ld.kv()};c.prototype.Sp=function(){return this.Go.getUnitFactor()};c.prototype.pz=function(a){return this.Jq.pz(a)};c.prototype.tc=function(){var a=this.Tb();if(1==a)return this;if(3==a)return this.Li.hk().tc();if(0==a)throw g.i.ga("invalid call");if(4===a)throw g.i.ga("invalid call");if(null!==
this.lw)return this.lw;a=this.gh().getGeogcs();if(null==a)throw g.i.Ra();return this.lw=c.XE(a,this.Jq.QF())};c.XE=function(a,b){if(null==a)throw g.i.O("null pointer.");var d=new c;a=c.ou(a,!0);d.Jq.Wx(a,null,b);d.ay(a);d.cy(null);d.fg=a.cs();return d};c.prototype.Tb=function(){var a=this.gh();if(null!=a)switch(a.getType()){case g.Tc.PE_TYPE_GEOGCS:return 1;case g.Tc.PE_TYPE_PROJCS:return 2}return 4};c.prototype.kv=function(){return this.Ld.kv()};c.ou=function(a,b){var d=a.getCode();if(0>=d&&(d=g.qf.getCode(a),
0<d)){a=g.qf.coordsys(d);if(null==a)throw g.i.O("Text to wkid mapping had failed: "+d);return c.ou(a,b)}if(b&&0<d&&(b=c.qx[d]))return b;b=g.Ab.zv(a,d,!1);var e=c.gK[b];if(e)return e;a=0>=d?a:g.qf.coordsys(d);a=new g.JC(a);c.gK[b]=a;0<d&&(c.qx[d]=a);return a};c.eM=function(a){if(0>=a)throw g.i.O("Invalid or unsupported wkid: "+a);var b=c.qx[a];if(null!=b)return b;b=g.qf.coordsys(a);if(null==b)throw g.i.O("Invalid or unsupported wkid: "+a);b=c.ou(b,!1);b.cs()!=a&&(c.qx[a]=b);return b};c.fM=function(a){if(null==
a||void 0===a||0==a.length)throw g.i.O("Cannot create SpatialReference from null or empty text.");var b=null;try{b=g.qf.fromString(g.Tc.PE_TYPE_COORDSYS,a)}catch(d){throw g.i.O("Cannot create SpatialReference from text. "+d.message);}if(null===b)throw g.i.O("Cannot create SpatialReference from text. ");return c.ou(b,!0)};c.XC=function(a,b){var d=a.getCode();if(0>=d&&(d=g.qf.getCode(a),0<d)){d=g.qf.vertcs(d);if(null===d)throw g.i.O();return c.XC(d,b)}if(b&&0<d&&(b=c.fK[d]))return b;a=g.Ab.zv(a,d,!1);
if(b=c.hK[a])return b;var e;0>=d||(e=g.qf.vertcs(d));if(null===e)throw g.i.O();e=new g.KL(e);c.hK[a]=e;0<d&&(c.fK[d]=e);return e};c.nI=function(a,b){if(null===b||b.B())return null;var d=new g.l;if(null!==b&&1!=a.Tb()){var e=a.tc(),f=e.gh();a=g.xr.Pr(a,e,null,null);b=g.Gx.local().W(b,a,null)}else f=a.gh();b.A(d);b=f.getPrimem().getLongitude();f=f.getUnit().getUnitFactor();return new g.GC(d.v,d.G,d.C,d.H,b,f)};c.gD=function(a){var b={name:"",steps:[],_pt:null,_entry:null},d=0;for(a=a.getEntries();d<
a.length;d++){var e=a[d],f={HY:!1,VY:"",UY:-1,geogtran:null};0===e.getDirection()?f.isInverse=!1:f.isInverse=!0;var h=e.getGeogtran().getCode();-1<h?f.wkid=h:f.wkt=e.getGeogtran().toString();b.steps.push(f)}return b};c.SR=function(a,b,d,e){void 0===d&&(d=null);d=c.nI(e,d);a=g.np.getGTlist(a.gh(),b.gh(),2,g.np.PE_GTLIST_OPTS_COMMON,d,1);b=null;a&&0<a.length&&(b=this.gD(a[0]),g.Lx.destroy(a));null!==d&&d.destroy();return b};c.TR=function(a,b,d,e){var f;void 0===d&&(d=null);void 0===e&&(e=null);void 0===
f&&(f=30);d=c.nI(e,d);a=g.np.getGTlist(a.gh(),b.gh(),2,g.np.PE_GTLIST_OPTS_COMMON,d,f);b=[];if(a&&0<a.length){for(f=0;f<a.length;f++)b.push(this.gD(a[f]));g.Lx.destroy(a)}null!==d&&d.destroy();return b};c.qx={};c.gK={};c.fK={};c.hK={};return c}(g.Gg);g.iu=z})(R||(R={}));(function(g){var z;(function(c){c[c.Integer32=0]="Integer32";c[c.Integer64=1]="Integer64";c[c.FloatingPoint=2]="FloatingPoint"})(z=g.ju||(g.ju={}));var l=function(){function c(){this.sp()}c.prototype.assign=function(a){this.Hm=a.Hm;
this.Im=a.Im;this.Rj=a.Rj;this.nA=a.nA;this.Ho=a.Ho;this.mA=a.mA;this.Kk=a.Kk;this.Oq=a.Oq;this.Nq=a.Nq;this.Tm=a.Tm};c.prototype.QF=function(){return this.Tm};c.prototype.sp=function(){this.Im=this.Hm=0;this.Rj=1;this.nA=0;this.Ho=1;this.mA=0;this.Nq=this.Oq=this.Kk=2.220446049250313E-14;this.Tm=z.FloatingPoint};c.prototype.Wx=function(a,b,d){this.sp();this.Tm=d;if(d!=z.FloatingPoint){var e=new g.l;a.cR(e);this.Hm=e.v;this.Im=e.G}else this.Im=this.Hm=-1.7976931348623157E308;e=a.Re.getType();e==g.Tc.PE_TYPE_GEOGCS?
(e=(d==z.Integer64?1E-9:1/18E5)*a.bf(),this.Rj=1/e):e==g.Tc.PE_TYPE_PROJCS&&(e=(d==z.Integer64?1E-4:.001)*a.rm(),this.Rj=1/e);null!=b?(e=(d==z.Integer32?.001:1E-4)*b.DH,this.Ho=1/e):this.Ho=1E4;this.TM();this.Kk=a.uw;this.Oq=null!=b?.001*b.DH:.001;this.Nq=2.220446049250313E-14};c.prototype.TM=function(){if(this.Tm!=z.FloatingPoint){var a=this.Tm==z.Integer64?g.Gg.VN:g.Gg.UN,b=a/this.Rj,d=this.Hm+b,e=g.P.truncate((d-this.Hm)*this.Rj);e>a&&(this.Rj=a/(d-this.Hm));b=this.Im+b;e=g.P.truncate((b-this.Im)*
this.Rj);e>a&&(this.Rj=a/(b-this.Im))}};c.prototype.WB=function(a){switch(a){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}};c.prototype.Mn=function(a){switch(a){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0};c.prototype.pz=function(a){if(this.Tm==z.FloatingPoint)return 0;switch(a){case 0:return 1/this.Rj;case 1:return 1/this.Ho;case 2:return 1/this.Ho;default:return 0}};c.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Kk.toString();
a=a+";m_falseX: "+this.Hm.toString();a=a+";m_falseY: "+this.Im.toString();a=a+";m_unitsXY: "+this.Rj.toString();a=a+";m_falseZ: "+this.nA.toString();a=a+";m_unitsZ: "+this.Ho.toString();a=a+";m_falseM: "+this.mA.toString();a=a+";m_toleranceZ: "+this.Oq.toString();a=a+";m_toleranceM: "+this.Nq.toString();a=a+";m_precision: "+this.Tm.toString();return a+"] "};return c}();g.UL=l})(R||(R={}));(function(g){function z(e,f){89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999);f*=.017453292519943;return[111319.49079327169*
e,3189068.5*Math.log((1+Math.sin(f))/(1-Math.sin(f)))]}function l(e,f,h){e=e/6378137*57.29577951308232;return h?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]}function c(e,f,h){var k=e.Qf();if(33===e.K())f=f(k.Ng(),k.kh()),k.Db(f[0],f[1]);else if(197===e.K()){var m=f(e.gs(),e.js(),h);f=f(e.fs(),e.hs(),h);k.L(m[0],m[1],f[0],f[1])}else for(m=new g.h,e=0;e<k.I();e++){k.D(e,
m);var n=f(m.x,m.y,h);m.na(n[0],n[1]);k.Db(e,m)}return k}function a(e){return c(e,l,!0)}function b(e){return c(e,z,!0)}var d=Math.PI/180;g.PK=function(){function e(){}e.xu=function(f){var h=Math.sqrt(.006694379990197414),k=Math.sin(f.y*d);return g.h.construct(6378137*f.x*d,3167719.6636462314*(k/(1-.006694379990197414*k*k)-1/(2*h)*Math.log((1-h*k)/(1+h*k))))};e.Ux=function(f,h,k,m){var n=1/298.257223563,p=Math.sin(k);k=Math.cos(k);var q=(1-n)*Math.tan(f);f=1/Math.sqrt(1+q*q);var t=q*f,v=Math.atan2(q,
k);q=f*p;var F=q*q,W=1-F,ba=2.7233160610754688E11*W/4.040829998466145E13,aa=1+ba/16384*(4096+ba*(-768+ba*(320-175*ba))),fa=ba/1024*(256+ba*(-128+ba*(74-47*ba)));ba=m/(6356752.31424518*aa);for(var ka=2*Math.PI,la,ma,sa,wa;1E-12<Math.abs(ba-ka);)sa=Math.cos(2*v+ba),la=Math.sin(ba),ma=Math.cos(ba),wa=fa*la*(sa+fa/4*(ma*(-1+2*sa*sa)-fa/6*sa*(-3+4*la*la)*(-3+4*sa*sa))),ka=ba,ba=m/(6356752.31424518*aa)+wa;m=t*la-f*ma*k;W=n/16*W*(4+n*(4-3*W));return g.h.construct((h+(Math.atan2(la*p,f*ma-t*la*k)-(1-W)*n*
q*(ba+W*la*(sa+W*ma*(-1+2*sa*sa)))))/d,Math.atan2(t*ma+f*la*k,(1-n)*Math.sqrt(F+m*m))/d)};e.HM=function(f,h,k,m){var n=1/298.257223563,p=m-h,q=Math.atan((1-n)*Math.tan(f)),t=Math.atan((1-n)*Math.tan(k)),v=Math.sin(q);q=Math.cos(q);var F=Math.sin(t);t=Math.cos(t);var W=p,ba=1E3;do{var aa=Math.sin(W),fa=Math.cos(W),ka=Math.sqrt(t*aa*t*aa+(q*F-v*t*fa)*(q*F-v*t*fa));if(0===ka)return 0;fa=v*F+q*t*fa;var la=Math.atan2(ka,fa),ma=q*t*aa/ka,sa=1-ma*ma;aa=fa-2*v*F/sa;isNaN(aa)&&(aa=0);var wa=n/16*sa*(4+n*(4-
3*sa)),Ga=W;W=p+(1-wa)*n*ma*(la+wa*ka*(aa+wa*fa*(-1+2*aa*aa)))}while(1E-12<Math.abs(W-Ga)&&0<--ba);if(0===ba)return v=m-h,{azimuth:Math.atan2(Math.sin(v)*Math.cos(k),Math.cos(f)*Math.sin(k)-Math.sin(f)*Math.cos(k)*Math.cos(v)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(f)*Math.sin(k)+Math.cos(f)*Math.cos(k)*Math.cos(m-h))};f=2.7233160610754688E11*sa/4.040829998466145E13;h=f/1024*(256+f*(-128+f*(74-47*f)));return{azimuth:Math.atan2(t*Math.sin(W),q*F-v*t*Math.cos(W)),TQ:6356752.31424518*
(1+f/16384*(4096+f*(-768+f*(320-175*f))))*(la-h*ka*(aa+h/4*(fa*(-1+2*aa*aa)-h/6*aa*(-3+4*ka*ka)*(-3+4*aa*aa)))),TY:Math.atan2(q*Math.sin(W),q*F*Math.cos(W)-v*t)}};e.eQ=function(f){var h=f.hasAttribute(1),k=f.hasAttribute(2),m=[],n=f.ea(),p=null,q=null;h&&(p=f.vb(1));k&&(q=f.vb(2));for(var t=new g.h,v=0;v<n;v++){for(var F=f.Ca(v),W=f.Ka(v),ba=0,aa=0,fa=NaN,ka=NaN,la=NaN,ma=NaN,sa=f.ec(v),wa=[],Ga=F;Ga<F+W;Ga++){f.D(Ga,t);ma=la=NaN;var Fa=[t.x,t.y];h&&(la=p.get(Ga),Fa.push(la));k&&(n=q.get(Ga),Fa.push(ma));
Ga==F&&sa&&(ba=t.x,aa=t.y,fa=la,ka=ma);wa.push(Fa)}!sa||ba==t.x&&aa==t.y&&(!h||isNaN(fa)&&isNaN(la)||fa==la)&&(!k||isNaN(ka)&&isNaN(ma)||ka==ma)||wa.push(wa[0].slice(0));m.push(wa)}return m};e.Ry=function(f,h){f=e.eQ(f);637.100877141506>h&&(h=637.100877141506);for(var k=[],m,n=0;n<f.length;n++){var p=f[n];k.push(m=[]);m.push([p[0][0],p[0][1]]);var q,t,v=p[0][0]*d,F=p[0][1]*d;for(q=0;q<p.length-1;q++){var W=p[q+1][0]*d,ba=p[q+1][1]*d;if(v!==W||F!==ba){ba=e.HM(F,v,ba,W);W=ba.azimuth;ba=ba.TQ;var aa=
ba/h;if(1<aa){for(t=1;t<=aa-1;t++){var fa=e.Ux(F,v,W,t*h);m.push([fa.x,fa.y])}t=e.Ux(F,v,W,(ba+Math.floor(aa-1)*h)/2);m.push([t.x,t.y])}F=e.Ux(F,v,W,ba);m.push([F.x,F.y]);v=F.x*d;F=F.y*d}}}return{lJ:k}};e.SQ=function(f){for(var h=[],k=0;k<f.length;k++){var m=f[k];m=e.Ry(m,1E4);h.push(m)}f=[];for(var n=0;n<h.length;n++){m=h[n];var p=0;for(k=0;k<m.lJ.length;k++){var q=m.lJ[k],t=e.xu(g.h.construct(q[0][0],q[0][1])),v=e.xu(g.h.construct(q[q.length-1][0],q[q.length-1][1])),F=v.x*t.y-t.x*v.y,W;for(W=0;W<
q.length-1;W++)t=e.xu(g.h.construct(q[W+1][0],q[W+1][1])),v=e.xu(g.h.construct(q[W][0],q[W][1])),F+=v.x*t.y-t.x*v.y;p+=F}p/=1;f.push(p/-2)}return f};return e}();g.cb=function(){function e(){}e.sB=function(f,h,k,m,n,p,q){e.bD[f.dc()]=h;0==isNaN(k)&&(e.hD[f.dc()]=k);0==isNaN(m)&&(e.uD[f.dc()]=m);0==isNaN(n)&&(e.WC[f.dc()]=n);e.iD[f.dc()]=p;null!==q&&(e.jD[f.dc()]=q)};e.Yw=function(f,h,k){e.nD[f.dc()+"-"+h.dc()]=k};e.tc=function(f){f=e.bD[f.dc()];if(void 0==f)throw g.i.Fe();return f};e.bf=function(f){f=
e.hD[f.dc()];if(void 0==f)throw g.i.Fe();return f};e.xv=function(f){f=e.uD[f.dc()];if(void 0==f)throw g.i.Fe();return f};e.gv=function(f){f=e.WC[f.dc()];if(void 0==f)throw g.i.Fe();return f};e.ih=function(f){f=e.jD[f.dc()];if(void 0==f)throw g.i.Fe();return g.l.construct(f[0],f[1],f[2],f[3])};e.Xc=function(f){f=e.iD[f.dc()];if(void 0==f)throw g.i.Fe();return f};e.Bh=function(f,h,k){if(h.Nb(k))return f;var m=e.nD[h.dc()+"-"+k.dc()];if(void 0!==m)return m(f,h,k);throw g.i.Fe();};e.wt=function(){throw g.i.Fe();
};e.XQ=function(){throw g.i.Fe();};e.ZV=function(){throw g.i.Fe();};e.ol=function(){throw g.i.Fe();};e.nW=function(){var f=g.Gg.create(102100),h=g.Gg.create(3857),k=g.Gg.create(4326);g.cb.sB(f,k,NaN,NaN,NaN,!1,null);g.cb.sB(k,k,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]);g.cb.sB(h,k,NaN,NaN,NaN,!1,null);g.cb.Yw(f,k,a);g.cb.Yw(k,f,b);g.cb.Yw(h,k,a);g.cb.Yw(k,h,b)};e.bD=[];e.hD=[];e.uD=[];e.WC=[];e.iD=[];e.jD=[];e.nD=[];return e}()})(R||(R={}));R.cb.nW();(function(g){var z=function(){function l(c){this.o=
new Int32Array(0);this.ko=-1;this.Jg=this.size=this.Dl=0;this.Mf=c}l.prototype.kd=function(c){c<this.Dl?(this.o[c*this.Mf]=this.ko,this.ko=c):this.Dl--;this.size--};l.prototype.U=function(c,a){return this.o[c*this.Mf+a]};l.prototype.T=function(c,a,b){this.o[c*this.Mf+a]=b};l.prototype.De=function(){var c=this.ko;if(-1==c){if(this.Dl==this.Jg){c=0!=this.Jg?g.P.truncate(3*(this.Jg+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Jg)throw g.i.de();this.yz(c)}c=this.Dl;this.Dl++}else this.ko=this.o[c*
this.Mf];this.size++;for(var a=c*this.Mf;a<c*this.Mf+this.Mf;a++)this.o[a]=-1;return c};l.prototype.Nl=function(c){var a=this.ko;if(-1==a){if(this.Dl==this.Jg){a=0!=this.Jg?g.P.truncate(3*(this.Jg+1)/2):1;2147483647<a&&(a=2147483647);if(a==this.Jg)throw g.i.de();this.yz(a)}a=this.Dl;this.Dl++}else this.ko=this.o[a*this.Mf];this.size++;for(var b=a*this.Mf,d=0;d<c.length;d++)this.o[b+d]=c[d];return a};l.prototype.oj=function(c){this.ko=-1;this.size=this.Dl=0;c&&(this.o=null,this.Jg=0)};l.prototype.Ee=
function(c){c>this.Jg&&this.yz(c)};l.prototype.sx=function(c,a){c*=this.Mf;a*=this.Mf;for(var b=0;b<this.Mf;b++){var d=this.o[a+b];this.o[a+b]=this.o[c+b];this.o[c+b]=d}};l.prototype.bC=function(c,a,b){var d=this.o[this.Mf*a+b];this.o[this.Mf*a+b]=this.o[this.Mf*c+b];this.o[this.Mf*c+b]=d};l.GG=function(c){return 0<=c};l.prototype.yz=function(c){null==this.o&&(this.o=new Int32Array(0));var a=new Int32Array(this.Mf*c);a.set(this.o,0);this.o=a;this.Jg=c};return l}();g.ad=z})(R||(R={}));(function(g){var z;
(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(z||(z={}));var l=function(){function a(b){this.Ce=b;this.Ah=NaN;this.$G=new g.jg;this.aH=new g.jg;this.os=new g.Oc;this.ps=new g.Oc}a.prototype.compare=function(b,d,e){b=b.ka(e);this.Ce.kB(d,this.$G);this.Ce.kB(b,this.aH);d=
this.$G.get();b=this.aH.get();this.os.L(d.ta,d.qa);this.ps.L(b.ta,b.qa);if(this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;e=d.oa==d.ma;var f=b.oa==b.ma;if(e||f){if(e&&f)return 0;if(d.oa==b.oa&&d.ta==b.ta)return e?1:-1;if(d.ma==b.ma&&d.qa==b.qa)return e?-1:1}e=d.Me(this.Ah,this.os.pa);f=b.Me(this.Ah,this.ps.pa);e==f&&(e=Math.min(d.ma,b.ma),f=.5*(e+this.Ah),f==this.Ah&&(f=e),e=d.Me(f,this.os.pa),f=b.Me(f,this.ps.pa));return e<f?-1:e>f?1:0};a.prototype.WJ=function(b){this.Ah=b};return a}(),
c=function(){function a(b){this.ib=b;this.RH=new g.jg;this.Cf=new g.h;this.rA=new g.Oc}a.prototype.fX=function(b){this.Cf.N(b)};a.prototype.compare=function(b,d){this.ib.kB(b.ka(d),this.RH);b=this.RH.get();this.rA.L(b.ta,b.qa);if(this.Cf.x<this.rA.pa)return-1;if(this.Cf.x>this.rA.wa)return 1;b=b.Me(this.Cf.y,this.Cf.x);return this.Cf.x<b?-1:this.Cf.x>b?1:0};return a}();z=function(){function a(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null;this.Io=this.yg=-1;this.bH=
!0;this.kA=!1;this.gA=NaN;this.Pi=new g.Nd;this.XN=2147483647;this.WN=g.P.truncate(-2147483648);this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1;this.xa=0}a.prototype.ty=function(b){this.gA=b};a.prototype.$m=function(){null==this.he&&(this.he=new g.ad(8));var b=this.he.De();this.he.T(b,1,0);return b};a.prototype.qU=function(){null==this.Lc&&(this.Lc=new g.ad(8));var b=this.Lc.De();this.Lc.T(b,2,0);this.Lc.T(b,3,0);var d=this.Lc.De();this.Lc.T(d,2,0);this.Lc.T(d,3,0);this.EJ(b,d);
this.EJ(d,b);return b};a.prototype.hI=function(){null==this.ze&&(this.ze=new g.ad(8));var b=this.ze.De();this.ze.T(b,2,0);return b};a.prototype.OW=function(b,d){this.he.T(b,7,d)};a.prototype.on=function(b,d){this.he.T(b,2,d)};a.prototype.NW=function(b,d){this.he.T(b,1,d)};a.prototype.gX=function(b,d){this.he.T(b,3,d)};a.prototype.dX=function(b,d){this.he.T(b,4,d)};a.prototype.er=function(b,d){this.he.T(b,5,d)};a.prototype.$Q=function(b){return this.he.U(b,5)};a.prototype.MW=function(b,d){this.he.T(b,
6,d)};a.prototype.YM=function(b,d){this.MW(d,b)};a.prototype.DJ=function(b,d){this.Lc.T(b,1,d)};a.prototype.EJ=function(b,d){this.Lc.T(b,4,d)};a.prototype.Vl=function(b,d){this.Lc.T(b,5,d)};a.prototype.Ul=function(b,d){this.Lc.T(b,6,d)};a.prototype.VW=function(b,d){this.Lc.T(b,2,d)};a.prototype.cx=function(b,d){this.Lc.T(b,3,d)};a.prototype.GF=function(b){return this.Lc.U(b,3)};a.prototype.Ht=function(b,d){this.Lc.T(b,7,d)};a.prototype.zK=function(b,d){if(-1!=this.om(b))for(d=d?-1:b,b=this.om(b);-1!=
b;b=this.ls(b))this.g.Sa(this.vj(b),this.Eq,d)};a.prototype.xx=function(b,d){-1!=b&&(this.zK(b,d),this.zK(this.ya(b),d))};a.prototype.Et=function(b,d){this.ze.T(b,1,d)};a.prototype.Xg=function(b,d){this.ze.T(b,2,d)};a.prototype.ln=function(b,d){this.ze.T(b,3,d);this.IW(b,this.ZQ(d));this.HW(d,b)};a.prototype.HW=function(b,d){this.ze.T(b,4,d)};a.prototype.IW=function(b,d){this.ze.T(b,5,d)};a.prototype.yJ=function(b,d){this.ze.T(b,6,d)};a.prototype.wJ=function(b,d){this.ze.T(b,7,d)};a.prototype.vJ=
function(b,d){this.$n.write(b,d)};a.prototype.xJ=function(b,d){this.fA.write(b,d)};a.prototype.gY=function(b){var d=0,e=0,f=this.vF(b),h=new g.h,k=new g.h,m=new g.h;this.$r(f,h);k.N(h);var n=f;do this.nm(n,m),e+=g.h.ub(k,m),this.$e(this.ya(n))!=b&&(d+=(m.x-h.x-(k.x-h.x))*(m.y-h.y+(k.y-h.y))*.5),k.N(m),n=this.kc(n);while(n!=f);this.$n.write(b,d);this.fA.write(b,e)};a.prototype.KU=function(b,d){var e=new l(this),f=new g.$j;f.Ee(g.P.truncate(this.xa/2));f.Xo(e);for(var h=new g.ja(0),k=this.bh(),m=null,
n=0,p=new g.h,q=this.Oe;-1!=q;q=this.Tf(q)){n++;if(0==(n&255)&&null!=d&&!d.progress(-1,-1))throw g.i.RC();var t=this.Je(q);if(-1!=t){h.Dh(0);if(!this.cY(f,k,h,t)){this.D(q,p);e.WJ(p.y);var v=t;do{var F=this.Bb(v,k);-1!=F&&(f.wd(F,-1),this.Kb(v,k,-2));v=this.kc(this.ya(v))}while(t!=v);v=t;do F=this.Bb(v,k),-1==F&&(F=f.addElement(v,-1),h.add(F)),v=this.kc(this.ya(v));while(t!=v)}for(t=h.size-1;0<=t;t--)F=h.get(t),v=f.ka(F),this.Kb(this.ya(v),k,F),this.JU(f,F,b)}else-1==this.Yy(q)&&(null==m&&(m=new c(this)),
this.D(q,p),m.fX(p),v=f.DW(m),t=this.Jl,-1!=v&&(F=f.ka(v),this.$e(F)==this.$e(this.ya(F))&&(F=this.JF(f,v)),-1!=F&&(t=this.$e(F))),this.YM(t,q))}this.Lg(k)};a.prototype.JU=function(b,d,e){var f=b.ka(d),h=this.$e(f);if(-1==this.In(h)){var k=this.JF(b,d),m=this.ya(f),n=this.$e(m);this.Mp(h);this.Mp(n);var p=this.In(h),q=this.In(n);-1==k&&-1==p&&(n==h?(this.ln(n,this.Jl),p=q=this.Jl):(-1==q&&(this.ln(n,this.Jl),q=this.Jl),this.ln(h,n),p=n));if(-1!=k){var t=this.$e(k);-1==q&&(0>=this.Mp(t)?(q=this.In(t),
this.ln(n,q)):(this.ln(n,t),q=t),n==h&&(p=q))}-1==p&&this.dY(h,n);0==e?this.eW(b,d,f,k,h,n):5==e?this.fW(b,d,f,m,h,n):4==e&&this.dW(f,k,h,n)}};a.prototype.eW=function(b,d,e,f,h,k){var m=this.jk(h);if(-1!=f){var n=this.jk(k),p=this.jk(this.$e(f));f=m&n&p;p^=p&this.fh(e);p|=f;0!=p&&(this.Xg(k,n|p),this.Xg(h,p|m),m=m||p)}for(d=b.lb(d);-1!=d;d=b.lb(d)){f=b.ka(d);e=this.$e(this.ya(f));h=this.jk(e);k=this.fh(f);n=this.$e(f);p=this.jk(n);f=h&p&m;m^=m&k;m|=f;if(0==m)break;this.Xg(e,h|m);this.Xg(n,p|m)}};
a.prototype.fW=function(b,d,e,f,h,k){if(h!=k){e=this.Bb(e,this.eg);e+=this.Bb(f,this.eg);f=0;var m=new g.ja(0),n=new g.ja(0);n.add(0);for(var p=b.sc(-1);p!=d;p=b.lb(p)){var q=b.ka(p),t=this.ya(q),v=this.$e(q),F=this.$e(t);if(v!=F){q=this.Bb(q,this.eg);q+=this.Bb(t,this.eg);f+=q;t=!1;0!=m.size&&m.Gc()==F&&(n.Jf(),m.Jf(),t=!0);if(-1==this.In(F))throw g.i.Ra();t&&this.In(F)==v||(n.add(f),m.add(v))}}f+=e;0!=m.size&&m.Gc()==k&&(n.Jf(),m.Jf());0!=f?0==n.Gc()&&(b=this.g.md,b=this.Ma(b),this.Xg(h,b)):0!=
n.Gc()&&(b=this.g.md,b=this.Ma(b),this.Xg(h,b))}};a.prototype.dW=function(b,d,e,f){var h=this.Ma(this.g.md);if(-1==d)this.Xg(f,this.Io),b=this.Bb(b,this.yg),0!=(b&1)?this.Xg(e,h):this.Xg(e,this.Io);else{var k=this.jk(f);0==k?(k=this.jk(this.$e(d)),this.Xg(f,k),b=this.Bb(b,this.yg),0!=(b&1)?this.Xg(e,k==h?this.Io:h):this.Xg(e,k)):(b=this.Bb(b,this.yg),0!=(b&1)?this.Xg(e,k==h?this.Io:h):this.Xg(e,k))}};a.prototype.cY=function(b,d,e,f){var h=f,k=-1,m=-1,n=0;do{if(2==n)return!1;var p=this.Bb(h,d);if(-1!=
p){if(-1!=k)return!1;k=p}else{if(-1!=m)return!1;m=h}n++;h=this.kc(this.ya(h))}while(f!=h);if(-1==m||-1==k)return!1;this.Kb(b.ka(k),d,-2);b.Uj(k,m);e.add(k);return!0};a.prototype.dY=function(b,d){var e=this.Mp(b);if(0!=e){var f=this.Mp(d);0<e&&0>f?this.ln(b,d):0>e&&0<f?this.ln(b,d):(d=this.In(d),-1!=d&&this.ln(b,d))}};a.prototype.qP=function(b,d){this.Eq=this.g.Hd();for(var e=0,f=d.size;e<f;e++){var h=d.get(e),k=this.g.Qa(h,this.Em),m=this.g.Sf(this.g.cd(h)),n=this.g.jc(m);if(g.ba.Ic(n)){var p=this.g.V(h);
if(-1!=p){var q=this.g.Qa(p,this.Em);if(k!=q){var t=this.qU(),v=this.ya(t),F=this.lh.De();this.lh.T(F,0,h);this.lh.T(F,1,-1);this.Ht(t,F);this.DJ(t,k);F=this.Je(k);-1==F?(this.on(k,t),this.Vl(t,v),this.Ul(v,t)):(k=this.ue(F),this.Vl(F,v),this.Ul(v,F),this.Ul(k,t),this.Vl(t,k));this.DJ(v,q);k=this.Je(q);-1==k?(this.on(q,v),this.Ul(t,v),this.Vl(v,t)):(q=this.ue(k),this.Vl(k,t),this.Ul(t,k),this.Ul(q,v),this.Vl(v,q));m=this.Ma(m);0==b?(this.Kb(v,this.be,0),this.Kb(t,this.be,1736==n?m:0)):5==b?(q=new g.h,
this.g.D(h,q),h=new g.h,this.g.D(p,h),k=p=0,0>q.compare(h)?p=1:k=-1,this.Kb(v,this.be,0),this.Kb(t,this.be,0),this.Kb(t,this.eg,p),this.Kb(v,this.eg,k)):7==b?(this.Kb(v,this.be,this.Io),this.Kb(t,this.be,1736==n?m:0)):4==b&&(this.Kb(v,this.be,0),this.Kb(t,this.be,0),this.Kb(t,this.yg,1),this.Kb(v,this.yg,1));n=1736==n?this.WN:0;this.cx(t,m|n);this.cx(v,m|n)}}}}};a.prototype.QT=function(b,d){var e=this.om(d);if(-1!=e){var f=this.om(b);this.lh.T(e,1,f);this.Ht(b,e);this.Ht(d,-1)}b=this.ya(b);d=this.ya(d);
e=this.om(d);-1!=e&&(f=this.om(b),this.lh.T(e,1,f),this.Ht(b,e),this.Ht(d,-1))};a.prototype.EX=function(b){function d(ka,la){return f.CO(ka,la)}var e=new g.ja(0);e.Jb(10);for(var f=this,h=this.Oe;-1!=h;h=this.Tf(h)){e.clear(!1);var k=this.Je(h);if(-1!=k){var m=k;do e.add(m),m=this.kc(this.ya(m));while(m!=k);if(1<e.size){m=!0;if(2<e.size)e.Wd(0,e.size,d),e.add(e.get(0));else if(0<this.BO(e.get(0),e.get(1))){var n=e.get(0);e.set(0,e.get(1));e.set(1,n)}else m=!1;for(var p=n=e.get(0),q=this.vf(p),t=this.ya(p),
v=-1,F=1,W=e.size;F<W;F++){var ba=e.get(F),aa=this.ya(ba),fa=this.lk(aa);if(fa==q&&ba!=p){if(0==b)v=this.GF(p)|this.GF(ba),this.cx(p,v),this.cx(t,v),this.Kb(p,this.be,this.Bb(p,this.be)|this.Bb(ba,this.be)),this.Kb(t,this.be,this.Bb(t,this.be)|this.Bb(aa,this.be));else if(-1!=this.eg)v=this.Bb(p,this.eg)+this.Bb(ba,this.eg),aa=this.Bb(t,this.eg)+this.Bb(aa,this.eg),this.Kb(p,this.eg,v),this.Kb(t,this.eg,aa);else{if(7==b){this.Pi=new g.Nd(5,h,-1);return}-1!=this.yg&&(v=this.Bb(p,this.yg)+this.Bb(ba,
this.yg),aa=this.Bb(t,this.yg)+this.Bb(aa,this.yg),this.Kb(p,this.yg,v),this.Kb(t,this.yg,aa))}this.QT(p,ba);this.Gy(ba);v=p;e.set(F,-1);ba==n&&(e.set(0,-1),n=-1)}else this.xx(v,!1),v=-1,p=ba,q=fa,t=aa}this.xx(v,!1);v=-1;if(m){n=-1;F=0;for(W=e.size;F<W;F++)if(ba=e.get(F),-1!=ba)if(-1==n)p=n=ba,q=this.vf(p),t=this.ya(p);else if(ba!=p&&(aa=this.ya(ba),fa=this.lk(aa),this.Ul(t,ba),this.Vl(ba,t),p=ba,q=fa,t=aa,7==b&&(this.Bb(ba,this.be)|this.Bb(this.ue(ba),this.be))==(this.Io|1))){this.Pi=new g.Nd(5,
h,-1);return}this.on(h,n)}else{n=-1;F=0;for(W=e.size;F<W;F++)if(ba=e.get(F),-1!=ba){n=ba;break}k!=n&&this.on(h,n)}}}}};a.prototype.RN=function(){for(var b=-1,d=this.bh(),e=this.Oe;-1!=e;e=this.Tf(e)){var f=this.Je(e);if(-1!=f){var h=f;do{if(1!=this.Bb(h,d)){var k=this.hI();this.Et(k,h);this.wJ(k,b);-1!=b&&this.yJ(b,k);b=k;var m=0,n=h;do m|=this.Bb(n,this.be),this.VW(n,k),this.Kb(n,d,1),n=this.kc(n);while(n!=h);this.Xg(k,m)}h=this.kc(this.ya(h))}while(h!=f)}}k=this.hI();this.Et(k,-1);this.wJ(k,b);
-1!=b&&this.yJ(b,k);this.Jl=k;this.$n=g.ce.rf(this.ze.size,NaN);this.fA=g.ce.rf(this.ze.size,NaN);this.vJ(this.Jl,Infinity);this.xJ(this.Jl,Infinity);this.Lg(d)};a.prototype.mR=function(b,d,e){d=-1!=d?d:this.Je(b);if(-1==d)return-1;for(b=d;;){if(1!=this.Bb(d,e))return d;d=this.kc(this.ya(d));if(d==b)return-1}};a.prototype.tW=function(){for(var b=this.bh(),d=this.Oe;-1!=d;d=this.Tf(d))for(var e=-1;;){var f=this.mR(d,e,b);if(-1==f)break;e=this.kc(this.ya(f));for(var h=f;;){var k=this.kc(h),m=this.ue(h),
n=this.ya(h);if(m==n){this.DP(h);if(e==h||e==n)e=-1;if(h==f||m==f){f=k;if(h==f||m==f)break;h=k;continue}}else this.Kb(h,b,1);h=k;if(h==f)break}}this.Lg(b)};a.prototype.HB=function(b,d,e,f,h){this.Wg();this.bH=h;this.g=b;this.Dq=this.g.WE();b=new g.ja(0);b.Jb(null!=e?this.g.I(e.get(0)):this.g.gd);var k=0,m=1,n=null!=e?e.get(0):this.g.md;for(h=1;-1!=n;){this.g.CJ(n,this.Dq,m);m<<=1;for(var p=this.g.Ob(n);-1!=p;p=this.g.Sb(p))for(var q=this.g.Ya(p),t=0,v=this.g.Ka(p);t<v;t++)b.add(q),q=this.g.V(q);g.ba.Tn(this.g.jc(n))||
(k+=this.g.ea(n));null!=e?(n=h<e.size?e.get(h):-1,h++):n=this.g.ve(n)}this.Io=m;this.xa=b.size;this.g.nx(b,this.xa);null==this.lh&&(this.lh=new g.ad(2),this.he=new g.ad(8),this.Lc=new g.ad(8),this.ze=new g.ad(8));this.lh.Ee(this.xa);g.op.Bp(f);this.he.Ee(this.xa+10);this.Lc.Ee(2*this.xa+32);this.ze.Ee(Math.max(32,k));this.Em=this.g.Hd();e=new g.h;h=0;k=new g.h;e.Sc();for(m=0;m<=this.xa;m++)if(m<this.xa?(q=b.get(m),this.g.D(q,k)):k.Sc(),!e.rb(k)){if(h<m){q=this.$m();for(v=t=-1;h<m;h++)v=b.get(h),this.g.Sa(v,
this.Em,q),n=this.lh.De(),this.lh.T(n,0,v),this.lh.T(n,1,t),t=n,p=this.g.cd(v),n=this.g.Sf(p),n=this.Ma(n),this.NW(q,this.yd(q)|n);this.OW(q,t);this.er(q,this.g.Va(v));-1!=this.Qs&&this.dX(this.Qs,q);this.gX(q,this.Qs);this.Qs=q;-1==this.Oe&&(this.Oe=q)}h=m;e.N(k)}g.op.Bp(f);this.be=this.bh();5==d&&(this.eg=this.bh());4==d&&(this.yg=this.bh());this.qP(d,b);0==this.Pi.Lj&&(this.EX(d),0==this.Pi.Lj&&(isNaN(this.gA)||this.sO()?(this.RN(),0==this.Pi.Lj&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(d,
f))):this.kA=!0))};a.prototype.Gy=function(b){var d=this.kc(b),e=this.ue(b),f=this.ya(b),h=this.kc(f),k=this.ue(f);d!=f&&(this.Ul(k,d),this.Vl(d,k));e!=f&&(this.Ul(e,h),this.Vl(h,e));e=this.lk(b);this.Je(e)==b&&(h!=b?this.on(e,h):this.on(e,-1));h=this.lk(f);this.Je(h)==f&&(d!=f?this.on(h,d):this.on(h,-1));this.Lc.kd(b);this.Lc.kd(f)};a.prototype.JF=function(b,d){for(;;)if(d=b.xe(d),-1!=d){var e=b.ka(d);if(this.$e(e)!=this.$e(this.ya(e)))return e}else return-1};a.prototype.fr=function(b,d){var e;void 0===
e&&(e=!0);this.HB(b,0,null,d,e)};a.prototype.qJ=function(b,d,e){var f=new g.ja(0);f.add(d);this.HB(b,4,f,e,1736==b.jc(d))};a.prototype.rJ=function(b,d,e){var f=new g.ja(0);f.add(d);this.HB(b,5,f,e,!0)};a.prototype.Wg=function(){null!=this.g&&(-1!=this.Dq&&(this.g.sW(this.Dq),this.Dq=-1),-1!=this.Em&&(this.g.Ud(this.Em),this.Em=-1),-1!=this.Eq&&(this.g.Ud(this.Eq),this.Eq=-1),-1!=this.be&&(this.Lg(this.be),this.be=-1),-1!=this.eg&&(this.Lg(this.eg),this.eg=-1),-1!=this.yg&&(this.Lg(this.yg),this.yg=
-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,null!=this.Lc&&this.Lc.oj(!0),null!=this.Ii&&(this.Ii.length=0),null!=this.Fi&&(this.Fi.length=0),null!=this.cH&&(this.cH.length=0),null!=this.ze&&this.ze.oj(!0),this.Jl=-1,this.$n=null)};a.prototype.Je=function(b){return this.he.U(b,2)};a.prototype.D=function(b,d){this.g.ZF(this.$Q(b),d)};a.prototype.yd=function(b){return this.he.U(b,1)};a.prototype.Tf=function(b){return this.he.U(b,4)};a.prototype.Yy=function(b){return this.he.U(b,
6)};a.prototype.mm=function(b){return this.he.U(b,7)};a.prototype.ls=function(b){return this.lh.U(b,1)};a.prototype.vj=function(b){return this.lh.U(b,0)};a.prototype.og=function(b,d){d=this.Fi[d];return d.size<=b?-1:d.read(b)};a.prototype.pn=function(b,d,e){d=this.Fi[d];d.size<=b&&d.resize(this.he.size,-1);d.write(b,e)};a.prototype.Fp=function(){null==this.Fi&&(this.Fi=[]);for(var b=g.ja.rf(this.he.Jg,-1),d=0,e=this.Fi.length;d<e;d++)if(null==this.Fi[d])return this.Fi[d]=b,d;this.Fi.push(b);return this.Fi.length-
1};a.prototype.Gp=function(b){this.Fi[b]=null};a.prototype.lk=function(b){return this.Lc.U(b,1)};a.prototype.vf=function(b){return this.lk(this.ya(b))};a.prototype.ya=function(b){return this.Lc.U(b,4)};a.prototype.ue=function(b){return this.Lc.U(b,5)};a.prototype.kc=function(b){return this.Lc.U(b,6)};a.prototype.$e=function(b){return this.Lc.U(b,2)};a.prototype.af=function(b){return this.jk(this.Lc.U(b,2))};a.prototype.om=function(b){return this.Lc.U(b,7)};a.prototype.$r=function(b,d){this.D(this.lk(b),
d)};a.prototype.nm=function(b,d){this.D(this.vf(b),d)};a.prototype.fh=function(b){return this.Lc.U(b,3)&this.XN};a.prototype.Bb=function(b,d){d=this.Ii[d];return d.size<=b?-1:d.read(b)};a.prototype.Kb=function(b,d,e){d=this.Ii[d];d.size<=b&&d.resize(this.Lc.size,-1);d.write(b,e)};a.prototype.bh=function(){null==this.Ii&&(this.Ii=[]);for(var b=g.ja.rf(this.Lc.Jg,-1),d=0,e=this.Ii.length;d<e;d++)if(null==this.Ii[d])return this.Ii[d]=b,d;this.Ii.push(b);return this.Ii.length-1};a.prototype.Lg=function(b){this.Ii[b]=
null};a.prototype.DP=function(b){var d=this.$e(b),e=this.ya(b),f=this.kc(b);f==e&&(f=this.kc(f),f==b&&(f=-1));var h=this.vF(d);h!==b&&h!=e||this.Et(d,f);e=this.$n.read(d);isNaN(e)||(this.vJ(d,NaN),this.xJ(d,NaN));this.xx(b,!0);this.Gy(b)};a.prototype.EP=function(b){for(var d=0,e=b.size;d<e;d++){var f=b.get(d),h=this.$e(this.ya(f));this.Et(this.$e(f),-1);this.Et(h,-1);this.xx(f,!0);this.Gy(f)}};a.prototype.vF=function(b){return this.ze.U(b,1)};a.prototype.jk=function(b){return this.ze.U(b,2)};a.prototype.In=
function(b){return this.ze.U(b,3)};a.prototype.ZQ=function(b){return this.ze.U(b,4)};a.prototype.Mp=function(b){var d=this.$n.read(b);isNaN(d)&&(this.gY(b),d=this.$n.read(b));return d};a.prototype.Ma=function(b){return this.g.FF(b,this.Dq)};a.prototype.Ie=function(b){return this.g.Qa(b,this.Em)};a.prototype.oR=function(b){return this.g.Qa(b,this.Eq)};a.prototype.nR=function(b,d){var e=this.Je(b);if(-1==e)return-1;var f=e,h=-1,k=-1;do{if(this.vf(f)==d)return f;if(-1==h){h=this.Je(d);if(-1==h)break;
k=h}if(this.vf(k)==b)return f=this.ya(k);f=this.kc(this.ya(f));k=this.kc(this.ya(k))}while(f!=e&&k!=h);return-1};a.prototype.kB=function(b,d){d.Qr();d=d.get();var e=new g.h;this.$r(b,e);d.Ec(e);this.nm(b,e);d.Rc(e)};a.prototype.CO=function(b,d){if(b==d)return 0;var e=new g.h;this.nm(b,e);var f=new g.h;this.nm(d,f);if(e.rb(f))return 0;d=new g.h;this.$r(b,d);b=new g.h;b.vc(e,d);e=new g.h;e.vc(f,d);return g.h.pu(b,e)};a.prototype.BO=function(b,d){if(b==d)return 0;var e=new g.h;this.nm(b,e);var f=new g.h;
this.nm(d,f);if(e.rb(f))return 0;d=new g.h;this.$r(b,d);b=new g.h;b.vc(e,d);e=new g.h;e.vc(f,d);return 0<=e.y&&0<b.y?g.h.pu(b,e):0};a.prototype.sO=function(){for(var b=g.mc.ox(this.gA),d=new g.h,e=new g.h,f=new g.h,h=new g.h,k=new g.h,m=this.Oe;-1!=m;m=this.Tf(m)){var n=this.Je(m);if(-1!=n){var p=n;this.$r(p,d);this.nm(p,e);k.vc(e,d);var q=k.Uk();do{var t=p;p=this.kc(this.ya(p));if(p!=t){this.nm(p,f);h.vc(f,d);t=h.Uk();var v=h.yi(k);if(v*v/(t*q)*Math.min(t,q)<=b)return!1;k.N(h);q=t;e.N(f)}}while(p!=
n)}}return!0};return a}();g.ku=z})(R||(R={}));(function(g){var z=function(){function l(){this.j=null;this.jH=new g.h;this.kH=new g.h;this.Ij=null;this.Ov=!1;this.vl=-1}l.prototype.cf=function(c){return c<this.Ij.length?this.Ij[c]:!1};l.prototype.fl=function(c,a,b,d){var e=g.ba.uf(this.j.g.jc(b));if(2==g.ba.uf(this.j.g.jc(a))&&1==e)this.AP(c,a,b,d);else throw g.i.Ra();};l.prototype.fr=function(c,a){null==this.j&&(this.j=new g.ku);this.j.fr(c,a)};l.prototype.Gt=function(c,a,b){g.Vk.W(c,a,b,!0);for(a=
c.md;-1!=a;a=c.ve(a))1736==c.jc(a)&&g.tn.W(c,a,-1,this.Ov,b);this.fr(c,b)};l.prototype.HE=function(c,a,b,d,e){var f=this.j.g;if(1736==f.jc(c))for(c=f.Ob(c);-1!=c;c=f.Sb(c)){var h=f.Ya(c);this.j.Ie(h);this.j.Ie(f.V(h));var k=this.j.oR(h);if(-1!=k){var m=this.j.Bb(k,b);if(1!=m&&2!=m)if(this.cf(this.j.af(k))){this.j.Kb(k,b,1);m=f.wf(a,-1);var n=k,p=this.j.Ie(h),q=1;do{var t=this.um(h,e);f.kj(m,t);-1!=d&&this.j.pn(p,d,1);this.j.Kb(n,b,1);n=this.j.kc(n);do{t=1==q?f.V(h):f.Na(h);var v=-1!=t?this.j.Ie(t):
-1}while(v==p);var F=this.j.lk(n);if(F!=v){do t=1==q?f.Na(h):f.V(h),v=-1!=t?this.j.Ie(t):-1;while(v==p);F!=v?(v=F,t=this.j.vj(this.j.mm(v))):q=-q}p=v;h=t}while(n!=k);f.mn(m,!0)}else this.j.Kb(k,b,2)}}};l.prototype.$E=function(){for(var c=this.j.bh(),a=new g.ja(0),b=this.j.Oe;-1!=b;b=this.j.Tf(b)){var d=this.j.Je(b),e=d;if(-1!=d){do{if(1!=this.j.Bb(e,c)){var f=this.j.ya(e);this.j.Kb(f,c,1);this.j.Kb(e,c,1);this.cf(this.j.af(e))&&this.cf(this.j.af(f))&&a.add(e)}e=this.j.kc(this.j.ya(e))}while(e!=d)
}}this.j.Lg(c);this.j.EP(a)};l.prototype.um=function(c,a){return-1==a?c:this.WR(c,a)};l.prototype.WR=function(c,a){var b=this.j.g,d=this.j.mm(this.j.Ie(c));do{var e=this.j.vj(d);if(b.Sf(b.cd(e))==a)return e;d=this.j.ls(d)}while(-1!=d);return c};l.prototype.Qt=function(c,a,b){this.$E();var d=this.j.g,e=d.Kg(1736),f=this.j.bh();this.pK(c,a,e,b,f,-1);this.j.Lg(f);g.tn.W(d,e,1,this.Ov,null);return e};l.prototype.pK=function(c,a,b,d,e,f){this.HE(c,b,e,f,d);-1!=a&&this.HE(a,b,e,f,d);c=this.j.g;for(a=this.j.Oe;-1!=
a;a=this.j.Tf(a)){var h=this.j.Je(a);if(-1!=h){var k=h;do{var m=this.j.Bb(k,e);if(1!=m&&2!=m)if(this.cf(this.j.af(k))){m=c.wf(b,-1);var n=k;do{var p=this.j.om(n);-1!=p?p=this.j.vj(p):(p=this.j.vj(this.j.om(this.j.ya(n))),p=this.j.g.V(p));p=this.um(p,d);c.kj(m,p);this.j.Kb(n,e,1);-1!=f&&(p=this.j.Ie(p),this.j.pn(p,f,1));n=this.j.kc(n)}while(n!=k);c.mn(m,!0)}else this.j.Kb(k,e,2);k=this.j.kc(this.j.ya(k))}while(k!=h)}}};l.prototype.XX=function(c,a,b){var d=this.j.g,e=d.Kg(1736),f=d.Kg(1607),h=d.Kg(550);
this.$E();var k=-1,m=this.j.bh(),n=this.j.Fp();this.pK(c,a,e,b,m,n);for(c=this.j.Oe;-1!=c;c=this.j.Tf(c))if(a=this.j.Je(c),-1!=a){var p=a;do{var q=this.j.Bb(p,m),t=this.j.Bb(this.j.ya(p),m);q|=t;if(2==q)if(q=this.j.fh(p),this.cf(q)){var v=d.wf(f,-1),F=p;q=this.$w(c,d);q=this.um(q,b);d.kj(v,q);this.j.pn(c,n,1);do{q=this.j.vf(F);t=this.$w(q,d);t=this.um(t,b);d.kj(v,t);this.j.Kb(F,m,1);this.j.Kb(this.j.ya(F),m,1);this.j.pn(q,n,1);F=this.j.kc(F);q=this.j.Bb(F,m);t=this.j.Bb(this.j.ya(F),m);q|=t;if(2!=
q)break;q=this.j.fh(F);if(!this.cf(q)){this.j.Kb(F,m,1);this.j.Kb(this.j.ya(F),m,1);break}}while(F!=p)}else this.j.Kb(p,m,1),this.j.Kb(this.j.ya(p),m,1);p=this.j.kc(this.j.ya(p))}while(p!=a)}for(c=this.j.Oe;-1!=c;c=this.j.Tf(c))q=this.j.og(c,n),1!=q&&(q=this.j.yd(c),this.cf(q)&&(-1==k&&(k=d.wf(h,-1)),a=this.j.mm(c),-1!=a&&(a=this.j.vj(a),q=this.um(a,b),d.kj(k,q))));this.j.Gp(n);this.j.Lg(m);g.tn.W(d,e,1,this.Ov,null);b=[];b[0]=h;b[1]=f;b[2]=e;return b};l.prototype.$w=function(c,a){var b=-1;for(c=
this.j.mm(c);-1!=c;c=this.j.ls(c)){var d=this.j.vj(c);-1==b&&(b=d);var e=this.j.Ma(a.Sf(a.cd(d)));if(this.cf(e)){b=d;break}}return b};l.prototype.gB=function(c,a){for(var b=this.ll(a),d=this.j.lk(a),e=this.j.vf(a),f=0,h=0,k=this.j.mm(d);-1!=k;k=this.j.ls(k)){var m=this.j.vj(k),n=c.cd(m),p=this.j.Ma(c.Sf(n));n=c.Ya(n);(p=0!=(p&b))&&n==m&&(this.vl=a);var q=c.V(m);-1!=q&&this.j.Ie(q)==e?(f++,p&&(-1===this.vl&&n==q&&(m=this.j.kc(a),this.cf(this.ll(m))&&(this.vl=m)),h++)):(m=c.Na(m),-1!=m&&this.j.Ie(m)==
e&&(f--,p&&(-1===this.vl&&n===m&&(m=this.j.kc(a),this.cf(this.ll(m))&&(this.vl=m)),h--)))}this.j.D(d,this.jH);this.j.D(e,this.kH);c=g.h.ub(this.jH,this.kH);return(0!=h?h:f)*c};l.prototype.ll=function(c){return this.j.fh(c)|this.j.af(c)|this.j.af(this.j.ya(c))};l.prototype.sK=function(c){for(var a=this.j.ya(this.j.ue(c)),b=-1;a!=c;){if(this.cf(this.ll(a))){if(-1!=b)return-1;b=a}a=this.j.ya(this.j.ue(a))}return-1!=b?this.j.ya(b):-1};l.prototype.tK=function(c){for(var a=this.j.ya(this.j.kc(c)),b=-1;a!=
c;){if(this.cf(this.ll(a))){if(-1!=b)return-1;b=a}a=this.j.ya(this.j.kc(a))}return-1!=b?this.j.ya(b):-1};l.prototype.hJ=function(c,a,b,d,e){var f=this.j.g,h=c,k=this.j.ya(h);this.j.Kb(h,b,1);this.j.Kb(k,b,1);this.vl=-1;for(var m=this.gB(f,h),n=h,p=-1,q=!1,t=1;;){var v=this.j.ue(h);if(v==k)break;k=this.j.kc(k);if(this.j.ya(v)!=k)if(h=this.sK(h),-1==h){q=!0;break}else k=this.j.ya(h);else h=v;if(h==c){p=c;break}v=this.ll(h);if(!this.cf(v))break;this.j.Kb(h,b,1);this.j.Kb(k,b,1);n=h;m+=this.gB(f,h);t++}if(-1==
p)for(h=c,k=this.j.ya(h),p=h;;){c=this.j.kc(h);if(c==k)break;k=this.j.ue(k);if(this.j.ya(c)!=k)if(h=this.tK(h),-1==h){q=!0;break}else k=this.j.ya(h);else h=c;v=this.ll(h);if(!this.cf(v))break;this.j.Kb(h,b,1);this.j.Kb(k,b,1);p=h;m+=this.gB(f,h);t++}else if(-1!=this.vl&&(n=this.vl,p=this.j.ue(this.vl),this.j.ya(p)!=this.j.kc(this.j.ya(n))&&(p=this.sK(n),-1==p)))throw g.i.Ra();0<=m||(h=p,p=this.j.ya(n),n=this.j.ya(h));b=f.wf(a,-1);h=n;n=this.j.lk(n);q=this.j.vf(p)==n&&q;m=this.$w(n,f);m=this.um(m,
e);f.kj(b,m);-1!=d&&this.j.pn(n,d,1);n=0;for(t=q?g.P.truncate((t+1)/2):-1;;){c=this.j.vf(h);m=this.$w(c,f);m=this.um(m,e);f.kj(b,m);n++;-1!=d&&this.j.pn(c,d,1);q&&n==t&&(b=f.wf(a,-1),f.kj(b,m));if(h==p)break;c=this.j.kc(h);if(this.j.ue(this.j.ya(h))!=this.j.ya(c)){if(h=this.tK(h),-1==h)throw g.i.Ra();}else h=c}};l.prototype.Rt=function(c){for(var a=this.j.g.Kg(1607),b=this.j.bh(),d=this.j.Oe;-1!=d;d=this.j.Tf(d)){var e=this.j.Je(d),f=e;do 1!=this.j.Bb(f,b)&&this.cf(this.ll(f))&&this.hJ(f,a,b,-1,c),
f=this.j.kc(this.j.ya(f));while(f!=e)}this.j.Lg(b);return a};l.prototype.YX=function(c){for(var a=this.j.g,b=a.Kg(1607),d=a.Kg(550),e=this.j.bh(),f=this.j.Fp(),h=-1,k=this.j.Oe;-1!=k;k=this.j.Tf(k)){var m=this.j.Je(k),n=m;do{var p=this.j.Bb(n,e);1!=p&&(p=this.ll(n),this.cf(p)&&this.hJ(n,b,e,f,c));n=this.j.kc(this.j.ya(n))}while(n!=m)}for(k=this.j.Oe;-1!=k;k=this.j.Tf(k))p=this.j.og(k,f),1!=p&&(p=this.j.yd(k),this.cf(p)&&(-1==h&&(h=a.wf(d,-1)),m=this.j.mm(k),-1!=m&&(m=this.j.vj(m),m=this.um(m,c),a.kj(h,
m))));this.j.Lg(e);this.j.Gp(f);c=[];c[0]=d;c[1]=b;return c};l.prototype.pr=function(){for(var c=this.j.g,a=c.Kg(550),b=c.wf(a,-1),d=this.j.Oe;-1!=d;d=this.j.Tf(d))if(this.cf(this.j.yd(d))){for(var e=-1,f=this.j.mm(d);-1!=f;f=this.j.ls(f)){var h=this.j.vj(f);-1==e&&(e=h);var k=this.j.Ma(c.Sf(c.cd(h)));if(this.cf(k)){e=h;break}}c.kj(b,e)}return a};l.prototype.eq=function(c){this.Ij=[];for(var a=0;a<c;a++)this.Ij[a]=!1};l.WV=function(c,a,b){var d=c.Ja(),e=Array(1E3);g.P.bv(e,null);var f=g.P.mg(1E3,
0),h=c.I(),k=!0,m=2==a.Eb();if(1!=a.Eb()&&2!=a.Eb())throw g.i.Ra();for(var n=0;n<h;){var p=g.P.truncate(c.gW(e,n)-n);m?g.jd.nK(a,e,p,b,f):g.jd.oK(a,e,p,b,f);for(var q=0,t=0;t<p;t++)0==f[t]&&(k&&(k=!1,d.Gd(c,0,n)),q!=t&&d.Gd(c,n+q,n+t),q=t+1);k||q==p||d.Gd(c,n+q,n+p);n+=p}return k?c:d};l.uG=function(c,a,b){return c instanceof g.ee?l.WV(c,a,b):a instanceof g.Ta?c.B()||a.B()?c.Ja():g.Vk.uU(b,c,a)?g.Vk.xO(c,a):c.Ja():l.XV(c,a,b)};l.Cv=function(c,a,b,d){var e=new g.l;c.A(e);var f=new g.l;a.A(f);var h=
new g.l;h.L(e);h.$b(f);b=g.ua.Xd(b,h,!0);h=new g.l;h.L(f);f=g.ua.Gr(b);h.X(f,f);if(!e.isIntersecting(h)){if(c.Eb()<=a.Eb())return l.mi(l.Ue(c.Ja()),c,"\x26");if(c.Eb()>a.Eb())return l.mi(l.Ue(a.Ja()),c,"\x26")}f=new l;e=new g.hd;h=e.Ib(l.Ue(c));a=e.Ib(l.Ue(a));f.Gt(e,b,d);d=f.Cv(h,a);c=l.mi(e.Ke(d),c,"\x26");g.ba.Ic(c.K())&&(c.Eh(2,b),1736==c.K()&&c.hm());return c};l.XV=function(c,a,b){if(c.B()||a.B())return c.Ja();var d=[null],e=[0],f=2==a.Eb();if(1!=a.Eb()&&2!=a.Eb())throw g.i.Ra();d[0]=c.D();f?
g.jd.nK(a,d,1,b,e):g.jd.oK(a,d,1,b,e);return 0==e[0]?c.Ja():c};l.prototype.GU=function(c,a,b,d,e){if(c.B())return c;var f=new g.hd;c=f.Ib(c);return this.Ok(f,c,a,b,d,e)};l.prototype.IU=function(c,a,b,d,e,f){if(e&&550!=c.jc(a)){var h=new g.MC;h.PX(c,b);h.Pg?(g.Vk.W(c,b,f,!0),e=!1):this.j.ty(b)}else g.Vk.W(c,b,f,!0),e=!1;d&&550!=c.jc(a)?this.j.rJ(c,a,f):this.j.qJ(c,a,f);if(this.j.kA)return this.j.Wg(),this.j=null,this.Ok(c,a,b,d,!1,f);this.j.ty(NaN);f=this.j.Ma(a);this.eq(f+1);this.Ij[f]=!0;if(1736==
c.jc(a)||d&&550!=c.jc(a))return c.$o(a,0),a=this.Qt(a,-1,-1),c=c.Ke(a),c.$o(0),e?c.Eh(1,0):(c.Eh(2,b),c.hm()),c;if(1607==c.jc(a))return a=this.Rt(-1),c=c.Ke(a),e||c.Eh(2,b),c;if(550==c.jc(a))return a=this.pr(),c=c.Ke(a),e||c.Eh(2,b),c;throw g.i.Ra();};l.prototype.Ok=function(c,a,b,d,e,f){this.j=new g.ku;try{return this.IU(c,a,b,d,e,f)}finally{this.j.Wg()}};l.Ok=function(c,a,b,d,e){return(new l).GU(c,a,b,d,e)};l.prototype.HU=function(c,a,b,d){this.Ov=c;this.j=new g.ku;c=a.Kn(b);var e=a.jc(b);1!=c||
550==e?this.j.qJ(a,b,d):this.j.rJ(a,b,d);if(!this.j.kA)if(this.j.ty(NaN),d=this.j.Ma(b),this.eq(d+1),this.Ij[d]=!0,1736==a.jc(b)||1==c&&550!=a.jc(b))a.$o(b,0),d=this.Qt(b,-1,-1),a.cC(d,b),a.wB(d);else if(1607==a.jc(b))d=this.Rt(-1),a.cC(d,b),a.wB(d);else if(550==a.jc(b))d=this.pr(),a.cC(d,b),a.wB(d);else throw g.i.ga("internal error");};l.prototype.km=function(c,a){var b=g.ba.uf(this.j.g.jc(c)),d=g.ba.uf(this.j.g.jc(a));if(b>d)return c;var e=this.j.Ma(c),f=this.j.Ma(a);this.eq((e|f)+1);this.Ij[this.j.Ma(c)]=
!0;if(2==b&&2==d)return this.Qt(c,a,-1);if(1==b&&2==d||1==b&&1==d)return this.Rt(-1);if(0==b)return this.pr();throw g.i.Ra();};l.prototype.Cv=function(c,a){var b=g.ba.uf(this.j.g.jc(c)),d=g.ba.uf(this.j.g.jc(a)),e=this.j.Ma(c),f=this.j.Ma(a);this.eq((e|f)+1);this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0;e=-1;1<this.j.g.it.Ba&&(e=c);if(2==b&&2==d)return this.Qt(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.Rt(e);if(0==b||0==d)return this.pr();throw g.i.Ra();};l.prototype.Kz=function(c,a){var b=g.ba.uf(this.j.g.jc(c)),
d=g.ba.uf(this.j.g.jc(a)),e=this.j.Ma(c),f=this.j.Ma(a);this.eq((e|f)+1);this.Ij[this.j.Ma(c)|this.j.Ma(a)]=!0;e=-1;1<this.j.g.it.Ba&&(e=c);if(2==b&&2==d)return this.XX(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.YX(e);if(0==b||0==d)return c=[],c[0]=this.pr(),c;throw g.i.Ra();};l.prototype.gp=function(c,a){var b=g.ba.uf(this.j.g.jc(c)),d=g.ba.uf(this.j.g.jc(a)),e=this.j.Ma(c),f=this.j.Ma(a);this.eq((e|f)+1);this.Ij[this.j.Ma(c)]=!0;this.Ij[this.j.Ma(a)]=!0;if(2==b&&2==d)return this.Qt(c,a,-1);if(1==
b&&1==d)return this.Rt(-1);if(0==b&&0==d)return this.pr();throw g.i.Ra();};l.Ue=function(c){var a=c.K();return 197==a?(a=new g.Ea(c.description),c.B()||a.bd(c,!1),a):33==a?(a=new g.ee(c.description),c.B()||a.add(c),a):322==a?(a=new g.Ua(c.description),c.B()||a.pc(c,!0),a):c};l.mi=function(c,a,b){var d=c.K();return 197==d?(a=new g.Ea(c.description),c.B()||a.bd(c,!1),a):33!=d||"|"!=b&&"^"!=b?322==d?(a=new g.Ua(c.description),c.B()||a.pc(c,!0),a):33==d&&"-"==b&&33==a.K()||550==d&&"\x26"==b&&33==a.K()?
(a=new g.Ta(c.description),c.B()||c.we(0,a),a):c:(a=new g.ee(c.description),c.B()||a.add(c),a)};l.km=function(c,a,b,d){if(c.B()||a.B()||c.Eb()>a.Eb())return l.mi(l.Ue(c),c,"-");var e=new g.l;c.A(e);var f=new g.l;a.A(f);if(!e.isIntersecting(f))return l.mi(l.Ue(c),c,"-");var h=new g.l;h.L(e);h.$b(f);b=g.ua.Xd(b,h,!0);f=new l;e=new g.hd;h=e.Ib(l.Ue(c));a=e.Ib(l.Ue(a));f.Gt(e,b,d);d=f.km(h,a);d=e.Ke(d);c=l.mi(d,c,"-");g.ba.Ic(c.K())&&(c.Eh(2,b),1736==c.K()&&c.hm());return c};l.QP=function(c,a,b){if(2>
c.length)throw g.i.O("not enough geometries to dissolve");for(var d=0,e=0,f=c.length;e<f;e++)d=Math.max(c[e].Eb(),d);var h=new g.l;h.Pa();var k=new g.hd,m=-1,n=0,p=-1;e=0;for(f=c.length;e<f;e++)if(c[e].Eb()==d)if(c[e].B())-1==p&&(p=e);else{p=e;-1==m?m=k.Ib(l.Ue(c[e])):k.pN(m,l.Ue(c[e]));var q=new g.l;c[e].yc(q);h.$b(q);n++}if(2>n)return l.Ue(c[p]);c=2==d;a=g.ua.Xd(0==d?a:null,h,!0);return(new l).Ok(k,m,a,c,!0,b)};l.Kz=function(c,a,b,d){var e=[null,null,null],f=new g.l;c.A(f);var h=new g.l;a.A(h);
var k=new g.l;k.L(f);k.$b(h);b=g.ua.Xd(b,k,!0);k=new g.l;k.L(h);h=g.ua.Gr(b);k.X(h,h);if(!f.isIntersecting(k)){if(c.Eb()<=a.Eb())return c=l.mi(l.Ue(c.Ja()),c,"\x26"),e[c.Eb()]=c,e;if(c.Eb()>a.Eb())return c=l.mi(l.Ue(a.Ja()),c,"\x26"),e[c.Eb()]=c,e}h=new l;f=new g.hd;k=f.Ib(l.Ue(c));a=f.Ib(l.Ue(a));h.Gt(f,b,d);d=h.Kz(k,a);for(a=0;a<d.length;a++)h=l.mi(f.Ke(d[a]),c,"\x26"),g.ba.Ic(h.K())&&(h.Eh(2,b),1736==h.K()&&h.hm()),e[h.Eb()]=h;return e};l.gp=function(c,a,b,d){if(c.Eb()>a.Eb())return l.mi(l.Ue(c),
c,"^");if(c.Eb()<a.Eb()||c.B())return l.mi(l.Ue(a),c,"^");if(a.B())return l.mi(l.Ue(c),c,"^");var e=new g.l;c.A(e);var f=new g.l;a.A(f);var h=new g.l;h.L(e);h.$b(f);b=g.ua.Xd(b,h,!0);f=new l;e=new g.hd;h=e.Ib(l.Ue(c));a=e.Ib(l.Ue(a));f.Gt(e,b,d);d=f.gp(h,a);c=l.mi(e.Ke(d),c,"^");g.ba.Ic(c.K())&&(c.Eh(2,b),1736==c.K()&&c.hm());return c};l.prototype.GQ=function(c,a){var b=this.j.g;c=b.wf(c,-1);for(var d=a.size,e=0;e<d;e++){var f=a.get(e);b.kj(c,f)}b.mn(c,!0)};l.prototype.WW=function(c,a){for(var b=
this.j.g,d=b.md;-1!=d;d=b.ve(d))if(d==a)for(var e=b.Ob(d);-1!=e;e=b.Sb(e)){var f=b.Ya(e);if(-1!=f)for(var h=b.V(f);-1!=h;){f=this.j.Ie(f);var k=this.j.Ie(h);f=this.j.nR(f,k);-1!=f&&(k=this.j.ya(f),this.j.Kb(f,c,1),this.j.Kb(k,c,2));f=h;h=b.V(f)}}};l.prototype.YV=function(c,a,b,d){b=this.j.Ma(b);d=this.j.Ma(d);var e=new g.ja(0);e.Jb(256);for(var f=this.j.g,h=this.j.bh(),k=this.j.Oe;-1!=k;k=this.j.Tf(k)){var m=this.j.Je(k);if(-1!=m){var n=m;do{if(1!=this.j.Bb(n,h)){var p=n,q=n,t=!1,v=0;do{this.j.Kb(p,
h,1);if(!t){var F=this.j.fh(p);0!=(F&d)&&0!=(this.j.af(p)&b)&&(q=p,t=!0)}t&&(e.add(this.j.vj(this.j.mm(this.j.lk(p)))),-1!=c&&(F=this.j.fh(p),0!=(F&d)&&(F=this.j.Bb(p,c),v|=F)));p=this.j.kc(p)}while(p!=q);t&&0<this.j.Mp(this.j.$e(q))&&(p=f.Kg(1736),this.GQ(p,e),-1!=a&&f.CJ(p,a,v));e.clear(!1)}n=this.j.kc(this.j.ya(n))}while(n!=m)}}this.j.Lg(h)};l.prototype.AP=function(c,a,b,d){this.j.tW();var e=-1;-1!=c&&(e=this.j.bh(),this.WW(e,b));this.YV(e,c,a,b);-1!=e&&(this.j.Lg(e),e=-1);var f=this.j.g;c=0;for(e=
f.md;-1!=e;e=f.ve(e))e!=a&&e!=b&&(d.add(e),c++);d.Wd(0,c,function(h,k){h=f.qz(f.Ob(h));k=f.qz(f.Ob(k));return h<k?-1:h==k?0:1})};l.prototype.Wg=function(){null!=this.j&&(this.j.Wg(),this.j=null)};return l}();g.Hg=z})(R||(R={}));(function(g){var z=function(){function l(c){void 0!==c?this.Jt(c):this.MB()}l.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0};l.prototype.Nb=function(c){return this==c?!0:c instanceof l?this.eb==c.eb&&this.jb==c.jb&&this.Lb==c.Lb&&this.qb==c.qb&&
this.bb==c.bb&&this.Qb==c.Qb:!1};l.prototype.dc=function(){g.P.wj();g.P.wj();g.P.wj();g.P.wj();g.P.wj();return g.P.wj()};l.prototype.Gh=function(c,a){var b=this.qb*c.x+this.bb*c.y+this.Qb;a.x=this.eb*c.x+this.jb*c.y+this.Lb;a.y=b};l.prototype.aY=function(c,a,b){for(var d=0;d<a;d++){var e=c[d].x,f=c[d].y,h=this.eb*e+this.jb*f+this.Lb;e=this.qb*e+this.bb*f+this.Qb;null!=b[d]?b[d].na(h,e):b[d]=g.h.construct(h,e)}};l.prototype.multiply=function(c){l.multiply(this,c,this)};l.multiply=function(c,a,b){var d=
c.eb*a.eb+c.qb*a.jb,e=c.jb*a.eb+c.bb*a.jb,f=c.Lb*a.eb+c.Qb*a.jb+a.Lb,h=c.eb*a.qb+c.qb*a.bb,k=c.jb*a.qb+c.bb*a.bb;c=c.Lb*a.qb+c.Qb*a.bb+a.Qb;b.eb=d;b.jb=e;b.Lb=f;b.qb=h;b.bb=k;b.Qb=c};l.prototype.Qf=function(){var c=new l;c.eb=this.eb;c.jb=this.jb;c.Lb=this.Lb;c.qb=this.qb;c.bb=this.bb;c.Qb=this.Qb;return c};l.prototype.hC=function(c){if(!c.B()){for(var a=[],b=0;4>b;b++)a[b]=new g.h;c.iB(a);this.bY(a,a);c.bx(a,4)}};l.prototype.bY=function(c,a){for(var b=0;b<c.length;b++){var d=new g.h,e=c[b];d.x=this.eb*
e.x+this.jb*e.y+this.Lb;d.y=this.qb*e.x+this.bb*e.y+this.Qb;a[b]=d}};l.prototype.kS=function(c,a){c.B()||a.B()||0==c.S()||0==c.da()?this.lx():(this.jb=this.qb=0,this.eb=a.S()/c.S(),this.bb=a.da()/c.da(),this.Lb=a.v-c.v*this.eb,this.Qb=a.G-c.G*this.bb)};l.prototype.$X=function(c){var a=new g.h,b=new g.h;a.na(this.eb,this.qb);b.na(this.jb,this.bb);a.sub(a);var d=.5*a.Uk();a.na(this.eb,this.qb);b.na(this.jb,this.bb);a.add(b);a=.5*a.Uk();return c*(d>a?Math.sqrt(d):Math.sqrt(a))};l.prototype.MB=function(){this.eb=
1;this.qb=this.Lb=this.jb=0;this.bb=1;this.Qb=0};l.prototype.isIdentity=function(c){if(void 0!==c){var a=g.h.construct(0,1);this.Gh(a,a);a.sub(g.h.construct(0,1));if(a.Uk()>c*c)return!1;a.na(0,0);this.Gh(a,a);if(a.Uk()>c*c)return!1;a.na(1,0);this.Gh(a,a);a.sub(g.h.construct(1,0));return a.Uk()<=c*c}return 1==this.eb&&1==this.bb&&0==this.jb&&0==this.Lb&&0==this.qb&&0==this.Qb};l.prototype.Di=function(c){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*c*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*
this.jb))};l.prototype.ig=function(c,a){this.eb=1;this.jb=0;this.Lb=c;this.qb=0;this.bb=1;this.Qb=a};l.prototype.Jt=function(c,a){void 0!==a?(this.eb=c,this.qb=this.Lb=this.jb=0,this.bb=a,this.Qb=0):this.Jt(c,c)};l.prototype.VB=function(){this.eb=0;this.jb=1;this.Lb=0;this.qb=1;this.Qb=this.bb=0};l.prototype.kX=function(c){this.lX(Math.cos(c),Math.sin(c))};l.prototype.lX=function(c,a){this.eb=c;this.jb=-a;this.Lb=0;this.qb=a;this.bb=c;this.Qb=0};l.prototype.shift=function(c,a){this.Lb+=c;this.Qb+=
a};l.prototype.scale=function(c,a){this.eb*=c;this.jb*=c;this.Lb*=c;this.qb*=a;this.bb*=a;this.Qb*=a};l.prototype.flipX=function(c,a){this.eb=-this.eb;this.jb=-this.jb;this.Lb=c+a-this.Lb};l.prototype.flipY=function(c,a){this.qb=-this.qb;this.bb=-this.bb;this.Qb=c+a-this.Qb};l.prototype.rotate=function(c){var a=new l;a.kX(c);this.multiply(a)};l.prototype.inverse=function(c){if(void 0!==c){var a=this.eb*this.bb-this.jb*this.qb;0==a?c.lx():(a=1/a,c.Lb=(this.jb*this.Qb-this.Lb*this.bb)*a,c.Qb=(this.Lb*
this.qb-this.eb*this.Qb)*a,c.eb=this.bb*a,c.jb=-this.jb*a,c.qb=-this.qb*a,c.bb=this.eb*a)}else this.inverse(this)};return l}();g.Ed=z})(R||(R={}));(function(g){var z=function(){function l(){}l.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0};l.prototype.Jt=function(c,a){this.eb=c;this.jb=this.pf=this.qb=0;this.bb=a;this.We=this.Ve=this.Ye=0;this.Ze=void 0;this.Cg=this.Qb=this.Lb=0};l.prototype.translate=function(c,a,b){this.Lb+=
c;this.Qb+=a;this.Cg+=b};l.prototype.hC=function(c){if(!c.B()){for(var a=new g.Od[8],b=0;8>b;b++)a[b]=new g.Od;c.iB(a);this.transform(a,8,a);c.bx(a)}};l.prototype.transform=function(c,a,b){for(var d=0;d<a;d++){var e=new g.Od,f=c[d];e.x=this.eb*f.x+this.jb*f.y+this.Ve*f.z+this.Lb;e.y=this.qb*f.x+this.bb*f.y+this.We*f.z+this.Qb;e.z=this.pf*f.x+this.Ye*f.y+this.Ze*f.z+this.Cg;b[d]=e}};l.prototype.hp=function(c){var a=new g.Od;a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb;a.y=this.qb*c.x+this.bb*c.y+
this.We*c.z+this.Qb;a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg;return a};l.prototype.Bg=function(c){l.multiply(this,c,this)};l.multiply=function(c,a,b){var d=c.eb*a.eb+c.qb*a.jb+c.pf*a.Ve,e=c.eb*a.qb+c.qb*a.bb+c.pf*a.We,f=c.eb*a.pf+c.qb*a.Ye+c.pf*a.Ze,h=c.jb*a.eb+c.bb*a.jb+c.Ye*a.Ve,k=c.jb*a.qb+c.bb*a.bb+c.Ye*a.We,m=c.jb*a.pf+c.bb*a.Ye+c.Ye*a.Ze,n=c.Ve*a.eb+c.We*a.jb+c.Ze*a.Ve,p=c.Ve*a.qb+c.We*a.bb+c.Ze*a.We,q=c.Ve*a.pf+c.We*a.Ye+c.Ze*a.Ze,t=c.Lb*a.eb+c.Qb*a.jb+c.Cg*a.Ve+a.Lb,v=c.Lb*a.qb+c.Qb*
a.bb+c.Cg*a.We+a.Qb;c=c.Lb*a.pf+c.Qb*a.Ye+c.Cg*a.Ze+a.Cg;b.eb=d;b.qb=e;b.pf=f;b.jb=h;b.bb=k;b.Ye=m;b.Ve=n;b.We=p;b.Ze=q;b.Lb=t;b.Qb=v;b.Cg=c};l.inverse=function(c,a){var b=c.eb*(c.bb*c.Ze-c.Ye*c.We)-c.qb*(c.jb*c.Ze-c.Ye*c.Ve)+c.pf*(c.jb*c.We-c.bb*c.Ve);if(0!=b){var d=1/b;b=(c.bb*c.Ze-c.Ye*c.We)*d;var e=-(c.jb*c.Ze-c.Ye*c.Ve)*d,f=(c.jb*c.We-c.bb*c.Ve)*d,h=-(c.qb*c.Ze-c.We*c.pf)*d,k=(c.eb*c.Ze-c.pf*c.Ve)*d,m=-(c.eb*c.We-c.qb*c.Ve)*d,n=(c.qb*c.Ye-c.pf*c.bb)*d,p=-(c.eb*c.Ye-c.pf*c.jb)*d;d*=c.eb*c.bb-
c.qb*c.jb;var q=-(c.Lb*b+c.Qb*e+c.Cg*f),t=-(c.Lb*h+c.Qb*k+c.Cg*m);c=-(c.Lb*n+c.Qb*p+c.Cg*d);a.eb=b;a.qb=h;a.pf=n;a.jb=e;a.bb=k;a.Ye=p;a.Ve=f;a.We=m;a.Ze=d;a.Lb=q;a.Qb=t;a.Cg=c}else throw g.i.ga("math singularity");};l.prototype.Qf=function(){var c=new l;c.eb=this.eb;c.qb=this.qb;c.pf=this.pf;c.jb=this.jb;c.bb=this.bb;c.Ye=this.Ye;c.Ve=this.Ve;c.We=this.We;c.Ze=this.Ze;c.Lb=this.Lb;c.Qb=this.Qb;c.Cg=this.Cg;return c};return l}();g.FY=z})(R||(R={}));(function(g){var z=function(c){function a(b){if(void 0!==
b)b=c.call(this,b.dc(),b)||this;else{b=c.call(this)||this;b.dg=[];b.dg[0]=0;b.Ba=1;b.wh=[];for(var d=0;10>d;d++)b.wh[d]=-1;b.wh[b.dg[0]]=0}b.lq=!0;return b}Na(a,c);a.prototype.se=function(b){this.hasAttribute(b)||(this.wh[b]=0,this.eD())};a.prototype.removeAttribute=function(b){if(0==b)throw g.i.O("Position attribue cannot be removed");this.hasAttribute(b)&&(this.wh[b]=-1,this.eD())};a.prototype.reset=function(){this.dg[0]=0;this.Ba=1;for(var b=0;b<this.wh.length;b++)this.wh[b]=-1;this.wh[this.dg[0]]=
0;this.lq=!0};a.prototype.zF=function(){return l.fz().add(this)};a.pg=function(){return l.fz().VR()};a.prototype.oM=function(){var b=this.dc();return new g.sa(b,this)};a.prototype.eD=function(){for(var b=this.Ba=0,d=0;10>b;b++)0<=this.wh[b]&&(this.dg[d]=b,this.wh[b]=d,d++,this.Ba++);this.lq=!0};a.prototype.dc=function(){this.lq&&(this.yl=this.Cn(),this.lq=!1);return this.yl};a.prototype.Nb=function(b){if(null==b)return!1;if(b==this)return!0;if(!(b instanceof a)||b.Ba!=this.Ba)return!1;for(var d=0;d<
this.Ba;d++)if(this.dg[d]!=b.dg[d])return!1;return this.lq!=b.lq?!1:!0};a.prototype.BG=function(b){if(b.Ba!=this.Ba)return!1;for(var d=0;d<this.Ba;d++)if(this.dg[d]!=b.dg[d])return!1;return!0};a.Kw=function(b,d){for(var e=[],f=0;f<b.Ba;f++)e[f]=-1;f=0;for(var h=b.Ba;f<h;f++)e[f]=d.Rf(b.ld(f));return e};a.wR=function(b,d){b=new a(b);b.se(d);return b.zF()};a.xR=function(b,d){for(var e=null,f=0;10>f;f++)!b.hasAttribute(f)&&d.hasAttribute(f)&&(null==e&&(e=new a(b)),e.se(f));return null!=e?e.zF():b};return a}(g.sa);
g.fe=z;var l=function(){function c(){this.map=[];var a=new z;this.add(a);a=new z;a.se(1);this.add(a)}c.fz=function(){return c.XK};c.prototype.VR=function(){return c.gt};c.prototype.add=function(a){var b=a.dc();if(null!=c.gt&&c.gt.dc()==b&&a.BG(c.gt))return c.gt;if(null!=c.Fw&&c.Fw.dc()==b&&a.BG(c.Fw))return c.Fw;var d=null;void 0!==this.map[b]&&(d=this.map[b]);null==d&&(d=a.oM(),1==d.Ba?c.gt=d:2==d.Ba&&1==d.ld(1)?c.Fw=d:this.map[b]=d);return d};c.XK=new c;return c}()})(R||(R={}));var Aa={feet:9002,
kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Ha={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Ka=new (function(){function g(){this.MM=50;this.pp=new Map;this.ij=[]}g.prototype.clear=function(){this.ij.length=0;this.pp.clear()};g.prototype.delete=function(z){return this.pp.delete(z)?(this.ij.splice(this.ij.indexOf(z),1),!0):!1};g.prototype.get=function(z){var l=
this.pp.get(z);if(void 0!==l)return this.ij[0]!==z&&(this.ij.splice(this.ij.indexOf(z),1),this.ij.unshift(z)),l};g.prototype.has=function(z){return this.pp.has(z)};g.prototype.set=function(z,l){void 0!==this.get(z)&&this.delete(z);this.ij.unshift(z);this.pp.set(z,l);this.jM();return this};g.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var z=this.ij.pop();this.pp.delete(z)}};return g}()),Ca=(La={},La.convertJSONToGeometry=function(g){return R.ac.aP(g)},La.hasM=function(g){return g.hasAttribute(R.Kh.M)},
La.hasZ=function(g){return g.hasAttribute(R.Kh.Z)},La.getPointX=function(g){return g.Ng()},La.getPointY=function(g){return g.kh()},La.getPointZ=function(g){return g.XR()},La.getPointM=function(g){return g.uR()},La.getXMin=function(g){return g.gs()},La.getYMin=function(g){return g.js()},La.getXMax=function(g){return g.fs()},La.getYMax=function(g){return g.hs()},La.getZExtent=function(g){return g.Vg(R.Kh.Z,0)},La.getMExtent=function(g){return g.Vg(R.Kh.M,0)},La.exportPaths=function(g){var z=[],l=g.ea(),
c=null,a=null,b=g.hasAttribute(R.Kh.Z),d=g.hasAttribute(R.Kh.M);b&&(c=g.vb(R.Kh.Z));d&&(a=g.vb(R.Kh.M));for(var e=new R.h,f=0;f<l;f++){for(var h=g.Ca(f),k=g.Ka(f),m=0,n=0,p=NaN,q=NaN,t=NaN,v=NaN,F=g.ec(f),W=[],ba=h;ba<h+k;ba++){g.D(ba,e);v=t=NaN;var aa=[e.x,e.y];b&&(t=c.get(ba),aa.push(t));d&&(v=a.get(ba),aa.push(v));ba==h&&F&&(m=e.x,n=e.y,p=t,q=v);W.push(aa)}!F||m==e.x&&n==e.y&&(!b||isNaN(p)&&isNaN(t)||p==t)&&(!d||isNaN(q)&&isNaN(v)||q==v)||W.push(W[0].slice(0));z.push(W)}return z},La.exportPathsFlat=
function(){},La.exportPoints=function(g){var z=g.hasAttribute(R.Kh.Z),l=g.hasAttribute(R.Kh.M),c=null,a=null;z&&(c=g.vb(R.Kh.Z));l&&(a=g.vb(R.Kh.M));for(var b=new R.h,d=g.I(),e=[],f=0;f<d;f++){g.D(f,b);var h=[b.x,b.y];z&&h.push(c.get(f));l&&h.push(a.get(f));e.push(h)}return e},La.exportPointsFlat=function(){},La),Wa=new Map;return function(){function g(){}g.buffer=ja;g.clip=U;g.contains=Q;g.convexHull=X;g.crosses=C;g.cut=M;g.densify=Ma;g.difference=O;g.disjoint=T;g.distance=E;g.equals=L;g.extendedSpatialReferenceInfo=
J;g.generalize=Ta;g.geodesicArea=Ra;g.geodesicBuffer=oa;g.geodesicDensify=Ua;g.geodesicLength=Ea;g.intersect=Y;g.intersects=y;g.isSimple=ha;g.nearestCoordinate=ua;g.nearestVertex=va;g.nearestVertices=Ja;g.offset=ea;g.overlaps=ia;g.planarArea=Oa;g.planarLength=Za;g.relate=ca;g.simplify=da;g.symmetricDifference=K;g.touches=G;g.union=S;g.within=Z;g.rotate=R.Dx.rotate;g.flipHorizontal=R.Dx.EQ;g.flipVertical=R.Dx.FQ;g.intersectLinesToPoints=Va;g.ExtendedParams=R.tC;g.clearDefaultSpatialReferenceTolerance=
Pa;g.changeDefaultSpatialReferenceTolerance=Ba;g._enableProjection=xa;g._project=pa;g._getTransformation=za;g._getTransformationBySuitability=Ia;return g}()}();void 0!==P&&(A.exports=P)})({get exports(){return V},set exports(A){V=A}});const w=V,N=function(A,P){for(var B=0;B<P.length;B++){const u=P[B];if("string"!==typeof u&&!Array.isArray(u))for(const x in u)if("default"!==x&&!(x in A)){const H=Object.getOwnPropertyDescriptor(u,x);H&&Object.defineProperty(A,x,H.get?H:{enumerable:!0,get:()=>u[x]})}}return Object.freeze(Object.defineProperty(A,
Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:w},[V]);r.GeometryEngineApi=w;r.geometryEngineBase=N})},"esri/geometry/geometryAdapters/hydrated":function(){define("exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(r,V,w,N,A,P){r.hydratedAdapter={convertToGEGeometry:function(B,u){if(null==u)return null;let x="cache"in u?u.cache._geVersion:void 0;null==x&&(x=B.convertJSONToGeometry(u),"cache"in u&&(u.cache._geVersion=x));return x},exportPoint:function(B,
u,x){const H=B.hasZ(u),I=B.hasM(u);x=new N({x:B.getPointX(u),y:B.getPointY(u),spatialReference:x});H&&(x.z=B.getPointZ(u));I&&(x.m=B.getPointM(u));x.cache._geVersion=u;return x},exportPolygon:function(B,u,x){B=new A({rings:B.exportPaths(u),hasZ:B.hasZ(u),hasM:B.hasM(u),spatialReference:x});B.cache._geVersion=u;return B},exportPolyline:function(B,u,x){B=new P({paths:B.exportPaths(u),hasZ:B.hasZ(u),hasM:B.hasM(u),spatialReference:x});B.cache._geVersion=u;return B},exportMultipoint:function(B,u,x){B=
new w({hasZ:B.hasZ(u),hasM:B.hasM(u),points:B.exportPoints(u),spatialReference:x});B.cache._geVersion=u;return B},exportExtent:function(B,u,x){var H=B.hasZ(u);const I=B.hasM(u);x=new V({xmin:B.getXMin(u),ymin:B.getYMin(u),xmax:B.getXMax(u),ymax:B.getYMax(u),spatialReference:x});H&&(H=B.getZExtent(u),x.zmin=H.vmin,x.zmax=H.vmax);I&&(B=B.getMExtent(u),x.mmin=B.vmin,x.mmax=B.vmax);x.cache._geVersion=u;return x}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),
function(r,V,w,N,A,P,B,u,x,H){function I(y){if(!y)return null;if(P.isGeographic(y)&&y.wkid){var G=A.spheroids[y.wkid];if(G)return G}return y.wkt&&((y=A.WKT_SPHEROID_REGEX.exec(y.wkt))&&2===y.length?(G=y[1].split(","),!G||3>G.length?y=null:(y=parseFloat(G[1]),G=parseFloat(G[2]),y=isNaN(y)||isNaN(G)?null:{a:y,f:0===G?0:1/G})):y=null,y)?y:null}function D(y){y=I(y??H.WGS84);if(null!=y&&"b"in y&&"eSq"in y&&"radius"in y)return y;const G=y.a*(1-y.f);return Object.assign(y,{b:G,eSq:1-(G/y.a)**2,radius:(2*
y.a+G)/3,densificationRatio:1E4/((2*y.a+G)/3)})}function J(y){return null!=y&&0>y?y+360:y}function U(y,G,Z){const {a:T,eSq:ia}=D(Z);Z=Math.sqrt(ia);const ca=Math.sin(G[1]*A.toRadians);G=T*G[0]*A.toRadians;Z=0<ia?T*(1-ia)*(ca/(1-ia*ca*ca)-1/(2*Z)*Math.log((1-Z*ca)/(1+Z*ca)))*.5:T*ca;y[0]=G;y[1]=Z;return y}function M(y){return null!==I(y)}function Q(y,G){if("polyline"!==y.type&&"polygon"!==y.type)throw new w("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:Z}=
y;if(!M(Z))throw new w("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var T="polyline"===y.type?y.paths:y.rings;const ia=[],ca=[0,0],ha=new L;for(const O of T){T=[];ia.push(T);T.push([O[0][0],O[0][1]]);var da=O[0][0],X=O[0][1];let K,Y;for(let S=0;S<O.length-1;S++){K=O[S+1][0];Y=O[S+1][1];if(da===K&&X===Y)continue;const ea=[da,X];E(ha,[da,X],[K,Y],Z);const {azimuth:ja,distance:oa}=ha;da=oa/G;if(1<da){for(X=1;X<=da-1;X++)C(ca,ea,ja,X*G,Z),T.push(ca.slice(0));
C(ca,ea,ja,(oa+Math.floor(da-1)*G)/2,Z);T.push(ca.slice(0))}C(ca,ea,ja,oa,Z);T.push(ca.slice(0));da=ca[0];X=ca[1]}}return"polyline"===y.type?new B({paths:ia,spatialReference:Z}):new u({rings:ia,spatialReference:Z})}function C(y,G,Z,T,ia){const ca=G[0]*A.toRadians;G=G[1]*A.toRadians;Z=(Z??0)*A.toRadians;const {a:ha,b:da,f:X}=D(ia);ia=Math.sin(Z);Z=Math.cos(Z);var O=(1-X)*Math.tan(G);G=1/Math.sqrt(1+O*O);const K=O*G,Y=Math.atan2(O,Z);O=G*ia;const S=O*O;var ea=1-S,ja=ea*(ha*ha-da*da)/(da*da);const oa=
1+ja/16384*(4096+ja*(-768+ja*(320-175*ja))),qa=ja/1024*(256+ja*(-128+ja*(74-47*ja)));ja=T/(da*oa);let ua=2*Math.PI,va,Ja,Ta,Ma;for(;1E-12<Math.abs(ja-ua);)Ta=Math.cos(2*Y+ja),va=Math.sin(ja),Ja=Math.cos(ja),Ma=qa*va*(Ta+qa/4*(Ja*(-1+2*Ta*Ta)-qa/6*Ta*(-3+4*va*va)*(-3+4*Ta*Ta))),ua=ja,ja=T/(da*oa)+Ma;T=K*va-G*Ja*Z;ea=X/16*ea*(4+X*(4-3*ea));T=Math.atan2(K*Ja+G*va*Z,(1-X)*Math.sqrt(S+T*T))/A.toRadians;y[0]=(ca+(Math.atan2(va*ia,G*Ja-K*va*Z)-(1-ea)*X*O*(ja+ea*va*(Ta+ea*Ja*(-1+2*Ta*Ta)))))/A.toRadians;
y[1]=T;return y}function E(y,G,Z,T){var ia=G[0]*A.toRadians;G=G[1]*A.toRadians;var ca=Z[0]*A.toRadians;Z=Z[1]*A.toRadians;const {a:ha,b:da,f:X,radius:O}=D(T),K=ca-ia;var Y=Math.atan((1-X)*Math.tan(G)),S=Math.atan((1-X)*Math.tan(Z));T=Math.sin(Y);Y=Math.cos(Y);const ea=Math.sin(S);S=Math.cos(S);let ja=1E3,oa=K,qa,ua,va;let Ja,Ta,Ma;do{var Ua=Math.sin(oa);var Oa=Math.cos(oa);va=Math.sqrt(S*Ua*S*Ua+(Y*ea-T*S*Oa)*(Y*ea-T*S*Oa));if(0===va)return y.distance=0,y.azimuth=void 0,y.reverseAzimuth=void 0,y;
Oa=T*ea+Y*S*Oa;Ja=Math.atan2(va,Oa);Ta=Y*S*Ua/va;ua=1-Ta*Ta;Ua=Oa-2*T*ea/ua;isNaN(Ua)&&(Ua=0);Ma=X/16*ua*(4+X*(4-3*ua));qa=oa;oa=K+(1-Ma)*X*Ta*(Ja+Ma*va*(Ua+Ma*Oa*(-1+2*Ua*Ua)))}while(1E-12<Math.abs(oa-qa)&&0<--ja);if(0===ja)return T=Math.acos(Math.sin(G)*Math.sin(Z)+Math.cos(G)*Math.cos(Z)*Math.cos(ca-ia))*O,ia=ca-ia,y.azimuth=Math.atan2(Math.sin(ia)*Math.cos(Z),Math.cos(G)*Math.sin(Z)-Math.sin(G)*Math.cos(Z)*Math.cos(ia))/A.toRadians,y.distance=T,y.reverseAzimuth=void 0,y;ia=ua*(ha*ha-da*da)/(da*
da);G=ia/1024*(256+ia*(-128+ia*(74-47*ia)));ca=Math.atan2(Y*Math.sin(oa),Y*ea*Math.cos(oa)-T*S);y.azimuth=Math.atan2(S*Math.sin(oa),Y*ea-T*S*Math.cos(oa))/A.toRadians;y.distance=da*(1+ia/16384*(4096+ia*(-768+ia*(320-175*ia))))*(Ja-G*va*(Ua+G/4*(Oa*(-1+2*Ua*Ua)-G/6*Ua*(-3+4*va*va)*(-3+4*Ua*Ua))));y.reverseAzimuth=ca/A.toRadians;return y}let L=function(y=0,G,Z){this.distance=y;this.azimuth=G;this.reverseAzimuth=Z};r.InverseGeodeticSolverResult=L;r.directGeodeticSolver=C;r.geodesicAreas=function(y,G=
"square-meters"){if(y.some(ca=>!M(ca.spatialReference)))throw new w("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const Z=[];for(var T=0;T<y.length;T++){var ia=y[T];const {radius:ca,densificationRatio:ha}=D(ia.spatialReference);Z.push(Q(ia,ca*ha))}y=[];T=[0,0];ia=[0,0];for(let ca=0;ca<Z.length;ca++){const {rings:ha,spatialReference:da}=Z[ca];let X=0;for(let O=0;O<ha.length;O++){const K=ha[O];U(T,K[0],da);U(ia,K[K.length-1],da);let Y=ia[0]*T[1]-
T[0]*ia[1];for(let S=0;S<K.length-1;S++)U(T,K[S+1],da),U(ia,K[S],da),Y+=ia[0]*T[1]-T[0]*ia[1];X+=Y}X=N.convertUnit(X,"square-meters",G);y.push(X/-2)}return y};r.geodesicDensify=Q;r.geodesicDistance=function(y,G,Z="meters"){if(!y||!G)throw new w("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!y.spatialReference||!G.spatialReference)throw new w("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!P.equals(y.spatialReference,
G.spatialReference))throw new w("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:T}=y;if(!M(T))throw new w("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(y.x===G.x&&y.y===G.y)return new L(0,0,0);const ia=new L;E(ia,[y.x,y.y],[G.x,G.y],T);ia.distance=N.convertUnit(ia.distance,"meters",Z);ia.azimuth=J(ia.azimuth);ia.reverseAzimuth=J(ia.reverseAzimuth);return ia};r.geodesicLengths=function(y,
G="meters"){if(!y)throw new w("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(y.some(ia=>!M(ia.spatialReference)))throw new w("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const Z=[];for(let ia=0;ia<y.length;ia++){var T=y[ia];const {spatialReference:ca}=T;T="polyline"===T.type?T.paths:T.rings;let ha=0;for(let da=0;da<T.length;da++){const X=T[da];let O=0;for(let K=1;K<X.length;K++){const Y=X[K-1][0],S=
X[K][0],ea=X[K-1][1],ja=X[K][1];if(ea!==ja||Y!==S){const oa=new L;E(oa,[Y,ea],[S,ja],ca);O+=oa.distance}}ha+=O}ha=N.convertUnit(ha,"meters",G);Z.push(ha)}return Z};r.inverseGeodeticSolver=E;r.isSupported=M;r.pointFromDistance=function(y,G,Z){if(!y||null==G||null==Z)throw new w("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>Z||360<Z)throw new w("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");
if(!y.spatialReference)throw new w("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:T}=y;if(!M(T))throw new w("geodesic-distance:not-supported","input geometry spatial reference is not supported");const ia=[0,0];C(ia,[y.x,y.y],Z,G,T);return new x({x:ia[0],y:ia[1],spatialReference:T})};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicMeasurementUtils":function(){define(["exports","../../geometry/support/geodesicUtils",
"../../geometry/support/spatialReferenceUtils"],function(r,V,w){r.geodesicMeasure=function(N,A,P,B,...u){return w.isGeographic(N)&&V.isSupported(N)?A.apply(void 0,u):w.isWebMercator(N)?P.apply(void 0,u):B.apply(void 0,u)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../layers/graphics/dehydratedFeatures ../../../support/elevationInfoUtils".split(" "),
function(r,V,w,N,A,P,B){function u(Q,C,E,L,y=A.create()){Q=C.toXYZ(Q);Q[2]=B.getConvertedElevationFromVector(L,Q,C.spatialReference,E)||0;L.renderCoordsHelper.toRenderCoords(Q,C.spatialReference,y);return y}function x(Q,C,E,L,y=A.create()){Q=N.copy(D,Q);Q[2]=B.getConvertedElevationFromVector(L,Q,C,E)||0;L.renderCoordsHelper.toRenderCoords(Q,C,y);return y}function H(Q,C,E,L){if("2d"===L.type)return I.x=Q[0],I.y=Q[1],I.spatialReference=C,L.toScreen(I);x(Q,C,E,L,D);L.state.camera.projectToScreen(D,M);
return V.createScreenPoint(M[0],M[1])}const I=P.makeDehydratedPoint(0,0,0,null),D=A.create(),J=V.createRenderScreenPointArray3(),U=V.createRenderScreenPointArray3(),M=V.createScreenPointArray();r.anyMapPointToRender=u;r.anyMapPointToScreenPoint=function(Q,C,E,L){return H(C.toXYZ(Q),C.spatialReference,E,L)};r.anyMapPointsToRenderWithEqualRelativeZ=function(Q,C,E,L,y,G,Z){if("absolute-height"===L.mode)u(Q,E,L,y,G),u(C,E,L,y,Z);else{Q=E.toXYZ(Q);C=E.toXYZ(C);var T=B.getConvertedElevationFromVector(y,
Q,E.spatialReference,L);L=B.getConvertedElevationFromVector(y,C,E.spatialReference,L);L=(null==T?L:null==L?T:Math.min(T,L))||0;Q[2]=L;C[2]=L;y.renderCoordsHelper.toRenderCoords(Q,E.spatialReference,G);y.renderCoordsHelper.toRenderCoords(C,E.spatialReference,Z)}};r.renderScreenSpaceTangent=function(Q,C,E,L){E.projectToRenderScreen(Q,J);E.projectToRenderScreen(C,U);w.subtract(L,U,J);w.normalize(L,L)};r.vectorToRender=x;r.vectorToScreenPoint=H;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/SnappingVisualizer3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../core/has ../../../core/handleUtils ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../support/elevationInfoUtils ./visualElements/ExtendedLineVisualElement ./visualElements/ParallelLineVisualElement ./visualElements/PointVisualElement ./visualElements/RightAngleQuadVisualElement ../layers/interfaces ../webgl-engine/lib/Material ../../interactive/snapping/Settings ../../interactive/snapping/SnappingDomain ../../interactive/snapping/SnappingPoint ../../interactive/snapping/snappingUtils ../../interactive/snapping/SnappingVisualizer ../../interactive/snapping/hints/LineSnappingHint ../../interactive/support/viewUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T){function ia(ca,ha,da,X,O,K=u.create()){O?x.projectVectorToVector(ca,ha,K,X.basemapTerrain.overlayManager.renderer.spatialReference):T.vectorToRender(ca,ha,da,X,K);return K}N=function(ca){function ha(){return ca.apply(this,arguments)||this}V._inheritsLoose(ha,ca);var da=ha.prototype;da.sortUniqueHints=function(X){return X.sort((O,K)=>(K instanceof Z.LineSnappingHint?K.length:0)-(O instanceof Z.LineSnappingHint?O.length:0))};da.visualizeIntersectionPoint=
function(X,O){const {spatialReference:K,view:Y}=O;return A.destroyHandle(new J.PointVisualElement({view:Y,primitive:"circle",geometry:L.snappingPointToDehydratedPoint(X.intersectionPoint,K),elevationInfo:X.isDraped?H.onTheGroundElevationInfo:H.absoluteHeightElevationInfo,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:w.toUnitRGBA(C.defaults.orange),pixelSnappingEnabled:!1}))};da.visualizePoint=function(X,O){const {view:K,spatialReference:Y}=O,S=this._alignPoint(X.point,X.domain,O);return A.destroyHandle(new J.PointVisualElement({view:K,
primitive:"circle",geometry:L.snappingPointToDehydratedPoint(S,Y),elevationInfo:this._hintElevationInfo(X,O),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:w.toUnitRGBA(C.defaults.orange),pixelSnappingEnabled:!1}))};da.visualizeLine=function(X,O){const {view:K,spatialReference:Y}=O,S=this._alignPoint(X.lineStart,X.domain,O),ea=this._alignPoint(X.lineEnd,X.domain,O);return A.destroyHandle(this._createLineSegmentHint(X.type,S,ea,Y,this._hintElevationInfo(X,O),K,X.isDraped,X.fadeLeft,X.fadeRight))};
da.visualizeParallelSign=function(X,O){const {view:K,spatialReference:Y}=O;var {isDraped:S}=X,ea=this._hintElevationInfo(X,O),ja=this._alignPoint(X.lineStart,X.domain,O);X=this._alignPoint(X.lineEnd,X.domain,O);ja=ia(ja,Y,ea,K,S);ea=ia(X,Y,ea,K,S);ea=B.lerp(ea,ja,ea,.5);S=new D.ParallelLineVisualElement({view:K,attached:!1,offset:C.defaults.parallelLineHintOffset,length:C.defaults.parallelLineHintLength,width:C.defaults.parallelLineHintWidth,color:w.toUnitRGBA(C.defaults.orange),location:ea,renderOccluded:S?
Q.RenderOccludedFlag.OccludeAndTransparent:Q.RenderOccludedFlag.Opaque,isDraped:S,renderGroup:M.DrapedRenderGroup.SnappingHint});S.setDirectionFromPoints(ja,ea);S.attached=!0;return A.destroyHandle(S)};da.visualizeRightAngleQuad=function(X,O){const {view:K,spatialReference:Y}=O;var S=this._hintElevationInfo(X,O);const {isDraped:ea}=X;var ja=this._alignPoint(X.previousVertex,X.domain,O),oa=this._alignPoint(X.centerVertex,X.domain,O);X=this._alignPoint(X.nextVertex,X.domain,O);ja=ia(ja,Y,S,K,ea);oa=
ia(oa,Y,S,K,ea);S=ia(X,Y,S,K,ea);return A.destroyHandle(new U.RightAngleQuadVisualElement({view:K,attached:!0,color:ea?w.toUnitRGBA(C.defaults.orangeTransparent):w.toUnitRGBA(C.defaults.orange),renderOccluded:ea?Q.RenderOccludedFlag.OccludeAndTransparent:Q.RenderOccludedFlag.Transparent,outlineRenderOccluded:ea?Q.RenderOccludedFlag.OccludeAndTransparent:Q.RenderOccludedFlag.Opaque,outlineColor:w.toUnitRGBA(C.defaults.orange),outlineSize:C.defaults.rightAngleHintOutlineSize,size:C.defaults.rightAngleHintSize,
isDraped:ea,geometry:{previous:ja,center:oa,next:S},renderGroup:M.DrapedRenderGroup.SnappingHint}))};da._createLineSegmentHint=function(X,O,K,Y,S,ea,ja=!1,oa=!0,qa=!0){O=ia(O,Y,S,ea,ja);K=ia(K,Y,S,ea,ja);ea=new I.ExtendedLineVisualElement({view:ea,extensionType:I.ExtensionType.FADED,start:O,end:K,isDraped:ja,color:w.toUnitRGBA(C.defaults.orange),renderOccluded:ja?Q.RenderOccludedFlag.OccludeAndTransparent:Q.RenderOccludedFlag.Opaque,renderGroup:M.DrapedRenderGroup.SnappingHint});switch(X){case y.LineSegmentHintType.TARGET:ea.width=
C.defaults.lineHintWidthTarget;ea.fadedExtensions={start:0,end:C.defaults.lineHintFadedExtensions};break;case y.LineSegmentHintType.REFERENCE_EXTENSION:ea.width=C.defaults.lineHintWidthReference;ea.fadedExtensions={start:0,end:0};break;case y.LineSegmentHintType.REFERENCE:ea.width=C.defaults.lineHintWidthReference,ea.fadedExtensions={start:oa?C.defaults.lineHintFadedExtensions:0,end:qa?C.defaults.lineHintFadedExtensions:0}}ea.attached=!0;return ea};da._alignPoint=function(X,O,K){O=this._getSelfSnappingZ(O,
K);return P.isNone(O)?X:L.createSnappingPoint(X[0],X[1],O)};da._hintElevationInfo=function(X,O){return P.isSome(this._getSelfSnappingZ(X.domain,O))?P.unwrap(O.selfSnappingZ).elevationInfo:X.isDraped?H.onTheGroundElevationInfo:H.absoluteHeightElevationInfo};da._getSelfSnappingZ=function(X,{selfSnappingZ:O}){return X===E.SnappingDomain.SELF&&P.isSome(O)?O.value:null};return ha}(G.SnappingVisualizer);r.SnappingVisualizer3D=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/ExtendedLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/support/clipRay ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/ray ./EngineVisualElement ./LaserlineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y){w=function(ha){function da(O){var K=ha.call(this,O)||this;K._ray=D.create();K._isWorldDown=!1;K._start=P.create();K._end=P.fromValues(1,0,0);K._width=1;K._color=u.fromValues(1,0,1,1);K._polygonOffset=!1;K._writeDepthEnabled=!0;K._innerWidth=0;K._innerColor=u.fromValues(1,1,1,1);K._stipplePattern=null;K._stippleOffColor=null;K._stipplePreferContinuous=!0;K._falloff=0;K._extensionType=r.ExtensionType.LINE;K._laserlineStyle=null;K._laserlineEnabled=!1;
K._renderOccluded=C.RenderOccludedFlag.OccludeAndTransparent;K._fadedExtensions=ca;K._laserline=new U.LaserlineVisualElement({view:K.view});K.applyProps(O);return K}V._inheritsLoose(da,ha);var X=da.prototype;X.destroy=function(){this._laserline.destroy();ha.prototype.destroy.call(this)};X.createObject3DResourceFactory=function(O){return{view:O,createResources:K=>this._createObject3DResources(K),destroyResources:K=>this._destroyExternalResources(K),recreateGeometry:(K,Y)=>this._recreateObject3DGeometry(K,
Y),cameraChanged:()=>this._updateGeometry()}};X.createDrapedResourceFactory=function(O){return{view:O,createResources:()=>this._createDrapedResources(),destroyResources:K=>this._destroyExternalResources(K),recreateGeometry:K=>this._recreateDrapedGeometry(K)}};X.updateVisibility=function(O){ha.prototype.updateVisibility.call(this,O);this._laserline.visible=O};X.onAttachedChange=function(){this._laserline.attached=this._laserlineAttached};X.setStartEndFromWorldDownAtLocation=function(O){this._isWorldDown=
!0;A.copy(this._start,O);this.view.renderCoordsHelper.worldUpAtPosition(O,this._end);A.subtract(this._end,O,this._end);D.fromPoints(this._start,this._end,this._ray);this._updateGeometry()};X._updateMaterial=function(){const {materialParameters:O}=this;N.toNullable(this.object3dResources.resources)?.material.setParameters(O);N.toNullable(this.drapedResources.resources)?.material.setParameters(O)};X._createObject3DResources=function(O){const K=new y.RibbonLineMaterial(this.materialParameters),Y=[];
this._createObject3DGeometry(K,O,Y);return{material:K,geometries:Y,forEach:S=>{S(K);Y.forEach(S)}}};X._destroyExternalResources=function(O){O.geometries=[];O.material.dispose()};X._recreateObject3DGeometry=function(O,K){O.geometries.length=0;this._createObject3DGeometry(O.material,K,O.geometries)};X._createObject3DGeometry=function(O,K,Y){O=this._createGeometry(O);Y.push(O);K.addGeometry(O);this._updateVerticesObject3D(K)};X._createDrapedResources=function(){const O=new y.RibbonLineMaterial(this.materialParameters),
K=this._createDrapedGeometry(O);return{material:O,geometries:[K]}};X._recreateDrapedGeometry=function(O){O.geometries=[this._createDrapedGeometry(O.material)]};X._createDrapedGeometry=function(O){O=this._createGeometry(O);this._updateVerticesDraped(O);O=new E.RenderGeometry(O,{boundingInfo:O.boundingInfo});O.computeBoundingSphere(O.transformation,O.boundingSphere);return O};X._createGeometry=function(O){const K=this.extensionType===r.ExtensionType.FADED,Y=K?[P.create(),P.create(),P.create(),P.create()]:
[P.create(),P.create()];return Q.createPolylineGeometry(O,Y,null,K?[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]:null)};X._updateGeometry=function(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const O=N.toNullable(this.object3dResources.object);O&&this._updateVerticesObject3D(O)}};X._updateVerticesObject3D=function(O){const K=this._lineSegment;this._updateVertexAttributesObject3D(O,K);this._laserline.intersectsLine=K};X._updateVerticesDraped=function(O){this._updateVertexAttributesDraped(O,
this._lineSegment)};X._updateLineSegmentFinite=function(O){return I.fromPoints(this._start,this._end,O)};X._updateLineSegmentInfinite=function(O,K){var Y=this.view.state.camera;x.fromRay(this._ray,G);switch(O){case r.ExtensionType.LINE:G.c0=-Number.MAX_VALUE;break;case r.ExtensionType.RAY:case r.ExtensionType.GROUND_RAY:var S=this._ray.origin;O=N.unwrapOr(this.view.elevationProvider.getElevation(S[0],S[1],S[2],this.view.renderCoordsHelper.spatialReference,"ground"),0);S=this.view.renderCoordsHelper.getAltitude(S);
this._isWorldDown&&S<O&&A.negate(G.ray.direction,G.ray.direction);this._extensionType===r.ExtensionType.GROUND_RAY&&null!=O&&(G.c1=Math.abs(S-O))}if(!H.intersectClipRay(Y.frustum,G))return this._updateLineSegmentFinite(K);Y=x.getStart(G,Z);O=x.getEnd(G,T);return I.fromPoints(Y,O,K)};X._updateVertexAttributesObject3D=function(O,K){const Y=O.geometries[0].getMutableAttribute(L.VertexAttribute.POSITION)?.data;if(Y){var S=0;for(const ea of this._lineVertices(K))Y[S++]=ea[0],Y[S++]=ea[1],Y[S++]=ea[2];
O.geometryVertexAttrsUpdated(O.geometries[0])}};X._updateVertexAttributesDraped=function(O,K){const Y=O.getMutableAttribute(L.VertexAttribute.POSITION)?.data;if(Y){var S=0;for(const ea of this._lineVertices(K))Y[S++]=ea[0],Y[S++]=ea[1],Y[S++]=M.DRAPED_Z;O.invalidateBoundingInfo()}};X._lineVertices=function*(O){this.extensionType===r.ExtensionType.FADED?(yield I.pointAt(O,-this.fadedExtensions.start,Z),yield I.pointAt(O,0,Z),yield I.pointAt(O,1,Z),yield I.pointAt(O,1+this.fadedExtensions.end,Z)):(yield I.pointAt(O,
0,Z),yield I.pointAt(O,1,Z))};V._createClass(da,[{key:"start",get:function(){return this._start},set:function(O){this._isWorldDown=!1;A.exactEquals(this._start,O)||(A.copy(this._start,O),D.fromPoints(this._start,this._end,this._ray),this._updateGeometry())}},{key:"end",get:function(){return this._end},set:function(O){this._isWorldDown=!1;A.exactEquals(this._end,O)||(A.copy(this._end,O),D.fromPoints(this._start,this._end,this._ray),this._updateGeometry())}},{key:"width",get:function(){return this._width},
set:function(O){O!==this._width&&(this._width=O,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(O){B.exactEquals(O,this._color)||(B.copy(this._color,O),this._updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(O){O!==this._polygonOffset&&(this._polygonOffset=O,this._updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(O){this._writeDepthEnabled!==O&&(this._writeDepthEnabled=
O,this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(O){O!==this._innerWidth&&(this._innerWidth=O,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(O){B.exactEquals(O,this._innerColor)||(B.copy(this._innerColor,O),this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(O){const K=N.isSome(O)!==N.isSome(this._stipplePattern);this._stipplePattern=O;K?this.recreate():
this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(O){if(N.isNone(O)||N.isNone(this._stippleOffColor)||!B.exactEquals(O,this._stippleOffColor))this._stippleOffColor=N.isSome(O)?u.clone(O):null,this._updateMaterial()}},{key:"stipplePreferContinuous",get:function(){return this._stipplePreferContinuous},set:function(O){O!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=O,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},
set:function(O){O!==this._falloff&&(this._falloff=O,this._updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},set:function(O){O!==this._extensionType&&(this._extensionType=O,this.recreateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&N.isSome(this._laserlineStyle)&&this.attached&&!this.isDraped}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(O){this._laserlineStyle=O;this._laserline.attached=this._laserlineAttached;
N.isSome(O)&&(this._laserline.style=O)}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(O){this._laserlineEnabled!==O&&(this._laserlineEnabled=O,this._laserline.attached=this._laserlineAttached)}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(O){O!==this._renderOccluded&&(this._renderOccluded=O,this._updateMaterial())}},{key:"_normalizedRenderOccluded",get:function(){return this.isDraped&&this._renderOccluded===C.RenderOccludedFlag.OccludeAndTransparentStencil?
C.RenderOccludedFlag.OccludeAndTransparent:this._renderOccluded}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},set:function(O){this._fadedExtensions=N.unwrapOr(O,ca);this.recreateGeometry()}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,
hasPolygonOffset:this._polygonOffset,renderOccluded:this._normalizedRenderOccluded,writeDepth:this._writeDepthEnabled}}},{key:"_lineSegment",get:function(){return this._extensionType===r.ExtensionType.FADED?this._updateLineSegmentFinite(ia):this._updateLineSegmentInfinite(this._extensionType,ia)}}]);return da}(J.EngineVisualElement);const G=x.create(),Z=P.create(),T=P.create(),ia=I.create();r.ExtensionType=void 0;(function(ha){ha[ha.LINE=0]="LINE";ha[ha.RAY=1]="RAY";ha[ha.GROUND_RAY=2]="GROUND_RAY";
ha[ha.FADED=3]="FADED"})(r.ExtensionType||(r.ExtensionType={}));J=1/3;const ca={start:J,end:J};r.ExtendedLineVisualElement=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/EngineVisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./DrapedVisualElementResources","./VisualElement","./VisualElementResources"],function(r,V,w,N,A){N=function(P){function B({view:x,isDraped:H}){var I=P.call(this,x)||this;I._isDraped=
!1;I.object3dResources=new A.VisualElementResources(I.createObject3DResourceFactory(x));I.drapedResources=new w.DrapedVisualElementResources(I.createDrapedResourceFactory(x));I.isDraped=H??!1;return I}V._inheritsLoose(B,P);var u=B.prototype;u.createResources=function(){this.object3dResources.attached=!this._isDraped;this.drapedResources.attached=this._isDraped};u.destroyResources=function(){this.object3dResources.attached=!1;this.drapedResources.attached=!1};u.recreate=function(){this.object3dResources.recreate();
this.drapedResources.recreate()};u.recreateGeometry=function(){this.object3dResources.recreateGeometry();this.drapedResources.recreateGeometry()};u.destroy=function(){this.object3dResources.destroy();this.drapedResources.destroy();P.prototype.destroy.call(this)};u.updateVisibility=function(x){this.object3dResources.visible=x;this.drapedResources.visible=x};V._createClass(B,[{key:"isDraped",get:function(){return this._isDraped},set:function(x){x!==this._isDraped&&(this._isDraped=x,this.object3dResources.attached=
this.attached&&!x,this.drapedResources.attached=this.attached&&x)}},{key:"renderGroup",get:function(){return this.drapedResources.renderGroup},set:function(x){this.drapedResources.renderGroup=x}}]);return B}(N.VisualElement);r.EngineVisualElement=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/DrapedVisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/Identifiable ../../../../core/maybe ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../../layers/interfaces ../../webgl-engine/lib/ModelDirtyTypes ../../webgl-engine/lib/UpdatePolicy".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){u=function(){function M(C){this._resourceFactory=C;this._resources=null;this._visible=!0;this._attached=!1;this._renderGroup=I.DrapedRenderGroup.Outline}var Q=M.prototype;Q.destroy=function(){this._destroyResources()};Q.recreate=function(){this.attached&&this._createResources()};Q.recreateGeometry=function(){this._resourceFactory.recreateGeometry?P.isNone(this._resources)||(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),
this._syncGeometriesToRenderer()):this.recreate()};Q._createOrDestroyResources=function(){this._attached?P.isNone(this._resources)&&this._createResources():this._destroyResources()};Q._createResources=function(){this._destroyResources();const C=this._resourceFactory.createResources(),E=new U({view:this._resourceFactory.view,renderGroup:this._renderGroup}),L=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:new U({view:this._resourceFactory.view,renderGroup:this._renderGroup}),
external:C,geometriesAdded:!1};L&&(this._resources.drapeSourceRenderer=L.registerGeometryDrapeSource(E));this._syncGeometriesToRenderer()};Q._destroyResources=function(){if(!P.isNone(this._resources)){this._ensureRenderGeometriesRemoved();var C=this._resourceFactory.view.basemapTerrain?.overlayManager;C&&C.unregisterDrapeSource(this._resources.layerView);this._resourceFactory.destroyResources(this._resources.external);this._resources=null}};Q._syncGeometriesToRenderer=function(){this._visible?this._ensureRenderGeometriesAdded():
this._ensureRenderGeometriesRemoved()};Q._ensureRenderGeometriesRemoved=function(){P.isNone(this._resources)||P.isNone(this._resources.drapeSourceRenderer)||!this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,D.DirtyOperation.UPDATE),this._resources.geometriesAdded=!1)};Q._ensureRenderGeometriesAdded=function(){P.isNone(this._resources)||P.isNone(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,
D.DirtyOperation.UPDATE),this._resources.geometriesAdded=!0)};V._createClass(M,[{key:"resources",get:function(){return P.isSome(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(C){C!==this._visible&&(this._visible=C,this._syncGeometriesToRenderer())}},{key:"attached",get:function(){return this._attached},set:function(C){C!==this._attached&&(this._attached=C,this._createOrDestroyResources())}},{key:"renderGroup",get:function(){return this._renderGroup},
set:function(C){this._renderGroup=C;const E=P.toNullable(this._resources)?.layerView;E&&(E.renderGroup=C)}}]);return M}();let U=function(M){function Q(C){C=M.call(this,C)||this;C.drapeSourceType=I.DrapeSourceType.Features;C.updatePolicy=J.UpdatePolicy.SYNC;C.renderGroup=I.DrapedRenderGroup.Outline;return C}V._inheritsLoose(Q,M);return Q}(A.IdentifiableMixin(N));w.__decorate([B.property({constructOnly:!0})],U.prototype,"view",void 0);w.__decorate([B.property({readOnly:!0})],U.prototype,"drapeSourceType",
void 0);w.__decorate([B.property()],U.prototype,"renderGroup",void 0);U=w.__decorate([H.subclass("DrapedVisualElementLayerView")],U);r.DrapedVisualElementResources=u;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/reactiveUtils"],function(r,V,w){let N=function(){function A(B){this._resourcesCreated=this._attached=!1;this._visible=!0;
this.view=B;this._handle=w.watch(()=>this.view.ready,u=>{this._resourcesCreated&&(u?this._createResources():this._destroyResources())})}var P=A.prototype;P.applyProps=function(B){let u=!1;for(const x in B)x in this?"attached"===x?u=B[x]:this[x]=B[x]:console.error("Cannot set unknown property",x);this.attached=u};P.destroy=function(){this.attached=!1;this._handle.remove()};P.onAttachedChange=function(B){};P._createResources=function(){this.createResources();this._resourcesCreated=!0;this.updateVisibility(this.visible)};
P._destroyResources=function(){this.destroyResources();this._resourcesCreated=!1};V._createClass(A,[{key:"attached",get:function(){return this._attached},set:function(B){B!==this._attached&&this.view._stage&&((this._attached=B)&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(B))}},{key:"visible",get:function(){return this._visible},set:function(B){B!==this._visible&&(this._visible=B,this.attached&&this.updateVisibility(B))}}]);
return A}();r.VisualElement=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/reactiveUtils ../../webgl-engine/lib/ContentObjectType ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Texture ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),function(r,V,w,N,A,P,B,u,x){let H=
function(){function I(J){this._resourceFactory=J;this._resources=null;this._visible=!0;this._attached=!1}var D=I.prototype;D.destroy=function(){this._destroyResources()};D.recreate=function(){this.attached&&this._createResources()};D.recreateGeometry=function(){if(this._resourceFactory.recreateGeometry){var J=this._resourceFactory.view._stage;if(!w.isNone(this._resources)&&J){var U=this._resources.object;this._resources.external.forEach(M=>{M.type!==A.ContentObjectType.Mesh&&M.type!==A.ContentObjectType.Line&&
M.type!==A.ContentObjectType.Point||J.remove(M)});U.removeAllGeometries();this._resourceFactory.recreateGeometry(this._resources.external,U,this._resources.layer);this._resources.external.forEach(M=>{M.type!==A.ContentObjectType.Mesh&&M.type!==A.ContentObjectType.Line&&M.type!==A.ContentObjectType.Point||J.add(M)})}}else this.recreate()};D._createOrDestroyResources=function(){this._attached?this._resources||this._createResources():this._destroyResources()};D._createResources=function(){this._destroyResources();
var J=this._resourceFactory;const U=J.view,M=U._stage;if(M){var Q=new x.WebGLLayer({pickable:!1,updatePolicy:u.UpdatePolicy.SYNC});M.add(Q);var C=new P.Object3D({castShadow:!1}),E=J.createResources(C,Q);E.forEach(y=>{M.add(y);y instanceof B.Texture&&M.loadImmediate(y)});M.add(C);Q.add(C);var L=J.cameraChanged;J=L?N.watch(()=>U.state.camera,y=>L(y),N.initial):null;this._resources={layer:Q,object:C,external:E,cameraHandle:J};this._syncVisible()}};D._destroyResources=function(){if(!w.isNone(this._resources)){var J=
this._resourceFactory.view._stage;J&&(J.remove(this._resources.object),J.remove(this._resources.layer),this._resources.external.forEach(U=>J.remove(U)));this._resources.object.dispose();this._resources.cameraHandle?.remove();this._resourceFactory.destroyResources(this._resources.external);this._resources=null}};D._syncVisible=function(){w.isNone(this._resources)||(this._resources.object.visible=this._visible)};V._createClass(I,[{key:"object",get:function(){return w.isSome(this._resources)?this._resources.object:
null}},{key:"resources",get:function(){return w.isSome(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(J){J!==this._visible&&(this._visible=J,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(J){J!==this._attached&&(this._attached=J,this._createOrDestroyResources())}}]);return I}();r.VisualElementResources=H;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/LaserlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ./VisualElement ../../support/LaserLineRenderer ../../../../chunks/Laserlines.glsl".split(" "),
function(r,V,w,N,A,P,B,u,x){B=function(I){function D(U){var M=I.call(this,U.view)||this;M._angleCutoff=x.defaultAngleCutoff;M._style={};M._heightManifoldTarget=A.create();M._heightManifoldEnabled=!1;M._intersectsLine=P.create();M._intersectsLineEnabled=!1;M._intersectsLineInfinite=!1;M._lineVerticalPlaneSegment=null;M._pathVerticalPlaneBuffers=null;M._pointDistanceLine=null;M.applyProps(U);return M}V._inheritsLoose(D,I);var J=D.prototype;J.createResources=function(){this._ensureRenderer()};J.destroyResources=
function(){this._disposeRenderer()};J.updateVisibility=function(){this._syncRenderer();this._syncHeightManifold();this._syncIntersectsLine();this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance()};J._syncRenderer=function(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||w.isSome(this._pointDistanceLine)||w.isSome(this._pathVerticalPlaneBuffers))?this._ensureRenderer():this._disposeRenderer()};J._ensureRenderer=function(){w.isSome(this._renderer)||
(this._renderer=new u.LaserLineRenderer({renderCoordsHelper:this.view.renderCoordsHelper},{contrastControlEnabled:!0}),this._renderer.viewingMode=this.view.state.viewingMode,this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this._renderer.renderSlots,this._renderer))};J._syncStyle=function(){w.isNone(this._renderer)||
(this._renderer.setParameters(this._style),null!=this._style.intersectsLineRadius&&(this._renderer.intersectsLineRadius=this._style.intersectsLineRadius))};J._syncAngleCutoff=function(){w.isNone(this._renderer)||this._renderer.setParameters({angleCutoff:this._angleCutoff})};J._syncHeightManifold=function(){w.isNone(this._renderer)||(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))};
J._syncIntersectsLine=function(){w.isNone(this._renderer)||(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))};J._syncIntersectsLineInfinite=function(){w.isNone(this._renderer)||(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)};J._syncPathVerticalPlane=function(){w.isNone(this._renderer)||(this._renderer.pathVerticalPlaneEnabled=w.isSome(this._pathVerticalPlaneBuffers)&&
this.visible,w.isSome(this._pathVerticalPlaneBuffers)&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};J._syncLineVerticalPlane=function(){w.isNone(this._renderer)||(this._renderer.lineVerticalPlaneEnabled=w.isSome(this._lineVerticalPlaneSegment)&&this.visible,w.isSome(this._lineVerticalPlaneSegment)&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};J._syncPointDistance=function(){if(!w.isNone(this._renderer)){var U=this._pointDistanceLine,M=w.isSome(U);
this._renderer.pointDistanceEnabled=M&&null!=U.target&&this.visible;M&&(this._renderer.pointDistanceOrigin=U.origin,null!=U.target&&(this._renderer.pointDistanceTarget=U.target))}};J._disposeRenderer=function(){w.isSome(this._renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this._renderer),this._renderer=null)};V._createClass(D,[{key:"testData",get:function(){return this._renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(U){this._angleCutoff!==U&&
(this._angleCutoff=U,this._syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(U){this._style=U;this._syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(U){w.isSome(U)?(N.copy(this._heightManifoldTarget,U),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this._syncRenderer();this._syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(U){if(w.isNone(U))this.intersectsLine=
null;else{var M=this.view.renderCoordsHelper.worldUpAtPosition(U,H);this.intersectsLine=P.fromValues(U,M);this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(U){w.isSome(U)?(P.copy(U,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this._syncIntersectsLine();this._syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(U){this._intersectsLineInfinite=
U;this._syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(U){this._lineVerticalPlaneSegment=w.isSome(U)?P.copy(U):null;this._syncLineVerticalPlane();this._syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(U){this._pathVerticalPlaneBuffers=U;this._syncPathVerticalPlane();this._syncLineVerticalPlane();this._syncPointDistance();this._syncRenderer()}},{key:"pointDistanceLine",
get:function(){return this._pointDistanceLine},set:function(U){this._pointDistanceLine=w.isSome(U)?{origin:A.clone(U.origin),target:U.target?A.clone(U.target):null}:null;this._syncPointDistance();this._syncRenderer()}}]);return D}(B.VisualElement);const H=A.create();r.LaserlineVisualElement=B;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/LaserLineRenderer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3 ../../../geometry/support/clipRay ../../../geometry/support/frustum ../../../geometry/support/lineSegment ../../../geometry/support/ray ../../ViewingMode ./LaserlinePathData ../webgl-engine/lib/glUtil3D ../webgl-engine/lib/RenderSlot ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/LaserlinePathTechnique ../webgl-engine/shaders/LaserlinePathTechniqueConfiguration ../webgl-engine/shaders/LaserlineTechnique ../webgl-engine/shaders/LaserlineTechniqueConfiguration ../../webgl/enums".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E){let L=function(){function G(T,ia={contrastControlEnabled:!1}){this._config=ia;this._technique=null;this._intersectsLineInfinite=this._intersectsLineEnabled=this._lineVerticalPlaneEnabled=this._pointDistanceEnabled=this._heightManifoldEnabled=!1;this._viewingMode=x.ViewingMode.Local;this._pathVerticalPlaneEnabled=!1;this._pathTechnique=this._pathVerticalPlaneData=null;this.canRender=!0;this._passParameters=J.copyParameters(T,new Q.LaserlinePassParameters)}
var Z=G.prototype;Z.setParameters=function(T){J.updateParameters(this._passParameters,T)&&this._requestRender()};Z.initializeRenderContext=function(T){this._context=T;this._quadVAO=I.createQuadVAO(T.renderContext.rctx);this._techniqueRepository=T.techniqueRepository;this._techniqueConfig=new C.LaserlineTechniqueConfiguration;T=new M.LaserlinePathTechniqueConfiguration;T.contrastControlEnabled=this._config.contrastControlEnabled;this._pathTechnique=this._techniqueRepository.acquire(U.LaserlinePathTechnique,
T)};Z.uninitializeRenderContext=function(){this._quadVAO=w.disposeMaybe(this._quadVAO);this._technique=w.releaseMaybe(this._technique);this._pathVerticalPlaneData=w.disposeMaybe(this._pathVerticalPlaneData);this._pathTechnique=w.releaseMaybe(this._pathTechnique)};Z.prepareTechnique=function(){return this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled?(this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled,this._techniqueConfig.lineVerticalPlaneEnabled=
this.lineVerticalPlaneEnabled,this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled,this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled,this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled,this._techniqueConfig.spherical=this._viewingMode===x.ViewingMode.Global,this._technique=this._techniqueRepository.releaseAndAcquire(Q.LaserlineTechnique,this._techniqueConfig,this._technique)):this._pathTechnique};Z.render=function(T,ia){(this.heightManifoldEnabled||
this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(T,ia);this.pathVerticalPlaneEnabled&&this._renderPath(T)};Z._renderUnified=function(T,ia){const ca=T.rctx;this._updatePassParameters(T);ca.bindTechnique(ia,this._passParameters,T.bindParameters);ca.bindVAO(this._quadVAO);ca.drawArrays(E.PrimitiveType.TRIANGLE_STRIP,0,4)};Z._renderPath=function(T){w.isNone(this._pathVerticalPlaneData)||w.isNone(this._pathTechnique)||(T.rctx.bindTechnique(this._pathTechnique,
{...this._passParameters,origin:this._pathVerticalPlaneData.origin},T.bindParameters),this._pathVerticalPlaneData.draw(T.rctx))};Z._updatePassParameters=function(T){this._intersectsLineEnabled&&(T=T.bindParameters.camera,this._intersectsLineInfinite?(A.fromRay(u.wrap(this._passParameters.intersectsLineSegment.origin,this._passParameters.intersectsLineSegment.vector),y),y.c0=-Number.MAX_VALUE,P.intersectClipRay(T.frustum,y)&&(A.getStart(y,this._passParameters.lineStartWorld),A.getEnd(y,this._passParameters.lineEndWorld))):
(N.copy(this._passParameters.lineStartWorld,this._passParameters.intersectsLineSegment.origin),N.add(this._passParameters.lineEndWorld,this._passParameters.intersectsLineSegment.origin,this._passParameters.intersectsLineSegment.vector)))};Z._requestRender=function(){this._context&&this._context.requestRender()};V._createClass(G,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?D.RenderSlot.LASERLINES_CONTRAST_CONTROL:D.RenderSlot.LASERLINES]}},{key:"needsLinearDepth",get:function(){return!0}},
{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(T){this._heightManifoldEnabled!==T&&(this._heightManifoldEnabled=T,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._passParameters.heightManifoldTarget},set:function(T){N.copy(this._passParameters.heightManifoldTarget,T);this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(T){T!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=
T,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._passParameters.pointDistanceTarget},set:function(T){N.copy(this._passParameters.pointDistanceTarget,T);this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._passParameters.pointDistanceOrigin},set:function(T){N.copy(this._passParameters.pointDistanceOrigin,T);this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(T){T!==this._lineVerticalPlaneEnabled&&
(this._lineVerticalPlaneEnabled=T,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._passParameters.lineVerticalPlaneSegment},set:function(T){B.copy(T,this._passParameters.lineVerticalPlaneSegment);this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(T){T!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=T,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._passParameters.intersectsLineSegment},
set:function(T){B.copy(T,this._passParameters.intersectsLineSegment);this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._passParameters.intersectsLineRadius},set:function(T){T!==this._passParameters.intersectsLineRadius&&(this._passParameters.intersectsLineRadius=T,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(T){T!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=T,this._requestRender())}},
{key:"viewingMode",get:function(){return this._viewingMode},set:function(T){T!==this._viewingMode&&(this._viewingMode=T,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(T){T!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=T,w.isSome(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(T){w.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new H.LaserlinePathData(this._passParameters.renderCoordsHelper));
this._pathVerticalPlaneData.vertices=T;this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(T){w.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new H.LaserlinePathData(this._passParameters.renderCoordsHelper));this._pathVerticalPlaneData.buffers=T;this.pathVerticalPlaneEnabled&&this._requestRender()}}]);return G}();const y=A.create();r.LaserLineRenderer=L;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/LaserlinePathData":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ./buffer/glUtil ./buffer/InterleavedLayout ../webgl-engine/lib/DoubleArray ../webgl-engine/lib/VertexArrayObject ../webgl-engine/lib/VertexAttribute ../webgl-engine/shaders/LaserlinePathTechnique ../../webgl/BufferObject ../../webgl/enums".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){let U=function(){function E(y){this._renderCoordsHelper=y;this._buffers=null;this._origin=A.create();this._dirty=!1;this._count=0;this._vao=null}var L=E.prototype;L.draw=function(y){const G=this._ensureVAO(y);w.isSome(G)&&(y.bindVAO(G),y.drawArrays(J.PrimitiveType.TRIANGLES,0,this._count))};L.dispose=function(){w.isSome(this._vao)&&this._vao.dispose()};L._ensureVAO=function(y){if(w.isNone(this._buffers))return null;w.isNone(this._vao)&&(this._vao=this._createVAO(y,
this._buffers));this._ensureVertexData(this._vao,this._buffers);return this._vao};L._createVAO=function(y,G){G=this._createDataBuffer(G);this._dirty=!1;return new x.VertexArrayObject(y,I.attributeLocations,{data:P.glLayout(C)},{data:D.BufferObject.createVertex(y,J.Usage.STATIC_DRAW,G)})};L._ensureVertexData=function(y,G){this._dirty&&(G=this._createDataBuffer(G),y.vertexBuffers.data?.setData(G),this._dirty=!1)};L._numberOfRenderVertices=function(y){return 6*(y.length/3-1)};L._createDataBuffer=function(y){var G=
y.reduce((da,X)=>da+this._numberOfRenderVertices(X),0);this._count=G;G=C.createBuffer(G);const Z=this._origin;let T=0,ia=0;for(const da of y){for(y=0;y<da.length;y+=3){var ca=N.set(Q,da[y+0],da[y+1],da[y+2]);0===y?ia=this._renderCoordsHelper.getAltitude(ca):this._renderCoordsHelper.setAltitude(ca,ia);var ha=this._renderCoordsHelper.worldUpAtPosition(ca,M);const X=T+2*y;ca=N.subtract(Q,ca,Z);if(y<da.length-3){G.up.setVec(X,ha);G.up.setVec(X+3,ha);G.up.setVec(X+5,ha);for(let O=0;6>O;O++)G.start.setVec(X+
O,ca);G.extrude.setValues(X+0,0,-1);G.extrude.setValues(X+1,1,-1);G.extrude.setValues(X+2,1,1);G.extrude.setValues(X+3,0,-1);G.extrude.setValues(X+4,1,1);G.extrude.setValues(X+5,0,1)}if(0<y)for(G.up.setVec(X-2,ha),G.up.setVec(X-4,ha),G.up.setVec(X-5,ha),ha=-6;0>ha;ha++)G.end.setVec(X+ha,ca)}T+=this._numberOfRenderVertices(da)}return G.buffer};V._createClass(E,[{key:"vertices",set:function(y){const G=u.newDoubleArray(3*y.length);let Z=0;for(const T of y)G[Z++]=T[0],G[Z++]=T[1],G[Z++]=T[2];this.buffers=
[G]}},{key:"buffers",set:function(y){this._buffers=y;if(0<this._buffers.length){y=this._buffers[0];const G=3*Math.floor(y.length/3/2);N.set(this._origin,y[G+0],y[G+1],y[G+2])}else N.set(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}}]);return E}();const M=A.create(),Q=A.create(),C=B.newLayout().vec3f(H.VertexAttribute.START).vec3f(H.VertexAttribute.END).vec3f(H.VertexAttribute.UP).vec2f(H.VertexAttribute.EXTRUDE);r.LaserlinePathData=U;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/Program ../lib/VertexAttribute ../../../../chunks/LaserlinePath.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(r,V,w,N,A,P,B,u,x,H){A=function(D){function J(){return D.apply(this,arguments)||this}w._inheritsLoose(J,
D);var U=J.prototype;U.initializeProgram=function(M){return new P.Program(M.rctx,J.shader.get().build(this.configuration),I)};U.initializePipeline=function(){return H.makePipelineState({blending:H.simpleBlendingParams(x.BlendFactor.ONE,x.BlendFactor.ONE_MINUS_SRC_ALPHA),colorWrite:H.defaultColorWriteParams})};return J}(A.ShaderTechnique);A.shader=new N.ReloadableShaderModule(u.LaserlinePath,()=>new Promise((D,J)=>r(["./LaserlinePath.glsl"],D,J)));const I=new Map([[B.VertexAttribute.START,0],[B.VertexAttribute.END,
1],[B.VertexAttribute.UP,2],[B.VertexAttribute.EXTRUDE,3]]);V.LaserlinePathTechnique=A;V.attributeLocations=I;Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/LaserlinePath.glsl":function(){define("exports ./mat4 ./mat4f64 ./vec2 ./vec2f64 ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D){function J(Q){const C=new I.ShaderBuilder;C.include(P.Laserline,Q);const {vertex:E,fragment:L}=C;E.uniforms.add([new H.Matrix4PassUniform("modelView",(y,G)=>V.translate(M,G.camera.viewMatrix,y.origin)),new H.Matrix4PassUniform("proj",(y,G)=>G.camera.projectionMatrix),new u.FloatPassUniform("glowWidth",(y,G)=>y.glowWidth*G.camera.pixelRatio),new B.Float2PassUniform("pixelToNDC",(y,G)=>N.set(U,2/G.camera.fullViewport[2],2/G.camera.fullViewport[3]))]);C.attributes.add(D.VertexAttribute.START,
"vec3");C.attributes.add(D.VertexAttribute.END,"vec3");C.attributes.add(D.VertexAttribute.UP,"vec3");C.attributes.add(D.VertexAttribute.EXTRUDE,"vec2");C.varyings.add("uv","vec2");C.varyings.add("vViewStart","vec3");C.varyings.add("vViewEnd","vec3");C.varyings.add("vViewPlane","vec4");E.code.add(x.glsl`void main() {
vec3 pos = mix(start, end, extrude.x);
vec4 viewPos = modelView * vec4(pos, 1);
vec4 projPos = proj * viewPos;
vec2 ndcPos = projPos.xy / projPos.w;
vec3 viewUp = (modelView * vec4(extrude.y * up, 0)).xyz;
vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);
vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);
vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
ndcPos += length(lxy) * projExtrudeDir;
vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
vec3 viewPlaneNormal = (modelView * vec4(worldPlaneNormal, 0)).xyz;
vViewStart = (modelView * vec4(start, 1)).xyz;
vViewEnd = (modelView * vec4(end, 1)).xyz;
vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));
float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
ndcPos.x += xPaddingPixels * pixelToNDC.x;
uv = ndcPos * 0.5 + 0.5;
gl_Position = vec4(ndcPos, 0, 1);
}`);L.uniforms.add(new u.FloatPassUniform("perScreenPixelRatio",(y,G)=>G.camera.perScreenPixelRatio));L.code.add(x.glsl`float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
vec3 origin = mix(start, end, 0.5);
vec3 basis = end - origin;
vec3 posAtOrigin = pos - origin;
float x = dot(normalize(basis), posAtOrigin);
float y = dot(plane.xyz, posAtOrigin);
float dx = max(abs(x) - length(basis), 0.0);
float dy = y;
float dist = length(vec2(dx, dy));
float width = fwidth(y);
float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
float pixelDist = dist / min(width, maxPixelDistance);
return abs(pixelDist);
}
void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);
vec4 color = laserlineProfile(distance);
float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));
gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
}`);return C}const U=A.create(),M=w.create();w=Object.freeze(Object.defineProperty({__proto__:null,build:J},Symbol.toStringTag,{value:"Module"}));r.LaserlinePath=w;r.build=J})},"esri/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl":function(){define("exports ../../../../../core/maybe ./output/ReadLinearDepth.glsl ./util/CameraSpace.glsl ../shaderModules/Float2PassUniform ../shaderModules/Float3PassUniform ../shaderModules/FloatPassUniform ../shaderModules/interfaces ../shaderModules/Texture2DPassUniform".split(" "),
function(r,V,w,N,A,P,B,u,x){r.Laserline=function(H,I){H.extensions.add("GL_OES_standard_derivatives");const D=H.fragment;D.include(w.ReadLinearDepth);H.include(N.CameraSpace);D.uniforms.add([new B.FloatPassUniform("globalAlpha",J=>J.globalAlpha),new P.Float3PassUniform("glowColor",J=>J.glowColor),new B.FloatPassUniform("glowWidth",(J,U)=>J.glowWidth*U.camera.pixelRatio),new B.FloatPassUniform("glowFalloff",J=>J.glowFalloff),new P.Float3PassUniform("innerColor",J=>J.innerColor),new B.FloatPassUniform("innerWidth",
(J,U)=>J.innerWidth*U.camera.pixelRatio),new x.Texture2DPassUniform("depthMap",(J,U)=>U.linearDepthTexture),new A.Float2PassUniform("nearFar",(J,U)=>U.camera.nearFar),new x.Texture2DPassUniform("frameColor",(J,U)=>U.mainColorTexture)]);D.code.add(u.glsl`vec4 blendPremultiplied(vec4 source, vec4 dest) {
float oneMinusSourceAlpha = 1.0 - source.a;
return vec4(
source.rgb + dest.rgb * oneMinusSourceAlpha,
source.a + dest.a * oneMinusSourceAlpha
);
}`);D.code.add(u.glsl`vec4 premultipliedColor(vec3 rgb, float alpha) {
return vec4(rgb * alpha, alpha);
}`);D.code.add(u.glsl`vec4 laserlineProfile(float dist) {
if (dist > glowWidth) {
return vec4(0.0);
}
float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);
return blendPremultiplied(
premultipliedColor(innerColor, innerAlpha),
premultipliedColor(glowColor, glowAlpha)
);
}`);D.code.add(u.glsl`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
float depth = linearDepthFromTexture(depthMap, uv, nearFar);
if (-depth == nearFar[0]) {
return false;
}
pos = reconstructPosition(gl_FragCoord.xy, depth);
normal = normalize(cross(dFdx(pos), dFdy(pos)));
float ddepth = fwidth(depth);
depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);
return true;
}`);I.contrastControlEnabled?(D.uniforms.add(new B.FloatPassUniform("globalAlphaContrastBoost",J=>V.isSome(J.globalAlphaContrastBoost)?J.globalAlphaContrastBoost:1)),D.code.add(u.glsl`float rgbToLuminance(vec3 color) {
return dot(vec3(0.2126, 0.7152, 0.0722), color);
}
vec4 laserlineOutput(vec4 color) {
float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);
float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);
return color * alpha;
}`)):D.code.add(u.glsl`vec4 laserlineOutput(vec4 color) {
return color * globalAlpha;
}`)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechniqueConfiguration":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ShaderTechniqueConfiguration"],function(r,V,w,N){let A=function(P){function B(){var u=P.apply(this,arguments)||this;u.contrastControlEnabled=!1;return u}V._inheritsLoose(B,P);return B}(N.ShaderTechniqueConfiguration);w.__decorate([N.parameter()],
A.prototype,"contrastControlEnabled",void 0);r.LaserlinePathTechniqueConfiguration=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/LaserlineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../geometry/support/lineSegment ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/DefaultVertexAttributeLocations ../lib/Program ../../../../chunks/Laserlines.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U){B=function(M){function Q(){var C=M.apply(this,arguments)||this;C.innerColor=A.fromValues(1,1,1);C.innerWidth=1;C.glowColor=A.fromValues(1,.5,0);C.glowWidth=8;C.glowFalloff=8;C.globalAlpha=.75;C.globalAlphaContrastBoost=2;C.angleCutoff=N.deg2rad(6);C.pointDistanceOrigin=A.create();C.pointDistanceTarget=A.create();C.lineVerticalPlaneSegment=P.create();C.intersectsLineSegment=P.create();C.intersectsLineRadius=3;C.heightManifoldTarget=A.create();C.lineStartWorld=
A.create();C.lineEndWorld=A.create();return C}w._inheritsLoose(Q,M);return Q}(B.NoParameters);x=function(M){function Q(){return M.apply(this,arguments)||this}w._inheritsLoose(Q,M);var C=Q.prototype;C.initializeProgram=function(E){return new I.Program(E.rctx,Q.shader.get().build(this.configuration),H.Default3D)};C.initializePipeline=function(){return U.makePipelineState({blending:U.simpleBlendingParams(J.BlendFactor.ONE,J.BlendFactor.ONE_MINUS_SRC_ALPHA),colorWrite:U.defaultColorWriteParams})};return Q}(x.ShaderTechnique);
x.shader=new u.ReloadableShaderModule(D.LaserlinesShader,()=>new Promise((M,Q)=>r(["./Laserlines.glsl"],M,Q)));V.LaserlinePassParameters=B;V.LaserlineTechnique=x;Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/Laserlines.glsl":function(){define("exports ../core/mathUtils ./vec2 ./vec2f64 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/lineSegment ../geometry/support/plane ./sphere ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L){function y(S){const ea=new L.ShaderBuilder;ea.extensions.add("GL_OES_standard_derivatives");ea.include(J.ScreenSpacePass);ea.include(D.Laserline,S);const ja=ea.fragment;if(S.lineVerticalPlaneEnabled||S.heightManifoldEnabled)ja.uniforms.add(new C.FloatPassUniform("maxPixelDistance",(oa,qa)=>S.heightManifoldEnabled?2*qa.camera.computeScreenPixelSizeAt(oa.heightManifoldTarget):2*qa.camera.computeScreenPixelSizeAt(oa.lineVerticalPlaneSegment.origin))),ja.code.add(E.glsl`float planeDistancePixels(vec4 plane, vec3 pos) {
float dist = dot(plane.xyz, pos) + plane.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`),S.spherical?(ja.uniforms.add([new Q.Float4PassUniform("heightManifoldOrigin",(oa,qa)=>{A.transformMat4(ca,oa.heightManifoldTarget,qa.camera.viewMatrix);A.transformMat4(X,[0,0,0],qa.camera.viewMatrix);A.subtract(X,X,ca);A.normalize(ha,X);ha[3]=A.length(X);return ha}),new M.Float3PassUniform("globalOrigin",(oa,qa)=>A.transformMat4(ca,[0,0,0],qa.camera.viewMatrix)),new C.FloatPassUniform("cosSphericalAngleThreshold",(oa,qa)=>1-Math.max(2,A.distance(qa.camera.eye,oa.heightManifoldTarget)*qa.camera.perRenderPixelRatio)/
A.length(oa.heightManifoldTarget))]),ja.code.add(E.glsl`float globeDistancePixels(float posInGlobalOriginLength) {
float dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}
float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
vec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);
float cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);
vec3 posInGlobalOrigin = globalOrigin - pos;
float posInGlobalOriginLength = length(posInGlobalOrigin);
float sphericalDistance = globeDistancePixels(posInGlobalOriginLength);
float planarDistance = planeDistancePixels(heightPlane, pos);
return cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;
}`)):ja.code.add(E.glsl`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
return planeDistancePixels(heightPlane, pos);
}`);S.pointDistanceEnabled&&(ja.uniforms.add(new C.FloatPassUniform("maxPixelDistance",(oa,qa)=>2*qa.camera.computeScreenPixelSizeAt(oa.pointDistanceTarget))),ja.code.add(E.glsl`float sphereDistancePixels(vec4 sphere, vec3 pos) {
float dist = distance(sphere.xyz, pos) - sphere.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`));S.intersectsLineEnabled&&(ja.uniforms.add(new C.FloatPassUniform("perScreenPixelRatio",(oa,qa)=>qa.camera.perScreenPixelRatio)),ja.code.add(E.glsl`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
return abs(dist) - radius;
}`));(S.lineVerticalPlaneEnabled||S.intersectsLineEnabled)&&ja.code.add(E.glsl`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
vec3 dir = end - start;
float t2 = dot(dir, pos - start);
float l2 = dot(dir, dir);
return t2 >= 0.0 && t2 <= l2;
}`);ja.code.add(E.glsl`void main() {
vec3 pos;
vec3 normal;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
discard;
}
vec4 color = vec4(0, 0, 0, 0);`);if(S.heightManifoldEnabled){ja.uniforms.add([new U.Float2PassUniform("angleCutoff",qa=>G(qa)),new Q.Float4PassUniform("heightPlane",(qa,ua)=>Z(qa.heightManifoldTarget,qa.renderCoordsHelper.worldUpAtPosition(qa.heightManifoldTarget,ca),ua.camera.viewMatrix))]);const oa=S.spherical?E.glsl`normalize(globalOrigin - pos)`:E.glsl`heightPlane.xyz`;ja.code.add(E.glsl`
    {
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, ${oa})));
      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);
    }
    `)}S.pointDistanceEnabled&&(ja.uniforms.add([new U.Float2PassUniform("angleCutoff",oa=>G(oa)),new Q.Float4PassUniform("pointDistanceSphere",(oa,qa)=>{A.transformMat4(Y,oa.pointDistanceOrigin,qa.camera.viewMatrix);Y[3]=A.distance(oa.pointDistanceOrigin,oa.pointDistanceTarget);return Y})]),ja.code.add(E.glsl`{
float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));
color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
}`));S.lineVerticalPlaneEnabled&&(ja.uniforms.add([new U.Float2PassUniform("angleCutoff",oa=>G(oa)),new Q.Float4PassUniform("lineVerticalPlane",(oa,qa)=>{var ua=x.pointAt(oa.lineVerticalPlaneSegment,.5,ca);ua=oa.renderCoordsHelper.worldUpAtPosition(ua,da);const va=A.normalize(X,oa.lineVerticalPlaneSegment.vector);ua=A.cross(ha,ua,va);A.normalize(ua,ua);return Z(oa.lineVerticalPlaneSegment.origin,ua,qa.camera.viewMatrix)}),new M.Float3PassUniform("lineVerticalStart",(oa,qa)=>{const ua=A.copy(ca,oa.lineVerticalPlaneSegment.origin);
oa.renderCoordsHelper.setAltitude(ua,0);return A.transformMat4(ua,ua,qa.camera.viewMatrix)}),new M.Float3PassUniform("lineVerticalEnd",(oa,qa)=>{const ua=A.add(ca,oa.lineVerticalPlaneSegment.origin,oa.lineVerticalPlaneSegment.vector);oa.renderCoordsHelper.setAltitude(ua,0);return A.transformMat4(ua,ua,qa.camera.viewMatrix)})]),ja.code.add(E.glsl`{
if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);
vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));
color = max(color, lineVerticalColor * lineVerticalAlpha);
}
}`));S.intersectsLineEnabled&&(ja.uniforms.add([new U.Float2PassUniform("angleCutoff",oa=>G(oa)),new M.Float3PassUniform("intersectsLineStart",(oa,qa)=>A.transformMat4(ca,oa.lineStartWorld,qa.camera.viewMatrix)),new M.Float3PassUniform("intersectsLineEnd",(oa,qa)=>A.transformMat4(ca,oa.lineEndWorld,qa.camera.viewMatrix)),new M.Float3PassUniform("intersectsLineDirection",(oa,qa)=>{A.copy(ha,oa.intersectsLineSegment.vector);ha[3]=0;return A.normalize(ca,B.transformMat4(ha,ha,qa.camera.viewMatrix))}),
new C.FloatPassUniform("intersectsLineRadius",oa=>oa.intersectsLineRadius)]),ja.code.add(E.glsl`{
if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));
color = max(color, intersectsLineColor * intersectsLineAlpha);
}
}`));ja.code.add(E.glsl`gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);
}`);return ea}function G(S){return w.set(ia,Math.cos(S.angleCutoff),Math.cos(Math.max(0,S.angleCutoff-V.deg2rad(2))))}function Z(S,ea,ja){A.transformMat4(O,S,ja);A.copy(ha,ea);ha[3]=0;B.transformMat4(ha,ha,ja);return H.fromPositionAndNormal(O,ha,K)}const T=V.deg2rad(6),ia=N.create(),ca=P.create(),ha=u.create(),da=P.create(),X=P.create(),O=P.create(),K=H.create(),Y=I.create();N=Object.freeze(Object.defineProperty({__proto__:null,build:y,defaultAngleCutoff:T},Symbol.toStringTag,{value:"Module"}));r.LaserlinesShader=
N;r.build=y;r.defaultAngleCutoff=T})},"esri/views/3d/webgl-engine/shaders/LaserlineTechniqueConfiguration":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ShaderTechniqueConfiguration","./LaserlinePathTechniqueConfiguration"],function(r,V,w,N,A){A=function(P){function B(){var u=P.apply(this,arguments)||this;u.heightManifoldEnabled=!1;u.pointDistanceEnabled=!1;u.lineVerticalPlaneEnabled=!1;u.intersectsLineEnabled=!1;
u.spherical=!1;return u}V._inheritsLoose(B,P);return B}(A.LaserlinePathTechniqueConfiguration);w.__decorate([N.parameter()],A.prototype,"heightManifoldEnabled",void 0);w.__decorate([N.parameter()],A.prototype,"pointDistanceEnabled",void 0);w.__decorate([N.parameter()],A.prototype,"lineVerticalPlaneEnabled",void 0);w.__decorate([N.parameter()],A.prototype,"intersectsLineEnabled",void 0);w.__decorate([N.parameter()],A.prototype,"spherical",void 0);r.LaserlineTechniqueConfiguration=A;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/ParallelLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../layers/graphics/dehydratedFeatures ./EngineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L){J=function(da){function X(K){var Y=da.call(this,K)||this;Y._location=x.create();Y._direction=x.fromValues(1,0,0);Y._width=1;Y._offset=1;Y._length=18;Y._color=I.fromValues(1,0,1,1);Y._renderOccluded=Q.RenderOccludedFlag.OccludeAndTransparent;Y.applyProps(K);return Y}V._inheritsLoose(X,da);var O=X.prototype;O.createObject3DResourceFactory=function(K){return{view:K,createResources:Y=>this._createObject3DResources(Y),destroyResources:Y=>this._destroyObject3DResources(Y),
recreateGeometry:(Y,S)=>this._recreateObject3DGeometry(Y,S),cameraChanged:()=>this._updateGeometry()}};O.createDrapedResourceFactory=function(K){return{view:K,createResources:()=>this._createDrapedResources(),destroyResources:Y=>this._destroyDrapedResources(Y),recreateGeometry:Y=>this._recreateDrapedGeometry(Y)}};O.setDirectionFromPoints=function(K,Y){u.normalize(this._direction,u.subtract(this._direction,Y,K));this._updateGeometry()};O._createObject3DResources=function(K){const Y=new L.RibbonLineMaterial(this.materialParameters),
S=[];this._createObject3DGeometry(Y,K,S);return{material:Y,geometries:S,forEach:ea=>{ea(Y);S.forEach(ea)}}};O._destroyObject3DResources=function(K){K.geometries.length=0;K.material.dispose()};O._recreateObject3DGeometry=function(K,Y){K.geometries.length=0;this._createObject3DGeometry(K.material,Y,K.geometries)};O._createObject3DGeometry=function(K,Y,S){const [ea,ja]=this._createGeometries(K);Y.addGeometry(ea);Y.addGeometry(ja);S.push(ea);S.push(ja);this._updateVerticesObject3D(Y)};O._createDrapedResources=
function(){const K=new L.RibbonLineMaterial(this.materialParameters),Y=N.watch(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()});return{material:K,geometries:this._createDrapedGeometry(K),pixelRatioHandle:Y}};O._destroyDrapedResources=function(K){K.pixelRatioHandle.remove();K.geometries=[];K.material.dispose()};O._recreateDrapedGeometry=function(K){K.geometries=this._createDrapedGeometry(K.material)};O._createDrapedGeometry=function(K){K=this._createGeometries(K);
this._updateVerticesDraped(K);K=K.map(Y=>new C.RenderGeometry(Y,{boundingInfo:Y.boundingInfo}));for(const Y of K)Y.computeBoundingSphere(Y.transformation,Y.boundingSphere);return K};O._createGeometries=function(K){return[M.createPolylineGeometry(K,[x.create(),x.create()]),M.createPolylineGeometry(K,[x.create(),x.create()])]};O._updateMaterial=function(){const {materialParameters:K}=this;w.toNullable(this.object3dResources.resources)?.material.setParameters(K);w.toNullable(this.drapedResources.resources)?.material.setParameters(K)};
O._updateGeometry=function(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const K=w.toNullable(this.object3dResources.object);K&&this._updateVerticesObject3D(K)}};O._updateVerticesObject3D=function(K){const Y=this.view.state.camera;Y.projectToScreen(this.location,ia);u.add(y,this.location,this.direction);Y.projectToScreen(y,ca);P.normalize(ca,P.subtract(ca,ca,ia));this._updateVertexAttributesObject3D(Y,K,0,ia,ca,1);this._updateVertexAttributesObject3D(Y,K,1,ia,ca,-1)};O._updateVertexAttributesObject3D=
function(K,Y,S,ea,ja,oa){S=Y.geometries[S];const qa=S.getMutableAttribute(E.VertexAttribute.POSITION)?.data;if(qa){var {start:ua,end:va}=this._computeStartEnd(ja,ea,oa,this.offset,this.width,this.length);K.unprojectFromScreen(A.castScreenPointArray(ua),y);qa[0]=y[0];qa[1]=y[1];qa[2]=y[2];K.unprojectFromScreen(A.castScreenPointArray(va),y);qa[3]=y[0];qa[4]=y[1];qa[5]=y[2];Y.geometryVertexAttrsUpdated(S)}};O._updateVerticesDraped=function(K){const {view:{basemapTerrain:{overlayManager:Y},state:{contentPixelRatio:S}}}=
this,{location:ea,width:ja,length:oa,offset:qa}=this;var ua=ha;ua.spatialReference=w.unwrap(Y.renderer.spatialReference);ua.x=ea[0];ua.y=ea[1];var va=Y.overlayPixelSizeInMapUnits(ua)*S;ua=ja*va;const Ja=oa*va;va*=qa;this._updateVertexAttributesDraped(K[0],ua,Ja,va,-1);this._updateVertexAttributesDraped(K[1],ua,Ja,va,1)};O._updateVertexAttributesDraped=function(K,Y,S,ea,ja){const oa=K.getMutableAttribute(E.VertexAttribute.POSITION)?.data;if(oa){var {location:qa,direction:ua}=this,{start:va,end:Ja}=
this._computeStartEnd(ua,qa,ja,ea,Y,S);oa[0]=va[0];oa[1]=va[1];oa[2]=U.DRAPED_Z;oa[3]=Ja[0];oa[4]=Ja[1];oa[5]=U.DRAPED_Z;K.invalidateBoundingInfo()}};O._computeStartEnd=function(K,Y,S,ea,ja,oa){S=P.scale(G,P.set(G,K[1]*S,K[0]*-S),ea+ja/2);Y=P.add(Z,P.add(Z,P.add(Z,Y,P.scale(Z,K,oa/2)),S),S);K=P.add(T,Y,P.scale(T,K,-oa));return{start:Y,end:K}};V._createClass(X,[{key:"location",get:function(){return this._location},set:function(K){u.exactEquals(this._location,K)||(u.copy(this._location,K),this._updateGeometry())}},
{key:"direction",get:function(){return this._direction},set:function(K){u.exactEquals(this._direction,K)||(u.copy(this._direction,K),this._updateGeometry())}},{key:"width",get:function(){return this._width},set:function(K){K!==this._width&&(this._width=K,this._updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(K){K!==this._offset&&(this._offset=K,this._updateGeometry())}},{key:"length",get:function(){return this._length},set:function(K){K!==this._length&&(this._length=
K,this._updateGeometry())}},{key:"color",get:function(){return this._color},set:function(K){H.exactEquals(K,this._color)||(H.copy(this._color,K),this._updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(K){K!==this._renderOccluded&&(this._renderOccluded=K,this._updateMaterial())}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}}]);return X}(J.EngineVisualElement);const y=x.create(),
G=B.create(),Z=B.create(),T=B.create(),ia=A.createScreenPointArray(),ca=A.createScreenPointArray(),ha=D.makeDehydratedPoint(0,0,void 0,null);r.ParallelLineVisualElement=J;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/PointVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/vectorStacks ./VisualElementResources ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../support/engineContent/sdfPrimitives ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/HUDMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E){let L=function(){function T(ca){this._geometry=this.view=null;this._size=3;this._color=u.fromValues(1,0,1,1);this._pixelSnappingEnabled=!0;this._primitive="square";this._outlineSize=1;this._outlineColor=u.fromValues(1,1,1,1);this._elevationInfo=null;this._resources=new D.VisualElementResources({view:ca.view,createResources:da=>this._createResources(da),destroyResources:da=>this._destroyResources(da),recreateGeometry:(da,X)=>{da.geometry=this._recreateGeometry(X,
da.material)}});let ha=!0;for(const da in ca)da in this?"attached"===da?ha=ca[da]??!1:this[da]=ca[da]:console.error("Cannot set unknown property",da);this.attached=ha}var ia=T.prototype;ia.destroy=function(){this._resources.destroy()};ia._updateMaterial=function(){const ca=this._resources.resources;N.isNone(ca)||ca.material.setParameters(this._materialParameters(ca.texture.id))};ia._updateSizeAttribute=function(){var ca=this._resources.resources;const ha=this._resources.object;if(!N.isNone(ca)&&!N.isNone(ha)&&
(ca=ca.geometry,!N.isNone(ca))){ca=ca.getMutableAttribute(C.VertexAttribute.SIZE).data;var da=this._geometrySize;ca[0]=da;ca[1]=da;ha.geometryVertexAttrsUpdated(ha.geometries[0])}};ia._materialParameters=function(ca){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:G,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:ca,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}};
ia._recreateGeometry=function(ca,ha){ha=this._createRenderGeometry(ha);N.isSome(ha)&&ca.addGeometry(ha);return ha};ia._createResources=function(ca){const ha=M.createTexture(this._primitive,this._preferredTextureSize),da=new E.HUDMaterial(this._materialParameters(ha.id));ca=this._recreateGeometry(ca,da);return{material:da,texture:ha,geometry:ca,forEach(X){X(ha);X(da);N.isSome(this.geometry)&&X(this.geometry)}}};ia._destroyResources=function(ca){ca.geometry=null;ca.material.dispose();ca.texture.dispose()};
ia.calculateMapBounds=function(ca){if(N.isNone(this._resources.resources)||N.isNone(this._resources.resources.geometry))return!1;const ha=this._resources.resources.geometry.vertexAttributes.get(C.VertexAttribute.POSITION);x.projectVectorToVector(ha.data,this.view.renderCoordsHelper.spatialReference,Z,this.view.spatialReference);H.expandWithBuffer(ca,Z);return!0};ia._createRenderGeometry=function(ca){var ha=this.geometry;if(N.isNone(ha))return null;const {renderCoordsHelper:da,elevationProvider:X}=
this.view;var O=J.evaluateElevationAlignmentAtPoint(ha,X,U.ElevationContext.fromElevationInfo(this.elevationInfo),da);const K=A.set(I.sv3d.get(),ha.x,ha.y,O);O=I.sv3d.get();x.projectVectorToVector(K,ha.spatialReference,O,da.spatialReference);ha=this._geometrySize;return Q.createPointGeometry(ca,null,O,null,[ha,ha],[0,0,0,1])};V._createClass(T,[{key:"visible",get:function(){return this._resources.visible},set:function(ca){this._resources.visible=ca}},{key:"attached",get:function(){return this._resources.attached},
set:function(ca){this._resources.attached=ca}},{key:"geometry",get:function(){return this._geometry},set:function(ca){this._geometry=ca;this._resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(ca){if(ca!==this._size){const ha=this._preferredTextureSize;this._size=ca;ha<this._preferredTextureSize?N.isSome(this._resources)&&this._resources.recreate():this._updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(ca){B.exactEquals(ca,
this._color)||(B.copy(this._color,ca),this._updateMaterial())}},{key:"pixelSnappingEnabled",get:function(){return this._pixelSnappingEnabled},set:function(ca){this._pixelSnappingEnabled!==ca&&(this._pixelSnappingEnabled=ca,this._updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(ca){this._primitive!==ca&&(this._primitive=ca,N.isSome(this._resources)&&this._resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(ca){ca!==
this._outlineSize&&(this._outlineSize=ca,this._updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(ca){B.exactEquals(ca,this._outlineColor)||(B.copy(this._outlineColor,ca),this._updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(ca){this._elevationInfo=ca;this._resources&&this._resources.recreateGeometry()}},{key:"_geometrySize",get:function(){return this._size/y}},{key:"_preferredTextureSize",get:function(){return w.clamp(w.nextHighestPowerOfTwo(2*
this._geometrySize),16,128)}}]);return T}();const y=M.DEFAULT_SYMBOL_SIZE_RATIO,G=[y/2,y/2,1-y/2,1-y/2],Z=P.create();r.PointVisualElement=L;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/RightAngleQuadVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/reactiveUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/vectorStacks ../../../../layers/graphics/dehydratedFeatures ./EngineVisualElement ../../terrain/OverlayRenderer ../../webgl-engine/lib/Attribute ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z){J=function(ca){function ha(X){var O=ca.call(this,X)||this;O._maxSize=0;O._position=u.create();O._up=u.create();O._right=u.create();O._renderOccluded=E.RenderOccludedFlag.OccludeAndTransparent;O._color=H.fromValues(1,0,0,1);O._outlineColor=H.fromValues(0,0,0,1);O._outlineSize=0;O._size=32;O._outlineRenderOccluded=E.RenderOccludedFlag.Opaque;O.applyProps(X);return O}V._inheritsLoose(ha,ca);var da=ha.prototype;da.createObject3DResourceFactory=function(X){return{view:X,
createResources:O=>this._createObject3DResources(O),destroyResources:O=>this._destroyObject3DResources(O),cameraChanged:()=>this._updateTransformObject3D()}};da.createDrapedResourceFactory=function(X){return{view:X,createResources:()=>this._createDrapedResources(),destroyResources:O=>this._destroyDrapedResources(O)}};da._createObject3DResources=function(X){const O=new G.ColorMaterial(this._quadMaterialParameters),K=0===this._outlineSize?void 0:new Z.RibbonLineMaterial(this._outlineMaterialParameters);
this._createObject3DGeometries(X,O,K);return{quadMaterial:O,outlineMaterial:K,forEach:Y=>{Y(O);K&&Y(K)}}};da._destroyObject3DResources=function(X){X.quadMaterial.dispose();X.outlineMaterial?.dispose()};da._createObject3DGeometries=function(X,O,K){if(!B.exactEquals(this._up,u.ZEROS)||!B.exactEquals(this._right,u.ZEROS)){O=this._createGeometries(O,K);for(const Y of O)X.addGeometry(Y);this._updateTransformObject3D(X)}};da._createDrapedResources=function(){const X=new G.ColorMaterial(this._quadMaterialParameters),
O=0===this._outlineSize?void 0:new Z.RibbonLineMaterial(this._outlineMaterialParameters),K=this._createGeometries(X,O).map(S=>new L.RenderGeometry(S,{boundingInfo:S.boundingInfo}));this._setTransformDraped(K);const Y=N.watch(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()});return{quadMaterial:X,outlineMaterial:O,geometries:K,pixelRatioHandle:Y}};da._destroyDrapedResources=function(X){X.pixelRatioHandle.remove();X.geometries=[];X.outlineMaterial?.dispose();X.quadMaterial.dispose()};
da._createGeometries=function(X,O){const {up:K,right:Y,corner:S}=this._getVertices();X=this._quadGeometryData(K,Y,S,X);if(!O)return[X];O=C.createPolylineGeometry(O,[K,S,Y]);return[X,O]};da._getVertices=function(){let X=this._up,O=this._right;const K=B.add(I.sv3d.get(),X,O);this.isDraped&&(X=B.copy(I.sv3d.get(),X),O=B.copy(I.sv3d.get(),O),X[2]=0,O[2]=0,K[2]=0);return{up:X,right:O,corner:K}};da._updateTransform=function(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()};
da._updateTransformObject3D=function(X=w.toNullable(this.object3dResources.object)){if(X){var O=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position);O=Math.min(this._maxSize,O);A.fromTranslation(T,this._position);A.scale(T,T,[O,O,O]);X.transformation=T}};da._setTransformDraped=function(X){if(0!==X.length){var {view:{basemapTerrain:{overlayManager:O},state:{contentPixelRatio:K}}}=this,{_position:Y,_size:S}=this,ea=B.copy(I.sv3d.get(),Y);ea[2]=U.DRAPED_Z;var ja=ia;ja.spatialReference=
w.unwrap(O.renderer.spatialReference);ja.x=ea[0];ja.y=ea[1];ja=O.overlayPixelSizeInMapUnits(ja)*K;ja=Math.min(this._maxSize,S*ja);A.fromTranslation(T,ea);A.scale(T,T,[ja,ja,1]);for(const oa of X)oa.updateTransformation(qa=>{A.copy(qa,T)})}};da._quadGeometryData=function(X,O,K,Y){return new Q.Geometry(Y,[[y.VertexAttribute.POSITION,new M.Attribute([0,0,0,...O,...X,...K],3,!0)]],[[y.VertexAttribute.POSITION,[0,1,2,1,2,3]]])};da._updateQuadMaterial=function(){w.toNullable(this.object3dResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters);
w.toNullable(this.drapedResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters)};da._updateOutlineMaterial=function(){w.toNullable(this.object3dResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters);w.toNullable(this.drapedResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters)};V._createClass(ha,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(X){X!==this._renderOccluded&&(this._renderOccluded=
X,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(X){x.copy(this._color,X);this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(X){x.copy(this._outlineColor,X);this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(X){const O=0===this._outlineSize!==(0===X);this._outlineSize=X;O?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},
set:function(X){X!==this._size&&(this._size=X,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(X){this._outlineRenderOccluded=X;this._updateOutlineMaterial()}},{key:"geometry",set:function({previous:X,center:O,next:K}){this._maxSize=Math.min(B.distance(O,X),B.distance(O,K))/3;B.normalize(this._up,B.subtract(this._up,X,O));B.normalize(this._right,B.subtract(this._right,K,O));B.copy(this._position,O);this.recreateGeometry()}},{key:"_quadMaterialParameters",
get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"_outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}}]);return ha}(J.EngineVisualElement);const T=P.create(),ia=D.makeDehydratedPoint(0,0,void 0,null);r.RightAngleQuadVisualElement=J;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,V,w,N,A,P,B){let u=function(x){function H(){var I=x.apply(this,arguments)||this;I.enabled=!0;return I}V._inheritsLoose(H,x);return H}(A.JSONSupport);w.__decorate([P.property({type:Boolean})],u.prototype,"enabled",void 0);u=w.__decorate([B.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],u);A=function(x){function H(I){I=x.call(this,I)||this;I.lineSnapper=new u;I.parallelLineSnapper=new u;I.rightAngleSnapper=new u;I.rightAngleTriangleSnapper=new u;I.shortLineThreshold=
15;I.distance=5;I.pointThreshold=1E-6;I.intersectionParallelLineThreshold=1E-6;I.parallelLineThreshold=1E-6;I.verticalLineThreshold=.1;I.touchSensitivityMultiplier=1.5;I.pointOnLineThreshold=1E-6;I.orange=new N([255,127,0]);I.orangeTransparent=new N([255,127,0,.5]);I.lineHintWidthReference=3;I.lineHintWidthTarget=3;I.lineHintFadedExtensions=.3;I.parallelLineHintWidth=2;I.parallelLineHintLength=24;I.parallelLineHintOffset=1.5;I.rightAngleHintSize=24;I.rightAngleHintOutlineSize=1.5;I.satisfiesConstraintScreenThreshold=
1;return I}V._inheritsLoose(H,x);return H}(A.JSONSupport);w.__decorate([P.property({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"lineSnapper",void 0);w.__decorate([P.property({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"parallelLineSnapper",void 0);w.__decorate([P.property({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"rightAngleSnapper",void 0);w.__decorate([P.property({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],
A.prototype,"rightAngleTriangleSnapper",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],A.prototype,"shortLineThreshold",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],A.prototype,"distance",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"pointThreshold",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,
range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"intersectionParallelLineThreshold",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"parallelLineThreshold",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],A.prototype,"verticalLineThreshold",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"touchSensitivityMultiplier",
void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"pointOnLineThreshold",void 0);w.__decorate([P.property({type:N,nonNullable:!0})],A.prototype,"orange",void 0);w.__decorate([P.property({type:N,nonNullable:!0})],A.prototype,"orangeTransparent",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"lineHintWidthReference",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,
range:{min:0,max:10},json:{write:!0}})],A.prototype,"lineHintWidthTarget",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],A.prototype,"lineHintFadedExtensions",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"parallelLineHintWidth",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],A.prototype,"parallelLineHintLength",void 0);w.__decorate([P.property({type:Number,
nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],A.prototype,"parallelLineHintOffset",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],A.prototype,"rightAngleHintSize",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],A.prototype,"rightAngleHintOutlineSize",void 0);w.__decorate([P.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],A.prototype,"satisfiesConstraintScreenThreshold",
void 0);A=w.__decorate([B.subclass("esri.views.interactive.snapping.Settings.Defaults")],A);w=new A;r.defaults=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDomain":function(){define(["exports"],function(r){r.SnappingDomain=void 0;var V=r.SnappingDomain||(r.SnappingDomain={});V[V.FEATURE=1]="FEATURE";V[V.SELF=2]="SELF";V[V.ALL=3]="ALL";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingPoint":function(){define(["exports",
"../../../core/maybe","../../../chunks/vec3f64","../../../layers/graphics/dehydratedFeatures","../../../support/elevationInfoUtils"],function(r,V,w,N,A){function P(u,x,H){if(V.isNone(u))return null;if(V.isNone(x))return w.fromValues(u.x,u.y,u.z??0);if("2d"===x.type)return w.fromValues(u.x,u.y,0);({elevationInfo:H}=H);x=A.getConvertedElevation(x,u,H,A.absoluteHeightElevationInfo)??0;return w.fromValues(u.x,u.y,x)}const B=N.makeDehydratedPoint(0,0,0,null);r.anyMapPointToSnappingPoint=function(u,x,H){return V.isNone(u)?
null:P(H.coordinateHelper.vectorToDehydratedPoint(u,B),x,H)};r.asSnappingPoint=function(u){return u};r.cloneSnappingPoint=function(u){return w.clone(u)};r.createSnappingPoint=function(u,x,H){return w.fromValues(u,x,H)};r.pointToSnappingPoint=P;r.snappingPointToDehydratedPoint=function(u,x){return N.makeDehydratedPoint(u[0],u[1],u[2],x)};r.snappingPointToSnappingOutput=function(u,x,{z:H,m:I,spatialReference:D,elevationInfo:J}){if(null==H&&null==I)return u=N.makeDehydratedPoint(u[0],u[1],void 0,D),
null!=I&&(u.m=I,u.hasM=!0),u;if(V.isNone(x)||"2d"===x.type)return u=N.makeDehydratedPoint(u[0],u[1],H,D),null!=I&&(u.m=I,u.hasM=!0),u;x=A.getConvertedElevationFromVector(x,u,D,A.absoluteHeightElevationInfo,J)??0;u=N.makeDehydratedPoint(u[0],u[1],x,D);null!=I&&(u.m=I,u.hasM=!0);return u};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/maybe ../../../core/reactiveUtils ../../../chunks/vec3 ../../../layers/graphics/dehydratedFeatures ../../input/InputManager ../keybindings ./SnappingPoint".split(" "),
function(r,V,w,N,A,P,B,u){function x(H,I){const D=H.x-I.x;H=H.y-I.y;return D*D+H*H}r.LineSegmentHintType=void 0;(function(H){H[H.TARGET=0]="TARGET";H[H.REFERENCE=1]="REFERENCE";H[H.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(r.LineSegmentHintType||(r.LineSegmentHintType={}));r.editEdgeToSnappingEdge=function(H,I,D){return{left:u.anyMapPointToSnappingPoint(H.leftVertex.pos,I,D),right:u.anyMapPointToSnappingPoint(H.rightVertex.pos,I,D)}};r.makeFilter=function(H){return H.createQuery()};r.makeSnappingQuery=
function({point:H,distance:I,types:D,coordinateHelper:{spatialReference:J}},U,M){return{point:A.makeDehydratedPoint(H[0],H[1],H[2],J.toJSON()),mode:U,distance:I,types:D,query:V.isSome(M)?M.toJSON():{where:"1\x3d1"}}};r.objectEqual=function(H,I){const D=H.length===I.length&&H[0]===I[0]&&H[1]===I[1];switch(H.length){case 2:return D;case 3:return D&&H[2]===I[2];case 4:return D&&H[2]===I[2]&&H[3]===I[3]}return!1};r.screenDistance=function(H,I){return Math.sqrt(x(H,I))};r.setupSnappingToggleHandles=function(H,
I=()=>{}){const D=w.watch(()=>({view:H.view,snappingOptions:H.snappingOptions}),({view:J,snappingOptions:U})=>{const M=P.ViewEventPriorities.TOOL;H.removeHandles("snapping-toggle");J&&V.isSome(U)&&(J=[J.on("key-down",Q=>{Q.key!==B.SNAPPING_KEYS.toggle||Q.repeat||(U.enabledToggled=!0,I())},M),J.on("key-up",Q=>{Q.key===B.SNAPPING_KEYS.toggle&&(U.enabledToggled=!1,I())},M),J.on("pointer-move",Q=>{Q=Q.native.ctrlKey;U.enabledToggled!==Q&&(U.enabledToggled=Q,I())},M)],H.addHandles(J,"snapping-toggle"))},
w.syncAndInitial);H.addHandles(D)};r.sortCandidatesInPlace=function(H,I){I.sort((D,J)=>{D=N.squaredDistance(D.targetPoint,H);J=N.squaredDistance(J.targetPoint,H);return D-J})};r.squaredScreenDistance=x;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(r){r.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};r.SNAPPING_KEYS=
{toggle:"Control"};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingVisualizer":function(){define("exports ../../../core/handleUtils ./hints/IntersectionSnappingHint ./hints/LineSnappingHint ./hints/ParallelSnappingHint ./hints/PointSnappingHint ./hints/RightAngleSnappingHint".split(" "),function(r,V,w,N,A,P,B){let u=function(){function x(){}var H=x.prototype;H.draw=function(I,D){I=this._getUniqueHints(I);I=this.sortUniqueHints(I);const J=[];
for(const U of I)U instanceof w.IntersectionSnappingHint&&J.push(this.visualizeIntersectionPoint(U,D)),U instanceof N.LineSnappingHint&&J.push(this.visualizeLine(U,D)),U instanceof A.ParallelSnappingHint&&J.push(this.visualizeParallelSign(U,D)),U instanceof B.RightAngleSnappingHint&&J.push(this.visualizeRightAngleQuad(U,D)),U instanceof P.PointSnappingHint&&J.push(this.visualizePoint(U,D));return V.handlesGroup(J)};H.sortUniqueHints=function(I){return I};H._getUniqueHints=function(I){const D=[];for(const J of I){I=
!0;for(const U of D)if(J.equals(U)){I=!1;break}I&&D.push(J)}return D};return x}();r.SnappingVisualizer=u;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3","../SnappingDomain","./SnappingHint"],function(r,V,w,N,A){A=function(P){function B(u,x,H=N.SnappingDomain.ALL){x=P.call(this,x,H)||this;x.intersectionPoint=u;return x}
V._inheritsLoose(B,P);B.prototype.equals=function(u){return u instanceof B?w.exactEquals(this.intersectionPoint,u.intersectionPoint):!1};return B}(A.SnappingHint);r.IntersectionSnappingHint=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(r){r.SnappingHint=function(V,w){this.isDraped=V;this.domain=w};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),
function(r,V,w,N,A,P,B){w=function(u){function x(H,I,D,J,U=P.SnappingDomain.ALL,M=!0,Q=!0){J=u.call(this,J,U)||this;J.type=H;J.lineStart=I;J.lineEnd=D;J.fadeLeft=M;J.fadeRight=Q;return J}V._inheritsLoose(x,u);x.prototype.equals=function(H){return H instanceof x?this.type===H.type&&A.exactEquals(this.lineStart,H.lineStart)&&A.exactEquals(this.lineEnd,H.lineEnd)&&this.fadeLeft===H.fadeLeft&&this.fadeRight===H.fadeRight:!1};V._createClass(x,[{key:"length",get:function(){return A.distance(this.lineStart,
this.lineEnd)}}]);return x}(B.SnappingHint);r.LineSnappingHint=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(r,V,w,N,A,P,B){w=function(u){function x(H,I,D,J=P.SnappingDomain.ALL){D=u.call(this,D,J)||this;D.lineStart=H;D.lineEnd=
I;return D}V._inheritsLoose(x,u);x.prototype.equals=function(H){return H instanceof x?A.exactEquals(this.lineStart,H.lineStart)&&A.exactEquals(this.lineEnd,H.lineEnd):!1};return x}(B.SnappingHint);r.ParallelSnappingHint=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/PointSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3","./SnappingHint"],function(r,V,w,N){N=function(A){function P(B,
u,x){u=A.call(this,u,x)||this;u.point=B;return u}V._inheritsLoose(P,A);P.prototype.equals=function(B){return B instanceof P?w.exactEquals(this.point,B.point):!1};return P}(N.SnappingHint);r.PointSnappingHint=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),
function(r,V,w,N,A,P,B){w=function(u){function x(H,I,D,J,U=P.SnappingDomain.ALL){J=u.call(this,J,U)||this;J.previousVertex=H;J.centerVertex=I;J.nextVertex=D;return J}V._inheritsLoose(x,u);x.prototype.equals=function(H){return H instanceof x?A.exactEquals(this.previousVertex,H.previousVertex)&&A.exactEquals(this.centerVertex,H.centerVertex)&&A.exactEquals(this.nextVertex,H.nextVertex):!1};return x}(B.SnappingHint);r.RightAngleSnappingHint=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/editingTools/settings":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../Color ../../../../core/colorUtils ../../../../chunks/vec4f64 ../visualElements/ExtendedLineVisualElement ../../webgl-engine/lib/Material ../../webgl-engine/materials/lineStippleUtils".split(" "),function(r,V,w,N,A,P,B,u){function x(ca,ha){ca=ca.clone();ca.a*=ha;return ca}function H(ca,ha){if(ha)for(const da in ha)ca[da]=ha[da]}function I(ca){return A.fromArray(w.toUnitRGBA(ca))}
const D={main:new w([255,127,0]),selected:new w([255,255,255]),staged:new w([12,207,255]),outline:new w([0,0,0,.5]),selectedOutline:new w([255,255,255])};let J=function(ca){this.color=D.main;this.height=90;this.coneHeight=40;this.coneWidth=23;this.width=3;this.renderOccluded=B.RenderOccludedFlag.Opaque;H(this,ca)},U=function(){function ca(ha){this.size=11;this.outlineSize=1;this.collisionPadding=9;this.color=D.main;this.outlineColor=D.outline;this.renderOccluded=B.RenderOccludedFlag.Opaque;this.hoverOutlineColor=
D.selectedOutline;H(this,ha)}ca.prototype.apply=function(ha,da){const X=this[ha];da.setParameters({color:I(X),transparent:"color"===ha?1>X.a:!0,renderOccluded:this.renderOccluded})};return ca}(),M=function(){function ca(ha){this.size=40;this.height=.2;this.offset=.25;this.collisionPadding=2;this.color=x(D.main,.5);this.hoverColor=D.main;this.renderOccluded=B.RenderOccludedFlag.Transparent;this.minSquaredEdgeLength=900;H(this,ha)}ca.prototype.apply=function(ha,da){ha=this[ha];da.setParameters({color:I(ha),
transparent:1>ha.a,renderOccluded:this.renderOccluded})};return ca}(),Q=function(ca){this.vertex=new U({color:D.main,outlineColor:D.outline});const ha=x(D.main,2/3).clone();var da=N.toHSV(ha);da.s*=.5;da=N.toRGB(da);ha.r=da.r;ha.g=da.g;ha.b=da.b;this.edge=new U({color:ha,outlineColor:x(D.outline,.5),size:8,collisionPadding:8});this.selected=new U({color:D.selected,outlineColor:D.outline});this.edgeOffset=new M;H(this,ca)},C=function(){function ca(ha){this.color=D.selected;this.width=1.5;this.stipplePattern=
u.createStipplePatternSimple(5);this.stippleOffColor=D.outline;this.falloff=0;this.innerWidth=1.5;this.innerColor=D.selected;this.renderOccluded=B.RenderOccludedFlag.OccludeAndTransparent;H(this,ha)}ca.prototype.apply=function(ha){ha.color=I(this.color);ha.width=this.width;ha.stipplePattern=this.stipplePattern;ha.stippleOffColor=I(this.stippleOffColor);ha.falloff=this.falloff;ha.innerWidth=this.innerWidth;ha.innerColor=I(this.innerColor);ha.renderOccluded=this.renderOccluded};return ca}(),E=function(){function ca(ha){this.color=
D.selected;this.size=4;this.outlineSize=1;this.outlineColor=D.outline;this.shape="square";H(this,ha)}ca.prototype.apply=function(ha){ha.color=I(this.color);ha.size=this.size;ha.outlineSize=this.outlineSize;ha.outlineColor=I(this.outlineColor);ha.primitive=this.shape};return ca}(),L=function(){function ca(ha){this.innerColor=D.selected;this.innerWidth=1;this.glowColor=D.main;this.glowFalloff=this.glowWidth=8;this.globalAlpha=.3;this.globalAlphaContrastBoost=1.5;this.radius=3;this.heightFillColor=D.main;
H(this,ha)}ca.prototype.apply=function(ha,da=1){da={glowColor:w.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:w.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*da,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in ha?ha.style=da:ha.laserlineStyle=da};return ca}(),y=function(ca){this.outline=new C({color:D.outline,renderOccluded:B.RenderOccludedFlag.OccludeAndTransparentStencil,
stippleOffColor:D.selected,stipplePattern:u.createStipplePatternSimple(5),width:1.5,innerWidth:0});this.staged=new C({color:D.selected,renderOccluded:B.RenderOccludedFlag.OccludeAndTransparentStencil,innerColor:D.staged,stippleOffColor:D.outline,stipplePattern:u.createStipplePatternSimple(5),width:1.5});this.shadowStyle=new L({globalAlpha:.3,glowColor:D.main,glowFalloff:8,glowWidth:8,innerColor:D.selected,innerWidth:1});H(this,ca)},G=function(ca){this.outline=new E({color:D.selected,outlineColor:D.outline,
outlineSize:1,shape:"circle",size:4});this.shadowStyle=new L({globalAlpha:.3,glowColor:D.main,glowFalloff:1.5,glowWidth:6,innerColor:D.selected,innerWidth:1,radius:2});H(this,ca)},Z=function(ca){function ha(da){var X=ca.call(this)||this;X.extensionType=P.ExtensionType.GROUND_RAY;H(V._assertThisInitialized(X),da);return X}V._inheritsLoose(ha,ca);return ha}(C),T=function(ca){this.lineGraphics=new y;this.pointGraphics=new G;this.heightPlane=new L({globalAlpha:.3,glowColor:D.main,glowFalloff:8,glowWidth:8,
innerColor:D.selected,innerWidth:1});this.heightBox=new L({globalAlpha:.3,glowColor:D.main,glowFalloff:8,glowWidth:8,innerColor:D.selected,innerWidth:0,heightFillColor:D.main});this.zVerticalLine=new Z({color:x(D.main,.5),falloff:2,innerColor:x(D.selected,0),renderOccluded:B.RenderOccludedFlag.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:P.ExtensionType.GROUND_RAY});this.laserlineAlphaMultiplier=1.5;this.heightPlaneAngleCutoff=20;H(this,ca)};const ia=new (function(){function ca(ha){this.visualElements=
new T;this.reshapeManipulators=new Q;this.zManipulator=new J;H(this,ha)}ca.prototype.colorToVec4=function(ha){return I(ha)};return ca}());r.VertexManipulatorStyle=U;r.colors=D;r.settings=ia;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/OutlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Evented ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/dehydratedFeatures ../../../../support/elevationInfoUtils ../../../../symbols/support/ElevationInfo ./EngineVisualElement ./LaserlineVisualElement ../../layers/graphics/ElevationContext ../../support/engineContent/line ../../support/renderInfoUtils/line ../../webgl-engine/lib/DoubleArray ../../webgl-engine/lib/Material ../../webgl-engine/lib/RenderGeometry ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/RibbonLineMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T){U=function(da){function X(K){var Y=da.call(this,K)||this;Y._attachmentOrigin=I.makeDehydratedPoint(0,0,0,null);Y._attachmentOriginDirty=!0;Y.events=new w;Y._geometry=null;Y._width=1;Y._color=u.fromValues(1,0,1,1);Y._innerWidth=0;Y._innerColor=u.fromValues(1,1,1,1);Y._stipplePattern=null;Y._stippleOffColor=null;Y._falloff=0;Y._elevationInfo=null;Y._laserlineStyle=null;Y._laserlineEnabled=!1;Y._renderOccluded=y.RenderOccludedFlag.OccludeAndTransparentStencil;
Y._attachmentOrigin.spatialReference=K.view.spatialReference;Y._laserline=new M.LaserlineVisualElement({view:K.view});Y.applyProps(K);Y.attached=K.attached??!0;return Y}V._inheritsLoose(X,da);var O=X.prototype;O.destroy=function(){this._laserline.destroy();da.prototype.destroy.call(this)};O.createObject3DResourceFactory=function(K){return{view:K,createResources:Y=>this._createObject3DResources(Y),destroyResources:Y=>this._destroyExternalResources(Y),recreateGeometry:(Y,S)=>{Y.geometries.length=0;
this._recreateGeometry(S,Y.material,Y.geometries)}}};O.createDrapedResourceFactory=function(K){return{view:K,createResources:()=>this._createDrapedResources(),destroyResources:Y=>this._destroyExternalResources(Y),recreateGeometry:Y=>{Y.geometries=this._createRenderGeometriesDraped(Y.material);this._attachmentOriginChanged()}}};O.onAttachedChange=function(K){this._laserline.attached=this._laserlineAttached;K&&this._attachmentOriginChanged()};O._updateMaterial=function(){N.isSome(this.object3dResources.resources)&&
this.object3dResources.resources.material.setParameters(this._materialParameters);N.isSome(this.drapedResources.resources)&&this.drapedResources.resources.material.setParameters(this._materialParameters)};O._recreateGeometry=function(K,Y,S){this._createRenderGeometries(Y,S);for(const ea of S)K.addGeometry(ea);this._attachmentOriginChanged()};O._attachmentOriginChanged=function(){this._attachmentOriginDirty=!0;this.events.emit("attachment-origin-changed")};O._destroyExternalResources=function(K){K.geometries=
[];K.material.dispose()};O._createObject3DResources=function(K){const Y=new T.RibbonLineMaterial(this._materialParameters),S=[];this._recreateGeometry(K,Y,S);return{material:Y,geometries:S,forEach:ea=>{ea(Y);S.forEach(ea)}}};O._createDrapedResources=function(){const K=new T.RibbonLineMaterial(this._materialParameters),Y=this._createRenderGeometriesDraped(K);return{material:K,geometries:Y}};O._createRenderGeometriesDraped=function(K){var Y=this.geometry;if(N.isNone(Y)||N.isNone(this.view.basemapTerrain.spatialReference))return[];
var S=E.geometryToRenderInfoDraped(Y,this.view.basemapTerrain.spatialReference);Y=[];for(const {position:ea}of S.lines){S=new G.RenderGeometry(C.createGeometry(K,{overlayInfo:{spatialReference:this.view.basemapTerrain.spatialReference,renderCoordsHelper:this.view.renderCoordsHelper},attributeData:{position:ea},removeDuplicateStartEnd:this._isClosed}));const ja=H.empty(ia);H.expandWithBuffer(ja,ea);B.set(S.boundingSphere,.5*(ja[0]+ja[3]),.5*(ja[1]+ja[4]),0,.5*Math.sqrt((ja[3]-ja[0])*(ja[3]-ja[0])+
(ja[4]-ja[1])*(ja[4]-ja[1])));Y.push(S)}return Y};O.calculateMapBounds=function(K){if(N.isNone(this.object3dResources.resources))return!1;const Y=this.view.renderCoordsHelper;for(const S of this.object3dResources.resources.geometries){const ea=S.vertexAttributes.get(Z.VertexAttribute.POSITION),ja=L.newDoubleArray(ea.data.length);x.projectBuffer(ea.data,Y.spatialReference,0,ja,this.view.spatialReference,0,ea.data.length/3);H.expandWithBuffer(K,ja)}return!0};O._createRenderGeometries=function(K,Y){var S=
this.geometry;if(!N.isNone(S)){S=E.geometryToRenderInfo(S,this.view.elevationProvider,this.view.renderCoordsHelper,Q.ElevationContext.fromElevationInfo(this.elevationInfo??new J({mode:D.getGeometryEffectiveElevationMode(S,null)})));var ea=[];for(const {position:ja,mapPositions:oa}of S.lines)Y.push(C.createGeometry(K,{mapPositions:oa,attributeData:{position:ja},removeDuplicateStartEnd:this._isClosed})),ea.push(ja);this._laserline.pathVerticalPlane=ea}};V._createClass(X,[{key:"_laserlineAttached",get:function(){return this.attached&&
this.visible&&N.isSome(this._laserlineStyle)&&!this.isDraped&&this.laserlineEnabled}},{key:"geometry",get:function(){return this._geometry},set:function(K){this._geometry=K;this.recreateGeometry()}},{key:"width",get:function(){return this._width},set:function(K){K!==this._width&&(this._width=K,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(K){B.exactEquals(K,this._color)||(B.copy(this._color,K),this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},
set:function(K){K!==this._innerWidth&&(this._innerWidth=K,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(K){B.exactEquals(K,this._innerColor)||(B.copy(this._innerColor,K),this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(K){const Y=N.isSome(K)!==N.isSome(this._stipplePattern);this._stipplePattern=K;Y?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},
set:function(K){K&&this._stippleOffColor&&B.exactEquals(K,this._stippleOffColor)||(this._stippleOffColor=K?u.clone(K):null,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(K){K!==this._falloff&&(this._falloff=K,this._updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(K){this._elevationInfo=K;this.recreateGeometry()}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(K){this._laserlineStyle=
K;this._laserline.attached=this._laserlineAttached;N.isSome(K)&&(this._laserline.style=K)}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(K){this._laserlineEnabled!==K&&(this._laserlineEnabled=K,this._laserline.attached=this._laserlineAttached)}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(K){K!==this._renderOccluded&&(this._renderOccluded=K,this._updateMaterial())}},{key:"attachmentOrigin",get:function(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;
const K=N.toNullable(this.object3dResources.resources)?.geometries;if(!K||0===K.length)return null;A.set(ha,0,0,0);let Y=0;for(const S of K)S.computeAttachmentOrigin(ca)&&(A.add(ha,ha,ca),Y++);if(0===Y)return null;A.scale(ha,ha,1/Y);this.view.renderCoordsHelper.fromRenderCoords(ha,this._attachmentOrigin);this._attachmentOriginDirty=!1;return this._attachmentOrigin}},{key:"_isClosed",get:function(){return N.isSome(this.geometry)&&"polygon"===this.geometry.type}},{key:"_materialParameters",get:function(){return{width:this._width,
color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded}}},{key:"_normalizedRenderOccluded",get:function(){return this.isDraped&&this._renderOccluded===y.RenderOccludedFlag.OccludeAndTransparentStencil?y.RenderOccludedFlag.OccludeAndTransparent:this._renderOccluded}}]);
return X}(U.EngineVisualElement);const ia=H.create(),ca=P.create(),ha=P.create();r.OutlineVisualElement=U;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/VerticesVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../editingTools/settings ./Object3DVisualElement ../../layers/graphics/ElevationContext ../../support/renderInfoUtils/point ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ShadedColorMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U){u=function(Q){function C(L){var y=Q.call(this,L)||this;y.view=null;y._renderOccluded=J.RenderOccludedFlag.OccludeAndTransparent;y._vertices=null;y._spatialReference=null;y._color=B.settings.colorToVec4(B.settings.reshapeManipulators.vertex.color);y._size=B.settings.reshapeManipulators.vertex.size;y._outlineColor=B.settings.colorToVec4(B.settings.reshapeManipulators.vertex.outlineColor);y._outlineSize=B.settings.reshapeManipulators.vertex.outlineSize;y._elevationInfo=
null;y.applyProps(L);return y}V._inheritsLoose(C,Q);var E=C.prototype;E._updateMaterial=function(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)};E._updateOutlineMaterial=function(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)};E._createRenderGeometries=function(){var L=this.vertices;if(w.isNone(L)||0===L.length)return[];var y=H.geometryToRenderInfo(L,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,
x.ElevationContext.fromElevationInfo(this.elevationInfo));L=[];const G=y.numVertices;y=y.position;for(let T=0;T<G;++T){var Z=N.set(M,y[3*T],y[3*T+1],y[3*T+2]);const ia=D.createSphereGeometry(this._vertexMaterial,.5,16,16,{offset:Z});Z=D.createSphereGeometry(this._vertexOutlineMaterial,.5,16,16,{offset:Z});L.push({vertexGeometry:ia,vertexOutlineGeometry:Z})}return L};E.createGeometries=function(L){const y=this._createRenderGeometries();for(const {vertexGeometry:G,vertexOutlineGeometry:Z}of y)L.addGeometry(G),
L.addGeometry(Z)};E.createExternalResources=function(){this._vertexMaterial=new U.ShadedColorMaterial({...this._vertexMaterialParameters,writeDepth:!0,cullFace:I.CullFaceOptions.Back,screenSizeEnabled:!0});this._vertexOutlineMaterial=new U.ShadedColorMaterial({...this._vertexOutlineMaterialParameters,transparent:!0,writeDepth:!0,cullFace:I.CullFaceOptions.Front,screenSizeEnabled:!0,shadingEnabled:!1})};E.destroyExternalResources=function(){this._vertexOutlineMaterial=this._vertexMaterial=null};E.forEachExternalMaterial=
function(L){L(this._vertexMaterial);L(this._vertexOutlineMaterial)};V._createClass(C,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(L){L!==this._renderOccluded&&(this._renderOccluded=L,this._updateMaterial(),this._updateOutlineMaterial())}},{key:"vertices",get:function(){return this._vertices},set:function(L){this._vertices=L;this.recreateGeometry()}},{key:"spatialReference",get:function(){return this._spatialReference},set:function(L){this._spatialReference=L;this.recreateGeometry()}},
{key:"color",get:function(){return this._color},set:function(L){P.exactEquals(L,this._color)||(P.copy(this._color,L),this._updateMaterial())}},{key:"size",get:function(){return this._size},set:function(L){L!==this._size&&(this._size=L,this._updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(L){P.exactEquals(L,this._outlineColor)||(P.copy(this._outlineColor,L),this._updateOutlineMaterial())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(L){L!==
this._outlineSize&&(this._outlineSize=L,this._updateOutlineMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(L){this._elevationInfo=L;this.recreateGeometry()}},{key:"_vertexMaterialParameters",get:function(){return{color:this._color,transparent:1>this._color[3],screenSizeScale:this.size,renderOccluded:this._renderOccluded}}},{key:"_vertexOutlineMaterialParameters",get:function(){return{color:this._outlineColor,transparent:1>this._outlineColor[3],screenSizeScale:this.size+
2*this.outlineSize,renderOccluded:this._renderOccluded}}}]);return C}(u.Object3DVisualElement);const M=A.create();r.VerticesVisualElement=u;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/Object3DVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./VisualElement ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/UpdatePolicy ../../webgl-engine/lib/WebGLLayer".split(" "),
function(r,V,w,N,A,P,B,u,x){P=function(H){function I(J){J=H.call(this,J.view)||this;J._resources=null;J._transform=A.create();return J}V._inheritsLoose(I,H);var D=I.prototype;D.recreate=function(){this.attached&&this.createResources()};D.recreateGeometry=function(){if(!w.isNone(this._resources)){var J=this._resources.object,U=this.view._stage;U.removeMany(J.geometries);J.removeAllGeometries();this.createGeometries(J);J.visible=this.visible;U.addMany(J.geometries)}};D.createResources=function(){this.destroyResources();
const J=this.view._stage;if(J){var U=new x.WebGLLayer({pickable:!1,updatePolicy:u.UpdatePolicy.SYNC});J.add(U);var M=new B.Object3D({castShadow:!1});M.transformation=this._transform;this.createExternalResources();this.createGeometries(M);J.addMany(M.geometries);this.forEachExternalMaterial(Q=>J.add(Q));J.add(M);U.add(M);M.visible=this.visible;this._resources={layer:U,object:M}}};D.destroyResources=function(){const J=this.view._stage;!w.isNone(this._resources)&&J&&(J.remove(this._resources.object),
J.remove(this._resources.layer),this.forEachExternalMaterial(U=>{J.remove(U);U.dispose()}),J.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};D.updateVisibility=function(J){w.isNone(this._resources)||(this._resources.object.visible=J)};V._createClass(I,[{key:"object",get:function(){return w.isSome(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(J){N.copy(this._transform,
J);w.isSome(this._resources)&&(this._resources.object.transformation=this._transform)}}]);return I}(P.VisualElement);r.Object3DVisualElement=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/renderInfoUtils/point":function(){define(["exports","../../layers/graphics/elevationAlignmentUtils","../../webgl-engine/lib/DoubleArray"],function(r,V,w){r.geometryToRenderInfo=function(N,A,P,B,u){const x=w.newDoubleArray(3*N.length),H=w.newDoubleArray(x.length);N.forEach((I,
D)=>{x[3*D]=I[0];x[3*D+1]=I[1];x[3*D+2]=2<I.length?I[2]:0});A=V.applyPerVertexElevationAlignment(x,A,0,H,0,x,0,x.length/3,P,B,u);return{numVertices:N.length,position:x,mapPositions:H,projectionSuccess:null!=A,sampledElevation:A}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/ShadedColorMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/buffer/BufferView ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/basicInterfaces ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./internal/bufferWriterUtils ./internal/MaterialUtil ../shaders/ShadedColorMaterialTechnique".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E){let L=function(ca){function ha(X){X=ca.call(this,X,new G)||this;X.supportsEdges=!0;X._configuration=new E.ShadedColorMaterialTechniqueConfiguration;X._vertexAttributeLocations=E.vertexAttributeLocations;return X}V._inheritsLoose(ha,ca);var da=ha.prototype;da.getConfiguration=function(X,O){this._configuration.output=X;this._configuration.cullFace=this.parameters.cullFace;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.transparent=
this.parameters.transparent;this._configuration.writeDepth=this.parameters.writeDepth;this._configuration.screenSizeEnabled=this.parameters.screenSizeEnabled;this._configuration.shadingEnabled=this.parameters.shadingEnabled;this._configuration.transparencyPassType=O.transparencyPassType;this._configuration.hasMultipassTerrain=O.multipassTerrain.enabled;this._configuration.cullAboveGround=O.multipassTerrain.cullAboveGround;return this._configuration};da.intersect=function(X,O,K,Y,S,ea){if(this.parameters.screenSizeEnabled){const ja=
X.vertexAttributes.get(M.VertexAttribute.OFFSET);C.intersectTriangleGeometry(X,K,Y,S,{applyToVertex:(oa,qa,ua,va)=>{va=w.set(T,ja.data[3*va],ja.data[3*va+1],ja.data[3*va+2]);oa=w.set(ia,oa,qa,ua);w.scale(va,va,this.parameters.screenSizeScale*K.camera.computeRenderPixelSizeAt(va));w.add(oa,oa,va);return[oa[0],oa[1],oa[2]]},applyToAabb:oa=>{const qa=P.center(oa,T);return P.scale(oa,this.parameters.screenSizeScale*K.camera.computeRenderPixelSizeAt(qa))}},ea)}else C.intersectTriangleGeometry(X,K,Y,S,
void 0,ea)};da.requiresSlot=function(X,O){return O===x.ShaderOutput.Highlight?X===J.RenderSlot.OPAQUE_MATERIAL:O===x.ShaderOutput.Color||O===x.ShaderOutput.Alpha||O===x.ShaderOutput.ObjectAndLayerIdColor?(O=J.RenderSlot.OPAQUE_MATERIAL,this.parameters.transparent&&(O=this.parameters.writeDepth?J.RenderSlot.TRANSPARENT_MATERIAL:J.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),X===O||X===J.RenderSlot.DRAPED_MATERIAL):!1};da.createGLMaterial=function(X){return new y(X)};da.createBufferWriter=
function(){return new Z(this.parameters.screenSizeEnabled)};return ha}(D.Material),y=function(ca){function ha(){return ca.apply(this,arguments)||this}V._inheritsLoose(ha,ca);ha.prototype.beginSlot=function(da){return this.ensureTechnique(E.ShadedColorMaterialTechnique,da)};return ha}(I),G=function(ca){function ha(){var da=ca.apply(this,arguments)||this;da.color=A.fromValues(1,1,1,1);da.shadingTint=A.fromValues(0,0,0,.25);da.shadingDirection=w.normalize(N.create(),[.5,-.5,-.5]);da.screenSizeScale=
14;da.transparent=!1;da.writeDepth=!0;da.hasSlicePlane=!1;da.cullFace=H.CullFaceOptions.None;da.screenSizeEnabled=!1;da.shadingEnabled=!0;return da}V._inheritsLoose(ha,ca);return ha}(D.MaterialParameters),Z=function(){function ca(da){this.screenSizeEnabled=da;da=u.newLayout().vec3f(M.VertexAttribute.POSITION).vec3f(M.VertexAttribute.NORMAL);this.screenSizeEnabled&&da.vec3f(M.VertexAttribute.OFFSET);this.vertexBufferLayout=da}var ha=ca.prototype;ha.allocate=function(da){return this.vertexBufferLayout.createBuffer(da)};
ha.elementCount=function(da){return da.indices.get(M.VertexAttribute.POSITION).length};ha.write=function(da,X,O,K,Y){Q.writeDefaultAttributes(O,this.vertexBufferLayout,da,X,K,Y);if(this.screenSizeEnabled)if(O.vertexAttributes.has(M.VertexAttribute.OFFSET))if(da=O.vertexAttributes.get(M.VertexAttribute.OFFSET),O=O.indices.get(M.VertexAttribute.OFFSET),U.assert(3===da.size),K=K.getField(M.VertexAttribute.OFFSET,B.BufferViewVec3f))Q.writePosition(O,da.data,X,K,Y);else throw Error("unable to acquire view for "+
M.VertexAttribute.OFFSET);else throw Error(`${M.VertexAttribute.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);};return ca}();const T=N.create(),ia=N.create();r.ShadedColorMaterial=L;r.ShadedColorMaterialParameters=G;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/OrderIndependentTransparency ../lib/Program ../lib/TransparencyPassType ../lib/VertexAttribute ../materials/DefaultTechniqueConfiguration ../../../../chunks/ShadedColorMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){B=function(L){function y(){return L.apply(this,arguments)||this}w._inheritsLoose(y,L);var G=y.prototype;G.initializeProgram=function(Z){return new I.Program(Z.rctx,y.shader.get().build(this.configuration),E)};G._setPipelineState=function(Z){const T=this.configuration,ia=Z===D.TransparencyPassType.NONE,ca=Z===D.TransparencyPassType.FrontFace;return C.makePipelineState({blending:T.output!==A.ShaderOutput.Color&&T.output!==A.ShaderOutput.Alpha||!T.transparent?
null:ia?H.blendingDefault:H.oitBlending(Z),culling:C.cullingParams(T.cullFace),depthTest:{func:ca?Q.CompareFunction.LESS:T.shadingEnabled?Q.CompareFunction.LEQUAL:Q.CompareFunction.LESS},depthWrite:ia?T.writeDepth?C.defaultDepthWriteParams:null:H.oitDepthWrite(Z),colorWrite:C.defaultColorWriteParams,polygonOffset:ia||ca?null:H.OITPolygonOffset})};G.initializePipeline=function(){return this._setPipelineState(this.configuration.transparencyPassType)};return y}(B.ShaderTechnique);B.shader=new P.ReloadableShaderModule(M.ShadedColorMaterialShader,
()=>new Promise((L,y)=>r(["./ShadedColorMaterial.glsl"],L,y)));P=function(L){function y(){var G=L.apply(this,arguments)||this;G.output=A.ShaderOutput.Color;G.cullFace=x.CullFaceOptions.None;G.transparencyPassType=D.TransparencyPassType.NONE;G.hasSlicePlane=!1;G.transparent=!1;G.writeDepth=!0;G.screenSizeEnabled=!0;G.shadingEnabled=!0;G.hasMultipassTerrain=!1;G.cullAboveGround=!1;return G}w._inheritsLoose(y,L);return y}(U.DefaultTechniqueConfiguration);N.__decorate([u.parameter({count:A.ShaderOutput.COUNT})],
P.prototype,"output",void 0);N.__decorate([u.parameter({count:x.CullFaceOptions.COUNT})],P.prototype,"cullFace",void 0);N.__decorate([u.parameter({count:D.TransparencyPassType.COUNT})],P.prototype,"transparencyPassType",void 0);N.__decorate([u.parameter()],P.prototype,"hasSlicePlane",void 0);N.__decorate([u.parameter()],P.prototype,"transparent",void 0);N.__decorate([u.parameter()],P.prototype,"writeDepth",void 0);N.__decorate([u.parameter()],P.prototype,"screenSizeEnabled",void 0);N.__decorate([u.parameter()],
P.prototype,"shadingEnabled",void 0);N.__decorate([u.parameter()],P.prototype,"hasMultipassTerrain",void 0);N.__decorate([u.parameter()],P.prototype,"cullAboveGround",void 0);const E=new Map([[J.VertexAttribute.POSITION,0],[J.VertexAttribute.NORMAL,1],[J.VertexAttribute.OFFSET,2]]);V.ShadedColorMaterialTechnique=B;V.ShadedColorMaterialTechniqueConfiguration=P;V.vertexAttributeLocations=E;Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/ShadedColorMaterial.glsl":function(){define("exports ./vec4f64 ../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/TransparencyPassType ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){function C(L){const y=new U.ShaderBuilder,G=L.hasMultipassTerrain&&(L.output===N.ShaderOutput.Color||L.output===N.ShaderOutput.Alpha);y.include(P.Transform,L);y.include(w.ScreenSizeScaling,L);y.include(A.SliceDraw,L);const {vertex:Z,fragment:T}=y;T.include(x.ColorConversion);H.addProjViewLocalOrigin(Z,L);T.uniforms.add(new D.Float4PassUniform("uColor",ia=>ia.color));y.attributes.add(Q.VertexAttribute.POSITION,"vec3");y.varyings.add("vWorldPosition","vec3");
G&&y.varyings.add("depth","float");L.screenSizeEnabled&&y.attributes.add(Q.VertexAttribute.OFFSET,"vec3");L.shadingEnabled&&(H.addViewNormal(Z),y.attributes.add(Q.VertexAttribute.NORMAL,"vec3"),y.varyings.add("vViewNormal","vec3"));Z.code.add(J.glsl`
    void main(void) {
      vWorldPosition = ${L.screenSizeEnabled?"screenSizeScaling(offset, position)":"position"};
  `);L.shadingEnabled&&Z.code.add(J.glsl`vec3 worldNormal = normal;
vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`);Z.code.add(J.glsl`
    ${G?"depth \x3d (view * vec4(vWorldPosition, 1.0)).z;":""}
    gl_Position = transformPosition(proj, view, vWorldPosition);
  }
  `);G&&y.include(B.multipassTerrainTest,L);T.code.add(J.glsl`
    void main() {
      discardBySlice(vWorldPosition);
      ${G?"terrainDepthTest(gl_FragCoord, depth);":""}
    `);L.shadingEnabled?(T.uniforms.add(new I.Float3PassUniform("shadingDirection",ia=>ia.shadingDirection)),T.uniforms.add(new D.Float4PassUniform("shadedColor",ia=>{{var ca=ia.shadingTint;ia=ia.color;const ha=1-ca[3],da=ca[3]+ia[3]*ha;0===da?E[3]=da:(E[0]=(ca[0]*ca[3]+ia[0]*ia[3]*ha)/da,E[1]=(ca[1]*ca[3]+ia[1]*ia[3]*ha)/da,E[2]=(ca[2]*ca[3]+ia[2]*ia[3]*ha)/da,E[3]=ia[3]);ca=E}return ca})),T.code.add(J.glsl`vec3 viewNormalNorm = normalize(vViewNormal);
float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);
vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`)):T.code.add(J.glsl`vec4 finalColor = uColor;`);T.code.add(J.glsl`
      ${L.output===N.ShaderOutput.ObjectAndLayerIdColor?J.glsl`finalColor.a = 1.0;`:""}
      if (finalColor.a < ${J.glsl.float(u.symbolAlphaCutoff)}) {
        discard;
      }
      ${L.output===N.ShaderOutput.Alpha?J.glsl`gl_FragColor = vec4(finalColor.a);`:""}

      ${L.output===N.ShaderOutput.Color?J.glsl`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${L.transparencyPassType===M.TransparencyPassType.Color?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}`:""}
    }
    `);return y}const E=V.create();V=Object.freeze(Object.defineProperty({__proto__:null,build:C},Symbol.toStringTag,{value:"Module"}));r.ShadedColorMaterialShader=V;r.build=C})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl":function(){define(["exports","./util/View.glsl","../shaderModules/FloatPassUniform","../shaderModules/interfaces"],function(r,V,w,N){r.ScreenSizeScaling=function(A,P){P.screenSizeEnabled&&(A=A.vertex,V.addCameraPosition(A,P),A.uniforms.add(new w.FloatPassUniform("perScreenPixelRatio",
(B,u)=>u.camera.perScreenPixelRatio)),A.uniforms.add(new w.FloatPassUniform("screenSizeScale",B=>B.screenSizeScale)),A.code.add(N.glsl`float computeRenderPixelSizeAt( vec3 pWorld ){
vec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);
float viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));
return viewDirectionDistance * perScreenPixelRatio;
}
vec3 screenSizeScaling(vec3 position, vec3 anchor){
return position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;
}`))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass".split(" "),function(r,V,w,N,A,P,B,u){r.GraphicState=function(x){function H(I){I=x.call(this,
I)||this;I.tracking=!1;I.displaying=!1;I.isDraped=!1;return I}V._inheritsLoose(H,x);return H}(N.EventedAccessor);w.__decorate([A.property({constructOnly:!0})],r.GraphicState.prototype,"graphic",void 0);w.__decorate([A.property()],r.GraphicState.prototype,"tracking",void 0);w.__decorate([A.property()],r.GraphicState.prototype,"displaying",void 0);w.__decorate([A.property()],r.GraphicState.prototype,"isDraped",void 0);r.GraphicState=w.__decorate([u.subclass("esri.views.3d.layers.graphics.GraphicState")],
r.GraphicState);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawGraphicTool":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Evented ../../core/HandleOwner ../../core/handleUtils ../../core/maybe ../../core/quantityUtils ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../support/elevationInfoUtils ./support/createUtils ./support/helpMessageUtils ./support/surfaceCoordinateSystems ../interactive/InteractiveToolBase ../interactive/sketch/SketchLabelOptions ../interactive/sketch/SketchTooltipOptions ../interactive/tooltip/DrawTooltipInfos ../interactive/tooltip/Tooltip ../support/automaticAreaMeasurementUtils ../support/automaticLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da){r.DrawGraphicTool=function(O){function K(S){S=O.call(this,S)||this;S._graphic=null;S._createOperationGeometry=null;S.defaultZ=0;S.geometryType=null;S.hasZ=!0;S.labelOptions=new Z;S.mode=null;S.snappingManager=null;S.snapToScene=!1;S.tooltip=null;S.tooltipOptions=new T;return S}V._inheritsLoose(K,O);var Y=K.prototype;Y.initialize=function(){this.internalGraphicsLayer=new Q({listMode:"hide",internal:!0});this.view.map.layers.add(this.internalGraphicsLayer);
this.drawOperation=this.makeDrawOperation();this.handles.add([this.drawOperation.on("vertex-add",S=>this.onVertexAdd(S)),this.drawOperation.on("vertex-remove",S=>this.onVertexRemove(S)),this.drawOperation.on("vertex-update",S=>this.onVertexUpdate(S)),this.drawOperation.on("cursor-update",S=>this.onCursorUpdate(S)),this.drawOperation.on("complete",S=>this.onComplete(S)),H.watch(()=>this.tooltipOptions.enabled,S=>{this.tooltip=S?new ca.Tooltip({view:this.view,info:this._tooltipInfo}):u.destroyMaybe(this.tooltip)},
H.syncAndInitial),H.watch(()=>this._tooltipInfo,S=>{u.isSome(this.tooltip)&&(this.tooltip.info=S)},H.syncAndInitial)]);this.finishToolCreation()};Y.destroy=function(){this.drawOperation=u.destroyMaybe(this.drawOperation);this.tooltip=u.destroyMaybe(this.tooltip);this._destroyAllVisualisations();this.view.map.remove(this.internalGraphicsLayer);this.internalGraphicsLayer=u.destroyMaybe(this.internalGraphicsLayer);this._set("view",null)};Y.completeCreateOperation=function(){this.drawOperation.complete()};
Y.onInputEvent=function(S){this.drawOperation.onInputEvent(S)};Y.redo=function(){this.drawOperation.redo()};Y.reset=function(){};Y.undo=function(){this.drawOperation.undo()};Y._createGraphic=function(S){this._graphic=new N({...this.graphicProperties,geometry:S,symbol:this.graphicSymbol});this.internalGraphicsLayer.add(this._graphic);this.handles.add(this.initializeGraphic(this._graphic));this.notifyChange("graphic");this.handles.add(B.makeHandle(()=>{u.isSome(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),
this._graphic=u.destroyMaybe(this._graphic))}),"create-operation-graphic")};Y._destroyAllVisualisations=function(){this.handles.remove(X.outline);this.handles.remove(X.regularVertices);this.handles.remove(X.activeVertex);this.handles.remove("create-operation-graphic")};Y._getCreateOperationGeometry=function(S={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;var ea=this.drawOperation.stagedVertex,ja=this.drawOperation.committedVertices;const oa=ja.slice();
u.isSome(ea)&&oa.push(this.drawOperation.coordinateHelper.pointToArray(ea));var qa=u.isSome(ea)?this.drawOperation.coordinateHelper.pointToArray(ea):ja.splice(-1)[0];ea={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null};const ua=oa.length,va=this.view.spatialReference,Ja="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case "point":ea.regularVertices=ja;ea.activeVertex=qa;ea.full=this.drawOperation.coordinateHelper.arrayToPoint(oa[0]);
break;case "multipoint":ea.regularVertices=ja;ea.activeVertex=qa;0<ua&&(ea.full=E.createMultipoint(oa,va));break;case "polyline":ea.regularVertices=ja;ea.activeVertex=qa;0<ua&&(ea.full=E.createPolyline([oa],va,Ja));break;case "polygon":ea.regularVertices=ja;ea.activeVertex=qa;0<ua&&(ea.full=E.createPolygon([oa],va,Ja,!0));break;case "circle":0<ua&&(ja=y.createViewAlignedCoordinateSystem(this.view,oa[0]),1===ua&&S.operationComplete?(S=oa[0],qa=ja.makeMapPoint(S[0]+48*this.view.resolution,S[1]),ea.circle=
E.createCircle([S,qa],ja,!0),ea.full=u.isSome(ea.circle)?ea.circle.geometry:null):2===ua&&(this.forceUniformSize?(ea.circle=E.createCircle(oa,ja,this.centered),ea.full=u.isSome(ea.circle)?ea.circle.geometry:null):(ea.rectangle=E.createEllipse(oa,ja,this.centered),ea.full=ea.rectangle.geometry)));break;case "rectangle":0<ua&&(ja=y.createViewAlignedCoordinateSystem(this.view,oa[0]),1===ua&&S.operationComplete?(S=oa[0],qa=ja.makeMapPoint(S[0]+48*this.view.resolution,S[1]),ea.rectangle=E.createSquare([S,
qa],ja,!0),ea.full=ea.rectangle.geometry):2===ua&&(ea.rectangle=this.forceUniformSize?E.createSquare(oa,ja,this.centered):E.createRectangle(oa,ja,this.centered),ea.full=ea.rectangle.geometry));break;default:return null}switch(this.geometryType){case "polyline":case "polygon":1<ua&&(ea.outline=E.createPolyline([oa],va,Ja));break;case "circle":case "rectangle":u.isSome(ea.full)&&"polygon"===ea.full.type&&(ea.outline=E.createPolygon(ea.full.rings,va,Ja))}return ea};Y.initializeGraphic=function(S){return null};
Y.onComplete=function(S){this._updateGraphic();let ea=null;if(this.drawOperation.isCompleted){const ja=this._getCreateOperationGeometry({operationComplete:!0});u.isSome(ja)&&(u.isNone(this._graphic)?this._createGraphic(ja.full):this._graphic.geometry=ja.full,ea=u.unwrap(this._graphic).clone())}this._createOperationGeometry=null;this.emit("complete",{graphic:ea,...S})};Y.onCursorUpdate=function(S){this._updateGraphic();this.emit("cursor-update",S)};Y.onDeactivate=function(){this.drawOperation.isCompleted||
this.drawOperation.cancel()};Y.onVertexAdd=function(S){this._updateGraphic();this.emit("vertex-add",S)};Y.onVertexRemove=function(S){this._updateGraphic();this.emit("vertex-remove",S)};Y.onVertexUpdate=function(S){this._updateGraphic();this.emit("vertex-update",S)};Y._updateGraphic=function(){const S=this._getCreateOperationGeometry();this._createOperationGeometry=S;u.isNone(S)?this._destroyAllVisualisations():(u.isSome(S.outline)?this.handles.add(this.onOutlineChanged(S.outline),X.outline):this.handles.remove(X.outline),
u.isSome(S.regularVertices)?this.handles.add(this.onRegularVerticesChanged(S.regularVertices),X.regularVertices):this.handles.remove(X.regularVertices),u.isSome(S.activeVertex)?this.handles.add(this.onActiveVertexChanged(S.activeVertex),X.activeVertex):this.handles.remove(X.activeVertex),u.isSome(S.full)?u.isNone(this._graphic)?this._createGraphic(S.full):this._graphic.geometry=S.full:this.handles.remove("create-operation-graphic"))};V._createClass(K,[{key:"_defaultElevation",get:function(){return x.createLength(this.defaultZ,
"meters")}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},{key:"centered",set:function(S){this._set("centered",S);this._updateGraphic()}},{key:"enabled",set:function(S){this.drawOperation.interactive=S;this._set("enabled",S)}},{key:"forceUniformSize",set:function(S){this._set("forceUniformSize",S);this._updateGraphic()}},{key:"graphic",get:function(){return this._graphic}},{key:"graphicSymbol",set:function(S){this._set("graphicSymbol",
S);u.isSome(this._graphic)&&(this._graphic.symbol=S)}},{key:"updating",get:function(){return this.drawOperation?.updating??!1}},{key:"_tooltipInfo",get:function(){const {drawOperation:S}=this;if(!S)return null;switch(this.geometryType){case "point":return this._drawPointTooltipInfo;case "polyline":return this._drawPolylineTooltipInfo;case "polygon":return this._drawPolygonTooltipInfo;case "rectangle":return this._drawRectangleTooltipInfo;case "circle":return this._drawCircleTooltipInfo;default:return null}}},
{key:"_drawPointTooltipInfo",get:function(){const S=u.applySome(this.graphic,ea=>ea.geometry);return u.isNone(S)||"point"!==S.type||"2d"===this.view.type&&0===this.defaultZ?null:new ia.DrawPointTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:this.view.type,helpMessage:L.getDrawHelpMessage("point",S)})}},{key:"_drawPolylineTooltipInfo",get:function(){var S=this._createOperationGeometry;S=u.isSome(S)?S.full:null;if(u.isNone(S)||"polyline"!==S.type)return null;
const ea=da.autoLengthByElevationMode(S,this._elevationMode);return new ia.DrawPolylineTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:u.unwrapOr(ea,x.zeroMeters),viewType:this.view.type,helpMessage:L.getDrawHelpMessage("polyline",S)})}},{key:"_drawPolygonTooltipInfo",get:function(){var S=this._createOperationGeometry;S=u.isSome(S)?S.full:null;if(u.isNone(S)||"polygon"!==S.type)return null;const ea=ha.autoAreaByElevationMode(S,this._elevationMode);
return new ia.DrawPolygonTooltipInfo({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:u.unwrapOr(ea,x.zeroSquareMeters),viewType:this.view.type,helpMessage:L.getDrawHelpMessage("polygon",S)})}},{key:"_drawRectangleTooltipInfo",get:function(){return u.isNone(this.drawOperation)?null:new ia.DrawRectangleTooltipInfo({tooltipOptions:this.tooltipOptions,xSize:u.unwrapOr(this._xSize,x.zeroMeters),ySize:u.unwrapOr(this._ySize,x.zeroMeters),area:u.unwrapOr(this._fullGeometryArea,
x.zeroSquareMeters)})}},{key:"_drawCircleTooltipInfo",get:function(){if(u.isNone(this.drawOperation))return null;const S=this.forceUniformSize;return new ia.DrawCircleTooltipInfo({tooltipOptions:this.tooltipOptions,radius:S?u.unwrapOr(this._circleRadius,x.zeroMeters):null,xSize:S?null:u.unwrapOr(this._xSize,x.zeroMeters),ySize:S?null:u.unwrapOr(this._ySize,x.zeroMeters),area:u.unwrapOr(this._fullGeometryArea,x.zeroSquareMeters)})}},{key:"_circleRadius",get:function(){const S=this._createOperationGeometry;
return u.isSome(S)&&u.isSome(S.circle)&&u.isSome(S.circle.center)&&u.isSome(S.circle.edge)?da.autoHorizontalDistanceByElevationModeBetweenPoints(S.circle.center,S.circle.edge,this._elevationMode):null}},{key:"_xSize",get:function(){var S=this._createOperationGeometry;if(u.isNone(S)||u.isNone(S.rectangle))return null;({midpoints:S}=S.rectangle);return u.isSome(S)?da.autoHorizontalDistanceByElevationModeBetweenPoints(S.left,S.right,this._elevationMode):null}},{key:"_ySize",get:function(){var S=this._createOperationGeometry;
if(u.isNone(S)||u.isNone(S.rectangle))return null;({midpoints:S}=S.rectangle);return u.isSome(S)?da.autoHorizontalDistanceByElevationModeBetweenPoints(S.top,S.bottom,this._elevationMode):null}},{key:"_fullGeometryArea",get:function(){var S=this._createOperationGeometry;S=u.isSome(S)?S.full:null;return u.isNone(S)||"polygon"!==S.type?null:ha.autoAreaByElevationMode(S,this._elevationMode)}},{key:"_elevationTooltipDetail",get:function(){return{mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}},
{key:"_vertexTooltipElevation",get:function(){const {tooltipOptions:S,view:ea,drawOperation:ja}=this;if(u.isNone(ja))return this._defaultElevation;var oa=ja.stagedVertex??ja.lastVertex;if(u.isNone(oa)||"2d"===ea.type)return this._defaultElevation;oa=(C.getConvertedElevation(ea,oa,ja.elevationInfo,{mode:S.elevation.mode,offset:0})??0)*I.getMetersPerVerticalUnitForSR(oa.spatialReference);return x.createLength(oa,"meters")}},{key:"_elevationMode",get:function(){return this.drawOperation.isDraped?"on-the-ground":
"absolute-height"}}]);return K}(P.HandleOwnerMixin(A.EventedMixin(G.InteractiveToolBase)));w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_createOperationGeometry",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_defaultElevation",null);w.__decorate([D.property({value:!0})],r.DrawGraphicTool.prototype,"centered",null);w.__decorate([D.property({nonNullable:!0})],r.DrawGraphicTool.prototype,"defaultZ",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"drawOperation",
void 0);w.__decorate([D.property({value:!0})],r.DrawGraphicTool.prototype,"enabled",null);w.__decorate([D.property({value:!0})],r.DrawGraphicTool.prototype,"forceUniformSize",null);w.__decorate([D.property({constructOnly:!0})],r.DrawGraphicTool.prototype,"geometryType",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"graphic",null);w.__decorate([D.property({constructOnly:!0})],r.DrawGraphicTool.prototype,"graphicProperties",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,
"graphicSymbol",null);w.__decorate([D.property({constructOnly:!0})],r.DrawGraphicTool.prototype,"hasZ",void 0);w.__decorate([D.property({constructOnly:!0,type:Z})],r.DrawGraphicTool.prototype,"labelOptions",void 0);w.__decorate([D.property({constructOnly:!0})],r.DrawGraphicTool.prototype,"mode",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"snappingManager",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"snapToScene",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,
"tooltip",void 0);w.__decorate([D.property({constructOnly:!0,type:T})],r.DrawGraphicTool.prototype,"tooltipOptions",void 0);w.__decorate([D.property({readOnly:!0})],r.DrawGraphicTool.prototype,"type",void 0);w.__decorate([D.property({readOnly:!0})],r.DrawGraphicTool.prototype,"updating",null);w.__decorate([D.property({constructOnly:!0,nonNullable:!0})],r.DrawGraphicTool.prototype,"view",void 0);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_tooltipInfo",null);w.__decorate([D.property()],
r.DrawGraphicTool.prototype,"_drawPointTooltipInfo",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_drawPolylineTooltipInfo",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_drawPolygonTooltipInfo",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_drawRectangleTooltipInfo",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_drawCircleTooltipInfo",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_circleRadius",null);w.__decorate([D.property()],
r.DrawGraphicTool.prototype,"_xSize",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_ySize",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_fullGeometryArea",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_elevationTooltipDetail",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_vertexTooltipElevation",null);w.__decorate([D.property()],r.DrawGraphicTool.prototype,"_elevationMode",null);r.DrawGraphicTool=w.__decorate([M.subclass("esri.views.draw.DrawGraphicTool")],
r.DrawGraphicTool);const X={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};r.geometryTypeToDrawOperationGeometryType=function(O){switch(O){case "point":case "polyline":case "polygon":case "multipoint":return O;case "circle":case "rectangle":return"segment"}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D){N=function(J){function U(Q){Q=J.call(this,Q)||this;Q.elevationInfo=null;Q.graphics=new I.GraphicsCollection;Q.screenSizePerspectiveEnabled=!0;Q.type="graphics";Q.internal=!1;return Q}r._inheritsLoose(U,J);var M=U.prototype;M.destroy=function(){this.removeAll();this.graphics.destroy()};M.add=function(Q){this.graphics.add(Q);return this};M.addMany=function(Q){this.graphics.addMany(Q);return this};M.removeAll=function(){this.graphics.removeAll();return this};M.remove=
function(Q){this.graphics.remove(Q)};M.removeMany=function(Q){this.graphics.removeMany(Q)};M.on=function(Q,C){return J.prototype.on.call(this,Q,C)};M.graphicChanged=function(Q){this.emit("graphic-update",Q)};return U}(x.BlendLayer(H.ScaleRangeLayer(u)));V.__decorate([w.property({type:D})],N.prototype,"elevationInfo",void 0);V.__decorate([w.property(B.owningCollectionProperty(I.GraphicsCollection,"graphics"))],N.prototype,"graphics",void 0);V.__decorate([w.property({type:["show","hide"]})],N.prototype,
"listMode",void 0);V.__decorate([w.property()],N.prototype,"screenSizePerspectiveEnabled",void 0);V.__decorate([w.property({readOnly:!0})],N.prototype,"type",void 0);V.__decorate([w.property({constructOnly:!0})],N.prototype,"internal",void 0);return N=V.__decorate([P.subclass("esri.layers.GraphicsLayer")],N)})},"esri/views/draw/support/createUtils":function(){define("exports ../../../geometry ../../../core/arrayUtils ../../../core/lang ../../../core/maybe ../../../core/unitUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Circle ../../../geometry/geometryEngine ../../../geometry/support/coordsUtils ../../../geometry/support/spatialReferenceUtils ./surfaceCoordinateSystems ../../../geometry/Point ../../../geometry/Multipoint ../../../geometry/Polyline ../../../geometry/Polygon".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){function E(ca,ha){ha=new U({x:ca[0],y:ca[1],spatialReference:ha});2<ca.length&&(ha.z=ca[2]);return ha}function L(ca,ha,da,X=!0){ca=N.clone(ca);ca.forEach(O=>{w.equals(O[0],O[O.length-1])&&1!==O.length||O.push(O[0])});ca=new C({rings:ca,spatialReference:ha});ca.rings.forEach(O=>{I.isClockwise(O,!1,!1)||O.reverse()});da&&I.unnormalizeGeometryOnDatelineCrossing(ca);X&&ca.isSelfIntersecting&&D.isValid(ha)&&(ca=H.simplify(ca));return ca}function y(ca,ha,da){const X=
G(ha[3],ha[2],da),O=G(ha[1],ha[2],da),K=G(ha[0],ha[1],da);ha=G(ha[0],ha[3],da);return{geometry:ca,midpoints:A.isSome(X)&&A.isSome(O)&&A.isSome(K)&&A.isSome(ha)?{top:X,right:O,bottom:K,left:ha}:null}}function G(ca,ha,da){T[0]=ca.x;T[1]=ca.y;T[2]=0;ia[0]=ha.x;ia[1]=ha.y;ia[2]=0;B.lerp(T,T,ia,.5);Z.x=T[0];Z.y=ia[1];Z.z=ia[2];ca=da.localToMap(Z);return A.isSome(ca)?E(ca,da.spatialReference):null}const Z=J.makeSurfacePoint(0,0,0),T=u.create(),ia=u.create();r.createCircle=function(ca,ha,da,X){var O=ha.mapToLocalMultiple(ca),
K=ca=null;da?(ca=O[0],K=O[1]):(ca=O[0],da=O[1],K=Math.round(da.x-ca.x),da=Math.round(da.y-ca.y),O=Math.max(Math.abs(K),Math.abs(da)),ca=J.makeSurfacePoint(0<K?ca.x+O/2:ca.x-O/2,0<da?ca.y+O/2:ca.y-O/2),K=J.makeSurfacePoint(Math.abs(K)>Math.abs(da)?ca.x-O/2:ca.x,Math.abs(K)>Math.abs(da)?ca.y:ca.y-O/2));da=ha.localToMap(ca);O=ha.localToMap(K);if(A.isNone(da)||A.isNone(O))return null;ha.doUnnormalization&&I.unnormalizeVerticesOnDatelineCrossing([[da,O]],ha.spatialReference);da=E(da,ha.spatialReference);
O=E(O,ha.spatialReference);const Y=P.getMetersPerUnitForSR(ha.spatialReference);var S=0;D.isValid(ha.spatialReference)?S=Y*H.distance(da,O,null):(S=ca.x-K.x,ca=ca.y-K.y,S=Y*Math.sqrt(S*S+ca*ca)*(X||1));ha=new x({center:da,radius:S,radiusUnit:"meters",spatialReference:ha.spatialReference});return{geometry:L(ha.rings,ha.spatialReference,!1),center:da,edge:O}};r.createEllipse=function(ca,ha,da){function X(ua){return J.makeSurfacePoint(S*Math.cos(ua)+Y.x,ea*Math.sin(ua)+Y.y)}var O=ha.mapToLocalMultiple(ca);
ca=O[0];var K=O[1];O=Math.round(K.x-ca.x);K=Math.round(K.y-ca.y);const Y=J.makeSurfacePoint(da?ca.x:ca.x+O/2,da?ca.y:ca.y+K/2),S=da?O:O/2,ea=da?K:K/2;da=[];ca=2*Math.PI/60;for(O=0;60>O;O++)da.push(X(O*ca));da.push(da[0]);const {spatialReference:ja,doUnnormalization:oa}=ha;da=L([A.filterNones(da.map(ua=>ha.localToMap(ua)))],ja,oa,!1);ca=ha.localToMap(X(Math.PI/2));O=ha.localToMap(X(0));K=ha.localToMap(X(-Math.PI/2));const qa=ha.localToMap(X(Math.PI));return{geometry:da,midpoints:A.isSome(ca)&&A.isSome(O)&&
A.isSome(K)&&A.isSome(qa)?{top:E(ca,ja),right:E(O,ja),bottom:E(K,ja),left:E(qa,ja)}:null}};r.createMultipoint=function(ca,ha){return new M({points:ca,spatialReference:ha})};r.createPoint=E;r.createPolygon=L;r.createPolyline=function(ca,ha,da){ca=new Q({paths:ca,spatialReference:ha});da&&I.unnormalizeGeometryOnDatelineCrossing(ca);return ca};r.createRectangle=function(ca,ha,da){var X=ha.mapToLocalMultiple(ca);1===X.length&&(ca=X[0],X=[J.makeSurfacePoint(ca.x-48,ca.y+48),J.makeSurfacePoint(ca.x+48,
ca.y-48),J.makeSurfacePoint(ca.x+48,ca.y-48),J.makeSurfacePoint(ca.x-48,ca.y+48)]);ca=[];var O=X[0].x,K=X[0].y,Y=X[1].x;X=X[1].y;if(da){da=Math.round(Y-O);const S=Math.round(X-K);ca.push(J.makeSurfacePoint(O-da,K-S),J.makeSurfacePoint(Y,K-S),J.makeSurfacePoint(Y,X),J.makeSurfacePoint(O-da,X))}else ca.push(J.makeSurfacePoint(O,K),J.makeSurfacePoint(Y,K),J.makeSurfacePoint(Y,X),J.makeSurfacePoint(O,X));da=L([A.filterNones(ca.map(S=>ha.localToMap(S)))],ha.spatialReference,ha.doUnnormalization,!0);return y(da,
ca,ha)};r.createSquare=function(ca,ha,da){var X=ha.mapToLocalMultiple(ca);ca=[];var O=X[0].x,K=X[0].y,Y=Math.round(X[1].x-O);const S=Math.round(X[1].y-K);X=Math.max(Math.abs(Y),Math.abs(S));da?(da=O+X,Y=K+X,O-=X,K-=X,ca.push(J.makeSurfacePoint(da,K),J.makeSurfacePoint(O,K),J.makeSurfacePoint(O,Y),J.makeSurfacePoint(da,Y))):(da=0<Y?O+X:O-X,X=0<S?K+X:K-X,ca.push(J.makeSurfacePoint(O,K),J.makeSurfacePoint(da,K),J.makeSurfacePoint(da,X),J.makeSurfacePoint(O,X)));K=L([A.filterNones(ca.map(ea=>ha.localToMap(ea)))],
ha.spatialReference,ha.doUnnormalization,!0);return y(K,ca,ha)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./ellipsoidUtils ./Point ./Polygon ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){var U;A=U=function(M){function Q(...E){E=M.call(this,...E)||this;E.center=null;E.geodesic=!1;E.numberOfPoints=60;E.radius=1E3;E.radiusUnit="meters";return E}r._inheritsLoose(Q,M);var C=Q.prototype;C.normalizeCtorArgs=function(E,L){if(!E||!E.center){if(E&&E.rings)return M.prototype.normalizeCtorArgs.call(this,E,L);E={center:E}}return{...M.prototype.normalizeCtorArgs.call(this),...E,...L}};C.initialize=function(){var E=this.center;const L=this.numberOfPoints;this.hasZ=
E?.hasZ??!1;if(0===this.rings.length&&E){var y=w.convertUnit(this.radius,this.radiusUnit,"meters"),G=E.spatialReference,Z="geographic";if(G.isWebMercator)Z="webMercator";else if(null!=(G.wkid&&J[G.wkid])||G.wkt&&0===G.wkt.indexOf("PROJCS"))Z="projected";if(this.geodesic){let T;switch(Z){case "webMercator":T=D.webMercatorToGeographic(E);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":T=
E}E=this._createGeodesicCircle(T,y,L);"webMercator"===Z&&(E=D.geographicToWebMercator(E))}else{let T;"webMercator"===Z||"projected"===Z?T=y/this._convert2Meters(1,E.spatialReference):"geographic"===Z&&(T=w.lengthToDegrees(y,"meters",u.getReferenceEllipsoid(E.spatialReference).radius));E=this._createPlanarCircle(E,T,L)}this.spatialReference=E.spatialReference;this.addRing(E.rings[0])}};C.clone=function(){const {center:E,numberOfPoints:L,radius:y,radiusUnit:G,geodesic:Z}=this;return new U({center:E?.clone(),
numberOfPoints:L,radius:y,radiusUnit:G,geodesic:Z})};C._createGeodesicCircle=function(E,L,y){let G=0;const Z=[];for(;360>G;){const T=[0,0];I.directGeodeticSolver(T,[E.x,E.y],G,L);this.hasZ&&T.push(E.z);Z.push(T);G+=360/y}Z.push(Z[0]);return new H(Z)};C._createPlanarCircle=function(E,L,y){const G=[],Z=2*Math.PI/y;for(let ia=0;ia<y;++ia){var T=Z*ia;T=[E.x+Math.cos(-T)*L,E.y+Math.sin(-T)*L];this.hasZ&&T.push(E.z);G.push(T)}G.push(G[0]);return new H({spatialReference:E.spatialReference,rings:[G]})};C._convert2Meters=
function(E,L){if(L.wkid&&null!=J[L.wkid])L=J.values[J[L.wkid]];else{L=L.wkt;const y=L.lastIndexOf(",")+1,G=L.lastIndexOf("]]");L=parseFloat(L.substring(y,G))}return E*L};return Q}(H);V.__decorate([N.property({type:x})],A.prototype,"center",void 0);V.__decorate([N.property()],A.prototype,"geodesic",void 0);V.__decorate([N.property()],A.prototype,"numberOfPoints",void 0);V.__decorate([N.property()],A.prototype,"radius",void 0);V.__decorate([N.property()],A.prototype,"radiusUnit",void 0);return A=U=
V.__decorate([B.subclass("esri.geometry.Circle")],A)})},"esri/views/draw/support/surfaceCoordinateSystems":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/maybe ../../../chunks/mat2d ../../../chunks/mat2df64 ../../../chunks/quat ../../../chunks/quatf64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/support/Axis ../../../geometry/Point".split(" "),function(r,V,w,N,A,P,B,u,x,H,I,D){function J(C,E,L=null){return N.isSome(L)?[C,E,L]:
[C,E]}function U(C,E,L=null){return N.isSome(L)?{x:C,y:E,z:L}:{x:C,y:E}}w=function(){function C(E){this.spatialReference=E}C.prototype.mapToLocalMultiple=function(E){return N.filterNones(E.map(L=>this.mapToLocal(L)))};V._createClass(C,[{key:"doUnnormalization",get:function(){return!1}}]);return C}();let M=function(C){function E(y,G,Z=null){G=C.call(this,G)||this;G._defaultZ=Z;G.transform=P.create();G.transformInv=P.create();G.transform=P.clone(y);A.invert(G.transformInv,G.transform);return G}V._inheritsLoose(E,
C);var L=E.prototype;L.makeMapPoint=function(y,G){return J(y,G,this._defaultZ)};L.mapToLocal=function(y){return U(this.transform[0]*y[0]+this.transform[2]*y[1]+this.transform[4],this.transform[1]*y[0]+this.transform[3]*y[1]+this.transform[5])};L.localToMap=function(y){return J(this.transformInv[0]*y.x+this.transformInv[2]*y.y+this.transformInv[4],this.transformInv[1]*y.x+this.transformInv[3]*y.y+this.transformInv[5],this._defaultZ)};return E}(w),Q=function(C){function E(y,G){var Z=C.call(this,y.spatialReference)||
this;Z.view=y;Z.defaultZ=null;Z.pWS=H.create();Z.tangentFrameUpWS=H.create();Z.tangentFrameRightWS=H.create();Z.tangentFrameForwardWS=H.create();Z.localFrameRightWS=H.create();Z.localFrameUpWS=H.create();Z.worldToLocalTransform=u.create();Z.localToWorldTransform=u.create();Z.scale=1;Z.scale=y.resolution;Z.referenceMapPoint=G;Z.defaultZ=G.hasZ?G.z:null;y=y.state.camera.viewRight;Z.view.renderCoordsHelper.toRenderCoords(Z.referenceMapPoint,Z.pWS);Z.view.renderCoordsHelper.worldBasisAtPosition(Z.pWS,
I.Axis.X,Z.tangentFrameRightWS);Z.view.renderCoordsHelper.worldBasisAtPosition(Z.pWS,I.Axis.Y,Z.tangentFrameUpWS);Z.view.renderCoordsHelper.worldBasisAtPosition(Z.pWS,I.Axis.Z,Z.tangentFrameForwardWS);G=H.create();x.scale(G,Z.tangentFrameForwardWS,x.dot(y,Z.tangentFrameForwardWS));x.subtract(Z.localFrameRightWS,y,G);x.normalize(Z.localFrameRightWS,Z.localFrameRightWS);x.cross(Z.localFrameUpWS,Z.tangentFrameForwardWS,Z.localFrameRightWS);B.rotationTo(Z.worldToLocalTransform,Z.localFrameRightWS,Z.tangentFrameRightWS);
B.invert(Z.localToWorldTransform,Z.worldToLocalTransform);return Z}V._inheritsLoose(E,C);var L=E.prototype;L.makeMapPoint=function(y,G){return J(y,G,this.defaultZ)};L.mapToLocal=function(y){const G=H.create();this.view.renderCoordsHelper.toRenderCoords(new D({x:y[0],y:y[1],spatialReference:this.spatialReference}),G);x.transformQuat(G,G,this.worldToLocalTransform);y=this.view.renderCoordsHelper.fromRenderCoords(G,this.view.spatialReference);return N.isSome(y)?U(y.x/this.scale,y.y/this.scale):null};
L.localToMap=function(y){const G=H.create();this.view.renderCoordsHelper.toRenderCoords(new D({x:y.x*this.scale,y:y.y*this.scale,spatialReference:this.spatialReference}),G);x.transformQuat(G,G,this.localToWorldTransform);y=this.view.renderCoordsHelper.fromRenderCoords(G,this.view.spatialReference);return N.isSome(y)?J(y.x,y.y,this.defaultZ):null};V._createClass(E,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}}]);return E}(w);r.AffineCoordinateSystem=M;r.SceneViewCoordinateSystem=
Q;r.SurfaceCoordinateSystem=w;r.createViewAlignedCoordinateSystem=function(C,E){return"2d"===C.type?new M(C.state.transform,C.spatialReference,2<E.length?E[2]:null):"3d"===C.type?(E=2<E.length?new D({x:E[0],y:E[1],z:E[2],spatialReference:C.spatialReference}):new D({x:E[0],y:E[1],spatialReference:C.spatialReference}),new Q(C,E)):null};r.makeMapPoint=J;r.makeSurfacePoint=U;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/support/helpMessageUtils":function(){define(["exports",
"../../../core/maybe"],function(r,V){r.getDrawHelpMessage=function(w,N){switch(w){case "point":case "multipoint":return"point";case "polyline":return 2>(V.isSome(N)&&"polyline"===N.type&&N.paths.length?N.paths[0].length:0)?"polylineZeroVertices":"polylineOneVertex";case "polygon":return w=V.isSome(N)&&"polygon"===N.type&&N.rings.length?N.rings[0].length:0,3>w?"polylineZeroVertices":4>w?"polygonOneVertex":"polygonTwoVertices"}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/InteractiveToolBase":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./interfaces ./ManipulatorCollection".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){r.InteractiveToolBase=function(U){function M(C){C=U.call(this,C)||this;C.manipulators=new J.ManipulatorCollection;C.automaticManipulatorSelection=!0;C.hasGrabbedManipulators=!1;C.hasHoveredManipulators=!1;C.firstGrabbedManipulator=null;C.created=!1;C.removeIncompleteOnCancel=!0;C._editableFlags=new Map([[D.EditableFlag.MANAGER,!0],[D.EditableFlag.USER,!0]]);C._creationFinishedResolver=B.createResolver();return C}V._inheritsLoose(M,U);var Q=M.prototype;Q.destroy=
function(){this.manipulators.destroy();this._set("view",null)};Q.onAdd=function(){this._syncVisible()};Q.activate=function(){P.isNone(this.view)?A.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(this.view.focus(),this.onActivate())};Q.deactivate=function(){this.onDeactivate()};Q.handleInputEvent=function(C){this.onInputEvent(C)};Q.handleInputEventAfter=function(C){this.onInputEventAfter(C)};Q.setEditableFlag=function(C,E){this._editableFlags.set(C,E);this.manipulators.isToolEditable=
this.internallyEditable;this._updateManipulatorAttachment();C===D.EditableFlag.USER&&this.notifyChange("editable");this.onEditableChange();this.onManipulatorSelectionChanged()};Q.getEditableFlag=function(C){return this._editableFlags.get(C)??!1};Q.whenCreated=function(){return this._creationFinishedResolver.promise};Q.onManipulatorSelectionChanged=function(){};Q.onActivate=function(){};Q.onDeactivate=function(){};Q.onShow=function(){};Q.onHide=function(){};Q.onEditableChange=function(){};Q.onInputEvent=
function(C){};Q.onInputEventAfter=function(C){};Q.finishToolCreation=function(){this.created||this._creationFinishedResolver.resolve(this);this._set("created",!0)};Q._syncVisible=function(){this.initialized&&(this.visible?this._show():(this._hide(),this.active&&(this.view.activeTool=null)))};Q._show=function(){this._updateManipulatorAttachment();this.onShow()};Q._hide=function(){this._updateManipulatorAttachment();this.onHide()};Q._updateManipulatorAttachment=function(){this.visible?this.manipulators.attach():
this.manipulators.detach()};V._createClass(M,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"visible",set:function(C){this._get("visible")!==C&&(this._set("visible",C),this._syncVisible())}},{key:"editable",get:function(){return this.getEditableFlag(D.EditableFlag.USER)},set:function(C){this.setEditableFlag(D.EditableFlag.USER,C)}},{key:"updating",get:function(){return!1}},{key:"cursor",get:function(){return null}},{key:"hasFocusedManipulators",get:function(){return this.hasGrabbedManipulators||
this.hasHoveredManipulators}},{key:"internallyEditable",get:function(){return this.getEditableFlag(D.EditableFlag.USER)&&this.getEditableFlag(D.EditableFlag.MANAGER)}}]);return M}(N);w.__decorate([u.property({constructOnly:!0})],r.InteractiveToolBase.prototype,"view",void 0);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"active",null);w.__decorate([u.property({value:!0})],r.InteractiveToolBase.prototype,"visible",null);w.__decorate([u.property({value:!0})],r.InteractiveToolBase.prototype,
"editable",null);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"manipulators",void 0);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"updating",null);w.__decorate([u.property()],r.InteractiveToolBase.prototype,"cursor",null);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"automaticManipulatorSelection",void 0);w.__decorate([u.property()],r.InteractiveToolBase.prototype,"hasFocusedManipulators",null);w.__decorate([u.property()],
r.InteractiveToolBase.prototype,"hasGrabbedManipulators",void 0);w.__decorate([u.property()],r.InteractiveToolBase.prototype,"hasHoveredManipulators",void 0);w.__decorate([u.property()],r.InteractiveToolBase.prototype,"firstGrabbedManipulator",void 0);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"created",void 0);w.__decorate([u.property({readOnly:!0})],r.InteractiveToolBase.prototype,"removeIncompleteOnCancel",void 0);r.InteractiveToolBase=w.__decorate([I.subclass("esri.views.interactive.InteractiveToolBase")],
r.InteractiveToolBase);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/ManipulatorCollection":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/Collection","../../core/maybe"],function(r,V,w,N){r.ManipulatorVisibilityPredicate=void 0;(function(P){P[P.WhenToolEditable=0]="WhenToolEditable";P[P.WhenToolNotEditable=1]="WhenToolNotEditable";P[P.Always=2]="Always"})(r.ManipulatorVisibilityPredicate||(r.ManipulatorVisibilityPredicate=
{}));let A=function(){function P(){this._isToolEditable=!0;this._manipulators=new w;this._resourceContexts={manipulator3D:{}};this._attached=!1}var B=P.prototype;B.add=function(u,x=r.ManipulatorVisibilityPredicate.WhenToolEditable){this.addMany([u],x)};B.addMany=function(u,x=r.ManipulatorVisibilityPredicate.WhenToolEditable){for(const H of u)u={manipulator:H,visibilityPredicate:x,attached:!1},this._manipulators.add(u),this._attached&&this._updateManipulatorAttachment(u)};B.remove=function(u){for(let x=
0;x<this._manipulators.length;x++)if(this._manipulators.getItemAt(x).manipulator===u){u=this._manipulators.splice(x,1)[0];this._detachManipulator(u);break}};B.removeAll=function(){this._manipulators.forEach(u=>{this._detachManipulator(u)});this._manipulators.removeAll()};B.attach=function(){this._manipulators.forEach(u=>{this._updateManipulatorAttachment(u)});this._attached=!0};B.detach=function(){this._manipulators.forEach(u=>{this._detachManipulator(u)});this._attached=!1};B.destroy=function(){this.detach();
this._manipulators.forEach(({manipulator:u})=>{u.destroy&&u.destroy()});this._manipulators.destroy();this._resourceContexts=null};B.on=function(u,x){return this._manipulators.on(u,H=>{x(H)})};B.forEach=function(u){for(const x of this._manipulators.items)u(x)};B.some=function(u){return this._manipulators.items.some(u)};B.toArray=function(){const u=[];this.forEach(x=>u.push(x.manipulator));return u};B.intersect=function(u,x){let H=null,I=Number.MAX_VALUE;this._manipulators.forEach(({manipulator:D,attached:J})=>
{J&&D.interactive&&(J=D.intersectionDistance(u,x),N.isSome(J)&&J<I&&(I=J,H=D))});return H};B._updateManipulatorAttachment=function(u){this._isManipulatorItemVisible(u)?this._attachManipulator(u):this._detachManipulator(u)};B._attachManipulator=function(u){u.attached||(u.manipulator.attach&&u.manipulator.attach(this._resourceContexts),u.attached=!0)};B._detachManipulator=function(u){if(u.attached){var x=u.manipulator;x.grabbing=!1;x.dragging=!1;x.hovering=!1;x.selected=!1;x.detach&&x.detach(this._resourceContexts);
u.attached=!1}};B._isManipulatorItemVisible=function(u){return u.visibilityPredicate===r.ManipulatorVisibilityPredicate.Always?!0:this._isToolEditable?u.visibilityPredicate===r.ManipulatorVisibilityPredicate.WhenToolEditable:u.visibilityPredicate===r.ManipulatorVisibilityPredicate.WhenToolNotEditable};V._createClass(P,[{key:"isToolEditable",set:function(u){this._isToolEditable=u}},{key:"length",get:function(){return this._manipulators.length}}]);return P}();r.ManipulatorCollection=A;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(r,V,w,N,A,P,B){w=function(u){function x(H){H=u.call(this,H)||this;H.enabled=!1;return H}r._inheritsLoose(x,u);return x}(w);
V.__decorate([N.property({type:Boolean,nonNullable:!0})],w.prototype,"enabled",void 0);return w=V.__decorate([B.subclass("esri.views.interactive.sketch.SketchLabelOptions")],w)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./SketchTooltipElevationOptions ./SketchTooltipVisibleElements".split(" "),
function(r,V,w,N,A,P,B,u,x){w=function(H){function I(D){D=H.call(this,D)||this;D.enabled=!1;D.elevation=new u.SketchTooltipElevationOptions;D.visibleElements=new x.SketchTooltipVisibleElements;D.visualVariables=null;return D}r._inheritsLoose(I,H);I.prototype.toJSON=function(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}};return I}(w);V.__decorate([N.property({type:Boolean,nonNullable:!0})],w.prototype,"enabled",void 0);V.__decorate([N.property({type:u.SketchTooltipElevationOptions,
nonNullable:!0})],w.prototype,"elevation",void 0);V.__decorate([N.property({type:x.SketchTooltipVisibleElements,nonNullable:!0})],w.prototype,"visibleElements",void 0);V.__decorate([N.property()],w.prototype,"visualVariables",void 0);return w=V.__decorate([B.subclass("esri.widgets.Sketch.SketchTooltipOptions")],w)})},"esri/views/interactive/sketch/SketchTooltipElevationOptions":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,V,w,N,A,P,B,u){r.SketchTooltipElevationOptions=function(x){function H(I){I=x.call(this,I)||this;I.mode="absolute-height";return I}V._inheritsLoose(H,x);H.prototype.toJSON=function(){return{mode:this.mode}};return H}(N);w.__decorate([A.property({type:String,nonNullable:!0})],r.SketchTooltipElevationOptions.prototype,"mode",void 0);r.SketchTooltipElevationOptions=w.__decorate([u.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],r.SketchTooltipElevationOptions);Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchTooltipVisibleElements":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(r,V,w,N,A,P,B,u){r.SketchTooltipVisibleElements=function(x){function H(){var I=x.apply(this,arguments)||
this;I.distance=!0;I.elevation=!0;I.size=!0;I.scale=!0;I.rotation=!0;I.orientation=!0;I.totalLength=!0;I.area=!0;I.radius=!0;I.helpMessage=!1;return I}V._inheritsLoose(H,x);H.prototype.toJSON=function(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}};return H}(N);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"distance",
void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"elevation",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"size",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"scale",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"rotation",void 0);w.__decorate([A.property({type:Boolean,
nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"orientation",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"totalLength",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"area",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,"radius",void 0);w.__decorate([A.property({type:Boolean,nonNullable:!0})],r.SketchTooltipVisibleElements.prototype,
"helpMessage",void 0);r.SketchTooltipVisibleElements=w.__decorate([u.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],r.SketchTooltipVisibleElements);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/DrawTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(r,V,w,N,A,P,B){r.DrawPointTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="draw-point";H.helpMessage=void 0;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.DrawPointTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.DrawPointTooltipInfo.prototype,"elevation",void 0);w.__decorate([A.property()],r.DrawPointTooltipInfo.prototype,"viewType",void 0);w.__decorate([A.property()],r.DrawPointTooltipInfo.prototype,"helpMessage",
void 0);r.DrawPointTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.DrawPointTooltipInfo")],r.DrawPointTooltipInfo);r.DrawPolylineTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="draw-polyline";H.totalLength=N.zeroMeters;H.helpMessage=void 0;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.DrawPolylineTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.DrawPolylineTooltipInfo.prototype,"elevation",void 0);
w.__decorate([A.property()],r.DrawPolylineTooltipInfo.prototype,"totalLength",void 0);w.__decorate([A.property()],r.DrawPolylineTooltipInfo.prototype,"viewType",void 0);w.__decorate([A.property()],r.DrawPolylineTooltipInfo.prototype,"helpMessage",void 0);r.DrawPolylineTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],r.DrawPolylineTooltipInfo);r.DrawPolygonTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="draw-polygon";H.area=N.zeroSquareMeters;
H.helpMessage=void 0;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.DrawPolygonTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.DrawPolygonTooltipInfo.prototype,"elevation",void 0);w.__decorate([A.property()],r.DrawPolygonTooltipInfo.prototype,"area",void 0);w.__decorate([A.property()],r.DrawPolygonTooltipInfo.prototype,"viewType",void 0);w.__decorate([A.property()],r.DrawPolygonTooltipInfo.prototype,"helpMessage",void 0);r.DrawPolygonTooltipInfo=
w.__decorate([P.subclass("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],r.DrawPolygonTooltipInfo);r.DrawRectangleTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="draw-rectangle";H.xSize=N.zeroMeters;H.ySize=N.zeroMeters;H.area=N.zeroSquareMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.DrawRectangleTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.DrawRectangleTooltipInfo.prototype,"xSize",void 0);w.__decorate([A.property()],
r.DrawRectangleTooltipInfo.prototype,"ySize",void 0);w.__decorate([A.property()],r.DrawRectangleTooltipInfo.prototype,"area",void 0);r.DrawRectangleTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],r.DrawRectangleTooltipInfo);r.DrawCircleTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="draw-circle";H.radius=null;H.xSize=null;H.ySize=null;H.area=N.zeroSquareMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],
r.DrawCircleTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.DrawCircleTooltipInfo.prototype,"radius",void 0);w.__decorate([A.property()],r.DrawCircleTooltipInfo.prototype,"xSize",void 0);w.__decorate([A.property()],r.DrawCircleTooltipInfo.prototype,"ySize",void 0);w.__decorate([A.property()],r.DrawCircleTooltipInfo.prototype,"area",void 0);r.DrawCircleTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],r.DrawCircleTooltipInfo);Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/SketchTooltipInfo":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(r,V,w,N,A,P,B,u){r.SketchTooltipInfo=function(x){function H(I){I=x.call(this,I)||this;I.helpMessage=void 0;
return I}V._inheritsLoose(H,x);return H}(N);w.__decorate([A.property()],r.SketchTooltipInfo.prototype,"tooltipOptions",void 0);w.__decorate([A.property()],r.SketchTooltipInfo.prototype,"helpMessage",void 0);r.SketchTooltipInfo=w.__decorate([u.subclass("esri.views.interactive.tooltip.SketchTooltipInfo")],r.SketchTooltipInfo);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/Tooltip":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./css ./content/tooltipContentFactory ../../../widgets/support/widgetUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){function U({container:C,contentWidget:E,screenPoint:L}){const {style:y}=C;A.isSome(L)&&A.isSome(E)?(y.display="block",C=J.isRTL(C),L=`translate(${Math.round(L.x)+Q[0]*(C?-1:1)}px, ${Math.round(L.y)+Q[1]}px)`,y.transform=C?`translate(-100%, 0) ${L}`:L):y.display="none"}var M=`${I.BASE}`;r.Tooltip=function(C){function E(y){y=C.call(this,y)||this;y.info=null;const G=document.createElement("div");G.classList.add(M);y._contentContainer=G;y._contentWidget=null;return y}
V._inheritsLoose(E,C);var L=E.prototype;L.initialize=function(){const y=this._contentContainer;this.addHandles([P.watch(()=>this.view.overlay?.surface,G=>{y.remove();A.applySome(G,Z=>Z.appendChild(y))},P.syncAndInitial),P.watch(()=>this.info,(G,Z)=>{A.isSome(this._contentWidget)&&A.isSome(G)&&A.isSome(Z)&&G.type===Z.type?this._contentWidget.info=G:(this._contentWidget=A.destroyMaybe(this._contentWidget),A.applySome(D.tooltipContentFactory(this,G),T=>{this._contentWidget=T;T.container&&y.appendChild(T.container)}))},
P.syncAndInitial),P.watch(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),U,P.syncAndInitial)])};L.destroy=function(){this._contentWidget=A.destroyMaybe(this._contentWidget);this._contentContainer.remove()};L.clear=function(){this.info=null};V._createClass(E,[{key:"_screenPoint",get:function(){const y=this.view.inputManager;return y?.multiTouchActive?null:y?.latestPointerLocation}},{key:"test",get:function(){return{contentContainer:this._contentContainer,
visible:"none"!==this._contentContainer?.style.display}}}]);return E}(N);w.__decorate([B.property({nonNullable:!0})],r.Tooltip.prototype,"view",void 0);w.__decorate([B.property()],r.Tooltip.prototype,"info",void 0);w.__decorate([B.property()],r.Tooltip.prototype,"_contentContainer",void 0);w.__decorate([B.property()],r.Tooltip.prototype,"_contentWidget",void 0);w.__decorate([B.property()],r.Tooltip.prototype,"_screenPoint",null);r.Tooltip=w.__decorate([H.subclass("esri.views.interactive.tooltip.Tooltip")],
r.Tooltip);const Q=[20,20];Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/css":function(){define(["exports"],function(r){r.BASE="esri-tooltip";r.CONTENT="esri-tooltip-content";r.HELP_MESSAGE="esri-tooltip-help-message";r.TABLE="esri-tooltip-table";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/tooltipContentFactory":function(){define("exports ../../../../core/maybe ./TooltipContentDrawCircle ./TooltipContentDrawPoint ./TooltipContentDrawPolygon ./TooltipContentDrawPolyline ./TooltipContentDrawRectangle ./TooltipContentExtentRotate ./TooltipContentExtentScale ./TooltipContentReshapeEdgeOffset ./TooltipContentTransformAbsolute ./TooltipContentTransformRotate ./TooltipContentTransformScale ./TooltipContentTranslateGraphic ./TooltipContentTranslateGraphicXY ./TooltipContentTranslateGraphicZ ./TooltipContentTranslateVertex ./TooltipContentTranslateVertexXY ./TooltipContentTranslateVertexZ".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L){r.tooltipContentFactory=function(y,G){if(V.isNone(G))return null;const Z=document.createElement("div");switch(G.type){case "draw-point":return new N.TooltipContentDrawPoint({tooltip:y,info:G,container:Z});case "draw-polygon":return new A.TooltipContentDrawPolygon({tooltip:y,info:G,container:Z});case "draw-polyline":return new P.TooltipContentDrawPolyline({tooltip:y,info:G,container:Z});case "draw-rectangle":return new B.TooltipContentDrawRectangle({tooltip:y,
info:G,container:Z});case "draw-circle":return new w.TooltipContentDrawCircle({tooltip:y,info:G,container:Z});case "extent-rotate":return new u.TooltipContentExtentRotate({tooltip:y,info:G,container:Z});case "extent-scale":return new x.TooltipContentExtentScale({tooltip:y,info:G,container:Z});case "transform-absolute":return new I.TooltipContentTransformAbsolute({tooltip:y,info:G,container:Z});case "transform-rotate":return new D.TooltipContentTransformRotate({tooltip:y,info:G,container:Z});case "transform-scale":return new J.TooltipContentTransformScale({tooltip:y,
info:G,container:Z});case "translate-graphic":return new U.TooltipContentTranslateGraphic({tooltip:y,info:G,container:Z});case "translate-graphic-z":return new Q.TooltipContentTranslateGraphicZ({tooltip:y,info:G,container:Z});case "translate-graphic-xy":return new M.TooltipContentTranslateGraphicXY({tooltip:y,info:G,container:Z});case "translate-vertex":return new C.TooltipContentTranslateVertex({tooltip:y,info:G,container:Z});case "translate-vertex-z":return new L.TooltipContentTranslateVertexZ({tooltip:y,
info:G,container:Z});case "translate-vertex-xy":return new E.TooltipContentTranslateVertexXY({tooltip:y,info:G,container:Z});case "reshape-edge-offset":return new H.TooltipContentReshapeEdgeOffset({tooltip:y,info:G,container:Z})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawCircle":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){var E=`${I.CONTENT} ${`${I.CONTENT}--draw-rectangle`}`;r.TooltipContentDrawCircle=function(L){function y(){return L.apply(this,arguments)||this}V._inheritsLoose(y,L);y.prototype.render=function(){const {area:G,radius:Z,xSize:T,ySize:ia,tooltipOptions:ca}=this.info,{visibleElements:ha}=ca,da=this._messagesTooltip.sketch;return C.tsx(J.TooltipContentWithHelpMessage,{className:E,helpMessage:this._getHelpMessage()},ha.radius&&N.isSome(Z)&&C.tsx(U.TooltipField,
{title:da.radius,value:this._formatLength(Z)}),ha.size&&N.isSome(T)&&N.isSome(ia)&&C.tsx(U.TooltipField,{title:da.size,value:C.tsx(M.ValueByValue,{left:this._formatLength(T),right:this._formatLength(ia)})}),ha.area&&C.tsx(U.TooltipField,{title:da.area,value:this._formatArea(G)}))};return y}(D.TooltipContent);r.TooltipContentDrawCircle=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],r.TooltipContentDrawCircle);Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContent":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../intl ../../../../core/maybe ../../../../core/quantityFormatUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../../../../support/getDefaultUnitForView ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/decorators/messageBundle ../../../../intl/number".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){r.TooltipContent=function(Q){function C(){return Q.apply(this,arguments)||this}V._inheritsLoose(C,Q);var E=C.prototype;E._getHelpMessage=function(L){const {info:y}=this,{tooltipOptions:G,helpMessage:Z,viewType:T}=y;L=L??Z;return G?.visibleElements?.helpMessage&&L?this._messagesTooltip?.sketch?.["3d"===T?"helpMessages3d":"helpMessages2d"]?.[L]:void 0};E._formatScale=function(L){return M.formatNumber(L,{style:"percent",maximumFractionDigits:0})};E._formatRelativeOrientation=
function(L){return M.formatNumber(L,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})};E._formatLength=function(L,y,G){return P.formatLength(this._messagesUnits,L,A.unwrapOr(y,this._units.length),G)};E._formatRelativeLength=function(L){return P.formatRelativeLength(this._messagesUnits,L,this._units.length)};E._formatVerticalLength=function(L){return P.formatVerticalLength(this._messagesUnits,L,this._units.verticalLength)};E._formatRelativeVerticalLength=function(L){return P.formatRelativeVerticalLength(this._messagesUnits,
L,this._units.verticalLength)};E._formatTotalLength=function(L){return P.formatLength(this._messagesUnits,L,this._units.length)};E._formatArea=function(L){return P.formatArea(this._messagesUnits,L,this._units.area)};E._formatPercentage=function(L){return M.formatNumber(L.value,{style:"percent"})};V._createClass(C,[{key:"_units",get:function(){const L=I.getDefaultUnitForView(this.tooltip.view);return{length:L,verticalLength:L,area:L}}}]);return C}(D);w.__decorate([B.property()],r.TooltipContent.prototype,
"info",void 0);w.__decorate([B.property()],r.TooltipContent.prototype,"tooltip",void 0);w.__decorate([B.property()],r.TooltipContent.prototype,"_units",null);w.__decorate([U.messageBundle("esri/core/t9n/Units"),B.property()],r.TooltipContent.prototype,"_messagesUnits",void 0);w.__decorate([U.messageBundle("esri/views/interactive/tooltip/t9n/Tooltip"),B.property()],r.TooltipContent.prototype,"_messagesTooltip",void 0);r.TooltipContent=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContent")],
r.TooltipContent);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/TooltipContentWithHelpMessage":function(){define(["exports","../css","../../../../widgets/support/widgetUtils","../../../../widgets/support/jsxFactory"],function(r,V,w,N){r.TooltipContentWithHelpMessage=function({className:A,helpMessage:P},...B){B=B.filter(u=>!!u);return N.tsx("div",{class:w.classes(A,V.CONTENT)},0<B.length?N.tsx("div",{class:V.TABLE},...B):null,P?N.tsx("div",
{key:"help-message",class:V.HELP_MESSAGE},P):null)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/TooltipField":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../css ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){const D=`${u.BASE}-field`;var J=`${D}__title`,U=`${D}__value`;r.TooltipField=function(M){function Q(){return M.apply(this,arguments)||this}V._inheritsLoose(Q,M);Q.prototype.render=function(){return I.tsx("div",{class:D},I.tsx("div",{class:J},this.title),I.tsx("div",{class:U},this.value))};return Q}(x);w.__decorate([N.property()],r.TooltipField.prototype,"title",void 0);w.__decorate([N.property()],r.TooltipField.prototype,"value",void 0);r.TooltipField=w.__decorate([B.subclass("esri.views.interactive.tooltip.support.TooltipField")],
r.TooltipField);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/support/ValueByValue":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../css ../../../../widgets/Widget ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){var D=`${u.BASE}-value-by-value`;r.ValueByValue=function(J){function U(){var M=J.apply(this,arguments)||this;M.divider="\u00d7";return M}V._inheritsLoose(U,J);U.prototype.render=function(){return I.tsx("div",{class:D},I.tsx("span",null,this.left),I.tsx("span",null,this.divider),I.tsx("span",null,this.right))};return U}(x);w.__decorate([N.property()],r.ValueByValue.prototype,"left",void 0);w.__decorate([N.property()],r.ValueByValue.prototype,"divider",void 0);w.__decorate([N.property()],
r.ValueByValue.prototype,"right",void 0);r.ValueByValue=w.__decorate([B.subclass("esri.views.interactive.tooltip.support.ValueByValue")],r.ValueByValue);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPoint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT}--draw-point`;r.TooltipContentDrawPoint=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {elevation:L,tooltipOptions:y}=this.info,{visibleElements:G}=y,Z=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},G.elevation&&M.tsx(J.TooltipField,{title:Z.elevation,value:this._formatVerticalLength(L)}))};return E}(I.TooltipContent);
r.TooltipContentDrawPoint=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],r.TooltipContentDrawPoint);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPolygon":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--draw-polygon`}`;r.TooltipContentDrawPolygon=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {area:L,elevation:y,tooltipOptions:G,viewType:Z}=this.info,{visibleElements:T}=G,ia=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},T.elevation&&"2d"!==Z&&M.tsx(J.TooltipField,{title:ia.elevation,
value:this._formatVerticalLength(y)}),T.area&&M.tsx(J.TooltipField,{title:ia.area,value:this._formatArea(L)}))};return E}(I.TooltipContent);r.TooltipContentDrawPolygon=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],r.TooltipContentDrawPolygon);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawPolyline":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--draw-polyline`}`;r.TooltipContentDrawPolyline=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {elevation:L,totalLength:y,tooltipOptions:G,viewType:Z}=this.info,{visibleElements:T}=G,ia=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},T.elevation&&"2d"!==Z&&M.tsx(J.TooltipField,
{title:ia.elevation,value:this._formatVerticalLength(L)}),T.totalLength&&M.tsx(J.TooltipField,{title:ia.totalLength,value:this._formatLength(y)}))};return E}(I.TooltipContent);r.TooltipContentDrawPolyline=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],r.TooltipContentDrawPolyline);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentDrawRectangle":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){var E=`${I.CONTENT} ${`${I.CONTENT}--draw-rectangle`}`;r.TooltipContentDrawRectangle=function(L){function y(){return L.apply(this,arguments)||this}V._inheritsLoose(y,L);y.prototype.render=function(){const {area:G,xSize:Z,ySize:T,tooltipOptions:ia}=this.info,{visibleElements:ca}=ia,ha=this._messagesTooltip.sketch;return C.tsx(J.TooltipContentWithHelpMessage,{className:E,helpMessage:this._getHelpMessage()},ca.size&&N.isSome(Z)&&N.isSome(T)&&C.tsx(U.TooltipField,
{title:ha.size,value:C.tsx(M.ValueByValue,{left:this._formatLength(Z),right:this._formatLength(T)})}),ca.area&&C.tsx(U.TooltipField,{title:ha.area,value:this._formatArea(G)}))};return y}(D.TooltipContent);r.TooltipContentDrawRectangle=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],r.TooltipContentDrawRectangle);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentExtentRotate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--extent-rotate`}`;r.TooltipContentExtentRotate=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {angle:L,tooltipOptions:y}=this.info,{visibleElements:G}=y,Z=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},G.rotation&&M.tsx(J.TooltipField,{title:Z.rotation,value:this._formatRelativeOrientation(L)}))};
return E}(I.TooltipContent);r.TooltipContentExtentRotate=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],r.TooltipContentExtentRotate);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentExtentScale":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../support/ValueByValue ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${H.CONTENT} ${`${H.CONTENT}--extent-scale`}`;r.TooltipContentExtentScale=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const y=this.info,{visibleElements:G}=y.tooltipOptions,Z=this._messagesTooltip.sketch;return Q.tsx(D.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},G.size&&Q.tsx(J.TooltipField,{title:Z.size,value:Q.tsx(U.ValueByValue,{left:this._formatLength(y.xSize),
right:this._formatLength(y.ySize)})}),G.scale&&Q.tsx(J.TooltipField,{title:Z.scale,value:Q.tsx(U.ValueByValue,{left:this._formatScale(y.xScale),right:this._formatScale(y.yScale)})}))};return L}(I.TooltipContent);r.TooltipContentExtentScale=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],r.TooltipContentExtentScale);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentReshapeEdgeOffset":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--reshape-edge-offset`}`;r.TooltipContentReshapeEdgeOffset=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {area:y,distance:G,totalLength:Z,tooltipOptions:T}=this.info,{visibleElements:ia}=T,ca=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},ia.distance&&Q.tsx(U.TooltipField,{title:ca.distance,
value:this._formatRelativeLength(G)}),ia.area&&N.isSome(y)&&Q.tsx(U.TooltipField,{title:ca.area,value:this._formatArea(y)}),ia.totalLength&&N.isSome(Z)&&Q.tsx(U.TooltipField,{title:ca.totalLength,value:this._formatLength(Z)}))};return L}(D.TooltipContent);r.TooltipContentReshapeEdgeOffset=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],r.TooltipContentReshapeEdgeOffset);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTransformAbsolute":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/quantityFormatUtils ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--transform-absolute`}`;r.TooltipContentTransformAbsolute=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {info:y}=this,{visibleElements:G}=y.tooltipOptions,Z=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},G.orientation&&y.orientationEnabled&&Q.tsx(U.TooltipField,{title:Z.orientation,
value:N.formatAngle(y.orientation,y.rotationType,y.orientationPrecision)}),G.size&&y.sizeEnabled&&Q.tsx(U.TooltipField,{title:Z.size,value:this._formatLength(y.size,y.sizeUnit,y.sizePrecision)}))};return L}(D.TooltipContent);r.TooltipContentTransformAbsolute=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],r.TooltipContentTransformAbsolute);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTransformRotate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/quantityFormatUtils ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--transform-rotate`}`;r.TooltipContentTransformRotate=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {info:y}=this,{visibleElements:G}=y.tooltipOptions,Z=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},G.rotation&&Q.tsx(U.TooltipField,{title:Z.rotation,value:N.formatRelativeAngle(y.rotation,
y.rotationType,y.rotationPrecision)}),G.orientation&&Q.tsx(U.TooltipField,{title:Z.orientation,value:N.formatAngle(y.orientation,y.rotationType,y.orientationPrecision)}))};return L}(D.TooltipContent);r.TooltipContentTransformRotate=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],r.TooltipContentTransformRotate);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTransformScale":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--transform-scale`}`;r.TooltipContentTransformScale=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {scale:L,size:y,sizePrecision:G,sizeUnit:Z,tooltipOptions:T}=this.info,{visibleElements:ia}=T,ca=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},ia.scale&&M.tsx(J.TooltipField,{title:ca.scale,
value:this._formatPercentage(L)}),ia.size&&M.tsx(J.TooltipField,{title:ca.size,value:this._formatLength(y,Z,G)}))};return E}(I.TooltipContent);r.TooltipContentTransformScale=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],r.TooltipContentTransformScale);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphic":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--translate-graphic`}`;r.TooltipContentTranslateGraphic=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {info:L}=this,{visibleElements:y}=L.tooltipOptions,G=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},y.distance&&M.tsx(J.TooltipField,{title:G.distance,value:this._formatLength(L.distance)}))};
return E}(I.TooltipContent);r.TooltipContentTranslateGraphic=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],r.TooltipContentTranslateGraphic);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphicXY":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--translate-graphic-xy`}`;r.TooltipContentTranslateGraphicXY=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {info:L}=this,{visibleElements:y}=L.tooltipOptions,G=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},y.distance&&M.tsx(J.TooltipField,{title:G.distance,value:this._formatRelativeLength(L.distance)}))};
return E}(I.TooltipContent);r.TooltipContentTranslateGraphicXY=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],r.TooltipContentTranslateGraphicXY);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateGraphicZ":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){var Q=`${H.CONTENT} ${`${H.CONTENT}--translate-graphic-z`}`;r.TooltipContentTranslateGraphicZ=function(C){function E(){return C.apply(this,arguments)||this}V._inheritsLoose(E,C);E.prototype.render=function(){const {info:L}=this,{visibleElements:y}=L.tooltipOptions,G=this._messagesTooltip.sketch;return M.tsx(D.TooltipContentWithHelpMessage,{className:Q,helpMessage:this._getHelpMessage()},y.distance&&M.tsx(J.TooltipField,{title:G.distance,value:this._formatRelativeVerticalLength(L.distance)}))};
return E}(I.TooltipContent);r.TooltipContentTranslateGraphicZ=w.__decorate([x.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],r.TooltipContentTranslateGraphicZ);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--translate-vertex`}`;r.TooltipContentTranslateVertex=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {distance:y,elevation:G,area:Z,totalLength:T,tooltipOptions:ia}=this.info,{visibleElements:ca}=ia,ha=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},ca.distance&&Q.tsx(U.TooltipField,
{title:ha.distance,value:this._formatLength(y)}),ca.elevation&&N.isSome(G)&&Q.tsx(U.TooltipField,{title:ha.elevation,value:this._formatVerticalLength(G)}),ca.area&&N.isSome(Z)&&Q.tsx(U.TooltipField,{title:ha.area,value:this._formatArea(Z)}),ca.totalLength&&N.isSome(T)&&Q.tsx(U.TooltipField,{title:ha.totalLength,value:this._formatLength(T)}))};return L}(D.TooltipContent);r.TooltipContentTranslateVertex=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],
r.TooltipContentTranslateVertex);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertexXY":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--translate-vertex`}`;r.TooltipContentTranslateVertexXY=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {area:y,distance:G,elevation:Z,totalLength:T,tooltipOptions:ia}=this.info,{visibleElements:ca}=ia,ha=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},ca.distance&&Q.tsx(U.TooltipField,
{title:ha.distance,value:this._formatRelativeLength(G)}),ca.elevation&&N.isSome(Z)&&Q.tsx(U.TooltipField,{title:ha.elevation,value:this._formatVerticalLength(Z)}),ca.area&&N.isSome(y)&&Q.tsx(U.TooltipField,{title:ha.area,value:this._formatArea(y)}),ca.totalLength&&N.isSome(T)&&Q.tsx(U.TooltipField,{title:ha.totalLength,value:this._formatLength(T)}))};return L}(D.TooltipContent);r.TooltipContentTranslateVertexXY=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],
r.TooltipContentTranslateVertexXY);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/content/TooltipContentTranslateVertexZ":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/Error ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../css ./TooltipContent ../support/TooltipContentWithHelpMessage ../support/TooltipField ../../../../widgets/support/widgetUtils ../../../../widgets/support/jsxFactory".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){var C=`${I.CONTENT} ${`${I.CONTENT}--translate-vertex`}`;r.TooltipContentTranslateVertexZ=function(E){function L(){return E.apply(this,arguments)||this}V._inheritsLoose(L,E);L.prototype.render=function(){const {distance:y,elevation:G,tooltipOptions:Z}=this.info,{visibleElements:T}=Z,ia=this._messagesTooltip.sketch;return Q.tsx(J.TooltipContentWithHelpMessage,{className:C,helpMessage:this._getHelpMessage()},T.distance&&Q.tsx(U.TooltipField,{title:ia.distance,
value:this._formatRelativeVerticalLength(y)}),T.elevation&&N.isSome(G)&&Q.tsx(U.TooltipField,{title:ia.elevation,value:this._formatVerticalLength(G)}))};return L}(D.TooltipContent);r.TooltipContentTranslateVertexZ=w.__decorate([H.subclass("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],r.TooltipContentTranslateVertexZ);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/automaticAreaMeasurementUtils":function(){define(["exports","../../core/maybe",
"./euclideanAreaMeasurementUtils","./geodesicAreaMeasurementUtils"],function(r,V,w,N){function A(P,B,u=w.createEuclideanPlanarAreaCache()){return"on-the-ground"===B?(B=N.geodesicArea(P),V.isSome(B)?B:w.euclideanHorizontalPlanarArea(P,u)):w.euclideanPlanarArea(P,u)}r.autoArea2D=function(P,B=w.createEuclideanPlanarAreaCache()){return A(P,"on-the-ground",B)};r.autoAreaByElevationMode=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/euclideanAreaMeasurementUtils":function(){define("exports ../../core/maybe ../../core/quantityUtils ../../core/unitUtils ../../chunks/earcut ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../geometry/support/plane ../../geometry/support/triangle ./measurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){function D(C,E,L=C.hasZ){const y=I.computeEuclideanMeasurementSR(C.spatialReference),G=N.areaUnitFromSpatialReference(y);if(V.isNone(G))return null;let Z=0;for(const X of C.rings){var T=X.length;if(3>T)continue;const {positionsWorldCoords:O}=E;for(;O.length<T;)O.push(B.create());var ia=M,ca=P.set(Q,0,0,0),ha=1/T;for(let K=0;K<T;K++){var da=X[K];2>da.length?da=!1:(P.set(ia,da[0],da[1],L?da[2]||0:0),da=!0);if(!da||!u.projectVectorToVector(ia,C.spatialReference,O[K],y))return null;
P.scaleAndAdd(ca,ca,O[K],ha)}ia=x.fromPoints(O[0],O[1],ca,x.wrap());if(0!==P.squaredLength(x.normal(ia))){for(ha=0;ha<T;ha++)x.projectPointLocal(ia,ca,O[ha],O[ha]);T=U(O);for(ca=0;ca<T.length;ca+=3)Z+=H.areaPoints2d(O[T[ca]],O[T[ca+1]],O[T[ca+2]])}}return w.createArea(Z,G)}function J(){return{positionsWorldCoords:[]}}function U(C){var E=A.earcut;const L=new Float64Array(2*C.length);for(let y=0;y<C.length;++y){const G=C[y],Z=2*y;L[Z+0]=G[0];L[Z+1]=G[1]}return E.call(A,L,[],2)}const M=B.create(),Q=
B.create();r.computeEuclideanPlanarArea=D;r.createEuclideanPlanarAreaCache=J;r.euclideanHorizontalPlanarArea=function(C,E=J()){return D(C,E,!1)};r.euclideanPlanarArea=function(C,E=J()){return D(C,E)};r.triangulate=U;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicAreaMeasurementUtils":function(){define("exports ../../geometry ../../core/quantityUtils ../../geometry/geometryEngine ../../geometry/projection ../../geometry/support/geodesicUtils ./geodesicMeasurementUtils ../../geometry/SpatialReference".split(" "),
function(r,V,w,N,A,P,B,u){function x(D){return w.createArea(Math.abs(P.geodesicAreas([D],"square-meters")[0]),"square-meters")}function H(D){try{return w.createArea(Math.abs(N.geodesicArea(D,"square-meters")),"square-meters")}catch(J){return null}}function I(D){const J=[];return A.projectPolygonToWGS84ComparableLonLat(D,J)?w.createArea(Math.abs(P.geodesicAreas([{type:"polygon",rings:J,spatialReference:u.WGS84}],"square-meters")[0]),"square-meters"):null}r.geodesicArea=function(D){const {spatialReference:J}=
D;return B.geodesicMeasure(J,x,H,I,D)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawOperation":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/HandleOwner ../../core/lang ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/graphics/dehydratedFeatureComparison ../../support/elevationInfoUtils ../ViewingMode ./DrawingMode ./DrawManipulator ../interactive/coordinateHelper ../interactive/dragEventPipeline ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryOperations ../interactive/sketch/SketchLabelOptions ../interactive/sketch/SketchTooltipOptions ../interactive/snapping/SnappingContext ../interactive/snapping/SnappingDragPipelineStep ../interactive/snapping/SnappingOperation ../interactive/snapping/snappingUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X){r.DrawOperation=function(O){function K(S){var ea=O.call(this,S)||this;ea._createOperationCompleted=!1;ea._pointerDownStates=new Set;ea.isDraped=!0;ea.labelOptions=new T;ea.tooltipOptions=new ia;ea.snapToSceneEnabled=null;ea.lastVertex=null;B.isNone(S.elevationInfo)&&(ea.elevationInfo=M.getEffectiveElevationInfo(!!S.hasZ));return ea}V._inheritsLoose(K,O);var Y=K.prototype;Y.initialize=function(){const {geometryType:S,view:ea}=this,
ja=ea.spatialReference,oa="viewingMode"in ea.state?ea.state.viewingMode:Q.ViewingMode.Local,qa="segment"===S||"multipoint"===S?"polyline":S;this.coordinateHelper=L.createCoordinateHelper(this.hasZ,this.hasM,ja);this._editGeometryOperations=new Z.EditGeometryOperations(new G.EditGeometry(qa,this.coordinateHelper));this._snappingOperation=new da.SnappingOperation({view:ea,constrainResult:va=>B.isNone(va)?va:this._getEffectiveDrawSurface()?.constrainZ(va)});this.handles.add(x.watch(()=>this.stagedVertex,
va=>{B.isNone(va)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(va)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(va,Ja)=>B.equalsMaybe(va,Ja,U.pointEquals)}));this._activeComponent=new G.Component(ja,oa);this._editGeometryOperations.data.components.push(this._activeComponent);const ua=this.segmentLabels;B.isSome(ua)&&(ua.context={view:ea,editGeometryOperations:this._editGeometryOperations,
elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([x.watch(()=>this.labelOptions.enabled,va=>{ua.visible=va},x.syncAndInitial),this.on("cursor-update",()=>{const va=this.stagedVertex;ua.stagedVertex=B.isSome(va)?this.coordinateHelper.pointToVector(va):null})]));this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],va=>{const Ja=va.vertices.map(Ma=>({componentIndex:0,vertexIndex:Ma.index,coordinates:this.coordinateHelper.vectorToArray(Ma.pos)})),
Ta=Ja.map(Ma=>Ma.coordinates);switch(va.type){case "vertex-add":this.emit(va.type,{...va,added:Ta,vertices:Ja});break;case "vertex-update":this.emit(va.type,{...va,updated:Ta,vertices:Ja});break;case "vertex-remove":this.emit(va.type,{...va,removed:Ta,vertices:Ja})}va=this._activeComponent.getLastVertex();va=B.isSome(va)?this.coordinateHelper.vectorToDehydratedPoint(va.pos):null;if(B.isNone(va)||B.isNone(this.lastVertex)||!U.pointEquals(this.lastVertex,va))this.lastVertex=va}));this._manipulator=
new E.DrawManipulator({grabbableForEvent:va=>"click"!==this.drawingMode?!0:"touch"===va.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(this._manipulator);this._manipulator.grabbable="point"!==S;this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",va=>this._onImmediateClick(va)),this._manipulator.events.on("immediate-double-click",va=>this._onImmediateDoubleClick(va))]);X.setupSnappingToggleHandles(this,
()=>{var va=B.unwrapOr(this.view.inputManager.latestPointerType,"mouse");va=this._getSnappingContext(va);B.isSome(this.snappingManager)&&this.updatingHandles.addPromise(u.ignoreAbortErrors(this._snappingOperation.resnap(this.snappingManager,va)))})};Y.destroy=function(){B.destroyMaybe(this.segmentLabels);B.destroyMaybe(this._snappingOperation);this._editGeometryOperations=B.destroyMaybe(this._editGeometryOperations)};Y.cancel=function(){this.complete({aborted:!0})};Y.commitStagedVertex=function(){this._snappingOperation.abort();
if(B.isSome(this.stagedVertex)){const {stagedVertex:S}=this;this.stagedVertex=null;this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(S))}};Y.complete=function(S){S=S&&S.aborted||!1;this._snappingOperation.abort();B.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;this._createOperationCompleted=!("multipoint"===this.geometryType&&0===this.numVertices||
"polyline"===this.geometryType&&2>this.numVertices||"polygon"===this.geometryType&&3>this.numVertices);(this.isCompleted||S)&&this.emit("complete",{vertices:this.vertices.map((ea,ja)=>({componentIndex:0,vertexIndex:ja,coordinates:ea})),aborted:S,type:"complete"})};Y.onInputEvent=function(S){switch(S.type){case "pointer-down":this._pointerDownStates.add(S.pointerId);break;case "pointer-up":this._pointerDownStates.delete(S.pointerId)}switch(S.type){case "pointer-move":return this._onPointerMove(S);
case "hold":return this._onHold(S)}};Y.redo=function(){this._editGeometryOperations.redo()};Y.undo=function(){B.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();this._editGeometryOperations.undo()};Y._closeOnClickVertexIndex=function(S){const ea=this._activeComponent;if("polygon"===this.geometryType&&2<ea.vertices.length){if(this._vertexWithinPointerDistance(ea.vertices[0].pos,S))return 0;if(this._vertexWithinPointerDistance(ea.vertices[ea.vertices.length-1].pos,S))return ea.vertices.length-
1}return null};Y._createManipulatorDragPipeline=function(S){switch(B.unwrap(this.drawingMode)){case "click":return this._createManipulatorDragPipelineClick(S);case "freehand":return this._createManipulatorDragPipelineFreehand(S);case "hybrid":return this._createManipulatorDragPipelineHybrid(S)}};Y._createManipulatorDragPipelineClick=function(S){return y.createManipulatorDragEventPipeline(S,(ea,ja,oa,qa)=>{const ua="touch"===qa&&this._snappingEnabled;if(!this.isCompleted&&ua){var {snappingStep:va,
cancelSnapping:Ja}=ha.createSnapDragEventPipelineStep({predicate:()=>ua,snappingManager:this.snappingManager,snappingContext:new ca.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:qa,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles,useZ:!this._requiresScenePoint});oa=oa.next(Ta=>{ua&&B.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();return Ta}).next(Ja);ja.next(this._screenToMapDragEventStep()).next(Ta=>
{"start"===Ta.action&&(this.stagedVertex=Ta.mapStart,("segment"===this.geometryType||ua&&0===this.numVertices)&&this.commitStagedVertex());return Ta}).next(y.sceneSnappingAtLocation(this.view,this.elevationInfo)).next(...va).next(Ta=>{ua&&(this.stagedVertex=Ta.mapEnd,"end"===Ta.action&&this.commitStagedVertex());return Ta}).next(Ta=>{"end"!==Ta.action||"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();return Ta})}})};Y._createManipulatorDragPipelineFreehand=function(S){return y.createManipulatorDragEventPipeline(S,
(ea,ja)=>{this.isCompleted||ja.next(this._screenToMapDragEventStep()).next(oa=>{"start"===oa.action&&(B.isNone(this.stagedVertex)&&(this.stagedVertex=oa.mapStart),"segment"===this.geometryType&&this.commitStagedVertex());return oa}).next(oa=>{switch(oa.action){case "start":case "update":this.stagedVertex=oa.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":this.complete()}return oa})})};Y._createManipulatorDragPipelineHybrid=function(S){return y.createManipulatorDragEventPipeline(S,
(ea,ja)=>{this.isCompleted||ja.next(this._screenToMapDragEventStep()).next(oa=>{"start"===oa.action&&(B.isNone(this.stagedVertex)&&(this.stagedVertex=oa.mapStart),this.commitStagedVertex());return oa}).next(oa=>{switch(oa.action){case "start":case "update":this.stagedVertex=oa.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return oa})})};Y._getEffectiveDrawSurface=
function(){if(B.isNone(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let S=this.defaultZ,ea=!1;B.isSome(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(ea=!0);B.isSome(this.snapToSceneEnabled)&&(ea=this.snapToSceneEnabled);B.isSome(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(ea=!1);this._drawAtFixedElevation&&(S=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),
ea=!1);if(ea)return this.drawSurface;this.elevationDrawSurface.defaultZ=S;return this.elevationDrawSurface};Y._mapToScreen=function(S){return this._getEffectiveDrawSurface()?.mapToScreen(S)};Y._onHold=function(S){this._snappingOperation.abort();"click"===this.drawingMode&&"touch"===S.pointerType&&this._snappingEnabled&&(this.stagedVertex=S.mapPoint);S.stopPropagation()};Y._onImmediateClick=function(S){if(!("mouse"===S.pointerType&&2===S.button||this._manipulator.dragging)){var ea=this._activeComponent,
ja=this._closeOnClickVertexIndex(S.screenPoint);if(B.isSome(ja))S.stopPropagation(),this.complete();else{ja=this._screenToMap(S.screenPoint);if(B.isSome(ja))switch(this.drawingMode){case "freehand":"point"===this.geometryType&&(B.isSome(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(ja)),this.complete());break;case "click":case "hybrid":this._snappingOperation.abort(),B.isSome(this.stagedVertex)?this.commitStagedVertex():
this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(ja)),("point"===this.geometryType||"segment"===this.geometryType&&2===ea.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===ea.vertices.length)&&this.complete()}S.stopPropagation()}}};Y._onImmediateDoubleClick=function(S){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),S.stopPropagation())};Y._onPointerMove=function(S){var ea=H.createScreenPoint(S.x,S.y);const ja=this._snappingOperation;
if(this._manipulator.dragging||this._pointerDownStates.has(S.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)ja.abort();else{S.stopPropagation();var oa=this._closeOnClickVertexIndex(ea);if(B.isSome(oa))this._closeOnVertex(oa),ja.abort();else if(oa=this._screenToMap(ea),ea=this._requiresScenePoint?this.drawSurface?.screenToMap(ea):null,this._manipulator.cursor=B.isSome(oa)?"crosshair":null,B.isNone(oa))ja.abort();else{var qa=this.snappingManager;B.isNone(qa)?(this.stagedVertex=
oa,ja.abort()):(S=this._getSnappingContext(S.pointerType),this.updatingHandles.addPromise(u.ignoreAbortErrors(ja.snap({point:oa,scenePoint:ea},qa,S))))}}};Y._closeOnVertex=function(S){this.stagedVertex=null;S={componentIndex:0,vertexIndex:S,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[S].pos)};this.emit("cursor-update",{updated:null,vertices:[S],operation:"apply",type:"vertex-update"})};Y._screenToMap=function(S){return this._getEffectiveDrawSurface()?.screenToMap(S)};
Y._screenToMapDragEventStep=function(){let S=null;return ea=>{"start"===ea.action&&(S=this._screenToMap(ea.screenStart));if(B.isNone(S))return null;const ja=this._screenToMap(ea.screenEnd);return B.isSome(ja)?{...ea,mapStart:S,mapEnd:ja}:null}};Y._vertexWithinPointerDistance=function(S,ea){const ja=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(S));B.isSome(ja)?(S=ja.x-ea.x,ea=ja.y-ea.y,ea=25>=S*S+ea*ea):ea=!1;return ea};Y._getSnappingContext=function(S){const ea=this._drawAtFixedElevation?
B.applySome(this.elevationDrawSurface,({defaultZ:ja})=>ja):null;return new ca.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:S,visualizer:this.snappingVisualizer,selfSnappingZ:B.isSome(ea)?{value:ea,elevationInfo:this.elevationInfo}:null})};V._createClass(K,[{key:"_snappingEnabled",get:function(){return B.isSome(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}},{key:"_requiresScenePoint",get:function(){const S=this._getEffectiveDrawSurface();
return"3d"===this.view.type&&this.drawSurface!==S}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},{key:"committedVertices",get:function(){return this._activeComponent.vertices.map(S=>this.coordinateHelper.vectorToArray(S.pos))}},{key:"drawingMode",set:function(S){this._set("drawingMode",S??C.defaultDrawingMode)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(S){this._manipulator.interactive=
S}},{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"numVertices",get:function(){return B.isSome(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"snappingOptions",get:function(){return B.isSome(this.snappingManager)?this.snappingManager.options:null}},{key:"stagedVertex",get:function(){return this._snappingOperation.stagedPoint},
set:function(S){this._snappingOperation.stagedPoint=P.clone(S)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"vertices",get:function(){const S=this.committedVertices;B.isSome(this.stagedVertex)&&S.push(this.coordinateHelper.pointToArray(this.stagedVertex));return S}},{key:"_drawAtFixedElevation",get:function(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&0<this.numCommittedVertices}}]);return K}(N.EventedMixin(A.HandleOwner));w.__decorate([I.property()],
r.DrawOperation.prototype,"_snappingEnabled",null);w.__decorate([I.property()],r.DrawOperation.prototype,"defaultZ",void 0);w.__decorate([I.property()],r.DrawOperation.prototype,"isDraped",void 0);w.__decorate([I.property({value:C.defaultDrawingMode})],r.DrawOperation.prototype,"drawingMode",null);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"elevationDrawSurface",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"elevationInfo",void 0);w.__decorate([I.property({constructOnly:!0,
type:T})],r.DrawOperation.prototype,"labelOptions",void 0);w.__decorate([I.property({constructOnly:!0,type:ia})],r.DrawOperation.prototype,"tooltipOptions",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"geometryType",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"hasM",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"hasZ",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,
"manipulators",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"drawSurface",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"segmentLabels",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"snappingManager",void 0);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"snappingVisualizer",void 0);w.__decorate([I.property()],r.DrawOperation.prototype,"snapToSceneEnabled",void 0);w.__decorate([I.property()],
r.DrawOperation.prototype,"_snappingOperation",void 0);w.__decorate([I.property()],r.DrawOperation.prototype,"stagedVertex",null);w.__decorate([I.property()],r.DrawOperation.prototype,"lastVertex",void 0);w.__decorate([I.property()],r.DrawOperation.prototype,"updating",null);w.__decorate([I.property({constructOnly:!0})],r.DrawOperation.prototype,"view",void 0);r.DrawOperation=w.__decorate([J.subclass("esri.views.draw.DrawOperation")],r.DrawOperation);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/draw/DrawingMode":function(){define(["exports"],function(r){r.defaultDrawingMode="click";r.drawingModes=["freehand","hybrid","click"];Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/DrawManipulator":function(){define(["exports","../../core/Evented"],function(r,V){let w=function(){function N({grabbableForEvent:P}){this.events=new V;this.interactive=!0;this.selectable=!1;this.cursor=null;this.grabbable=!0;this.grabbableForEvent=P}var A=N.prototype;A.intersectionDistance=
function(P,B){return 0};A.attach=function(){};A.detach=function(){};A.onElevationChange=function(){};A.onViewChange=function(){};return N}();r.DrawManipulator=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/coordinateHelper":function(){define("exports ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ../../geometry/Point".split(" "),function(r,V,w,N,A,P,B,u){var x;(function(J){J[J.Z=0]="Z";
J[J.M=1]="M"})(x||(x={}));let H=function(){function J(M){this.spatialReference=M}var U=J.prototype;U.createVector=function(){return this._tag(w.create())};U.pointToVector=function(M){return this._tag(w.fromValues(M.x,M.y))};U.arrayToVector=function(M){return this._tag(w.fromValues(M[0],M[1]))};U.vectorToArray=function(M){return[M[0],M[1]]};U.pointToArray=function(M){return[M.x,M.y]};U.vectorToPoint=function(M,Q=new u){Q.x=M[0];Q.y=M[1];Q.z=void 0;Q.m=void 0;Q.spatialReference=this.spatialReference;
return Q};U.arrayToPoint=function(M,Q=new u){Q.x=M[0];Q.y=M[1];Q.z=void 0;Q.m=void 0;Q.spatialReference=this.spatialReference;return Q};U.vectorToDehydratedPoint=function(M,Q={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){Q.x=M[0];Q.y=M[1];Q.z=void 0;Q.m=void 0;Q.hasZ=!1;Q.hasM=!1;Q.spatialReference=this.spatialReference;return Q};U.lerp=function(M,Q,C,E){return V.lerp(E,M,Q,C)};U.addDelta=function(M,Q,C){M[0]+=Q;M[1]+=C};U.distance=function(M,
Q){return V.distance(M,Q)};U.getZ=function(M,Q){return Q};U.hasZ=function(){return!1};U.getM=function(M,Q){return Q};U.hasM=function(){return!1};U.clone=function(M){return this._tag(w.fromArray(M))};U.copy=function(M,Q){return V.copy(Q,M)};U.fromXYZ=function(M){return this._tag(w.fromValues(M[0],M[1]))};U.toXYZ=function(M,Q=A.create()){return N.set(Q,M[0],M[1],0)};U.pointToXYZ=function(M,Q=A.create()){return N.set(Q,M.x,M.y,0)};U.equals=function(M,Q){return V.equals(M,Q)};U._tag=function(M){return M};
return J}(),I=function(){function J(M,Q){this._valueType=M;this.spatialReference=Q}var U=J.prototype;U.createVector=function(){return this._tag(A.create())};U.pointToVector=function(M){return this._tag(A.fromValues(M.x,M.y,this._valueType===x.Z?M.z:M.m))};U.arrayToVector=function(M){return this._tag(A.fromValues(M[0],M[1],M[2]||0))};U.vectorToArray=function(M){return[M[0],M[1],M[2]]};U.pointToArray=function(M){return this._valueType===x.Z?[M.x,M.y,M.z]:[M.x,M.y,M.m]};U.vectorToPoint=function(M,Q=
new u){Q.x=M[0];Q.y=M[1];Q.z=this._valueType===x.Z?M[2]:void 0;Q.m=this._valueType===x.M?M[2]:void 0;Q.spatialReference=this.spatialReference;return Q};U.arrayToPoint=function(M,Q=new u){Q.x=M[0];Q.y=M[1];Q.z=this._valueType===x.Z?M[2]:void 0;Q.m=this._valueType===x.M?M[2]:void 0;Q.spatialReference=this.spatialReference;return Q};U.vectorToDehydratedPoint=function(M,Q={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const C=this._valueType===x.Z,
E=this._valueType===x.M;Q.x=M[0];Q.y=M[1];Q.z=C?M[2]:void 0;Q.m=E?M[2]:void 0;Q.hasZ=C;Q.hasM=E;Q.spatialReference=this.spatialReference;return Q};U.lerp=function(M,Q,C,E){return N.lerp(E,M,Q,C)};U.addDelta=function(M,Q,C,E){M[0]+=Q;M[1]+=C;this._valueType===x.Z&&(M[2]+=E)};U.distance=function(M,Q){return this._valueType===x.Z?N.distance(M,Q):V.distance(M,Q)};U.getZ=function(M,Q){return this._valueType===x.Z?M[2]:Q};U.hasZ=function(){return this._valueType===x.Z};U.getM=function(M,Q){return this._valueType===
x.M?M[2]:Q};U.hasM=function(){return this._valueType===x.M};U.clone=function(M){return this._tag(A.fromArray(M))};U.copy=function(M,Q){return N.copy(Q,M)};U.fromXYZ=function(M,Q=0,C=0){return this._tag(A.fromValues(M[0],M[1],this._valueType===x.Z?2<M.length?M[2]:Q:C))};U.toXYZ=function(M,Q=A.create()){return N.set(Q,M[0],M[1],this._valueType===x.Z?M[2]:0)};U.pointToXYZ=function(M,Q=A.create()){return N.set(Q,M.x,M.y,this._valueType===x.Z?M.z??0:0)};U.equals=function(M,Q){return N.equals(M,Q)};U._tag=
function(M){return M};return J}(),D=function(){function J(M){this.spatialReference=M}var U=J.prototype;U.createVector=function(){return this._tag(B.create())};U.pointToVector=function(M){return this._tag(B.fromValues(M.x,M.y,M.z,M.m))};U.arrayToVector=function(M){return this._tag(B.fromValues(M[0],M[1],M[2]||0,M[3]||0))};U.vectorToArray=function(M){return[M[0],M[1],M[2],M[3]]};U.pointToArray=function(M){return[M.x,M.y,M.z,M.m]};U.vectorToPoint=function(M,Q=new u){Q.x=M[0];Q.y=M[1];Q.z=M[2];Q.m=M[3];
Q.spatialReference=this.spatialReference;return Q};U.arrayToPoint=function(M,Q=new u){Q.x=M[0];Q.y=M[1];Q.z=M[2];Q.m=M[3];Q.spatialReference=this.spatialReference;return Q};U.vectorToDehydratedPoint=function(M,Q={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){Q.x=M[0];Q.y=M[1];Q.z=M[2];Q.m=M[3];Q.hasZ=!0;Q.hasM=!0;Q.spatialReference=this.spatialReference;return Q};U.lerp=function(M,Q,C,E){return P.lerp(E,M,Q,C)};U.addDelta=function(M,Q,C,E){M[0]+=
Q;M[1]+=C;M[2]+=E};U.distance=function(M,Q){return N.distance(M,Q)};U.getZ=function(M){return M[2]};U.hasZ=function(){return!0};U.getM=function(M){return M[3]};U.hasM=function(){return!0};U.clone=function(M){return this._tag(B.fromArray(M))};U.copy=function(M,Q){return P.copy(Q,M)};U.fromXYZ=function(M,Q=0,C=0){return this._tag(B.fromValues(M[0],M[1],2<M.length?M[2]:Q,C))};U.toXYZ=function(M,Q=A.create()){return N.set(Q,M[0],M[1],M[2])};U.pointToXYZ=function(M,Q=A.create()){return N.set(Q,M.x,M.y,
M.z??0)};U.equals=function(M,Q){return P.equals(M,Q)};U._tag=function(M){return M};return J}();r.CoordinateHelper2D=H;r.CoordinateHelper3D=I;r.CoordinateHelper4D=D;r.createCoordinateHelper=function(J,U,M){return J&&U?new D(M):U?new I(x.M,M):J?new I(x.Z,M):new H(M)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/dragEventPipeline":function(){define("exports ../../geometry ../../core/has ../../core/lang ../../core/mathUtils ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../geometry/projection ../../layers/graphics/hydratedFeatures ../../support/elevationInfoUtils ../ViewingMode ../draw/support/drawUtils ../../geometry/Point".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U){function M(da,X){let O=null,K=null;return Y=>{if("cancel"===Y.action)P.isSome(K)&&(K.execute({action:"cancel"}),K=O=null);else{var S={action:Y.action,screenStart:Y.start,screenEnd:Y.screenPoint};"start"===Y.action&&P.isNone(O)&&(O=new ha,K=new ha,X(da,O,K,Y.pointerType,S));P.isSome(O)&&O.execute(S);"end"===Y.action&&P.isSome(O)&&(K=O=null)}}}function Q(da,X){let O=null;return K=>{"start"===K.action&&(O=E(da,K.mapStart.spatialReference,X));if(P.isNone(O))return null;
const Y=K.mapEnd.x-K.mapStart.x,S=K.mapEnd.y-K.mapStart.y,ea=K.mapEnd.z-K.mapStart.z;O.move(Y,S,ea);return{...K,translationX:Y,translationY:S,translationZ:ea}}}function C(da,X){return P.isNone(da)?null:da.spatialReference.equals(X)?da.clone():x.project(da,X)}function E(da,X,O){const K=da.geometry;X=H.hydratedSpatialReference(X);if(P.isNone(K))return null;if("mesh"===K.type)return L(da,K,X,O);const Y=C(K,X),S=K.spatialReference;return P.isNone(Y)?null:{move:(ea,ja,oa)=>{ea=J.move(Y.clone(),ea,ja,oa);
ea.spatialReference.equals(S)?da.geometry=ea:da.geometry=x.project(ea,S)}}}function L(da,X,O,K){if(P.isSome(X.transform))return y(da,X,X.transform,O);if(!X.spatialReference.equals(O))return null;let Y=0,S=0,ea=0;return{move:(ja,oa,qa)=>{var ua=ja-Y;const va=oa-S,Ja=qa-ea;if(ua||va||Ja)ua=new U(X.origin.x+ua,X.origin.y+va,X.origin.z+Ja,X.origin.spatialReference),X.centerAt(ua,{geographic:K===D.ViewingMode.Global}),da.notifyGeometryChanged(),Y=ja,S=oa,ea=qa}}}function y(da,X,O,K){const Y=O.getOriginPoint(X.spatialReference),
S=C(Y,K),ea=X.spatialReference;return P.isNone(S)?null:{move:(ja,oa,qa)=>{ja=J.move(S.clone(),ja,oa,qa);ja.spatialReference.equals(ea)?O.origin=u.fromValues(ja.x,ja.y,ja.z):(ja=x.project(ja,ea),P.isSome(ja)&&(O.origin=u.fromValues(ja.x,ja.y,ja.z)));da.notifyMeshTransformChanged();da.notifyGeometryChanged()}}}function G(da,X){const O=new Map;for(const K of X)O.set(K,N.clone(da[K]));return K=>{O.forEach((Y,S)=>{da[S]=Y});return K}}function Z(da){return P.isSome(da.geometry)&&"mesh"===da.geometry.type?
T(da,da.geometry):G(da,["geometry"])}function T(da,X){const O=P.isSome(X.transform)?X.transform.clone():null,K=X.vertexAttributes.clonePositional();return Y=>{X.transform=O;X.vertexAttributes=K;da.notifyGeometryChanged();return Y}}function ia(da,X,O){const K=P.toNullable(X.elevationProvider.getElevation(da.x,da.y,da.z??0,da.spatialReference,"scene"))??0;da=H.clonePoint(da);da.z=K;da.hasZ=!0;da.z=I.getZForElevationMode(da,X,O);return da}const ca=()=>{};let ha=function(){function da(){this.execute=
ca}da.prototype.next=function(X,O=new da){P.isSome(X)&&(this.execute=K=>{K=X(K);P.isSome(K)&&O.execute(K)});return O};return da}();r.EventPipeline=ha;r.addMapDelta=function(){let da=0,X=0,O=0;return K=>{"start"===K.action&&(da=K.mapStart.x,X=K.mapStart.y,O=K.mapStart.z);const Y=K.mapEnd.x-da,S=K.mapEnd.y-X,ea=K.mapEnd.z-O;da=K.mapEnd.x;X=K.mapEnd.y;O=K.mapEnd.z;return{...K,mapDeltaX:Y,mapDeltaY:S,mapDeltaZ:ea,mapDeltaSpatialReference:K.mapStart.spatialReference}}};r.addScreenDelta=function(){let da=
0,X=0;return O=>{"start"===O.action&&(da=O.screenStart.x,X=O.screenStart.y);const K=O.screenEnd.x-da,Y=O.screenEnd.y-X;da=O.screenEnd.x;X=O.screenEnd.y;return{...O,screenDeltaX:K,screenDeltaY:Y}}};r.constrainToMapAxis=function(da,X){const O=[da.x,da.y,da.z??0],K=[Math.cos(X),Math.sin(X)];da=Math.sqrt(K[0]*K[0]+K[1]*K[1]);if(0===da)return null;K[0]/=da;K[1]/=da;const Y=S=>{const ea=(S.x-O[0])*K[0]+(S.y-O[1])*K[1];S.x=O[0]+ea*K[0];S.y=O[1]+ea*K[1]};return S=>{Y(S.mapStart);Y(S.mapEnd);return{...S,axis:K}}};
r.createDragEventPipelineCallback=M;r.createManipulatorDragEventPipeline=function(da,X){return da.events.on("drag",M(da,X))};r.dragAtLocation=function(da,X){let O=null,K=0,Y=0;return S=>{"start"===S.action&&(O=da.toScreen?.(X),null!=O&&(0>O.x||O.x>da.width||0>O.y||O.y>da.height?O=null:(K=S.screenStart.x-O.x,Y=S.screenStart.y-O.y)));if(null==O)return null;var ea=A.clamp(S.screenEnd.x-K,0,da.width);const ja=A.clamp(S.screenEnd.y-Y,0,da.height);ea=B.createScreenPoint(ea,ja);S.screenStart=O;S.screenEnd=
ea;return S}};r.dragGraphic=Q;r.dragGraphicMany=function(da,X){const O=da.map(K=>P.unwrap(Q(K,X))).filter(K=>P.isSome(K));return K=>{const Y=K.mapEnd.x-K.mapStart.x,S=K.mapEnd.y-K.mapStart.y,ea=K.mapEnd.z-K.mapStart.z;O.forEach(ja=>ja(K));return{...K,translationX:Y,translationY:S,translationZ:ea}}};r.resetGraphic=Z;r.resetGraphicMany=function(da){const X=da.map(O=>P.unwrap(Z(O))).filter(O=>P.isSome(O));return O=>{X.forEach(K=>K(O));return O}};r.resetProperties=G;r.sceneSnappingAtLocation=function(da,
X,O=[]){if("2d"===da.type)return Y=>Y;let K=null;return Y=>{"start"===Y.action&&(K=da.toMap(Y.screenStart,{exclude:O}),P.isSome(K)&&(K.z=I.getZForElevationMode(K,da,X)));var S=da.toMap(Y.screenEnd,{exclude:O});P.isSome(S)&&(S.z=I.getZForElevationMode(S,da,X));S=P.isSome(K)&&P.isSome(S)?{sceneStart:K,sceneEnd:S}:null;return{...Y,scenePoints:S}}};r.sceneSnappingAtProjectedLocation=function(da,X){if("2d"===da.type)return K=>K;let O=null;return K=>{"start"===K.action&&(O=ia(K.mapStart,da,X));var Y=ia(K.mapEnd,
da,X);Y=P.isSome(O)&&P.isSome(Y)?{sceneStart:O,sceneEnd:Y}:null;return{...K,scenePoints:Y}}};r.screenToMap=function(da,X=null,O){let K=null;const Y=P.isSome(X)&&!da.spatialReference?.equals(X)?ea=>P.isSome(ea)?x.project(ea,X):ea:ea=>ea,S={exclude:[],...O};return ea=>{"start"===ea.action&&(K=Y(da.toMap(ea.screenStart,S)));if(P.isNone(K))return null;const ja=Y(da.toMap(ea.screenEnd,S));return P.isSome(ja)?{...ea,mapStart:K,mapEnd:ja}:null}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/draw/support/drawUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(r,V,w,N,A){function P(x,H,I,D){null==D||x.hasZ||(D=void 0);if("point"===x.type)return x.x+=H,x.y+=I,x.hasZ&&null!=D&&(x.z+=D),x;if("multipoint"===x.type){var J=x.points;for(var U=0;U<J.length;U++)J[U]=B(J[U],H,I,D);return x}if("extent"===x.type)return x.xmin+=H,x.xmax+=H,x.ymin+=
I,x.ymax+=I,null!=D&&(x.zmin??(x.zmin=0),x.zmin+=D,x.zmax??(x.zmax=0),x.zmax+=D),x;J=A.geometryToCoordinates(x);U="polyline"===x.type?x.paths:x.rings;for(let M=0;M<J.length;M++){const Q=J[M];for(let C=0;C<Q.length;C++)Q[C]=B(Q[C],H,I,D)}"paths"in x?x.paths=U:x.rings=U;return x}function B(x,H,I,D){return u(x,x[0]+H,x[1]+I,null!=x[2]&&null!=D?x[2]+D:void 0)}function u(x,H,I,D){H=[H,I];2<x.length&&H.push(null!=D?D:x[2]);3<x.length&&H.push(x[3]);return H}r.cloneMove=function(x,H,I,D,J){x=x.clone();var U=
D.resolution;if("point"===x.type)return J?P(x,H*U,-I*U):(J=D.state.transform,D=D.state.inverseTransform,U=J[0]*x.x+J[2]*x.y+J[4],J=J[1]*x.x+J[3]*x.y+J[5],x.x=D[0]*(U+H)+D[2]*(J+I)+D[4],x.y=D[1]*(U+H)+D[3]*(J+I)+D[5]),x;if("multipoint"===x.type){if(J)P(x,H*U,-I*U);else{J=x.points;U=D.state.transform;D=D.state.inverseTransform;for(var M=0;M<J.length;M++){var Q=J[M],C=U[0]*Q[0]+U[2]*Q[1]+U[4],E=U[1]*Q[0]+U[3]*Q[1]+U[5];J[M]=u(Q,D[0]*(C+H)+D[2]*(E+I)+D[4],D[1]*(C+H)+D[3]*(E+I)+D[5],void 0)}}return x}if("extent"===
x.type)return J?P(x,H*U,-I*U):(J=D.state.transform,D=D.state.inverseTransform,U=J[0]*x.xmin+J[2]*x.ymin+J[4],M=J[1]*x.xmin+J[3]*x.ymin+J[5],Q=J[0]*x.xmax+J[2]*x.ymax+J[4],J=J[1]*x.xmax+J[3]*x.ymax+J[5],x.xmin=D[0]*(U+H)+D[2]*(M+I)+D[4],x.ymin=D[1]*(U+H)+D[3]*(M+I)+D[5],x.xmax=D[0]*(Q+H)+D[2]*(J+I)+D[4],x.ymax=D[1]*(Q+H)+D[3]*(J+I)+D[5]),x;if(J)P(x,H*U,-I*U);else{J=A.geometryToCoordinates(x);U="polyline"===x.type?x.paths:x.rings;M=D.state.transform;D=D.state.inverseTransform;for(Q=0;Q<J.length;Q++)for(C=
J[Q],E=0;E<C.length;E++){const L=C[E],y=M[0]*L[0]+M[2]*L[1]+M[4],G=M[1]*L[0]+M[3]*L[1]+M[5];C[E]=u(L,D[0]*(y+H)+D[2]*(G+I)+D[4],D[1]*(y+H)+D[3]*(G+I)+D[5],void 0)}"paths"in x?x.paths=U:x.rings=U}return x};r.getRotationAngle=function(x,H,I,D=!1){x=Math.atan2(H.y-I.y,H.x-I.x)-Math.atan2(x.y-I.y,x.x-I.x);x=Math.atan2(Math.sin(x),Math.cos(x));return D?x:V.rad2deg(x)};r.getScaleRatio=function(x,H,I,D,J,U){return Math.sqrt((J-x)*(J-x)+(U-H)*(U-H))/Math.sqrt((I-x)*(I-x)+(D-H)*(D-H))};r.move=P;r.scale=function(x,
H,I,D){if("point"===x.type){const {x:G,y:Z}=x;var J=D?D[0]:G,U=D?D[1]:Z;x=x.clone();x.x=(G-J)*H+J;x.y=(Z-U)*I+U;return x}if("multipoint"===x.type){J=A.geometryToCoordinates(x);U=w.create();const [G,Z,T,ia]=N.getRingsOrPathsBounds(U,[J]);J=D?D[0]:(G+T)/2;U=D?D[1]:(ia+Z)/2;x=x.clone();D=x.points;for(var M=0;M<D.length;M++){var Q=D[M];const [ca,ha]=Q;D[M]=u(Q,(ca-J)*H+J,(ha-U)*I+U,void 0)}return x}if("extent"===x.type){const {xmin:G,xmax:Z,ymin:T,ymax:ia}=x;J=D?D[0]:(G+Z)/2;U=D?D[1]:(ia+T)/2;x=x.clone();
x.xmin=(G-J)*H+J;x.ymax=(ia-U)*I+U;x.xmax=(Z-J)*H+J;x.ymin=(T-U)*I+U;x.xmin>x.xmax&&(H=x.xmin,x.xmin=x.xmax,x.xmax=H);x.ymin>x.ymax&&(H=x.ymin,x.ymin=x.ymax,x.ymax=H);return x}J=A.geometryToCoordinates(x);U=w.create();const [C,E,L,y]=N.getRingsOrPathsBounds(U,J);U=D?D[0]:(C+L)/2;D=D?D[1]:(y+E)/2;x=x.clone();M="polyline"===x.type?x.paths:x.rings;for(Q=0;Q<J.length;Q++){const G=J[Q];for(let Z=0;Z<G.length;Z++){const T=G[Z],[ia,ca]=T;M[Q][Z]=u(T,(ia-U)*H+U,(ca-D)*I+D,void 0)}}"paths"in x?x.paths=M:x.rings=
M;return x};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/EditGeometry":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Evented ../../../core/maybe ../../../geometry/Polygon ../../../geometry/Polyline ../coordinateHelper ./unnormalizationHelper".split(" "),function(r,V,w,N,A,P,B,u,x){let H=function(){function J(U){this.component=U;this.rightEdge=this.leftEdge=null;this.type="vertex";
this.index=null}V._createClass(J,[{key:"pos",get:function(){return this._pos},set:function(U){this._pos=U;this.component.unnormalizeVertexPositions()}}]);return J}(),I=function(J,U,M){this.component=J;this.leftVertex=U;this.rightVertex=M;this.type="edge";U.rightEdge=this;M.leftEdge=this},D=function(){function J(M,Q){this._spatialReference=M;this._viewingMode=Q;this.vertices=[];this.edges=[];this.index=null}var U=J.prototype;U.unnormalizeVertexPositions=function(){1>=this.vertices.length||x.unnormalize(this.vertices,
x.getUnnormalizationInfo(this._spatialReference,this._viewingMode))};U.updateVertexIndex=function(M,Q){if(0!==this.vertices.length){var C=this.vertices[0],E=null;do E=M,E.index=Q++,M=E.rightEdge?E.rightEdge.rightVertex:null;while(null!=M&&M!==C);E.leftEdge&&E!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(E),this.vertices.length-1)}};U.getFirstVertex=function(){return 0===this.vertices.length?null:this.vertices[0]};U.getLastVertex=function(){return 0===this.vertices.length?
null:this.vertices[this.vertices.length-1]};U.isClosed=function(){return 2<this.vertices.length&&null!==this.vertices[0].leftEdge};U.swapVertices=function(M,Q){const C=this.vertices[M];this.vertices[M]=this.vertices[Q];this.vertices[Q]=C};U.iterateVertices=function(M){if(0!==this.vertices.length){var Q=this.vertices[0],C=Q;do M(C,C.index),C=A.isSome(C.rightEdge)?C.rightEdge.rightVertex:null;while(C!==Q&&null!=C)}};return J}();N=function(J){function U(Q,C){var E=J.call(this)||this;E.type=Q;E.coordinateHelper=
C;E._geometry=null;E._dirty=!0;E.components=[];return E}V._inheritsLoose(U,J);var M=U.prototype;M.notifyChanges=function(Q){this._dirty=!0;this.emit("change",Q)};M._toPoint=function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)};M._toPolyline=function(){const Q=[],C=this.coordinateHelper.vectorToArray;for(const E of this.components){if(1>E.vertices.length)continue;const L=[];let y=E.vertices.find(Z=>
null==Z.leftEdge);const G=y;do L.push(C(y.pos)),y=y.rightEdge?y.rightEdge.rightVertex:null;while(y&&y!==G);Q.push(L)}return new B({paths:Q,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};M._toPolygon=function(){const Q=[],C=this.coordinateHelper.vectorToArray;for(const E of this.components){if(1>E.vertices.length)continue;const L=[],y=E.vertices[0];let G=y;const Z=G;do L.push(C(G.pos)),G=A.isSome(G.rightEdge)?G.rightEdge.rightVertex:null;
while(G&&G!==Z);E.isClosed()&&L.push(C(y.pos));Q.push(L)}return new P({rings:Q,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})};U.fromGeometry=function(Q,C){var E=Q.spatialReference;const L=u.createCoordinateHelper(Q.hasZ,Q.hasM,E),y=new U(Q.type,L);switch(Q.type){case "polygon":Q=Q.rings;for(var G=0;G<Q.length;++G){var Z=Q[G],T=new D(E,C);T.index=G;var ia=2<Z.length&&w.equals(Z[0],Z[Z.length-1]),ca=ia?Z.length-1:Z.length;for(var ha=0;ha<
ca;++ha){var da=L.arrayToVector(Z[ha]);const X=new H(T);T.vertices.push(X);X.pos=da;X.index=ha}Z=T.vertices.length-1;for(ca=0;ca<Z;++ca)ha=new I(T,T.vertices[ca],T.vertices[ca+1]),T.edges.push(ha);ia&&(ia=new I(T,T.vertices[T.vertices.length-1],T.vertices[0]),T.edges.push(ia));y.components.push(T)}break;case "polyline":Q=Q.paths;for(G=0;G<Q.length;++G){ia=Q[G];T=new D(E,C);T.index=G;Z=ia.length;for(ca=0;ca<Z;++ca)ha=L.arrayToVector(ia[ca]),da=new H(T),T.vertices.push(da),da.pos=ha,da.index=ca;ia=
T.vertices.length-1;for(Z=0;Z<ia;++Z)ca=new I(T,T.vertices[Z],T.vertices[Z+1]),T.edges.push(ca);y.components.push(T)}break;case "point":C=new D(E,C),C.index=0,E=new H(C),E.index=0,E.pos=L.pointToVector(Q),C.vertices.push(E),y.components.push(C)}return y};V._createClass(U,[{key:"geometry",get:function(){if(this._dirty){switch(this.type){case "point":this._geometry=this._toPoint();break;case "polyline":this._geometry=this._toPolyline();break;case "polygon":this._geometry=this._toPolygon()}this._dirty=
!1}return this._geometry}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]);return U}(N);r.Component=D;r.Edge=I;r.EditGeometry=N;r.Vertex=H;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/unnormalizationHelper":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../ViewingMode"],function(r,V,w){r.getUnnormalizationInfo=function(N,A){N=V.getInfo(N);return A===w.ViewingMode.Global&&
N?{supported:!0,lowerBoundX:N.valid[0],upperBoundX:N.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}};r.unnormalize=function(N,A){if(A.supported){var P=Infinity,B=-Infinity,u=A.upperBoundX-A.lowerBoundX;N.forEach(H=>{let I=H.pos[0];for(;I<A.lowerBoundX;)I+=u;for(;I>A.upperBoundX;)I-=u;P=Math.min(P,I);B=Math.max(B,I);H.pos[0]=I});var x=B-P;u-x<x&&N.forEach(H=>{0>H.pos[0]&&(H.pos[0]+=u)})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/EditGeometryOperations":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ../../../core/maybe ./EditGeometry ./interfaces ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){w=function(E){function L(G){var Z=E.call(this)||this;Z.data=G;Z._undoStack=[];Z._redoStack=[];Z._listener=Z.data.on("change",T=>{T.addedVertices&&Z.emit("vertex-add",{type:"vertex-add",vertices:T.addedVertices,operation:T.operation});T.removedVertices&&Z.emit("vertex-remove",{type:"vertex-remove",vertices:T.removedVertices,operation:T.operation});T.updatedVertices&&Z.emit("vertex-update",{type:"vertex-update",vertices:T.updatedVertices,operation:T.operation})});
return Z}V._inheritsLoose(L,E);var y=L.prototype;y.destroy=function(){this._listener.remove()};y.splitEdge=function(G,Z){return this._apply(new H.SplitEdge(this.data,G,Z))};y.updateVertices=function(G,Z,T=P.AccumulationBehaviour.ACCUMULATE_STEPS){return this._apply(new u.UpdateVertices(this.data,G,Z),T)};y.moveVertices=function(G,Z,T,ia,ca=P.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices(G,new J.MoveVertex(this.data.coordinateHelper,Z,T,ia),ca)};y.scaleVertices=function(G,Z,T,
ia,ca,ha=P.AccumulationBehaviour.ACCUMULATE_STEPS,da=u.AccumulationType.CUMULATIVE){return this.updateVertices(G,new Q.ScaleVertex(Z,T,ia,ca,da),ha)};y.rotateVertices=function(G,Z,T,ia=P.AccumulationBehaviour.ACCUMULATE_STEPS,ca=u.AccumulationType.CUMULATIVE){return this.updateVertices(G,new M.RotateVertex(Z,T,ca),ia)};y.removeVertices=function(G){return this._apply(new x.RemoveVertices(this.data,G,this._minNumVerticesPerType))};y.appendVertex=function(G){return 0===this.data.components.length?null:
this._apply(new B.AppendVertex(this.data,this.data.components[0],G))};y.setVertexPosition=function(G,Z){return this._apply(new I.SetVertexPosition(this.data,G,Z))};y.offsetEdge=function(G,Z,T,ia=P.AccumulationBehaviour.ACCUMULATE_STEPS){return this.updateVertices([Z.leftVertex,Z.rightVertex],new U.OffsetEdgeVertex(this.data.coordinateHelper,G,Z,T),ia)};y.closeComponent=function(G){return this.data.components.includes(G)?this._apply(new D.CloseComponent(this.data,G)):null};y.canRemoveVertex=function(){return this.data.components[0].vertices.length>
this._minNumVerticesPerType};y.createUndoGroup=function(){const G=new C.UndoGroup;this._apply(G);return{remove(){return G.close()}}};y.undo=function(){if(0<this._undoStack.length){const G=this._undoStack.pop();G.undo();this._redoStack.push(G);return G}return null};y.redo=function(){if(0<this._redoStack.length){const G=this._redoStack.pop();G.apply();this._undoStack.push(G);return G}return null};y._apply=function(G,Z=P.AccumulationBehaviour.ACCUMULATE_STEPS){if(Z===P.AccumulationBehaviour.NEW_STEP||
N.isNone(this.lastOperation)||!this.lastOperation.accumulate(G))G.apply(),this._undoStack.push(G),this._redoStack=[];return G};L.fromGeometry=function(G,Z){return new L(A.EditGeometry.fromGeometry(G,Z))};V._createClass(L,[{key:"canUndo",get:function(){return 0<this._undoStack.length}},{key:"canRedo",get:function(){return 0<this._redoStack.length}},{key:"lastOperation",get:function(){return 0<this._undoStack.length?this._undoStack[this._undoStack.length-1]:null}},{key:"_minNumVerticesPerType",get:function(){switch(this.data.type){case "point":return 1;
case "polyline":return 2;case "polygon":return 3;default:return 0}}}]);return L}(w);r.EditGeometryOperations=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/interfaces":function(){define(["exports"],function(r){r.AccumulationBehaviour=void 0;var V=r.AccumulationBehaviour||(r.AccumulationBehaviour={});V[V.NEW_STEP=0]="NEW_STEP";V[V.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/AppendVertex":function(){define(["exports",
"../../../../core/maybe","../EditGeometry"],function(r,V,w){let N=function(){function A(B,u,x){this._editGeometry=B;this._component=u;this._pos=x;this._right=this._left=this._originalEdge=this._addedVertex=null}var P=A.prototype;P.apply=function(){let B="redo";V.isNone(this._addedVertex)&&(B="apply",this._addedVertex=new w.Vertex(this._component));const u=this._component.getLastVertex();if(V.isNone(u))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=
0;else{let x=null;u.rightEdge&&(this._originalEdge=u.rightEdge,x=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1));this._component.vertices.push(this._addedVertex);this._addedVertex.pos=this._pos;V.isNone(this._left)&&(this._left=new w.Edge(this._component,u,this._addedVertex));this._component.edges.push(this._left);u.rightEdge=this._left;V.isSome(this._originalEdge)&&V.isSome(x)&&(V.isNone(this._right)&&(this._right=new w.Edge(this._component,
this._addedVertex,x)),this._component.edges.push(this._right),x.leftEdge=this._right);this._component.updateVertexIndex(this._addedVertex,u.index+1)}this._editGeometry.notifyChanges({operation:B,addedVertices:[this._addedVertex]})};P.undo=function(){V.isNone(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),V.isSome(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),
V.isSome(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),V.isSome(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),V.isSome(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",
removedVertices:[this._addedVertex]}))};P.accumulate=function(){return!1};return A}();r.AppendVertex=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/UpdateVertices":function(){define(["exports"],function(r){let V=function(){function w(A,P,B){this._editGeometry=A;this._vertices=P;this.operation=B;this._undone=!1}var N=w.prototype;N.apply=function(){this._vertices.forEach(A=>this.operation.apply(A));this._editGeometry.components.forEach(A=>
A.unnormalizeVertexPositions());this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})};N.undo=function(){this._vertices.forEach(A=>this.operation.undo(A));this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices});this._undone=!0};N.canAccumulate=function(A){if(this._undone||A._vertices.length!==this._vertices.length)return!1;for(let P=0;P<A._vertices.length;++P)if(A._vertices[P]!==this._vertices[P])return!1;return this.operation.canAccumulate(A.operation)};
N.accumulate=function(A){return A instanceof w&&this.canAccumulate(A)?(this._vertices.forEach(P=>this.operation.accumulate(P,A.operation)),this.operation.accumulateParams(A.operation),this._editGeometry.components.forEach(P=>P.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0):!1};return w}();r.AccumulationType=void 0;(function(w){w[w.CUMULATIVE=0]="CUMULATIVE";w[w.REPLACE=1]="REPLACE"})(r.AccumulationType||(r.AccumulationType={}));
r.UpdateVertices=V;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/RemoveVertices":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(r,V,w){let N=function(){function A(B,u,x=0){this._editGeometry=B;this._vertices=u;this._minNumberOfVertices=x;this.removedVertices=null}var P=A.prototype;P.apply=function(){let B="redo";if(null==this.removedVertices){const u=this.removedVertices=[];this._vertices.forEach(x=>
{x=this._removeVertex(x);V.isSome(x)&&u.push(x)});B="apply"}else this.removedVertices.forEach(u=>{this._removeVertex(u.removedVertex)});this._editGeometry.notifyChanges({operation:B,removedVertices:this._vertices})};P.undo=function(){this.removedVertices?.forEach(B=>{this._undoRemoveVertex(B)});this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})};P.accumulate=function(){return!1};P._removeVertex=function(B){const u=B.component;if(u.vertices.length<=this._minNumberOfVertices)return null;
const x={removedVertex:B,createdEdge:null},H=B.leftEdge,I=B.rightEdge;u.vertices.splice(u.vertices.indexOf(B),1);H&&(u.edges.splice(u.edges.indexOf(H),1),H.leftVertex.rightEdge=null);I&&(u.edges.splice(u.edges.indexOf(I),1),I.rightVertex.leftEdge=null);0===B.index&&I&&0<this._vertices.length&&u.swapVertices(u.vertices.indexOf(I.rightVertex),0);H&&I&&(x.createdEdge=new w.Edge(u,H.leftVertex,I.rightVertex),u.edges.push(x.createdEdge));I&&u.updateVertexIndex(I.rightVertex,I.rightVertex.index-1);return x};
P._undoRemoveVertex=function(B){const u=B.removedVertex,x=B.removedVertex.component,H=u.leftEdge,I=u.rightEdge;B.createdEdge&&x.edges.splice(x.edges.indexOf(B.createdEdge),1);x.vertices.push(u);H&&(x.edges.push(H),H.leftVertex.rightEdge=H);I&&(x.edges.push(I),I.rightVertex.leftEdge=I);x.updateVertexIndex(u,u.index)};return A}();r.RemoveVertices=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/SplitEdge":function(){define(["exports",
"../../../../core/maybe","../EditGeometry"],function(r,V,w){let N=function(){function A(B,u,x){this._editGeometry=B;this._edge=u;this._t=x;this._right=this._left=this.createdVertex=null}var P=A.prototype;P.apply=function(){let B="redo";const u=this._edge,x=u.component,H=u.leftVertex,I=u.rightVertex;x.edges.splice(x.edges.indexOf(u),1);V.isNone(this.createdVertex)&&(B="apply",this.createdVertex=new w.Vertex(u.component));x.vertices.push(this.createdVertex);this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(u.leftVertex.pos,
u.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector());V.isNone(this._left)&&(this._left=new w.Edge(x,H,this.createdVertex));this._left.leftVertex.leftEdge?x.edges.push(this._left):x.edges.unshift(this._left);H.rightEdge=this._left;V.isNone(this._right)&&(this._right=new w.Edge(x,this.createdVertex,I));x.edges.push(this._right);I.leftEdge=this._right;x.updateVertexIndex(this.createdVertex,H.index+1);this._editGeometry.notifyChanges({operation:B,addedVertices:[this.createdVertex]})};
P.undo=function(){if(V.isNone(this.createdVertex)||V.isNone(this._left)||V.isNone(this._right))return null;const B=this._edge,u=B.component,x=this.createdVertex.leftEdge?.leftVertex,H=this.createdVertex.rightEdge?.rightVertex;u.vertices.splice(u.vertices.indexOf(this.createdVertex),1);u.edges.splice(u.edges.indexOf(this._left),1);u.edges.splice(u.edges.indexOf(this._right),1);this._edge.leftVertex.leftEdge?u.edges.push(this._edge):u.edges.unshift(this._edge);x&&(x.rightEdge=B);H&&(H.leftEdge=B);x&&
u.updateVertexIndex(x,x.index);this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})};P.accumulate=function(){return!1};return A}();r.SplitEdge=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/SetVertexPosition":function(){define(["exports","../../../../core/maybe"],function(r,V){let w=function(){function N(P,B,u){this._editGeometry=P;this._vertex=B;this._pos=u}var A=N.prototype;A.apply=function(){const P=
V.isNone(this._originalPosition);P&&(this._originalPosition=this._vertex.pos);this._apply(P?"apply":"redo")};A.undo=function(){this._vertex.pos=V.unwrap(this._originalPosition);this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})};A.accumulate=function(P){return P instanceof N&&P._vertex===this._vertex?(this._pos=P._pos,this._apply("apply"),!0):!1};A._apply=function(P){this._vertex.pos=this._pos;this._editGeometry.components.forEach(B=>B.unnormalizeVertexPositions());
this._editGeometry.notifyChanges({operation:P,updatedVertices:[this._vertex]})};return N}();r.SetVertexPosition=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/CloseComponent":function(){define(["exports","../../../../core/arrayUtils","../../../../core/maybe","../EditGeometry"],function(r,V,w,N){let A=function(){function P(u,x){this._editGeometry=u;this._component=x;this._createdEdge=null}var B=P.prototype;B.apply=function(){let u=
"redo";if(w.isNone(this._createdEdge)){u="apply";const x=this._component.getFirstVertex(),H=this._component.getLastVertex();if(this._component.isClosed()||3>this._component.vertices.length||w.isNone(x)||w.isNone(H))return;this._createdEdge=new N.Edge(this._component,H,x)}this._createdEdge.leftVertex.rightEdge=this._createdEdge;this._createdEdge.rightVertex.leftEdge=this._createdEdge;this._component.edges.push(this._createdEdge);this._editGeometry.notifyChanges({operation:u})};B.undo=function(){w.isNone(this._createdEdge)||
(V.remove(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))};B.accumulate=function(){return!1};return P}();r.CloseComponent=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/MoveVertex":function(){define(["exports"],function(r){let V=function(){function w(A,P,B,u){this._helper=A;this.dx=P;this.dy=B;this.dz=
u}var N=w.prototype;N._move=function(A,P,B,u){this._helper.addDelta(A.pos,P,B,u)};N.apply=function(A){this._move(A,this.dx,this.dy,this.dz)};N.undo=function(A){this._move(A,-this.dx,-this.dy,-this.dz)};N.canAccumulate=function(A){return A instanceof w};N.accumulate=function(A,P){this._move(A,P.dx,P.dy,P.dz)};N.accumulateParams=function(A){this.dx+=A.dx;this.dy+=A.dy;this.dz+=A.dz};return w}();r.MoveVertex=V;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/OffsetEdgeVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../core/maybe ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/plane ../../../../geometry/support/vector ../../../support/geometry2dUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){let D=function(){function M(C,E,L,y=0,G=U.IMMEDIATE){this._helper=C;this._planeType=E;this._edge=L;this.distance=y;this._plane=x.create();this._offsetPlane=x.create();this._minDistance=-Infinity;this._maxDistance=Infinity;this._selectedArrow=1;G===U.IMMEDIATE&&this._initialize()}var Q=M.prototype;Q._initialize=function(){this._initializeNeighbors();this._initializePlane();this._initializeDistanceConstraints()};Q._initializeNeighbors=function(){const C=this._toXYZ(this._edge.leftVertex.pos),
E=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),L=this._toXYZ(this._edge.rightVertex.pos),y=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=B.direction(u.create(),C,L);this._left=this._computeNeighbor(C,E,this._edgeDirection);this._right=this._computeNeighbor(L,y,this._edgeDirection)};Q._toXYZ=function(C){return N.isSome(C)?this._helper.toXYZ(C):null};Q._pointToXYZ=function(C){return this._toXYZ(this._helper.pointToVector(C))};Q._computeNeighbor=
function(C,E,L){if(N.isNone(E))return{start:C,end:E,direction:u.fromValues(-L[1],L[0],0),isOriginalDirection:!0};const y=B.direction(u.create(),C,E),G=!this._passesBisectingAngleThreshold(y,L);return{start:C,end:E,direction:G?this._bisectVectorsPerpendicular(L,y):y,isOriginalDirection:!G}};Q._passesBisectingAngleThreshold=function(C,E){C=Math.abs(H.angle(E,C));return C>=J&&C<=Math.PI-J};Q._bisectVectorsPerpendicular=function(C,E){C=0>B.dot(C,E)?C:B.negate(u.create(),C);const L=Math.abs(B.dot(C,E));
if(!(.001>L||.999<L))return this._bisectDirection(C,E);E=B.cross(u.create(),C,[0,0,1]);return B.normalize(E,E)};Q._bisectDirection=function(C,E){C=B.add(u.create(),C,E);return B.normalize(C,C)};Q._initializePlane=function(){const C=this._computeNormalDirection(this._left),E=this._computeNormalDirection(this._right);0>B.dot(C,E)&&B.negate(E,E);x.fromPositionAndNormal(this._left.start,this._bisectDirection(C,E),this._plane)};Q._computeNormalDirection=function(C){C=B.cross(u.create(),C.direction,this._edgeDirection);
B.normalize(C,C);C=B.cross(u.create(),this._edgeDirection,C);this._planeType===r.PlaneType.XY&&(C[2]=0);return B.normalize(C,C)};Q._initializeDistanceConstraints=function(){N.isSome(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint(x.signedDistance(this._plane,this._left.end));N.isSome(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint(x.signedDistance(this._plane,this._right.end));this._updateIntersectDistanceConstraint(this._plane)};Q._updateDistanceConstraint=
function(C){0>=C&&(this._minDistance=Math.max(this._minDistance,C));0<=C&&(this._maxDistance=Math.min(this._maxDistance,C))};Q._updateIntersectDistanceConstraint=function(C){var E=x.normal(C);const L=this._edgeDirection;var y=B.add(u.create(),this._left.start,this._left.direction);const G=B.add(u.create(),this._right.start,this._right.direction);var Z=this._pointInBasis2D(P.create(),E,L,this._left.start),T=this._pointInBasis2D(P.create(),E,L,y),ia=this._pointInBasis2D(P.create(),E,L,this._right.start);
E=this._pointInBasis2D(P.create(),E,L,G);[ia]=I.intersectLineAndRay({start:T,end:Z,type:I.LineType.LINE},{start:E,end:ia,type:I.LineType.LINE});ia&&(Z=A.subtract(P.create(),Z,T),A.normalize(Z,Z),T=A.subtract(P.create(),ia,T),T=A.dot(Z,T),y=B.add(u.create(),y,B.scale(u.create(),this._left.direction,-T)),C=x.signedDistance(C,y),this._updateDistanceConstraint(C))};Q._pointInBasis2D=function(C,E,L,y){C[0]=H.projectPointSignedLength(E,y);C[1]=H.projectPointSignedLength(L,y);return C};Q._offset=function(C,
E){Number.isFinite(this._minDistance)&&(E=Math.max(this._minDistance,E));Number.isFinite(this._maxDistance)&&(E=Math.min(this._maxDistance,E));x.copy(this._offsetPlane,this._plane);this._offsetPlane[3]-=E;E=(y,G,Z)=>N.isSome(G)&&x.intersectLine(this._offsetPlane,y,B.add(u.create(),y,G),Z);const L=u.create();(C===this._edge.leftVertex?E(this._left.start,this._left.direction,L):E(this._right.start,this._right.direction,L))&&this._helper.copy(this._helper.fromXYZ(L,void 0,this._helper.getM(C.pos)),C.pos)};
Q.selectArrowFromStartPoint=function(C){this._selectedArrow=x.isPointInside(this.plane,this._pointToXYZ(C))?1:-1};Q.signedDistanceToPoint=function(C){return x.signedDistance(this.plane,this._pointToXYZ(C))};Q.apply=function(C){this._offset(C,this.distance)};Q.undo=function(C){this._offset(C,0)};Q.canAccumulate=function(C){return C instanceof M&&this._edge.leftVertex.index===C._edge.leftVertex.index&&this._edge.rightVertex.index===C._edge.rightVertex.index&&this._edge.component===C._edge.component&&
this._maybeEqualsVec3(this._left.direction,C._left.direction)&&this._maybeEqualsVec3(this._right.direction,C._right.direction)&&B.equals(x.normal(this._plane),x.normal(C._plane))};Q.accumulate=function(C,E){this._offset(C,this._plane[3]-E._plane[3]+E.distance)};Q.accumulateParams=function(C){this.distance=C.distance-C._plane[3]+this._plane[3]};Q.clone=function(){const C=new M(this._helper,this._planeType,this._edge,this.distance,U.DEFERRED);x.copy(C._plane,this._plane);x.copy(C._offsetPlane,this._offsetPlane);
C._maxDistance=this._maxDistance;C._minDistance=this._minDistance;C._left=this._cloneNeighbor(this._left);C._right=this._cloneNeighbor(this._right);C._edgeDirection=B.copy(u.create(),this._edgeDirection);return C};Q._maybeEqualsVec3=function(C,E){return N.isNone(C)&&N.isNone(E)||N.isSome(C)&&N.isSome(E)&&B.equals(C,E)};Q._cloneNeighbor=function({start:C,end:E,direction:L,isOriginalDirection:y}){return{start:B.copy(u.create(),C),end:N.isSome(E)?B.copy(u.create(),E):null,direction:B.copy(u.create(),
L),isOriginalDirection:y}};V._createClass(M,[{key:"plane",get:function(){return this._plane}},{key:"requiresSplitEdgeLeft",get:function(){return!this._left.isOriginalDirection}},{key:"requiresSplitEdgeRight",get:function(){return!this._right.isOriginalDirection}},{key:"edgeDirection",get:function(){return this._edgeDirection}},{key:"selectedArrow",get:function(){return this._selectedArrow}}]);return M}();const J=w.deg2rad(15);r.PlaneType=void 0;(function(M){M[M.XYZ=0]="XYZ";M[M.XY=1]="XY"})(r.PlaneType||
(r.PlaneType={}));var U;(function(M){M[M.IMMEDIATE=0]="IMMEDIATE";M[M.DEFERRED=1]="DEFERRED"})(U||(U={}));r.OffsetEdgeVertex=D;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(r,V,w,N){function A(J,U){return J[0]*U[1]-J[1]*U[0]}function P(J,U,M){U=w.dot(M,U)/w.squaredLength(M);return w.scale(J,M,U)}function B(J,U,M,Q,C=M){w.subtract(x,Q,M);w.subtract(I,
U,C);P(D,I,x);return w.add(J,C,D)}function u(J,U,M,Q){w.subtract(x,U,M);U=Q/w.length(x);return w.scaleAndAdd(J,M,x,U)}r.LineType=void 0;(function(J){J[J.RAY=0]="RAY";J[J.LINE=1]="LINE"})(r.LineType||(r.LineType={}));const x=N.create(),H=N.create(),I=N.create(),D=N.create();r.cross=A;r.intersectCircleAndPoint=function(J,U,M){u(I,M,J,U);return V.floatEqualAbsolute(I[0],M[0])&&V.floatEqualAbsolute(I[1],M[1])?[N.clone(M)]:[]};r.intersectLineAndPoint=function(J,U){B(I,U,J.start,J.end);return V.floatEqualAbsolute(I[0],
U[0])&&V.floatEqualAbsolute(I[1],U[1])?[N.clone(U)]:[]};r.intersectLineAndRay=function(J,U){const M=J.start;var Q=U.start,C=U.end;const E=w.subtract(x,J.end,M);var L=w.subtract(H,C,Q);C=A(E,L);if(1E-6>=Math.abs(C))return[];Q=w.subtract(I,M,Q);L=A(L,Q)/C;C=A(E,Q)/C;if(0<=L){if(0<=C||U.type===r.LineType.LINE)return[w.scaleAndAdd(D,M,E,L)]}else if(J.type===r.LineType.LINE&&(0<=C||U.type===r.LineType.LINE))return[w.scaleAndAdd(D,M,E,L)];return[]};r.intersectLineLikeAndCircle=function(J,U,M){const Q=[],
C=w.subtract(x,J.end,J.start);var E=w.subtract(H,J.start,U);U=w.squaredLength(C);const L=2*w.dot(C,E);M=w.squaredLength(E)-M*M;M=L*L-4*U*M;0===M?(U=-L/(2*U),(J.type===r.LineType.LINE||0<=U)&&Q.push(w.scaleAndAdd(D,J.start,C,U))):0<M&&(M=Math.sqrt(M),E=(-L+M)/(2*U),(J.type===r.LineType.LINE||0<=E)&&Q.push(w.scaleAndAdd(D,J.start,C,E)),U=(-L-M)/(2*U),(J.type===r.LineType.LINE||0<=U)&&Q.push(w.scaleAndAdd(I,J.start,C,U)));return Q};r.pointToLineDistance=function(J,U,M){return Math.abs((U[0]-J[0])*(M[1]-
J[1])-(U[1]-J[1])*(M[0]-J[0]))/w.distance(U,M)};r.projectPoint=P;r.projectPointToCircle=u;r.projectPointToLine=B;r.projectPointToRay=function(J,U,M,Q){w.subtract(x,Q,M);w.subtract(I,U,M);U=w.dot(x,I)/w.squaredLength(x);return 0<U?w.scaleAndAdd(J,M,x,U):w.copy(J,M)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/RotateVertex":function(){define(["exports","../../../../core/arrayUtils","../../../../chunks/vec2","./UpdateVertices"],function(r,
V,w,N){let A=function(){function P(u,x,H=N.AccumulationType.CUMULATIVE){this.origin=u;this.angle=x;this._accumulationType=H}var B=P.prototype;B._rotate=function(u,x){w.rotate(u.pos,u.pos,this.origin,x)};B.apply=function(u){this._rotate(u,this.angle)};B.undo=function(u){this._rotate(u,-this.angle)};B.canAccumulate=function(u){return u instanceof P&&V.equals(this.origin,u.origin)};B.accumulate=function(u,x){this._rotate(u,x._accumulationType===N.AccumulationType.REPLACE?x.angle-this.angle:x.angle)};
B.accumulateParams=function(u){this.angle=u._accumulationType===N.AccumulationType.REPLACE?u.angle:this.angle+u.angle};return P}();r.RotateVertex=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/ScaleVertex":function(){define(["exports","../../../../core/arrayUtils","../../../../chunks/vec2f64","../../../../chunks/vec2","./UpdateVertices"],function(r,V,w,N,A){let P=function(){function B(x,H,I,D,J=A.AccumulationType.CUMULATIVE){this.origin=
x;this.axis1=H;this.factor1=I;this.factor2=D;this._accumulationType=J;this.axis2=w.fromValues(H[1],-H[0])}var u=B.prototype;u._scale=function(x,H,I){N.projectAndScale(x.pos,x.pos,this.origin,this.axis1,H);N.projectAndScale(x.pos,x.pos,this.origin,this.axis2,I)};u.apply=function(x){this._scale(x,this.factor1,this.factor2)};u.undo=function(x){this._scale(x,1/this.factor1,1/this.factor2)};u.canAccumulate=function(x){return x instanceof B&&V.equals(this.origin,x.origin)&&V.equals(this.axis1,x.axis1)};
u.accumulate=function(x,H){H._accumulationType===A.AccumulationType.REPLACE?this._scale(x,H.factor1/this.factor1,H.factor2/this.factor2):this._scale(x,H.factor1,H.factor2)};u.accumulateParams=function(x){const H=x._accumulationType===A.AccumulationType.REPLACE;this.factor1=H?x.factor1:this.factor1*x.factor1;this.factor2=H?x.factor2:this.factor2*x.factor2};return B}();r.ScaleVertex=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/operations/UndoGroup":function(){define(["exports"],
function(r){let V=function(){function w(){this._operations=[];this._closed=!1}var N=w.prototype;N.close=function(){this._closed=!0};N.apply=function(){for(const A of this._operations)A.apply()};N.undo=function(){for(let A=this._operations.length-1;0<=A;A--)this._operations[A].undo()};N.accumulate=function(A){if(this._closed)return!1;const P=this._operations.length?this._operations[this._operations.length-1]:null;P&&P.accumulate(A)||(this._operations.push(A),A.apply());return!0};return w}();r.UndoGroup=
V;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingContext":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(r,V){let w=function(){function N(A){this.selfSnappingZ=this.visualizer=this.excludeFeature=this.vertexHandle=null;this.editGeometryOperations=A.editGeometryOperations;this.elevationInfo=A.elevationInfo;this.pointer=A.pointer;this.vertexHandle=A.vertexHandle;this.excludeFeature=A.excludeFeature;this.visualizer=
A.visualizer;this.selfSnappingZ=A.selfSnappingZ}V._createClass(N,[{key:"coordinateHelper",get:function(){return this.editGeometryOperations.data.coordinateHelper}},{key:"spatialReference",get:function(){return this.coordinateHelper.spatialReference}}]);return N}();r.SnappingContext=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDragPipelineStep":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../layers/graphics/dehydratedFeatureComparison ../../../layers/graphics/hydratedFeatures ../dragEventPipeline ./SnappingContext ../../support/Scheduler".split(" "),
function(r,V,w,N,A,P,B,u,x,H){function I(y,G,Z){return N.debounce(function(){var T=V._asyncToGenerator(function*({frameTask:ia,point:ca,scenePoint:ha,context:da,event:X,delta:O,getLastState:K},Y){const S=yield ia.schedule(()=>y.snap({point:ca,scenePoint:ha,context:da,signal:Y}),Y);S.valid&&(ia=yield ia.schedule(()=>S.apply(),Y),K=K(),w.isSome(K.point)&&ca!==K.point&&(ia=y.update({point:K.point,scenePoint:K.scenePoint,context:da})),w.isNone(K.updatePoint)||!P.pointEquals(ia,K.updatePoint))&&(C(X.mapEnd,
ia,O,G),Z.execute(X))});return function(ia,ca){return T.apply(this,arguments)}}())}function D(y){return"3d"===y.type?y.resourceController.scheduler.registerTask(H.TaskPriority.SNAPPING):H.ImmediateTask}function J(y,G,Z){return{context:new x.SnappingContext({editGeometryOperations:y.editGeometryOperations,elevationInfo:y.elevationInfo,pointer:y.pointer,vertexHandle:w.isSome(G.info)?G.info.handle:null,excludeFeature:y.excludeFeature,visualizer:y.visualizer}),originalPos:w.isSome(G.snapOrigin)?y.coordinateHelper.vectorToDehydratedPoint(G.snapOrigin):
G.mapStart,originalScenePos:w.isSome(G.scenePoints)?G.scenePoints.sceneStart:null,frameTask:Z}}function U(y,[G,Z,T]){y=B.clonePoint(y);y.x+=G;y.y+=Z;y.hasZ&&(y.z+=T);return y}function M(y,G){return w.isNone(y)||w.isNone(G)?null:U(y,Q(G.sceneEnd,G.sceneStart))}function Q(y,G){return[y.x-G.x,y.y-G.y,y.hasZ&&G.hasZ?y.z-G.z:0]}function C(y,G,[Z,T,ia],ca){y.x=G.x+Z;y.y=G.y+T;ca&&y.hasZ&&G.hasZ&&(y.z=G.z+ia)}function E(y,G){if(!y.hasZ())return null;var Z=G.vertices;G=null;for(const T of Z){Z=y.getZ(T.pos);
if(w.isSome(G)&&w.isSome(Z)&&1E-6<Math.abs(Z-G))return null;w.isNone(G)&&(G=Z)}return G}function L(y){return y}r.createSnapDragEventPipelineStep=function({predicate:y=()=>!0,snappingManager:G,snappingContext:Z,updatingHandles:T,useZ:ia=!0}){const ca=new u.EventPipeline;if(w.isNone(G))return{snappingStep:[L,ca],cancelSnapping:L};let ha=null,da=null,X,O=null;const K=()=>{ha=w.abortMaybe(ha);G.doneSnapping();w.isSome(da)&&da.frameTask.remove();da=null;X=w.removeMaybe(X);O=null},Y=I(G,ia,ca);let S=null,
ea=null,ja=null;return{snappingStep:[oa=>{if(!y(oa))return oa;const {action:qa}=oa;if("start"===qa){var {info:ua}=oa;const va=D(G.view);da=J(Z,oa,va);da.context.selfSnappingZ=null;!ia&&w.isSome(ua)&&(ua=E(Z.coordinateHelper,ua.handle.component),w.isSome(ua)&&(da.context.selfSnappingZ={value:ua,elevationInfo:Z.elevationInfo}))}if(w.isSome(da)){const {context:va,originalScenePos:Ja,originalPos:Ta}=da,{mapEnd:Ma,mapStart:Ua,scenePoints:Oa}=oa,Za=U(Ta,Q(Ma,Ua)),Ra=Q(Ua,Ta),Ea={...oa,action:"update"},
xa=da.context,za=M(Ja,Oa);ja=ua=G.update({point:Za,scenePoint:za,context:va});C(Ma,ua,Ra,ia);S=Za;ea=za;if("end"!==qa){const {frameTask:Ia}=da;w.isNone(ha)&&(ha=new AbortController);O=pa=>{T.addPromise(N.ignoreAbortErrors(Y({frameTask:Ia,event:Ea,context:xa,point:Za,scenePoint:za,delta:Ra,getLastState:()=>({point:S,scenePoint:ea,updatePoint:pa.forceUpdate?null:ja})},w.unwrap(ha).signal)))};O({forceUpdate:!1});w.isNone(X)&&(X=A.watch(()=>G.options.effectiveEnabled,()=>O?.({forceUpdate:!0})))}}"end"===
qa&&K();return oa},ca],cancelSnapping:oa=>{K();return oa}}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingOperation":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../support/Scheduler".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I){r.SnappingOperation=function(D){function J(M){var Q=D.call(this,M)||this;Q.constrainResult=C=>C;Q._snapPoints=null;Q._frameTask=null;Q._abortController=null;Q._stagedPoint=null;Q._snap=P.debounce(function(){var C=V._asyncToGenerator(function*(E,L,y,G){const Z=Q._frameTask;if(!A.isNone(Z)){var T=yield Z.schedule(()=>L.snap({...E,context:y,signal:G}),G);T.valid&&(yield Z.schedule(()=>{Q.stagedPoint=T.apply();E!==Q._snapPoints&&A.isSome(Q._snapPoints)&&(Q.stagedPoint=
L.update({...Q._snapPoints,context:y}))},G))}});return function(E,L,y,G){return C.apply(this,arguments)}}());return Q}V._inheritsLoose(J,D);var U=J.prototype;U.initialize=function(){const M="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=A.isSome(M)?M.registerTask(I.TaskPriority.SNAPPING):I.ImmediateTask};U.destroy=function(){this._abortController=A.abortMaybe(this._abortController);this._frameTask=A.removeMaybe(this._frameTask)};U.update=function(M,Q,C){this._snapPoints=
M;const {point:E,scenePoint:L}=M;return this.stagedPoint=M=Q.update({point:E,scenePoint:L,context:C})};U.snap=function(){var M=V._asyncToGenerator(function*(Q,C,E){const {point:L,scenePoint:y}=Q;this.stagedPoint=C.update({point:L,scenePoint:y,context:E});this._snapPoints=Q;A.isNone(this._abortController)&&(this._abortController=new AbortController);return this._snap(Q,C,E,this._abortController.signal)});return function(Q,C,E){return M.apply(this,arguments)}}();U.resnap=function(){var M=V._asyncToGenerator(function*(Q,
C){A.isNone(this._snapPoints)||(yield this.snap(this._snapPoints,Q,C))});return function(Q,C){return M.apply(this,arguments)}}();U.abort=function(){this._abortController=A.abortMaybe(this._abortController);this._snapPoints=null};V._createClass(J,[{key:"stagedPoint",get:function(){return this._stagedPoint},set:function(M){this._stagedPoint=this.constrainResult(M)}}]);return J}(N);w.__decorate([B.property({constructOnly:!0})],r.SnappingOperation.prototype,"view",void 0);w.__decorate([B.property()],
r.SnappingOperation.prototype,"stagedPoint",null);w.__decorate([B.property()],r.SnappingOperation.prototype,"constrainResult",void 0);w.__decorate([B.property()],r.SnappingOperation.prototype,"_stagedPoint",void 0);r.SnappingOperation=w.__decorate([H.subclass("esri.views.interactive.snapping.SnappingOperation")],r.SnappingOperation);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/drawSurfaces":function(){define("exports ../../core/maybe ../../core/screenUtils ../../layers/graphics/dehydratedFeatures ../../layers/graphics/hydratedFeatures ../../support/elevationInfoUtils".split(" "),
function(r,V,w,N,A,P){let B=function(){function H(D,J,U,M=null){this._elevationInfo=D;this.defaultZ=J;this._view=U;this._excludeGraphics=M}var I=H.prototype;I.screenToMap=function(D){if(V.isSome(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(D.x,D.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);D=this._view.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(D.x,D.y),this._elevationInfo,0,this._excludeGraphics);
V.isSome(D)&&(D.z=void 0);return D};I.mapToScreen=function(D){D=N.makeDehydratedPoint(D.x,D.y,P.getConvertedElevation(this._view,D,this._elevationInfo),D.spatialReference);return this._view.toScreen(D)};I.constrainZ=function(D){const {defaultZ:J}=this;V.isSome(J)&&D.z!==J&&(D=A.clonePoint(D),D.z=J);return D};return H}(),u=function(){function H(D,J,U=[]){this.view=D;this.elevationInfo=J;this.exclude=U}var I=H.prototype;I.screenToMap=function(D){D=this.view.toMap(D,{exclude:this.exclude});V.isSome(D)&&
(D.z=P.getZForElevationMode(D,this.view,this.elevationInfo));return D};I.mapToScreen=function(D){let J=D;V.isSome(this.elevationInfo)&&(J=N.makeDehydratedPoint(D.x,D.y,P.getConvertedElevation(this.view,D,this.elevationInfo),D.spatialReference));return this.view.toScreen(J)};I.constrainZ=function(D){return D};return H}(),x=function(){function H(I,D=!1,J=0){this.view=I;this.hasZ=D;this.defaultZ=J;this.mapToScreen=U=>I.toScreen(U);this.screenToMap=D?U=>{U=I.toMap(U);U.z=J;return U}:U=>I.toMap(U)}H.prototype.constrainZ=
function(I){const {defaultZ:D}=this;this.hasZ&&I.z!==D&&(I=A.clonePoint(I),I.z=D);return I};return H}();r.ElevationDrawSurface=B;r.MapDrawSurface=x;r.SceneDrawSurface=u;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/GraphicMoveTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Collection ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../layers/graphics/dehydratedFeatures ../../../../../support/elevationInfoUtils ../../manipulatorUtils ../../SnappingVisualizer3D ../isSupportedGraphicUtils ../manipulatorUtils ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ../manipulations/MoveXYGraphicManipulation ./isSupportedGraphic ../../visualElements/OutlineVisualElement ../../../layers/graphics/GraphicState ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja,oa,qa,ua,va){let Ja=function(Oa){this.allGraphics=Oa;this.type="graphic-move-start"},Ta=function(Oa,Za,Ra){this.dx=Oa;this.dy=Za;this.allGraphics=Ra;this.type="graphic-move"},Ma=function(Oa){this.allGraphics=Oa;this.type="graphic-move-stop"};r.GraphicMoveTool=function(Oa){function Za(Ea){Ea=Oa.call(this,Ea)||this;Ea.graphics=new N;Ea.enableZ=!0;Ea.tooltipOptions=new S;Ea.type="move-3d";Ea._tooltip=null;return Ea}V._inheritsLoose(Za,
Oa);var Ra=Za.prototype;Ra.initialize=function(){const {graphics:Ea,view:xa}=this;this.addHandles([Ea.on("change",()=>this._refreshManipulators()),H.watch(()=>this.tooltipOptions.enabled,za=>{this._tooltip=za?new oa.Tooltip({view:xa}):u.destroyMaybe(this._tooltip)},H.syncAndInitial)]);this._refreshManipulators();this.finishToolCreation()};Ra.destroy=function(){this._tooltip=u.destroyMaybe(this._tooltip);this._moveManipulation=u.destroyMaybe(this._moveManipulation);this.graphics.removeAll();this._set("view",
null)};Ra.reset=function(){};Ra._refreshManipulators=function(){this.handles.removeAll();this._moveManipulation?.destroy();this.manipulators.removeAll();const Ea=this.graphics.toArray().filter(xa=>ha.isSupportedGraphic(xa)===L.SupportedGraphicResult.SUPPORTED).map(xa=>new Ua(xa));Ea.length&&(this._createManipulators(Ea),this._createVisualElements(Ea),this.handles.add(Ea.map(xa=>this.view.trackGraphicState(xa.state))),this._updateMoveManipulation(Ea))};Ra._createManipulators=function(Ea){for(const xa of Ea){const za=
xa.state;xa.manipulationXY=new ca.MoveXYGraphicManipulation({tool:this,view:this.view,graphicState:za});xa.manipulationXY.forEachManipulator(Ia=>this.handles.add([Ia.events.on("immediate-click",pa=>{this.emit("immediate-click",{...pa,graphic:za.graphic});pa.stopPropagation()}),Ia.events.on("grab-changed",({action:pa})=>{const {tooltipOptions:Ba,_tooltip:Pa}=this;u.isNone(Pa)||("start"===pa?Pa.info=new qa.TranslateGraphicTooltipInfo({tooltipOptions:Ba}):Pa.clear())})]));this.handles.add(xa.manipulationXY.createDragPipeline((Ia,
pa,Ba,Pa)=>this._buildDragEventPipeline(Ea,T.ManipulationType.XY,Ia,pa,Ba,Pa)))}this._createMoveManipulation(Ea)};Ra._createMoveManipulation=function(Ea){const xa=new T.MoveManipulation({tool:this,view:this.view,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:!0,radius:1===Ea.length?T.MoveManipulation.radiusForSymbol(Ea[0].graphic.symbol):Z.DISC_RADIUS});this._moveManipulation=xa;xa.elevationInfo={mode:"absolute-height",offset:0};xa.forEachManipulator(pa=>{this.handles.add(pa.events.on("immediate-click",
Ba=>{xa.zManipulation.hasManipulator(pa)||1!==this.graphics.length||this.emit("immediate-click",{...Ba,graphic:this.graphics.getItemAt(0)});Ba.stopPropagation()}))});var za=pa=>Ba=>{this.handles.add(Ba.events.on("focus-changed",({action:Pa})=>{const Va=this._tooltip;u.isNone(Va)||("focus"===Pa?this._updateMoveTooltip(Ea,pa):Va.clear())}))};this._moveManipulation.xyManipulation.forEachManipulator(za(T.ManipulationType.XY));this._moveManipulation.xyAxisManipulation.forEachManipulator(za(T.ManipulationType.XY_AXIS));
this._moveManipulation.zManipulation.forEachManipulator(za(T.ManipulationType.Z));za=()=>this._updateMoveManipulation(Ea);for(const pa of Ea)this.handles.add([pa.state.on("changed",za),H.watch(()=>pa.state.displaying,za)]);const Ia=Ea[Ea.length-1];this.handles.add(Ia.state.on("changed",()=>this._updateMoveManipulationAngle(Ia)));this.handles.add(xa.createDragPipeline((pa,Ba,Pa,Va,La)=>this._buildDragEventPipeline(Ea,pa,Ba,Pa,Va,La),Q.getGraphicEffectiveElevationInfo(Ia.graphic),u.unwrap(Ia.graphic.geometry).spatialReference,
Ia.graphic));this._updateMoveManipulationAngle(Ia)};Ra._createVisualElements=function(Ea){for(const xa of Ea){const za=G.createVisualElements({view:this.view,graphic:xa.graphic,forEachManipulator:Ia=>{xa.manipulationXY?.forEachManipulator(Ia);this._moveManipulation.forEachManipulator(Ia)},onManipulatorsChanged:()=>B.makeHandle()});u.isNone(za)||(xa.geometryRepresentation=za.visualElement,xa.geometryRepresentation instanceof da.OutlineVisualElement&&this.handles.add([xa.geometryRepresentation.events.on("attachment-origin-changed",
()=>{xa.state.isDraped||this._updateMoveManipulation(Ea)}),H.watch(()=>xa.state.isDraped,()=>this._updateMoveManipulation(Ea))]),this.handles.add(za))}};Ra._updateMoveManipulationAngle=function(Ea){this._moveManipulation.angle=ia.shapeOrientation(Ea.graphic.geometry)};Ra._updateMoveManipulation=function(Ea){const xa=M.makeDehydratedPoint(0,0,0,this.view.spatialReference);let za=0,Ia=!1;const pa=this._moveManipulation;for(const Ba of Ea)if(Ba.state.displaying&&(Ea=Ba.state.graphic,this.enableZ&&y.canMoveZ(Ea)&&
(Ia=!0),Ea=Ba.geometryRepresentation instanceof da.OutlineVisualElement&&!Ba.state.isDraped?Ba.geometryRepresentation.attachmentOrigin:C.getGraphicAttachmentOrigin(this.view,Ea),u.isSome(Ea))){const {x:Pa,y:Va,z:La}=Ea;xa.x+=Pa;xa.y+=Va;La&&(xa.z??(xa.z=0),xa.z+=La);za++}0<za?(xa.x/=za,xa.y/=za,xa.z??(xa.z=0),xa.z/=za,pa.location=xa,pa.xyManipulation.available=!0,pa.xyAxisManipulation.available=!0,pa.zManipulation.available=Ia):pa.available=!1};Ra._buildDragEventPipeline=function(Ea,xa,za,Ia,pa,Ba){const Pa=
[],Va=[];let La=null,Na=null;const R=()=>{for(const ra of Pa)ra.dragging=!1;Pa.length=0;Va.length=0;Na=La=null;this._moveManipulation.interactive=!0};if(1===Ea.length&&xa===T.ManipulationType.XY){const ra=Ea[0].graphic;({steps:Ia,cancel:pa}=this._buildSnappingPipelineSteps(ra,Q.getGraphicEffectiveElevationInfo(ra),Ia,pa,Ba))}pa=pa.next(ra=>Na?.(ra)).next(()=>{this.emit("graphic-move-stop",new Ma(Va));this.destroyed||R();return null});Ia=Ia.next(ra=>{if("start"===ra.action){Pa.length=0;Va.length=0;
for(const ya of Ea)ya.dragging||!ya.manipulationXY?.hasManipulator(za)&&ya.manipulationXY?.grabbing||(Pa.push(ya),Va.push(ya.graphic),ya.dragging=!0);if(0!==Va.length&&(this._moveManipulation.interactive=!1,La=O.dragGraphicMany(Va,this.view.state.viewingMode),Na=O.resetGraphicMany(Va),this.emit("graphic-move-start",new Ja(Va)),this.destroyed))return null}return 0!==Va.length?ra:null}).next(ra=>La?.(ra)).next(ra=>{this._updateMoveTooltip(Ea,xa,ra);return ra}).next(ra=>{switch(ra.action){case "start":case "update":if(ra.translationX||
ra.translationY||ra.translationZ){const ya=this.view.toScreen(ra.mapStart);ra=this.view.toScreen(ra.mapEnd);this.emit("graphic-move",new Ta(ra.x-ya.x,ra.y-ya.y,Va))}break;case "end":this.emit("graphic-move-stop",new Ma(Va)),this.destroyed||R()}return null});return{steps:Ia,cancel:pa}};Ra._updateMoveTooltip=function(Ea,xa,za){const {tooltipOptions:Ia,_tooltip:pa}=this;if(!u.isNone(pa)){pa.clear();var Ba=0===Ea.length?"absolute-height":Ea[0].state.isDraped?"on-the-ground":"absolute-height";switch(xa){case T.ManipulationType.XY:pa.info=
new qa.TranslateGraphicTooltipInfo({tooltipOptions:Ia});this._updateMoveTooltipDistance(pa.info,za,(Pa,Va)=>ua.autoHorizontalDistanceByElevationModeBetweenPoints(Pa,Va,Ba));break;case T.ManipulationType.XY_AXIS:pa.info=new qa.TranslateGraphicXYTooltipInfo({tooltipOptions:Ia});this._updateMoveTooltipDistance(pa.info,za,(Pa,Va)=>{Pa=ua.autoHorizontalDistanceByElevationModeBetweenPoints(Pa,Va,Ba);return x.scale(Pa,ia.axisConstrainedDragSign(za))});break;case T.ManipulationType.Z:pa.info=new qa.TranslateGraphicZTooltipInfo({tooltipOptions:Ia}),
this._updateMoveTooltipDistance(pa.info,za,va.verticalSignedDistanceBetweenPoints)}}};Ra._updateMoveTooltipDistance=function(Ea,xa,za){if(u.isSome(xa)&&"end"!==xa.action){const {mapStart:Ia,mapEnd:pa}=xa;xa=za(Ia,pa);Ea.distance=u.isSome(xa)?xa:x.zeroMeters}};Ra._buildSnappingPipelineSteps=function(Ea,xa,za,Ia,pa){const Ba=Ea.geometry;if(u.isNone(Ba)||"point"!==Ba.type&&"mesh"!==Ba.type)return{steps:za,cancel:Ia};const Pa=("point"===Ba.type?Ba:Ba.anchor).clone(),Va=new ea.SnappingContext({elevationInfo:xa,
pointer:pa,editGeometryOperations:Y.EditGeometryOperations.fromGeometry(Pa,this.view.state.viewingMode),visualizer:new E.SnappingVisualizer3D,excludeFeature:Ea}),{snappingStep:La,cancelSnapping:Na}=ja.createSnapDragEventPipelineStep({snappingContext:Va,snappingManager:this.snappingManager,updatingHandles:this.updatingHandles});Ia=Ia.next(Na);za=za.next(R=>{Pa.z=Q.getConvertedElevation(this.view,Pa,Q.getGraphicEffectiveElevationInfo(Ea),{mode:"absolute-height",offset:0});const ra=Va.coordinateHelper.pointToVector(Pa);
return{...R,snapOrigin:ra}}).next(...La);return{steps:za,cancel:Ia}};V._createClass(Za,[{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"test",get:function(){return{tooltip:this._tooltip}}}]);return Za}(P.HandleOwnerMixin(A.EventedMixin(K.InteractiveToolBase)));w.__decorate([I.property({constructOnly:!0,nonNullable:!0})],r.GraphicMoveTool.prototype,"view",void 0);w.__decorate([I.property()],r.GraphicMoveTool.prototype,"graphics",void 0);w.__decorate([I.property({constructOnly:!0,
nonNullable:!0})],r.GraphicMoveTool.prototype,"enableZ",void 0);w.__decorate([I.property({constructOnly:!0,type:S})],r.GraphicMoveTool.prototype,"tooltipOptions",void 0);w.__decorate([I.property({constructOnly:!0})],r.GraphicMoveTool.prototype,"snappingManager",void 0);w.__decorate([I.property()],r.GraphicMoveTool.prototype,"type",void 0);w.__decorate([I.property()],r.GraphicMoveTool.prototype,"updating",null);r.GraphicMoveTool=w.__decorate([U.subclass("esri.views.3d.interactive.editingTools.graphicMove3D.GraphicMoveTool")],
r.GraphicMoveTool);let Ua=function(){function Oa(Za){this.manipulationXY=this.geometryRepresentation=null;this.dragging=!1;this.state=new X.GraphicState({graphic:Za})}V._createClass(Oa,[{key:"graphic",get:function(){return this.state.graphic}}]);return Oa}();r.GraphicMoveEvent=Ta;r.GraphicMoveStartEvent=Ja;r.GraphicMoveStopEvent=Ma;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/manipulatorUtils":function(){define("exports ../../../core/maybe ../../../chunks/mat4 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../chunks/vec4f64 ../../../geometry/support/vectorStacks ../../../layers/graphics/hydratedFeatures ./Manipulator3D ./RenderObject ../layers/graphics/graphicUtils ../webgl-engine/lib/Attribute ../webgl-engine/lib/basicInterfaces ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Material ../webgl-engine/lib/VertexAttribute ../webgl-engine/materials/ColorMaterial ../webgl-engine/materials/ImageMaterial ../webgl-engine/materials/NativeLineMaterial ../webgl-engine/materials/RibbonLineMaterial ../webgl-engine/materials/ShadedColorMaterial ../../interactive/interfaces".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T){function ia(O,K=Q.RenderOccludedFlag.OccludeAndTransparent,Y=!0){const S=P.fromValues(O[0],O[1],O[2],3<O.length?O[3]:1);O=1>O[3];return Y?new Z.ShadedColorMaterial({color:S,transparent:O,writeDepth:!0,cullFace:J.CullFaceOptions.Back,renderOccluded:K}):new E.ColorMaterial({color:S,transparent:O,writeDepth:!0,cullFace:J.CullFaceOptions.Back,renderOccluded:K})}function ca(O,K){const Y=K.material??new L.ImageMaterial({transparent:!0,writeDepth:!1,
textureId:K.texture?.id,renderOccluded:Q.RenderOccludedFlag.Opaque}),S=K.focusMultiplier??X.focusMultiplier,ea=K.calloutLength??X.calloutLength,ja=X.discRadius*(K.discScale??1),oa=ja*S,qa=(Ta,Ma)=>{const Ua=[0,1,2,2,3,0];return new U.Geometry(Ma,[[C.VertexAttribute.POSITION,new D.Attribute([ea-Ta,-Ta,0,ea+Ta,-Ta,0,ea+Ta,Ta,0,ea-Ta,Ta,0],3,!0)],[C.VertexAttribute.UV0,new D.Attribute([0,0,1,0,1,1,0,1],2,!0)]],[[C.VertexAttribute.POSITION,Ua],[C.VertexAttribute.UV0,Ua]])};var ua=X.calloutColor,va=K.calloutWidth??
X.calloutWidth;va=new (1<va?G.RibbonLineMaterial:y.NativeLineMaterial)({width:va,color:P.fromValues(ua[0],ua[1],ua[2],K.calloutOpacity??1),renderOccluded:Q.RenderOccludedFlag.OccludeAndTransparent});ua=M.createPolylineGeometry(va,[[0,0,0],[ea-ja,0,0]]);va=M.createPolylineGeometry(va,[[0,0,0],[ea-oa,0,0]]);const Ja=K.customStateMask??T.ManipulatorStateCustomFlags.None;O.collisionType={type:"disc",direction:[0,0,1],offset:[ea,0,0]};O.focusMultiplier=S;O.metadata=K.metadata;O.radius=ja;O.renderObjects=
[new H.RenderObject(qa(ja,Y),T.ManipulatorStateFlags.Unfocused|Ja),new H.RenderObject(ua,T.ManipulatorStateFlags.Unfocused|Ja),new H.RenderObject(qa(oa,Y),T.ManipulatorStateFlags.Focused|Ja),new H.RenderObject(va,T.ManipulatorStateFlags.Focused|Ja)]}function ha(O,K,Y,S){O=N.normalize(B.sv3d.get(),O);K=N.normalize(B.sv3d.get(),K);const ea=N.cross(B.sv3d.get(),O,K);S[0]=O[0];S[1]=O[1];S[2]=O[2];S[3]=0;S[4]=K[0];S[5]=K[1];S[6]=K[2];S[7]=0;S[8]=ea[0];S[9]=ea[1];S[10]=ea[2];S[11]=0;S[12]=Y[0];S[13]=Y[1];
S[14]=Y[2];S[15]=1;return S}function da(O,K){const Y=O.getViewForGraphic(K);return V.isSome(Y)&&"computeAttachmentOrigin"in Y?Y.computeAttachmentOrigin(K,O.spatialReference):null}const X=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1,calloutColor:A.fromValues(1,.5,0)});A=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});r.calculateInputRotationTransform=function(O,K,Y,S){O=N.subtract(B.sv3d.get(),O,Y);S=N.cross(B.sv3d.get(),S,O);Y=ha(O,S,Y,B.sm4d.get());w.invert(Y,
Y);K=N.transformMat4(B.sv3d.get(),K,Y);return Math.atan2(K[1],K[0])};r.calculateTranslateRotateFromBases=ha;r.createManipulatorMaterial=ia;r.createManipulatorOutlineMaterial=function(O,K=Q.RenderOccludedFlag.OccludeAndTransparent){O=P.fromValues(O[0],O[1],O[2],4===O.length?O[3]:1);return new E.ColorMaterial({color:O,transparent:!0,writeDepth:!0,cullFace:J.CullFaceOptions.Front,renderOccluded:K})};r.createRotateManipulator=function(O,K){O=new x.Manipulator3D({view:O,autoScaleRenderObjects:!1,collisionPriority:1,
metadata:K.metadata});ca(O,K);return O};r.createSphereManipulator=function(O,K,Y=1,S=T.ManipulatorStateCustomFlags.None){K=ia(P.fromValues(K[0],K[1],K[2],null!=Y?Y:1));S=[new H.RenderObject(M.createSphereGeometry(K,1,32,32),S)];return new x.Manipulator3D({view:O,renderObjects:S})};r.getGraphicAttachmentOrigin=da;r.placeAtGraphic=function(O,K,Y){O=da(O,Y);V.isSome(O)?K.elevationAlignedLocation=O:(Y=Y.geometry,V.isNone(Y)||(Y="mesh"===Y.type?Y.anchor:I.computeCentroid(Y),V.isNone(Y)||(K.location=u.hydrateGeometry(Y))))};
r.updateRotateManipulator=ca;r.worldScaledManipulatorSettings=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/Manipulator3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/compilerUtils ../../../core/Evented ../../../core/mathUtils ../../../core/maybe ../../../core/screenUtils ../../../core/accessorSupport/utils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4 ../../../chunks/mat4f64 ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/ellipsoidUtils ../../../geometry/projection ../../../geometry/support/aaBoundingRect ../../../geometry/support/lineSegment ../../../geometry/support/plane ../../../geometry/support/ray ../../../geometry/support/vectorStacks ../../../layers/graphics/hydratedFeatures ../support/ElevationProvider ../support/geometryUtils/ray ../webgl-engine/lib/Camera ../webgl-engine/lib/Object3D ../webgl-engine/lib/UpdatePolicy ../webgl-engine/lib/WebGLLayer ../../interactive/interfaces ../../../geometry/Point".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S){function ea(za){return 0!==za[12]||0!==za[13]||0!==za[14]}w=function(){function za(pa){this.metadata=void 0;this._camera=new da.Camera;this._elevation={offset:0,override:null};this.collisionType={type:"point"};this.collisionPriority=0;this._renderObjects=[];this._available=this.autoScaleRenderObjects=!0;this._noDisplayCount=0;this._radius=10;this._worldSized=!1;this.focusMultiplier=2;this.touchMultiplier=2.5;this.worldOriented=
!1;this._modelTransform=J.create();this._worldFrame=null;this._renderLocation=Q.create();this._renderLocationDirty=!0;this._location=new S({x:0,y:0,z:0});this._elevationAlignedLocation=new S;this.interactive=this._elevationAlignedLocationDirty=!0;this.selectable=!1;this.grabbable=!0;this.grabCursor=this.cursor=null;this._selected=this._hovering=this.dragging=this._grabbing=!1;this._state=Y.ManipulatorStateCustomFlags.None;this._focused=!1;this.events=new A.EventEmitter;this._screenLocation={screenPointArray:u.createScreenPointArray(),
renderScreenPointArray:u.createRenderScreenPointArray3(),pixelSize:0};this._screenLocationDirty=!0;this._attached=this._engineResourcesAddedToStage=!1;this._location.spatialReference=pa.view.spatialReference;for(const Ba in pa)this[Ba]=pa[Ba];(pa=this.view.state?.camera)&&this._camera.copyFrom(pa)}var Ia=za.prototype;Ia.destroy=function(){this._removeResourcesFromStage();this._camera=this.view=this._engineResources=null};Ia.disableDisplay=function(){this._noDisplayCount++;1===this._noDisplayCount&&
this._updateEngineObject();return{remove:x.once(()=>{this._noDisplayCount--;0===this._noDisplayCount&&this._updateEngineObject()})}};Ia._notifyLocationChanged=function(){this._elevationAlignedLocationDirty=this._screenLocationDirty=this._renderLocationDirty=!0;this._updateEngineObject();this.events.emit("location-update",{location:this._location})};Ia._updateElevationAlignedLocation=function(){const pa=B.isSome(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.x=
this.location.x;this._elevationAlignedLocation.y=this.location.y;this._elevationAlignedLocation.z=pa+this._elevation.offset;this._elevationAlignedLocation.spatialReference=ia.hydratedSpatialReference(this.location.spatialReference);this._screenLocationDirty=this._renderLocationDirty=!0;this._elevationAlignedLocationDirty=!1};Ia.grabbableForEvent=function(){return!0};Ia.updateStateEnabled=function(pa,Ba){this.state=Ba?this.state|pa:this.state&~pa};Ia._setFocused=function(pa){pa!==this._focused&&(this._focused=
pa,this.events.emit("focus-changed",{action:!0===pa?"focus":"unfocus"}))};Ia._ensureScreenLocation=function(){if(this._screenLocationDirty){this._screenLocation.pixelSize=this._camera.computeScreenPixelSizeAt(this.renderLocation);this._screenLocationDirty=!1;if(ea(this._modelTransform)){var pa=this._calculateModelTransformOffset(Ea);pa=M.add(pa,pa,this.renderLocation)}else pa=this.renderLocation;this._camera.projectToRenderScreen(pa,this._screenLocation.renderScreenPointArray);this._camera.renderToScreen(this._screenLocation.renderScreenPointArray,
this._screenLocation.screenPointArray)}};Ia.intersectionDistance=function(pa,Ba){if(!this.available)return null;pa=u.screenPointObjectToArray(pa,ja);var Pa=this._getCollisionRadius(Ba);Ba=-1*this.collisionPriority;switch(this.collisionType.type){case "point":if(U.squaredDistance(this.screenLocation.screenPointArray,pa)<Pa*Pa)return this.screenLocation.renderScreenPointArray[2]+Ba;break;case "line":var Va=this.collisionType.paths,La=this._getWorldToScreenObjectScale();La=this._calculateObjectTransform(La,
Ja);Pa*=this.screenLocation.pixelSize;pa=ha.fromScreen(this._camera,pa,qa);if(B.isNone(pa))break;for(var Na of Va)if(0!==Na.length){Va=M.transformMat4(Ma,Na[0],La);for(var R=1;R<Na.length;R++){var ra=M.transformMat4(Ua,Na[R],La),ya=y.closestRayDistance2(y.fromPoints(Va,ra,oa),pa);if(null!=ya&&ya<Pa*Pa)return La=M.add(T.sv3d.get(),Va,ra),M.scale(La,La,.5),pa=u.castRenderScreenPointArray(T.sv3d.get()),this._camera.projectToRenderScreen(La,pa),pa[2]+Ba;M.copy(Va,ra)}}break;case "disc":Va=this.collisionType.direction;
La=this.collisionType.offset??Q.ZEROS;Na=this._getWorldToScreenObjectScale();R=this._calculateObjectTransform(Na,Ja);Na=Pa*this.screenLocation.pixelSize;pa=ha.fromScreen(this._camera,pa,qa);if(B.isNone(pa))break;Pa=H.fromMat4(ua,R);Pa=M.transformMat3(Za,Va,Pa);La=M.transformMat4(Ra,La,R);G.fromPositionAndNormal(La,Pa,Ta);Pa=Oa;if(G.intersectRay(Ta,pa,Pa)&&M.squaredDistance(Pa,La)<Na*Na)return this.screenLocation.renderScreenPointArray[2]+Ba;break;case "ribbon":const {paths:na,direction:ta}=this.collisionType;
Na=this._getWorldToScreenObjectScale();Na=this._calculateObjectTransform(Na,Ja);Pa*=this._camera.computeScreenPixelSizeAt(this.renderLocation);Va=ha.fromScreen(this._camera,pa,qa);if(B.isNone(Va))break;pa=H.fromMat4(ua,Na);pa=M.transformMat3(Za,ta,pa);R=this._calculateModelTransformPosition(Ra);G.fromPositionAndNormal(R,pa,Ta);pa=Oa;if(!G.intersectRay(Ta,Va,pa))break;for(La of na)if(0!==La.length)for(Va=M.transformMat4(Ma,La[0],Na),R=1;R<La.length;R++){ra=M.transformMat4(Ua,La[R],Na);ya=y.distance2(y.fromPoints(Va,
ra,oa),pa);if(null!=ya&&ya<Pa*Pa)return La=M.add(T.sv3d.get(),Va,ra),M.scale(La,La,.5),pa=u.castRenderScreenPointArray(T.sv3d.get()),this._camera.projectToRenderScreen(La,pa),pa[2]+Ba;M.copy(Va,ra)}break;default:N.neverReached(this.collisionType)}return null};Ia.attach=function(pa={manipulator3D:{}}){const Ba=this._stage;if(Ba){pa=pa.manipulator3D;if(B.isNone(pa.engineLayerId)){const Pa=new K.WebGLLayer({pickable:!1,updatePolicy:O.UpdatePolicy.SYNC});Ba.add(Pa);pa.engineLayerId=Pa.id;this._engineLayer=
Pa}else Ba?.getObject&&(this._engineLayer=Ba.getObject(pa.engineLayerId));pa.engineLayerReferences=(pa.engineLayerReferences||0)+1;this._materialIdReferences=pa.materialIdReferences;B.isNone(this._materialIdReferences)&&(this._materialIdReferences=new Map,pa.materialIdReferences=this._materialIdReferences);this._camera.copyFrom(this.view.state.camera);this._attached=!0;this._updateEngineObject();E.canProjectWithoutEngine(this._location.spatialReference,this.view.spatialReference)||(this.location=
new S({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}};Ia.detach=function(pa={manipulator3D:{}}){pa=pa.manipulator3D;pa.engineLayerReferences--;const Ba=0===pa.engineLayerReferences;Ba&&(pa.engineLayerId=null);this._removeResourcesFromStage(Ba);this._materialIdReferences=this._engineLayer=this._engineResources=null;this._attached=!1};Ia.onViewChange=function(){this._camera.copyFrom(this.view.state.camera);this._screenLocationDirty=!0;this._updateEngineObject()};Ia.onElevationChange=function(pa){E.projectPoint(this.location,
xa,pa.spatialReference)&&L.containsPointObject(pa.extent,xa)&&this._notifyLocationChanged()};Ia._evaluateElevationAlignment=function(){if(!B.isNone(this.elevationInfo)){var pa=null,Ba=0,Pa=B.unwrapOr(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case "on-the-ground":pa=B.unwrapOr(ca.getElevationAtPoint(this.view.elevationProvider,this.location,"ground"),0);break;case "relative-to-ground":Ba=B.unwrapOr(ca.getElevationAtPoint(this.view.elevationProvider,this.location,"ground"),0)+Pa;
break;case "relative-to-scene":Ba=B.unwrapOr(ca.getElevationAtPoint(this.view.elevationProvider,this.location,"scene"),0)+Pa;break;case "absolute-height":Ba=Pa}if(Ba!==this._elevation.offset||pa!==this._elevation.override)this._elevation.offset=Ba,this._elevation.override=pa}};Ia._updateEngineObject=function(){if(this._attached)if(this.available){var pa=this._getWorldToScreenObjectScale(),Ba=Ja;!0===this.autoScaleRenderObjects?(pa*=this._getFocusedSize(this._radius,this.focused),this._calculateObjectTransform(pa,
Ba)):this._calculateObjectTransform(pa,Ba);var {objectsByState:Pa}=this._ensureEngineResources();pa=(this.focused?Y.ManipulatorStateFlags.Focused:Y.ManipulatorStateFlags.Unfocused)|(this.selected?Y.ManipulatorStateFlags.Selected:Y.ManipulatorStateFlags.Unselected);var Va=0<this._noDisplayCount;for(const {stateMask:La,objects:Na}of Pa)if(Va)for(const R of Na)R.visible=!1;else if(Pa=(La&Y.ManipulatorStateCustomFlags.All)===Y.ManipulatorStateCustomFlags.None||(this.state&La)===(La&Y.ManipulatorStateCustomFlags.All),
(La&Y.ManipulatorStateFlags.All)!==Y.ManipulatorStateFlags.None&&(pa&La)!==(La&Y.ManipulatorStateFlags.All)||!Pa)for(const R of Na)R.visible=!1;else for(const R of Na)R.visible=!0,R.transformation=Ba}else this._removeResourcesFromStage()};Ia._ensureEngineResources=function(){if(B.isNone(this._engineResources)){const pa=B.unwrap(this._engineLayer),Ba=[],Pa=new Set;this.renderObjects.forEach(({geometry:{material:Na}})=>{Pa.has(Na)||(Ba.push(Na),Pa.add(Na))});const Va=new Map;this._renderObjects.forEach(Na=>
{const R=new X.Object3D({castShadow:!1,geometries:[Na.geometry]}),ra=Va.get(Na.stateMask)||[];ra.push(R);Va.set(Na.stateMask,ra)});const La=[];Va.forEach((Na,R)=>La.push({stateMask:R,objects:Na}));this._engineResources={objectsByState:La,layer:pa,materials:Ba}}this._addResourcesToStage();return this._engineResources};Ia._addResourcesToStage=function(){const pa=this._stage;if(!this._engineResourcesAddedToStage&&!B.isNone(this._engineResources)&&pa){var {objectsByState:Ba,layer:Pa,materials:Va}=this._engineResources;
Va.forEach(La=>{const Na=B.unwrap(this._materialIdReferences),R=Na.get(La.id)||0;0===R&&pa.add(La);Na.set(La.id,R+1)});Ba.forEach(({objects:La})=>{Pa.addMany(La);pa.addMany(La)});this._engineResourcesAddedToStage=!0}};Ia._removeResourcesFromStage=function(pa=!1){const Ba=this._stage;if(this._engineResourcesAddedToStage&&!B.isNone(this._engineResources)&&Ba){var {objectsByState:Pa,layer:Va,materials:La}=this._engineResources;Pa.forEach(({objects:Na})=>{Va.removeMany(Na);Ba.removeMany(Na)});La.forEach(Na=>
{const R=B.unwrap(this._materialIdReferences),ra=R.get(Na.id);1===ra?(Ba.remove(Na),R.delete(Na.id)):R.set(Na.id,ra-1)});pa&&Ba.remove(Va);this._engineResourcesAddedToStage=!1}};Ia._getCollisionRadius=function(pa){return this._getFocusedSize(this.radius,!0)*("touch"===pa?this.touchMultiplier:1)};Ia._getFocusedSize=function(pa,Ba){return pa*(Ba?this.focusMultiplier:1)};Ia._getWorldToScreenObjectScale=function(){return this._worldSized?1:this.screenLocation.pixelSize};Ia._calculateModelTransformPosition=
function(pa){var Ba=this._getWorldToScreenObjectScale();Ba=this._calculateObjectTransform(Ba,va);return M.set(pa,Ba[12],Ba[13],Ba[14])};Ia._calculateModelTransformOffset=function(pa){const Ba=this._calculateModelTransformPosition(pa);return M.subtract(pa,Ba,this.renderLocation)};Ia._calculateObjectTransform=function(pa,Ba){D.set(Ba,pa,0,0,0,0,pa,0,0,0,0,pa,0,0,0,0,1);this._worldFrame&&D.multiply(Ba,Ba,this._worldFrame);D.multiply(Ba,Ba,this._modelTransform);Ba[12]+=this.renderLocation[0];Ba[13]+=
this.renderLocation[1];Ba[14]+=this.renderLocation[2];Ba[15]=1;B.isSome(this._applyObjectTransform)&&this._applyObjectTransform(Ba);return Ba};V._createClass(za,[{key:"_stage",get:function(){return this.view?._stage}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(pa){this._elevationInfo=pa;this._renderLocationDirty=this._elevationAlignedLocationDirty=!0;this._updateEngineObject()}},{key:"renderObjects",get:function(){return this._renderObjects},set:function(pa){this._removeResourcesFromStage();
this._engineResources=null;this._renderObjects=pa.slice();this._updateEngineObject()}},{key:"available",get:function(){return this._available},set:function(pa){pa!==this._available&&(this._available=pa,this._updateEngineObject())}},{key:"radius",get:function(){return this._radius},set:function(pa){pa!==this._radius&&(this._radius=pa,this._updateEngineObject())}},{key:"worldSized",get:function(){return this._worldSized},set:function(pa){pa!==this._worldSized&&(this._worldSized=pa,this._updateEngineObject())}},
{key:"modelTransform",get:function(){return this._modelTransform},set:function(pa){ea(pa)&&(this._screenLocationDirty=!0);D.copy(this._modelTransform,pa);this._updateEngineObject()}},{key:"renderLocation",get:function(){if(this._renderLocationDirty)if(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented){this._worldFrame||(this._worldFrame=J.create());a:{var pa=this.view,Ba=this._renderLocation,Pa=this._worldFrame;
switch(pa.viewingMode){case "local":D.identity(Pa);break a;case "global":pa=C.getReferenceEllipsoid(pa.renderCoordsHelper.spatialReference),E.sphericalPCPFtoLonLatElevation(Ba,0,Ma,0,pa.radius),E.computeENUToSphericalPCPFLocalRotation(P.deg2rad(Ma[0]),P.deg2rad(Ma[1]),Pa)}}}else this._worldFrame&&(this._worldFrame=null);return this._renderLocation},set:function(pa){this.view.renderCoordsHelper.fromRenderCoords(pa,this._location);this.elevationAlignedLocation=this._location}},{key:"location",get:function(){return this._location},
set:function(pa){ia.clonePoint(pa,this._location);this._notifyLocationChanged()}},{key:"elevationAlignedLocation",get:function(){if(!this._elevationAlignedLocationDirty)return this._elevationAlignedLocation;this._evaluateElevationAlignment();this._updateElevationAlignedLocation();return this._elevationAlignedLocation},set:function(pa){ia.clonePoint(pa,this._location);this._evaluateElevationAlignment();this._location.z-=this._elevation.offset;this._updateElevationAlignedLocation();this._updateEngineObject();
this.events.emit("location-update",{location:this._location})}},{key:"grabbing",get:function(){return this._grabbing},set:function(pa){pa!==this._grabbing&&(this._grabbing=pa,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}},{key:"hovering",get:function(){return this._hovering},set:function(pa){pa!==this._hovering&&(this._hovering=pa,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}},{key:"selected",get:function(){return this._selected},set:function(pa){pa!==
this._selected&&(this._selected=pa,this._updateEngineObject(),this.events.emit("select-changed",{action:pa?"select":"deselect"}))}},{key:"state",get:function(){return this._state},set:function(pa){pa!==this._state&&(this._state=pa,this._updateEngineObject())}},{key:"focused",get:function(){return this._focused}},{key:"screenLocation",get:function(){this._ensureScreenLocation();return this._screenLocation}},{key:"applyObjectTransform",get:function(){return this._applyObjectTransform},set:function(pa){this._applyObjectTransform=
pa;this._screenLocationDirty=!0;this._updateEngineObject()}},{key:"attached",get:function(){return this._attached}},{key:"test",get:function(){let pa=!1;if(B.isSome(this._engineResources))for(const Ba in this._engineResources.objectsByState){const Pa=this._engineResources.objectsByState[Ba];for(const Va of Pa.objects)if(Va.visible){pa=!0;break}if(pa)break}return{areAnyResourcesVisible:pa}}}]);return za}();const ja=u.createScreenPointArray(),oa=y.create(),qa=Z.create(),ua=I.create(),va=J.create(),
Ja=J.create(),Ta=G.create(),Ma=Q.create(),Ua=Q.create(),Oa=Q.create(),Za=Q.create(),Ra=Q.create(),Ea=Q.create(),xa=new S({x:0,y:0,z:0,spatialReference:null});r.Manipulator3D=w;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/RenderObject":function(){define(["exports","../../interactive/interfaces"],function(r,V){r.RenderObject=function(w,N=V.ManipulatorStateFlags.None){this.geometry=w;this.stateMask=N};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/materials/ImageMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../lib/basicInterfaces ../lib/GLTextureMaterial ../lib/Material ../lib/OrderIndependentTransparency ../lib/RenderSlot ./DefaultBufferWriter ./DefaultLayouts ./TriangleMaterial ../shaders/ImageMaterialTechnique".split(" "),function(r,V,w,N,A,P,B,u,x,H,I,D){I=function(M){function Q(E){E=M.call(this,E,new U)||this;E.supportsEdges=!0;E._configuration=
new D.ImageMaterialTechniqueConfiguration;return E}V._inheritsLoose(Q,M);var C=Q.prototype;C.getConfiguration=function(E,L){this._configuration.output=E;this._configuration.cullFace=this.parameters.cullFace;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.transparent=this.parameters.transparent;this._configuration.writeDepth=this.parameters.writeDepth;this._configuration.hasOccludees=this.parameters.hasOccludees;this._configuration.transparencyPassType=L.transparencyPassType;
this._configuration.enableOffset=L.camera.relativeElevation<B.OITPolygonOffsetLimit;this._configuration.hasMultipassTerrain=L.multipassTerrain.enabled;this._configuration.cullAboveGround=L.multipassTerrain.cullAboveGround;return this._configuration};C.requiresSlot=function(E,L){return L===w.ShaderOutput.Color||L===w.ShaderOutput.Alpha||L===w.ShaderOutput.Highlight?E===u.RenderSlot.DRAPED_MATERIAL?!0:L===w.ShaderOutput.Highlight?E===u.RenderSlot.OPAQUE_MATERIAL:E===(this.parameters.transparent?this.parameters.writeDepth?
u.RenderSlot.TRANSPARENT_MATERIAL:u.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:u.RenderSlot.OPAQUE_MATERIAL):!1};C.createGLMaterial=function(E){return new J(E)};C.createBufferWriter=function(){return new x.DefaultBufferWriter(H.PositionUVLayout)};return Q}(I.TriangleMaterial);let J=function(M){function Q(E){return M.call(this,{...E,...E.material.parameters})||this}V._inheritsLoose(Q,M);var C=Q.prototype;C._updateParameters=function(E){this.updateTexture(this._material.parameters.textureId);
this._material.setParameters(this.textureBindParameters);return this.ensureTechnique(D.ImageMaterialTechnique,E)};C._updateOccludeeState=function(E){E.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:E.hasOccludees}),this._updateParameters(E))};C.beginSlot=function(E){this._output!==w.ShaderOutput.Color&&this._output!==w.ShaderOutput.Alpha||this._updateOccludeeState(E);return this._updateParameters(E)};return Q}(A.GLTextureMaterial),U=function(M){function Q(){var C=
M.apply(this,arguments)||this;C.transparent=!1;C.writeDepth=!0;C.hasSlicePlane=!1;C.cullFace=N.CullFaceOptions.None;C.hasOccludees=!1;C.opacity=1;C.textureId=null;C.initTextureTransparent=!0;return C}V._inheritsLoose(Q,M);return Q}(P.MaterialParameters);r.ImageMaterial=I;r.Parameters=U;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/ImageMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../materials/DefaultTechniqueConfiguration ../../../../chunks/ImageMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L){P=function(G){function Z(){return G.apply(this,arguments)||this}w._inheritsLoose(Z,G);return Z}(P.NoParameters);u=function(G){function Z(){return G.apply(this,arguments)||this}w._inheritsLoose(Z,G);var T=Z.prototype;T.initializeProgram=function(ia){return new J.Program(ia.rctx,Z.shader.get().build(this.configuration),I.Default3D)};T._setPipelineState=function(ia,ca){const ha=this.configuration,da=ia===M.TransparencyPassType.NONE,X=ia===M.TransparencyPassType.FrontFace;
return L.makePipelineState({blending:ha.output!==A.ShaderOutput.Color&&ha.output!==A.ShaderOutput.Alpha||!ha.transparent?null:da?y:D.oitBlending(ia),culling:L.cullingParams(ha.cullFace),depthTest:{func:D.oitDepthTest(ia)},depthWrite:da?ha.writeDepth?L.defaultDepthWriteParams:null:D.oitDepthWrite(ia),colorWrite:L.defaultColorWriteParams,stencilWrite:ha.hasOccludees?U.stencilWriteMaskOn:null,stencilTest:ha.hasOccludees?ca?U.stencilToolMaskBaseParams:U.stencilBaseAllZerosParams:null,polygonOffset:da||
X?null:D.getOITPolygonOffset(ha.enableOffset)})};T.initializePipeline=function(){this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0);return this._setPipelineState(this.configuration.transparencyPassType,!1)};T.getPipelineState=function(ia,ca){return ca?this._occludeePipelineState:G.prototype.getPipelineState.call(this,ia,ca)};return Z}(u.ShaderTechnique);u.shader=new B.ReloadableShaderModule(C.ImageMaterial,()=>new Promise((G,Z)=>r(["./ImageMaterial.glsl"],
G,Z)));const y=L.simpleBlendingParams(E.BlendFactor.ONE,E.BlendFactor.ONE_MINUS_SRC_ALPHA);B=function(G){function Z(){var T=G.apply(this,arguments)||this;T.output=A.ShaderOutput.Color;T.cullFace=H.CullFaceOptions.None;T.hasSlicePlane=!1;T.transparent=!1;T.enableOffset=!0;T.writeDepth=!0;T.hasOccludees=!1;T.transparencyPassType=M.TransparencyPassType.NONE;T.hasMultipassTerrain=!1;T.cullAboveGround=!1;return T}w._inheritsLoose(Z,G);return Z}(Q.DefaultTechniqueConfiguration);N.__decorate([x.parameter({count:A.ShaderOutput.COUNT})],
B.prototype,"output",void 0);N.__decorate([x.parameter({count:H.CullFaceOptions.COUNT})],B.prototype,"cullFace",void 0);N.__decorate([x.parameter()],B.prototype,"hasSlicePlane",void 0);N.__decorate([x.parameter()],B.prototype,"transparent",void 0);N.__decorate([x.parameter()],B.prototype,"enableOffset",void 0);N.__decorate([x.parameter()],B.prototype,"writeDepth",void 0);N.__decorate([x.parameter()],B.prototype,"hasOccludees",void 0);N.__decorate([x.parameter({count:M.TransparencyPassType.COUNT})],
B.prototype,"transparencyPassType",void 0);N.__decorate([x.parameter()],B.prototype,"hasMultipassTerrain",void 0);N.__decorate([x.parameter()],B.prototype,"cullAboveGround",void 0);V.ImageMaterialPassParameters=P;V.ImageMaterialTechnique=u;V.ImageMaterialTechniqueConfiguration=B;Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/ImageMaterial.glsl":function(){define("exports ../core/maybe ./vec2f64 ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform ../views/3d/webgl-engine/lib/TransparencyPassType ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){function E(y){const G=new U.ShaderBuilder,{vertex:Z,fragment:T}=G;H.addProjViewLocalOrigin(Z,y);G.include(P.Transform,y);G.attributes.add(C.VertexAttribute.POSITION,"vec3");G.attributes.add(C.VertexAttribute.UV0,"vec2");G.varyings.add("vpos","vec3");y.hasMultipassTerrain&&G.varyings.add("depth","float");Z.uniforms.add(new I.Float2PassUniform("textureCoordinateScaleFactor",ia=>V.isSome(ia.texture)&&V.isSome(ia.texture.descriptor.textureCoordinateScaleFactor)?
ia.texture.descriptor.textureCoordinateScaleFactor:w.ONES));Z.code.add(J.glsl`
    void main(void) {
      vpos = position;
      ${y.hasMultipassTerrain?"depth \x3d (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0 * textureCoordinateScaleFactor;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `);G.include(A.SliceDraw,y);G.include(B.multipassTerrainTest,y);T.uniforms.add([new M.Texture2DPassUniform("tex",ia=>ia.texture),new D.FloatPassUniform("opacity",ia=>ia.opacity)]);G.varyings.add("vTexCoord","vec2");y.output===N.ShaderOutput.Alpha?T.code.add(J.glsl`
    void main() {
      discardBySlice(vpos);
      ${y.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture2D(tex, vTexCoord).a * opacity;
      if (alpha  < ${J.glsl.float(u.defaultMaskAlphaCutoff)}) {
        discard;
      }

      gl_FragColor = vec4(alpha);
    }
    `):(T.include(x.ColorConversion),T.code.add(J.glsl`
    void main() {
      discardBySlice(vpos);
      ${y.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      gl_FragColor = texture2D(tex, vTexCoord) * opacity;

      if (gl_FragColor.a < ${J.glsl.float(u.defaultMaskAlphaCutoff)}) {
        discard;
      }

      gl_FragColor = highlightSlice(gl_FragColor, vpos);
      ${y.transparencyPassType===Q.TransparencyPassType.Color?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    }
    `));return G}const L=Object.freeze(Object.defineProperty({__proto__:null,build:E},Symbol.toStringTag,{value:"Module"}));r.ImageMaterial=L;r.build=E})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(r,V){r.SupportedGraphicResult=void 0;(function(w){w[w.SUPPORTED=0]="SUPPORTED";w[w.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";w[w.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";w[w.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";
w[w.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";w[w.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(r.SupportedGraphicResult||(r.SupportedGraphicResult={}));r.isSupportedGraphicResultMessage=function(w){switch(w){case r.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case r.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case r.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case r.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";
case r.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulatorUtils":function(){define(["exports","../../../../core/maybe","../../../../support/elevationInfoUtils"],function(r,V,w){r.canMoveZ=function(N,A=w.getGraphicEffectiveElevationInfo(N)){return"on-the-ground"===A.mode||V.isNone(N.geometry)||!N.geometry.hasZ?!1:!0};r.disableDisplayOnGrab=
function(N,A){let P=null;const B=N.events.on("grab-changed",u=>{V.isSome(P)&&(P.remove(),P=null);"start"===u.action&&(P=N.disableDisplay());A&&A(u)});return{remove(){V.isSome(P)&&P.remove();B.remove()}}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/visualElementUtils":function(){define(["exports","../../../../core/maybe","./lineGraphicVisualElementUtils","./originGraphicVisualElementUtils"],function(r,V,w,N){r.createVisualElements=function(A){switch(V.unwrap(A.graphic.geometry).type){case "point":case "mesh":return N.createVisualElements(A);
case "polygon":case "polyline":return w.createVisualElements(A);default:return null}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/lineGraphicVisualElementUtils":function(){define("exports ../../../../core/handleUtils ../../../../core/mathUtils ../../../../core/maybe ../../../../core/reactiveUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../support/elevationInfoUtils ../Manipulator3D ./GrabbingState ./ManipulatorState ./ManipulatorType ./settings ../visualElements/ExtendedLineVisualElement ../visualElements/LaserlineVisualElement ../visualElements/OutlineVisualElement ../../layers/graphics/GraphicState ../../webgl-engine/lib/Material".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E){function L(ia,ca){const {view:ha,graphic:da}=ia,X=new Q.OutlineVisualElement({view:ha,geometry:Z(da)?da.geometry:null,elevationInfo:u.getGraphicEffectiveElevationInfo(da),attached:!1});J.settings.visualElements.lineGraphics.shadowStyle.apply(X);J.settings.visualElements.lineGraphics.outline.apply(X);const O=[A.watch(()=>ca.displaying,()=>{X.attached=ca.displaying}),A.watch(()=>ca.isDraped,K=>{X.isDraped=K}),ca.on("changed",()=>X.geometry=Z(da)?da.geometry:
null),V.destroyHandle(X)];X.attached=ca.displaying;return{visualElement:X,remove:()=>V.handlesGroup(O).remove()}}function y(ia,ca,ha){const {graphic:da,view:X}=ia,O=[];var K=u.getGraphicEffectiveElevationInfo(da);const Y="on-the-ground"===K.mode||!K.offset&&"absolute-height"!==K.mode,S=new I.ManipulatorState,ea=new U.ExtendedLineVisualElement({view:X,extensionType:J.settings.visualElements.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:E.RenderOccludedFlag.OccludeAndTransparent});
J.settings.visualElements.pointGraphics.shadowStyle.apply(ea);K=w.deg2rad(J.settings.visualElements.heightPlaneAngleCutoff);const ja=new M.LaserlineVisualElement({view:X,attached:!1,angleCutoff:K});J.settings.visualElements.heightPlane.apply(ja);let oa=1,qa=1;const ua=()=>{S.update(ia);if(ha.displaying&&(!Y||!ha.isDraped&&Z(da)&&da.geometry.hasZ)){ca.laserlineEnabled=!0;var Ja=S.grabbingState&H.GrabbingState.XY?J.settings.visualElements.laserlineAlphaMultiplier:1;Ja!==oa&&(oa=Ja,J.settings.visualElements.lineGraphics.shadowStyle.apply(ca,
Ja),J.settings.visualElements.pointGraphics.shadowStyle.apply(ea,Ja));Ja=S.grabbingState&H.GrabbingState.Z?J.settings.visualElements.laserlineAlphaMultiplier:1;Ja!==qa&&(qa=Ja,J.settings.visualElements.heightPlane.apply(ja,Ja));Ja=1===S.numSelected?S.firstSelected:1<S.numSelected&&N.isSome(S.firstGrabbedXY)?S.firstGrabbedXY:null;N.isSome(Ja)?(ea.setStartEndFromWorldDownAtLocation(Ja.renderLocation),ea.attached=!0):ea.attached=!1;G(ia,ca,ja,S)}else ca.laserlineEnabled=!1,ea.attached=!1,ja.attached=
!1};J.settings.visualElements.zVerticalLine.apply(ea);O.push(ha.on("changed",ua),A.watch(()=>ha.displaying,ua),ca.events.on("attachment-origin-changed",ua),V.destroyHandle(ea),V.destroyHandle(ja));const va=[];K=()=>{V.handlesGroup(va).remove();va.length=0;ia.forEachManipulator(Ja=>va.push(Ja.events.on("grab-changed",ua)));ia.forEachManipulator(Ja=>va.push(Ja.events.on("select-changed",ua)));ua()};K();O.push(ia.onManipulatorsChanged(K),V.refHandle(()=>V.handlesGroup(va)));return V.handlesGroup(O)}
function G(ia,ca,ha,da){if(0<da.numSelected){P.set(T,0,0,0);let X=0;ia.forEachManipulator((O,K)=>{K===D.ManipulatorType.TRANSLATE_XY&&O.selected&&O instanceof x.Manipulator3D&&(P.add(T,T,O.renderLocation),X++)});0<X?(ha.heightManifoldTarget=P.scale(T,T,1/X),ha.attached=!0):ha.attached=!1}else ca=ca.attachmentOrigin,N.isSome(ca)&&ia.view.renderCoordsHelper.toRenderCoords(ca,T)?(ha.heightManifoldTarget=T,ha.attached=!0):ha.attached=!1}function Z(ia){return N.isSome(ia.geometry)&&("polygon"===ia.geometry.type||
"polyline"===ia.geometry.type)}const T=B.create();r.createVisualElements=function(ia){const {view:ca,graphic:ha}=ia,da=new C.GraphicState({graphic:ha}),X=L(ia,da);ia=y(ia,X.visualElement,da);const O=[X,ia,ca.maskOccludee(ha),ca.trackGraphicState(da)];return{visualElement:X.visualElement,remove:()=>V.handlesGroup(O).remove()}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/GrabbingState":function(){define(["exports"],function(r){r.GrabbingState=
void 0;var V=r.GrabbingState||(r.GrabbingState={});V[V.NONE=0]="NONE";V[V.ANY=1]="ANY";V[V.Z=2]="Z";V[V.XY=4]="XY";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/ManipulatorState":function(){define(["exports","../../../../core/maybe","../Manipulator3D","./GrabbingState","./ManipulatorType"],function(r,V,w,N,A){let P=function(){function B(){this.grabbingState=N.GrabbingState.NONE;this.firstSelected=this.zManipulator=null;this.numSelected=0;this.firstGrabbedXY=
null}B.prototype.update=function(u){this.grabbingState=N.GrabbingState.NONE;this.zManipulator=null;this.numSelected=0;this.firstGrabbedXY=this.firstSelected=null;u.forEachManipulator((x,H)=>{H===A.ManipulatorType.TRANSLATE_Z&&(this.zManipulator=x);x instanceof w.Manipulator3D&&(x.selected&&(0===this.numSelected&&(this.firstSelected=x),this.numSelected++),V.isNone(this.firstGrabbedXY)&&x.grabbing&&H===A.ManipulatorType.TRANSLATE_XY&&(this.firstGrabbedXY=x));if(x.grabbing)switch(this.grabbingState|=
N.GrabbingState.ANY,H){case A.ManipulatorType.TRANSLATE_Z:this.grabbingState|=N.GrabbingState.Z;break;case A.ManipulatorType.TRANSLATE_XY:this.grabbingState|=N.GrabbingState.XY}})};return B}();r.ManipulatorState=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/ManipulatorType":function(){define(["exports"],function(r){r.ManipulatorType=void 0;var V=r.ManipulatorType||(r.ManipulatorType={});V[V.TRANSLATE_Z=0]="TRANSLATE_Z";V[V.TRANSLATE_XY=1]=
"TRANSLATE_XY";V[V.SCALE=2]="SCALE";V[V.ROTATE=3]="ROTATE";V[V.SCALE_ROTATE=4]="SCALE_ROTATE";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/originGraphicVisualElementUtils":function(){define("exports ../../../../core/handleUtils ../../../../core/mathUtils ../../../../core/maybe ../../../../core/reactiveUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../support/elevationInfoUtils ./GrabbingState ./ManipulatorState ./settings ../visualElements/ExtendedLineVisualElement ../visualElements/LaserlineVisualElement ../visualElements/PointVisualElement ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../layers/graphics/GraphicState ../../webgl-engine/lib/Material".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G){function Z(K,Y,S,ea){const {view:ja,graphic:oa}=K,qa=new M.ExtendedLineVisualElement({view:ja,extensionType:U.settings.visualElements.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:G.RenderOccludedFlag.OccludeAndTransparent});U.settings.visualElements.zVerticalLine.apply(qa);const ua=new Q.LaserlineVisualElement({view:ja,intersectsLineInfinite:!0,attached:!1});U.settings.visualElements.pointGraphics.shadowStyle.apply(ua);
var va=w.deg2rad(U.settings.visualElements.heightPlaneAngleCutoff);const Ja=new Q.LaserlineVisualElement({view:ja,attached:!1,angleCutoff:va});U.settings.visualElements.heightPlane.apply(Ja);va=I.getGraphicEffectiveElevationInfo(K.graphic);const Ta=L.ElevationContext.fromElevationInfo(va),Ma="on-the-ground"===va.mode||!va.offset&&"absolute-height"!==va.mode,Ua=new J.ManipulatorState;let Oa=1,Za=1;const Ra=()=>{Ua.update(K);var Ea=ia(oa),xa=Ma&&(Y.isDraped||N.isNone(Ea)||!Ea.hasZ);let za=!0;if(!xa&&
N.isSome(Ea)){const Ia=E.evaluateElevationAlignmentAtPoint(Ea,ja.elevationProvider,Ta,ja.renderCoordsHelper);P.set(X,Ea.x,Ea.y,Ia);u.projectVectorToVector(X,Ea.spatialReference,X,ja.renderCoordsHelper.spatialReference);qa.setStartEndFromWorldDownAtLocation(X);ua.intersectsWorldUpAtLocation=X}else za=!1;Ea=Ua.grabbingState&D.GrabbingState.Z?U.settings.visualElements.laserlineAlphaMultiplier:1;Ea!==Oa&&(Oa=Ea,U.settings.visualElements.heightPlane.apply(Ja,Ea));Ea=x.empty(O);!xa&&Y.displaying&&ea.calculateMapBounds(Ea)&&
u.projectVectorToVector(x.getMin(Ea,X),ja.spatialReference,X,ja.renderCoordsHelper.spatialReference)?(Ja.heightManifoldTarget=X,Ja.attached=!0):Ja.attached=!1;Ea=Ua.grabbingState&D.GrabbingState.XY?U.settings.visualElements.laserlineAlphaMultiplier:1;Ea!==Za&&(Za=Ea,U.settings.visualElements.pointGraphics.shadowStyle.apply(ua,Ea));xa=za&&Y.displaying&&!xa;ua.attached=xa;qa.attached=xa};S.push(A.watch(()=>[Y.displaying,Y.isDraped],Ra),Y.on("changed",Ra));K.forEachManipulator(Ea=>{S.push(Ea.events.on("grab-changed",
Ra))});S.push(V.destroyHandle(ua));S.push(V.destroyHandle(qa));S.push(V.destroyHandle(Ja));Ra()}function T(K,Y,S){const {view:ea,graphic:ja}=K,oa=new C.PointVisualElement({view:ea,geometry:ia(ja),elevationInfo:I.getGraphicEffectiveElevationInfo(ja),attached:!1});ca(K,oa,Y,S);S.push(V.destroyHandle(oa));return oa}function ia(K){K=K.geometry;return N.isNone(K)?null:"point"===K.type?K:"mesh"===K.type?K.anchor.clone():null}function ca(K,Y,S,ea){ha(K,Y,S,ea);U.settings.visualElements.pointGraphics.outline.apply(Y);
ea.push(A.watch(()=>S.displaying,()=>Y.attached=S.displaying,A.initial))}function ha(K,Y,S,ea){const {view:ja,graphic:oa}=K;let qa=null;const ua=va=>{N.isSome(qa)&&(qa.remove(),qa=null);S.isDraped&&N.isSome(va)&&(qa=da(ja,va,()=>{Y.geometry=va}))};K=()=>{const va=ia(oa);ua(va);Y.geometry=va};ea.push(S.on("changed",K),V.refHandle(()=>qa));K()}function da(K,Y,S){u.projectPointToVector(Y,X,K.elevationProvider.spatialReference);const ea=X[0],ja=X[1];return K.elevationProvider.on("elevation-change",oa=>
{H.containsXY(oa.extent,ea,ja)&&S()})}const X=B.create(),O=x.create();r.createVisualElements=function(K){const {view:Y,graphic:S}=K,ea=new y.GraphicState({graphic:S}),ja=[],oa=T(K,ea,ja);Z(K,ea,ja,oa);ja.push(Y.trackGraphicState(ea));return{visualElement:oa,remove(){V.handlesGroup(ja).remove()}}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/config":function(){define(["exports"],function(r){const V=Math.ceil(70/3*2),w=5*Math.PI/
12,N=1*Math.PI/3;r.ALIGN_ARROWS_SCALE_THRESHOLD=1E6;r.DISC_COLLISION_RADIUS=80;r.DISC_HEIGHT=.02;r.DISC_RADIUS=70;r.DISC_RADIUS_SMALL=V;r.DISC_TRANSLATE_ARROW_OFFSET=100;r.DISC_TRANSLATE_ARROW_SIZE=54;r.DRAG_THRESHOLD_PX=10;r.GEOMETRY_SEGMENTS=128;r.HANDLE_COLOR=[1,.5,0];r.INDICATOR_THICKNESS=9;r.INNER_INDICATOR_RADIUS=190;r.OUTER_INDICATOR_RADIUS=213;r.RING_HEIGHT=.5;r.RING_INDICATOR_DELAY_MS=200;r.RING_RADIUS=160;r.RING_RESET_ANIMATION_SPEED_FACTOR=3;r.RING_THICKNESS=24;r.ROTATE_INDICATOR_ARC_LENGTH=
w;r.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE=.2;r.ROTATE_INDICATOR_ARROW_TIP_LENGTH=60;r.ROTATE_INDICATOR_ARROW_TIP_RADIUS=23;r.ROTATE_INDICATOR_DIRECTION_BUFFER=.3;r.SCALE_INDICATOR_ARC_LENGTH=N;r.SCALE_INDICATOR_DIRECTION_BUFFER=.2;r.SCALE_INDICATOR_OFFSET1=30;r.SCALE_INDICATOR_OFFSET2=53;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/has ../../../../../core/maybe ../../../../../core/reactiveUtils ../ManipulatorType ./config ./Manipulation ./MoveXYAxisManipulation ./MoveXYDiscManipulation ./MoveZManipulation".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){H=function(U){function M(C){var E=U.call(this)||this;E._handles=new w;E._interactive=!0;const {tool:L,view:y,snapToScene:G,radius:Z}=C;E._view=y;E.xyManipulation=new D.MoveXYDiscManipulation({tool:L,view:y,snapToScene:G,radius:Z});E.xyAxisManipulation=new I.MoveXYAxisManipulation({tool:L,view:y,radius:Z});E.zManipulation=new J.MoveZManipulation({tool:L,view:y,radius:Z});E.xyManipulation.available=C.xyAvailable;E.xyAxisManipulation.available=C.xyAxisAvailable;E.zManipulation.available=
C.zAvailable;E._autoHideXYAxis();E.forEachManipulator(T=>E._handles.add(T.events.on("grab-changed",()=>E._updateManipulatorInteractivity())));return E}V._inheritsLoose(M,U);var Q=M.prototype;Q.destroy=function(){this._handles.destroy();this.xyManipulation.destroy();this.xyAxisManipulation.destroy();this.zManipulation.destroy()};Q.createGraphicDragPipeline=function(C,E,L){return N.handlesGroup([this.xyManipulation.createGraphicDragPipeline((y,G,Z,T,ia)=>C(r.ManipulationType.XY,y,G,Z,T,ia),E,L),this.xyAxisManipulation.createGraphicDragPipeline((y,
G,Z,T,ia)=>C(r.ManipulationType.XY_AXIS,y,G,Z,T,ia),E,L),this.zManipulation.createGraphicDragPipeline((y,G,Z,T,ia)=>C(r.ManipulationType.Z,y,G,Z,T,ia),E,L)])};Q.createDragPipeline=function(C,E,L,y){return N.handlesGroup([this.xyManipulation.createDragPipeline((G,Z,T,ia,ca)=>C(r.ManipulationType.XY,G,Z,T,ia,ca),E,L,y),this.xyAxisManipulation.createDragPipeline((G,Z,T,ia,ca)=>C(r.ManipulationType.XY_AXIS,G,Z,T,ia,ca),E,L,y),this.zManipulation.createDragPipeline((G,Z,T,ia,ca)=>C(r.ManipulationType.Z,
G,Z,T,ia,ca),L)])};Q.forEachManipulator=function(C){this.xyManipulation.forEachManipulator(E=>C(E,u.ManipulatorType.TRANSLATE_XY));this.xyAxisManipulation.forEachManipulator(E=>C(E,u.ManipulatorType.TRANSLATE_XY));this.zManipulation.forEachManipulator(E=>C(E,u.ManipulatorType.TRANSLATE_Z))};Q._autoHideXYAxis=function(){const C=this.xyAxisManipulation;var E=this.xyManipulation;if(!A("esri-mobile")){var L=[];E.forEachManipulator(y=>L.push(y));C.forEachManipulator(y=>L.push(y));E=()=>{const y=[];this._xyAxisVisible||
C.forEachManipulator(G=>y.push(G.disableDisplay()));this._handles.remove("disable-xy-axis-display");this._handles.add(y,"disable-xy-axis-display")};for(const y of L)this._handles.add(y.events.on("focus-changed",E));this._view.inputManager&&this._handles.add(B.when(()=>this._view.inputManager?.latestPointerType,E));E()}};Q._updateManipulatorInteractivity=function(){const C=this.grabbing;this.forEachManipulator(E=>{E.interactive=!C&&this._interactive||E.grabbing})};M.radiusForSymbol=function(C){return(C=
P.isSome(C)&&"point-3d"===C.type&&C.symbolLayers)&&0<C.length&&C.some(E=>"icon"===E.type)?x.DISC_RADIUS_SMALL:x.DISC_RADIUS};V._createClass(M,[{key:"snapToScene",set:function(C){this.xyManipulation.snapToScene=C}},{key:"angle",set:function(C){this.xyAxisManipulation.angle=C}},{key:"interactive",set:function(C){this._interactive!==C&&(this._interactive=C,this._updateManipulatorInteractivity())}},{key:"radius",set:function(C){this.xyAxisManipulation.radius=C;this.xyManipulation.radius=C;this.zManipulation.radius=
C}},{key:"displayScale",set:function(C){this.xyManipulation.displayScale=C;this.xyAxisManipulation.displayScale=C}},{key:"_xyAxisVisible",get:function(){const C=this.xyManipulation.someManipulator(E=>E.focused)||this.xyAxisManipulation.someManipulator(E=>E.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||C}}]);return M}(H.Manipulation);r.ManipulationType=void 0;(function(U){U[U.XY=0]="XY";U[U.XY_AXIS=1]="XY_AXIS";U[U.Z=2]="Z"})(r.ManipulationType||(r.ManipulationType=
{}));r.MoveManipulation=H;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/Manipulation":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../Manipulator3D"],function(r,V,w){let N=function(){function A(){this._available=!0}var P=A.prototype;P.hasManipulator=function(B){return this.someManipulator(u=>u===B)};P.someManipulator=function(B){let u=!1;this.forEachManipulator(x=>{!u&&B(x)&&(u=!0)});return u};
P._forEachManipulator3D=function(B){this.forEachManipulator((u,x)=>{u instanceof w.Manipulator3D&&B(u,x)})};V._createClass(A,[{key:"location",set:function(B){this._forEachManipulator3D(u=>u.location=B)}},{key:"elevationAlignedLocation",set:function(B){this._forEachManipulator3D(u=>u.elevationAlignedLocation=B)}},{key:"elevationInfo",set:function(B){this._forEachManipulator3D(u=>u.elevationInfo=B)}},{key:"renderLocation",get:function(){let B;this._forEachManipulator3D(u=>{B||(B=u.renderLocation)});
return B}},{key:"available",get:function(){return this._available},set:function(B){this._available=B;this._forEachManipulator3D(u=>u.available=B)}},{key:"hovering",get:function(){return this.someManipulator(B=>B.hovering)}},{key:"grabbing",get:function(){return this.someManipulator(B=>B.grabbing)}},{key:"dragging",get:function(){return this.someManipulator(B=>B.dragging)}}]);return A}();r.Manipulation=N;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da){y=function(X){function O(Y){var S=X.call(this)||this;S._handles=new A;S._arrowManipulatorInfos=[];S._opaqueMaterial=S._createMaterial();S._transparentMaterial=S._createMaterial(.5);S._angle=0;S._scale=1;S._radius=L.DISC_RADIUS;S._updateAfterDrag=!1;S.events=new N;S._tool=Y.tool;S._view=Y.view;null!=Y.radius&&(S._radius=Y.radius);S._createManipulators();S.forEachManipulator(ea=>S._tool.manipulators.add(ea));return S}V._inheritsLoose(O,
X);var K=O.prototype;K.destroy=function(){this._handles=B.destroyMaybe(this._handles);this.forEachManipulator(Y=>{this._tool.manipulators.remove(Y);Y.destroy()});this._view=this._tool=null;this._arrowManipulatorInfos.length=0};K.forEachManipulator=function(Y){for(const {manipulator:S}of this._arrowManipulatorInfos)Y(S,C.ManipulatorType.TRANSLATE_XY)};K.createGraphicDragPipeline=function(Y,S,ea){const ja=S.graphic,oa=J.getGraphicEffectiveElevationInfo(ja),qa=B.unwrap(ja.geometry).spatialReference;
return G.createGraphicMoveDragPipeline(S,ea,ua=>this.createDragPipeline((va,Ja,Ta,Ma,Ua)=>{({steps:Ja,cancel:Ta}=Y(va,Ja,Ta,Ma,Ua));return ua(va,Ja,Ta)},oa,qa,ja),this._view.state.viewingMode)};K.createDragPipeline=function(Y,S,ea,ja){return P.handlesGroup(this._arrowManipulatorInfos.map(({manipulator:oa},qa)=>ha.createManipulatorDragEventPipeline(oa,(ua,va,Ja,Ta,Ma)=>{va=va.next(Ua=>({...Ua,manipulatorType:C.ManipulatorType.TRANSLATE_XY})).next(ha.dragAtLocation(this._view,ua.elevationAlignedLocation)).next(Q.screenToMapXYAtLocation(this._view,
ua.elevationAlignedLocation,S,ea,ja)).next(ha.constrainToMapAxis(ua.location,this.angle+(qa+1)*Math.PI*.5)).next(ha.addScreenDelta());Y(ua,va,Ja,Ta,Ma)})))};K._updateManipulators=function(){for(let Y=0;Y<this._arrowManipulatorInfos.length;Y++)this._updateArrowManipulator(this._arrowManipulatorInfos[Y],Y);this._updateManipulatorTransform()};K._updateArrowManipulator=function({manipulator:Y,transform:S},ea){var ja=this._radius/L.DISC_RADIUS,oa=L.DISC_TRANSLATE_ARROW_SIZE*ja;const qa=oa*Math.sqrt(3)/
2;oa=T.createExtrudedTriangle(this._opaqueMaterial,qa,oa/2,oa/2,L.DISC_HEIGHT);T.transformInPlace(oa,u.fromTranslation(D.sm4d.get(),H.set(D.sv3d.get(),0,-qa/3,0)));Y.renderObjects=[new M.RenderObject(oa,da.ManipulatorStateFlags.Focused),new M.RenderObject(oa.instantiate({material:this._transparentMaterial}),da.ManipulatorStateFlags.Unfocused)];Y.radius=qa/3*2.4;Y=u.fromZRotation(D.sm4d.get(),ea*Math.PI/2);ja=u.fromTranslation(D.sm4d.get(),H.set(D.sv3d.get(),0,L.DISC_TRANSLATE_ARROW_OFFSET*ja,0));
u.multiply(S,Y,ja)};K._createManipulators=function(){for(let Y=0;4>Y;Y++){const S=this._createArrowManipulator(Y);this._arrowManipulatorInfos.push(S)}this._updateManipulatorTransform()};K._updateManipulatorTransform=function(){var Y=this.angle;Y=u.fromRotation(D.sm4d.get(),Y,I.fromValues(0,0,1));if(!B.isNone(Y)){var S=u.fromScaling(D.sm4d.get(),H.set(D.sv3d.get(),this.displayScale,this.displayScale,this.displayScale));Y=u.multiply(D.sm4d.get(),S,Y);for(const ea of this._arrowManipulatorInfos)S=u.multiply(D.sm4d.get(),
Y,ea.transform),ea.manipulator.modelTransform=S}};K._createArrowManipulator=function(Y){const S=new U.Manipulator3D({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:I.fromValues(0,0,1)}}),ea={manipulator:S,transform:x.create()};this._updateArrowManipulator(ea,Y);this._handles.add(S.events.on("drag",ja=>{this._updateAfterDrag&&"end"===ja.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=
!1)}));return ea};K._createMaterial=function(Y=1){const S=w.toUnitRGBA(E.colors.main);S[3]*=Y;return new ca.ColorMaterial({color:S,transparent:1!==Y,cullFace:Z.CullFaceOptions.Back,renderOccluded:ia.RenderOccludedFlag.Transparent})};V._createClass(O,[{key:"orthogonalAvailable",set:function(Y){this._arrowManipulatorInfos[1].manipulator.available=Y;this._arrowManipulatorInfos[3].manipulator.available=Y}},{key:"angle",get:function(){return this._angle},set:function(Y){this._angle=Y;this.dragging?this._updateAfterDrag=
!0:this._updateManipulatorTransform()}},{key:"displayScale",get:function(){return this._scale},set:function(Y){this._scale=Y;this._updateManipulatorTransform()}},{key:"radius",get:function(){return this._radius},set:function(Y){this._radius!==Y&&(this._radius=Y,this._updateManipulators())}},{key:"test",get:function(){return{arrowManipulators:this._arrowManipulatorInfos.map(({manipulator:Y})=>Y)}}}]);return O}(y.Manipulation);r.MoveXYAxisManipulation=y;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/editingTools/dragEventPipeline3D":function(){define("exports ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/plane ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../../geometry/support/vectorStacks ../../../../support/elevationInfoUtils ../../support/geometryUtils/ray ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/IntersectorInterfaces ../../webgl-engine/lib/verticalOffsetUtils ../../../interactive/dragEventPipeline".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q){function C(X,O){return E(X,()=>O)}function E(X,O){const K=A.create(),Y=A.create();let S=!1;return ea=>{const ja=O(ea);if("start"===ea.action){var oa=w.screenPointObjectToArray(ea.screenStart,w.castScreenPointArray(H.sv2d.get()));oa=D.fromScreen(X.state.camera,oa,da);V.isSome(oa)&&(S=B.intersectRay(ja,oa,K))}if(!S)return null;oa=w.screenPointObjectToArray(ea.screenEnd,w.castScreenPointArray(H.sv2d.get()));oa=D.fromScreen(X.state.camera,oa,da);return V.isNone(oa)?
null:B.intersectRay(ja,oa,Y)?{...ea,renderStart:K,renderEnd:Y,plane:ja,ray:oa}:null}}function L(X,O,K=0,Y=null,S=null){let ea=null;return ja=>{if("start"===ja.action&&(ea=X.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(ja.screenStart.x,ja.screenStart.y),O,K,S),V.isSome(ea)&&V.isSome(Y)&&!P.projectPoint(ea,ea,Y))||V.isNone(ea))return null;const oa=X.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(ja.screenEnd.x,ja.screenEnd.y),O,K,S);return V.isSome(oa)?
V.isSome(Y)&&!P.projectPoint(oa,oa,Y)?null:{...ja,mapStart:ea,mapEnd:oa}:null}}function y(X,O,K,Y=null,S=null){O=I.getZForElevationMode(O,X,K);return L(X,K,O,Y,S)}function G(X,O,K,Y=null,S=null){return y(X,K,I.getGraphicEffectiveElevationInfo(O),Y,S)}function Z(X,O){const K=ca,Y=ha,S=B.create();X.renderCoordsHelper.worldUpAtPosition(O,K);X=N.cross(S,K,N.subtract(Y,O,X.state.camera.eye));N.cross(X,X,K);return B.fromPositionAndNormal(O,X,S)}function T(X,O){const K=A.create(),Y=N.length(O);X.renderCoordsHelper.worldUpAtPosition(O,
K);const S=A.create(),ea=A.create(),ja=oa=>{N.subtract(oa,oa,O);x.projectPoint(K,oa,oa);"global"===X.viewingMode&&N.length(oa)*Math.sign(N.dot(K,oa))<-Y+.001&&N.subtract(oa,N.scale(oa,K,.001),O);N.add(oa,oa,O);return oa};return oa=>{oa.renderStart=ja(N.copy(S,oa.renderStart));oa.renderEnd=ja(N.copy(ea,oa.renderEnd));return oa}}function ia(X,O){const K=X.renderCoordsHelper;return Y=>{const S=K.fromRenderCoords(Y.renderStart,O),ea=K.fromRenderCoords(Y.renderEnd,O);return V.isSome(S)&&V.isSome(ea)?{...Y,
mapStart:S,mapEnd:ea}:null}}r.SurfaceType=void 0;(function(X){X[X.GROUND=0]="GROUND";X[X.OTHER=1]="OTHER"})(r.SurfaceType||(r.SurfaceType={}));const ca=A.create(),ha=A.create(),da=u.create();r.convertToMapCoordinates=ia;r.hideManipulatorWhileDragging=function(X){let O=null;return K=>{switch(K.action){case "start":O=X.disableDisplay();break;case "end":case "cancel":V.isSome(O)&&(O.remove(),O=null)}return K}};r.projectToWorldUp=T;r.screenToMap3D=function(X,O=null){const K=J.newIntersector(X.state.viewingMode);
K.options.selectionMode=!0;K.options.store=U.StoreResults.MIN;K.options.hud=!1;const Y=w.createScreenPointArray(),S={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},ea=A.create(),ja=V.unwrapOr(O,X.spatialReference),oa=ua=>{X.map.ground&&1>X.map.ground.opacity?S.exclude.add(M.TERRAIN_ID):S.exclude.delete(M.TERRAIN_ID);X.sceneIntersectionHelper.intersectIntersectorScreen(w.screenPointObjectToArray(ua,Y),K,S);ua=K.results.min;if(ua.getIntersectionPoint(ea))ua=ua.intersector===U.IntersectorType.TERRAIN?
r.SurfaceType.GROUND:r.SurfaceType.OTHER;else if(K.results.ground.getIntersectionPoint(ea))ua=r.SurfaceType.GROUND;else return null;return{location:X.renderCoordsHelper.fromRenderCoords(ea,ja),surfaceType:ua}};let qa;return ua=>{if("start"===ua.action){var va=oa(ua.screenStart);qa=V.isSome(va)?va.location:null}if(V.isNone(qa))return null;va=oa(ua.screenEnd);return V.isSome(va)&&V.isSome(va.location)?{...ua,mapStart:qa,mapEnd:va.location,surfaceType:va.surfaceType}:null}};r.screenToMapXYAtLocation=
y;r.screenToMapXYForGraphic=function(X,O,K,Y){X=O.toMap(X.screenStart,{include:[K]});return V.isSome(X)?G(O,K,X,Y):null};r.screenToMapXYForGraphicAtLocation=G;r.screenToRenderPlane=C;r.screenToRenderPlaneFromEvent=function(X){return E(X,O=>O.plane)};r.screenToZConstrained=function(X,O,K){let Y=null;const S=new Q.EventPipeline;S.next(C(X,Z(X,O))).next(T(X,O)).next(ia(X,K)).next(ea=>{ea.mapEnd.x=ea.mapStart.x;ea.mapEnd.y=ea.mapStart.y;Y=ea});return ea=>{Y=null;S.execute(ea);return Y}};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/moveUtils":function(){define(["exports","../../../../../core/maybe","../../../../interactive/dragEventPipeline"],function(r,V,w){r.axisConstrainedDragSign=function(N){if(V.isNone(N)||V.isNone(N.axis))return 1;const {mapStart:A,mapEnd:P,axis:B}=N;N=[P.x-A.x,P.y-A.y];return 0<N[0]*B[0]+N[1]*B[1]?1:-1};r.createGraphicMoveDragPipeline=function(N,A,P,B){const u=N.graphic,x=(H,I)=>A({action:H,graphic:u,dxScreen:I.screenDeltaX,
dyScreen:I.screenDeltaY});return P((H,I,D)=>{I.next(J=>{"start"===J.action&&x("start",J);return J}).next(w.dragGraphic(u,B)).next(J=>{switch(J.action){case "start":case "update":(J.translationX||J.translationY||J.translationZ)&&x("update",J);break;case "end":x("end",J)}return J});D=D.next(w.resetGraphic(u)).next(J=>{x("end",{screenDeltaX:0,screenDeltaY:0});return J});return{steps:I,cancel:D}})};r.shapeOrientation=function(N){if(V.isNone(N)||"polyline"!==N.type&&"polygon"!==N.type)return 0;var A=("polyline"===
N.type?N.paths:N.rings)[0];if(!A||2>A.length)return 0;N=A[0];A=A[1];return Math.atan2(A[1]-N[1],A[0]-N[0])};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../snapping/SnapToScene ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca){C=function(ha){function da(O){var K=ha.call(this)||this;K._snapToScene=new L.SnapToScene;K._discMaterial=K._createMaterial();K._discMaterialTransparent=K._createMaterial(.5);K._scale=1;K._radius=Q.DISC_RADIUS;K._view=O.view;K._tool=O.tool;null!=O.snapToScene&&(K.snapToScene=O.snapToScene);null!=O.radius&&(K._radius=O.radius);K._createManipulator();K.forEachManipulator(Y=>K._tool.manipulators.add(Y));return K}V._inheritsLoose(da,ha);var X=
da.prototype;X.destroy=function(){this.forEachManipulator(O=>{this._tool.manipulators.remove(O);O.destroy()});this._manipulator=this._view=this._tool=null};X.forEachManipulator=function(O){O(this._manipulator,U.ManipulatorType.TRANSLATE_XY)};X.createGraphicDragPipeline=function(O,K,Y){const S=K.graphic,ea=H.getGraphicEffectiveElevationInfo(S),ja=N.unwrap(S.geometry).spatialReference;return E.createGraphicMoveDragPipeline(K,Y,oa=>this.createDragPipeline((qa,ua,va,Ja,Ta)=>{({steps:ua,cancel:va}=O(qa,
ua,va,Ja,Ta));return oa(qa,ua,va)},ea,ja,S),this._view.state.viewingMode)};X.createDragPipeline=function(O,K,Y,S){const ea=this._view;return ia.createManipulatorDragEventPipeline(this._manipulator,(ja,oa,qa,ua,va)=>{oa=oa.next(ia.dragAtLocation(ea,ja.elevationAlignedLocation)).next(J.screenToMapXYAtLocation(ea,ja.elevationAlignedLocation,K,Y,S)).next(...this._snapToScene.createDragEventPipelineStep(ea,K)).next(Ja=>({...Ja,manipulatorType:U.ManipulatorType.TRANSLATE_XY})).next(ia.addScreenDelta());
O(ja,oa,qa,ua,va)})};X._updateManipulatorTransform=function(){const O=A.fromScaling(x.sm4d.get(),B.set(x.sv3d.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=O};X._createManipulator=function(){this._manipulator=new I.Manipulator3D({view:this._view,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:u.fromValues(0,0,1)},worldOriented:!0});this._updateManipulator()};X._updateManipulator=function(){const O=
G.createCylinderGeometry(this._discMaterial,Q.DISC_HEIGHT,1,Q.GEOMETRY_SEGMENTS,u.fromValues(0,0,1),u.fromValues(0,0,0));O.transformation=A.fromScaling(P.create(),u.fromValues(this._radius,this._radius,this._radius));this._manipulator.renderObjects=[new D.RenderObject(O,ca.ManipulatorStateFlags.Focused),new D.RenderObject(O.instantiate({material:this._discMaterialTransparent}),ca.ManipulatorStateFlags.Unfocused)];this._manipulator.radius=this._radius/Q.DISC_RADIUS*Q.DISC_COLLISION_RADIUS};X._createMaterial=
function(O=1){const K=w.toUnitRGBA(M.colors.main);K[3]*=O;return new T.ColorMaterial({color:K,transparent:1!==O,cullFace:y.CullFaceOptions.Back,renderOccluded:Z.RenderOccludedFlag.Transparent})};V._createClass(da,[{key:"displayScale",get:function(){return this._scale},set:function(O){this._scale=O;this._updateManipulatorTransform()}},{key:"snapToScene",get:function(){return this._snapToScene.enabled},set:function(O){this._snapToScene.enabled=O}},{key:"radius",get:function(){return this._radius},set:function(O){O!==
this._radius&&(this._radius=O,this._updateManipulator())}},{key:"test",get:function(){return{discManipulator:this._manipulator}}}]);return da}(C.Manipulation);r.MoveXYDiscManipulation=C;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/snapping/SnapToScene":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../../../../interactive/dragEventPipeline"],
function(r,V,w,N,A){let P=function(){function B(){this._next=this._lastDragEvent=this._elevationInfo=this._view=null;this._enabled=!1}var u=B.prototype;u._snap=function(x){x=w.isSome(this._view)?this._view.toMap(x,{exclude:[]}):null;w.isSome(x)&&w.isSome(this._view)&&(x.z=N.getZForElevationMode(x,this._view,this._elevationInfo));return x};u.createDragEventPipelineStep=function(x,H){this._view=x;this._elevationInfo=H;this._lastDragEvent=null;this._next=x=new A.EventPipeline;return[I=>{this._lastDragEvent=
"end"!==I.action?{...I}:null;if(this._enabled){const D=this._snap(I.screenEnd);return w.isSome(D)?{action:I.action,mapStart:I.mapStart,mapEnd:D,screenStart:I.screenStart,screenEnd:I.screenEnd}:null}return{action:I.action,mapStart:I.mapStart,mapEnd:I.mapEnd,screenStart:I.screenStart,screenEnd:I.screenEnd}},x]};V._createClass(B,[{key:"enabled",get:function(){return this._enabled},set:function(x){if(this._enabled!==x&&w.isSome(this._lastDragEvent)&&w.isSome(this._next)){const H=this._lastDragEvent.mapEnd,
I=this._snap(this._lastDragEvent.screenEnd);w.isSome(I)&&this._next.execute({action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===x?I:H,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd})}this._enabled=x}}]);return B}();r.SnapToScene=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/manipulations/MoveZManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/colorUtils ../../../../../core/Evented ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../settings ./config ./Manipulation ./moveUtils ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T){E=function(da){function X(K){var Y=da.call(this)||this;Y._radius=C.DISC_RADIUS;Y.events=new N;Y._tool=K.tool;Y._view=K.view;null!=K.radius&&(Y._radius=K.radius);Y._createManipulator();Y.forEachManipulator(S=>Y._tool.manipulators.add(S));return Y}V._inheritsLoose(X,da);var O=X.prototype;O.destroy=function(){this.forEachManipulator(K=>{this._tool.manipulators.remove(K);K.destroy()})};O.forEachManipulator=function(K){K(this._manipulator,M.ManipulatorType.TRANSLATE_Z)};
O.createGraphicDragPipeline=function(K,Y,S){const ea=P.unwrap(Y.graphic.geometry).spatialReference;return L.createGraphicMoveDragPipeline(Y,S,ja=>this.createDragPipeline((oa,qa,ua,va,Ja)=>{({steps:qa,cancel:ua}=K(oa,qa,ua,va,Ja));return ja(oa,qa,ua)},ea),this._view.state.viewingMode)};O.createDragPipeline=function(K,Y){const S=this._view;return Z.createManipulatorDragEventPipeline(this._manipulator,(ea,ja,oa,qa,ua)=>{ja=ja.next(va=>({...va,manipulatorType:M.ManipulatorType.TRANSLATE_Z})).next(U.screenToZConstrained(S,
ea.renderLocation,Y)).next(Z.addScreenDelta());K(ea,ja,oa,qa,ua)})};O._updateManipulator=function(){var K=this._radius/C.DISC_RADIUS;const Y=Q.settings.zManipulator.height*K;var S=Q.settings.zManipulator.coneHeight*K;const ea=Q.settings.zManipulator.coneWidth*K;K*=Q.settings.zManipulator.width;var ja=[H.fromValues(0,0,0),H.fromValues(0,0,Y)];const oa=[H.fromValues(0,0,0),H.fromValues(0,0,Y+S)],qa=(Ma=>{const Ua=u.create();B.translate(Ua,Ua,[0,0,Y]);B.rotateX(Ua,Ua,Math.PI/2);Ma&&(Ma=1+2*Ma/ea,B.scale(Ua,
Ua,[Ma,Ma,Ma]));return Ua})(0);var ua=(Ma,Ua)=>{Ua=w.darken(Q.settings.zManipulator.color,Ua);return[Ua.r/255,Ua.g/255,Ua.b/255,Q.settings.zManipulator.color.a*Ma]};const va=D.createManipulatorMaterial(ua(1,.25),G.RenderOccludedFlag.Occlude),Ja=D.createManipulatorMaterial(ua(1,0),G.RenderOccludedFlag.Occlude),Ta=D.createManipulatorMaterial(ua(.7,0),Q.settings.zManipulator.renderOccluded);ua=D.createManipulatorMaterial(ua(.85,0),Q.settings.zManipulator.renderOccluded);ja=y.createTubeGeometry(va,ja,
K/2,16,!1);S=y.createConeGeometry(va,S,ea/2,16,!1);S.transformation=qa;this._manipulator.renderObjects=[new J.RenderObject(S,T.ManipulatorStateFlags.Unfocused),new J.RenderObject(ja,T.ManipulatorStateFlags.Unfocused),new J.RenderObject(S.instantiate({material:Ja}),T.ManipulatorStateFlags.Focused),new J.RenderObject(ja.instantiate({material:Ja}),T.ManipulatorStateFlags.Focused),new J.RenderObject(S.instantiate({material:Ta}),T.ManipulatorStateFlags.Unfocused),new J.RenderObject(ja.instantiate({material:Ta}),
T.ManipulatorStateFlags.Unfocused),new J.RenderObject(S.instantiate({material:ua}),T.ManipulatorStateFlags.Focused),new J.RenderObject(ja.instantiate({material:ua}),T.ManipulatorStateFlags.Focused)];this._manipulator.radius=K/2+2;this._manipulator.collisionType={type:"line",paths:[oa]}};O._createManipulator=function(){const K=new I.Manipulator3D({view:this._view,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});
K.applyObjectTransform=Y=>{var S=this._view.state.camera,ea=ia;this._view.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,ea);const ja=x.dist(S.eye,ea),oa=S.computeRenderPixelSizeAtDist(ja);var qa=x.subtract(ca,ea,S.eye);x.normalize(qa,qa);var ua=ha;this._view.renderCoordsHelper.worldUpAtPosition(ia,ua);ea=Math.abs(x.dot(qa,ua));qa=x.cross(ca,qa,ua);ua=x.cross(ca,qa,ua);ea=A.clamp(ea,.01,1);S=1-Math.sqrt(1-ea*ea)/ea/S.fullWidth;ea=this._radius/C.DISC_RADIUS*Q.settings.zManipulator.width;
x.scale(ua,x.normalize(ua,ua),(1/S-1)*ja+oa*ea);Y[12]-=ca[0];Y[13]-=ca[1];Y[14]-=ca[2]};this._manipulator=K;this._updateManipulator()};V._createClass(X,[{key:"radius",get:function(){return this._radius},set:function(K){K!==this._radius&&(this._radius=K,this._updateManipulator())}},{key:"test",get:function(){return{manipulator:this._manipulator}}}]);return X}(E.Manipulation);const ia=H.create(),ca=H.create(),ha=H.create();r.MoveZManipulation=E;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/interactive/editingTools/manipulations/MoveXYGraphicManipulation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../dragEventPipeline3D ../ManipulatorType ./Manipulation ./moveUtils ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator".split(" "),function(r,V,w,N,A,P,B,u,x){P=function(H){function I(J){var U=H.call(this)||this;U._view=J.view;U._tool=J.tool;U._graphicState=J.graphicState;U._createManipulator();
U.forEachManipulator(M=>U._tool.manipulators.add(M));return U}V._inheritsLoose(I,H);var D=I.prototype;D.destroy=function(){this.forEachManipulator(J=>{this._tool.manipulators.remove(J);J.destroy()});this._graphicState=this._manipulator=this._view=this._tool=null};D.forEachManipulator=function(J){J(this._manipulator,A.ManipulatorType.TRANSLATE_XY)};D.createGraphicDragPipeline=function(J){return B.createGraphicMoveDragPipeline(this._graphicState,J,U=>this.createDragPipeline(U),this._view.state.viewingMode)};
D.createDragPipeline=function(J){const U=this._view,M=this._graphicState.graphic,Q=w.isSome(M.geometry)?M.geometry.spatialReference:null;return u.createManipulatorDragEventPipeline(this._manipulator,(C,E,L,y,G)=>{E=E.next(N.screenToMapXYForGraphic(G,U,M,Q)).next(u.addMapDelta()).next(u.addScreenDelta());J(C,E,L,y,G)})};D._createManipulator=function(){this._manipulator=new x.GraphicManipulator({graphic:this._graphicState.graphic,view:this._view,selectable:!0,cursor:"move"})};return I}(P.Manipulation);
r.MoveXYGraphicManipulation=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/GraphicManipulator":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Evented ../../core/maybe ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec3 ../../chunks/vec3f64 ../../geometry/projection ../../support/elevationInfoUtils ../../symbols/support/defaults ../../symbols/support/ElevationInfo ./support/utils ../support/drapedUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G){r.GraphicManipulator=function(ia){function ca(da){da=ia.call(this,da)||this;da.layer=null;da.interactive=!0;da.selectable=!1;da.grabbable=!0;da.dragging=!1;da.cursor=null;da.events=new A.EventEmitter;da._circleCollisionCache=null;da._graphicSymbolChangedHandle=null;da._originalSymbol=null;return da}V._inheritsLoose(ca,ia);var ha=ca.prototype;ha.grabbableForEvent=function(){return!0};ha.destroy=function(){this.detachSymbolChanged();this._resetGraphicSymbol();
this._set("view",null)};ha.intersectionDistance=function(da){const X=this.graphic;if(!1===X.visible)return null;const O=X.geometry;if(P.isNone(O))return null;var K=this._get("focusedSymbol");K=P.isSome(K)?K:X.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,da,O,K):this._intersectDistance3D(this.view,da,X)};ha.attach=function(){this.attachSymbolChanged();P.isSome(this.layer)&&this.layer.add(this.graphic)};ha.detach=function(){this.detachSymbolChanged();this._resetGraphicSymbol();
P.isSome(this.layer)&&this.layer.remove(this.graphic)};ha.attachSymbolChanged=function(){this.detachSymbolChanged();this._graphicSymbolChangedHandle=B.watch(()=>this.graphic?.symbol,da=>{P.isSome(da)&&da!==this.focusedSymbol&&da!==this._originalSymbol&&(this._originalSymbol=da,this._focused&&P.isSome(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},B.sync)};ha.detachSymbolChanged=function(){P.isSome(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=
null)};ha.onElevationChange=function(){};ha.onViewChange=function(){};ha._updateGraphicSymbol=function(){this.graphic.symbol=this._focused&&P.isSome(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol};ha._resetGraphicSymbol=function(){this.graphic.symbol=this._originalSymbol};ha._intersectDistance2D=function(da,X,O,K){K=K||E.getDefaultSymbol2D(O);if(P.isNone(K))return null;var Y=this._circleCollisionCache;if("point"===O.type&&"cim"===K.type&&"CIMPointSymbol"===K.data.symbol?.type&&K.data.symbol.symbolLayers){const {offsetX:S,
offsetY:ea,size:ja}=y.getSymbolInfo(K);K=u.screenPointObjectToArray(X,T);Y=ja/2;da=da.toScreen(O);return J.squaredDistance(K,[da.x+S,da.y+ea])<Y*Y?1:null}if("point"!==O.type||"simple-marker"!==K.type)return G.intersectsDrapedGeometry(X,O,da)?1:null;if(P.isNone(Y)||!Y.originalPoint.equals(O)){const S=da.spatialReference;Q.canProjectWithoutEngine(O.spatialReference,S)&&(Y=Q.project(O,S),this._circleCollisionCache=Y={originalPoint:O.clone(),mapPoint:Y,radiusPx:u.pt2px(K.size)})}if(P.isSome(Y)){O=u.screenPointObjectToArray(X,
T);da=da.toScreen?.(Y.mapPoint);if(!da)return null;Y=Y.radiusPx;X=da.x+u.pt2px(K.xoffset);K=da.y-u.pt2px(K.yoffset);return J.squaredDistance(O,[X,K])<Y*Y?1:null}return null};ha._intersectDistance3D=function(da,X,O){return(X=da.toMap(X,{include:[O]}))&&Q.projectPointToVector(X,Z,da.renderSpatialReference)?U.distance(Z,da.state.camera.eye):null};V._createClass(ca,[{key:"graphic",set:function(da){this._circleCollisionCache=null;this._originalSymbol=da.symbol;this._set("graphic",da);this.attachSymbolChanged()}},
{key:"elevationInfo",get:function(){var {layer:da}=this.graphic;da=da&&"elevationInfo"in da?da.elevationInfo:null;const X=C.getGraphicEffectiveElevationMode(this.graphic);return new L({mode:X,offset:da?da.offset:0})}},{key:"focusedSymbol",set:function(da){da!==this._get("focusedSymbol")&&(this._set("focusedSymbol",da),this._updateGraphicSymbol(),this._circleCollisionCache=null)}},{key:"grabbing",set:function(da){da!==this._get("grabbing")&&(this._set("grabbing",da),this._updateGraphicSymbol())}},
{key:"hovering",set:function(da){da!==this._get("hovering")&&(this._set("hovering",da),this._updateGraphicSymbol())}},{key:"selected",set:function(da){da!==this._get("selected")&&(this._set("selected",da),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:da?"select":"deselect"}))}},{key:"_focused",get:function(){return this._get("hovering")||this._get("grabbing")}}]);return ca}(N);w.__decorate([x.property({constructOnly:!0,nonNullable:!0})],r.GraphicManipulator.prototype,"graphic",
null);w.__decorate([x.property()],r.GraphicManipulator.prototype,"elevationInfo",null);w.__decorate([x.property({constructOnly:!0,nonNullable:!0})],r.GraphicManipulator.prototype,"view",void 0);w.__decorate([x.property({value:null})],r.GraphicManipulator.prototype,"focusedSymbol",null);w.__decorate([x.property({constructOnly:!0})],r.GraphicManipulator.prototype,"layer",void 0);w.__decorate([x.property()],r.GraphicManipulator.prototype,"interactive",void 0);w.__decorate([x.property()],r.GraphicManipulator.prototype,
"selectable",void 0);w.__decorate([x.property()],r.GraphicManipulator.prototype,"grabbable",void 0);w.__decorate([x.property({value:!1})],r.GraphicManipulator.prototype,"grabbing",null);w.__decorate([x.property()],r.GraphicManipulator.prototype,"dragging",void 0);w.__decorate([x.property()],r.GraphicManipulator.prototype,"hovering",null);w.__decorate([x.property({value:!1})],r.GraphicManipulator.prototype,"selected",null);w.__decorate([x.property()],r.GraphicManipulator.prototype,"cursor",void 0);
r.GraphicManipulator=w.__decorate([D.subclass("esri.views.interactive.GraphicManipulator")],r.GraphicManipulator);const Z=M.create(),T=u.createScreenPointArray();Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/support/utils":function(){define(["exports","../../../core/maybe","../../../core/screenUtils"],function(r,V,w){r.getSymbolInfo=function(N){let A=0,P=0,B=0;if(!N)return{offsetX:A,offsetY:P,size:B};"cim"===N.type&&N.data.symbol&&"symbolLayers"in N.data.symbol&&
N.data.symbol.symbolLayers&&N.data.symbol.symbolLayers.map(u=>{"CIMVectorMarker"===u.type&&u.anchorPoint&&(Math.abs(u.anchorPoint.x)>A&&(A=u.anchorPoint.x),Math.abs(u.anchorPoint.y)>P&&(P=u.anchorPoint.y),V.isSome(u.size)&&u.size>B&&(B=u.size))});A=w.pt2px(A);P=w.pt2px(P);B=w.pt2px(B);return{offsetX:A,offsetY:P,size:B}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),
function(r,V,w,N,A,P){function B(x,H,I,D=new P){let J=0;if("2d"===I.type)J=H*(I.resolution??0);else if("3d"===I.type){var U=I.overlayPixelSizeInMapUnits(x),M=I.basemapSpatialReference;J=w.isSome(M)&&!M.equals(I.spatialReference)?N.getMetersPerUnitForSR(M)/N.getMetersPerUnitForSR(I.spatialReference):H*U}H=x.x-J;U=x.y-J;M=x.x+J;x=x.y+J;({spatialReference:I}=I);D.xmin=Math.min(H,M);D.ymin=Math.min(U,x);D.xmax=Math.max(H,M);D.ymax=Math.max(U,x);D.spatialReference=I;return D}const u=new P;r.createQueryGeometry=
B;r.intersectsDrapedGeometry=function(x,H,I){x=I.toMap(x);if(w.isNone(x))return!1;const D=A.calculateTolerance();return B(x,D,I,u).intersects(H)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(r){function V(A,P){return P?"xoffset"in P&&P.xoffset?Math.max(A,Math.abs(P.xoffset)):"yoffset"in P&&P.yoffset?Math.max(A,Math.abs(P.yoffset||0)):A:A}function w(A,P){if("number"===typeof A)return A;if(A&&A.stops&&
A.stops.length){A=A.stops;let B=P=0;for(let u=0;u<A.length;u++){const x=A[u].size;"number"===typeof x&&(P+=x,B++)}return P/B}return P}function N(A,P){if(!P)return A;P=P.filter(x=>"size"===x.type).map(x=>{const {maxSize:H,minSize:I}=x;return(w(H,A)+w(I,A))/2});let B=0;const u=P.length;if(0===u)return A;for(let x=0;x<u;x++)B+=P[x];return Math.max(Math.floor(B/u),A)}r.calculateTolerance=function(A){const P=A&&A.renderer;A="touch"===(A&&A.event&&A.event.pointerType)?9:6;if(!P)return A;A="visualVariables"in
P?N(A,P.visualVariables):A;if("simple"===P.type)return V(A,P.symbol);if("unique-value"===P.type){let B=A;P.uniqueValueInfos?.forEach(u=>{B=V(B,u.symbol)});return B}if("class-breaks"===P.type){let B=A;P.classBreakInfos.forEach(u=>{B=V(B,u.symbol)});return B}return A};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils",
"../isSupportedGraphicUtils"],function(r,V,w,N,A){r.isSupportedGraphic=function(P){if("graphics"!==P.layer?.type)return A.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(w.isNone(P.geometry))return A.SupportedGraphicResult.GEOMETRY_MISSING;switch(P.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==
N.getGraphicEffectiveElevationMode(P)&&N.hasGraphicFeatureExpressionInfo(P)?A.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:A.SupportedGraphicResult.SUPPORTED};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/TranslateTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(r,V,w,N,A,P,B){r.TranslateGraphicTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="translate-graphic";H.distance=N.zeroMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateGraphicTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateGraphicTooltipInfo.prototype,"distance",void 0);r.TranslateGraphicTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],
r.TranslateGraphicTooltipInfo);r.TranslateGraphicZTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="translate-graphic-z";H.distance=N.zeroMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateGraphicZTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateGraphicZTooltipInfo.prototype,"distance",void 0);r.TranslateGraphicZTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],
r.TranslateGraphicZTooltipInfo);r.TranslateGraphicXYTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="translate-graphic-xy";H.distance=N.zeroMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateGraphicXYTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateGraphicXYTooltipInfo.prototype,"distance",void 0);r.TranslateGraphicXYTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],
r.TranslateGraphicXYTooltipInfo);r.TranslateVertexTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="translate-vertex";H.distance=N.zeroMeters;H.elevation=null;H.area=null;H.totalLength=null;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateVertexTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateVertexTooltipInfo.prototype,"distance",void 0);w.__decorate([A.property()],r.TranslateVertexTooltipInfo.prototype,
"elevation",void 0);w.__decorate([A.property()],r.TranslateVertexTooltipInfo.prototype,"area",void 0);w.__decorate([A.property()],r.TranslateVertexTooltipInfo.prototype,"totalLength",void 0);r.TranslateVertexTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],r.TranslateVertexTooltipInfo);r.TranslateVertexZTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="translate-vertex-z";H.distance=N.zeroMeters;H.elevation=null;return H}V._inheritsLoose(x,
u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateVertexZTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateVertexZTooltipInfo.prototype,"distance",void 0);w.__decorate([A.property()],r.TranslateVertexZTooltipInfo.prototype,"elevation",void 0);r.TranslateVertexZTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],r.TranslateVertexZTooltipInfo);r.TranslateVertexXYTooltipInfo=function(u){function x(H){H=u.call(this,
H)||this;H.type="translate-vertex-xy";H.distance=N.zeroMeters;H.elevation=null;H.area=null;H.totalLength=null;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.TranslateVertexXYTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.TranslateVertexXYTooltipInfo.prototype,"distance",void 0);w.__decorate([A.property()],r.TranslateVertexXYTooltipInfo.prototype,"elevation",void 0);w.__decorate([A.property()],r.TranslateVertexXYTooltipInfo.prototype,
"area",void 0);w.__decorate([A.property()],r.TranslateVertexXYTooltipInfo.prototype,"totalLength",void 0);r.TranslateVertexXYTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],r.TranslateVertexXYTooltipInfo);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/GraphicReshapeTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../isSupportedGraphicUtils ./isSupportedGraphic ./ReshapeOperation ../../../../interactive/InteractiveToolBase ../../../../interactive/sketch/SketchLabelOptions ../../../../interactive/sketch/SketchTooltipOptions".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C){r.GraphicReshapeTool=function(E){function L(G){G=E.call(this,G)||this;G._handles=new A;G._internalGeometryUpdate=!1;G.enableZShape=!0;G.enableZVertex=!0;G.enableMoveGraphic=!0;G.enableMidpoints=!0;G.enableEdgeOffset=!1;G.type="reshape-3d";G.labelOptions=new Q;G.tooltipOptions=new C;G.snappingManager=null;G.automaticManipulatorSelection=!1;return G}V._inheritsLoose(L,E);var y=L.prototype;y.initialize=function(){const G=this._reshapeOperation=new U.ReshapeOperation({tool:this});
this.addHandles([G.on("reshape",Z=>{"reshape"===Z.type&&this._onReshapeGeometryChanged();this.emit("reshape",Z)}),G.on("move",Z=>{"move"===Z.type&&this._onReshapeGeometryChanged();this.emit("move",Z)}),G.on("vertex-add",Z=>{this._onReshapeGeometryChanged();this.emit("vertex-add",Z)}),G.on("vertex-remove",Z=>{this._onReshapeGeometryChanged();this.emit("vertex-remove",Z)}),G.on("immediate-click",Z=>this.emit("immediate-click",Z)),this.view.on("pointer-down",["Shift"],Z=>Z.stopPropagation()),B.watch(()=>
this.graphic,()=>this._updateGraphic(),B.syncAndInitial)]);this.finishToolCreation()};y.destroy=function(){this._handles=P.destroyMaybe(this._handles);this._reshapeOperation=P.destroyMaybe(this._reshapeOperation)};y._updateGeometry=function(){const G=J.geometryOfSupportedGraphic(this.graphic);this._reshapeOperation.inputGeometry=P.isSome(G)?G.clone():null};y._updateGraphic=function(){this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(J.isSupportedGraphic(this.graphic)===D.SupportedGraphicResult.SUPPORTED){var G=
B.watch(()=>this.graphic?.geometry,()=>{!1===this._internalGeometryUpdate&&this._updateGeometry()},B.sync);this._handles.add(G,"onGraphicGeometryChange")}};y.onManipulatorSelectionChanged=function(){if(this._reshapeOperation)this._reshapeOperation.onManipulatorSelectionChanged()};y._updateGeometryInternally=function(G){this._internalGeometryUpdate=!0;this.graphic.geometry=G;this._internalGeometryUpdate=!1};y._onReshapeGeometryChanged=function(){const {outputGeometry:G}=this._reshapeOperation;!P.isNone(this.graphic)&&
G&&this._updateGeometryInternally(G.clone())};y.undo=function(){P.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();const G=this._reshapeOperation.undo(),{outputGeometry:Z}=this._reshapeOperation;G&&Z&&this._updateGeometryInternally(Z.clone())};y.redo=function(){P.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();const G=this._reshapeOperation.redo(),{outputGeometry:Z}=this._reshapeOperation;G&&Z&&this._updateGeometryInternally(Z.clone())};y.onInputEvent=function(G){"key-down"!==
G.type||"Delete"!==G.key&&"Backspace"!==G.key||this._reshapeOperation.removeSelectedVertices()};y.reset=function(){};V._createClass(L,[{key:"updating",get:function(){return this._reshapeOperation?.updating??!1}},{key:"canUndo",get:function(){return this._reshapeOperation.canUndo??!1}},{key:"canRedo",get:function(){return this._reshapeOperation.canRedo??!1}},{key:"test",get:function(){return{snappingManager:this.snappingManager,reshapeOperation:this._reshapeOperation}}}]);return L}(N.EventedMixin(M.InteractiveToolBase));
w.__decorate([u.property()],r.GraphicReshapeTool.prototype,"_reshapeOperation",void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"view",void 0);w.__decorate([u.property({constructOnly:!0})],r.GraphicReshapeTool.prototype,"graphic",void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"enableZShape",void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"enableZVertex",
void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"enableMoveGraphic",void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"enableMidpoints",void 0);w.__decorate([u.property({constructOnly:!0,nonNullable:!0})],r.GraphicReshapeTool.prototype,"enableEdgeOffset",void 0);w.__decorate([u.property()],r.GraphicReshapeTool.prototype,"type",void 0);w.__decorate([u.property({constructOnly:!0,type:Q})],r.GraphicReshapeTool.prototype,
"labelOptions",void 0);w.__decorate([u.property({constructOnly:!0,type:C})],r.GraphicReshapeTool.prototype,"tooltipOptions",void 0);w.__decorate([u.property({constructOnly:!0})],r.GraphicReshapeTool.prototype,"snappingManager",void 0);w.__decorate([u.property()],r.GraphicReshapeTool.prototype,"updating",null);w.__decorate([u.property()],r.GraphicReshapeTool.prototype,"automaticManipulatorSelection",void 0);r.GraphicReshapeTool=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshapeTool")],
r.GraphicReshapeTool);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(r,V,w,N,A){function P(B){return"graphics"!==B.layer?.type?{result:A.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:V.isNone(B.geometry)?{result:A.SupportedGraphicResult.GEOMETRY_MISSING,
geometry:null}:"on-the-ground"!==N.getGraphicEffectiveElevationMode(B)&&N.hasGraphicFeatureExpressionInfo(B)?{result:A.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,geometry:null}:"point"!==B.geometry.type&&"polyline"!==B.geometry.type&&("polygon"!==B.geometry.type||B.geometry instanceof w)?{result:A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:A.SupportedGraphicResult.SUPPORTED,geometry:B.geometry}}r.geometryOfSupportedGraphic=function(B){return P(B).geometry};r.isSupportedGraphic=
function(B){return P(B).result};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/ReshapeOperation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/unitUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/Polyline ../../../../../geometry/support/coordsUtils ../../../../../geometry/support/plane ../../../../../geometry/support/vectorStacks ../../../../../layers/graphics/dehydratedFeatures ../../../../../support/elevationInfoUtils ../../../../../symbols/support/utils ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../../SegmentLabels3D ../../SnappingVisualizer3D ../dragEventPipeline3D ../ManipulatorType ../manipulatorUtils ../settings ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ../manipulations/MoveXYGraphicManipulation ./edgeOffsetUtils ../../visualElements/OutlineVisualElement ../../../layers/graphics/GraphicState ../../../webgl-engine/lib/GeometryUtil ../../../../input/IViewEvents ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/editGeometry/interfaces ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/ReshapeTooltipInfos ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticAreaMeasurementUtils ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils ../../../../support/geodesicLengthMeasurementUtils ../../../../../geometry/SpatialReference".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja,oa,qa,ua,va,Ja,Ta,Ma,Ua,Oa,Za,Ra,Ea,xa,za,Ia,pa,Ba,Pa,Va,La,Na,R,ra,ya,na,ta){r.ReshapeOperation=function(Wa){function g(l){l=Wa.call(this,l)||this;l._vertexManipulatorMaterial=O.createManipulatorMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.vertex.color),qa.settings.reshapeManipulators.vertex.renderOccluded);l._vertexManipulatorOutlineMaterial=O.createManipulatorOutlineMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.vertex.outlineColor),
qa.settings.reshapeManipulators.vertex.renderOccluded);l._vertexManipulatorHoverOutlineMaterial=O.createManipulatorOutlineMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.vertex.hoverOutlineColor),qa.settings.reshapeManipulators.vertex.renderOccluded);l._edgeManipulatorMaterial=O.createManipulatorMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.edge.color),qa.settings.reshapeManipulators.edge.renderOccluded);l._edgeManipulatorOutlineMaterial=O.createManipulatorOutlineMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.edge.outlineColor),
qa.settings.reshapeManipulators.edge.renderOccluded);l._edgeOffsetManipulatorMaterial=O.createManipulatorMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.edgeOffset.color),qa.settings.reshapeManipulators.edgeOffset.renderOccluded,!1);l._edgeOffsetManipulatorHoverMaterial=O.createManipulatorMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.edgeOffset.hoverColor),qa.settings.reshapeManipulators.edgeOffset.renderOccluded,!1);l._selectedManipulatorMaterial=O.createManipulatorMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.selected.color),
qa.settings.reshapeManipulators.selected.renderOccluded);l._selectedManipulatorOutlineMaterial=O.createManipulatorOutlineMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.selected.outlineColor),qa.settings.reshapeManipulators.selected.renderOccluded);l._selectedManipulatorHoverOutlineMaterial=O.createManipulatorOutlineMaterial(qa.settings.colorToVec4(qa.settings.reshapeManipulators.selected.hoverOutlineColor),qa.settings.reshapeManipulators.selected.renderOccluded);l._selectedIndex=
0;l._manipulatorHandles=new x;l._manipulatorInfos=[];l._numGrabbing=0;l._numDragging=0;l._reshapeEventState=Ka.NONE;l._recreatingManipulators=!1;l.outputGeometry=null;l._vertexLaserLineVisualElement=null;return l}V._inheritsLoose(g,Wa);var z=g.prototype;z.initialize=function(){const {graphic:l,view:c}=this,a=this._graphicState=new Za.GraphicState({graphic:l});this._tooltip=new La.Tooltip({view:c});this.addHandles([J.watch(()=>a.displaying,b=>{for(const d of this._manipulatorInfos)d.manipulator.available=
b}),J.watch(()=>({labels:this._segmentLabels,enabled:this._labelOptions.enabled,edgeOffsetEnabled:this.enableEdgeOffset}),({labels:b,enabled:d,edgeOffsetEnabled:e})=>{I.isSome(b)&&(b.visible=d,b.edgeDistance=e?"far":"default")},J.initial),J.when(()=>!this._tooltipOptions.enabled,()=>this._tooltip.clear(),J.initial),this.view.trackGraphicState(a)])};z.destroy=function(){this._segmentLabels=I.destroyMaybe(this._segmentLabels);this._tooltip=I.destroyMaybe(this._tooltip);this._removeManipulators()};z.removeSelectedVertices=
function(){const l=this._manipulatorInfos.filter(c=>c.manipulator.selected&&"vertex"===c.type);this._removeVertices(l)};z.onManipulatorSelectionChanged=function(){this.emit("manipulators-changed")};z._removeManipulators=function(){this._manipulatorHandles.removeAll();this._moveManipulation=I.destroyMaybe(this._moveManipulation);this._graphicMoveManipulation=I.destroyMaybe(this._graphicMoveManipulation);this.manipulators.removeAll();this._manipulatorInfos=[];this._numDragging=this._numGrabbing=0};
z._createManipulators=function(l){if(!I.isNone(this._editGeometryOperations)){var c=ha.getGraphicEffectiveElevationInfo(this.graphic);for(const a of this._editGeometryOperations.data.components){const b=l?.byComponentIndex.get(a.index);for(const d of a.vertices){const e=b?.has(d.index);this._createVertexOrEdgeManipulator(d,c,e)}for(const d of a.edges)this._createVertexOrEdgeManipulator(d,c)}this._createGraphicMoveManipulation();this._createMoveManipulation(c);this._createVisualElements()}};z.redo=
function(){if(I.isNone(this._editGeometryOperations))return null;const l=this._editGeometryOperations.redo();I.isSome(l)&&(this.outputGeometry=this._editGeometryOperations.data.geometry,this._recreateManipulators());return l};z.undo=function(){if(I.isNone(this._editGeometryOperations))return null;this.emit("undo");const l=this._editGeometryOperations.undo();I.isSome(l)&&(this.outputGeometry=this._editGeometryOperations.data.geometry,this._recreateManipulators());return l};z._recreateManipulators=
function(){this._recreatingManipulators||(this._recreatingManipulators=!0,this._removeManipulators(),this._tooltip.clear(),this._createManipulators(),this._recreatingManipulators=!1)};z._recreateEditGeometryAndManipulators=function(l){const c={byComponentIndex:new Map};if(I.isSome(l)&&I.isSome(this.inputGeometry)&&Z.hasCompatibleTopology(l,this.inputGeometry))for(const a of this._manipulatorInfos)if("vertex"===a.type&&a.manipulator.selected){const {index:b,component:{index:d}}=a.handle,{byComponentIndex:e}=
c,f=e.get(d)||new Set;f.add(b);e.set(d,f)}this._recreatingManipulators=!0;this._removeManipulators();this._tooltip.clear();this._editGeometryOperations=I.destroyMaybe(this._editGeometryOperations);this._segmentLabels=I.destroyMaybe(this._segmentLabels);I.isNone(l)||(this._editGeometryOperations=Ia.EditGeometryOperations.fromGeometry(l,this.view.state.viewingMode),this._createManipulators(c),this._segmentLabels=new Y.SegmentLabels3D({context:{view:this.view,editGeometryOperations:this._editGeometryOperations,
elevationInfo:ha.getGraphicEffectiveElevationInfo(this.graphic),labelOptions:this._labelOptions,graphic:this.graphic,graphicState:this._graphicState},visible:this._labelOptions.enabled}));this._recreatingManipulators=!1};z._perGraphicManipulatorDragAction=function(l,c){if("end"===c.action)return c;let a=0;const b=[],d=this._manipulatorInfos.some(e=>"vertex"===e.type&&e.manipulator.selected);l=l===Ca.SELECTED_OR_ALL&&d;for(const e of this._manipulatorInfos)"vertex"===e.type&&(e.manipulator.grabbing||
l&&!e.manipulator.selected||b.push(e),a++);if(0===b.length)return c;this._moveVertices(b,c);if(b.length===a){this._updateEventState(Ka.MOVING);if(this.destroyed)return c;this.emit("move",{type:"move",dx:c.screenDeltaX,dy:c.screenDeltaY,mover:this.graphic})}else{this._updateEventState(Ka.RESHAPING);if(this.destroyed)return c;this.emit("reshape",{type:"reshape",mover:this.graphic})}return c};z._isMultiVertexSelection=function(){return 1<this._manipulatorInfos.reduce((l,c)=>"vertex"===c.type&&c.manipulator.selected?
l+1:l,0)};z._perVertexManipulatorDragAction=function(l){this._updateEventState(Ka.RESHAPING);if(!this.destroyed){var {mapDeltaX:c,mapDeltaY:a,mapDeltaZ:b}=l;if(c||a||b){var d=[];for(const e of this._manipulatorInfos)"vertex"===e.type&&(e.manipulator.selected&&!e.manipulator.grabbing||e===l.info)&&d.push(e);this._moveVertices(d,l,pa.AccumulationBehaviour.ACCUMULATE_STEPS);this.emit("reshape",{type:"reshape",mover:this.graphic})}}};z._updateEventState=function(l){if(l===this._reshapeEventState)return!1;
switch(l){case Ka.NONE:if(0!==this._numGrabbing||0!==this._numDragging)return!1;switch(this._reshapeEventState){case Ka.MOVING:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic});break;case Ka.RESHAPING:this.emit("reshape",{type:"reshape-stop",mover:this.graphic})}break;case Ka.MOVING:switch(this._reshapeEventState){case Ka.NONE:this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic});break;case Ka.RESHAPING:this.emit("reshape",{type:"reshape-stop",mover:this.graphic}),this.destroyed||
this.emit("move",{type:"move-start",dx:0,dy:0,mover:this.graphic})}break;case Ka.RESHAPING:switch(this._reshapeEventState){case Ka.NONE:this.emit("reshape",{type:"reshape-start",mover:this.graphic});break;case Ka.MOVING:this.emit("move",{type:"move-stop",dx:0,dy:0,mover:this.graphic}),this.destroyed||this.emit("reshape",{type:"reshape-start",mover:this.graphic})}}if(this.destroyed)return!1;const c=this._reshapeEventState!==l;this._reshapeEventState=l;return c};z._createGraphicMoveManipulation=function(){const {tool:l,
view:c}=this;this._graphicMoveManipulation=new Ma.MoveXYGraphicManipulation({tool:l,view:c,graphicState:this._graphicState});if(this.enableMoveGraphic){let a=null;this._manipulatorHandles.add(this._graphicMoveManipulation.createDragPipeline((b,d,e)=>{d.next(f=>this._trackNumDragging(f)).next(f=>{"start"===f.action&&(a=I.unwrap(this._editGeometryOperations).createUndoGroup());return f}).next(f=>this._perGraphicManipulatorDragAction(Ca.ALL,f)).next(f=>{this._updateTranslateGraphicTooltip(Ja.ManipulationType.XY,
f);return f}).next(f=>{"end"===f.action&&(this._tooltip.clear(),a=I.removeMaybe(a))});e.next(()=>this._onDragCancel(!0,()=>a=I.removeMaybe(a)))}));this._graphicMoveManipulation.forEachManipulator(b=>this._manipulatorHandles.add(this._watchAndUpdateGrabState(b,!1)))}else this._graphicMoveManipulation.forEachManipulator(a=>{a.grabbable=!1;a.cursor=null});this._graphicMoveManipulation.forEachManipulator(a=>this._manipulatorHandles.add(a.events.on("immediate-click",b=>{this._manipulatorInfos.some(d=>
d.manipulator.selected)?this._clearSelection():this.emit("immediate-click",{...b,graphic:this.graphic});b.stopPropagation()})))};z._createMoveManipulation=function(l){const {graphic:c,handles:a,tool:b,view:d}=this,e=this._graphicState;this._moveManipulation=new Ja.MoveManipulation({tool:b,view:d,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZShape&&oa.canMoveZ(c),snapToScene:!1,radius:Ja.MoveManipulation.radiusForSymbol(c.symbol)});this._moveManipulation.forEachManipulator(h=>a.add([h.events.on("immediate-click",
k=>{this._moveManipulation.zManipulation.hasManipulator(h)||this._manipulatorInfos.some(m=>m.manipulator.selected)||this.emit("immediate-click",{...k,graphic:c});k.stopPropagation()}),this._watchAndUpdateGrabState(h,!1)]));var f=h=>k=>{a.add(k.events.on("focus-changed",({action:m})=>{"focus"===m&&this._tooltipOptions.enabled?this._updateTranslateTooltip(h):this._tooltip.clear()}))};this._moveManipulation.xyManipulation.forEachManipulator(f(Ja.ManipulationType.XY));this._moveManipulation.xyAxisManipulation.forEachManipulator(f(Ja.ManipulationType.XY_AXIS));
this._moveManipulation.zManipulation.forEachManipulator(f(Ja.ManipulationType.Z));this._moveManipulation.elevationInfo={mode:"absolute-height",offset:0};f=I.unwrap(c.geometry).spatialReference;a.add([this._moveManipulation.createDragPipeline((h,k,m,n,p)=>{const {snappingStep:q,cancelSnapping:t}=Pa.createSnapDragEventPipelineStep({predicate:v=>!!v.info,snappingManager:b.snappingManager,snappingContext:new Ba.SnappingContext({editGeometryOperations:I.unwrap(this._editGeometryOperations),elevationInfo:l,
pointer:p,excludeFeature:c,visualizer:new S.SnappingVisualizer3D}),updatingHandles:this.updatingHandles,useZ:!1});n=n.next(v=>{this._onDragCancel();return v}).next(t);m=m.next(v=>this._trackNumDragging(v)).next(v=>{const F=this._manipulatorInfos.filter(W=>"vertex"===W.type&&W.manipulator.selected);return v.manipulatorType===ja.ManipulatorType.TRANSLATE_XY&&1===F.length?{...v,info:F[0],snapOrigin:F[0].handle.pos}:v}).next(xa.sceneSnappingAtLocation(this.view,l,c)).next(...q).next(xa.addMapDelta()).next(v=>
this._perGraphicManipulatorDragAction(Ca.SELECTED_OR_ALL,v)).next(v=>{this._updateTranslateTooltip(h,v);return v});return{steps:m,cancel:n}},l,f,c),J.watch(()=>e.displaying,()=>this._updateMoveManipulationPosition(),J.initial),e.on("changed",()=>{this._recreatingManipulators||this._updateMoveManipulationPosition()}),J.watch(()=>e.isDraped,h=>{this._updateMoveManipulationPosition();h?a.add(this.view.elevationProvider.on("elevation-change",()=>this._updateMoveManipulationPosition()),"align-move-manipulation"):
a.remove("align-move-manipulation")},J.initial)])};z._createVisualElements=function(){const {graphic:l,view:c}=this,a=ua.createVisualElements({view:c,graphic:l,forEachManipulator:b=>{if(!this.destroyed&&!this._recreatingManipulators){this._graphicMoveManipulation.forEachManipulator(b);this._moveManipulation.forEachManipulator(b);for(const d of this._manipulatorInfos)b(d.manipulator,ja.ManipulatorType.TRANSLATE_XY)}},onManipulatorsChanged:b=>this.on("manipulators-changed",b)});I.isSome(a)&&(this._outlineVisualElement=
a.visualElement instanceof Oa.OutlineVisualElement?a.visualElement:null);I.isSome(this._outlineVisualElement)&&this._manipulatorHandles.add(this._outlineVisualElement.events.on("attachment-origin-changed",()=>{this._graphicState.isDraped||this._updateMoveManipulationPosition()}));this._manipulatorHandles.add(a)};z._createEdgeOffsetManipulator=function(l,c=ha.getGraphicEffectiveElevationInfo(this.graphic)){var a=qa.settings.reshapeManipulators.edgeOffset,b=a.size/2,d=b+a.collisionPadding;b/=d;const e=
b*Math.sqrt(3)/2;I.isNone(this._edgeOffsetManipulatorGeometryInside)&&(this._edgeOffsetManipulatorGeometryInside=Ra.createExtrudedTriangle(this._edgeOffsetManipulatorMaterial,e,b/2,b/2,a.height,a.offset));I.isNone(this._edgeOffsetManipulatorGeometryOutside)&&(this._edgeOffsetManipulatorGeometryOutside=Ra.createExtrudedTriangle(this._edgeOffsetManipulatorMaterial,-e,b/2,b/2,a.height,-a.offset));b=[new K.RenderObject(this._edgeOffsetManipulatorGeometryInside.instantiate(),za.ManipulatorStateFlags.Unfocused),
new K.RenderObject(this._edgeOffsetManipulatorGeometryInside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),za.ManipulatorStateFlags.Focused),new K.RenderObject(this._edgeOffsetManipulatorGeometryOutside.instantiate(),za.ManipulatorStateFlags.Unfocused),new K.RenderObject(this._edgeOffsetManipulatorGeometryOutside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),za.ManipulatorStateFlags.Focused)];d=new X.Manipulator3D({view:this.view,renderObjects:b,elevationInfo:"on-the-ground"!==
c.mode||da.isVolumetricSymbol(this.graphic.symbol)?{mode:"absolute-height",offset:0}:c,worldOriented:!1,focusMultiplier:1,radius:d,available:!(!this.graphic.visible||!this.graphic.layer?.visible),collisionType:{type:"disc",direction:y.fromValues(0,0,1)},collisionPriority:1,metadata:{deleting:!1}});b=new X.Manipulator3D({view:this.view,worldSized:!0,worldOriented:!1,available:!(!this.graphic.visible||!this.graphic.layer?.visible),collisionPriority:-10,cursor:this.enableMoveGraphic?"move":"default",
metadata:{deleting:!1}});const f={manipulator:d,handle:l,locationUpdateHandle:null,type:"edge",selectedIndex:0,edgeManipulator:b,elevationInfo:c,visibilityHandle:null};this._autoHideEdgeOffsetManipulator(f,a.minSquaredEdgeLength);this._updateEdgeOffsetManipulator(f);l=[];for(var h of[f.handle.leftVertex,f.handle.rightVertex])a=this._getManipulatorInfoFromHandle(h),I.isSome(a)&&l.push(a.manipulator.events.on("location-update",()=>this._updateEdgeOffsetManipulator(f)));f.locationUpdateHandle=H.handlesGroup(l);
this._manipulatorHandles.add(f.locationUpdateHandle,d);this._manipulatorHandles.add([this._watchAndUpdateGrabState(d,!0),this._watchAndUpdateGrabState(b,!0)],d);this._manipulatorHandles.add(xa.createManipulatorDragEventPipeline(d,this._createEdgeOffsetPipeline(f,c)),d);this._manipulatorHandles.add(xa.createManipulatorDragEventPipeline(b,(k,m,n,p)=>{if("touch"===p)this._createEdgeOffsetPipeline(f,c)(k,m,n);else if(this.enableMoveGraphic){p=this.graphic;const q=I.isSome(p.geometry)?p.geometry.spatialReference:
null;m.next(t=>this._trackNumDragging(t)).next(xa.dragAtLocation(this.view,k.elevationAlignedLocation)).next(ea.screenToMapXYAtLocation(this.view,k.elevationAlignedLocation,c,q,p)).next(xa.addScreenDelta()).next(xa.addMapDelta()).next(t=>this._perGraphicManipulatorDragAction(Ca.ALL,t)).next(t=>{this._updateTranslateGraphicTooltip(Ja.ManipulationType.XY,t);return t}).next(t=>{"end"===t.action&&this._tooltip.clear()});n.next(()=>this._onDragCancel(!k.metadata.deleting))}}),d);h=k=>{this._manipulatorInfos.some(m=>
m.manipulator.selected)?this._clearSelection():this.emit("immediate-click",{...k,graphic:this.graphic});k.stopPropagation()};this._manipulatorHandles.add([d.events.on("immediate-click",h),b.events.on("immediate-click",h),d.events.on("focus-changed",({action:k})=>{const m=this._tooltipOptions;"focus"===k&&m.enabled?(k=this._tooltip.info=new Va.ReshapeEdgeOffsetTooltipInfo({tooltipOptions:m}),this._updateTooltipAreaOrTotalLength(k)):this._tooltip.clear()})],d);this._manipulatorInfos.push(f);this.manipulators.add(d);
this.manipulators.add(b);this.emit("manipulators-changed");return f};z._autoHideEdgeOffsetManipulator=function(l,c){const a=l.manipulator,b=l.edgeManipulator,d=()=>{l.visibilityHandle=I.removeMaybe(l.visibilityHandle);var e=this._getManipulatorInfoFromHandle(l.handle.leftVertex);const f=this._getManipulatorInfoFromHandle(l.handle.rightVertex);e=I.isSome(e)&&I.isSome(f)&&Ua.screenEdgeLengthSquared(e.manipulator.renderLocation,f.manipulator.renderLocation,this.view.state.camera)<c;if(!a.focused&&!b.focused||
e)a.grabbable=!e,b.grabbable=!e,l.visibilityHandle=H.handlesGroup([a.disableDisplay(),{remove:()=>{a.grabbable=!0;b.grabbable=this.enableMoveGraphic}}])};this._manipulatorHandles.add([a.events.on("focus-changed",d),b.events.on("focus-changed",d),{remove:()=>{I.removeMaybe(l.visibilityHandle);b.metadata.deleting=!0;this.manipulators.remove(b)}}],a);d()};z._updateEdgeOffsetManipulator=function(l){this._updateManipulatorPosition(l);var {coordinateHelper:c}=I.unwrap(this._editGeometryOperations).data;
c=Ua.createEdgeOffsetIntersectionPlane(this.view,l.manipulator.elevationAlignedLocation,Ua.createEdgeOffsetOperation(c,l.handle,I.unwrap(l.manipulator.elevationInfo)));var a=this._getManipulatorInfoFromHandle(l.handle.leftVertex),b=this._getManipulatorInfoFromHandle(l.handle.rightVertex);I.isNone(a)||I.isNone(b)||(a=a.manipulator.renderLocation,b=b.manipulator.renderLocation,c=I.isSome(c)?Ua.edgeOffsetRotationMatrix(c,a,b):E.IDENTITY,l.manipulator.modelTransform=c,l.edgeManipulator.elevationAlignedLocation=
l.manipulator.elevationAlignedLocation,l.edgeManipulator.modelTransform=c,c=L.length(L.subtract(Aa,a,b))/2,l.edgeManipulator.collisionType={type:"line",paths:[[[-c,0,0],[c,0,0]]]})};z._createEdgeOffsetPipeline=function(l,c){return(a,b,d)=>{this._clearSelection();const {step:e,cleanup:f}=this._initializeEdgeOffset(l,c);b.next(h=>this._trackNumDragging(h)).next(xa.dragAtLocation(this.view,a.elevationAlignedLocation)).next(e).next(ea.screenToRenderPlaneFromEvent(this.view)).next(ea.convertToMapCoordinates(this.view,
I.unwrap(this._editGeometryOperations).data.spatialReference)).next(xa.addMapDelta()).next(this._applyComputeEdgeOffsetDistanceStep()).next(this._applyEdgeOffsetStep(l)).next(this._showEdgeOffsetTooltip()).next(h=>{"end"===h.action&&f()});d.next(()=>{a.metadata.deleting||(f(),this._onDragCancel())})}};z._initializeEdgeOffset=function(l,c){const a=I.unwrap(this._editGeometryOperations),b=Ua.createEdgeOffsetOperation(a.data.coordinateHelper,l.handle,c);c=a.createUndoGroup();const d=Ua.createEdgeOffsetIntersectionPlane(this.view,
l.manipulator.elevationAlignedLocation,b);if(b.requiresSplitEdgeLeft){var e=this._getManipulatorInfoFromHandle(l.handle.leftVertex.leftEdge);I.isSome(e)&&this._splitEdgeManipulator(e,1)}b.requiresSplitEdgeRight&&(e=this._getManipulatorInfoFromHandle(l.handle.rightVertex.rightEdge),I.isSome(e)&&this._splitEdgeManipulator(e,0));const f=()=>new G({paths:[[l.handle.leftVertex.pos,l.handle.rightVertex.pos]],spatialReference:a.data.spatialReference}),h=new Oa.OutlineVisualElement({view:this.view,isDraped:this._graphicState.isDraped,
geometry:f(),elevationInfo:l.elevationInfo,width:qa.settings.visualElements.lineGraphics.outline.width,color:qa.settings.colorToVec4(qa.colors.main),attached:!0});let k;const m=()=>{this._cleanEdgeOffsetCollapsedEdges(l);k=I.removeMaybe(k)};e=this.on("undo",m);k=H.handlesGroup([H.destroyHandle(h),J.watch(()=>this._graphicState.isDraped,n=>h.isDraped=n),this._graphicState.on("changed",()=>h.geometry=f()),c,e]);return{step:n=>I.isNone(b)||I.isNone(d)?(m(),null):{...n,operation:b,plane:d},cleanup:m}};
z._applyEdgeOffsetStep=function(l){return c=>{if(this.destroyed||I.isNone(c.operation))return c;this._updateEventState(Ka.RESHAPING);const {mapDeltaX:a,mapDeltaY:b,mapDeltaZ:d}=c;if(a||b||d)this._offsetEdge(l,c),this.emit("reshape",{type:"reshape",mover:this.graphic});return c}};z._applyComputeEdgeOffsetDistanceStep=function(){return l=>{const {operation:c,mapEnd:a}=l;if(I.isNone(c)||I.isNone(a))return l;"start"===l.action&&c.selectArrowFromStartPoint(a);return{...l,signedDistance:c.signedDistanceToPoint(a)}}};
z._showEdgeOffsetTooltip=function(){return l=>{const {mapEnd:c,signedDistance:a,operation:b}=l;var d=this._tooltip,e=this._tooltipOptions;if(!e.enabled||I.isNone(a))return d.clear(),l;let f=d.info;if(I.isNone(f)||"reshape-edge-offset"!==f.type)f=d.info=new Va.ReshapeEdgeOffsetTooltipInfo({tooltipOptions:e});var {coordinateHelper:h}=I.unwrap(this._editGeometryOperations).data;d=f;if("end"===l.action)e=D.zeroMeters;else a:{e=a*b.selectedArrow;var k=b.plane;if(this._graphicState.isDraped){const m=h.toXYZ(h.pointToVector(c));
k=T.projectPoint(k,m,ia.sv3d.get());h=na.geodesicDistance(k,m,h.spatialReference);if(I.isSome(h)){e=D.createLength(h.value*Math.sign(e),h.unit);break a}}e=D.createLength(e*U.getMetersPerUnitForSR(c.spatialReference),"meters")}d.distance=e;this._updateTooltipAreaOrTotalLength(f);return l}};z._cleanEdgeOffsetCollapsedEdges=function(l){var c=l.handle.leftVertex.leftEdge?.leftVertex,a=l.handle.leftVertex;const b=l.handle.rightVertex.rightEdge?.rightVertex,d=l.handle.rightVertex,e=I.unwrap(this._editGeometryOperations).data.coordinateHelper;
l=[];c&&1E-6>e.distance(c.pos,a.pos)&&(c=this._getManipulatorInfoFromHandle(a),I.isSome(c)&&l.push(c));if(1E-6>e.distance(a.pos,d.pos)||b&&1E-6>e.distance(b.pos,d.pos))a=this._getManipulatorInfoFromHandle(d),I.isSome(a)&&l.push(a);l.length&&this._removeVertices(l)};z._computeVertexManipulatorSizeAndOutline=function(l){const c=l.size/2,a=c+l.collisionPadding;return{size:c/a,outlineSize:(c+l.outlineSize)/a}};z._createVertexOrEdgeManipulator=function(l,c=ha.getGraphicEffectiveElevationInfo(this.graphic),
a=!1){if("edge"===l.type){if(this.enableEdgeOffset)return this._createEdgeOffsetManipulator(l,c);if(!this.enableMidpoints)return null}if(I.isNone(this._vertexManipulatorGeometry)||I.isNone(this._vertexManipulatorOutlineGeometry)){const {size:h,outlineSize:k}=this._computeVertexManipulatorSizeAndOutline(qa.settings.reshapeManipulators.vertex);this._vertexManipulatorGeometry=Ra.createSphereGeometry(this._vertexManipulatorMaterial,h,16,16);this._vertexManipulatorOutlineGeometry=Ra.createSphereGeometry(this._vertexManipulatorOutlineMaterial,
k,16,16)}if(I.isNone(this._edgeManipulatorGeometry)||I.isNone(this._edgeManipulatorOutlineGeometry)){const {size:h,outlineSize:k}=this._computeVertexManipulatorSizeAndOutline(qa.settings.reshapeManipulators.edge);this._edgeManipulatorGeometry=Ra.createSphereGeometry(this._edgeManipulatorMaterial,h,16,16);this._edgeManipulatorOutlineGeometry=Ra.createSphereGeometry(this._edgeManipulatorOutlineMaterial,k,16,16)}const b=I.isSome(this.graphic.geometry)&&"point"===this.graphic.geometry.type?[]:[new K.RenderObject(this._vertexManipulatorGeometry.instantiate(),
Ha.Vertex|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate(),Ha.Vertex|za.ManipulatorStateFlags.Unfocused|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),Ha.Vertex|za.ManipulatorStateFlags.Focused|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._vertexManipulatorGeometry.instantiate({material:this._selectedManipulatorMaterial}),
za.ManipulatorStateFlags.Selected),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorOutlineMaterial}),za.ManipulatorStateFlags.Selected|za.ManipulatorStateFlags.Unfocused),new K.RenderObject(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorHoverOutlineMaterial}),za.ManipulatorStateFlags.Selected|za.ManipulatorStateFlags.Focused)];this.enableMidpoints&&b.push(new K.RenderObject(this._edgeManipulatorGeometry.instantiate({material:this._vertexManipulatorMaterial}),
Ha.Edge|za.ManipulatorStateFlags.Focused|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),Ha.Edge|za.ManipulatorStateFlags.Focused|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorGeometry.instantiate(),Ha.Edge|za.ManipulatorStateFlags.Unfocused|za.ManipulatorStateFlags.Unselected),new K.RenderObject(this._edgeManipulatorOutlineGeometry.instantiate(),Ha.Edge|
za.ManipulatorStateFlags.Unfocused|za.ManipulatorStateFlags.Unselected));const d=new X.Manipulator3D({view:this.view,renderObjects:b,elevationInfo:c,focusMultiplier:1,touchMultiplier:1,available:!(!this.graphic.visible||!this.graphic.layer?.visible),metadata:{deleting:!1}});d.selected=a;this._setTypeSpecificManipulatorSettings(d,l,c);const e="edge"===l.type?{manipulator:d,handle:l,locationUpdateHandle:null,type:"edge",selectedIndex:0}:{manipulator:d,handle:l,type:"vertex",selectedIndex:0};this._manipulatorInfos.push(e);
this.manipulators.add(d);this._updateManipulatorPosition(e);if("edge"===e.type){l=[];for(var f of[e.handle.leftVertex,e.handle.rightVertex])a=this._getManipulatorInfoFromHandle(f),I.isSome(a)&&l.push(a.manipulator.events.on("location-update",()=>this._updateManipulatorPosition(e)));e.locationUpdateHandle=H.handlesGroup(l);this._manipulatorHandles.add(e.locationUpdateHandle,d)}this._manipulatorHandles.add(this._watchAndUpdateGrabState(d,!0),d);f=xa.createManipulatorDragEventPipeline(d,(h,k,m,n)=>{let p=
null;const {snappingStep:q,cancelSnapping:t}=Pa.createSnapDragEventPipelineStep({predicate:()=>!this._isMultiVertexSelection(),snappingManager:this.tool.snappingManager,snappingContext:new Ba.SnappingContext({editGeometryOperations:I.unwrap(this._editGeometryOperations),elevationInfo:c,pointer:n,excludeFeature:this.graphic,visualizer:new S.SnappingVisualizer3D}),updatingHandles:this.updatingHandles,useZ:!1});m=m.next(v=>{this._onDragCancel(!h.metadata.deleting,()=>p=I.removeMaybe(p));return v}).next(t);
k.next(v=>this._trackNumDragging(v)).next(v=>{"start"===v.action&&(p=I.unwrap(this._editGeometryOperations).createUndoGroup());if("edge"===e.type){const F=this._splitEdgeManipulator(e);return{...v,info:F,snapOrigin:F.handle.pos}}return{...v,info:e,snapOrigin:e.handle.pos}}).next(xa.dragAtLocation(this.view,h.elevationAlignedLocation)).next(ea.screenToMapXYForGraphicAtLocation(this.view,this.graphic,h.elevationAlignedLocation,h.location.spatialReference,this.graphic)).next(xa.sceneSnappingAtLocation(this.view,
c,this.graphic)).next(...q).next(xa.addMapDelta()).next(v=>{this._perVertexManipulatorDragAction(v);"end"===v.action&&(p=I.removeMaybe(p));this._updateTranslateVertexTooltip(h,Ja.ManipulationType.XY,v)})});this._manipulatorHandles.add([f,d.events.on("immediate-click",h=>this._manipulatorClickCallback(h,e)),d.events.on("select-changed",()=>{e.selectedIndex=++this._selectedIndex;this._updateMoveManipulationPosition()}),d.events.on("focus-changed",({action:h})=>{"focus"===h&&"edge"!==e.type?this._updateTranslateVertexTooltip(d,
Ja.ManipulationType.XY):this._tooltip.clear()})],d);this.emit("manipulators-changed");return e};z._trackNumDragging=function(l){switch(l.action){case "start":this._numDragging++;break;case "end":this._numDragging--}return l};z._onDragCancel=function(l=!0,c){this._numDragging--;l&&(this.undo(),this.outputGeometry=I.isSome(this._editGeometryOperations)?this._editGeometryOperations.data.geometry:null);I.isSome(this.tool.snappingManager)&&this.tool.snappingManager.doneSnapping();this._tooltip.clear();
switch(this._reshapeEventState){case Ka.MOVING:this.emit("move",{type:"move",dx:0,dy:0,mover:this.graphic});break;case Ka.RESHAPING:this.emit("reshape",{type:"reshape",mover:this.graphic})}c&&c();this.destroyed||this._updateEventState(Ka.NONE)};z._setTypeSpecificManipulatorSettings=function(l,c,a){switch(c.type){case "vertex":l.state=Ha.Vertex;l.selectable=!0;l.cursor="move";l.collisionPriority=2;l.radius=qa.settings.reshapeManipulators.vertex.size/2+qa.settings.reshapeManipulators.vertex.collisionPadding;
l.elevationInfo=a;l.interactive=I.isSome(this.graphic.geometry)&&"point"!==this.graphic.geometry.type;break;case "edge":l.state=Ha.Edge,l.selectable=!1,l.cursor="copy",l.collisionPriority=-1,l.radius=qa.settings.reshapeManipulators.edge.size/2+qa.settings.reshapeManipulators.edge.collisionPadding,l.elevationInfo="on-the-ground"!==a.mode||da.isVolumetricSymbol(this.graphic.symbol)?{mode:"absolute-height",offset:0}:a}};z._watchAndUpdateGrabState=function(l,c){return l.events.on("grab-changed",a=>this._onGrabStateChanged(l,
c,a.action,a.pointerType))};z._onGrabStateChanged=function(l,c,a,b="mouse"){if(!this._recreatingManipulators){if("start"===a)c&&this._updateSelection(l),this._numGrabbing++;else if(this._numGrabbing--,this._updateEventState(Ka.NONE),this.destroyed)return;this._moveManipulation.interactive=!this._numGrabbing;if("touch"!==b||this.enableEdgeOffset)this._manipulatorInfos.forEach(d=>{d.manipulator.interactive=d.manipulator.grabbing||!this._numGrabbing&&I.isSome(this.graphic.geometry)&&"point"!==this.graphic.geometry.type;
"edgeManipulator"in d&&(d.edgeManipulator.interactive=d.edgeManipulator.grabbing||!this._numGrabbing)}),this._graphicMoveManipulation.forEachManipulator(d=>{d.interactive=d.grabbing||!this._numGrabbing})}};z._clearSelection=function(){for(const l of this._manipulatorInfos)l.manipulator.grabbing||(l.manipulator.selected=!1)};z._updateSelection=function(l){l.grabbing&&!l.selected&&l.selectable&&(this._clearSelection(),l.selected=!0,this.emit("manipulators-changed"))};z._removeManipulator=function(l){I.isNone(l)||
(l.manipulator.metadata.deleting=!0,this.manipulators.remove(l.manipulator),this._manipulatorHandles.remove(l.manipulator),A.removeUnordered(this._manipulatorInfos,l),this.emit("manipulators-changed"))};z._getManipulatorInfoFromHandle=function(l){if(l)for(const c of this._manipulatorInfos)if(l===c.handle)return c;return null};z._updateManipulatorPosition=function(l){if(!I.isNone(l)){var c=I.unwrap(this._editGeometryOperations);if("vertex"===l.type)l.manipulator.location=c.data.coordinateHelper.vectorToDehydratedPoint(l.handle.pos,
Da),l.manipulator.grabbing&&I.isSome(this._vertexLaserLineVisualElement)&&(this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation=l.manipulator.renderLocation);else if("edge"===l.type){var a=this._getManipulatorInfoFromHandle(l.handle.leftVertex),b=this._getManipulatorInfoFromHandle(l.handle.rightVertex);I.isNone(a)||I.isNone(b)||(a=a.manipulator,b=b.manipulator,I.isSome(l.manipulator.elevationInfo)&&"on-the-ground"===l.manipulator.elevationInfo.mode?(a=a.location,b=b.location,
l.manipulator.location=ca.makeDehydratedPoint(a.x+.5*(b.x-a.x),a.y+.5*(b.y-a.y),a.hasZ&&b.hasZ?0:void 0,c.data.spatialReference)):(L.lerp(Aa,a.renderLocation,b.renderLocation,.5),l.manipulator.renderLocation=Aa))}}};z._splitEdgeManipulator=function(l,c=.5){var a=I.unwrap(this._editGeometryOperations);c=I.unwrap(a.splitEdge(l.handle,c).createdVertex);l.locationUpdateHandle=I.removeMaybe(l.locationUpdateHandle);var b=ha.getGraphicEffectiveElevationInfo(this.graphic);let d;this.enableEdgeOffset?(this._removeManipulator(l),
d=this._createVertexOrEdgeManipulator(c)):(d=l,d.handle=c,d.type="vertex",this._setTypeSpecificManipulatorSettings(l.manipulator,l.handle,b));c.leftEdge&&this._createVertexOrEdgeManipulator(c.leftEdge);c.rightEdge&&this._createVertexOrEdgeManipulator(c.rightEdge);this.outputGeometry=a.data.geometry;this._updateManipulatorPosition(d);this.enableEdgeOffset||this._updateTranslateVertexTooltip(d.manipulator,Ja.ManipulationType.XY);this._updateSelection(l.manipulator);l=this._updateEventState(Ka.RESHAPING);
b=a.data.coordinateHelper.vectorToArray(d.handle.pos);a=a.data.components.indexOf(c.component);this.emit("vertex-add",{type:"vertex-add",vertices:[{coordinates:b,componentIndex:a,vertexIndex:I.unwrap(c.index)}],added:b});l&&this._updateEventState(Ka.NONE);return d};z._updateMoveManipulationPosition=function(){const l=L.set(Aa,0,0,0);let c=0,a=!1;var b=null;let d=null;for(var e of this._manipulatorInfos)if("vertex"===e.type)if(e.manipulator.selected)if(c++,L.add(l,l,e.manipulator.renderLocation),I.isNone(b)||
e.selectedIndex>b.selectedIndex)d=b,b=e;else{if(I.isNone(d)||e.selectedIndex>d.selectedIndex)d=e}else a=!0;if(0===c)b=this._graphicState.displaying&&this.enableMoveGraphic,this._moveManipulation.xyManipulation.available=b,this._moveManipulation.xyAxisManipulation.available=b,this._moveManipulation.xyAxisManipulation.orthogonalAvailable=b,this._moveManipulation.zManipulation.available=b&&this.enableZShape&&oa.canMoveZ(this.graphic),this._moveManipulation.angle=Ta.shapeOrientation(I.unwrap(this.graphic.geometry)),
this._moveManipulation.radius=Ja.MoveManipulation.radiusForSymbol(this.graphic.symbol);else{e=this._graphicState.displaying;this._moveManipulation.xyManipulation.available=e;this._moveManipulation.xyAxisManipulation.available=e;this._moveManipulation.zManipulation.available=e&&this.enableZVertex&&oa.canMoveZ(this.graphic);this._moveManipulation.xyAxisManipulation.orthogonalAvailable=e&&1!==c;e=0;if(I.isSome(b)){const f=b.handle.pos,h=I.isSome(d)?d.handle.pos:b.handle.leftEdge&&b.handle.leftEdge.leftVertex?
b.handle.leftEdge.leftVertex.pos:null;b=I.isNone(d)&&b.handle.rightEdge&&b.handle.rightEdge.rightVertex?b.handle.rightEdge.rightVertex.pos:null;h&&b?this._moveManipulation.xyAxisManipulation.available=!1:h?e=Math.atan2(f[1]-h[1],f[0]-h[0])+Math.PI/2:b&&(e=Math.atan2(b[1]-f[1],b[0]-f[0])+Math.PI/2)}this._moveManipulation.angle=e;this._moveManipulation.radius=va.DISC_RADIUS_SMALL}0!==c&&a?(L.scale(l,l,1/c),Da.spatialReference=I.unwrap(this._editGeometryOperations).data.spatialReference,Da.hasZ=!0,this.view.renderCoordsHelper.fromRenderCoords(l,
Da),this._moveManipulation.elevationAlignedLocation=Da):I.isSome(this._outlineVisualElement)&&!this._graphicState.isDraped&&I.isSome(this._outlineVisualElement.attachmentOrigin)?this._moveManipulation.elevationAlignedLocation=this._outlineVisualElement.attachmentOrigin:O.placeAtGraphic(this.view,this._moveManipulation,this.graphic)};z._removeVertices=function(l){var c=[];const a=I.unwrap(this._editGeometryOperations);for(var b of l)"vertex"===b.type&&a.canRemoveVertex()&&(c.push(b.handle),this._removeManipulator(b),
this._removeManipulator(this._getManipulatorInfoFromHandle(b.handle.leftEdge)),this._removeManipulator(this._getManipulatorInfoFromHandle(b.handle.rightEdge)),l=a.removeVertices([b.handle]),(l=I.unwrap(l.removedVertices?.[0].createdEdge))&&this._createVertexOrEdgeManipulator(l));if(0<c.length&&(c=c.map(d=>{const e=a.data.components.indexOf(d.component);return{coordinates:a.data.coordinateHelper.vectorToArray(d.pos),componentIndex:e,vertexIndex:I.unwrap(d.index)}}),this.outputGeometry=a.data.geometry,
b=this._updateEventState(Ka.RESHAPING),!this.destroyed&&(this.emit("vertex-remove",{type:"vertex-remove",removed:c.map(d=>d.coordinates),vertices:c}),!this.destroyed))){if(b&&(this._updateEventState(Ka.NONE),this.destroyed))return;this._updateMoveManipulationPosition()}};z._moveVertices=function(l,c,a="start"===c.action?pa.AccumulationBehaviour.NEW_STEP:pa.AccumulationBehaviour.ACCUMULATE_STEPS){const b=I.unwrap(this._editGeometryOperations);b.moveVertices(l.map(d=>d.handle),c.mapDeltaX,c.mapDeltaY,
c.mapDeltaZ,a);this.outputGeometry=b.data.geometry;for(const d of l)this._updateManipulatorPosition(d)};z._offsetEdge=function(l,c){if(!I.isNone(c.operation)&&!I.isNone(c.signedDistance)){var a=I.unwrap(this._editGeometryOperations),b=c.operation.clone();b.distance=c.signedDistance;a.updateVertices([l.handle.leftVertex,l.handle.rightVertex],b);this.outputGeometry=a.data.geometry;this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(l.handle.leftVertex));this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(l.handle.rightVertex))}};
z._manipulatorClickCallback=function(l,c){l.shiftKey||this._clearSelection();"vertex"===c.type&&(c.manipulator.selected=!c.manipulator.selected,l.button===Ea.MouseButton.Right&&this._removeVertices([c]));"edge"===c.type&&l.button===Ea.MouseButton.Left&&this._splitEdgeManipulator(c);l.stopPropagation()};z._updateTranslateTooltip=function(l,c){const a=this._manipulatorInfos.filter(b=>"vertex"===b.type&&b.manipulator.selected);1===a.length?this._updateTranslateVertexTooltip(a[0].manipulator,l,c):this._updateTranslateGraphicTooltip(l,
c)};z._updateTranslateGraphicTooltip=function(l,c){const a=this._tooltipOptions;if(a.enabled){var b=this._graphicState.isDraped?"on-the-ground":"absolute-height";switch(l){case Ja.ManipulationType.XY:this._tooltip.info=new Na.TranslateGraphicTooltipInfo({tooltipOptions:a});this._updateTranslateTooltipDistance(this._tooltip.info,c,(d,e)=>ra.autoHorizontalDistanceByElevationModeBetweenPoints(d,e,b));break;case Ja.ManipulationType.XY_AXIS:this._tooltip.info=new Na.TranslateGraphicXYTooltipInfo({tooltipOptions:a});
this._updateTranslateTooltipDistance(this._tooltip.info,c,(d,e)=>{d=ra.autoHorizontalDistanceByElevationModeBetweenPoints(d,e,b);return D.scale(d,Ta.axisConstrainedDragSign(c))});break;case Ja.ManipulationType.Z:this._tooltip.info=new Na.TranslateGraphicZTooltipInfo({tooltipOptions:a}),this._updateTranslateTooltipDistance(this._tooltip.info,c,ya.verticalSignedDistanceBetweenPoints)}}};z._updateTranslateVertexTooltip=function(l,c,a){const b=this._tooltipOptions;if(b.enabled){var d=this._graphicState.isDraped?
"on-the-ground":"absolute-height";switch(c){case Ja.ManipulationType.XY:var e=new Na.TranslateVertexTooltipInfo({tooltipOptions:b});this._updateTranslateTooltipDistance(e,a,(f,h)=>ra.autoHorizontalDistanceByElevationModeBetweenPoints(f,h,d));this._updateTooltipAreaOrTotalLength(e);break;case Ja.ManipulationType.XY_AXIS:e=new Na.TranslateVertexXYTooltipInfo({tooltipOptions:b});this._updateTranslateTooltipDistance(e,a,(f,h)=>{f=ra.autoHorizontalDistanceByElevationModeBetweenPoints(f,h,d);return D.scale(f,
Ta.axisConstrainedDragSign(a))});this._updateTooltipAreaOrTotalLength(e);break;case Ja.ManipulationType.Z:e=new Na.TranslateVertexZTooltipInfo({tooltipOptions:b}),this._updateTranslateTooltipDistance(e,a,ya.verticalSignedDistanceBetweenPoints)}l=ya.elevationOfPoint(l.elevationAlignedLocation);I.isSome(l)&&(e.elevation={mode:"absolute-height",...l});this._tooltip.info=e}};z._updateTranslateTooltipDistance=function(l,c,a){if(I.isSome(c)&&"end"!==c.action){const {mapStart:b,mapEnd:d}=c;c=a(b,d);l.distance=
I.isSome(c)?c:D.zeroMeters}};z._updateTooltipAreaOrTotalLength=function(l){const {geometry:c}=this.graphic;if(!I.isNone(c)){var a=this._graphicState.isDraped?"on-the-ground":"absolute-height";l.area="polygon"===c.type?R.autoAreaByElevationMode(c,a):null;l.totalLength="polyline"===c.type?ra.autoLengthByElevationMode(c,a):null}};V._createClass(g,[{key:"inputGeometry",get:function(){return I.isSome(this._editGeometryOperations)?this._editGeometryOperations.data.geometry:null},set:function(l){this._recreateEditGeometryAndManipulators(l)}},
{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"manipulators",get:function(){return this.tool.manipulators}},{key:"view",get:function(){return this.tool.view}},{key:"graphic",get:function(){return this.tool.graphic}},{key:"enableZShape",get:function(){return this.tool.enableZShape}},{key:"enableZVertex",get:function(){return this.tool.enableZVertex}},{key:"enableMoveGraphic",get:function(){return this.tool.enableMoveGraphic}},{key:"enableMidpoints",get:function(){return this.tool.enableMidpoints}},
{key:"enableEdgeOffset",get:function(){return this.tool.enableEdgeOffset}},{key:"_labelOptions",get:function(){return this.tool.labelOptions}},{key:"_tooltipOptions",get:function(){return this.tool.tooltipOptions}},{key:"canRedo",get:function(){return I.isSome(this._editGeometryOperations)&&this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return I.isSome(this._editGeometryOperations)&&this._editGeometryOperations.canUndo}},{key:"test",get:function(){return{segmentLabels:this._segmentLabels,
tooltip:this._tooltip}}}]);return g}(B.EventedMixin(u.HandleOwner));w.__decorate([M.property()],r.ReshapeOperation.prototype,"_editGeometryOperations",void 0);w.__decorate([M.property()],r.ReshapeOperation.prototype,"_segmentLabels",void 0);w.__decorate([M.property({constructOnly:!0})],r.ReshapeOperation.prototype,"tool",void 0);w.__decorate([M.property()],r.ReshapeOperation.prototype,"_tooltip",void 0);w.__decorate([M.property()],r.ReshapeOperation.prototype,"inputGeometry",null);w.__decorate([M.property()],
r.ReshapeOperation.prototype,"outputGeometry",void 0);w.__decorate([M.property({readOnly:!0})],r.ReshapeOperation.prototype,"updating",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"manipulators",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"view",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"graphic",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"enableZShape",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"enableZVertex",
null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"enableMoveGraphic",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"enableMidpoints",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"enableEdgeOffset",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"_labelOptions",null);w.__decorate([M.property()],r.ReshapeOperation.prototype,"_tooltipOptions",null);r.ReshapeOperation=w.__decorate([C.subclass("esri.views.3d.interactive.editingTools.reshapeGraphic.ReshapeOperation")],
r.ReshapeOperation);const Da=ca.makeDehydratedPoint(0,0,void 0,ta.WGS84),Aa=y.create();var Ha;(function(Wa){Wa.Vertex=za.ManipulatorStateCustomFlags.Custom1;Wa.Edge=za.ManipulatorStateCustomFlags.Custom2})(Ha||(Ha={}));var Ka;(function(Wa){Wa[Wa.NONE=0]="NONE";Wa[Wa.MOVING=1]="MOVING";Wa[Wa.RESHAPING=2]="RESHAPING"})(Ka||(Ka={}));var Ca;(function(Wa){Wa[Wa.ALL=0]="ALL";Wa[Wa.SELECTED_OR_ALL=1]="SELECTED_OR_ALL"})(Ca||(Ca={}));Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/edgeOffsetUtils":function(){define("exports ../../../../../core/maybe ../../../../../core/screenUtils ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/plane ../../../../../layers/graphics/dehydratedFeatures ../../../../interactive/editGeometry/operations/OffsetEdgeVertex".split(" "),
function(r,V,w,N,A,P,B,u,x){function H(I,D,J){J=u.makeDehydratedPoint(D.x+J[0],D.y+J[1],D.z+J[2],D.spatialReference);const U=P.create(),M=P.create();return I.renderCoordsHelper.toRenderCoords(D,U)&&I.renderCoordsHelper.toRenderCoords(J,M)?A.direction(M,U,M):null}r.createEdgeOffsetIntersectionPlane=function(I,D,J){const U=P.create();if(!I.renderCoordsHelper.toRenderCoords(D,U))return null;var M=H(I,D,B.normal(J.plane));I=H(I,D,J.edgeDirection);if(V.isNone(M)||V.isNone(I))return null;M=A.cross(P.create(),
M,I);return B.fromPositionAndNormal(U,M,B.create())};r.createEdgeOffsetOperation=function(I,D,J){return new x.OffsetEdgeVertex(I,"on-the-ground"===J.mode?x.PlaneType.XY:x.PlaneType.XYZ,D,0)};r.edgeOffsetRotationMatrix=function(I,D,J){I=B.normal(I);D=A.direction(P.create(),D,J);J=A.cross(P.create(),D,I);I=A.cross(P.create(),D,J);return N.fromValues(D[0],D[1],D[2],0,J[0],J[1],J[2],0,I[0],I[1],I[2],0,0,0,0,1)};r.screenEdgeLengthSquared=function(I,D,J){I=J.projectToRenderScreen(I,w.createRenderScreenPointArray3());
D=J.projectToRenderScreen(D,w.createRenderScreenPointArray3());return V.isSome(I)&&V.isSome(D)?A.squaredLength(A.subtract(I,I,D)):0};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/ReshapeTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(r,V,w,N,A,P,B,u,x){r.ReshapeEdgeOffsetTooltipInfo=function(H){function I(D){D=H.call(this,D)||this;D.type="reshape-edge-offset";D.distance=N.zeroMeters;D.area=null;D.totalLength=null;return D}V._inheritsLoose(I,H);return I}(x.SketchTooltipInfo);w.__decorate([A.property()],r.ReshapeEdgeOffsetTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.ReshapeEdgeOffsetTooltipInfo.prototype,"distance",void 0);w.__decorate([A.property()],r.ReshapeEdgeOffsetTooltipInfo.prototype,"area",
void 0);w.__decorate([A.property()],r.ReshapeEdgeOffsetTooltipInfo.prototype,"totalLength",void 0);r.ReshapeEdgeOffsetTooltipInfo=w.__decorate([u.subclass("esri.views.interactive.tooltip.ReshapeEdgeOffsetTooltipInfo")],r.ReshapeEdgeOffsetTooltipInfo);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/GraphicTransformTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Point ../../../../../support/elevationInfoUtils ../../../../ViewingMode ../../Manipulator3D ../../manipulatorUtils ../../SnappingVisualizer3D ../manipulatorUtils ../visualElementUtils ../manipulations/config ../manipulations/MoveManipulation ../manipulations/moveUtils ./GraphicScaleRotateTransform ./ScaleRotateMeshAdapter ./ScaleRotateObjectSymbol3DAdapter ./undoRecords ../../../layers/graphics/GraphicState ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/snapping/SnappingContext ../../../../interactive/snapping/SnappingDragPipelineStep ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja,oa,qa,ua,va,Ja){r.GraphicTransformTool=function(Ta){function Ma(Oa){Oa=Ta.call(this,Oa)||this;Oa.enableZ=!0;Oa.enableRotation=!0;Oa.enableScaling=!0;Oa.tooltipOptions=new ea;Oa.type="transform-3d";Oa._scaleRotate=null;Oa._tooltip=null;return Oa}V._inheritsLoose(Ma,Ta);var Ua=Ma.prototype;Ua.initialize=function(){const {graphic:Oa,view:Za}=this;this.graphicState=new O.GraphicState({graphic:Oa});this.addHandles(x.watch(()=>
this.tooltipOptions.enabled,za=>{this._tooltip=za?new qa.Tooltip({view:Za}):B.destroyMaybe(this._tooltip)},x.syncAndInitial));this._moveManipulation=new T.MoveManipulation({tool:this,view:Za,snapToScene:this.snapToScene,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZ&&y.canMoveZ(Oa),radius:T.MoveManipulation.radiusForSymbol(Oa.symbol)});this._moveManipulation.forEachManipulator(za=>this.handles.add(za.events.on("immediate-click",Ia=>{this.emit("immediate-click",{...Ia,graphic:Oa});Ia.stopPropagation()})));
const Ra=za=>Ia=>{this.handles.add(Ia.events.on("focus-changed",({action:pa})=>{const Ba=this._tooltip;B.isNone(Ba)||("focus"===pa?this._updateMoveTooltip(za):Ba.clear())}))};this._moveManipulation.xyManipulation.forEachManipulator(Ra(T.ManipulationType.XY));this._moveManipulation.xyAxisManipulation.forEachManipulator(Ra(T.ManipulationType.XY_AXIS));this._moveManipulation.zManipulation.forEachManipulator(Ra(T.ManipulationType.Z));const Ea=M.getGraphicEffectiveElevationInfo(Oa);this._moveManipulation.elevationInfo=
Ea;const xa=Oa.geometry;this._moveManipulation.createGraphicDragPipeline((za,Ia,pa,Ba,Pa)=>{if(B.isSome(xa)&&za===T.ManipulationType.XY){const {snappingStep:Va,cancelSnapping:La}=oa.createSnapDragEventPipelineStep({snappingContext:new ja.SnappingContext({elevationInfo:Ea,pointer:Pa,editGeometryOperations:S.EditGeometryOperations.fromGeometry(new U({spatialReference:xa.spatialReference}),Za.state.viewingMode),visualizer:new L.SnappingVisualizer3D,excludeFeature:Oa}),snappingManager:this.snappingManager,
updatingHandles:this.updatingHandles,useZ:!1});Ba=Ba.next(La);pa=pa.next(K.sceneSnappingAtProjectedLocation(this.view,Ea)).next(...Va)}pa=pa.next(Va=>{this._updateMoveTooltip(za,Va);return Va});return{steps:pa,cancel:Ba}},this.graphicState,za=>{const {action:Ia,graphic:pa,dxScreen:Ba,dyScreen:Pa}=za;za={graphic:pa,dxScreen:Ba,dyScreen:Pa};switch(Ia){case "start":this.emit("graphic-translate-start",za);this.emit("record-undo",{record:this._createGeometryUndoRecord()});break;case "update":this.emit("graphic-translate",
za);break;case "end":this.emit("graphic-translate-stop",za)}});this._moveManipulation.angle=B.isSome(this._scaleRotate)?this._scaleRotate.angle:0;this._scaleRotateAdapter=this._createScaleRotateAdapter();this.handles.add(x.watch(()=>this._scaleRotateAdapter.angle,()=>this._updateMoveAngle()));if(this.enableScaling||this.enableRotation)this._scaleRotate=new ca.GraphicScaleRotateTransform({tool:this,mode:this.enableScaling&&this.enableRotation?null:this.enableScaling?"scale":"rotate",adapter:this._scaleRotateAdapter,
tooltipOptions:this.tooltipOptions}),this.handles.add(this._scaleRotate.events.on("scale-changed",()=>this._onScaleChanged()));this.handles.add([G.createVisualElements({view:this.view,graphic:this.graphic,forEachManipulator:za=>this._forEachManipulator(za),onManipulatorsChanged:()=>P.makeHandle()}),this.graphicState.on("changed",()=>this._onGeometryChanged()),this._hideManipulatorsForGraphicState(),x.watch(()=>Za.scale,()=>this._updateMoveAngle())]);this.handles.add(this.view.trackGraphicState(this.graphicState));
this._onGeometryChanged();this._updateMoveAngle();this._forEachManipulator(za=>{za instanceof C.Manipulator3D&&this.handles.add(za.events.on("grab-changed",()=>this._updateManipulatorsInteractive()))});this.finishToolCreation()};Ua.destroy=function(){this._tooltip=B.destroyMaybe(this._tooltip);this._moveManipulation.destroy();this._scaleRotate=B.destroyMaybe(this._scaleRotate);this._scaleRotateAdapter=B.destroyMaybe(this._scaleRotateAdapter);this._set("view",null);this._set("graphic",null)};Ua._updateManipulatorsInteractive=
function(){B.isNone(this._scaleRotate)||(this._scaleRotate.interactive=!this._moveManipulation.grabbing,this._moveManipulation.interactive=!this._scaleRotate.grabbing)};Ua._createScaleRotateAdapter=function(){return B.isSome(this.graphic.geometry)&&"mesh"===this.graphic.geometry.type?new ha.ScaleRotateMeshAdapter({graphic:this.graphic,geometry:this.graphic.geometry,viewingMode:this.view.state.viewingMode}):new da.ScaleRotateObjectSymbol3DAdapter({graphic:this.graphic,sizeFilter:Oa=>this._enforceNonZeroSize(Oa),
findLayerView:()=>this.view.allLayerViews.find(Oa=>Oa.layer===this.graphic.layer),sizeAxis:B.isSome(this.tooltipOptions.visualVariables)&&B.isSome(this.tooltipOptions.visualVariables.size)?this.tooltipOptions.visualVariables.size.axis:null})};Ua._forEachManipulator=function(Oa){this._moveManipulation.forEachManipulator(Oa);B.isSome(this._scaleRotate)&&this._scaleRotate.forEachManipulator(Oa)};Ua._hideManipulatorsForGraphicState=function(){return x.watch(()=>this.graphicState.displaying,Oa=>{this._forEachManipulator(Za=>
Za.available=Oa);this._moveManipulation.zManipulation.available=Oa&&this.enableZ&&y.canMoveZ(this.graphic)})};Ua._createGeometryUndoRecord=function(){return X.createGraphicGeometryUndoRecord(this.graphic)};Ua.reset=function(){};Ua.onHide=function(){B.isSome(this._scaleRotate)&&this._scaleRotate.cancelActiveAnimation()};Ua._onScaleChanged=function(){if(!B.isNone(this._scaleRotate)){var Oa=this._scaleRotate.getScale();this._moveManipulation.displayScale=Oa}};Ua._updateMoveAngle=function(){this._moveManipulation.angle=
this.view.state.viewingMode===Q.ViewingMode.Local||this.view.scale<Z.ALIGN_ARROWS_SCALE_THRESHOLD?this._scaleRotateAdapter.angle:0};Ua._onGeometryChanged=function(){E.placeAtGraphic(this.view,this,this.graphic)};Ua._enforceNonZeroSize=function(Oa){return Oa||this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation)};Ua._updateMoveTooltip=function(Oa,Za){const {tooltipOptions:Ra,_tooltip:Ea}=this;if(!B.isNone(Ea)){Ea.clear();var xa=this.graphicState.isDraped?"on-the-ground":
"absolute-height";switch(Oa){case T.ManipulationType.XY:Ea.info=new ua.TranslateGraphicTooltipInfo({tooltipOptions:Ra});this._updateMoveTooltipDistance(Ea.info,Za,(za,Ia)=>va.autoHorizontalDistanceByElevationModeBetweenPoints(za,Ia,xa));break;case T.ManipulationType.XY_AXIS:Ea.info=new ua.TranslateGraphicXYTooltipInfo({tooltipOptions:Ra});this._updateMoveTooltipDistance(Ea.info,Za,(za,Ia)=>{za=va.autoHorizontalDistanceByElevationModeBetweenPoints(za,Ia,xa);return u.scale(za,ia.axisConstrainedDragSign(Za))});
break;case T.ManipulationType.Z:Ea.info=new ua.TranslateGraphicZTooltipInfo({tooltipOptions:Ra}),this._updateMoveTooltipDistance(Ea.info,Za,Ja.verticalSignedDistanceBetweenPoints)}}};Ua._updateMoveTooltipDistance=function(Oa,Za,Ra){if(B.isSome(Za)&&"end"!==Za.action){const {mapStart:Ea,mapEnd:xa}=Za;Za=Ra(Ea,xa);Oa.distance=B.isSome(Za)?Za:u.zeroMeters}};V._createClass(Ma,[{key:"snapToScene",set:function(Oa){this._moveManipulation&&(this._moveManipulation.snapToScene=Oa);this._set("snapToScene",Oa)}},
{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"location",set:function(Oa){this._moveManipulation.location=Oa;B.isSome(this._scaleRotate)&&(this._scaleRotate.location=Oa)}},{key:"elevationAlignedLocation",set:function(Oa){this._moveManipulation.elevationAlignedLocation=Oa;B.isSome(this._scaleRotate)&&(this._scaleRotate.elevationAlignedLocation=Oa)}},{key:"test",get:function(){return{discManipulator:this._moveManipulation.xyManipulation.test.discManipulator,zManipulator:this._moveManipulation.zManipulation.test.manipulator,
ringManipulator:B.isSome(this._scaleRotate)?this._scaleRotate.test.ringManipulator:null,arrowManipulators:this._moveManipulation.xyAxisManipulation.test.arrowManipulators,setRingIndicatorDelayMs:Oa=>B.isSome(this._scaleRotate)?this._scaleRotate.test.setRingIndicatorDelayMs(Oa):null,scaleRotateAdapter:this._scaleRotateAdapter,scaleRotateTransform:this._scaleRotate,tooltip:this._tooltip}}}]);return Ma}(A.HandleOwnerMixin(N.EventedMixin(Y.InteractiveToolBase)));w.__decorate([H.property({constructOnly:!0,
nonNullable:!0})],r.GraphicTransformTool.prototype,"view",void 0);w.__decorate([H.property({constructOnly:!0,nonNullable:!0})],r.GraphicTransformTool.prototype,"graphic",void 0);w.__decorate([H.property({constructOnly:!0,nonNullable:!0})],r.GraphicTransformTool.prototype,"enableZ",void 0);w.__decorate([H.property()],r.GraphicTransformTool.prototype,"enableRotation",void 0);w.__decorate([H.property()],r.GraphicTransformTool.prototype,"enableScaling",void 0);w.__decorate([H.property({constructOnly:!0,
type:ea})],r.GraphicTransformTool.prototype,"tooltipOptions",void 0);w.__decorate([H.property()],r.GraphicTransformTool.prototype,"graphicState",void 0);w.__decorate([H.property({value:!1})],r.GraphicTransformTool.prototype,"snapToScene",null);w.__decorate([H.property({constructOnly:!0})],r.GraphicTransformTool.prototype,"snappingManager",void 0);w.__decorate([H.property({readOnly:!0})],r.GraphicTransformTool.prototype,"type",void 0);w.__decorate([H.property({readOnly:!0})],r.GraphicTransformTool.prototype,
"updating",null);r.GraphicTransformTool=w.__decorate([J.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.GraphicTransformTool")],r.GraphicTransformTool);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/GraphicScaleRotateTransform":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Cyclical ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/scheduling ../../../../../core/screenUtils ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../chunks/vec4f64 ../../../../../geometry/support/plane ../../../../../geometry/support/ray ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../Manipulator3D ../../manipulatorUtils ../../RenderObject ../dragEventPipeline3D ../ManipulatorType ../manipulations/config ../../../webgl-engine/lib/basicInterfaces ../../../webgl-engine/lib/GeometryUtil ../../../webgl-engine/lib/Material ../../../webgl-engine/materials/ColorMaterial ../../../../interactive/dragEventPipeline ../../../../interactive/interfaces ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TransformTooltipInfos".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja){function oa(Ra,Ea){var xa=U.subtract(L.sv3d.get(),Ea.renderStart,Ra.origin);Ra=U.subtract(L.sv3d.get(),Ea.renderEnd,Ra.origin);xa=U.length(xa);Ra=U.length(Ra);return 0===xa?0:Ra/xa}function qa(Ra,Ea,xa,za){const {renderStart:Ia,renderEnd:pa}=Ra;var Ba=ua(Ia,za,L.sv3d.get());Ra=ua(pa,za,L.sv3d.get());if(U.squaredDistance(Ba,Ra)<ha.DRAG_THRESHOLD_PX*ha.DRAG_THRESHOLD_PX)return null;const Pa=U.subtract(L.sv3d.get(),Ia,
xa);Ea=U.cross(L.sv3d.get(),Pa,C.normal(Ea));Ea=U.add(L.sv3d.get(),Ia,Ea);xa=ua(xa,za,L.sv3d.get());za=ua(Ea,za,L.sv3d.get());Ea=U.subtract(L.sv3d.get(),za,Ba);za=U.subtract(L.sv3d.get(),Ba,xa);Ba=E.wrap(Ba,Ea);za=E.wrap(xa,za);return E.distance2(Ba,Ra)<E.distance2(za,Ra)?"rotate":"scale"}function ua(Ra,Ea,xa){Ea.projectToScreen(Ra,Za);return U.set(xa,Za[0],Za[1],0)}function va(Ra,Ea){let xa=null,za=1;const Ia=()=>za;return{start:()=>{za=Ra.getScale();xa=Ra.getScale;Ra.getScale=Ia;Ea()},update:pa=>
{za+=((za+1)/2-za)*Math.min(pa*ha.RING_RESET_ANIMATION_SPEED_FACTOR,1);Ea();return.01>Math.abs(za-1)?Oa.STOP:Oa.CONTINUE},destroy:()=>{xa&&(Ra.getScale=xa);Ea()}}}function Ja(Ra,Ea,xa){let za=0,Ia=null;const pa=()=>!1;return{start:()=>{Ia=Ra.getFocused;Ra.getFocused=pa;za=0;Ea()},update:Ba=>{za+=Ba;return!Ia?.()||za>=xa.delayMs?Oa.STOP:Oa.CONTINUE},destroy:()=>{Ia&&(Ra.getFocused=Ia);Ea()}}}function Ta(Ra){switch(Ra){case "integer":case "long":return 0;default:return null}}var Ma;(function(Ra){Ra.ScaleIn=
S.ManipulatorStateCustomFlags.Custom2;Ra.ScaleOut=S.ManipulatorStateCustomFlags.Custom3;Ra.RotateLeft=S.ManipulatorStateCustomFlags.Custom4;Ra.RotateRight=S.ManipulatorStateCustomFlags.Custom5;Ra.Unlocked=S.ManipulatorStateCustomFlags.Custom7;Ra.DelayedFocused=S.ManipulatorStateCustomFlags.Custom8;Ra.TouchInput=S.ManipulatorStateCustomFlags.Custom12})(Ma||(Ma={}));let Ua=function(){function Ra({adapter:xa,tooltipOptions:za,mode:Ia,tool:pa}){this._mode=null;this._handles=new A;this._activeAnimation=
this._scaleRotateDragData=null;this._ringIndicatorDelayMs=ha.RING_INDICATOR_DELAY_MS;this.events=new N;this.getFocused=()=>this._ringManipulator.focused;this.getScale=()=>B.isSome(this._scaleRotateDragData)&&"scale"===this._scaleRotateDragData.mode?this._adapter.scale:1;this.tool=pa;this._mode=Ia;this._adapter=xa;this._tooltipOptions=za;this._tooltip=new ea.Tooltip({view:pa.view});this._createManipulator();this._updateDragState();this._updateManipulatorTransform();this._handles.add(x.when(()=>!this._tooltipOptions.enabled,
()=>this._tooltip.clear(),x.initial))}var Ea=Ra.prototype;Ea.destroy=function(){B.isSome(this._activeAnimation)&&(this._activeAnimation.frameTask.remove(),this._activeAnimation=null);this._handles=B.destroyMaybe(this._handles);this.tool.manipulators.remove(this._ringManipulator);this._ringManipulator=null;this._tooltip=B.destroyMaybe(this._tooltip)};Ea.startAnimation=function(xa){this.cancelActiveAnimation();xa.start();const za=H.addFrameTask({update:({deltaTime:Ia})=>{xa.update(Ia)&&this.cancelActiveAnimation()}});
this._activeAnimation={...xa,frameTask:za}};Ea.cancelActiveAnimation=function(){B.isSome(this._activeAnimation)&&(this._activeAnimation.frameTask.remove(),this._activeAnimation=B.destroyMaybe(this._activeAnimation))};Ea.forEachManipulator=function(xa){xa(this._ringManipulator,ca.ManipulatorType.SCALE_ROTATE)};Ea._createManipulator=function(){const xa=this._createRingManipulator();this._ringManipulator=xa;this.tool.manipulators.add(xa);const za=this.tool.graphicState.graphic,Ia=Y.createManipulatorDragEventPipeline(xa,
(pa,Ba,Pa)=>{this._scaleRotateDragData=null;const Va=this._adapter.startInteraction(),La={mode:"none",origin:M.clone(pa.renderLocation),initialAngle:this._adapter.angle,angle:0,angleDir:0,scaleDir:0};this._scaleRotateDragData=La;this._updateDragState();const Na=L.sv3d.get();this.tool.view.renderCoordsHelper.worldUpAtPosition(pa.renderLocation,Na);Ba.next(ia.screenToRenderPlane(this.tool.view,C.fromPositionAndNormal(pa.renderLocation,Na,C.create()))).next(R=>{var ra=C.normal(R.plane);ra=Z.calculateInputRotationTransform(R.renderStart,
R.renderEnd,La.origin,ra);var ya=w.cyclicalPI.shortestSignedDiff(La.angle,ra);La.angleDir=P.clamp(La.angleDir+ya,-ha.ROTATE_INDICATOR_DIRECTION_BUFFER,ha.ROTATE_INDICATOR_DIRECTION_BUFFER);La.angle=ra;ya=oa(La,R);La.scaleDir=P.clamp(La.scaleDir+(ya-this._adapter.scale),-ha.SCALE_INDICATOR_DIRECTION_BUFFER,ha.SCALE_INDICATOR_DIRECTION_BUFFER);this._onScaleChanged();if("none"===La.mode){const na=this._mode||qa(R,R.plane,La.origin,this.tool.view.state.camera);if(B.isSome(na)){switch(na){case "rotate":this.tool.emit("graphic-rotate-start",
{graphic:za,angle:0});this.tool.emit("record-undo",{record:this._adapter.createUndoRecord()});break;case "scale":this.tool.emit("graphic-scale-start",{graphic:za,xScale:1,yScale:1}),this.tool.emit("record-undo",{record:this._adapter.createUndoRecord()})}La.mode=na}}switch(La.mode){case "rotate":Va.state.angle=La.initialAngle+ra;break;case "scale":Va.state.scale=ya,this._onScaleChanged()}this._updateDragState();this._updateManipulatorTransform();switch(R.action){case "start":case "update":switch(La.mode){case "rotate":this.tool.emit("graphic-rotate",
{graphic:za,angle:P.rad2deg(La.angle)});break;case "scale":this.tool.emit("graphic-scale",{graphic:za,xScale:ya,yScale:ya})}break;case "end":switch(La.mode){case "rotate":this.tool.emit("graphic-rotate-stop",{graphic:za,angle:P.rad2deg(La.angle)});break;case "scale":this.tool.emit("graphic-scale-stop",{graphic:za,xScale:ya,yScale:ya})}}"end"===R.action&&(this.startAnimation(va(this,()=>this._onScaleChanged())),this._scaleRotateDragData=null,this._updateDragState(),Va.done());return R}).next(this._updateTooltipPipelineStep(La));
Pa.next(()=>{Va.cancel();if(B.isSome(this._scaleRotateDragData)){switch(this._scaleRotateDragData.mode){case "rotate":this.tool.emit("graphic-rotate-stop",{graphic:za,angle:0});break;case "scale":this.tool.emit("graphic-scale-stop",{graphic:za,xScale:1,yScale:1})}this.startAnimation(va(this,()=>this._onScaleChanged()));this._scaleRotateDragData=null;this._updateDragState()}this._updateFocusTooltip()})});this._handles.add([Ia,xa.events.on("focus-changed",pa=>{"focus"===pa.action?this.startAnimation(Ja(this,
()=>this._updateDelayedFocusedState(),{delayMs:this._ringIndicatorDelayMs})):this._updateDelayedFocusedState()}),xa.events.on("immediate-click",pa=>{pa.stopPropagation()}),x.watch(()=>this.tool.graphicState?.displaying,pa=>this._ringManipulator.available=pa,x.initial)])};Ea._updateTooltipPipelineStep=function(xa){return za=>{const Ia=this._tooltipOptions;if(!Ia.enabled)return za;if("end"===za.action)return this._updateFocusTooltip(),za;const pa=this._tooltip;var Ba=this._tooltipOptions.visualVariables,
Pa=B.isSome(Ba)?Ba.size:null;Ba=B.isSome(Ba)?Ba.rotation:null;switch(xa.mode){case "scale":pa.info=new ja.TransformScaleTooltipInfo({tooltipOptions:Ia,scale:{value:this._adapter.scale},size:u.createLength(B.unwrapOr(this._adapter.size,-1),"meters"),sizeUnit:B.isSome(Pa)?Pa.unit:null,sizePrecision:B.isSome(Pa)?Ta(Pa.valueType):null});break;case "rotate":Pa=B.isSome(Ba)?Ta(Ba.valueType):null,Ba=B.isSome(Ba)?Ba.rotationType:"geographic",pa.info=new ja.TransformRotateTooltipInfo({tooltipOptions:Ia,rotation:u.createAngle(B.unwrapOr(-this._adapter.relativeAngle,
0),"radians","geographic"),rotationPrecision:Pa,orientation:u.createAngle(-this._adapter.angle,"radians","geographic"),orientationPrecision:Pa,rotationType:Ba})}return za}};Ea._updateFocusTooltip=function(){if(this._tooltipOptions.enabled)if(this.getFocused()){var xa=this._tooltipOptions.visualVariables;const za=B.isSome(xa)?xa.rotation:null;xa=B.isSome(xa)?xa.size:null;this._tooltip.info=new ja.TransformAbsoluteTooltipInfo({tooltipOptions:this._tooltipOptions,orientation:u.createAngle(-this._adapter.angle,
"radians","geographic"),orientationEnabled:null==this._mode||"rotate"===this._mode,orientationPrecision:B.isSome(za)?Ta(za.valueType):null,rotationType:B.isSome(za)?za.rotationType:"geographic",size:u.createLength(B.unwrapOr(this._adapter.size,-1),"meters"),sizeUnit:B.isSome(xa)?xa.unit:null,sizeEnabled:null==this._mode||"scale"===this._mode,sizePrecision:B.isSome(xa)?Ta(xa.valueType):null})}else this._tooltip.clear()};Ea._onScaleChanged=function(){this.events.emit("scale-changed");this._updateManipulatorTransform()};
Ea._updateDelayedFocusedState=function(){this._ringManipulator.updateStateEnabled(Ma.DelayedFocused,this.getFocused());this._updateFocusTooltip()};Ea._updateDragState=function(){this._ringManipulator.updateStateEnabled(Ma.Unlocked,!(B.isSome(this._scaleRotateDragData)&&"none"!==this._scaleRotateDragData.mode));if(B.isSome(this._scaleRotateDragData))switch(this._scaleRotateDragData.mode){case "rotate":this._ringManipulator.updateStateEnabled(Ma.ScaleIn|Ma.ScaleOut,!1);this._ringManipulator.updateStateEnabled(Ma.RotateLeft,
0>this._scaleRotateDragData.angleDir);this._ringManipulator.updateStateEnabled(Ma.RotateRight,0<=this._scaleRotateDragData.angleDir);break;case "scale":this._ringManipulator.updateStateEnabled(Ma.RotateLeft|Ma.RotateRight,!1),this._ringManipulator.updateStateEnabled(Ma.ScaleIn,0>this._scaleRotateDragData.scaleDir),this._ringManipulator.updateStateEnabled(Ma.ScaleOut,0<=this._scaleRotateDragData.scaleDir)}else this._ringManipulator.updateStateEnabled(Ma.ScaleIn|Ma.ScaleOut|Ma.RotateLeft|Ma.RotateRight,
!1)};Ea._updateManipulatorTransform=function(){const xa=D.fromRotation(L.sm4d.get(),this._adapter.angle,M.fromValues(0,0,1));if(!B.isNone(xa)){var za=this.getScale();za=D.fromScaling(L.sm4d.get(),U.set(L.sv3d.get(),za,za,za));this._ringManipulator.modelTransform=D.multiply(L.sm4d.get(),za,xa)}};Ea._createRingManipulator=function(){var xa=(Ha,Ka,Ca)=>{const Wa=[],g=Math.ceil(ha.GEOMETRY_SEGMENTS*(Ka-Ha)/(2*Math.PI));for(let z=0;z<g+1;z++){const l=Ha+z*(Ka-Ha)/g;Wa.push(M.fromValues(Ca*Math.cos(l),
Ca*Math.sin(l),0))}return Wa};const za=this._createMaterial(1);var Ia=(Ha,Ka,Ca=za)=>X.createPathExtrusionGeometry(Ca,[[-Ka/2,0],[Ka/2,0],[Ka/2,ha.RING_HEIGHT/2],[-Ka/2,ha.RING_HEIGHT/2]],Ha,[],[],!1),pa=xa(0,2*Math.PI,ha.RING_RADIUS),Ba=Ia(pa,ha.RING_THICKNESS),Pa=[],Va=[];const La=[];for(var Na=0;2>Na;Na++){var R=Na*Math.PI-Math.PI/4,ra=Math.PI/2-ha.ROTATE_INDICATOR_ARC_LENGTH,ya=R+ra;R=R+Math.PI/2-ra;ra=xa(ya,R,ha.INNER_INDICATOR_RADIUS);var na=Ia(ra,ha.INDICATOR_THICKNESS);La.push(ra);La.push(xa(ya,
R,ha.OUTER_INDICATOR_RADIUS-ha.RING_THICKNESS/2));Pa.push(na);Va.push(na.instantiate());for(na=0;2>na;na++){var ta=0===na,Da=J.create();if(ta){D.scale(Da,Da,[1,-1,1]);D.rotate(Da,Da,-ya,[0,0,1]);var Aa=Math.round(ha.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE*(ra.length-1));Da[12]=ra[Aa][0];Da[13]=ra[Aa][1];Da[14]=ra[Aa][2]}else D.rotate(Da,Da,R,[0,0,1]),Aa=Math.round((1-ha.ROTATE_INDICATOR_ARROW_PLACEMENT_PERCENTAGE)*(ra.length-1)),Da[12]=ra[Aa][0],Da[13]=ra[Aa][1],Da[14]=ra[Aa][2];Aa=X.createExtrudedTriangle(za,
ha.ROTATE_INDICATOR_ARROW_TIP_LENGTH,0,ha.ROTATE_INDICATOR_ARROW_TIP_RADIUS,ha.RING_HEIGHT);X.transformInPlace(Aa,Da);(ta?Pa:Va).push(Aa)}}Na=[];for(ya=0;2>ya;ya++)R=ya*Math.PI-Math.PI/4,ra=Math.PI/2-ha.SCALE_INDICATOR_ARC_LENGTH,R=xa(R+ra,R+Math.PI/2-ra,ha.OUTER_INDICATOR_RADIUS),Na.push(Ia(R,ha.INDICATOR_THICKNESS));ta=this._createMaterial(.66);ya=this._createMaterial(.5);ra=this._createMaterial(.33);R=xa(0,2*Math.PI,ha.RING_RADIUS+ha.SCALE_INDICATOR_OFFSET1);na=xa(0,2*Math.PI,ha.RING_RADIUS+ha.SCALE_INDICATOR_OFFSET2);
R=Ia(R,ha.INDICATOR_THICKNESS,ta);na=Ia(na,ha.INDICATOR_THICKNESS,ra);Da=xa(0,2*Math.PI,ha.RING_RADIUS-ha.SCALE_INDICATOR_OFFSET1);xa=xa(0,2*Math.PI,ha.RING_RADIUS-ha.SCALE_INDICATOR_OFFSET2);ta=Ia(Da,ha.INDICATOR_THICKNESS,ta);Ia=Ia(xa,ha.INDICATOR_THICKNESS,ra);Ba=[new T.RenderObject(Ba,Ma.DelayedFocused),new T.RenderObject(Ba.instantiate({material:ya}),S.ManipulatorStateFlags.None)];this._mode&&"scale"!==this._mode||(Ba=Ba.concat([...Na.map(Ha=>new T.RenderObject(Ha,Ma.DelayedFocused|Ma.Unlocked)),
new T.RenderObject(R,Ma.DelayedFocused|Ma.ScaleIn),new T.RenderObject(na,Ma.DelayedFocused|Ma.ScaleIn),new T.RenderObject(ta,Ma.DelayedFocused|Ma.ScaleOut),new T.RenderObject(Ia,Ma.DelayedFocused|Ma.ScaleOut)]));this._mode&&"rotate"!==this._mode||(Ba=Ba.concat([...Va.map(Ha=>new T.RenderObject(Ha.instantiate(),Ma.DelayedFocused|Ma.Unlocked)),...Pa.map(Ha=>new T.RenderObject(Ha,Ma.DelayedFocused|Ma.RotateLeft)),...Va.map(Ha=>new T.RenderObject(Ha,Ma.DelayedFocused|Ma.RotateRight))]));pa=[pa,...La];
return new G.Manipulator3D({view:this.tool.view,renderObjects:Ba,autoScaleRenderObjects:!1,worldOriented:!0,radius:ha.RING_THICKNESS,focusMultiplier:1,touchMultiplier:1.5,elevationInfo:y.getGraphicEffectiveElevationInfo(this.tool.graphicState.graphic),collisionType:{type:"ribbon",paths:pa,direction:M.fromValues(0,0,1)}})};Ea._createMaterial=function(xa){const za=Q.fromArray([...ha.HANDLE_COLOR,xa]);return new K.ColorMaterial({color:za,transparent:1!==xa,cullFace:da.CullFaceOptions.Back,renderOccluded:O.RenderOccludedFlag.Transparent})};
V._createClass(Ra,[{key:"angle",get:function(){return this._adapter.angle}},{key:"scale",get:function(){return this._adapter.scale}},{key:"location",set:function(xa){this._ringManipulator.location=xa}},{key:"elevationAlignedLocation",set:function(xa){this._ringManipulator.elevationAlignedLocation=xa}},{key:"grabbing",get:function(){return this._ringManipulator.grabbing}},{key:"interactive",set:function(xa){this._ringManipulator.interactive=xa}},{key:"test",get:function(){return{ringManipulator:this._ringManipulator,
setRingIndicatorDelayMs:xa=>this._ringIndicatorDelayMs=xa,tooltip:this._tooltip}}}]);return Ra}();var Oa;(function(Ra){Ra[Ra.CONTINUE=0]="CONTINUE";Ra[Ra.STOP=1]="STOP"})(Oa||(Oa={}));const Za=I.createScreenPointArray();r.GraphicScaleRotateTransform=Ua;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/TransformTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),
function(r,V,w,N,A,P,B,u){r.TransformRotateTooltipInfo=function(x){function H(I){I=x.call(this,I)||this;I.type="transform-rotate";I.rotationType="geographic";return I}V._inheritsLoose(H,x);return H}(u.SketchTooltipInfo);w.__decorate([N.property()],r.TransformRotateTooltipInfo.prototype,"type",void 0);w.__decorate([N.property()],r.TransformRotateTooltipInfo.prototype,"rotation",void 0);w.__decorate([N.property()],r.TransformRotateTooltipInfo.prototype,"rotationPrecision",void 0);w.__decorate([N.property()],
r.TransformRotateTooltipInfo.prototype,"orientation",void 0);w.__decorate([N.property()],r.TransformRotateTooltipInfo.prototype,"orientationPrecision",void 0);w.__decorate([N.property()],r.TransformRotateTooltipInfo.prototype,"rotationType",void 0);r.TransformRotateTooltipInfo=w.__decorate([B.subclass("esri.views.interactive.tooltip.TransformRotateTooltipInfo")],r.TransformRotateTooltipInfo);r.TransformScaleTooltipInfo=function(x){function H(I){I=x.call(this,I)||this;I.type="transform-scale";I.sizeUnit=
null;I.sizePrecision=null;return I}V._inheritsLoose(H,x);return H}(u.SketchTooltipInfo);w.__decorate([N.property()],r.TransformScaleTooltipInfo.prototype,"type",void 0);w.__decorate([N.property()],r.TransformScaleTooltipInfo.prototype,"scale",void 0);w.__decorate([N.property()],r.TransformScaleTooltipInfo.prototype,"size",void 0);w.__decorate([N.property()],r.TransformScaleTooltipInfo.prototype,"sizeUnit",void 0);w.__decorate([N.property()],r.TransformScaleTooltipInfo.prototype,"sizePrecision",void 0);
r.TransformScaleTooltipInfo=w.__decorate([B.subclass("esri.views.interactive.tooltip.TransformScaleTooltipInfo")],r.TransformScaleTooltipInfo);r.TransformAbsoluteTooltipInfo=function(x){function H(I){I=x.call(this,I)||this;I.type="transform-absolute";I.orientationEnabled=!0;I.orientationPrecision=null;I.rotationType="geographic";I.sizeUnit=null;I.sizeEnabled=!0;I.sizePrecision=null;return I}V._inheritsLoose(H,x);return H}(u.SketchTooltipInfo);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,
"type",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"orientation",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"orientationEnabled",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"orientationPrecision",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"rotationType",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"size",void 0);w.__decorate([N.property()],
r.TransformAbsoluteTooltipInfo.prototype,"sizeUnit",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"sizeEnabled",void 0);w.__decorate([N.property()],r.TransformAbsoluteTooltipInfo.prototype,"sizePrecision",void 0);r.TransformAbsoluteTooltipInfo=w.__decorate([B.subclass("esri.views.interactive.tooltip.TransformAbsoluteTooltipInfo")],r.TransformAbsoluteTooltipInfo);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ScaleRotateMeshAdapter":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/axisAngleDegrees ../../../../ViewingMode ./undoRecords".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M){r.ScaleRotateMeshAdapter=function(C){function E(y){y=C.call(this,y)||this;y._interactionState=null;return y}V._inheritsLoose(E,C);var L=E.prototype;L.initialize=function(){this.addHandles([u.when(()=>B.isSome(this._interactionState)&&this._interactionState.angle!==this._interactionState.previousAngle?{interactionState:this._interactionState,angle:this._interactionState.state.angle}:null,({interactionState:y})=>{this._updateMeshRotation(y)},u.sync),u.when(()=>
B.isSome(this._interactionState)&&this._interactionState.scale!==this._interactionState.previousScale?{interactionState:this._interactionState,scale:this._interactionState.state.scale}:null,({interactionState:y})=>{this._updateMeshSize(y)},u.sync)])};L.startInteraction=function(){const y=new Q({angle:this.angle});this._interactionState=y;const G=()=>{this._interactionState=null};return{state:y,done:G,cancel:()=>{y.cancel();G()}}};L.createUndoRecord=function(){return M.createGraphicGeometryUndoRecord(this.graphic)};
L._updateMeshRotation=function(y){const G=this.geometry.anchor,Z=this.viewingMode===U.ViewingMode.Global,{angle:T,previousAngle:ia}=y;this.geometry.rotate(0,0,P.rad2deg(T-ia),{origin:G,geographic:Z});y.previousAngle=T;B.isSome(this.geometry.transform)&&this.graphic.notifyMeshTransformChanged();this.graphic.notifyGeometryChanged()};L._updateMeshSize=function(y){const G=this.geometry.anchor,Z=this.viewingMode===U.ViewingMode.Global,{scale:T,previousScale:ia}=y;this.geometry.scale(T/ia,{origin:G,geographic:Z});
y.previousScale=T;B.isSome(this.geometry.transform)&&this.graphic.notifyMeshTransformChanged();this.graphic.notifyGeometryChanged()};V._createClass(E,[{key:"angle",get:function(){const y=this.geometry.transform;if(B.isNone(y))return 0;const G=J.axis(y.rotation)[2];return.999999<Math.abs(G)?P.deg2rad(J.angle(y.rotation))*Math.sign(G):0}},{key:"scale",get:function(){return B.isSome(this._interactionState)?this._interactionState.scale:1}}]);return E}(A.HandleOwner);w.__decorate([x.property({constructOnly:!0})],
r.ScaleRotateMeshAdapter.prototype,"graphic",void 0);w.__decorate([x.property({constructOnly:!0})],r.ScaleRotateMeshAdapter.prototype,"geometry",void 0);w.__decorate([x.property({constructOnly:!0})],r.ScaleRotateMeshAdapter.prototype,"viewingMode",void 0);w.__decorate([x.property()],r.ScaleRotateMeshAdapter.prototype,"angle",null);w.__decorate([x.property()],r.ScaleRotateMeshAdapter.prototype,"scale",null);w.__decorate([x.property()],r.ScaleRotateMeshAdapter.prototype,"_interactionState",void 0);
r.ScaleRotateMeshAdapter=w.__decorate([D.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateMeshAdapter")],r.ScaleRotateMeshAdapter);let Q=function(C){function E(L){var y=C.call(this,L)||this;y.angle=0;y.initialAngle=0;y.previousAngle=0;y.previousScale=1;y.scale=1;y.initialAngle=L.angle;y.previousAngle=L.angle;return y}V._inheritsLoose(E,C);E.prototype.cancel=function(){this.angle=this.initialAngle;this.scale=1};V._createClass(E,[{key:"state",get:function(){const {angle:L,
scale:y}=this;return{angle:L,scale:y}}}]);return E}(N);w.__decorate([x.property()],Q.prototype,"angle",void 0);w.__decorate([x.property()],Q.prototype,"initialAngle",void 0);w.__decorate([x.property()],Q.prototype,"previousAngle",void 0);w.__decorate([x.property()],Q.prototype,"previousScale",void 0);w.__decorate([x.property()],Q.prototype,"scale",void 0);w.__decorate([x.property()],Q.prototype,"state",null);Q=w.__decorate([D.subclass("InteractionState")],Q);Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/undoRecords":function(){define(["exports","../../../../../core/maybe"],function(r,V){function w(P){let B=P.geometry,u=V.none;return{undo(x){u=x.geometry;x.geometry=B},redo(x){B=x.geometry;x.geometry=u}}}function N(P,B){let u=B.clone(),x=null;return{undo:H=>{x=V.isSome(P.transform)?P.transform.clone():null;P.transform=u;H.notifyGeometryChanged()},redo:H=>{u=V.isSome(P.transform)?P.transform.clone():null;P.transform=x;H.notifyGeometryChanged()}}}
function A(P){let B=P.vertexAttributes.clonePositional(),u;return{undo:x=>{u=P.vertexAttributes.clonePositional();P.vertexAttributes=B;x.notifyGeometryChanged()},redo:x=>{B=P.vertexAttributes.clonePositional();P.vertexAttributes=u;x.notifyGeometryChanged()}}}r.createGraphicGeometryUndoRecord=function(P){V.isSome(P.geometry)&&"mesh"===P.geometry.type?(P=P.geometry,P=V.isSome(P.transform)?N(P,P.transform):A(P)):P=w(P);return P};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ScaleRotateObjectSymbol3DAdapter":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D){function J(Q){return-P.deg2rad(Q)}r.ScaleRotateObjectSymbol3DAdapter=function(Q){function C(L){L=Q.call(this,L)||this;L.sizeAxis=null;L._interactionState=null;return L}V._inheritsLoose(C,Q);var E=C.prototype;E.initialize=function(){this.addHandles(u.when(()=>B.isSome(this._interactionState)?this._interactionState.state:null,L=>{this._updateSymbol(L)},u.sync))};E.startInteraction=function(){const L=this._graphicSymbol,y=this.findLayerView();if(B.isSome(this._interactionState)||
B.isNone(L)||B.isNone(y))return U;var G=L.symbolLayers.map(ia=>"object"===ia.type?y.getSymbolLayerSize(L,ia):null).toArray();const Z=L.clone();this._interactionState=G=new M({originalSymbol:Z,angle:this.angle,initialSizes:G});const T=()=>{this._interactionState=null};return{state:G,done:T,cancel:()=>{this._graphicSymbol=Z;T()}}};E.createUndoRecord=function(){let L=this.graphic.symbol,y=null;return{undo:G=>{y=G.symbol;G.symbol=L},redo:G=>{L=G.symbol;G.symbol=y}}};E._updateSymbol=function({scale:L,
angle:y,originalSymbol:G,initialSizes:Z}){var T=this._graphicSymbol;if(!B.isNone(T)&&"point-3d"===T.type){T=T.clone();var ia=-P.rad2deg(y-this.initialAngle),ca=!1;this._forEachObjectSymbolLayerPair(G,T,(ha,da,X)=>{ha=B.unwrapOr(ha.heading,0)+ia;da.heading!==ha&&(da.heading=ha,ca=!0);X=Z[X];B.isSome(X)&&"width"in X&&(X.width=this.sizeFilter(X.width),X.height=this.sizeFilter(X.height),X.depth=this.sizeFilter(X.depth),ha=X.width*L,da.width!==ha&&(da.width=ha,ca=!0),ha=X.depth*L,da.depth!==ha&&(da.depth=
ha,ca=!0),X=X.height*L,da.height!==X&&(da.height=X,ca=!0))});ca&&(this._graphicSymbol=T)}};E._forEachObjectSymbolLayerPair=function(L,y,G){L.symbolLayers.forEach((Z,T)=>{const ia=y.symbolLayers.getItemAt(T);"object"===Z.type&&"object"===ia.type&&G(Z,ia,T)})};V._createClass(C,[{key:"angle",get:function(){return B.isSome(this._interactionState)?this._interactionState.angle:B.isSome(this._orientationReferenceSymbolLayer)?J(this._orientationReferenceSymbolLayer.heading??0):0}},{key:"scale",get:function(){return B.isSome(this._interactionState)?
this._interactionState.scale:1}},{key:"relativeAngle",get:function(){return this.angle-this.initialAngle}},{key:"initialAngle",get:function(){return B.isSome(this._interactionState)?this._interactionState.initialAngle:0}},{key:"size",get:function(){const L=this._sizeReferenceSymbolLayer;if(B.isNone(L))return null;var y=this.findLayerView(),G=this._graphicSymbol;if(B.isNone(y)||B.isNone(G)||"point-3d"!==G.type)return null;y=y.getSymbolLayerSize(G,L);if("size"in y&&B.isSome(y.size))return y.size;G=
this.sizeAxis;return"width"in y&&B.isSome(y.width)&&(B.isNone(G)||"width"===G||"all"===G||"width-and-depth"===G)?y.width:"depth"in y&&B.isSome(L.depth)&&(B.isNone(G)||"depth"===G||"all"===G||"width-and-depth"===G)?y.depth:"height"in y&&B.isSome(L.height)&&(B.isNone(G)||"height"===G||"all"===G)?y.height:null}},{key:"_sizeReferenceSymbolLayer",get:function(){const L=this._graphicSymbol;return B.isNone(L)||0===L.symbolLayers.length?null:L.symbolLayers.find(y=>"object"===y.type)}},{key:"_orientationReferenceSymbolLayer",
get:function(){const L=this._graphicSymbol;return B.isNone(L)||0===L.symbolLayers.length?null:L.symbolLayers.find(y=>"object"===y.type&&B.isSome(y.heading))}},{key:"_graphicSymbol",get:function(){return B.isSome(this.graphic)&&B.isSome(this.graphic.symbol)&&"point-3d"===this.graphic.symbol.type?this.graphic.symbol:null},set:function(L){this.graphic.symbol=L}}]);return C}(A.HandleOwner);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"angle",null);w.__decorate([x.property()],
r.ScaleRotateObjectSymbol3DAdapter.prototype,"scale",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"relativeAngle",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"initialAngle",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"size",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeAxis",void 0);w.__decorate([x.property({constructOnly:!0})],r.ScaleRotateObjectSymbol3DAdapter.prototype,
"graphic",void 0);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"_interactionState",void 0);w.__decorate([x.property({constructOnly:!0})],r.ScaleRotateObjectSymbol3DAdapter.prototype,"findLayerView",void 0);w.__decorate([x.property({constructOnly:!0})],r.ScaleRotateObjectSymbol3DAdapter.prototype,"sizeFilter",void 0);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"_sizeReferenceSymbolLayer",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,
"_orientationReferenceSymbolLayer",null);w.__decorate([x.property()],r.ScaleRotateObjectSymbol3DAdapter.prototype,"_graphicSymbol",null);r.ScaleRotateObjectSymbol3DAdapter=w.__decorate([D.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateObjectSymbol3DAdapter")],r.ScaleRotateObjectSymbol3DAdapter);const U={state:{angle:0,scale:0},done:()=>{},cancel:()=>{}};let M=function(Q){function C(E){var L=Q.call(this,E)||this;L.angle=0;L.initialAngle=0;L.scale=1;L.initialAngle=E.angle;
return L}V._inheritsLoose(C,Q);V._createClass(C,[{key:"state",get:function(){const {originalSymbol:E,angle:L,initialAngle:y,scale:G,initialSizes:Z}=this;return{originalSymbol:E,angle:L,initialAngle:y,scale:G,initialSizes:Z}}}]);return C}(N);w.__decorate([x.property()],M.prototype,"originalSymbol",void 0);w.__decorate([x.property()],M.prototype,"angle",void 0);w.__decorate([x.property()],M.prototype,"initialAngle",void 0);w.__decorate([x.property()],M.prototype,"initialSizes",void 0);w.__decorate([x.property()],
M.prototype,"scale",void 0);w.__decorate([x.property()],M.prototype,"state",null);M=w.__decorate([D.subclass("InteractionState")],M);r.headingToAngle=J;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/ExtentTransformTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/handleUtils ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../../../../../core/screenUtils ../../../../../core/unitUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/mat4 ../../../../../chunks/vec2 ../../../../../chunks/vec2f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingRect ../../../../../chunks/boundedPlane ../../../../../geometry/support/plane ../../../../../geometry/support/ray ../../../../../geometry/support/vectorStacks ../../../../../support/elevationInfoUtils ../../../analysis/Slice/sliceToolUtils ../../../analysis/Slice/images/Factory ../../Manipulator3D ../../manipulatorUtils ../dragEventPipeline3D ../ManipulatorType ../manipulatorUtils ../visualElementUtils ../manipulations/MoveManipulation ../manipulations/MoveXYGraphicManipulation ./PreserveAspectRatio ../../visualElements/OutlineVisualElement ../../../layers/graphics/elevationAlignmentUtils ../../../layers/graphics/ElevationContext ../../../layers/graphics/GraphicState ../../../support/geometryUtils/ray ../../../../interactive/dragEventPipeline ../../../../interactive/InteractiveToolBase ../../../../interactive/editGeometry/EditGeometryOperations ../../../../interactive/editGeometry/interfaces ../../../../interactive/editGeometry/operations/UpdateVertices ../../../../interactive/editGeometry/support/editPlaneUtils ../../../../interactive/sketch/SketchTooltipOptions ../../../../interactive/tooltip/ExtentTooltipInfos ../../../../interactive/tooltip/Tooltip ../../../../interactive/tooltip/TranslateTooltipInfos ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja,oa,qa,ua,va,Ja,Ta,Ma,Ua,Oa,Za,Ra,Ea,xa,za,Ia,pa,Ba,Pa,Va,La,Na){r.ExtentTransformTool=function(R){function ra(na){na=R.call(this,na)||this;na.enableZ=!0;na.enableRotation=!0;na.enableScaling=!0;na.tooltipOptions=new pa;na._preserveAspectRatio=new va.PreserveAspectRatio;na.grabbing=!1;na.inputState=null;na.type="transform-3d";na._handles=new A;na._attachmentOrigin=null;na._outlineVisualElement=null;na._mapBounds=T.create();
na._mapBoundsStart=T.create();na._zmax=0;na._sizeStart=null;na._displayBounds=T.create();na._displayBoundsStart=T.create();na._displayBoundsMarginStart=0;na._resizeHandles=[{direction:[1,0]},{direction:[1,1]},{direction:[0,1]},{direction:[-1,1]},{direction:[-1,0]},{direction:[-1,-1]},{direction:[0,-1]},{direction:[1,-1]}];na._moveXYTooltipInfo=null;na._moveZTooltipInfo=null;na._rotateTooltipInfo=null;na._scaleTooltipInfo=null;na._startAngle=0;na._endAngle=0;na._startScale=L.create();na._endScale=
L.create();return na}V._inheritsLoose(ra,R);var ya=ra.prototype;ya.initialize=function(){const {view:na,graphic:ta,manipulators:Da,_handles:Aa}=this,Ha=this._graphicState=new Ua.GraphicState({graphic:ta});this._editGeometryOperations=Ea.EditGeometryOperations.fromGeometry(ta.geometry,na.state.viewingMode);this._graphicMoveManipulation=new ua.MoveXYGraphicManipulation({tool:this,view:na,graphicState:Ha});this._moveZManipulator=X.createShiftManipulator(na,X.OffsetMode.CENTER_ON_CALLOUT);this._moveZManipulator.state|=
X.IsShiftEdgeOnScreenFlag;Aa.add([this._createMoveXYGraphicDragPipeline(),H.watch(()=>this.enableZ,()=>this._updateManipulatorAvailability(this._moveZManipulator,ea.ManipulatorType.TRANSLATE_Z)),this._createMoveZDragPipeline()]);Da.add(this._moveZManipulator);this._resizeManipulators=this._resizeHandles.map(Wa=>{const g=X.createResizeManipulator(na,Wa);Aa.add([H.watch(()=>this.enableScaling,()=>this._updateManipulatorAvailability(g,ea.ManipulatorType.SCALE)),g.events.on("grab-changed",z=>this._onResizeGrab(z)),
this._createResizeDragPipeline(g,Wa)]);return g});Da.addMany(this._resizeManipulators);this._rotateManipulatorTexture=O.getRotateHeadingTexture(na.toolViewManager.textures);this._rotateManipulator=Y.createRotateManipulator(na,{texture:this._rotateManipulatorTexture.texture});Aa.add([H.watch(()=>this.enableRotation,()=>this._updateManipulatorAvailability(this._rotateManipulator,ea.ManipulatorType.ROTATE)),this._rotateManipulator.events.on("grab-changed",Wa=>{this._onRotateGrab(Wa)}),this._createRotateDragPipeline(this._rotateManipulator)]);
Da.add(this._rotateManipulator);this._calculateMapBounds();this._updateDisplayBounds();const Ka=oa.createVisualElements({view:na,graphic:ta,forEachManipulator:Wa=>this._forEachManipulator(Wa),onManipulatorsChanged:()=>P.makeHandle()});u.isSome(Ka)&&(this._outlineVisualElement=Ka.visualElement instanceof Ja.OutlineVisualElement?Ka.visualElement:null);u.isSome(this._outlineVisualElement)&&Aa.add(this._outlineVisualElement.events.on("attachment-origin-changed",()=>this._updateDisplayBounds()));Aa.add(Ka);
Aa.add([Ha.on("changed",()=>this._onGeometryChanged()),H.watch(()=>Ha.displaying,()=>this._updateAllManipulatorAvailability()),H.watch(()=>Ha.isDraped,()=>this._graphicDrapedChanged(),H.initial),na.trackGraphicState(Ha)]);const Ca=na.pointsOfInterest;Aa.add(H.watch(()=>Ca?.centerOnSurfaceFrequent.location,()=>this._updateDisplayBounds()));this._forEachManipulator(Wa=>{Aa.add(Wa.events.on("grab-changed",()=>{this.grabbing=Wa.grabbing;this._updateAllManipulatorAvailability()}))});this._forEachManipulator((Wa,
g)=>{Aa.add(Wa.events.on("immediate-click",z=>{g===ea.ManipulatorType.TRANSLATE_XY&&this.emit("immediate-click",{...z,graphic:ta});z.stopPropagation()}))});this._onGeometryChanged();this._updateAllManipulatorAvailability();this._initializeTooltip();this.finishToolCreation()};ya.destroy=function(){this._displayBounds=this._mapBounds=null;this._rotateManipulatorTexture.release();this._handles.destroy();this._graphicMoveManipulation.destroy();this._editGeometryOperations.destroy();this._tooltip.destroy();
this._set("view",null);this._set("graphic",null)};ya._initializeTooltip=function(){const {_handles:na,view:ta}=this,Da=this._tooltip=new Pa.Tooltip({view:ta}),Aa=()=>{Da.info=this._getUpdatedTooltipInfo()};na.add([this.on("graphic-translate-start",Aa),this.on("graphic-translate",Aa),this.on("graphic-translate-stop",()=>{this._moveZTooltipInfo=this._moveXYTooltipInfo=null;this._tooltip.clear()}),this.on("graphic-rotate-start",Ha=>{this._startAngle=Ha.angle;Aa()}),this.on("graphic-rotate",Ha=>{this._endAngle=
Ha.angle;Aa()}),this.on("graphic-rotate-stop",()=>{this._endAngle=this._startAngle=0;Aa()}),this.on("graphic-scale-start",Ha=>{E.set(this._startScale,Ha.xScale,Ha.yScale);E.set(this._endScale,Ha.xScale,Ha.yScale);Aa()}),this.on("graphic-scale",Ha=>{E.set(this._endScale,Ha.xScale,Ha.yScale);Aa()}),this.on("graphic-scale-stop",()=>{E.set(this._startScale,0,0);E.set(this._endScale,0,0);Aa()})]);this._forEachManipulator(Ha=>{na.add([Ha.events.on("focus-changed",Aa),Ha.events.on("grab-changed",Aa),Ha.events.on("drag",
Ka=>{"cancel"===Ka.action?this._tooltip.clear():Aa()})])})};ya._getUpdatedTooltipInfo=function(){return this.tooltipOptions.enabled?this._graphicMoveManipulation.grabbing||this._graphicMoveManipulation.dragging?this._computeMoveXYTooltipInfo():this._moveZManipulator.focused?this._computeMoveZTooltipInfo():this._rotateManipulator.focused?this._computeRotateTooltipInfo():this._resizeManipulators.some(na=>na.focused)?this._computeScaleTooltipInfo():null:null};ya._computeMoveXYTooltipInfo=function(){return this._moveXYTooltipInfo=
u.unwrapOr(this._moveXYTooltipInfo,()=>new Va.TranslateGraphicTooltipInfo({tooltipOptions:this.tooltipOptions}))};ya._computeMoveZTooltipInfo=function(){const na=this._moveZTooltipInfo=u.unwrapOr(this._moveZTooltipInfo,()=>new Va.TranslateGraphicZTooltipInfo({tooltipOptions:this.tooltipOptions}));var ta=this._moveUnit;if(this._moveZManipulator.dragging){ta=Na.verticalSignedDistance(this._mapBoundsStart.origin,this._mapBounds.origin,this.view.spatialReference);if(u.isNone(ta))return null;na.distance=
ta}else na.distance=x.createLength(0,ta);return na};ya._computeRotateTooltipInfo=function(){const na=this._rotateTooltipInfo=u.unwrapOr(this._rotateTooltipInfo,()=>new Ba.ExtentRotateTooltipInfo({tooltipOptions:this.tooltipOptions}));na.angle=this._startAngle-this._endAngle;return na};ya._computeScaleTooltipInfo=function(){var na=this.graphic.geometry;if(u.isNone(na))return null;const ta=this._scaleTooltipInfo=u.unwrapOr(this._scaleTooltipInfo,()=>new Ba.ExtentScaleTooltipInfo({tooltipOptions:this.tooltipOptions}));
na=Ia.mapPlaneAutoHorizontalSizeByElevationMode(this._mapBounds,this._zmax,na.spatialReference,this._graphicState.isDraped);if(u.isNone(na))return null;ta.xSize=na[0];ta.ySize=na[1];u.isSome(this._sizeStart)&&this._resizeManipulators.some(Da=>Da.dragging)?(ta.xScale=na[0].value/this._sizeStart[0].value,ta.yScale=na[1].value/this._sizeStart[1].value):(ta.xScale=1,ta.yScale=1);return ta};ya._graphicDrapedChanged=function(){this._handles.remove("draped-elevation-changes");this._updateDisplayBounds();
this._graphicState.isDraped&&this._handles.add(this.view.elevationProvider.on("elevation-change",na=>{u.isSome(this._attachmentOrigin)&&Z.containsXY(na.extent,this._attachmentOrigin.x,this._attachmentOrigin.y)&&this._updateDisplayBounds()}),"draped-elevation-changes")};ya._updateAllManipulatorAvailability=function(){this._forEachManipulator((na,ta)=>this._updateManipulatorAvailability(na,ta))};ya._updateManipulatorAvailability=function(na,ta){const Da=this.grabbing&&!na.grabbing;na.interactive=!Da;
if(na instanceof K.Manipulator3D){const Aa=this._graphicState.displaying,Ha=this.enableZ&&ja.canMoveZ(this.graphic);switch(ta){case ea.ManipulatorType.ROTATE:na.available=Aa&&this.enableRotation;break;case ea.ManipulatorType.SCALE:na.available=Aa&&(this.enableScaling||this.enableRotation||Ha);na.interactive=!Da&&this.enableScaling;na.state=this.enableScaling?X.resizeNormal:X.resizeOutlineOnly;break;case ea.ManipulatorType.TRANSLATE_Z:na.available=Aa&&Ha;break;default:na.available=Aa}}};ya._forEachManipulator=
function(na){this._graphicMoveManipulation.forEachManipulator(na);this._resizeManipulators.forEach(ta=>na(ta,ea.ManipulatorType.SCALE));na(this._rotateManipulator,ea.ManipulatorType.ROTATE);na(this._moveZManipulator,ea.ManipulatorType.TRANSLATE_Z)};ya.reset=function(){};ya._onGeometryChanged=function(){this._updateDisplayBounds()};ya._calculateMapBounds=function(){const na=this.graphic.geometry,ta=this._editGeometryOperations.data;var Da=ta.components[0].edges[0];Da=E.subtract(ha.sv2d.get(),Da.leftVertex.pos,
Da.rightVertex.pos);E.normalize(Da,Da);var Aa=u.unwrapOr(Y.getGraphicAttachmentOrigin(this.view,this.graphic),()=>na.extent?.center);Aa=Aa?80*this.view.pixelSizeAt(Aa):0;const Ha=this.view.spatialReference,Ka=na.spatialReference;Ha.equals(Ka)||(Aa*=D.getMetersPerUnitForSR(Ha)/D.getMetersPerUnitForSR(Ka));Ia.calculateOrientedBounds(Da,ta,Aa,this._mapBounds);this._updateZMax()};ya._updateZMax=function(){var na=this._editGeometryOperations.data;if(na.geometry.hasZ){var ta=na.coordinateHelper,Da=Number.NEGATIVE_INFINITY;
for(const Aa of na.components)for(const Ha of Aa.vertices)na=ta.getZ(Ha.pos)??0,Da=Math.max(na,Da);this._zmax=Da}else this._zmax=0};ya._updateDisplayBounds=function(){const {geometry:na}=this.graphic;if(!u.isNone(na)){var {extent:ta}=na;if(ta){var Da=u.isSome(this._outlineVisualElement)&&!this._graphicState.isDraped&&u.isSome(this._outlineVisualElement.attachmentOrigin)?this._outlineVisualElement.attachmentOrigin:Y.getGraphicAttachmentOrigin(this.view,this.graphic);this._attachmentOrigin=u.unwrapOr(Da,
ta.center);ta=u.isSome(Da)?Da.z:Ta.evaluateElevationAlignmentAtPoint(this._mapBounds.origin,this.view.elevationProvider,Ma.ElevationContext.fromElevationInfo(da.getGraphicEffectiveElevationInfo(this.graphic)),this.view.renderCoordsHelper);Da=T.copy(this._mapBounds);Da.origin[2]=ta??0;Ia.mapPlaneToRenderPlane(Da,this.view.renderCoordsHelper,na.spatialReference,this._displayBoundsMargin,this._displayBounds);this._updateManipulators()}}};ya._createMoveXYGraphicDragPipeline=function(){return this._graphicMoveManipulation.createDragPipeline((na,
ta,Da)=>this._applyGraphicMoveSteps(ta,Da,qa.ManipulationType.XY))};ya._createMoveZDragPipeline=function(){const na=this.view,ta=this._editGeometryOperations.data.spatialReference;return Za.createManipulatorDragEventPipeline(this._moveZManipulator,(Da,Aa,Ha)=>{Da=G.clone(Da.renderLocation);Aa=Aa.next(S.screenToZConstrained(na,Da,ta)).next(Za.addScreenDelta());this._applyGraphicMoveSteps(Aa,Ha,qa.ManipulationType.Z)})};ya._applyGraphicMoveSteps=function(na,ta,Da){na=na.next(Aa=>{"start"===Aa.action&&
(this.inputState={type:"move"},this._updateOperationStartProperties(),this.emit("graphic-translate-start",{graphic:this.graphic,dxScreen:Aa.screenDeltaX,dyScreen:Aa.screenDeltaY}));return Aa}).next(Za.addMapDelta()).next(this._moveDragUpdateGeometry()).next(Aa=>{const Ha={graphic:this.graphic,dxScreen:Aa.screenDeltaX,dyScreen:Aa.screenDeltaY};switch(Aa.action){case "start":case "update":(Aa.mapEnd.x-Aa.mapStart.x||Aa.mapEnd.y-Aa.mapStart.y||(Aa.mapEnd.z??0)-(Aa.mapStart.z??0))&&this.emit("graphic-translate",
Ha);break;case "end":this.inputState=null,this.emit("graphic-translate-stop",Ha)}return Aa}).next(Aa=>this._updateMoveTooltip(Aa,Da));ta.next(()=>{u.isSome(this.inputState)&&this.emit("graphic-translate-stop",{graphic:this.graphic,dxScreen:0,dyScreen:0});this._cancel()});return na};ya._updateOperationStartProperties=function(){T.copy(this._displayBounds,this._displayBoundsStart);T.copy(this._mapBounds,this._mapBoundsStart);u.isNone(this.graphic.geometry)?this._sizeStart=null:this._sizeStart=Ia.mapPlaneAutoHorizontalSizeByElevationMode(this._mapBoundsStart,
this._zmax,this.graphic.geometry.spatialReference,this._graphicState.isDraped)};ya._moveDragUpdateGeometry=function(){return na=>{if(u.isNone(this.inputState)||"move"!==this.inputState.type)return na;var ta=[];for(const Da of this._editGeometryOperations.data.components)ta.push(...Da.vertices);ta=this._editGeometryOperations.moveVertices(ta,na.mapDeltaX,na.mapDeltaY,na.mapDeltaZ,"start"===na.action?xa.AccumulationBehaviour.NEW_STEP:xa.AccumulationBehaviour.ACCUMULATE_STEPS);Ia.apply(ta,this._mapBounds);
this.graphic.geometry=this._editGeometryOperations.data.geometry;return na}};ya._updateMoveTooltip=function(na,ta){if(ta===qa.ManipulationType.XY||ta===qa.ManipulationType.XY_AXIS)ta=La.autoHorizontalDistanceByElevationModeBetweenPoints(na.mapStart,na.mapEnd,this._graphicState.isDraped?"on-the-ground":"absolute-height"),u.isSome(ta)&&u.isSome(this._moveXYTooltipInfo)&&(this._moveXYTooltipInfo.distance=ta);return na};ya._onResizeGrab=function({action:na,screenPoint:ta}){"start"===na&&ta&&(na=this._calculatePickRay(ta),
ia.intersectRay(this._displayBounds.plane,na,ha.sv3d.get())&&(this._updateOperationStartProperties(),this._displayBoundsMarginStart=this._displayBoundsMargin,this.inputState={type:"resize"}))};ya._createResizeDragPipeline=function(na,ta){return Za.createManipulatorDragEventPipeline(na,(Da,Aa,Ha)=>{u.isNone(this.inputState)||(Aa.next(Ka=>{"start"===Ka.action&&this.emit("graphic-scale-start",{graphic:this.graphic,xScale:1,yScale:1});return Ka}).next(S.screenToRenderPlane(this.view,this._displayBoundsStart.plane)).next(Ka=>
({...Ka,handle:ta})).next(this._resizeDragRenderPlaneToFactors()).next(...this._preserveAspectRatio.createDragEventPipelineStep()).next(this._resizeDragUpdateGeometry()).next(Ka=>{const Ca={graphic:this.graphic,xScale:Ka.factor1,yScale:Ka.factor2};switch(Ka.action){case "start":case "update":this.emit("graphic-scale",Ca);break;case "end":this.inputState=null,this.emit("graphic-scale-stop",Ca)}return Ka}),Ha.next(()=>{u.isSome(this.inputState)&&this.emit("graphic-scale-stop",{graphic:this.graphic,
xScale:1,yScale:1});this._cancel()}))})};ya._resizeDragRenderPlaneToFactors=function(){return na=>{const ta=this._displayBoundsStart,Da=na.handle.direction,Aa=this._displayBoundsMargin,Ha=this._displayBoundsMarginStart;var Ka=y.copy(ha.sv3d.get(),ta.origin);y.scaleAndAdd(Ka,Ka,ta.basis1,-Da[0]);y.scaleAndAdd(Ka,Ka,ta.basis2,-Da[1]);const Ca=y.subtract(ha.sv3d.get(),na.renderEnd,Ka),Wa=y.subtract(ha.sv3d.get(),na.renderStart,Ka),g=X.isDiagonalResizeHandle(na.handle);Ka=X.calculateDiagonalResizeHandleScale(ta);
const z=X.calculateDiagonalResizeHandleScale(this._displayBounds)/Ka;Ka=(l,c)=>{if(0===l)return 1;let a=y.length(c),b=.5*l*y.dot(c,Ca)/a;const d=0>b?-1:1;g&&(l=a-.5*l*y.dot(c,Wa)/a,b+=l*d*z);l=a<1.5*Ha?1:1E-6;a=Math.max(a-Ha,1E-6);0<d&&(b-=Aa);return d*Math.max(b/a*d,l)};return{...na,factor1:Ka(Da[0],ta.basis1),factor2:Ka(Da[1],ta.basis2)}}};ya._resizeDragUpdateGeometry=function(){return na=>{var ta=y.copy(G.create(),this._mapBoundsStart.origin);y.scaleAndAdd(ta,ta,this._mapBoundsStart.basis1,-na.handle.direction[0]);
y.scaleAndAdd(ta,ta,this._mapBoundsStart.basis2,-na.handle.direction[1]);const Da=E.set(L.create(),this._mapBoundsStart.basis1[0],this._mapBoundsStart.basis1[1]);E.normalize(Da,Da);const Aa=[];for(const Ha of this._editGeometryOperations.data.components)Aa.push(...Ha.vertices);ta=this._editGeometryOperations.scaleVertices(Aa,ta,Da,na.factor1,na.factor2,"start"===na.action?xa.AccumulationBehaviour.NEW_STEP:xa.AccumulationBehaviour.ACCUMULATE_STEPS,za.AccumulationType.REPLACE);T.copy(this._mapBoundsStart,
this._mapBounds);Ia.apply(ta,this._mapBounds);this.graphic.geometry=this._editGeometryOperations.data.geometry;return na}};ya._onRotateGrab=function({action:na,screenPoint:ta}){"start"===na&&ta&&(na=X.createRotatePlane(this._displayBounds,this.view.renderCoordsHelper,X.RotationAxis.HEADING,ia.create()),ta=this._calculatePickRay(ta),ia.intersectRay(na,ta,ha.sv3d.get())&&(this._updateOperationStartProperties(),this.inputState={type:"rotate",rotatePlane:na}))};ya._createRotateDragPipeline=function(na){return Za.createManipulatorDragEventPipeline(na,
(ta,Da,Aa)=>{ta=this.inputState;u.isNone(ta)||(Da.next(Ha=>{"start"===Ha.action&&this.emit("graphic-rotate-start",{graphic:this.graphic,angle:0});return Ha}).next(S.screenToRenderPlane(this.view,ta.rotatePlane)).next(this._rotateDragRenderPlaneToRotate(ta)).next(this._rotateDragUpdateGeometry()).next(Ha=>{const Ka={graphic:this.graphic,angle:B.rad2deg(Ha.rotateAngle)};switch(Ha.action){case "start":case "update":this.emit("graphic-rotate",Ka);break;case "end":this.inputState=null,this.emit("graphic-rotate-stop",
Ka)}return Ha}),Aa.next(()=>{u.isSome(this.inputState)&&this.emit("graphic-rotate-stop",{graphic:this.graphic,angle:0});this._cancel()}))})};ya._rotateDragRenderPlaneToRotate=function(na){return ta=>{const Da=ia.normal(na.rotatePlane),Aa=Y.calculateInputRotationTransform(ta.renderStart,ta.renderEnd,this._displayBounds.origin,Da);return{...ta,rotateAxis:Da,rotateAngle:Aa}}};ya._rotateDragUpdateGeometry=function(){return na=>{var ta=y.copy(G.create(),this._mapBoundsStart.origin);const Da=[];for(const Aa of this._editGeometryOperations.data.components)Da.push(...Aa.vertices);
ta=this._editGeometryOperations.rotateVertices(Da,ta,na.rotateAngle,"start"===na.action?xa.AccumulationBehaviour.NEW_STEP:xa.AccumulationBehaviour.ACCUMULATE_STEPS,za.AccumulationType.REPLACE);T.copy(this._mapBoundsStart,this._mapBounds);Ia.apply(ta,this._mapBounds);this.graphic.geometry=this._editGeometryOperations.data.geometry;return na}};ya._calculatePickRay=function(na){const ta=ca.create();na=I.screenPointObjectToArray(na);Oa.fromScreen(this.view.state.camera,na,ta);y.normalize(ta.direction,
ta.direction);return ta};ya._updateManipulators=function(){if(this.visible){var na=X.calculateBoundedPlaneTranslateRotate(this._displayBounds,ha.sm4d.get());X.updateRotateHeadingHandle(this._rotateManipulator,na,this._displayBounds,this.view.renderCoordsHelper);this._updateZMoveHandle(this._moveZManipulator,na);this._resizeManipulators.forEach((ta,Da)=>{X.updateResizeHandle(ta,this._resizeHandles[Da],na,this._displayBounds)})}};ya._updateZMoveHandle=function(na,ta){var Da=this._displayBounds;Da=y.subtract(ha.sv3d.get(),
Da.origin,Da.basis1);const Aa=ha.sm4d.get();C.rotateZ(Aa,ta,2*Math.PI/2);Aa[12]=0;Aa[13]=0;Aa[14]=0;na.modelTransform=Aa;na.renderLocation=Da};ya._cancel=function(){const na=this._editGeometryOperations.lastOperation;u.isNone(na)||(this._editGeometryOperations.undo(),this.graphic.geometry=this._editGeometryOperations.data.geometry,Ia.unapply(na,this._mapBounds),this._updateDisplayBounds(),this.inputState=null)};ya.undo=function(){if(u.isSome(this.inputState))this.view.activeTool=null;else if(this.canUndo){const na=
this._editGeometryOperations.undo();this.graphic.geometry=this._editGeometryOperations.data.geometry;Ia.unapply(u.unwrap(na),this._mapBounds);this._updateDisplayBounds()}};ya.redo=function(){if(this.canRedo){const na=this._editGeometryOperations.redo();this.graphic.geometry=this._editGeometryOperations.data.geometry;Ia.apply(u.unwrap(na),this._mapBounds);this._updateDisplayBounds()}};V._createClass(ra,[{key:"preserveAspectRatio",get:function(){return this._preserveAspectRatio.enabled},set:function(na){this._preserveAspectRatio.enabled=
na;this._set("preserveAspectRatio",na)}},{key:"_moveUnit",get:function(){return u.unwrapOr(D.lengthUnitFromSpatialReference(this.view.spatialReference),"meters")}},{key:"_displayBoundsMargin",get:function(){var na=this.view.pointsOfInterest;return(na=na?na.centerOnSurfaceFrequent.location:this._editGeometryOperations.data.geometry.extent?.center)?10*this.view.pixelSizeAt(na):0}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},
{key:"test",get:function(){return{resizeManipulators:this._resizeManipulators,rotateManipulator:this._rotateManipulator,moveZManipulator:this._moveZManipulator,tooltip:this._tooltip}}}]);return ra}(N.EventedMixin(Ra.InteractiveToolBase));w.__decorate([J.property({constructOnly:!0,nonNullable:!0})],r.ExtentTransformTool.prototype,"view",void 0);w.__decorate([J.property({constructOnly:!0,nonNullable:!0})],r.ExtentTransformTool.prototype,"graphic",void 0);w.__decorate([J.property({constructOnly:!0,nonNullable:!0})],
r.ExtentTransformTool.prototype,"enableZ",void 0);w.__decorate([J.property()],r.ExtentTransformTool.prototype,"enableRotation",void 0);w.__decorate([J.property()],r.ExtentTransformTool.prototype,"enableScaling",void 0);w.__decorate([J.property({constructOnly:!0,type:pa})],r.ExtentTransformTool.prototype,"tooltipOptions",void 0);w.__decorate([J.property()],r.ExtentTransformTool.prototype,"preserveAspectRatio",null);w.__decorate([J.property()],r.ExtentTransformTool.prototype,"grabbing",void 0);w.__decorate([J.property()],
r.ExtentTransformTool.prototype,"inputState",void 0);w.__decorate([J.property({readOnly:!0})],r.ExtentTransformTool.prototype,"type",void 0);w.__decorate([J.property()],r.ExtentTransformTool.prototype,"_moveUnit",null);r.ExtentTransformTool=w.__decorate([Q.subclass("esri.views.3d.interactive.editingTools.graphicTransform3D.ExtentTransformTool")],r.ExtentTransformTool);r.EPSILON=1E-6;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/sliceToolUtils":function(){define("exports ../../../../geometry ../../../../analysis/SlicePlane ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/projection ../../../../geometry/support/Axis ../../../../chunks/boundedPlane ../../../../geometry/support/plane ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../../geometry/support/vectorStacks ./sliceToolConfig ../support/projectionUtils ../../interactive/Manipulator3D ../../interactive/manipulatorUtils ../../interactive/RenderObject ../../interactive/visualElements/LineVisualElement ../../interactive/visualElements/SlicePlaneVisualElement ../../support/RenderCoordsHelper ../../support/geometryUtils/ray ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ColorMaterial ../../webgl-engine/materials/NativeLineMaterial ../../webgl-engine/materials/RibbonLineMaterial ../../../interactive/interfaces ../../../../geometry/Extent".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J,U,M,Q,C,E,L,y,G,Z,T,ia,ca,ha,da,X,O,K,Y,S,ea,ja,oa,qa,ua){function va(R,ra,ya,na,ta,Da){const Aa=D.dot(R,ra),Ha=y.sv3d.get(),Ka=y.sv3d.get();switch(na===r.SliceOrientation.HORIZONTAL_OR_VERTICAL?Math.abs(Aa)>G.VERTICAL_DOT_THRESHOLD?r.SliceOrientation.HORIZONTAL:r.SliceOrientation.VERTICAL:na){case r.SliceOrientation.VERTICAL:D.cross(Ha,Math.abs(Aa)<=G.SMALL_ANGLE_DOT_THRESHOLD?R:ya.viewUp,ra);D.copy(Ka,ra);break;case r.SliceOrientation.HORIZONTAL:D.cross(Ha,ya.viewUp,
ra);D.cross(Ka,ra,Ha);break;case r.SliceOrientation.TILTED:D.cross(Ha,Math.abs(Aa)<=G.SMALL_ANGLE_DOT_THRESHOLD?ra:ya.viewUp,R),D.cross(Ka,R,Ha)}R=D.cross(y.sv3d.get(),Ha,Ka);0<D.dot(R,ya.viewForward)&&D.scale(Ka,Ka,-1);D.normalize(ta,Ha);D.normalize(Da,Ka)}function Ja(R,ra,ya){var na=ra.worldUpAtPosition(R.origin,y.sv3d.get());ra=R.basis1;na=L.angleAroundAxis(na,R.basis2,R.basis1)+Va;return Q.rotate(R,Math.round(na/Va)*Va-na,ra,ya)}function Ta(R,ra){switch(ra){case Ia.POSITIVE_X:return{basis:R.basis1,
direction:1,position:D.add(y.sv3d.get(),R.origin,R.basis1),edge:ra};case Ia.POSITIVE_Y:return{basis:R.basis2,direction:1,position:D.add(y.sv3d.get(),R.origin,R.basis2),edge:ra};case Ia.NEGATIVE_X:return{basis:R.basis1,direction:-1,position:D.subtract(y.sv3d.get(),R.origin,R.basis1),edge:ra};case Ia.NEGATIVE_Y:return{basis:R.basis2,direction:-1,position:D.subtract(y.sv3d.get(),R.origin,R.basis2),edge:ra}}}function Ma(R,ra,ya){const na=ya.projectToRenderScreen(D.add(y.sv3d.get(),R,ra),u.castRenderScreenPointArray3(y.sv3d.get()));
R=ya.projectToRenderScreen(D.subtract(y.sv3d.get(),R,ra),u.castRenderScreenPointArray3(y.sv3d.get()));return D.squaredLength(D.subtract(na,na,R))}function Ua(R){const ra=D.length(R.basis1);R=D.length(R.basis2);return G.RESIZE_HANDLE_EDGE_PADDING_FRAC*Math.min(ra,R)}function Oa(R){return 0!==R.direction[0]&&0!==R.direction[1]}function Za(R,ra,ya){const na=new ea.ColorMaterial({color:G.SHIFT_RESTART_ARROW_TIP_COLOR,cullFace:K.CullFaceOptions.Back,renderOccluded:S.RenderOccludedFlag.Opaque}),ta=new ea.ColorMaterial({color:G.SHIFT_RESTART_ARROW_CAP_COLOR,
cullFace:K.CullFaceOptions.Back,renderOccluded:S.RenderOccludedFlag.Opaque}),Da=new ea.ColorMaterial({color:G.SHIFT_RESTART_TUBE_COLOR,cullFace:K.CullFaceOptions.Back,renderOccluded:S.RenderOccludedFlag.Opaque}),Aa=new ea.ColorMaterial({color:G.SHIFT_RESTART_OUTLINE_COLOR,transparent:!0,writeDepth:!1,cullFace:K.CullFaceOptions.Front,renderOccluded:S.RenderOccludedFlag.Transparent}),Ha=Ka=>{R=R.slice(0);var Ca=D.subtract(y.sv3d.get(),R[0],R[1]);D.normalize(Ca,Ca);var Wa=D.subtract(y.sv3d.get(),R[R.length-
1],R[R.length-2]);D.normalize(Wa,Wa);if(0<ra){var g=D.scale(J.create(),Wa,-ra);R[R.length-1]=D.add(g,g,R[R.length-1]);g=D.scale(J.create(),Ca,-ra);R[0]=D.add(g,g,R[0])}g=Ka?G.SHIFT_RESTART_TIP_FOCUS_MULTIPLIER:1;var z=G.SHIFT_RESTART_TIP_LENGTH*g;const l=G.SHIFT_RESTART_TIP_RADIUS*g;g=x.identity(y.sm4d.get());if(0<ra){var c=z/4,a=D.set(y.sv3d.get(),0,c,0);c=1+ra/c;x.translate(g,g,a);x.scale(g,g,D.set(y.sv3d.get(),c,c,c));x.translate(g,g,D.scale(a,a,-1/c))}c=x.identity(H.create());a=J.fromValues(0,
1,0);Wa=x.fromQuat(H.create(),I.rotationTo(y.sq4d.get(),a,Wa));Wa[12]=R[R.length-1][0];Wa[13]=R[R.length-1][1];Wa[14]=R[R.length-1][2];x.multiply(Wa,Wa,g);Ka=G.SHIFT_RESTART_TUBE_RADIUS*(Ka?G.SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER:1)+ra;var b=R,d=ya?Aa:Da;const e=[];for(let f=0;12>f;f++){const h=f/12*2*Math.PI;e.push([Math.cos(h)*Ka,Math.sin(h)*Ka])}Ka=Y.createPathExtrusionGeometry(d,e,b,[],[],!1);Ka.transformation=c;c=[Ka];Ka=Y.createConeGeometry(ya?Aa:na,z,l,24,!1,!1,!0);Ka.transformation=Wa;c.push(Ka);
z=Y.createConeGeometry(ya?Aa:ta,z,l,24,!1,!0,!1);z.transformation=Wa;c.push(z);Ca=x.fromQuat(H.create(),I.rotationTo(y.sq4d.get(),a,Ca));Ca[12]=R[0][0];Ca[13]=R[0][1];Ca[14]=R[0][2];x.multiply(Ca,Ca,g);c.push(Ka.instantiate({transformation:Ca}));c.push(z.instantiate({transformation:Ca}));return c};return{normal:Ha(!1),focused:Ha(!0)}}function Ra(R,ra){const ya=D.subtract(J.create(),R[R.length-1],R[R.length-2]);D.normalize(ya,ya);D.scale(ya,ya,G.SHIFT_RESTART_TIP_LENGTH);D.add(ya,ya,R[R.length-1]);
return ra?(ra=D.subtract(J.create(),R[0],R[1]),D.normalize(ra,ra),D.scale(ra,ra,G.SHIFT_RESTART_TIP_LENGTH),D.add(ra,ra,R[0]),[ra,...R,ya]):[...R,ya]}function Ea(R,ra,ya,na,ta,Da,Aa=Q.create()){if(!Da.toRenderCoords(R,Aa.origin))return A.getLogger("esri.views.3d.analysis.Slice.sliceToolUtils").error(`Failed to project slice plane position, projection from ${R.spatialReference.wkid} is not supported`),null;Da.worldBasisAtPosition(Aa.origin,M.Axis.X,Aa.basis1);Da.worldBasisAtPosition(Aa.origin,M.Axis.Y,
Aa.basis2);C.fromVectorsAndPoint(Aa.basis2,Aa.basis1,Aa.origin,Aa.plane);Q.rotate(Aa,-P.deg2rad(ra),Q.normal(Aa),Aa);Q.rotate(Aa,P.deg2rad(ya),Aa.basis1,Aa);D.scale(Aa.basis1,Aa.basis1,na/2);D.scale(Aa.basis2,Aa.basis2,ta/2);Q.updateUnboundedPlane(Aa);return Aa}function xa(R,ra){if(B.isNone(R)||B.isNone(R.position))return null;const ya=Z.applyProjectionAndElevationAlignment(R.position,ra.spatialReference,ra.elevationProvider);if(B.isNone(ya))return null;ra=X.RenderCoordsHelper.renderUnitScaleFactor(R.position.spatialReference,
ra.spatialReference);return{position:ya,heading:R.heading,tilt:R.tilt,renderWidth:R.width*ra,renderHeight:R.height*ra}}function za(R,ra,ya,na=Q.create()){if(B.isNone(R))return null;R=Ea(R.position,R.heading,R.tilt,R.renderWidth,R.renderHeight,ra.renderCoordsHelper,na);!ya.tiltEnabled&&B.isSome(R)&&Ja(R,ra.renderCoordsHelper,R);return R}var Ia;(function(R){R[R.POSITIVE_X=0]="POSITIVE_X";R[R.POSITIVE_Y=1]="POSITIVE_Y";R[R.NEGATIVE_X=2]="NEGATIVE_X";R[R.NEGATIVE_Y=3]="NEGATIVE_Y"})(Ia||(Ia={}));const pa=
qa.ManipulatorStateCustomFlags.Custom1;r.RotationAxis=void 0;(function(R){R[R.HEADING=1]="HEADING";R[R.TILT=2]="TILT"})(r.RotationAxis||(r.RotationAxis={}));r.SliceOrientation=void 0;(function(R){R[R.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL";R[R.HORIZONTAL=1]="HORIZONTAL";R[R.VERTICAL=2]="VERTICAL";R[R.TILTED=3]="TILTED"})(r.SliceOrientation||(r.SliceOrientation={}));const Ba=qa.ManipulatorStateCustomFlags.Custom2,Pa=E.create(),Va=Math.PI/2,La=qa.ManipulatorStateCustomFlags.Custom1,Na=qa.ManipulatorStateCustomFlags.Custom2;
r.OffsetMode=void 0;(function(R){R[R.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT";R[R.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"})(r.OffsetMode||(r.OffsetMode={}));r.DidPointerMoveRecentlyFlag=pa;r.IsShiftEdgeOnScreenFlag=Ba;r.addArrowTips=Ra;r.calculateBoundedPlaneTranslateRotate=function(R,ra){return ia.calculateTranslateRotateFromBases(R.basis1,R.basis2,R.origin,ra)};r.calculateDiagonalResizeHandleScale=function(R){return Ua(R)};r.calculatePlaneHalfSize=function(R,ra){return G.INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION*
Math.min(ra.width,ra.height)*ra.computeRenderPixelSizeAt(R)};r.calculateResizeHandlePadding=Ua;r.calculateScreenSpaceBasisLength2=Ma;r.createArrowGeometry=Za;r.createGridVisualElement=function(R){return new da.SlicePlaneVisualElement({view:R,attached:!1,backgroundColor:[...G.PLANE_BACKGROUND_COLOR],gridColor:G.GRID_COLOR,gridWidth:4,renderOccluded:S.RenderOccludedFlag.OccludeAndTransparent})};r.createOutlineVisualElement=function(R){return new ha.LineVisualElement({view:R,attached:!1,color:G.PLANE_OUTLINE_COLOR,
width:G.PLANE_OUTLINE_WIDTH,writeDepthEnabled:!1,renderOccluded:S.RenderOccludedFlag.OccludeAndTransparent,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})};r.createPlane=function(R,ra,ya,na,ta,Da,Aa,Ha){Aa=Aa.worldUpAtPosition(R,y.sv3d.get());va(ra,Aa,ta,Da,Ha.basis1,Ha.basis2);D.scale(Ha.basis1,Ha.basis1,ya);D.scale(Ha.basis2,Ha.basis2,na);D.copy(Ha.origin,R);C.fromVectorsAndPoint(Ha.basis2,Ha.basis1,Ha.origin,Ha.plane);return Ha};r.createResizeManipulator=function(R,ra){const ya=(ra=
Oa(ra))?[J.fromValues(1,0,0),J.fromValues(0,0,0),J.fromValues(0,1,0)]:[J.fromValues(1,0,0),J.fromValues(-1,0,0)],na=G.RESIZE_HANDLE_COLOR;var ta=Ca=>new oa.RibbonLineMaterial({color:na,width:Ca,renderOccluded:S.RenderOccludedFlag.OccludeAndTransparent});const Da=()=>new ja.NativeLineMaterial({color:na,renderOccluded:S.RenderOccludedFlag.OccludeAndTransparent}),Aa=ra?G.RESIZE_HANDLE_CORNER_WIDTH:G.RESIZE_HANDLE_EDGE_WIDTH,Ha=Aa*G.DISPLAY_FOCUS_MULTIPLIER,Ka=G.RESIZE_HANDLE_EDGE_WIDTH;ta=[new ca.RenderObject(Y.createPolylineGeometry(1<
Aa?ta(Aa):Da(),ya),qa.ManipulatorStateFlags.Unfocused|La),new ca.RenderObject(Y.createPolylineGeometry(1<Ha?ta(Ha):Da(),ya),qa.ManipulatorStateFlags.Focused|La),new ca.RenderObject(Y.createPolylineGeometry(1<Ka?ta(Ka):Da(),ya),Na)];R=new T.Manipulator3D({view:R,renderObjects:ta,collisionType:{type:"line",paths:[ya]},radius:ra?G.RESIZE_HANDLE_CORNER_INPUT_RADIUS:G.RESIZE_HANDLE_EDGE_INPUT_RADIUS,...ia.worldScaledManipulatorSettings});R.state=La;return R};r.createRotateManipulator=function(R,ra){R=
ia.createRotateManipulator(R,{customStateMask:pa,texture:ra});R.state=pa;return R};r.createRotatePlane=function(R,ra,ya,na){ra=ra.worldUpAtPosition(R.origin,y.sv3d.get());const ta=y.sv3d.get();switch(ya){case r.RotationAxis.HEADING:D.copy(ta,ra);break;case r.RotationAxis.TILT:D.copy(ta,R.basis1)}return C.fromPositionAndNormal(R.origin,ta,na)};r.createShiftManipulator=function(R,ra=r.OffsetMode.CENTER_ON_ARROW){var ya=ra===r.OffsetMode.CENTER_ON_CALLOUT?G.SHIFT_RESTART_OFFSET_DISTANCE:0,na=[J.fromValues(ya,
0,-G.SHIFT_RESTART_ARROW_LENGTH/2),J.fromValues(ya,0,G.SHIFT_RESTART_ARROW_LENGTH/2)];ra=Ra(na,!0);const ta=Za(na,0,!1);na=Za(na,G.SHIFT_RESTART_ARROW_OUTLINE_WIDTH,!0);const Da=new ja.NativeLineMaterial({color:G.SHIFT_RESTART_CALLOUT_COLOR,renderOccluded:S.RenderOccludedFlag.OccludeAndTransparent}),Aa=Y.createPolylineGeometry(Da,[[ya,0,0],[ya-G.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]);ya=Y.createPolylineGeometry(Da,[[ya,0,0],[ya-G.SHIFT_RESTART_OFFSET_DISTANCE,0,0]]);return new T.Manipulator3D({view:R,
renderObjects:[...ta.normal.map(Ha=>new ca.RenderObject(Ha,qa.ManipulatorStateFlags.Unfocused|pa)),...na.normal.map(Ha=>new ca.RenderObject(Ha,qa.ManipulatorStateFlags.Unfocused|pa)),new ca.RenderObject(Aa,qa.ManipulatorStateFlags.Unfocused|pa|Ba),...ta.focused.map(Ha=>new ca.RenderObject(Ha,qa.ManipulatorStateFlags.Focused|pa)),...na.focused.map(Ha=>new ca.RenderObject(Ha,qa.ManipulatorStateFlags.Focused|pa)),new ca.RenderObject(ya,qa.ManipulatorStateFlags.Focused|pa|Ba)],autoScaleRenderObjects:!1,
collisionType:{type:"line",paths:[ra]},collisionPriority:1,radius:G.SHIFT_RESTART_TIP_RADIUS,state:pa})};r.createShiftPlane=function(R,ra,ya,na){ya=D.cross(y.sv3d.get(),ra,ya);D.cross(ya,ya,ra);return C.fromPositionAndNormal(R,ya,na)};r.forceHorizontalOrVertical=Ja;r.isDiagonalResizeHandle=Oa;r.isIBuildingSceneLayerView3D=function(R){return B.isSome("building-scene-3d"===R.type?R:null)};r.normalToBases=va;r.planeToExtent=function(R,ra,ya){if(B.isNone(R))return null;const na=R.origin,ta=y.sv3d.get(),
Da=y.sv3d.get(),Aa=y.sv3d.get(),Ha=y.sv3d.get();D.add(ta,na,R.basis1);D.add(ta,ta,R.basis2);D.add(Da,na,R.basis1);D.sub(Da,Da,R.basis2);D.sub(Aa,na,R.basis1);D.sub(Aa,Aa,R.basis2);D.sub(Ha,na,R.basis1);D.add(Ha,Ha,R.basis2);let Ka,Ca,Wa,g,z,l;for(const c of[ta,Da,Aa,Ha]){R=ra.fromRenderCoords(c,c,ya);if(B.isNone(R))return null;Ka=null==Ka?R[0]:Math.min(Ka,R[0]);Ca=null==Ca?R[0]:Math.max(Ca,R[0]);Wa=null==Wa?R[1]:Math.min(Wa,R[1]);g=null==g?R[1]:Math.max(g,R[1]);z=null==z?R[2]:Math.min(z,R[2]);l=null==
l?R[2]:Math.max(l,R[2])}return new ua({xmin:Ka,xmax:Ca,ymin:Wa,ymax:g,zmin:z,zmax:l,spatialReference:ya})};r.planeToShape=function(R,ra,ya,na=new w){if(B.isNone(R))return null;const {renderCoordsHelper:ta}=ra;var Da=ta.fromRenderCoords(R.origin,ra.spatialReference);if(B.isNone(Da))return null;Da=U.tryProjectWithZConversion(Da,ya);if(B.isNone(Da))return null;na.position=Da;Da=2*D.length(R.basis1);const Aa=2*D.length(R.basis2);ra=X.RenderCoordsHelper.renderUnitScaleFactor(ra.spatialReference,ya);na.width=
Da*ra;na.height=Aa*ra;ra=ta.worldUpAtPosition(R.origin,y.sv3d.get());na.tilt=P.rad2deg(L.angleAroundAxis(ra,R.basis2,R.basis1)+Va);na.heading=ta.headingAtPosition(R.origin,R.basis1)-90;return na};r.projectAndElevationAlignShape=xa;r.projectedShapeToPlane=za;r.resizeNormal=La;r.resizeOutlineOnly=Na;r.resizePlane=function(R,ra,ya,na,ta,Da){const Aa=D.copy(y.sv3d.get(),ta.origin);D.add(Aa,Aa,D.scale(y.sv3d.get(),ta.basis1,0>R.direction[0]?1:-1));D.add(Aa,Aa,D.scale(y.sv3d.get(),ta.basis2,0>R.direction[1]?
1:-1));var Ha=D.length(ta.basis1);const Ka=D.length(ta.basis2);ya=D.subtract(y.sv3d.get(),ya,Aa);var Ca=D.subtract(y.sv3d.get(),ra,Aa);let Wa=0;ra=0;if(Oa(R)){var g=Ua(ta);const z=Ua(Da);Wa=Ha-.5*R.direction[0]*D.dot(ta.basis1,Ca)/Ha;ra=Ka-.5*R.direction[1]*D.dot(ta.basis2,Ca)/Ka;Ca=z/g;Wa*=Ca;ra*=Ca}Ca=.5*R.direction[0]*D.dot(ta.basis1,ya)/Ha;g=.5*R.direction[1]*D.dot(ta.basis2,ya)/Ka;ya=Wa+Ca;ra+=g;Ha=D.scale(y.sv3d.get(),ta.basis1,ya/Ha);ta=D.scale(y.sv3d.get(),ta.basis2,ra/Ka);(0>=ya||Ma(Da.origin,
Ha,na)<=G.PLANE_MIN_BASIS_SCREEN_LEN2)&&D.copy(Ha,Da.basis1);(0>=ra||Ma(Da.origin,ta,na)<=G.PLANE_MIN_BASIS_SCREEN_LEN2)&&D.copy(ta,Da.basis2);na=D.copy(y.sv3d.get(),Aa);D.add(na,na,D.scale(y.sv3d.get(),Ha,0>R.direction[0]?-1:1));D.add(na,na,D.scale(y.sv3d.get(),ta,0>R.direction[1]?-1:1));return Q.fromValues(na,Ha,ta,Da)};r.shapeToPlane=function(R,ra,ya,na=Q.create()){R=xa(R,ra);return B.isNone(R)?null:za(R,ra,ya,na)};r.updateResizeHandle=function(R,ra,ya,na){var ta=D.length(na.basis1);const Da=D.length(na.basis2),
Aa=Ua(na),Ha=Ua(na),Ka=D.set(y.sv3d.get(),0,0,0);D.add(Ka,D.scale(y.sv3d.get(),na.basis1,ra.direction[0]),D.scale(y.sv3d.get(),na.basis2,ra.direction[1]));D.add(Ka,na.origin,Ka);na=0;let Ca=1;Oa(ra)?(1===ra.direction[0]&&-1===ra.direction[1]?na=Va:1===ra.direction[0]&&1===ra.direction[1]?na=Math.PI:-1===ra.direction[0]&&1===ra.direction[1]&&(na=3*Math.PI/2),Ca=Ha):(ra=0!==ra.direction[0]?1:2,na=1===ra?Va:0,Ca=(1===ra?Da:ta)-Aa);ta=x.fromZRotation(y.sm4d.get(),na);x.scale(ta,ta,D.set(y.sv3d.get(),
Ca,Ca,Ca));x.multiply(ta,ya,ta);ta[12]=0;ta[13]=0;ta[14]=0;R.modelTransform=ta;R.renderLocation=Ka};r.updateRotateHeadingHandle=function(R,ra,ya,na){na=na.worldUpAtPosition(ya.origin,y.sv3d.get());const ta=Ta(ya,Ia.POSITIVE_X),Da=x.fromZRotation(y.sm4d.get(),ta.edge*Math.PI/2);x.rotateX(Da,Da,-(L.angleAroundAxis(na,ya.basis2,ya.basis1)+Va));x.multiply(Da,ra,Da);Da[12]=0;Da[13]=0;Da[14]=0;R.modelTransform=Da;R.renderLocation=ta.position};r.updateRotateTiltHandle=function(R,ra,ya){ya=Ta(ya,Ia.POSITIVE_Y);
const na=x.fromZRotation(y.sm4d.get(),ya.edge*Math.PI/2);x.rotateX(na,na,Va);x.multiply(na,ra,na);na[12]=0;na[13]=0;na[14]=0;R.modelTransform=na;R.renderLocation=ya.position};r.updateShiftRestartHandle=function(R,ra,ya,na){var ta=Ta(ya,Ia.NEGATIVE_X);const Da=y.sm4d.get();x.rotateZ(Da,ra,ta.edge*Math.PI/2);ra=D.normalize(y.sv3d.get(),ta.basis);ra=D.scale(y.sv3d.get(),ra,ta.direction*na.computeScreenPixelSizeAt(ta.position)*G.SHIFT_RESTART_OFFSET_DISTANCE);D.add(ra,ra,ta.position);ta=na.projectToRenderScreen(ra,
u.castRenderScreenPointArray3(y.sv3d.get()));const [Aa,Ha,Ka,Ca]=na.viewport;var Wa=Math.min(Ka,Ca)/16;let g=!0;ta[0]<Aa+Wa?(ta[0]=Aa+Wa,g=!1):ta[0]>Aa+Ka-Wa&&(ta[0]=Aa+Ka-Wa,g=!1);ta[1]<Ha+Wa?(ta[1]=Ha+Wa,g=!1):ta[1]>Ha+Ca-Wa&&(ta[1]=Ha+Ca-Wa,g=!1);Wa=g;O.fromRender(na,ta,Pa);D.normalize(Pa.direction,Pa.direction);na=y.sv3d.get();!Wa&&Q.intersectRay(ya,Pa,na)&&(ra=na);Da[12]=0;Da[13]=0;Da[14]=0;R.modelTransform=Da;R.renderLocation=J.clone(ra);R.state=Wa?R.state|Ba:R.state&~Ba};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/analysis/SlicePlane":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../geometry ../core/Clonable ../core/Cyclical ../core/JSONSupport ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/persistable ../geometry/Point".split(" "),function(r,V,w,N,A,P,
B,u,x,H,I,D,J,U){w=function(M){function Q(C){C=M.call(this,C)||this;C.type="plane";C.position=null;C.heading=0;C.tilt=0;C.width=10;C.height=10;return C}r._inheritsLoose(Q,M);Q.prototype.equals=function(C){return this.heading===C.heading&&this.tilt===C.tilt&&B.equalsMaybe(this.position,C.position)&&this.width===C.width&&this.height===C.height};return Q}(N.ClonableMixin(P.JSONSupport));V.__decorate([u.property({readOnly:!0,json:{read:!1,write:!0}})],w.prototype,"type",void 0);V.__decorate([u.property({type:U}),
J.persistable()],w.prototype,"position",void 0);V.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:360}}),J.persistable(),x.cast(M=>A.cyclicalDegrees.normalize(D.ensureNumber(M),0,!0))],w.prototype,"heading",void 0);V.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:360}}),J.persistable(),x.cast(M=>A.cyclicalDegrees.normalize(D.ensureNumber(M),0,!0))],w.prototype,"tilt",void 0);V.__decorate([u.property({type:Number,nonNullable:!0}),J.persistable()],w.prototype,
"width",void 0);V.__decorate([u.property({type:Number,nonNullable:!0}),J.persistable()],w.prototype,"height",void 0);return w=V.__decorate([I.subclass("esri.analysis.SlicePlane")],w)})},"esri/views/3d/analysis/Slice/sliceToolConfig":function(){define(["exports","../../../../core/has","../../../../core/mathUtils","../../../../chunks/vec3f64","../../../../chunks/vec4f64"],function(r,V,w,N,A){V=V("mac")?"Meta":"Control";const P=Math.cos(w.deg2rad(45));w=Math.cos(w.deg2rad(5));const B=N.fromValues(1,
.5,0);N=A.fromArray([...B,.7]);const u=A.fromArray([...B,.5]),x=A.fromValues(1,1,1,1),H=A.fromValues(1,.8,.6,1),I=A.fromValues(1,.93,.86,1),D=A.fromArray([...B,1]),J=A.fromArray([...B,1]);A=A.fromArray([...B,1]);r.DISPLAY_FOCUS_MULTIPLIER=2;r.GRID_COLOR=u;r.INITIAL_DEPTH_OFFSET_FRAC=.02;r.INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION=.4;r.PLANE_BACKGROUND_COLOR=[0,0,0,.04];r.PLANE_MIN_BASIS_SCREEN_LEN2=1600;r.PLANE_OUTLINE_COLOR=N;r.PLANE_OUTLINE_WIDTH=1;r.PLANE_PREVIEW_OUTLINE_WIDTH=2;r.POINTER_MOVE_TIMER_MS=
2500;r.PREVIEW_FADE_DOT_THRESHOLD=.95;r.PREVIEW_FADE_DURATION_SECONDS=.3;r.RESIZE_HANDLE_COLOR=A;r.RESIZE_HANDLE_CORNER_INPUT_RADIUS=6;r.RESIZE_HANDLE_CORNER_WIDTH=4;r.RESIZE_HANDLE_EDGE_INPUT_RADIUS=4;r.RESIZE_HANDLE_EDGE_PADDING_FRAC=.3;r.RESIZE_HANDLE_EDGE_WIDTH=1;r.SHIFT_RESTART_ARROW_CAP_COLOR=H;r.SHIFT_RESTART_ARROW_LENGTH=48;r.SHIFT_RESTART_ARROW_OUTLINE_WIDTH=2.25;r.SHIFT_RESTART_ARROW_TIP_COLOR=x;r.SHIFT_RESTART_CALLOUT_COLOR=D;r.SHIFT_RESTART_OFFSET_DISTANCE=40;r.SHIFT_RESTART_OUTLINE_COLOR=
J;r.SHIFT_RESTART_TIP_FOCUS_MULTIPLIER=1.15;r.SHIFT_RESTART_TIP_LENGTH=22.5;r.SHIFT_RESTART_TIP_RADIUS=11;r.SHIFT_RESTART_TUBE_COLOR=I;r.SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER=1.15;r.SHIFT_RESTART_TUBE_RADIUS=3;r.SMALL_ANGLE_DOT_THRESHOLD=w;r.VERTICAL_DOT_THRESHOLD=P;r.forceHorizontalModifier=V;r.forceVerticalModifier="Shift";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/support/projectionUtils":function(){define(["exports","../../../../core/maybe","../../../../geometry/projection",
"../../support/ElevationProvider"],function(r,V,w,N){r.applyProjectionAndElevationAlignment=function(A,P,B,u=!1){A=w.tryProjectWithZConversion(A,P);if(V.isNone(A))return null;A.hasZ&&!u||!V.isSome(B)||(A.z=V.unwrapOr(N.getElevationAtPoint(B,A),0));return A};r.logFailedGeometryProjectionError=function(A,P,B){B.warnOnce(`Failed to project analysis geometry (id: '${A.id}'), projection from spatial reference `+`(wkid: '${P.wkid}') to view spatial reference is not supported. `+"Projection may be possible after calling projection.load().")};
Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/LineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../support/engineContent/line ../../webgl-engine/lib/Material ../../webgl-engine/materials/RibbonLineMaterial".split(" "),function(r,
V,w,N,A,P,B,u,x,H,I,D){x=function(U){function M(C,E){var L=U.call(this,C)||this;L._hasExternalMaterial=!1;L._hasExternalMaterial=w.isSome(E);L._material=w.isSome(E)?E:new D.RibbonLineMaterial({width:1,color:u.fromValues(1,0,1,1),stippleOffColor:null,stipplePattern:null,stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerColor:null,innerWidth:1,hasPolygonOffset:!1,renderOccluded:I.RenderOccludedFlag.OccludeAndTransparent,writeDepth:!0});L.applyProps(C);return L}V._inheritsLoose(M,U);var Q=M.prototype;
Q.setGeometryFromRenderSpacePoint=function(C,E=1E3){this.geometry=[[[C[0]-E,C[1]+0,C[2]+0],[C[0]+E,C[1]+0,C[2]+0]],[[C[0]-0,C[1]-E,C[2]+0],[C[0]+0,C[1]+E,C[2]+0]],[[C[0]-0,C[1]+0,C[2]-E],[C[0]+0,C[1]+0,C[2]+E]]]};Q.setGeometryFromExtent=function(C){const E=this.view.spatialReference,L=B.create(),y=B.create(),G=[];P.set(L,C[0],C[1],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],y[1],y[2]]);P.set(L,C[2],C[1],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],
y[1],y[2]]);P.set(L,C[2],C[3],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],y[1],y[2]]);P.set(L,C[0],C[3],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],y[1],y[2]]);P.set(L,C[0],C[1],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],y[1],y[2]]);P.set(L,C[0],C[1],100);this.view.renderCoordsHelper.toRenderCoords(L,E,y);G.push([y[0],y[1],y[2]]);this.geometry=[G]};Q.setGeometryFromFrustum=function(C){const E=[];C.lines.forEach(L=>{E.push([L.origin[0],
L.origin[1],L.origin[2]]);E.push([L.endpoint[0],L.endpoint[1],L.endpoint[2]])});this.geometry=[E]};Q.setGeometryFromBoundedPlane=function(C){const E=[],L=C.origin,y=C.basis1;C=C.basis2;const G=B.create(),Z=B.create(),T=B.create(),ia=B.create();G[0]=L[0]-.5*y[0]-.5*C[0];G[1]=L[1]-.5*y[1]-.5*C[1];G[2]=L[2]-.5*y[2]-.5*C[2];Z[0]=L[0]-.5*y[0]+.5*C[0];Z[1]=L[1]-.5*y[1]+.5*C[1];Z[2]=L[2]-.5*y[2]+.5*C[2];T[0]=L[0]+.5*y[0]+.5*C[0];T[1]=L[1]+.5*y[1]+.5*C[1];T[2]=L[2]+.5*y[2]+.5*C[2];ia[0]=L[0]+.5*y[0]-.5*C[0];
ia[1]=L[1]+.5*y[1]-.5*C[1];ia[2]=L[2]+.5*y[2]-.5*C[2];E.push([G[0],G[1],G[2]]);E.push([Z[0],Z[1],Z[2]]);E.push([T[0],T[1],T[2]]);E.push([ia[0],ia[1],ia[2]]);E.push([G[0],G[1],G[2]]);this.geometry=[E]};Q.setGeometryFromSegment=function(C){const E=C.endRenderSpace;this.transform=N.fromTranslation(J,E);({points:C}=C.createRenderGeometry(E,this.view.renderCoordsHelper));this.geometry=[C]};Q.setGeometryFromSegments=function(C,E=B.ZEROS){this.transform=N.fromTranslation(J,E);this.geometry=C.map(L=>L.createRenderGeometry(E,
this.view.renderCoordsHelper).points)};Q.getTransformedGeometry=function(){return w.isNone(this._geometry)?null:this._geometry.map(C=>C.map(E=>P.transformMat4(B.create(),E,this.transform)))};Q.createExternalResources=function(){};Q.destroyExternalResources=function(){};Q.createGeometries=function(C){for(const E of H.lineStripsToParameters(this.geometry)){const L=H.createGeometry(w.unwrap(this._material),E);C.addGeometry(L)}};Q.forEachExternalMaterial=function(C){this._hasExternalMaterial||C(w.unwrap(this._material))};
V._createClass(M,[{key:"renderOccluded",get:function(){return this._material.parameters.renderOccluded},set:function(C){this._material.setParameters({renderOccluded:C})}},{key:"geometry",get:function(){return this._geometry},set:function(C){this._geometry=C;this.recreateGeometry()}},{key:"width",get:function(){return this._material.parameters.width},set:function(C){this._material.setParameters({width:C})}},{key:"color",get:function(){return this._material.parameters.color},set:function(C){this._material.setParameters({color:u.clone(C)})}},
{key:"innerWidth",get:function(){return this._material.parameters.innerWidth},set:function(C){this._material.setParameters({innerWidth:C})}},{key:"innerColor",get:function(){return this._material.parameters.innerColor},set:function(C){this._material.setParameters({innerColor:w.isSome(C)?u.clone(C):null})}},{key:"stipplePattern",get:function(){return this._material.parameters.stipplePattern},set:function(C){w.isSome(this._material)&&this._material.setParameters({stipplePattern:C})}},{key:"stippleOffColor",
get:function(){return this._material.parameters.stippleOffColor},set:function(C){this._material.setParameters({stippleOffColor:w.isSome(C)?u.clone(C):null})}},{key:"stipplePreferContinuous",get:function(){return this._material.parameters.stipplePreferContinuous},set:function(C){this._material.setParameters({stipplePreferContinuous:C})}},{key:"writeDepthEnabled",get:function(){return this._material.parameters.writeDepth},set:function(C){this._material.setParameters({writeDepth:C})}},{key:"falloff",
get:function(){return this._material.parameters.falloff},set:function(C){this._material.setParameters({falloff:C})}},{key:"polygonOffset",get:function(){return this._material.parameters.hasPolygonOffset},set:function(C){this._material.setParameters({hasPolygonOffset:C})}}]);return M}(x.Object3DVisualElement);const J=A.create();r.LineVisualElement=x;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/visualElements/SlicePlaneVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec4 ../../../../chunks/vec4f64 ./Object3DVisualElement ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/SlicePlaneMaterial".split(" "),
function(r,V,w,N,A,P,B,u,x){P=function(H){function I(J){var U=H.call(this,J)||this;U._material=null;U._renderOccluded=u.RenderOccludedFlag.OccludeAndTransparent;U._gridWidth=1;U._gridColor=A.fromValues(1,0,0,1);U._backgroundColor=A.fromValues(1,0,0,1);U.applyProps(J);return U}V._inheritsLoose(I,H);var D=I.prototype;D.createExternalResources=function(){this._material=new x.SlicePlaneMaterial(this._materialParameters)};D.destroyExternalResources=function(){this._material=null};D.forEachExternalMaterial=
function(J){w.isSome(this._material)&&J(this._material)};D.createGeometries=function(J){if(w.isSome(this._material)){const U=B.createSquareGeometry(this._material);J.addGeometry(U)}};D._updateMaterial=function(){w.isSome(this._material)&&this._material.setParameters(this._materialParameters)};V._createClass(I,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(J){J!==this._renderOccluded&&(this._renderOccluded=J,this._updateMaterial())}},{key:"gridWidth",get:function(){return this._gridWidth},
set:function(J){this._gridWidth!==J&&(this._gridWidth=J,this._updateMaterial())}},{key:"gridColor",get:function(){return this._gridColor},set:function(J){N.copy(this._gridColor,J);this._updateMaterial()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(J){N.copy(this._backgroundColor,J);this._updateMaterial()}},{key:"_materialParameters",get:function(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}}]);
return I}(P.Object3DVisualElement);r.SlicePlaneVisualElement=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/SlicePlaneMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ./DefaultBufferWriter ./DefaultLayouts ./TriangleMaterial ../shaders/SlicePlaneMaterialTechnique".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D){I=function(M){function Q(E){E=M.call(this,E,new U)||this;E._configuration=new A.ShaderTechniqueConfiguration;return E}V._inheritsLoose(Q,M);var C=Q.prototype;C.createBufferWriter=function(){return new x.DefaultBufferWriter(H.PositionUVLayout)};C.requiresSlot=function(E,L){return L===N.ShaderOutput.Color&&E===u.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL};C.createGLMaterial=function(E){return new J(E)};C.getConfiguration=function(){return this._configuration};
return Q}(I.TriangleMaterial);let J=function(M){function Q(C){C=M.call(this,C)||this;C.ensureTechnique(D.SlicePlaneMaterialTechnique,null);return C}V._inheritsLoose(Q,M);Q.prototype.beginSlot=function(){return w.unwrap(this.technique)};return Q}(P),U=function(M){function Q(){var C=M.apply(this,arguments)||this;C.renderOccluded=B.RenderOccludedFlag.Occlude;return C}V._inheritsLoose(Q,M);return Q}(D.SlicePlaneMaterialPassParameters);r.Parameters=U;r.SlicePlaneMaterial=I;Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec4f64 ../core/shaderModules/interfaces ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/DefaultVertexAttributeLocations ../lib/Program ../../../../chunks/SlicePlaneMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(r,V,w,N,A,P,B,u,x,H,I,
D){A=function(J){function U(){var M=J.apply(this,arguments)||this;M.backgroundColor=N.fromValues(1,0,0,.5);M.gridColor=N.fromValues(0,1,0,.5);M.gridWidth=4;return M}w._inheritsLoose(U,J);return U}(A.NoParameters);B=function(J){function U(){return J.apply(this,arguments)||this}w._inheritsLoose(U,J);var M=U.prototype;M.initializeProgram=function(Q){return new x.Program(Q.rctx,U.shader.get().build(this.configuration),u.Default3D)};M.initializePipeline=function(){return D.makePipelineState({blending:D.separateBlendingParams(I.BlendFactor.ONE,
I.BlendFactor.ONE,I.BlendFactor.ONE_MINUS_SRC_ALPHA,I.BlendFactor.ONE_MINUS_SRC_ALPHA),depthTest:{func:I.CompareFunction.LESS},colorWrite:D.defaultColorWriteParams})};return U}(B.ShaderTechnique);B.shader=new P.ReloadableShaderModule(H.SlicePlaneMaterial,()=>new Promise((J,U)=>r(["./SlicePlaneMaterial.glsl"],J,U)));V.SlicePlaneMaterialPassParameters=A;V.SlicePlaneMaterialTechnique=B;Object.defineProperty(V,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/SlicePlaneMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(r,V,w,N,A,P,B){function u(H){const I=new P.ShaderBuilder;I.extensions.add("GL_OES_standard_derivatives");const {vertex:D,fragment:J,attributes:U,varyings:M}=I;V.addProjViewLocalOrigin(D,H);U.add(B.VertexAttribute.POSITION,"vec3");U.add(B.VertexAttribute.UV0,"vec2");M.add("vUV","vec2");D.code.add(A.glsl`void main(void) {
vUV = uv0;
gl_Position = proj * view * vec4(position, 1.0);
}`);J.uniforms.add([new w.Float4PassUniform("backgroundColor",Q=>Q.backgroundColor),new w.Float4PassUniform("gridColor",Q=>Q.gridColor),new N.FloatPassUniform("gridWidth",Q=>Q.gridWidth)]);J.code.add(A.glsl`void main() {
const float LINE_WIDTH = 1.0;
vec2 uvScaled = vUV * gridWidth;
vec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));
vec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);
grid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);
grid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);
float gridFade = max(grid.x, grid.y);
float gridAlpha = gridColor.a * gridFade;
gl_FragColor =
vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +
vec4(gridColor.rgb, 1.0) * gridAlpha;
}`);return I}const x=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}));r.SlicePlaneMaterial=x;r.build=u})},"esri/views/3d/analysis/Slice/images/Factory":function(){define(["exports","./heading-rotate-png","./tilt-rotate-png","../../../webgl-engine/lib/Texture"],function(r,V,w,N){const A={mipmap:!0,preMultiplyAlpha:!0,width:64,height:64};r.getRotateHeadingTexture=function(P){return P.fromData(V,()=>new N.Texture(V,A))};r.getTiltRotateTexture=function(P){return P.fromData(w,
()=>new N.Texture(w,A))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/analysis/Slice/images/heading-rotate-png":function(){define(function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAnFBMVEUAAAD/gAD/gAD/cAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/gAD/fAD/gAD/fAD/gAD/fAD/fQD/fQD/fQD/fQD/fQD/fgD/jR7/mjn/mjf/p1H/plH/smf/sWb/vHr/u3n/xYz/xIv/zZz/zJv/zJr/1Kv/1Kr/06r/06n/27n/27f/4cX/4cT/59D/7dr/8uX/9u7/+/f////u2EN0AAAAM3RSTlMACBAQICAoKDAwODhAQEhIUFBYYGhweICIkJCXmJ+gp6ivsLe4uL+/wMDHx8/P19/n7/cWvjXwAAACeUlEQVR42tWX3XqiMBCGY2pbtbrUnzhhdak/lHWliJD7v7fdJ+KG5AMhh30P8zCTmS+TycDaeBoHi5Wgf4jVYvbKmRfPgSAHMX9mPRnM1tSIGHM/c2QddLp4c8wxCvYIvqROBPfbHlm/sRYC6smMNTKn3sxZAyvyYNW1v38MM/IkcPQnZHPMLtciz9P9hhqwzoLD+cnfpTIUaYinyZlBkE2YKZcMXCyN/YhsPkuFlMfWJLiwo89VMxfpJDForMCwuG+Zx7ttGO2S/w4LJ42ZURDty5M0a4dqsZAQAihQfXqWdlhnpcmdEPAI0tv2EbnsbsKmdgi6/1GN7T1XJLx5sF0P9SWABMC+co5JBE4Ge/1NTM3EGIJgjFONXCdAbeQYwhN7pRrRV20LJNIhWOczdu+xPFzIBiQ62iIsyIOTvlZUY+HXySLQaMUEeSC1CPYxENIlwk+q8e0clFAIfiKG+qpaIvod4wfU8sqvkDLda+xCCqgDaAk7uyeNqD+feFlfGCcg3Hzsk+xS7Nz1Aq4CcauhhMc0uxaqIgcFsF0J+1WQyoCN7Y9ezeCVH5LhSxmyRvsihKbK1m7LafpSpkpj6yJgtsiVBh6AX5UyCVmMbrNpcwj5/h6DPN79JjAiQAhXVeN6SZI0q5bQnn4wBiHEqpUybp1ZJzWxStVCHhKhAhVLp/Emh6trHpGLaB6yZHk7wu3Z+ChOxhwUNEmYYjpUvqJDksSHraQmJm2DdqQK6sGUObybYtpSN+8Phm3pN2xjDH33R6b0CKxAZNLvl8foD3BBnSw5e8RI+G2P8GD9wHw6YN3wkfA0R4Zz8CGCIfOCv8zM738walXuLw6nXBvPr8wvAAAAAElFTkSuQmCC"})},
"esri/views/3d/analysis/Slice/images/tilt-rotate-png":function(){define(function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACtVBMVEUAAAD/AAD/gAD/VQD/gAD/gAD/bQD/gAD/cQD/gAD/dAD/gAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/fAD/gAD/gAD/fAD/gAD/fQD/fQD/gAD/fQD/egD/fQD/gAD/egD/fQD/gAD/ewD/gAD/ewD/gAD/ewD/fQD/fQD/gAD/ewD/fQD/gAD/fAD/gAD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/fQD/fQD/fgD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/gAL/fgD/gAb/gAT/gwr/hAz/hxH/hQ//iBX/iBP/ixn/iRf/jBr/jR7/jyP/jyL/kif/kCX/kyr/lS7/lCz/ljH/li//mTX/nDr/mjn/nTz/oEL/okf/o0r/pU3/pU7/qFL/plH/qFX/q1j/q1r/rl7/sGL/rmH/s2v/tW//tW7/t3L/uHL/unb/unf/vHv/vX3/v4D/vX7/v4D/wYT/v4L/wYX/x4//x5H/yZX/y5n/zZv/y5n/zJv/zZ3/zp//0aL/z6H/1Kr/1av/06r/1q//17H/2bT/2LP/2rb/27n/3bz/3r7/37//4MH/38D/4ML/4sX/4sb/4sf/48n/5cv/48r/5cz/5s7/6dT/6tb/69j/69n/7Nn/7dv/7dz/7t7/7t3/7+H/7+D/7+H/8eL/8uX/8uX/8ub/8+j/8+f/9On/9er/9Or/9ez/9e3/9ez/9u7/9e3/9+//9+7/+PD/+PH/+fT/+fL/+vb/+vX/+vb/+/f/+vb//Pn/+/j//Pr//Pn//fv//Pr//fv//v3//fz//////v7//v3///8ZYzD6AAAA5nRSTlMAAQIDBAYHCAkKCwwQERITGBkaGyUmKCkqKy0uLzAxMjIzNDQ2Njg4OTs+Pj9AQEJCQ0RERUZHUlJTVFVWWFlfYGFiY2RlZmdoaWprbG1ucHFyc3R1dnd4eXp8f4CAgYGCg4SEhYWGhoeIiYmKiouMjI2Nj5CQkZOUlZaXmJiZmpudnp6io6OkpaanqKmqqqusrK2xs7W2t7e4ubq7u7/AwMLExcXGyMrLzM3NztDR0tPU1NXW29zd3t/g4eLi5OTl5ufo6erq6+zs7e7u7+/w8PHy9PT29vf4+Pn5+vr7+/z9/f7+/pNrFTEAAAO8SURBVHjaldf5W1RVGAfwl4kGxa2yIDPbF82EJhkVUEOiUiDMcJa482XCijStNLLVpoWCbLHFaZUoMSkq2wgtW8mobFcryiiWkffv6J557jh3zj33zvD56f3h3vM873nP+z7nkJ3cPE9JxdX+OgSWX15aMG0CjcnUoiuRSls2byplyH1eDZSqZrkz+d0ThC1/QQ45c521Eo58p5GTSZcirbIpZGtGEBkI5pNaVhEyo3mzSCF7ITJW7CKLYxbDTsPG5qe33QezxdkkySqGndYY615CilI5Cy9sRVjYgVRzKcXJGmzdwsKHkEwnkylB2AsNse5zSIITKWkJnPzCut8gW5IsxRlw9CnrRuohO5MM43xw9D4Lt0JWm2jOOXD2Ogv3w6LQaGA/nL3AwuOwCLpJmIU0nmDheVidQ0IV0niAhQ5YVcfnH2zcCMNtLLwHheOJaB5s7OxuQlx4hHV7oeAhokrYaOeBjkYIv7LuJyhUEU3QYONFZj4YrQfwGeuGQrDSxtM0KK2N7h5koa8V+ICFdVA4SX2Kbt5xmA2j7SHsZGETFOZQqarwhzjhUAuAl1nYDIUFdAVkoe0s/LiLmT9eD91TLDwHhXJaDtmbrPvyEWzg4dfCEB5kYTsUrqIgJK8w8/C2MHDDgWYgromFXVDwkQbDRsRFhpkHWyHcBMO1oyzSgcI1VGdEd8V6o6uA8D7m2BZIDrJuPxTqKGBEnczc33nHFmZ+A7IvWDegTmEF4lb1s3Dk+wH+oxGyj1hYC6saqkDcVk74u6cJsk4W7oXVZVSCuK84aXTP5pBcGeFRWM2nQmMPOw+zyQ9t62DyLAtRWM2mPBgao1+zyVD3wyEkPMTCq7DKo/Gmdo50DbDJd22JbbudhXdgoeUSVcNkTfRbNvnv3U0QGmKs2w2LpUR0MVI1d4+wSW/0egC/i7APFkXKobq+7Wc2+avrHvSK4B/1UKUaWNQ/1nOEk2Kf7GdhNSTLSDgfKhvaDrDsbkhmkuAOQKnhmb2cqkVuBDfFeWDnzo4/2WQrUl2QuB7XwtZ1T+7ho9qRYmUOGc6Gk8hb/xoLvI0Up1KCqxyOVkf3sdADs0soaVIQaUS6Bpm/gUlgMplMR1pron39SNLyKcVcpBduCQMJXpLMx5gsdJEkexHGYJGLLFzFyFhJNilkeTVkxkM28oPIQOAUsjW5DGmVTSQnM3xwVHt6FjnLudAPW4GLMnq7zqyEUvW5x1KGTvAulSqiVRYeR2OSmz+7uKLGpwX8K8oXFJw4zu67/wFaspwc84wT2QAAAABJRU5ErkJggg\x3d\x3d"})},
"esri/views/3d/interactive/editingTools/transformGraphic/PreserveAspectRatio":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../analysis/Slice/sliceToolUtils","../../../../interactive/dragEventPipeline"],function(r,V,w,N,A){let P=function(){function B(){this._next=this._lastDragEvent=null;this._enabled=!1}var u=B.prototype;u.createDragEventPipelineStep=function(){this._lastDragEvent=null;const x=new A.EventPipeline;this._next=x;return[H=>
{this._lastDragEvent="end"!==H.action?{...H}:null;this._enabled&&this._adjustScaleFactors(H);return H},x]};u._adjustScaleFactors=function(x){const H=N.isDiagonalResizeHandle(x.handle)?Math.max(Math.abs(x.factor1),Math.abs(x.factor2)):0===x.handle.direction[0]?Math.abs(x.factor2):Math.abs(x.factor1);x.factor1=0>x.factor1?-H:H;x.factor2=0>x.factor2?-H:H};V._createClass(B,[{key:"enabled",get:function(){return this._enabled},set:function(x){if(this._enabled!==x&&w.isSome(this._lastDragEvent)&&w.isSome(this._next)){const H=
{...this._lastDragEvent,action:"update"};x&&this._adjustScaleFactors(H);this._next.execute(H)}this._enabled=x}},{key:"test",get:function(){return{_adjustScaleFactors:x=>this._adjustScaleFactors(x)}}}]);return B}();r.PreserveAspectRatio=P;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/editGeometry/support/editPlaneUtils":function(){define("exports ../../../../core/maybe ../../../../core/quantityUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ../../../../geometry/support/vectorStacks ../operations/MoveVertex ../operations/RotateVertex ../operations/ScaleVertex ../operations/UpdateVertices ../../../support/automaticLengthMeasurementUtils".split(" "),
function(r,V,w,N,A,P,B,u,x,H,I,D,J){function U(E,L,y){if(E instanceof D.UpdateVertices){if(E.operation instanceof x.MoveVertex)return M(E.operation,L,y),!0;if(E.operation instanceof H.RotateVertex)return Q(E.operation,L,y),!0;if(E.operation instanceof I.ScaleVertex)return C(E.operation,L,y),!0}return!1}function M(E,L,y=!1){y=y?-1:1;E=P.fromValues(y*E.dx,y*E.dy,y*E.dz);A.add(L.origin,L.origin,E)}function Q(E,L,y=!1){E=y?-E.angle:E.angle;A.rotateZ(L.basis1,L.basis1,P.ZEROS,E);A.rotateZ(L.basis2,L.basis2,
P.ZEROS,E)}function C(E,L,y=!1){const G=y?1/E.factor1:E.factor1;y=y?1/E.factor2:E.factor2;A.scale(L.basis1,L.basis1,G);A.scale(L.basis2,L.basis2,y);N.projectAndScale(L.origin,L.origin,E.origin,E.axis1,G);N.projectAndScale(L.origin,L.origin,E.origin,E.axis2,y)}r.apply=function(E,L){return U(E,L,!1)};r.calculateOrientedBounds=function(E,L,y,G){G||(G=B.create());const Z=N.set(u.sv2d.get(),E[1],-E[0]),T=N.set(u.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),ia=N.set(u.sv2d.get(),Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY),ca=u.sv2d.get();L.components.forEach(ha=>ha.vertices.forEach(da=>{da=da.pos;N.set(ca,N.dot(E,da),N.dot(Z,da));N.min(T,T,ca);N.max(ia,ia,ca)}));L=N.set(u.sv2d.get(),1E-6>ia[0]-T[0]?y/2:0,1E-6>ia[1]-T[1]?y/2:0);N.subtract(T,T,L);N.add(ia,ia,L);N.scale(G.basis1,E,(ia[0]-T[0])/2);N.scale(G.basis2,Z,(ia[1]-T[1])/2);N.set(G.origin,T[0]*E[0]+T[1]*Z[0],T[0]*E[1]+T[1]*Z[1]);N.add(G.origin,G.origin,G.basis1);N.add(G.origin,G.origin,G.basis2);return G};r.mapPlaneAutoHorizontalSizeByElevationMode=
function(E,L,y,G){const Z=u.sv3d.get();A.subtract(Z,A.subtract(Z,E.origin,E.basis1),E.basis2);const T=u.sv3d.get();A.scaleAndAdd(T,Z,E.basis1,2);const ia=u.sv3d.get();A.scaleAndAdd(ia,T,E.basis2,2);const ca=u.sv3d.get();A.scaleAndAdd(ca,Z,E.basis2,2);Z[2]=T[2]=ia[2]=ca[2]=L;L=G?"on-the-ground":"absolute-height";E=w.max(J.autoHorizontalDistanceByElevationMode(Z,T,y,L),J.autoHorizontalDistanceByElevationMode(ca,ia,y,L));y=w.max(J.autoHorizontalDistanceByElevationMode(T,ia,y,L),J.autoHorizontalDistanceByElevationMode(Z,
ca,y,L));return V.isNone(y)||V.isNone(E)?null:[E,y]};r.mapPlaneToRenderPlane=function(E,L,y,G=0,Z){Z||(Z=B.create());L.toRenderCoords(E.origin,y,Z.origin);var T=u.sv3d.get();A.add(T,E.origin,E.basis1);A.add(T,T,E.basis2);L.toRenderCoords(T,y,T);var ia=u.sv3d.get();A.add(ia,E.origin,E.basis1);A.subtract(ia,ia,E.basis2);L.toRenderCoords(ia,y,ia);const ca=u.sv3d.get();A.subtract(ca,E.origin,E.basis1);A.subtract(ca,ca,E.basis2);L.toRenderCoords(ca,y,ca);const ha=u.sv3d.get();A.subtract(ha,E.origin,E.basis1);
A.add(ha,ha,E.basis2);L.toRenderCoords(ha,y,ha);E=A.lerp(u.sv3d.get(),T,ia,.5);A.subtract(E,E,Z.origin);L=A.lerp(u.sv3d.get(),ca,ha,.5);A.subtract(L,Z.origin,L);A.lerp(Z.basis1,E,L,.5);T=A.lerp(u.sv3d.get(),ha,T,.5);A.subtract(T,T,Z.origin);ia=A.lerp(u.sv3d.get(),ia,ca,.5);A.subtract(ia,Z.origin,ia);A.lerp(Z.basis2,T,ia,.5);ia=A.cross(u.sv3d.get(),Z.basis1,Z.basis2);ia=A.cross(ia,ia,Z.basis1);A.normalize(ia,ia);A.scale(Z.basis2,ia,A.dot(Z.basis2,ia));A.scale(Z.basis1,Z.basis1,1+G/A.length(Z.basis1));
A.scale(Z.basis2,Z.basis2,1+G/A.length(Z.basis2));B.updateUnboundedPlane(Z);return Z};r.unapply=function(E,L){return U(E,L,!0)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/tooltip/ExtentTooltipInfos":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/quantityUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./SketchTooltipInfo".split(" "),function(r,
V,w,N,A,P,B){r.ExtentRotateTooltipInfo=function(u){function x(H){H=u.call(this,H)||this;H.type="extent-rotate";H.angle=0;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.ExtentRotateTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.ExtentRotateTooltipInfo.prototype,"angle",void 0);r.ExtentRotateTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],r.ExtentRotateTooltipInfo);r.ExtentScaleTooltipInfo=
function(u){function x(H){H=u.call(this,H)||this;H.type="extent-scale";H.xScale=0;H.yScale=0;H.xSize=N.zeroMeters;H.ySize=N.zeroMeters;return H}V._inheritsLoose(x,u);return x}(B.SketchTooltipInfo);w.__decorate([A.property()],r.ExtentScaleTooltipInfo.prototype,"type",void 0);w.__decorate([A.property()],r.ExtentScaleTooltipInfo.prototype,"xScale",void 0);w.__decorate([A.property()],r.ExtentScaleTooltipInfo.prototype,"yScale",void 0);w.__decorate([A.property()],r.ExtentScaleTooltipInfo.prototype,"xSize",
void 0);w.__decorate([A.property()],r.ExtentScaleTooltipInfo.prototype,"ySize",void 0);r.ExtentScaleTooltipInfo=w.__decorate([P.subclass("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],r.ExtentScaleTooltipInfo);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ./editingTools/draw/DrawGraphicTool3D ./editingTools/moveGraphic/GraphicMoveTool ./editingTools/reshapeGraphic/GraphicReshapeTool ./editingTools/transformGraphic/GraphicTransformTool ./editingTools/transformGraphic/ExtentTransformTool".split(" "),function(r,V,w,N,A,P){Object.defineProperty(r,"DrawGraphicTool3D",{enumerable:!0,get:()=>V.DrawGraphicTool3D});Object.defineProperty(r,"GraphicMoveTool",{enumerable:!0,get:()=>w.GraphicMoveTool});Object.defineProperty(r,"GraphicReshapeTool",
{enumerable:!0,get:()=>N.GraphicReshapeTool});Object.defineProperty(r,"GraphicTransformTool",{enumerable:!0,get:()=>A.GraphicTransformTool});Object.defineProperty(r,"ExtentTransformTool",{enumerable:!0,get:()=>P.ExtentTransformTool});Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});