// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/ray ../../../../chunks/sphere ./common ./InteractionType".split(" "),function(m,w,f,g,x,u,h,n){function p(a,b,e=h.defaultConstraintOptions){if(!a.state.isLocal)return 0;var d=a.state.constraints.distance;if(!a.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===d)return 0;k.min=0;k.max=d;d=k;var c=e.interactionType;if(c!==n.InteractionType.NONE){var {min:q,max:y}=d,{interactionStartCamera:r,
interactionFactor:z}=e;if(r){e=c===n.InteractionType.ZOOM||c===n.InteractionType.PAN;c=p(a,r);var v=0===c?0:t(a,r);d.min=q;d.max=y;h.adjustRangeForInteraction(c,v,e,z,.05*v,d)}}a=t(a,b);a=k.max-a;return-1E-6<=a?0:a}function t(a,b){a=a.pointsOfInterest.surfaceOrigin;return a.renderLocation?f.distance(b.eye,a.renderLocation):0}const k={min:0,max:0},A=g.create(),B=g.create(),C=g.create(),D=g.create(),l=g.create();m.applyDistanceConstraint=function(a,b,e=h.defaultConstraintOptions){var d=p(a,b,e);if(0===
d)return!1;var c=a.pointsOfInterest.surfaceOrigin;if(!c.renderLocation)return!1;d=t(a,b)+d;const q=f.copy(A,b.eye);e=h.interactionDirectionTowardsConstraintMinimization(b,e.interactionDirection,f.direction(D,b.eye,c.renderLocation),C);if(!u.intersectRay(u.fromCenterAndRadius(c.renderLocation,d),x.wrap(b.eye,e),l))return!1;b.eye=l;c=f.subtract(B,b.eye,q);b.center=f.add(l,b.center,c);c=a.renderCoordsHelper.getAltitude(b.center);a=a.renderCoordsHelper.intersectInfiniteManifold(b.ray,c,l);w.isSome(a)&&
(b.center=a);return!0};m.getDistanceConstraintError=p;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});