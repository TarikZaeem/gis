// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/ellipsoidUtils ../../../../geometry/projection ../../../ViewingMode ../../webgl-engine/lib/Attribute ../../webgl-engine/lib/ContentObjectType ../../webgl-engine/lib/DoubleArray ../../webgl-engine/lib/FloatArray ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/VertexAttribute".split(" "),function(v,k,z,w,x,A,B,C,D,m,E,y,F,G,d){const H=
x.create(),I=x.create();v.createGeometry=function(p,a,t=null){const g=[],e=[],q=a.mapPositions,{attributeData:{position:f},removeDuplicateStartEnd:J}=a;var b=f.length;b=f[0]===f[b-3]&&f[1]===f[b-2]&&f[2]===f[b-1]&&J;var l=f.length/3-(b?1:0),c=Array(2*(l-1)),n=b?f.slice(0,f.length-3):f,r=0;for(var h=0;h<l-1;h++)c[r++]=h,c[r++]=h+1;e.push([d.VertexAttribute.POSITION,new m.Attribute(n,3,b)]);g.push([d.VertexAttribute.POSITION,c]);l=e[0][1].data;b=Array(g[0][1].length).fill(0);k.isSome(a.attributeData.colorFeature)||
(e.push([d.VertexAttribute.COLOR,new m.Attribute(k.unwrapOr(a.attributeData.color,A.ONES),4)]),g.push([d.VertexAttribute.COLOR,b]));k.isSome(a.attributeData.sizeFeature)||(e.push([d.VertexAttribute.SIZE,new m.Attribute([k.unwrapOr(a.attributeData.size,1)],1,!0)]),g.push([d.VertexAttribute.SIZE,b]));k.isSome(a.attributeData.normal)&&(e.push([d.VertexAttribute.NORMAL,new m.Attribute(a.attributeData.normal,3)]),g.push([d.VertexAttribute.NORMAL,b]));c=a.attributeData.colorFeature;k.isNone(c)||(e.push([d.VertexAttribute.COLORFEATUREATTRIBUTE,
new m.Attribute([c],1,!0)]),g.push([d.VertexAttribute.COLOR,b]));c=a.attributeData.sizeFeature;k.isNone(c)||(e.push([d.VertexAttribute.SIZEFEATUREATTRIBUTE,new m.Attribute([c],1,!0)]),g.push([d.VertexAttribute.SIZEFEATUREATTRIBUTE,b]));c=a.attributeData.opacityFeature;k.isNone(c)||(e.push([d.VertexAttribute.OPACITYFEATUREATTRIBUTE,new m.Attribute([c],1,!0)]),g.push([d.VertexAttribute.OPACITYFEATUREATTRIBUTE,b]));if(!k.isNone(a.overlayInfo)&&a.overlayInfo.renderCoordsHelper.viewingMode===D.ViewingMode.Global&&
a.overlayInfo.spatialReference.isGeographic){b=y.newDoubleArray(l.length);a=B.getReferenceEllipsoid(a.overlayInfo.spatialReference);for(c=0;c<b.length;c+=3)C.lonLatToWebMercatorComparable(l,c,b,c,a);a=l.length/3;l=F.newFloatArray(a+1);c=H;n=I;h=r=0;w.set(c,b[h++],b[h++],b[h++]);l[0]=0;for(let u=1;u<a+1;++u)u===a&&(h=0),w.set(n,b[h++],b[h++],b[h++]),r+=z.dist(c,n),l[u]=r,[c,n]=[n,c];e.push([d.VertexAttribute.DISTANCETOSTART,new m.Attribute(l,1,!0)]);g.push([d.VertexAttribute.DISTANCETOSTART,g[0][1]])}return new G.Geometry(p,
e,g,q,E.ContentObjectType.Line,t)};v.lineStripsToParameters=function(p,a){if(k.isNone(p)||0===p.length)return[];const t=[];p.forEach(g=>{const e=y.newDoubleArray(3*g.length);g.forEach((q,f)=>{e[3*f]=q[0];e[3*f+1]=q[1];e[3*f+2]=q[2]});t.push({attributeData:{position:e,normal:a},removeDuplicateStartEnd:!1})});return t};Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});