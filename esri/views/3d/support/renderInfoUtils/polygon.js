// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/projection ../../../../geometry/support/triangulationUtils ../../layers/graphics/elevationAlignmentUtils ../../terrain/OverlayRenderer ../../webgl-engine/lib/DoubleArray".split(" "),function(k,n,p,z,l,A,B,h){function r(b,c,a=null){return b.filter(({count:f})=>1<f).map(({index:f,count:d})=>{const e=3*f,g=3*d;return p.isSome(a)?new t(f,d,h.doubleSubArray(c,e,g),h.doubleSubArray(a,e,g)):new q(f,d,
h.doubleSubArray(c,e,g))})}function u(b,c,a=null){const f=(p.isSome(a),[]);for(const {index:d,count:e,holeIndices:g,pathLengths:m}of b){if(1>=e)continue;b=3*d;const C=3*e,v=g.map(D=>D-d);b=p.isSome(a)?new w(d,e,h.doubleSubArray(c,3*d,3*e),h.doubleSubArray(a,b,C),v,m):new x(d,e,h.doubleSubArray(c,3*d,3*e),v,m);f.push(b)}return f}let q=function(b,c,a){this.index=b;this.count=c;this.position=a},t=function(b){function c(a,f,d,e){a=b.call(this,a,f,d)||this;a.mapPositions=e;return a}n._inheritsLoose(c,
b);return c}(q),w=function(b){function c(a,f,d,e,g,m){a=b.call(this,a,f,d,e)||this;a.holeIndices=g;a.pathLengths=m;return a}n._inheritsLoose(c,b);return c}(t),x=function(b){function c(a,f,d,e,g){a=b.call(this,a,f,d)||this;a.holeIndices=e;a.pathLengths=g;return a}n._inheritsLoose(c,b);return c}(q),y=function(b,c,a,f,d,e){this.position=b;this.mapPositions=c;this.polygons=a;this.outlines=f;this.projectionSuccess=d;this.sampledElevation=e};k.PolygonRenderInfo=y;k.PolygonVertexData=w;k.PolygonVertexDataDraped=
x;k.geometryToRenderInfo=function(b,c,a,f){const d=l.pathsToTriangulationInfo(b.rings,!!b.hasZ,l.CounterClockwiseMode.CCW_IS_HOLE),e=h.newDoubleArray(d.position.length);b=A.applyPerVertexElevationAlignment(d.position,b.spatialReference,0,e,0,d.position,0,d.position.length/3,c,a,f);c=null!=b;return new y(d.position,e,u(d.polygons,d.position,e),r(d.outlines,d.position,e),c,b)};k.geometryToRenderInfoDraped=function(b,c){const a=l.pathsToTriangulationInfo(b.rings,!1,l.CounterClockwiseMode.CCW_IS_HOLE);
b=z.projectBuffer(a.position,b.spatialReference,0,a.position,c,0,a.position.length/3);for(c=2;c<a.position.length;c+=3)a.position[c]=B.DRAPED_Z;return{position:a.position,polygons:u(a.polygons,a.position),outlines:r(a.outlines,a.position),projectionSuccess:b}};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});