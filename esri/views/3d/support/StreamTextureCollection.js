// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils ./TextureCollection ../webgl-engine/lib/basicInterfaces ../webgl-engine/lib/Texture".split(" "),function(r,k,w,t,x,l,y,z){l=function(u){function m(d,a,b,c){a=u.call(this,a,c)||this;a._streamDataRequester=d;a._parameters=b;return a}k._inheritsLoose(m,u);var v=m.prototype;v.fromUrl=function(){var d=k._asyncToGenerator(function*(a,b,c){var h=this;t.throwIfAborted(c);c=w.isSome(c)?
c.signal:null;const g=this.makeUid(a,b);var e=this._textureRequests.get(g);if(!e){e=new AbortController;const n=this._streamDataRequester.request(a,"image",{uid:g,signal:e.signal}),p=e={referenceCount:0,texture:null,textureAsync:null,abortController:e};this._textureRequests.set(g,e);e.textureAsync=n.then(function(){var q=k._asyncToGenerator(function*(f){f=h._createTexture(a,f,b);p.texture=f;p.abortController=null;h._stage.add(f);yield h._stage.load(f);return{uid:g,texture:f,release:()=>h._release(g)}});
return function(f){return q.apply(this,arguments)}}(),q=>{p.abortController=null;throw q;})}e.referenceCount++;try{return yield t.whenOrAbort(e.textureAsync,c)}catch(n){throw this._release(g),n;}});return function(a,b,c){return d.apply(this,arguments)}}();v._createTexture=function(d,a,b){const c={...this._parameters,powerOfTwoResizeMode:y.PowerOfTwoResizeMode.PAD};if(x.isSVG(d)){if(b||0===a.width&&0===a.height)d=a.width?a.height/a.width:1,b=b||64,1<d?(a.width=Math.round(b/d),a.height=b):(a.width=
b,a.height=Math.round(b*d));this._stage.renderView?.renderingContext.driverTest.svgPremultipliesAlpha.result&&(c.preMultiplyAlpha=!1)}c.width=a.width;c.height=a.height;return new z.Texture(a,c)};return m}(l.TextureCollection);r.StreamTextureCollection=l;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});