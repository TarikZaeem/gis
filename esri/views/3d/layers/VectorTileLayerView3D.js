// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["exports"],function(b){let a=function(){function x(f,r){this._lockedSchemaPixelSize=f;this._isGCS=r}var p=x.prototype;p.getLevelRowColumn=function(f){return this._isGCS?[f[0],f[1]>>1,f[2]>>1]:256===this._lockedSchemaPixelSize&&0<f[0]?[f[0]-1,f[1]>>1,f[2]>>1]:f};p.adjustLevel=function(f){return this._isGCS?f:256===this._lockedSchemaPixelSize?0<f?f-1:0:f};p.getShift=function(f,r){let h=0,d=0;if(256===this._lockedSchemaPixelSize||
this._isGCS)f[2]%2&&(h=r),f[1]%2&&(d=r);return[h,d]};p.getScale=function(f){if(this._isGCS){if(512===this._lockedSchemaPixelSize)return 4}else if(256===this._lockedSchemaPixelSize&&0===f)return 1;return 2};return x}();b.SchemaHelper=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/TileHandler3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/MemCache ../../../../core/promiseUtils ../../../../chunks/mat3f32 ../../../../geometry/support/aaBoundingRect ./TileHandler ./VectorTile ./decluttering/jobsUtil ../../tiling/TileInfoViewPOT ../../tiling/TileKey".split(" "),
function(b,a,x,p,f,r,h,d,e,k,m){return function(c){function g(q,u,w,B,A){u=c.call(this,q,u,w)||this;u._memCache=B;u._loader=A;u._ongoingTileRequests=new Map;u._ongoingRequestToController=new Map;u._tileInfoView=new k(q.tileInfo,q.fullExtent);return u}b._inheritsLoose(g,c);var l=g.prototype;l.destroy=function(){c.prototype.destroy.call(this);this._ongoingRequestToController.forEach(q=>q.abort());this._ongoingRequestToController.clear();this._ongoingTileRequests.clear()};l.getVectorTile=function(){var q=
b._asyncToGenerator(function*(u,w,B,A){w=new m(u,w,B,0);let D=this._memCache.get(w.id);if(a.isSome(D))return D.retain(),D;B=yield this._getVectorTileData(w);p.throwIfAborted(A);if(!this._layer)return null;D=this._memCache.get(w.id);if(a.isSome(D))return D.retain(),D;A=this._layer.tileInfo.getTileBounds(r.create(),w);u=this._tileInfoView.getTileResolution(u);D=new d.VectorTile(w,u,A[0],A[3],512,512,this._styleRepository,this._memCache);a.isSome(B)?(D.setData(B),D.retain(),this._memCache.put(w.id,D,
D.memoryUsage*D.referenced,x.MIN_PRIORITY)):D.setData(null);D.neededForCoverage=!0;D.transforms.tileUnitsToPixels=f.fromValues(.125,0,0,0,.125,0,0,0,1);e.declutterSingleTile(D,this._styleRepository);return D});return function(u,w,B,A){return q.apply(this,arguments)}}();l._getVectorTileData=function(q){const u=q.id;if(this._ongoingTileRequests.has(u))return this._ongoingTileRequests.get(u);const w=new AbortController;q=this._getParsedVectorTileData(q,{signal:w.signal}).then(B=>{this._ongoingTileRequests.delete(u);
this._ongoingRequestToController.delete(u);return B}).catch(()=>{this._ongoingTileRequests.delete(u);this._ongoingRequestToController.delete(u);return null});this._ongoingTileRequests.set(u,q);this._ongoingRequestToController.set(u,w);return q};l._getParsedVectorTileData=function(q,u){return this.fetchTileData(q,u).then(w=>this.parseTileData({key:q,data:w},u))};l.request=function(q,u){return this._loader.request(q,"binary",u)};return g}(h.TileHandler)})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),
function(b,a,x,p,f,r,h,d,e){let k=function(){function m(g,l,q){this._layer=g;this._styleRepository=l;this.devicePixelRatio=q;this._connection=this._glyphMosaic=this._spriteMosaic=null}var c=m.prototype;c.destroy=function(){this._connection?.close();this._glyphMosaic=this._spriteMosaic=this._layer=this._styleRepository=this._connection=null};c.start=function(){var g=a._asyncToGenerator(function*(l){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,l);this._spriteSourcePromise.then(u=>
{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(u)});var q=this._layer.currentStyleInfo.glyphsUrl;q=new h(q?p.addQueryParameters(q,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new r(1024,1024,q);this._broadcastPromise=f.open("WorkerTileHandler",{client:this,schedule:l.schedule,signal:l.signal}).then(u=>{this._connection=u;this._layer&&!this._connection.closed&&(u=u.broadcast("setStyle",this._layer.currentStyleInfo.style,l),Promise.all(u).catch(w=>
x.throwIfNotAbortError(w)))})});return function(l){return g.apply(this,arguments)}}();c.updateStyle=function(){var g=a._asyncToGenerator(function*(l){yield this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",l))});return function(l){return g.apply(this,arguments)}}();c.setSpriteSource=function(g){const l=new d(1024,1024,250);l.setSpriteSource(g);this._spriteMosaic=l;this._spriteSourcePromise=Promise.resolve(g);return l};c.setStyle=function(){var g=
a._asyncToGenerator(function*(l,q){yield this._broadcastPromise;this._styleRepository=l;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(u=>{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(u)});l=new h(this._layer.currentStyleInfo.glyphsUrl?p.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new r(1024,1024,l);return this._broadcastPromise=
Promise.all(this._connection.broadcast("setStyle",q))});return function(l,q){return g.apply(this,arguments)}}();c.fetchTileData=function(g,l){return this._getRefKeys(g,l).then(q=>{const u=this._layer.sourceNameToSource,w=[];for(const B in u)w.push(B);return this._getSourcesData(w,q,l)})};c.parseTileData=function(g,l){const q=g&&g.data;if(!q)return Promise.resolve(null);const {sourceName2DataAndRefKey:u,transferList:w}=q;return 0===Object.keys(u).length?Promise.resolve(null):this._broadcastPromise.then(()=>
this._connection.invoke("createTileAndParse",{key:g.key.id,sourceName2DataAndRefKey:u,styleLayerUIDs:g.styleLayerUIDs},{...l,transferList:w}))};c.getSprites=function(){var g=a._asyncToGenerator(function*(l){yield this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(l)});return function(l){return g.apply(this,arguments)}}();c.getGlyphs=function(g){return this._glyphMosaic.getGlyphItems(g.font,g.codePoints)};c._getTilePayload=function(){var g=a._asyncToGenerator(function*(l,q,u){l=e.pool.acquire(l.id);
const w=this._layer.sourceNameToSource[q],{level:B,row:A,col:D}=l;e.pool.release(l);try{return{protobuff:yield w.requestTile(B,A,D,u),sourceName:q}}catch(F){if(x.isAbortError(F))throw F;return{protobuff:null,sourceName:q}}});return function(l,q,u){return g.apply(this,arguments)}}();c._getRefKeys=function(g,l){const q=this._layer.sourceNameToSource,u=[];for(const w in q){const B=q[w].getRefKey(g,l);u.push(B)}return x.eachAlways(u)};c._getSourcesData=function(g,l,q){const u=[];for(let w=0;w<l.length;w++)if(null==
l[w].value||null==g[w])u.push(null);else{const B=this._getTilePayload(l[w].value,g[w],q);u.push(B)}return x.eachAlways(u).then(w=>{const B={},A=[];for(let D=0;D<w.length;D++){const F=w[D].value;F&&F.protobuff&&0<F.protobuff.byteLength&&(B[F.sourceName]={refKey:l[D].value.id,protobuff:F.protobuff},A.push(F.protobuff))}return{sourceName2DataAndRefKey:B,transferList:A}})};a._createClass(m,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",
get:function(){return this._glyphMosaic}}]);return m}();b.TileHandler=k;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(b,a,x,p){return function(){function f(h,d,e){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=h;
this.height=d;this._glyphSource=e;this._binPack=new b(h-4,d-4);this._glyphData.push(new Uint8Array(h*d));this._dirties.push(!0);this._textures.push(void 0)}var r=f.prototype;r.getGlyphItems=function(h,d){const e=[],k=this._glyphSource,m=new Set,c=1/256;for(const l of d)m.add(Math.floor(l*c));const g=[];m.forEach(l=>{if(256>=l){const q=h+l;this._rangePromises.has(q)?g.push(this._rangePromises.get(q)):(l=k.getRange(h,l).then(()=>{this._rangePromises["delete"](q)},()=>{this._rangePromises["delete"](q)}),
this._rangePromises.set(q,l),g.push(l))}});return Promise.all(g).then(()=>{let l=this._glyphIndex[h];l||(l={},this._glyphIndex[h]=l);for(const A of d){var q=l[A];if(q){e[A]={sdf:!0,rect:q.rect,metrics:q.metrics,page:q.page,code:A};continue}var u=k.getGlyph(h,A);if(!u||!u.metrics)continue;q=u.metrics;let D;if(0===q.width)D=new a(0,0,0,0);else{const F=q.width+6,z=q.height+6;var w=F%4?4-F%4:4,B=z%4?4-z%4:4;1===w&&(w=5);1===B&&(B=5);D=this._binPack.allocate(F+w,z+B);D.isEmpty&&(this._dirties[this._currentPage]||
(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new b(this.width-4,this.height-4),D=this._binPack.allocate(F+w,z+B));w=this._glyphData[this._currentPage];u=u.bitmap;let y;if(u)for(let E=0;E<z;E++){B=F*E;y=this.width*(D.y+E+1)+D.x;for(let J=0;J<F;J++)w[y+J+1]=u[B+J]}}l[A]={rect:D,metrics:q,tileIDs:null,page:this._currentPage};e[A]={sdf:!0,
rect:D,metrics:q,page:this._currentPage,code:A};this._dirties[this._currentPage]=!0}return e})};r.removeGlyphs=function(h){for(const d in this._glyphIndex){const e=this._glyphIndex[d];if(!e)continue;let k;for(const m in e)if(k=e[m],k.tileIDs["delete"](h),0===k.tileIDs.size){const c=this._glyphData[k.page],g=k.rect;let l,q;for(let u=0;u<g.height;u++)for(l=this.width*(g.y+u)+g.x,q=0;q<g.width;q++)c[l+q]=0;delete e[m];this._dirties[k.page]=!0}}};r.bind=function(h,d,e,k=0){this._textures[e]||(this._textures[e]=
new p.Texture(h,{pixelFormat:x.PixelFormat.ALPHA,dataType:x.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const m=this._textures[e];m.setSamplingMode(d);this._dirties[e]&&m.setData(this._glyphData[e]);h.bindTexture(m,k);this._dirties[e]=!1};r.dispose=function(){this._binPack=null;for(const h of this._textures)h&&h.dispose();this._textures.length=0};return f}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers",
"../webgl/Rect"],function(b,a){return function(){function x(f,r){this._height=this._width=0;this._free=[];this._width=f;this._height=r;this._free.push(new a(0,0,f,r))}var p=x.prototype;p.allocate=function(f,r){if(f>this._width||r>this._height)return new a;let h=null,d=-1;for(let e=0;e<this._free.length;++e){const k=this._free[e];f<=k.width&&r<=k.height&&(null===h||k.y<=h.y&&k.x<=h.x)&&(h=k,d=e)}if(null===h)return new a;this._free.splice(d,1);h.width<h.height?(h.width>f&&this._free.push(new a(h.x+
f,h.y,h.width-f,r)),h.height>r&&this._free.push(new a(h.x,h.y+r,h.width,h.height-r))):(h.width>f&&this._free.push(new a(h.x+f,h.y,h.width-f,h.height)),h.height>r&&this._free.push(new a(h.x,h.y+r,f,h.height-r)));return new a(h.x,h.y,f,r)};p.release=function(f){for(let r=0;r<this._free.length;++r){const h=this._free[r];if(h.y===f.y&&h.height===f.height&&h.x+h.width===f.x)h.width+=f.width;else if(h.x===f.x&&h.width===f.width&&h.y+h.height===f.y)h.height+=f.height;else if(f.y===h.y&&f.height===h.height&&
f.x+f.width===h.x)h.x=f.x,h.width+=f.width;else if(f.x===h.x&&f.width===h.width&&f.y+f.height===h.y)h.y=f.y,h.height+=f.height;else continue;this._free.splice(r,1);this.release(f)}this._free.push(f)};b._createClass(x,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return x}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(b){return function(){function a(x=0,p=0,f=0,r=0){this.x=
x;this.y=p;this.width=f;this.height=r}a.prototype.union=function(x){this.x=Math.min(this.x,x.x);this.y=Math.min(this.y,x.y);this.width=Math.max(this.width,x.width);this.height=Math.max(this.height,x.height)};b._createClass(a,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return a}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../request","../../../../core/pbf"],function(b,a){let x=function(){function f(h){this._metrics=[];this._bitmaps=[];
if(h)for(;h.next();)switch(h.tag()){case 1:const d=h.getMessage();for(;d.next();)switch(d.tag()){case 3:const e=d.getMessage();let k,m,c,g,l,q,u;for(;e.next();)switch(e.tag()){case 1:k=e.getUInt32();break;case 2:m=e.getBytes();break;case 3:c=e.getUInt32();break;case 4:g=e.getUInt32();break;case 5:l=e.getSInt32();break;case 6:q=e.getSInt32();break;case 7:u=e.getUInt32();break;default:e.skip()}e.release();k&&(this._metrics[k]={width:c,height:g,left:l,top:q,advance:u},this._bitmaps[k]=m);break;default:d.skip()}d.release();
break;default:h.skip()}}var r=f.prototype;r.getMetrics=function(h){return this._metrics[h]};r.getBitmap=function(h){return this._bitmaps[h]};return f}(),p=function(){function f(){this._ranges=[]}var r=f.prototype;r.getRange=function(h){return this._ranges[h]};r.addRange=function(h,d){this._ranges[h]=d};return f}();return function(){function f(h){this._glyphInfo={};this._baseURL=h}var r=f.prototype;r.getRange=function(h,d){const e=this._getFontStack(h);if(e.getRange(d))return Promise.resolve();const k=
256*d,m=k+255;if(this._baseURL)return h=this._baseURL.replace("{fontstack}",h).replace("{range}",k+"-"+m),b(h,{responseType:"array-buffer"}).then(c=>{e.addRange(d,new x(new a(new Uint8Array(c.data),new DataView(c.data))))}).catch(()=>{e.addRange(d,new x)});e.addRange(d,new x);return Promise.resolve()};r.getGlyph=function(h,d){if(h=this._getFontStack(h)){var e=Math.floor(d/256);if(!(256<e)&&(h=h.getRange(e)))return{metrics:h.getMetrics(d),bitmap:h.getBitmap(d)}}};r._getFontStack=function(h){let d=
this._glyphInfo[h];d||(d=this._glyphInfo[h]=new p);return d};return f}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define(["../../../../symbols/cim/rasterizingUtils","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(b,a,x,p,f){return function(){function r(d,e,k=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=
1;(0>=d||0>=e)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=d;this._pageHeight=e;0<k&&(this._maxItemSize=k);this._binPack=new a(d-4,e-4)}var h=r.prototype;h.dispose=function(){this._binPack=null;this._mosaicRects={};for(const d of this._textures)d&&d.dispose();this._textures.length=0};h.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};h.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};h.getPageSize=
function(d){return d>=this._size.length?null:this._size[d]};h.setSpriteSource=function(d){this.dispose();this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new a(this._pageWidth-4,this._pageHeight-4);const e=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=e;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=d};h.getSpriteItem=function(d,e=!1){var k=this._mosaicRects[d];
if(k)return k;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let m;d&&d.startsWith("dasharray-")?([k,m]=this._rasterizeDash(d),e=!0):k=this._sprites.getSpriteInfo(d);if(!k||!k.width||!k.height||0>k.width||0>k.height)return null;const c=k.width,g=k.height,[l,q,u]=this._allocateImage(c,g);if(0>=l.width)return null;this._copy(l,k,q,u,e,m);k={rect:l,width:c,height:g,sdf:k.sdf,simplePattern:!1,pixelRatio:k.pixelRatio,page:q};return this._mosaicRects[d]=k};h.getSpriteItems=function(d){const e=
{};for(const k of d)e[k.name]=this.getSpriteItem(k.name,k.repeat);return e};h.getMosaicItemPosition=function(d,e){e=(d=this.getSpriteItem(d,e))&&d.rect;if(!e)return null;e.width=d.width;e.height=d.height;return{tl:[e.x+2,e.y+2],br:[e.x+2+d.width,e.y+2+d.height],page:d.page}};h.bind=function(d,e,k=0,m=0){if(!(k>=this._size.length||k>=this._mosaicsData.length)){this._textures[k]||(this._textures[k]=new f.Texture(d,{pixelFormat:p.PixelFormat.RGBA,dataType:p.PixelType.UNSIGNED_BYTE,wrapMode:p.TextureWrapMode.CLAMP_TO_EDGE,
width:this._size[k][0],height:this._size[k][1]},new Uint8Array(this._mosaicsData[k].buffer)));var c=this._textures[k];c.setSamplingMode(e);this._dirties[k]&&c.setData(new Uint8Array(this._mosaicsData[k].buffer));d.bindTexture(c,m);this._dirties[k]=!1}};r._copyBits=function(d,e,k,m,c,g,l,q,u,w,B){let A=m*e+k;l=q*g+l;if(B)for(l-=g,B=-1;B<=w;B++,A=((B+w)%w+m)*e+k,l+=g)for(q=-1;q<=u;q++)c[l+q]=d[A+(q+u)%u];else for(k=0;k<w;k++){for(m=0;m<u;m++)c[l+m]=d[A+m];A+=e;l+=g}};h._copy=function(d,e,k,m,c,g){if(this._sprites&&
"loaded"===this._sprites.loadStatus&&!(k>=this._mosaicsData.length)){var l=new Uint32Array(g?g.buffer:this._sprites.image.buffer),q=this._mosaicsData[k];q&&l||console.error("Source or target images are uninitialized!");r._copyBits(l,g?e.width:this._sprites.width,e.x,e.y,q,m[0],d.x+2,d.y+2,e.width,e.height,c);this._dirties[k]=!0}};h._allocateImage=function(d,e){d+=2;e+=2;var k=Math.max(d,e);if(this._maxItemSize&&this._maxItemSize<k)return k=new x(0,0,d,e),this._mosaicsData.push(new Uint32Array(d*e)),
this._dirties.push(!0),this._size.push([d,e]),this._textures.push(void 0),[k,this._mosaicsData.length-1,[d,e]];k=d%4?4-d%4:4;let m=e%4?4-e%4:4;1===k&&(k=5);1===m&&(m=5);k=this._binPack.allocate(d+k,e+m);return 0>=k.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),
this._binPack=new a(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,e)):[k,this._currentPage,[this._pageWidth,this._pageHeight]]};h._rasterizeDash=function(d){var e=d.match(/\[(.*?)\]/);if(!e)return null;e=e[1].split(",").map(Number);d=d.slice(d.lastIndexOf("-")+1);const [k,m,c]=b.rasterizeDash(e,d);d=new Uint8Array(k.buffer);return[{x:0,y:0,width:m,height:c,sdf:!0,pixelRatio:1},d]};return r}()})},"esri/symbols/cim/rasterizingUtils":function(){define(["exports","../../core/floatRGBA",
"../../core/mathUtils"],function(b,a,x){b.rasterizeDash=function(p,f){var r="Butt"===f,h="Square"===f;f=!r&&!h;1===p.length%2&&(p=[...p,...p]);var d=0;for(var e of p)d+=e;e=Math.round(15.5*d);d=new Float32Array(31*e);let k=0,m=0,c=.5,g=!0;for(var l of p){k=m;for(m+=15.5*l;c<=m;){for(p=.5;31>p;){const q=f?(p-15.5)*(p-15.5):Math.abs(p-15.5);d[(p-.5)*e+c-.5]=g?r?Math.max(Math.max(k+7.75-c,q),Math.max(c-m+7.75,q)):q:f?Math.min((c-k)*(c-k)+q,(c-m)*(c-m)+q):h?Math.min(Math.max(c-k,q),Math.max(m-c,q)):Math.min(Math.max(c-
k+7.75,q),Math.max(m+7.75-c,q));p++}c++}g=!g}r=d.length;l=new Uint8Array(4*r);for(h=0;h<r;++h)a.packFloatRGBA((f?Math.sqrt(d[h]):d[h])/15.5,l,4*h);return[l,e,31]};b.rasterizeSimpleFill=function(p,f,r){r=x.nextPowerOfTwo(Math.ceil(r));var h="vertical"===f||"horizontal"===f||"cross"===f||"esriSFSCross"===f||"esriSFSVertical"===f||"esriSFSHorizontal"===f?8*r:16*r;const d=2*r;p.width=h;p.height=h;const e=p.getContext("2d");e.strokeStyle="#FFFFFF";e.lineWidth=r;e.beginPath();if("vertical"===f||"cross"===
f||"esriSFSCross"===f||"esriSFSVertical"===f)e.moveTo(h/2,-d),e.lineTo(h/2,h+d);if("horizontal"===f||"cross"===f||"esriSFSCross"===f||"esriSFSHorizontal"===f)e.moveTo(-d,h/2),e.lineTo(h+d,h/2);if("forward-diagonal"===f||"diagonal-cross"===f||"esriSFSDiagonalCross"===f||"esriSFSForwardDiagonal"===f)e.moveTo(-d,-d),e.lineTo(h+d,h+d),e.moveTo(h-d,-d),e.lineTo(h+d,d),e.moveTo(-d,h-d),e.lineTo(d,h+d);if("backward-diagonal"===f||"diagonal-cross"===f||"esriSFSBackwardDiagonal"===f||"esriSFSDiagonalCross"===
f)e.moveTo(h+d,-d),e.lineTo(-d,h+d),e.moveTo(d,-d),e.lineTo(-d,d),e.moveTo(h+d,h-d),e.lineTo(h-d,h+d);e.stroke();f=e.getImageData(0,0,p.width,p.height);f=new Uint8Array(f.data);for(h=0;h<f.length;h+=4)r=f[h+3]/255,f[h]*=r,f[h+1]*=r,f[h+2]*=r;return[f,p.width,p.height]};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobsUtil":function(){define("exports ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),
function(b,a,x,p,f,r,h){b.declutterSingleTile=function(d,e){const k=[],m=new f.SymbolRepository(4096,k,()=>{const g=new a.VTLUniqueSymbol;g.show=!1;g.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});g.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});return g}),c=new p.SymbolDeclutterer(k,m,(g,l,q)=>new x.CollisionJob(g,l,q,d.styleRepository,d.key.level,0),(g,l)=>{r.writeOpacityToBuffers(g,l,!1)},()=>0,g=>(g=e.getStyleLayerByUID(g).getLayoutProperty("visibility"))&&
g.getValue()===h.Visibility.NONE?!1:!0);k.push(d);m.add(d);c.setScreenSize(512,512);c.continue(Infinity)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define(["exports","../../../../../chunks/mat3f32","./config","./util","../style/StyleDefinition"],function(b,a,x,p,f){let r=function(){function h(e,k,m,c,g,l){this._symbols=e;this._styleRepository=c;this._zoom=g;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=
new Map;this._allNeededMatrices=new Map;this._gridIndex=new p.GridIndex(k,m,x.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*l/180);this._co=Math.cos(Math.PI*l/180);for(const q of e)for(const u of q.symbols)this._allNeededMatrices.has(u.tile)||this._allNeededMatrices.set(u.tile,a.clone(u.tile.transforms.tileUnitsToPixels))}var d=h.prototype;d.work=function(e){const k=this._gridIndex,m=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=
0){const z=this._symbols[this._currentLayerCursor],y=this._getProperties(z.styleLayerUID);for(;this._currentSymbolCursor<z.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-m>e)return!1;var c=z.symbols[this._currentSymbolCursor];if(!c.unique.show)continue;var g=c,l=this._si,q=this._co,u=this._allNeededMatrices.get(c.tile),w=this._zoom;const {iconRotationAlignment:E,textRotationAlignment:J,iconTranslate:K,iconTranslateAnchor:Q,textTranslate:M,textTranslateAnchor:S}=
y;var B=0;for(const H of g.colliders){const [R,W]=0===H.partIndex?K:M;var A=0===H.partIndex?Q:S,D=H.minLod<=w&&w<=H.maxLod;B+=D?0:1;H.enabled=D;H.xScreen=H.xTile*u[0]+H.yTile*u[3]+u[6];H.yScreen=H.xTile*u[1]+H.yTile*u[4]+u[7];A===f.TranslateAnchor.MAP?(H.xScreen+=q*R-l*W,H.yScreen+=l*R+q*W):(H.xScreen+=R,H.yScreen+=W);f.RotationAlignment.VIEWPORT===(0===H.partIndex?E:J)?(H.dxScreen=H.dxPixels,H.dyScreen=H.dyPixels):(H.dxScreen=q*(H.dxPixels+H.width/2)-l*(H.dyPixels+H.height/2)-H.width/2,H.dyScreen=
l*(H.dxPixels+H.width/2)+q*(H.dyPixels+H.height/2)-H.height/2)}0<g.colliders.length&&B===g.colliders.length&&(g.unique.show=!1);g=c.unique;if(!g.show)continue;const {iconAllowOverlap:N,iconIgnorePlacement:O,textAllowOverlap:T,textIgnorePlacement:L}=y;for(const H of c.colliders)if(H.enabled&&(l=g.parts[H.partIndex],l.show)){if(q=!(H.partIndex?T:N))a:{q=H.xScreen+H.dxScreen;u=H.yScreen+H.dyScreen;w=q+H.width;B=u+H.height;const [R,W,U,X]=k.getCellSpan(q,u,w,B);for(A=W;A<=X;A++)for(D=R;D<=U;D++){var F=
k.cells[A][D];for(const Z of F){F=Z.xScreen+Z.dxScreen;const ea=Z.yScreen+Z.dyScreen,ca=F+Z.width,aa=ea+Z.height;if(!(w<F||q>ca||B<ea||u>aa)){q=!0;break a}}}q=!1}q&&(H.hard?g.show=!1:l.show=!1)}if(g.show)for(const H of c.colliders){if(!H.enabled)continue;if(H.partIndex?L:O)continue;if(!g.parts[H.partIndex].show)continue;c=H.xScreen+H.dxScreen;l=H.yScreen+H.dyScreen;const [R,W,U,X]=this._gridIndex.getCellSpan(c,l,c+H.width,l+H.height);for(c=W;c<=X;c++)for(l=R;l<=U;l++)this._gridIndex.cells[c][l].push(H)}}}return!0};
d._getProperties=function(e){var k=this._styleProps.get(e);if(k)return k;k=this._zoom;const m=this._styleRepository.getStyleLayerByUID(e);var c=m.getLayoutValue("symbol-placement",k)!==f.SymbolPlacement.POINT;let g=m.getLayoutValue("icon-rotation-alignment",k);g===f.RotationAlignment.AUTO&&(g=c?f.RotationAlignment.MAP:f.RotationAlignment.VIEWPORT);let l=m.getLayoutValue("text-rotation-alignment",k);l===f.RotationAlignment.AUTO&&(l=c?f.RotationAlignment.MAP:f.RotationAlignment.VIEWPORT);c=m.getPaintValue("icon-translate",
k);const q=m.getPaintValue("icon-translate-anchor",k),u=m.getPaintValue("text-translate",k),w=m.getPaintValue("text-translate-anchor",k);k={iconAllowOverlap:m.getLayoutValue("icon-allow-overlap",k),iconIgnorePlacement:m.getLayoutValue("icon-ignore-placement",k),textAllowOverlap:m.getLayoutValue("text-allow-overlap",k),textIgnorePlacement:m.getLayoutValue("text-ignore-placement",k),iconRotationAlignment:g,textRotationAlignment:l,iconTranslateAnchor:q,iconTranslate:c,textTranslateAnchor:w,textTranslate:u};
this._styleProps.set(e,k);return k};return h}();b.CollisionJob=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../symbols/cim/enums"],function(b,a){b.StyleLayerType=void 0;(function(p){p[p.BACKGROUND=0]="BACKGROUND";p[p.FILL=1]="FILL";p[p.LINE=2]="LINE";p[p.SYMBOL=3]="SYMBOL";p[p.CIRCLE=4]="CIRCLE"})(b.StyleLayerType||(b.StyleLayerType={}));b.Visibility=void 0;(function(p){p[p.VISIBLE=
0]="VISIBLE";p[p.NONE=1]="NONE"})(b.Visibility||(b.Visibility={}));b.SymbolPlacement=void 0;(function(p){p[p.POINT=0]="POINT";p[p.LINE=1]="LINE";p[p.LINE_CENTER=2]="LINE_CENTER"})(b.SymbolPlacement||(b.SymbolPlacement={}));b.RotationAlignment=void 0;(function(p){p[p.MAP=0]="MAP";p[p.VIEWPORT=1]="VIEWPORT";p[p.AUTO=2]="AUTO"})(b.RotationAlignment||(b.RotationAlignment={}));b.TextJustification=void 0;(function(p){p[p.AUTO=0]="AUTO";p[p.LEFT=1]="LEFT";p[p.CENTER=2]="CENTER";p[p.RIGHT=3]="RIGHT"})(b.TextJustification||
(b.TextJustification={}));b.SymbolAnchor=void 0;(function(p){p[p.CENTER=0]="CENTER";p[p.LEFT=1]="LEFT";p[p.RIGHT=2]="RIGHT";p[p.TOP=3]="TOP";p[p.BOTTOM=4]="BOTTOM";p[p.TOP_LEFT=5]="TOP_LEFT";p[p.TOP_RIGHT=6]="TOP_RIGHT";p[p.BOTTOM_LEFT=7]="BOTTOM_LEFT";p[p.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"})(b.SymbolAnchor||(b.SymbolAnchor={}));b.TextTransform=void 0;(function(p){p[p.NONE=0]="NONE";p[p.UPPERCASE=1]="UPPERCASE";p[p.LOWERCASE=2]="LOWERCASE"})(b.TextTransform||(b.TextTransform={}));b.TranslateAnchor=void 0;
(function(p){p[p.MAP=0]="MAP";p[p.VIEWPORT=1]="VIEWPORT"})(b.TranslateAnchor||(b.TranslateAnchor={}));b.TextWritingMode=void 0;(function(p){p[p.HORIZONTAL=0]="HORIZONTAL";p[p.VERTICAL=1]="VERTICAL"})(b.TextWritingMode||(b.TextWritingMode={}));let x=function(){};x.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};x.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};x.lineLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:a.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:a.JoinType.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};x.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",
values:["point","line","line-center"],default:b.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",
value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},
"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:b.TextJustification.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",
minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:b.TextTransform.NONE},"text-writing-mode":{type:"array",
value:"enum",values:["horizontal","vertical"],default:[b.TextWritingMode.HORIZONTAL]}};x.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};x.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};x.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",
minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};x.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},
"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},"line-width":{type:"number",minimum:0,default:1}};x.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",
default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},
"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};x.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",
minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};x.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,
maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};b.StyleDefinition=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/enums":function(){define(["exports"],function(b){b.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=
4]="UNKNOWN"})(b.CapType||(b.CapType={}));b.JoinType=void 0;(function(a){a[a.BEVEL=0]="BEVEL";a[a.ROUND=1]="ROUND";a[a.MITER=2]="MITER";a[a.UNKNOWN=4]="UNKNOWN"})(b.JoinType||(b.JoinType={}));b.Alignment=void 0;(function(a){a[a.SCREEN=0]="SCREEN";a[a.MAP=1]="MAP"})(b.Alignment||(b.Alignment={}));b.ExternalColorMixMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Ignore=1]="Ignore";a[a.Multiply=99]="Multiply"})(b.ExternalColorMixMode||(b.ExternalColorMixMode={}));b.ExtremityPlacement=void 0;(function(a){a.Both=
"Both";a.JustBegin="JustBegin";a.JustEnd="JustEnd";a.None="None"})(b.ExtremityPlacement||(b.ExtremityPlacement={}));b.FillMode=void 0;(function(a){a[a.Mosaic=0]="Mosaic";a[a.Centered=1]="Centered"})(b.FillMode||(b.FillMode={}));b.FontEffects=void 0;(function(a){a[a.Normal=0]="Normal";a[a.Superscript=1]="Superscript";a[a.Subscript=2]="Subscript"})(b.FontEffects||(b.FontEffects={}));b.FontEncoding=void 0;(function(a){a[a.MSSymbol=0]="MSSymbol";a[a.Unicode=1]="Unicode"})(b.FontEncoding||(b.FontEncoding=
{}));b.FontType=void 0;(function(a){a[a.Unspecified=0]="Unspecified";a[a.TrueType=1]="TrueType";a[a.PSOpenType=2]="PSOpenType";a[a.TTOpenType=3]="TTOpenType";a[a.Type1=4]="Type1"})(b.FontType||(b.FontType={}));b.AngleAlignment=void 0;(function(a){a[a.Display=0]="Display";a[a.Map=1]="Map"})(b.AngleAlignment||(b.AngleAlignment={}));b.AnimatedSymbolRepeatType=void 0;(function(a){a.None="None";a.Loop="Loop";a.Oscillate="Oscillate"})(b.AnimatedSymbolRepeatType||(b.AnimatedSymbolRepeatType={}));b.DominantSizeAxis=
void 0;(function(a){a[a.Z=0]="Z";a[a.X=1]="X";a[a.Y=2]="Y"})(b.DominantSizeAxis||(b.DominantSizeAxis={}));b.RotationOrder=void 0;(function(a){a[a.XYZ=0]="XYZ";a[a.ZXY=1]="ZXY";a[a.YXZ=2]="YXZ"})(b.RotationOrder||(b.RotationOrder={}));b.BalloonCalloutStyle=void 0;(function(a){a[a.Rectangle=0]="Rectangle";a[a.RoundedRectangle=1]="RoundedRectangle";a[a.Oval=2]="Oval"})(b.BalloonCalloutStyle||(b.BalloonCalloutStyle={}));b.BlendingMode=void 0;(function(a){a[a.None=0]="None";a[a.Alpha=1]="Alpha";a[a.Screen=
2]="Screen";a[a.Multiply=3]="Multiply";a[a.Add=4]="Add"})(b.BlendingMode||(b.BlendingMode={}));b.BlockProgression=void 0;(function(a){a[a.TTB=0]="TTB";a[a.RTL=1]="RTL";a[a.BTT=2]="BTT"})(b.BlockProgression||(b.BlockProgression={}));b.BillBoardMode=void 0;(function(a){a[a.None=0]="None";a[a.SignPost=1]="SignPost";a[a.FaceNearPlane=2]="FaceNearPlane"})(b.BillBoardMode||(b.BillBoardMode={}));b.CGAAttributeType=void 0;(function(a){a[a.Float=0]="Float";a[a.String=1]="String";a[a.Boolean=2]="Boolean"})(b.CGAAttributeType||
(b.CGAAttributeType={}));b.ClippingType=void 0;(function(a){a[a.Intersect=0]="Intersect";a[a.Subtract=1]="Subtract"})(b.ClippingType||(b.ClippingType={}));b.GeometricEffectArrowType=void 0;(function(a){a.OpenEnded="OpenEnded";a.Block="Block";a.Crossed="Crossed"})(b.GeometricEffectArrowType||(b.GeometricEffectArrowType={}));b.GeometricEffectControlMeasureLineRule=void 0;(function(a){a.FullGeometry="FullGeometry";a.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment";a.ReversedFirstSegment=
"ReversedFirstSegment";a.PerpendicularToSecondSegment="PerpendicularToSecondSegment";a.SecondSegmentWithTicks="SecondSegmentWithTicks";a.DoublePerpendicular="DoublePerpendicular";a.OppositeToFirstSegment="OppositeToFirstSegment";a.TriplePerpendicular="TriplePerpendicular";a.HalfCircleFirstSegment="HalfCircleFirstSegment";a.HalfCircleSecondSegment="HalfCircleSecondSegment";a.HalfCircleExtended="HalfCircleExtended";a.OpenCircle="OpenCircle";a.CoverageEdgesWithTicks="CoverageEdgesWithTicks";a.GapExtentWithDoubleTicks=
"GapExtentWithDoubleTicks";a.GapExtentMidline="GapExtentMidline";a.Chevron="Chevron";a.PerpendicularWithArc="PerpendicularWithArc";a.ClosedHalfCircle="ClosedHalfCircle";a.TripleParallelExtended="TripleParallelExtended";a.ParallelWithTicks="ParallelWithTicks";a.Parallel="Parallel";a.PerpendicularToFirstSegment="PerpendicularToFirstSegment";a.ParallelOffset="ParallelOffset";a.OffsetOpposite="OffsetOpposite";a.OffsetSame="OffsetSame";a.CircleWithArc="CircleWithArc";a.DoubleJog="DoubleJog";a.PerpendicularOffset=
"PerpendicularOffset";a.LineExcludingLastSegment="LineExcludingLastSegment";a.MultivertexArrow="MultivertexArrow";a.CrossedArrow="CrossedArrow";a.ChevronArrow="ChevronArrow";a.ChevronArrowOffset="ChevronArrowOffset";a.PartialFirstSegment="PartialFirstSegment";a.Arch="Arch";a.CurvedParallelTicks="CurvedParallelTicks";a.Arc90Degrees="Arc90Degrees"})(b.GeometricEffectControlMeasureLineRule||(b.GeometricEffectControlMeasureLineRule={}));b.GeometricEffectDonutMethod=void 0;(function(a){a.Mitered="Mitered";
a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square";a.TrueBuffer="TrueBuffer"})(b.GeometricEffectDonutMethod||(b.GeometricEffectDonutMethod={}));b.GeometricEffectEnclosingPolygonMethod=void 0;(function(a){a.ClosePath="ClosePath";a.ConvexHull="ConvexHull";a.RectangularBox="RectangularBox"})(b.GeometricEffectEnclosingPolygonMethod||(b.GeometricEffectEnclosingPolygonMethod={}));b.GeometricEffectExtensionOrigin=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectExtensionOrigin||
(b.GeometricEffectExtensionOrigin={}));b.GeometricEffectOffsetMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square"})(b.GeometricEffectOffsetMethod||(b.GeometricEffectOffsetMethod={}));b.GeometricEffectOffsetOption=void 0;(function(a){a.Fast="Fast";a.Accurate="Accurate"})(b.GeometricEffectOffsetOption||(b.GeometricEffectOffsetOption={}));b.GeometricEffectOffsetTangentMethod=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectOffsetTangentMethod||
(b.GeometricEffectOffsetTangentMethod={}));b.GeometricEffectWaveform=void 0;(function(a){a.Sinus="Sinus";a.Square="Square";a.Triangle="Triangle";a.Random="Random"})(b.GeometricEffectWaveform||(b.GeometricEffectWaveform={}));b.GlyphHinting=void 0;(function(a){a[a.None=0]="None";a[a.Default=1]="Default";a[a.Force=2]="Force"})(b.GlyphHinting||(b.GlyphHinting={}));b.GradientAlignment=void 0;(function(a){a[a.Buffered=0]="Buffered";a[a.Left=1]="Left";a[a.Right=2]="Right";a[a.AlongLine=3]="AlongLine"})(b.GradientAlignment||
(b.GradientAlignment={}));b.GradientFillMethod=void 0;(function(a){a[a.Linear=0]="Linear";a[a.Rectangular=1]="Rectangular";a[a.Circular=2]="Circular";a[a.Buffered=3]="Buffered"})(b.GradientFillMethod||(b.GradientFillMethod={}));b.GradientStrokeType=void 0;(function(a){a[a.Discrete=0]="Discrete";a[a.Continuous=1]="Continuous"})(b.GradientStrokeType||(b.GradientStrokeType={}));b.GradientStrokeMethod=void 0;(function(a){a[a.AcrossLine=0]="AcrossLine";a[a.AloneLine=1]="AloneLine"})(b.GradientStrokeMethod||
(b.GradientStrokeMethod={}));b.HorizontalAlignment=void 0;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Center=2]="Center";a[a.Justify=3]="Justify"})(b.HorizontalAlignment||(b.HorizontalAlignment={}));b.LeaderLineStyle=void 0;(function(a){a[a.Base=0]="Base";a[a.MidPoint=1]="MidPoint";a[a.ThreePoint=2]="ThreePoint";a[a.FourPoint=3]="FourPoint";a[a.Underline=4]="Underline";a[a.CircularCW=5]="CircularCW";a[a.CircularCCW=6]="CircularCCW"})(b.LeaderLineStyle||(b.LeaderLineStyle={}));b.LineCapStyle=
void 0;(function(a){a.Butt="Butt";a.Round="Round";a.Square="Square"})(b.LineCapStyle||(b.LineCapStyle={}));b.LineDashEnding=void 0;(function(a){a.NoConstraint="NoConstraint";a.HalfPattern="HalfPattern";a.HalfGap="HalfGap";a.FullPattern="FullPattern";a.FullGap="FullGap";a.Custom="Custom"})(b.LineDashEnding||(b.LineDashEnding={}));b.LineDecorationStyle=void 0;(function(a){a[a.None=-1]="None";a[a.Custom=0]="Custom";a[a.Circle=1]="Circle";a[a.OpenArrow=2]="OpenArrow";a[a.ClosedArrow=3]="ClosedArrow";
a[a.Diamond=4]="Diamond"})(b.LineDecorationStyle||(b.LineDecorationStyle={}));b.LineGapType=void 0;(function(a){a[a.ExtraLeading=0]="ExtraLeading";a[a.Multiple=1]="Multiple";a[a.Exact=2]="Exact"})(b.LineGapType||(b.LineGapType={}));b.LineJoinStyle=void 0;(function(a){a.Bevel="Bevel";a.Round="Round";a.Miter="Miter"})(b.LineJoinStyle||(b.LineJoinStyle={}));b.ExpressionReturnType=void 0;(function(a){a[a.Default=0]="Default";a[a.String=1]="String";a[a.Numeric=2]="Numeric"})(b.ExpressionReturnType||(b.ExpressionReturnType=
{}));b.MarkerPlacementType=void 0;(function(a){a[a.InsidePolygon=0]="InsidePolygon";a[a.PolygonCenter=1]="PolygonCenter";a[a.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(b.MarkerPlacementType||(b.MarkerPlacementType={}));b.MaterialMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Replace=1]="Replace";a[a.Multiply=2]="Multiply"})(b.MaterialMode||(b.MaterialMode={}));b.PlacementClip=void 0;(function(a){a[a.ClipAtBoundary=0]="ClipAtBoundary";a[a.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary";
a[a.DoNotTouchBoundary=2]="DoNotTouchBoundary";a[a.DoNotClip=3]="DoNotClip"})(b.PlacementClip||(b.PlacementClip={}));b.PlacementEndings=void 0;(function(a){a.NoConstraint="NoConstraint";a.WithMarkers="WithMarkers";a.WithFullGap="WithFullGap";a.WithHalfGap="WithHalfGap";a.Custom="Custom"})(b.PlacementEndings||(b.PlacementEndings={}));b.PlacementGridType=void 0;(function(a){a.Fixed="Fixed";a.Random="Random";a.RandomFixedQuantity="RandomFixedQuantity"})(b.PlacementGridType||(b.PlacementGridType={}));
b.PlacementOnLineRelativeTo=void 0;(function(a){a.LineMiddle="LineMiddle";a.LineBeginning="LineBeginning";a.LineEnd="LineEnd";a.SegmentMidpoint="SegmentMidpoint"})(b.PlacementOnLineRelativeTo||(b.PlacementOnLineRelativeTo={}));b.PlacementPolygonCenterMethod=void 0;(function(a){a.OnPolygon="OnPolygon";a.CenterOfMass="CenterOfMass";a.BoundingBoxCenter="BoundingBoxCenter"})(b.PlacementPolygonCenterMethod||(b.PlacementPolygonCenterMethod={}));b.PlacementRandomlyAlongLineRandomization=void 0;(function(a){a[a.Low=
0]="Low";a[a.Medium=1]="Medium";a[a.High=2]="High"})(b.PlacementRandomlyAlongLineRandomization||(b.PlacementRandomlyAlongLineRandomization={}));b.PlacementStepPosition=void 0;(function(a){a[a.MarkerCenter=0]="MarkerCenter";a[a.MarkerBounds=1]="MarkerBounds"})(b.PlacementStepPosition||(b.PlacementStepPosition={}));b.PointSymbolCalloutScale=void 0;(function(a){a[a.None=0]="None";a[a.PropUniform=1]="PropUniform";a[a.PropNonuniform=2]="PropNonuniform";a[a.DifUniform=3]="DifUniform";a[a.DifNonuniform=
4]="DifNonuniform"})(b.PointSymbolCalloutScale||(b.PointSymbolCalloutScale={}));b.Simple3DLineStyle=void 0;(function(a){a.Tube="Tube";a.Strip="Strip";a.Wall="Wall"})(b.Simple3DLineStyle||(b.Simple3DLineStyle={}));b.SizeVariationMethod=void 0;(function(a){a[a.Random=0]="Random";a[a.Increasing=1]="Increasing";a[a.Decreasing=2]="Decreasing";a[a.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(b.SizeVariationMethod||(b.SizeVariationMethod={}));b.SymbolUnits=void 0;(function(a){a[a.Relative=0]=
"Relative";a[a.Absolute=1]="Absolute"})(b.SymbolUnits||(b.SymbolUnits={}));b.TextCase=void 0;(function(a){a[a.Normal=0]="Normal";a[a.LowerCase=1]="LowerCase";a[a.Allcaps=2]="Allcaps"})(b.TextCase||(b.TextCase={}));b.TextReadingDirection=void 0;(function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL"})(b.TextReadingDirection||(b.TextReadingDirection={}));b.TextureFilter=void 0;(function(a){a.Draft="Draft";a.Picture="Picture";a.Text="Text"})(b.TextureFilter||(b.TextureFilter={}));b.VerticalAlignment=void 0;(function(a){a[a.Top=
0]="Top";a[a.Center=1]="Center";a[a.Baseline=2]="Baseline";a[a.Bottom=3]="Bottom"})(b.VerticalAlignment||(b.VerticalAlignment={}));b.VerticalGlyphOrientation=void 0;(function(a){a[a.Right=0]="Right";a[a.Upright=1]="Upright"})(b.VerticalGlyphOrientation||(b.VerticalGlyphOrientation={}));b.WaterbodySize=void 0;(function(a){a[a.Small=0]="Small";a[a.Medium=1]="Medium";a[a.Large=2]="Large"})(b.WaterbodySize||(b.WaterbodySize={}));b.WaveStrength=void 0;(function(a){a[a.Calm=0]="Calm";a[a.Rippled=1]="Rippled";
a[a.Slight=2]="Slight";a[a.Moderate=3]="Moderate"})(b.WaveStrength||(b.WaveStrength={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./config"],function(b,a,x,p){function f(h,d){if(h.priority-d.priority)return h.priority-d.priority;const e=h.tile.key,k=d.tile.key;return e.world-k.world?e.world-k.world:e.level-
k.level?e.level-k.level:e.row-k.row?e.row-k.row:e.col-k.col?e.col-k.col:h.xTile-d.xTile?h.xTile-d.xTile:h.yTile-d.yTile}let r=function(){function h(e,k,m,c,g,l){this._visibleTiles=e;this._symbolRepository=k;this._createCollisionJob=m;this._assignTileSymbolsOpacity=c;this._symbolLayerSorter=g;this._isLayerVisible=l;this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var d=h.prototype;
d.setScreenSize=function(e,k){this._screenWidth===e&&this._screenHeight===k||this.restart();this._screenWidth=e;this._screenHeight=k};d.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0};d.continue=function(e){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var k=performance.now();if(!this._selectionJob.work(e))return!1;
this._selectionJobCompleted=!0;e=Math.max(0,e-(performance.now()-k));if(0===e)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){k=performance.now();if(!this._collisionJob.work(e))return!1;this._collisionJobCompleted=!0;e=Math.max(0,e-(performance.now()-k));if(0===e)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){k=performance.now();
if(!this._opacityJob.work(e))return!1;this._opacityJobCompleted=!0;e=Math.max(0,e-(performance.now()-k));if(0===e)return!1}this._running=!1;return!0};d._createSelectionJob=function(){const e=this._symbolRepository.uniqueSymbols;for(let q=0;q<e.length;q++){const u=e[q];for(let w=0;w<u.uniqueSymbols.length;w++){const B=u.uniqueSymbols[w];for(const A of B.tileSymbols)A.selectedForRendering=!1}}const k=[];let m=0,c=0;const g=this._isLayerVisible,l=this._symbolLayerSorter;return{work:function(q){const u=
performance.now();for(;c<e.length;c++,m=0){const B=e[c];var w=B.styleLayerUID;if(!g(w)){k[c]||(k[c]={styleLayerUID:w,symbols:[]});continue}k[c]=k[c]||{styleLayerUID:w,symbols:[]};const A=k[c];for(;m<B.uniqueSymbols.length;m++){w=B.uniqueSymbols[m];if(99===m%100&&performance.now()-u>q)return!1;let D=null,F=!1,z=!1;for(const y of w.tileSymbols)if(!z||!F){const E=y.tile;if(!D||E.isCoverage||E.neededForCoverage&&!F){D=y;if(E.neededForCoverage||E.isCoverage)z=!0;E.isCoverage&&(F=!0)}}D.selectedForRendering=
!0;if(z){A.symbols.push(D);w.show=!0;for(const y of w.parts)y.show=!0}else w.show=!1}}for(const B of k)B.symbols.sort(f);return!0},get sortedSymbols(){return k.sort(l)}}};d._createOpacityJob=function(){function e(g,l){var q=g.symbols;for(const [,w]of q){var u=w;q=l;for(const B of u){u=B.unique;for(const A of u.parts)A.startOpacity+=(q-A.startTime)/p.FADE_DURATION*(.5<A.targetOpacity?1:-1),A.startOpacity=Math.min(Math.max(A.startOpacity,0),1),A.startTime=q,A.targetOpacity=u.show&&A.show?1:0}}k(g,l);
for(const w of g.childrenTiles)e(w,l)}const k=this._assignTileSymbolsOpacity,m=this._visibleTiles;let c=0;return{work(g){const l=performance.now();for(;c<m.length;c++){if(performance.now()-l>g)return!1;const q=m[c];if(x.isSome(q.parentTile))continue;const u=performance.now();e(q,u)}return!0}}};a._createClass(h,[{key:"running",get:function(){return this._running}}]);return h}();b.SymbolDeclutterer=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(b,a,x,p){let f=function(){function r(d,e,k){this.tileCoordRange=d;this._visibleTiles=e;this._createUnique=k;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var h=r.prototype;h.add=function(d,e){this._uniqueSymbolLayerArray=null;let k=this._tiles.get(d.id);k||(k={symbols:new Map},this._tiles.set(d.id,k));var m=new Map;if(e)for(var c of e)k.symbols.has(c)&&(m.set(c,k.symbols.get(c)),k.symbols.delete(c));
else for(var [g]of d.layerData)k.symbols.has(g)&&(m.set(g,k.symbols.get(g)),k.symbols.delete(g));this._removeSymbols(m);e=d.symbols;m=new Map;for(const [l,q]of e)if(c=q.length,32<=c){g=this.tileCoordRange;do g/=2,c/=4;while(8<c&&64<g);c=new p.GridIndex(this.tileCoordRange,this.tileCoordRange,g);m.set(l,{flat:q,index:c});k.symbols.set(l,{flat:q,index:c});for(const u of q)c.getCell(u.xTile,u.yTile).push(u)}else m.set(l,{flat:q}),k.symbols.set(l,{flat:q});this._addSymbols(d.key,e)};h.deleteStyleLayers=
function(d){this._uniqueSymbolLayerArray=null;for(const [e,k]of this._tiles){const m=new Map;for(const c of d)k.symbols.has(c)&&(m.set(c,k.symbols.get(c)),k.symbols.delete(c));this._removeSymbols(m);0===k.symbols.size&&this._tiles.delete(e)}};h.removeTile=function(d){this._uniqueSymbolLayerArray=null;const e=this._tiles.get(d.id);if(e){var k=new Map;for(const [m]of d.symbols)e.symbols.has(m)&&(k.set(m,e.symbols.get(m)),e.symbols.delete(m));this._removeSymbols(k);0===e.symbols.size&&this._tiles.delete(d.id)}};
h._removeSymbols=function(d){for(const [k,{flat:m}]of d)for(const c of m){d=c.unique;var e=d.tileSymbols;const g=e.length-1;for(let l=0;l<g;l++)if(e[l]===c){e[l]=e[g];break}e.length=g;0===g&&(e=this._uniqueSymbolsReferences.get(k),e.delete(d),0===e.size&&this._uniqueSymbolsReferences.delete(k));c.unique=null}};h._addSymbols=function(d,e){if(0!==e.size){var k=this._visibleTiles;for(const m of k)m.parentTile||m.key.world!==d.world||m.key.level===d.level&&!m.key.equals(d)||this._matchSymbols(m,d,e);
for(const [m,c]of e)for(const g of c)x.isNone(g.unique)&&(d=this._createUnique(),g.unique=d,d.tileSymbols.push(g),e=this._uniqueSymbolsReferences.get(m),e||(e=new Set,this._uniqueSymbolsReferences.set(m,e)),e.add(d))}};h._matchSymbols=function(d,e,k){if(d.key.level>e.level){var m=d.key.level-e.level;if(d.key.row>>m!==e.row||d.key.col>>m!==e.col)return}if(e.level>d.key.level&&(m=e.level-d.key.level,e.row>>m!==d.key.row||e.col>>m!==d.key.col))return;if(e.equals(d.key))for(var c of d.childrenTiles)this._matchSymbols(c,
e,k);else{c=new Map;for(const [q,u]of k){var g=[];for(const B of u)k=p.tileCoordChange(this.tileCoordRange,B.xTile,e.level,e.col,d.key.level,d.key.col),m=p.tileCoordChange(this.tileCoordRange,B.yTile,e.level,e.row,d.key.level,d.key.row),0<=k&&k<this.tileCoordRange&&0<=m&&m<this.tileCoordRange&&g.push({symbol:B,xTransformed:k,yTransformed:m});k=[];m=d.key.level<e.level?1:1<<d.key.level-e.level;const w=this._tiles.get(d.id).symbols.get(q);if(w){const B=w.flat;for(const A of g){var l=!1;let D;const F=
A.xTransformed,z=A.yTransformed;D=x.isSome(w.index)?w.index.getCell(F,z):B;g=A.symbol;const y=g.hash;for(const E of D)if(y===E.hash&&Math.abs(F-E.xTile)<=m&&Math.abs(z-E.yTile)<=m){l=E.unique;g.unique=l;l.tileSymbols.push(g);l=!0;break}l||k.push(g)}}0<k.length&&c.set(q,k)}for(const q of d.childrenTiles)this._matchSymbols(q,e,c)}};h._createUniqueSymbolLayerArray=function(){var d=this._uniqueSymbolsReferences;const e=Array(d.size);let k=0;for(const [m,c]of d){const g=Array(c.size);d=0;for(const l of c)g[d++]=
l;e[k]={styleLayerUID:m,uniqueSymbols:g};k++}return e};a._createClass(r,[{key:"uniqueSymbols",get:function(){x.isNone(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return r}();b.SymbolRepository=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../layers/support/TileInfo","./TileInfoView",
"./TileKey"],function(b,a,x,p){return function(f){function r(){var d=f.apply(this,arguments)||this;d._fullCacheLodInfos=null;d._levelByScale={};return d}b._inheritsLoose(r,f);var h=r.prototype;h.getTileParentId=function(d){d=p.pool.acquire(d);const e=0===d.level?null:p.getId(d.level-1,d.row>>1,d.col>>1,d.world);p.pool.release(d);return e};h.getTileCoverage=function(d,e,k){d=f.prototype.getTileCoverage.call(this,d,e,k);if(!d)return d;const m=1<<d.lodInfo.level;d.spans=d.spans.filter(c=>0<=c.row&&c.row<
m);return d};h.scaleToLevel=function(d){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[d])return this._levelByScale[d];var e=this._fullCacheLodInfos;if(d>e[0].scale)return e[0].level;let k;for(let m=0;m<e.length-1;m++)if(k=e[m+1],d>k.scale)return e=e[m],e.level+(e.scale-d)/(e.scale-k.scale);return e[e.length-1].level};h._initializeFullCacheLODs=function(d){d=0===d[0].level?d.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale})):a.create({size:this.tileInfo.size[0],
spatialReference:this.tileInfo.spatialReference}).lods.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale}));for(let e=0;e<d.length;e++)this._levelByScale[d[e].scale]=d[e].level;this._fullCacheLodInfos=d};return r}(x)})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(b,a,x,p,f,r){const h=new f("0/0/0/0");let d=function(){function k(c,
g,l,q,u,w,B,A){this.x=c;this.ymin=g;this.ymax=l;this.invM=q;this.leftAdjust=u;this.rightAdjust=w;this.leftBound=B;this.rightBound=A}k.create=function(c,g){c[1]>g[1]&&([c,g]=[g,c]);const [l,q]=c,[u,w]=g;c=u-l;g=w-q;g=0!==g?c/g:0;const B=(Math.ceil(q)-q)*g,A=(Math.floor(q)-q)*g;return new k(l,Math.floor(q),Math.ceil(w),g,0>c?B:A,0>c?A:B,0>c?u:l,0>c?l:u)};var m=k.prototype;m.incrRow=function(){this.x+=this.invM};m.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};m.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return k}();const e=[[0,0],[0,0],[0,0],[0,0]];return function(){function k(c,g=null){this.tileInfo=c;this.fullExtent=g;this.scales=[];this._infoByScale={};this._infoByLevel={};const l=c.lods.slice();l.sort((u,w)=>w.scale-u.scale);const q=this._lodInfos=l.map(u=>x.create(c,u,g));l.forEach((u,w)=>{this._infoByLevel[u.level]=q[w];this._infoByScale[u.scale]=q[w];this.scales[w]=u.scale},this);this._wrap=c.isWrappable}var m=k.prototype;
m.getLODInfoAt=function(c){return this._infoByLevel["number"===typeof c?c:c.level]};m.getTileBounds=function(c,g,l=!1){h.set(g);return(g=this._infoByLevel[h.level])?g.getTileBounds(c,h,l):c};m.getTileCoords=function(c,g,l=!1){h.set(g);return(g=this._infoByLevel[h.level])?g.getTileCoords(c,h,l):c};m.getTileCoverage=function(c,g=192,l="closest"){l="closest"===l?this.getClosestInfoForScale(c.scale):this.getSmallestInfoForScale(c.scale);const q=p.pool.acquire(l),u=this._wrap;var w=Infinity;let B=-Infinity;
const A=q.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-g;e[1][0]=e[2][0]=c.size[0]+g;e[2][1]=e[3][1]=c.size[1]+g;for(D of e)c.toMap(D,D),D[0]=l.getColumnForX(D[0]),D[1]=l.getRowForY(D[1]);c=[];var D=3;for(g=0;4>g;g++)e[g][1]===e[D][1]?D=g:(D=d.create(e[g],e[D]),w=Math.min(D.ymin,w),B=Math.max(D.ymax,B),void 0===c[D.ymin]&&(c[D.ymin]=[]),c[D.ymin].push(D),D=g);if(null==w||null==B||100<B-w)return null;for(g=[];w<B;){null!=c[w]&&(g=g.concat(c[w]));D=Infinity;var F=-Infinity;for(var z=g.length-1;0<=z;z--){var y=
g[z];D=Math.min(D,y.getLeftCol());F=Math.max(F,y.getRightCol())}D=Math.floor(D);F=Math.floor(F);if(w>=l.first[1]&&w<=l.last[1])if(u)if(l.size[0]<l.worldSize[0])for(z=Math.floor(F/l.worldSize[0]),y=Math.floor(D/l.worldSize[0]);y<=z;y++)A.push(new r(w,Math.max(l.getFirstColumnForWorld(y),D),Math.min(l.getLastColumnForWorld(y),F)));else A.push(new r(w,D,F));else D>l.last[0]||F<l.first[0]||(D=Math.max(D,l.first[0]),F=Math.min(F,l.last[0]),A.push(new r(w,D,F)));w+=1;for(D=g.length-1;0<=D;D--)F=g[D],F.ymax>=
w?F.incrRow():g.splice(D,1)}return q};m.getTileParentId=function(c){h.set(c);c=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>c)return null;this._getTileIdAtLOD(h,this._lodInfos[c],h);return h.id};m.getTileResolution=function(c){return(c=this._infoByLevel["object"===typeof c?c.level:c])?c.resolution:-1};m.getTileScale=function(c){return(c=this._infoByLevel[c.level])?c.scale:-1};m.intersects=function(c,g){h.set(g);g=this._infoByLevel[h.level];const l=c.lodInfo;if(l.resolution>g.resolution){this._getTileIdAtLOD(h,
l,h);var q=l.denormalizeCol(h.col,h.world);for(var u of c.spans)if(u.row===h.row&&u.colFrom<=q&&u.colTo>=q)return!0}if(l.resolution<g.resolution){const [B,A,D,F]=c.spans.reduce((z,y)=>{z[0]=Math.min(z[0],y.row);z[1]=Math.max(z[1],y.row);z[2]=Math.min(z[2],y.colFrom);z[3]=Math.max(z[3],y.colTo);return z},[Infinity,-Infinity,Infinity,-Infinity]);q=g.denormalizeCol(h.col,h.world);c=l.getColumnForX(g.getXForColumn(q));u=l.getRowForY(g.getYForRow(h.row));q=l.getColumnForX(g.getXForColumn(q+1))-1;g=l.getRowForY(g.getYForRow(h.row+
1))-1;return!(c>F||q<D||u>A||g<B)}const w=l.denormalizeCol(h.col,h.world);return c.spans.some(B=>B.row===h.row&&B.colFrom<=w&&B.colTo>=w)};m.normalizeBounds=function(c,g,l){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];this._wrap&&(g=a.getInfo(this.tileInfo.spatialReference),l=-l*(g.valid[1]-g.valid[0]),c[0]+=l,c[2]+=l);return c};m.getSmallestInfoForScale=function(c){const g=this.scales;if(this._infoByScale[c])return this._infoByScale[c];if(c>g[0])return this._infoByScale[g[0]];for(let l=1;l<g.length-1;l++)if(c>
g[l]+1E-6)return this._infoByScale[g[l-1]];return this._infoByScale[g[g.length-1]]};m.getClosestInfoForScale=function(c){const g=this.scales;if(this._infoByScale[c])return this._infoByScale[c];c=g.reduce((l,q)=>Math.abs(q-c)<Math.abs(l-c)?q:l,g[0]);return this._infoByScale[c]};m.scaleToLevel=function(c){const g=this.scales;if(this._infoByScale[c])return this._infoByScale[c].level;for(let l=g.length-1;0<=l;l--)if(c<g[l])return l===g.length-1?this._infoByScale[g[g.length-1]].level:this._infoByScale[g[l]].level+
(g[l]-c)/(g[l]-g[l+1]);return this._infoByScale[g[0]].level};m.scaleToZoom=function(c){return this.tileInfo.scaleToZoom(c)};m._getTileIdAtLOD=function(c,g,l){const q=this._infoByLevel[l.level];c.set(l);if(g.resolution<q.resolution)return null;if(g.resolution===q.resolution)return c;c.level=g.level;c.col=Math.floor(l.col*q.resolution/g.resolution+.01);c.row=Math.floor(l.row*q.resolution/g.resolution+.01);return c};b._createClass(k,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);
return k}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,a,x){function p(r,h,d){r[0]=h;r[1]=d;return r}const f=new x("0/0/0/0");return function(){function r(d,e,k,m,c,g,l,q,u,w,B,A){this.level=d;this.resolution=e;this.scale=k;this.origin=m;this.first=c;this.last=g;this.size=l;this.norm=q;this.worldStart=u;this.worldEnd=w;this.worldSize=B;this.wrap=A}r.create=function(d,e,k=null){var m=a.getInfo(d.spatialReference);
const c=e.origin||[d.origin.x,d.origin.y],g=[d.size[0]*e.resolution,d.size[1]*e.resolution],l=[-Infinity,-Infinity],q=[Infinity,Infinity],u=[Infinity,Infinity];b.isSome(k)&&(p(l,Math.max(0,Math.floor((k.xmin-c[0])/g[0])),Math.max(0,Math.floor((c[1]-k.ymax)/g[1]))),p(q,Math.max(0,Math.floor((k.xmax-c[0])/g[0])),Math.max(0,Math.floor((c[1]-k.ymin)/g[1]))),p(u,q[0]-l[0]+1,q[1]-l[1]+1));const {cols:w,rows:B}=e;!k&&w&&B&&(p(l,w[0],B[0]),p(q,w[1],B[1]),p(u,w[1]-w[0]+1,B[1]-B[0]+1));let A;d.isWrappable?
(d=[Math.ceil(Math.round((m.valid[1]-m.valid[0])/e.resolution)/d.size[0]),u[1]],m=[Math.floor((m.origin[0]-c[0])/g[0]),l[1]],k=[d[0]+m[0]-1,q[1]],A=!0):(m=l,k=q,d=u,A=!1);return new r(e.level,e.resolution,e.scale,c,l,q,u,g,m,k,d,A)};var h=r.prototype;h.normalizeCol=function(d){if(!this.wrap)return d;const e=this.worldSize[0];return 0>d?e-1-Math.abs((d+1)%e):d%e};h.denormalizeCol=function(d,e){return this.wrap?this.worldSize[0]*e+d:d};h.getWorldForColumn=function(d){return this.wrap?Math.floor(d/this.worldSize[0]):
0};h.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]};h.getLastColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};h.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};h.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};h.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};h.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};h.getTileBounds=function(d,e,k=!1){f.set(e);var m=k?f.col:this.denormalizeCol(f.col,
f.world),c=f.row;e=this.getXForColumn(m);k=this.getYForRow(c+1);m=this.getXForColumn(m+1);c=this.getYForRow(c);d[0]=e;d[1]=k;d[2]=m;d[3]=c;return d};h.getTileCoords=function(d,e,k=!1){f.set(e);e=k?f.col:this.denormalizeCol(f.col,f.world);Array.isArray(d)?p(d,this.getXForColumn(e),this.getYForRow(f.row)):(d.x=this.getXForColumn(e),d.y=this.getYForRow(f.row));return d};return r}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(b){let a=function(){function x(){this.spans=
[]}var p=x.prototype;p.acquire=function(f){this.lodInfo=f};p.release=function(){this.lodInfo=null;this.spans.length=0};p.forEach=function(f,r){const {spans:h,lodInfo:d}=this,{level:e}=d;if(0!==h.length)for(const {row:k,colFrom:m,colTo:c}of h)for(let g=m;g<=c;g++)f.call(r,e,k,d.normalizeCol(g),d.getWorldForColumn(g))};return x}();a.pool=new b(a);return a})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(b,a,x){this.row=b;this.colFrom=a;this.colTo=x}})},"esri/views/2d/engine/vectorTiles/VTLPainter3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../vtlBrushes ./shaders/VTLMaterialManager ./style/StyleDefinition ../../../webgl/enums".split(" "),
function(b,a,x,p,f,r){return function(){function h(e,k){this.spriteMosaic=e;this.glyphMosaic=k;this._brushCache=new Map;this._vtlMaterialManager=new p}var d=h.prototype;d.dispose=function(){this._brushCache&&(this._brushCache.forEach(e=>e.dispose()),this._brushCache=null);this._vtlMaterialManager=a.disposeMaybe(this._vtlMaterialManager);this.spriteMosaic.dispose();this.glyphMosaic.dispose()};d.drawTile=function(e,k,m){const {context:c}=e,g=m.layers;0<m.backgroundBucketIds.length&&(e.renderPass="background",
m.backgroundBucketIds.forEach(q=>this._renderStyleLayer(m.getLayerById(q),e,k,!0)));c.setBlendingEnabled(!1);c.setDepthTestEnabled(!0);c.setDepthWriteEnabled(!0);c.setDepthFunction(r.CompareFunction.LEQUAL);e.renderPass="opaque";for(var l=g.length-1;0<=l;l--)this._renderStyleLayer(g[l],e,k,!1);c.setDepthWriteEnabled(!1);c.setBlendingEnabled(!0);c.setBlendFunctionSeparate(r.BlendFactor.ONE,r.BlendFactor.ONE_MINUS_SRC_ALPHA,r.BlendFactor.ONE,r.BlendFactor.ONE_MINUS_SRC_ALPHA);e.renderPass="translucent";
for(l=0;l<g.length;l++)this._renderStyleLayer(g[l],e,k,!1);c.setDepthTestEnabled(!1);c.bindVAO()};d._renderStyleLayer=function(e,k,m,c=!1){if(c||e&&m.layerData.has(e.uid))if(c=e.getLayoutProperty("visibility"),!c||c.getValue()!==f.Visibility.NONE){({renderPass:c}=k);switch(e.type){case f.StyleLayerType.BACKGROUND:if("background"!==c)return;var g="vtlBackground";break;case f.StyleLayerType.FILL:if("opaque"!==c&&"translucent"!==k.renderPass)return;g="vtlFill";break;case f.StyleLayerType.LINE:if("translucent"!==
c)return;g="vtlLine";break;case f.StyleLayerType.CIRCLE:if("translucent"!==c)return;g="vtlCircle";break;case f.StyleLayerType.SYMBOL:if("translucent"!==c)return;g="vtlSymbol"}c=k.displayLevel;void 0!==e.minzoom&&e.minzoom>c+1E-6||void 0!==e.maxzoom&&e.maxzoom<=c-1E-6||(k.styleLayerUID=e.uid,k.styleLayer=e,this._drawWithBrush(k,m,g))}};d._drawWithBrush=function(e,k,m){this._brushCache.has(m)||this._brushCache.set(m,new x.vtlBrushes[m]);this._brushCache.get(m).drawMany(e,[k])};b._createClass(h,[{key:"vectorTilesMaterialManager",
get:function(){return this._vtlMaterialManager}}]);return h}()})},"esri/views/2d/engine/vtlBrushes":function(){define("exports ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol".split(" "),function(b,a,x,p,f,r){b.vtlBrushes={vtlBackground:a.WGLBrushVTLBackground,vtlFill:p.WGLBrushVTLFill,vtlLine:f.WGLBrushVTLLine,vtlCircle:x.WGLBrushVTLCircle,vtlSymbol:r.WGLBrushVTLSymbol};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/mat3f32 ../../../../../chunks/vec4f32 ../definitions ../enums ../number ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),function(b,a,x,p,f,r,h,d,e,k,m,c,g){k=function(l){function q(){var w=
l.apply(this,arguments)||this;w._color=r.fromValues(1,0,0,1);w._patternMatrix=f.create();w._programOptions={id:!1,pattern:!1};return w}a._inheritsLoose(q,l);var u=q.prototype;u.dispose=function(){this._vao&&(this._vao.dispose(),this._vao=null)};u.drawMany=function(w,B){const {context:A,painter:D,styleLayerUID:F,requestRender:z,allowDelayedRender:y}=w;this._loadWGLResources(w);const E=w.displayLevel;var J=w.styleLayer,K=J.backgroundMaterial;const Q=D.vectorTilesMaterialManager;var M=J.getPaintValue("background-color",
E);const S=J.getPaintValue("background-opacity",E),N=J.getPaintValue("background-pattern",E),O=void 0!==N,T=M[3]*S,L=w.spriteMosaic;let H,R;const W=(window.devicePixelRatio|1)>h.VTL_HIGH_RES_CUTOFF?2:1;w=w.drawPhase===d.WGLDrawPhase.HITTEST;const U=this._programOptions;U.id=w;U.pattern=O;K=Q.getMaterialProgram(A,K,U);if(y&&p.isSome(z)&&!K.compiled)z();else{A.bindVAO(this._vao);A.useProgram(K);if(O){M=L.getMosaicItemPosition(N,!0);if(p.isSome(M)){const {tl:X,br:Z,page:ea}=M;H=Z[0]-X[0];R=Z[1]-X[1];
M=L.getPageSize(ea);p.isSome(M)&&(L.bind(A,c.TextureSamplingMode.LINEAR,ea,h.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform4f("u_tlbr",X[0],X[1],Z[0],Z[1]),K.setUniform2fv("u_mosaicSize",M),K.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_SPRITES))}K.setUniform1f("u_opacity",S)}else this._color[0]=T*M[0],this._color[1]=T*M[1],this._color[2]=T*M[2],this._color[3]=T,K.setUniform4fv("u_color",this._color);K.setUniform1f("u_depth",J.z||0);w&&(J=e.u32to4Xu8(F+1),K.setUniform4fv("u_id",J));for(const X of B)K.setUniform1f("u_coord_range",
X.rangeX),K.setUniformMatrix3fv("u_dvsMat3",X.transforms.dvs),O&&(J=W*X.width*Math.max(2**(Math.round(E)-X.key.level),1),B=J/x.nextPowerOfTwo(H),J/=x.nextPowerOfTwo(R),this._patternMatrix[0]=B,this._patternMatrix[4]=J,K.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),A.setStencilFunction(c.CompareFunction.EQUAL,0,255),A.drawArrays(c.PrimitiveType.TRIANGLE_STRIP,0,4)}};u._loadWGLResources=function(w){if(!this._vao){var {context:B,styleLayer:A}=w;w=A.backgroundMaterial;var D=new Int8Array([0,
0,1,0,0,1,1,1]);D=m.BufferObject.createVertex(B,c.Usage.STATIC_DRAW,D);this._vao=new g.VertexArrayObject(B,w.getAttributeLocations(),w.getLayoutInfo(),{geometry:D})}};return q}(k);b.WGLBrushVTLBackground=k;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(b){b.ANGLE_FACTOR_256=256/360;b.ATTRIBUTE_DATA_ANIMATION=1;b.ATTRIBUTE_DATA_DD0=3;b.ATTRIBUTE_DATA_DD1=4;b.ATTRIBUTE_DATA_FILTER_FLAGS=0;b.ATTRIBUTE_DATA_GPGPU=
2;b.ATTRIBUTE_DATA_VV=3;b.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;b.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};b.BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR=8;b.BITSET_FILL_RANDOM_PATTERN_OFFSET=4;b.BITSET_GENERIC_CONSIDER_ALPHA_ONLY=16;b.BITSET_GENERIC_LOCK_COLOR=2;b.BITSET_LINE_SCALE_DASH=4;b.BITSET_MARKER_ALIGNMENT_MAP=1;b.BITSET_MARKER_ALIGNMENT_SCREEN=0;b.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=4;b.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=8;b.BITSET_TYPE_FILL_OUTLINE=
1;b.BUFFER_DATA_MINIMUM_SIZE=128;b.BUFFER_DATA_POOL_SIZE=4;b.CHART_MAX_FIELDS=10;b.COLLISION_BOX_PADDING=16;b.COLLISION_BUCKET_SIZE=128;b.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;b.COLLISION_MAX_ZOOM_DELTA=1;b.COLLISION_PLACEMENT_PADDING=8;b.COLLISION_TILE_BOX_SIZE=4;b.DEBUG_LABELS=!1;b.DISPLAY_RECORD_INT_PER_ELEMENT=8;b.DOT_DENSITY_MAX_FIELDS=8;b.EFFECT_FLAG_0=4;b.ENABLE_EARLY_LABEL_DISCARD=!1;b.EXTRUDE_SCALE=64;b.FILTER_FLAG_0=2;b.GLYPH_SIZE=24;b.HEURISTIC_GLYPHS_PER_FEATURE=10;b.HEURISTIC_GLYPHS_PER_LINE=
50;b.HIGHLIGHT_FLAG=1;b.HITTEST_RADIUS=3;b.MAGIC_LABEL_LINE_HEIGHT=29;b.MAX_FILTERS=2;b.MAX_GPU_UPLOADS_PER_FRAME=2;b.MIN_MAX_ZOOM_PRECISION_FACTOR=10;b.NAN_MAGIC_NUMBER=1E-30;b.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;b.PATTERN_FILL_RASTERIZATION_SCALE=2;b.PICTURE_FILL_COLOR=4294967295;b.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE=1024;b.RASTER_TILE_SIZE=256;b.SPRITE_PADDING=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;b.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;b.TEXTURE_BINDING_ATTRIBUTE_DATA_3=
4;b.TEXTURE_BINDING_ATTRIBUTE_DATA_4=5;b.TEXTURE_BINDING_ATTRIBUTE_DATA_5=6;b.TEXTURE_BINDING_BITMAP=0;b.TEXTURE_BINDING_GLYPH_ATLAS=0;b.TEXTURE_BINDING_GPGPU=12;b.TEXTURE_BINDING_HIGHLIGHT_0=5;b.TEXTURE_BINDING_HIGHLIGHT_1=6;b.TEXTURE_BINDING_RENDERER_0=5;b.TEXTURE_BINDING_RENDERER_1=6;b.TEXTURE_BINDING_SPRITE_ATLAS=0;b.TEXTURE_UPLOAD_MANAGER_BUDGET=4;b.TEXTURE_UPLOAD_MANAGER_CHUNK_SIZE=128;b.TEXT_PLACEMENT_PADDING=8;b.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;b.TILE_SIZE=512;b.VTL_HIGH_RES_CUTOFF=1.15;
b.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;b.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;b.WEBGL_MAX_INNER_STOPS=6;b.WEBGL_MAX_STOPS=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(b){b.WGLGeometryType=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(b.WGLGeometryType||(b.WGLGeometryType={}));b.WGLDrawPhase=void 0;(function(a){a[a.NONE=0]="NONE";a[a.MAP=
1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(b.WGLDrawPhase||(b.WGLDrawPhase={}));b.VVType=void 0;(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(b.VVType||(b.VVType={}));b.WGLVVFlag=void 0;(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]=
"ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(b.WGLVVFlag||(b.WGLVVFlag={}));b.WGLVVTarget=void 0;(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(b.WGLVVTarget||(b.WGLVVTarget=
{}));b.MosaicType=void 0;(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(b.MosaicType||(b.MosaicType={}));b.WGLSymbologyType=void 0;(function(a){a[a.DEFAULT=0]="DEFAULT";a[a.SIMPLE=1]="SIMPLE";a[a.DOT_DENSITY=2]="DOT_DENSITY";a[a.OUTLINE_FILL=3]="OUTLINE_FILL";a[a.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";a[a.HEATMAP=5]="HEATMAP";a[a.PIE_CHART=6]="PIE_CHART"})(b.WGLSymbologyType||(b.WGLSymbologyType={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],
function(b){function a(f,r,h){return Math.round(Math.max(Math.min(f,h),r))}const x=new Float32Array(1),p=new Uint32Array(x.buffer);b.i16=function(f){return a(f,-32768,32767)};b.i1616to32=function(f,r){return 65535&f|r<<16};b.i32=function(f){return a(f,-2147483648,2147483647)};b.i8=function(f){return a(f,-128,127)};b.i8816to32=function(f,r,h){return f&255|(r&255)<<8|h<<16};b.i8888to32=function(f,r,h,d){return f&255|(r&255)<<8|(h&255)<<16|d<<24};b.numTo32=function(f){return f|0};b.toFloat32=function(f){p[0]=
f;return x[0]};b.toUint32=function(f){x[0]=f;return p[0]};b.u16=function(f){return a(f,0,65535)};b.u32=function(f){return a(f,0,4294967295)};b.u32to4Xu8=function(f){return[f&255,(f&65280)>>>8,(f&16711680)>>>16,(f&4278190080)>>>24]};b.u4u4to8=function(f,r){return 15&f|(15&r)<<4};b.u8=function(f){return a(f,0,255)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(function(){return function(){function b(){this.name=this.constructor.name||
"UnnamedBrush";this.brushEffect=null}var a=b.prototype;a.prepareState=function(x,p){};a.draw=function(x,p,f){};a.drawMany=function(x,p,f){for(const r of p)r.visible&&this.draw(x,r,f)};return b}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,x,p,f,r,h,d){h=function(e){function k(){var c=
e.apply(this,arguments)||this;c._programOptions={id:!1};return c}a._inheritsLoose(k,e);var m=k.prototype;m.dispose=function(){};m.drawMany=function(c,g){const {context:l,displayLevel:q,requiredLevel:u,state:w,drawPhase:B,painter:A,spriteMosaic:D,styleLayerUID:F,requestRender:z,allowDelayedRender:y}=c;if(g.some(N=>N.layerData.get(F)?.circleIndexCount??!1)){c=c.styleLayer;var E=c.circleMaterial,J=A.vectorTilesMaterialManager,K=c.getPaintValue("circle-translate",q),Q=c.getPaintValue("circle-translate-anchor",
q),M=B===f.WGLDrawPhase.HITTEST,S=this._programOptions;S.id=M;J=J.getMaterialProgram(l,E,S);if(y&&x.isSome(z)&&!J.compiled)z();else{l.useProgram(J);J.setUniformMatrix3fv("u_displayMat3",Q===p.TranslateAnchor.VIEWPORT?w.displayMat3:w.displayViewMat3);J.setUniform2fv("u_circleTranslation",K);J.setUniform1f("u_depth",c.z);J.setUniform1f("u_antialiasingWidth",1.2);K=-1;M&&(M=r.u32to4Xu8(F+1),J.setUniform4fv("u_id",M));for(const N of g)N.layerData.has(F)&&(N.key.level!==K&&(K=N.key.level,E.setDataUniforms(J,
q,c,K,D)),g=N.layerData.get(F),g.circleIndexCount&&(g.prepareForRendering(l),M=g.circleVertexArrayObject,x.isNone(M)||(l.bindVAO(M),J.setUniformMatrix3fv("u_dvsMat3",N.transforms.dvs),u!==N.key.level?l.setStencilFunction(d.CompareFunction.EQUAL,N.stencilRef,255):l.setStencilFunction(d.CompareFunction.GREATER,255,255),l.drawElements(d.PrimitiveType.TRIANGLES,g.circleIndexCount,d.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*g.circleIndexStart),N.triangleCount+=g.circleIndexCount/3)))}}};return k}(h);
b.WGLBrushVTLCircle=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,x,p,f,r,h,d,e){const k=1/65536;d=function(m){function c(){var l=m.apply(this,arguments)||this;l._fillProgramOptions={id:!1,pattern:!1};
l._outlineProgramOptions={id:!1};return l}a._inheritsLoose(c,m);var g=c.prototype;g.dispose=function(){};g.drawMany=function(l,q){const {displayLevel:u,drawPhase:w,renderPass:B,spriteMosaic:A,styleLayerUID:D}=l;var F=!1;for(var z of q)if(z.layerData.has(D)){var y=z.layerData.get(D);if(0<y.fillIndexCount||0<y.outlineIndexCount){F=!0;break}}if(F){F=l.styleLayer;var E=F.getPaintProperty("fill-pattern");y=(z=void 0!==E)&&E.isDataDriven;if(z&&!y){var J=E.getValue(u);J=A.getMosaicItemPosition(J,!0)}E=!z&&
F.getPaintValue("fill-antialias",u);var K=!0,Q=1;if(!z){var M=F.getPaintProperty("fill-color"),S=F.getPaintProperty("fill-opacity");M?.isDataDriven||S?.isDataDriven||(Q=F.getPaintValue("fill-color",u),Q=F.getPaintValue("fill-opacity",u)*Q[3],1<=Q&&(K=!1))}if(!K||"opaque"!==B){var N;w===r.WGLDrawPhase.HITTEST&&(N=h.u32to4Xu8(D+1));M=F.getPaintValue("fill-translate",u);S=F.getPaintValue("fill-translate-anchor",u);(K||"translucent"!==B)&&this._drawFill(l,D,F,q,M,S,z,J,y,N);J=!F.hasDataDrivenOutlineColor&&
F.outlineUsesFillColor&&1>Q;E&&"opaque"!==B&&!J&&this._drawOutline(l,D,F,q,M,S,N)}}};g._drawFill=function(l,q,u,w,B,A,D,F,z,y){if(!D||z||!x.isNone(F)){var {context:E,displayLevel:J,state:K,drawPhase:Q,painter:M,pixelRatio:S,spriteMosaic:N,requestRender:O,allowDelayedRender:T}=l;l=u.fillMaterial;var L=M.vectorTilesMaterialManager,H=S>f.VTL_HIGH_RES_CUTOFF?2:1,R=Q===r.WGLDrawPhase.HITTEST,W=this._fillProgramOptions;W.id=R;W.pattern=D;L=L.getMaterialProgram(E,l,W);if(T&&x.isSome(O)&&!L.compiled)O();
else{E.useProgram(L);x.isSome(F)&&({page:F}=F,W=N.getPageSize(F),x.isSome(W)&&(N.bind(E,e.TextureSamplingMode.LINEAR,F,f.VTL_TEXTURE_BINDING_UNIT_SPRITES),L.setUniform2fv("u_mosaicSize",W),L.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES)));L.setUniformMatrix3fv("u_displayMat3",A===p.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);L.setUniform2fv("u_fillTranslation",B);L.setUniform1f("u_depth",u.z+k);R&&L.setUniform4fv("u_id",y);B=-1;for(const U of w)if(U.layerData.has(q)&&
(U.key.level!==B&&(B=U.key.level,l.setDataUniforms(L,J,u,B,N)),w=U.layerData.get(q),w.fillIndexCount&&(w.prepareForRendering(E),A=w.fillVertexArrayObject,!x.isNone(A)))){E.bindVAO(A);L.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);E.setStencilFunction(e.CompareFunction.EQUAL,U.stencilRef,255);D&&L.setUniform1f("u_patternFactor",U.rangeX/(H*U.width*Math.max(2**(Math.round(J)-U.key.level),1)));if(z){A=w.patternMap;if(!A)continue;for(const [X,Z]of A)A=N.getPageSize(X),x.isSome(A)&&(N.bind(E,e.TextureSamplingMode.LINEAR,
X,f.VTL_TEXTURE_BINDING_UNIT_SPRITES),L.setUniform2fv("u_mosaicSize",A),L.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES),E.drawElements(e.PrimitiveType.TRIANGLES,Z[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else E.drawElements(e.PrimitiveType.TRIANGLES,w.fillIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*w.fillIndexStart);U.triangleCount+=w.fillIndexCount/3}}}};g._drawOutline=function(l,q,u,w,B,A,D){const {context:F,displayLevel:z,state:y,drawPhase:E,
painter:J,pixelRatio:K,spriteMosaic:Q,requestRender:M,allowDelayedRender:S}=l;l=u.outlineMaterial;var N=J.vectorTilesMaterialManager;const O=.75/K,T=E===r.WGLDrawPhase.HITTEST,L=this._outlineProgramOptions;L.id=T;N=N.getMaterialProgram(F,l,L);if(S&&x.isSome(M)&&!N.compiled)M();else{F.useProgram(N);N.setUniformMatrix3fv("u_displayMat3",A===p.TranslateAnchor.VIEWPORT?y.displayMat3:y.displayViewMat3);N.setUniform2fv("u_fillTranslation",B);N.setUniform1f("u_depth",u.z+k);N.setUniform1f("u_outline_width",
O);T&&N.setUniform4fv("u_id",D);B=-1;for(const H of w)H.layerData.has(q)&&(H.key.level!==B&&(B=H.key.level,l.setDataUniforms(N,z,u,B,Q)),w=H.layerData.get(q),w.prepareForRendering(F),w.outlineIndexCount&&(A=w.outlineVertexArrayObject,x.isNone(A)||(F.bindVAO(A),N.setUniformMatrix3fv("u_dvsMat3",H.transforms.dvs),F.setStencilFunction(e.CompareFunction.EQUAL,H.stencilRef,255),F.drawElements(e.PrimitiveType.TRIANGLES,w.outlineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*w.outlineIndexStart),
H.triangleCount+=w.outlineIndexCount/3)))}};return c}(d);b.WGLBrushVTLFill=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,x,p,f,r,h,d,e){d=function(k){function m(){var g=k.apply(this,arguments)||
this;g._programOptions={id:!1,pattern:!1,sdf:!1};return g}a._inheritsLoose(m,k);var c=m.prototype;c.dispose=function(){};c.drawMany=function(g,l){const {context:q,displayLevel:u,state:w,drawPhase:B,painter:A,pixelRatio:D,spriteMosaic:F,styleLayerUID:z,requestRender:y,allowDelayedRender:E}=g;if(l.some(U=>U.layerData.get(z)?.lineIndexCount??!1)){g=g.styleLayer;var J=g.lineMaterial,K=A.vectorTilesMaterialManager,Q=g.getPaintValue("line-translate",u),M=g.getPaintValue("line-translate-anchor",u),S=g.getPaintProperty("line-pattern"),
N=void 0!==S,O=N&&S.isDataDriven;if(N&&!O){S=S.getValue(u);var T=F.getMosaicItemPosition(S)}var L;S=!1;if(!N){var H=g.getPaintProperty("line-dasharray");S=(L=void 0!==H)&&H.isDataDriven;L&&!S&&(T=H.getValue(u),T=g.getDashKey(T,g.getLayoutValue("line-cap",u)),T=F.getMosaicItemPosition(T))}H=1/D;var R=B===r.WGLDrawPhase.HITTEST,W=this._programOptions;W.id=R;W.pattern=N;W.sdf=L;L=K.getMaterialProgram(q,J,W);if(E&&x.isSome(y)&&!L.compiled)y();else{q.useProgram(L);L.setUniformMatrix3fv("u_displayViewMat3",
w.displayViewMat3);L.setUniformMatrix3fv("u_displayMat3",M===p.TranslateAnchor.VIEWPORT?w.displayMat3:w.displayViewMat3);L.setUniform2fv("u_lineTranslation",Q);L.setUniform1f("u_depth",g.z);L.setUniform1f("u_antialiasing",H);R&&(Q=h.u32to4Xu8(z+1),L.setUniform4fv("u_id",Q));T&&x.isSome(T)&&({page:Q}=T,M=F.getPageSize(Q),x.isSome(M)&&(F.bind(q,e.TextureSamplingMode.LINEAR,Q,f.VTL_TEXTURE_BINDING_UNIT_SPRITES),L.setUniform2fv("u_mosaicSize",M),L.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES)));
Q=-1;for(const U of l)if(U.layerData.has(z)&&(U.key.level!==Q&&(Q=U.key.level,J.setDataUniforms(L,u,g,Q,F)),L.setUniform1f("u_zoomFactor",2**(u-Q)/D),l=U.layerData.get(z),l.lineIndexCount&&(l.prepareForRendering(q),M=l.lineVertexArrayObject,!x.isNone(M)))){q.bindVAO(M);L.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);q.setStencilFunction(e.CompareFunction.EQUAL,U.stencilRef,255);if(O||S){M=l.patternMap;if(!M)continue;for(const [X,Z]of M)M=F.getPageSize(X),x.isSome(M)&&(F.bind(q,e.TextureSamplingMode.LINEAR,
X,f.VTL_TEXTURE_BINDING_UNIT_SPRITES),L.setUniform2fv("u_mosaicSize",M),L.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES),q.drawElements(e.PrimitiveType.TRIANGLES,Z[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*Z[0]))}else q.drawElements(e.PrimitiveType.TRIANGLES,l.lineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*l.lineIndexStart);U.triangleCount+=l.lineIndexCount/3}}}};return m}(d);b.WGLBrushVTLLine=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../GeometryUtils ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,x,p,f,r,h,d,e,k,m,c){const g=1/65536;m=function(l){function q(){var w=l.apply(this,arguments)||this;w._iconProgramOptions={id:!1,
sdf:!1};w._sdfProgramOptions={id:!1};w._spritesTextureSize=p.create();return w}a._inheritsLoose(q,l);var u=q.prototype;u.dispose=function(){};u.drawMany=function(w,B){const {drawPhase:A,styleLayerUID:D}=w,F=w.styleLayer;let z;A===d.WGLDrawPhase.HITTEST&&(z=k.u32to4Xu8(D+1));this._drawIcons(w,F,B,z);this._drawText(w,F,B,z)};u._drawIcons=function(w,B,A,D){const {context:F,displayLevel:z,drawPhase:y,painter:E,spriteMosaic:J,state:K,styleLayerUID:Q,requestRender:M,allowDelayedRender:S}=w,N=B.iconMaterial;
var O=E.vectorTilesMaterialManager,T=!1;for(var L of A)if(L.layerData.has(Q)){var H=L.layerData.get(Q);if(0<H.iconPerPageElementsMap.size){T=!0;break}}if(T){T=B.getPaintValue("icon-translate",z);L=B.getPaintValue("icon-translate-anchor",z);var R=B.getLayoutValue("icon-rotation-alignment",z);R===r.RotationAlignment.AUTO&&(R=B.getLayoutValue("symbol-placement",z)===r.SymbolPlacement.POINT?r.RotationAlignment.VIEWPORT:r.RotationAlignment.MAP);var W=R===r.RotationAlignment.MAP;W=B.getLayoutValue("icon-keep-upright",
z)&&W;var U=H.isIconSDF;H=y===d.WGLDrawPhase.HITTEST;var X=this._iconProgramOptions;X.id=H;X.sdf=U;O=O.getMaterialProgram(F,N,X);if(S&&x.isSome(M)&&!O.compiled)M();else{F.useProgram(O);O.setUniformMatrix3fv("u_displayViewMat3",R===r.RotationAlignment.MAP?K.displayViewMat3:K.displayMat3);O.setUniformMatrix3fv("u_displayMat3",L===r.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);O.setUniform2fv("u_iconTranslation",T);O.setUniform1f("u_depth",B.z);O.setUniform1f("u_mapRotation",e.degToByte(K.rotation));
O.setUniform1f("u_keepUpright",W?1:0);O.setUniform1f("u_level",10*z);O.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_SPRITES);O.setUniform1f("u_fadeDuration",f.FADE_DURATION/1E3);H&&O.setUniform4fv("u_id",D);D=-1;for(const Z of A)if(Z.layerData.has(Q)&&(Z.key.level!==D&&(D=Z.key.level,N.setDataUniforms(O,z,B,D,J)),H=Z.layerData.get(Q),0!==H.iconPerPageElementsMap.size&&(H.prepareForRendering(F),H.updateOpacityInfo(),A=H.iconVertexArrayObject,!x.isNone(A)))){F.bindVAO(A);O.setUniformMatrix3fv("u_dvsMat3",
Z.transforms.dvs);O.setUniform1f("u_time",(performance.now()-H.lastOpacityUpdate)/1E3);for(const [ea,ca]of H.iconPerPageElementsMap)this._renderIconRange(w,O,ca,ea,Z)}}}};u._renderIconRange=function(w,B,A,D,F){const {context:z,spriteMosaic:y}=w;this._spritesTextureSize[0]=y.getWidth(D)/4;this._spritesTextureSize[1]=y.getHeight(D)/4;B.setUniform2fv("u_mosaicSize",this._spritesTextureSize);y.bind(z,c.TextureSamplingMode.LINEAR,D,h.VTL_TEXTURE_BINDING_UNIT_SPRITES);z.setStencilTestEnabled(!0);z.setStencilFunction(c.CompareFunction.GREATER,
255,255);z.setStencilWriteMask(0);z.drawElements(c.PrimitiveType.TRIANGLES,A[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*A[0]);F.triangleCount+=A[1]/3};u._drawText=function(w,B,A,D){const {context:F,displayLevel:z,drawPhase:y,glyphMosaic:E,painter:J,pixelRatio:K,spriteMosaic:Q,state:M,styleLayerUID:S,requestRender:N,allowDelayedRender:O}=w;w=B.textMaterial;const T=J.vectorTilesMaterialManager;var L=!1;for(var H of A)if(H.layerData.has(S)){var R=H.layerData.get(S);if(0<R.glyphPerPageElementsMap.size){L=
!0;break}}if(L&&(R=B.getPaintProperty("text-opacity"),!R||R.isDataDriven||0!==R.getValue(z))){R=B.getPaintProperty("text-color");var W=!R||R.isDataDriven||0<R.getValue(z)[3];R=B.getPaintProperty("text-halo-width");H=B.getPaintProperty("text-halo-color");var U=(!R||R.isDataDriven||0<R.getValue(z))&&(!H||H.isDataDriven||0<H.getValue(z)[3]);if(W||U){R=B.getLayoutValue("text-rotation-alignment",z);R===r.RotationAlignment.AUTO&&(R=B.getLayoutValue("symbol-placement",z)===r.SymbolPlacement.POINT?r.RotationAlignment.VIEWPORT:
r.RotationAlignment.MAP);H=R===r.RotationAlignment.MAP;H=B.getLayoutValue("text-keep-upright",z)&&H;L=y===d.WGLDrawPhase.HITTEST;var X=.8*3/K;this._glyphTextureSize||(this._glyphTextureSize=p.fromValues(E.width/4,E.height/4));var Z=B.getPaintValue("text-translate",z),ea=B.getPaintValue("text-translate-anchor",z),ca=this._sdfProgramOptions;ca.id=L;var aa=T.getMaterialProgram(F,w,ca);if(O&&x.isSome(N)&&!aa.compiled)N();else{F.useProgram(aa);aa.setUniformMatrix3fv("u_displayViewMat3",R===r.RotationAlignment.MAP?
M.displayViewMat3:M.displayMat3);aa.setUniformMatrix3fv("u_displayMat3",ea===r.TranslateAnchor.VIEWPORT?M.displayMat3:M.displayViewMat3);aa.setUniform2fv("u_textTranslation",Z);aa.setUniform1f("u_depth",B.z+g);aa.setUniform2fv("u_mosaicSize",this._glyphTextureSize);aa.setUniform1f("u_mapRotation",e.degToByte(M.rotation));aa.setUniform1f("u_keepUpright",H?1:0);aa.setUniform1f("u_level",10*z);aa.setUniform1i("u_texture",h.VTL_TEXTURE_BINDING_UNIT_GLYPHS);aa.setUniform1f("u_antialiasingWidth",X);aa.setUniform1f("u_fadeDuration",
f.FADE_DURATION/1E3);L&&aa.setUniform4fv("u_id",D);D=-1;for(const fa of A)fa.layerData.has(S)&&(fa.key.level!==D&&(D=fa.key.level,w.setDataUniforms(aa,z,B,D,Q)),R=fa.layerData.get(S),0!==R.glyphPerPageElementsMap.size&&(R.prepareForRendering(F),R.updateOpacityInfo(),A=R.textVertexArrayObject,x.isNone(A)||(F.bindVAO(A),aa.setUniformMatrix3fv("u_dvsMat3",fa.transforms.dvs),F.setStencilTestEnabled(!0),F.setStencilFunction(c.CompareFunction.GREATER,255,255),F.setStencilWriteMask(0),A=(performance.now()-
R.lastOpacityUpdate)/1E3,aa.setUniform1f("u_time",A),R.glyphPerPageElementsMap.forEach((ka,la)=>{this._renderGlyphRange(F,ka,la,E,aa,U,W,fa)}))))}}}};u._renderGlyphRange=function(w,B,A,D,F,z,y,E){D.bind(w,c.TextureSamplingMode.LINEAR,A,h.VTL_TEXTURE_BINDING_UNIT_GLYPHS);z&&(F.setUniform1f("u_halo",1),w.drawElements(c.PrimitiveType.TRIANGLES,B[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*B[0]),E.triangleCount+=B[1]/3);y&&(F.setUniform1f("u_halo",0),w.drawElements(c.PrimitiveType.TRIANGLES,
B[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*B[0]),E.triangleCount+=B[1]/3)};return q}(m);b.WGLBrushVTLSymbol=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],function(b){function a(r,h){r%=h;return 0<=r?r:r+h}const x=128/Math.PI,p=256/360,f=1/Math.LN2;b.between=function(r,h,d){return r>=h&&r<=d||r>=d&&r<=h};b.degToByte=function(r){return a(r*p,256)};b.interpolate=function(r,h,d){return r*(1-d)+
h*d};b.log2=function(r){return Math.log(r)*f};b.positiveMod=a;b.radToByte=function(r){return a(r*x,256)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../enums","./Programs"],function(b,a){return function(){function x(){this._programByKey=new Map}var p=x.prototype;p.dispose=function(){this._programByKey.forEach(f=>f.dispose());this._programByKey.clear()};p.getMaterialProgram=function(f,r,h){const d=
r.key<<3|this._getMaterialOptionsValue(r.type,h);if(this._programByKey.has(d))return this._programByKey.get(d);var e=this._getProgramTemplate(r.type);({shaders:e}=e);const {vertexShader:k,fragmentShader:m}=e(h);h=r.getShaderHeader();e=r.getShaderMain();h=k.replace("#pragma header",h).replace("#pragma main",e);f=f.programCache.acquire(h,m,r.getAttributeLocations());this._programByKey.set(d,f);return f};p._getMaterialOptionsValue=function(f,r){switch(f){case b.ShaderProgramType.BACKGROUND:return(r.pattern?
1:0)<<1|(r.id?1:0);case b.ShaderProgramType.FILL:return(r.pattern?1:0)<<1|(r.id?1:0);case b.ShaderProgramType.OUTLINE:return r.id?1:0;case b.ShaderProgramType.LINE:return(r.sdf?1:0)<<2|(r.pattern?1:0)<<1|(r.id?1:0);case b.ShaderProgramType.ICON:return(r.sdf?1:0)<<1|(r.id?1:0);case b.ShaderProgramType.CIRCLE:return r.id?1:0;case b.ShaderProgramType.TEXT:return r.id?1:0;default:return 0}};p._getProgramTemplate=function(f){switch(f){case b.ShaderProgramType.BACKGROUND:return a.background;case b.ShaderProgramType.CIRCLE:return a.circle;
case b.ShaderProgramType.FILL:return a.fill;case b.ShaderProgramType.ICON:return a.icon;case b.ShaderProgramType.LINE:return a.line;case b.ShaderProgramType.OUTLINE:return a.outline;case b.ShaderProgramType.TEXT:return a.text;default:return null}};return x}()})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(b,a,x){b.background={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id,PATTERN:p.pattern})+
a.resolveIncludes("background/background.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id,PATTERN:p.pattern})+a.resolveIncludes("background/background.frag")})};b.circle={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("circle/circle.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("circle/circle.frag")})};b.fill={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id,PATTERN:p.pattern})+a.resolveIncludes("fill/fill.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id,
PATTERN:p.pattern})+a.resolveIncludes("fill/fill.frag")})};b.icon={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id,SDF:p.sdf})+a.resolveIncludes("icon/icon.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id,SDF:p.sdf})+a.resolveIncludes("icon/icon.frag")})};b.line={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id,PATTERN:p.pattern,SDF:p.sdf})+a.resolveIncludes("line/line.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id,PATTERN:p.pattern,SDF:p.sdf})+a.resolveIncludes("line/line.frag")})};
b.outline={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("outline/outline.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("outline/outline.frag")})};b.text={shaders:p=>({vertexShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("text/text.vert"),fragmentShader:x.glslifyDefineMap({ID:p.id})+a.resolveIncludes("text/text.frag")})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports",
"./shaderRepository","../../../../../webgl/ShaderCompiler"],function(b,a,x){const p=new x.ShaderCompiler(function(f){let r=a;f.split("/").forEach(h=>{r&&(r=r[h])});return r});b.resolveIncludes=function(f){return p.resolveIncludes(f)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(b){let a=function(){function x(f){this._readFile=f}var p=x.prototype;p.resolveIncludes=
function(f){return this._resolve(f)};p._resolve=function(f,r=new Map){if(r.has(f))return r.get(f);const h=this._read(f);if(!h)throw Error(`cannot find shader file ${f}`);const d=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let e=d.exec(h);const k=[];for(;null!=e;)k.push({path:e[1],start:e.index,length:e[0].length}),e=d.exec(h);let m=0,c="";k.forEach(g=>{c+=h.slice(m,g.start);c+=r.has(g.path)?"":this._resolve(g.path,r);m=g.start+g.length});c+=h.slice(m);r.set(f,c);return c};p._read=function(f){return this._readFile(f)};
return x}();b.ShaderCompiler=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(b){b.glslifyDefineMap=function(a){let x="";for(const f in a){var p=a[f];if("boolean"===typeof p)p&&(x+=`#define ${f}\n`);else if("number"===typeof p)x+=`#define ${f} ${p.toFixed()}\n`;else if("object"===typeof p){const {options:r,value:h}=p;if("number"===typeof r[h]){const {value:d,options:e,namespace:k}=p;p=k?`${k}_`:"";for(const m in e)x+=
`#define ${p}${m} ${e[m].toFixed()}\n`;x+=`#define ${f} ${p}${d}\n`}else{const d=p.options;let e=0;for(const k in d)x+=`#define ${d[k]} ${(e++).toFixed()}\n`;x+=`#define ${f} ${d[p.value]}\n`}}}return x};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(b,a){return function(){function x(f){this._style=f;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName=
{};this._runningId=0;f.layers||(f.layers=[]);this.version=parseFloat(f.version);if(this.layers=f.layers.map((r,h,d)=>this._create(r,h,d)).filter(r=>!!r))for(let r=0;r<this.layers.length;r++)f=this.layers[r],this._layerByName[f.id]=f,this._uidToLayer.set(f.uid,f),f.type===b.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(f.id);this._identifyRefLayers()}var p=x.prototype;p.isPainterDataDriven=function(f){return(f=this._layerByName[f])?f.isPainterDataDriven():!1};p.getStyleLayerId=function(f){return f>=
this.layers.length?null:this.layers[f].id};p.getStyleLayerByUID=function(f){return this._uidToLayer.get(f)??null};p.getStyleLayerIndex=function(f){return(f=this._layerByName[f])?this.layers.indexOf(f):-1};p.setStyleLayer=function(f,r){if(f&&f.id){var h=this._style;null!=r&&r>=this.layers.length&&(r=this.layers.length-1);var d=!0,e;if(e=this._layerByName[f.id]){const k=this.layers.indexOf(e);r||(r=k);r===k?(d=!1,e=x._recreateLayer(f,e),this.layers[r]=e,h.layers[r]=f):(this.layers.splice(k,1),h.layers.splice(k,
1),e=this._create(f,r,this.layers),this.layers.splice(r,0,e),h.layers.splice(r,0,f))}else e=this._create(f,r,this.layers),!r||r>=this.layers.length?(this.layers.push(e),h.layers.push(f)):(this.layers.splice(r,0,e),h.layers.splice(r,0,f));this._layerByName[f.id]=e;this._uidToLayer.set(e.uid,e);d&&this._recomputeZValues();this._identifyRefLayers()}};p.getStyleLayer=function(f){return(f=this._layerByName[f])?{type:f.typeName,id:f.id,source:f.source,"source-layer":f.sourceLayer,minzoom:f.minzoom,maxzoom:f.maxzoom,
filter:f.filter,layout:f.layout,paint:f.paint}:null};p.deleteStyleLayer=function(f){const r=this._layerByName[f];r&&(delete this._layerByName[f],this._uidToLayer.delete(r.uid),f=this.layers.indexOf(r),this.layers.splice(f,1),this._style.layers.splice(f,1),this._recomputeZValues(),this._identifyRefLayers())};p.getLayerById=function(f){return this._layerByName[f]};p.getLayoutProperties=function(f){return(f=this._layerByName[f])?f.layout:null};p.getPaintProperties=function(f){return(f=this._layerByName[f])?
f.paint:null};p.setPaintProperties=function(f,r){if(f=this._layerByName[f]){var h=x._recreateLayer({type:f.typeName,id:f.id,source:f.source,"source-layer":f.sourceLayer,minzoom:f.minzoom,maxzoom:f.maxzoom,filter:f.filter,layout:f.layout,paint:r},f),d=this.layers.indexOf(f);this.layers[d]=h;this._style.layers[d].paint=r;this._layerByName[f.id]=h;this._uidToLayer.set(f.uid,h)}};p.setLayoutProperties=function(f,r){if(f=this._layerByName[f]){var h=x._recreateLayer({type:f.typeName,id:f.id,source:f.source,
"source-layer":f.sourceLayer,minzoom:f.minzoom,maxzoom:f.maxzoom,filter:f.filter,layout:r,paint:f.paint},f),d=this.layers.indexOf(f);this.layers[d]=h;this._style.layers[d].layout=r;this._layerByName[f.id]=h;this._uidToLayer.set(f.uid,h)}};p.setStyleLayerVisibility=function(f,r){if(f=this._layerByName[f]){var h=f.layout||{};h.visibility=r;r=x._recreateLayer({type:f.typeName,id:f.id,source:f.source,"source-layer":f.sourceLayer,minzoom:f.minzoom,maxzoom:f.maxzoom,filter:f.filter,layout:h,paint:f.paint},
f);var d=this.layers.indexOf(f);this.layers[d]=r;this._style.layers[d].layout=h;this._layerByName[f.id]=r;this._uidToLayer.set(f.uid,r)}};p.getStyleLayerVisibility=function(f){return(f=this._layerByName[f])?f.layout?.visibility??"visible":"none"};p._recomputeZValues=function(){const f=this.layers,r=1/(f.length+1);for(let h=0;h<f.length;h++)f[h].z=1-(1+h)*r};p._identifyRefLayers=function(){const f=[],r=[];let h=0;for(const k of this.layers){const m=k.layout;if(k.type===b.StyleLayerType.FILL){var d=
k,e=k.source+"|"+k.sourceLayer;e+="|"+(m?.visibility??"");e+="|"+k.minzoom;e+="|"+k.maxzoom;e+="|"+JSON.stringify(k.filter);if(d.hasDataDrivenFill||d.hasDataDrivenOutline)e+="|"+h;f.push({key:e,layer:k})}else if(k.type===b.StyleLayerType.LINE){d=k;e=k.paint;e=null!=e&&(null!=e["line-pattern"]||null!=e["line-dasharray"]);let c=k.source+"|"+k.sourceLayer;c+="|"+(m?.visibility??"");c+="|"+k.minzoom;c+="|"+k.maxzoom;c+="|"+JSON.stringify(k.filter);c+="|"+(void 0!==m?m["line-cap"]:"");c+="|"+(void 0!==
m?m["line-join"]:"");if(d.hasDataDrivenLine||e)c+="|"+h;r.push({key:c,layer:k})}++h}this._assignRefLayers(f);this._assignRefLayers(r)};p._assignRefLayers=function(f){f.sort((m,c)=>m.key<c.key?-1:m.key>c.key?1:0);let r,h;const d=f.length;for(let m=0;m<d;m++){const c=f[m];if(c.key===r)c.layer.refLayerId=h;else if(r=c.key,h=c.layer.id,c.layer.type===b.StyleLayerType.FILL){if(!c.layer.getPaintProperty("fill-outline-color"))for(var e=m+1;e<d;e++){var k=f[e];if(k.key===r){if(k.layer.getPaintProperty("fill-outline-color")){f[m]=
k;f[e]=c;h=k.layer.id;break}}else break}}else if(c.layer.type===b.StyleLayerType.LINE)for(e=c.layer,k=m+1;k<d;k++){const g=f[k];if(g.key!==r)break;const l=g.layer;if(e.canUseThinTessellation&&!l.canUseThinTessellation||!e.canUseThinTessellation&&(l.getPaintProperty("line-pattern")||l.getPaintProperty("line-dasharray")))e=l,f[m]=g,f[k]=c,h=g.layer.id}}};p._create=function(f,r,h){r=1-1/(h.length+1)*(1+r);h=this._runningId++;switch(f.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,
f,r,h);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,f,r,h);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,f,r,h);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,f,r,h);case "raster":console.warn(`Unsupported vector tile raster layer ${f.id}`);break;case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,f,r,h)}return null};x._recreateLayer=function(f,r){switch(f.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,
f,r.z,r.uid);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,f,r.z,r.uid);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,f,r.z,r.uid);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,f,r.z,r.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${f.id}`);break;case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,f,r.z,r.uid)}return null};return x}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(b,a,x,p,f,r,h,d,e,k,m,c){b.CapType=void 0;(function(F){F[F.BUTT=0]="BUTT";F[F.ROUND=1]="ROUND";F[F.SQUARE=2]="SQUARE";F[F.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));let g=function(){function F(y,E,J,K){this.type=y;this.typeName=E.type;this.id=E.id;this.source=E.source;this.sourceLayer=E["source-layer"];this.minzoom=E.minzoom;this.maxzoom=E.maxzoom;this.filter=E.filter;this.layout=E.layout;this.paint=E.paint;this.z=J;this.uid=K;switch(y){case k.StyleLayerType.BACKGROUND:this._layoutDefinition=
k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case k.StyleLayerType.FILL:this._layoutDefinition=k.StyleDefinition.fillLayoutDefinition;this._paintDefinition=k.StyleDefinition.fillPaintDefinition;break;case k.StyleLayerType.LINE:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;this._paintDefinition=k.StyleDefinition.linePaintDefinition;break;case k.StyleLayerType.SYMBOL:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case k.StyleLayerType.CIRCLE:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var z=F.prototype;z.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)};z.getLayoutProperty=
function(y){return this._layoutProperties[y]};z.getPaintProperty=function(y){return this._paintProperties[y]};z.getLayoutValue=function(y,E,J){let K;const Q=this._layoutProperties[y];Q&&(K=Q.getValue(E,J));void 0===K&&(K=this._layoutDefinition[y]["default"]);return K};z.getPaintValue=function(y,E,J){let K;const Q=this._paintProperties[y];Q&&(K=Q.getValue(E,J));void 0===K&&(K=this._paintDefinition[y]["default"]);return K};z.isPainterDataDriven=function(){const y=this._paintProperties;if(y)for(const E in y)if(y[E].isDataDriven)return!0;
return!1};z._parseLayout=function(y){const E={};for(const J in y){const K=this._layoutDefinition[J];K&&(E[J]=new m(K,y[J]))}return E};z._parsePaint=function(y){const E={};for(const J in y){const K=this._paintDefinition[J];K&&(E[J]=new m(K,y[J]))}return E};z.computeAttributesKey=function(y,E,J,K){let Q=0,M=0;for(const S of E){E=3;if(!S||S!==K){const {isLayout:N,isOptional:O}=J[S];E=N?this.getLayoutProperty(S):this.getPaintProperty(S);E=E?.interpolator?2:E?.isDataDriven?1:O&&!E?3:0}M|=E<<Q;Q+=2}return M<<
3|y};return F}(),l=function(F){function z(y,E,J,K){y=F.call(this,y,E,J,K)||this;y.backgroundMaterial=new p.VTLBackgroundMaterial(y.computeAttributesKey(x.ShaderProgramType.BACKGROUND,p.VTLBackgroundMaterial.ATTRIBUTES,p.VTLBackgroundMaterial.ATTRIBUTES_INFO));return y}a._inheritsLoose(z,F);return z}(g),q=function(F){function z(y,E,J,K){y=F.call(this,y,E,J,K)||this;E=y.getPaintProperty("fill-color");J=y.getPaintProperty("fill-opacity");K=y.getPaintProperty("fill-pattern");y.hasDataDrivenColor=E?.isDataDriven;
y.hasDataDrivenOpacity=J?.isDataDriven;y.hasDataDrivenFill=y.hasDataDrivenColor||y.hasDataDrivenOpacity||K?.isDataDriven;J=y.getPaintProperty("fill-outline-color");y.outlineUsesFillColor=!J;y.hasDataDrivenOutlineColor=J?.isDataDriven;y.hasDataDrivenOutline=J?J.isDataDriven:E?E.isDataDriven:!1;y.hasDataDrivenOutline=(J?y.hasDataDrivenOutlineColor:y.hasDataDrivenColor)||y.hasDataDrivenOpacity;y.fillMaterial=new r.VTLFillMaterial(y.computeAttributesKey(x.ShaderProgramType.FILL,r.VTLFillMaterial.ATTRIBUTES,
r.VTLFillMaterial.ATTRIBUTES_INFO));y.outlineMaterial=new r.VTLOutlineMaterial(y.computeAttributesKey(x.ShaderProgramType.OUTLINE,y.outlineUsesFillColor?r.VTLOutlineMaterial.ATTRIBUTES_FILL:r.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,y.outlineUsesFillColor?r.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:r.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),y.outlineUsesFillColor);return y}a._inheritsLoose(z,F);return z}(g),u=function(F){function z(y,E,J,K){y=F.call(this,y,E,J,K)||this;E=y.getPaintProperty("line-pattern");
y.lineMaterial=new h.VTLLineMaterial(y.computeAttributesKey(x.ShaderProgramType.LINE,h.VTLLineMaterial.ATTRIBUTES,h.VTLLineMaterial.ATTRIBUTES_INFO,E?"line-dasharray":""));y.hasDataDrivenLine=y.getPaintProperty("line-blur")?.isDataDriven||y.getPaintProperty("line-color")?.isDataDriven||y.getPaintProperty("line-gap-width")?.isDataDriven||y.getPaintProperty("line-offset")?.isDataDriven||y.getPaintProperty("line-opacity")?.isDataDriven||y.getPaintProperty("line-pattern")?.isDataDriven||y.getPaintProperty("line-dasharray")?.isDataDriven||
y.getLayoutProperty("line-cap")?.isDataDriven||y.getPaintProperty("line-width")?.isDataDriven;y.canUseThinTessellation=!1;!y.hasDataDrivenLine&&(E=y.getPaintProperty("line-width"),!E||"number"===typeof E&&.5*E<c.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(E=y.getPaintProperty("line-offset"),!E||"number"===typeof E&&0===E)&&(y.canUseThinTessellation=!0);return y}a._inheritsLoose(z,F);z.prototype.getDashKey=function(y,E){switch(E){case b.CapType.BUTT:E="Butt";break;case b.CapType.ROUND:E="Round";break;case b.CapType.SQUARE:E=
"Square";break;default:E="Butt"}return`dasharray-[${y.toString()}]-${E}`};return z}(g),w=function(F){function z(y,E,J,K){y=F.call(this,y,E,J,K)||this;y.iconMaterial=new d.VTLIconMaterial(y.computeAttributesKey(x.ShaderProgramType.ICON,d.VTLIconMaterial.ATTRIBUTES,d.VTLIconMaterial.ATTRIBUTES_INFO));y.textMaterial=new d.VTLTextMaterial(y.computeAttributesKey(x.ShaderProgramType.TEXT,d.VTLTextMaterial.ATTRIBUTES,d.VTLTextMaterial.ATTRIBUTES_INFO));y.hasDataDrivenIcon=y.getPaintProperty("icon-color")?.isDataDriven||
y.getPaintProperty("icon-halo-blur")?.isDataDriven||y.getPaintProperty("icon-halo-color")?.isDataDriven||y.getPaintProperty("icon-halo-width")?.isDataDriven||y.getPaintProperty("icon-opacity")?.isDataDriven||y.getLayoutProperty("icon-size")?.isDataDriven;y.hasDataDrivenText=y.getPaintProperty("text-color")?.isDataDriven||y.getPaintProperty("text-halo-blur")?.isDataDriven||y.getPaintProperty("text-halo-color")?.isDataDriven||y.getPaintProperty("text-halo-width")?.isDataDriven||y.getPaintProperty("text-opacity")?.isDataDriven||
y.getLayoutProperty("text-size")?.isDataDriven;return y}a._inheritsLoose(z,F);return z}(g),B=function(F){function z(y,E,J,K){y=F.call(this,y,E,J,K)||this;y.circleMaterial=new f.VTLCircleMaterial(y.computeAttributesKey(x.ShaderProgramType.CIRCLE,f.VTLCircleMaterial.ATTRIBUTES,f.VTLCircleMaterial.ATTRIBUTES_INFO));return y}a._inheritsLoose(z,F);return z}(g),A=function(){function F(z,y,E){this.allowOverlap=z.getLayoutValue("icon-allow-overlap",y);this.ignorePlacement=z.getLayoutValue("icon-ignore-placement",
y);this.keepUpright=z.getLayoutValue("icon-keep-upright",y);this.optional=z.getLayoutValue("icon-optional",y);this.rotationAlignment=z.getLayoutValue("icon-rotation-alignment",y);this.rotationAlignment===k.RotationAlignment.AUTO&&(this.rotationAlignment=E?k.RotationAlignment.MAP:k.RotationAlignment.VIEWPORT);E=z.getLayoutProperty("icon-anchor");E?.isDataDriven?this._anchorProp=E:this.anchor=z.getLayoutValue("icon-anchor",y);E=z.getLayoutProperty("icon-offset");E?.isDataDriven?this._offsetProp=E:this.offset=
z.getLayoutValue("icon-offset",y);E=z.getLayoutProperty("icon-padding");E?.isDataDriven?this._paddingProp=E:this.padding=z.getLayoutValue("icon-padding",y);E=z.getLayoutProperty("icon-rotate");E?.isDataDriven?this._rotateProp=E:this.rotate=z.getLayoutValue("icon-rotate",y);E=z.getLayoutProperty("icon-size");E?.isDataDriven?this._sizeProp=E:this.size=z.getLayoutValue("icon-size",y)}F.prototype.update=function(z,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(z,y));this._offsetProp&&(this.offset=
this._offsetProp.getValue(z,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(z,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(z,y));this._sizeProp&&(this.size=this._sizeProp.getValue(z,y))};return F}(),D=function(){function F(z,y,E){this.allowOverlap=z.getLayoutValue("text-allow-overlap",y);this.ignorePlacement=z.getLayoutValue("text-ignore-placement",y);this.keepUpright=z.getLayoutValue("text-keep-upright",y);this.optional=z.getLayoutValue("text-optional",y);this.rotationAlignment=
z.getLayoutValue("text-rotation-alignment",y);this.rotationAlignment===k.RotationAlignment.AUTO&&(this.rotationAlignment=E?k.RotationAlignment.MAP:k.RotationAlignment.VIEWPORT);E=z.getLayoutProperty("text-anchor");E?.isDataDriven?this._anchorProp=E:this.anchor=z.getLayoutValue("text-anchor",y);E=z.getLayoutProperty("text-justify");E?.isDataDriven?this._justifyProp=E:this.justify=z.getLayoutValue("text-justify",y);E=z.getLayoutProperty("text-letter-spacing");E?.isDataDriven?this._letterSpacingProp=
E:this.letterSpacing=z.getLayoutValue("text-letter-spacing",y);E=z.getLayoutProperty("text-line-height");E?.isDataDriven?this._lineHeightProp=E:this.lineHeight=z.getLayoutValue("text-line-height",y);E=z.getLayoutProperty("text-max-angle");E?.isDataDriven?this._maxAngleProp=E:this.maxAngle=z.getLayoutValue("text-max-angle",y);E=z.getLayoutProperty("text-max-width");E?.isDataDriven?this._maxWidthProp=E:this.maxWidth=z.getLayoutValue("text-max-width",y);E=z.getLayoutProperty("text-offset");E?.isDataDriven?
this._offsetProp=E:this.offset=z.getLayoutValue("text-offset",y);E=z.getLayoutProperty("text-padding");E?.isDataDriven?this._paddingProp=E:this.padding=z.getLayoutValue("text-padding",y);E=z.getLayoutProperty("text-rotate");E?.isDataDriven?this._rotateProp=E:this.rotate=z.getLayoutValue("text-rotate",y);E=z.getLayoutProperty("text-size");E?.isDataDriven?this._sizeProp=E:this.size=z.getLayoutValue("text-size",y);E=z.getLayoutProperty("text-writing-mode");E?.isDataDriven?this._writingModeProp=E:this.writingMode=
z.getLayoutValue("text-writing-mode",y)}F.prototype.update=function(z,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(z,y));this._justifyProp&&(this.justify=this._justifyProp.getValue(z,y));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(z,y));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(z,y));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(z,y));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(z,y));this._offsetProp&&
(this.offset=this._offsetProp.getValue(z,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(z,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(z,y));this._sizeProp&&(this.size=this._sizeProp.getValue(z,y));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(z,y))};return F}();b.BackgroundStyleLayer=l;b.CircleStyleLayer=B;b.FillStyleLayer=q;b.IconLayout=A;b.LineStyleLayer=u;b.StyleLayer=g;b.SymbolStyleLayer=w;b.TextLayout=D;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,x,p,f){x=function(r){function h(e){return r.call(this,e)||this}a._inheritsLoose(h,r);var d=h.prototype;d.geometryInfo=function(){return h.GEOMETRY_LAYOUT};d.opacityInfo=function(){return null};d.attributes=function(){return h.ATTRIBUTES};
d.attributesInfo=function(){return h.ATTRIBUTES_INFO};return h}(x.VTLMaterial);x.ATTRIBUTES=[];x.GEOMETRY_LAYOUT=[new f.VertexElementDescriptor("a_pos",2,p.DataType.BYTE,0,2)];x.ATTRIBUTES_INFO={};b.VTLBackgroundMaterial=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,x,p,f,r,h){let d=function(){function m(g){this._locations=new Map;this._key=g}var c=m.prototype;c.defines=function(){return[]};c.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};c.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};c.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};c.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};c.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};c.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};c.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};c.setDataUniforms=function(g,l,q,u,w){var B=this.getUniforms();for(const A of B){const {name:D,type:F,getValue:z}=A;B=z(q,l,u,w);if(null!==B)switch(F){case "float":g.setUniform1f(D,
B);break;case "vec2":g.setUniform2fv(D,B);break;case "vec4":g.setUniform4fv(D,B)}}};c.encodeAttributes=function(g,l,q,u){const w=this.attributesInfo(),B=this.getEncodingInfos(),A=[];let D=0,F=0;for(const y of Object.keys(B)){var z=B[y];const {type:E,precisionFactor:J,isLayout:K}=w[y],Q=K?q.getLayoutProperty(y):q.getPaintProperty(y),M=Q.interpolator?.getInterpolationRange(l);let S=0;for(const N of z){const {offset:O,bufferElementsToAdd:T}=N;if(0<T){for(z=0;z<T;z++)A.push(0);D+=F;F=N.bufferElementsToAdd}z=
u??Q.getValue(M?M[S]:l,g);switch(E){case f.EncodingType.R8_SIGNED:case f.EncodingType.R8_UNSIGNED:A[D]|=this._encodeByte(z*(J||1),8*O);break;case f.EncodingType.R16_SIGNED:case f.EncodingType.R16_UNSIGNED:A[D]|=this._encodeShort(z*(J||1),8*O);break;case f.EncodingType.R8G8_SIGNED:case f.EncodingType.R8G8_UNSIGNED:A[D]|=this._encodeByte(z*(J||1),8*O);A[D]|=this._encodeByte(z*(J||1),8*O+8);break;case f.EncodingType.R16G16_SIGNED:case f.EncodingType.R16G16_UNSIGNED:A[D]|=this._encodeShort(z*(J||1),8*
O);A[D]|=this._encodeShort(z*(J||1),8*O+16);break;case f.EncodingType.R8G8B8A8_SIGNED:case f.EncodingType.R8G8B8A8_UNSIGNED:A[D]|=this._encodeByte(z*(J||1),8*O);A[D]|=this._encodeByte(z*(J||1),8*O+8);A[D]|=this._encodeByte(z*(J||1),8*O+16);A[D]|=this._encodeByte(z*(J||1),8*O+24);break;case f.EncodingType.R8G8B8A8_COLOR:A[D]=this._encodeColor(z);break;case f.EncodingType.R16G16B16A16_DASHARRAY:case f.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(D,A,z);break;default:throw Error("Unsupported encoding type");
}S++}}return A};c.getAtributeState=function(g){const l=3+2*g;g=0|this._bit(l);return g|=this._bit(l+1)<<1};c._buildAttributesInfo=function(){const g=[],l={};var q={},u=-1;const w=this.attributesInfo();var B=this.attributes();let A=-1;for(const y of B){A++;B=this.getAtributeState(A);if(B===f.AttributeStatus.UNIFORM||B===f.AttributeStatus.UNUSED)continue;var D=w[y];const E=[];l[y]=E;D=D.type;for(let J=0;J<B;J++){const {dataType:K,bytesPerElement:Q,count:M,normalized:S}=m._encodingInfo[D],N=Q*M;var F=
`${K}-${!0===S}`;let O=q[F],T=0;!O||4<O.count+M?(u++,O={dataIndex:u,count:0,offset:0},4!==M&&(q[F]=O),g.push({location:-1,name:"a_data_"+u,count:M,type:K,normalized:S}),T=Math.ceil(Math.max(N/4,1))):(F=g[O.dataIndex],F.count+=M,T=Math.ceil(Math.max(F.count*Q/4,1))-Math.ceil(Math.max(O.offset/4,1)));E.push({dataIndex:O.dataIndex,offset:O.offset,bufferElementsToAdd:T});O.offset+=N;O.count+=M}}for(const y of g)switch(y.type){case r.DataType.BYTE:case r.DataType.UNSIGNED_BYTE:y.count=4;break;case r.DataType.SHORT:case r.DataType.UNSIGNED_SHORT:y.count+=
y.count%2}this._buildVertexBufferLayout(g);q=0;u=this._layoutInfo.geometry;for(var z of u)this._locations.set(z.name,q++);if(z=this._layoutInfo.opacity)for(const y of z)this._locations.set(y.name,q++);this._buildShaderInfo(g,l);this._propertyEncodingInfo=l};c._buildVertexBufferLayout=function(g){const l={},q=this.geometryInfo();let u=q[0].stride;if(0===g.length)l.geometry=q;else{const w=[];let B=u;for(const A of g)u+=e(A.type)*A.count;for(const A of q)w.push(new h.VertexElementDescriptor(A.name,A.count,
A.type,A.offset,u,A.normalized));for(const A of g)w.push(new h.VertexElementDescriptor(A.name,A.count,A.type,B,u,A.normalized)),B+=e(A.type)*A.count;l.geometry=w}this.opacityInfo()&&(l.opacity=this.opacityInfo());this._layoutInfo=l;this._stride=u};c._buildShaderInfo=function(g,l){let q="\n",u="\n";const w=[];for(var B of g)q+=`attribute ${this._getType(B.count)} ${B.name};\n`;var A=this.attributes();g=this.attributesInfo();B=-1;for(const z of A){B++;const {name:y,type:E,precisionFactor:J,isLayout:K}=
g[z];A=J&&1!==J?` * ${1/J}`:"";const {bytesPerElement:Q,count:M}=m._encodingInfo[E];var D=S=>`a_data_${S.dataIndex}${k(M,S.offset,Q)}`;switch(this.getAtributeState(B)){case f.AttributeStatus.UNIFORM:A=this._getType(M);var F=`u_${y}`;w.push({name:F,type:A,getValue:(N,O,T,L)=>{T=K?N.getLayoutValue(z,O):N.getPaintValue(z,O);if(E===f.EncodingType.R16G16B16A16_DASHARRAY){N=N.getDashKey(T,N.getLayoutValue("line-cap",O));L=L.getMosaicItemPosition(N,!1);if(x.isNone(L))return null;const {tl:H,br:R}=L;return[H[0],
R[1],R[0],H[1]]}if(E===f.EncodingType.R16G16B16A16_PATTERN){L=L.getMosaicItemPosition(T,!z.includes("line-"));if(x.isNone(L))return null;const {tl:H,br:R}=L;return[H[0],R[1],R[0],H[1]]}return E===f.EncodingType.R8G8B8A8_COLOR?(L=T[3],[L*T[0],L*T[1],L*T[2],L]):T}});q+=`uniform ${A} ${F};\n`;u+=`${A} ${y} = ${F};\n`;break;case f.AttributeStatus.DATA_DRIVEN:F=D(l[z][0]);u+=`${this._getType(M)} ${y} = ${F}${A};\n`;break;case f.AttributeStatus.INTERPOLATED_DATA_DRIVEN:F=`u_t_${y}`;w.push({name:F,type:"float",
getValue:(N,O,T,L)=>(K?N.getLayoutProperty(z):N.getPaintProperty(z)).interpolator.interpolationUniformValue(T,O)});q+=`uniform float ${F};\n`;const S=D(l[z][0]);D=D(l[z][1]);u+=`${this._getType(M)} ${y} = mix(${S}${A}, ${D}${A}, ${F});\n`}}this._shaderHeader=q;this._shaderMain=u;this._uniforms=w};c._bit=function(g){return(this._key&1<<g)>>g};c._getType=function(g){switch(g){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};c._encodeColor=
function(g){const l=255*g[3];return p.i8888to32(g[0]*l,g[1]*l,g[2]*l,l)};c._encodePattern=function(g,l,q){if(q&&q.rect){var u=q.rect,w=q.width;q=q.height;l[g]=this._encodeShort(u.x+2,0);l[g]|=this._encodeShort(u.y+2+q,16);l[g+1]=this._encodeShort(u.x+2+w,0);l[g+1]|=this._encodeShort(u.y+2,16)}};c._encodeByte=function(g,l){return(g&255)<<l};c._encodeShort=function(g,l){return(g&65535)<<l};a._createClass(m,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return m}();d._encodingInfo={[f.EncodingType.R8_SIGNED]:{dataType:r.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[f.EncodingType.R8_UNSIGNED]:{dataType:r.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[f.EncodingType.R16_SIGNED]:{dataType:r.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[f.EncodingType.R16_UNSIGNED]:{dataType:r.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[f.EncodingType.R8G8_SIGNED]:{dataType:r.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[f.EncodingType.R8G8_UNSIGNED]:{dataType:r.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[f.EncodingType.R16G16_SIGNED]:{dataType:r.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[f.EncodingType.R16G16_UNSIGNED]:{dataType:r.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[f.EncodingType.R8G8B8A8_SIGNED]:{dataType:r.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[f.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:r.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[f.EncodingType.R8G8B8A8_COLOR]:{dataType:r.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[f.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:r.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[f.EncodingType.R16G16B16A16_PATTERN]:{dataType:r.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const e=m=>{switch(m){case r.DataType.FLOAT:return 4;case r.DataType.INT:return 4;case r.DataType.UNSIGNED_INT:return 4;
case r.DataType.SHORT:return 2;case r.DataType.UNSIGNED_SHORT:return 2;case r.DataType.BYTE:return 1;case r.DataType.UNSIGNED_BYTE:return 1}},k=(m,c,g)=>{c/=g;if(1===m)switch(c){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===m)switch(c){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===m)switch(c){case 0:return".xyz";case 1:return".yzw"}return""};b.VTLMaterial=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],
function(b){return function(){function a(p){this._array=[];0>=p&&console.error("strideInBytes must be positive!");this._stride=p}var x=a.prototype;x.reset=function(){this.array.length=0};x.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(p,f){return 65535&p|f<<16};a.i8888to32=function(p,f,r,h){return p&255|(f&255)<<8|(r&255)<<16|h<<24};a.i8816to32=function(p,f,r){return p&255|(f&255)<<8|r<<16};b._createClass(a,[{key:"array",get:function(){return this._array}},
{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return a}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(b){b.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=
5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(b.EncodingType||(b.EncodingType={}));b.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";
a[a.UNUSED=3]="UNUSED"})(b.AttributeStatus||(b.AttributeStatus={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,x,p,f,r){p=function(h){function d(k){return h.call(this,k)||this}a._inheritsLoose(d,h);var e=d.prototype;e.geometryInfo=
function(){return d.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return d.ATTRIBUTES};e.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(p.VTLMaterial);p.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");p.GEOMETRY_LAYOUT=[new r.VertexElementDescriptor("a_pos",2,f.DataType.SHORT,0,4)];p.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:x.EncodingType.R8_UNSIGNED},
"circle-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:x.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:32}};
b.VTLCircleMaterial=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,x,p,f,r){let h=function(d){function e(m){return d.call(this,m)||this}a._inheritsLoose(e,d);var k=e.prototype;k.geometryInfo=function(){return e.GEOMETRY_LAYOUT};k.opacityInfo=
function(){return null};k.attributes=function(){return e.ATTRIBUTES};k.attributesInfo=function(){return e.ATTRIBUTES_INFO};return e}(p.VTLMaterial);h.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];h.GEOMETRY_LAYOUT=[new r.VertexElementDescriptor("a_pos",2,f.DataType.SHORT,0,4)];h.ATTRIBUTES_INFO={"fill-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:x.EncodingType.R16G16B16A16_PATTERN,
isOptional:!0}};p=function(d){function e(m,c){m=d.call(this,m)||this;m._usefillColor=c;return m}a._inheritsLoose(e,d);var k=e.prototype;k.geometryInfo=function(){return e.GEOMETRY_LAYOUT};k.opacityInfo=function(){return null};k.attributes=function(){return this._usefillColor?e.ATTRIBUTES_FILL:e.ATTRIBUTES_OUTLINE};k.attributesInfo=function(){return this._usefillColor?e.ATTRIBUTES_INFO_FILL:e.ATTRIBUTES_INFO_OUTLINE};return e}(p.VTLMaterial);p.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];
p.ATTRIBUTES_FILL=["fill-color","fill-opacity"];p.GEOMETRY_LAYOUT=[new r.VertexElementDescriptor("a_pos",2,f.DataType.SHORT,0,8),new r.VertexElementDescriptor("a_offset",2,f.DataType.BYTE,4,8),new r.VertexElementDescriptor("a_xnormal",2,f.DataType.BYTE,6,8)];p.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100}};p.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},
"fill-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100}};b.VTLFillMaterial=h;b.VTLOutlineMaterial=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,x,p,f,r){p=function(h){function d(k){return h.call(this,k)||this}
a._inheritsLoose(d,h);var e=d.prototype;e.geometryInfo=function(){return d.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return d.ATTRIBUTES};e.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(p.VTLMaterial);p.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");p.GEOMETRY_LAYOUT=[new r.VertexElementDescriptor("a_pos",2,f.DataType.SHORT,0,16),new r.VertexElementDescriptor("a_extrude_offset",
4,f.DataType.BYTE,4,16),new r.VertexElementDescriptor("a_dir_normal",4,f.DataType.BYTE,8,16),new r.VertexElementDescriptor("a_accumulatedDistance",2,f.DataType.UNSIGNED_SHORT,12,16)];p.ATTRIBUTES_INFO={"line-width":{name:"width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:x.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},
"line-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:x.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:x.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};b.VTLLineMaterial=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,x,p,f,r){const h=[new r.VertexElementDescriptor("a_pos",2,f.DataType.SHORT,0,16),new r.VertexElementDescriptor("a_vertexOffset",2,f.DataType.SHORT,4,16),new r.VertexElementDescriptor("a_texAngleRange",4,f.DataType.UNSIGNED_BYTE,8,16),new r.VertexElementDescriptor("a_levelInfo",4,f.DataType.UNSIGNED_BYTE,12,16)],d=[new r.VertexElementDescriptor("a_opacityInfo",1,f.DataType.UNSIGNED_BYTE,0,1)];f=function(e){function k(c){return e.call(this,c)||this}a._inheritsLoose(k,e);var m=k.prototype;
m.geometryInfo=function(){return h};m.opacityInfo=function(){return d};m.attributes=function(){return k.ATTRIBUTES};m.attributesInfo=function(){return k.ATTRIBUTES_INFO};return k}(p.VTLMaterial);f.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");f.ATTRIBUTES_INFO={"icon-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",
type:x.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:x.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};p=function(e){function k(c){return e.call(this,c)||this}a._inheritsLoose(k,e);var m=k.prototype;m.geometryInfo=function(){return h};m.opacityInfo=function(){return d};m.attributes=function(){return k.ATTRIBUTES};
m.attributesInfo=function(){return k.ATTRIBUTES_INFO};return k}(p.VTLMaterial);p.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");p.ATTRIBUTES_INFO={"text-color":{name:"color",type:x.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:x.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:x.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},
"text-halo-blur":{name:"halo_blur",type:x.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:x.EncodingType.R8_UNSIGNED,isLayout:!0}};b.VTLIconMaterial=f;b.VTLTextMaterial=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(b,a){return function(){function x(p){this._expression=p}x.prototype.filter=function(p,f){if(!this._expression)return!0;
try{return this._expression.evaluate(p,f)}catch(r){return console.log(r.message),!0}};x.createFilter=function(p){if(!p)return null;this.isLegacyFilter(p)&&(p=this.convertLegacyFilter(p));try{const f=b.createExpression(p,null,a.BooleanType);return new x(f)}catch(f){return console.log(f.message),null}};x.isLegacyFilter=function(p){if(!Array.isArray(p)||0===p.length)return!0;switch(p[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===p.length&&"string"===
typeof p[1]&&!Array.isArray(p[2]);case "in":return 3<=p.length&&"string"===typeof p[1]&&!Array.isArray(p[2]);case "!in":return!0;case "any":case "all":for(let f=1;f<p.length;f++)if(this.isLegacyFilter(p[f]))return!0;return!1;case "none":return!0;case "has":return 2===p.length&&("$id"===p[1]||"$type"===p[1]);case "!has":return!0;default:return!1}};x.convertLegacyFilter=function(p){if(!Array.isArray(p)||0===p.length)return!0;const f=p[0];if(1===p.length)return"any"!==f;switch(f){case "\x3d\x3d":return x.convertComparison("\x3d\x3d",
p[1],p[2]);case "!\x3d":return x.negate(x.convertComparison("\x3d\x3d",p[1],p[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return x.convertComparison(f,p[1],p[2]);case "in":return x.convertIn(p[1],p.slice(2));case "!in":return x.negate(x.convertIn(p[1],p.slice(2)));case "any":case "all":case "none":return x.convertCombining(f,p.slice(1));case "has":return x.convertHas(p[1]);case "!has":return x.negate(x.convertHas(p[1]));default:throw Error("Unexpected legacy filter.");}};x.convertComparison=
function(p,f,r){switch(f){case "$type":return[p,["geometry-type"],r];case "$id":return[p,["id"],r];default:return[p,["get",f],r]}};x.convertIn=function(p,f){switch(p){case "$type":return["in",["geometry-type"],["literal",f]];case "$id":return["in",["id"],["literal",f]];default:return["in",["get",p],["literal",f]]}};x.convertHas=function(p){switch(p){case "$type":return!0;case "$id":return["has-id"];default:return["has",p]}};x.convertCombining=function(p,f){return[p].concat(f.map(this.convertLegacyFilter))};
x.negate=function(p){return["!",p]};return x}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),function(b,a,x,p,f,r,h,d){function e(v,n,t){var C=typeof v;if("string"===C||"boolean"===C||"number"===C||null===v){if(t)switch(t.kind){case "string":"string"!==C&&(v=
ha.toString(v));break;case "number":"number"!==C&&(v=ha.toNumber(v));break;case "color":v=ha.toColor(v)}v=["literal",v]}if(!Array.isArray(v)||0===v.length)throw Error("Expression must be a non empty array");C=v[0];if("string"!==typeof C)throw Error("First element of expression must be a string");const G=na[C];if(void 0===G)throw Error(`Invalid expression operator "${C}"`);if(!G)throw Error(`Unimplemented expression operator "${C}"`);return G.parse(v,n,t)}let k=function(){function v(t){this._parent=
t;this._vars={}}var n=v.prototype;n.add=function(t,C){this._vars[t]=C};n.get=function(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null};return v}(),m=function(){function v(){this.type=d.ValueType}v.parse=function(n){if(1<n.length)throw Error('"id" does not expect arguments');return new v};v.prototype.evaluate=function(n,t){return n?.id};return v}(),c=function(){function v(){this.type=d.StringType}v.parse=function(n){if(1<n.length)throw Error('"geometry-type" does not expect arguments');
return new v};v.prototype.evaluate=function(n,t){if(!n)return null;switch(n.type){case f.GeometryType.Point:return"Point";case f.GeometryType.LineString:return"LineString";case f.GeometryType.Polygon:return"Polygon";default:return null}};return v}(),g=function(){function v(){this.type=d.ObjectType}v.parse=function(n){if(1<n.length)throw Error('"properties" does not expect arguments');return new v};v.prototype.evaluate=function(n,t){return n?.values};return v}(),l=function(){function v(){this.type=
d.NumberType}v.parse=function(n){if(1<n.length)throw Error('"zoom" does not expect arguments');return new v};v.prototype.evaluate=function(n,t){return t};return v}(),q=function(){function v(n,t,C){this._lhs=n;this._rhs=t;this._compare=C;this.type=d.BooleanType}v.parse=function(n,t,C){if(3!==n.length&&4!==n.length)throw Error(`"${n[0]}" expects 2 or 3 arguments`);if(4===n.length)throw Error(`"${n[0]}" collator not supported`);return new v(e(n[1],t),e(n[2],t),C)};v.prototype.evaluate=function(n,t){return this._compare(this._lhs.evaluate(n,
t),this._rhs.evaluate(n,t))};return v}(),u=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G===I)};return n}(q),w=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G!==I)};return n}(q),B=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G<I)};return n}(q),
A=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G<=I)};return n}(q),D=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G>I)};return n}(q),F=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return q.parse(t,C,(G,I)=>G>=I)};return n}(q),z=function(){function v(n){this._arg=n;this.type=
d.BooleanType}v.parse=function(n,t){if(2!==n.length)throw Error('"!" expects 1 argument');return new v(e(n[1],t))};v.prototype.evaluate=function(n,t){return!this._arg.evaluate(n,t)};return v}(),y=function(){function v(n){this._args=n;this.type=d.BooleanType}v.parse=function(n,t){const C=[];for(let G=1;G<n.length;G++)C.push(e(n[G],t));return new v(C)};v.prototype.evaluate=function(n,t){for(const C of this._args)if(!C.evaluate(n,t))return!1;return!0};return v}(),E=function(){function v(n){this._args=
n;this.type=d.BooleanType}v.parse=function(n,t){const C=[];for(let G=1;G<n.length;G++)C.push(e(n[G],t));return new v(C)};v.prototype.evaluate=function(n,t){for(const C of this._args)if(C.evaluate(n,t))return!0;return!1};return v}(),J=function(){function v(n){this._args=n;this.type=d.BooleanType}v.parse=function(n,t){const C=[];for(let G=1;G<n.length;G++)C.push(e(n[G],t));return new v(C)};v.prototype.evaluate=function(n,t){for(const C of this._args)if(C.evaluate(n,t))return!1;return!0};return v}(),
K=function(){function v(n,t,C){this.type=n;this._args=t;this._fallback=C}v.parse=function(n,t,C){if(4>n.length)throw Error('"case" expects at least 3 arguments');if(1===n.length%2)throw Error('"case" expects an odd number of arguments');let G;const I=[];for(let P=1;P<n.length-1;P+=2){const Y=e(n[P],t),V=e(n[P+1],t,C);G||(G=V.type);I.push({condition:Y,output:V})}n=e(n[n.length-1],t,C);G||(G=n.type);return new v(G,I,n)};v.prototype.evaluate=function(n,t){for(const C of this._args)if(C.condition.evaluate(n,
t))return C.output.evaluate(n,t);return this._fallback.evaluate(n,t)};return v}(),Q=function(){function v(n,t){this.type=n;this._args=t}v.parse=function(n,t){if(2>n.length)throw Error('"coalesce" expects at least 1 argument');let C;const G=[];for(let I=1;I<n.length;I++){const P=e(n[I],t);C||(C=P.type);G.push(P)}return new v(C,G)};v.prototype.evaluate=function(n,t){for(const C of this._args){const G=C.evaluate(n,t);if(null!==G)return G}return null};return v}(),M=function(){function v(n,t,C,G,I){this.type=
n;this._input=t;this._labels=C;this._outputs=G;this._fallback=I}v.parse=function(n,t){if(3>n.length)throw Error('"match" expects at least 3 arguments');if(0===n.length%2)throw Error('"case" expects an even number of arguments');let C;const G=e(n[1],t),I=[],P={};let Y;for(let da=2;da<n.length-1;da+=2){var V=n[da];Array.isArray(V)||(V=[V]);for(const ia of V){V=typeof ia;if("string"!==V&&"number"!==V)throw Error('"match" requires string or number literal as labels');if(!Y)Y=V;else if(V!==Y)throw Error('"match" requires labels to have the same type');
P[ia]=I.length}V=e(n[da+1],t);C||(C=V.type);I.push(V)}return new v(C,G,P,I,e(n[n.length-1],t))};v.prototype.evaluate=function(n,t){const C=this._input.evaluate(n,t);return(this._outputs[this._labels[C]]||this._fallback).evaluate(n,t)};return v}(),S=function(){function v(t,C,G,I,P){this._operator=t;this.type=C;this.interpolation=G;this.input=I;this._stops=P}v.parse=function(t,C,G){const I=t[0];if(5>t.length)throw Error(`"${I}" expects at least 4 arguments`);const P=t[1];if(!Array.isArray(P)||0===P.length)throw Error(`"${P}" is not a valid interpolation`);
switch(P[0]){case "linear":if(1!==P.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==P.length||"number"!==typeof P[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==P.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var Y=1;5>Y;Y++){var V=P[Y];if("number"!==typeof V||0>V||1<V)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");
}break;default:throw Error(`"${t[0]}" unknown interpolation type "${P[0]}"`);}if(1!==t.length%2)throw Error(`"${I}" expects an even number of arguments`);Y=e(t[2],C,d.NumberType);let da;"interpolate-hcl"===I||"interpolate-lab"===I?da=d.ColorType:G&&"value"!==G.kind&&(da=G);G=[];for(V=3;V<t.length;V+=2){const ia=t[V];if("number"!==typeof ia)throw Error(`"${I}" requires stop inputs as literal numbers`);if(G.length&&G[G.length-1][0]>=ia)throw Error(`"${I}" requires strictly ascending stop inputs`);const oa=
e(t[V+1],C,da);da||(da=oa.type);G.push([ia,oa])}if(da&&da!==d.ColorType&&da!==d.NumberType&&("array"!==da.kind||da.itemType!==d.NumberType))throw Error(`"${I}" cannot interpolate type ${d.typeToString(da)}`);return new v(I,da,P,Y,G)};var n=v.prototype;n.evaluate=function(t,C){var G=this._stops;if(1===G.length)return G[0][1].evaluate(t,C);var I=this.input.evaluate(t,C);if(I<=G[0][0])return G[0][1].evaluate(t,C);if(I>=G[G.length-1][0])return G[G.length-1][1].evaluate(t,C);let P=0;for(;++P<G.length&&
!(I<G[P][0]););const Y=v.interpolationRatio(this.interpolation,I,G[P-1][0],G[P][0]);I=G[P-1][1].evaluate(t,C);const V=G[P][1].evaluate(t,C);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(I)&&Array.isArray(V))return I.map((da,ia)=>h.interpolate(da,V[ia],Y));if("color"===this.type.kind&&I instanceof x&&V instanceof x)return I=new x(I),t=new x(V),new x([h.interpolate(I.r,t.r,Y),h.interpolate(I.g,t.g,Y),h.interpolate(I.b,t.b,Y),h.interpolate(I.a,t.a,Y)]);if("number"===this.type.kind&&
"number"===typeof I&&"number"===typeof V)return h.interpolate(I,V,Y);throw Error(`"${this._operator}" cannot interpolate type ${d.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return t=p.toLCH(I),C=p.toLCH(V),G=C.h-t.h,t=p.toRGB({h:t.h+Y*(180<G||-180>G?G-360*Math.round(G/360):G),c:h.interpolate(t.c,C.c,Y),l:h.interpolate(t.l,C.l,Y)}),new x({a:h.interpolate(I.a,V.a,Y),...t});if("interpolate-lab"===this._operator)return t=p.toLAB(I),C=p.toLAB(V),t=p.toRGB({l:h.interpolate(t.l,C.l,
Y),a:h.interpolate(t.a,C.a,Y),b:h.interpolate(t.b,C.b,Y)}),new x({a:h.interpolate(I.a,V.a,Y),...t});throw Error(`Unexpected operator "${this._operator}"`);};n.interpolationUniformValue=function(t,C){const G=this._stops;if(1===G.length||t>=G[G.length-1][0])return 0;let I=0;for(;++I<G.length&&!(t<G[I][0]););return v.interpolationRatio(this.interpolation,C,G[I-1][0],G[I][0])};n.getInterpolationRange=function(t){const C=this._stops;if(1===C.length)return t=C[0][0],[t,t];var G=C[C.length-1][0];if(t>=G)return[G,
G];for(G=0;++G<C.length&&!(t<C[G][0]););return[C[G-1][0],C[G][0]]};v.interpolationRatio=function(t,C,G,I){let P=0;"linear"===t[0]?P=v._exponentialInterpolationRatio(C,1,G,I):"exponential"===t[0]?P=v._exponentialInterpolationRatio(C,t[1],G,I):"cubic-bezier"===t[0]&&(P=r.unitBezier(t[1],t[2],t[3],t[4])(v._exponentialInterpolationRatio(C,1,G,I),1E-5));0>P?P=0:1<P&&(P=1);return P};v._exponentialInterpolationRatio=function(t,C,G,I){I-=G;if(0===I)return 0;t-=G;return 1===C?t/I:(C**t-1)/(C**I-1)};return v}(),
N=function(){function v(n,t,C){this.type=n;this._input=t;this._stops=C}v.parse=function(n,t){if(5>n.length)throw Error('"step" expects at least 4 arguments');if(1!==n.length%2)throw Error('"step" expects an even number of arguments');const C=e(n[1],t,d.NumberType);let G;const I=[];I.push([-Infinity,e(n[2],t)]);for(let P=3;P<n.length;P+=2){const Y=n[P];if("number"!==typeof Y)throw Error('"step" requires stop inputs as literal numbers');if(I.length&&I[I.length-1][0]>=Y)throw Error('"step" requires strictly ascending stop inputs');
const V=e(n[P+1],t);G||(G=V.type);I.push([Y,V])}return new v(G,C,I)};v.prototype.evaluate=function(n,t){const C=this._stops;if(1===C.length)return C[0][1].evaluate(n,t);const G=this._input.evaluate(n,t);let I=0;for(;++I<C.length&&!(G<C[I][0]););return this._stops[I-1][1].evaluate(n,t)};return v}(),O=function(){function v(n,t){this.type=n;this._output=t}v.parse=function(n,t,C){if(4>n.length)throw Error('"let" expects at least 3 arguments');if(1===n.length%2)throw Error('"let" expects an odd number of arguments');
const G=new k(t);for(let I=1;I<n.length-1;I+=2){const P=n[I];if("string"!==typeof P)throw Error(`"let" requires a string to define variable names - found ${P}`);G.add(P,e(n[I+1],t))}n=e(n[n.length-1],G,C);return new v(n.type,n)};v.prototype.evaluate=function(n,t){return this._output.evaluate(n,t)};return v}(),T=function(){function v(n,t){this.type=n;this.output=t}v.parse=function(n,t,C){if(2!==n.length||"string"!==typeof n[1])throw Error('"var" requires just one literal string argument');t=t.get(n[1]);
if(!t)throw Error(`${n[1]} must be defined before being used in a "var" expression`);return new v(C||d.ValueType,t)};v.prototype.evaluate=function(n,t){return this.output.evaluate(n,t)};return v}(),L=function(){function v(n,t,C){this.type=n;this._index=t;this._array=C}v.parse=function(n,t){if(3!==n.length)throw Error('"at" expects 2 arguments');const C=e(n[1],t,d.NumberType);n=e(n[2],t);return new v(n.type.itemType,C,n)};v.prototype.evaluate=function(n,t){const C=this._index.evaluate(n,t);n=this._array.evaluate(n,
t);if(0>C||C>=n.length)throw Error('"at" index out of bounds');if(C!==Math.floor(C))throw Error('"at" index must be an integer');return n[C]};return v}(),H=function(){function v(n,t){this._key=n;this._obj=t;this.type=d.ValueType}v.parse=function(n,t){let C;switch(n.length){case 2:return C=e(n[1],t),new v(C);case 3:return C=e(n[1],t),n=e(n[2],t),new v(C,n);default:throw Error('"get" expects 1 or 2 arguments');}};v.prototype.evaluate=function(n,t){const C=this._key.evaluate(n,t);return this._obj?this._obj.evaluate(n,
t)[C]:n?.values[C]};return v}(),R=function(){function v(n,t){this._key=n;this._obj=t;this.type=d.BooleanType}v.parse=function(n,t){let C;switch(n.length){case 2:return C=e(n[1],t),new v(C);case 3:return C=e(n[1],t),n=e(n[2],t),new v(C,n);default:throw Error('"has" expects 1 or 2 arguments');}};v.prototype.evaluate=function(n,t){const C=this._key.evaluate(n,t);return this._obj?(n=this._obj.evaluate(n,t),C in n):!!n?.values[C]};return v}(),W=function(){function v(n,t){this._key=n;this._vals=t;this.type=
d.BooleanType}v.parse=function(n,t){if(3!==n.length)throw Error('"in" expects 2 arguments');return new v(e(n[1],t),e(n[2],t))};v.prototype.evaluate=function(n,t){const C=this._key.evaluate(n,t);return this._vals.evaluate(n,t).includes(C)};return v}(),U=function(){function v(n,t,C){this._item=n;this._array=t;this._from=C;this.type=d.NumberType}v.parse=function(n,t){if(3>n.length||4<n.length)throw Error('"index-of" expects 3 or 4 arguments');const C=e(n[1],t),G=e(n[2],t);return 4===n.length?(n=e(n[3],
t,d.NumberType),new v(C,G,n)):new v(C,G)};v.prototype.evaluate=function(n,t){const C=this._item.evaluate(n,t),G=this._array.evaluate(n,t);if(this._from){n=this._from.evaluate(n,t);if(n!==Math.floor(n))throw Error('"index-of" index must be an integer');return G.indexOf(C,n)}return G.indexOf(C)};return v}(),X=function(){function v(n){this._arg=n;this.type=d.NumberType}v.parse=function(n,t){if(2!==n.length)throw Error('"length" expects 2 arguments');n=e(n[1],t);return new v(n)};v.prototype.evaluate=
function(n,t){n=this._arg.evaluate(n,t);if("string"===typeof n||Array.isArray(n))return n.length;throw Error('"length" expects string or array');};return v}(),Z=function(){function v(n,t,C,G){this.type=n;this._array=t;this._from=C;this._to=G}v.parse=function(n,t){if(3>n.length||4<n.length)throw Error('"slice" expects 2 or 3 arguments');const C=e(n[1],t),G=e(n[2],t,d.NumberType);if(G.type!==d.NumberType)throw Error('"slice" index must return a number');if(4===n.length){n=e(n[3],t,d.NumberType);if(n.type!==
d.NumberType)throw Error('"slice" index must return a number');return new v(C.type,C,G,n)}return new v(C.type,C,G)};v.prototype.evaluate=function(n,t){const C=this._array.evaluate(n,t);if(!Array.isArray(C)&&"string"!==typeof C)throw Error('"slice" input must be an array or a string');const G=this._from.evaluate(n,t);if(0>G||G>=C.length)throw Error('"slice" index out of bounds');if(G!==Math.floor(G))throw Error('"slice" index must be an integer');if(this._to){n=this._to.evaluate(n,t);if(0>n||n>=C.length)throw Error('"slice" index out of bounds');
if(n!==Math.floor(n))throw Error('"slice" index must be an integer');return C.slice(G,n)}return C.slice(G)};return v}(),ea=function(){function v(){this.type=d.BooleanType}v.parse=function(n){if(1!==n.length)throw Error('"has-id" expects no arguments');return new v};v.prototype.evaluate=function(n,t){return n&&void 0!==n.id};return v}(),ca=function(){function v(n,t){this._args=n;this._calculate=t;this.type=d.NumberType}v.parse=function(n,t,C){n=n.slice(1).map(G=>e(G,t));return new v(n,C)};v.prototype.evaluate=
function(n,t){let C;this._args&&(C=this._args.map(G=>G.evaluate(n,t)));return this._calculate(C)};return v}(),aa=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){switch(t.length){case 2:return ca.parse(t,C,G=>-G[0]);case 3:return ca.parse(t,C,G=>G[0]-G[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return n}(ca),fa=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return ca.parse(t,
C,G=>{let I=1;for(const P of G)I*=P;return I})};return n}(ca),ka=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){if(3===t.length)return ca.parse(t,C,G=>G[0]/G[1]);throw Error('"/" expects 2 arguments');};return n}(ca),la=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){if(3===t.length)return ca.parse(t,C,G=>G[0]%G[1]);throw Error('"%" expects 2 arguments');};return n}(ca),pa=function(v){function n(){return v.apply(this,
arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){if(3===t.length)return ca.parse(t,C,G=>G[0]**G[1]);throw Error('"^" expects 1 or 2 arguments');};return n}(ca),qa=function(v){function n(){return v.apply(this,arguments)||this}a._inheritsLoose(n,v);n.parse=function(t,C){return ca.parse(t,C,G=>{let I=0;for(const P of G)I+=P;return I})};return n}(ca),ba=function(){function v(n,t){this._args=n;this._calculate=t;this.type=d.NumberType}v.parse=function(n,t){const C=n.slice(1).map(G=>e(G,t));
return new v(C,v.ops[n[0]])};v.prototype.evaluate=function(n,t){let C;this._args&&(C=this._args.map(G=>G.evaluate(n,t)));return this._calculate(C)};return v}();ba.ops={abs:v=>Math.abs(v[0]),acos:v=>Math.acos(v[0]),asin:v=>Math.asin(v[0]),atan:v=>Math.atan(v[0]),ceil:v=>Math.ceil(v[0]),cos:v=>Math.cos(v[0]),e:()=>Math.E,floor:v=>Math.floor(v[0]),ln:v=>Math.log(v[0]),ln2:()=>Math.LN2,log10:v=>Math.log(v[0])/Math.LN10,log2:v=>Math.log(v[0])/Math.LN2,max:v=>Math.max(...v),min:v=>Math.min(...v),pi:()=>
Math.PI,round:v=>Math.round(v[0]),sin:v=>Math.sin(v[0]),sqrt:v=>Math.sqrt(v[0]),tan:v=>Math.tan(v[0])};let ra=function(){function v(n){this._args=n;this.type=d.StringType}v.parse=function(n,t){return new v(n.slice(1).map(C=>e(C,t)))};v.prototype.evaluate=function(n,t){return this._args.map(C=>C.evaluate(n,t)).join("")};return v}(),ma=function(){function v(n,t){this._arg=n;this._calculate=t;this.type=d.StringType}v.parse=function(n,t){if(2!==n.length)throw Error(`${n[0]} expects 1 argument`);t=e(n[1],
t);return new v(t,v.ops[n[0]])};v.prototype.evaluate=function(n,t){return this._calculate(this._arg.evaluate(n,t))};return v}();ma.ops={downcase:v=>v.toLowerCase(),upcase:v=>v.toUpperCase()};let sa=function(){function v(t){this._args=t;this.type=d.ColorType}v.parse=function(t,C){if(4!==t.length)throw Error('"rgb" expects 3 arguments');t=t.slice(1).map(G=>e(G,C));return new v(t)};var n=v.prototype;n.evaluate=function(t,C){const G=this._validate(this._args[0].evaluate(t,C)),I=this._validate(this._args[1].evaluate(t,
C));t=this._validate(this._args[2].evaluate(t,C));return new x({r:G,g:I,b:t})};n._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};return v}(),ta=function(){function v(t){this._args=t;this.type=d.ColorType}v.parse=function(t,C){if(5!==t.length)throw Error('"rgba" expects 4 arguments');t=t.slice(1).map(G=>e(G,C));return new v(t)};var n=v.prototype;n.evaluate=function(t,C){const G=this._validate(this._args[0].evaluate(t,C)),I=
this._validate(this._args[1].evaluate(t,C)),P=this._validate(this._args[2].evaluate(t,C));t=this._validateAlpha(this._args[3].evaluate(t,C));return new x({r:G,g:I,b:P,a:t})};n._validate=function(t){if("number"!==typeof t||0>t||255<t)throw Error(`${t}: invalid color component`);return Math.round(t)};n._validateAlpha=function(t){if("number"!==typeof t||0>t||1<t)throw Error(`${t}: invalid alpha color component`);return t};return v}(),ua=function(){function v(n){this._color=n;this.type=d.arrayType(d.NumberType,
4)}v.parse=function(n,t){if(2!==n.length)throw Error('"to-rgba" expects 1 argument');n=e(n[1],t);return new v(n)};v.prototype.evaluate=function(n,t){return(new x(this._color.evaluate(n,t))).toRgba()};return v}(),ja=function(){function v(n,t){this.type=n;this._args=t}v.parse=function(n,t){var C=n[0];if(2>n.length)throw Error(`${C} expects at least one argument`);let G=1,I;if("array"===C){if(2<n.length){switch(n[1]){case "string":I=d.StringType;break;case "number":I=d.NumberType;break;case "boolean":I=
d.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}G++}else I=d.ValueType;if(3<n.length){var P=n[2];if(null!==P&&("number"!==typeof P||0>P||P!==Math.floor(P)))throw Error('"array" length argument must be a positive integer literal');G++}I=d.arrayType(I,P)}else switch(C){case "string":I=d.StringType;break;case "number":I=d.NumberType;break;case "boolean":I=d.BooleanType;break;case "object":I=d.ObjectType}for(C=[];G<n.length;G++)P=e(n[G],t),C.push(P);
return new v(I,C)};v.prototype.evaluate=function(n,t){let C;for(const G of this._args){const I=G.evaluate(n,t);C=d.getType(I);if(d.matchType(C,this.type))return I}throw Error(`Expected ${d.typeToString(this.type)} but got ${d.typeToString(C)}`);};return v}(),ha=function(){function v(n,t){this.type=n;this._args=t}v.parse=function(n,t){var C=n[0];const G=v.types[C];if(G===d.BooleanType||G===d.StringType){if(2!==n.length)throw Error(`${C} expects one argument`);}else if(2>n.length)throw Error(`${C} expects at least one argument`);
C=[];for(let I=1;I<n.length;I++){const P=e(n[I],t);C.push(P)}return new v(G,C)};v.prototype.evaluate=function(n,t){if(this.type===d.BooleanType)return!!this._args[0].evaluate(n,t);if(this.type===d.StringType)return d.valueToString(this._args[0].evaluate(n,t));if(this.type===d.NumberType){for(const G of this._args){var C=Number(G.evaluate(n,t));if(!isNaN(C))return C}return null}if(this.type===d.ColorType){for(C of this._args)try{const G=v.toColor(C.evaluate(n,t));if(G instanceof x)return G}catch{}return null}};
v.toBoolean=function(n){return!!n};v.toString=function(n){return d.valueToString(n)};v.toNumber=function(n){const t=Number(n);if(isNaN(t))throw Error(`"${n}" is not a number`);return t};v.toColor=function(n){if(n instanceof x)return n;if("string"===typeof n){const t=x.fromString(n);if(t)return t;throw Error(`"${n}" is not a color`);}if(Array.isArray(n))return x.fromArray(n);throw Error(`"${n}" is not a color`);};return v}();ha.types={"to-boolean":d.BooleanType,"to-color":d.ColorType,"to-number":d.NumberType,
"to-string":d.StringType};let va=function(){function v(n){this._val=n;this.type=d.getType(n)}v.parse=function(n){if(2!==n.length)throw Error('"literal" expects 1 argument');return new v(n[1])};v.prototype.evaluate=function(n,t){return this._val};return v}(),wa=function(){function v(n){this._arg=n;this.type=d.StringType}v.parse=function(n,t){if(2!==n.length)throw Error('"typeof" expects 1 argument');return new v(e(n[1],t))};v.prototype.evaluate=function(n,t){return d.typeToString(d.getType(this._arg.evaluate(n,
t)))};return v}();const na={array:ja,boolean:ja,collator:null,format:null,image:null,literal:va,number:ja,"number-format":null,object:ja,string:ja,"to-boolean":ha,"to-color":ha,"to-number":ha,"to-string":ha,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":c,id:m,"line-progress":null,properties:g,at:L,get:H,has:R,in:W,"index-of":U,length:X,slice:Z,"!":z,"!\x3d":w,"\x3c":B,"\x3c\x3d":A,"\x3d\x3d":u,"\x3e":D,"\x3e\x3d":F,all:y,any:E,case:K,coalesce:Q,match:M,within:null,interpolate:S,
"interpolate-hcl":S,"interpolate-lab":S,step:N,let:O,var:T,concat:ra,downcase:ma,"is-supported-script":null,"resolved-locale":null,upcase:ma,rgb:sa,rgba:ta,"to-rgba":ua,"-":aa,"*":fa,"/":ka,"%":la,"^":pa,"+":qa,abs:ba,acos:ba,asin:ba,atan:ba,ceil:ba,cos:ba,e:ba,floor:ba,ln:ba,ln2:ba,log10:ba,log2:ba,max:ba,min:ba,pi:ba,round:ba,sin:ba,sqrt:ba,tan:ba,zoom:l,"heatmap-density":null,"has-id":ea,none:J};b.ALL=y;b.ANY=E;b.Add=qa;b.Assert=ja;b.At=L;b.Calculate=ba;b.Case=K;b.Coalesce=Q;b.Coerce=ha;b.Concat=
ra;b.Div=ka;b.EQ=u;b.GE=F;b.GT=D;b.GeomType=c;b.Get=H;b.Has=R;b.HasID=ea;b.ID=m;b.In=W;b.IndexOf=U;b.Interpolate=S;b.LE=A;b.LT=B;b.Length=X;b.Let=O;b.Literal=va;b.Match=M;b.Mod=la;b.Mul=fa;b.NE=w;b.NONE=J;b.NOT=z;b.Pow=pa;b.Properties=g;b.Rgb=sa;b.Rgba=ta;b.Slice=Z;b.Step=N;b.String=ma;b.Sub=aa;b.ToRgba=ua;b.TypeOf=wa;b.Var=T;b.Zoom=l;b.createExpression=e;b.ops=na;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/TileClipper":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],
function(b,a){b.GeometryType=void 0;(function(k){k[k.Unknown=0]="Unknown";k[k.Point=1]="Point";k[k.LineString=2]="LineString";k[k.Polygon=3]="Polygon"})(b.GeometryType||(b.GeometryType={}));let x=function(){function k(c,g){this.x=c;this.y=g}var m=k.prototype;m.clone=function(){return new k(this.x,this.y)};m.equals=function(c,g){return c===this.x&&g===this.y};m.isEqual=function(c){return c.x===this.x&&c.y===this.y};m.setCoords=function(c,g){this.x=c;this.y=g};m.normalize=function(){var c=this.x;const g=
this.y;c=Math.sqrt(c*c+g*g);this.x/=c;this.y/=c};m.rightPerpendicular=function(){const c=this.x;this.x=this.y;this.y=-c};m.move=function(c,g){this.x+=c;this.y+=g};m.assign=function(c){this.x=c.x;this.y=c.y};m.assignAdd=function(c,g){this.x=c.x+g.x;this.y=c.y+g.y};m.assignSub=function(c,g){this.x=c.x-g.x;this.y=c.y-g.y};m.rotate=function(c,g){const l=this.x,q=this.y;this.x=l*c-q*g;this.y=l*g+q*c};m.scale=function(c){this.x*=c;this.y*=c};m.length=function(){const c=this.x,g=this.y;return Math.sqrt(c*
c+g*g)};k.distance=function(c,g){const l=g.x-c.x;c=g.y-c.y;return Math.sqrt(l*l+c*c)};k.add=function(c,g){return new k(c.x+g.x,c.y+g.y)};k.sub=function(c,g){return new k(c.x-g.x,c.y-g.y)};return k}(),p=function(k,m,c){this.ratio=k;this.x=m;this.y=c},f=function(){function k(c,g,l,q=8,u=8){this._lines=[];this._starts=[];this.validateTessellation=!0;this._pixelRatio=q;this._pixelMargin=u;this._tileSize=512*q;this._dz=c;this._yPos=g;this._xPos=l}var m=k.prototype;m.setPixelMargin=function(c){c!==this._pixelMargin&&
(this._pixelMargin=c,this.setExtent(this._extent))};m.setExtent=function(c){this._extent=c;this._finalRatio=this._tileSize/c*(1<<this._dz);let g=this._pixelRatio*this._pixelMargin;g/=this._finalRatio;c>>=this._dz;g>c&&(g=c);this._margin=g;this._xmin=c*this._xPos-g;this._ymin=c*this._yPos-g;this._xmax=this._xmin+c+2*g;this._ymax=this._ymin+c+2*g};m.reset=function(c){this._type=c;this._lines=[];this._starts=[];this._line=null;this._start=0};m.moveTo=function(c,g){this._pushLine();this._prevIsIn=this._isIn(c,
g);this._moveTo(c,g,this._prevIsIn);this._prevPt=new x(c,g);this._firstPt=new x(c,g);this._dist=0};m.lineTo=function(c,g){const l=this._isIn(c,g),q=new x(c,g),u=x.distance(this._prevPt,q);if(l)if(this._prevIsIn)this._lineTo(c,g,!0);else{var w=this._prevPt;var B=q;c=this._intersect(B,w);this._start=this._dist+u*(1-this._r);this._lineTo(c.x,c.y,!0);this._lineTo(B.x,B.y,!0)}else if(this._prevIsIn)B=this._prevPt,w=q,c=this._intersect(B,w),this._lineTo(c.x,c.y,!0),this._lineTo(w.x,w.y,!1);else{const D=
this._prevPt;if(!(D.x<=this._xmin&&q.x<=this._xmin||D.x>=this._xmax&&q.x>=this._xmax||D.y<=this._ymin&&q.y<=this._ymin||D.y>=this._ymax&&q.y>=this._ymax)){c=[];if(D.x<this._xmin&&q.x>this._xmin||D.x>this._xmin&&q.x<this._xmin){g=(this._xmin-D.x)/(q.x-D.x);var A=D.y+g*(q.y-D.y);A<=this._ymin?B=!1:A>=this._ymax?B=!0:c.push(new p(g,this._xmin,A))}if(D.x<this._xmax&&q.x>this._xmax||D.x>this._xmax&&q.x<this._xmax)g=(this._xmax-D.x)/(q.x-D.x),A=D.y+g*(q.y-D.y),A<=this._ymin?B=!1:A>=this._ymax?B=!0:c.push(new p(g,
this._xmax,A));if(D.y<this._ymin&&q.y>this._ymin||D.y>this._ymin&&q.y<this._ymin)g=(this._ymin-D.y)/(q.y-D.y),A=D.x+g*(q.x-D.x),A<=this._xmin?w=!1:A>=this._xmax?w=!0:c.push(new p(g,A,this._ymin));if(D.y<this._ymax&&q.y>this._ymax||D.y>this._ymax&&q.y<this._ymax)g=(this._ymax-D.y)/(q.y-D.y),A=D.x+g*(q.x-D.x),A<=this._xmin?w=!1:A>=this._xmax?w=!0:c.push(new p(g,A,this._ymax));if(0===c.length)w?B?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):B?this._lineTo(this._xmin,
this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<c.length&&c[0].ratio>c[1].ratio)this._start=this._dist+u*c[1].ratio,this._lineTo(c[1].x,c[1].y,!0),this._lineTo(c[0].x,c[0].y,!0);else for(this._start=this._dist+u*c[0].ratio,w=0;w<c.length;w++)this._lineTo(c[w].x,c[w].y,!0)}this._lineTo(q.x,q.y,!1)}this._dist+=u;this._prevIsIn=l;this._prevPt=q};m.close=function(){if(2<this._line.length){var c=this._firstPt,g=this._prevPt;c.x===g.x&&c.y===g.y||this.lineTo(c.x,c.y);c=this._line;for(g=
c.length;4<=g;)if(c[0].x===c[1].x&&c[0].x===c[g-2].x||c[0].y===c[1].y&&c[0].y===c[g-2].y)c.pop(),c[0].x=c[g-2].x,c[0].y=c[g-2].y,--g;else break}};m.result=function(c=!0){this._pushLine();if(0===this._lines.length)return null;this._type===b.GeometryType.Polygon&&c&&d.simplify(this._tileSize,this._margin*this._finalRatio,this._lines);return this._lines};m.resultWithStarts=function(){if(this._type!==b.GeometryType.LineString)throw Error("Only valid for lines");this._pushLine();const c=this._lines,g=
c.length;if(0===g)return null;const l=[];for(let q=0;q<g;q++)l.push({line:c[q],start:this._starts[q]||0});return l};m._isIn=function(c,g){return c>=this._xmin&&c<=this._xmax&&g>=this._ymin&&g<=this._ymax};m._intersect=function(c,g){let l,q,u;if(g.x>=this._xmin&&g.x<=this._xmax)q=g.y<=this._ymin?this._ymin:this._ymax,u=(q-c.y)/(g.y-c.y),l=c.x+u*(g.x-c.x);else if(g.y>=this._ymin&&g.y<=this._ymax)l=g.x<=this._xmin?this._xmin:this._xmax,u=(l-c.x)/(g.x-c.x),q=c.y+u*(g.y-c.y);else{q=g.y<=this._ymin?this._ymin:
this._ymax;l=g.x<=this._xmin?this._xmin:this._xmax;const w=(l-c.x)/(g.x-c.x),B=(q-c.y)/(g.y-c.y);w<B?(u=w,q=c.y+w*(g.y-c.y)):(u=B,l=c.x+B*(g.x-c.x))}this._r=u;return new x(l,q)};m._pushLine=function(){this._line&&(this._type===b.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===b.GeometryType.LineString?1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===b.GeometryType.Polygon&&3<this._line.length&&
(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0};m._moveTo=function(c,g,l){this._type!==b.GeometryType.Polygon?l&&(c=Math.round((c-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line.push(new x(c,g))):(l||(c<this._xmin&&(c=this._xmin),c>this._xmax&&(c=this._xmax),g<this._ymin&&(g=this._ymin),g>this._ymax&&(g=this._ymax)),c=Math.round((c-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-
(this._ymin+this._margin))*this._finalRatio),this._line.push(new x(c,g)),this._isV=this._isH=!1)};m._lineTo=function(c,g,l){if(this._type!==b.GeometryType.Polygon)if(l){c=Math.round((c-(this._xmin+this._margin))*this._finalRatio);g=Math.round((g-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(l=this._line[this._line.length-1],l.equals(c,g)))return;this._line.push(new x(c,g))}else this._line&&0<this._line.length&&this._pushLine();else if(l||(c<this._xmin&&(c=this._xmin),c>this._xmax&&
(c=this._xmax),g<this._ymin&&(g=this._ymin),g>this._ymax&&(g=this._ymax)),c=Math.round((c-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){l=this._line[this._line.length-1];const q=l.x===c,u=l.y===g;q&&u||(this._isH&&q?(l.x=c,l.y=g,l=this._line[this._line.length-2],l.x===c&&l.y===g?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(l=this._line[this._line.length-2],this._isH=l.x===c,this._isV=l.y===
g)):(this._isH=l.x===c,this._isV=l.y===g)):this._isV&&u?(l.x=c,l.y=g,l=this._line[this._line.length-2],l.x===c&&l.y===g?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(l=this._line[this._line.length-2],this._isH=l.x===c,this._isV=l.y===g)):(this._isH=l.x===c,this._isV=l.y===g)):(this._line.push(new x(c,g)),this._isH=q,this._isV=u))}else this._line.push(new x(c,g))};return k}(),r=function(){function k(){}var m=k.prototype;m.setExtent=function(c){this._ratio=4096===c?1:4096/c};m.reset=
function(c){this._lines=[];this._line=null};m.moveTo=function(c,g){this._line&&this._lines.push(this._line);this._line=[];const l=this._ratio;this._line.push(new x(c*l,g*l))};m.lineTo=function(c,g){const l=this._ratio;this._line.push(new x(c*l,g*l))};m.close=function(){const c=this._line;c&&!c[0].isEqual(c[c.length-1])&&c.push(c[0])};m.result=function(){this._line&&this._lines.push(this._line);return 0===this._lines.length?null:this._lines};a._createClass(k,[{key:"validateTessellation",get:function(){return 1>
this._ratio}}]);return k}();var h;(function(k){k[k.sideLeft=0]="sideLeft";k[k.sideRight=1]="sideRight";k[k.sideTop=2]="sideTop";k[k.sideBottom=3]="sideBottom"})(h||(h={}));let d=function(){function k(){}k.simplify=function(m,c,g){if(g){var l=-c,q=m+c,u=-c,w=m+c;m=[];c=[];var B=g.length;for(let A=0;A<B;++A){const D=g[A];if(!D||2>D.length)continue;let F=D[0],z;const y=D.length;for(let E=1;E<y;++E)z=D[E],F.x===z.x&&(F.x<=l&&(F.y>z.y?(m.push(A),m.push(E),m.push(h.sideLeft),m.push(-1)):(c.push(A),c.push(E),
c.push(h.sideLeft),c.push(-1))),F.x>=q&&(F.y<z.y?(m.push(A),m.push(E),m.push(h.sideRight),m.push(-1)):(c.push(A),c.push(E),c.push(h.sideRight),c.push(-1)))),F.y===z.y&&(F.y<=u&&(F.x<z.x?(m.push(A),m.push(E),m.push(h.sideTop),m.push(-1)):(c.push(A),c.push(E),c.push(h.sideTop),c.push(-1))),F.y>=w&&(F.x>z.x?(m.push(A),m.push(E),m.push(h.sideBottom),m.push(-1)):(c.push(A),c.push(E),c.push(h.sideBottom),c.push(-1)))),F=z}0!==m.length&&0!==c.length&&(k.fillParent(g,c,m),k.fillParent(g,m,c),l=[],k.calcDeltas(l,
c,m),k.calcDeltas(l,m,c),k.addDeltas(l,g))}};k.fillParent=function(m,c,g){const l=g.length,q=c.length;for(let D=0;D<q;D+=4){var u=c[D],w=c[D+1];const F=c[D+2],z=m[u][w-1];u=m[u][w];w=8092;let y=-1;for(let E=0;E<l;E+=4){if(g[E+2]!==F)continue;var B=g[E];const J=g[E+1];var A=m[B][J-1];B=m[B][J];switch(F){case h.sideLeft:case h.sideRight:e(z.y,A.y,B.y)&&e(u.y,A.y,B.y)&&(A=Math.abs(B.y-A.y),A<w&&(w=A,y=E));break;case h.sideTop:case h.sideBottom:e(z.x,A.x,B.x)&&e(u.x,A.x,B.x)&&(A=Math.abs(B.x-A.x),A<w&&
(w=A,y=E))}}c[D+3]=y}};k.calcDeltas=function(m,c,g){const l=c.length;for(let q=0;q<l;q+=4){const u=k.calcDelta(q,c,g,[]);m.push(c[q]);m.push(c[q+1]);m.push(c[q+2]);m.push(u)}};k.calcDelta=function(m,c,g,l){m=c[m+3];if(-1===m)return 0;const q=l.length;if(1<q&&l[q-2]===m)return 0;l.push(m);return k.calcDelta(m,g,c,l)+1};k.addDeltas=function(m,c){const g=m.length;let l=0;for(var q=0;q<g;q+=4){var u=m[q+3];u>l&&(l=u)}for(q=0;q<g;q+=4){u=c[m[q]];const w=m[q+1],B=l-m[q+3];switch(m[q+2]){case h.sideLeft:u[w-
1].x-=B;u[w].x-=B;1===w&&(u[u.length-1].x-=B);w===u.length-1&&(u[0].x-=B);break;case h.sideRight:u[w-1].x+=B;u[w].x+=B;1===w&&(u[u.length-1].x+=B);w===u.length-1&&(u[0].x+=B);break;case h.sideTop:u[w-1].y-=B;u[w].y-=B;1===w&&(u[u.length-1].y-=B);w===u.length-1&&(u[0].y-=B);break;case h.sideBottom:u[w-1].y+=B,u[w].y+=B,1===w&&(u[u.length-1].y+=B),w===u.length-1&&(u[0].y+=B)}}};return k}();const e=(k,m,c)=>k>=m&&k<=c||k>=c&&k<=m;b.Point=x;b.SimpleBuilder=r;b.TileClipper=f;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function a(f,r,h,d){function e(u,w){var B;let A,D;A=u;for(B=0;8>B;B++){D=((c*A+m)*A+k)*A-u;if(Math.abs(D)<w)return A;var F=(3*c*A+2*m)*A+k;if(1E-6>Math.abs(F))break;A-=D/F}F=0;B=1;A=u;if(A<F)return F;if(A>B)return B;for(;F<B;){D=((c*A+m)*A+k)*A;if(Math.abs(D-u)<w)break;u>D?F=A:B=A;A=.5*(B-F)+F}return A}const k=3*f,m=3*(h-f)-k,c=1-k-m,g=3*r,l=3*(d-r)-g,q=1-g-l;return function(u,w=1E-6){u=e(u,w);return((q*u+l)*
u+g)*u}}const x=/^cubic-bezier\((.*)\)/,p={};p.ease=a(.25,.1,.25,1);p.linear=a(0,0,1,1);p.easeIn=p["ease-in"]=a(.42,0,1,1);p.easeOut=p["ease-out"]=a(0,0,.58,1);p.easeInOut=p["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=p;b.parse=function(f){let r=p[f]||null;!r&&(f=x.exec(f))&&(f=f[1].split(",").map(h=>parseFloat(h.trim())),4!==f.length||f.some(h=>isNaN(h))||(r=a.apply(a,f)));return r};b.unitBezier=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],
function(b){function a(d,e){d%=e;return 0<=d?d:d+e}const x=Number.POSITIVE_INFINITY,p=Math.PI,f=128/p,r=256/360,h=1/Math.LN2;b.C_2PI=2*p;b.C_DEG_TO_256=r;b.C_DEG_TO_RAD=p/180;b.C_INFINITY=x;b.C_PI=p;b.C_RAD_TO_256=f;b.between=function(d,e,k){return d>=e&&d<=k||d>=k&&d<=e};b.degToByte=function(d){return a(d*r,256)};b.interpolate=function(d,e,k){return d*(1-k)+e*k};b.log2=function(d){return Math.log(d)*h};b.positiveMod=a;b.radToByte=function(d){return a(d*f,256)};b.sqr=function(d){return d*d};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(b,a){function x(q,u){return{kind:"array",itemType:q,n:u}}function p(q){if("array"===q.kind){const u=p(q.itemType);return"number"===typeof q.n?`array<${u}, ${q.n}>`:"value"===q.itemType.kind?"array":`array<${u}>`}return q.kind}function f(q){if(null===q)return h;if("string"===typeof q)return e;if("boolean"===typeof q)return k;if("number"===typeof q)return d;
if(q instanceof a)return m;if(Array.isArray(q)){let u;for(const w of q){const B=f(w);if(!u)u=B;else if(u!==B){u=g;break}}return x(u||g,q.length)}return"object"===typeof q?c:g}function r(q,u){if("array"===u.kind)return"array"===q.kind&&(0===q.n&&"value"===q.itemType.kind||r(q.itemType,u.itemType))&&("number"!==typeof u.n||u.n===q.n);if("value"===u.kind)for(const w of l)if(r(q,w))return!0;return u.kind===q.kind}const h={kind:"null"},d={kind:"number"},e={kind:"string"},k={kind:"boolean"},m={kind:"color"},
c={kind:"object"},g={kind:"value"},l=[h,d,e,k,m,c,x(g)];b.BooleanType=k;b.ColorType=m;b.NullType=h;b.NumberType=d;b.ObjectType=c;b.StringType=e;b.ValueType=g;b.arrayType=x;b.getType=f;b.matchType=r;b.typeToString=p;b.valueToString=function(q){if(null===q)return"";const u=typeof q;return"string"===u?q:"number"===u||"boolean"===u?String(q):q instanceof a?q.toString():JSON.stringify(q)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color",
"../GeometryUtils","../expression/expression","../expression/types"],function(b,a,x,p){return function(){function f(h,d){this.isDataDriven=!1;this.interpolator=null;switch(h.type){case "number":var e=!0;break;case "color":e=!0;break;case "array":e="number"===h.value;break;default:e=!1}null==d&&(d=h.default);if(Array.isArray(d)&&0<d.length&&x.ops[d[0]]){e={number:p.NumberType,color:p.ColorType,string:p.StringType,boolean:p.BooleanType,enum:p.StringType};try{var k="array"===h.type?p.arrayType(e[h.value]||
p.ValueType,h.length):e[h.type];const m=x.createExpression(d,null,k);this.getValue=this._buildExpression(m,h);this.isDataDriven=!0;m instanceof x.Interpolate&&m.input instanceof x.Zoom&&(this.interpolator=m)}catch(m){console.log(m.message),this.getValue=this._buildSimple(h.default)}}else{e&&"interval"===d.type&&(e=!1);if(k=d&&d.stops&&0<d.stops.length)for(const m of d.stops)m[1]=this._validate(m[1],h);if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,
h)),k)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,h);break;case "categorical":this.getValue=this._buildCategorical(d,h);break;default:this.getValue=e?this._buildInterpolate(d,h):this._buildInterval(d,h)}else this.getValue=this._buildIdentity(d,h);else k?this.getValue=e?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,h),this.getValue=this._buildSimple(d))}}var r=f.prototype;r._validate=function(h,d){if("number"===d.type){if(h<d.minimum)return d.minimum;
if(h>d.maximum)return d.maximum}else"color"===d.type?h=f._parseColor(h):"enum"===d.type?"string"===typeof h&&(h=d.values.indexOf(h)):"array"===d.type&&"enum"===d.value?h=h.map(e=>"string"===typeof e?d.values.indexOf(e):e):"string"===d.type&&(h=p.valueToString(h));return h};r._buildSimple=function(h){return()=>h};r._buildExpression=function(h,d){return(e,k)=>{try{const m=h.evaluate(k,e);return void 0===m?d.default:this._validate(m,d)}catch(m){return console.log(m.message),d.default}}};r._buildIdentity=
function(h,d){return(e,k)=>{let m;k&&(m=k.values[h.property]);void 0!==m&&(m=this._validate(m,d));return null!=m?m:void 0!==h.default?h.default:d.default}};r._buildCategorical=function(h,d){return(e,k)=>{let m;k&&(m=k.values[h.property]);m=this._categorical(m,h.stops);return void 0!==m?m:void 0!==h.default?h.default:d.default}};r._buildInterval=function(h,d){return(e,k)=>{let m;k&&(m=k.values[h.property]);return"number"===typeof m?this._interval(m,h.stops):void 0!==h.default?h.default:d.default}};
r._buildInterpolate=function(h,d){return(e,k)=>{let m;k&&(m=k.values[h.property]);return"number"===typeof m?this._interpolate(m,h.stops,h.base||1):void 0!==h.default?h.default:d.default}};r._buildZoomInterpolate=function(h){return d=>this._interpolate(d,h.stops,h.base||1)};r._buildZoomInterval=function(h){return d=>this._interval(d,h.stops)};r._categorical=function(h,d){const e=d.length;for(let k=0;k<e;k++)if(d[k][0]===h)return d[k][1]};r._interval=function(h,d){const e=d.length;let k=0;for(let m=
0;m<e;m++)if(d[m][0]<=h)k=m;else break;return d[k][1]};r._interpolate=function(h,d,e){const k=d.length;for(let g=0;g<k;g++){const l=d[g];if(l[0]<=h)var m=l;else{var c=l;break}}if(m&&c){d=c[0]-m[0];h-=m[0];e=1===e?h/d:(e**h-1)/(e**d-1);if(Array.isArray(m[1])){m=m[1];c=c[1];h=[];for(d=0;d<m.length;d++)h.push(a.interpolate(m[d],c[d],e));return h}return a.interpolate(m[1],c[1],e)}if(m)return m[1];if(c)return c[1]};f._isEmpty=function(h){for(const d in h)if(h.hasOwnProperty(d))return!1;return!0};f._parseColor=
function(h){if(Array.isArray(h))return h;"string"===typeof h&&(h=new b(h));if(h instanceof b&&!this._isEmpty(h))return b.toUnitRGBA(h)};return f}()})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../2d/engine/vectorTiles/SchemaHelper ../../2d/engine/vectorTiles/TileHandler3D ../../2d/engine/vectorTiles/VTLPainter3D ../../2d/engine/vectorTiles/style/StyleRepository ./LayerView3D ./TiledLayerView3D ../terrain/terrainUtils ../../layers/LayerView".split(" "),function(b,
a,x,p,f,r,h,d,e,k,m,c,g,l,q,u,w,B){d=function(A){function D(){var z=A.apply(this,arguments)||this;z._tileHandlerController=null;z.type="vector-tile-3d";return z}b._inheritsLoose(D,A);var F=D.prototype;F.initialize=function(){if(p.isNone(this.layer.fullExtent))this.addResolvingPromise(Promise.reject(new x("vectortilelayerview:full-extent-undefined","This layer view's layer does not define a fullExtent.")));else{var {basemapTerrain:z,spatialReference:y,state:E,viewingMode:J}=this.view,K="local"===J&&
!w.vtlAssumes256PixelSizeAsDefault(y)||w.test.force512VTL,Q=this.layer.tileInfo.spatialReference.isGeographic;K=K?this.layer.tileInfo:this.layer.tileInfo.getOrCreateCompatible(256,Q?1:2);K=this._getTileInfoSupportError(K,this.layer.fullExtent);if(p.isSome(K))return this.addResolvingPromise(Promise.reject(K));K=r.whenOnce(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{var L=z.tilingScheme,H=L.pixelSize;this.schemaHelper=new m.SchemaHelper(H,p.isSome(z.spatialReference)&&z.spatialReference.isGeographic);
H=256===H?this.layer.tileInfo.getOrCreateCompatible(256,this.layer.tileInfo.spatialReference.isGeographic?1:2):this.view.spatialReference?.isGeographic?this.layer.tileInfo.getOrCreateCompatible(512,.5):this.layer.tileInfo;if(L=this._getTileInfoCompatibilityError(H,L))throw L;this.tileInfo=H});this._tileHandlerController=new AbortController;var M=this.view.resourceController;this._memCache=M.memoryController.newCache(this.layer.uid,L=>{L.release()});Q=new l(this.layer.currentStyleInfo.style);var S=
z.mapTileRequester;this._tileHandler=new c(this.layer,Q,E.contentPixelRatio,this._memCache,S);var N=this._tileHandlerController.signal,O=L=>M.immediate.schedule(L);Q=this._tileHandler.start({signal:N,schedule:O});var T=this._tileHandler.spriteMosaic;T.then(L=>{!f.isAborted(N)&&this._tileHandler&&(this.painter=new g(L,this._tileHandler.glyphMosaic))});Q.then(()=>this._tileHandlerController=null);this.updatingHandles.add(()=>({style:this.layer.currentStyleInfo.style,pixelRatio:this.view.state?.contentPixelRatio}),
({style:L,pixelRatio:H})=>{this._tileHandlerController&&this._tileHandlerController.abort();this._tileHandlerController=new AbortController;this._memCache.clear();L=new l(L);const R=new c(this.layer,L,H,this._memCache,S);H=R.start({signal:this._tileHandlerController.signal,schedule:O});L=R.spriteMosaic;H.then(()=>this._tileHandlerController=null);this.updatingHandles.addPromise(Promise.all([H,L]).then(([,W])=>{const U=this._tileHandler,X=this.painter;this.painter=new g(W,R.glyphMosaic);this._tileHandler=
R;this.emit("data-changed");U.destroy();X&&X.dispose()}))});K=Promise.all([K,Q,T]);this.addResolvingPromise(K)}};F.destroy=function(){this.painter=p.disposeMaybe(this.painter);this._tileHandlerController=p.abortMaybe(this._tileHandlerController);p.destroyMaybe(this._tileHandler);this._memCache=p.destroyMaybe(this._memCache);this._tileHandler=null};F.fetchTile=function(){var z=b._asyncToGenerator(function*(y,E,J,K){return this._tileHandler.getVectorTile(y,E,J,K)});return function(y,E,J,K){return z.apply(this,
arguments)}}();b._createClass(D,[{key:"dataLevelRange",get:function(){var z=this.tileInfo.lods;z=this.levelRangeFromScaleRange(z[0].scale,z[z.length-1].scale);1===z.minLevel&&256===this.tileInfo.size[0]&&(z.minLevel=0);return z}}]);return D}(u.TiledLayerView3D(q.LayerView3D(B)));a.__decorate([h.property()],d.prototype,"layer",void 0);a.__decorate([h.property()],d.prototype,"dataLevelRange",null);a.__decorate([h.property()],d.prototype,"updatingProgressValue",void 0);return d=a.__decorate([k.subclass("esri.views.3d.layers.VectorTileLayerView3D")],
d)});