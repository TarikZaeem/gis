// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/HeatmapDensityTechnique".split(" "),function(n,p,u,y,z,A,B,q,C,f,v,r){let w=function(g){function c(){var b=g.apply(this,arguments)||this;b.isAttributeDriven=!1;b.usesHalfFloats=!1;return b}p._inheritsLoose(c,
g);return c}(r.HeatmapDensityPassParameters);q=function(g){function c(a){a=g.call(this,a,new w)||this;a._configuration=new r.HeatmapDensityTechniqueConfiguration;return a}p._inheritsLoose(c,g);var b=c.prototype;b.requiresSlot=function(a,d){return a===C.RenderSlot.DRAPED_MATERIAL&&d===A.ShaderOutput.Color};b.getConfiguration=function(){this._configuration.isAttributeDriven=this.parameters.isAttributeDriven;this._configuration.usesHalfFloat=this.parameters.usesHalfFloats;return this._configuration};
b.createGLMaterial=function(a){return new D(a)};b.intersect=function(){};b.intersectDraped=function(a,d,e,k,h,l){d=a.vertexAttributes.get(f.VertexAttribute.POSITION);({parameters:e}=this);({searchRadius:e}=e);({screenToWorldRatio:a}=a);a=e*a+2*a;a*=a;e=d.data.length/d.size;for(let t=0;t<e;t++){var m=t*d.size;m=u.set(E,d.data[m],d.data[m+1]);u.squaredDistance(m,k)<a&&h(l.dist,l.normal,-1,!1)}};b.createBufferWriter=function(){return new F(this.parameters.isAttributeDriven?G:x)};return c}(q.Material);
let D=function(g){function c(){return g.apply(this,arguments)||this}p._inheritsLoose(c,g);c.prototype.beginSlot=function(b){return this.ensureTechnique(r.HeatmapDensityTechnique,b)};return c}(B),F=function(){function g(b){this.vertexBufferLayout=b}var c=g.prototype;c.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};c.elementCount=function(b){return 6*b.indices.get(f.VertexAttribute.POSITION).length};c.write=function(b,a,d,e,k){v.writePosition(d.indices.get(f.VertexAttribute.POSITION),
d.vertexAttributes.get(f.VertexAttribute.POSITION).data,b,e.position,k,6);b=d.indices.get(f.VertexAttribute.POSITION).length;a=e.uv0;let h=k;for(let l=0;l<b;++l)a.setValues(h++,-1,-1),a.setValues(h++,1,-1),a.setValues(h++,1,1),a.setValues(h++,1,1),a.setValues(h++,-1,1),a.setValues(h++,-1,-1);(e=f.VertexAttribute.FEATUREATTRIBUTE in e?e.featureAttribute:null)&&v.writeBufferFloat(d.indices.get(f.VertexAttribute.FEATUREATTRIBUTE),d.vertexAttributes.get(f.VertexAttribute.FEATUREATTRIBUTE).data,e,k,6)};
return g}();const x=z.newLayout().vec3f(f.VertexAttribute.POSITION).vec2f(f.VertexAttribute.UV0),G=x.clone().f32(f.VertexAttribute.FEATUREATTRIBUTE),E=y.create();n.HeatmapDensityMaterial=q;n.HeatmapDensityMaterialParameters=w;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});