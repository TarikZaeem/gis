// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w){var D;k=new k.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});h=D=function(x){function c(p){p=x.call(this,p)||this;p.dpi=96;p.format=null;p.origin=null;p.minScale=0;p.maxScale=0;p.size=null;p.spatialReference=null;return p}m._inheritsLoose(c,x);c.create=function(p=
{}){const {resolutionFactor:C=1,scales:L,size:O=256,spatialReference:K=l.WebMercator,numLODs:U=24}=p;if(!n.isValid(K)){p=[];if(L)for(var T=0;T<L.length;T++){var M=L[T];p.push(new v({level:T,scale:M,resolution:M}))}else for(T=5E-4,M=U-1;0<=M;M--)p.unshift(new v({level:M,scale:T,resolution:T})),T*=2;return new D({dpi:96,lods:p,origin:new a(0,0,K),size:[O,O],spatialReference:K})}T=n.getInfo(K);p=p.origin?new a({x:p.origin.x,y:p.origin.y,spatialReference:K}):T?new a({x:T.origin[0],y:T.origin[1],spatialReference:K}):
new a({x:0,y:0,spatialReference:K});T=1/(39.37*A.getMetersPerUnitForSR(K)*96);M=[];if(L)for(var P=0;P<L.length;P++){var V=L[P];M.push(new v({level:P,scale:V,resolution:V*T}))}else{var H=n.isGeographic(K)?512/O*5.916575275917094E8:256/O*5.91657527591555E8;P=Math.ceil(U/C);M.push(new v({level:0,scale:H,resolution:H*T}));for(V=1;V<P;V++)H/=2**C,M.push(new v({level:V,scale:H,resolution:H*T}))}return new D({dpi:96,lods:M,origin:p,size:[O,O],spatialReference:K})};var e=c.prototype;e.readOrigin=function(p,
C){return a.fromJSON({spatialReference:C.spatialReference,...p})};e.readSize=function(p,C){return[C.cols,C.rows]};e.writeSize=function(p,C){C.cols=p[0];C.rows=p[1]};e.zoomToScale=function(p){const C=this.scales;if(0>=p)return C[0];if(p>=C.length-1)return C[C.length-1];const L=Math.floor(p);return C[L]/(C[L]/C[L+1])**(p-L)};e.scaleToZoom=function(p){const C=this.scales,L=C.length-1;let O=0;for(;O<L;O++){const K=C[O],U=C[O+1];if(K<=p)break;if(U===p)return O+1;if(K>p&&U<p)return O+Math.log(K/p)/Math.log(K/
U)}return O};e.snapScale=function(p,C=.95){p=this.scaleToZoom(p);return p%Math.floor(p)>=C?this.zoomToScale(Math.ceil(p)):this.zoomToScale(Math.floor(p))};e.tileAt=function(p,C,L,O){var K=this.lodAt(p);if(!K)return null;let U;if("number"===typeof C)U=C,C=L;else{if(n.equals(C.spatialReference,this.spatialReference))U=C.x,C=C.y;else{O=f.project(C,this.spatialReference);if(t.isNone(O))return null;U=O.x;C=O.y}O=L}L=K.resolution*this.size[0];K=K.resolution*this.size[1];O||(O=new w.TileKey(null,0,0,0,d.create()));
O.level=p;O.row=Math.floor((this.origin.y-C)/K+.001);O.col=Math.floor((U-this.origin.x)/L+.001);this.updateTileInfo(O);return O};e.updateTileInfo=function(p,C=D.ExtrapolateOptions.NONE){var L=this.lodAt(p.level);L||C!==D.ExtrapolateOptions.POWER_OF_TWO||(C=this.lods[this.lods.length-1],C.level<p.level&&(L=C));if(L){var O=p.level-L.level;C=L.resolution*this.size[0]/2**O;L=L.resolution*this.size[1]/2**O;p.id=`${p.level}/${p.row}/${p.col}`;p.extent||(p.extent=d.create());p.extent[0]=this.origin.x+p.col*
C;p.extent[1]=this.origin.y-(p.row+1)*L;p.extent[2]=p.extent[0]+C;p.extent[3]=p.extent[1]+L}};e.upsampleTile=function(p){const C=this._upsampleLevels[p.level];if(!C||-1===C.parentLevel)return!1;p.level=C.parentLevel;p.row=Math.floor(p.row/C.factor+.001);p.col=Math.floor(p.col/C.factor+.001);this.updateTileInfo(p);return!0};e.getTileBounds=function(p,C){var L=this.lodAt(C.level);if(null==L)return null;var {resolution:O}=L;L=O*this.size[0];O*=this.size[1];p[0]=this.origin.x+C.col*L;p[1]=this.origin.y-
(C.row+1)*O;p[2]=p[0]+L;p[3]=p[1]+O;return p};e.lodAt=function(p){return this._levelToLOD?.[p]??null};e.clone=function(){return D.fromJSON(this.write({}))};e.getOrCreateCompatible=function(p,C){if(256===this.size[0]&&256===this.size[1])return 256===p?this:null;const L=[],O=this.lods.length;for(let K=0;K<O;K++){const U=this.lods[K];L.push(new v({level:U.level,scale:U.scale,resolution:U.resolution*C}))}return new D({size:[p,p],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,
origin:this.origin,spatialReference:this.spatialReference,lods:L})};e._initializeUpsampleLevels=function(){const p=this.lods;this._upsampleLevels=[];let C=null;for(let L=0;L<p.length;L++){const O=p[L];this._upsampleLevels[O.level]={parentLevel:C?C.level:-1,factor:C?C.resolution/O.resolution:0};C=O}};m._createClass(c,[{key:"isWrappable",get:function(){const {spatialReference:p,origin:C}=this;if(p&&C){const L=n.getInfo(p);return p.isWrappable&&!!L&&Math.abs(L.origin[0]-C.x)<=L.dx}return!1}},{key:"lods",
set:function(p){let C=0,L=0;const O=[],K=this._levelToLOD={};p&&(C=-Infinity,L=Infinity,p.forEach(U=>{O.push(U.scale);C=U.scale>C?U.scale:C;L=U.scale<L?U.scale:L;K[U.level]=U}));this._set("scales",O);this._set("minScale",C);this._set("maxScale",L);this._set("lods",p);this._initializeUpsampleLevels()}}]);return c}(h.JSONSupport);q.__decorate([B.property({type:Number,json:{write:!0}})],h.prototype,"compressionQuality",void 0);q.__decorate([B.property({type:Number,json:{write:!0}})],h.prototype,"dpi",
void 0);q.__decorate([B.property({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"format",void 0);q.__decorate([B.property({readOnly:!0})],h.prototype,"isWrappable",null);q.__decorate([B.property({type:a,json:{write:!0}})],h.prototype,"origin",void 0);q.__decorate([u.reader("origin")],h.prototype,"readOrigin",null);q.__decorate([B.property({type:[v],value:null,json:{write:!0}})],h.prototype,"lods",null);q.__decorate([B.property({readOnly:!0})],
h.prototype,"minScale",void 0);q.__decorate([B.property({readOnly:!0})],h.prototype,"maxScale",void 0);q.__decorate([B.property({readOnly:!0})],h.prototype,"scales",void 0);q.__decorate([B.property({cast:x=>Array.isArray(x)?x:"number"===typeof x?[x,x]:[256,256]})],h.prototype,"size",void 0);q.__decorate([u.reader("size",["rows","cols"])],h.prototype,"readSize",null);q.__decorate([b.writer("size",{cols:{type:z.Integer},rows:{type:z.Integer}})],h.prototype,"writeSize",null);q.__decorate([B.property({type:l,
json:{write:!0}})],h.prototype,"spatialReference",void 0);h=D=q.__decorate([g.subclass("esri.layers.support.TileInfo")],h);(function(x){x=x.ExtrapolateOptions||(x.ExtrapolateOptions={});x[x.NONE=0]="NONE";x[x.POWER_OF_TWO=1]="POWER_OF_TWO"})(h||(h={}));return h})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B){var z;k=z=function(F){function u(g){g=F.call(this,g)||this;g.cols=null;g.level=0;g.levelValue=null;g.origin=null;g.resolution=0;g.rows=null;g.scale=0;return g}m._inheritsLoose(u,F);u.prototype.clone=function(){return new z({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return u}(k.JSONSupport);q.__decorate([h.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,
write:!1}}}})],k.prototype,"cols",void 0);q.__decorate([h.property({type:t.Integer,json:{write:!0}})],k.prototype,"level",void 0);q.__decorate([h.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);q.__decorate([h.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"origin",void 0);q.__decorate([h.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);q.__decorate([h.property({json:{write:!0,
origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"rows",void 0);q.__decorate([h.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=z=q.__decorate([B.subclass("esri.layers.support.LOD")],k)})},"esri/layers/support/TileKey":function(){define(["exports"],function(m){m.TileKey=function(q,k,h,t,A){this.id=q;this.level=k;this.row=h;this.col=t;this.extent=A};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g){function b(d,n){return n?a[d].valueToClassName[n].split(" "):[]}const a={widthBreakpoint:{getValue(d){const n=d.viewSize[0];d=d.breakpoints;const f=this.values;return n<=d.xsmall?f.xsmall:n<=d.small?f.small:n<=d.medium?f.medium:n<=d.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(d){const n=d.viewSize[1];d=d.breakpoints;const f=this.values;return n<=d.xsmall?f.xsmall:n<=d.small?f.small:n<=d.medium?f.medium:n<=d.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(d){d=d.viewSize;const n=this.values;return d[1]>=d[0]?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l={xsmall:544,small:768,medium:992,large:1200};m.BreakpointsOwner=
d=>{d=function(n){function f(...w){w=n.call(this,...w)||this;w._breakpointsHandles=new t;w.orientation=null;w.widthBreakpoint=null;w.heightBreakpoint=null;w.breakpoints=l;return w}q._inheritsLoose(f,n);var v=f.prototype;v.initialize=function(){this._breakpointsHandles.add(B.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),B.initial))};v.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=A.destroyMaybe(this._breakpointsHandles))};v._updateClassNames=
function(){if(this.container){var w=h.acquire(),D=h.acquire(),x=!1,c;for(c in a){const e=this[c],p=a[c].getValue({viewSize:this.size,breakpoints:this.breakpoints});e!==p&&(x=!0,this[c]=p,b(c,e).forEach(C=>D.push(C)),b(c,p).forEach(C=>w.push(C)))}x&&(this._applyClassNameChanges(w,D),h.release(w),h.release(D))}};v._applyClassNameChanges=function(w,D){const x=this.container;x&&(D.forEach(c=>x.classList.remove(c)),w.forEach(c=>x.classList.add(c)))};v._removeActiveClassNames=function(){const w=this.container;
if(w)for(var D in a)b(D,this[D]).forEach(x=>w.classList.remove(x))};q._createClass(f,[{key:"breakpoints",set:function(w){var D=this._get("breakpoints");if(w!==D){D=(D=w)&&D.xsmall<D.small&&D.small<D.medium&&D.medium<D.large;if(!D){const x=JSON.stringify(l,null,2);console.warn("provided breakpoints are not valid, using defaults:"+x)}w=D?w:l;this._set("breakpoints",{...w})}}}]);return f}(d);k.__decorate([z.property()],d.prototype,"breakpoints",null);k.__decorate([z.property()],d.prototype,"orientation",
void 0);k.__decorate([z.property()],d.prototype,"widthBreakpoint",void 0);k.__decorate([z.property()],d.prototype,"heightBreakpoint",void 0);return d=k.__decorate([g.subclass("esri.views.BreakpointsOwner")],d)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){function d(f){f&&(h.empty(f),f.parentNode&&f.parentNode.removeChild(f))}const n=[0,0];m.DOMContainer=f=>{f=function(v){function w(...x){var c=v.call(this,...x)||this;c._freqInfo={freq:16,time:750};c._overlayRenderTaskHandle=null;c.height=0;c.overlay=null;c.position=null;c.resizing=!1;c.root=null;c.surface=null;c.suspended=!0;c.ui=null;c.userContent=null;c.width=0;c.widthBreakpoint=null;if(0===x.length||void 0===x[0]?.popup)c.popup=new l({view:q._assertThisInitialized(c)});
c.handles.add([B.watch(()=>c.cursor,e=>{const {surface:p}=q._assertThisInitialized(c);p&&p.setAttribute("data-cursor",e)}),B.watch(()=>c.interacting,e=>{const {surface:p}=q._assertThisInitialized(c);p&&p.setAttribute("data-interacting",e.toString())})]);return c}q._inheritsLoose(w,v);var D=w.prototype;D.initialize=function(){this.handles.add(B.watch(()=>this.ui,(x,c)=>this._handleUIChange(x,c)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",
()=>this.notifyChange("focused"))])};D.destroy=function(){this.destroyed||(this.ui=A.destroyMaybe(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};D.blur=function(){this.surface&&this.surface.blur()};D.focus=function(){this.surface&&this.surface.focus()};D.pageToContainer=function(x,c,e){const p=this.position;x-=p?p[0]:0;c-=p?p[1]:0;e?(e[0]=x,e[1]=c):e=[x,c];return e};D.containerToPage=function(x,c,e){const p=this.position;x+=p?p[0]:0;c+=p?p[1]:0;e?(e[0]=x,e[1]=
c):e=[x,c];return e};D._handleUIChange=function(x,c){c&&(this.handles.remove("ui"),c.destroy());x&&this._wireUI(x);this._set("ui",x)};D._wireUI=function(x){this.handles.remove("ui");x&&(x.view=this,this.handles.add([B.watch(()=>this.root,c=>{if(c){const e=document.createElement("div");c.appendChild(e);c=e}else c=null;x.container=c},B.initial),B.watch(()=>this.popup,(c,e)=>{e&&x.remove(e,"popup");c&&(c.view=x.view,x.add(c,{key:"popup",position:"manual"}))},B.initial)],"ui"))};D._stopMeasuring=function(){this.handles.remove("measuring");
this._get("resizing")&&this._set("resizing",!1)};D._startMeasuring=function(){const x=this._freqInfo;x.freq=16;x.time=750;this.handles.add([(()=>{const c=()=>{x.freq=16;x.time=750};window.addEventListener("resize",c);return{remove(){window.removeEventListener("resize",c)}}})(),z.addFrameTask({prepare:c=>{const e=this._measure(),p=this._freqInfo;p.time+=c.deltaTime;e&&(p.freq=16,this._get("resizing")||this._set("resizing",!0));p.time<p.freq||(p.time=0,this._position()||e?p.freq=16:p.freq=Math.min(750,
2*p.freq),!e&&512<=p.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};D._measure=function(){var x=this.container;const c=x?x.clientWidth:0;x=x?x.clientHeight:0;if(0===c||0===x)return this.suspended||this._set("suspended",!0),!1;const e=this.width,p=this.height;if(c===e&&x===p)return this.suspended&&this._set("suspended",!1),!1;this._set("width",c);this._set("height",x);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:e,
oldHeight:p,width:c,height:x});return!0};D._position=function(){var x=this.container;const c=this.position;var e;if(e=x)e=(x.ownerDocument||window.document).defaultView,x=x.getBoundingClientRect(),n[0]=x.left+(e?.pageXOffset??0),n[1]=x.top+(e?.pageYOffset??0),e=n;x=e;return x?c&&x[0]===c[0]&&x[1]===c[1]?!1:(this._set("position",[x[0],x[1]]),!0):!1};D.forceDOMReadyCycle=function(){};q._createClass(w,[{key:"container",get:function(){return this._get("container")??null},set:function(x){const c=this._get("container"),
e=h.byId(x);e||"string"!==typeof x||t.getLogger(this.declaredClass).error("#container",`element with id '${x}' not found`);if(c!==e)if(this.handles.remove("dom-size"),this._stopMeasuring(),c&&(c.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(d(this.root),this._set("root",null)),this.userContent&&(h.reparent(this.userContent,c),d(this.userContent),
this._set("userContent",null))),e){e.classList.add("esri-view");x=document.createElement("div");x.className="esri-view-user-storage";h.reparent(e,x);e.appendChild(x);this._set("userContent",x);x=document.createElement("div");x.className="esri-view-root";e.insertBefore(x,e.firstChild);this._set("root",x);var p=document.createElement("div");p.className="esri-view-surface";p.setAttribute("role","application");p.tabIndex=0;x.appendChild(p);this._set("surface",p);var C=new a;x.appendChild(C.surface);this._set("overlay",
C);B.watch(()=>C.needsRender,L=>{this._overlayRenderTaskHandle=L&&!this._overlayRenderTaskHandle?z.addFrameTask({render:()=>this.overlay?.render()}):A.removeMaybe(this._overlayRenderTaskHandle)});this.forceDOMReadyCycle();this.handles.add(B.watch(()=>this.size,L=>{const [O,K]=L;O>=document.body.clientWidth||K>=document.body.clientHeight?p.classList.add("esri-view-surface--inset-outline"):p.classList.remove("esri-view-surface--inset-outline")},B.initial),"dom-size");this._set("container",e);this._startMeasuring()}else this._set("width",
0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const x=document.activeElement===this.surface;return document.hasFocus()&&x}},{key:"popup",set:function(x){const c=this._get("popup");c&&c!==x&&c.destroy();this._set("popup",x)}},{key:"size",get:function(){return[this.width,this.height]}}]);return w}(f);k.__decorate([F.property()],f.prototype,"container",null);k.__decorate([F.property({readOnly:!0})],
f.prototype,"focused",null);k.__decorate([F.property({readOnly:!0})],f.prototype,"height",void 0);k.__decorate([F.property({type:l})],f.prototype,"popup",null);k.__decorate([F.property({type:a})],f.prototype,"overlay",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"position",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"resizing",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"root",void 0);k.__decorate([F.property({value:null,readOnly:!0})],f.prototype,
"size",null);k.__decorate([F.property({readOnly:!0})],f.prototype,"surface",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"suspended",void 0);k.__decorate([F.property()],f.prototype,"ui",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"userContent",void 0);k.__decorate([F.property({readOnly:!0})],f.prototype,"width",void 0);k.__decorate([F.property()],f.prototype,"widthBreakpoint",void 0);return f=k.__decorate([b.subclass("esri.views.DOMContainer")],f)};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),function(m,q,k,h,t,A,B,z,F,u,g){k=function(b){function a(){var d=
b.apply(this,arguments)||this;d.items=new h;d._watchUpdatingTracking=new F.WatchUpdatingTracking;d._callbacks=new Map;d._projector=g.createProjector();d._hiddenProjector=g.createProjector();return d}m._inheritsLoose(a,b);var l=a.prototype;l.initialize=function(){const d=document.createElement("div");d.className="esri-overlay-surface";this._set("surface",d);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");d.appendChild(this._hiddenSurface);
this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const f of n.added){const v=()=>f.render();this._callbacks.set(f,v);this._projector.append(this.surface,v)}for(const f of n.removed)n=this._projector.detach(this._callbacks.get(f)),this.surface.removeChild(n.domNode),this._callbacks.delete(f)})};l.addItem=function(d){this.items.add(d)};l.removeItem=function(d){this.items.remove(d)};l.destroy=function(){this.items.removeAll();this._callbacks.forEach(d=>this._projector.detach(d));
this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};l.render=function(){this._projector.renderNow()};l.computeBoundingRect=function(d){const n=this._hiddenSurface,f=this._hiddenProjector;let v;const w=()=>v=d.render();f.append(n,w);f.renderNow();const D={left:0,top:0,right:0,bottom:0};if(v&&v.domNode){const x=v.domNode.getBoundingClientRect();D.left=x.left;D.top=x.top;D.right=x.right;D.bottom=x.bottom}for(f.detach(w);n.firstChild;)n.removeChild(n.firstChild);return D};l.overlaps=
function(d,n){d=this.computeBoundingRect(d);n=this.computeBoundingRect(n);return Math.max(d.left,n.left)<=Math.min(d.right,n.right)&&Math.max(d.top,n.top)<=Math.min(d.bottom,n.bottom)};l.prepare=function(){var d=m._asyncToGenerator(function*(){yield document.fonts.load(this._fontString()).catch(()=>{})});return function(){return d.apply(this,arguments)}}();l.renderCanvas=function(d){if(this.items.some(f=>f.visible)){var n=d.getContext("2d");n.save();n.font=this._fontString();this.items.forEach(f=>
{n.save();f.renderCanvas(n);n.restore()});n.restore()}};l._fontString=function(){return`10px ${getComputedStyle(this.surface).fontFamily}`};m._createClass(a,[{key:"needsRender",get:function(){return 0<this.items.length}},{key:"updating",get:function(){return this._watchUpdatingTracking?.updating??!1}},{key:"hasVisibleItems",get:function(){return this.items.some(d=>d.visible)}}]);return a}(k);q.__decorate([t.property({readOnly:!0})],k.prototype,"surface",void 0);q.__decorate([t.property({readOnly:!0})],
k.prototype,"items",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"needsRender",null);q.__decorate([t.property({readOnly:!0})],k.prototype,"_watchUpdatingTracking",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"updating",null);return k=q.__decorate([z.subclass("esri.views.overlay.ViewOverlay")],k)})},"esri/widgets/Popup":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/resources ./Feature/support/FeatureContentMixin ./Popup/actionUtils ./Popup/css ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../support/themeUtils ../intl/substitute".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L,O,K,U,T,M){function P(y,E){return void 0===E?`${"esri-popup"}__${y}`:`${"esri-popup"}__${y}-${E}`}const V={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},H={closeButton:!0,featureNavigation:!0};h=function(y){function E(r,G){var J=y.call(this,r,G)||this;J._blurClose=!1;J._blurContainer=!1;J._containerNode=null;J._mainContainerNode=null;J._featureMenuNode=null;J._actionsMenuNode=null;J._focusClose=!1;J._focusContainer=!1;J._focusDockButton=
!1;J._focusFeatureMenuButton=!1;J._focusActionsMenuButton=!1;J._focusFirstFeature=!1;J._focusFirstAction=!1;J._handles=new B;J._pointerOffsetInPx=16;J._spinner=null;J._feature=null;J._featureMenuIntersectionObserverNode=null;J._featureMenuViewportNode=null;J._rootFlowItemNode=null;J._featureMenuIntersectionObserverCallback=([N])=>{N?.isIntersecting&&null!=J.viewModel.featurePage&&J.viewModel.featurePage++};J._featureMenuIntersectionObserver=new IntersectionObserver(J._featureMenuIntersectionObserverCallback,
{root:window.document});J._displaySpinnerThrottled=g.throttle(()=>J._displaySpinner(),0);J._exitRelatedRecordsActions=new WeakMap;J._featureSelectionActions=new WeakMap;J._flowItems=new t;J.alignment="auto";J.collapsed=!1;J.collapseEnabled=!0;J.dockEnabled=!1;J.featureMenuOpen=!1;J.headingLevel=2;J.maxInlineActions=3;J.messages=null;J.messagesCommon=null;J.spinnerEnabled=!0;J.viewModel=new e;J.visibleElements={...H};J._handleOpenRelatedFeature=N=>{J._openRelatedFeature(N)};J._addSelectedFeatureIndexHandle();
J.addHandles([u.watch(()=>J.viewModel?.screenLocation,()=>J._positionContainer()),u.watch(()=>[J.viewModel?.active,J.dockEnabled],()=>J._toggleScreenLocationEnabled()),u.watch(()=>J.viewModel?.screenLocation,(N,R)=>{!!N!==!!R&&J.reposition()}),u.watch(()=>[J.viewModel?.view?.padding,J.viewModel?.view?.size,J.viewModel?.active,J.viewModel?.location,J.alignment],()=>J.reposition()),u.watch(()=>J.spinnerEnabled,N=>J._spinnerEnabledChange(N)),u.watch(()=>J.viewModel?.view?.size,(N,R)=>J._updateDockEnabledForViewSize(N,
R)),u.watch(()=>J.viewModel?.view,(N,R)=>J._viewChange(N,R)),u.watch(()=>J.viewModel?.view?.ready,(N,R)=>J._viewReadyChange(N??!1,R??!1)),u.watch(()=>[J.viewModel?.waitingForResult,J.viewModel?.location],()=>{J._hideSpinner();J._displaySpinnerThrottled()}),u.watch(()=>J.selectedFeatureWidget,()=>J._destroyFlowItemWidgets()),u.watch(()=>[J.selectedFeatureWidget?.viewModel?.title,J.selectedFeatureWidget?.viewModel?.state],()=>J._setTitleFromFeatureWidget()),u.watch(()=>[J.selectedFeatureWidget?.viewModel?.content,
J.selectedFeatureWidget?.viewModel?.state],()=>J._setContentFromFeatureWidget()),u.when(()=>!J.collapsed,()=>{"xsmall"===J.viewModel?.view?.widthBreakpoint&&J.viewModel.active&&J.collapseEnabled&&J.viewModel.centerAtLocation()}),u.on(()=>J.viewModel?.allActions,"change",()=>J._watchActions()),u.watch(()=>J.viewModel?.allActions,()=>J._watchActions(),u.initial),u.watch(()=>J.viewModel?.featureViewModels,()=>J._featureMenuViewportScrollTop()),u.on(()=>J._flowItems,"change",()=>{J.notifyChange("_activeFlowItemWidget");
J.scheduleRender()}),u.watch(()=>[J._activeFlowItemWidget?.viewModel?.state,J._activeFlowItemWidget?.viewModel?.title],()=>J.scheduleRender())]);return J}q._inheritsLoose(E,y);var I=E.prototype;I.loadDependencies=function(){return Promise.all([new Promise((r,G)=>m(["../chunks/calcite-flow"],r,G)),new Promise((r,G)=>m(["../chunks/calcite-flow-item"],r,G)),new Promise((r,G)=>m(["../chunks/calcite-action"],r,G)),new Promise((r,G)=>m(["../chunks/calcite-tooltip"],r,G)),new Promise((r,G)=>m(["../chunks/calcite-icon"],
r,G))])};I.destroy=function(){this._destroyFlowItemWidgets();this._destroySelectedFeatureWidget();this._destroySpinner();this._handles?.destroy();this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver?.disconnect()};I.castVisibleElements=function(r){return{...H,...r}};I.blur=function(){const {active:r}=this.viewModel;r||z.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=
!0;this.scheduleRender()};I.clear=function(){return this.viewModel.clear()};I.close=function(){this.visible=!1};I.fetchFeatures=function(r,G){return this.viewModel.fetchFeatures(r,G)};I.focus=function(){const {active:r}=this.viewModel;r||z.getLogger(this.declaredClass).warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};I.next=function(){return this.viewModel.next()};I.open=function(r){this._handles.remove("selected-index");
const G={collapsed:r?!!r.collapsed:!1,actionsMenuOpen:r?!!r.actionsMenuOpen:!1,featureMenuOpen:r?!!r.featureMenuOpen:!1};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(G.collapsed=!0);this.set(G);this.viewModel.open(r);this._shouldFocus(r);this._addSelectedFeatureIndexHandle()};I.previous=function(){return this.viewModel.previous()};I.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};I.triggerAction=function(r){return this.viewModel.triggerAction(r)};
I.render=function(){const {actionsMenuOpen:r,dockEnabled:G,featureMenuVisible:J,dividedActions:N,currentAlignment:R,currentDockPosition:W}=this,{active:da}=this.viewModel,{menuActions:ea}=N,fa=this.selectedFeature?.layer?.title,Q=this.selectedFeature?.layer?.id;return K.tsx("div",{class:this.classes(c.CSS.base,{[c.CSS.alignTopCenter]:"top-center"===R,[c.CSS.alignBottomCenter]:"bottom-center"===R,[c.CSS.alignTopLeft]:"top-left"===R,[c.CSS.alignBottomLeft]:"bottom-left"===R,[c.CSS.alignTopRight]:"top-right"===
R,[c.CSS.alignBottomRight]:"bottom-right"===R,[c.CSS.isDocked]:da&&G,[c.CSS.shadow]:da&&!G,[c.CSS.isDockedTopLeft]:"top-left"===W,[c.CSS.isDockedTopCenter]:"top-center"===W,[c.CSS.isDockedTopRight]:"top-right"===W,[c.CSS.isDockedBottomLeft]:"bottom-left"===W,[c.CSS.isDockedBottomCenter]:"bottom-center"===W,[c.CSS.isDockedBottomRight]:"bottom-right"===W,[c.CSS.isFeatureMenuOpen]:J,[c.CSS.isActionsMenuOpen]:da&&1<ea.length&&r}),role:"presentation","data-layer-title":fa,"data-layer-id":Q,bind:this,afterCreate:this._positionContainer,
afterUpdate:this._positionContainer},da?[this.renderMainContainer(),this.renderPointer()]:null)};I.renderLoadingIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes(c.CSS.icon,c.CSS.iconLoading,c.CSS.rotating)})};I.renderNavigationLoading=function(){const {messagesCommon:r}=this;return this.viewModel.pendingPromisesCount?K.tsx("div",{key:P("loading-container"),role:"presentation",class:c.CSS.loadingContainer,"aria-label":r.loading,title:r.loading},this.renderLoadingIcon()):
null};I.renderPreviousIcon=function(){const r=U.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes(c.CSS.icon,{[c.CSS.iconRightTriangleArrow]:r,[c.CSS.paginationPreviousIconRTL]:r,[c.CSS.iconLeftTriangleArrow]:!r,[c.CSS.paginationPreviousIconLTR]:!r})})};I.renderPreviousButton=function(){const {messages:r}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(c.CSS.button,c.CSS.paginationPrevious),
"aria-label":r.previous,title:r.previous},this.renderPreviousIcon())};I.renderNextIcon=function(){const r=U.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes(c.CSS.icon,{[c.CSS.iconLeftTriangleArrow]:r,[c.CSS.paginationNextIconRTL]:r,[c.CSS.iconRightTriangleArrow]:!r,[c.CSS.paginationNextIconLTR]:!r})})};I.renderNextButton=function(){const {messages:r}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(c.CSS.button,
c.CSS.paginationNext),"aria-label":r.next,title:r.next},this.renderNextIcon())};I.renderFeatureMenuButton=function(){const {featureMenuOpen:r,featureMenuId:G,messagesCommon:J}=this,{featureCount:N,selectedFeatureIndex:R}=this.viewModel;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(c.CSS.button,c.CSS.featureMenuButton),
"aria-haspopup":"true","aria-controls":G,"aria-expanded":r.toString(),"aria-label":J.menu,title:J.menu},this._getPageText(N,R))};I.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]};I.renderDockIcon=function(){const {dockEnabled:r}=this,G=this._wouldDockTo();return K.tsx("span",{"aria-hidden":"true",class:this.classes({[c.CSS.iconUndock]:r,[c.CSS.iconDock]:!r,
[c.CSS.iconDockToRight]:!r&&("top-right"===G||"bottom-right"===G),[c.CSS.iconDockToLeft]:!r&&("top-left"===G||"bottom-left"===G),[c.CSS.iconDockToTop]:!r&&"top-center"===G,[c.CSS.iconDockToBottom]:!r&&"bottom-center"===G},c.CSS.icon)})};I.renderDockButton=function(){const {dockEnabled:r,messages:G}=this,J=r?G.undock:G.dock;return"xsmall"!==this.viewModel?.view?.widthBreakpoint&&this.dockOptions?.buttonEnabled?K.tsx("div",{role:"button","aria-label":J,title:J,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,
onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(c.CSS.button,c.CSS.buttonDock)},this.renderDockIcon()):null};I.renderTitle=function(){const {title:r}=this.viewModel,{titleId:G,collapsible:J,contentCollapsed:N,messagesCommon:R}=this;var W={[c.CSS.headerContainerButton]:J};const da=K.tsx(p.Heading,{level:this.headingLevel,class:c.CSS.headerTitle,innerHTML:r??""});W=J?K.tsx("button",{key:`${r}--collapsible`,id:G,title:N?
R.expand:R.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(c.CSS.headerContainer,W),"aria-expanded":N?"false":"true",onclick:this._toggleCollapsed,type:"button"},da,K.tsx("calcite-icon",{class:c.CSS.collapseIcon,key:"collapse-icon",icon:N?"chevron-down":"chevron-up",scale:"m"})):K.tsx("div",{key:r??"title",id:G,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(c.CSS.headerContainer,W)},da);return r?W:null};I.renderCloseIcon=
function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes(c.CSS.icon,c.CSS.iconClose)})};I.renderCloseButton=function(){const {visibleElements:r,messagesCommon:G}=this;return r.closeButton?K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:c.CSS.button,"aria-label":G.close,title:G.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};I.renderHeader=function(){return K.tsx("header",
{class:c.CSS.header},this.renderTitle(),K.tsx("div",{class:c.CSS.headerButtons},this.renderDockButton(),this.renderCloseButton()))};I.renderContentContainer=function(){const {contentId:r,hasContent:G,contentCollapsed:J,_flowItems:N}=this,{content:R}=this.viewModel,W=N.toArray(),da={[c.CSS.contentHasFlows]:!!W.length};return G&&!J?K.tsx("div",{key:R??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:r,class:this.classes(c.CSS.content,da)},K.tsx("calcite-flow",{bind:this},K.tsx("calcite-flow-item",
{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:U.storeNode,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),W.map(ea=>this.renderFlowItem(ea))),W.map(ea=>this.renderFlowItemTooltips(ea))):null};I.renderFlowItem=function(r){const {messages:G}=this,J=T.isDarkTheme(),N="graphic"in r&&!r.isTable;return K.tsx("calcite-flow-item",{bind:this,class:this.classes({[c.CSS.calciteThemeDark]:!J,[c.CSS.calciteThemeLight]:J}),heading:r.title??"",description:this._getFlowItemDescription(r),
onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${r.viewModel.uid}`},K.tsx("calcite-action",{class:c.CSS.actionExit,icon:"move-up",label:G?.exitRelatedRecords,text:G?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:R=>this._storeExitRelatedRecordsAction(r,R),onclick:this._destroyFlowItemWidgets}),N?K.tsx("calcite-action",{class:c.CSS.actionSelectFeature,icon:"zoom-to-object",label:G?.selectFeature,text:G?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:R=>
this._storeFeatureSelectionAction(r,R),onclick:()=>this._handleOpenRelatedFeature(r)}):null,K.tsx("div",{class:this.classes(c.CSS.contentFlowItem,{[c.CSS.calciteThemeDark]:J,[c.CSS.calciteThemeLight]:!J})},r.render()))};I.renderFlowItemTooltips=function(r){const {messages:G,_exitRelatedRecordsActions:J,_featureSelectionActions:N}=this,R=T.isDarkTheme(),W=N.get(r);return[K.tsx("calcite-tooltip",{class:this.classes({[c.CSS.calciteThemeDark]:!R,[c.CSS.calciteThemeLight]:R}),key:`exit-related-records-tooltip-${r.viewModel.uid}`,
label:G?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:J.get(r),placement:"top"},G?.exitRelatedRecords),W?K.tsx("calcite-tooltip",{class:this.classes({[c.CSS.calciteThemeDark]:!R,[c.CSS.calciteThemeLight]:R}),key:`select-related-record-tooltip-${r.viewModel.uid}`,label:G?.selectFeature,overlayPositioning:"fixed",referenceElement:W,placement:"top"},G?.selectFeature):null]};I.renderActionsMenuButton=function(){const {actionsMenuId:r,actionsMenuButtonId:G,actionsMenuOpen:J,dividedActions:N,
messagesCommon:R}=this,W=J?R.close:R.open,{menuActions:da}=N;return da.length?K.tsx("div",{key:P("actions-menu-button"),class:this.classes(c.CSS.button,c.CSS.actionsMenuButton),role:"button",id:G,"aria-haspopup":"true","aria-controls":J?r:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":W,title:W},K.tsx("span",{"aria-hidden":"true",class:c.CSS.iconActionsMenu})):
null};I.renderMenuActions=function(){const {actionsMenuId:r,actionsMenuButtonId:G,actionsMenuOpen:J,dividedActions:N}=this,{menuActions:R}=N;return R.length&&J?K.tsx("ul",{id:r,role:"menu","aria-labelledby":G,key:P("actions"),class:c.CSS.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},R.toArray().map(W=>this.renderAction({action:W,type:"menu-item"}))):null};I.renderInlineActions=function(){const {inlineActions:r}=
this.dividedActions;return r.length?r.toArray().map(G=>this.renderAction({action:G,type:"inline"})):[]};I.renderInlineActionsContainer=function(){const {inlineActions:r,menuActions:G}=this.dividedActions,J=!!r.length,N=!!G.length;return J||N?K.tsx("div",{key:"inline-actions-container","data-inline-actions":J.toString(),"data-menu-actions":N.toString(),class:c.CSS.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};I.renderNavigation=function(){return this.featureNavigationVisible?
K.tsx("section",{key:P("navigation"),class:this.classes(c.CSS.navigation)},this.renderNavigationButtons()):null};I.renderFooter=function(){const {featureNavigationVisible:r,dividedActions:G}=this,{inlineActions:J,menuActions:N}=G,R=!!J.length,W={[c.CSS.footerHasPagination]:r,[c.CSS.footerHasActions]:R,[c.CSS.footerHasActionsMenu]:!!N.length};return r||R?K.tsx("div",{key:P("feature-buttons"),class:this.classes(c.CSS.footer,W)},this.renderInlineActionsContainer(),this.renderNavigation()):null};I.renderFeatureMenuContainer=
function(){var {messages:r}=this;const {featureViewModels:G,isLoadingFeature:J}=this.viewModel;r=M.substitute(r.selectedFeatures,{total:G.length});return K.tsx("section",{key:P("menu"),class:c.CSS.featureMenu},K.tsx("strong",{class:c.CSS.featureMenuHeader},r),K.tsx("nav",{bind:this,class:c.CSS.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:U.storeNode},this.renderFeatureMenu(),K.tsx("div",{class:c.CSS.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
J?K.tsx("div",{class:c.CSS.featureMenuLoader},this.renderLoadingIcon()):null))};I.renderPointer=function(){return this.dockEnabled?null:K.tsx("div",{key:P("pointer"),class:c.CSS.pointer,role:"presentation"},K.tsx("div",{class:this.classes(c.CSS.pointerDirection,c.CSS.shadow)}))};I.renderMainContainer=function(){const {dockEnabled:r,currentAlignment:G,currentDockPosition:J,titleId:N,contentId:R,collapsible:W,hasContent:da,contentCollapsed:ea,visibleElements:fa}=this,{title:Q}=this.viewModel,Y="bottom-left"===
G||"bottom-center"===G||"bottom-right"===G||"top-left"===J||"top-center"===J||"top-right"===J,ba="top-left"===G||"top-center"===G||"top-right"===G||"bottom-left"===J||"bottom-center"===J||"bottom-right"===J;return K.tsx("div",{class:this.classes(c.CSS.main,c.CSS.widget,{[c.CSS.shadow]:r,[c.CSS.isCollapsible]:W,[c.CSS.isCollapsed]:ea}),tabIndex:fa.closeButton?void 0:-1,role:"dialog","aria-labelledby":Q?N:"","aria-describedby":da&&!ea?R:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
afterUpdate:this._mainContainerNodeUpdated},Y?this.renderFooter():null,Y?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),ba?this.renderFooter():null,ba?this.renderFeatureMenuContainer():null)};I.renderContent=function(){const r=this.viewModel?.content;return r?"string"===typeof r?K.tsx("div",{class:w.CSS.contentNode,key:r,innerHTML:r}):this.renderNodeContent(r):null};I.renderActionText=function(r){return K.tsx("span",{key:"text",class:c.CSS.actionText},r)};
I.renderActionIcon=function(r){const G=this._getActionClass(r),J=this._getActionImage(r),N={[c.CSS.iconLoading]:r.active,[c.CSS.rotating]:r.active,[c.CSS.icon]:!!G,[c.CSS.actionImage]:!r.active&&!!J};G&&(N[G]=!r.active);return K.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes(c.CSS.icon,N),styles:this._getIconStyles(J)})};I.renderAction=function(r){const {action:G,type:J}=r;r=this._getActionTitle(G);const N={[c.CSS.action]:"toggle"!==G.type,[c.CSS.actionToggle]:"toggle"===G.type,[c.CSS.actionToggleOn]:"toggle"===
G.type&&G.value,[c.CSS.buttonDisabled]:G.disabled},R=[this.renderActionIcon(G),this.renderActionText(r)];r="menu-item"===J?K.tsx("li",{key:G.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(c.CSS.button,N),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":G.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},R):K.tsx("div",{key:G.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(c.CSS.button,N),onkeyup:this._handleActionMenuItemKeyup,
bind:this,"data-action-uid":G.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},R);return G.visible?r:null};I.renderFeatureMenuItem=function(r,G){const {messages:J,messagesCommon:N}=this,{selectedFeatureIndex:R,selectedFeatureViewModel:W}=this.viewModel;var da=r===W;const ea={[c.CSS.featureMenuSelected]:da};da=da?K.tsx("span",{key:P(`feature-menu-selected-feature-${R}`),title:J.selectedFeature,"aria-label":J.selectedFeature,class:c.CSS.iconCheckMark}):null;r=K.tsx("span",{innerHTML:r.title||
N.untitled});return K.tsx("li",{role:"menuitem",tabIndex:-1,key:P(`feature-menu-feature-${R}`),class:this.classes(ea,c.CSS.featureMenuItem),bind:this,"data-feature-index":G,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},K.tsx("span",{class:c.CSS.featureMenuTitle},r,da))};I.renderFeatureMenu=function(){const {featureMenuId:r}=
this,{featureViewModels:G}=this.viewModel;return 1<G.length?K.tsx("ol",{class:c.CSS.featureMenuList,id:r,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},G.filter(J=>!!J.graphic).map((J,N)=>this.renderFeatureMenuItem(J,N))):null};I._storeFeatureSelectionAction=function(r,G){this._featureSelectionActions.set(r,G);this.scheduleRender()};I._storeExitRelatedRecordsAction=function(r,G){this._exitRelatedRecordsActions.set(r,
G);this.scheduleRender()};I._getFlowItemDescription=function(r){return"featureCountDescription"in r?r.featureCountDescription:r.viewModel.description??""};I._openRelatedFeature=function(){var r=q._asyncToGenerator(function*(G){yield G.viewModel.updateGeometry();G=G.graphic;var J=G?.geometry;F.isNone(J)||F.isNone(G)||(this._destroyFlowItemWidgets(),yield this.viewModel.zoomTo({target:J}),J=x.getPointFromGeometry(J),this.open({features:[G],location:F.isSome(J)?J:void 0}))});return function(G){return r.apply(this,
arguments)}}();I._destroyFlowItemWidgets=function(){this._flowItems.removeAll().forEach(r=>{"showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1);r.viewModel=null;r.destroy()})};I._handleBackClick=function(){const r=this._flowItems.pop();r&&(this._exitRelatedRecordsActions.delete(r),this._featureSelectionActions.delete(r),"showAllEnabled"in r.viewModel&&(r.viewModel.showAllEnabled=!1),r&&(r.viewModel=null,r.destroy()))};I._getActionTitle=function(r){const {messages:G,selectedFeature:J,messagesCommon:N}=
this,{id:R}=r,W=J?.attributes,da=r.title??"";return(r="zoom-to-feature"===R?M.substitute(da,{messages:G}):"remove-selected-feature"===R?M.substitute(da,{messages:N}):"zoom-to-clustered-features"===R?M.substitute(da,{messages:G}):"browse-clustered-features"===R?M.substitute(da,{messages:G}):r.title)&&W?M.substitute(r,W):r??""};I._getActionClass=function(r){var {selectedFeature:G}=this;G=G?.attributes;const {className:J,image:N}=r;return(r=N||J?J:c.CSS.iconDefaultAction)&&G?M.substitute(r,G):r??""};
I._getActionImage=function(r){var {selectedFeature:G}=this;G=G?.attributes;({image:r}=r);return r&&G?M.substitute(r,G):r??""};I._createFeatureUpdatedAnimation=function(){return U.cssTransition("enter",c.CSS.hasFeatureUpdated)};I._getInlineActionCount=function(){const {maxInlineActions:r,featureNavigationVisible:G}=this;if("number"!==typeof r)return null;const J=Math.round(r);return Math.max(G?J-1:J,0)};I._watchActions=function(){const {allActions:r}=this.viewModel;this.notifyChange("dividedActions");
this._handles.remove("actions");r&&r.forEach(G=>{this._handles.add(u.watch(()=>[G.uid,G.active,G.className,G.disabled,G.id,G.title,G.image,G.visible],()=>this.scheduleRender()),"actions")})};I._divideActions=function(){var {allActions:r}=this.viewModel;r=r.filter(R=>R.visible);const G=this._getInlineActionCount(),J=null===G,N=0===G;return{inlineActions:J?r.slice(0):N?new t:r.slice(0,G),menuActions:J?new t:N?r.slice(0):r.slice(G)}};I._featureMenuOpenChanged=function(r){r?this._focusFirstFeature=!0:
this._focusFeatureMenuButton=!0};I._actionsMenuOpenChanged=function(r){r?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};I._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:r,messagesCommon:G}=this;r&&(this.viewModel.title="error"===r.viewModel?.state?G.errorMessage:r.viewModel?.title||"")};I._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:r}=this;r&&(this.viewModel.content=r)};I._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&
this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};I._featureMenuIntersectionObserverCreated=function(r){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(r);this._featureMenuIntersectionObserverNode=r};I._handleFeatureMenuKeyup=function(r){"Escape"===A.eventKey(r)&&(r.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};I._handleActionMenuKeyup=function(r){"Escape"===A.eventKey(r)&&
(r.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};I._setActiveFeature=function(r){const {viewModel:G}=this;G.activeFeature=G.features[r.currentTarget["data-feature-index"]]||null};I._removeActiveFeature=function(){this.viewModel.activeFeature=null};I._handleFeatureMenuItemKeyup=function(r){const G=A.eventKey(r);var {_featureMenuNode:J}=this;const N=r.currentTarget["data-feature-index"];if(J){J=J.querySelectorAll("li");var R=J.length;"ArrowUp"===G?
(r.stopPropagation(),J[(N-1+R)%R].focus()):"ArrowDown"===G?(r.stopPropagation(),J[(N+1+R)%R].focus()):"Home"===G?(r.stopPropagation(),J[0].focus()):"End"===G&&(r.stopPropagation(),J[J.length-1].focus())}};I._handleActionMenuItemKeyup=function(r){const G=A.eventKey(r);var {_actionsMenuNode:J}=this;const N=r.currentTarget.dataset.actionUid;var {menuActions:R}=this.dividedActions;R=R.findIndex(da=>da.uid===N);if(J){J=J.querySelectorAll("li");var W=J.length;"ArrowUp"===G?(r.stopPropagation(),J[(R-1+W)%
W].focus()):"ArrowDown"===G?(r.stopPropagation(),J[(R+1+W)%W].focus()):"Home"===G?(r.stopPropagation(),J[0].focus()):"End"===G&&(r.stopPropagation(),J[J.length-1].focus())}};I._handleMainKeyup=function(r){const G=A.eventKey(r);"ArrowLeft"===G&&(r.stopPropagation(),this.previous());"ArrowRight"===G&&(r.stopPropagation(),this.next())};I._spinnerEnabledChange=function(r){this._destroySpinner();r&&(r=this.get("viewModel.view"),this._createSpinner(r))};I._hideSpinner=function(){const {_spinner:r}=this;
r&&(r.location=null,r.hide())};I._displaySpinner=function(){const {_spinner:r}=this;if(r){var {location:G,waitingForResult:J}=this.viewModel;J&&G?r.show({location:G}):r.hide()}};I._getIconStyles=function(r){return{"background-image":r?`url(${r})`:""}};I._shouldFocus=function(){var r=q._asyncToGenerator(function*(G){G?.shouldFocus&&(yield u.whenOnce(()=>!0===this.viewModel?.active),this.focus())});return function(G){return r.apply(this,arguments)}}();I._addSelectedFeatureIndexHandle=function(){const r=
u.watch(()=>this.viewModel?.selectedFeatureIndex,(G,J)=>this._selectedFeatureIndexUpdated(G,J));this._handles.add(r,"selected-index")};I._selectedFeatureIndexUpdated=function(r,G){const {featureCount:J}=this;J&&r!==G&&-1!==r&&(this._destroyFlowItemWidgets(),this.featureMenuOpen=this.actionsMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))};I._destroySelectedFeatureWidget=function(){const {_feature:r}=
this;r&&(r.viewModel=null,r&&!r.destroyed&&r.destroy());this._feature=null};I._isScreenLocationWithinView=function(r,G){return-1<r.x&&-1<r.y&&r.x<=G.width&&r.y<=G.height};I._isOutsideView=function(r){const {popupHeight:G,popupWidth:J,screenLocation:N,side:R,view:W}=r;if(isNaN(J)||isNaN(G)||!W||!N)return!1;r=W.padding;return"right"===R&&N.x+J/2>W.width-r.right||"left"===R&&N.x-J/2<r.left||"top"===R&&N.y-G<r.top||"bottom"===R&&N.y+G>W.height-r.bottom?!0:!1};I._calculateAutoAlignment=function(r){if("auto"!==
r)return r;const {_pointerOffsetInPx:G,_containerNode:J,_mainContainerNode:N,viewModel:R}=this,{screenLocation:W,view:da}=R;if(F.isNone(W)||!da||!J)return"top-center";if(!this._isScreenLocationWithinView(W,da))return this._get("currentAlignment")||"top-center";var ea=(r=N?window.getComputedStyle(N,null):null)?parseInt(r.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,fa=r?parseInt(r.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:Q,width:Y}=J.getBoundingClientRect();
r=Y+G;const ba=Math.max(Q,ea,fa)+G;ea=this._isOutsideView({popupHeight:ba,popupWidth:r,screenLocation:W,side:"right",view:da});fa=this._isOutsideView({popupHeight:ba,popupWidth:r,screenLocation:W,side:"left",view:da});const S=this._isOutsideView({popupHeight:ba,popupWidth:r,screenLocation:W,side:"top",view:da});r=this._isOutsideView({popupHeight:ba,popupWidth:r,screenLocation:W,side:"bottom",view:da});return fa?S?"bottom-right":"top-right":ea?S?"bottom-left":"top-left":S?r?"top-center":"bottom-center":
"top-center"};I._callCurrentAlignment=function(r){return"function"===typeof r?r.call(this):r};I._getCurrentAlignment=function(){const {alignment:r,dockEnabled:G}=this;return G||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(r)))};I._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};I._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};I._calculatePositionResult=
function(r){const G=["left","right"];U.isRTL(this.container)&&G.reverse();return r.replace(/leading/gi,G[0]).replace(/trailing/gi,G[1])};I._callDockPosition=function(r){return"function"===typeof r?r.call(this):r};I._getDockPosition=function(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))};I._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};I._wouldDockTo=function(){return this.dockEnabled?
null:this._getDockPosition()};I._calculateAutoDockPosition=function(r){if("auto"!==r)return r;var G=this.viewModel?.view;r=U.isRTL(this.container)?"top-left":"top-right";if(!G)return r;var J=G.padding||{left:0,right:0,top:0,bottom:0};J=G.width-J.left-J.right;({breakpoints:G}=G);return G&&J<=G.xsmall?"bottom-center":r};I._positionContainer=function(r=this._containerNode){r&&(this._containerNode=r);if(this._containerNode){({screenLocation:r}=this.viewModel);var {width:G}=this._containerNode.getBoundingClientRect();
(r=this._calculatePositionStyle(r,G))&&Object.assign(this._containerNode.style,r)}};I._calculateFullWidth=function(r){const {currentAlignment:G,_pointerOffsetInPx:J}=this;return"top-left"===G||"bottom-left"===G||"top-right"===G||"bottom-right"===G?r+J:r};I._calculateAlignmentPosition=function(r,G,J,N){const {currentAlignment:R,_pointerOffsetInPx:W}=this;if(J){var {padding:da}=J;N/=2;var ea=J.height-G;J=J.width-r;if("bottom-center"===R)return{top:G+W-da.top,left:r-N-da.left};if("top-left"===R)return{bottom:ea+
W-da.bottom,right:J+W-da.right};if("bottom-left"===R)return{top:G+W-da.top,right:J+W-da.right};if("top-right"===R)return{bottom:ea+W-da.bottom,left:r+W-da.left};if("bottom-right"===R)return{top:G+W-da.top,left:r+W-da.left};if("top-center"===R)return{bottom:ea+W-da.bottom,left:r-N-da.left}}};I._calculatePositionStyle=function(r,G){const {dockEnabled:J,view:N}=this;if(N){if(J)return{left:"",top:"",right:"",bottom:""};if(!F.isNone(r)&&G&&(G=this._calculateFullWidth(G),r=this._calculateAlignmentPosition(r.x,
r.y,N,G)))return{top:void 0!==r.top?`${r.top}px`:"auto",left:void 0!==r.left?`${r.left}px`:"auto",bottom:void 0!==r.bottom?`${r.bottom}px`:"auto",right:void 0!==r.right?`${r.right}px`:"auto"}}};I._viewChange=function(r,G){r&&G&&(this.close(),this.clear())};I._viewReadyChange=function(r,G){r?(r=this.get("viewModel.view"),this._wireUpView(r)):G&&(this.close(),this.clear())};I._wireUpView=function(r){this._destroySpinner();if(r){var {spinnerEnabled:G}=this;G&&this._createSpinner(r);this._setDockEnabledForViewSize(this.dockOptions)}};
I._dockingThresholdCrossed=function(r,G,J){const [N,R]=r,[W,da]=G,{width:ea=0,height:fa=0}=J??{};return N<=ea&&W>ea||N>ea&&W<=ea||R<=fa&&da>fa||R>fa&&da<=fa};I._updateDockEnabledForViewSize=function(r,G){if(r&&G){var J=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},N=J.left+J.right,R=J.top+J.bottom;J=[];var W=[];J[0]=r[0]-N;J[1]=r[1]-R;W[0]=G[0]-N;W[1]=G[1]-R;({dockOptions:r}=this);this._dockingThresholdCrossed(J,W,r.breakpoint)&&this._setDockEnabledForViewSize(r);this._setCurrentDockPosition()}};
I._focusDockButtonNode=function(r){this._focusDockButton&&(this._focusDockButton=!1,r.focus())};I._closeButtonNodeUpdated=function(r){this._focusClose?(this._focusClose=!1,r.focus()):this._blurClose&&(this._blurClose=!1,r.blur())};I._mainContainerNodeUpdated=function(r){this._mainContainerNode=r;this._focusContainer?(this._focusContainer=!1,r.focus()):this._blurContainer&&(this._blurContainer=!1,r.blur())};I._featureMenuNodeUpdated=function(r){(this._featureMenuNode=r)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,r=r.querySelectorAll("li"),r.length&&r[0].focus())};I._actionsMenuNodeUpdated=function(r){(this._actionsMenuNode=r)&&this._focusFirstAction&&(this._focusFirstAction=!1,r=r.querySelectorAll("li"),r.length&&r[0].focus())};I._focusFeatureMenuButtonNode=function(r){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,r.focus())};I._focusActionsMenuButtonNode=function(r){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,r.focus())};I._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};I._toggleScreenLocationEnabled=function(){const {dockEnabled:r,viewModel:G}=this;G&&(G.screenLocationEnabled=G.active&&!r)};I._shouldDockAtCurrentViewSize=function(r){r=r.breakpoint;var G=this.viewModel?.view?.ui;if(!G)return!1;const {width:J,height:N}=G;if(isNaN(J)||isNaN(N)||!r)return!1;G=r.hasOwnProperty("width")&&J<=(r.width??0);r=r.hasOwnProperty("height")&&N<=(r.height??0);return G||r};I._setDockEnabledForViewSize=function(r){r.breakpoint&&(this.dockEnabled=
this._shouldDockAtCurrentViewSize(r))};I._getPageText=function(r,G){return this.featureNavigationVisible?M.substitute(this.messages.pageText,{index:G+1,total:r}):null};I._destroySpinner=function(){const {_spinner:r,view:G}=this;r&&(G&&G.ui&&G.ui.remove(r,"popup-spinner"),r.destroy(),this._spinner=null)};I._createSpinner=function(r){r&&(this._spinner=new f({view:r}),r.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};I._toggleCollapsed=function(){this.collapsed=!this.collapsed};I._close=
function(){this.close();this.view&&this.view.focus()};I._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};I._toggleFeatureMenu=function(){const r=!this.featureMenuOpen;this._featureMenuOpenChanged(r);this.actionsMenuOpen=!1;this.featureMenuOpen=r};I._toggleActionsMenu=function(){const r=!this.actionsMenuOpen;this._actionsMenuOpenChanged(r);this.featureMenuOpen=!1;this.actionsMenuOpen=r};I._triggerAction=function(r){const G=r.currentTarget.dataset.actionUid;
var {allActions:J}=this.viewModel;r=J.findIndex(N=>N.uid===G);(J=J.getItemAt(r))&&"toggle"===J.type&&(J.value=!J.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(r)};I._selectFeature=function(r){r=r.currentTarget["data-feature-index"];isNaN(r)||(this.viewModel.selectedFeatureIndex=r);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};I._next=function(){this.next()};I._previous=function(){this.previous()};q._createClass(E,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},
{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){const {selectedFeatureWidget:r,viewModel:G}=this;if(!r)return!!G?.content;var J=r.viewModel;if(J?.waitingForContent||"error"===J?.state)return!0;J=J?.content;return Array.isArray(J)?!!J.length:
!!J}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&null!=this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},
{key:"_activeFlowItemWidget",get:function(){const {_flowItems:r}=this;return r.getItemAt(r.length-1)||null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(r){this.viewModel.actions=r}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(r){this._set("actionsMenuOpen",!!r)}},{key:"autoCloseEnabled",get:function(){return this.viewModel.autoCloseEnabled},set:function(r){this.viewModel.autoCloseEnabled=r}},{key:"autoOpenEnabled",
get:function(){return this.viewModel.autoOpenEnabled},set:function(r){this.viewModel.autoOpenEnabled=r}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(r){this.viewModel.defaultPopupTemplateEnabled=r}},{key:"content",get:function(){return this.viewModel.content},set:function(r){this.viewModel.content=r}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},
{key:"dockOptions",get:function(){return this._get("dockOptions")||V},set:function(r){var G={...V};const J=this.viewModel?.view?.breakpoints;var N={};J&&(N.width=J.xsmall,N.height=J.xsmall);r={...G,...r};G={...G.breakpoint,...N};({breakpoint:N}=r);"object"===typeof N?r.breakpoint={...G,...N}:N&&(r.breakpoint=G);this._set("dockOptions",r);this._setCurrentDockPosition();this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"features",get:function(){return this.viewModel.features},
set:function(r){this.viewModel.features=r}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(r){this.viewModel.goToOverride=r}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},set:function(r){this.viewModel.highlightEnabled=r}},{key:"location",get:function(){return this.viewModel.location},set:function(r){this.viewModel.location=r}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(r){this._overrideIfSome("label",
r)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(r){this.viewModel.promises=r}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},set:function(r){this.viewModel.selectedFeatureIndex=r}},{key:"selectedFeatureWidget",get:function(){const {_feature:r,visibleElements:G,headingLevel:J,_flowItems:N}=this,{selectedFeatureViewModel:R}=this.viewModel,W={...G,title:!1};
if(!R)return null;r?(r.viewModel=R,r.visibleElements=W):this._feature=new n({flowItems:N,headingLevel:J+1,viewModel:R,visibleElements:W});return this._feature}},{key:"title",get:function(){return this.viewModel.title},set:function(r){this.viewModel.title=r}},{key:"updateLocationEnabled",get:function(){return this.viewModel.updateLocationEnabled},set:function(r){this.viewModel.updateLocationEnabled=r}},{key:"view",get:function(){return this.viewModel.view},set:function(r){this.viewModel.view=r}},{key:"visible",
get:function(){return this.viewModel.visible},set:function(r){this.viewModel.visible=r}}]);return E}(D.FeatureContentMixin(v));k.__decorate([b.property({readOnly:!0})],h.prototype,"actionsMenuId",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"actionsMenuButtonId",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"featureMenuId",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"titleId",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"contentId",null);k.__decorate([b.property({readOnly:!0})],
h.prototype,"hasContent",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"featureNavigationVisible",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"collapsible",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"featureMenuVisible",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"contentCollapsed",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"dividedActions",null);k.__decorate([b.property({readOnly:!0,dependsOn:["_flowItems.length"]})],h.prototype,
"_activeFlowItemWidget",null);k.__decorate([b.property()],h.prototype,"actions",null);k.__decorate([b.property()],h.prototype,"actionsMenuOpen",null);k.__decorate([b.property()],h.prototype,"alignment",void 0);k.__decorate([b.property()],h.prototype,"autoCloseEnabled",null);k.__decorate([b.property()],h.prototype,"autoOpenEnabled",null);k.__decorate([b.property()],h.prototype,"defaultPopupTemplateEnabled",null);k.__decorate([b.property()],h.prototype,"content",null);k.__decorate([b.property()],h.prototype,
"collapsed",void 0);k.__decorate([b.property()],h.prototype,"collapseEnabled",void 0);k.__decorate([b.property({readOnly:!0})],h.prototype,"currentAlignment",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"currentDockPosition",null);k.__decorate([b.property()],h.prototype,"dockOptions",null);k.__decorate([b.property()],h.prototype,"dockEnabled",void 0);k.__decorate([b.property({readOnly:!0})],h.prototype,"featureCount",null);k.__decorate([b.property()],h.prototype,"featureMenuOpen",void 0);
k.__decorate([b.property()],h.prototype,"features",null);k.__decorate([b.property()],h.prototype,"goToOverride",null);k.__decorate([b.property()],h.prototype,"headingLevel",void 0);k.__decorate([b.property()],h.prototype,"highlightEnabled",null);k.__decorate([b.property()],h.prototype,"location",null);k.__decorate([b.property()],h.prototype,"label",null);k.__decorate([b.property()],h.prototype,"maxInlineActions",void 0);k.__decorate([b.property(),L.messageBundle("esri/widgets/Popup/t9n/Popup")],h.prototype,
"messages",void 0);k.__decorate([b.property(),L.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);k.__decorate([b.property()],h.prototype,"promises",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"selectedFeature",null);k.__decorate([b.property()],h.prototype,"selectedFeatureIndex",null);k.__decorate([b.property({readOnly:!0})],h.prototype,"selectedFeatureWidget",null);k.__decorate([b.property()],h.prototype,"spinnerEnabled",void 0);k.__decorate([b.property()],h.prototype,
"title",null);k.__decorate([b.property()],h.prototype,"updateLocationEnabled",null);k.__decorate([b.property()],h.prototype,"view",null);k.__decorate([b.property({type:e}),O.vmEvent(["triggerAction","trigger-action"])],h.prototype,"viewModel",void 0);k.__decorate([b.property()],h.prototype,"visible",null);k.__decorate([b.property()],h.prototype,"visibleElements",void 0);k.__decorate([a.cast("visibleElements")],h.prototype,"castVisibleElements",null);k.__decorate([C.accessibleHandler()],h.prototype,
"_close",null);k.__decorate([C.accessibleHandler()],h.prototype,"_toggleDockEnabled",null);k.__decorate([C.accessibleHandler()],h.prototype,"_toggleFeatureMenu",null);k.__decorate([C.accessibleHandler()],h.prototype,"_toggleActionsMenu",null);k.__decorate([C.accessibleHandler()],h.prototype,"_triggerAction",null);k.__decorate([C.accessibleHandler()],h.prototype,"_selectFeature",null);k.__decorate([C.accessibleHandler()],h.prototype,"_next",null);k.__decorate([C.accessibleHandler()],h.prototype,"_previous",
null);return h=k.__decorate([d.subclass("esri.widgets.Popup")],h)})},"esri/core/throttle":function(){define(["exports"],function(m){m.throttle=function(q,k,h,t){let A=null,B=1E3;"number"===typeof k?(B=k,t=h):(A=k??null,B=h);let z=0,F;const u=()=>{z=0;q.apply(t,F)};k=(...g)=>{A&&A.apply(t,g);F=g;B?z||(z=setTimeout(u,B)):u()};k.remove=()=>{z&&(clearTimeout(z),z=0)};k.forceUpdate=()=>{z&&(clearTimeout(z),u())};k.hasPendingUpdates=()=>!!z;return k};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p){var C;const L={title:!0,content:!0,lastEditedInfo:!0};h=C=function(O){function K(T,M){T=O.call(this,T,M)||this;T._contentWidgets=[];T.flowItems=null;T.headingLevel=2;T.messages=null;T.messagesCommon=null;T.messagesURIUtils=null;T.visibleElements={...L};T.viewModel=new f;return T}q._inheritsLoose(K,O);var U=K.prototype;U.initialize=function(){this.addHandles(t.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),t.initial))};
U.loadDependencies=function(){return new Promise((T,M)=>m(["../chunks/calcite-notice"],T,M))};U.destroy=function(){this._destroyContentWidgets()};U.castVisibleElements=function(T){return{...L,...T}};U.render=function(){var {state:T}=this.viewModel;T=e.tsx("div",{class:v.CSS.container,key:"container"},this.renderTitle(),"error"===T?this.renderError():"loading"===T?this.renderLoading():this.renderContentContainer());return e.tsx("div",{class:this.classes(v.CSS.base,v.CSS.esriWidget)},T)};U.setActiveMedia=
function(T,M){return this.viewModel.setActiveMedia(T,M)};U.nextMedia=function(T){return this.viewModel.nextMedia(T)};U.previousMedia=function(T){return this.viewModel.previousMedia(T)};U.renderError=function(){const {messagesCommon:T,messages:M,visibleElements:P}=this;return e.tsx("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},P.title?e.tsx("div",{key:"error-title",slot:"title"},T.errorMessage):null,e.tsx("div",{key:"error-message",slot:"message"},M.loadingError))};
U.renderLoading=function(){return e.tsx("div",{key:"loading-container",class:v.CSS.loadingSpinnerContainer},e.tsx("span",{class:this.classes(v.CSS.iconLoading,v.CSS.spinner)}))};U.renderContentContainer=function(){const {visibleElements:T}=this;return T.content?e.tsx("div",{class:v.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};U.renderTitle=function(){const {visibleElements:T,title:M}=this;return T.title?e.tsx(D.Heading,{level:this.headingLevel,class:v.CSS.title,innerHTML:M}):
null};U.renderContent=function(){var T=this.viewModel.content;return T?Array.isArray(T)?T.length?e.tsx("div",{class:v.CSS.contentNode,key:"content-content-elements"},T.map(this.renderContentElement,this)):null:"string"===typeof T?(T=this._contentWidgets[0],!T||T.destroyed?null:e.tsx("div",{class:v.CSS.contentNode,key:"content-content"},T.render())):this.renderNodeContent(T):null};U.renderContentElement=function(T,M){const {visibleElements:P}=this;if("boolean"!==typeof P.content&&!P.content?.[T.type])return null;
switch(T.type){case "attachments":return this.renderAttachments(M);case "custom":return this.renderCustom(T,M);case "fields":return this.renderFields(M);case "media":return this.renderMedia(M);case "text":return this.renderText(T,M);case "expression":return this.renderExpression(M);case "relationship":return this.renderRelationship(M);default:return null}};U.renderAttachments=function(T){const M=this._contentWidgets[T];if(!M||M.destroyed)return null;const {state:P,attachmentInfos:V}=M.viewModel;return"loading"===
P||0<V.length?e.tsx("div",{key:this._buildKey("attachments-element",T),class:this.classes(v.CSS.contentElement)},M.render()):null};U.renderRelationship=function(T){const M=this._contentWidgets[T];return M&&!M.destroyed&&this.flowItems?e.tsx("div",{key:this._buildKey("relationship-element",T),class:v.CSS.contentElement},M.render()):null};U.renderExpression=function(T){const M=this._contentWidgets[T];return!M||M.destroyed?null:e.tsx("div",{key:this._buildKey("expression-element",T),class:v.CSS.contentElement},
M.render())};U.renderCustom=function(T,M){({creator:T}=T);const P=this._contentWidgets[M];return!P||P.destroyed?null:T?e.tsx("div",{key:this._buildKey("custom-element",M),class:v.CSS.contentElement},P.render()):null};U.renderFields=function(T){const M=this._contentWidgets[T];return!M||M.destroyed?null:e.tsx("div",{key:this._buildKey("fields-element",T),class:v.CSS.contentElement},M.render())};U.renderMedia=function(T){const M=this._contentWidgets[T];return!M||M.destroyed?null:e.tsx("div",{key:this._buildKey("media-element",
T),class:v.CSS.contentElement},M.render())};U.renderLastEditInfo=function(){const {visibleElements:T,messages:M}=this;var {lastEditInfo:P}=this.viewModel;if(!P||!T.lastEditedInfo)return null;const {date:V,user:H}=P;P=p.substitute("edit"===P.type?H?M.lastEditedByUser:M.lastEdited:H?M.lastCreatedByUser:M.lastCreated,{date:V,user:H});return e.tsx("div",{key:"edit-info-element",class:this.classes(v.CSS.lastEditedInfo,v.CSS.contentElement)},P)};U.renderText=function(T,M){const P=this._contentWidgets[M];
return!P||P.destroyed?null:T.text?e.tsx("div",{key:this._buildKey("text-element",M),class:this.classes(v.CSS.contentElement,v.CSS.text)},P.render()):null};U._buildKey=function(T,...M){const P=this.get("viewModel.graphic.uid")||"0";M=M.join("-");return`${T}__${P}-${M}`};U._destroyContentWidget=function(T){T&&(T.viewModel=null,!T.destroyed&&T.destroy())};U._destroyContentWidgets=function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(T=>this._destroyContentWidget(T));this._contentWidgets=
[]};U._addFeatureRelationshipHandles=function(T){const {flowItems:M,visibleElements:P}=this;this.addHandles([t.on(()=>T,"select-record",({featureViewModel:V})=>{M&&(V.abilities={relationshipContent:!0},M.push(new C({flowItems:M,viewModel:V,visibleElements:P})))}),t.on(()=>T,"show-all-records",()=>{if(M){var {viewModel:V}=T;V.showAllEnabled=!0;V=new n({visibleElements:{title:!1,description:!1},viewModel:V});this._addFeatureRelationshipHandles(V);M.push(V)}})],"relationship-handles")};U._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:T,visibleElements:M}=this;var P=this.get("viewModel.content");const {contentViewModels:V}=this.viewModel;Array.isArray(P)?P.forEach((H,y)=>{"attachments"===H.type&&(this._contentWidgets[y]=new g({displayType:H.displayType,headingLevel:M.title?T+1:T,viewModel:V[y]}));"fields"===H.type&&(this._contentWidgets[y]=new l({viewModel:V[y]}));"media"===H.type&&(this._contentWidgets[y]=new d({viewModel:V[y]}));"text"===H.type&&(this._contentWidgets[y]=
new b({viewModel:V[y]}));"custom"===H.type&&(this._contentWidgets[y]=new b({viewModel:V[y]}));"expression"===H.type&&(this._contentWidgets[y]=new a({viewModel:V[y]}));"relationship"===H.type&&(H=new n({viewModel:V[y]}),this._addFeatureRelationshipHandles(H),this._contentWidgets[y]=H)},this):(P=V[0])&&!P.destroyed&&(this._contentWidgets[0]=new b({viewModel:P}));this.scheduleRender()};q._createClass(K,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(T){this.viewModel.graphic=
T}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(T){this.viewModel.defaultPopupTemplateEnabled=T}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(T){this._overrideIfSome("label",T)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(T){this.viewModel.spatialReference=T}},{key:"title",get:function(){return this.viewModel.title}},
{key:"map",get:function(){return this.viewModel.map},set:function(T){this.viewModel.map=T}},{key:"view",get:function(){return this.viewModel.view},set:function(T){this.viewModel.view=T}}]);return K}(w.FeatureContentMixin(u));k.__decorate([A.property()],h.prototype,"graphic",null);k.__decorate([A.property()],h.prototype,"defaultPopupTemplateEnabled",null);k.__decorate([A.property()],h.prototype,"flowItems",void 0);k.__decorate([A.property()],h.prototype,"headingLevel",void 0);k.__decorate([A.property({readOnly:!0})],
h.prototype,"isTable",null);k.__decorate([A.property()],h.prototype,"label",null);k.__decorate([A.property(),c.messageBundle("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0);k.__decorate([A.property(),c.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);k.__decorate([A.property(),c.messageBundle("esri/widgets/support/t9n/uriUtils")],h.prototype,"messagesURIUtils",void 0);k.__decorate([A.property()],h.prototype,"spatialReference",null);k.__decorate([A.property({readOnly:!0})],
h.prototype,"title",null);k.__decorate([A.property()],h.prototype,"visibleElements",void 0);k.__decorate([B.cast("visibleElements")],h.prototype,"castVisibleElements",null);k.__decorate([A.property()],h.prototype,"map",null);k.__decorate([A.property()],h.prototype,"view",null);k.__decorate([A.property({type:f})],h.prototype,"viewModel",void 0);return h=C=k.__decorate([F.subclass("esri.widgets.Feature")],h)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){t=function(l){function d(f,v){f=l.call(this,f,v)||this;f._featureElementInfo=null;f.attachmentsWidget=new z;f.headingLevel=2;f.viewModel=new u;return f}m._inheritsLoose(d,l);var n=d.prototype;n.initialize=function(){this._featureElementInfo=new g;this.addHandles([k.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),k.initial),k.watch(()=>this.viewModel,f=>this.attachmentsWidget.viewModel=f,k.initial)])};
n.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo?.destroy()};n.render=function(){const {attachmentsWidget:f}=this;return a.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),f?.render())};n._setupFeatureElementInfo=function(){const {description:f,title:v,headingLevel:w}=this;this._featureElementInfo?.set({description:f,title:v,headingLevel:w})};m._createClass(d,[{key:"description",get:function(){return this.viewModel.description},set:function(f){this.viewModel.description=
f}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(f){this.attachmentsWidget.displayType=f}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(f){this.viewModel.graphic=f}},{key:"title",get:function(){return this.viewModel.title},set:function(f){this.viewModel.title=f}}]);return d}(F);q.__decorate([h.property({readOnly:!0})],t.prototype,"attachmentsWidget",void 0);q.__decorate([h.property()],t.prototype,"description",null);q.__decorate([h.property()],
t.prototype,"displayType",null);q.__decorate([h.property()],t.prototype,"graphic",null);q.__decorate([h.property()],t.prototype,"headingLevel",void 0);q.__decorate([h.property()],t.prototype,"title",null);q.__decorate([h.property({type:u})],t.prototype,"viewModel",void 0);return t=q.__decorate([B.subclass("esri.widgets.Feature.FeatureAttachments")],t)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f){const v={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},w=window.CSS;u=function(D){function x(e,p){e=D.call(this,e,p)||this;e.displayType="auto";e.messages=null;e.messagesUnits=null;e.selectedFile=null;e.submitting=!1;e.viewModel=null;e.visibleElements={...v};e._supportsImageOrientation=w&&w.supports&&w.supports("image-orientation","from-image");e._addAttachmentForm=
null;e._updateAttachmentForm=null;return e}q._inheritsLoose(x,D);var c=x.prototype;c.initialize=function(){this.viewModel||(this.viewModel=new a);this.addHandles([A.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),A.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),A.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),A.initial)])};c.loadDependencies=function(){return Promise.all([new Promise((e,p)=>m(["../chunks/calcite-icon"],e,p))])};c.castVisibleElements=
function(e){return{...v,...e}};c.addAttachment=function(){const {_addAttachmentForm:e,viewModel:p}=this;this._set("submitting",!0);this._set("error",null);return p.addAttachment(e).then(C=>{this._set("submitting",!1);this._set("error",null);p.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new h("attachments:add-attachment",this.messages.addErrorMessage,C));throw C;})};c.deleteAttachment=function(e){const {viewModel:p}=this;this._set("submitting",!0);this._set("error",
null);return p.deleteAttachment(e).then(C=>{this._set("submitting",!1);this._set("error",null);p.mode="view";return C}).catch(C=>{this._set("submitting",!1);this._set("error",new h("attachments:delete-attachment",this.messages.deleteErrorMessage,C));throw C;})};c.updateAttachment=function(){const {viewModel:e}=this,{_updateAttachmentForm:p}=this;this._set("submitting",!0);this._set("error",null);return e.updateAttachment(p).then(C=>{this._set("submitting",!1);this._set("error",null);e.mode="view";
return C}).catch(C=>{this._set("submitting",!1);this._set("error",new h("attachments:update-attachment",this.messages.updateErrorMessage,C));throw C;})};c.addFile=function(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return e};c.updateFile=function(){const {viewModel:e}=this,p=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);e.mode="view";return p};c.deleteFile=function(e){e=this.viewModel.deleteFile(e||this.viewModel.activeFileInfo?.file);
this.viewModel.mode="view";return e};c.render=function(){const {submitting:e,viewModel:p}=this,{state:C}=p;return f.tsx("div",{class:this.classes("esri-attachments","esri-widget")},e?this.renderProgressBar():null,"loading"===C?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};c.renderErrorMessage=function(){const {error:e,visibleElements:p}=this;return e&&p.errorMessage?f.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},e.message):null};c.renderAttachments=
function(){const {activeFileInfo:e,mode:p,activeAttachmentInfo:C}=this.viewModel;return"add"===p?this.renderAddForm():"edit"===p?this.renderDetailsForm(C||e):this.renderAttachmentContainer()};c.renderLoading=function(){return f.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},f.tsx("div",{class:"esri-attachments__loader"}))};c.renderProgressBar=function(){return this.visibleElements.progressBar?f.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};c.renderAddForm=
function(){const {submitting:e,selectedFile:p}=this;var C=e||!p,L=this.visibleElements.cancelAddButton?f.tsx("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",e&&"esri-button--disabled")},this.messages.cancel):null;C=this.visibleElements.addSubmitButton?f.tsx("button",{type:"submit",disabled:C,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",
{["esri-button--disabled"]:C})},this.messages.add):null;const O=p?f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},p.name):null;L=f.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},f.tsx("fieldset",{class:"esri-attachments__file-fieldset"},O,f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},p?this.messages.changeFile:this.messages.selectFile,
f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),C,L);return f.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},L)};c.renderDetailsForm=function(e){const {visibleElements:p,viewModel:C,selectedFile:L,submitting:O}=this;var {abilities:K}=C,U=O||!L;let T;if(L){var M=L.type;T=L.name;var P=L.size}else if(e&&"file"in e)M=e.file.type,T=e.file.name,P=e.file.size;else if(e&&"contentType"in e){M=e.contentType;
T=e.name;P=e.size;var V=e.url}var H=K.editing&&K.operations?.delete&&p.deleteButton?f.tsx("button",{key:"delete-button",type:"button",disabled:O,bind:this,onclick:E=>this._submitDeleteAttachment(E,e),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:O})},this.messages.delete):void 0;U=K.editing&&K.operations?.update&&p.updateButton?f.tsx("button",{disabled:U,key:"update-button",type:"submit",class:this.classes("esri-button",
"esri-button--small","esri-button--third",{["esri-button--disabled"]:U})},this.messages.update):void 0;const y=this.visibleElements.cancelUpdateButton?f.tsx("button",{disabled:O,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:O})},this.messages.cancel):void 0;K=K.editing&&K.operations?.update?f.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},
f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},T),f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;P=f.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,B.formatFileSize(this.messagesUnits,P??0)));M=f.tsx("fieldset",{key:"content-type",
class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,M));V=t.isSome(V)?f.tsx("a",{class:"esri-attachments__item-link",href:V,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),f.tsx("div",{class:"esri-attachments__item-link-overlay"},f.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},f.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400);H=f.tsx("form",{bind:this,afterCreate:d.storeNode,afterRemoved:d.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:E=>this._submitUpdateAttachment(E,e)},f.tsx("div",{class:"esri-attachments__metadata"},P,M),K,f.tsx("div",{class:"esri-attachments__actions"},H,y,U));return f.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},V,H)};c.renderImageMask=function(e,p){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,p):null};c.renderGenericImageMask=function(e,p){var {supportsResizeAttachments:C}=this.viewModel;p=l.getIconPath(p);
C={["esri-attachments__image--resizable"]:C};return f.tsx("div",{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},f.tsx("img",{title:e,alt:e,src:p,class:this.classes(C,"esri-attachments__image")}))};c.renderImageMaskForAttachment=function(e,p){var {supportsResizeAttachments:C}=this.viewModel;if(!e)return null;const {contentType:L,name:O,url:K}=e;if(!C||!l.isSupportedImage(L))return this.renderGenericImageMask(O,L);e=(e=this._getCSSTransform(e))?{transform:e,"image-orientation":"none"}:
{};p=`${K}${K?.includes("?")?"\x26":"?"}w=${p}`;C={["esri-attachments__image--resizable"]:C};return f.tsx("div",{class:this.classes("esri-attachments__item-mask")},f.tsx("img",{styles:e,alt:O,title:O,src:p,class:this.classes(C,"esri-attachments__image")}))};c.renderFile=function(e){const {file:p}=e;return f.tsx("li",{class:"esri-attachments__item",key:p},f.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,
onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),f.tsx("label",{class:"esri-attachments__label"},f.tsx("span",{class:"esri-attachments__filename"},p.name||this.messages.noTitle),f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",d.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};c.renderAttachmentInfo=function({attachmentInfo:e,displayType:p}){const {viewModel:C,effectiveDisplayType:L}=this,{abilities:O,supportsResizeAttachments:K}=
C,{contentType:U,name:T,url:M}=e;p=this.renderImageMask(e,"list"===p?48:400);var P=O.editing?f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",d.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;P="preview"===L&&K&&l.isSupportedImage(U)?null:f.tsx("label",{class:"esri-attachments__label"},f.tsx("span",{class:"esri-attachments__filename"},T||this.messages.noTitle),P);p=[p,P];p=O.editing?f.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",
title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},p):f.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:M??void 0,target:"_blank"},p);return f.tsx("li",{class:"esri-attachments__item",key:e},p)};c.renderAttachmentContainer=function(){const {effectiveDisplayType:e,viewModel:p,visibleElements:C}=this,{attachmentInfos:L,abilities:O,fileInfos:K}=p;var U=!!L?.length;
const T=!!K?.length,M={["esri-attachments__container--list"]:"preview"!==e,["esri-attachments__container--preview"]:"preview"===e},P=O.editing&&O.operations?.add&&C.addButton?f.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,V=U?f.tsx("ul",
{key:"attachments-list",class:"esri-attachments__items"},L.toArray().map(y=>this.renderAttachmentInfo({attachmentInfo:y,displayType:e}))):void 0,H=T?f.tsx("ul",{key:"file-list",class:"esri-attachments__items"},K.toArray().map(y=>this.renderFile(y))):void 0;U=T||U?void 0:f.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return f.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",M)},V,H,U,P)};c._modeChanged=function(){this._set("error",
null);this._set("selectedFile",null)};c._handleFileInputChange=function(e){e=(e=e.target)&&e.files&&e.files.item(0);this._set("selectedFile",e)};c._submitDeleteAttachment=function(e,p){e.preventDefault();p&&("file"in p?this.deleteFile(p.file):p&&this.deleteAttachment(p))};c._submitAddAttachment=function(e){e.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()};c._submitUpdateAttachment=function(e,p){e.preventDefault();p&&"file"in p?this.updateFile():this.updateAttachment()};
c._startEditAttachment=function(e){const {viewModel:p}=this;p.activeFileInfo=null;p.activeAttachmentInfo=e;p.mode="edit"};c._startEditFile=function(e){const {viewModel:p}=this;p.activeAttachmentInfo=null;p.activeFileInfo=e;p.mode="edit"};c._startAddAttachment=function(){this.viewModel.mode="add"};c._cancelForm=function(e){e.preventDefault();this.viewModel.mode="view"};c._getCSSTransform=function(e){({orientationInfo:e}=e);return!this._supportsImageOrientation&&e?[e.rotation?`rotate(${e.rotation}deg)`:
"",e.mirrored?"scaleX(-1)":""].join(" "):""};q._createClass(x,[{key:"abilities",get:function(){return this.viewModel.abilities},set:function(e){this.viewModel.abilities=e}},{key:"effectiveDisplayType",get:function(){const {displayType:e}=this;return e&&"auto"!==e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",
e)}}]);return x}(b);k.__decorate([z.property()],u.prototype,"abilities",null);k.__decorate([z.property()],u.prototype,"displayType",void 0);k.__decorate([z.property({readOnly:!0})],u.prototype,"effectiveDisplayType",null);k.__decorate([z.property()],u.prototype,"graphic",null);k.__decorate([z.property()],u.prototype,"label",null);k.__decorate([z.property(),n.messageBundle("esri/widgets/Attachments/t9n/Attachments")],u.prototype,"messages",void 0);k.__decorate([z.property(),n.messageBundle("esri/core/t9n/Units")],
u.prototype,"messagesUnits",void 0);k.__decorate([z.property({readOnly:!0})],u.prototype,"selectedFile",void 0);k.__decorate([z.property({readOnly:!0})],u.prototype,"submitting",void 0);k.__decorate([z.property({readOnly:!0})],u.prototype,"error",void 0);k.__decorate([z.property({type:a})],u.prototype,"viewModel",void 0);k.__decorate([z.property()],u.prototype,"visibleElements",void 0);k.__decorate([F.cast("visibleElements")],u.prototype,"castVisibleElements",null);return u=k.__decorate([g.subclass("esri.widgets.Attachments")],
u)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(m,q,k,h,t,A,B,z){function F(d,n,f){return d.units[n][f]}function u(d,n,f,v=2,w="abbr"){return`${z.formatNumber(n,{minimumFractionDigits:v,maximumFractionDigits:v,signDisplay:0<n?"never":"exceptZero"})} ${F(d,f,w)}`}function g(d,n,f,v=2,w="abbr"){return`${z.formatNumber(n,{minimumFractionDigits:v,maximumFractionDigits:v,signDisplay:"exceptZero"})} ${F(d,
f,w)}`}function b(d,n){const f=JSON.stringify(n);let v=a.get(f);v||(v=new Intl.NumberFormat("en-US",n),a.set(f,v));return/\-?\+?360/.test(v.format(d))?0:d}const a=new Map,l=["B","kB","MB","GB","TB"];m.formatAngleDegrees=function(d,n,f,v,w){w=t.unwrapOr(w,2);var D=k.cyclicalDegrees,x=D.normalize;a:if(d=B.convertUnit(d,n,"degrees"),f===v)f=d;else{switch(v){case "arithmetic":f=-d+90;break a;case "geographic":f=-d-90;break a}f=void 0}D=x.call(D,f,0,!0);w={style:"unit",unitDisplay:"narrow",unit:"degree",
maximumFractionDigits:w,minimumFractionDigits:w,signDisplay:0<D?"never":"exceptZero"};D=b(D,w);return z.formatNumber(D,w)};m.formatDMS=function(d,n,f=2){d=B.convertUnit(d,n,"degrees");n=d-Math.floor(d);d-=n;n*=60;let v=n-Math.floor(n);n-=v;v*=60;return`${d.toFixed()}\u00b0 ${n.toFixed()}' ${v.toFixed(f)}"`};m.formatDecimal=u;m.formatFileSize=function(d,n){let f=0===n?0:Math.floor(Math.log(n)/Math.log(q.ByteSizeUnit.KILOBYTES));f=h.clamp(f,0,l.length-1);n=z.formatNumber(n/q.ByteSizeUnit.KILOBYTES**
f,{maximumFractionDigits:2});return A.replace(d.units.bytes[l[f]],{fileSize:n})};m.formatImperialArea=function(d,n,f,v=2,w="abbr"){const D=B.preferredImperialAreaUnit(n,f);return u(d,B.convertUnit(n,f,D),D,v,w)};m.formatImperialLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredImperialLengthUnit(n,f);return u(d,B.convertUnit(n,f,D),D,v,w)};m.formatImperialRelativeLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredImperialLengthUnit(n,f);return g(d,B.convertUnit(n,f,D),D,v,w)};m.formatImperialRelativeVerticalLength=
function(d,n,f,v=2,w="abbr"){const D=B.preferredImperialVerticalLengthUnit(n,f);return g(d,B.convertUnit(n,f,D),D,v,w)};m.formatImperialVerticalLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredImperialVerticalLengthUnit(n,f);return u(d,B.convertUnit(n,f,D),D,v,w)};m.formatMetricArea=function(d,n,f,v=2,w="abbr"){const D=B.preferredMetricAreaUnit(n,f);return u(d,B.convertUnit(n,f,D),D,v,w)};m.formatMetricLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredMetricLengthUnit(n,f);return u(d,B.convertUnit(n,
f,D),D,v,w)};m.formatMetricRelativeLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredMetricLengthUnit(n,f);return g(d,B.convertUnit(n,f,D),D,v,w)};m.formatMetricRelativeVerticalLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredMetricVerticalLengthUnit(n,f);return g(d,B.convertUnit(n,f,D),D,v,w)};m.formatMetricVerticalLength=function(d,n,f,v=2,w="abbr"){const D=B.preferredMetricVerticalLengthUnit(n,f);return u(d,B.convertUnit(n,f,D),D,v,w)};m.formatRelativeAngleDegrees=function(d,n,f,v,w){f!==
v&&(d=-d);w=t.unwrapOr(w,2);f={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:w,minimumFractionDigits:w,signDisplay:"exceptZero"};d=B.convertUnit(d,n,"degrees")%360;d=b(d,f);return z.formatNumber(d,f)};m.formatRelativeDecimal=g;m.unitName=F;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(m){function q(t){return 32+t.length}function k(t){if(!t)return 0;if(Array.isArray(t)){var A=t.length;if(0===
A||"number"===typeof t[0])t=32+8*A;else{var B=32;for(let z=0;z<A;z++)B+=h(t[z]);t=B}return t}B=32;for(A in t)t.hasOwnProperty(A)&&(B+=h(t[A]));return B}function h(t){switch(typeof t){case "object":return k(t);case "string":return q(t);case "number":return 16;case "boolean":return 4;default:return 8}}m.ByteSizeUnit=void 0;(function(t){t[t.KILOBYTES=1024]="KILOBYTES";t[t.MEGABYTES=1048576]="MEGABYTES";t[t.GIGABYTES=1073741824]="GIGABYTES"})(m.ByteSizeUnit||(m.ByteSizeUnit={}));m.estimateAttributesObjectSize=
function(t){if(!t)return 0;let A=32;for(const B in t)if(t.hasOwnProperty(B)){const z=t[B];switch(typeof z){case "string":A+=q(z);break;case "number":A+=16;break;case "boolean":A+=4}}return A};m.estimateFixedArraySize=function(t,A){return 32+t.length*A};m.estimateNestedObjectSize=k;m.estimateNumberByteSize=function(t){return 16};m.estimateStringByteSize=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d){const n={editing:!1,operations:{add:!0,update:!0,delete:!0}},f=t.ofType(a);h=function(v){function w(x){var c=v.call(this,x)||this;c._getAttachmentsPromise=null;c._attachmentLayer=null;c.abilities={...n};c.activeAttachmentInfo=null;c.activeFileInfo=null;c.attachmentInfos=new f;c.fileInfos=new t;c.graphic=null;c.mode="view";c.filesEnabled=!1;c.addHandles(z.watch(()=>c.graphic,()=>c._graphicChanged(),z.initial));return c}m._inheritsLoose(w,v);var D=w.prototype;
D.destroy=function(){this.graphic=this._attachmentLayer=null};D.castAbilities=function(x){return{...n,...x}};D.getAttachments=function(){var x=m._asyncToGenerator(function*(){const {_attachmentLayer:c,attachmentInfos:e}=this;if(!c||"function"!==typeof c.queryAttachments)throw new A("invalid-layer","getAttachments(): A valid layer is required.");const p=this._getObjectId();var C=new l({objectIds:[p],returnMetadata:!0});const L=[];this._getAttachmentsPromise=C=c.queryAttachments(C).then(O=>O[p]||L).catch(()=>
L);this.notifyChange("state");C=yield C;e.removeAll();C.length&&e.addMany(C);this._getAttachmentsPromise=null;this.notifyChange("state");return C});return function(){return x.apply(this,arguments)}}();D.addAttachment=function(){var x=m._asyncToGenerator(function*(c,e=this.graphic){const {_attachmentLayer:p,attachmentInfos:C,abilities:L}=this;if(!e)throw new A("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:e});if(!c)throw new A("invalid-attachment","addAttachment(): An attachment is required.",
{attachment:c});if(!L.operations?.add)throw new A("invalid-abilities","addAttachment(): add abilities are required.");if(!p||"function"!==typeof p.addAttachment)throw new A("invalid-layer","addAttachment(): A valid layer is required.");c=yield p.addAttachment(e,c).then(O=>this._queryAttachment(O.objectId,e));C.add(c);return c});return function(c){return x.apply(this,arguments)}}();D.deleteAttachment=function(){var x=m._asyncToGenerator(function*(c){const {_attachmentLayer:e,attachmentInfos:p,graphic:C,
abilities:L}=this;if(!c)throw new A("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:c});if(!L.operations?.delete)throw new A("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!==typeof e.deleteAttachments)throw new A("invalid-layer","deleteAttachment(): A valid layer is required.");if(!C)throw new A("invalid-graphic","deleteAttachment(): A graphic is required.");const O=yield e.deleteAttachments(C,[c.id]).then(()=>
c);p.remove(O);return O});return function(c){return x.apply(this,arguments)}}();D.updateAttachment=function(){var x=m._asyncToGenerator(function*(c,e=this.activeAttachmentInfo){const {_attachmentLayer:p,attachmentInfos:C,graphic:L,abilities:O}=this;if(!c)throw new A("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:c});if(!e)throw new A("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!O.operations?.update)throw new A("invalid-abilities",
"updateAttachment(): Update abilities are required.");const K=C.findIndex(U=>U===e);if(!p||"function"!==typeof p.updateAttachment)throw new A("invalid-layer","updateAttachment(): A valid layer is required.");if(!L)throw new A("invalid-graphic","updateAttachment(): A graphic is required.");c=yield p.updateAttachment(L,e.id,c).then(U=>this._queryAttachment(U.objectId));C.splice(K,1,c);return c});return function(c){return x.apply(this,arguments)}}();D.commitFiles=function(){var x=m._asyncToGenerator(function*(){yield Promise.all(this.fileInfos.items.map(c=>
this.addAttachment(c.form)));this.fileInfos.removeAll();return this.getAttachments()});return function(){return x.apply(this,arguments)}}();D.addFile=function(x,c){if(!x||!c)return null;x={file:x,form:c};this.fileInfos.add(x);return x};D.updateFile=function(x,c,e=this.activeFileInfo){if(!x||!c||!e)return null;const p=this.fileInfos.findIndex(C=>e===C);-1<p&&this.fileInfos.splice(p,1,{file:x,form:c});return this.fileInfos.items[p]};D.deleteFile=function(x){const c=this.fileInfos.find(e=>e.file===x);
return c?(this.fileInfos.remove(c),c):null};D._queryAttachment=function(){var x=m._asyncToGenerator(function*(c,e){const {_attachmentLayer:p}=this;if(!c||!p?.queryAttachments)throw new A("invalid-attachment-id","Could not query attachment.");const C=this._getObjectId(e);c=new l({objectIds:[C],attachmentsWhere:`AttachmentId=${c}`,returnMetadata:!0});return p.queryAttachments(c).then(L=>L[C][0])});return function(c,e){return x.apply(this,arguments)}}();D._getObjectId=function(x=this.graphic){return x?.getObjectId()??
null};D._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};D._setAttachmentLayer=function(){var {graphic:x}=this;this._attachmentLayer=(x=d.getSourceLayer(x))?"scene"===x.type&&B.isSome(x.associatedLayer)?x.associatedLayer:x:null};m._createClass(w,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:x}=this;if(!x)return!1;x=x.layer||
x.sourceLayer;return x?.loaded&&"capabilities"in x&&x.capabilities&&"operations"in x.capabilities&&"supportsResizeAttachments"in x.capabilities.operations&&x.capabilities.operations.supportsResizeAttachments||!1}}]);return w}(h);q.__decorate([F.property()],h.prototype,"abilities",void 0);q.__decorate([u.cast("abilities")],h.prototype,"castAbilities",null);q.__decorate([F.property()],h.prototype,"activeAttachmentInfo",void 0);q.__decorate([F.property()],h.prototype,"activeFileInfo",void 0);q.__decorate([F.property({readOnly:!0,
type:f})],h.prototype,"attachmentInfos",void 0);q.__decorate([F.property()],h.prototype,"fileInfos",void 0);q.__decorate([F.property({type:k})],h.prototype,"graphic",void 0);q.__decorate([F.property()],h.prototype,"mode",void 0);q.__decorate([F.property({readOnly:!0})],h.prototype,"state",null);q.__decorate([F.property()],h.prototype,"filesEnabled",void 0);q.__decorate([F.property({readOnly:!0})],h.prototype,"supportsResizeAttachments",null);return h=q.__decorate([b.subclass("esri.widgets.Attachments.AttachmentsViewModel")],
h)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),function(m,q,k,h,t,A,B,z){var F;const u={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},
4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};k=F=function(g){function b(a){a=g.call(this,a)||this;a.contentType=null;a.exifInfo=null;a.id=null;a.globalId=null;a.keywords=null;a.name=null;a.parentGlobalId=null;a.parentObjectId=null;a.size=null;a.url=null;return a}m._inheritsLoose(b,g);b.prototype.clone=function(){return new F({contentType:this.contentType,exifInfo:this.exifInfo,
id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};m._createClass(b,[{key:"orientationInfo",get:function(){var {exifInfo:a}=this;a=z.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:a});return u[a]||null}}]);return b}(k.JSONSupport);q.__decorate([h.property({type:String})],k.prototype,"contentType",void 0);q.__decorate([h.property()],k.prototype,"exifInfo",void 0);
q.__decorate([h.property({readOnly:!0})],k.prototype,"orientationInfo",null);q.__decorate([h.property({type:t.Integer})],k.prototype,"id",void 0);q.__decorate([h.property({type:String})],k.prototype,"globalId",void 0);q.__decorate([h.property({type:String})],k.prototype,"keywords",void 0);q.__decorate([h.property({type:String})],k.prototype,"name",void 0);q.__decorate([h.property({json:{read:!1}})],k.prototype,"parentGlobalId",void 0);q.__decorate([h.property({json:{read:!1}})],k.prototype,"parentObjectId",
void 0);q.__decorate([h.property({type:t.Integer})],k.prototype,"size",void 0);q.__decorate([h.property({json:{read:!1}})],k.prototype,"url",void 0);return k=F=q.__decorate([B.subclass("esri.layers.support.AttachmentInfo")],k)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(m){function q(k){const {tagName:h,tags:t}=k;return t&&h?(k=t.find(A=>A.name===h))&&k.value||null:null}m.getExifValue=function(k){const {exifInfo:h,exifName:t,tagName:A}=k;return h&&t&&A?(k=h.find(B=>B.name===
t))?q({tagName:A,tags:k.tags}):null:null};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),function(m,q,
k,h,t,A,B,z,F,u,g,b){function a(){a=q._asyncToGenerator(function*(S,X){return"function"===typeof S?S.call(null,X):S});return a.apply(this,arguments)}function l(S){return S?R.test(S):!1}function d(S,X){if(!l(X)||!S)return null;const aa=X.replace(R,"").toLowerCase();let ha=null;S.some(ia=>ia.name.toLowerCase()===aa?(ha=ia,!0):!1);return ha}function n(S,X){return(X=f(X,S))?X.name:S}function f(S,X){return S&&"function"===typeof S.getField&&X?S.getField(X)??null:null}function v({formattedAttributes:S,
template:X,fieldInfoMap:aa}){return`${A.replace(A.replace(X,ha=>{const ia=aa.get(ha.toLowerCase());return`{${ia&&ia.fieldName||ha}}`}),S).replace(G,"")}`.trim()}function w(S,X,aa=!1){const ha=X[S];"string"===typeof ha&&(aa=(aa?encodeURIComponent(ha):ha).replace(N,"%27"),X[S]=aa)}function D(S,X=!1){const aa={...S};Object.keys(aa).forEach(ha=>w(ha,aa,X));return aa}function x(S,X){return S.replace(J,(aa,ha,ia)=>(aa=f(X,ia))?`{${aa.name}}`:ha)}function c(S,X,aa){return(S=x(S,aa))?S.replace(ea,(ha,ia,
ja)=>{ia=`${ia||ja}`.trim();return A.replace(ha,D(X,ia&&"{"!==ia[0]||!1))}):S}function e(S,X){var aa=X.fieldName,ha=p(X.fieldInfos,aa)?.clone();const ia=X.preventPlacesFormatting;X=X.layer;var ja=f(X,aa);ha&&"date"===ja?.type&&(ja=ha.format||new g,ja.dateFormat=ja.dateFormat||"short-date-short-time",ja.dateTimeFormatOptions=!X?.layer&&"feature"===X?.type&&X.datesInUnknownTimezone||X?.layer&&"map-image"===X.layer?.type&&X.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,ha.format=ja);ha=ha&&ha.format;
if("string"===typeof S&&F.isRasterPixelValueField(aa)&&ha)return ha.formatRasterPixelValue(S);"string"!==typeof S||!ha||null!=ha.dateFormat||null==ha.places&&null==ha.digitSeparator||(aa=Number(S),isNaN(aa)||(S=aa));return"string"===typeof S||null==S||null==ha?O(S):ia?z.formatNumber(S,{...z.convertNumberFormatToIntlOptions(ha),minimumFractionDigits:0,maximumFractionDigits:20}):ha.format(S)}function p(S,X){if(S&&S.length&&X){var aa=X.toLowerCase(),ha=void 0;S.some(ia=>ia.fieldName&&ia.fieldName.toLowerCase()===
aa?(ha=ia,!0):!1);return ha}}function C({fieldName:S,graphic:X,layer:aa}){if(H(S)||!aa||"function"!==typeof aa.getFeatureType)return null;const {typeIdField:ha}=aa;return ha&&S===ha?(S=aa.getFeatureType(X))?S.name:null:null}function L({fieldName:S,value:X,graphic:aa,layer:ha}){return H(S)||!ha||"function"!==typeof ha.getFieldDomain?null:(S=aa&&ha.getFieldDomain(S,{feature:aa}))&&"coded-value"===S.type?S.getName(X):null}function O(S){return"string"===typeof S?S.replace(W,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):
S}function K(S){const {value:X,fieldName:aa,fieldInfos:ha,fieldInfoMap:ia,layer:ja,graphic:ma}=S;return null==X?"":(S=L({fieldName:aa,value:X,graphic:ma,layer:ja}))||(S=C({fieldName:aa,graphic:ma,layer:ja}))?S:ia.get(aa.toLowerCase())?e(X,{fieldInfos:ha||Array.from(ia.values()),fieldName:aa,layer:ja}):(S=ja&&ja.fieldsIndex)&&S.isDateField(aa)?B.formatDate(X,Q):O(X)}function U(S,X){return T.apply(this,arguments)}function T(){T=q._asyncToGenerator(function*(S,X){const {layer:aa,graphic:ha,outFields:ia,
objectIds:ja,returnGeometry:ma,spatialReference:na}=S;S=ja[0];if("number"!==typeof S&&"string"!==typeof S)return r.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:aa,graphic:ha,objectId:S,requiredFields:ia}),null;if(!u.getEffectiveLayerCapabilities(aa)?.operations?.supportsQuery)return r.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:aa,graphic:ha,requiredFields:ia,returnGeometry:ma}),null;S=aa.createQuery();
S.objectIds=ja;S.outFields=ia?.length?ia:[aa.objectIdField];S.returnGeometry=!!ma;S.returnZ=!!ma;S.returnM=!!ma;S.outSpatialReference=na;return(yield aa.queryFeatures(S,X)).features[0]});return T.apply(this,arguments)}function M(S){return P.apply(this,arguments)}function P(){P=q._asyncToGenerator(function*(S){if(!S.expressionInfos?.length)return!1;var X=yield b.loadArcade();({arcadeUtils:{hasGeometryFunctions:X}}=X);return X(S)});return P.apply(this,arguments)}function V(){V=q._asyncToGenerator(function*({graphic:S,
popupTemplate:X,layer:aa,spatialReference:ha},ia){if(aa&&X&&("function"===typeof aa.load&&(yield aa.load(ia)),S.attributes)){var ja=S.attributes[aa.objectIdField];if(null!=ja){ja=[ja];var ma=yield X.getRequiredFields(aa.fieldsIndex),na=F.featureHasFields(ma,S);ma=na?[]:ma;X=X.returnGeometry||(yield M(X));if(!na||X)if(aa=yield U({layer:aa,graphic:S,outFields:ma,objectIds:ja,returnGeometry:X,spatialReference:ha},ia))aa.geometry&&(S.geometry=aa.geometry),aa.attributes&&(S.attributes={...S.attributes,
...aa.attributes})}}});return V.apply(this,arguments)}function H(S=""){return S?S.includes("relationships/"):!1}function y({attributes:S,graphic:X,relatedInfo:aa,fieldInfos:ha,fieldInfoMap:ia,layer:ja}){S&&X&&aa&&Object.keys(X.attributes).forEach(ma=>{var na=(na={layerId:aa.relation.id.toString(),fieldName:ma},`${"relationships/"}${na.layerId}/${na.fieldName}`);S[na]=K({fieldName:na,fieldInfos:ha,fieldInfoMap:ia,layer:ja,value:X.attributes[ma],graphic:X})})}function E({attributes:S,relatedInfo:X,
fieldInfoMap:aa,fieldInfos:ha,layer:ia}){S&&X&&(X.relatedFeatures&&X.relatedFeatures&&X.relatedFeatures.forEach(ja=>y({attributes:S,graphic:ja,relatedInfo:X,fieldInfoMap:aa,fieldInfos:ha,layer:ia})),X.relatedStatsFeatures&&X.relatedStatsFeatures&&X.relatedStatsFeatures.forEach(ja=>y({attributes:S,graphic:ja,relatedInfo:X,fieldInfoMap:aa,fieldInfos:ha,layer:ia})))}function I(S,X,aa){return S.find(ha=>ha!==X&&"feature"===ha.type&&ha.url===X.url&&ha.layerId===aa.relatedTableId)}const r=h.getLogger("esri.widgets.Feature.support.featureUtils"),
G=/href=(""|'')/gi,J=/(\{([^\{\r\n]+)\})/g,N=/'/g,R=/^\s*expression\//i,W=/(\n)/gi,da=/[\u00A0-\u9999<>&]/gim,ea=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,fa=/^(?:mailto:|tel:)/,Q=B.convertDateFormatToIntlOptions("short-date-short-time"),Y=S=>{if(!S)return!1;S=S.toUpperCase();return S.includes("CURRENT_TIMESTAMP")||S.includes("CURRENT_DATE")||S.includes("CURRENT_TIME")},ba=({layer:S,method:X,query:aa,definitionExpression:ha})=>{S.capabilities?.query?.supportsCacheHint&&"attachments"!==X&&(S=t.isSome(aa.where)?
aa.where:null,X=t.isSome(aa.geometry)?aa.geometry:null,Y(ha)||Y(S)||"extent"===X?.type||"tile"===aa.resultType||(aa.cacheHint=!0))};m.applyTextFormattingHTML=O;m.createfieldInfoMap=function(S,X){const aa=new Map;if(!S)return aa;S.forEach(ha=>{const ia=n(ha.fieldName,X);ha.fieldName=ia;aa.set(ia.toLowerCase(),ha)});return aa};m.findRelatedLayer=function(S,X,aa){return S&&X&&aa?I(S.allLayers,X,aa)||I(S.allTables,X,aa):null};m.fixTokens=x;m.formatAttributes=function({fieldInfos:S,attributes:X,layer:aa,
graphic:ha,fieldInfoMap:ia,relatedInfos:ja}){const ma={};ja?.forEach(na=>E({attributes:ma,relatedInfo:na,fieldInfoMap:ia,fieldInfos:S,layer:aa}));X&&Object.keys(X).forEach(na=>{ma[na]=K({fieldName:na,fieldInfos:S,fieldInfoMap:ia,layer:aa,value:X[na],graphic:ha})});return ma};m.formatEditInfo=function(S,X){const {creatorField:aa,creationDateField:ha,editorField:ia,editDateField:ja}=S;if(X){S=X[ja];if("number"===typeof S)return X=X[ia],{type:"edit",date:B.formatDate(S,Q),user:X};S=X[ha];return"number"===
typeof S?(X=X[aa],{type:"create",date:B.formatDate(S,Q),user:X}):null}};m.formatValueToFieldInfo=e;m.getAllFieldInfos=function(S){const X=[];if(!S)return X;const {fieldInfos:aa,content:ha}=S;aa&&X.push(...aa);if(!ha||!Array.isArray(ha))return X;ha.forEach(ia=>{"fields"===ia.type&&(ia=ia&&ia.fieldInfos)&&X.push(...ia)});return X};m.getFieldInfo=p;m.getFieldInfoLabel=function(S,X){return(X=d(X,S?.fieldName))?X.title||null:S?S.label||S.fieldName:null};m.getFixedFieldName=n;m.getFixedFieldNames=function(S,
X){return S&&S.map(aa=>n(aa,X))};m.getSourceLayer=function(S){if(!t.isNone(S))return S.get("sourceLayer")||S.get("layer")};m.graphicCallback=function(S,X){return a.apply(this,arguments)};m.htmlEntities=function(S){return S.replace(da,X=>`&#${X.charCodeAt(0)};`)};m.isExpressionField=l;m.isRelatedField=H;m.preLayerQueryCallback=({query:S,layer:X,method:aa})=>{ba({layer:X,method:aa,query:S,definitionExpression:`${X.definitionExpression} ${X.serviceDefinitionExpression}`})};m.preRequestCallback=({queryPayload:S,
layer:X,method:aa})=>{ba({layer:X,method:aa,query:S,definitionExpression:`${X.definitionExpression} ${X.serviceDefinitionExpression}`})};m.querySourceLayer=U;m.queryUpdatedFeature=function(S,X){return V.apply(this,arguments)};m.shouldOpenInNewTab=function(S=""){if(S)return!fa.test(S.trim().toLowerCase())};m.substituteAttributes=v;m.substituteFieldsInLinksAndAttributes=function({attributes:S,globalAttributes:X,layer:aa,text:ha,expressionAttributes:ia,fieldInfoMap:ja}){return ha?v({formattedAttributes:X,
template:c(ha,{...X,...ia,...S},aa),fieldInfoMap:ja}):""};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(m,q){m.getIconPath=function(k){const h=q.getAssetUrl("esri/themes/base/images/files/");return k?"text/plain"===k?`${h}text-32.svg`:"application/pdf"===k?`${h}pdf-32.svg`:"text/csv"===k?`${h}csv-32.svg`:"application/gpx+xml"===k?`${h}gpx-32.svg`:"application/x-dwf"===k?`${h}cad-32.svg`:
"application/postscript"===k||"application/json"===k||"text/xml"===k||"model/vrml"===k?`${h}code-32.svg`:"application/x-zip-compressed"===k||"application/x-7z-compressed"===k||"application/x-gzip"===k||"application/x-tar"===k||"application/x-gtar"===k||"application/x-bzip2"===k||"application/gzip"===k||"application/x-compress"===k||"application/x-apple-diskimage"===k||"application/x-rar-compressed"===k||"application/zip"===k?`${h}zip-32.svg`:k.includes("image/")?`${h}image-32.svg`:k.includes("audio/")?
`${h}sound-32.svg`:k.includes("video/")?`${h}video-32.svg`:k.includes("msexcel")||k.includes("ms-excel")||k.includes("spreadsheetml")?`${h}excel-32.svg`:k.includes("msword")||k.includes("ms-word")||k.includes("wordprocessingml")?`${h}word-32.svg`:k.includes("powerpoint")||k.includes("presentationml")?`${h}report-32.svg`:`${h}generic-32.svg`:`${h}generic-32.svg`};m.isSupportedImage=function(k){k=k.toLowerCase();return"image/bmp"===k||"image/emf"===k||"image/exif"===k||"image/gif"===k||"image/x-icon"===
k||"image/jpeg"===k||"image/png"===k||"image/tiff"===k||"image/x-wmf"===k};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(m,q,k,h,t,A,B){h=function(z){function F(u){u=z.call(this,u)||this;u.description=null;u.title=null;return u}m._inheritsLoose(F,z);return F}(B);q.__decorate([k.property()],h.prototype,"description",void 0);q.__decorate([k.property()],h.prototype,"title",void 0);return h=q.__decorate([A.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],h)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u){h=function(g){function b(l,d){l=g.call(this,l,d)||this;l.description=null;l.headingLevel=2;l.title=null;return l}m._inheritsLoose(b,g);var a=b.prototype;a.render=function(){return u.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};a.renderTitle=function(){const {title:l}=this;return l?u.tsx(z.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},l):null};a.renderDescription=function(){const {description:l}=
this;return l?u.tsx("div",{key:"description",class:"esri-feature-element-info__description"},l):null};return b}(B);q.__decorate([k.property()],h.prototype,"description",void 0);q.__decorate([k.property()],h.prototype,"headingLevel",void 0);q.__decorate([k.property()],h.prototype,"title",void 0);return h=q.__decorate([A.subclass("esri.widgets.Feature.support.FeatureElementInfo")],h)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(m,q,k,h){const t={heading:"esri-widget__heading"};m.CSS=t;m.Heading=function({level:A,class:B,...z},F){A=q.clamp(Math.ceil(A),1,6);return h.tsx(`h${A}`,{...z,class:k.classes(t.heading,B),role:"heading","aria-level":String(A)},F)};m.incrementHeadingLevel=function(A,B=1){return q.clamp(Math.ceil(A+B),1,6)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g){h=function(b){function a(d,n){d=b.call(this,d,n)||this;d.viewModel=null;d._addTargetToAnchors=f=>{Array.from(f.querySelectorAll("a")).forEach(v=>{F.shouldOpenInNewTab(v.href)&&!v.hasAttribute("target")&&v.setAttribute("target","_blank")})};return d}m._inheritsLoose(a,b);var l=a.prototype;l.renderLoading=function(){return g.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},g.tsx("div",{class:"esri-feature-content__loader"}))};l.renderCreated=function(){const d=
this.viewModel?.created;return d?d instanceof HTMLElement?g.tsx("div",{key:d,bind:d,afterCreate:this._attachToNode}):u.isWidget(d)?g.tsx("div",{key:d},!d.destroyed&&d.render()):g.tsx("div",{key:d,innerHTML:d,afterCreate:this._addTargetToAnchors}):null};l.render=function(){return g.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};l._attachToNode=function(d){d.appendChild(this)};m._createClass(a,[{key:"creator",get:function(){return this.viewModel?.creator},
set:function(d){this.viewModel&&(this.viewModel.creator=d)}},{key:"graphic",get:function(){return this.viewModel?.graphic},set:function(d){this.viewModel&&(this.viewModel.graphic=d)}}]);return a}(B);q.__decorate([k.property()],h.prototype,"creator",null);q.__decorate([k.property()],h.prototype,"graphic",null);q.__decorate([k.property({type:z})],h.prototype,"viewModel",void 0);return h=q.__decorate([A.subclass("esri.widgets.Feature.FeatureContent")],h)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g){h=function(b){function a(d){var n=b.call(this,d)||this;n._loadingPromise=null;n.created=null;n.creator=null;n.destroyer=null;n.graphic=null;n.handles.add(A.watch(()=>n.creator,f=>{n._destroyContent();n._createContent(f)},A.initial));return n}m._inheritsLoose(a,b);var l=a.prototype;l.destroy=function(){this._destroyContent()};l._destroyContent=function(){const {created:d,graphic:n,destroyer:f}=this;d&&n&&(g.graphicCallback(f,{graphic:n}).catch(()=>null),this._set("created",
null))};l._createContent=function(){var d=m._asyncToGenerator(function*(n){var f=this.graphic;f&&n&&(this._loadingPromise=n=g.graphicCallback(n,{graphic:f}).catch(()=>null),this.notifyChange("state"),f=yield n,n===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",f)))});return function(n){return d.apply(this,arguments)}}();m._createClass(a,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return a}(t.HandleOwnerMixin(h));q.__decorate([B.property({readOnly:!0})],
h.prototype,"created",void 0);q.__decorate([B.property()],h.prototype,"creator",void 0);q.__decorate([B.property()],h.prototype,"destroyer",void 0);q.__decorate([B.property({type:k})],h.prototype,"graphic",void 0);q.__decorate([B.property({readOnly:!0})],h.prototype,"state",null);return h=q.__decorate([u.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],h)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){t=function(d){function n(v,w){v=d.call(this,v,w)||this;v._contentWidget=null;v.viewModel=new b;return v}m._inheritsLoose(n,d);var f=n.prototype;f.initialize=function(){this.addHandles(k.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),k.initial))};f.destroy=function(){this._destroyContentWidget()};f.renderLoading=function(){return l.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},l.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};f.render=function(){const {state:v}=this.viewModel;return l.tsx("div",{class:"esri-feature-expression"},"loading"===v?this.renderLoading():"disabled"===v?null:this._contentWidget?.render())};f._destroyContentWidget=function(){const {_contentWidget:v}=this;v&&(v.viewModel=null,v.destroy());this._contentWidget=null};f._setupExpressionWidget=function(){const {contentElementViewModel:v,contentElement:w}=this.viewModel,D=w?.type;this._destroyContentWidget();this._contentWidget=
v?"fields"===D?new u({viewModel:v}):"media"===D?new g({viewModel:v}):"text"===D?new F({viewModel:v}):null:null;this.scheduleRender()};return n}(z);q.__decorate([h.property({type:b})],t.prototype,"viewModel",void 0);return t=q.__decorate([B.subclass("esri.widgets.Feature.FeatureExpression")],t)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){t=function(d){function n(v,w){v=d.call(this,v,w)||this;v._featureElementInfo=null;v.viewModel=new F;v.messages=null;v.messagesURIUtils=null;return v}m._inheritsLoose(n,d);var f=n.prototype;f.initialize=function(){this._featureElementInfo=new u;this.addHandles(k.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),k.initial))};f.destroy=function(){this._featureElementInfo?.destroy()};f.renderFieldInfo=function(v,w){var {attributes:D}=
this.viewModel;const x=v.fieldName,c=v.label||x;D=D?null==D[x]?"":D[x]:"";v=!(!v.format||!v.format.dateFormat);D="number"!==typeof D||v?g.autoLink(this.messagesURIUtils,D):this._forceLTR(D);v={["esri-feature-fields__field-data--date"]:v};return l.tsx("tr",{key:`fields-element-info-row-${x}-${w}`},l.tsx("th",{key:`fields-element-info-row-header-${x}-${w}`,class:"esri-feature-fields__field-header",innerHTML:c}),l.tsx("td",{key:`fields-element-info-row-data-${x}-${w}`,class:this.classes("esri-feature-fields__field-data",
v),innerHTML:D}))};f.renderFields=function(){const {formattedFieldInfos:v}=this.viewModel;return v?.length?l.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},l.tsx("tbody",null,v.map((w,D)=>this.renderFieldInfo(w,D)))):null};f.render=function(){return l.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};f._setupFeatureElementInfo=function(){const {description:v,title:w}=this;this._featureElementInfo?.set({description:v,title:w})};
f._forceLTR=function(v){return`&lrm;${v}`};m._createClass(n,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(v){this.viewModel.attributes=v}},{key:"description",get:function(){return this.viewModel.description},set:function(v){this.viewModel.description=v}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(v){this.viewModel.expressionInfos=v}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(v){this.viewModel.fieldInfos=
v}},{key:"title",get:function(){return this.viewModel.title},set:function(v){this.viewModel.title=v}}]);return n}(z);q.__decorate([h.property()],t.prototype,"attributes",null);q.__decorate([h.property()],t.prototype,"description",null);q.__decorate([h.property()],t.prototype,"expressionInfos",null);q.__decorate([h.property()],t.prototype,"fieldInfos",null);q.__decorate([h.property()],t.prototype,"title",null);q.__decorate([h.property({type:F,nonNullable:!0})],t.prototype,"viewModel",void 0);q.__decorate([h.property(),
a.messageBundle("esri/widgets/Feature/t9n/Feature")],t.prototype,"messages",void 0);q.__decorate([h.property(),a.messageBundle("esri/widgets/support/t9n/uriUtils")],t.prototype,"messagesURIUtils",void 0);return t=q.__decorate([B.subclass("esri.widgets.Feature.FeatureFields")],t)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u){k=function(g){function b(a){a=g.call(this,a)||this;a.attributes=null;a.expressionInfos=null;a.description=null;a.fieldInfos=null;a.title=null;return a}m._inheritsLoose(b,g);m._createClass(b,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:a,fieldInfos:l}=this,d=[];l?.forEach(n=>{if(!n.hasOwnProperty("visible")||n.visible)n=n.clone(),n.label=u.getFieldInfoLabel(n,a),d.push(n)});return d}}]);return b}(k);q.__decorate([h.property()],k.prototype,"attributes",
void 0);q.__decorate([h.property({type:[z]})],k.prototype,"expressionInfos",void 0);q.__decorate([h.property()],k.prototype,"description",void 0);q.__decorate([h.property({type:[F]})],k.prototype,"fieldInfos",void 0);q.__decorate([h.property({readOnly:!0})],k.prototype,"formattedFieldInfos",null);q.__decorate([h.property()],k.prototype,"title",void 0);return k=q.__decorate([B.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],k)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(m,q){function k(t){let A=null;h.some(B=>{B.pattern.test(t)&&(A=B);return!!A});return A}const h=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];m.autoLink=function(t,A){if("string"!==typeof A||!A)return A;const B=k(A);if(!B)return A;const z=A.match(B.pattern);
t=q.replace(q.replace(B.label,{messages:t,hierPart:z&&z[2]}),{appName:B.appName});return A.replace(B.pattern,`<a${B.target?` target="${B.target}"`:""} href="$1"${"_blank"===B.target?' rel\x3d"noreferrer"':""}>${t}</a>`)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v){A=function(w){function D(c,e){var p=w.call(this,c,e)||this;p._refreshTimer=null;p._refreshIntervalInfo=null;p._featureElementInfo=null;p.viewModel=new g;p.messages=null;p._getChartDependencies=function(){var C=m._asyncToGenerator(function*(L){const O=yield l.loadChartsModule(),{destroyed:K,viewModel:U}=m._assertThisInitialized(p);if(!K&&U&&L){var {activeMediaInfo:T}=U,M=yield p._getRendererColors(O);p._renderChart({chartDiv:L,mediaInfo:T,chartsModule:O,
colorMap:M})}});return function(L){return C.apply(this,arguments)}}();return p}m._inheritsLoose(D,w);var x=D.prototype;x.initialize=function(){this._featureElementInfo=new b;this.addHandles([h.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),h.initial),h.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),h.initial)])};x.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo?.destroy()};
x.render=function(){return f.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};x.renderMedia=function(){const {formattedMediaInfoCount:c}=this.viewModel;return c?f.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};x.renderImageMediaInfo=function(c){var {_refreshIntervalInfo:e}=this;
const {activeMediaInfoIndex:p,formattedMediaInfoCount:C}=this.viewModel,{value:L,refreshInterval:O,altText:K,title:U,type:T}=c,{sourceURL:M,linkURL:P}=L;c=a.shouldOpenInNewTab(P??void 0)?"_blank":"_self";const V="_blank"===c?"noreferrer":"";e=O?e:null;e=f.tsx("img",{alt:K||U,key:`media-${T}-${p}-${C}-${e?e.timestamp:0}`,src:(e?e.sourceURL:M)??void 0});return(c=P?f.tsx("a",{title:U,href:P,rel:V,target:c},e):null)?c:e};x.renderChartMediaInfo=function(c){const {activeMediaInfoIndex:e,formattedMediaInfoCount:p}=
this.viewModel;return f.tsx("div",{key:`media-${c.type}-${e}-${p}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};x.renderMediaInfoType=function(){const {activeMediaInfo:c}=this.viewModel;return c?"image"===c.type?this.renderImageMediaInfo(c):c.type.includes("chart")?this.renderChartMediaInfo(c):null:null};x.renderMediaInfo=function(){var {activeMediaInfo:c}=this.viewModel;if(!c)return null;const e=c.title?f.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",
innerHTML:c.title}):null;c=c.caption?f.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:c.caption}):null;return f.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},f.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),e,c)};x.renderMediaPageButton=function(c){if(2>this.viewModel.formattedMediaInfoCount)return null;const e=(c="previous"===c)?this.messages.previous:this.messages.next,p=c?this.classes("esri-feature-media__button",
"esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),C=c?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),L=c?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl",
"esri-icon-left-triangle-arrow");return f.tsx("button",{type:"button",key:c?"media-previous":"media-next",title:e,"aria-label":e,tabIndex:0,class:p,bind:this,onclick:c?this._previous:this._next},f.tsx("span",{"aria-hidden":"true",class:C}),f.tsx("span",{"aria-hidden":"true",class:L}))};x._setupFeatureElementInfo=function(){const {description:c,title:e}=this;this._featureElementInfo?.set({description:c,title:e})};x._next=function(){this.viewModel.next()};x._previous=function(){this.viewModel.previous()};
x._getRenderer=function(){const {isAggregate:c,layer:e}=this.viewModel;return c&&e?.featureReduction&&"renderer"in e.featureReduction?e.featureReduction.renderer:e?.renderer};x._getRendererColors=function(){var c=m._asyncToGenerator(function*(e){const {am4core:p}=e,C=new Map;e=this._getRenderer();if(!e)return C;const L=yield F.getColorsFromRenderer(e);L.delete("default");if(!Array.from(L.values()).every(O=>1===O?.length))return C;C.set("default-line-value",p.color({r:50,g:50,b:50,a:1}));Array.from(L.keys()).forEach(O=>
{O&&C.set(O,p.color(L.get(O)?.[0].toCss(!0)))});return C});return function(e){return c.apply(this,arguments)}}();x._handleMediaKeyup=function(c){const e=k.eventKey(c);"ArrowLeft"===e&&(c.stopPropagation(),this.viewModel.previous());"ArrowRight"===e&&(c.stopPropagation(),this.viewModel.next())};x._renderChart=function(c){const {abilities:e}=this.viewModel,{chartsModule:p,chartDiv:C,mediaInfo:L,colorMap:O}=c,{value:K,type:U}=L,{am4core:T}=p,M=l.getColorSet(T);v.isDarkTheme()&&T.useTheme(p.am4themes_dark);
const P=window.matchMedia("(prefers-reduced-motion: reduce)");e.chartAnimation&&!P.matches?T.useTheme(p.am4themes_animated):T.unuseTheme(p.am4themes_animated);T.useTheme(function(V){V instanceof T.ColorSet&&M&&(V.list=M)});c="pie-chart"===U?this._createPieChart(c):this._createXYChart(c);C.setAttribute("aria-label",L.altText||L.title);c.data=K.series.map(V=>({tooltip:V.tooltip,value:V.value,color:O.get(V.fieldName)})).filter(V=>"pie-chart"===U?null!=V.value&&0<V.value:!0)};x._customizeChartTooltip=
function(c,e){c&&(c.label.wrap=!0,c.label.maxWidth=200,c.autoTextColor=!1,c.getFillFromObject=!1,c.label.fill=e.color("#ffffff"),c.background.fill=e.color({r:0,g:0,b:0,a:.7}))};x._createPieChart=function(c){const {chartDiv:e,chartsModule:p}=c,{am4core:C,am4charts:L}=p;c=C.create(e,L.PieChart);c.rtl=d.isRTL(this.container);const O=c.series.push(new L.PieSeries);O.labels.template.disabled=!0;O.ticks.template.disabled=!0;O.dataFields.value="value";O.dataFields.category="tooltip";this._customizeChartTooltip(O.tooltip,
C);O.slices.template.propertyFields.fill="color";O.slices.template.propertyFields.stroke="color";return c};x._getMinSeriesValue=function(c){let e=0;c.forEach(p=>e=Math.min(p.value,e));return e};x._createColumnChart=function(c,e){const {chartsModule:p,mediaInfo:C}=e;({value:e}=C);const {am4core:L,am4charts:O}=p;var K=c.xAxes.push(new O.CategoryAxis);K.dataFields.category="tooltip";K.renderer.labels.template.disabled=!0;const U=K.tooltip;this._customizeChartTooltip(U,L);U.events.on("sizechanged",()=>
{U.dy=-U.contentHeight});K=c.yAxes.push(new O.ValueAxis);const T=K.renderer.labels.template;K.renderer.minLabelPosition=.05;K.renderer.maxLabelPosition=.95;K.min=this._getMinSeriesValue(e.series);this._customizeChartTooltip(K.tooltip,L);T.wrap=!0;K=c.series.push(new O.ColumnSeries);K.dataFields.valueY="value";K.dataFields.categoryX="tooltip";K.columns.template.propertyFields.fill="color";K.columns.template.propertyFields.stroke="color";c.cursor=new O.XYCursor;15<e.series.length&&(c.scrollbarX=new L.Scrollbar)};
x._createBarChart=function(c,e){const {chartsModule:p,mediaInfo:C}=e;({value:e}=C);const {am4core:L,am4charts:O}=p;var K=c.yAxes.push(new O.CategoryAxis);K.dataFields.category="tooltip";K.renderer.inversed=!0;K.renderer.labels.template.disabled=!0;const U=K.tooltip;this._customizeChartTooltip(U,L);U.events.on("sizechanged",()=>{U.dx=U.contentWidth});K=c.xAxes.push(new O.ValueAxis);const T=K.renderer.labels.template;K.renderer.minLabelPosition=.05;K.renderer.maxLabelPosition=.95;K.min=this._getMinSeriesValue(e.series);
this._customizeChartTooltip(K.tooltip,L);T.wrap=!0;K=c.series.push(new O.ColumnSeries);K.dataFields.valueX="value";K.dataFields.categoryY="tooltip";K.columns.template.propertyFields.fill="color";K.columns.template.propertyFields.stroke="color";c.cursor=new O.XYCursor;15<e.series.length&&(c.scrollbarY=new L.Scrollbar)};x._createLineChart=function(c,e){const {chartsModule:p,mediaInfo:C,colorMap:L}=e;({value:e}=C);const {am4core:O,am4charts:K}=p;var U=c.xAxes.push(new K.CategoryAxis);U.dataFields.category=
"tooltip";U.renderer.labels.template.disabled=!0;const T=U.tooltip;this._customizeChartTooltip(T,O);T.events.on("sizechanged",()=>{T.dy=-T.contentHeight});U=c.yAxes.push(new K.ValueAxis);var M=U.renderer.labels.template;U.renderer.minLabelPosition=.05;U.renderer.maxLabelPosition=.95;U.min=this._getMinSeriesValue(e.series);this._customizeChartTooltip(U.tooltip,O);M.wrap=!0;U=c.series.push(new K.LineSeries);U.dataFields.categoryX="tooltip";U.dataFields.valueY="value";U.strokeWidth=1;if(M=L.get("default-line-value"))U.stroke=
M;U=U.bullets.push(new K.CircleBullet);U.propertyFields.fill="color";U.propertyFields.stroke="color";c.cursor=new K.XYCursor;15<e.series.length&&(c.scrollbarX=new O.Scrollbar)};x._createXYChart=function(c){const {chartDiv:e,chartsModule:p,mediaInfo:C}=c,{type:L}=C,{am4core:O,am4charts:K}=p,U=O.create(e,K.XYChart);U.rtl=d.isRTL(this.container);"column-chart"===L&&this._createColumnChart(U,c);"bar-chart"===L&&this._createBarChart(U,c);"line-chart"===L&&this._createLineChart(U,c);return U};x._clearMediaRefreshTimer=
function(){const {_refreshTimer:c}=this;c&&(clearTimeout(c),this._refreshTimer=null)};x._updateMediaInfoTimestamp=function(c){const e=Date.now();this._refreshIntervalInfo={timestamp:e,sourceURL:c&&this._getImageSource(c,e)};this.scheduleRender()};x._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:c}=this.viewModel;c&&"image"===c.type&&c.refreshInterval&&this._setRefreshTimeout(c)};x._setRefreshTimeout=function(c){const {refreshInterval:e,value:p}=c;e&&(c=6E4*
e,this._updateMediaInfoTimestamp(p.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(p.sourceURL)},c))};x._getImageSource=function(c,e){const p=c.includes("?")?"\x26":"?",[C,L=""]=c.split("#");return`${C}${p}timestamp=${e}${L?"#":""}${L}`};m._createClass(D,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(c){this.viewModel.attributes=c}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(c){this.viewModel.activeMediaInfoIndex=
c}},{key:"description",get:function(){return this.viewModel.description},set:function(c){this.viewModel.description=c}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(c){this.viewModel.fieldInfoMap=c}},{key:"layer",get:function(){return this.viewModel.layer},set:function(c){this.viewModel.layer=c}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(c){this.viewModel.mediaInfos=c}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},
set:function(c){this.viewModel.popupTemplate=c}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(c){this.viewModel.relatedInfos=c}},{key:"title",get:function(){return this.viewModel.title},set:function(c){this.viewModel.title=c}}]);return D}(u);q.__decorate([t.property()],A.prototype,"attributes",null);q.__decorate([t.property()],A.prototype,"activeMediaInfoIndex",null);q.__decorate([t.property()],A.prototype,"description",null);q.__decorate([t.property()],A.prototype,
"fieldInfoMap",null);q.__decorate([t.property()],A.prototype,"layer",null);q.__decorate([t.property()],A.prototype,"mediaInfos",null);q.__decorate([t.property()],A.prototype,"popupTemplate",null);q.__decorate([t.property()],A.prototype,"relatedInfos",null);q.__decorate([t.property()],A.prototype,"title",null);q.__decorate([t.property({type:g})],A.prototype,"viewModel",void 0);q.__decorate([t.property(),n.messageBundle("esri/widgets/Feature/t9n/Feature")],A.prototype,"messages",void 0);return A=q.__decorate([z.subclass("esri.widgets.Feature.FeatureMedia")],
A)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(m,q,k,h,t,A,B,z,F,u,g,b){function a(c,e,p){return l.apply(this,arguments)}function l(){l=q._asyncToGenerator(function*(c,
e,p){t.getOrCreateMapValue(c,e,()=>[]).push(...p)});return l.apply(this,arguments)}function d(){d=q._asyncToGenerator(function*(c){const e=new Map;if(!c)return e;if("visualVariables"in c&&c.visualVariables){var p=c.visualVariables.filter(L=>"color"===L.type);for(var C of p)p=((yield g.getRampStops(C))??[]).map(L=>L.color),yield a(e,C.field||C.valueExpression,p)}if("heatmap"===c.type)C=b.getHeatmapRampStops(c).map(L=>L.color),yield a(e,c.field||c.valueExpression,C);else if("pie-chart"===c.type){for(const L of c.attributes)yield a(e,
L.field||L.valueExpression,[L.color]);yield a(e,"default",[c?.othersCategory?.color,u.getColorFromSymbol(c.backgroundFillSymbol,null)])}else if("dot-density"===c.type){for(const L of c.attributes)yield a(e,L.field||L.valueExpression,[L.color]);yield a(e,"default",[c.backgroundColor])}else if("unique-value"===c.type)if("predominance"===c.authoringInfo?.type)for(const L of c.uniqueValueInfos??[])yield a(e,L.value.toString(),[u.getColorFromSymbol(L.symbol,null)]);else{C=(c.uniqueValueInfos??[]).map(T=>
u.getColorFromSymbol(T.symbol,null));const {field:L,field2:O,field3:K,valueExpression:U}=c;if(L||U)yield a(e,L||U,C);O&&(yield a(e,O,C));K&&(yield a(e,K,C))}else if("class-breaks"===c.type){C=c.classBreakInfos.map(K=>u.getColorFromSymbol(K.symbol,null));const {field:L,valueExpression:O}=c;yield a(e,L??O,C)}else"simple"===c.type&&(yield a(e,"default",[u.getColorFromSymbol(c.symbol,null)]));"defaultSymbol"in c&&c.defaultSymbol&&(yield a(e,"default",[u.getColorFromSymbol(c.defaultSymbol,null)]));e.forEach((L,
O)=>{L=k.unique(L.filter(Boolean),(K,U)=>JSON.stringify(K)===JSON.stringify(U));e.set(O,L)});return e});return d.apply(this,arguments)}function n(c){let e=c.minValue,p=c.maxValue;const C=c.isFirstBreak?"":w.gt+" ";c="percent-of-total"===c.normalizationType?w.pct:"";e=null==e?"":z.format(e);p=null==p?"":z.format(p);return C+e+c+" "+w.ld+" "+p+c}function f(c,e){return"normalizationField"in c&&c.normalizationField?{type:"normalized-field",field:c.field,normalizationField:c.normalizationField}:"field"in
c&&c.field?{type:"field",field:c.field}:"valueExpression"in c&&c.valueExpression?{type:"expression",expression:c.valueExpression,title:c.valueExpressionTitle,returnType:e}:null}const v=h.getLogger("esri.renderers.support.utils"),w={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},D={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},x={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",
day:"long-month-day-year",month:"long-month-day-year",year:"year"};h=B.convertDateFormatToIntlOptions("short-date");m.calculateDateFormatInterval=function(c){c=c.map(O=>new Date(O));const e=c.length;let p=Infinity,C=null;for(let O=0;O<e-1;O++){const K=c[O];let U=Infinity,T=null;for(let M=O+1;M<e;M++){var L=c[M];L=K.getFullYear()!==L.getFullYear()&&"year"||K.getMonth()!==L.getMonth()&&"month"||K.getDate()!==L.getDate()&&"day"||K.getHours()!==L.getHours()&&"hour"||K.getMinutes()!==L.getMinutes()&&"minute"||
K.getSeconds()!==L.getSeconds()&&"second"||"millisecond";const P=D[L];P<U&&(U=P,T=L)}U<p&&(p=U,C=T)}return C};m.createClassBreakLabel=n;m.createColorStops=function(c){const {values:e,colors:p,labelIndexes:C,isDate:L,dateFormatOptions:O}=c;return e.map((K,U)=>{var T=null;if(!C||C.includes(U)){let M;if(M=L?B.formatDate(K,O):z.format(K))T="",0===U?T=w.lt+" ":U===e.length-1&&(T=w.gt+" "),T+=M}return new F({value:K,color:p[U],label:T})})};m.createUniqueValueLabel=function(c){const {value:e,domain:p,fieldInfo:C,
dateFormatInterval:L}=c;c=String(e);const O=p&&"codedValues"in p&&p.codedValues?p.getName(e):null;O?c=O:"number"===typeof e&&(c=C&&"date"===C.type?B.formatDate(e,L&&B.convertDateFormatToIntlOptions(x[L])):z.format(e));return c};m.getAttribute=f;m.getAttributes=function(c,e){const p=[];if("class-breaks"===c.type||"heatmap"===c.type)p.push(f(c,"number"));else if("unique-value"===c.type){var C=c.authoringInfo;if(C&&"relationship"===C.type){if(C.field1&&C.field2){var L=C.field2.field;const O=C.field2.normalizationField;
p.push(f({field:C.field1.field,normalizationField:C.field1.normalizationField}));p.push(f({field:L,normalizationField:O}))}}else L=c.uniqueValueInfos?.[0],C=null,L&&L.value&&(L=typeof c.uniqueValueInfos[0].value,"string"===L||"number"===L)&&(C=L),p.push(f(c,C)),[c.field2,c.field3].forEach(O=>O&&p.push({type:"field",field:O}))}else"attributes"in c&&c.attributes?.forEach(O=>p.push(f(O,"number")));(c=e?e(c):"visualVariables"in c?c.visualVariables:null)&&c.forEach(O=>p.push(f(O,"number")));return k.unique(p.filter(A.isSome),
(O,K)=>"field"===O.type&&"field"===K.type?O.field===K.field:"normalized-field"===O.type&&"normalized-field"===K.type?O.field===K.field&&O.normalizationField===K.normalizationField:"expression"===O.type&&"expression"===K.type?O.expression===K.expression:!1)};m.getColorsFromRenderer=function(c){return d.apply(this,arguments)};m.setLabelsForClassBreaks=function(c){const e=c.classBreakInfos,p=c.normalizationType;let C=[];if(e&&e.length)if("standard-deviation"===c.classificationMethod)v.warn("setLabelsForClassBreaks",
"cannot set labels for class breaks generated using 'standard-deviation' method.");else if(c.round){C.push(e[0].minValue);for(const L of e)C.push(L.maxValue);C=z.round(C);e.forEach((L,O)=>{L.label=n({minValue:0===O?C[0]:C[O],maxValue:C[O+1],isFirstBreak:0===O,normalizationType:p})})}else e.forEach((L,O)=>{L.label=n({minValue:L.minValue,maxValue:L.maxValue,isFirstBreak:0===O,normalizationType:p})})};m.timelineDateFormatOptions=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/numberUtils":function(){define(["exports",
"../../intl","../../intl/number"],function(m,q,k){function h(g,b){return g-b}function t(g,b){let a;a=Number(g.toFixed(b));a<g?g=a+1/10**b:(g=a,a-=1/10**b);a=Number(a.toFixed(b));g=Number(g.toFixed(b));return[a,g]}function A(g,b,a,l,d){g=z(g,b,a,l);b=null==g.next||g.next<=d;return(null==g.previous||g.previous<=d)&&b||g.previous+g.next<=2*d}function B(g){g=String(g);var b=g.match(F);if(b&&b[1])return{integer:b[1].split("").length,fractional:b[3]?b[3].split("").length:0};if(g.toLowerCase().includes("e")&&
(b=g.split("e"),g=b[0],b=b[1],g&&b)){g=Number(g);b=Number(b);const a=0<b;a||(b=Math.abs(b));g=B(g);a?(g.integer+=b,g.fractional=b>g.fractional?0:g.fractional-b):(g.fractional+=b,g.integer=b>g.integer?1:g.integer-b);return g}return{integer:0,fractional:0}}function z(g,b,a,l){const d={previous:null,next:null};if(null!=a){const n=g-a;d.previous=Math.floor(Math.abs(100*(b-a-n)/n))}null!=l&&(g=l-g,d.next=Math.floor(Math.abs(100*(l-b-g)/g)));return d}const F=/^-?(\d+)(\.(\d+))?$/i,u={maximumFractionDigits:20};
m.format=function(g){return k.formatNumber(g,u)};m.numDigits=B;m.percentChange=z;m.round=function(g,b={}){g=g.slice(0);const {tolerance:a=2,strictBounds:l=!1,indexes:d=g.map((f,v)=>v)}=b;d.sort(h);for(b=0;b<d.length;b++){const f=d[b],v=g[f],w=0===f?null:g[f-1],D=f===g.length-1?null:g[f+1],x=B(v).fractional;if(x){let c=0,e=!1;for(var n=void 0;c<=x&&!e;)n=t(v,c),n=l&&0===b?n[1]:n[0],e=A(v,n,w,D,a),c++;e&&(g[f]=n)}}return g};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){function l(M){M=M.symbolLayers;if(!M)return null;let P=null;M.forEach(V=>{if("object"!==V.type||null==V.resource?.href)P="water"===V.type?z.unwrap(V.color):z.isSome(V.material)?z.unwrap(V.material.color):null});return P?new h(P):null}function d(M,P){if(null==P||null==M)return M;M=M.toRgba();M[3]*=P;return new h(M)}function n(M,P,V){if(M=M.symbolLayers){var H=y=>{y=z.isSome(y)?y:null;P=P??y??(null!=V?T:null);return d(P,V)};M.forEach(y=>{if("object"!==y.type||null==
y.resource?.href||P)if("water"===y.type)y.color=H(y.color);else{var E=z.isSome(y.material)?y.material.color:null;E=H(E);z.isNone(y.material)?y.material=new a.Symbol3DMaterial({color:E}):y.material.color=E;null!=V&&"outline"in y&&z.isSome(y.outline)&&z.isSome(y.outline.color)&&(y.outline.color=d(y.outline.color,V))}})}}function f(M,P){return v.apply(this,arguments)}function v(){v=k._asyncToGenerator(function*(M,P){(M=M.symbolLayers)&&(yield A.forEach(M,function(){var V=k._asyncToGenerator(function*(H){return w(H,
P)});return function(H){return V.apply(this,arguments)}}()))});return v.apply(this,arguments)}function w(M,P){return D.apply(this,arguments)}function D(){D=k._asyncToGenerator(function*(M,P){switch(M.type){case "extrude":M.size="number"===typeof P[2]?P[2]:0;break;case "icon":case "line":case "text":P=x(P);z.isSome(P)&&(M.size=P);break;case "path":const V=p(P,u.ONES,[M.width,void 0,M.height]);M.width=O(P[0],M.width,1,V);M.height=O(P[2],M.height,1,V);break;case "object":yield c(M,P)}});return D.apply(this,
arguments)}function x(M){for(const P of M)if("number"===typeof P)return P;return null}function c(M,P){return e.apply(this,arguments)}function e(){e=k._asyncToGenerator(function*(M,P){const {resourceSize:V,symbolSize:H}=yield C(M),y=p(P,V,H);M.width=O(P[0],H[0],V[0],y);M.depth=O(P[1],H[1],V[1],y);M.height=O(P[2],H[2],V[2],y)});return e.apply(this,arguments)}function p(M,P,V){for(let H=0;3>H;H++){const y=M[H];switch(y){case "symbol-value":return M=V[H],null!=M?M/P[H]:1;case "proportional":break;default:if(y&&
P[H])return y/P[H]}}return 1}function C(M){return L.apply(this,arguments)}function L(){L=k._asyncToGenerator(function*(M){const P=yield(yield new Promise((r,G)=>m(["./symbolLayerUtils"],r,G))).computeObjectLayerResourceSize(M,10),{width:V,height:H,depth:y}=M;M=[V,y,H];let E=1;for(var I=0;3>I;I++){const r=M[I];if(null!=r){E=r/P[I];break}}for(I=0;3>I;I++)null==M[I]&&(M[I]=P[I]*E);return{resourceSize:P,symbolSize:M}});return L.apply(this,arguments)}function O(M,P,V,H){switch(M){case "proportional":return V*
H;case "symbol-value":return null!=P?P:V;default:return M}}function K(){K=k._asyncToGenerator(function*(M,P){if(M&&P){if(t.isSymbol3D(M))return f(M,P);if(t.isSymbol2D(M)&&(P=x(P),!z.isNone(P)))switch(M.type){case "simple-marker":M.size=P;break;case "picture-marker":const V=M.width/M.height;1<V?(M.width=P,M.height=P*V):(M.width=P*V,M.height=P);break;case "simple-line":M.width=P;break;case "text":M.font.size=P}}});return K.apply(this,arguments)}function U(){U=k._asyncToGenerator(function*(M,P){const V=
yield M.fetchSymbol(P);return V?V:M.fetchCIMSymbol(P)});return U.apply(this,arguments)}const T=new h("white");q.applyColorToSymbol=function(M,P,V){if(M&&(P||null!=V))if(P&&(P=new h(P)),t.isSymbol3D(M))n(M,P,V);else if(t.isSymbol2D(M)){if(P=P??M.color)M.color=d(P,V);null!=V&&"outline"in M&&M.outline&&M.outline.color&&(M.outline.color=d(M.outline.color,V))}};q.applyOpacityToColor=d;q.applyRotationToSymbol=function(M,P,V){M&&null!=P&&(t.isSymbol3D(M)?(M=M.symbolLayers)&&M.forEach(H=>{if(H&&"object"===
H.type)switch(V){case "tilt":H.tilt=P;break;case "roll":H.roll=P;break;default:H.heading=P}}):!t.isSymbol2D(M)||"simple-marker"!==M.type&&"picture-marker"!==M.type&&"text"!==M.type||(M.angle=P))};q.applySizesToSymbol=function(M,P){return K.apply(this,arguments)};q.fetchWebStyleSymbol=function(M,P){return U.apply(this,arguments)};q.getCSSFilterFromEffectList=function(M){if(!M)return null;M=M.effects.filter(P=>"bloom"!==P.type).map(P=>P.toJSON());return g.effectFunctionsFromJSON(M)};q.getColorFromSymbol=
function(M,P){if(!M)return null;let V=null;t.isSymbol3D(M)?V=l(M):t.isSymbol2D(M)&&(V=M.color?new h(M.color):null);return V?d(V,P):null};q.getIconHref=function(M){return z.unwrapOrThrow(M.resource).href};q.getSymbolOutlineSize=function(M){if(!M)return 0;if(t.isSymbol3D(M)){{const P=M.symbolLayers&&M.symbolLayers.length;P?(M=M.symbolLayers.getItemAt(P-1),M="outline"in M?z.get(M,"outline","size"):void 0):M=void 0}return z.isSome(M)?M:0}return F.px2pt(b.getStroke(M)?.width)};q.isVolumetricSymbol=function(M){if(z.isNone(M)||
!("symbolLayers"in M)||z.isNone(M.symbolLayers))return!1;switch(M.type){case "point-3d":return M.symbolLayers.some(P=>"object"===P.type);case "line-3d":return M.symbolLayers.some(P=>"path"===P.type);case "polygon-3d":return M.symbolLayers.some(P=>"object"===P.type||"extrude"===P.type);default:return!1}};q.symbolHasExtrudeSymbolLayer=function(M){return z.isSome(M)&&"polygon-3d"===M.type&&M.symbolLayers.some(P=>"extrude"===P.type)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(m,q,k,h,t,A,B){function z(g){if(!g)return null;let b=null;switch(g.type){case "simple-fill":case "picture-fill":case "simple-marker":b=z(g.outline);break;case "simple-line":const a=A.pt2px(g.width);null!=g.style&&"none"!==g.style&&0!==a&&(b={color:g.color,style:u(g.style),width:a,cap:g.cap,join:"miter"===g.join?A.pt2px(g.miterLimit):g.join});break;default:b=null}return b}const F=new t(1E3),u=(()=>{const g={};return b=>{if(g[b])return g[b];const a=b.replace(/-/g,"");return g[b]=a}})();k=new k([128,
128,128]);m.defaultThematicColor=k;m.dekebabifyLineStyle=u;m.getFill=function(g){const b=g.style;let a=null;if(g)switch(g.type){case "simple-marker":"cross"!==b&&"x"!==b&&(a=g.color);break;case "simple-fill":"solid"===b?a=g.color:"none"!==b&&(a={type:"pattern",x:0,y:0,src:q.getAssetUrl(`esri/symbols/patterns/${b}.png`),width:5,height:5});break;case "picture-fill":a={type:"pattern",src:g.url,width:A.pt2px(g.width)*g.xscale,height:A.pt2px(g.height)*g.yscale,x:A.pt2px(g.xoffset),y:A.pt2px(g.yoffset)};
break;case "text":a=g.color;break;case "cim":a=B.getCIMSymbolColor(g)}return a};m.getPatternUrlWithColor=function(g,b){const a=g+"-"+b;return void 0!==F.get(a)?Promise.resolve(F.get(a)):h(g,{responseType:"image"}).then(l=>{l=l.data;const d=l.naturalWidth,n=l.naturalHeight,f=document.createElement("canvas");f.width=d;f.height=n;const v=f.getContext("2d");v.fillStyle=b;v.fillRect(0,0,d,n);v.globalCompositeOperation="destination-in";v.drawImage(l,0,0);l=f.toDataURL();F.put(a,l);return l})};m.getStroke=
z;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(m){return function(){function q(h,t){this._storage=new m.MemCacheStorage;this._storage.maxSize=h;t&&this._storage.registerRemoveFunc("",t)}var k=q.prototype;k.put=function(h,t){this._storage.put(h,t,1,1)};k.pop=function(h){return this._storage.pop(h)};k.get=function(h){return this._storage.get(h)};k.clear=function(){this._storage.clearAll()};k.destroy=function(){this._storage.destroy()};
return q}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(m,q,k){function h(b){b=k.toCIMSymbolJSON(b);if("CIMTextSymbol"===b?.type)return b.height??0;let a=0;if(b?.symbolLayers)for(const l of b.symbolLayers)k.isCIMMarker(l)&&null!=l.size&&l.size>a?a=l.size:k.isCIMStroke(l)&&null!=l.width&&l.width>a?a=l.width:k.isCIMFill(l);return a}function t(b,a,l,d){if(b)if("CIMTextSymbol"===b.type)null!=b.height&&(b.height*=a);else{if(l&&b.effects)for(const n of b.effects)z(n,
a);if(b.symbolLayers)for(const n of b.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":A(n,a,d);break;case "CIMPictureStroke":case "CIMSolidStroke":!d?.preserveOutlineWidth&&n.width&&(n.width*=a);break;case "CIMPictureFill":n.height&&(n.height*=a);n.offsetX&&(n.offsetX*=a);n.offsetY&&(n.offsetY*=a);break;case "CIMHatchFill":t(n.lineSymbol,a,!0,{...d,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=a),n.offsetY&&(n.offsetY*=a),n.separation&&(n.separation*=a)}}}function A(b,
a,l){if(b&&(b.markerPlacement&&B(b.markerPlacement,a),b.offsetX&&(b.offsetX*=a),b.offsetY&&(b.offsetY*=a),b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*a,y:b.anchorPoint.y*a}),b.size=null!=b.size?b.size*a:0,"CIMVectorMarker"===b.type&&b.markerGraphics))for(const d of b.markerGraphics)b.scaleSymbolsProportionally||t(d.symbol,a,!0,l)}function B(b,a){k.isCIMMarkerStrokePlacement(b)&&b.offset&&(b.offset*=a);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&
(b.customEndingOffset*=a);b.offsetAlongLine&&(b.offsetAlongLine*=a);if(b.placementTemplate&&b.placementTemplate.length){var l=b.placementTemplate.map(d=>d*a);b.placementTemplate=l}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=a);b.placementTemplate&&b.placementTemplate.length&&(l=b.placementTemplate.map(d=>d*a),b.placementTemplate=l);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=a);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&
(b.offsetAlongLine*=a);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=a);b.endPosition&&(b.endPosition*=a);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&(b.offsetX*=a);b.offsetY&&(b.offsetY*=a);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&(b.offsetX*=a),b.offsetY&&(b.offsetY*=a),b.stepX&&(b.stepX*=a),b.stepY&&(b.stepY*=a)}}function z(b,a){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=a);break;
case "CIMGeometricEffectBuffer":b.size&&(b.size*=a);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=a);b.endCut&&(b.endCut*=a);b.middleCut&&(b.middleCut*=a);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&(b.customEndingOffset*=a);b.offsetAlongLine&&(b.offsetAlongLine*=a);if(b.dashTemplate&&b.dashTemplate.length){const l=b.dashTemplate.map(d=>d*a);b.dashTemplate=l}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&
(b.length*=a);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=a);b.offsetY&&(b.offsetY*=a);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=a);break;case "CIMGeometricEffectRegularPolygon":b.radius&&(b.radius*=a);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&(b.fromWidth*=a);b.length&&(b.length*=a);b.toWidth&&(b.toWidth*=a);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=a),b.period&&(b.period*=a)}}function F(b,
a){if(b){var l="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(l?.symbolLayers)for(const d of l.symbolLayers)if(!(d.colorLocked||b&&(k.isCIMStroke(d)||k.isCIMMarker(d)&&d.markerPlacement&&k.isCIMMarkerStrokePlacement(d.markerPlacement))))switch(d.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":d.tintColor&&u(a,d.tintColor);break;case "CIMVectorMarker":d.markerGraphics?.forEach(n=>{F(n.symbol,a)});break;case "CIMSolidStroke":case "CIMSolidFill":u(a,
d.color);break;case "CIMHatchFill":F(d.lineSymbol,a)}}}function u(b,a){for(const l of b)if(l.join(".")===a.join("."))return;b.push(a)}function g(b,a,l){if(b){var d="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===d?.type;if(d?.symbolLayers)for(const n of d.symbolLayers)if(!n.colorLocked){if(b)if(l){if({layersToColor:d}=l,(k.isCIMStroke(n)||k.isCIMMarker(n)&&n.markerPlacement&&k.isCIMMarkerStrokePlacement(n.markerPlacement))&&"fill"===d||k.isCIMFill(n)&&"outline"===d)continue}else if(k.isCIMStroke(n)||
k.isCIMMarker(n)&&n.markerPlacement&&k.isCIMMarkerStrokePlacement(n.markerPlacement))continue;d=a.toArray();switch(n.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":n.tintColor=d;break;case "CIMVectorMarker":n.markerGraphics?.forEach(f=>{g(f.symbol,a,l)});break;case "CIMSolidStroke":case "CIMSolidFill":n.color=d;break;case "CIMHatchFill":g(n.lineSymbol,a,l)}}}}m.applyCIMSymbolColor=function(b,a,l){a instanceof q||(a=new q(a));(b=k.toCIMSymbolJSON(b))&&g(b,a,l)};m.applyCIMSymbolRotation=
function(b,a,l=!1){b=k.toCIMSymbolJSON(b);l&&0!==a&&(a=360-a);if("CIMTextSymbol"===b?.type)b.angle=a;else if("CIMPointSymbol"===b?.type&&b.symbolLayers){l=a-(b.angle||0);for(const d of b.symbolLayers)if(k.isCIMMarker(d)){let n=d.rotation||0;n=d.rotateClockwise?n-l:n+l;d.rotation=n}b.angle=a}};m.getCIMSymbolColor=function(b){b=k.toCIMSymbolJSON(b);const a=[];F(b,a);return a.length?new q(k.fromCIMColor(a[0])):null};m.getCIMSymbolRotation=function(b,a=!1){b=k.toCIMSymbolJSON(b);return"CIMTextSymbol"===
b?.type||"CIMPointSymbol"===b?.type?(b=b.angle,null!=b&&0!==b&&a?360-b:b??0):0};m.getCIMSymbolSize=h;m.getCIMSymbolType=function(b){b=k.toCIMSymbolJSON(b);if(!b)return null;switch(b.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};m.scaleCIMMarker=A;m.scaleCIMSymbol=t;m.scaleCIMSymbolTo=function(b,
a,l){if(b){var d=k.toCIMSymbolJSON(b);b=h(b);if(0===b){if(d)if("CIMTextSymbol"===d.type)d.height=a;else if(d.symbolLayers)for(const n of d.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":n.size=a;break;case "CIMPictureStroke":case "CIMSolidStroke":n.width=a}}else t(d,a/b,!1,l)}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(m,q){function k(g){let b=g.length;for(;b--;)if(!" /-,\n".includes(g.charAt(b)))return!1;
return!0}function h(g,b){const a=[];var l=0;let d=-1;do d=g.indexOf("[",l),d>=l&&(d>l&&(l=g.substr(l,d-l),a.push([l,null,k(l)])),l=d+1,d=g.indexOf("]",l),d>=l&&(d>l&&(l=g.substr(l,d-l),(l=b[l])&&a.push([null,l,!1])),l=d+1));while(-1!==d);l<g.length-1&&(g=g.substr(l),a.push([g,null,k(g)]));return a}function t(g,b,a){let l="",d=null;for(const n of b){const [f,v,w]=n;if(f)w?d=f:(d&&(l+=d,d=null),l+=f);else if(b=g.attributes[v])d&&(l+=d,d=null),l+=b}return A(l,a)}function A(g,b){"string"!==typeof g&&
(g=String(g));switch(b){case "LowerCase":return g.toLowerCase();case "Allcaps":return g.toUpperCase();default:return g}}function B(g){return g?{r:g[0],g:g[1],b:g[2],a:g[3]/255}:{r:0,g:0,b:0,a:0}}function z(g){if(!g)return null;switch(g.type){case "CIMPolygonSymbol":if(g.symbolLayers)for(const b of g.symbolLayers)if(g=z(b),null!=g)return g;break;case "CIMTextSymbol":return z(g.symbol);case "CIMSolidFill":return g.color}}function F(g){if(g)switch(g.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(g=
g.symbolLayers)for(const b of g)if(g=F(b),null!=g)return g;break;case "CIMTextSymbol":return F(g.symbol);case "CIMSolidStroke":case "CIMSolidFill":return g.color}}function u(g){if(g)switch(g.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(g.symbolLayers)for(const b of g.symbolLayers)if(g=u(b),void 0!==g)return g;break;case "CIMTextSymbol":return u(g.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return g.width}}q.adjustTextCase=A;q.analyzeTextParts=h;q.assignTextValuesFromFeature=
t;q.attributesToFields=function(g){return(g?Object.keys(g):[]).map(b=>({name:b,alias:b,type:"string"===typeof g[b]?"esriFieldTypeString":"esriFieldTypeDouble"}))};q.colorToArray=function(g){return[g.r,g.g,g.b,g.a]};q.createLabelOverrideFunction=function(g,b,a){const l=h(b,g);return d=>t(d,l,a)};q.evaluateValueOrFunction=function(g,b,a,l){return"function"===typeof g?g(b,a,l):g};q.fromCIMColor=B;q.fromCIMFontDecoration=function(g){return g.underline?"underline":g.strikethrough?"line-through":"none"};
q.fromCIMFontStyle=function(g){let b="",a="";g&&(g=g.toLowerCase(),g.includes("italic")?b="italic":g.includes("oblique")&&(b="oblique"),g.includes("bold")?a="bold":g.includes("light")&&(a="lighter"));return{style:b,weight:a}};q.fromCIMHorizontalAlignment=function(g){switch(g){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};q.fromCIMVerticalAlignment=function(g){switch(g){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";
case "Bottom":return"bottom"}};q.getFillColor=z;q.getFontStyle=function(g){if(!g)return"normal";switch(g.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};q.getFontWeight=function(g){if(!g)return"normal";switch(g.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};q.getStrokeColor=F;q.getStrokeWidth=u;q.getTintColor=g=>g.tintColor?B(g.tintColor):{r:255,g:255,b:255,a:1};q.getValue=
(g,b=0)=>null==g||isNaN(g)?b:g;q.importGeometryEngine=function(){return new Promise((g,b)=>m(["../../geometry/geometryEngineJSON"],g,b))};q.isCIMFill=function(g){return null!=g&&("CIMGradientFill"===g.type||"CIMHatchFill"===g.type||"CIMPictureFill"===g.type||"CIMSolidFill"===g.type||"CIMWaterFill"===g.type)};q.isCIMMarker=function(g){return"CIMVectorMarker"===g.type||"CIMPictureMarker"===g.type||"CIMBarChartMarker"===g.type||"CIMCharacterMarker"===g.type||"CIMPieChartMarker"===g.type||"CIMStackedBarChartMarker"===
g.type};q.isCIMMarkerStrokePlacement=function(g){return null!=g&&("CIMMarkerPlacementAlongLineRandomSize"===g.type||"CIMMarkerPlacementAlongLineSameSize"===g.type||"CIMMarkerPlacementAlongLineVariableSize"===g.type||"CIMMarkerPlacementAtExtremities"===g.type||"CIMMarkerPlacementAtMeasuredUnits"===g.type||"CIMMarkerPlacementAtRatioPositions"===g.type||"CIMMarkerPlacementOnLine"===g.type||"CIMMarkerPlacementOnVertices"===g.type)};q.isCIMStroke=function(g){return"CIMGradientStroke"===g.type||"CIMPictureStroke"===
g.type||"CIMSolidStroke"===g.type};q.isGeometryEngineRequired=g=>{if(!g)return!1;for(const b of g)switch(b.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};q.isSVGImage=g=>g.includes("data:image/svg+xml");q.mapCIMSymbolToGeometryType=function(g){if(!g)return null;switch(g.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";
default:return null}};q.resampleHermite=function(g,b,a,l,d,n,f=!0){const v=b/d;a/=n;const w=Math.ceil(v/2),D=Math.ceil(a/2);for(let e=0;e<n;e++)for(let p=0;p<d;p++){const C=4*(p+(f?n-e-1:e)*d);var x=0;let L=0,O=0,K=0,U=0,T=0,M=0;const P=(e+.5)*a;for(let V=Math.floor(e*a);V<(e+1)*a;V++){var c=Math.abs(P-(V+.5))/D;const H=(p+.5)*v;c*=c;for(let y=Math.floor(p*v);y<(p+1)*v;y++){let E=Math.abs(H-(y+.5))/w;x=Math.sqrt(c+E*E);-1<=x&&1>=x&&(x=2*x*x*x-3*x*x+1,0<x&&(E=4*(y+V*b),M+=x*g[E+3],O+=x,255>g[E+3]&&
(x=x*g[E+3]/250),K+=x*g[E],U+=x*g[E+1],T+=x*g[E+2],L+=x))}}l[C]=K/L;l[C+1]=U/L;l[C+2]=T/L;l[C+3]=M/O}};q.toCIMSymbolJSON=function(g){return g.data?.symbol??null};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(m,q,k,h,t){function A(a,l){const d=[],n=a.length-1;5===a.length?d.push(0,2,4):d.push(0,n);return a.map((f,v)=>
d.includes(v)?t.createStopLabel(f,v,n,l):null)}function B(){B=k._asyncToGenerator(function*(a,l,d){let n=!1,f=[],v=[];if(a.stops){var w=a.stops;f=w.map(x=>x.value);(n=w.some(x=>!!x.label))&&(v=w.map(x=>x.label))}w=f[f.length-1];if(null==f[0]&&null==w)return null;const D=n?null:A(f,d??!1);return(yield Promise.all(f.map(function(){var x=k._asyncToGenerator(function*(c,e){const p="opacity"===a.type?yield z(c,a,l):(yield new Promise((C,L)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],
C,L))).getColor(a,c);return{value:c,color:p,label:n?v[e]:D?.[e]??""}});return function(c,e){return x.apply(this,arguments)}}()))).reverse()});return B.apply(this,arguments)}function z(a,l){return F.apply(this,arguments)}function F(){F=k._asyncToGenerator(function*(a,l,d=b){d=new h(d);a=(yield new Promise((n,f)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],n,f))).getOpacity(l,a);null!=a&&(d.a=a);return d});return F.apply(this,arguments)}function u(a,l){const {startIndex:d,endIndex:n,
weight:f}=g(a,l);if(d===n)return l[d].color;a=h.blendColors(l[d].color,l[n].color,f);return new h(a)}function g(a,l){let d=0,n=l.length-1;l.some((f,v)=>{if(a<f.value)return n=v,!0;d=v;return!1});return{startIndex:d,endIndex:n,weight:(a-l[d].value)/(l[n].value-l[d].value)}}const b=new h([64,64,64]);q.getColorFromPointCloudStops=u;q.getRampStops=function(a,l,d){return B.apply(this,arguments)};q.getRampStopsForPointCloud=function(a){let l=!1,d=[],n=[];d=a.map(w=>w.value);(l=a.some(w=>!!w.label))&&(n=
a.map(w=>w.label??""));const f=d[d.length-1];if(null==d[0]&&null==f)return null;const v=l?null:A(d,!1);return d.map((w,D)=>{const x=u(w,a);return{value:w,color:x,label:l?n[D]:v?.[D]??""}}).reverse()};q.getStrectchRampStops=function(a,l){let d=[];if(a&&"multipart"===a.type)a.colorRamps.reverse().forEach((n,f)=>{0===f?d.push({value:l.max,color:new h(n.toColor),label:"high"}):d.push({value:null,color:new h(n.toColor),label:""});f===a.colorRamps.length-1?d.push({value:l.min,color:new h(n.fromColor),label:"low"}):
d.push({value:null,color:new h(n.fromColor),label:""})});else{let n,f;a&&"algorithmic"===a.type?(n=a.fromColor,f=a.toColor):(n=[0,0,0,1],f=[255,255,255,1]);d=[{value:l.max,color:new h(f),label:"high"},{value:l.min,color:new h(n),label:"low"}]}return d};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(m,q,k,h,t,A,B){function z(b){return F.apply(this,arguments)}function F(){F=k._asyncToGenerator(function*(b){if(!("visualVariables"in b&&b.visualVariables))return null;b=b.visualVariables.find(d=>"color"===d.type);if(!b)return null;var a=null,l=null;if(b.stops){if(1===b.stops.length)return b.stops[0].color;a=b.stops[0].value;l=b.stops[b.stops.length-1].value}a=null!=a&&null!=l?a+(l-a)/2:0;({getColor:l}=yield new Promise((d,n)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],
d,n)));return l(b,a)??null});return F.apply(this,arguments)}function u(){u=k._asyncToGenerator(function*(b,a){const l=b.trailCap,d=b.trailWidth||1;b=a||(yield z(b))||b.color;return new B({cap:l,color:b,width:d})});return u.apply(this,arguments)}const g=t.convertDateFormatToIntlOptions("short-date");q.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];q.SPECIAL_CHARS_GREATER_THAN="\x3e";q.SPECIAL_CHARS_LESS_THAN="\x3c";q.createStopLabel=function(b,
a,l,d){let n="";0===a?n="\x3c ":a===l&&(n="\x3e ");a=null;a=d?t.formatDate(b,g):A.format(b);return n+a};q.getMedianColor=z;q.getSymbolForFlowRenderer=function(b,a){return u.apply(this,arguments)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(m,q){m.getHeatmapRampStops=function(k){if(!k.colorStops)return[];const h=[...k.colorStops].filter(A=>0<A.color?.a);
let t=h.length-1;if(h&&h[0]){const A=h[t];A&&1!==A.ratio&&(h.push(new q({ratio:1,color:A.color})),t++)}return h.map((A,B)=>{let z="";0===B?z=k.legendOptions?.minLabel||"low":B===t&&(z=k.legendOptions?.maxLabel||"high");return{color:A.color,label:z,ratio:A.ratio}}).reverse()};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b){const a={chartAnimation:!0};k=function(l){function d(f){f=l.call(this,f)||this;f.abilities={...a};f.activeMediaInfoIndex=0;f.attributes=null;f.description=null;f.fieldInfoMap=null;f.formattedAttributes=null;f.expressionAttributes=null;f.isAggregate=!1;f.layer=null;f.mediaInfos=null;f.popupTemplate=null;f.relatedInfos=null;f.title=null;return f}m._inheritsLoose(d,l);var n=d.prototype;n.castAbilities=function(f){return{...a,...f}};n.setActiveMedia=function(f){this._setContentElementMedia(f)};
n.next=function(){this._pageContentElementMedia(1)};n.previous=function(){this._pageContentElementMedia(-1)};n._setContentElementMedia=function(f){const {formattedMediaInfoCount:v}=this;this.activeMediaInfoIndex=(f+v)%v};n._pageContentElementMedia=function(f){const {activeMediaInfoIndex:v}=this;this._setContentElementMedia(v+f)};n._formatMediaInfos=function(){const {mediaInfos:f,layer:v}=this,w=this.attributes??{},D=this.formattedAttributes??{},x=this.expressionAttributes??{},c=this.fieldInfoMap??
new Map;return f?.map(e=>{e=e?.clone();if(!e)return null;e.title=g.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:c,globalAttributes:D,expressionAttributes:x,layer:v,text:e.title});e.caption=g.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:c,globalAttributes:D,expressionAttributes:x,layer:v,text:e.caption});e.altText=g.substituteFieldsInLinksAndAttributes({attributes:w,fieldInfoMap:c,globalAttributes:D,expressionAttributes:x,layer:v,text:e.altText});if("image"===
e.type){var {value:p}=e;this._setImageValue({value:p,formattedAttributes:D,layer:v});return e.value.sourceURL?e:void 0}return"pie-chart"===e.type||"line-chart"===e.type||"column-chart"===e.type||"bar-chart"===e.type?({value:p}=e,this._setChartValue({value:p,chartType:e.type,attributes:w,formattedAttributes:D,layer:v,expressionAttributes:x}),e):null}).filter(h.isSome)??[]};n._setImageValue=function(f){const v=this.fieldInfoMap??new Map,{value:w,formattedAttributes:D,layer:x}=f,{linkURL:c,sourceURL:e}=
w;e&&(f=g.fixTokens(e,x),w.sourceURL=g.substituteAttributes({formattedAttributes:D,template:f,fieldInfoMap:v}));c&&(f=g.fixTokens(c,x),w.linkURL=g.substituteAttributes({formattedAttributes:D,template:f,fieldInfoMap:v}))};n._setChartValue=function(f){const {value:v,attributes:w,formattedAttributes:D,chartType:x,layer:c,expressionAttributes:e}=f,{popupTemplate:p,relatedInfos:C}=this,{fields:L,normalizeField:O}=v;v.fields=g.getFixedFieldNames(L,c);O&&(v.normalizeField=g.getFixedFieldName(O,c));if(L.some(U=>
!!(null!=D[U]||g.isRelatedField(U)&&C?.size))){var K=p?.fieldInfos??[];L.forEach(U=>{g.isRelatedField(U)?v.series=[...v.series,...this._getRelatedChartInfos({fieldInfos:K,fieldName:U,formattedAttributes:D,chartType:x,value:v})]:(U=this._getChartOption({value:v,attributes:w,chartType:x,formattedAttributes:D,expressionAttributes:e,fieldName:U,fieldInfos:K}),v.series.push(U))})}};n._getRelatedChartInfos=function(f){const {fieldInfos:v,fieldName:w,formattedAttributes:D,chartType:x,value:c}=f,e=[],p=b.getRelatedFieldInfo(w);
f=p&&this.relatedInfos?.get(p.layerId.toString());if(!f)return e;const {relatedFeatures:C,relation:L}=f;if(!L||!C)return e;({cardinality:f}=L);C.forEach(O=>{const {attributes:K}=O;K&&Object.keys(K).forEach(U=>{U===p.fieldName&&e.push(this._getChartOption({value:c,attributes:K,formattedAttributes:D,fieldName:w,chartType:x,relatedFieldName:U,hasMultipleRelatedFeatures:1<C?.length,fieldInfos:v}))})});return"one-to-many"===f||"many-to-many"===f?e:[e[0]]};n._getTooltip=function({label:f,value:v,chartType:w}){return"pie-chart"===
w?`${f}`:`${f}: ${v}`};n._getChartOption=function(f){const {value:v,attributes:w,formattedAttributes:D,expressionAttributes:x,fieldName:c,relatedFieldName:e,fieldInfos:p,chartType:C,hasMultipleRelatedFeatures:L}=f;var O=this.layer,K=this.fieldInfoMap??new Map;const {normalizeField:U,tooltipField:T}=v;f=U?g.isRelatedField(U)?w[b.getRelatedFieldInfo(U).fieldName]:w[U]:null;var M=g.isExpressionField(c)&&x&&void 0!==x[c]?x[c]:e&&void 0!==w[e]?w[e]:void 0!==w[c]?w[c]:D[c];f=new u({fieldName:c,value:void 0===
M?null:M&&f?M/f:M});if(g.isRelatedField(c))return O=K.get(c.toLowerCase()),M=T&&K.get(T.toLowerCase()),K=O?.fieldName??c,M=L&&T?b.getRelatedFieldInfo(T).fieldName:M?.fieldName??T,f.tooltip=this._getTooltip({label:L&&M?w[M]:D[M]??O?.label??O?.fieldName??e,value:L&&e?w[e]:D[K],chartType:C}),f;K=g.getFieldInfo(p,c);O=g.getFixedFieldName(c,O);K=T&&void 0!==D[T]?D[T]:g.getFieldInfoLabel(K||new F({fieldName:O}),this.popupTemplate?.expressionInfos);f.tooltip=this._getTooltip({label:K,value:D[O],chartType:C});
return f};m._createClass(d,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return d}(k);q.__decorate([t.property()],k.prototype,"abilities",void 0);q.__decorate([A.cast("abilities")],k.prototype,"castAbilities",null);q.__decorate([t.property()],k.prototype,"activeMediaInfoIndex",
void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"activeMediaInfo",null);q.__decorate([t.property()],k.prototype,"attributes",void 0);q.__decorate([t.property()],k.prototype,"description",void 0);q.__decorate([t.property()],k.prototype,"fieldInfoMap",void 0);q.__decorate([t.property()],k.prototype,"formattedAttributes",void 0);q.__decorate([t.property()],k.prototype,"expressionAttributes",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"formattedMediaInfos",null);q.__decorate([t.property()],
k.prototype,"isAggregate",void 0);q.__decorate([t.property()],k.prototype,"layer",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"formattedMediaInfoCount",null);q.__decorate([t.property()],k.prototype,"mediaInfos",void 0);q.__decorate([t.property()],k.prototype,"popupTemplate",void 0);q.__decorate([t.property()],k.prototype,"relatedInfos",void 0);q.__decorate([t.property()],k.prototype,"title",void 0);return k=q.__decorate([z.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
k)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L,O,K,U,T,M,P,V,H){function y(ea,fa){if(!fa.relationships)return null;let Q=null;({relationships:fa}=fa);fa.some(Y=>Y.id===parseInt(ea,10)?(Q=Y,!0):!1);return Q}function E({originRelationship:ea,relationships:fa,layerId:Q}){let Y=null;fa&&fa.some(ba=>{`${ba.relatedTableId}`===Q&&ba.id===ea?.id&&(Y=ba);return!!Y});return Y}function I(ea,fa){fa=fa.toLowerCase();for(const Q in ea)if(Q.toLowerCase()===fa)return ea[Q];return null}function r(ea,
fa,Q,Y){const ba=new M;ba.outFields=["*"];ba.relationshipId="number"===typeof fa.id?fa.id:parseInt(fa.id,10);ba.objectIds=[ea.attributes[Q.objectIdField]];return Q.queryRelatedFeatures?.(ba,Y)??Promise.resolve({})}function G(ea,fa,Q){let Y=0;const ba=[];for(;Y<fa.length;)ba.push(`${ea} IN (${fa.slice(Y,Q+Y)})`),Y+=Q;return ba.join(" OR ")}function J(ea,fa,Q,Y){return N.apply(this,arguments)}function N(){N=q._asyncToGenerator(function*(ea,fa,Q,Y){var ba=Q.layerId.toString();const {layerInfo:S,relation:X,
relatedFields:aa,outStatistics:ha,url:ia,sourceSpatialReference:ja}=fa;if(!S||!X)return null;ba=E({originRelationship:X,relationships:S.relationships,layerId:ba});if(ba?.relationshipTableId&&ba.keyFieldInRelationshipTable){Q=(yield r(ea,ba,Q,Y))[ea.attributes[Q.objectIdField]];if(!Q)return null;const ma=Q.features.map(na=>na.attributes[S.objectIdField]);if(ha?.length&&S.supportsStatistics)return fa=new O,fa.where=G(S.objectIdField,ma,1E3),fa.outFields=aa,fa.outStatistics=ha,fa.sourceSpatialReference=
ja,fa={features:Promise.resolve(Q),statsFeatures:u.executeQueryJSON(ia,fa)},A.eachAlways(fa)}return(ba=ba?.keyField)?(Q=B.isNumericField(R(S.fields,ba)),ea=I(ea.attributes,X.keyField),ba=Q?`${ba}=${ea}`:`${ba}='${ea}'`,ea=u.executeQueryJSON(ia,new O({where:ba,outFields:fa.relatedFields,sourceSpatialReference:ja}),Y),fa=fa.outStatistics&&0<fa.outStatistics.length&&S.supportsStatistics?u.executeQueryJSON(ia,new O({where:ba,outFields:fa.relatedFields,outStatistics:fa.outStatistics,sourceSpatialReference:ja}),
Y):null,Y={features:ea},fa&&(Y.statsFeatures=fa),A.eachAlways(Y)):null});return N.apply(this,arguments)}function R(ea,fa){if(null!=ea){fa=fa.toLowerCase();for(const Q of ea)if(Q&&Q.name.toLowerCase()===fa)return Q}return null}const W=t.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),da=new Map;m.createRelatedInfo=function(ea,fa){if(ea=y(ea,fa))return{url:`${fa.url}/${ea.relatedTableId}`,sourceSpatialReference:fa.spatialReference,relation:ea,relatedFields:[],outStatistics:[]}};m.getDestinationRelation=
E;m.getRelatedFieldInfo=function(ea){if(!H.isRelatedField(ea))return null;const [fa,Q]=ea.split("/").slice(1);return{layerId:fa,fieldName:Q}};m.queryLayerInfos=function({relatedInfos:ea,layer:fa},Q){const Y={};ea.forEach((ba,S)=>{({relation:ba}=ba);if(!ba)throw S=new h("relation-required","A relation is required on a layer to retrieve related records."),W.error(S),S;({relatedTableId:ba}=ba);if("number"!==typeof ba)throw S=new h("A related table ID is required on a layer to retrieve related records."),
W.error(S),S;ba=`${fa.url}/${ba}`;const X=da.get(ba),aa=X?X:k(ba,{query:{f:"json"},signal:void 0});X||da.set(ba,aa);Y[S]=aa});return A.whenOrAbort(A.eachAlways(Y),Q)};m.queryRelatedFeatures=function({graphic:ea,relatedInfos:fa,layer:Q},Y){const ba={};fa.forEach((S,X)=>{S.layerInfo&&(ba[X]=J(ea,S,Q,Y))});return A.eachAlways(ba)};m.setRelatedFeatures=function(ea,fa){if(fa&&ea){var {features:Q,statsFeatures:Y}=ea;ea=Q&&Q.value;fa.relatedFeatures=ea?ea.features:[];ea=Y&&Y.value;fa.relatedStatsFeatures=
ea?ea.features:[]}};m.updateRelatedInfo=function({relatedInfo:ea,fieldName:fa,fieldInfo:Q}){ea.relatedFields?.push(fa);Q.statisticType&&(fa=new V({statisticType:Q.statisticType,onStatisticField:fa,outStatisticFieldName:fa}),ea.outStatistics?.push(fa))};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),function(m,q,k,h,t,A){function B(a){if(!a)return"en-us";
if(u.has(a.toLowerCase()))return a.toLowerCase();a=a.split("-")[0].toLowerCase();let l=null;for(const d of u.keys())if(d.startsWith(a)){l=d;break}return l||"en-us"}function z(){z=k._asyncToGenerator(function*(a=A.getLocale()){a=B(a);if(g&&a===b)return g;g=(new Promise((l,d)=>m(["../../chunks/index2"],l,d))).then(l=>l.index);b=a;try{const [l,d]=yield Promise.all([g,u.get(b)()]);b===a&&(l.am4core.options.defaultLocale=d.default);l.am4core.options.suppressWarnings=!0;l.am4core.options.autoDispose=!0}catch{return b=
g=null}return g});return z.apply(this,arguments)}h="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var F=[{name:"default",colors:[].concat(h.slice(30,39),h.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const u=new Map([["ar",()=>(new Promise((a,l)=>m(["../../chunks/ar"],a,l))).then(a=>a.ar)],["bg-bg",()=>(new Promise((a,
l)=>m(["../../chunks/bg_BG"],a,l))).then(a=>a.bg_BG)],["bs-ba",()=>(new Promise((a,l)=>m(["../../chunks/bs_BA"],a,l))).then(a=>a.bs_BA)],["ca-es",()=>(new Promise((a,l)=>m(["../../chunks/ca_ES"],a,l))).then(a=>a.ca_ES)],["cs-cz",()=>(new Promise((a,l)=>m(["../../chunks/cs_CZ"],a,l))).then(a=>a.cs_CZ)],["da-dk",()=>(new Promise((a,l)=>m(["../../chunks/da_DK"],a,l))).then(a=>a.da_DK)],["de-de",()=>(new Promise((a,l)=>m(["../../chunks/de_DE"],a,l))).then(a=>a.de_DE)],["de-ch",()=>(new Promise((a,l)=>
m(["../../chunks/de_CH"],a,l))).then(a=>a.de_CH)],["el-gr",()=>(new Promise((a,l)=>m(["../../chunks/el_GR"],a,l))).then(a=>a.el_GR)],["en-us",()=>(new Promise((a,l)=>m(["../../chunks/en_US"],a,l))).then(a=>a.en_US)],["en-ca",()=>(new Promise((a,l)=>m(["../../chunks/en_CA"],a,l))).then(a=>a.en_CA)],["es-es",()=>(new Promise((a,l)=>m(["../../chunks/es_ES"],a,l))).then(a=>a.es_ES)],["et-ee",()=>(new Promise((a,l)=>m(["../../chunks/et_EE"],a,l))).then(a=>a.et_EE)],["fi-fi",()=>(new Promise((a,l)=>m(["../../chunks/fi_FI"],
a,l))).then(a=>a.fi_FI)],["fr-fr",()=>(new Promise((a,l)=>m(["../../chunks/fr_FR"],a,l))).then(a=>a.fr_FR)],["he-il",()=>(new Promise((a,l)=>m(["../../chunks/he_IL"],a,l))).then(a=>a.he_IL)],["hr-hr",()=>(new Promise((a,l)=>m(["../../chunks/hr_HR"],a,l))).then(a=>a.hr_HR)],["hu-hu",()=>(new Promise((a,l)=>m(["../../chunks/hu_HU"],a,l))).then(a=>a.hu_HU)],["id-id",()=>(new Promise((a,l)=>m(["../../chunks/id_ID"],a,l))).then(a=>a.id_ID)],["it-it",()=>(new Promise((a,l)=>m(["../../chunks/it_IT"],a,l))).then(a=>
a.it_IT)],["ja-jp",()=>(new Promise((a,l)=>m(["../../chunks/ja_JP"],a,l))).then(a=>a.ja_JP)],["ko-kr",()=>(new Promise((a,l)=>m(["../../chunks/ko_KR"],a,l))).then(a=>a.ko_KR)],["lt-lt",()=>(new Promise((a,l)=>m(["../../chunks/lt_LT"],a,l))).then(a=>a.lt_LT)],["lv-lv",()=>(new Promise((a,l)=>m(["../../chunks/lv_LV"],a,l))).then(a=>a.lv_LV)],["nb-no",()=>(new Promise((a,l)=>m(["../../chunks/nb_NO"],a,l))).then(a=>a.nb_NO)],["nl-nl",()=>(new Promise((a,l)=>m(["../../chunks/nl_NL"],a,l))).then(a=>a.nl_NL)],
["pl-pl",()=>(new Promise((a,l)=>m(["../../chunks/pl_PL"],a,l))).then(a=>a.pl_PL)],["pt-br",()=>(new Promise((a,l)=>m(["../../chunks/pt_BR"],a,l))).then(a=>a.pt_BR)],["pt-pt",()=>(new Promise((a,l)=>m(["../../chunks/pt_PT"],a,l))).then(a=>a.pt_PT)],["ro-ro",()=>(new Promise((a,l)=>m(["../../chunks/ro_RO"],a,l))).then(a=>a.ro_RO)],["ru-ru",()=>(new Promise((a,l)=>m(["../../chunks/ru_RU"],a,l))).then(a=>a.ru_RU)],["sk-sk",()=>(new Promise((a,l)=>m(["../../chunks/sk_SK"],a,l))).then(a=>a.sk_SK)],["sl-sl",
()=>(new Promise((a,l)=>m(["../../chunks/sl_SL"],a,l))).then(a=>a.sl_SL)],["sr-rs",()=>(new Promise((a,l)=>m(["../../chunks/sr_RS"],a,l))).then(a=>a.sr_RS)],["sv-se",()=>(new Promise((a,l)=>m(["../../chunks/sv_SE"],a,l))).then(a=>a.sv_SE)],["th-th",()=>(new Promise((a,l)=>m(["../../chunks/th_TH"],a,l))).then(a=>a.th_TH)],["tr-tr",()=>(new Promise((a,l)=>m(["../../chunks/tr_TR"],a,l))).then(a=>a.tr_TR)],["uk-ua",()=>(new Promise((a,l)=>m(["../../chunks/uk_UA"],a,l))).then(a=>a.uk_UA)],["vi-vn",()=>
(new Promise((a,l)=>m(["../../chunks/vi_VN"],a,l))).then(a=>a.vi_VN)],["zh-cn",()=>(new Promise((a,l)=>m(["../../chunks/zh_Hans"],a,l))).then(a=>a.zh_Hans)],["zh-hk",()=>(new Promise((a,l)=>m(["../../chunks/zh_Hant"],a,l))).then(a=>a.zh_Hant)],["zh-tw",()=>(new Promise((a,l)=>m(["../../chunks/zh_Hant"],a,l))).then(a=>a.zh_Hant)]]);let g=null,b=null;q.getChartLocale=B;q.getColorSet=function(a,l="default"){const d=F.find(n=>n.name===l);return d?d.colors.map(n=>a.color(n)):null};q.loadChartsModule=function(){return z.apply(this,
arguments)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p){h=function(C){function L(O){var K=C.call(this,O)||this;K._abortController=null;K.expressionInfo=null;K.graphic=null;K.contentElement=null;K.contentElementViewModel=null;K.interceptor=null;K.view=null;K._cancelQuery=()=>{const {_abortController:U}=m._assertThisInitialized(K);U&&U.abort();K._abortController=null};K._createVM=()=>{var U=K.contentElement?.type;K.contentElementViewModel?.destroy();U="fields"===U?new c:"media"===U?new e:"text"===
U?new x:null;K._set("contentElementViewModel",U)};K._compile=m._asyncToGenerator(function*(){K._cancelQuery();const U=new AbortController;K._abortController=U;yield K._compileExpression();K._abortController===U&&(K._abortController=null)});K._compileThrottled=B.throttle(K._compile,1,m._assertThisInitialized(K));K._compileExpression=m._asyncToGenerator(function*(){const {expressionInfo:U,graphic:T,interceptor:M,spatialReference:P,map:V,view:H,_abortController:y}=m._assertThisInitialized(K);if(U&&T&&
P&&V){var E=yield p.loadArcadeUtils();if(y===K._abortController)if((E=yield p.createCompiledExpression({arcadeUtils:E,expressionInfo:U,graphic:T,interceptor:M,map:V,spatialReference:P,view:H}))&&"esri.arcade.Dictionary"===E.declaredClass){E=yield E.castAsJsonAsync(y?.signal);var I=E?.type;E="media"===I?f.fromJSON(E):"text"===I?w.fromJSON(E):"fields"===I?n.fromJSON(E):null;K._set("contentElement",E)}else K._set("contentElement",null)}else K._set("contentElement",null)});K.handles.add([A.watch(()=>
[K.expressionInfo,K.graphic,K.map,K.spatialReference,K.view],()=>K._compileThrottled(),A.initial),A.watch(()=>[K.contentElement],()=>K._createVM(),A.initial)]);return K}m._inheritsLoose(L,C);L.prototype.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};m._createClass(L,[{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(O){this._override("spatialReference",
O)}},{key:"state",get:function(){const {_abortController:O,contentElement:K,contentElementViewModel:U}=this;return O?"loading":K||U?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(O){this._override("map",O)}}]);return L}(t.HandleOwnerMixin(h));q.__decorate([z.property()],h.prototype,"_abortController",void 0);q.__decorate([z.property({type:D})],h.prototype,"expressionInfo",void 0);q.__decorate([z.property({type:k})],h.prototype,"graphic",void 0);q.__decorate([z.property({readOnly:!0})],
h.prototype,"contentElement",void 0);q.__decorate([z.property({readOnly:!0})],h.prototype,"contentElementViewModel",void 0);q.__decorate([z.property()],h.prototype,"interceptor",void 0);q.__decorate([z.property()],h.prototype,"spatialReference",null);q.__decorate([z.property({readOnly:!0})],h.prototype,"state",null);q.__decorate([z.property()],h.prototype,"map",null);q.__decorate([z.property()],h.prototype,"view",void 0);return h=q.__decorate([g.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],
h)})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(m,q,k,h,t,A,B){function z(w){return`<ul class="esri-widget__list">${w.map(D=>`<li>${"string"===typeof D?B.applyTextFormattingHTML(B.htmlEntities(D)):D}</li>`).join("")}</ul>`}function F(w){return`<table class="esri-widget__table">${w.keys().map(D=>{var x=
w.field(D);x="string"===typeof x?B.applyTextFormattingHTML(B.htmlEntities(x)):x;return`<tr><th>${D}</th><td>${x}</td></tr>`}).join("")}</table>`}function u({aggregatedFeatures:w,arcadeUtils:D,featureSetVars:x,context:c,viewInfo:e,map:p,graphic:C,interceptor:L}){x.forEach(O=>{O=O.toLowerCase();var K=e.sr;const U={map:p,spatialReference:K,interceptor:L};"$map"===O&&(c.vars[O]=D.convertMapToFeatureSetCollection(U));"$layer"===O&&(c.vars[O]=D.convertFeatureLayerToFeatureSet({layer:C.sourceLayer,spatialReference:K,
interceptor:L}));"$datastore"===O&&(c.vars[O]=D.convertServiceUrlToWorkspace({url:C.sourceLayer.url,spatialReference:K,interceptor:L}));if("$aggregatedfeatures"===O){K=C.layer;const {fields:T,objectIdField:M,geometryType:P,spatialReference:V,displayField:H}=K;K=new A({fields:T,objectIdField:M,geometryType:P,spatialReference:V,displayField:H,...("feature"===K.type?{templates:K.templates,typeIdField:K.typeIdField,types:K.types}:null),source:w});c.vars[O]=D.convertFeatureLayerToFeatureSet({layer:K,spatialReference:V,
interceptor:L})}})}function g(){return new Promise((w,D)=>m(["../../../support/arcadeUtils"],w,D))}function b(w){return a.apply(this,arguments)}function a(){a=k._asyncToGenerator(function*({graphic:w,view:D}){const {isAggregate:x,layer:c}=w;if(!x||!c||"2d"!==D?.type)return[];D=yield D.whenLayerView(c);if(!("createQuery"in D&&"queryFeatures"in D))return[];const e=D.createQuery();w=w.getObjectId();e.aggregateIds=null!=w?[w]:[];({features:w}=yield D.queryFeatures(e));return w});return a.apply(this,arguments)}
function l(w){return d.apply(this,arguments)}function d(){d=k._asyncToGenerator(function*({expressionInfo:w,arcadeUtils:D,interceptor:x,spatialReference:c,map:e,graphic:p,view:C}){if(!w||!w.expression)return null;const L=D.createSyntaxTree(w.expression),O=f.filter(U=>D.hasVariable(L,U));[C]=yield Promise.all([b({graphic:p,view:C}),D.loadScriptDependencies(L,!0,O)]);const K=D.getViewInfo({spatialReference:c});c=D.createExecContext(p,K);c.interceptor=x;c.useAsync=!0;u({aggregatedFeatures:C,arcadeUtils:D,
featureSetVars:O,context:c,viewInfo:K,map:e,graphic:p,interceptor:x});x=D.createFunction(L,c);return D.executeAsyncFunction(x,c).catch(U=>v.error("arcade-execution-error",{error:U,graphic:p,expressionInfo:w}))});return d.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*({expressionInfos:w,spatialReference:D,graphic:x,interceptor:c,map:e,view:p}){if(!w||!w.length)return{};const C=yield g(),L={};for(const O of w)L[`expression/${O.name}`]=l({expressionInfo:O,arcadeUtils:C,interceptor:c,
spatialReference:D,map:e,graphic:x,view:p});w=yield t.eachAlways(L);D={};for(const O in w)x=w[O].value,x="string"===typeof x?B.applyTextFormattingHTML(B.htmlEntities(x)):Array.isArray(x)?z(x):"esri.arcade.Dictionary"===x?.declaredClass?F(x):x,D[O]=x;return D});return n.apply(this,arguments)}const f=["$datastore","$map","$layer","$aggregatedfeatures"],v=h.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");q.createCompiledExpression=l;q.createCompiledExpressions=function(w){return n.apply(this,
arguments)};q.loadArcadeUtils=g;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v){const w={title:!0,description:!0};h=function(D){function x(e,p){var C=D.call(this,e,p)||this;C._featureElementInfo=null;C._relatedFeatureIntersectionObserverNode=null;C._relatedFeatureIntersectionObserver=new IntersectionObserver(([L])=>{L?.isIntersecting&&C._increaseFeaturePage()},{root:window.document});C.headingLevel=2;C.viewModel=new a;C.messages=null;C.messagesCommon=null;C.visibleElements={...w};C._increaseFeaturePage=()=>{const {state:L,showAllEnabled:O,
relatedFeatures:K,featuresPerPage:U,featurePage:T}=C.viewModel;"ready"===L&&O&&K.length>=U*T&&C.viewModel.featurePage++};return C}q._inheritsLoose(x,D);var c=x.prototype;c.initialize=function(){this._featureElementInfo=new l;this.addHandles([B.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),B.initial),B.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),
B.on(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])};c.loadDependencies=function(){return Promise.all([new Promise((e,p)=>m(["../../chunks/calcite-list"],e,p)),new Promise((e,p)=>m(["../../chunks/calcite-list-item"],e,p)),new Promise((e,p)=>m(["../../chunks/calcite-icon"],e,p)),new Promise((e,p)=>m(["../../chunks/calcite-notice"],e,p))])};c.destroy=function(){this._unobserveRelatedFeatureObserver();this._featureElementInfo=t.destroyMaybe(this._featureElementInfo)};
c.castVisibleElements=function(e){return{...w,...e}};c.renderStickyLoading=function(){return"querying"===this.viewModel.state?f.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};c.renderLoadingIcon=function(){return f.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};c.renderLoading=function(){return f.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},
this.renderLoadingIcon())};c.renderShowAllIconNode=function(){return f.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};c.renderChevronIconNode=function(){const e=d.isRTL(this.container)?"chevron-left":"chevron-right";return f.tsx("calcite-icon",{scale:"s",icon:e,slot:"content-end"})};c.renderRelatedFeature=function(e){var {itemDescriptionFieldName:p}=this.viewModel;const C=e.title;e.description=p&&e.formattedAttributes?.global[p];p="loading"===e.state;return f.tsx("calcite-list-item",
{key:e.uid,label:p?`${this.messagesCommon?.loading}\u2026`:C,description:p?"\u2026":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())};c.renderShowAllListItem=function(){return this.displayShowAllButton?f.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};c.renderNoRelatedFeaturesMessage=
function(){return f.tsx("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},f.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};c.renderFeatureObserver=function(){return f.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};c.renderList=function(){const {relatedFeatureViewModels:e}=this.viewModel;return f.tsx("calcite-list",null,
e.toArray().map(p=>this.renderRelatedFeature(p)),this.renderShowAllListItem())};c.renderRelatedFeatures=function(){const {displayListItems:e}=this,{state:p}=this.viewModel;return f.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===p})},e?this.renderList():"ready"===p?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())};c.renderRelationshipNotFound=function(){return f.tsx("calcite-notice",
{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},f.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};c.render=function(){const {state:e}=this.viewModel;return f.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===e?this.renderLoading():"disabled"===e?this.renderRelationshipNotFound():this.renderRelatedFeatures())};c._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:e}=
this.viewModel;this.removeHandles("related-feature-viewmodels");e?.forEach(p=>{this.addHandles(B.watch(()=>[p.title,p.state],()=>this.scheduleRender(),B.initial),"related-feature-viewmodels")});this.scheduleRender()};c._setupFeatureElementInfo=function(){const {headingLevel:e,visibleElements:p}=this,C=p.description&&this.description,L=p.title&&this.title;this._featureElementInfo?.set({description:C,title:L,headingLevel:e})};c._handleRelatedFeatureObserverChange=function(){var e=q._asyncToGenerator(function*(){this._unobserveRelatedFeatureObserver();
const {state:p,showAllEnabled:C}=this.viewModel;yield A.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===p&&C&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)});return function(){return e.apply(this,arguments)}}();c._relatedFeatureIntersectionObserverCreated=function(e){this._relatedFeatureIntersectionObserverNode=e};c._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};
q._createClass(x,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:e,featureCount:p,displayCount:C}=this.viewModel;return!e&&!!p&&(p>C||0===C)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"featureCountDescription",get:function(){const {messages:e}=this,{featureCount:p}=this.viewModel;
return v.substitute(1===p?e?.numberRecord:e?.numberRecords,{number:p})}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}}]);return x}(b);k.__decorate([z.property()],h.prototype,"_relatedFeatureIntersectionObserverNode",void 0);k.__decorate([z.property({readOnly:!0})],h.prototype,"displayShowAllButton",null);k.__decorate([z.property({readOnly:!0})],h.prototype,"displayListItems",null);k.__decorate([z.property()],h.prototype,"description",null);k.__decorate([z.property({readOnly:!0})],
h.prototype,"featureCountDescription",null);k.__decorate([z.property()],h.prototype,"headingLevel",void 0);k.__decorate([z.property()],h.prototype,"title",null);k.__decorate([z.property({type:a})],h.prototype,"viewModel",void 0);k.__decorate([z.property(),n.messageBundle("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0);k.__decorate([z.property(),n.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);k.__decorate([z.property()],h.prototype,"visibleElements",void 0);
k.__decorate([F.cast("visibleElements")],h.prototype,"castVisibleElements",null);return h=k.__decorate([g.subclass("esri.widgets.Feature.FeatureRelationship")],h)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v){h=function(w){function D(c){var e=w.call(this,c)||this;e._queryAbortController=null;e._queryPageAbortController=null;e._queryFeatureCountAbortController=null;e.featuresPerPage=10;e.description=null;e.graphic=null;e.layer=null;e.map=null;e.orderByFields=null;e.featureCount=0;e.relationshipId=null;e.showAllEnabled=!1;e.title=null;e._cancelQuery=()=>{const {_queryAbortController:p}=m._assertThisInitialized(e);p&&p.abort();e._queryAbortController=null};e._cancelQueryFeatureCount=
()=>{const {_queryFeatureCountAbortController:p}=m._assertThisInitialized(e);p&&p.abort();e._queryFeatureCountAbortController=null};e._cancelQueryPage=()=>{const {_queryPageAbortController:p}=m._assertThisInitialized(e);p&&p.abort();e._queryPageAbortController=null};e._queryController=m._asyncToGenerator(function*(){e._cancelQuery();const p=new AbortController;e._queryAbortController=p;yield u.ignoreAbortErrors(e._query());e._queryAbortController===p&&(e._queryAbortController=null)});e._queryFeatureCountController=
m._asyncToGenerator(function*(){e._cancelQueryFeatureCount();const p=new AbortController;e._queryFeatureCountAbortController=p;yield u.ignoreAbortErrors(e._queryFeatureCount());e._queryFeatureCountAbortController===p&&(e._queryFeatureCountAbortController=null)});e._queryPageController=m._asyncToGenerator(function*(){const p=new AbortController;e._queryPageAbortController=p;yield u.ignoreAbortErrors(e._queryPage());e._queryPageAbortController===p&&(e._queryPageAbortController=null)});e._queryThrottled=
b.throttle(e._queryController,100,m._assertThisInitialized(e));e._queryFeatureCountThrottled=b.throttle(e._queryFeatureCountController,100,m._assertThisInitialized(e));e._queryPageThrottled=b.throttle(e._queryPageController,100,m._assertThisInitialized(e));e._query=m._asyncToGenerator(function*(){const {_queryAbortController:p,relatedFeatures:C}=m._assertThisInitialized(e);e._destroyRelatedFeatureViewModels();e.featurePage=1;C.removeAll();C.addMany(e._sliceFeatures(yield e._queryRelatedFeatures({signal:p?.signal})))});
e.handles.add([g.watch(()=>[e.displayCount,e.graphic,e.layer,e.map,e.orderByFieldsFixedCasing,e.relationshipId,e.featuresPerPage,e.showAllEnabled,e.canQuery,e.featureCount],()=>e._queryThrottled(),g.initial),g.watch(()=>[e.featurePage,e.showAllEnabled],()=>e._queryPageThrottled()),g.watch(()=>[e.layer,e.relationshipId,e.objectId,e.canQuery],()=>e._queryFeatureCountThrottled())]);return e}m._inheritsLoose(D,w);var x=D.prototype;x.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();
this._cancelQuery();this._cancelQueryFeatureCount();this._cancelQueryPage()};x._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(c=>!c.destroyed&&c.destroy());this.relatedFeatureViewModels.removeAll()};x._queryFeatureCount=function(){var c=m._asyncToGenerator(function*(){const {layer:e,relatedLayer:p,relationshipId:C,objectId:L,_queryFeatureCountAbortController:O,canQuery:K,supportsCacheHint:U}=this;yield e?.load();yield p?.load();if(K&&e&&p){var T=p.createQuery();
T=new f({cacheHint:U,relationshipId:C,returnGeometry:!1,objectIds:[L],where:F.unwrapOrValue(T.where,void 0)});T=yield e.queryRelatedFeaturesCount(T,{signal:O?.signal});this._set("featureCount",T[L]||0)}else this._set("featureCount",0)});return function(){return c.apply(this,arguments)}}();x._sliceFeatures=function(c){const {showAllEnabled:e,displayCount:p}=this;return e?c:p?c.slice(0,p):[]};x._queryPage=function(){var c=m._asyncToGenerator(function*(){const {relatedFeatures:e,featurePage:p,showAllEnabled:C,
_queryPageAbortController:L}=this;!C||2>p||e.addMany(yield this._queryRelatedFeatures({signal:L?.signal}))});return function(){return c.apply(this,arguments)}}();x._queryRelatedFeatures=function(){var c=m._asyncToGenerator(function*(e){const {orderByFieldsFixedCasing:p,showAllEnabled:C,featuresPerPage:L,displayCount:O,layer:K,relationshipId:U,featurePage:T,featureCount:M,relatedLayer:P,supportsCacheHint:V}=this,{canQuery:H,objectId:y}=this;if(!H||!K||!P)return[];var E=C?((T-1)*L+M)%M:0;const I=C?
L:O;var r=P.objectIdField;r=[...p?.map(N=>N.field),r].filter(F.isSome);const G=p?.map(N=>`${N.field} ${N.order}`),J=P.createQuery();E=new f({orderByFields:G,start:E,num:I,outFields:r,cacheHint:V,relationshipId:U,returnGeometry:!1,objectIds:[y],where:F.unwrapOrValue(J.where,void 0)});e=(yield K.queryRelatedFeatures(E,{signal:e?.signal}))[y]?.features||[];e.forEach(N=>{N.sourceLayer=P;N.layer=P});return e});return function(e){return c.apply(this,arguments)}}();m._createClass(D,[{key:"featurePage",get:function(){return this._get("featurePage")},
set:function(c){const {featuresPerPage:e,featureCount:p}=this;this._set("featurePage",Math.min(Math.max(c,1),Math.ceil(p/e)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:c,relatedLayer:e}=this;return c&&e?.loaded?c.map(p=>{const C=p.clone();p=v.getFixedFieldName(p.field,e);C.field=p;return C}):c??[]}},{key:"supportsCacheHint",get:function(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}},{key:"canQuery",get:function(){const c=this.layer?.capabilities?.queryRelated;
return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId&&!!c?.supportsCount&&!!c?.supportsPagination}},{key:"itemDescriptionFieldName",get:function(){return this.orderByFieldsFixedCasing?.[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(c){this._set("displayCount",Math.min(Math.max(c,0),10))}},{key:"objectId",get:function(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??
null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new A}},{key:"relatedLayer",get:function(){const {layer:c,map:e,relationship:p}=this;return c?.loaded&&e&&p?v.findRelatedLayer(e,c,p)??null:null}},{key:"relationship",get:function(){const {relationshipId:c,layer:e}=this;return"number"===typeof c?e?.relationships?.find(({id:p})=>p===c)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||
new A}},{key:"state",get:function(){const {_queryAbortController:c,_queryFeatureCountAbortController:e,_queryPageAbortController:p,canQuery:C}=this;return e?"loading":c||p?"querying":C?"ready":"disabled"}}]);return D}(t.ClonableMixin(z.IdentifiableMixin(B.HandleOwnerMixin(h))));q.__decorate([a.property()],h.prototype,"_queryAbortController",void 0);q.__decorate([a.property()],h.prototype,"_queryPageAbortController",void 0);q.__decorate([a.property()],h.prototype,"_queryFeatureCountAbortController",
void 0);q.__decorate([a.property({value:1})],h.prototype,"featurePage",null);q.__decorate([a.property()],h.prototype,"featuresPerPage",void 0);q.__decorate([a.property({readOnly:!0})],h.prototype,"orderByFieldsFixedCasing",null);q.__decorate([a.property({readOnly:!0})],h.prototype,"supportsCacheHint",null);q.__decorate([a.property({readOnly:!0})],h.prototype,"canQuery",null);q.__decorate([a.property()],h.prototype,"description",void 0);q.__decorate([a.property({readOnly:!0})],h.prototype,"itemDescriptionFieldName",
null);q.__decorate([a.property({value:3})],h.prototype,"displayCount",null);q.__decorate([a.property({type:k})],h.prototype,"graphic",void 0);q.__decorate([a.property()],h.prototype,"layer",void 0);q.__decorate([a.property()],h.prototype,"map",void 0);q.__decorate([a.property({readOnly:!0})],h.prototype,"objectId",null);q.__decorate([a.property({readOnly:!0})],h.prototype,"objectIdField",null);q.__decorate([a.property()],h.prototype,"orderByFields",void 0);q.__decorate([a.property({readOnly:!0})],
h.prototype,"relatedFeatures",null);q.__decorate([a.property({readOnly:!0})],h.prototype,"relatedLayer",null);q.__decorate([a.property({readOnly:!0})],h.prototype,"relationship",null);q.__decorate([a.property()],h.prototype,"featureCount",void 0);q.__decorate([a.property({readOnly:!0})],h.prototype,"relatedFeatureViewModels",null);q.__decorate([a.property()],h.prototype,"relationshipId",void 0);q.__decorate([a.property()],h.prototype,"showAllEnabled",void 0);q.__decorate([a.property()],h.prototype,
"state",null);q.__decorate([a.property()],h.prototype,"title",void 0);return h=q.__decorate([n.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],h)})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L){var O;const K={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};t=O=function(U){function T(P){var V=U.call(this,P)||this;V._handles=new A;V._error=null;V._featureAbortController=null;V._graphicChangedThrottled=b.throttle(V._graphicChanged,1,m._assertThisInitialized(V));V._expressionAttributes=null;V._graphicExpressionAttributes=null;V.abilities=
{...K};V.content=null;V.contentViewModels=[];V.description=null;V.defaultPopupTemplateEnabled=!1;V.formattedAttributes=null;V.lastEditInfo=null;V.relatedInfos=new Map;V.title="";V.view=null;V._isAllowedContentType=H=>{const {abilities:y}=m._assertThisInitialized(V);return"attachments"===H.type&&!!y.attachmentsContent||"custom"===H.type&&!!y.customContent||"fields"===H.type&&!!y.fieldsContent||"media"===H.type&&!!y.mediaContent||"text"===H.type&&!!y.textContent||"expression"===H.type&&!!y.expressionContent||
"relationship"===H.type&&!!y.relationshipContent};V._handles.add(g.watch(()=>[V.graphic,V._effectivePopupTemplate,V.abilities],()=>V._graphicChangedThrottled(),g.initial));return V}m._inheritsLoose(T,U);var M=T.prototype;M.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=null;this._destroyContentViewModels();this.relatedInfos.clear()};M.castAbilities=function(P){return{...K,...P}};M.setActiveMedia=function(P,V){P=this.contentViewModels[P];
P instanceof c&&P.setActiveMedia(V)};M.nextMedia=function(P){P=this.contentViewModels[P];P instanceof c&&P.next()};M.previousMedia=function(P){P=this.contentViewModels[P];P instanceof c&&P.previous()};M.updateGeometry=function(){var P=m._asyncToGenerator(function*(){const {graphic:V,spatialReference:H,_sourceLayer:y}=this;yield y?.load();var E=y?.objectIdField;E&&V&&y&&(E=V?.attributes?.[E],null!=E&&(E=[E],!V.geometry&&(E=(yield C.querySourceLayer({layer:y,graphic:V,outFields:[],objectIds:E,returnGeometry:!0,
spatialReference:H}))?.geometry)))&&(V.geometry=E)});return function(){return P.apply(this,arguments)}}();M._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};M._graphicChanged=function(){var P=m._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:V}=this;if(V){var H=new AbortController;this._featureAbortController=H;try{yield this._queryFeature({signal:H.signal})}catch(y){u.isAbortError(y)||(this._error=
y,z.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:y,graphic:V,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===H&&(this._featureAbortController=null)}});return function(){return P.apply(this,arguments)}}();M._cancelFeatureQuery=function(){const {_featureAbortController:P}=this;P&&P.abort();this._featureAbortController=null};M._compileContentElement=function(P,V){if("attachments"===P.type)return this._compileAttachments(P,
V);if("custom"===P.type)return this._compileCustom(P,V);if("fields"===P.type)return this._compileFields(P,V);if("media"===P.type)return this._compileMedia(P,V);if("text"===P.type)return this._compileText(P,V);if("expression"===P.type)return this._compileExpression(P,V);if("relationship"===P.type)return this._compileRelationship(P,V)};M._compileContent=function(P){this._destroyContentViewModels();if(this.graphic)return Array.isArray(P)?P.filter(this._isAllowedContentType).map((V,H)=>this._compileContentElement(V,
H)).filter(F.isSome):"string"===typeof P?this._compileText(new f({text:P}),0).text:P};M._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(P=>P&&!P.destroyed&&P.destroy());this._set("contentViewModels",[])};M._matchesFeature=function(P,V){P=P?.graphic?.getObjectId();V=V?.getObjectId();return F.isSome(P)&&F.isSome(V)&&P===V};M._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:P,
relatedFeatures:V,map:H}){const {view:y,spatialReference:E}=this;V?.filter(Boolean).forEach(I=>{P.find(r=>this._matchesFeature(r,I))||P.add(new O({abilities:{relationshipContent:!1},map:H,view:y,spatialReference:E,graphic:I}))});P.forEach(I=>{V?.find(r=>this._matchesFeature(I,r))||P.remove(I)})};M._setExpressionContentVM=function(P,V){const H=this.formattedAttributes,{contentElement:y,contentElementViewModel:E}=P;P=y?.type;E&&P&&("fields"===P&&(this._createFieldsFormattedAttributes({contentElement:y,
contentElementIndex:V,formattedAttributes:H}),E.set(this._createFieldsVMParams(y,V))),"media"===P&&(this._createMediaFormattedAttributes({contentElement:y,contentElementIndex:V,formattedAttributes:H}),E.set(this._createMediaVMParams(y,V))),"text"===P&&E.set(this._createTextVMParams(y)))};M._compileRelationship=function(P,V){const {displayCount:H,orderByFields:y,relationshipId:E,title:I,description:r}=P,{_sourceLayer:G,graphic:J,map:N}=this,R=new e({displayCount:H,graphic:J,orderByFields:y,relationshipId:E,
layer:G,map:N,...this._compileTitleAndDesc({title:I,description:r})});this.contentViewModels[V]=R;this._handles.add(g.on(()=>R.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(R)),"relationship-view-models");return P};M._compileExpression=function(P,V){const {expressionInfo:H}=P,{graphic:y,map:E,spatialReference:I,view:r}=this,G=new D({expressionInfo:H,graphic:y,interceptor:O.interceptor,map:E,spatialReference:I,view:r});this.contentViewModels[V]=G;this._handles.add(g.watch(()=>G.contentElementViewModel,
()=>this._setExpressionContentVM(G,V),g.initial),"content-view-models");return P};M._compileAttachments=function(P,V){const {graphic:H}=this,{description:y,title:E}=P;this.contentViewModels[V]=new v({graphic:H,...this._compileTitleAndDesc({title:E,description:y})});return P};M._compileCustom=function(P,V){const {graphic:H}=this,{creator:y,destroyer:E}=P;this.contentViewModels[V]=new w({graphic:H,creator:y,destroyer:E});return P};M._compileTitleAndDesc=function({title:P,description:V}){const {_fieldInfoMap:H,
_sourceLayer:y,graphic:E,formattedAttributes:I}=this,r=E?.attributes,G=this._expressionAttributes,J=I.global;return{title:C.substituteFieldsInLinksAndAttributes({attributes:r,fieldInfoMap:H,globalAttributes:J,expressionAttributes:G,layer:y,text:P}),description:C.substituteFieldsInLinksAndAttributes({attributes:r,fieldInfoMap:H,globalAttributes:J,expressionAttributes:G,layer:y,text:V})}};M._createFieldsVMParams=function(P,V){const H=this._effectivePopupTemplate,y=this.formattedAttributes,E={...y?.global,
...y?.content[V]};V=(P?.fieldInfos||H?.fieldInfos)?.filter(({fieldName:G})=>C.isExpressionField(G)||C.isRelatedField(G)||E.hasOwnProperty(G));const {description:I,title:r}=P;return{attributes:E,expressionInfos:H?.expressionInfos,fieldInfos:V,...this._compileTitleAndDesc({title:r,description:I})}};M._compileFields=function(P,V){const H=P.clone();P=new x(this._createFieldsVMParams(P,V));this.contentViewModels[V]=P;H.fieldInfos=P.formattedFieldInfos.slice(0);return H};M._createMediaVMParams=function(P,
V){const {abilities:H,graphic:y,_fieldInfoMap:E,_effectivePopupTemplate:I,relatedInfos:r,_sourceLayer:G,_expressionAttributes:J}=this,N=this.formattedAttributes,R=y?.attributes??{},{description:W,mediaInfos:da,title:ea}=P;return{abilities:{chartAnimation:H.chartAnimation},activeMediaInfoIndex:P.activeMediaInfoIndex||0,attributes:R,isAggregate:y?.isAggregate,layer:G,fieldInfoMap:E,formattedAttributes:{...N?.global,...N?.content[V]},expressionAttributes:J,mediaInfos:da,popupTemplate:I,relatedInfos:r,
...this._compileTitleAndDesc({title:ea,description:W})}};M._compileMedia=function(P,V){const H=P.clone();P=new c(this._createMediaVMParams(P,V));H.mediaInfos=P.formattedMediaInfos.slice(0);this.contentViewModels[V]=P;return H};M._createTextVMParams=function(P){const {graphic:V,_fieldInfoMap:H,_sourceLayer:y,_expressionAttributes:E}=this;P&&P.text&&(P.text=C.substituteFieldsInLinksAndAttributes({attributes:V?.attributes??{},fieldInfoMap:H,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:E,
layer:y,text:P.text}));return{graphic:V,creator:P.text}};M._compileText=function(P,V){P=P.clone();this.contentViewModels[V]=new w(this._createTextVMParams(P));return P};M._compileLastEditInfo=function(){const {_effectivePopupTemplate:P,_sourceLayer:V,graphic:H}=this;if(P){var {lastEditInfoEnabled:y}=P,E=V?.editFieldsInfo;if(y&&E)return C.formatEditInfo(E,H?.attributes)}};M._compileTitle=function(P){const {_fieldInfoMap:V,_sourceLayer:H,graphic:y,_expressionAttributes:E}=this;return C.substituteFieldsInLinksAndAttributes({attributes:y?.attributes??
{},fieldInfoMap:V,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:E,layer:H,text:P})};M._getTitle=function(){var P=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:V,graphic:H}=this;return H?C.graphicCallback(V?.title,{graphic:H}):null});return function(){return P.apply(this,arguments)}}();M._getContent=function(){var P=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:V,graphic:H}=this;return H?C.graphicCallback(V?.content,{graphic:H}):null});
return function(){return P.apply(this,arguments)}}();M._queryFeature=function(){var P=m._asyncToGenerator(function*(V){const {_featureAbortController:H,_sourceLayer:y,graphic:E,_effectivePopupTemplate:I}=this,r=this.map,G=this.view,J=this.spatialReference;if(H===this._featureAbortController&&E){yield C.queryUpdatedFeature({graphic:E,popupTemplate:I,layer:y,spatialReference:J},V);var {content:{value:N},title:{value:R}}=yield u.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:V}}=
yield u.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(V),expressionAttributes:p.createCompiledExpressions({expressionInfos:I?.expressionInfos,spatialReference:J,graphic:E,map:r,interceptor:O.interceptor,view:G})}));H===this._featureAbortController&&E&&(this._expressionAttributes=V,this._graphicExpressionAttributes={...E.attributes,...V},this._set("formattedAttributes",this._createFormattedAttributes(N)),this._set("title",this._compileTitle(R)),this._set("lastEditInfo",this._compileLastEditInfo()||
null),this._set("content",this._compileContent(N)||null))}});return function(V){return P.apply(this,arguments)}}();M._createMediaFormattedAttributes=function({contentElement:P,contentElementIndex:V,formattedAttributes:H}){const {_effectivePopupTemplate:y,graphic:E,relatedInfos:I,_sourceLayer:r,_fieldInfoMap:G,_graphicExpressionAttributes:J}=this;H.content[V]=C.formatAttributes({fieldInfos:y?.fieldInfos,graphic:E,attributes:{...J,...P.attributes},layer:r,fieldInfoMap:G,relatedInfos:I})};M._createFieldsFormattedAttributes=
function({contentElement:P,contentElementIndex:V,formattedAttributes:H}){if(P.fieldInfos){const {graphic:y,relatedInfos:E,_sourceLayer:I,_fieldInfoMap:r,_graphicExpressionAttributes:G}=this;H.content[V]=C.formatAttributes({fieldInfos:P.fieldInfos,graphic:y,attributes:{...G,...P.attributes},layer:I,fieldInfoMap:r,relatedInfos:E})}};M._createFormattedAttributes=function(P){const {_effectivePopupTemplate:V,graphic:H,relatedInfos:y,_sourceLayer:E,_fieldInfoMap:I,_graphicExpressionAttributes:r}=this,G=
{global:C.formatAttributes({fieldInfos:V?.fieldInfos,graphic:H,attributes:r,layer:E,fieldInfoMap:I,relatedInfos:y}),content:[]};Array.isArray(P)&&P.forEach((J,N)=>{"fields"===J.type&&this._createFieldsFormattedAttributes({contentElement:J,contentElementIndex:N,formattedAttributes:G});"media"===J.type&&this._createMediaFormattedAttributes({contentElement:J,contentElementIndex:N,formattedAttributes:G})});return G};M._checkForRelatedFeatures=function(P){const {graphic:V,_effectivePopupTemplate:H}=this;
return this._queryRelatedInfos(V,C.getAllFieldInfos(H),P)};M._queryRelatedInfos=function(){var P=m._asyncToGenerator(function*(V,H,y){const {relatedInfos:E,_sourceLayer:I}=this;E.clear();const r=F.isSome(I?.associatedLayer)?yield I?.associatedLayer.load(y):I;if(r&&V){var G=H.filter(R=>R&&C.isRelatedField(R.fieldName));if(G&&G.length){H.forEach(R=>this._configureRelatedInfo(R,r));var J=yield L.queryLayerInfos({relatedInfos:E,layer:r},y);Object.keys(J).forEach(R=>{const W=E.get(R.toString());R=J[R]?.value;
W&&R&&(W.layerInfo=R.data)});var N=yield L.queryRelatedFeatures({graphic:V,relatedInfos:E,layer:r},y);Object.keys(N).forEach(R=>{L.setRelatedFeatures(N[R]?.value,E.get(R.toString()))})}}});return function(V,H,y){return P.apply(this,arguments)}}();M._configureRelatedInfo=function(P,V){const {relatedInfos:H}=this,y=L.getRelatedFieldInfo(P.fieldName);if(y){var {layerId:E,fieldName:I}=y;E&&(V=H.get(E.toString())||L.createRelatedInfo(E,V))&&(L.updateRelatedInfo({relatedInfo:V,fieldName:I,fieldInfo:P}),
this.relatedInfos.set(E,V))}};m._createClass(T,[{key:"_effectivePopupTemplate",get:function(){return F.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return C.createfieldInfoMap(C.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return C.getSourceLayer(this.graphic)}},{key:"isTable",get:function(){return this._sourceLayer?.isTable||!1}},{key:"state",get:function(){return this.graphic?
this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(P){this._set("graphic",P?P.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(P){this._override("spatialReference",P)}},{key:"map",get:function(){return this.view?.map||null},set:function(P){this._override("map",P)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return T}(B.IdentifiableMixin(t));t.interceptor=
new h.FeatureSetQueryInterceptor(C.preLayerQueryCallback,C.preRequestCallback);q.__decorate([a.property()],t.prototype,"_error",void 0);q.__decorate([a.property()],t.prototype,"_featureAbortController",void 0);q.__decorate([a.property({readOnly:!0})],t.prototype,"_effectivePopupTemplate",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"_fieldInfoMap",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"_sourceLayer",null);q.__decorate([a.property()],t.prototype,"abilities",void 0);
q.__decorate([l.cast("abilities")],t.prototype,"castAbilities",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"content",void 0);q.__decorate([a.property({readOnly:!0})],t.prototype,"contentViewModels",void 0);q.__decorate([a.property()],t.prototype,"description",void 0);q.__decorate([a.property({type:Boolean})],t.prototype,"defaultPopupTemplateEnabled",void 0);q.__decorate([a.property({readOnly:!0})],t.prototype,"isTable",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"state",
null);q.__decorate([a.property({readOnly:!0})],t.prototype,"formattedAttributes",void 0);q.__decorate([a.property({type:k,value:null})],t.prototype,"graphic",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"lastEditInfo",void 0);q.__decorate([a.property({readOnly:!0})],t.prototype,"relatedInfos",void 0);q.__decorate([a.property()],t.prototype,"spatialReference",null);q.__decorate([a.property({readOnly:!0})],t.prototype,"title",void 0);q.__decorate([a.property()],t.prototype,"map",null);
q.__decorate([a.property({readOnly:!0})],t.prototype,"waitingForContent",null);q.__decorate([a.property()],t.prototype,"view",void 0);return t=O=q.__decorate([n.subclass("esri.widgets.FeatureViewModel")],t)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(m){m.FeatureSetQueryInterceptor=function(q,k){this.preLayerQueryCallback=q;this.preRequestCallback=k;this.preLayerQueryCallback||(this.preLayerQueryCallback=h=>{});this.preRequestCallback||(this.preLayerQueryCallback=
h=>{})};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(m){m.CSS={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",
contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b){m.FeatureContentMixin=a=>{a=function(l){function d(){var n=l.apply(this,arguments)||this;n.renderNodeContent=f=>g.isWidget(f)&&!f.destroyed?b.tsx("div",{class:u.CSS.contentNode,key:f},f.render()):f instanceof HTMLElement?b.tsx("div",{class:u.CSS.contentNode,key:f,bind:f,afterCreate:n._attachToNode}):g.hasDomNode(f)?b.tsx("div",{class:u.CSS.contentNode,key:f,bind:f.domNode,afterCreate:n._attachToNode}):null;return n}q._inheritsLoose(d,l);d.prototype._attachToNode=
function(n){n.appendChild(this)};return d}(a);return a=k.__decorate([F.subclass("esri.widgets.Feature.ContentMixin")],a)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){B=function(l){function d(f,v){f=l.call(this,f,v)||this;f._animationDelay=500;f._animationPromise=null;f.viewModel=new g;return f}m._inheritsLoose(d,l);var n=d.prototype;n.initialize=function(){this.addHandles(t.watch(()=>this.visible,f=>this._visibleChange(f)))};n.destroy=function(){this._animationPromise=null};n.show=function(f){const {location:v,promise:w}=f??{};v&&(this.viewModel.location=v);this.visible=!0;f=()=>this.hide();w&&w.catch(()=>{}).then(f)};n.hide=
function(){this.visible=!1};n.render=function(){var {visible:f}=this,{screenLocation:v}=this.viewModel;v=!!v;f={["esri-spinner--start"]:f&&v,["esri-spinner--finish"]:!f&&v};v=this._getPositionStyles();return a.tsx("div",{class:this.classes("esri-spinner",f),styles:v})};n._visibleChange=function(f){if(f)this.viewModel.screenLocationEnabled=!0;else{var v=h.after(this._animationDelay);this._animationPromise=v;v.catch(()=>{}).then(()=>{this._animationPromise===v&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};n._getPositionStyles=function(){const {screenLocation:f,view:v}=this.viewModel;if(k.isNone(v)||k.isNone(f))return{};const {padding:w}=v;return{left:`${f.x-w.left}px`,top:`${f.y-w.top}px`}};m._createClass(d,[{key:"location",get:function(){return this.viewModel.location},set:function(f){this.viewModel.location=f}},{key:"view",get:function(){return this.viewModel.view},set:function(f){this.viewModel.view=f}},{key:"visible",get:function(){return this.viewModel.visible},
set:function(f){this.viewModel.visible=f}}]);return d}(u);q.__decorate([A.property()],B.prototype,"location",null);q.__decorate([A.property()],B.prototype,"view",null);q.__decorate([A.property({type:g})],B.prototype,"viewModel",void 0);q.__decorate([A.property()],B.prototype,"visible",null);return B=q.__decorate([F.subclass("esri.widgets.Spinner")],B)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),
function(m,q,k,h,t,A,B){h=function(z){function F(u){u=z.call(this,u)||this;u.visible=!1;return u}m._inheritsLoose(F,z);return F}(B);q.__decorate([k.property()],h.prototype,"visible",void 0);return h=q.__decorate([A.subclass("esri.widgets.CompassViewModel")],h)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z,F,u){const g=Symbol("anchorHandles");k=function(a){function l(d){var n=a.call(this,d)||this;n[b]=new h;n.location=null;n.screenLocationEnabled=!1;n.view=null;n[g].add([A.when(()=>t.applySome(n.screenLocationEnabled?n.view:null,f=>[f.size,"3d"===f.type?f.camera:f.viewpoint]),()=>n.notifyChange("screenLocation")),A.watch(()=>n.screenLocation,(f,v)=>{t.isSome(f)&&t.isSome(v)&&n.emit("view-change")})]);return n}m._inheritsLoose(l,a);l.prototype.destroy=function(){this.view=null;
this[g]=t.destroyMaybe(this[g])};m._createClass(l,[{key:"screenLocation",get:function(){const {location:d,view:n,screenLocationEnabled:f}=this;return f&&t.isSome(d)&&t.isSome(n)&&n.ready?n.toScreen?.(d):null}}]);return l}(k.EventedAccessor);var b=g;q.__decorate([B.property()],k.prototype,"location",void 0);q.__decorate([B.property()],k.prototype,"screenLocation",null);q.__decorate([B.property()],k.prototype,"screenLocationEnabled",void 0);q.__decorate([B.property()],k.prototype,"view",void 0);return k=
q.__decorate([u.subclass("esri.widgets.support.AnchorElementViewModel")],k)})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ./actions".split(" "),function(m,q,k,h,t,A,B){function z(x){const {selectedFeature:c,location:e,view:p}=x;return p?"3d"===p.type?c??e??null:x.get("selectedFeature.geometry")||e:null}function F(x){return!!x&&x.isAggregate&&"cluster"===x.sourceLayer?.featureReduction?.type}
function u(x,c){return g.apply(this,arguments)}function g(){g=q._asyncToGenerator(function*(x,c){if("3d"!==c?.type||!x||"esri.Graphic"!==x.declaredClass)return!0;if((c=c.getViewForGraphic(x))&&"whenGraphicBounds"in c){let e;try{e=yield c.whenGraphicBounds(x,{useViewElevation:!0})}catch(p){}return!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]}return!0});return g.apply(this,arguments)}function b(x){return a.apply(this,
arguments)}function a(){a=q._asyncToGenerator(function*(x){const {location:c,selectedFeature:e,view:p,zoomFactor:C}=x,L=z(x);if(!p||!L)throw x=new k("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:L,view:p}),D.error(x),x;const O=p.scale/C,K=x.selectedFeature?.geometry??c,U=t.isSome(K)&&"point"===K.type&&(yield u(e,p));B.zoomToFeature.active=!0;B.zoomToFeature.disabled=!0;try{yield x.zoomTo({target:{target:L,scale:U?O:void 0}})}catch(T){const M=new k("zoom-to:invalid-graphic",
"Could not zoom to the location of the graphic.",{graphic:e});D.error(M)}finally{B.zoomToFeature.active=!1,B.zoomToFeature.disabled=!1,x.zoomToLocation=null,U&&(x.location=K)}});return a.apply(this,arguments)}function l(x){return d.apply(this,arguments)}function d(){d=q._asyncToGenerator(function*(x){const {selectedFeature:c,view:e}=x;if("2d"!==e?.type)throw x=new k("zoomToCluster:invalid-view","View must be 2d MapView.",{view:e}),D.error(x),x;if(!c||!F(c))throw x=new k("zoomToCluster:invalid-selectedFeature",
"Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:c}),D.error(x),x;const [p,C]=yield v(e,c);B.zoomToClusteredFeatures.active=!0;B.zoomToClusteredFeatures.disabled=!0;const {extent:L}=yield p.queryExtent(C);yield x.zoomTo({target:L});B.zoomToClusteredFeatures.active=!1;B.zoomToClusteredFeatures.disabled=!1});return d.apply(this,arguments)}function n(){n=q._asyncToGenerator(function*(x){const {view:c,selectedFeature:e}=x;if(c&&e){var [p,C]=yield v(c,e),{extent:L}=yield p.queryExtent(C);
x.selectedClusterBoundaryFeature.geometry=L;c.graphics.add(x.selectedClusterBoundaryFeature)}});return n.apply(this,arguments)}function f(){f=q._asyncToGenerator(function*(x){const {selectedFeature:c,view:e}=x;if(e&&c){var [p,C]=yield v(e,c);B.browseClusteredFeatures.active=!0;B.browseClusteredFeatures.disabled=!0;({features:x}=yield p.queryFeatures(C));B.browseClusteredFeatures.active=!1;B.browseClusteredFeatures.disabled=!1;e.popup?.open({features:[c].concat(x),featureMenuOpen:!0})}});return f.apply(this,
arguments)}function v(x,c){return w.apply(this,arguments)}function w(){w=q._asyncToGenerator(function*(x,c){x=yield x.whenLayerView(c.sourceLayer);const e=x.createQuery();c=c.getObjectId();e.aggregateIds=null!=c?[c]:[];return[x,e]});return w.apply(this,arguments)}const D=h.getLogger("esri.widgets.Popup.PopupViewModel");m.browseAggregateFeatures=function(x){return f.apply(this,arguments)};m.displayClusterExtent=function(x){return n.apply(this,arguments)};m.getPointFromGeometry=function(x){if(t.isNone(x))return null;
switch(x.type){case "point":return x;case "extent":return x.center;case "polygon":return x.centroid;case "multipoint":case "polyline":return x.extent?.center;default:return null}};m.getSelectedTarget=z;m.isClusterFeature=F;m.removeClusteredFeaturesForBrowsing=function(x){const c=x.features.filter(e=>F(e));c.length&&(x.features=c)};m.triggerAction=x=>{const {event:c,view:e}=x;({action:x}=c);var p=e&&e.popup;if(!x)return Promise.reject(new k("trigger-action:missing-arguments","Event has no action"));
if(!p)return Promise.reject(new k("trigger-action:missing-arguments","view.popup is missing"));const {disabled:C,id:L}=x;if(!L)return Promise.reject(new k("trigger-action:invalid-action","action.id is missing"));if(C)return Promise.reject(new k("trigger-action:invalid-action","Action is disabled"));if(L===B.zoomToFeature.id)return b(p.viewModel).catch(A.throwIfNotAbortError);if(L===B.zoomToClusteredFeatures.id)return l(p.viewModel);if(L===B.browseClusteredFeatures.id)return p.featureMenuOpen=!p.featureMenuOpen,
p.viewModel.browseClusterEnabled=!p.viewModel.browseClusterEnabled,Promise.resolve();p.viewModel.browseClusterEnabled=!1;if(L===B.removeSelectedFeature.id){p.close();({selectedFeature:x}=p);if(!x)return Promise.reject(new k(`trigger-action:${B.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:x}));({sourceLayer:p}=x);p?p.remove(x):e.graphics.remove(x)}return Promise.resolve()};m.zoomToClusterExtent=l;m.zoomToLocation=b;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(m,q){const k=new q({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),h=new q({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),t=new q({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});q=new q({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",
className:"esri-icon-table"});m.all=[k,h,q,t];m.browseClusteredFeatures=q;m.removeSelectedFeature=h;m.zoomToClusteredFeatures=t;m.zoomToFeature=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/css":function(){define(["exports"],function(m){m.CSS={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",
iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",
isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",
alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",
headerTitle:"esri-popup__header-title",content:"esri-popup__content",contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",
inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",actionExit:"esri-popup__action--exit",actionSelectFeature:"esri-popup__action--select-feature",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",
navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",
featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button",collapseIcon:"esri-popup__collapse-icon"};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../layers/LayerConstants ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../symbols/SimpleFillSymbol ../../geometry/Point".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L,O,K,U,T,M){const P=A.ofType({key:"type",defaultKeyValue:"button",base:w,typeMap:{button:D,toggle:x}});k=function(V){function H(E){E=V.call(this,E)||this;E._handles=new z;E._pendingPromises=new Set;E._fetchFeaturesController=null;E._highlightSelectedFeaturePromise=null;E._highlightActiveFeaturePromise=null;E._selectedClusterFeature=null;E.featurePage=null;E.actions=new P;E.activeFeature=null;E.defaultPopupTemplateEnabled=!1;E.autoCloseEnabled=
!1;E.autoOpenEnabled=!0;E.browseClusterEnabled=!1;E.content=null;E.featuresPerPage=20;E.featureViewModelAbilities=null;E.featureViewModels=[];E.highlightEnabled=!0;E.includeDefaultActions=!0;E.selectedClusterBoundaryFeature=new h({symbol:new T({outline:{width:1.5,color:"cyan"},style:"none"})});E.title=null;E.updateLocationEnabled=!1;E.view=null;E.visible=!1;E.zoomFactor=4;E.zoomToLocation=null;return E}m._inheritsLoose(H,V);var y=H.prototype;y.initialize=function(){this._handles.add([g.watch(()=>
[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),g.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),g.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),g.watch(()=>this.view?.animation?.state,E=>this._animationStateChange(E)),g.watch(()=>this.location,E=>this._locationChange(E)),g.watch(()=>this.selectedFeature,
E=>this._selectedFeatureChange(E)),g.watch(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),g.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),g.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",E=>O.triggerAction({event:E,view:this.view})),g.when(()=>!this.waitingForResult,()=>this._waitingForResultChange(),
g.sync),g.watch(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),g.watch(()=>this.view?.scale,()=>this._viewScaleChange()),g.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),g.watch(()=>this.browseClusterEnabled,E=>E?this.enableClusterBrowsing():this.disableClusterBrowsing())])};y.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};y.centerAtLocation=
function(){const {view:E}=this,I=O.getSelectedTarget(this);return I&&E?this.callGoTo({target:{target:I,scale:E.scale}}):Promise.reject(new B("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:I,view:E}))};y.zoomTo=function(E){return this.callGoTo(E)};y.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})};y.fetchFeatures=function(E,I){const {view:r}=this;if(!r||!E)throw new B("fetch-features:invalid-screenpoint-or-view",
"Cannot fetch features without a screenPoint and view.",{screenPoint:E,view:r});return r.fetchPopupFeatures(E,{event:I&&I.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:I&&I.signal})};y.open=function(E){E={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...E,visible:!0};var {fetchFeatures:I}=E;delete E.fetchFeatures;I&&this._setFetchFeaturesPromises(E.location);I=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const r of I)delete E[r];this.set(E)};y.triggerAction=
function(E){(E=this.allActions.getItemAt(E))&&!E.disabled&&this.emit("trigger-action",{action:E})};y.next=function(){this.selectedFeatureIndex+=1;return this};y.previous=function(){--this.selectedFeatureIndex;return this};y.disableClusterBrowsing=function(){O.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};y.enableClusterBrowsing=function(){var E=m._asyncToGenerator(function*(){const {view:I,selectedFeature:r}=this;"2d"!==I?.type?F.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",
r):O.isClusterFeature(r)?(yield O.displayClusterExtent(this),yield O.browseAggregateFeatures(this)):F.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",r)});return function(){return E.apply(this,arguments)}}();y._animationStateChange=function(E){this.zoomToLocation||(L.zoomToFeature.disabled="waiting-for-target"===E)};y._clearBrowsedClusterGraphics=function(){const E=this.view?.graphics;E&&(E.remove(this.selectedClusterBoundaryFeature),
this._selectedClusterFeature&&E.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};y._viewScaleChange=function(){O.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])};y._locationChange=function(E){const {selectedFeature:I,updateLocationEnabled:r}=this;r&&E&&(!I||I.geometry)&&this.centerAtLocation()};
y._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};y._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};y._setGraphicOnFeatureViewModels=function(){const {features:E,featureCount:I,featurePage:r,featuresPerPage:G,featureViewModels:J}=this;if(null!==r){var N=((r-1)*G+I)%I;J.slice(N,N+G).forEach((R,W)=>{R&&!R.graphic&&(R.graphic=E[N+W])})}};y._selectedFeatureChange=function(){var E=
m._asyncToGenerator(function*(I){const {location:r,updateLocationEnabled:G,view:J}=this;I&&J&&(this.browseClusterEnabled?(this._selectedClusterFeature&&(J.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),O.isClusterFeature(I)||(I.symbol=yield c.getDisplayedSymbol(I),this._selectedClusterFeature=I,J.graphics.add(this._selectedClusterFeature))):!G&&r||!I.geometry?G&&!I.geometry&&this.centerAtLocation().then(()=>{const N=J.center?.clone();N&&(this.location=N)}):this.location=
u.unwrap(O.getPointFromGeometry(I.geometry)))});return function(I){return E.apply(this,arguments)}}();y._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};y._setFetchFeaturesPromises=function(E){return this._fetchFeaturesWithController(this._getScreenPoint(E||this.location)).then(I=>{const {clientOnlyGraphics:r,promisesPerLayerView:G}=I;I=Promise.resolve(r);const J=G.map(N=>N.promise);this.promises=[I,...J]})};y._destroyFeatureVMs=function(){this.featureViewModels.forEach(E=>
E&&!E.destroyed&&E.destroy());this._set("featureViewModels",[])};y._updateFeatureVMs=function(){const {selectedFeature:E,features:I,featureViewModels:r}=this;O.isClusterFeature(E)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(I&&I.length){var G=r.slice(0),J=[];I.forEach((N,R)=>{if(N){var W=null;G.some((da,ea)=>{da&&da.graphic===N&&(W=da,G.splice(ea,1));return!!W});if(W)J[R]=W;else{const da=new C({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,
spatialReference:this.view?.spatialReference,graphic:N===E?N:null,map:this.view?.map,view:this.view});J[R]=da}}});G.forEach(N=>N&&!N.destroyed&&N.destroy());this._set("featureViewModels",J)}};y._getScreenPoint=function(E){const {view:I}=this;return I&&E&&"function"===typeof I.toScreen?I.toScreen(E):null};y._autoOpenEnabledChange=function(){const {_handles:E,autoOpenEnabled:I}=this;E.remove("auto-fetch-features");if(I&&this.view){const r=this.view.on("click",G=>{"mouse"===G.pointerType&&0!==G.button||
this._fetchFeaturesAndOpen(G)},e.ViewEventPriorities.WIDGET);E.add(r,"auto-fetch-features")}};y._cancelFetchingFeatures=function(){const E=this._fetchFeaturesController;E&&E.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};y._fetchFeaturesWithController=function(E,I){this._cancelFetchingFeatures();const r=new AbortController,{signal:G}=r;this._fetchFeaturesController=r;this.notifyChange("waitingForResult");E=this.fetchFeatures(E,{signal:G,event:I});E.catch(()=>{}).then(()=>
{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return E};y._fetchFeaturesAndOpen=function(E){const {screenPoint:I,mapPoint:r}=E,{view:G}=this;this._fetchFeaturesWithController(I,E).then(J=>{const {clientOnlyGraphics:N,promisesPerLayerView:R,location:W}=J,da=[Promise.resolve(N),...R.map(ea=>ea.promise)];G?.popup?.open({location:W||r,promises:da});return J})};y._updatePendingPromises=function(E){E&&this._pendingPromises.has(E)&&(this._pendingPromises.delete(E),this.notifyChange("pendingPromisesCount"))};
y._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};y._getLayerView=function(){var E=m._asyncToGenerator(function*(I,r){yield I.when();return I.whenLayerView(r)});return function(I,r){return E.apply(this,arguments)}}();y._getHighlightLayer=function(E){const {layer:I,sourceLayer:r}=E;return r&&"layer"in r&&r.layer?r.layer:"map-notes"===r?.type||"subtype-group"===r?.type?r:I};y._getHighlightTarget=function(E,I){I="imagery"===I.type?void 0:"objectIdField"in I?I.objectIdField||v.fallbackObjectIDAttribute:
null;const r=E.attributes;return r&&I&&r[I]||E};y._highlightActiveFeature=function(){var E=m._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");const {highlightEnabled:I,view:r,activeFeature:G,visible:J}=this;if(G&&r&&I&&J){var N=this._getHighlightLayer(G);if(N&&N instanceof f){var R=this._getLayerView(r,N);this._highlightActiveFeaturePromise=R;var W=yield R;W&&p.highlightsSupported(W)&&this._highlightActiveFeaturePromise===R&&this.activeFeature&&this.highlightEnabled&&
(N=W.highlight(this._getHighlightTarget(G,N)),this._handles.add(N,"highlight-active-feature"))}}});return function(){return E.apply(this,arguments)}}();y._highlightSelectedFeature=function(){var E=m._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:I,highlightEnabled:r,view:G,visible:J}=this;if(I&&G&&r&&J){var N=this._getHighlightLayer(I);if(N&&N instanceof f){var R=this._getLayerView(G,N);this._highlightSelectedFeaturePromise=R;var W=yield R;
W&&p.highlightsSupported(W)&&this._highlightSelectedFeaturePromise===R&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(N=W.highlight(this._getHighlightTarget(I,N)),this._handles.add(N,"highlight-selected-feature"))}}});return function(){return E.apply(this,arguments)}}();y._updateFeatures=function(E){const {features:I}=this;E&&E.length&&(I.length?(E=E.filter(r=>!I.includes(r)),this.features=I.concat(E)):this.features=E)};m._createClass(H,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(E=>
E.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const E=this._get("allActions")||new P;E.removeAll();const {actions:I,defaultActions:r,defaultPopupTemplateEnabled:G,includeDefaultActions:J,selectedFeature:N}=this;var R=J?r.concat(I):I;const W=N&&("function"===typeof N.getEffectivePopupTemplate&&N.getEffectivePopupTemplate(G)||N.popupTemplate),da=W&&W.actions;(R=W&&W.overwriteActions?da:da?da.concat(R):R)&&R.filter(Boolean).forEach(ea=>
E.add(ea));return E}},{key:"defaultActions",get:function(){const E=this._get("defaultActions")||new P;E.removeAll();E.addMany(O.isClusterFeature(this.selectedFeature)?[L.zoomToClusteredFeatures.clone(),L.browseClusteredFeatures.clone()]:[L.zoomToFeature.clone()]);return E}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(E){E=E||[];this._set("features",E);const {pendingPromisesCount:I,promiseCount:r,selectedFeatureIndex:G}=
this,J=r&&E.length;J&&I&&-1===G?this.selectedFeatureIndex=0:J&&-1!==G||(this.selectedFeatureIndex=E.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(E){let I=E;const r=this.view?.spatialReference?.isWebMercator;E&&E?.spatialReference?.isWGS84&&r&&(I=n.geographicToWebMercator(E));this._set("location",I)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||
0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(E){this._pendingPromises.clear();this.features=[];Array.isArray(E)&&E.length?(this._set("promises",E),E=E.slice(0),E.forEach(I=>{this._pendingPromises.add(I);I.then(r=>{this._pendingPromises.has(I)&&this._updateFeatures(r);this._updatePendingPromises(I)},()=>this._updatePendingPromises(I))})):this._set("promises",
[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:E,selectedFeatureIndex:I}=this;return-1===I?null:E[I]||null}},{key:"selectedFeatureIndex",get:function(){const E=this._get("selectedFeatureIndex");return"number"===typeof E?E:-1},set:function(E){const {featureCount:I}=this;E=isNaN(E)||-1>E||!I?-1:(E+I)%I;this.activeFeature=null;this._set("selectedFeatureIndex",E)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||
null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return H}(U.GoToMixin(K));q.__decorate([b.property()],k.prototype,"featurePage",void 0);q.__decorate([b.property()],k.prototype,"isLoadingFeature",null);q.__decorate([b.property({type:P})],k.prototype,"actions",void 0);q.__decorate([b.property({readOnly:!0})],k.prototype,"active",null);q.__decorate([b.property()],k.prototype,"activeFeature",void 0);q.__decorate([b.property({readOnly:!0})],k.prototype,"allActions",
null);q.__decorate([b.property({type:Boolean})],k.prototype,"defaultPopupTemplateEnabled",void 0);q.__decorate([b.property()],k.prototype,"autoCloseEnabled",void 0);q.__decorate([b.property()],k.prototype,"autoOpenEnabled",void 0);q.__decorate([b.property()],k.prototype,"browseClusterEnabled",void 0);q.__decorate([b.property()],k.prototype,"content",void 0);q.__decorate([b.property({type:P,readOnly:!0})],k.prototype,"defaultActions",null);q.__decorate([b.property({readOnly:!0})],k.prototype,"featureCount",
null);q.__decorate([b.property()],k.prototype,"features",null);q.__decorate([b.property()],k.prototype,"featuresPerPage",void 0);q.__decorate([b.property()],k.prototype,"featureViewModelAbilities",void 0);q.__decorate([b.property({readOnly:!0})],k.prototype,"featureViewModels",void 0);q.__decorate([b.property()],k.prototype,"highlightEnabled",void 0);q.__decorate([b.property()],k.prototype,"includeDefaultActions",void 0);q.__decorate([b.property({type:M})],k.prototype,"location",null);q.__decorate([b.property({readOnly:!0})],
k.prototype,"pendingPromisesCount",null);q.__decorate([b.property({readOnly:!0})],k.prototype,"selectedClusterBoundaryFeature",void 0);q.__decorate([b.property({readOnly:!0})],k.prototype,"waitingForResult",null);q.__decorate([b.property({readOnly:!0})],k.prototype,"promiseCount",null);q.__decorate([b.property()],k.prototype,"promises",null);q.__decorate([b.property({value:null,readOnly:!0})],k.prototype,"selectedFeature",null);q.__decorate([b.property({value:-1})],k.prototype,"selectedFeatureIndex",
null);q.__decorate([b.property({readOnly:!0})],k.prototype,"selectedFeatureViewModel",null);q.__decorate([b.property({readOnly:!0})],k.prototype,"state",null);q.__decorate([b.property()],k.prototype,"title",void 0);q.__decorate([b.property()],k.prototype,"updateLocationEnabled",void 0);q.__decorate([b.property()],k.prototype,"view",void 0);q.__decorate([b.property()],k.prototype,"visible",void 0);q.__decorate([b.property()],k.prototype,"zoomFactor",void 0);q.__decorate([b.property()],k.prototype,
"zoomToLocation",void 0);q.__decorate([b.property()],k.prototype,"centerAtLocation",null);return k=q.__decorate([d.subclass("esri.widgets.Popup.PopupViewModel")],k)})},"esri/layers/LayerConstants":function(){define(["exports"],function(m){m.fallbackObjectIDAttribute="OBJECTID";Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils ../../widgets/Legend/styles/support/relationshipUtils ../../widgets/Legend/support/relationshipRampUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b){function a(x,c){if(c&&(x.style.filter=u.getCSSFilterFromEffectList(c),c=c.effects))for(const e of c)if("drop-shadow"===e?.type){0>e.offsetX?x.style.marginLeft=`${Math.abs(e.offsetX)}px`:x.style.marginRight=`${e.offsetX}px`;break}}function l(x,c){return d.apply(this,arguments)}function d(){d=k._asyncToGenerator(function*(x,c){switch(x.type){case "web-style":var {previewWebStyleSymbol:e}=yield new Promise((p,C)=>m(["./previewWebStyleSymbol"],p,C));return e(x,l,c);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:e}=
yield new Promise((p,C)=>m(["./previewSymbol3D"],p,C)),e(x,c);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:e}=yield new Promise((p,C)=>m(["./previewSymbol2D"],p,C)),e(x,c);case "cim":return{previewCIMSymbol:e}=yield new Promise((p,C)=>m(["./previewCIMSymbol"],p,C)),e(x,c)}});return d.apply(this,arguments)}function n(x){return x&&"opacity"in x?x.opacity*n(x.parent):1}function f(){f=k._asyncToGenerator(function*(x,
c){if(x){var e=x.sourceLayer,p=(t.isSome(c)&&(c.useSourceLayer??!1)?e:x.layer)??e;e=n(p);if(t.isSome(x.symbol)&&(!t.isSome(c)||!0!==c.ignoreGraphicSymbol))return x="web-style"===x.symbol.type?yield u.fetchWebStyleSymbol(x.symbol,{...c,cache:t.isSome(c)?c.webStyleCache:null}):x.symbol.clone(),u.applyColorToSymbol(x,null,e),x;var C=(t.isSome(c)?c.renderer:null)??(p&&"renderer"in p?p.renderer:null);if(p=C&&"getSymbolAsync"in C?yield C.getSymbolAsync(x,c):null){p="web-style"===p.type?yield p.fetchSymbol({...c,
cache:t.isSome(c)?c.webStyleCache:null}):p.clone();if(!(C&&"visualVariables"in C&&C.visualVariables&&C.visualVariables.length))return u.applyColorToSymbol(p,null,e),p;"arcadeRequiredForVisualVariables"in C&&C.arcadeRequiredForVisualVariables&&(t.isNone(c)||t.isNone(c.arcade))&&(c={...t.unwrap(c)},c.arcade=yield A.loadArcade());var L=yield new Promise((P,V)=>m(["../../renderers/visualVariables/support/visualVariableUtils"],P,V)),O=[],K=[],U=[],T=[];for(var M of C.visualVariables)switch(M.type){case "color":O.push(M);
break;case "opacity":K.push(M);break;case "rotation":T.push(M);break;case "size":M.target||U.push(M)}M=(M=!!O.length&&O[O.length-1])?L.getColor(M,x,c):null;K=(K=!!K.length&&K[K.length-1])?L.getOpacity(K,x,c):null;null!=e&&(K=null!=K?K*e:e);u.applyColorToSymbol(p,M,K);U.length&&(e=L.getAllSizes(U,x,c),yield u.applySizesToSymbol(p,e));for(const P of T)u.applyRotationToSymbol(p,L.getRotationAngle(P,x,c),P.axis);return p}}});return f.apply(this,arguments)}function v(){v=k._asyncToGenerator(function*(x,
c){if(x){var e=n(x.layer||x.sourceLayer);if(t.isSome(x.symbol)&&(!t.isSome(c)||!0!==c.ignoreGraphicSymbol))return x="web-style"===x.symbol.type?yield u.fetchWebStyleSymbol(x.symbol,c):x.symbol.clone(),u.getColorFromSymbol(x,e);var p=t.isSome(c)&&c.renderer||x.get("layer.renderer")||x.get("sourceLayer.renderer"),C=yield p.getSymbolAsync(x,c);if(C){C="web-style"===C.type?yield u.fetchWebStyleSymbol(C,c):C.clone();var L=u.getColorFromSymbol(C,e);if(!("visualVariables"in p)||"visualVariables"in p&&!p.visualVariables||
"visualVariables"in p&&!p.visualVariables?.length)return L;p.arcadeRequiredForVisualVariables&&(t.isNone(c)||t.isNone(c.arcade))&&(c={...t.unwrap(c)},c.arcade=yield A.loadArcade());C=yield new Promise((U,T)=>m(["../../renderers/visualVariables/support/visualVariableUtils"],U,T));var O=[],K=[];for(const U of p.visualVariables)switch(U.type){case "color":O.push(U);break;case "opacity":K.push(U)}p=(p=0<O.length?O[O.length-1]:null)?C.getColor(p,x,c):L;x=(L=0<K.length?K[K.length-1]:null)?C.getOpacity(L,
x,c):null;null!=e&&(x=null!=x?x*e:e);return p?u.applyOpacityToColor(p,x):null}}});return v.apply(this,arguments)}let w=null;const D=[255,255,255];q.getDisplayedColor=function(x,c){return v.apply(this,arguments)};q.getDisplayedSymbol=function(x,c){return f.apply(this,arguments)};q.renderColorRampPreviewHTML=function(x,c={}){var e="horizontal"===c.align;const {width:p=e?75:24,height:C=e?24:75,gradient:L=!0}=c;var O=window.devicePixelRatio,K=p*O,U=C*O;O=document.createElement("canvas");O.width=K;O.height=
U;O.style.width=`${p}px`;O.style.height=`${C}px`;const T=O.getContext("2d");var M=e?K:0,P=e?0:U;if(L){const V=T.createLinearGradient(0,0,M,P);e=x.length;const H=1===e?0:1/(e-1);x.forEach((y,E)=>V.addColorStop(E*H,y.toString()));T.fillStyle=V;T.fillRect(0,0,K,U)}else{K=e?K/x.length:K;U=e?U:U/x.length;P=M=0;for(const V of x)T.fillStyle=V.toString(),T.fillRect(M,P,K,U),M=e?M+K:0,P=e?0:P+U}x=document.createElement("div");x.style.width=`${p}px`;x.style.height=`${C}px`;a(x,c?.effectList);x.appendChild(O);
return x};q.renderDotDensityPreviewHTML=function(x,c,e){const {backgroundColor:p,outline:C,dotSize:L}=x;e=e&&e.swatchSize||z.SymbolSizeDefaults.size;const O=Math.round(e*e/L**2*.8),K=window.devicePixelRatio;x=document.createElement("canvas");const U=e*K;x.width=U;x.height=U;x.style.width=`${x.width/K}px`;x.style.height=`${x.height/K}px`;const T=x.getContext("2d");p&&(T.fillStyle=p.toCss(!0),T.fillRect(0,0,U,U),T.fill());T.fillStyle=c.toCss(!0);if(w&&w.length/2===O)for(c=0;c<2*O;c+=2)T.fillRect(w[c],
w[c+1],L*K,L*K),T.fill();else for(w=[],c=0;c<2*O;c+=2){const M=Math.floor(Math.random()*(U-0+1)),P=Math.floor(Math.random()*(U-0+1));w.push(M,P);T.fillRect(M,P,L*K,L*K);T.fill()}C&&(C.color&&(T.strokeStyle=C.color.toCss(!0)),T.lineWidth=C.width,T.strokeRect(0,0,U,U));e=new Image(e,e);e.src=x.toDataURL();return e};q.renderPieChartPreviewHTML=function(x,c={}){const e=c.radius||40;var p=2*Math.PI*e,C=x.length;const L=p/C,O=[],K=B.getStroke(c.outline);null!=K?.width&&(K.width*=2);(K||c.backgroundColor)&&
O.push({shape:{type:"circle",cx:e,cy:e,r:e},fill:c.backgroundColor,stroke:K,offset:[0,0]});const U=c.values,T=U&&U.length===C&&100===U.reduce((P,V)=>P+V,0),M=[0];for(let P=0;P<C;P++){let V=null;T&&(V=U[P]*p/100,M.push(V+M[P]));O.push({shape:{type:"circle",cx:e,cy:e,r:e/2},fill:[0,0,0,0],stroke:{width:e,dashArray:`${(V??L)/2} ${p}`,dashoffset:`-${T?M[P]/2:L/2*P}`,color:x[P]},offset:[0,0]})}C=null;x=2*e+(K?.width||0);if(p=c.holePercentage)K&&O.push({shape:{type:"circle",cx:e,cy:e,r:e*p},fill:null,stroke:K,
offset:[0,0]}),C=x/2,C=[[{shape:{type:"circle",cx:C,cy:C,r:C},fill:D,stroke:K?{...K,color:D}:null,offset:[0,0]},{shape:{type:"circle",cx:C,cy:C,r:e*p},fill:[0,0,0],stroke:null,offset:[0,0]}]];return F.renderSymbol([O],[x,x],{effectView:c.effectList,ignoreStrokeWidth:!0,masking:C,rotation:-90})};q.renderPreviewHTML=l;q.renderRelationshipRampPreviewHTML=function(x,c={}){const e=x?.authoringInfo;if("relationship"!==e?.type||!e?.numClasses||!x.uniqueValueInfos)return null;const {focus:p,numClasses:C}=
e,L=b.getRelationshipRampElement({focus:p,numClasses:C,infos:x.uniqueValueInfos});x=c&&c.node||document.createElement("div");F.renderOnce(x,()=>g.renderRelationshipRamp(L,c.id||"relationship",c.opacity||1,c.effectList));return x};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(m,q){function k(h,t){return Math.round(Math.min(Math.max(h+191.25*t,0),255))}m.SymbolSizeDefaults=void 0;(function(h){h[h.size=
22]="size";h[h.lineWidth=50]="lineWidth";h[h.maxSize=120]="maxSize";h[h.maxOutlineSize=80]="maxOutlineSize";h[h.tallSymbolWidth=20]="tallSymbolWidth"})(m.SymbolSizeDefaults||(m.SymbolSizeDefaults={}));m.adjustColorBrightness=function(h,t){if(null==h)return new q;if("type"in h&&("linear"===h.type||"pattern"===h.type))return h;h=new q(h);return new q([k(h.r,t),k(h.g,t),k(h.b,t),h.a])};m.adjustColorComponentBrightness=k;m.getConeShapes=function(h,t){let A=t?m.SymbolSizeDefaults.tallSymbolWidth:h;t=t?
4:6;A=A<=m.SymbolSizeDefaults.size?A-.5*t:A-t;t=.15*A;const B=A;h-=t;return[{type:"ellipse",cx:.5*A,cy:h,rx:.5*A,ry:t},{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,h]},{command:"L",values:[0,h]},{command:"Z",values:[]}]}]};m.getCubeShapes=function(h,t){let A=t?m.SymbolSizeDefaults.tallSymbolWidth:h;var B=t?4:6;B=A=A<=m.SymbolSizeDefaults.size?A-.5*B:A-B;t=t?.35*A:.5*A;return[{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,.5*t]},{command:"L",values:[.5*
B,t]},{command:"L",values:[0,.5*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*t]},{command:"L",values:[.5*B,t]},{command:"L",values:[.5*B,h]},{command:"L",values:[0,h-.5*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*B,t]},{command:"L",values:[.5*B,h]},{command:"L",values:[B,h-.5*t]},{command:"L",values:[B,.5*t]},{command:"Z",values:[]}]}]};m.getCylinderShapes=function(h,t){var A=t?m.SymbolSizeDefaults.tallSymbolWidth:h;t=t?4:6;A=A<=m.SymbolSizeDefaults.size?
A-.5*t:A-t;t=.5*A;const B=.15*A;h-=B;return[{type:"ellipse",cx:.5*A,cy:h,rx:t,ry:B},{type:"path",path:[{command:"M",values:[0,B]},{command:"L",values:[0,h]},{command:"L",values:[A,h]},{command:"L",values:[A,B]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*A,cy:B,rx:t,ry:B}]};m.getDiamondShapes=function(h){var t=h;t=t<m.SymbolSizeDefaults.size?t-2:t-4;const A=Math.floor(h/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[t,.5*h-A]},{command:"L",values:[.45*t-
A,.5*h+A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[.45*t-A,.5*h+A]},{command:"L",values:[0,.5*h-A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*h-A]},{command:"L",values:[.45*t-A,.5*h+A]},{command:"L",values:[.45*t,h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,h]},{command:"L",values:[t,.5*h-A]},{command:"L",values:[.45*t-A,.5*h+A]},{command:"Z",values:[]}]}]};m.getExtrudeSymbolShapes=
function(h){const t=m.SymbolSizeDefaults.size;h*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*t]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+h]},{command:"L",values:[0,.7*t+h-.35*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+h]},{command:"L",values:[t,h]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,0]},{command:"L",values:[t,0]},{command:"L",values:[.3*
t,.7*t]},{command:"L",values:[0,.35*t]},{command:"Z",values:[]}]}]};m.getInvertedConeShapes=function(h){let t=h;t=t<m.SymbolSizeDefaults.size?t-3:t-6;const A=.15*t,B=t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[.5*B,h-A]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:A}]};m.getPathSymbolShapes=function(h,t,A){var B=m.SymbolSizeDefaults.size;let z=B,F=B;1>h?z*=.75:1<h&&(F*=1.25);h=B;t&&A&&(z=F=h=B=0);return[{type:"path",
path:[{command:"M",values:[h,0]},{command:"L",values:[A?h:.875*h,0]},{command:"L",values:[A?z-.5*h:0,F-.5*B]},{command:"L",values:[z-.5*h,F-.5*B]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[h,0]},{command:"L",values:[h,t?0:.125*B]},{command:"L",values:[z-.5*h,t?F-.5*B:B]},{command:"L",values:[z-.5*h,F-.5*B]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[z-.5*h,F-.5*B]},{command:"L",values:[A?z-.5*h:0,F-.5*B]},{command:"L",values:[A?z-.5*h:0,t?F-.5*B:B]},
{command:"L",values:[z-.5*h,t?F-.5*B:B]},{command:"Z",values:[]}]}]};m.getTetrahedronShapes=function(h){var t=h;t=t<m.SymbolSizeDefaults.size?t-1:t-2;return[{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",values:[h,t]},{command:"L",values:[.45*h,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",values:[.45*h,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*
h,.6*t]},{command:"L",values:[h,t]},{command:"Z",values:[]}]}]};m.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
m.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(m,q,k,h,t,A,B,z,F,u){function g(l,d){a.append(l,d);a.detach(d)}function b(l,d,n){return l?k(l,{responseType:"image"}).then(f=>{f=f.data;const v=f.width,w=f.height,D=v/w;let x=d;n&&(x=Math.min(x,Math.max(v,w)));return{image:f,width:1>=D?Math.ceil(x*D):x,height:1>=D?x:Math.ceil(x/D)}}):Promise.reject(new t("renderUtils: imageDataSize","href not provided."))}const a=z.createProjector();m.renderOnce=g;m.renderSymbol=function(l,d,n){const f=Math.ceil(d[0]),v=Math.ceil(d[1]);if(!l.some(w=>!!w.length))return null;
d=n&&n.node||document.createElement("div");null!=n.opacity&&(d.style.opacity=n.opacity.toString());null!=n.effectView&&(d.style.filter=u.getCSSFilterFromEffectList(n.effectView));g(d,()=>F.renderSVG(l,f,v,n));return d};m.tintImageWithColor=function(l,d,n,f,v){return b(l,d,v).then(w=>{const D=w.width?w.width:d,x=w.height?w.height:d;var c;if(c=w.image)c=n&&"ignore"!==f?"multiply"===f&&255===n.r&&255===n.g&&255===n.b&&1===n.a?!1:!0:!1;if(c){var e=w.image.width,p=w.image.height;A("edge")&&/\.svg$/i.test(l)&&
(--e,--p);c=Math.ceil(D);var C=Math.ceil(x);var L=document.createElement("canvas");L.width=c;L.height=C;L.style.width=c+"px";L.style.height=C+"px";L=L.getContext("2d");L.clearRect(0,0,c,C);c=L;c.drawImage(w.image,0,0,e,p,0,0,D,x);C=c.getImageData(0,0,D,x);L=[n.r/255,n.g/255,n.b/255,n.a];const K=h.toHSV(n);for(let U=0;U<C.data.length;U+=4){w=C.data;e=U;p=L;var O=K;switch(f){case "multiply":w[e+0]*=p[0];w[e+1]*=p[1];w[e+2]*=p[2];w[e+3]*=p[3];break;default:const T=h.toHSV({r:w[e+0],g:w[e+1],b:w[e+2]});
T.h=O.h;T.s=O.s;T.v=T.v/100*O.v;O=h.toRGB(T);w[e+0]=O.r;w[e+1]=O.g;w[e+2]=O.b;w[e+3]*=p[3]}}c.putImageData(C,0,0);l=c.canvas.toDataURL("image/png")}else(c=q.id&&q.id.findCredential(l))&&c.token&&(w=l.includes("?")?"\x26":"?",l=`${l}${w}token=${c.token}`);return{url:l,width:D,height:x}}).catch(()=>({url:l,width:d,height:d}))};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/colorUtils":function(){define(["exports"],function(m){function q(u,g){const b=[];let a,l;if(u[0].length!==
g.length)throw Error("dimensions do not match");const d=u.length,n=u[0].length;let f=0;for(a=0;a<d;a++){for(l=f=0;l<n;l++)f+=u[a][l]*g[l];b.push(f)}return b}function k(u){u=[u.r/255,u.g/255,u.b/255].map(g=>.04045>=g?g/12.92:((g+.055)/1.055)**2.4);u=q(z,u);return{x:100*u[0],y:100*u[1],z:100*u[2]}}function h(u){u=q(F,[u.x/100,u.y/100,u.z/100]).map(g=>Math.min(1,Math.max(.0031308>=g?12.92*g:1.055*g**(1/2.4)-.055,0)));return{r:Math.round(255*u[0]),g:Math.round(255*u[1]),b:Math.round(255*u[2])}}function t(u){u=
[u.x/95.047,u.y/100,u.z/108.883].map(g=>g>(6/29)**3?g**(1/3):1/3*(29/6)**2*g+4/29);return{l:116*u[1]-16,a:500*(u[0]-u[1]),b:200*(u[1]-u[2])}}function A(u){const g=u.l;u=[(g+16)/116+u.a/500,(g+16)/116,(g+16)/116-u.b/200].map(b=>b>6/29?b**3:3*(6/29)**2*(b-4/29));return{x:95.047*u[0],y:100*u[1],z:108.883*u[2]}}function B(u){if("r"in u&&"g"in u&&"b"in u)return u;if("l"in u&&"c"in u&&"h"in u){var g=u.c,b=u.h;return h(A({l:u.l,a:g*Math.cos(b),b:g*Math.sin(b)}))}if("l"in u&&"a"in u&&"b"in u)return h(A(u));
if("x"in u&&"y"in u&&"z"in u)return h(u);if("h"in u&&"s"in u&&"v"in u){b=(u.h+360)%360/60;g=u.v/100*255;u=u.s/100*g;const a=u*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:u,g:a,b:0};break;case 1:b={r:a,g:u,b:0};break;case 2:b={r:0,g:u,b:a};break;case 3:b={r:0,g:a,b:u};break;case 4:b={r:a,g:0,b:u};break;case 5:case 6:b={r:u,g:0,b:a};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+g-u);b.g=Math.round(b.g+g-u);b.b=Math.round(b.b+g-u);return b}return u}const z=[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],F=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];m.darken=function(u,g){u=t(k(u));u.l*=1-g;return h(A(u))};m.toHSV=function(u){if("h"in u&&"s"in u&&"v"in u)return u;var g=B(u);u=g.r;const b=g.g,a=g.b;g=Math.max(u,b,a);const l=g-Math.min(u,b,a);u=0===l?0:g===u?(b-a)/l%6:g===b?(a-u)/l+2:(u-b)/l+4;0>u&&(u+=6);return{h:60*u,s:100*(0===l?0:l/g),v:100/255*g}};m.toLAB=function(u){return"l"in u&&"a"in u&&"b"in u?u:t(k(B(u)))};m.toLCH=function(u){if(!("l"in
u&&"c"in u&&"h"in u)){var g=t(k(B(u)));u=g.l;var b=g.a;const a=g.b;g=Math.sqrt(b*b+a*a);b=Math.atan2(a,b);b=0<b?b:b+2*Math.PI;u={l:u,c:g,h:b}}return u};m.toRGB=B;m.toXYZ=function(u){return"x"in u&&"y"in u&&"z"in u?u:k(B(u))};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(m,q,k,h,t,A,B,z){function F(y,E){y*=V/180;return Math.abs(E*Math.sin(y))+Math.abs(E*Math.cos(y))}function u(y){return y.map(E=>`${E.command} ${E.values.join(" ")}`).join(" ").trim()}function g(y,E,I,r){if(y){if("circle"===y.type)return z.tsx("circle",{fill:E,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-dashoffset":I.dashOffset,"stroke-miterlimit":"4",cx:y.cx,cy:y.cy,r:y.r});if("ellipse"===
y.type)return z.tsx("ellipse",{fill:E,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",cx:y.cx,cy:y.cy,rx:y.rx,ry:y.ry});if("rect"===y.type)return z.tsx("rect",{fill:E,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",x:y.x,y:y.y,width:y.width,height:y.height});if("image"===
y.type)return z.tsx("image",{href:y.src,x:y.x,y:y.y,width:y.width,height:y.height,preserveAspectRatio:"none"});if("path"===y.type)return y="string"!==typeof y.path?u(y.path):y.path,z.tsx("path",{fill:E,"fill-rule":"evenodd",stroke:I.color,"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4",d:y});if("text"===y.type)return h.assertIsSome(r),z.tsx("text",{"dominant-baseline":r.dominantBaseline,fill:E,"fill-rule":"evenodd",stroke:I.color,
"stroke-width":I.width,"stroke-linecap":I.cap,"stroke-linejoin":I.join,"stroke-dasharray":I.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":O,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:y.x,y:y.y},y.text)}return null}function b(y){const E={fill:"none",pattern:null,linearGradient:null};if(y)if("type"in y&&"pattern"===
y.type){var I=`patternId-${++C}`;E.fill=`url(#${I})`;E.pattern={id:I,x:y.x,y:y.y,width:y.width,height:y.height,image:{x:0,y:0,width:y.width,height:y.height,href:y.src}}}else"type"in y&&"linear"===y.type?(I=`linearGradientId-${++L}`,E.fill=`url(#${I})`,E.linearGradient={id:I,x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,stops:y.colors.map(r=>({offset:r.offset,color:r.color&&(new q(r.color)).toString()}))}):y&&(y=new q(y),E.fill=y.toString());return E}function a(y){const E={color:"none",width:1,cap:"butt",join:"4",
dashArray:"none",dashOffset:"0"};if(y&&(null!=y.width&&(E.width=y.width),y.cap&&(E.cap=y.cap),y.join&&(E.join=y.join.toString()),y.color&&(E.color=(new q(y.color)).toString()),y.dashArray&&(E.dashArray=y.dashArray),y.dashArray&&(E.dashOffset=y.dashoffset),y.style)){let I=null;y.style in P&&(I=P[y.style]);if(Array.isArray(I)){I=I.slice(0);const r=y.width??0;for(let G=0;G<I.length;++G)I[G]*=r;if("butt"!==y.cap){for(y=0;y<I.length;y+=2)I[y]-=r,1>I[y]&&(I[y]=1);for(y=1;y<I.length;y+=2)I[y]+=r}I=I.join(",")}E.dashArray=
I}return E}function l(y,E){const I={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(y){const r=y.alignBaseline;I.align=y.align;I.dominantBaseline="baseline"===r?"auto":"top"===r?"text-top":"bottom"===r?"hanging":r;I.decoration=y.decoration;I.kerning=y.kerning?"auto":"0";I.rotate=y.rotated?"90":"0";h.assertIsSome(E);I.font.style=E.style||"normal";I.font.variant=E.variant||"normal";I.font.weight=E.weight||"normal";I.font.size=
E.size&&E.size.toString()||"10pt";I.font.family=E.family||"serif"}return I}function d(y){const {pattern:E,linearGradient:I}=y;return E?z.tsx("pattern",{id:E.id,patternUnits:"userSpaceOnUse",x:E.x,y:E.y,width:E.width,height:E.height},z.tsx("image",{x:E.image.x,y:E.image.y,width:E.image.width,height:E.image.height,href:E.image.href})):I?(y=I.stops.map((r,G)=>z.tsx("stop",{key:`${G}-stop`,offset:r.offset,"stop-color":r.color})),z.tsx("linearGradient",{id:I.id,gradientUnits:"userSpaceOnUse",x1:I.x1,y1:I.y1,
x2:I.x2,y2:I.y2},y)):null}function n(y,E){if(!y)return null;const I=[];for(const r of y){const {shape:G,fill:J,stroke:N,font:R}=r;y=b(J);const W=a(N),da="text"===G.type?l(G,R):null;(y=g(G,y.fill,W,da))&&I.push(y)}return z.tsx("mask",{id:E,maskUnits:"userSpaceOnUse"},z.tsx("g",null,I))}function f(y,E,I,r,G){A.scale(y,A.identity(y),[E,I]);y[4]=y[4]*E-r*E+r;y[5]=y[5]*I-G*I+G;return y}function v(y,E){if(T&&"left"in T){null!=T.left&&T.left>y&&(T.left=y);if(null==T.right||T.right<y)T.right=y;if(null==T.top||
T.top>E)T.top=E;if(null==T.bottom||T.bottom<E)T.bottom=E}else T={left:y,bottom:E,right:y,top:E}}function w(y){const E=y.args,I=E.length;switch(y.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(y=0;y<I;y+=2)v(E[y],E[y+1]);M.x=E[I-2];M.y=E[I-1];break;case "H":for(y=0;y<I;++y)v(E[y],M.y);M.x=E[I-1];break;case "V":for(y=0;y<I;++y)v(M.x,E[y]);M.y=E[I-1];break;case "m":y=0;"x"in M||(v(M.x=E[0],M.y=E[1]),y=2);for(;y<I;y+=2)v(M.x+=E[y],M.y+=E[y+1]);break;case "l":case "t":for(y=0;y<I;y+=
2)v(M.x+=E[y],M.y+=E[y+1]);break;case "h":for(y=0;y<I;++y)v(M.x+=E[y],M.y);break;case "v":for(y=0;y<I;++y)v(M.x,M.y+=E[y]);break;case "c":for(y=0;y<I;y+=6)v(M.x+E[y],M.y+E[y+1]),v(M.x+E[y+2],M.y+E[y+3]),v(M.x+=E[y+4],M.y+=E[y+5]);break;case "s":case "q":for(y=0;y<I;y+=4)v(M.x+E[y],M.y+E[y+1]),v(M.x+=E[y+2],M.y+=E[y+3]);break;case "A":for(y=0;y<I;y+=7)v(E[y+5],E[y+6]);M.x=E[I-2];M.y=E[I-1];break;case "a":for(y=0;y<I;y+=7)v(M.x+=E[y+5],M.y+=E[y+6])}}function D(y,E,I){const r=K[y.toLowerCase()];"number"===
typeof r&&(r?E.length>=r&&(y={action:y,args:E.slice(0,E.length-E.length%r)},I.push(y),w(y)):(y={action:y,args:[]},I.push(y),w(y)))}function x(y){const E={x:0,y:0,width:0,height:0};if("circle"===y.type)E.x=y.cx-y.r,E.y=y.cy-y.r,E.width=2*y.r,E.height=2*y.r;else if("ellipse"===y.type)E.x=y.cx-y.rx,E.y=y.cy-y.ry,E.width=2*y.rx,E.height=2*y.ry;else if("image"===y.type||"rect"===y.type)E.x=y.x,E.y=y.y,E.width=y.width,E.height=y.height;else if("path"===y.type){var I=h.unwrapOrThrow;{const J=("string"!==
typeof y.path?u(y.path):y.path).match(U),N=[];T={};M={};if(J){y="";var r=[],G=J.length;for(let R=0;R<G;++R){const W=J[R],da=parseFloat(W);isNaN(da)?(y&&D(y,r,N),r=[],y=W):r.push(da)}D(y,r,N);y={x:0,y:0,width:0,height:0};T&&"left"in T&&(y.x=T.left,y.y=T.top,y.width=T.right-T.left,y.height=T.bottom-T.top)}else y=null}I=I.call(h,y);E.x=I.x;E.y=I.y;E.width=I.width;E.height=I.height}return E}function c(y){const E={x:0,y:0,width:0,height:0};let I=null,r=Number.NEGATIVE_INFINITY,G=Number.NEGATIVE_INFINITY;
for(const J of y)I?(I.x=Math.min(I.x,J.x),I.y=Math.min(I.y,J.y),r=Math.max(r,J.x+J.width),G=Math.max(G,J.y+J.height)):(I=E,I.x=J.x,I.y=J.y,r=J.x+J.width,G=J.y+J.height);I&&(I.width=r-I.x,I.height=G-I.y);return I}function e(y,E,I,r,G,J,N,R,W){var da=(N&&J?F(J,E):E)/2,ea=(N&&J?F(J,I):I)/2;if(W){var fa=W[0];W=W[1];da=(N&&J?F(J,fa):fa)/2;ea=(N&&J?F(J,W):W)/2}fa=y.width+r;var Q=y.height+r;W=t.create();N=t.create();var Y=!1;if(G&&0!==fa&&0!==Q){G=E!==I?E/I:fa/Q;Y=E>I?E:I;let ba=1,S=1;isNaN(Y)||(1<G?(ba=
Y/fa,S=Y/G/Q):(S=Y/Q,ba=Y*G/fa));A.multiply(N,N,f(W,ba,S,da,ea));Y=!0}G=y.x+(fa-r)/2;y=y.y+(Q-r)/2;r=A.multiply;da-=G;ea-=y;da=A.translate(W,A.identity(W),[da,ea]);r.call(A,N,N,da);!Y&&(fa>E||Q>I)&&(da=fa/E>Q/I,E=(da?E:I)/(da?fa:Q),A.multiply(N,N,f(W,E,E,G,y)));J&&(E=A.multiply,I=J%360*Math.PI/180,A.rotate(W,A.identity(W),I),J=Math.cos(I),I=Math.sin(I),fa=W[4],Q=W[5],W[4]=fa*J-Q*I+y*I-G*J+G,W[5]=Q*J+fa*I-G*I-y*J+y,E.call(A,N,N,W));R&&(J=A.multiply,E=R[0],R=R[1],R=A.translate(W,A.identity(W),[E,R]),
J.call(A,N,N,R));return`matrix(${N[0]},${N[1]},${N[2]},${N[3]},${N[4]},${N[5]})`}function p(y,E,I){y=y?.effects.find(R=>"bloom"===R.type);if(!y)return null;const {strength:r,radius:G}=y;y=0<r?G:0;const J=(r+y)*E,N=4*r+1;return z.tsx("filter",{id:`bloom${I}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},z.tsx("feMorphology",{operator:"dilate",radius:(r+.5*y)*5**(E/100)*(.4+E/100),in:"SourceGraphic",result:"dilate"}),z.tsx("feGaussianBlur",{in:"dilate",stdDeviation:J/
25,result:"blur"}),z.tsx("feGaussianBlur",{in:"blur",stdDeviation:J/50,result:"intensityBlur"}),z.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},z.tsx("feFuncR",{type:"linear",slope:N}),z.tsx("feFuncG",{type:"linear",slope:N}),z.tsx("feFuncB",{type:"linear",slope:N})),z.tsx("feMerge",null,z.tsx("feMergeNode",{in:"intensityBlur"}),z.tsx("feMergeNode",{in:"intensityBrightness"}),z.tsx("feGaussianBlur",{stdDeviation:r/10})))}let C=0,L=0;B=k("android");const O=k("chrome")||
B&&4<=B?"auto":"optimizeLegibility",K={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},U=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let T={},M={};const P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},V=Math.PI;let H=1;m.computeBBox=c;m.generateFillAttributes=b;m.generateStrokeAttributes=a;m.generateTextAttributes=l;m.getBoundingBox=x;m.getTransformMatrix=
e;m.renderDef=d;m.renderSVG=function(y,E,I,r={}){const G=[],J=[],N=++H,R=p(r.effectView,E,N);var W=null;R&&(W=r.effectView?.effects.find(Y=>"bloom"===Y.type),W=(W.strength?W.strength+W.radius/2:0)/3,W=[Math.max(E+E*W,10),Math.max(I+I*W,10)]);for(let Y=0;Y<y.length;Y++){var da=y[Y];const ba=[];var ea=[],fa=0,Q=0;let S=0;for(const X of da){const {shape:aa,fill:ha,stroke:ia,font:ja,offset:ma}=X;r.ignoreStrokeWidth||(fa+=ia&&ia.width||0);da=b(ha);const na=a(ia),ra="text"===aa.type?l(aa,ja):null;G.push(d(da));
ba.push(g(aa,da.fill,na,ra));ea.push(x(aa));ma&&(Q+=ma[0],S+=ma[1])}ea=h.unwrapOrThrow(c(ea));fa=e(ea,E,I,fa,r.scale??!1,r.rotation,r.useRotationSize??!1,[Q,S],W);Q=null;r.masking&&(Q=`mask-${Y}`,G.push(n(r.masking[Y],Q)),Q=`url(#${Q})`);J.push(Q?z.tsx("g",{mask:Q},z.tsx("g",{transform:fa},ba)):z.tsx("g",{transform:fa},ba))}r.useRotationSize&&r.rotation&&(E=F(r.rotation,E),I=F(r.rotation,I));R&&(h.assertIsSome(W),E=W[0],I=W[1]);return z.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:E,height:I,
style:"display: block;"},R,z.tsx("defs",null,G),R?z.tsx("g",{filter:`url(#bloom${N})`},J):J)};m.renderShape=g;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2df32":function(){define(["exports"],function(m){function q(){const F=new Float32Array(6);F[0]=1;F[3]=1;return F}function k(F){const u=new Float32Array(6);u[0]=F[0];u[1]=F[1];u[2]=F[2];u[3]=F[3];u[4]=F[4];u[5]=F[5];return u}function h(F,u,g,b,a,l){const d=new Float32Array(6);d[0]=F;d[1]=u;d[2]=g;d[3]=b;d[4]=a;
d[5]=l;return d}function t(F,u){return new Float32Array(F,u,6)}function A(F,u,g,b){const a=u[b];u=u[b+1];F[b]=g[0]*a+g[2]*u+g[4];F[b+1]=g[1]*a+g[3]*u+g[5]}function B(F,u,g,b=0,a=0,l=2){for(a=a||u.length/l;b<a;b++)A(F,u,g,b*l)}const z=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:q,createView:t,fromValues:h,transform:A,transformMany:B},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=q;m.createView=t;m.fromValues=h;m.mat2df32=z;m.transform=A;m.transformMany=B})},"esri/chunks/mat2d":function(){define(["exports",
"./common"],function(m,q){function k(p,C){p[0]=C[0];p[1]=C[1];p[2]=C[2];p[3]=C[3];p[4]=C[4];p[5]=C[5];return p}function h(p){p[0]=1;p[1]=0;p[2]=0;p[3]=1;p[4]=0;p[5]=0;return p}function t(p,C,L,O,K,U,T){p[0]=C;p[1]=L;p[2]=O;p[3]=K;p[4]=U;p[5]=T;return p}function A(p,C){const L=C[0],O=C[1],K=C[2],U=C[3],T=C[4];C=C[5];let M=L*U-O*K;if(!M)return null;M=1/M;p[0]=U*M;p[1]=-O*M;p[2]=-K*M;p[3]=L*M;p[4]=(K*C-U*T)*M;p[5]=(O*T-L*C)*M;return p}function B(p){return p[0]*p[3]-p[1]*p[2]}function z(p,C,L){const O=
C[0],K=C[1],U=C[2],T=C[3],M=C[4];C=C[5];const P=L[0],V=L[1],H=L[2],y=L[3],E=L[4];L=L[5];p[0]=O*P+U*V;p[1]=K*P+T*V;p[2]=O*H+U*y;p[3]=K*H+T*y;p[4]=O*E+U*L+M;p[5]=K*E+T*L+C;return p}function F(p,C,L){const O=C[0],K=C[1],U=C[2],T=C[3],M=C[4];C=C[5];const P=Math.sin(L);L=Math.cos(L);p[0]=O*L+U*P;p[1]=K*L+T*P;p[2]=O*-P+U*L;p[3]=K*-P+T*L;p[4]=M;p[5]=C;return p}function u(p,C,L){const O=C[1],K=C[2],U=C[3],T=C[4],M=C[5],P=L[0];L=L[1];p[0]=C[0]*P;p[1]=O*P;p[2]=K*L;p[3]=U*L;p[4]=T;p[5]=M;return p}function g(p,
C,L){const O=C[0],K=C[1],U=C[2],T=C[3],M=C[4];C=C[5];const P=L[0];L=L[1];p[0]=O;p[1]=K;p[2]=U;p[3]=T;p[4]=O*P+U*L+M;p[5]=K*P+T*L+C;return p}function b(p,C){const L=Math.sin(C);C=Math.cos(C);p[0]=C;p[1]=L;p[2]=-L;p[3]=C;p[4]=0;p[5]=0;return p}function a(p,C){p[0]=C[0];p[1]=0;p[2]=0;p[3]=C[1];p[4]=0;p[5]=0;return p}function l(p,C){p[0]=1;p[1]=0;p[2]=0;p[3]=1;p[4]=C[0];p[5]=C[1];return p}function d(p){return"mat2d("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+")"}function n(p){return Math.sqrt(p[0]**
2+p[1]**2+p[2]**2+p[3]**2+p[4]**2+p[5]**2+1)}function f(p,C,L){p[0]=C[0]+L[0];p[1]=C[1]+L[1];p[2]=C[2]+L[2];p[3]=C[3]+L[3];p[4]=C[4]+L[4];p[5]=C[5]+L[5];return p}function v(p,C,L){p[0]=C[0]-L[0];p[1]=C[1]-L[1];p[2]=C[2]-L[2];p[3]=C[3]-L[3];p[4]=C[4]-L[4];p[5]=C[5]-L[5];return p}function w(p,C,L){p[0]=C[0]*L;p[1]=C[1]*L;p[2]=C[2]*L;p[3]=C[3]*L;p[4]=C[4]*L;p[5]=C[5]*L;return p}function D(p,C,L,O){p[0]=C[0]+L[0]*O;p[1]=C[1]+L[1]*O;p[2]=C[2]+L[2]*O;p[3]=C[3]+L[3]*O;p[4]=C[4]+L[4]*O;p[5]=C[5]+L[5]*O;return p}
function x(p,C){return p[0]===C[0]&&p[1]===C[1]&&p[2]===C[2]&&p[3]===C[3]&&p[4]===C[4]&&p[5]===C[5]}function c(p,C){const L=p[0],O=p[1],K=p[2],U=p[3],T=p[4];p=p[5];const M=C[0],P=C[1],V=C[2],H=C[3],y=C[4];C=C[5];const E=q.getEpsilon();return Math.abs(L-M)<=E*Math.max(1,Math.abs(L),Math.abs(M))&&Math.abs(O-P)<=E*Math.max(1,Math.abs(O),Math.abs(P))&&Math.abs(K-V)<=E*Math.max(1,Math.abs(K),Math.abs(V))&&Math.abs(U-H)<=E*Math.max(1,Math.abs(U),Math.abs(H))&&Math.abs(T-y)<=E*Math.max(1,Math.abs(T),Math.abs(y))&&
Math.abs(p-C)<=E*Math.max(1,Math.abs(p),Math.abs(C))}const e=Object.freeze(Object.defineProperty({__proto__:null,add:f,copy:k,determinant:B,equals:c,exactEquals:x,frob:n,fromRotation:b,fromScaling:a,fromTranslation:l,identity:h,invert:A,mul:z,multiply:z,multiplyScalar:w,multiplyScalarAndAdd:D,rotate:F,scale:u,set:t,str:d,sub:v,subtract:v,translate:g},Symbol.toStringTag,{value:"Module"}));m.add=f;m.copy=k;m.determinant=B;m.equals=c;m.exactEquals=x;m.frob=n;m.fromRotation=b;m.fromScaling=a;m.fromTranslation=
l;m.identity=h;m.invert=A;m.mat2d=e;m.mul=z;m.multiply=z;m.multiplyScalar=w;m.multiplyScalarAndAdd=D;m.rotate=F;m.scale=u;m.set=t;m.str=d;m.sub=v;m.subtract=v;m.translate=g})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(m,q,k,h,t){function A(F,u,g){const b=`${g}_arrowStart`;g=`${g}_arrowEnd`;F="left"===F;const a={markerStart:null,
markerEnd:null};switch(u){case "HL":F?a.markerStart=`url(#${g})`:a.markerEnd=`url(#${b})`;break;case "LL":a.markerStart=`url(#${g})`;break;case "LH":F?a.markerEnd=`url(#${b})`:a.markerStart=`url(#${g})`;break;default:a.markerEnd=`url(#${b})`}return a}function B(F,u,g,b,a=60){const {focus:l,numClasses:d,colors:n,rotation:f}=F;F=!!l;const v=Math.sqrt(a**2+a**2)+(F?0:5),w=[],D=[];var x=[],c=(a||75)/d;for(var e=0;e<d;e++){var p=e*c;for(var C=0;C<d;C++){var L=C*c,O=q.generateFillAttributes(n[e][C]);const K=
q.generateStrokeAttributes(null);L={type:"rect",x:L,y:p,width:c,height:c};const U=q.renderDef(O);U&&w.push(U);(O=q.renderShape(L,O.fill,K,null))&&D.push(O);x.push(q.getBoundingBox(L))}}c=null;F||(c="margin: -15px -15px -18px -15px");e=A("left",l,u);p=A("right",l,u);C=q.computeBBox(x);x=q.getTransformMatrix(C,v,v,0,!1,f,!1);C=q.getTransformMatrix(C,v,v,0,!1,F?-45:null,!1);g={filter:k.getCSSFilterFromEffectList(b),opacity:null==g?"":`${g}`};return t.tsx("div",{styles:g,class:F?z.diamondMidColRamp:z.squareTableCell},
t.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:v,height:v,style:c},t.tsx("defs",null,t.tsx("marker",{id:`${u}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},t.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),t.tsx("marker",{id:`${u}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},t.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555",
"stroke-width":"1"})),w),t.tsx("g",{transform:x},D),t.tsx("g",{transform:C},t.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":e.markerStart,"marker-end":e.markerEnd,x1:-10,y1:a-15,x2:-10,y2:15}),t.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":p.markerStart,"marker-end":p.markerEnd,x1:15,y1:a+10,x2:a-15,y2:a+10}))))}const z={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",
diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",
squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};m.renderRelationshipRamp=function(F,u,g,b){const {focus:a,labels:l}=F,d=!!a;F=B(F,u,g,b);u={justifyContent:"center"};g=h.isRTL();return d?t.tsx("div",{class:z.diamondContainer,
styles:u},t.tsx("div",{class:z.diamondLeftCol},g?l.right:l.left),t.tsx("div",{class:z.diamondMidCol},t.tsx("div",{class:z.diamondMidColLabel},l.top),F,t.tsx("div",{class:z.diamondMidColLabel},l.bottom)),t.tsx("div",{class:z.diamondRightCol},g?l.left:l.right)):t.tsx("div",{class:z.squareTable},t.tsx("div",{class:z.squareTableRow},t.tsx("div",{class:h.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelRightBottom)},g?l.top:l.left),t.tsx("div",{class:z.squareTableCell}),t.tsx("div",{class:h.classes(z.squareTableCell,
z.squareTableLabel,z.squareTableLabelLeftBottom)},g?l.left:l.top)),t.tsx("div",{class:z.squareTableRow},t.tsx("div",{class:z.squareTableCell}),F,t.tsx("div",{class:z.squareTableCell})),t.tsx("div",{class:z.squareTableRow},t.tsx("div",{class:h.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelRightTop)},g?l.right:l.bottom),t.tsx("div",{class:z.squareTableCell}),t.tsx("div",{class:h.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelLeftTop)},g?l.bottom:l.right)))};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(m,q,k,h){function t(u){if(u){var {type:g}=u;return g.includes("3d")?h.getSymbolLayerFill(u.symbolLayers.getItemAt(0)):"simple-line"===g||"simple-marker"===u.type&&("x"===u.style||"cross"===u.style)?(u=k.getStroke(u))&&u.color:k.getFill(u)}}function A(u,g){const b=g.HH.label,
a=g.LL.label,l=g.HL.label;g=g.LH.label;switch(u){case "HH":return{top:b,bottom:a,left:l,right:g};case "HL":return{top:l,bottom:g,left:a,right:b};case "LL":return{top:a,bottom:b,left:g,right:l};case "LH":return{top:g,bottom:l,left:b,right:a};default:return{top:b,bottom:a,left:l,right:g}}}function B(u){let g=z[u];u&&null==g&&(g=z.HH);return g||0}const z={HH:315,HL:45,LL:135,LH:225},F={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L",
"M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};m.getRelationshipRampColors2D=function(u,g){const b=[],a=u.length**.5;u=q.clone(u);var l=(g||"HH").split("");g=l[0];for(l="H"===l[1];u.length;){const d=[];for(;d.length<a;)d.push(u.shift());l&&d.reverse();b.push(d)}"L"===g&&b.reverse();return b};m.getRelationshipRampElement=function(u){const {focus:g,infos:b,numClasses:a}=u;var l=F[a];const d={};b.forEach(n=>{d[n.value]={label:n.label,fill:t(n.symbol)}});u=[];for(let n=0;n<
a;n++){const f=[];for(let v=0;v<a;v++)f.push(d[l[n][v]].fill);u.push(f)}l=A(g,d);return{type:"relationship-ramp",numClasses:a,focus:g,colors:u,labels:l,rotation:B(g)}};m.getRotationAngleForFocus=B;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f){function v(N){const R=N.outline;var W=z.isSome(N.material)?N.material.color:null;W=z.isSome(W)?W.toHex():null;if(z.isNone(R)||"pattern"in R&&z.isSome(R.pattern)&&"style"===R.pattern.type&&"none"===R.pattern.style)return"fill"===N.type&&"#ffffff"===W?{color:"#bdc3c7",width:.75}:null;N=u.pt2px(R.size)||0;return{color:"rgba("+(z.isSome(R.color)?R.color.toRgba():"255,255,255,1")+")",width:Math.min(N,r),style:"pattern"in R&&z.isSome(R.pattern)&&"style"===R.pattern.type?
g.dekebabifyLineStyle(R.pattern.style):null,join:"butt",cap:"patternCap"in R?R.patternCap:"butt"}}function w(N,R){var W=R&&R.resource;W=W&&W.href;if(N.thumbnail&&N.thumbnail.url)return Promise.resolve(N.thumbnail.url);if(W&&"object"!==R.type)return Promise.resolve(n.getIconHref(R));const da=k.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return N.styleOrigin&&(N.styleOrigin.styleName||N.styleOrigin.styleUrl)?f.resolveWebStyleSymbol(N.styleOrigin,{portal:N.styleOrigin.portal},"webRef").catch(ea=>
ea).then(ea=>ea?.thumbnail?.url||da):Promise.resolve(da)}function D(N,R=1){const W=N.a;N=h.toHSV(N);const {r:da,g:ea,b:fa}=h.toRGB({h:N.h,s:N.s/R,v:100-(100-N.v)/R});return[da,ea,fa,W]}function x(N){return"water"===N.type?z.isNone(N.color)?null:N.color:z.isNone(N.material)||z.isNone(N.material.color)?null:N.material.color}function c(N,R=0){var W=x(N);if(!W){if("fill"===N.type)return null;R=l.adjustColorComponentBrightness(g.defaultThematicColor.r,R);return[R,R,R,100]}N=W.toRgba();for(W=0;3>W;W++)N[W]=
l.adjustColorComponentBrightness(N[W],R);return N}function e(N,R){return p.apply(this,arguments)}function p(){p=q._asyncToGenerator(function*(N,R){N=N.style;return"none"===N?null:{type:"pattern",x:0,y:0,src:yield g.getPatternUrlWithColor(k.getAssetUrl(`esri/symbols/patterns/${N}.png`),R.toCss(!0)),width:5,height:5}});return p.apply(this,arguments)}function C(N){return N.outline?v(N):{color:"rgba(0, 0, 0, 1)",width:1.5}}function L(N,R){N=x(N);if(!N)return null;let W;W="rgba("+(l.adjustColorComponentBrightness(N.r,
R)+",");W+=l.adjustColorComponentBrightness(N.g,R)+",";W+=l.adjustColorComponentBrightness(N.b,R)+",";return W+N.a+");"}function O(N,R){R=L(N,R);if(!R)return{};if("pattern"in N&&z.isSome(N.pattern)&&"style"===N.pattern.type&&"none"===N.pattern.style)return null;const W=Math.min(N.size?u.pt2px(N.size):.75,r);return{color:R,width:W,style:"pattern"in N&&z.isSome(N.pattern)&&"style"===N.pattern.type?g.dekebabifyLineStyle(N.pattern.style):null,cap:"cap"in N?N.cap:null,join:"join"in N?"miter"===N.join?
u.pt2px(2):N.join:null}}function K(N,R,W){W=null!=W?.75*W:0;return{type:"linear",x1:W?.25*W:0,y1:W?.5*W:0,x2:W||4,y2:W?.5*W:4,colors:[{color:N,offset:0},{color:R,offset:1}]}}function U(N){const R=N.depth,W=N.height;N=N.width;return 0!==N&&0!==R&&0!==W&&N===R&&null!=N&&null!=W&&N<W}function T(N,R,W){const da=[];if(!N)return da;switch(N.type){case "icon":switch(N.resource&&N.resource.primitive||b.defaultPrimitive){case "circle":da.push({shape:{type:"circle",cx:0,cy:0,r:.5*R},fill:c(N,0),stroke:v(N)});
break;case "square":da.push({shape:{type:"path",path:[{command:"M",values:[0,R]},{command:"L",values:[0,0]},{command:"L",values:[R,0]},{command:"L",values:[R,R]},{command:"Z",values:[]}]},fill:c(N,0),stroke:v(N)});break;case "triangle":da.push({shape:{type:"path",path:[{command:"M",values:[0,R]},{command:"L",values:[.5*R,0]},{command:"L",values:[R,R]},{command:"Z",values:[]}]},fill:c(N,0),stroke:v(N)});break;case "cross":da.push({shape:{type:"path",path:[{command:"M",values:[.5*R,0]},{command:"L",
values:[.5*R,R]},{command:"M",values:[0,.5*R]},{command:"L",values:[R,.5*R]}]},stroke:C(N)});break;case "x":da.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[R,R]},{command:"M",values:[R,0]},{command:"L",values:[0,R]}]},stroke:C(N)});break;case "kite":da.push({shape:{type:"path",path:[{command:"M",values:[0,.5*R]},{command:"L",values:[.5*R,0]},{command:"L",values:[R,.5*R]},{command:"L",values:[.5*R,R]},{command:"Z",values:[]}]},fill:c(N,0),stroke:v(N)})}break;case "object":switch(N.resource&&
N.resource.primitive||a.defaultPrimitive){case "cone":var ea=c(N,0);N=c(N,-.6);N=K(ea,N,W?J:R);R=l.getConeShapes(R,W);da.push({shape:R[0],fill:N});da.push({shape:R[1],fill:N});break;case "inverted-cone":W=c(N,0);N=c(N,-.6);N=K(W,N,R);R=l.getInvertedConeShapes(R);da.push({shape:R[0],fill:N});da.push({shape:R[1],fill:W});break;case "cube":R=l.getCubeShapes(R,W);da.push({shape:R[0],fill:c(N,0)});da.push({shape:R[1],fill:c(N,-.3)});da.push({shape:R[2],fill:c(N,-.5)});break;case "cylinder":ea=c(N,0);const fa=
c(N,-.6);ea=K(ea,fa,W?J:R);R=l.getCylinderShapes(R,W);da.push({shape:R[0],fill:ea});da.push({shape:R[1],fill:ea});da.push({shape:R[2],fill:c(N,0)});break;case "diamond":R=l.getDiamondShapes(R);da.push({shape:R[0],fill:c(N,-.3)});da.push({shape:R[1],fill:c(N,0)});da.push({shape:R[2],fill:c(N,-.3)});da.push({shape:R[3],fill:c(N,-.7)});break;case "sphere":W=c(N,0);N=c(N,-.6);N=K(W,N);N.x1=0;N.y1=0;N.x2=.25*R;N.y2=.25*R;da.push({shape:{type:"circle",cx:0,cy:0,r:.5*R},fill:N});break;case "tetrahedron":R=
l.getTetrahedronShapes(R),da.push({shape:R[0],fill:c(N,-.3)}),da.push({shape:R[1],fill:c(N,0)}),da.push({shape:R[2],fill:c(N,-.6)})}}return da}function M(N){return(N="number"===typeof N?.size?N?.size:null)?u.pt2px(N):null}function P(N,R){const W=M(R),da=R?.maxSize?u.pt2px(R.maxSize):null,ea=R?.disableUpsampling??!1,fa=N.symbolLayers,Q=[];let Y=0,ba=0;const S=fa.getItemAt(fa.length-1);let X;S&&"icon"===S.type&&(X=S.size&&u.pt2px(S.size));fa.forEach(aa=>{if("icon"===aa.type||"object"===aa.type){var ha=
"icon"===aa.type?aa.size&&u.pt2px(aa.size):0,ia=W||ha?Math.ceil(Math.min(W||ha,da||I)):E;if(aa&&aa.resource&&aa.resource.href){var ja=w(N,aa).then(ma=>{const na=aa.get("material.color");var ra="icon"===aa.type?"multiply":"tint";return d.tintImageWithColor(ma,ia,na,ra,ea)}).then(ma=>{const na=ma.width,ra=ma.height;Y=Math.max(Y,na);ba=Math.max(ba,ra);return[{shape:{type:"image",x:0,y:0,width:na,height:ra,src:ma.url},fill:null,stroke:null}]});Q.push(ja)}else ja=ia,"icon"===aa.type&&X&&W&&(ja=ha/X*ia),
ha="tall"===R?.symbolConfig||R?.symbolConfig?.isTall||("object"===aa.type?U(aa):!1),Y=Math.max(Y,ha?J:ja),ba=Math.max(ba,ja),Q.push(Promise.resolve(T(aa,ja,ha)))}});return F.eachAlways(Q).then(aa=>{const ha=[];aa.forEach(ia=>{ia.value?ha.push(ia.value):ia.error&&B.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",ia.error)});return d.renderSymbol(ha,[Y,ba],{node:R&&R.node,scale:!1,opacity:R&&R.opacity})})}function V(N,R){const W=N.symbolLayers,da=[];N=n.isVolumetricSymbol(N);
const ea=M(R),fa=(R&&R.maxSize?u.pt2px(R.maxSize):null)||r;let Q=0,Y=0,ba;W.forEach((S,X)=>{if(S&&("line"===S.type||"path"===S.type)){var aa=[];switch(S.type){case "line":var ha=O(S,0);if(z.isNone(ha))break;var ia=ha&&ha.width||0;0===X&&(ba=ia);S=Math.min(ea||ia,fa);X=0===X?S:ea?ia/ba*S:S;ia=X>G/2?2*X:G;Y=Math.max(Y,X);Q=Math.max(Q,ia);ha.width=X;aa.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Y]},{command:"L",values:[Q,.5*Y]}]},stroke:ha});break;case "path":ha=Math.min(ea||E,fa);X=c(S,
0);ia=c(S,-.2);var ja=L(S,-.4);ja=ja?{color:ja,width:1}:{};if("quad"===S.profile){const ma=S.width;S=S.height;S=l.getPathSymbolShapes(ma&&S?ma/S:1,0===S,0===ma);ja={...ja,join:"bevel"};aa.push({shape:S[0],fill:ia,stroke:ja});aa.push({shape:S[1],fill:ia,stroke:ja});aa.push({shape:S[2],fill:X,stroke:ja})}else aa.push({shape:l.shapes.pathSymbol3DLayer[0],fill:ia,stroke:ja}),aa.push({shape:l.shapes.pathSymbol3DLayer[1],fill:X,stroke:ja});Q=Y=Math.max(Y,ha)}da.push(aa)}});return Promise.resolve(d.renderSymbol(da,
[Q,Y],{node:R&&R.node,scale:N,opacity:R&&R.opacity}))}function H(N,R){return y.apply(this,arguments)}function y(){y=q._asyncToGenerator(function*(N,R){const W="mesh-3d"===N.type;N=N.symbolLayers;var da=M(R);const ea=R&&R.maxSize?u.pt2px(R.maxSize):null;da=da||E;const fa=[];let Q=0,Y=0;var ba=!1;for(let ja=0;ja<N.length;ja++){var S=N.getItemAt(ja);const ma=[];if(!W||"fill"===S.type){var X=l.shapes.fill[0];switch(S.type){case "fill":var aa=v(S);ba=Math.min(da,ea||I);Q=Math.max(Q,ba);Y=Math.max(Y,ba);
ba=!0;var ha=c(S,0),ia="pattern"in S?S.pattern:null;S=x(S);!W&&z.isSome(ia)&&"style"===ia.type&&"solid"!==ia.style&&S&&(ha=yield e(ia,S));ma.push({shape:X,fill:ha,stroke:aa});break;case "line":S=O(S,0);if(z.isNone(S))break;S={stroke:S,shape:X};Q=Math.max(Q,E);Y=Math.max(Y,E);ma.push(S);break;case "extrude":X={join:"round",width:1,...O(S,-.4)};aa=c(S,0);S=c(S,-.2);ha=Math.min(da,ea||I);ia=l.getExtrudeSymbolShapes(ha);X.width=1;ma.push({shape:ia[0],fill:S,stroke:X});ma.push({shape:ia[1],fill:S,stroke:X});
ma.push({shape:ia[2],fill:aa,stroke:X});S=.7*E+.5*ha;Q=Math.max(Q,E);Y=Math.max(Y,S);break;case "water":ba=z.unwrapOrThrow(x(S)),S=D(ba),X=D(ba,2),aa=D(ba,3),ha=l.getWaterSymbolShapes(),ba=!0,ma.push({shape:ha[0],fill:S}),ma.push({shape:ha[1],fill:X}),ma.push({shape:ha[2],fill:aa}),S=Math.min(da,ea||I),Q=Math.max(Q,S),Y=Math.max(Y,S)}fa.push(ma)}}return d.renderSymbol(fa,[Q,Y],{node:R&&R.node,scale:ba,opacity:R&&R.opacity})});return y.apply(this,arguments)}const E=l.SymbolSizeDefaults.size,I=l.SymbolSizeDefaults.maxSize,
r=l.SymbolSizeDefaults.maxOutlineSize,G=l.SymbolSizeDefaults.lineWidth,J=l.SymbolSizeDefaults.tallSymbolWidth;m.getPatternDescriptor=e;m.getSizeFromOptions=M;m.getSymbolLayerFill=c;m.previewSymbol3D=function(N,R){if(0===N.symbolLayers.length)return Promise.reject(new A("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(N.type){case "point-3d":return P(N,R);case "line-3d":return V(N,R);case "polygon-3d":case "mesh-3d":return H(N,R)}return Promise.reject(new A("symbolPreview: swatchInfo3D",
"symbol not supported."))};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),function(m,q,k,h,t,A,B,z,F,u,g,b){function a(d,n,f,v,w){var D=d.data;const x=f&&t.isSome(f.portal)?f.portal:B.getDefault(),c=
{portal:x,url:A.urlToObject(d.baseUrl),origin:"portal-item"};D=D.items.find(O=>O.name===n);if(!D)return Promise.reject(new h("symbolstyleutils:symbol-name-not-found",`The symbol name '${n}' could not be found`,{symbolName:n}));let e=z.fromJSON(g.symbolUrlFromStyleItem(D,v),c),p=D.thumbnail?.href??null;const C=D.thumbnail&&D.thumbnail.imageData;k.isDevEnvironment()&&(e=k.adjustStaticAGOUrl(e)??"",p=k.adjustStaticAGOUrl(p));const L={portal:x,url:A.urlToObject(A.removeFile(e)),origin:"portal-item"};
return g.requestJSON(e,w).then(O=>{O="cimRef"===v?g.makeCIMSymbolRef(O.data):O.data;if((O=F.fromJSON(O,L))&&q.isSymbol3D(O)){if(p){const K=z.fromJSON(p,c);O.thumbnail=new b.Thumbnail({url:K})}else C&&(O.thumbnail=new b.Thumbnail({url:`data:image/png;base64,${C}`}));d.styleUrl?O.styleOrigin=new u({portal:f.portal,styleUrl:d.styleUrl,name:n}):d.styleName&&(O.styleOrigin=new u({portal:f.portal,styleName:d.styleName,name:n}))}return O})}function l(d,n,f){const v=g.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,
d.name),w=t.isSome(n.portal)?n.portal:B.getDefault();return g.requestJSON(v,f).then(D=>{D=g.makeCIMSymbolRef(D.data);return F.fromJSON(D,{portal:w,url:A.urlToObject(A.removeFile(v)),origin:"portal-item"})})}m.fetchSymbolFromStyle=a;m.resolveWebStyleSymbol=function(d,n,f,v){return d.name?d.styleName&&"Esri2DPointSymbolsStyle"===d.styleName?l(d,n,v):g.fetchStyle(d,n,v).then(w=>a(t.unwrapOrThrow(w),d.name,n,f,v)):Promise.reject(new h("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(m){const q=/^devext.arcgis.com$/,k=/^qaext.arcgis.com$/,h=/^[\w-]*\.mapsdevext.arcgis.com$/,t=/^[\w-]*\.mapsqa.arcgis.com$/,A=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,q,k,/^jsapps.esri.com$/,h,t];m.adjustStaticAGOUrl=function(B,z){return B?(z=z||globalThis.location.hostname)?null!=z.match(q)||null!=z.match(h)?B.replace("static.arcgis.com","staticdev.arcgis.com"):
null!=z.match(k)||null!=z.match(t)?B.replace("static.arcgis.com","staticqa.arcgis.com"):B:B:B};m.isDevEnvironment=function(B){B=B||globalThis.location.hostname;return A.some(z=>null!=B?.match(z))};m.isTelemetryDevEnvironment=function(B){B=B||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(A).some(z=>null!=B?.match(z))};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(m,q){m.extractSafeScaleBounds=
function(k){k=k.effectiveScaleRange;return{minScale:k?.minScale??0,maxScale:k?.maxScale??0}};m.highlightsSupported=function(k){return k&&"function"===typeof k.highlight};m.isScaleRangeActive=function(k,h){return q.isSome(k)&&0<k||q.isSome(h)&&0<h};m.occludeesSupported=function(k){return k&&"function"===typeof k.maskOccludee};m.scaleBoundsPredicate=function(k,h,t){return q.isNone(k)||k>t&&(0===h||k<h)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z){m.GoToMixin=F=>{F=function(u){function g(...b){b=u.call(this,...b)||this;b.goToOverride=null;b.view=null;return b}q._inheritsLoose(g,u);g.prototype.callGoTo=function(b){const {view:a}=this;h.assertIsSome(a);return this.goToOverride?this.goToOverride(a,b):a.goTo(b.target,b.options)};return g}(F);k.__decorate([t.property()],F.prototype,"goToOverride",void 0);k.__decorate([t.property()],F.prototype,"view",void 0);return F=k.__decorate([z.subclass("esri.widgets.support.GoTo")],
F)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/Error ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(m,q,k,h,t,A,B,z,F,u,g){m.PopupView=b=>{b=function(a){function l(){return a.apply(this,arguments)||this}q._inheritsLoose(l,a);var d=l.prototype;
d.fetchPopupFeatures=function(){var n=q._asyncToGenerator(function*(f,v){yield this.when();const {location:w,queryArea:D,layerViewsAndGraphics:x,clientOnlyGraphics:c}=yield this._prepareFetchPopupFeatures(f,v);f=Promise.resolve(c);v=this._queryLayerPopupFeatures(D,x,v);const e=v.map(p=>p.promise);f=t.eachAlwaysValues([f,...e]).then(p=>Array.from(new Set(p.flat())));return{location:w,clientOnlyGraphics:c,allGraphicsPromise:f,promisesPerLayerView:v}});return function(f,v){return n.apply(this,arguments)}}();
d._queryLayerPopupFeatures=function(n,f,v){return f.map(({layerView:w,graphics:D})=>{D={clientGraphics:D,event:h.isSome(v)?v.event:void 0,signal:h.isSome(v)?v.signal:void 0,defaultPopupTemplateEnabled:h.isSome(v)?!!v.defaultPopupTemplateEnabled:!1};D=w.fetchPopupFeatures(n,D);return{layerView:w,promise:D}})};d._isValidPopupGraphic=function(n,f){return n&&!!n.getEffectivePopupTemplate(h.isSome(f)&&f.defaultPopupTemplateEnabled)};d._prepareFetchPopupFeatures=function(){var n=q._asyncToGenerator(function*(f,
v){const {clientGraphics:w,queryArea:D,location:x}=yield this._popupHitTestGraphics(f,v);f=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:c,clientOnlyGraphics:e}=this._graphicsPerFetchPopupLayerView(w,f);return{clientOnlyGraphics:e,layerViewsAndGraphics:c,queryArea:D,location:x}});return function(f,v){return n.apply(this,arguments)}}();d._popupHitTestGraphics=function(){var n=q._asyncToGenerator(function*(f,v){var w=yield this.popupHitTest(f);f=w.mapPoint;w=w.results.filter(x=>"graphic"===
x.type&&this._isValidPopupGraphic(x.graphic,v));const D=w.length?w[0].mapPoint:null;return{clientGraphics:w.map(x=>x.graphic),queryArea:f,location:f||D}});return function(f,v){return n.apply(this,arguments)}}();d._getFetchPopupLayerViews=function(){const n=[];this.allLayerViews.forEach(f=>{this._isValidPopupLayerView(f)&&n.push(f)});h.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&n.push(this.graphicsView);return n.reverse()};d._isValidPopupLayerView=function(n){return h.isSome(n)&&
(!("layer"in n)||!n.suspended)&&"fetchPopupFeatures"in n};d._graphicsPerFetchPopupLayerView=function(n,f){const v=[],w=new Map;f=f.map(D=>{const x=[];"layer"in D?w.set(D.layer,x):w.set(D.graphics,x);return{layerView:D,graphics:x}});for(const D of n)(n=w.get(D.layer)||w.get(D.sourceLayer)||null)?n.push(D):v.push(D);return{layerViewsAndGraphics:f,clientOnlyGraphics:v}};return l}(b);return b=k.__decorate([g.subclass("esri.views.PopupView")],b)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d){let n=function(){function f(v,
w,D,x){const c=v.targetGeometry,e=w.targetGeometry;x?"string"===typeof x&&(x=a.parse(x)||a.easingFunctions.ease):x=a.easingFunctions.ease;this.easing=x;this.duration=D;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=v.scale;this.sRotation=v.rotation;this.tCenterX=e.x;this.tCenterY=e.y;this.tScale=w.scale;this.tRotation=w.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<
this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}f.prototype.applyRatio=function(v,w){var D=this.easing(w);let x,c;1<=w?(w=this.tCenterX,x=this.tCenterY,c=this.tRotation,D=this.tScale):(w=this.sCenterX+D*this.dCenterX,x=this.sCenterY+D*this.dCenterY,c=this.sRotation+D*this.dRotation,D=this.sScale+D*this.dScale);v.targetGeometry.x=w;v.targetGeometry.y=x;v.scale=D;v.rotation=c};return f}();k=function(f){function v(D){D=f.call(this,D)||this;D.updateFunction=null;D.animation=
null;D.duration=200;D.transition=null;D.easing=a.easingFunctions.ease;D.view=null;D.viewpoint=new h({targetGeometry:new d,scale:0,rotation:0});D._updateTask=B.addFrameTask({postRender:D._postRender.bind(m._assertThisInitialized(D))});D._updateTask.pause();return D}m._inheritsLoose(v,f);var w=v.prototype;w.destroy=function(){this._updateTask=A.removeMaybe(this._updateTask)};w.animate=function(D,x,c){this.stop();l.copy(this.viewpoint,x);this.transition=new n(this.viewpoint,D.target,c&&c.duration||this.duration,
c&&c.easing||this.easing);x=()=>{this.animation===D&&this._updateTask&&("finished"===D.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};D.when(x,x);this._startTime=performance.now();this._updateTask.resume();return this.animation=D};w.animateContinous=function(D,x){this.stop();this.updateFunction=x;this.viewpoint=D;const c=new b({target:D.clone()});D=()=>{this.animation===c&&this._updateTask&&
(this.updateFunction=this.animation=null)};c.when(D,D);this._startTime=performance.now();this._updateTask.resume();return this.animation=c};w.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};w._postRender=function(D){var x=this.animation;if(x&&x.state!==b.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,D.deltaTime);else{D=this.transition;x=(performance.now()-this._startTime)/D.duration;const c=1<=x;D.applyRatio(this.viewpoint,
x);c&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()};return v}(t);q.__decorate([z.property()],k.prototype,"animation",void 0);q.__decorate([z.property()],k.prototype,"duration",void 0);q.__decorate([z.property()],k.prototype,"transition",void 0);q.__decorate([z.property()],k.prototype,"easing",void 0);q.__decorate([z.property()],k.prototype,"view",void 0);q.__decorate([z.property()],k.prototype,"viewpoint",void 0);return k=
q.__decorate([g.subclass("esri.views.2d.AnimationManager")],k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(m){function q(t,A,B,z){function F(n,f){var v;let w,D;w=n;for(v=0;8>v;v++){D=((b*w+g)*w+u)*w-n;if(Math.abs(D)<f)return w;var x=(3*b*w+2*g)*w+u;if(1E-6>Math.abs(x))break;w-=D/x}x=0;v=1;w=n;if(w<x)return x;if(w>v)return v;for(;x<v;){D=((b*w+g)*w+u)*w;if(Math.abs(D-n)<f)break;n>D?x=w:v=w;w=.5*(v-x)+x}return w}const u=3*t,g=3*(B-t)-u,b=1-u-g,a=3*A,l=3*(z-A)-a,d=1-a-l;return function(n,
f=1E-6){n=F(n,f);return((d*n+l)*n+a)*n}}const k=/^cubic-bezier\((.*)\)/,h={};h.ease=q(.25,.1,.25,1);h.linear=q(0,0,1,1);h.easeIn=h["ease-in"]=q(.42,0,1,1);h.easeOut=h["ease-out"]=q(0,0,.58,1);h.easeInOut=h["ease-in-out"]=q(.42,0,.58,1);m.easingFunctions=h;m.parse=function(t){let A=h[t]||null;!A&&(t=k.exec(t))&&(t=t[1].split(",").map(B=>parseFloat(B.trim())),4!==t.length||t.some(B=>isNaN(B))||(A=q.apply(q,t)));return A};m.unitBezier=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f){function v(Q,
Y){return Y.type?u.set(Q,Y.x,Y.y):u.copy(Q,Y)}function w(Q,Y){return Math.max(Q.width/Math.max(1,Y[0]),Q.height/Math.max(1,Y[1]))*K(Q.spatialReference)}function D(Q,Y,ba,S){return x.apply(this,arguments)}function x(){x=q._asyncToGenerator(function*(Q,Y,ba,S){if(!Q||Array.isArray(Q)&&!Q.length)return null;h.isCollection(Q)&&(Q=Q.toArray());if(Array.isArray(Q)&&Q.length&&"object"===typeof Q[0]){var X=Q.every(na=>"attributes"in na);var aa=Q.some(na=>!na.geometry),ha=Q;if(X&&aa&&Y&&Y.allLayerViews){X=
new Map;for(var ia of Q)Q=ia.layer,aa=X.get(Q)||[],ha=ia.attributes[Q.objectIdField],null!=ha&&aa.push(ha),X.set(Q,aa);const na=[];X.forEach((ra,ya)=>{const Ba=Y.allLayerViews.find(za=>za.layer.id===ya.id);if(Ba&&"queryFeatures"in Ba){const za=ya.createQuery();za.objectIds=ra;za.returnGeometry=!0;na.push(Ba.queryFeatures(za))}});ia=yield Promise.all(na);Q=[];for(var ja of ia)if(ja&&ja.features&&ja.features.length)for(var ma of ja.features)t.isSome(ma.geometry)&&Q.push(ma.geometry);ha=Q}for(const na of ha)S=
yield D(na,Y,ba,S);return S}if(Array.isArray(Q)&&2===Q.length&&"number"===typeof Q[0]&&"number"===typeof Q[1])X=new l(Q);else if(Q instanceof a)X=Q;else if("geometry"in Q)if(Q.geometry)X=Q.geometry;else if(Q.layer){const na=Q.layer;(ja=Y.allLayerViews.find(ra=>ra.layer.id===na.id))&&"queryFeatures"in ja&&(ma=na.createQuery(),ma.objectIds=[Q.attributes[na.objectIdField]],ma.returnGeometry=!0,ja=yield ja.queryFeatures(ma),X=t.get(ja,"features",0,"geometry"))}if(t.isNone(X))return null;ja="point"===
X.type?new b({xmin:X.x,ymin:X.y,xmax:X.x,ymax:X.y,spatialReference:X.spatialReference}):X.extent;if(!ja)return null;d.isLoaded()||d.canProjectWithoutEngine(ja.spatialReference,ba)||(yield d.load());ba=d.project(ja,ba);return ba?S=S?S.union(ba):ba:null});return x.apply(this,arguments)}function c(Q){if(Q&&(!Array.isArray(Q)||"number"!==typeof Q[0])&&("object"===typeof Q||Array.isArray(Q)&&"object"===typeof Q[0])){if("layer"in Q&&Q.layer&&Q.layer.minScale&&Q.layer.maxScale){var Y=Q.layer;return{min:Y.minScale,
max:Y.maxScale}}if(Array.isArray(Q)&&Q.length&&Q.every(ba=>"layer"in ba)){let ba=Y=0;for(const S of Q)(Q=S.layer)&&Q.minScale&&Q.maxScale&&(Y=Q.minScale<Y?Q.minScale:Y,ba=Q.maxScale>ba?Q.maxScale:ba);return Y&&ba?{min:Y,max:ba}:null}}}function e(Q,Y){return f.equals(Q.wkid?Q:Q.spatialReference||n.WGS84,Y)?Q:d.project(Q,Y)}function p(){p=q._asyncToGenerator(function*(Q,Y){if(!Q||!Y)return new k({targetGeometry:new l,scale:0,rotation:0});let ba=Y.spatialReference;const {constraints:S,padding:X,viewpoint:aa,
size:ha}=Y,ia=[X?ha[0]-X.left-X.right:ha[0],X?ha[1]-X.top-X.bottom:ha[1]];let ja=null;Q instanceof k?ja=Q:Q.viewpoint?ja=Q.viewpoint:Q.target&&"esri.Viewpoint"===Q.target.declaredClass&&(ja=Q.target);let ma=null;if(ja&&ja.targetGeometry)ma=ja.targetGeometry;else if(Q instanceof b)ma=Q;else if(Q||Q&&("center"in Q||"extent"in Q||"target"in Q))ma=(yield D(Q.center,Y,ba))||(yield D(Q.extent,Y,ba))||(yield D(Q.target,Y,ba))||(yield D(Q,Y,ba));!ma&&aa&&aa.targetGeometry?ma=aa.targetGeometry:!ma&&Y.extent&&
(ma=Y.extent);if(!ba){var na=Y.spatialReference||Y.extent||ma;ba=na.wkid?na:na.spatialReference||n.WGS84}d.isLoaded()||f.equals(ma.spatialReference,ba)||d.canProjectWithoutEngine(ma,ba)||(yield d.load());na=e(ma.center?ma.center:ma,ba);var ra=0;ja&&t.isSome(ja.targetGeometry)&&"point"===ja.targetGeometry.type?ra=ja.scale:"scale"in Q&&Q.scale?ra=Q.scale:"zoom"in Q&&-1!==Q.zoom&&S&&S.effectiveLODs?ra=S.zoomToScale(Q.zoom):Array.isArray(ma)||"point"===ma.type||"extent"===ma.type&&0===ma.width&&0===ma.height?
(ra=e(Y.extent,ba),ra=t.isSome(ra)?w(ra,ia):Y.extent?w(Y.extent,ia):aa.scale):ra=w(e(ma.extent,ba),ia);if(Y=c(Q))Y.min&&Y.min>ra?ra=Y.min:Y.max&&Y.max<ra&&(ra=Y.max);Y=0;ja?Y=ja.rotation:Q.hasOwnProperty("rotation")?Y=Q.rotation:aa&&(Y=aa.rotation);Q=new k({targetGeometry:na,scale:ra,rotation:Y});S&&(Q=S.fit(Q),S.constrainByGeometry(Q),S.rotationEnabled||(Q.rotation=Y));return Q});return p.apply(this,arguments)}function C(Q,Y){const ba=Q.targetGeometry,S=Y.targetGeometry;ba.x=S.x;ba.y=S.y;ba.spatialReference=
S.spatialReference;Q.scale=Y.scale;Q.rotation=Y.rotation;return Q}function L(Q,Y,ba){return ba?u.set(Q,.5*(Y[0]-ba.right+ba.left),.5*(Y[1]-ba.bottom+ba.top)):u.scale(Q,Y,.5)}function O(Q){var Y=Q.scale;Q=Q.targetGeometry;Q=t.isSome(Q)&&f.isValid(Q.spatialReference)?1/(39.37*A.getMetersPerUnitForSR(Q.spatialReference)*96):1;return Y*Q}function K(Q){return f.isValid(Q)?39.37*A.getMetersPerUnitForSR(Q)*96:1}function U(Q){return(Q=f.getInfo(Q))?Q.valid[1]-Q.valid[0]:0}const T=180/Math.PI,M=function(){const Q=
g.create();return function(Y,ba,S){const X=ba.targetGeometry;v(Q,X);ba=.5*O(ba);Y.xmin=Q[0]-ba*S[0];Y.ymin=Q[1]-ba*S[1];Y.xmax=Q[0]+ba*S[0];Y.ymax=Q[1]+ba*S[1];Y.spatialReference=X.spatialReference;return Y}}(),P=function(){const Q=g.create();return function(Y,ba,S){return u.sub(Y,u.scale(Y,ba,.5),L(Q,ba,S))}}(),V=function(){const Q=F.create(),Y=g.create();return function(ba,S,X,aa){const ha=O(S);S=B.toRadian(S.rotation)||0;u.set(Y,ha,ha);z.fromScaling(Q,Y);z.rotate(Q,Q,S);z.translate(Q,Q,P(Y,X,aa));
z.translate(Q,Q,[0,aa.top-aa.bottom]);return u.set(ba,Q[4],Q[5])}}(),H=function(){const Q=g.create(),Y=g.create(),ba=g.create();return function(S,X,aa,ha,ia,ja){u.negate(Q,X);u.scale(Y,aa,.5*ja);u.set(ba,1/ha*ja,-1/ha*ja);z.fromTranslation(S,Y);ia&&z.rotate(S,S,ia);z.scale(S,S,ba);z.translate(S,S,Q);return S}}(),y=function(){const Q=g.create();return function(Y,ba,S,X){const aa=O(ba),ha=B.toRadian(ba.rotation)||0;v(Q,ba.targetGeometry);return H(Y,Q,S,aa,ha,X)}}(),E=function(){const Q=g.create();return function(Y,
ba,S,X){const aa=O(ba);v(Q,ba.targetGeometry);return H(Y,Q,S,aa,0,X)}}(),I=function(){const Q=g.create(),Y=g.create(),ba=[0,0,0];return function(S,X,aa){u.subtract(Q,S,X);u.normalize(Q,Q);u.subtract(Y,S,aa);u.normalize(Y,Y);u.cross(ba,Q,Y);S=Math.acos(u.dot(Q,Y)/(u.length(Q)*u.length(Y)))*T;0>ba[2]&&(S=-S);isNaN(S)&&(S=0);return S}}(),r=function(){const Q=g.create();return function(Y,ba,S,X){const aa=Y.targetGeometry;C(Y,ba);V(Q,ba,S,X);aa.x+=Q[0];aa.y+=Q[1];return Y}}(),G=function(){return function(Q,
Y,ba){C(Q,Y);Y=Q.targetGeometry;Y.x=ba.x;Y.y=ba.y;Y.spatialReference=ba.spatialReference;return Q}}(),J=function(){const Q=g.create();return function(Y,ba,S,X,aa){aa||(aa="center");u.sub(Q,S,X);u.scale(Q,Q,.5);S=Q[0];X=Q[1];switch(aa){case "center":u.set(Q,0,0);break;case "left":u.set(Q,-S,0);break;case "top":u.set(Q,0,X);break;case "right":u.set(Q,S,0);break;case "bottom":u.set(Q,0,-X);break;case "top-left":u.set(Q,-S,X);break;case "bottom-left":u.set(Q,-S,-X);break;case "top-right":u.set(Q,S,X);
break;case "bottom-right":u.set(Q,S,-X)}fa(Y,ba,Q);return Y}}(),N=function(){const Q=g.create();return function(Y,ba,S,X,aa){C(Y,ba);isNaN(S)||0===S||(da(Q,X,ba,aa),Y.scale=ba.scale*S,ea(Q,Q,Y,aa),fa(Y,Y,u.set(Q,Q[0]-X[0],X[1]-Q[1])));return Y}}(),R=function(){const Q=g.create();return function(Y,ba,S,X,aa,ha){C(Y,ba);isNaN(S)||0===S||(da(Q,aa,ba,ha),Y.scale=ba.scale*S,Y.rotation+=X,ea(Q,Q,Y,ha),fa(Y,Y,u.set(Q,Q[0]-aa[0],aa[1]-Q[1])));return Y}}(),W=function(){const Q=g.create(),Y=g.create();return function(ba,
S,X,aa,ha,ia,ja){P(Y,ia,ja);u.add(Q,ha,Y);return aa?R(ba,S,X,aa,Q,ia):N(ba,S,X,Q,ia)}}(),da=function(){const Q=F.create();return function(Y,ba,S,X){var aa=u.transformMat2d;y(Q,S,X,1);S=z.invert(Q,Q);return aa.call(u,Y,ba,S)}}(),ea=function(){const Q=F.create();return function(Y,ba,S,X){return u.transformMat2d(Y,ba,y(Q,S,X,1))}}(),fa=function(){const Q=g.create(),Y=F.create();return function(ba,S,X){C(ba,S);const aa=O(S),ha=ba.targetGeometry;z.fromRotation(Y,B.toRadian(S.rotation)||0);z.scale(Y,Y,
g.fromValues(aa,aa));u.transformMat2d(Q,X,Y);ha.x+=Q[0];ha.y+=Q[1];return ba}}();m.addPadding=r;m.angleBetween=I;m.centerAt=G;m.copy=C;m.create=function(Q,Y){return p.apply(this,arguments)};m.extentToScale=w;m.getAnchor=L;m.getExtent=M;m.getMatrix=H;m.getPaddingMapTranslation=V;m.getPaddingScreenTranslation=P;m.getResolution=O;m.getResolutionToScaleFactor=K;m.getTransform=y;m.getTransformNoRotation=E;m.getWorldScreenWidth=function(Q,Y){return Math.round(U(Q)/Y)};m.getWorldWidth=U;m.padAndScaleAndRotateBy=
W;m.resize=J;m.rotateBy=function(Q,Y,ba){C(Q,Y);Q.rotation+=ba;return Q};m.rotateTo=function(Q,Y,ba){C(Q,Y);Q.rotation=ba;return Q};m.scaleAndRotateBy=R;m.scaleTo=function(Q,Y,ba){C(Q,Y);Q.scale=ba;return Q};m.setExtent=function(Q,Y,ba,S,X){G(Q,Y,ba.center);Q.scale=w(ba,S);X&&X.constraints&&X.constraints.constrain(Q);return Q};m.toMap=da;m.toScreen=ea;m.translateBy=fa;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat2df64":function(){define(["exports"],function(m){function q(){return[1,
0,0,1,0,0]}function k(B){return[B[0],B[1],B[2],B[3],B[4],B[5]]}function h(B,z,F,u,g,b){return[B,z,F,u,g,b]}function t(B,z){return new Float64Array(B,z,6)}const A=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:q,createView:t,fromValues:h},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=q;m.createView=t;m.fromValues=h;m.mat2df64=A})},"esri/chunks/vec2":function(){define(["exports","./common"],function(m,q){function k(r,G){r[0]=G[0];r[1]=G[1];return r}function h(r,G,J){r[0]=
G;r[1]=J;return r}function t(r,G,J){r[0]=G[0]+J[0];r[1]=G[1]+J[1];return r}function A(r,G,J){r[0]=G[0]-J[0];r[1]=G[1]-J[1];return r}function B(r,G,J){r[0]=G[0]*J[0];r[1]=G[1]*J[1];return r}function z(r,G,J){r[0]=G[0]/J[0];r[1]=G[1]/J[1];return r}function F(r,G){r[0]=Math.ceil(G[0]);r[1]=Math.ceil(G[1]);return r}function u(r,G){r[0]=Math.floor(G[0]);r[1]=Math.floor(G[1]);return r}function g(r,G,J){r[0]=Math.min(G[0],J[0]);r[1]=Math.min(G[1],J[1]);return r}function b(r,G,J){r[0]=Math.max(G[0],J[0]);
r[1]=Math.max(G[1],J[1]);return r}function a(r,G){r[0]=Math.round(G[0]);r[1]=Math.round(G[1]);return r}function l(r,G,J){r[0]=G[0]*J;r[1]=G[1]*J;return r}function d(r,G,J,N){r[0]=G[0]+J[0]*N;r[1]=G[1]+J[1]*N;return r}function n(r,G){const J=G[0]-r[0];r=G[1]-r[1];return Math.sqrt(J*J+r*r)}function f(r,G){const J=G[0]-r[0];r=G[1]-r[1];return J*J+r*r}function v(r){const G=r[0];r=r[1];return Math.sqrt(G*G+r*r)}function w(r){const G=r[0];r=r[1];return G*G+r*r}function D(r,G){r[0]=-G[0];r[1]=-G[1];return r}
function x(r,G){r[0]=1/G[0];r[1]=1/G[1];return r}function c(r,G){var J=G[0];const N=G[1];J=J*J+N*N;0<J&&(J=1/Math.sqrt(J),r[0]=G[0]*J,r[1]=G[1]*J);return r}function e(r,G){return r[0]*G[0]+r[1]*G[1]}function p(r,G,J){G=G[0]*J[1]-G[1]*J[0];r[0]=r[1]=0;r[2]=G;return r}function C(r,G,J,N){const R=G[0];G=G[1];r[0]=R+N*(J[0]-R);r[1]=G+N*(J[1]-G);return r}function L(r,G){G=G||1;const J=2*q.RANDOM()*Math.PI;r[0]=Math.cos(J)*G;r[1]=Math.sin(J)*G;return r}function O(r,G,J){const N=G[0];G=G[1];r[0]=J[0]*N+
J[2]*G;r[1]=J[1]*N+J[3]*G;return r}function K(r,G,J){const N=G[0];G=G[1];r[0]=J[0]*N+J[2]*G+J[4];r[1]=J[1]*N+J[3]*G+J[5];return r}function U(r,G,J){const N=G[0];G=G[1];r[0]=J[0]*N+J[3]*G+J[6];r[1]=J[1]*N+J[4]*G+J[7];return r}function T(r,G,J){const N=G[0];G=G[1];r[0]=J[0]*N+J[4]*G+J[12];r[1]=J[1]*N+J[5]*G+J[13];return r}function M(r,G,J,N){const R=G[0]-J[0];G=G[1]-J[1];const W=Math.sin(N);N=Math.cos(N);r[0]=R*N-G*W+J[0];r[1]=R*W+G*N+J[1];return r}function P(r,G){var J=r[0];r=r[1];const N=G[0];G=G[1];
let R=J*J+r*r;0<R&&(R=1/Math.sqrt(R));let W=N*N+G*G;0<W&&(W=1/Math.sqrt(W));J=(J*N+r*G)*R*W;return 1<J?0:-1>J?Math.PI:Math.acos(J)}function V(r){return"vec2("+r[0]+", "+r[1]+")"}function H(r,G){return r[0]===G[0]&&r[1]===G[1]}function y(r,G){const J=r[0];r=r[1];const N=G[0];G=G[1];const R=q.getEpsilon();return Math.abs(J-N)<=R*Math.max(1,Math.abs(J),Math.abs(N))&&Math.abs(r-G)<=R*Math.max(1,Math.abs(r),Math.abs(G))}function E(r,G,J,N,R){let W=G[0]-J[0];J=G[1]-J[1];R=(N[0]*W+N[1]*J)*(R-1);W=N[0]*R;
J=N[1]*R;r[0]=G[0]+W;r[1]=G[1]+J;return r}const I=Object.freeze(Object.defineProperty({__proto__:null,add:t,angle:P,ceil:F,copy:k,cross:p,dist:n,distance:n,div:z,divide:z,dot:e,equals:y,exactEquals:H,floor:u,inverse:x,len:v,length:v,lerp:C,max:b,min:g,mul:B,multiply:B,negate:D,normalize:c,projectAndScale:E,random:L,rotate:M,round:a,scale:l,scaleAndAdd:d,set:h,sqrDist:f,sqrLen:w,squaredDistance:f,squaredLength:w,str:V,sub:A,subtract:A,transformMat2:O,transformMat2d:K,transformMat3:U,transformMat4:T},
Symbol.toStringTag,{value:"Module"}));m.add=t;m.angle=P;m.ceil=F;m.copy=k;m.cross=p;m.dist=n;m.distance=n;m.div=z;m.divide=z;m.dot=e;m.equals=y;m.exactEquals=H;m.floor=u;m.inverse=x;m.len=v;m.length=v;m.lerp=C;m.max=b;m.min=g;m.mul=B;m.multiply=B;m.negate=D;m.normalize=c;m.projectAndScale=E;m.random=L;m.rotate=M;m.round=a;m.scale=l;m.scaleAndAdd=d;m.set=h;m.sqrDist=f;m.sqrLen=w;m.squaredDistance=f;m.squaredLength=w;m.str=V;m.sub=A;m.subtract=A;m.transformMat2=O;m.transformMat2d=K;m.transformMat3=
U;m.transformMat4=T;m.vec2=I})},"esri/chunks/vec2f64":function(){define(["exports"],function(m){function q(){return[0,0]}function k(n){return[n[0],n[1]]}function h(n,f){return[n,f]}function t(n){const f=[0,0],v=Math.min(2,n.length);for(let w=0;w<v;++w)f[w]=n[w];return f}function A(n,f){return new Float64Array(n,f,2)}function B(){return[0,0]}function z(){return[1,1]}function F(){return[1,0]}function u(){return[0,1]}const g=[0,0],b=[1,1],a=[1,0],l=[0,1],d=Object.freeze(Object.defineProperty({__proto__:null,
ONES:b,UNIT_X:a,UNIT_Y:l,ZEROS:g,clone:k,create:q,createView:A,fromArray:t,fromValues:h,ones:z,unitX:F,unitY:u,zeros:B},Symbol.toStringTag,{value:"Module"}));m.ONES=b;m.UNIT_X=a;m.UNIT_Y=l;m.ZEROS=g;m.clone=k;m.create=q;m.createView=A;m.fromArray=t;m.fromValues=h;m.ones=z;m.unitX=F;m.unitY=u;m.vec2f64=d;m.zeros=B})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(m,q,k){return function(){function h(A){this.view=A;this._updateParameters=
this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;const {basemapView:B,graphicsView:z,labelManager:F,layerViews:u,state:{id:g}}=
this.view;B?.baseLayerViews.forEach(this._updateLayerView,this);u.forEach(this._updateLayerView,this);B?.referenceLayerViews.forEach(this._updateLayerView,this);m.isSome(F)&&(F.lastUpdateId!==g&&(F.viewChange(),F.lastUpdateId=g),F.updateRequested&&F.processUpdate(this._updateParameters));m.isSome(z)&&(z.lastUpdateId!==g&&(z.viewChange(),z.lastUpdateId=g),z.updateRequested&&z.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||
this._updateRequested||this._frameTaskHandle?.pause()}}var t=h.prototype;t.destroy=function(){this.stop()};t.start=function(){if(!this._frameTaskHandle){var A=this.view;this.stationary=A.stationary;this._updateParameters={state:A.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:A.renderingOptions};this._stationaryHandle=q.watch(()=>A.stationary,B=>{this.stationary=B;this.requestFrame()});this._frameTaskHandle=k.addFrameTask(this);this.requestUpdate()}};t.stop=function(){this._frameTaskHandle&&
(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};t.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};t.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};t._updateLayerView=function(A){if(A.attached){var B=this.view.state,z=A.lastUpdateId;if(null==z||!this.stationary&&
!A.moving)A.moving=!0,A.moveStart();z!==B.id&&A.viewChange();this.stationary&&A.moving&&(A.moving=!1,A.moveEnd());A.lastUpdateId=B.id;A.updateRequested&&A.processUpdate(this._updateParameters);"layerViews"in A&&A.layerViews.forEach(this._updateLayerView,this)}else this.requestUpdate()};return h}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe"],function(m,q,k,h){function t(){return Promise.all([new Promise((u,g)=>m(["./webglDeps"],
u,g)),new Promise((u,g)=>m(["./mapViewDeps"],u,g))])}const A=u=>Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"})),B=()=>t().then(()=>new Promise((u,g)=>m(["./layers/TileLayerView2D"],b=>u(A(b)),g))),z=()=>t().then(()=>new Promise((u,g)=>m(["./layers/FeatureLayerView2D"],b=>u(A(b)),g))),F={"base-dynamic":()=>t().then(()=>new Promise((u,g)=>m(["./layers/BaseDynamicLayerView2D"],b=>u(A(b)),g))),"base-tile":B,"bing-maps":B,csv:z,"geo-rss":()=>t().then(()=>
new Promise((u,g)=>m(["./layers/GeoRSSLayerView2D"],b=>u(A(b)),g))),feature:z,geojson:z,graphics:()=>t().then(()=>new Promise((u,g)=>m(["./layers/GraphicsLayerView2D"],b=>u(A(b)),g))),group:()=>t().then(()=>new Promise((u,g)=>m(["./layers/GroupLayerView2D"],b=>u(A(b)),g))),imagery:()=>t().then(()=>new Promise((u,g)=>m(["./layers/ImageryLayerView2D"],b=>u(A(b)),g))),"imagery-tile":()=>t().then(()=>new Promise((u,g)=>m(["./layers/ImageryTileLayerView2D"],b=>u(A(b)),g))),kml:()=>t().then(()=>new Promise((u,
g)=>m(["./layers/KMLLayerView2D"],b=>u(A(b)),g))),"knowledge-graph":()=>t().then(()=>new Promise((u,g)=>m(["./layers/KnowledgeGraphLayerView2D"],b=>u(A(b)),g))),"link-chart":()=>t().then(()=>new Promise((u,g)=>m(["./layers/KnowledgeGraphLayerView2D"],b=>u(A(b)),g))),"knowledge-graph-sublayer":z,"map-image":()=>t().then(()=>new Promise((u,g)=>m(["./layers/MapImageLayerView2D"],b=>u(A(b)),g))),"map-notes":()=>t().then(()=>new Promise((u,g)=>m(["./layers/MapNotesLayerView2D"],b=>u(A(b)),g))),media:()=>
t().then(()=>new Promise((u,g)=>m(["./layers/MediaLayerView2D"],b=>u(A(b)),g))),"ogc-feature":()=>t().then(()=>new Promise((u,g)=>m(["./layers/OGCFeatureLayerView2D"],b=>u(A(b)),g))),"open-street-map":B,"oriented-imagery":z,route:()=>t().then(()=>new Promise((u,g)=>m(["./layers/RouteLayerView2D"],b=>u(A(b)),g))),stream:()=>t().then(()=>new Promise((u,g)=>m(["./layers/StreamLayerView2D"],b=>u(A(b)),g))),"subtype-group":()=>t().then(()=>new Promise((u,g)=>m(["./layers/SubtypeGroupLayerView2D"],b=>u(A(b)),
g))),tile:B,"vector-tile":()=>t().then(()=>new Promise((u,g)=>m(["./layers/VectorTileLayerView2D"],b=>u(A(b)),g))),wcs:()=>t().then(()=>new Promise((u,g)=>m(["./layers/ImageryTileLayerView2D"],b=>u(A(b)),g))),"web-tile":B,wfs:z,wms:()=>t().then(()=>new Promise((u,g)=>m(["./layers/WMSLayerView2D"],b=>u(A(b)),g))),wmts:()=>t().then(()=>new Promise((u,g)=>m(["./layers/WMTSLayerView2D"],b=>u(A(b)),g))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,
"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};q.layerView2DImporter={hasLayerViewModule:u=>h.isSome(F[u.type]),importLayerView:u=>{var g=F[u.type];if(h.isNone(g))throw u=u.declaredClass?u.declaredClass.slice(u.declaredClass.lastIndexOf(".")+1):"Unknown",g=u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new k(`${g}:view-not-supported`,`${u} is not supported in 2D`);return g(u)}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){k={base:null,key:"type",typeMap:{extent:a,polygon:l}};h=function(d){function n(v){v=d.call(this,v)||this;v.lods=null;v.minScale=0;v.maxScale=0;v.minZoom=-1;v.maxZoom=-1;v.rotationEnabled=!0;v.snapToZoom=!0;return v}m._inheritsLoose(n,d);var f=n.prototype;f.destroy=function(){this.view=null};f.canZoomInTo=function(v){const w=this.effectiveMaxScale;return 0===w||v>=w};f.canZoomOutTo=function(v){const w=this.effectiveMinScale;return 0===w||v<=w};f.constrain=function(v,
w){this._zoom.constrain(v,w);this._rotation.constrain(v,w);this._geometry.constrain(v,w);return v};f.constrainByGeometry=function(v){return this._geometry.constrain(v)};f.fit=function(v){return this._zoom.fit(v)};f.zoomToScale=function(v){return this._zoom.zoomToScale(v)};f.scaleToZoom=function(v){return this._zoom.scaleToZoom(v)};f.snapScale=function(v){return this._zoom.snapToClosestScale(v)};f.snapToNextScale=function(v){return this._zoom.snapToNextScale(v)};f.snapToPreviousScale=function(v){return this._zoom.snapToPreviousScale(v)};
m._createClass(n,[{key:"effectiveLODs",get:function(){return this._zoom.effectiveLODs}},{key:"effectiveMinScale",get:function(){return this._zoom.effectiveMinScale}},{key:"effectiveMaxScale",get:function(){return this._zoom.effectiveMaxScale}},{key:"effectiveMinZoom",get:function(){return this._zoom.effectiveMinZoom}},{key:"effectiveMaxZoom",get:function(){return this._zoom.effectiveMaxZoom}},{key:"geometry",set:function(v){v?this._set("geometry",v):this._set("geometry",null)}},{key:"version",get:function(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}},
{key:"_defaultLODs",get:function(){const v=this.view?.defaultsFromMap?.tileInfo,w=this.view?.spatialReference;return v&&w&&v.spatialReference.equals(w)?v.lods:null}},{key:"_geometry",get:function(){return new u.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.spatialReference})}},{key:"_rotation",get:function(){return new g({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const v=this._get("_zoom"),w=this.lods||this._defaultLODs,D=this.minZoom,x=this.maxZoom,
c=this.minScale,e=this.maxScale,p=this.snapToZoom;return v&&v.lods===w&&v.minZoom===D&&v.maxZoom===x&&v.minScale===c&&v.maxScale===e&&v.snapToZoom===p?v:new b({lods:w,minZoom:D,maxZoom:x,minScale:c,maxScale:e,snapToZoom:p})}}]);return n}(h);q.__decorate([t.property({readOnly:!0})],h.prototype,"effectiveLODs",null);q.__decorate([t.property({readOnly:!0})],h.prototype,"effectiveMinScale",null);q.__decorate([t.property({readOnly:!0})],h.prototype,"effectiveMaxScale",null);q.__decorate([t.property({readOnly:!0})],
h.prototype,"effectiveMinZoom",null);q.__decorate([t.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",null);q.__decorate([t.property({types:k,value:null})],h.prototype,"geometry",null);q.__decorate([t.property({type:[F]})],h.prototype,"lods",void 0);q.__decorate([t.property()],h.prototype,"minScale",void 0);q.__decorate([t.property()],h.prototype,"maxScale",void 0);q.__decorate([t.property()],h.prototype,"minZoom",void 0);q.__decorate([t.property()],h.prototype,"maxZoom",void 0);q.__decorate([t.property()],
h.prototype,"rotationEnabled",void 0);q.__decorate([t.property()],h.prototype,"snapToZoom",void 0);q.__decorate([t.property()],h.prototype,"view",void 0);q.__decorate([t.property({readOnly:!0})],h.prototype,"version",null);q.__decorate([t.property()],h.prototype,"_defaultLODs",null);q.__decorate([t.property({type:u.GeometryConstraint})],h.prototype,"_geometry",null);q.__decorate([t.property({type:g})],h.prototype,"_rotation",null);q.__decorate([t.property({readOnly:!0,type:b})],h.prototype,"_zoom",
null);return h=q.__decorate([z.subclass("esri.views.2d.MapViewConstraints")],h)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){var d;m.GeometryConstraint=d=function(n){function f(w){w=n.call(this,w)||this;w.geometry=null;w.spatialReference=null;return w}q._inheritsLoose(f,n);var v=f.prototype;v.constrain=function(w,D){if(B.isNone(this.normalizedGeometry))return w;D=w.targetGeometry;if("extent"===this.normalizedGeometry.type?a.extentContainsPoint(this.normalizedGeometry,D):a.polygonContainsPoint(this.normalizedGeometry,D))return w;({coordinate:D}=l.nearestCoordinate(this.normalizedGeometry,
D));if(!D)return w;w.targetGeometry=D;return w};v.clone=function(){return new d({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})};q._createClass(f,[{key:"normalizedGeometry",get:function(){if(B.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return b.project(this.geometry,this.spatialReference)}catch(w){return A.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:w}),null}return this.geometry}}]);return f}(t.NumericIdentifiableMixin(h));k.__decorate([z.property({constructOnly:!0})],m.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([z.property({readOnly:!0})],m.GeometryConstraint.prototype,"normalizedGeometry",null);k.__decorate([z.property({constructOnly:!0})],m.GeometryConstraint.prototype,"spatialReference",void 0);m.GeometryConstraint=d=k.__decorate([g.subclass("esri.views.2d.constraints.GeometryConstraint")],
m.GeometryConstraint);Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(m,q,k,h,t){m.nearestCoordinate=function(A,B){const {spatialReference:z}=B;B=[B.x,B.y];let F=Number.POSITIVE_INFINITY,u=0,g=0;const b=[0,0];A="extent"===A.type?[[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]]:A.rings;for(const a of A)for(A=0;A<a.length-
1;A++){h.projectPointOnLine(b,B,a,A);const l=k.distance(B,b);l<F&&(F=l,u=b[0],g=b[1])}return{coordinate:new t({x:u,y:g,spatialReference:z}),distance:F}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z){var F;k=F=function(u){function g(){var a=u.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}m._inheritsLoose(g,u);var b=g.prototype;b.constrain=function(a,l){if(!this.enabled||!l)return a;this.rotationEnabled||(a.rotation=l.rotation);return a};b.clone=function(){return new F({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return g}(h.NumericIdentifiableMixin(k));q.__decorate([t.property()],k.prototype,"enabled",void 0);q.__decorate([t.property()],
k.prototype,"rotationEnabled",void 0);return k=F=q.__decorate([z.subclass("esri.views.2d.constraints.RotationConstraint")],k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(m,q,k,
h,t,A,B,z){var F;k=F=function(u){function g(a){a=u.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}m._inheritsLoose(g,u);var b=g.prototype;b.initialize=function(){let {lods:a,minScale:l,maxScale:d,minZoom:n,maxZoom:f}=this,v=-1,w=-1,D=!1,x=!1;0!==l&&0!==d&&l<d&&([l,d]=[d,l]);if(a&&a.length){a=a.map(e=>
e.clone());a.sort((e,p)=>p.scale-e.scale);a.forEach((e,p)=>e.level=p);for(const e of a){!D&&0<l&&l>=e.scale&&(v=e.level,D=!0);!x&&0<d&&d>=e.scale&&(w=c?c.level:-1,x=!0);var c=e}-1===n&&(n=0===l?0:v);-1===f&&(f=0===d?a.length-1:w);n=Math.max(n,0);n=Math.min(n,a.length-1);f=Math.max(f,0);f=Math.min(f,a.length-1);n>f&&([n,f]=[f,n]);l=a[n].scale;d=a[f].scale;a.splice(0,n);a.splice(f-n+1,a.length);a.forEach((e,p)=>{this._lodByScale[e.scale]=e;this._scales[p]=e.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",
n);this._set("effectiveMaxZoom",f)}this._set("effectiveMinScale",l);this._set("effectiveMaxScale",d)};b.constrain=function(a,l){if(l&&a.scale===l.scale)return a;var d=this.effectiveMinScale;const n=this.effectiveMaxScale,f=a.targetGeometry,v=l&&l.targetGeometry,w=0!==d&&a.scale>d;if(0!==n&&a.scale<n||w)d=w?d:n,l&&v&&(l=(d-l.scale)/(a.scale-l.scale),f.x=v.x+(f.x-v.x)*l,f.y=v.y+(f.y-v.y)*l),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};b.fit=function(a){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(a,null);const l=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(l-Math.floor(l))?Math.round(l):Math.floor(l));return a};b.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const l=this._scales;if(0>=a)return l[0];if(a>=l.length)return l[l.length-1];const d=Math.round(a);return l[d]+(d-a)*(l[Math.round(a-.5)]-l[d])};b.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;const l=this._scales;let d,
n;if(a>=l[0])return this.effectiveMinZoom;if(a<=l[l.length-1])return this.effectiveMaxZoom;for(let f=0;f<l.length-1;f++){d=l[f];n=l[f+1];if(n===a)return f+this.effectiveMinZoom+1;if(d>a&&n<a)return f+this.effectiveMinZoom+1-(a-n)/(d-n)}return-1};b.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};b.snapToNextScale=function(a,l=.5){if(!this.effectiveLODs)return a*l;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+
1)};b.snapToPreviousScale=function(a,l=2){if(!this.effectiveLODs)return a*l;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};b.clone=function(){return new F({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};b._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((l,d)=>Math.abs(d-a)<=Math.abs(l-a)?d:l,this._scales[0]);return this._lodByScale[a].scale};return g}(h.NumericIdentifiableMixin(k));
q.__decorate([t.property({readOnly:!0})],k.prototype,"effectiveLODs",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);q.__decorate([t.property()],k.prototype,"lods",void 0);q.__decorate([t.property()],k.prototype,"minZoom",
void 0);q.__decorate([t.property()],k.prototype,"maxZoom",void 0);q.__decorate([t.property()],k.prototype,"minScale",void 0);q.__decorate([t.property()],k.prototype,"maxScale",void 0);q.__decorate([t.property()],k.prototype,"snapToZoom",void 0);return k=F=q.__decorate([z.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b){var a,l;let d=a=function(n){function f(){var v=n.apply(this,arguments)||this;v.left=0;v.top=0;v.right=0;v.bottom=0;return v}m._inheritsLoose(f,n);f.prototype.clone=function(){return new a({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return f}(k);q.__decorate([t.property()],d.prototype,"left",void 0);q.__decorate([t.property()],d.prototype,"top",void 0);q.__decorate([t.property()],d.prototype,"right",void 0);q.__decorate([t.property()],d.prototype,
"bottom",void 0);d=a=q.__decorate([z.subclass("esri.views.2d.PaddedViewState.Padding")],d);k=l=function(n){function f(...v){var w=n.call(this,...v)||this;w.paddedViewState=new b;w._updateContent=(()=>{const D=u.create();return()=>{var x=w._get("size");const c=w._get("padding");if(x&&c){var e=w.paddedViewState;F.set(D,c.left+c.right,c.top+c.bottom);F.subtract(D,x,D);F.copy(e.size,D);if(x=e.viewpoint)w.viewpoint=x}}})();w.addHandles(h.watch(()=>[w.size,w.padding],()=>w._updateContent(),h.sync));w.padding=
new d;w.size=[0,0];return w}m._inheritsLoose(f,n);f.prototype.clone=function(){return new l({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};m._createClass(f,[{key:"padding",set:function(v){this._set("padding",v||new d)}},{key:"viewpoint",set:function(v){if(v){const w=v.clone();this.paddedViewState.viewpoint=v;g.addPadding(w,v,this._get("size"),this._get("padding"));v=this._viewpoint2D;const D=w.targetGeometry;v.center[0]=
D.x;v.center[1]=D.y;v.rotation=w.rotation;v.scale=w.scale;v.spatialReference=D.spatialReference;this._update()}}}]);return f}(b);q.__decorate([t.property()],k.prototype,"paddedViewState",void 0);q.__decorate([t.property({type:d})],k.prototype,"padding",null);q.__decorate([t.property()],k.prototype,"viewpoint",null);return k=l=q.__decorate([z.subclass("esri.views.2d.PaddedViewState")],k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c){var e;const p=[0,0];k=e=function(C){function L(K){K=C.call(this,K)||this;K._viewpoint2D={center:v.create(),rotation:0,scale:0,spatialReference:void 0};K.center=[0,0];K.extent=new x;K.id=0;K.inverseTransform=a.create();K.resolution=0;K.rotation=0;K.scale=0;K.transform=a.create();K.transformNoRotation=a.create();K.displayMat3=d.create();K.displayViewMat3=d.create();K.viewMat3=d.create();K.viewMat2d=b.create();K.worldScreenWidth=0;K.size=[0,0];return K}
m._inheritsLoose(L,C);var O=L.prototype;O.copy=function(K){const U=this.size,T=this.viewpoint;T&&U?(this.viewpoint=D.copy(T,K.viewpoint),this._set("size",n.copy(U,K.size))):(this.viewpoint=K.viewpoint.clone(),this._set("size",[K.size[0],K.size[1]]));this._set("pixelRatio",K.pixelRatio);return this};O.clone=function(){return new e({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};O.toMap=function(K,U,T){if(w.isVec2(U))return n.transformMat2d(K,U,this.inverseTransform);
p[0]=U;p[1]=T;return n.transformMat2d(K,p,this.inverseTransform)};O.toScreen=function(K,U,T){if(w.isVec2(U))return n.transformMat2d(K,U,this.transform);p[0]=U;p[1]=T;return n.transformMat2d(K,p,this.transform)};O.toScreenNoRotation=function(K,U,T){if(w.isVec2(U))return n.transformMat2d(K,U,this.transformNoRotation);p[0]=U;p[1]=T;return n.transformMat2d(K,p,this.transformNoRotation)};O.getScreenTransform=function(K,U){const {center:T}=this._viewpoint2D,M=this._get("pixelRatio")||1,P=this._get("size");
D.getMatrix(K,T,P,U,0,M);return K};O._update=function(){const {center:K,spatialReference:U,scale:T,rotation:M}=this._viewpoint2D,P=this._get("pixelRatio")||1,V=this._get("size"),H=new h({targetGeometry:new c(K[0],K[1],U),scale:T,rotation:M});this._set("viewpoint",H);if(V&&U&&T){this.resolution=D.getResolution(H);this.rotation=M;this.scale=T;this.spatialReference=U;n.copy(this.center,K);l.set(this.displayMat3,0!==V[0]?2/V[0]:0,0,0,0,0!==V[1]?-2/V[1]:0,0,-1,1,1);var y=l.identity(this.viewMat3),E=f.fromValues(V[0]/
2,V[1]/2),I=f.fromValues(-V[0]/2,-V[1]/2),r=u.toRadian(M);l.translate(y,y,E);l.rotate(y,y,r);l.translate(y,y,I);l.multiply(this.displayViewMat3,this.displayMat3,y);y=g.fromTranslation(this.viewMat2d,E);g.rotate(y,y,r);g.translate(y,y,I);D.getExtent(this.extent,H,V);D.getTransform(this.transform,H,V,P);g.invert(this.inverseTransform,this.transform);D.getTransformNoRotation(this.transformNoRotation,H,V,P);this.worldScreenWidth=D.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};m._createClass(L,[{key:"pixelRatio",set:function(K){this._set("pixelRatio",K);this._update()}},{key:"size",set:function(K){this._set("size",K);this._update()}},{key:"viewpoint",set:function(K){if(K){const U=this._viewpoint2D,T=K.targetGeometry;U.center[0]=T.x;U.center[1]=T.y;U.rotation=K.rotation;U.scale=K.scale;U.spatialReference=T.spatialReference}this._update()}}]);return L}(t.JSONSupport);q.__decorate([A.property({readOnly:!0})],k.prototype,"id",void 0);q.__decorate([A.property({value:1,
json:{write:!0}})],k.prototype,"pixelRatio",null);q.__decorate([A.property({json:{write:!0}})],k.prototype,"size",null);q.__decorate([A.property()],k.prototype,"spatialReference",void 0);q.__decorate([A.property({type:h,json:{write:!0}})],k.prototype,"viewpoint",null);return k=e=q.__decorate([F.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(m,q){function k(H,y){H[0]=y[0];H[1]=y[1];H[2]=y[2];H[3]=y[4];H[4]=y[5];H[5]=y[6];H[6]=y[8];H[7]=
y[9];H[8]=y[10];return H}function h(H,y){H[0]=y[0];H[1]=y[1];H[2]=y[2];H[3]=y[3];H[4]=y[4];H[5]=y[5];H[6]=y[6];H[7]=y[7];H[8]=y[8];return H}function t(H,y,E,I,r,G,J,N,R,W){H[0]=y;H[1]=E;H[2]=I;H[3]=r;H[4]=G;H[5]=J;H[6]=N;H[7]=R;H[8]=W;return H}function A(H){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function B(H,y){if(H===y){const E=y[1],I=y[2],r=y[5];H[1]=y[3];H[2]=y[6];H[3]=E;H[5]=y[7];H[6]=I;H[7]=r}else H[0]=y[0],H[1]=y[3],H[2]=y[6],H[3]=y[1],H[4]=y[4],H[5]=y[7],H[6]=
y[2],H[7]=y[5],H[8]=y[8];return H}function z(H,y){const E=y[0],I=y[1],r=y[2],G=y[3],J=y[4],N=y[5],R=y[6],W=y[7];y=y[8];const da=y*J-N*W,ea=-y*G+N*R,fa=W*G-J*R;let Q=E*da+I*ea+r*fa;if(!Q)return null;Q=1/Q;H[0]=da*Q;H[1]=(-y*I+r*W)*Q;H[2]=(N*I-r*J)*Q;H[3]=ea*Q;H[4]=(y*E-r*R)*Q;H[5]=(-N*E+r*G)*Q;H[6]=fa*Q;H[7]=(-W*E+I*R)*Q;H[8]=(J*E-I*G)*Q;return H}function F(H,y){const E=y[0],I=y[1],r=y[2],G=y[3],J=y[4],N=y[5],R=y[6],W=y[7];y=y[8];H[0]=J*y-N*W;H[1]=r*W-I*y;H[2]=I*N-r*J;H[3]=N*R-G*y;H[4]=E*y-r*R;H[5]=
r*G-E*N;H[6]=G*W-J*R;H[7]=I*R-E*W;H[8]=E*J-I*G;return H}function u(H){const y=H[3],E=H[4],I=H[5],r=H[6],G=H[7],J=H[8];return H[0]*(J*E-I*G)+H[1]*(-J*y+I*r)+H[2]*(G*y-E*r)}function g(H,y,E){const I=y[0],r=y[1],G=y[2],J=y[3],N=y[4],R=y[5],W=y[6],da=y[7];y=y[8];const ea=E[0],fa=E[1],Q=E[2],Y=E[3],ba=E[4],S=E[5],X=E[6],aa=E[7];E=E[8];H[0]=ea*I+fa*J+Q*W;H[1]=ea*r+fa*N+Q*da;H[2]=ea*G+fa*R+Q*y;H[3]=Y*I+ba*J+S*W;H[4]=Y*r+ba*N+S*da;H[5]=Y*G+ba*R+S*y;H[6]=X*I+aa*J+E*W;H[7]=X*r+aa*N+E*da;H[8]=X*G+aa*R+E*y;return H}
function b(H,y,E){const I=y[0],r=y[1],G=y[2],J=y[3],N=y[4],R=y[5],W=y[6],da=y[7];y=y[8];const ea=E[0];E=E[1];H[0]=I;H[1]=r;H[2]=G;H[3]=J;H[4]=N;H[5]=R;H[6]=ea*I+E*J+W;H[7]=ea*r+E*N+da;H[8]=ea*G+E*R+y;return H}function a(H,y,E){const I=y[0],r=y[1],G=y[2],J=y[3],N=y[4],R=y[5],W=y[6],da=y[7];y=y[8];const ea=Math.sin(E);E=Math.cos(E);H[0]=E*I+ea*J;H[1]=E*r+ea*N;H[2]=E*G+ea*R;H[3]=E*J-ea*I;H[4]=E*N-ea*r;H[5]=E*R-ea*G;H[6]=W;H[7]=da;H[8]=y;return H}function l(H,y,E){const I=E[0],r=E[1];E=E[2];H[0]=I*y[0];
H[1]=I*y[1];H[2]=I*y[2];H[3]=r*y[3];H[4]=r*y[4];H[5]=r*y[5];H[6]=E*y[6];H[7]=E*y[7];H[8]=E*y[8];return H}function d(H,y,E){const I=E[0];E=E[1];H[0]=I*y[0];H[1]=I*y[1];H[2]=I*y[2];H[3]=E*y[3];H[4]=E*y[4];H[5]=E*y[5];return H}function n(H,y){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=y[0];H[7]=y[1];H[8]=1;return H}function f(H,y){const E=Math.sin(y);y=Math.cos(y);H[0]=y;H[1]=E;H[2]=0;H[3]=-E;H[4]=y;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function v(H,y){H[0]=y[0];H[1]=0;H[2]=0;H[3]=0;H[4]=y[1];H[5]=
0;H[6]=0;H[7]=0;H[8]=1;return H}function w(H,y){H[0]=y[0];H[1]=y[1];H[2]=0;H[3]=y[2];H[4]=y[3];H[5]=0;H[6]=y[4];H[7]=y[5];H[8]=1;return H}function D(H,y){var E=y[0],I=y[1],r=y[2];y=y[3];var G=E+E,J=I+I;const N=r+r;E*=G;const R=I*G;I*=J;const W=r*G,da=r*J;r*=N;G*=y;J*=y;y*=N;H[0]=1-I-r;H[3]=R-y;H[6]=W+J;H[1]=R+y;H[4]=1-E-r;H[7]=da-G;H[2]=W-J;H[5]=da+G;H[8]=1-E-I;return H}function x(H,y){const E=y[0],I=y[1],r=y[2],G=y[4],J=y[5],N=y[6],R=y[8],W=y[9];y=y[10];const da=y*J-N*W,ea=-y*G+N*R,fa=W*G-J*R;var Q=
E*da+I*ea+r*fa;if(!Q)return null;Q=1/Q;H[0]=da*Q;H[1]=(-y*I+r*W)*Q;H[2]=(N*I-r*J)*Q;H[3]=ea*Q;H[4]=(y*E-r*R)*Q;H[5]=(-N*E+r*G)*Q;H[6]=fa*Q;H[7]=(-W*E+I*R)*Q;H[8]=(J*E-I*G)*Q;return H}function c(H,y){const E=y[0],I=y[1],r=y[2],G=y[3],J=y[4],N=y[5],R=y[6],W=y[7];var da=y[8],ea=y[9],fa=y[10],Q=y[11];const Y=y[12],ba=y[13],S=y[14];y=y[15];const X=E*N-I*J,aa=E*R-r*J,ha=E*W-G*J,ia=I*R-r*N,ja=I*W-G*N,ma=r*W-G*R,na=da*ba-ea*Y,ra=da*S-fa*Y;da=da*y-Q*Y;const ya=ea*S-fa*ba;ea=ea*y-Q*ba;fa=fa*y-Q*S;Q=X*fa-aa*
ea+ha*ya+ia*da-ja*ra+ma*na;if(!Q)return null;Q=1/Q;H[0]=(N*fa-R*ea+W*ya)*Q;H[1]=(R*da-J*fa-W*ra)*Q;H[2]=(J*ea-N*da+W*na)*Q;H[3]=(r*ea-I*fa-G*ya)*Q;H[4]=(E*fa-r*da+G*ra)*Q;H[5]=(I*da-E*ea-G*na)*Q;H[6]=(ba*ma-S*ja+y*ia)*Q;H[7]=(S*ha-Y*ma-y*aa)*Q;H[8]=(Y*ja-ba*ha+y*X)*Q;return H}function e(H,y,E){H[0]=2/y;H[1]=0;H[2]=0;H[3]=0;H[4]=-2/E;H[5]=0;H[6]=-1;H[7]=1;H[8]=1;return H}function p(H){return"mat3("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+", "+H[8]+")"}function C(H){return Math.sqrt(H[0]**
2+H[1]**2+H[2]**2+H[3]**2+H[4]**2+H[5]**2+H[6]**2+H[7]**2+H[8]**2)}function L(H,y,E){H[0]=y[0]+E[0];H[1]=y[1]+E[1];H[2]=y[2]+E[2];H[3]=y[3]+E[3];H[4]=y[4]+E[4];H[5]=y[5]+E[5];H[6]=y[6]+E[6];H[7]=y[7]+E[7];H[8]=y[8]+E[8];return H}function O(H,y,E){H[0]=y[0]-E[0];H[1]=y[1]-E[1];H[2]=y[2]-E[2];H[3]=y[3]-E[3];H[4]=y[4]-E[4];H[5]=y[5]-E[5];H[6]=y[6]-E[6];H[7]=y[7]-E[7];H[8]=y[8]-E[8];return H}function K(H,y,E){H[0]=y[0]*E;H[1]=y[1]*E;H[2]=y[2]*E;H[3]=y[3]*E;H[4]=y[4]*E;H[5]=y[5]*E;H[6]=y[6]*E;H[7]=y[7]*
E;H[8]=y[8]*E;return H}function U(H,y,E,I){H[0]=y[0]+E[0]*I;H[1]=y[1]+E[1]*I;H[2]=y[2]+E[2]*I;H[3]=y[3]+E[3]*I;H[4]=y[4]+E[4]*I;H[5]=y[5]+E[5]*I;H[6]=y[6]+E[6]*I;H[7]=y[7]+E[7]*I;H[8]=y[8]+E[8]*I;return H}function T(H,y){return H[0]===y[0]&&H[1]===y[1]&&H[2]===y[2]&&H[3]===y[3]&&H[4]===y[4]&&H[5]===y[5]&&H[6]===y[6]&&H[7]===y[7]&&H[8]===y[8]}function M(H,y){const E=H[0],I=H[1],r=H[2],G=H[3],J=H[4],N=H[5],R=H[6],W=H[7];H=H[8];const da=y[0],ea=y[1],fa=y[2],Q=y[3],Y=y[4],ba=y[5],S=y[6],X=y[7];y=y[8];
const aa=q.getEpsilon();return Math.abs(E-da)<=aa*Math.max(1,Math.abs(E),Math.abs(da))&&Math.abs(I-ea)<=aa*Math.max(1,Math.abs(I),Math.abs(ea))&&Math.abs(r-fa)<=aa*Math.max(1,Math.abs(r),Math.abs(fa))&&Math.abs(G-Q)<=aa*Math.max(1,Math.abs(G),Math.abs(Q))&&Math.abs(J-Y)<=aa*Math.max(1,Math.abs(J),Math.abs(Y))&&Math.abs(N-ba)<=aa*Math.max(1,Math.abs(N),Math.abs(ba))&&Math.abs(R-S)<=aa*Math.max(1,Math.abs(R),Math.abs(S))&&Math.abs(W-X)<=aa*Math.max(1,Math.abs(W),Math.abs(X))&&Math.abs(H-y)<=aa*Math.max(1,
Math.abs(H),Math.abs(y))}function P(H){const y=q.getEpsilon(),E=H[0],I=H[1],r=H[2],G=H[3],J=H[4],N=H[5],R=H[6],W=H[7];H=H[8];return Math.abs(1-(E*E+G*G+R*R))<=y&&Math.abs(1-(I*I+J*J+W*W))<=y&&Math.abs(1-(r*r+N*N+H*H))<=y}const V=Object.freeze(Object.defineProperty({__proto__:null,add:L,adjoint:F,copy:h,determinant:u,equals:M,exactEquals:T,frob:C,fromMat2d:w,fromMat4:k,fromQuat:D,fromRotation:f,fromScaling:v,fromTranslation:n,identity:A,invert:z,isOrthoNormal:P,mul:g,multiply:g,multiplyScalar:K,multiplyScalarAndAdd:U,
normalFromMat4:c,normalFromMat4Legacy:x,projection:e,rotate:a,scale:l,scaleByVec2:d,set:t,str:p,sub:O,subtract:O,translate:b,transpose:B},Symbol.toStringTag,{value:"Module"}));m.add=L;m.adjoint=F;m.copy=h;m.determinant=u;m.equals=M;m.exactEquals=T;m.frob=C;m.fromMat2d=w;m.fromMat4=k;m.fromQuat=D;m.fromRotation=f;m.fromScaling=v;m.fromTranslation=n;m.identity=A;m.invert=z;m.isOrthoNormal=P;m.mat3=V;m.mul=g;m.multiply=g;m.multiplyScalar=K;m.multiplyScalarAndAdd=U;m.normalFromMat4=c;m.normalFromMat4Legacy=
x;m.projection=e;m.rotate=a;m.scale=l;m.scaleByVec2=d;m.set=t;m.str=p;m.sub=O;m.subtract=O;m.translate=b;m.transpose=B})},"esri/chunks/mat3f32":function(){define(["exports"],function(m){function q(){const B=new Float32Array(9);B[0]=1;B[4]=1;B[8]=1;return B}function k(B){const z=new Float32Array(9);z[0]=B[0];z[1]=B[1];z[2]=B[2];z[3]=B[3];z[4]=B[4];z[5]=B[5];z[6]=B[6];z[7]=B[7];z[8]=B[8];return z}function h(B,z,F,u,g,b,a,l,d){const n=new Float32Array(9);n[0]=B;n[1]=z;n[2]=F;n[3]=u;n[4]=g;n[5]=b;n[6]=
a;n[7]=l;n[8]=d;return n}function t(B,z){return new Float32Array(B,z,9)}const A=Object.freeze(Object.defineProperty({__proto__:null,clone:k,create:q,createView:t,fromValues:h},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=q;m.createView=t;m.fromValues=h;m.mat3f32=A})},"esri/chunks/vec2f32":function(){define(["exports"],function(m){function q(){return new Float32Array(2)}function k(d){const n=new Float32Array(2);n[0]=d[0];n[1]=d[1];return n}function h(d,n){const f=new Float32Array(2);f[0]=
d;f[1]=n;return f}function t(d,n){return new Float32Array(d,n,2)}function A(){return q()}function B(){return h(1,1)}function z(){return h(1,0)}function F(){return h(0,1)}const u=q(),g=B(),b=z(),a=F(),l=Object.freeze(Object.defineProperty({__proto__:null,ONES:g,UNIT_X:b,UNIT_Y:a,ZEROS:u,clone:k,create:q,createView:t,fromValues:h,ones:B,unitX:z,unitY:F,zeros:A},Symbol.toStringTag,{value:"Module"}));m.ONES=g;m.UNIT_X=b;m.UNIT_Y=a;m.ZEROS=u;m.clone=k;m.create=q;m.createView=t;m.fromValues=h;m.ones=B;
m.unitX=z;m.unitY=F;m.vec2f32=l;m.zeros=A})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(m){function q(h){return h instanceof Float32Array&&2<=h.length}function k(h){return Array.isArray(h)&&2<=h.length}m.isVec2=function(h){return q(h)||k(h)};m.isVec2f32=q;m.isVec2f64=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(m,q,k,h,t,A,B,z,F,u){function g(n,f){n.length=0;f.forEach(v=>n.push(v));return n}const b=new Set,a=[],l=new Map,d=[0,0];k=function(n){function f(w){w=n.call(this,w)||this;w._keyToItem=new Map;w.concurrency=6;w.strategy="scale-first";w.tileInfoView=null;return w}m._inheritsLoose(f,n);var v=f.prototype;v.initialize=function(){const {concurrency:w,process:D}=this;this._queue=new u.QueueProcessor({concurrency:w,process:(x,c)=>{x=this._keyToItem.get(x);return D(x,{signal:c})},peeker:x=>x.values().next().value})};
v.destroy=function(){this.clear();this._queue=h.destroyMaybe(this._queue)};v.abort=function(w){this._queue.abort("string"===typeof w?w:w.id)};v.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};v.has=function(w){return"string"===typeof w?this._keyToItem.has(w):this._keyToItem.has(w.id)};v.isOngoing=function(w){w="string"===typeof w?w:w.id;return this.has(w)&&this._queue.isOngoing(w)};v.pause=function(){this._queue.pause()};v.push=function(w,D){const x=w.key.id+
"-"+D;if(this.has(x))return this.get(x);D=this._queue.push(x);const c=()=>{this._keyToItem.delete(x);this.notifyChange("updating")};this._keyToItem.set(x,w);D.then(c,c);this.notifyChange("updating");return D};v.reset=function(){this._queue.reset();this.notifyChange("updating")};v.resume=function(){this._queue.resume()};v._peekByScaleFirst=function(w){if(!this.state)return w.values().next().value;const D=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;w.forEach(O=>{O=this._keyToItem.get(O);
const K=this.tileInfoView.getTileScale(O.key);l.has(K)||(l.set(K,[]),x=Math.max(K,x),c=Math.min(K,c));l.get(K).push(O.key);b.add(K)});let e=this.state.scale;l.has(e)||(g(a,b),a.sort((O,K)=>O-K),e=a.reduce((O,K)=>Math.abs(K-e)<Math.abs(O-e)?K:O,a[0]));e=Math.min(e,x);e=Math.max(e,c);w=l.get(e);const p=D.getClosestInfoForScale(e),C=p.getColumnForX(this.state.center[0]),L=p.getRowForY(this.state.center[1]);w.sort((O,K)=>{const U=p.denormalizeCol(O.col,O.world),T=p.denormalizeCol(K.col,K.world);return Math.sqrt((C-
U)*(C-U)+(L-O.row)*(L-O.row))-Math.sqrt((C-T)*(C-T)+(L-K.row)*(L-K.row))});b.clear();l.clear();return w[0].id};v._peekByCenterFirst=function(w){if(!this.state)return w.values().next().value;const D=this.tileInfoView,x=this.state.center;let c=Number.POSITIVE_INFINITY,e;w.forEach(p=>{p=this._keyToItem.get(p);D.getTileCoords(d,p.key);const C=F.distance(d,x);C<c&&(c=C,e=p.key)});return e.id};m._createClass(f,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return f}(k);q.__decorate([t.property({constructOnly:!0})],k.prototype,"concurrency",void 0);q.__decorate([t.property({constructOnly:!0})],k.prototype,"process",void 0);q.__decorate([t.property()],k.prototype,"state",void 0);q.__decorate([t.property({constructOnly:!0})],k.prototype,"strategy",void 0);q.__decorate([t.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);q.__decorate([t.property({readOnly:!0})],
k.prototype,"updating",null);return k=q.__decorate([z.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(m,q,k,h,t,A){let B=function(F,u){this.item=F;this.controller=u;this.promise=null},z=function(){function F(g){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;
this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;g.concurrency&&(this.concurrency=g.concurrency);this._queue=new t(g.peeker);this.process=g.process;const b=g.scheduler;g.priority&&k.isSome(b)&&(this._task=b.registerTask(g.priority,this))}var u=F.prototype;u.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};u.abort=function(g){(g=this._controllers.get(g))&&g.abort()};u.clear=function(){this._queue.clear();
const g=[];this._controllers.forEach(b=>g.push(b));this._controllers.clear();g.forEach(b=>b.abort());this._processingItems.clear();this._cancelNext()};u.forEach=function(g){this._deferreds.forEach((b,a)=>g(a))};u.get=function(g){return(g=this._deferreds.get(g))?g.promise:void 0};u.isOngoing=function(g){return this._processingItems.has(g)};u.has=function(g){return this._deferreds.has(g)};u.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};u.push=function(g,b){const a=this.get(g);
if(a)return a;const l=new AbortController;let d=null;b&&(d=h.onAbort(b,()=>l.abort()));const n=()=>{f.remove();k.isSome(d)&&d.remove();this._deferreds.delete(g);this._controllers.delete(g);this._queue.remove(g);this._processingItems.delete(g);this._scheduleNext()},f=h.onAbortOrThrow(l.signal,()=>{const w=this._processingItems.get(g);w&&w.controller.abort();n();v.reject(h.createAbortError())}),v=h.createDeferred();this._deferreds.set(g,v);this._controllers.set(g,l);v.promise.then(n,n);this._queue.push(g);
this._scheduleNext();return v.promise};u.last=function(){return this._queue.last()};u.peek=function(){return this._queue.peek()};u.popLast=function(){return this._queue.popLast()};u.reset=function(){const g=[];this._processingItems.forEach(b=>g.push(b));this._processingItems.clear();for(const b of g)this._queue.push(b.item),b.controller.abort();this._scheduleNext()};u.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};u.takeAll=function(){const g=[];for(;this._queue.length;)g.push(this._queue.pop());
this.clear();return g};u.runTask=function(g){for(;!g.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),g.madeProgress()};u._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=A.schedule(()=>{this._schedule=null;this._next()}))};u._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};u._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};u._processResult=function(g,b){this._canProcessFulfillment(g)&&(this._scheduleNext(),this._deferreds.get(g.item).resolve(b))};u._processError=function(g,b){this._canProcessFulfillment(g)&&(this._scheduleNext(),this._deferreds.get(g.item).reject(b))};u._canProcessFulfillment=function(g){return this._deferreds.get(g.item)&&this._processingItems.get(g.item)===g?!0:!1};u._process=function(g){if(!k.isNone(g)){var b=new AbortController,a=new B(g,b);this._processingItems.set(g,a);try{var l=
this.process(g,b.signal)}catch(d){this._processError(a,d)}h.isPromiseLike(l)?(a.promise=l,l.then(d=>this._processResult(a,d),d=>this._processError(a,d))):this._processResult(a,l)}};q._createClass(F,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:g=>this.runTask(g)}}}]);return F}();m.QueueProcessor=z;Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(m,q,k,h,t,A){const B=new t("0/0/0/0");let z=function(){function u(b,a,l,d,n,f,v,w){this.x=b;this.ymin=a;this.ymax=l;this.invM=d;this.leftAdjust=n;this.rightAdjust=f;this.leftBound=v;this.rightBound=w}u.create=function(b,a){b[1]>a[1]&&([b,a]=[a,b]);const [l,
d]=b,[n,f]=a;b=n-l;a=f-d;a=0!==a?b/a:0;const v=(Math.ceil(d)-d)*a,w=(Math.floor(d)-d)*a;return new u(l,Math.floor(d),Math.ceil(f),a,0>b?v:w,0>b?w:v,0>b?n:l,0>b?l:n)};var g=u.prototype;g.incrRow=function(){this.x+=this.invM};g.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};g.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return u}();const F=[[0,0],[0,0],[0,0],[0,0]];return function(){function u(b,a=null){this.tileInfo=b;this.fullExtent=
a;this.scales=[];this._infoByScale={};this._infoByLevel={};const l=b.lods.slice();l.sort((n,f)=>f.scale-n.scale);const d=this._lodInfos=l.map(n=>k.create(b,n,a));l.forEach((n,f)=>{this._infoByLevel[n.level]=d[f];this._infoByScale[n.scale]=d[f];this.scales[f]=n.scale},this);this._wrap=b.isWrappable}var g=u.prototype;g.getLODInfoAt=function(b){return this._infoByLevel["number"===typeof b?b:b.level]};g.getTileBounds=function(b,a,l=!1){B.set(a);return(a=this._infoByLevel[B.level])?a.getTileBounds(b,B,
l):b};g.getTileCoords=function(b,a,l=!1){B.set(a);return(a=this._infoByLevel[B.level])?a.getTileCoords(b,B,l):b};g.getTileCoverage=function(b,a=192,l="closest"){l="closest"===l?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);const d=h.pool.acquire(l),n=this._wrap;var f=Infinity;let v=-Infinity;const w=d.spans;F[0][0]=F[0][1]=F[1][1]=F[3][0]=-a;F[1][0]=F[2][0]=b.size[0]+a;F[2][1]=F[3][1]=b.size[1]+a;for(D of F)b.toMap(D,D),D[0]=l.getColumnForX(D[0]),D[1]=l.getRowForY(D[1]);
b=[];var D=3;for(a=0;4>a;a++)F[a][1]===F[D][1]?D=a:(D=z.create(F[a],F[D]),f=Math.min(D.ymin,f),v=Math.max(D.ymax,v),void 0===b[D.ymin]&&(b[D.ymin]=[]),b[D.ymin].push(D),D=a);if(null==f||null==v||100<v-f)return null;for(a=[];f<v;){null!=b[f]&&(a=a.concat(b[f]));D=Infinity;var x=-Infinity;for(var c=a.length-1;0<=c;c--){var e=a[c];D=Math.min(D,e.getLeftCol());x=Math.max(x,e.getRightCol())}D=Math.floor(D);x=Math.floor(x);if(f>=l.first[1]&&f<=l.last[1])if(n)if(l.size[0]<l.worldSize[0])for(c=Math.floor(x/
l.worldSize[0]),e=Math.floor(D/l.worldSize[0]);e<=c;e++)w.push(new A(f,Math.max(l.getFirstColumnForWorld(e),D),Math.min(l.getLastColumnForWorld(e),x)));else w.push(new A(f,D,x));else D>l.last[0]||x<l.first[0]||(D=Math.max(D,l.first[0]),x=Math.min(x,l.last[0]),w.push(new A(f,D,x)));f+=1;for(D=a.length-1;0<=D;D--)x=a[D],x.ymax>=f?x.incrRow():a.splice(D,1)}return d};g.getTileParentId=function(b){B.set(b);b=this._lodInfos.indexOf(this._infoByLevel[B.level])-1;if(0>b)return null;this._getTileIdAtLOD(B,
this._lodInfos[b],B);return B.id};g.getTileResolution=function(b){return(b=this._infoByLevel["object"===typeof b?b.level:b])?b.resolution:-1};g.getTileScale=function(b){return(b=this._infoByLevel[b.level])?b.scale:-1};g.intersects=function(b,a){B.set(a);a=this._infoByLevel[B.level];const l=b.lodInfo;if(l.resolution>a.resolution){this._getTileIdAtLOD(B,l,B);var d=l.denormalizeCol(B.col,B.world);for(var n of b.spans)if(n.row===B.row&&n.colFrom<=d&&n.colTo>=d)return!0}if(l.resolution<a.resolution){const [v,
w,D,x]=b.spans.reduce((c,e)=>{c[0]=Math.min(c[0],e.row);c[1]=Math.max(c[1],e.row);c[2]=Math.min(c[2],e.colFrom);c[3]=Math.max(c[3],e.colTo);return c},[Infinity,-Infinity,Infinity,-Infinity]);d=a.denormalizeCol(B.col,B.world);b=l.getColumnForX(a.getXForColumn(d));n=l.getRowForY(a.getYForRow(B.row));d=l.getColumnForX(a.getXForColumn(d+1))-1;a=l.getRowForY(a.getYForRow(B.row+1))-1;return!(b>x||d<D||n>w||a<v)}const f=l.denormalizeCol(B.col,B.world);return b.spans.some(v=>v.row===B.row&&v.colFrom<=f&&
v.colTo>=f)};g.normalizeBounds=function(b,a,l){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];this._wrap&&(a=q.getInfo(this.tileInfo.spatialReference),l=-l*(a.valid[1]-a.valid[0]),b[0]+=l,b[2]+=l);return b};g.getSmallestInfoForScale=function(b){const a=this.scales;if(this._infoByScale[b])return this._infoByScale[b];if(b>a[0])return this._infoByScale[a[0]];for(let l=1;l<a.length-1;l++)if(b>a[l]+1E-6)return this._infoByScale[a[l-1]];return this._infoByScale[a[a.length-1]]};g.getClosestInfoForScale=function(b){const a=
this.scales;if(this._infoByScale[b])return this._infoByScale[b];b=a.reduce((l,d)=>Math.abs(d-b)<Math.abs(l-b)?d:l,a[0]);return this._infoByScale[b]};g.scaleToLevel=function(b){const a=this.scales;if(this._infoByScale[b])return this._infoByScale[b].level;for(let l=a.length-1;0<=l;l--)if(b<a[l])return l===a.length-1?this._infoByScale[a[a.length-1]].level:this._infoByScale[a[l]].level+(a[l]-b)/(a[l]-a[l+1]);return this._infoByScale[a[0]].level};g.scaleToZoom=function(b){return this.tileInfo.scaleToZoom(b)};
g._getTileIdAtLOD=function(b,a,l){const d=this._infoByLevel[l.level];b.set(l);if(a.resolution<d.resolution)return null;if(a.resolution===d.resolution)return b;b.level=a.level;b.col=Math.floor(l.col*d.resolution/a.resolution+.01);b.row=Math.floor(l.row*d.resolution/a.resolution+.01);return b};m._createClass(u,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return u}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(m,q,k){function h(A,B,z){A[0]=B;A[1]=z;return A}const t=new k("0/0/0/0");return function(){function A(z,F,u,g,b,a,l,d,n,f,v,w){this.level=z;this.resolution=F;this.scale=u;this.origin=g;this.first=b;this.last=a;this.size=l;this.norm=d;this.worldStart=n;this.worldEnd=f;this.worldSize=v;this.wrap=w}A.create=function(z,F,u=null){var g=q.getInfo(z.spatialReference);const b=F.origin||[z.origin.x,z.origin.y],a=[z.size[0]*F.resolution,z.size[1]*F.resolution],l=[-Infinity,-Infinity],
d=[Infinity,Infinity],n=[Infinity,Infinity];m.isSome(u)&&(h(l,Math.max(0,Math.floor((u.xmin-b[0])/a[0])),Math.max(0,Math.floor((b[1]-u.ymax)/a[1]))),h(d,Math.max(0,Math.floor((u.xmax-b[0])/a[0])),Math.max(0,Math.floor((b[1]-u.ymin)/a[1]))),h(n,d[0]-l[0]+1,d[1]-l[1]+1));const {cols:f,rows:v}=F;!u&&f&&v&&(h(l,f[0],v[0]),h(d,f[1],v[1]),h(n,f[1]-f[0]+1,v[1]-v[0]+1));let w;z.isWrappable?(z=[Math.ceil(Math.round((g.valid[1]-g.valid[0])/F.resolution)/z.size[0]),n[1]],g=[Math.floor((g.origin[0]-b[0])/a[0]),
l[1]],u=[z[0]+g[0]-1,d[1]],w=!0):(g=l,u=d,z=n,w=!1);return new A(F.level,F.resolution,F.scale,b,l,d,n,a,g,u,z,w)};var B=A.prototype;B.normalizeCol=function(z){if(!this.wrap)return z;const F=this.worldSize[0];return 0>z?F-1-Math.abs((z+1)%F):z%F};B.denormalizeCol=function(z,F){return this.wrap?this.worldSize[0]*F+z:z};B.getWorldForColumn=function(z){return this.wrap?Math.floor(z/this.worldSize[0]):0};B.getFirstColumnForWorld=function(z){return z*this.worldSize[0]+this.first[0]};B.getLastColumnForWorld=
function(z){return z*this.worldSize[0]+this.first[0]+this.size[0]-1};B.getColumnForX=function(z){return(z-this.origin[0])/this.norm[0]};B.getXForColumn=function(z){return this.origin[0]+z*this.norm[0]};B.getRowForY=function(z){return(this.origin[1]-z)/this.norm[1]};B.getYForRow=function(z){return this.origin[1]-z*this.norm[1]};B.getTileBounds=function(z,F,u=!1){t.set(F);var g=u?t.col:this.denormalizeCol(t.col,t.world),b=t.row;F=this.getXForColumn(g);u=this.getYForRow(b+1);g=this.getXForColumn(g+1);
b=this.getYForRow(b);z[0]=F;z[1]=u;z[2]=g;z[3]=b;return z};B.getTileCoords=function(z,F,u=!1){t.set(F);F=u?t.col:this.denormalizeCol(t.col,t.world);Array.isArray(z)?h(z,this.getXForColumn(F),this.getYForRow(t.row)):(z.x=this.getXForColumn(F),z.y=this.getYForRow(t.row));return z};return A}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(m,q){let k=function(){function h(A,B,z,F){this.set(A,B,z,F)}h.getId=function(A,
B,z,F){return"object"===typeof A?`${A.level}/${A.row}/${A.col}/${A.world}`:`${A}/${B}/${z}/${F}`};var t=h.prototype;t.acquire=function(A,B,z,F){this.set(A,B,z,F)};t.contains=function(A){const B=A.level-this.level;return 0<=B&&this.row===A.row>>B&&this.col===A.col>>B&&this.world===A.world};t.equals=function(A){return this.level===A.level&&this.row===A.row&&this.col===A.col&&this.world===A.world};t.clone=function(){return new h(this)};t.release=function(){this.world=this.col=this.row=this.level=0};
t.set=function(A,B,z,F){if(null==A)this.world=this.col=this.row=this.level=0;else if("object"===typeof A)this.level=A.level||0,this.row=A.row||0,this.col=A.col||0,this.world=A.world||0;else if("string"===typeof A){const [u,g,b,a]=A.split("/");this.level=parseFloat(u);this.row=parseFloat(g);this.col=parseFloat(b);this.world=parseFloat(a)}else this.level=+A,this.row=+B,this.col=+z,this.world=+F||0;return this};t.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};t.getParentKey=
function(){return 0>=this.level?null:new h(this.level-1,this.row>>1,this.col>>1,this.world)};t.getChildKeys=function(){const A=this.level+1,B=this.row<<1,z=this.col<<1,F=this.world;return[new h(A,B,z,F),new h(A,B,z+1,F),new h(A,B+1,z,F),new h(A,B+1,z+1,F)]};t.compareRowMajor=function(A){return this.row<A.row?-1:this.row>A.row?1:this.col<A.col?-1:this.col>A.col?1:0};m._createClass(h,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(A){this.set(A)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return h}();k.pool=new q(k,null,null,25,50);return k})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(m){let q=function(){function k(){this.spans=[]}var h=k.prototype;h.acquire=function(t){this.lodInfo=t};h.release=function(){this.lodInfo=null;this.spans.length=0};h.forEach=function(t,A){const {spans:B,lodInfo:z}=this,{level:F}=z;if(0!==B.length)for(const {row:u,
colFrom:g,colTo:b}of B)for(let a=g;a<=b;a++)t.call(A,F,u,z.normalizeCol(a),z.getWorldForColumn(a))};return k}();q.pool=new m(q);return q})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(m,q,k){this.row=m;this.colFrom=q;this.colTo=k}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(m,q,k,h,t,A,B,z,F,u){function g(n,f){n.length=0;f.forEach(v=>n.push(v));return n}const b=new Set,a=[],l=new Map,d=[0,0];k=function(n){function f(w){w=n.call(this,w)||this;w._keyToItem=new Map;w.concurrency=6;w.strategy="scale-first";w.tileInfoView=null;return w}m._inheritsLoose(f,n);var v=f.prototype;v.initialize=function(){const {concurrency:w,process:D,strategy:x}=this;this._queue=new u.QueueProcessor({concurrency:w,process:(c,e)=>{c=this._keyToItem.get(c);return D(c,{signal:e})},peeker:"scale-first"===
x?c=>this._peekByScaleFirst(c):c=>this._peekByCenterFirst(c)})};v.destroy=function(){this.clear();this._queue=h.destroyMaybe(this._queue)};v.abort=function(w){this._queue.abort("string"===typeof w?w:w.id)};v.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};v.has=function(w){return"string"===typeof w?this._keyToItem.has(w):this._keyToItem.has(w.id)};v.isOngoing=function(w){w="string"===typeof w?w:w.id;return this.has(w)&&this._queue.isOngoing(w)};v.pause=
function(){this._queue.pause()};v.push=function(w){const D=w.key.id;if(this._queue.has(D))return this._queue.get(D);const x=this._queue.push(D),c=()=>{this._keyToItem.delete(D);this.notifyChange("updating")};this._keyToItem.set(D,w);x.then(c,c);this.notifyChange("updating");return x};v.reset=function(){this._queue.reset()};v.resume=function(){this._queue.resume()};v._peekByScaleFirst=function(w){if(!this.state)return w.values().next().value;const D=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,
c=Number.POSITIVE_INFINITY;w.forEach(O=>{O=this._keyToItem.get(O);const K=this.tileInfoView.getTileScale(O.key);l.has(K)||(l.set(K,[]),x=Math.max(K,x),c=Math.min(K,c));l.get(K).push(O.key);b.add(K)});let e=this.state.scale;l.has(e)||(g(a,b),a.sort((O,K)=>O-K),e=a.reduce((O,K)=>Math.abs(K-e)<Math.abs(O-e)?K:O,a[0]));e=Math.min(e,x);e=Math.max(e,c);w=l.get(e);const p=D.getClosestInfoForScale(e),C=p.getColumnForX(this.state.center[0]),L=p.getRowForY(this.state.center[1]);w.sort((O,K)=>{const U=p.denormalizeCol(O.col,
O.world),T=p.denormalizeCol(K.col,K.world);return Math.sqrt((C-U)*(C-U)+(L-O.row)*(L-O.row))-Math.sqrt((C-T)*(C-T)+(L-K.row)*(L-K.row))});b.clear();l.clear();return w[0].id};v._peekByCenterFirst=function(w){if(!this.state)return w.values().next().value;const D=this.tileInfoView,x=this.state.center;let c=Number.POSITIVE_INFINITY,e;w.forEach(p=>{p=this._keyToItem.get(p);D.getTileCoords(d,p.key);const C=F.distance(d,x);C<c&&(c=C,e=p.key)});return e.id};m._createClass(f,[{key:"length",get:function(){return this._queue?
this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return f}(k);q.__decorate([t.property({constructOnly:!0})],k.prototype,"concurrency",void 0);q.__decorate([t.property({constructOnly:!0})],k.prototype,"process",void 0);q.__decorate([t.property()],k.prototype,"state",void 0);q.__decorate([t.property({constructOnly:!0})],k.prototype,"strategy",void 0);q.__decorate([t.property({constructOnly:!0})],
k.prototype,"tileInfoView",void 0);q.__decorate([t.property({readOnly:!0})],k.prototype,"updating",null);return k=q.__decorate([z.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(m,q,k,h){const t=new h(0,0,0,0),A=new Map,B=[],z=[];return function(){function F(g){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy=
"closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=g.acquireTile;this.releaseTile=g.releaseTile;this.tileInfoView=g.tileInfoView;this.resampling=null==g.resampling||!!g.resampling;g.cachePolicy&&(this.cachePolicy=g.cachePolicy);g.coveragePolicy&&(this.coveragePolicy=g.coveragePolicy);null!=g.buffer&&(this.buffer=g.buffer);g.cacheSize&&(this._tileCache=new q(g.cacheSize,this.tileInfoView,b=>{this.releaseTile(b)}))}var u=F.prototype;u.destroy=function(){this.tileIndex.clear()};
u.update=function(g){const {resampling:b,tileIndex:a}=this,l=this.tileInfoView.getTileCoverage(g.state,this.buffer,this.coveragePolicy);z.length=0;B.length=0;A.clear();if(l){var {minScale:d,maxScale:n}=this.tileInfoView.tileInfo,{spans:f,lodInfo:v}=l,{level:w}=v,{scale:D,center:x,resolution:c}=g.state,e=!g.stationary&&D>this._previousScale;this._previousScale=D;this.tiles.length=0;if(!b&&(D>d||D<n))return this.tiles.length=0,A.clear(),a.forEach(K=>{this.releaseTile(K)}),a.clear(),z.length=0,B.length=
0,A.clear(),k.pool.release(l),!0;a.forEach(K=>K.visible=!0);var p=g=0;if(0<f.length)for(const {row:K,colFrom:U,colTo:T}of f)for(let M=U;M<=T;M++){g++;const P=t.set(w,K,v.normalizeCol(M),v.getWorldForColumn(M)).id;if(a.has(P)){var C=a.get(P);C.isReady?(A.set(P,C),p++):e||this._addParentTile(P,A)}else{if(this._tileCache&&this._tileCache.has(P)){if(C=this._tileCache.pop(P),this.tileIndex.set(P,C),C.isReady){A.set(P,C);p++;continue}}else C=this.acquireTile(t),this.tileIndex.set(P,C);e||this._addParentTile(P,
A)}}var L=p===g;a.forEach((K,U)=>{t.set(U);if(!A.has(U)){var T=this.tileInfoView.intersects(l,t),M="purge"===this.cachePolicy?t.level!==w:t.level>w;!T||!e&&L?!M&&T||B.push(U):K.isReady?M&&"purge"===this.cachePolicy&&this._hasReadyAncestor(t,w)?B.push(U):z.push(U):M&&B.push(U)}});for(var O of z)(g=a.get(O))&&g.isReady&&A.set(O,g);for(const K of B)O=a.get(K),this._tileCache?this._tileCache.add(O):this.releaseTile(O),a.delete(K);A.forEach(K=>this.tiles.push(K));a.forEach(K=>{A.has(K.key.id)||(K.visible=
!1)});this._tileCache&&this._tileCache.prune(w,x,c);k.pool.release(l);A.clear();return L}};u.clear=function(g=!0){const {tileIndex:b}=this;g&&b.forEach(a=>{this.releaseTile(a)});b.clear()};u.updateCacheSize=function(g){this._tileCache&&(this._tileCache.maxSize=g)};u._addParentTile=function(g,b){let a=null;for(;;){g=this.tileInfoView.getTileParentId(g);if(!g)break;if(this.tileIndex.has(g)){if((a=this.tileIndex.get(g))&&a.isReady){b.has(a.key.id)||b.set(a.key.id,a);break}}else if(this._tileCache&&this._tileCache.has(g)&&
(a=this._tileCache.pop(g),this.tileIndex.set(g,a),a&&a.isReady)){b.has(a.key.id)||b.set(a.key.id,a);break}}};u._hasReadyAncestor=function(g,b){const a=m.create();this.tileInfoView.getTileBounds(a,g,!0);for(const l of this.tileIndex.values())if(l.isReady&&l.key.level>=b&&l.key.level<g.level){const d=m.create();this.tileInfoView.getTileBounds(d,l.key,!0);if(m.contains(d,a))return!0}return!1};return F}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(m){return function(){function q(h,
t,A){this.maxSize=h;this._tileInfoView=t;this._removedFunc=A;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var k=q.prototype;k.has=function(h){return this._tilePerId.has(h)};k.get=function(h){return this._tilePerId.get(h)};k.pop=function(h){const t=this._tilePerId.get(h);if(t){var A=this._tileKeysPerLevel[t.key.level];this._tilePerId["delete"](h);for(let B=0;B<A.length;B++)if(A[B].id===h){A.splice(B,1);break}t.visible=!0;return t}};k.add=function(h){h.visible=!1;const t=h.key,A=t.id;this._tilePerId.has(A)||
(this._tilePerId.set(A,h),h=t.level,this._tileKeysPerLevel[h]||(this._tileKeysPerLevel[h]=[]),this._tileKeysPerLevel[h].push(t))};k.prune=function(h,t,A){let B=this._tilePerId.size;if(!(B<=this.maxSize)){for(var z=this._tileKeysPerLevel.length-1;B>this.maxSize&&0<=z;)z!==h&&(B=this._pruneAroundCenterTile(B,t,A,z)),z--;B>this.maxSize&&(B=this._pruneAroundCenterTile(B,t,A,h))}};k._pruneAroundCenterTile=function(h,t,A,B){B=this._tileKeysPerLevel[B];if(!B||0===B.length)return h;const {size:z,origin:F}=
this._tileInfoView.tileInfo,u=A*z[0],g=A*z[1],b=[0,0],a=[0,0];for(B.sort((l,d)=>{b[0]=F.x+u*(l.col+.5);b[1]=F.y-g*(l.row+.5);a[0]=F.x+u*(d.col+.5);a[1]=F.y-g*(d.row+.5);return m.squaredDistance(b,t)-m.squaredDistance(a,t)});0<B.length&&(A=B.pop(),this._removeTile(A.id),h--,h!==this.maxSize););return h};k._removeTile=function(h){const t=this._tilePerId.get(h);this._removedFunc&&t&&this._removedFunc(t);this._tilePerId["delete"](h)};return q}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L,O,K){var U={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},T={zoomIn:["\x3d","+"],zoomOut:["-","_"]},M={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(P){function V(){var y=P.apply(this,arguments)||this;y._handles=new h;return y}m._inheritsLoose(V,P);var H=V.prototype;H.initialize=function(){const y=()=>this.view?.ready;this._handles.add([A.when(()=>
!y(),()=>this._disconnect()),A.when(y,()=>this._connect())])};H.destroy=function(){this._handles=t.destroyMaybe(this._handles);this._disconnect()};H._disconnect=function(){this.view.viewEvents.disconnect();this._inputManager=t.destroyMaybe(this._inputManager)};H._connect=function(){const y=new x.BrowserEventSource(this.view.surface,this.view.input);var E=[new L.ImmediateDoubleClick,new O.PointerClickHoldAndDrag,new K.SingleAndDoubleClick,new C.Drag(this.view.navigation),new p.DoubleTapDrag];E=new c.InputManager({eventSource:y,
recognizers:E});E.installHandlers("prevent-context-menu",[new e.PreventContextMenu],c.ViewEventPriorities.INTERNAL);E.installHandlers("navigation",[new D.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new w.MouseWheelZoom(this.view),new g.DoubleClickZoom(this.view),new g.DoubleClickZoom(this.view,["Ctrl"]),new a.DragPan(this.view,"primary"),new n.KeyPan(this.view,U),new v.KeyZoom(this.view,T),new f.KeyRotate(this.view,M),new l.DragRotate(this.view,"secondary"),new b.DoubleTapDragZoom(this.view,
"touch")],c.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(E);this._source=y;this._inputManager=E;A.watch(()=>this.view?.navigation?.browserTouchPanEnabled,I=>{this._source&&(this._source.browserTouchPanningEnabled=!I)},A.initial)};m._createClass(V,[{key:"latestPointerType",get:function(){return this._inputManager?.latestPointerType}},{key:"latestPointerLocation",get:function(){return this._inputManager?.latestPointerLocation}},{key:"multiTouchActive",get:function(){return this._inputManager?.multiTouchActive??
!1}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return V}(k);q.__decorate([B.property()],k.prototype,"view",void 0);q.__decorate([B.property()],k.prototype,"latestPointerType",null);q.__decorate([B.property()],k.prototype,"latestPointerLocation",null);q.__decorate([B.property()],k.prototype,"multiTouchActive",null);return k=q.__decorate([u.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(m,q,k,h){k=function(t){function A(B,z){var F=t.call(this,!0)||this;F._view=B;F.registerIncoming("double-click",z,u=>F._handleDoubleClick(u,z));return F}q._inheritsLoose(A,t);A.prototype._handleDoubleClick=function(B,z){h.eventMatchesPointerAction(B.data,"primary")&&(B.stopPropagation(),z?this._view.mapViewNavigation.zoomOut([B.data.x,B.data.y]):this._view.mapViewNavigation.zoomIn([B.data.x,
B.data.y]))};return A}(k.InputHandler);m.DoubleClickZoom=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(m){m.eventMatchesMousePointerAction=function(q,k){if("touch"===q.pointerType)return!1;switch(k){case "primary":return 0===q.button;case "secondary":return 2===q.button;case "tertiary":return 1===q.button}};m.eventMatchesPointerAction=function(q,k){switch(k){case "primary":return"touch"===q.pointerType||
0===q.button;case "secondary":return"touch"!==q.pointerType&&2===q.button;case "tertiary":return"touch"!==q.pointerType&&1===q.button}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(m,q,k,h){k=function(t){function A(B,z,F){var u=t.call(this,!0)||this;u.view=B;u.pointerType=z;u.registerIncoming("double-tap-drag",
F,g=>u._handleDoubleTapDrag(g));return u}q._inheritsLoose(A,t);A.prototype._handleDoubleTapDrag=function(B){var {data:z}=B,{pointerType:F}=z;if(F===this.pointerType){B.stopPropagation();var {action:u,delta:g}=z;({view:z}=this);({mapViewNavigation:B}=z);switch(u){case "begin":({scale:z}=z);this._currentScale=this._startScale=z;this._previousDelta=g;B.begin();break;case "update":if(this._previousDelta.y===g.y)break;this._previousDelta=g;z=this._startScale*1.015**g.y;B.setViewpointImmediate(z/this._currentScale);
this._currentScale=z;break;case "end":({constraints:F}=z);const {effectiveLODs:b,snapToZoom:a}=F;a&&b?(z=F.snapScale(this._currentScale),z=(0<g.y?Math.max(z,F.snapToPreviousScale(this._startScale)):Math.min(z,F.snapToNextScale(this._startScale)))/this._currentScale,B.zoom(z)):B.end()}}};return A}(h.InputHandler);m.DoubleTapDragZoom=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(m,q,k,h,t){h=function(A){function B(F,u,g){var b=A.call(this,!0)||this;b.view=F;b.pointerAction=u;b.registerIncoming("drag",g,a=>b._handleDrag(a));b.registerIncoming("pointer-down",()=>b.stopMomentumNavigation());return b}q._inheritsLoose(B,A);var z=B.prototype;z.onInstall=function(F){A.prototype.onInstall.call(this,F);this._dragEventSeparator=new k.DragEventSeparator({start:(u,g)=>{this.view.mapViewNavigation.pan.begin(this.view,
g.data);g.stopPropagation()},update:(u,g)=>{this.view.mapViewNavigation.pan.update(this.view,g.data);g.stopPropagation()},end:(u,g)=>{this.view.mapViewNavigation.pan.end(this.view,g.data);g.stopPropagation()},condition:(u,g)=>1===u&&t.eventMatchesPointerAction(g.data,this.pointerAction)})};z._handleDrag=function(F){const u=this.view.mapViewNavigation;u.pinch.zoomMomentum||u.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(F)};z.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};
return B}(h.InputHandler);m.DragPan=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(m){let q=function(){function k(t){this._callbacks=t;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}var h=k.prototype;h.handle=function(t){const A=t.data,B=A.pointers.size;switch(A.action){case "start":this._currentCount=B;this._emitStart(t);break;case "added":this._emitEnd(this._previousEvent);
this._currentCount=B;this._emitStart(t);break;case "update":this._emitUpdate(t);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=B;this._emitStart(t);break;case "end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t};h._emitStart=function(t){this._startEvent=t;this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)};h._emitUpdate=function(t){this._callbacks.condition?.(this._currentCount,
t)&&this._callbacks.update(this._currentCount,t,this._startEvent)};h._emitEnd=function(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent);this._startEvent=null};return k}();m.DragEventSeparator=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler",
"../../../input/handlers/support"],function(m,q,k,h,t){h=function(A){function B(z,F,u){var g=A.call(this,!0)||this;g._view=z;g.pointerAction=F;const b=g._view.mapViewNavigation;g._dragEventSeparator=new k.DragEventSeparator({start:(a,l)=>{b.rotate.begin(g._view,l.data);l.stopPropagation()},update:(a,l)=>{b.rotate.update(g._view,l.data);l.stopPropagation()},end:(a,l)=>{b.rotate.end();l.stopPropagation()},condition:(a,l)=>1===a&&t.eventMatchesPointerAction(l.data,g.pointerAction)});g.registerIncoming("drag",
u,a=>g._dragEventSeparator.handle(a));return g}q._inheritsLoose(B,A);return B}(h.InputHandler);m.DragRotate=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(m,q,k,h,
t,A,B,z){B=function(F){function u(b){var a=F.call(this,!0)||this;a._view=b;a._frameTask=null;a._watchHandles=new k;a._currentDevice=null;a._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};a._handle=a.registerIncoming("gamepad",l=>a._handleGamePadEvent(l));a._handle.pause();return a}q._inheritsLoose(u,F);var g=u.prototype;g.onInstall=function(b){F.prototype.onInstall.call(this,b);this._watchHandles.add([h.watch(()=>this._view.navigation.gamepad?.enabled,a=>{a?(this._handle.resume(),this._frameTask||
(this._frameTask=t.addFrameTask({update:l=>this._frameUpdate(l.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},h.initial)])};g.onUninstall=function(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);F.prototype.onUninstall.call(this)};g._handleGamePadEvent=function(b){const a=this._view.navigation.gamepad.device;a&&b.data.device!==a||this._currentDevice&&this._currentDevice!==b.data.device||("end"===
b.data.action?(this._currentDevice=null,z.resetTransformation(this._transformation)):(this._currentDevice=b.data.device,z.extractTransformation(b.data,this._view.navigation.gamepad,this._transformation)))};g._frameUpdate=function(b){const a=this._transformation;if(!z.isZeroTransformation(a)){var l=this._view.viewpoint.clone(),d=.7*this._view.navigation.gamepad.velocityFactor*b;A.translateBy(l,l,[a.translation[0]*d,-a.translation[1]*d]);d=this._view.size;A.scaleAndRotateBy(l,l,1+6E-4*a.translation[2]*
b,this._view.constraints.rotationEnabled?.06*-a.heading*b:0,[d[0]/2,d[1]],d);b=this._view.constraints.constrain(l,this._view.viewpoint);this._view.viewpoint=b}};return u}(B.InputHandler);m.GamepadNavigation=B;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(m,q){function k(h){let t=h*h;0>h&&(t*=-1);return t}m.extractTransformation=function(h,t,A){const B=h.state;h=h.device;t="forward-down"===
t.tiltDirection?1:-1;"standard"===h.deviceType?(A.translation[0]=k(B.axes[0]),A.translation[1]=k(B.axes[1]),A.translation[2]=k(B.buttons[7])-k(B.buttons[6]),A.heading=k(B.axes[2]),A.tilt=k(B.axes[3])):"spacemouse"===h.deviceType&&(A.translation[0]=1.2*k(B.axes[0]),A.translation[1]=1.2*k(B.axes[1]),A.translation[2]=2*-k(B.axes[2]),A.heading=1.2*k(B.axes[5]),A.tilt=1.2*k(B.axes[3]));A.tilt*=t;q.scale(A.translation,A.translation,1);return A};m.extractTransformationKeyboard=function(h,t){t.translation[0]=
h[1]-h[0];t.translation[1]=h[3]-h[2];t.translation[2]=h[4]-h[5];t.heading=h[7]-h[6];t.tilt=h[8]-h[9];t.zoom=h[10]-h[11];return t};m.isZeroTransformation=function(h){return 0===h.translation[0]&&0===h.translation[1]&&0===h.translation[2]&&0===h.heading&&0===h.tilt&&0===h.zoom};m.resetTransformation=function(h){h.translation[0]=0;h.translation[1]=0;h.translation[2]=0;h.heading=0;h.tilt=0;return h};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(m,q,k){k=function(h){function t(B,z,F){var u=h.call(this,!0)||this;u.view=B;u.keys=z;u._pressed=!1;u._keyMap={[z.left]:"left",[z.right]:"right",[z.up]:"up",[z.down]:"down"};u.registerIncoming("key-down",F,g=>u._handleKeyDown(g));u.registerIncoming("key-up",F,g=>u._handleKeyUp(g));u.registerIncoming("blur",F,()=>u._handleBlur());return u}q._inheritsLoose(t,h);var A=t.prototype;A._handleKeyDown=function(B){B.data.repeat||
this._handleKey(B,!0)};A._handleKeyUp=function(B){this._handleKey(B,!1)};A._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};A._handleKey=function(B,z){const F=this._keyMap[B.data.key];if(this._pressed=null!=F){if(z)switch(this.view.mapViewNavigation.begin(),F){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=
!1,this.view.mapViewNavigation.stop();B.stopPropagation()}};return t}(k.InputHandler);m.KeyPan=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(m,q,k){k=function(h){function t(B,z,F){var u=h.call(this,!0)||this;u.view=B;u.keys=z;u._pressed=!1;u._keyToDirection={[z.clockwiseOption1]:"clockwise",[z.clockwiseOption2]:"clockwise",
[z.counterClockwiseOption1]:"counterClockwise",[z.counterClockwiseOption2]:"counterClockwise",[z.resetOption1]:"reset",[z.resetOption2]:"reset"};u.registerIncoming("key-down",F,g=>u._handleKeyDown(g));u.registerIncoming("key-up",F,g=>u._handleKeyUp(g));u.registerIncoming("blur",F,()=>u._handleBlur());return u}q._inheritsLoose(t,h);var A=t.prototype;A._handleKeyDown=function(B){B.data.repeat||this._handleKey(B,!0)};A._handleKeyUp=function(B){this._handleKey(B,!1)};A._handleBlur=function(){this._pressed&&
(this._pressed=!1,this.view.mapViewNavigation.stop())};A._handleKey=function(B,z){var F=B.modifiers;if(!(0<F.size&&!F.has("Shift")||!this.view.constraints.rotationEnabled)&&(F=this._keyToDirection[B.data.key],this._pressed=null!=F)){if(z)switch(this.view.mapViewNavigation.begin(),F){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=
!1,this.view.mapViewNavigation.stop();B.stopPropagation()}};return t}(k.InputHandler);m.KeyRotate=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(m,q,k,h){var t;(function(A){A[A.IN=0]="IN";A[A.OUT=1]="OUT"})(t||(t={}));k=function(A){function B(F,u,g){var b=A.call(this,!0)||this;b.view=F;b.keys=u;b._keysToZoomAction=
{};b.registerIncoming("key-down",g,a=>b._handleKeyDown(a));u.zoomIn.forEach(a=>b._keysToZoomAction[a]=t.IN);u.zoomOut.forEach(a=>b._keysToZoomAction[a]=t.OUT);return b}q._inheritsLoose(B,A);var z=B.prototype;z._handleKeyDown=function(F){this._handleKey(F)};z._handleKey=function(F){var u=F.modifiers;if(!(0<u.size)||u.has("Shift"))if({key:u}=F.data,u in this._keysToZoomAction){u=this._keysToZoomAction[u];var {mapViewNavigation:g}=this.view,b=null;switch(u){case t.IN:b=g.zoomIn();break;case t.OUT:b=
g.zoomOut();break;default:return}g.begin();b.then(()=>g.end());F.stopPropagation()}};return B}(h.InputHandler);m.KeyZoom=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(m,q,k){k=function(h){function t(A,B){var z=h.call(this,!0)||this;z._view=A;z._canZoom=!0;z.registerIncoming("mouse-wheel",B,F=>z._handleMouseWheel(F));return z}
q._inheritsLoose(t,h);t.prototype._handleMouseWheel=function(A){if(this._view.navigation.mouseWheelZoomEnabled&&(A.preventDefault(),A.stopPropagation(),this._canZoom)){var B=this._view.mapViewNavigation,{x:z,y:F,deltaY:u}=A.data;if(A=B.zoom(1/.6**(1/60*u),[z,F]))this._canZoom=!1,A.catch(()=>{}).then(()=>{this._canZoom=!0;B.end()})}};return t}(k.InputHandler);m.MouseWheelZoom=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(m,q,k,h){h=function(t){function A(z){var F=t.call(this,!0)||this;F.view=z;F.registerIncoming("drag",g=>F._handleDrag(g));F.registerIncoming("pointer-down",()=>F._stopMomentumNavigation());const u=F.view.mapViewNavigation;F._dragEventSeparator=new k.DragEventSeparator({start:(g,b)=>{u.pinch.begin(F.view,b.data);b.stopPropagation()},update:(g,b)=>{u.pinch.update(F.view,b.data);
b.stopPropagation()},end:(g,b)=>{u.pinch.end(F.view);b.stopPropagation()},condition:g=>2<=g});return F}q._inheritsLoose(A,t);var B=A.prototype;B._handleDrag=function(z){this._dragEventSeparator.handle(z)};B._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return A}(h.InputHandler);m.PinchRotateAndZoom=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),
function(m,q,k,h,t,A,B){const z=k("edge"),F=k("chrome"),u=k("ff"),g=k("safari");k=function(){function a(d,n){this._input=n;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=d;d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new A.GamepadSource(d,this._input);this._gamepadSource.onEvent=f=>this._callback("gamepad",f)}var l=a.prototype;l.destroy=function(){this._callback=
()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(d=>{this._releasePointerCaptureSafe(d)});this._gamepadSource=h.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};l.setPointerCapture=function(d,n){n?(this._element.setPointerCapture(d.pointerId),this._activePointerCaptures.add(d.pointerId)):(this._releasePointerCaptureSafe(d.pointerId),this._activePointerCaptures.delete(d.pointerId))};
l._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};l._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
l._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};l._releasePointerCaptureSafe=function(d){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(d)||this._element.releasePointerCapture(d)}catch(n){}};l._updateNormalizedPointerLikeEvent=function(d,n){d=B.createScreenPointFromNativeEvent(this._element,
d);a.test.disableSubpixelCoordinates&&(d.x=Math.round(d.x),d.y=Math.round(d.y));n.x=d.x;n.y=d.y;return n};l._handleKey=function(d,n){const f=t.eventKey(n);f&&"key-up"===d&&this._keyDownState.delete(f);n={native:n,key:f,repeat:!!f&&this._keyDownState.has(f)};f&&"key-down"===d&&this._keyDownState.add(n.key);this._callback(d,n)};l._handlePointer=function(d,n){n=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});
this._callback(d,n)};l._handlePointerPreventDefault=function(d,n){const f=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault();this._callback(d,f)};l._handleMouseWheel=function(d,n){let f=n.deltaY;switch(n.deltaMode){case 0:z&&(f=f/document.documentElement.clientHeight*600);break;case 1:f*=30;break;case 2:f*=900}z?f*=.7:F||g?f*=.6:u&&(f*=1.375);const v=Math.abs(f);100<v&&(f=f/v*200/(1+Math.exp(-.02*
(v-100))));n=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:f});this._callback(d,n)};l._handlePointerCaptureLost=function(d,n){this._activePointerCaptures.delete(n.pointerId);this._handleDefault(d,n)};l._handleDefault=function(d,n){const f={native:n};n.preventDefault();this._callback(d,f)};l._preventAltKeyDefault=function(d){"Alt"===d.key&&d.preventDefault()};l._preventMultiTouchPanning=function(d){1<d.touches.length&&d.preventDefault()};q._createClass(a,[{key:"browserTouchPanningEnabled",
get:function(){return this._browserTouchPanningEnabled},set:function(d){this._browserTouchPanningEnabled=d;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(d){this._callback=d}},{key:"activeEvents",set:function(d){for(const n in this._active)d&&d.has(n)||(this._element.removeEventListener(b[n],this._active[n]),delete this._active[n]);d&&d.forEach(n=>{if(!this._active[n]&&b[n]){const f=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(b[n],
f);this._active[n]=f}});this._gamepadSource.hasEventListeners=d?.has("gamepad")??!1}}]);return a}();k.test={disableSubpixelCoordinates:!1};const b={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",
focus:"focus",blur:"blur"};m.BrowserEventSource=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(m,q,k,h,t){let A=function(){function B(F,u){this._element=F;this._input=u;this._hasEventListeners=!1;this._onConnectGamepad=g=>{this._connectGamepad(g.gamepad)};this._onDisconnectGamepad=g=>{g=g.gamepad;
const b=g.index,a=this._inputDevices[b];a&&(this._emitGamepadEvent(g,t.extractState(a),!1),this._inputDevices.splice(b,1),this._latestUpdate.splice(b,1),this._input.gamepad.devices.remove(a),this.ensurePollingState())};this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;F=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&F)this._forEachGamepad(g=>this._connectGamepad(g)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",
this._onDisconnectGamepad),this.ensurePollingState()}var z=B.prototype;z.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};z._connectGamepad=function(F){const u=new h(F);"unknown"!==u.deviceType&&(this._inputDevices[F.index]=u,this._input.gamepad.devices.add(u));this.ensurePollingState()};z.ensurePollingState=function(){this._eventsEnabled?
this._startPolling():this._stopPolling()};z._startPolling=function(){null==this._frameTask&&(this._frameTask=k.addFrameTask({update:()=>this._readGamepadState()}))};z._stopPolling=function(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])};z._readGamepadState=function(){const F=document.hasFocus(),u=this._element.contains(document.activeElement),g="document"===this._input.gamepad.enabledFocusMode&&!F||"view"===this._input.gamepad.enabledFocusMode&&!u;this._forEachGamepad(b=>
{var a=this._inputDevices[b.index];if(a){var l=this._latestUpdate[b.index];a=t.extractState(a);var d=g||t.stateIdle(a);l&&(l.timestamp===b.timestamp||!l.active&&d||t.stateEqual(l.state,a))||this._emitGamepadEvent(b,a,!d)}})};z._forEachGamepad=function(F){const u=window.navigator.getGamepads();for(let g=0;g<u.length;g++){const b=u[g];this._validate(b)&&F(b)}};z._emitGamepadEvent=function(F,u,g){var b=this._latestUpdate[F.index];if((b=b&&b.active)||g)this._latestUpdate[F.index]={timestamp:F.timestamp,
state:u,active:g},this._callback&&this._callback({device:this._inputDevices[F.index],state:u,action:!b&&g?"start":b&&g?"update":"end"})};z._validate=function(F){if(!F||!F.connected)return!1;for(let u=0;u<F.axes.length;u++)if(isNaN(F.axes[u]))return!1;return!0};q._createClass(B,[{key:"hasEventListeners",set:function(F){this._hasEventListeners!==F&&(this._hasEventListeners=F,this.ensurePollingState())}},{key:"_eventsEnabled",get:function(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}},
{key:"onEvent",set:function(F){this._callback=F}}]);return B}();m.GamepadSource=A;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(m){m.extractState=function(q){const k=q.native;return k?{buttons:k.buttons.map(h=>h.pressed?h.value?h.value:1:0),axes:k.axes.map(h=>{{var t=q.axisThreshold;const A=Math.abs(h);h=A<t?0:Math.sign(h)*(A-t)/(1-t)}return h})}:{buttons:[],axes:[]}};m.stateEqual=function(q,k){if(q.axes.length!==
k.axes.length||q.buttons.length!==k.buttons.length)return!1;for(var h=0;h<q.axes.length;h++)if(q.axes[h]!==k.axes[h])return!1;for(h=0;h<q.buttons.length;h++)if(q.buttons[h]!==k.buttons[h])return!1;return!0};m.stateIdle=function(q){for(var k=0;k<q.axes.length;k++)if(0!==q.axes[k])return!1;for(k=0;k<q.buttons.length;k++)if(0!==q.buttons[k])return!1;return!0};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../InputHandler"],function(m,q,k){k=function(h){function t(){var A=h.call(this,!0)||this;A.registerIncoming("context-menu",B=>{B.data.native.preventDefault()});return A}q._inheritsLoose(t,h);return t}(k.InputHandler);m.PreventContextMenu=k;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(m,q,k,h,t,A,B,z,F,u){z=function(g){function b(l=F.DefaultParameters.maximumDoubleClickDelay,d=F.DefaultParameters.maximumDoubleClickDistance,n=F.DefaultParameters.maximumDoubleTouchDelay,f=F.DefaultParameters.maximumDoubleTouchDistance,v=k.clock){var w=g.call(this,!1)||this;w._maximumDoubleClickDelay=l;w._maximumDoubleClickDistance=d;w._maximumDoubleTouchDelay=n;w._maximumDoubleTouchDistance=f;w._clock=v;w._doubleTapDragReady=!1;w._doubleTapDragActive=!1;w._dragStartCenter=A.createScreenPoint(0,
0);w._pointerState=new Map;w._doubleTapDrag=w.registerOutgoing("double-tap-drag");w._dragEventSeparator=new B.DragEventSeparator({start:(D,x)=>w._dragStart(D,x),update:(D,x)=>w._dragUpdate(x),end:(D,x)=>w._dragEnd(x)});w.registerIncoming("drag",D=>w._dragEventSeparator.handle(D));w.registerIncoming("pointer-down",D=>w._handlePointerDown(D));w.registerIncoming("pointer-up",()=>w._handlePointerUp());return w}q._inheritsLoose(b,g);var a=b.prototype;a.onUninstall=function(){this._pointerState.forEach(l=>
{l.doubleTapTimeout=t.removeMaybe(l.doubleTapTimeout)})};a._clearPointerDown=function(l){const d=this._pointerState.get(l);d&&(d.doubleTapTimeout=t.removeMaybe(d.doubleTapTimeout),this._pointerState.delete(l),this.refreshHasPendingInputs())};a._createDoubleTapDragData=function(l,d,n){const {button:f,buttons:v,pointer:w,pointers:D,pointerType:x,timestamp:c}=n;return{action:l,delta:d,button:f,buttons:v,pointer:w,pointers:D,pointerType:x,timestamp:c}};a._dragStart=function(l,d){if(this._doubleTapDragReady&&
1===l){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:n,modifiers:f}=d;({center:l}=n);this._dragStartCenter=l;l=this._createDoubleTapDragData("begin",A.createScreenPoint(0,0),n);this._doubleTapDrag.emit(l,void 0,f);d.stopPropagation()}};a._dragUpdate=function(l){if(this._doubleTapDragActive){var {data:d,modifiers:n}=l,{center:f}=d;f=A.createScreenPoint(f.x-this._dragStartCenter.x,f.y-this._dragStartCenter.y);f=this._createDoubleTapDragData("update",f,d);this._doubleTapDrag.emit(f,
void 0,n);l.stopPropagation()}};a._dragEnd=function(l){if(this._doubleTapDragActive){var {data:d,modifiers:n}=l,{center:f}=d;f=A.createScreenPoint(f.x-this._dragStartCenter.x,f.y-this._dragStartCenter.y);f=this._createDoubleTapDragData("end",f,d);this._doubleTapDrag.emit(f,void 0,n);this._doubleTapDragActive=!1;l.stopPropagation()}};a._handlePointerDown=function(l){const {data:d}=l,n=u.getPointerId(d),f=this._pointerState.get(n);var {pointerType:v}=d.native;f?(v="touch"===v?this._maximumDoubleTouchDistance:
this._maximumDoubleClickDistance,this._clearPointerDown(n),u.manhattanDistance(f.event.data,d)>v?this._storePointerDown(l):this._doubleTapDragReady=!0):this._storePointerDown(l)};a._handlePointerUp=function(){this._doubleTapDragReady=!1};a._storePointerDown=function(l){var {data:d}=l;const {pointerType:n}=d.native,f=u.getPointerId(d);d=this._clock.setTimeout(()=>this._clearPointerDown(f),"touch"===n?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(f,{event:l,doubleTapTimeout:d});
this.refreshHasPendingInputs()};q._createClass(b,[{key:"hasPendingInputs",get:function(){return h.someMap(this._pointerState,l=>null!=l.doubleTapTimeout)}}]);return b}(z.InputHandler);m.DoubleTapDrag=z;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),function(m,q,
k,h,t,A,B){const z={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};A=function(F){function u(b=z.maximumDoubleClickDelay,a=z.maximumDoubleClickDistance,l=z.maximumDoubleTouchDelay,d=z.maximumDoubleTouchDistance,n=k.clock){var f=F.call(this,!1)||this;f._maximumDoubleClickDelay=b;f._maximumDoubleClickDistance=a;f._maximumDoubleTouchDelay=l;f._maximumDoubleTouchDistance=d;f._clock=n;f._pointerState=new Map;f._click=f.registerOutgoing("click");
f._doubleClick=f.registerOutgoing("double-click");f.registerIncoming("immediate-click",f._handleImmediateClick.bind(q._assertThisInitialized(f)));f.registerIncoming("pointer-down",f._handlePointerDown.bind(q._assertThisInitialized(f)));return f}q._inheritsLoose(u,F);var g=u.prototype;g.onUninstall=function(){this._pointerState.forEach(b=>b.doubleClickTimer=t.removeMaybe(b.doubleClickTimer))};g._clearDoubleClickTimer=function(b,a){const l=this._pointerState.get(b);l&&(l.doubleClickTimer=t.removeMaybe(l.doubleClickTimer),
a&&this._click.emit(l.event.data,void 0,l.event.modifiers),this._pointerState.delete(b),this.refreshHasPendingInputs())};g._doubleClickTimeoutExceeded=function(b){const a=this._pointerState.get(b);1===a.pointerDownCount&&this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimer=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};g._getPointerId=function(b){const {pointerId:a,pointerType:l,button:d}=b.native;return"mouse"===l?`${a}:${d}`:`${l}`};g._handleImmediateClick=
function(b){const a=b.data;var {pointerType:l}=a.native;const d=this._getPointerId(a);if(this._pointerState.has(d)){var n=this._pointerState.get(d),{data:f,modifiers:v}=n.event;l="touch"===l?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;B.manhattanDistance(f,a)>l?(this._clearDoubleClickTimer(d,!0),this._startClick(b)):(this._clearDoubleClickTimer(d,!1),2===n.pointerDownCount&&this._doubleClick.emit(f,void 0,v))}else this._startClick(b)};g._handlePointerDown=function(b){b=B.getPointerId(b.data);
if(b=this._pointerState.get(b))b.pointerDownCount+=1};g._startClick=function(b){var {data:a}=b;const {native:{pointerType:l}}=a,d=B.getPointerId(a);a=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(d),"touch"===l?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(d,{event:b,doubleClickTimer:a,pointerDownCount:1});this.refreshHasPendingInputs()};q._createClass(u,[{key:"hasPendingInputs",get:function(){return h.someMap(this._pointerState,b=>null!=b.doubleClickTimer)}}]);
return u}(A.InputHandler);m.DefaultParameters=z;m.SingleAndDoubleClick=A;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(m,q){m.euclideanDistance=function(k,h){const t=h.x-k.x;k=h.y-k.y;return Math.sqrt(t*t+k*k)};m.fitCircleLSQ=function(k,h){h?(h.radius=0,h.center.x=0,h.center.y=0):h={radius:0,center:q.createScreenPoint()};if(0===k.length)return h;if(1===k.length)return h.center.x=
k[0].x,h.center.y=k[0].y,h;if(2===k.length){const [n,f]=k,[v,w]=[f.x-n.x,f.y-n.y];h.radius=Math.sqrt(v*v+w*w)/2;h.center.x=(n.x+f.x)/2;h.center.y=(n.y+f.y)/2;return h}let t=0,A=0;for(h=0;h<k.length;h++)t+=k[h].x,A+=k[h].y;t/=k.length;A/=k.length;var B=k.map(n=>n.x-t),z=k.map(n=>n.y-A);let F=h=0;var u=0,g=0,b=0,a=0,l=0;for(var d=0;d<B.length;d++){const n=B[d],f=z[d],v=n*n,w=f*f;h+=v;F+=w;u+=n*f;g+=v*n;b+=w*f;a+=n*w;l+=f*v}B=h;z=u;d=F;g=.5*(g+a);b=.5*(b+l);l=B*d-u*z;a=(g*d-b*z)/l;b=(B*b-u*g)/l;l=q.createScreenPoint(a+
t,b+A);return{radius:Math.sqrt(a*a+b*b+(h+F)/k.length),center:l}};m.getPointerId=function(k){({native:k}=k);const {pointerId:h,button:t,pointerType:A}=k;return"mouse"===A?`${h}:${t}`:`${A}`};m.manhattanDistance=function(k,h){return Math.abs(h.x-k.x)+Math.abs(h.y-k.y)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),
function(m,q,k,h,t,A){function B(g){const b=[];g.forEach(a=>{b.push(k.createScreenPoint(a.event.x,a.event.y))});return A.fitCircleLSQ(b)}function z(g){const b=B(g);let a=0;g.forEach(l=>{var d=u(l,b);for(d-=l.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=l.lastAngle+d;l.lastAngle=d;a+=d-l.initialAngle});a/=g.size||1;return{angle:a,radius:b.radius,center:b.center}}function F(g){const b=new Map;g.forEach((a,l)=>b.set(l,a.event));return b}function u(g,b){g=g.event;return Math.atan2(g.y-
b.center.y,g.x-b.center.x)}t=function(g){function b(l){var d=g.call(this,!1)||this;d._navigationTouch=l;d._startStateModifiers=new Set;d._activePointerMap=new Map;d._isDragging=!1;d._isCurrentDragSuppressed=!1;d._drag=d.registerOutgoing("drag");d.registerIncoming("pointer-drag",d._handlePointerDrag.bind(q._assertThisInitialized(d)));d.registerIncoming("pointer-up",d._handlePointerUpAndPointerLost.bind(q._assertThisInitialized(d)));d.registerIncoming("pointer-capture-lost",d._handlePointerUpAndPointerLost.bind(q._assertThisInitialized(d)));
d.registerIncoming("pointer-cancel",d._handlePointerUpAndPointerLost.bind(q._assertThisInitialized(d)));return d}q._inheritsLoose(b,g);var a=b.prototype;a._createPayload=function(l,d,n,f){return{action:l,pointerType:this._pointerType,button:this._mouseButton,buttons:d.buttons,timestamp:f,pointers:F(this._activePointerMap),pointer:d,angle:n.angle,radius:n.radius,center:n.center}};a._addPointer=function(l){var d=l.native.pointerId;const n=z(this._activePointerMap).angle;l={event:l,initialAngle:0,lastAngle:0};
this._activePointerMap.set(d,l);d=u(l,B(this._activePointerMap));l.initialAngle=d;l.lastAngle=d;this._updatePointerAngles(n)};a._updatePointer=function(l){if(!l||null!=l.x||null!=l.y){var d=this._activePointerMap.get(l.native.pointerId);d?d.event=l:this._addPointer(l)}};a._removePointer=function(l){const d=z(this._activePointerMap).angle;this._activePointerMap.delete(l);this._updatePointerAngles(d)};a._updatePointerAngles=function(l){const d=z(this._activePointerMap);this._activePointerMap.forEach(n=>
{n.initialAngle=u(n,d)-l;n.lastAngle=u(n,d)-l})};a._emitEvent=function(l,d,n){const f=z(this._activePointerMap);this._drag.emit(this._createPayload(l,d,f,n),void 0,this._startStateModifiers)};a._handlePointerUpAndPointerLost=function(l){const d=l.data.native.pointerId,n=h.Milliseconds(l.timestamp);this._activePointerMap.get(d)&&(1===this._activePointerMap.size?(this._updatePointer(l.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",l.data,n),this._isCurrentDragSuppressed=this._isDragging=
!1,this._removePointer(d)):(this._removePointer(d),this._emitEvent("removed",l.data,h.Milliseconds(l.timestamp))))};a._handlePointerDrag=function(l){const d=l.data,n=d.currentEvent,f=h.Milliseconds(l.timestamp);switch(d.action){case "start":case "update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,f)):(this._addPointer(n),this._emitEvent("added",n,f),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(n),this._pointerType=l.data.startEvent.pointerType,this._mouseButton=l.data.startEvent.button,this._startStateModifiers=l.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,f))}};q._createClass(b,[{key:"_isSuppressed",get:function(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}]);return b}(t.InputHandler);
m.Button=void 0;(function(g){g[g.Left=0]="Left";g[g.Middle=1]="Middle";g[g.Right=2]="Right";g[g.Back=3]="Back";g[g.Forward=4]="Forward";g[g.Undefined=-1]="Undefined"})(m.Button||(m.Button={}));m.Drag=t;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(m,q,k,h,t,A){h=function(B){function z(u=
t.DefaultParameters.maximumDoubleClickDelay,g=t.DefaultParameters.maximumDoubleClickDistance,b=t.DefaultParameters.maximumDoubleTouchDelay,a=t.DefaultParameters.maximumDoubleTouchDistance,l=k.clock){var d=B.call(this,!1)||this;d._maximumDoubleClickDelay=u;d._maximumDoubleClickDistance=g;d._maximumDoubleTouchDelay=b;d._maximumDoubleTouchDistance=a;d._clock=l;d._pointerState=new Map;d._immediateDoubleClick=d.registerOutgoing("immediate-double-click");d.registerIncoming("pointer-down",d._handlePointerDown.bind(q._assertThisInitialized(d)));
d.registerIncoming("pointer-up",d._handlePointerUp.bind(q._assertThisInitialized(d)));return d}q._inheritsLoose(z,B);var F=z.prototype;F.onUninstall=function(){this._pointerState.forEach(u=>{u.immediateDoubleClick&&u.immediateDoubleClick.timeoutHandle.remove()});B.prototype.onUninstall.call(this)};F._handlePointerDown=function(u){u=u.data;const g=A.getPointerId(u);this._pointerState.has(g)||(this._pointerState.set(g,{downButton:u.native.button,immediateDoubleClick:null}),this.startCapturingPointer(u.native))};
F._handlePointerUp=function(u){const g=u.data;var b=A.getPointerId(g);if((b=this._pointerState.get(b))&&b.downButton===g.native.button){const a=b.immediateDoubleClick;if(a){a.timeoutHandle.remove();const l="touch"===u.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;A.manhattanDistance(a,u.data)>l?this._startImmediateDoubleClick(u,b):(this._immediateDoubleClick.emit(u.data,void 0,a.modifiers),this._removeState(g))}else this._startImmediateDoubleClick(u,b)}};
F._startImmediateDoubleClick=function(u,g){g.immediateDoubleClick={x:u.data.x,y:u.data.y,modifiers:u.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(u.data),"touch"===u.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};F._removeState=function(u){const g=A.getPointerId(u);this._pointerState.delete(g);this.stopCapturingPointer(u.native);this.refreshHasPendingInputs()};return z}(h.InputHandler);m.ImmediateDoubleClick=h;Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/maybe ../InputHandler ./support".split(" "),function(m,q,k,h,t,A){const B={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};t=function(z){function F(g=B.maximumClickDelay,b=B.movementUntilMouseDrag,a=B.movementUntilPenDrag,l=B.movementUntilTouchDrag,
d=B.holdDelay,n=k.clock){var f=z.call(this,!1)||this;f._maximumClickDelay=g;f._movementUntilMouseDrag=b;f._movementUntilPenDrag=a;f._movementUntilTouchDrag=l;f._holdDelay=d;f._clock=n;f._pointerState=new Map;f._pointerDrag=f.registerOutgoing("pointer-drag");f._immediateClick=f.registerOutgoing("immediate-click");f._pointerHold=f.registerOutgoing("hold");f.registerIncoming("pointer-down",f._handlePointerDown.bind(q._assertThisInitialized(f)));f.registerIncoming("pointer-up",v=>{f._handlePointerLoss(v,
"pointer-up")});f.registerIncoming("pointer-capture-lost",v=>{f._handlePointerLoss(v,"pointer-capture-lost")});f.registerIncoming("pointer-cancel",v=>{f._handlePointerLoss(v,"pointer-cancel")});f._moveHandle=f.registerIncoming("pointer-move",f._handlePointerMove.bind(q._assertThisInitialized(f)));f._moveHandle.pause();return f}q._inheritsLoose(F,z);var u=F.prototype;u.onUninstall=function(){this._pointerState.forEach(g=>{g.holdTimeout=h.removeMaybe(g.holdTimeout)});z.prototype.onUninstall.call(this)};
u._handlePointerDown=function(g){const b=g.data,a=b.native.pointerId;var l=null;0===this._pointerState.size&&(l=this._clock.setTimeout(()=>{const d=this._pointerState.get(a);d&&(d.isDragging||(this._pointerHold.emit(d.previousEvent,void 0,g.modifiers),d.holdEmitted=!0),d.holdTimeout=null)},this._holdDelay));l={startEvent:b,previousEvent:b,startTimestamp:g.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:l,modifiers:new Set};this._pointerState.set(a,l);this.startCapturingPointer(b.native);
this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(g)};u._createPointerDragData=function(g,b,a){return{action:g,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};u._handlePointerMove=function(g){const b=g.data,a=this._pointerState.get(b.native.pointerId);if(a){if(a.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers);else{const l=A.euclideanDistance(b,a.startEvent),d=this._getDragThreshold(b.native.pointerType);
l>d&&this._startDragging(g)}a.previousEvent=b}};u._getDragThreshold=function(g){switch(g){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}};u._startDragging=function(g){const b=g.data,a=b.native.pointerId;this._pointerState.forEach(l=>{null!=l.holdTimeout&&(l.holdTimeout.remove(),l.holdTimeout=null);l.isDragging||(l.modifiers=g.modifiers,l.isDragging=!0,a===l.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",
l,b)):this._pointerDrag.emit(this._createPointerDragData("start",l,l.previousEvent),g.timestamp))})};u._handlePointerLoss=function(g,b){const a=g.data,l=a.native.pointerId,d=this._pointerState.get(l);d&&(null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,"pointer-up"===b?a:d.previousEvent),void 0,d.modifiers):"pointer-up"===b&&d.downButton===a.native.button&&g.timestamp-d.startTimestamp<=this._maximumClickDelay&&
!d.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(l),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return F}(t.InputHandler);m.DefaultParameters=B;m.PointerClickHoldAndDrag=t;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(m,q,k,h,t,A,B){const z={added:[],removed:[]},F=new Set,u=new B(0,0,0,0);return function(g){function b(l){var d=g.call(this)||this;d._tiles=new Map;d._index=h.rbush(9,k("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);d.tiles=[];d.tileScheme=l;return d}m._inheritsLoose(b,g);var a=b.prototype;a.destroy=function(){this.clear()};a.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};a.has=function(l){return this._tiles.has(l)};a.get=function(l){return this._tiles.get(l)};a.boundsIntersections=function(l){return this._index.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]})};a.updateTiles=function(l){const d={added:[],removed:[]};for(const n of l.added)if(!this.has(n)){const f=new t.Tile(this.tileScheme,n);this._tiles.set(n,f);this._index.insert(f);d.added.push(f)}for(const n of l.removed)this.has(n)&&(l=this.get(n),this._tiles.delete(n),this._index.remove(l),
d.removed.push(l));this.tiles.length=0;this._tiles.forEach(n=>this.tiles.push(n));(d.added.length||d.removed.length)&&this.emit("update",d)};a.setViewState=function(l){if(l=this.tileScheme.getTileCoverage(l,0)){var {spans:d,lodInfo:n}=l,{level:f}=n;if(0<d.length)for(const {row:w,colFrom:D,colTo:x}of d)for(var v=D;v<=x;v++){const c=u.set(f,w,n.normalizeCol(v),n.getWorldForColumn(v)).id;F.add(c);if(!this.has(c)){const e=new t.Tile(this.tileScheme,c);this._tiles.set(c,e);this._index.insert(e);this.tiles.push(e);
z.added.push(e)}}for(f=this.tiles.length-1;0<=f;f--)v=this.tiles[f],F.has(v.id)||(this._tiles.delete(v.id),this.tiles.splice(f,1),this._index.remove(v),z.removed.push(v));(z.added.length||z.removed.length)&&this.emit("update",z);A.pool.release(l);F.clear();z.added.length=0;z.removed.length=0}};return b}(q)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(m,q){function k(d,n){if(!(this instanceof k))return new k(d,n);this._maxEntries=Math.max(4,d||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));n&&("function"===typeof n?this.toBBox=n:this._initFormat(n));this.clear()}function h(d,n){t(d,0,d.children.length,n,d)}function t(d,n,f,v,w){w||(w=a(null));w.minX=Infinity;w.minY=Infinity;w.maxX=-Infinity;w.maxY=-Infinity;for(var D;n<f;n++)D=d.children[n],A(w,d.leaf?v(D):D);return w}function A(d,n){d.minX=Math.min(d.minX,n.minX);d.minY=Math.min(d.minY,n.minY);d.maxX=Math.max(d.maxX,n.maxX);d.maxY=Math.max(d.maxY,n.maxY);return d}function B(d,n){return d.minX-n.minX}
function z(d,n){return d.minY-n.minY}function F(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function u(d){return d.maxX-d.minX+(d.maxY-d.minY)}function g(d,n){return d.minX<=n.minX&&d.minY<=n.minY&&n.maxX<=d.maxX&&n.maxY<=d.maxY}function b(d,n){return n.minX<=d.maxX&&n.minY<=d.maxY&&n.maxX>=d.minX&&n.maxY>=d.minY}function a(d){return{children:d,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function l(d,n,f,v,w){for(var D=[n,f],x;D.length;)f=D.pop(),n=D.pop(),f-n<=v||(x=
n+Math.ceil((f-n)/v/2)*v,q.quickselect(d,x,n,f,w),D.push(n,x,x,f))}k.prototype={all:function(){return this._all(this.data,[])},search:function(d){var n=this.data,f=[],v=this.toBBox;if(!b(d,n))return f;for(var w=[],D,x,c,e;n;){D=0;for(x=n.children.length;D<x;D++)c=n.children[D],e=n.leaf?v(c):c,b(d,e)&&(n.leaf?f.push(c):g(d,e)?this._all(c,f):w.push(c));n=w.pop()}return f},collides:function(d){var n=this.data,f=this.toBBox;if(!b(d,n))return!1;for(var v=[],w,D,x,c;n;){w=0;for(D=n.children.length;w<D;w++)if(x=
n.children[w],c=n.leaf?f(x):x,b(d,c)){if(n.leaf||g(d,c))return!0;v.push(x)}n=v.pop()}return!1},load:function(d){if(!d||!d.length)return this;if(d.length<this._minEntries){for(var n=0,f=d.length;n<f;n++)this.insert(d[n]);return this}d=this._build(d.slice(),0,d.length-1,0);this.data.children.length?this.data.height===d.height?this._splitRoot(this.data,d):(this.data.height<d.height&&(n=this.data,this.data=d,d=n),this._insert(d,this.data.height-d.height-1,!0)):this.data=d;return this},insert:function(d){d&&
this._insert(d,this.data.height-1);return this},clear:function(){this.data=a([]);return this},remove:function(d,n){if(!d)return this;for(var f=this.data,v=this.toBBox(d),w=[],D=[],x,c,e,p;f||w.length;){f||(f=w.pop(),c=w[w.length-1],x=D.pop(),p=!0);if(f.leaf){a:{e=d;var C=f.children,L=n;if(L){for(var O=0;O<C.length;O++)if(L(e,C[O])){e=O;break a}e=-1}else e=C.indexOf(e)}if(-1!==e){f.children.splice(e,1);w.push(f);this._condense(w);break}}p||f.leaf||!g(f,v)?c?(x++,f=c.children[x],p=!1):f=null:(w.push(f),
D.push(x),x=0,c=f,f=f.children[0])}return this},toBBox:function(d){return d},compareMinX:B,compareMinY:z,toJSON:function(){return this.data},fromJSON:function(d){this.data=d;return this},_all:function(d,n){for(var f=[];d;)d.leaf?n.push.apply(n,d.children):f.push.apply(f,d.children),d=f.pop();return n},_build:function(d,n,f,v){var w=f-n+1,D=this._maxEntries;if(w<=D){var x=a(d.slice(n,f+1));h(x,this.toBBox);return x}v||(v=Math.ceil(Math.log(w)/Math.log(D)),D=Math.ceil(w/Math.pow(D,v-1)));x=a([]);x.leaf=
!1;x.height=v;w=Math.ceil(w/D);D=w*Math.ceil(Math.sqrt(D));var c;for(l(d,n,f,D,this.compareMinX);n<=f;n+=D){var e=Math.min(n+D-1,f);l(d,n,e,w,this.compareMinY);for(c=n;c<=e;c+=w){var p=Math.min(c+w-1,e);x.children.push(this._build(d,c,p,v-1))}}h(x,this.toBBox);return x},_chooseSubtree:function(d,n,f,v){for(var w,D,x,c,e,p,C,L;;){v.push(n);if(n.leaf||v.length-1===f)break;C=L=Infinity;w=0;for(D=n.children.length;w<D;w++)x=n.children[w],e=F(x),p=(Math.max(x.maxX,d.maxX)-Math.min(x.minX,d.minX))*(Math.max(x.maxY,
d.maxY)-Math.min(x.minY,d.minY))-e,p<L?(L=p,C=e<C?e:C,c=x):p===L&&e<C&&(C=e,c=x);n=c||n.children[0]}return n},_insert:function(d,n,f){var v=this.toBBox;f=f?d:v(d);v=[];var w=this._chooseSubtree(f,this.data,n,v);w.children.push(d);for(A(w,f);0<=n;)if(v[n].children.length>this._maxEntries)this._split(v,n),n--;else break;this._adjustParentBBoxes(f,v,n)},_split:function(d,n){var f=d[n],v=f.children.length,w=this._minEntries;this._chooseSplitAxis(f,w,v);v=this._chooseSplitIndex(f,w,v);v=a(f.children.splice(v,
f.children.length-v));v.height=f.height;v.leaf=f.leaf;h(f,this.toBBox);h(v,this.toBBox);n?d[n-1].children.push(v):this._splitRoot(f,v)},_splitRoot:function(d,n){this.data=a([d,n]);this.data.height=d.height+1;this.data.leaf=!1;h(this.data,this.toBBox)},_chooseSplitIndex:function(d,n,f){var v,w;var D=w=Infinity;for(v=n;v<=f-n;v++){var x=t(d,0,v,this.toBBox);var c=t(d,v,f,this.toBBox);var e=Math.max(0,Math.min(x.maxX,c.maxX)-Math.max(x.minX,c.minX))*Math.max(0,Math.min(x.maxY,c.maxY)-Math.max(x.minY,
c.minY));x=F(x)+F(c);if(e<D){D=e;var p=v;w=x<w?x:w}else e===D&&x<w&&(w=x,p=v)}return p},_chooseSplitAxis:function(d,n,f){var v=d.leaf?this.compareMinX:B,w=d.leaf?this.compareMinY:z,D=this._allDistMargin(d,n,f,v);n=this._allDistMargin(d,n,f,w);D<n&&d.children.sort(v)},_allDistMargin:function(d,n,f,v){d.children.sort(v);v=this.toBBox;var w=t(d,0,n,v),D=t(d,f-n,f,v),x=u(w)+u(D),c;for(c=n;c<f-n;c++){var e=d.children[c];A(w,d.leaf?v(e):e);x+=u(w)}for(c=f-n-1;c>=n;c--)e=d.children[c],A(D,d.leaf?v(e):e),
x+=u(D);return x},_adjustParentBBoxes:function(d,n,f){for(;0<=f;f--)A(n[f],d)},_condense:function(d){for(var n=d.length-1,f;0<=n;n--)0===d[n].children.length?0<n?(f=d[n-1].children,f.splice(f.indexOf(d[n]),1)):this.clear():h(d[n],this.toBBox)},_initFormat:function(d){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(d[0]));this.compareMinY=new Function("a","b",n.join(d[1]));this.toBBox=new Function("a","return {minX: a"+d[0]+", minY: a"+d[1]+", maxX: a"+d[2]+", maxY: a"+d[3]+
"};")}};m.rbush=k})},"esri/chunks/quickselect":function(){define(["exports"],function(m){var q={};(function(k){(function(h){h=h();void 0!==h&&(k.exports=h)})(function(){function h(B,z,F,u,g){for(;u>F;){if(600<u-F){var b=u-F+1,a=z-F+1,l=Math.log(b),d=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*d*(b-d)/b)*(0>a-b/2?-1:1);h(B,z,Math.max(F,Math.floor(z-a*d/b+l)),Math.min(u,Math.floor(z+(b-a)*d/b+l)),g)}b=B[z];a=F;d=u;t(B,F,z);for(0<g(B[u],b)&&t(B,F,u);a<d;){t(B,a,d);a++;for(d--;0>g(B[a],b);)a++;for(;0<g(B[d],
b);)d--}0===g(B[F],b)?t(B,F,d):(d++,t(B,d,u));d<=z&&(F=d+1);z<=d&&(u=d-1)}}function t(B,z,F){var u=B[z];B[z]=B[F];B[F]=u}function A(B,z){return B<z?-1:B>z?1:0}return function(B,z,F,u,g){h(B,z,F||0,u||B.length-1,g||A)}})})({get exports(){return q},set exports(k){q=k}});m.quickselect=q})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(m,q,k,h,t,A,B){let z=function(){function F(g,b){this.key=new B(0,0,0,0);this.bounds=t.create();this.objectIds=new Set;this.key.set(b);b=g.getLODInfoAt(this.key);this.tileInfoView=g;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=b.resolution;this.scale=b.scale;this.level=b.level}var u=F.prototype;u.createChildTiles=function(){const g=this.key.getChildKeys(),b=k.acquire();for(let a=0;a<g.length;a++)b[a]=new F(this.tileInfoView,g[a]);return b};u.getQuantizationParameters=
function(){return A.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};q._createClass(F,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return h.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return F}();m.Tile=z;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(m,
q,k,h,t,A,B,z){h=function(F){function u(){var g=F.apply(this,arguments)||this;g.color=new k([0,255,255]);g.haloOpacity=1;g.fillOpacity=.25;return g}m._inheritsLoose(u,F);u.prototype.equals=function(g){return this.color.equals(g.color)&&(this.haloColor||this.color).equals(g.haloColor||g.color)&&this.haloOpacity===g.haloOpacity&&this.fillOpacity===g.fillOpacity};return u}(h);q.__decorate([t.property({type:k})],h.prototype,"color",void 0);q.__decorate([t.property({type:k})],h.prototype,"haloColor",void 0);
q.__decorate([t.property()],h.prototype,"haloOpacity",void 0);q.__decorate([t.property()],h.prototype,"fillOpacity",void 0);return h=q.__decorate([z.subclass("esri.views.2d.support.HighlightOptions")],h)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(m){let q=function(){function k(){this._names=new Map}var h=k.prototype;h.begin=function(t){this._names.has(t)||(this._names.set(t,!1),t.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))};
h.end=function(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))};h.record=function(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))};return k}();m.Timeline=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(m,q,k,h,t,A,B,z){m.ignorePadding&&(h={left:0,right:0,top:0,bottom:0});var F=null;null!=m.width&&null!=m.height?
F=[m.width,m.height]:null==m.width&&null!=m.height?F=[m.height,m.height]:null!=m.width&&null==m.height?F=[m.width,m.width]:null==m.width&&null==m.height&&(F=null);var u=k[0]-(h.left+h.right);k=k[1]-(h.top+h.bottom);m=m.area||{x:0,y:0,width:u,height:k};if(F){const g=F[0]/F[1];g>u/k?(u=m.width/g,m={x:m.x,y:Math.round(m.y+(m.height-u)/2),width:m.width,height:Math.round(u)}):(u=m.height*g,m={x:Math.round(m.x+(m.width-u)/2),y:m.y,width:Math.round(u),height:m.height})}else F=[m.width,m.height];F[0]>m.width?
(q=Math.min(F[0]/m.width,q),F=F[0]/m.width/q):(q=1,F=F[0]/m.width);return{resolutionScale:q,cropArea:{x:Math.round((m.x+h.left)*q),y:Math.round((m.y+h.top)*q),width:Math.round(m.width*q),height:Math.round(m.height*q)},outputScale:F,format:t,quality:A,children:B,rotation:z}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../../core/imageUtils"],function(m,q,k,h,t){function A(f,v){const {format:w,quality:D,rotation:x,
disableDecorations:c}=f||{};var e=g(f,v.padding);var p=v.width-e.left-e.right;v=v.height-e.top-e.bottom;e={x:0,y:0,width:p,height:v};if(f&&f.area){null!=f.area.x&&(e.x=Math.floor(f.area.x));null!=f.area.y&&(e.y=Math.floor(f.area.y));var C=null!=f.area.width?Math.floor(f.area.width):null,L=null!=f.area.height?Math.floor(f.area.height):null;e.width=p-e.x;e.height=v-e.y;null!=C&&null!=L?(e.width=Math.min(e.width,C),e.height=Math.min(e.height,L)):null==C&&null!=L?(C=Math.min(e.width,C),e.height*=C/e.width,
e.width=C):null!=C&&null==L&&(C=Math.min(e.height,L),e.width*=C/e.height,e.height=C)}e=u(e,f);C=Math.floor(Math.max(e.x,0));L=Math.floor(Math.max(e.y,0));p={x:C,y:L,width:Math.floor(Math.min(e.width,p-C)),height:Math.floor(Math.min(e.height,v-L))};v=p.width/p.height;e=e.width/e.height;e!==v&&(e>v?(v=Math.floor(p.width/e),p={x:p.x,y:Math.floor(p.y+(p.height-v)/2),width:p.width,height:v}):(v=Math.floor(p.height*e),p={x:Math.floor(p.x+(p.width-v)/2),y:p.y,width:v,height:p.height}));const {width:O,height:K}=
F(f,p);v=b(w);e=d[v];e=k.clamp(null!=D?D:e,0,100);return{format:v,quality:e,area:p,width:O,height:K,rotation:x,disableDecorations:!!c,ignoreBackground:!(!f||!f.ignoreBackground),ignorePadding:!(!f||!f.ignorePadding)}}function B(f,v){h.isNone(a)&&(a=document.createElement("canvas"));var w=a;if(v.premultipliedAlpha){var D=f.data;const c=D.length;for(let e=0;e<c;e+=4){var x=D[e+3];255!==x&&0<x&&(x=255/x,D[e+0]*=x,D[e+1]*=x,D[e+2]*=x)}}w.width=f.width;w.height=f.height;D=w.getContext("2d",{willReadFrequently:!0});
D.putImageData(f,0,0);v.flipY&&(D.save(),D.globalCompositeOperation="copy",D.scale(1,-1),D.translate(0,-D.canvas.height),D.drawImage(D.canvas,0,0),D.restore());return{ctx:D,canvas:w}}function z(f,v){return f.toDataURL(l[v.format],v.quality/100)}function F(f,v){if(!f)return v;const w=f.width;f=f.height;if(null!=w&&null!=f)return{width:Math.floor(w),height:Math.floor(f)};if(null==w&&null==f)return v;v=v.width/v.height;return null==f?{width:Math.floor(w),height:Math.floor(w/v)}:{width:Math.floor(f*v),
height:Math.floor(f)}}function u(f,v){if(!v||null==v.width||null==v.height)return f;v=v.width/v.height;const w=f.width/f.height;if(w===v)return f;if(w<v)return v=Math.floor(f.height*v),f.x-=(v-f.width)/2,f.width=v,f;v=Math.floor(f.width/v);f.y-=(v-f.height)/2;f.height=v;return f}function g(f,v){return!v||f&&f.ignorePadding?n:v}function b(f){switch(f){case "png":case "jpg":case "jpeg":return f;case null:case void 0:return"png";default:return"png"}}let a=null;const l={png:"image/png",jpg:"image/jpeg",
jpeg:"image/jpeg"},d={png:100,jpg:98,jpeg:98},n={top:0,right:0,bottom:0,left:0};m.createEmptyImageData=t.createEmptyImageData;m.completeUserSettings=A;m.encode=function(f,v,w){const {ctx:D,canvas:x}=B(f,w);f=D.getImageData(0,0,f.width,f.height);v=z(x,v);x.width=0;x.height=0;return{dataUrl:v,data:f}};m.encodeData=function(f,v){const {ctx:w,canvas:D}=B(f,v);f=w.getImageData(0,0,f.width,f.height);D.width=0;D.height=0;return f};m.getFormatAndQuality=function(f,v){f=b(f);const w=d[f];v=k.clamp(null!=v?
v:w,0,100);return{format:f,quality:v}};m.getMaximumResolutionScale=function(f,v){return v/Math.max(f[0],f[1])};m.resampleHermite=function(f,v,w,D=0,x=0,c=f.width-D,e=f.height-x,p=!1){const {data:C}=f,{width:L,height:O,data:K}=v;c/=L;e/=O;const U=Math.ceil(c/2),T=Math.ceil(e/2);f=f.width;for(let V=0;V<O;V++)for(let H=0;H<L;H++){const y=4*(H+(p?O-V-1:V)*L);let E=0,I=0,r=0,G=0,J=0,N=0;const R=(V+.5)*e;for(let W=Math.floor(V*e);W<(V+1)*e;W++){var M=Math.abs(R-(W+.5))/T;const da=(H+.5)*c;M*=M;for(let ea=
Math.floor(H*c);ea<(H+1)*c;ea++){var P=Math.abs(da-(ea+.5))/U;P=Math.sqrt(M+P*P);if(1<=P)continue;P=2*P*P*P-3*P*P+1;const fa=4*(D+ea+(x+W)*f);N+=P*C[fa+3];I+=P;!w&&255>C[fa+3]&&(P=P*C[fa+3]/255);r+=P*C[fa];G+=P*C[fa+1];J+=P*C[fa+2];E+=P}}K[y]=r/E;K[y+1]=G/E;K[y+2]=J/E;K[y+3]=N/I}return v};m.screenshotSuperSampleSettings=function(f,v,w){if(!v)return f;const {framebufferWidth:D,framebufferHeight:x,pixelRatio:c,region:e}=f;v=g(f,w);w=v.left+v.right;const p=v.top+v.bottom,C=D-w,L=x-p,O=Math.min(8,Math.min((2048-
w)/C,(2048-p)/L));return 1.5>O?f:{...f,framebufferWidth:Math.round(C*O)+w,framebufferHeight:Math.round(L*O)+p,pixelRatio:c*O,resample:{region:{x:Math.round((e.x-v.left)*O)+v.left,y:Math.round((e.y-v.top)*O)+v.top,width:Math.round(e.width*O),height:Math.round(e.height*O)},width:D,height:x}}};m.toDataUrl=z;m.toRenderSettings=function(f,v){const w=A(f,v),D=w.area,x=w.width/D.width,c=g(w,v.padding),e=c.left+c.right,p=c.top+c.bottom;return{framebufferWidth:Math.floor((v.width-e)*x+e),framebufferHeight:Math.floor((v.height-
p)*x+p),region:{x:Math.floor(D.x*x)+c.left,y:Math.floor(D.y*x)+c.top,width:w.width,height:w.height},format:w.format,quality:w.quality,rotation:w.rotation,pixelRatio:x,layers:f&&f.layers?f.layers:[],disableDecorations:w.disableDecorations,ignoreBackground:w.ignoreBackground,ignorePadding:w.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define(["exports"],function(m){function q(t,A,B){B||(k||(k=document.createElement("canvas"),
k.width=1,k.height=1),B=k);return B.getContext("2d").createImageData(t,A)}let k=null,h=!0;m.createEmptyImageData=function(t,A,B){if(!t||!A)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(t,A)}catch(z){h=!1}return q(t,A,B)};m.wrapImageData=function(t,A,B,z){if(!A||!B)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(t,A,B)}catch(F){h=!1}A=q(A,B,z);A.data.set(t,0);return A};Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(m,q,k,h){m.check=function(t){const A=k.getWebGLCapabilities(t);if(!A.available)return new q("webgl:required","WebGL is required but not supported.");if("3d"===t&&A.majorPerformanceCaveat)return new q("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");
if(!A.supportsHighPrecisionFragment)return new q("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!A.supportsVertexShaderSamplers)return new q("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(A.type===h.ContextType.WEBGL1){if(!A.supportsElementIndexUint)return new q("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");
if(!A.supportsStandardDerivatives)return new q("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!A.supportsInstancedArrays)return new q("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe",
"./context-util"],function(m,q,k,h){function t(l){switch(l){case h.ContextType.WEBGL1:return A();case h.ContextType.WEBGL2:return B()}}function A(){if(!F){{const l=new b,d=z(h.ContextType.WEBGL1,l);k.isNone(d)||(l.supportsElementIndexUint=null!==d.getExtension("OES_element_index_uint"),l.supportsStandardDerivatives=null!==d.getExtension("OES_standard_derivatives"),l.supportsInstancedArrays=null!==d.getExtension("ANGLE_instanced_arrays"),l.supportsTextureFloat=null!==d.getExtension("OES_texture_float"),
l.supportsTextureHalfFloat=null!==d.getExtension("OES_texture_half_float"),l.supportsColorBufferFloat=null!==d.getExtension("WEBGL_color_buffer_float"),l.supportsColorBufferFloatBlend=null!==d.getExtension("EXT_float_blend"),l.supportsColorBufferHalfFloat=null!==d.getExtension("EXT_color_buffer_half_float"));F=l}}return F}function B(){if(!u){{const l=new a,d=z(h.ContextType.WEBGL2,l);k.isNone(d)||(l.supportsColorBufferFloat=null!==d.getExtension("EXT_color_buffer_float"),l.supportsColorBufferFloatBlend=
null!==d.getExtension("EXT_float_blend"),l.supportsColorBufferHalfFloat=l.supportsColorBufferFloat||null!==d.getExtension("EXT_color_buffer_half_float"));u=l}}return u}function z(l,d){if(l===h.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||l===h.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const n=document.createElement("canvas");if(!n)return null;let f=h.createContext(n,l,{failIfMajorPerformanceCaveat:!0});k.isNone(f)&&(f=h.createContext(n,l),k.isSome(f)&&
(d.majorPerformanceCaveat=!0));if(k.isNone(f))return f;if(l===h.ContextType.WEBGL1){if(l=f.getParameter(f.VERSION)?.match(/^WebGL\s+([\d.]*)/))l=parseFloat(l[1]),d.available=.94<=l}else d.available=!0;d.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE);d.supportsVertexShaderSamplers=0<f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(l=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT))d.supportsHighPrecisionFragment=0<l.precision;return f}let F,u,g=function(){this.majorPerformanceCaveat=
this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},b=function(l){function d(){var n=l.apply(this,arguments)||this;n.type=h.ContextType.WEBGL1;return n}q._inheritsLoose(d,l);return d}(g),a=function(l){function d(){var n=
l.apply(this,arguments)||this;n.type=h.ContextType.WEBGL2;n.supportsElementIndexUint=!0;n.supportsStandardDerivatives=!0;n.supportsInstancedArrays=!0;n.supportsTextureFloat=!0;n.supportsTextureHalfFloat=!0;return n}q._inheritsLoose(d,l);return d}(g);m.getWebGL1Capabilities=A;m.getWebGL2Capabilities=B;m.getWebGLCapabilities=function(l){for(l=h.getContextTypes(l);1<l.length;){const d=t(l.shift());if(d.available)return d}return t(l.shift())};m.getWebGLVersionCapabilities=t;Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(m,q,k){function h(z){const F=q("esri-force-webgl");if(F===m.ContextType.WEBGL1||F===m.ContextType.WEBGL2)return[F];switch(z){case "2d":return q("mac")&&q("chrome")?[m.ContextType.WEBGL1,m.ContextType.WEBGL2]:[m.ContextType.WEBGL2,m.ContextType.WEBGL1];case "3d":return[m.ContextType.WEBGL2,m.ContextType.WEBGL1]}}function t(z,F,u={}){if(!window.WebGLRenderingContext)return B(z,
'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;F=A(z,F,u);k.isNone(F)&&B(z,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return F}function A(z,F,u={}){F=F===m.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let g=null;for(const b of F){try{g=
z.getContext(b,u)}catch(a){}if(g)break}return g}function B(z,F){(z=z.parentNode)&&(z.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+F+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}m.ContextType=void 0;(function(z){z[z.WEBGL1=1]="WEBGL1";z[z.WEBGL2=2]="WEBGL2"})(m.ContextType||(m.ContextType={}));m.createContext=A;
m.createContextOrErrorHTML=function(z,F,u={}){for(z=h(z);1<z.length;){const g=A(F,z.shift(),u);if(k.isSome(g))return g}return t(F,z.shift(),u)};m.getContextTypes=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(m,q,k,h,t,A,B){h=function(z){function F(u){u=z.call(this,u)||this;u.components=["attribution","zoom"];return u}m._inheritsLoose(F,z);return F}(B);q.__decorate([k.property()],h.prototype,"components",void 0);return h=q.__decorate([A.subclass("esri.views.ui.2d.DefaultUI2D")],h)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l,d){k=function(n){function f(w){w=n.call(this,w)||this;w._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};w.components=[];return w}m._inheritsLoose(f,n);var v=f.prototype;v.initialize=function(){this.addHandles([t.watch(()=>this.components,this._componentsWatcher.bind(this),t.initial),t.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),t.initial)])};v._add=function(w,D,x,c){let e=w;if("string"===
typeof w&&this._defaultPositionLookup[w]){if(this._find(w))return;e=this._createComponent(w)}n.prototype._add.call(this,e,D,x,c)};v._removeComponents=function(w){w.forEach(D=>{if(D=this._find(D))this.remove(D),D.destroy()})};v._updateViewAwareWidgets=function(w){this.components.forEach(D=>{(D=(D=this._find(D))&&D.widget)&&void 0!==D.view&&(D.view=w)})};v._componentsWatcher=function(w,D){this._removeComponents(D);this._addComponents(w);this._adjustPadding(w)};v._adjustPadding=function(w){w.includes("attribution")||
this._isOverridden("padding")||({top:w}=this.padding,this.padding=w)};v._addComponents=function(w){this.constructed&&w.forEach(D=>this.add(this._createComponent(D),this._defaultPositionLookup[D]))};v._createComponent=function(w){const D=this._createWidget(w);if(D)return new u({id:w,node:D})};v._createWidget=function(w){if("attribution"===w)return this._createAttribution();if("compass"===w)return this._createCompass();if("navigation-toggle"===w)return this._createNavigationToggle();if("zoom"===w)return this._createZoom()};
v._createAttribution=function(){return new b({view:this.view})};v._createCompass=function(){return new a({view:this.view})};v._createNavigationToggle=function(){return new l({view:this.view})};v._createZoom=function(){return new d({view:this.view})};return f}(g);q.__decorate([A.property()],k.prototype,"components",void 0);return k=q.__decorate([F.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z){k=function(F){function u(){var b=F.apply(this,arguments)||this;b.widget=null;return b}m._inheritsLoose(u,F);var g=u.prototype;g.destroy=function(){this.widget&&this.widget.destroy();this.node=null};g.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),h.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};
m._createClass(u,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(b){const a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),this._set("node",b))}}]);return u}(k);q.__decorate([t.property({dependsOn:[]})],k.prototype,"id",null);q.__decorate([t.property()],k.prototype,"node",null);q.__decorate([A.cast("node")],k.prototype,"castNode",null);q.__decorate([t.property({readOnly:!0})],k.prototype,
"widget",void 0);return k=q.__decorate([z.subclass("esri.views.ui.Component")],k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){function d(w){const D="object"===typeof w&&null!==w&&Object.getPrototypeOf(w);return null!==D&&D!==Object.prototype||!("component"in w||"index"in w||"position"in w)?null:w}function n(w,{top:D,bottom:x,left:c,right:e}){w.style.top=D;w.style.bottom=x;w.style.left=c;w.style.right=e}const f={left:0,top:0,bottom:0,right:0},v={bottom:30,top:15,right:15,left:15};k=function(w){function D(c){var e=w.call(this,c)||this;e._cornerNameToContainerLookup={};e._positionNameToContainerLookup=
{};e._components=[];e._componentToKey=new Map;e._locale=l.getLocale();e.view=null;e._applyViewPadding=()=>{const p=e.container;p&&n(p,e._toPxPosition(e._getViewPadding()))};e._applyUIPadding=()=>{const p=e._innerContainer;p&&n(p,e._toPxPosition(e.padding))};e._initContainers();return e}m._inheritsLoose(D,w);var x=D.prototype;x.initialize=function(){this.addHandles([A.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,A.initial),A.watch(()=>this.padding,this._applyUIPadding,A.initial),
A.watch(()=>[this.container,this._locale],([c,e])=>{c&&c.setAttribute("lang",e)},A.initial),l.onLocaleChange(c=>{this._locale=c})])};x.destroy=function(){this.container=null;for(const c of this._components)c.destroy();this._components.length=0;this._componentToKey.clear()};x.castPadding=function(c){return"number"===typeof c?{bottom:c,top:c,right:c,left:c}:{...v,...c}};x.add=function(c,e){let p,C;if(Array.isArray(c))c.forEach(O=>this.add(O,e));else{var L=d(c);L&&({index:p,position:e,component:c,key:C}=
L);e&&"object"===typeof e&&({index:p,key:C,position:e}=e);!c||e&&!this._isValidPosition(e)||this._add(c,e,p,C)}};x.remove=function(c,e){if(c){if(Array.isArray(c))return c.map(L=>this.remove(L,e));var p=this._find(c);if(p){var C=this._componentToKey;if(!C.has(c)||C.get(c)===e)return C=this._components.indexOf(p),p.node.parentNode&&p.node.parentNode.removeChild(p.node),this._componentToKey.delete(c),this._components.splice(C,1)[0]}}};x.empty=function(c){if(Array.isArray(c))return c.map(e=>this.empty(e)).reduce((e,
p)=>e.concat(p));c=c||"manual";return"manual"===c?Array.prototype.slice.call(this._manualContainer.children).filter(e=>!e.classList.contains("esri-ui-corner")).map(e=>this.remove(e)):this._isValidPosition(c)?Array.prototype.slice.call(this._cornerNameToContainerLookup[c].children).map(this.remove,this):null};x.move=function(c,e){Array.isArray(c)&&c.forEach(L=>this.move(L,e));if(c){var p=d(c)||d(e);if(p){var C=p.index;e=p.position;c=p.component||c}(!e||this._isValidPosition(e))&&(c=this.remove(c))&&
this.add(c,{position:e,index:C})}};x.find=function(c){return c?(c=this._findById(c))&&(c.widget||c.node):null};x.getPosition=function(c){for(const e in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[e].contains(c))return e;return null};x._add=function(c,e,p,C){c instanceof b||(c=new b({node:c}));this._place({component:c,position:e,index:p});this._components.push(c);C&&this._componentToKey.set(c,C)};x._find=function(c){return c?c instanceof b?this._findByComponent(c):"string"===
typeof c?this._findById(c):this._findByNode(c.domNode||c):null};x._getViewPadding=function(){return this.get("view.padding")||f};x._attachContainers=function(c){c.appendChild(this._innerContainer);c.appendChild(this._manualContainer)};x._initContainers=function(){var c=document.createElement("div");c.classList.add("esri-ui-inner-container");c.classList.add("esri-ui-corner-container");const e=document.createElement("div");e.classList.add("esri-ui-inner-container");e.classList.add("esri-ui-manual-container");
const p=document.createElement("div");p.classList.add("esri-ui-top-left");p.classList.add("esri-ui-corner");c.appendChild(p);const C=document.createElement("div");C.classList.add("esri-ui-top-right");C.classList.add("esri-ui-corner");c.appendChild(C);const L=document.createElement("div");L.classList.add("esri-ui-bottom-left");L.classList.add("esri-ui-corner");c.appendChild(L);const O=document.createElement("div");O.classList.add("esri-ui-bottom-right");O.classList.add("esri-ui-corner");c.appendChild(O);
this._innerContainer=c;this._manualContainer=e;c=a.isRTL();this._cornerNameToContainerLookup={"top-left":p,"top-right":C,"bottom-left":L,"bottom-right":O,"top-leading":c?C:p,"top-trailing":c?p:C,"bottom-leading":c?O:L,"bottom-trailing":c?L:O};this._positionNameToContainerLookup={manual:e,...this._cornerNameToContainerLookup}};x._isValidPosition=function(c){return!!this._positionNameToContainerLookup[c]};x._place=function(c){const e=c.component,p=c.index;c=this._positionNameToContainerLookup[c.position||
"manual"];var C=null!=p&&-1<p,L=e.widget;L&&!L._started&&"function"===typeof L.postMixInProperties&&"function"===typeof L.buildRendering&&"function"===typeof L.postCreate&&"function"===typeof L.startup&&e.widget.startup();C?(C=Array.prototype.slice.call(c.children),0===p?c.firstChild?h.insertBefore(e.node,c.firstChild):c.appendChild(e.node):p>=C.length?c.appendChild(e.node):h.insertBefore(e.node,C[p])):c.appendChild(e.node)};x._toPxPosition=function(c){return{top:this._toPxUnit(c.top),left:this._toPxUnit(c.left),
right:this._toPxUnit(c.right),bottom:this._toPxUnit(c.bottom)}};x._toPxUnit=function(c){return 0===c?"0":c+"px"};x._findByComponent=function(c){let e=null,p;this._components.some(C=>{(p=C===c)&&(e=C);return p});return e};x._findById=function(c){let e=null,p;this._components.some(C=>{(p=C.id===c)&&(e=C);return p});return e};x._findByNode=function(c){let e=null,p;this._components.some(C=>{(p=C.node===c)&&(e=C);return p});return e};m._createClass(D,[{key:"container",set:function(c){const e=this._get("container");
c!==e&&(c&&(c.classList.add("esri-ui"),g.setCalciteThemeClass(c),this._attachContainers(c)),e&&(e.classList.remove("esri-ui"),n(e,{top:"",bottom:"",left:"",right:""}),h.empty(e)),this._set("container",c))}},{key:"height",get:function(){const c=this.get("view.height")||0;if(0===c)return c;const e=this._getViewPadding();return Math.max(c-(e.top+e.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(c){this._overrideIfSome("padding",c)}},{key:"width",get:function(){const c=
this.get("view.width")||0;if(0===c)return c;const e=this._getViewPadding();return Math.max(c-(e.left+e.right),0)}}]);return D}(t.EventedAccessor);q.__decorate([B.property()],k.prototype,"_locale",void 0);q.__decorate([B.property()],k.prototype,"container",null);q.__decorate([B.property()],k.prototype,"height",null);q.__decorate([B.property({value:v})],k.prototype,"padding",null);q.__decorate([z.cast("padding")],k.prototype,"castPadding",null);q.__decorate([B.property()],k.prototype,"view",void 0);
q.__decorate([B.property()],k.prototype,"width",null);return k=q.__decorate([u.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){t=function(l){function d(f,v){var w=l.call(this,f,v)||this;w._isOpen=!1;w._attributionTextOverflowed=!1;w._prevSourceNodeHeight=0;w._resizeObserver=new ResizeObserver(D=>D.forEach(({target:x})=>w._checkSourceTextOverflow(x)));w.iconClass="esri-icon-description";w.itemDelimiter=" | ";w.messages=null;w.viewModel=new F;return w}m._inheritsLoose(d,l);var n=d.prototype;n.initialize=function(){this.addHandles(k.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))};
n.destroy=function(){this._resizeObserver?.disconnect()};n.render=function(){return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};n.renderPoweredBy=function(){return b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",
rel:"noreferrer"},"Esri"))};n.renderSourcesNode=function(){const f=this._isOpen,v=this._isInteractive,w=v?"0":"",{attributionText:D}=this;return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:f,["esri-interactive"]:v}),innerHTML:D,tabindex:w})};n._afterSourcesNodeCreate=function(f){this._prevSourceNodeHeight=f.clientWidth;this._resizeObserver.observe(f)};n._checkSourceTextOverflow=function(f){let v=
!1;const {clientHeight:w,clientWidth:D,scrollWidth:x}=f;f=x>D;const c=this._attributionTextOverflowed!==f;this._attributionTextOverflowed=f;c&&(v=!0);this._isOpen&&(f=w<this._prevSourceNodeHeight,this._prevSourceNodeHeight=w,f&&(this._isOpen=!1,v=!0));v&&this.scheduleRender()};n._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};m._createClass(d,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((f,
v)=>{f.includes(v.text)||f.push(v.text);return f},[]).join(this.itemDelimiter)}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(f){this._overrideIfSome("label",f)}},{key:"view",get:function(){return this.viewModel.view},set:function(f){this.viewModel.view=f}}]);return d}(z);q.__decorate([h.property()],t.prototype,"_isOpen",void 0);q.__decorate([h.property()],t.prototype,"_isInteractive",null);q.__decorate([h.property()],t.prototype,"_attributionTextOverflowed",void 0);
q.__decorate([h.property()],t.prototype,"_prevSourceNodeHeight",void 0);q.__decorate([h.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],t.prototype,"attributionText",null);q.__decorate([h.property()],t.prototype,"iconClass",void 0);q.__decorate([h.property()],t.prototype,"itemDelimiter",void 0);q.__decorate([h.property()],t.prototype,"label",null);q.__decorate([h.property(),g.messageBundle("esri/widgets/Attribution/t9n/Attribution")],t.prototype,"messages",void 0);q.__decorate([h.property()],
t.prototype,"view",null);q.__decorate([h.property({type:F})],t.prototype,"viewModel",void 0);q.__decorate([u.accessibleHandler()],t.prototype,"_toggleState",null);return t=q.__decorate([B.subclass("esri.widgets.Attribution")],t)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a,l){function d(w,D){return w&&"copyright"in w&&(!D||"function"===typeof w.originOf&&"user"===w.originOf("copyright"))}function n(w,D){return w.length!==D.length||w.some((x,c)=>x.text!==D[c].text)}function f(w,D,x){x&&D&&(w.find(c=>c.layerView===D&&c.text===x)||w.push({text:x,layerView:D}))}const v=[];k=function(w){function D(c){var e=w.call(this,c)||this;e._clear=()=>{e._fetchedAttributionData.clear();e._pendingAttributions.clear();e.handles.remove("suspension");
e.notifyChange("state")};e._pendingAttributions=new Set;e._fetchedAttributionData=new Map;e.items=new t;e.view=null;e._allLayerViewsChange=p=>{e.handles.remove("suspension");const C=e.get("view.allLayerViews");C&&e.handles.add(C.map(L=>B.watch(()=>[L.suspended,L.layer?.attributionVisible],()=>e._updateAttributionItems())),"suspension");p&&p.removed&&p.removed.forEach(L=>{e._pendingAttributions.delete(L);e._fetchedAttributionData.delete(L)});e._updateAttributionItems()};e.handles.add([B.on(()=>e.view?.allLayerViews,
"change",p=>e._allLayerViewsChange(p),{onListenerAdd:()=>e._allLayerViewsChange(),onListenerRemove:e._clear}),B.when(()=>!0===e.view?.stationary,()=>e._updateAttributionItems())]);return e}m._inheritsLoose(D,w);var x=D.prototype;x.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};x._updateAttributionItems=function(){const c=this.view,e=c?.allLayerViews;v.length=0;c&&e?(e.forEach(p=>{if(!p.suspended&&p.layer?.attributionVisible){var C=
p.layer;if(d(C,"user"))f(v,p,C.copyright);else if(C.hasAttributionData)if(this._fetchedAttributionData.has(p)){var L=this._fetchedAttributionData.get(p);L?f(v,p,this._getDynamicAttribution(L,c,C)):d(C)&&f(v,p,C.copyright)}else this._fetchAttributionData(p);else(L=C.get("portalItem.accessInformation"))?f(v,p,L):f(v,p,C.copyright)}}),n(this.items,v)&&(this.items.removeAll(),this.items.addMany(v)),v.length=0,this.notifyChange("state")):this._clear()};x._fetchAttributionData=function(){var c=m._asyncToGenerator(function*(e){if(!this._pendingAttributions.has(e)){this._pendingAttributions.add(e);
var p=yield h.result(e.layer.fetchAttributionData());this._pendingAttributions.has(e)&&(p=p.ok?this._createContributionIndex(p.value,"bing-maps"===e.layer.type):null,this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,p));this._updateAttributionItems()}});return function(e){return c.apply(this,arguments)}}();x._createContributionIndex=function(c,e){c=c.contributors;const p={};if(!c)return p;for(let K=0;K<c.length;K++){const U=c[K];var C=U.coverageAreas;if(!C)return;for(const T of C){var L=
T.bbox,O=T.zoomMin-(e&&T.zoomMin?1:0);C=T.zoomMax-(e&&T.zoomMax?1:0);for(L={extent:a.geographicToWebMercator({xmin:L[1],ymin:L[0],xmax:L[3],ymax:L[2],spatialReference:l.WGS84}),attribution:U.attribution||"",score:null!=T.score?T.score:100,id:K};O<=C;O++)p[O]=p[O]||[],p[O].push(L)}}p.maxKey=Math.max.apply(null,Object.keys(p));return p};x._getDynamicAttribution=function(c,e,p){const {extent:C,scale:L}=e;p=p.tileInfo?.scaleToZoom(L)??0;p=Math.min(c.maxKey??0,Math.round(p));if(!C||null==p||-1>=p)return"";
c=c[p];const O=a.project(C.center.clone().normalize(),e.spatialReference),K={};return c?c.filter(U=>{const T=U.id;(U=!K[T]&&O&&U.extent&&b.extentContainsPoint(U.extent,O))&&(K[T]=!0);return U}).sort((U,T)=>T.score-U.score||U.objectId-T.objectId).map(U=>U.attribution).join(", "):""};m._createClass(D,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return D}(A.HandleOwner);q.__decorate([z.property({readOnly:!0,type:t})],k.prototype,
"items",void 0);q.__decorate([z.property({readOnly:!0})],k.prototype,"state",null);q.__decorate([z.property()],k.prototype,"view",void 0);return k=q.__decorate([g.subclass("esri.widgets.Attribution.AttributionViewModel")],k)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){h=function(l){function d(f,v){f=l.call(this,f,v)||this;f.iconClass=F.CSS.widgetIcon;f.messages=null;f.viewModel=new z;return f}m._inheritsLoose(d,l);var n=d.prototype;n.reset=function(){return this.viewModel.reset()};n.render=function(){const {orientation:f,state:v}=this.viewModel;var w="disabled"===v,D="compass"===("rotation"===v?"rotation":"compass");const x=w?-1:0;w={[F.CSS.disabled]:w,[F.CSS.interactive]:!w};D={[F.CSS.northIcon]:D,[F.CSS.rotationIcon]:!D};const {messages:c}=
this;return b.tsx("div",{bind:this,class:this.classes(F.CSS.base,w),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:x,"aria-label":c.reset,title:c.reset},b.tsx("span",{"aria-hidden":"true",class:this.classes(F.CSS.icon,D),styles:this._toRotationTransform(f)}),b.tsx("span",{class:F.CSS.text},c.reset))};n._reset=function(){this.viewModel.reset()};n._toRotationTransform=function(f){return{transform:`rotateZ(${f.z}deg)`}};m._createClass(d,[{key:"goToOverride",get:function(){return this.viewModel.goToOverride},
set:function(f){this.viewModel.goToOverride=f}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(f){this._overrideIfSome("label",f)}},{key:"view",get:function(){return this.viewModel.view},set:function(f){this.viewModel.view=f}}]);return d}(B);q.__decorate([k.property()],h.prototype,"goToOverride",null);q.__decorate([k.property()],h.prototype,"iconClass",void 0);q.__decorate([k.property()],h.prototype,"label",null);q.__decorate([k.property(),g.messageBundle("esri/widgets/Compass/t9n/Compass")],
h.prototype,"messages",void 0);q.__decorate([k.property()],h.prototype,"view",null);q.__decorate([k.property({type:z})],h.prototype,"viewModel",void 0);q.__decorate([u.accessibleHandler()],h.prototype,"_reset",null);return h=q.__decorate([A.subclass("esri.widgets.Compass")],h)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g){k=function(b){function a(d){d=b.call(this,d)||this;d._handles=new h;d.orientation={x:0,y:0,z:0};d.view=null;d._updateForCamera=d._updateForCamera.bind(m._assertThisInitialized(d));d._updateForRotation=d._updateForRotation.bind(m._assertThisInitialized(d));d._updateRotationWatcher=d._updateRotationWatcher.bind(m._assertThisInitialized(d));return d}m._inheritsLoose(a,b);var l=a.prototype;l.initialize=function(){this._handles.add(A.watch(()=>this.view,this._updateRotationWatcher,
A.initial))};l.destroy=function(){t.removeMaybe(this._handles);this.view=null};l.reset=function(){if(this.get("view.ready")){var d={};"2d"===this.view?.type?d.rotation=0:d.heading=0;this.callGoTo({target:d})}};l._updateForRotation=function(d){void 0!==d&&null!==d&&(this.orientation={z:d})};l._updateForCamera=function(d){d&&(this.orientation={x:0,y:0,z:-d.heading})};l._updateRotationWatcher=function(d){this._handles.removeAll();d&&this._handles.add("2d"===d.type?A.watch(()=>d?.rotation,this._updateForRotation,
A.initial):A.watch(()=>d?.camera,this._updateForCamera,A.initial))};m._createClass(a,[{key:"canShowNorth",get:function(){const d=this.get("view.spatialReference");return!(!d||!d.isWebMercator&&!d.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return a}(g.GoToMixin(k));q.__decorate([B.property({readOnly:!0})],k.prototype,"canShowNorth",null);q.__decorate([B.property()],k.prototype,"orientation",void 0);q.__decorate([B.property({readOnly:!0})],
k.prototype,"state",null);q.__decorate([B.property()],k.prototype,"view",void 0);return k=q.__decorate([u.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/Compass/css":function(){define(["exports"],function(m){m.CSS={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),function(m,
q,k,h,t,A,B,z,F,u,g,b,a){h=function(l){function d(f,v){f=l.call(this,f,v)||this;f.iconClass=z.CSS.widgetIcon;f.messages=null;f.viewModel=new F;return f}m._inheritsLoose(d,l);var n=d.prototype;n.toggle=function(){return this.viewModel.toggle()};n.render=function(){const f="disabled"===this.get("viewModel.state");var v="pan"===this.get("viewModel.navigationMode");const w={[z.CSS.activeButton]:v};v={[z.CSS.activeButton]:!v};const D=f?-1:0,x=this.messages.toggle;return b.tsx("div",{bind:this,class:this.classes(z.CSS.base,
{[z.CSS.disabled]:f,[z.CSS.isLayoutHorizontal]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:D,"aria-label":x,title:x},b.tsx("div",{class:this.classes(z.CSS.button,z.CSS.panButton,w)},b.tsx("span",{class:z.CSS.panIcon})),b.tsx("div",{class:this.classes(z.CSS.button,z.CSS.rotateButton,v)},b.tsx("span",{class:z.CSS.rotationIcon})))};n._toggle=function(){this.toggle()};m._createClass(d,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(f){this._overrideIfSome("label",
f)}},{key:"layout",set:function(f){"horizontal"!==f&&(f="vertical");this._set("layout",f)}},{key:"view",get:function(){return this.viewModel.view},set:function(f){this.viewModel.view=f}}]);return d}(B);q.__decorate([k.property()],h.prototype,"iconClass",void 0);q.__decorate([k.property()],h.prototype,"label",null);q.__decorate([k.property({value:"vertical"})],h.prototype,"layout",null);q.__decorate([k.property(),g.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],h.prototype,"messages",
void 0);q.__decorate([k.property()],h.prototype,"view",null);q.__decorate([k.property({type:F})],h.prototype,"viewModel",void 0);q.__decorate([u.accessibleHandler()],h.prototype,"_toggle",null);return h=q.__decorate([A.subclass("esri.widgets.NavigationToggle")],h)})},"esri/widgets/NavigationToggle/css":function(){define(["exports"],function(m){m.CSS={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",
panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B,z){k=function(F){function u(b){b=F.call(this,b)||this;b.navigationMode="pan";b.view=null;return b}m._inheritsLoose(u,F);var g=u.prototype;g.initialize=function(){this.own(h.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))};g.destroy=function(){this.view=null};g.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};g._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate"};m._createClass(u,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view?.type?"ready":"disabled"}}]);return u}(k);q.__decorate([t.property({readOnly:!0})],k.prototype,"state",null);q.__decorate([t.property()],k.prototype,"navigationMode",void 0);q.__decorate([t.property()],k.prototype,"view",void 0);return k=q.__decorate([z.subclass("esri.widgets.NavigationToggleViewModel")],k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(m,q,k,h,t,A,B,z,F,u,g,b,a){t=function(l){function d(f,v){f=l.call(this,f,v)||this;f.iconClass="esri-icon-zoom-in-magnifying-glass";f.messages=null;f.viewModel=new a;return f}m._inheritsLoose(d,l);var n=d.prototype;n.initialize=function(){this._zoomInButton=new b({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new b({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};n.destroy=function(){this._zoomInButton=k.destroyMaybe(this._zoomInButton);this._zoomOutButton=
k.destroyMaybe(this._zoomOutButton)};n.render=function(){const f={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:v,canZoomOut:w}=this.viewModel;this._zoomInButton.enabled=v;this._zoomOutButton.enabled=w;const {zoomIn:D,zoomOut:x}=this.messages;this._zoomInButton.title=D;this._zoomOutButton.title=x;return g.tsx("div",{class:this.classes("esri-zoom esri-widget",f)},this._zoomInButton.render(),this._zoomOutButton.render())};n.zoomIn=function(){return this.viewModel.zoomIn()};n.zoomOut=
function(){return this.viewModel.zoomOut()};m._createClass(d,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(f){this._overrideIfSome("label",f)}},{key:"layout",set:function(f){"horizontal"!==f&&(f="vertical");this._set("layout",f)}},{key:"view",get:function(){return this.viewModel.view},set:function(f){this.viewModel.view=f}}]);return d}(z);q.__decorate([h.property()],t.prototype,"iconClass",void 0);q.__decorate([h.property()],t.prototype,"label",null);q.__decorate([h.property({value:"vertical"})],
t.prototype,"layout",null);q.__decorate([h.property(),u.messageBundle("esri/widgets/Zoom/t9n/Zoom")],t.prototype,"messages",void 0);q.__decorate([h.property()],t.prototype,"view",null);q.__decorate([h.property({type:a})],t.prototype,"viewModel",void 0);return t=q.__decorate([B.subclass("esri.widgets.Zoom")],t)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(m,q,k,h,t,A,B,z,F,u){h=function(g){function b(){var l=g.apply(this,arguments)||this;l.enabled=!0;l.iconClass="";l.title="";return l}m._inheritsLoose(b,g);var a=b.prototype;a.render=function(){const l=this.enabled?0:-1,d={[this.iconClass]:!!this.iconClass};return F.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:l,title:this.title},
F.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",d)}),F.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};a._triggerAction=function(){this.action.call(this)};return b}(B);q.__decorate([k.property()],h.prototype,"action",void 0);q.__decorate([k.property()],h.prototype,"enabled",void 0);q.__decorate([k.property()],h.prototype,"iconClass",void 0);q.__decorate([k.property()],h.prototype,"title",void 0);q.__decorate([z.accessibleHandler()],h.prototype,
"_triggerAction",null);return h=q.__decorate([A.subclass("esri.widgets.IconButton")],h)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(m,q,k,h,t,A,B,z,F,u,g){k=
function(b){function a(d){return b.call(this,d)||this}m._inheritsLoose(a,b);var l=a.prototype;l.destroy=function(){this.view=null};l.zoomIn=function(){if(this.canZoomIn){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomIn():t.ignoreAbortErrors(d.goTo({zoomFactor:2}))}};l.zoomOut=function(){if(this.canZoomOut){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomOut():t.ignoreAbortErrors(d.goTo({zoomFactor:.5}))}};m._createClass(a,[{key:"canZoomIn",get:function(){return h.isSome(this._zoomConditions)&&
this._zoomConditions.canZoomIn}},{key:"canZoomOut",get:function(){return h.isSome(this._zoomConditions)&&this._zoomConditions?.canZoomOut}},{key:"state",get:function(){return this.view?.ready?"ready":"disabled"}},{key:"view",set:function(d){d?"2d"===d.type?this._zoomConditions=new u({view:d}):"3d"===d.type&&(this._zoomConditions=new g({view:d})):this._zoomConditions=null;this._set("view",d)}}]);return a}(k);q.__decorate([A.property()],k.prototype,"_zoomConditions",void 0);q.__decorate([A.property()],
k.prototype,"canZoomIn",null);q.__decorate([A.property()],k.prototype,"canZoomOut",null);q.__decorate([A.property({readOnly:!0})],k.prototype,"state",null);q.__decorate([A.property()],k.prototype,"view",null);return k=q.__decorate([F.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B){k=function(z){function F(){return z.apply(this,arguments)||this}m._inheritsLoose(F,z);m._createClass(F,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const u=this.get("view.animation.target.scale")||this.get("view.scale"),g=this.get("view.constraints.effectiveMaxScale");return 0===g||u>g}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const u=this.get("view.animation.target.scale")||this.get("view.scale"),g=this.get("view.constraints.effectiveMinScale");
return 0===g||u<g}}]);return F}(k);q.__decorate([h.property({readOnly:!0})],k.prototype,"canZoomIn",null);q.__decorate([h.property({readOnly:!0})],k.prototype,"canZoomOut",null);q.__decorate([h.property()],k.prototype,"view",void 0);return k=q.__decorate([B.subclass("esri.widgets.Zoom.ZoomConditions2D")],k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,q,k,h,t,A,B){k=function(z){function F(){return z.apply(this,arguments)||this}m._inheritsLoose(F,z);m._createClass(F,[{key:"canZoomIn",get:function(){return!!this.view.ready}},{key:"canZoomOut",get:function(){return!!this.view.ready}}]);return F}(k);q.__decorate([h.property({readOnly:!0})],k.prototype,"canZoomIn",null);q.__decorate([h.property({readOnly:!0})],k.prototype,"canZoomOut",null);q.__decorate([h.property()],k.prototype,"view",void 0);return k=q.__decorate([B.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(m,q,k,h,t,A,B,z){var F;h=F=function(u){function g(b){b=u.call(this,b)||this;b.color=new k([0,0,0,1]);return b}m._inheritsLoose(g,u);g.prototype.clone=function(){return new F(t.clone({color:this.color}))};
return g}(h.JSONSupport);q.__decorate([A.property({type:k,json:{write:!0}})],h.prototype,"color",void 0);return h=F=q.__decorate([z.subclass("esri.webmap.background.ColorBackground")],h)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(m,
q,k,h,t,A,B,z,F,u,g,b,a,l,d,n,f,v,w,D,x,c,e,p,C,L,O,K,U,T,M,P,V,H,y,E,I,r,G,J,N,R,W,da,ea,fa,Q,Y,ba,S,X,aa){function ha(){return ia.apply(this,arguments)}function ia(){ia=q._asyncToGenerator(function*(){const [,{GraphicsView2D:ua,GraphicContainer:xa,LabelManager:oa,MapViewNavigation:Z,MagnifierView2D:ca,Stage:ka}]=yield Promise.all([new Promise((la,sa)=>m(["./2d/webglDeps"],la,sa)),new Promise((la,sa)=>m(["./2d/mapViewDeps"],la,sa))]);ya=ua;Ba=xa;za=oa;Fa=Z;Ga=ca;ra=ka});return ia.apply(this,arguments)}
function ja(ua){const xa=ua.getObjectId();return xa?`${ua.layer?.uid??ua.sourceLayer?.uid??"MapView"}/${xa}`:`"MapView/${ua.uid}`}function ma(ua,xa,oa,Z,ca){return ka=>{if(ka instanceof h){if(ka.layer===ua)ca?.();else{var la=ua.allLayerViews.find(sa=>sa.layer===ka.layer);la&&Z?.(la)}oa(ja(ka))}else(la=ua.allLayerViews.find(sa=>sa.layer===ka))&&xa(la)}}function na(ua,xa){if(ua)if(u.isIterable(ua))for(const oa of ua)if(u.isIterable(oa))for(const Z of oa)xa(Z);else xa(oa);else xa(ua)}let ra,ya,Ba,za,
Fa,Ga;w=function(ua){function xa(Z){var ca=ua.call(this,Z)||this;ca._magnifierView=null;ca._stage=null;ca._resolveWhenReady=[];ca.rootLayerViews=new B({getCollections:()=>[ca.basemapView?.baseLayerViews,ca.layerViews,ca.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});ca.featuresTilingScheme=null;ca.fullOpacity=1;ca.graphicsView=null;ca.labelManager=null;ca.mapViewNavigation=null;ca.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};
ca.rendering=!1;ca.supersampleScreenshotsEnabled=!0;ca.supportsGround=!1;ca._stationaryTimer=null;ca._gotoTask=null;ca.frameTask=new V(q._assertThisInitialized(ca));ca._pePromise=null;ca.floors=new A;ca.highlightOptions=new ea;ca.inputManager=new W({view:q._assertThisInitialized(ca)});ca.map=null;ca.resizeAlign="center";ca.spatialReferenceLocked=!1;ca.timeline=new fa.Timeline;ca.type="2d";ca.ui=new X;ca._pixelFormat={flipY:!0,premultipliedAlpha:!0};ca.constraints=new y;ca.padding={top:0,right:0,bottom:0,
left:0};ca.handles.add([l.watch(()=>ca.viewpoint,()=>{ca._lastStationaryEventTimestamp=performance.now();ca._flipStationary(160)},l.sync),ca.on("resize",ka=>ca._resizeHandler(ka)),l.watch(()=>ca.animationManager?.animation,ka=>{ca.animation=ka})]);f.initialize();return ca}q._inheritsLoose(xa,ua);var oa=xa.prototype;oa.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};oa.goTo=
function(Z,ca){if(Z)return this.animation&&(this.animation=null),this._createAnimation(),l.whenOnce(()=>this.ready,ca).then(()=>{const ka={animate:!0,...ca},la=R.create(Z,this);this.animation?.update(la);this._gotoTask={};return ka.animate?this._gotoAnimated(la,ka):this._gotoImmediate(la,ka)});g.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")};oa.hitTest=function(){var Z=q._asyncToGenerator(function*(ca,ka){const la=ba.isSupportedScreenPointEvent(ca)?ba.createScreenPointFromSupportedEvent(this,
ca):ca;if(!this.ready||isNaN(la.x)||isNaN(la.y))return{screenPoint:la,results:[]};let sa=new Set,pa=!1,ta=null,wa=null;ka?.include?na(ka.include,ma(this,qa=>sa.add(qa),qa=>{ta||(ta=new Set);ta.add(qa)},qa=>sa.add(qa),()=>pa=!0)):(pa=!0,sa=new Set(this.allLayerViews));ka?.exclude&&na(ka.exclude,ma(this,qa=>sa.delete(qa),qa=>{wa||(wa=new Set);wa.add(qa)}));ka=this.allLayerViews.filter(qa=>!qa.suspended&&sa.has(qa)).reverse();const va=this.toMap(la);ca=pa?this.graphicsView.hitTest(va).map(qa=>({type:"graphic",
graphic:qa,layer:null,mapPoint:va})):[];ka=yield Promise.all(ka.map(qa=>qa.hitTest(va,la)).toArray());ca=[...ca,...ka].filter(b.isSome).flat().filter(b.isSome);ta&&(ca=ca.filter(qa=>!("graphic"in qa)||!qa.graphic||ta?.has(ja(qa.graphic))));wa&&(ca=ca.filter(qa=>!("graphic"in qa)||!qa.graphic||wa?.has(ja(qa.graphic))));return{screenPoint:la,results:ca}});return function(ca,ka){return Z.apply(this,arguments)}}();oa.takeScreenshot=function(){var Z=q._asyncToGenerator(function*(ca){ca=this._createScreenshotPlan(ca);
const ka=yield this._stage.takeScreenshot(ca);return Y.encode(ka,{format:ca.format,quality:ca.quality,rotation:0,disableDecorations:!1},this._pixelFormat)});return function(ca){return Z.apply(this,arguments)}}();oa._takeScreenshot=function(){var Z=q._asyncToGenerator(function*(ca){ca=this._createScreenshotPlan(ca);ca=yield this._stage.takeScreenshot(ca);return Y.encodeData(ca,this._pixelFormat)});return function(ca){return Z.apply(this,arguments)}}();oa._createScreenshotPlan=function(Z){Z=Z??{};const ca=
this.supersampleScreenshotsEnabled?Math.min(4,Y.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let ka;Z.layers?(ka=[],Z.layers.forEach(pa=>{const ta=this.allLayerViews.find(wa=>wa.layer.id===pa.id);ta&&"container"in ta&&ta.container&&ka.push(ta.container)})):ka=this._stage.children;const {format:la,quality:sa}=Y.getFormatAndQuality(Z.format,Z.quality);return Q(Z,ca,this.size,this.padding,la,sa,ka,Z.rotation)};oa.toMap=function(Z){if(!this.ready)return null;
Z=ba.isSupportedScreenPointEvent(Z)?ba.createScreenPointFromSupportedEvent(this,Z):Z;const [ca,ka]=this.state.toMap([0,0],[Z.x,Z.y]);return new e({x:ca,y:ka,spatialReference:this.spatialReference})};oa.toScreen=function(Z){if(!this.ready)return null;Z=this._project(Z,this.spatialReference);Z=[Z.x,Z.y];this.state.toScreen(Z,Z);return d.createScreenPoint(Z[0],Z[1])};oa.on=function(Z,ca,ka,la){return(ka=this.inputManager&&this.viewEvents.on(Z,ca,ka,la))?ka:ua.prototype.on.call(this,Z,ca)};oa.hasEventListener=
function(Z){return ua.prototype.hasEventListener.call(this,Z)||this.viewEvents.hasHandler(Z)};oa.whenLayerView=function(Z){return ua.prototype.whenLayerView.call(this,Z)};oa.graphicChanged=function(Z){this.graphicsView&&this.graphicsView.graphicUpdateHandler(Z)};oa.whenReady=function(){return new Promise(Z=>{this.ready?Z(this):this._resolveWhenReady.push(Z)})};oa.forceDOMReadyCycle=function(){this.forceReadyCycle()};oa.getDefaultSpatialReference=function(){return this.map&&"initialViewProperties"in
this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null};oa.hasLayerViewModule=function(Z){return H.layerView2DImporter.hasLayerViewModule(Z)};oa.importLayerView=function(Z){return H.layerView2DImporter.importLayerView(Z)};oa.pixelSizeAt=function(){return this.ready?this.state.resolution:(g.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};oa.popupHitTest=function(Z){return this.hitTest(Z).then(ca=>
({...ca,mapPoint:this.toMap(Z)}))};oa.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};oa.validate=function(){let Z=S.check(this.type);F("safari")&&9>F("safari")&&(Z=new z("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:F("safari")}));return b.isSome(Z)?(g.getLogger(this.declaredClass).warn("#validate()",Z.message),Promise.reject(Z)):ha()};oa._createAnimation=function(){if(!this.animation||
this.animation.done)this.animation=new M;return this.animation};oa._cancellableGoTo=function(Z,ca,ka){const la=()=>Z===this._gotoTask,sa=ka.then(()=>{la()&&(this.animation=null)}).catch(ta=>{la()&&(ca&&!ca.done&&(ca.stop(),this.frameTask.animationInProgress=!1),this.animation=null);throw ta;}),pa=new Promise(ta=>ta(sa));ca.when().catch(()=>{la()&&pa.cancel&&pa.cancel()});return pa};oa._gotoImmediate=function(Z,ca){const ka=this._gotoTask,la=this.animation;Z=Z.then(sa=>{a.throwIfAborted(ca);if(ka!==
this._gotoTask)throw new z("view:goto-interrupted","Goto was interrupted");this.viewpoint=la.target=sa;la.finish()});return this._cancellableGoTo(ka,la,Z)};oa._flipStationary=function(Z){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const ca=performance.now()-this._lastStationaryEventTimestamp;160>ca&&(this._stationaryTimer=this._flipStationary(ca))},Z)};oa._getDefaultViewpoint=function(){const {constraints:Z,initialExtent:ca,
map:ka,padding:la,size:sa}=this;if(!Z)return null;const pa=ka&&"initialViewProperties"in ka?ka.initialViewProperties:void 0;var ta=this._get("zoom"),wa=this._get("scale"),va=this._get("center"),qa=this._get("extent"),Ea=this._get("rotation"),Aa=this._get("viewpoint");Z.effectiveLODs?-1!==ta&&(wa=Z.zoomToScale(ta)):ta=-1;let Ca=null,Ha=null,Ia=0;ta=Aa&&Aa.rotation;const Da=Aa&&Aa.targetGeometry;b.isSome(Da)&&("extent"===Da.type?Ca=Da:"point"===Da.type&&(Ha=Da,Ia=Aa.scale));qa=qa||Ca||b.unwrap(pa?.viewpoint?.targetGeometry)?.extent||
ca;va=va||Ha||qa?.center;wa=wa||Ia||pa?.viewpoint?.scale||qa&&R.extentToScale(qa,[sa[0]-la.left-la.right,sa[1]-la.top-la.bottom]);return va&&wa?new t({targetGeometry:va,scale:wa,rotation:Ea||ta||pa?.viewpoint?.rotation||0}):null};oa._gotoAnimated=function(Z,ca){const ka=this._gotoTask,la=this.animation;if(!la)return Promise.resolve();Z=Z.then(sa=>{a.throwIfAborted(ca);if(ka!==this._gotoTask)throw new z("view:goto-interrupted","Goto was interrupted");la.update(sa);this.animationManager.animate(la,
this.viewpoint,ca);return la.when().then(()=>{},()=>{})});return this._cancellableGoTo(ka,la,Z)};oa._project=function(Z,ca){const ka=Z&&Z.targetGeometry||Z;if(!ca)return Z;if(!ka)return null;if(ca.imageCoordinateSystem||ka.spatialReference?.imageCoordinateSystem||C.equals(ca,ka.spatialReference))return Z;const la=p.project(ka,ca);if(!la)throw new z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:ka,spatialReference:ca});return Z&&
"esri.Viewpoint"===Z.declaredClass?(Z.targetGeometry=la,Z):la};oa._resizeHandler=function(Z){if(this.ready){var ca=this.state,ka=this.state.paddedViewState.viewpoint,la=this.state.paddedViewState.size.concat();ca.size=[Z.width,Z.height];R.resize(ka,ka,la,this.state.paddedViewState.size,this.resizeAlign);ka=this.constraints.constrain(ka,void 0);this.state.viewpoint=ka}};oa._startup=function(){this.timeline.begin("MapView Startup");var Z=this._getDefaultViewpoint();const ca=Z.targetGeometry;try{this._project(Z,
this.spatialReference)}catch(la){g.getLogger(this.declaredClass).warn(new n("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:ca.toJSON(),spatialReference:this.spatialReference,error:la})),Z.targetGeometry=this.defaultsFromMap.extent?.center||new e({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(Z);this._set("state",new E({padding:this._get("padding"),size:this.size,viewpoint:Z}));
this.graphics.owner=this;const ka=new ra(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=ka;this._magnifierView=new Ga;this._magnifierView.magnifier=this.magnifier;Z=new za({view:this});this._set("labelManager",Z);Z=new P({view:this});this._set("animationManager",
Z);Z=new Fa({view:this,animationManager:Z});this._set("mapViewNavigation",Z);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),ka.on("post-render",()=>this._set("rendering",ka.renderRequested)),ka.on("will-render",()=>this._set("rendering",ka.renderRequested)),ka.on("webgl-error",la=>this.fatalError=la.error),l.watch(()=>this.stationary,la=>ka.stationary=la,l.syncAndInitial),l.watch(()=>this.background,la=>{ka.background=
la;this._magnifierView.background=la},l.syncAndInitial),l.watch(()=>this.magnifier,la=>this._magnifierView.magnifier=la,l.syncAndInitial),l.watch(()=>this.renderingOptions,la=>ka.renderingOptions=la,l.syncAndInitial),l.watch(()=>this.highlightOptions,la=>ka.highlightOptions=la,l.syncAndInitial),l.watch(()=>this.state.id,()=>ka.state=this.state,l.syncAndInitial)],"map-view");this._updateStageChildren();Z=this._resolveWhenReady;this._resolveWhenReady=[];Z.forEach(la=>la(this));this.timeline.end("MapView Startup");
this.frameTask&&this.frameTask.start();this._set("ready",!0)};oa._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",
null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);this._set("ready",!1);const {center:[Z,ca],spatialReference:ka,rotation:la,scale:sa}=this.state.paddedViewState,pa=new e({x:Z,y:ca,spatialReference:ka});this._set("viewpoint",null);this._set("extent",null);this._set("center",pa);this._set("zoom",-1);this._set("rotation",la);this._set("scale",sa);this._set("spatialReference",
ka);this._set("state",null);this.animation=null};oa._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(Z=>{this._stage.addChild(Z.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};oa._setupSpatialReferenceDependentProperties=function(){var Z=new r(L.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",Z);Z=new ya({view:this,graphics:this.graphics,requestUpdateCallback:()=>
this.requestUpdate(),container:new Ba(Z)});this.frameTask.graphicsView=Z;this._set("graphicsView",Z)};oa._destroySpatialReferenceDependentProperties=function(){const Z=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;Z.destroy();this._set("featuresTilingScheme",null)};oa._spatialReferenceChanged=function(Z){if(this.ready){this.frameTask.stop();for(var ca of this.allLayerViews)ca.processDetach();this._destroySpatialReferenceDependentProperties();ca=this.state.paddedViewState.clone();
if(b.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=ca.scale;else{var ka=ca.viewpoint.clone();ka.scale=this._scaleBeforeChangingSpatialReference;ca.viewpoint=ka}ka=ca.clone();var [la,sa]=ca.center,pa=null;try{pa=this._project(new e({x:la,y:sa,spatialReference:ca.spatialReference}),Z)}catch(ta){p.isLoaded()||g.getLogger(this.declaredClass).warn(new n("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:pa?.toJSON(),
spatialReference:Z,error:ta}))}pa||(pa=new e({x:0,y:0,spatialReference:Z}));pa=R.centerAt(new t({targetGeometry:new e,scale:0,rotation:0}),ca.viewpoint,pa);ka.viewpoint=pa;try{const ta=[ca.size[0]/2,ca.size[1]/2],wa=[ta[0]+20,ta[1]],va=ca.toMap([0,0],wa),{x:qa,y:Ea}=this._project(new e({x:va[0],y:va[1],spatialReference:ca.spatialReference}),Z);va[0]=qa;va[1]=Ea;ka.toScreen(va,va);const Aa=R.angleBetween(ta,va,wa),Ca=Math.hypot(va[0]-ta[0],va[1]-ta[1])/20;!Number.isFinite(Ca)||4<Math.abs(Ca)?(pa.rotation=
0,pa.targetGeometry=new e({x:0,y:0,spatialReference:Z})):(pa.scale*=Ca,pa.scale>F("mapview-srswitch-adjust-rotation-scale-threshold")?pa.rotation=0:pa.rotation+=Number.isFinite(Aa)?Aa:0)}catch{}this._get("constraints").constrain(pa,void 0);this._get("state").viewpoint=pa;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const ta of this.allLayerViews)ta.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};q._createClass(xa,
[{key:"graphicsTileStore",get:function(){return new da(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){const {scale:Z,constraints:ca,center:ka,viewpoint:la,extent:sa}=this;let pa=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||sa)return!1;ca?.effectiveLODs||(pa=-1);return ka&&(0!==Z||-1!==pa)||la&&b.isSome(la.targetGeometry)&&("extent"===la.targetGeometry.type||la.scale)?!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},
{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(p.isLoaded())return!0;this._pePromise||(this._pePromise=p.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",get:function(){var Z=this._getDefaultViewpoint();if(!Z)return!1;
const ca=this.spatialReference;Z=b.unwrap(Z.targetGeometry);return p.canProjectWithoutEngine(Z.spatialReference,ca)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(Z){var ca=this._get("animation");Z!==ca&&(ca&&ca.stop(),!Z||Z.isFulfilled()?this._set("animation",null):(this._set("animation",Z),this.frameTask.animationInProgress=!0,ca=()=>{Z===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame());this.frameTask&&(this.frameTask.animationInProgress=!1)},
Z.when(ca,ca)))}},{key:"background",get:function(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.background:null},set:function(Z){this._override("background",Z)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:Z,spatialReference:ca}=this.state.paddedViewState;return new e({x:Z[0],y:Z[1],spatialReference:ca})},set:function(Z){if(null!=Z)if(this.ready){try{var ca=this._project(Z,this.spatialReference)}catch(ka){g.getLogger(this.declaredClass).error(new z("mapview:invalid-center",
"could not project the value in the view's spatial reference",{input:Z,error:ka}));return}Z=this.viewpoint;R.centerAt(Z,Z,ca);this.viewpoint=Z}else this._set("center",Z),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(Z){const ca=this._get("constraints");ca&&(this.handles.remove("map-view-constraints"),ca.destroy());this._set("constraints",Z);Z&&(Z.view=this,this.ready&&(this.state.viewpoint=Z.fit(this.state.paddedViewState.viewpoint)),this.handles.add(l.watch(()=>Z.version,
()=>{this.ready&&this.state&&(this.state.viewpoint=Z.fit(this.state.paddedViewState.viewpoint))},l.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(Z){if(null!=Z)if(Z.width&&Z.height)if(this.ready){try{var ca=this._project(Z,this.spatialReference)}catch(ka){g.getLogger(this.declaredClass).error(new z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:ka}));
return}Z=this.viewpoint;R.setExtent(Z,Z,ca,this.size,{constraints:this.constraints});this.viewpoint=Z}else this._set("extent",Z),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else g.getLogger(this.declaredClass).error(new z("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(Z){this.ready?(this.state.padding=
Z,this._set("padding",this.state.padding)):this._set("padding",Z)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(Z){if(!isNaN(Z))if(this.ready){var ca=this.viewpoint;R.rotateTo(ca,ca,Z);this.viewpoint=ca}else this._set("rotation",Z)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(Z){if(Z&&!isNaN(Z))if(this.ready){var ca=
this.viewpoint;R.scaleTo(ca,ca,Z);this.viewpoint=ca}else{this._set("scale",Z);this._set("zoom",-1);if(Z=this._get("extent"))this._set("extent",null),this._set("center",Z.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){const Z=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===
this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(ca=>!ca.destroyed&&!("layerViews"in ca)&&!0===ca.updating));if(F("esri-2d-log-updating")){const ca=this.allLayerViews.reduce((ka,la)=>({...ka,[la.layer.id]:!la.destroyed&&!("layerViews"in la)&&la.updating}),{});console.log(`Updating MapView: ${Z}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(ca)}\n`)}return Z}},
{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const Z=this.state.paddedViewState;return Z&&Z.viewpoint.clone()},set:function(Z){if(null!=Z)if(this.ready){var ca;try{var ka=this._project(Z,this.spatialReference);!Z.scale||isNaN(Z.scale)?ca=new z("mapview:invalid-viewpoint",`invalid scale value of ${Z.scale}`):b.isNone(Z.targetGeometry)&&(ca=new z("mapview:invalid-viewpoint","geometry not defined"))}catch(la){ca=new z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",
{error:la})}ca?g.getLogger(this.declaredClass).error(ca):(this._scaleBeforeChangingSpatialReference=null,Z=new t({targetGeometry:new e,scale:0,rotation:0}),R.copy(Z,ka),this.constraints.constrain(Z,this.state.paddedViewState.viewpoint),this.state.viewpoint=Z,this.frameTask.requestFrame(),this._set("viewpoint",Z))}else this._set("viewpoint",Z),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?
this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(Z){if(null!=Z)if(this.ready)if(this.constraints.effectiveLODs){var ca=this.viewpoint;R.scaleTo(ca,ca,this.constraints.zoomToScale(Z));this.viewpoint=ca;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",Z);this._set("scale",0);if(Z=this._get("extent"))this._set("extent",null),this._set("center",Z.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||
!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:Z=>this._takeScreenshot(Z)}}}]);return xa}(O.BreakpointsOwner(K.DOMContainer(U.PopupView(T))));w.type="2d";k.__decorate([v.property({readOnly:!0})],w.prototype,"animationManager",void 0);k.__decorate([v.property({constructOnly:!0})],w.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([v.property({constructOnly:!0})],w.prototype,"debugWebGLExtensions",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,
"featuresTilingScheme",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"fullOpacity",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"graphicsTileStore",null);k.__decorate([v.property()],w.prototype,"graphicsView",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"state",void 0);k.__decorate([v.property()],w.prototype,"initialExtentRequired",null);k.__decorate([v.property()],w.prototype,"labelManager",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,
"resourceManager",null);k.__decorate([v.property({readOnly:!0})],w.prototype,"textureManager",null);k.__decorate([v.property({readOnly:!0})],w.prototype,"mapViewNavigation",void 0);k.__decorate([v.property({constructOnly:!0})],w.prototype,"renderCanvas",void 0);k.__decorate([v.property()],w.prototype,"renderingOptions",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"rendering",void 0);k.__decorate([v.property({constructOnly:!0})],w.prototype,"supersampleScreenshotsEnabled",void 0);k.__decorate([v.property({readOnly:!0})],
w.prototype,"supportsGround",void 0);k.__decorate([v.property()],w.prototype,"_stationaryTimer",void 0);k.__decorate([v.property()],w.prototype,"_defaultsFromMapSettings",null);k.__decorate([v.property()],w.prototype,"_pePromise",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"typeSpecificPreconditionsReady",null);k.__decorate([v.property()],w.prototype,"animation",null);k.__decorate([v.property({type:aa})],w.prototype,"background",null);k.__decorate([v.property({value:null,type:e,dependsOn:["state.id",
"ready"]})],w.prototype,"center",null);k.__decorate([v.property({type:y})],w.prototype,"constraints",null);k.__decorate([v.property({value:null,type:c,dependsOn:["state.id","ready"]})],w.prototype,"extent",null);k.__decorate([v.property()],w.prototype,"floors",void 0);k.__decorate([v.property({type:ea})],w.prototype,"highlightOptions",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"inputManager",void 0);k.__decorate([v.property()],w.prototype,"map",void 0);k.__decorate([v.property({value:{top:0,
right:0,bottom:0,left:0},cast:ua=>({top:0,right:0,bottom:0,left:0,...ua})})],w.prototype,"padding",null);k.__decorate([v.property()],w.prototype,"resizeAlign",void 0);k.__decorate([v.property({readOnly:!0,dependsOn:["state.id"]})],w.prototype,"resolution",null);k.__decorate([v.property({value:0,type:Number,dependsOn:["state.id","ready"]})],w.prototype,"rotation",null);k.__decorate([v.property({value:0,type:Number,dependsOn:["state.id","ready"]})],w.prototype,"scale",null);k.__decorate([v.property({constructOnly:!0})],
w.prototype,"spatialReferenceLocked",void 0);k.__decorate([v.property()],w.prototype,"stationary",null);k.__decorate([v.property({type:fa.Timeline,readOnly:!0})],w.prototype,"timeline",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"type",void 0);k.__decorate([v.property({readOnly:!0})],w.prototype,"updating",null);k.__decorate([v.property({value:null,type:t,dependsOn:["state.id","ready"]})],w.prototype,"viewpoint",null);k.__decorate([v.property({value:-1,dependsOn:["state.id","ready"]})],
w.prototype,"zoom",null);k.__decorate([v.property({readOnly:!0})],w.prototype,"navigating",null);k.__decorate([v.property({type:X})],w.prototype,"ui",void 0);return w=k.__decorate([x.subclass("esri.views.MapView")],w)});