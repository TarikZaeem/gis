// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(p,e,q,r,f,E,F,w,t,x,y,z){return a=>{a=function(m){function n(){var g=m.apply(this,arguments)||this;g.view=null;return g}
p._inheritsLoose(n,m);var u=n.prototype;u.fetchPopupFeatures=function(){var g=p._asyncToGenerator(function*(c,d){const {layer:h}=this;if(!c)throw new q("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:h});var {popupEnabled:b}=h;const k=z.getFetchPopupTemplate(h,d);if(!b||r.isNone(k))throw new q("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:b,popupTemplate:k});const A=yield k.getRequiredFields();b=new y;b.timeExtent=
this.timeExtent;b.geometry=c;b.outFields=A;b.outSpatialReference=c.spatialReference;const {resolution:l,spatialReference:v}=this.view;c="2d"===this.view.type?new t(l,l,v):new t(.5*l,.5*l,v);const {returnTopmostRaster:B,showNoDataRecords:C}=k.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};d={returnDomainValues:!0,returnTopmostRaster:B,pixelSize:c,showNoDataRecords:C,signal:r.isSome(d)?d.signal:null};return h.queryVisibleRasters(b,d).then(D=>D)});return function(c,d){return g.apply(this,
arguments)}}();u.canResume=function(){return!m.prototype.canResume.call(this)||this.timeExtent?.isEmpty?!1:!0};return n}(a);e.__decorate([f.property()],a.prototype,"layer",void 0);e.__decorate([f.property()],a.prototype,"suspended",void 0);e.__decorate([f.property(x.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);e.__decorate([f.property()],a.prototype,"view",void 0);return a=e.__decorate([w.subclass("esri.views.layers.ImageryLayerView")],a)}});