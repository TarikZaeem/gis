// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/reactiveUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../viewpointUtils ../../../navigation/PanPlanarMomentumEstimator ../../../../geometry/Point".split(" "),
function(t,h,f,u,v,w,x,k,C,D,y,z,n,p,A,B){f=function(q){function l(b){var a=q.call(this,b)||this;a.animationTime=0;a.momentumEstimator=new A.PanPlanarMomentumEstimator(500,6,.92);a.momentum=null;a.tmpMomentum=n.create();a.momentumFinished=!1;a.viewpoint=new u({targetGeometry:new B,scale:0,rotation:0});a._previousDrag=null;w.when(()=>a.momentumFinished,()=>a.navigation.stop());return a}t._inheritsLoose(l,q);var g=l.prototype;g.begin=function(b,a){this.navigation.begin();this.momentumEstimator.reset();
this.addToEstimator(a);this._previousDrag=a};g.update=function(b,a){this.addToEstimator(a);let c=a.center.x,d=a.center.y;const e=this._previousDrag;c=e?e.center.x-c:-c;d=e?d-e.center.y:d;b.viewpoint=p.translateBy(this.viewpoint,b.viewpoint,[c||0,d||0]);this._previousDrag=a};g.end=function(b,a){this.addToEstimator(a);this.momentum=b.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null;this.animationTime=0;if(this.momentum)this.onAnimationUpdate(b);this._previousDrag=null;this.navigation.end()};
g.addToEstimator=function(b){var a=b.center.x;const c=b.center.y,d=x.createScreenPointArray(-a,c);a=n.fromValues(-a,c,0);this.momentumEstimator.add(d,a,.001*b.timestamp)};g.onAnimationUpdate=function(b){this.navigation.animationManager?.animateContinous(b.viewpoint,(a,c)=>{const {momentum:d,animationTime:e,tmpMomentum:r}=this;var m=this.momentumFinished=!d||d.isFinished(e);c*=.001;m||(m=d.valueDelta(e,c),z.scale(r,d.direction,m),p.translateBy(a,a,r),b.constraints.constrainByGeometry(a));this.animationTime+=
c})};g.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};return l}(v);h.__decorate([k.property()],f.prototype,"momentumFinished",void 0);h.__decorate([k.property()],f.prototype,"viewpoint",void 0);h.__decorate([k.property()],f.prototype,"navigation",void 0);return f=h.__decorate([y.subclass("esri.views.2d.navigation.actions.Pan")],f)});