// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ./Manipulation ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator ../../../../interactive/editGeometry/interfaces ../../../../interactive/support/utils".split(" "),function(q,B,C,r,t,D,u,E){let J=function(v){function k(b){var c=v.call(this)||this;c._view=b.view;c._tool=b.tool;c._graphic=b.graphic;c._manipulator=c._createManipulator();c.forEachManipulator(f=>c._tool.manipulators.add(f));
return c}B._inheritsLoose(k,v);var g=k.prototype;g.destroy=function(){this.forEachManipulator(b=>{this._tool.manipulators.remove(b);b.destroy()});this._graphic=this._manipulator=this._view=this._tool=null};g.forEachManipulator=function(b){b(this._manipulator,r.ManipulatorType.TRANSLATE_XY)};g.createDragPipeline=function(b,c){let f=null,e=null,l=0,m=0,n=0;const {offsetX:w,offsetY:x,size:y}=E.getSymbolInfo(C.unwrap(this._graphic.symbol));return t.createManipulatorDragEventPipeline(this._manipulator,
(K,F)=>{F.next(a=>{if("start"===a.action){const d=b();f=d.editGeometryOperations;e=d.constraints}return a}).next(t.screenToMap(this._view)).next(a=>{const {x:d,y:h,z}=a.mapEnd;if(e&&(d+w<e.xmin||h+x-y<e.ymin||d+w>e.xmax||h+x-y>e.ymax))return a;"start"===a.action&&(l=a.mapStart.x,m=a.mapStart.y,n=a.mapStart.z);var p=d-l;const G=h-m,H=z-n;l=d;m=h;n=z;const A=[];for(const I of f.data.components)A.push(...I.vertices);p=f.moveVertices(A,p,G,H,"start"===a.action?u.AccumulationBehaviour.NEW_STEP:u.AccumulationBehaviour.ACCUMULATE_STEPS);
c(a,p);return a})})};g._createManipulator=function(){return new D.GraphicManipulator({view:this._view,graphic:this._graphic,selectable:!0,cursor:"move"})};return k}(r.Manipulation);q.DragManipulation=J;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})});