// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../request ../../../../../core/lang ../../../../../core/MapUtils ../../../../../core/promiseUtils".split(" "),function(g,k,l,m,n,h){function p(b,e){return n.getOrCreateMapValue(f,b,()=>new q(b)).getData(e).then(a=>{f.delete(b);return a}).catch(a=>{f.delete(b);throw a;})}let q=function(){function b(a){this._tileUrl=a;this._abortController=this._promise=null;this._abortOptions=[]}var e=b.prototype;e.getData=function(a){null===
this._promise&&(this._abortController=new AbortController,this._promise=this._makeRequest(this._tileUrl,this._abortController.signal));const c=this._abortOptions;c.push(a);h.onAbort(a,()=>{c.every(d=>h.isAborted(d))&&this._abortController.abort()});return this._promise.then(d=>m.clone(d))};e._makeRequest=function(){var a=k._asyncToGenerator(function*(c,d){({data:c}=yield l(c,{responseType:"array-buffer",signal:d}));return c});return function(c,d){return a.apply(this,arguments)}}();return b}();const f=
new Map;g.request=function(b,e,a,c,d){b=b.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,a.toString()).replace(/\{x\}/gi,c.toString());return p(b,d)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});