// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/has ../../core/Logger ../../core/maybe ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./engine/webgl/collisions/CollisionEngine".split(" "),function(g,d,b,u,m,n,v,p,q,e,w,x,r,t){b=function(k){function f(a){a=k.call(this,a)||this;a._applyVisibilityPassThrottled=
q.throttle(a._applyVisibilityPass,32,g._assertThisInitialized(a));a.lastUpdateId=-1;a.updateRequested=!1;a.view=null;return a}g._inheritsLoose(f,k);var c=f.prototype;c.initialize=function(){this.collisionEngine=new t.CollisionEngine};c.destroy=function(){this.collisionEngine=null;this._applyVisibilityPassThrottled=p.removeMaybe(this._applyVisibilityPassThrottled)};c.update=function(a){this._applyVisibilityPassThrottled(a)};c.viewChange=function(){this.requestUpdate()};c.requestUpdate=function(){this.updateRequested||
(this.updateRequested=!0,this.view?.requestUpdate())};c.processUpdate=function(a){this._set("updateParameters",a);this.updateRequested&&(this.updateRequested=!1,this.update(a))};c._applyVisibilityPass=function(a){const h=this.view;if(h)try{const l=h.featuresTilingScheme.getClosestInfoForScale(a.state.scale).level;this.collisionEngine.run(h.allLayerViews.items,a,l)}catch(l){}};g._createClass(f,[{key:"updating",get:function(){n("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`);
return this.updateRequested}}]);return f}(m.HandleOwnerMixin(b));d.__decorate([e.property()],b.prototype,"updateRequested",void 0);d.__decorate([e.property({readOnly:!0})],b.prototype,"updateParameters",void 0);d.__decorate([e.property()],b.prototype,"updating",null);d.__decorate([e.property()],b.prototype,"view",void 0);return b=d.__decorate([r.subclass("esri.views.2d.layers.labels.LabelManager")],b)});