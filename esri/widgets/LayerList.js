// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(T,D,t,G,Q,Y,P,C,l,E,H,U){const B=t.ofType(H);t=function(ha){function oa(q){q=
ha.call(this,q)||this;q._handles=new Q;q.checkPublishStatusEnabled=!1;q.listItemCreatedFunction=null;q.operationalItems=new B;q.view=null;return q}T._inheritsLoose(oa,ha);var O=oa.prototype;O.initialize=function(){this._handles.add([Y.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),Y.initial),Y.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")};O.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};
O.triggerAction=function(q,n){q&&!q.disabled&&this.emit("trigger-action",{action:q,item:n})};O.moveListItem=function(q,n,y,K){const x=q?.layer;if(x){var ia=this.view?.map?.layers,V=n?U.getItemLayers(n):ia;ia=y?U.getItemLayers(y):ia;if(V&&ia){var {operationalItems:r}=this;n=n?.children||r;r=y?.children||r;K=ia.length-K;q.parent=y||null;n.includes(q)&&n.remove(q);V.includes(x)&&V.remove(x);r.includes(q)||r.add(q,K);ia.includes(x)||ia.add(x,K)}}};O._createLayerViewHandles=function(q){const {_handles:n}=
this;n.remove("layer-views");this._compileList();q&&n.add(q.on("change",()=>this._compileList()),"layer-views")};O._createMapLayerHandles=function(q){const {_handles:n}=this;n.remove("map-layers");this._compileList();q&&n.add(q.on("change",()=>this._compileList()),"map-layers")};O._createListItem=function(q){const {view:n,listItemCreatedFunction:y,checkPublishStatusEnabled:K}=this;return new H({checkPublishStatusEnabled:K,layer:q,listItemCreatedFunction:y,view:n})};O._removeAllItems=function(){const {_handles:q,
operationalItems:n}=this;n.forEach(y=>{q.remove(`${"children"}-${y.uid}`)});n.removeAll()};O._getViewableLayers=function(q){if(q)return q.filter(n=>"hide"!==U.findLayerListMode(n))};O._watchLayersListMode=function(q){const {_handles:n}=this;n.remove("layer-list-mode");q&&q.forEach(y=>{"listMode"in y&&n.add(Y.watch(()=>y.listMode,()=>this._compileList()),"layer-list-mode")})};O._compileList=function(){var q=this.get("view.map.layers");this._watchLayersListMode(q);(q=this._getViewableLayers(q))&&q.length?
(this._createNewItems(q),this._removeItems(q),this._sortItems(q)):this._removeAllItems()};O._createNewItems=function(q){const {operationalItems:n}=this;q.forEach(y=>{n.find(K=>K.layer===y)||n.add(this._createListItem(y))})};O._removeItems=function(q){const {_handles:n,operationalItems:y}=this,K=[];y.forEach(x=>{x&&q&&q.includes(x.layer)||(n.remove(`${"children"}-${x.uid}`),K.push(x))});y.removeMany(K)};O._sortItems=function(q){const {operationalItems:n}=this;n.sort((y,K)=>{y=q.indexOf(y.layer);K=
q.indexOf(K.layer);return y>K?-1:y<K?1:0})};O._recompileList=function(){this._removeAllItems();this._compileList()};O._viewHandles=function(){const {_handles:q,view:n}=this;q.remove(["map-layers","layer-views","view-layers"]);this._compileList();n&&n.ready&&q.add([Y.watch(()=>this.view?.map?.allLayers,y=>this._createMapLayerHandles(y),Y.initial),Y.watch(()=>this.view?.allLayerViews,y=>this._createLayerViewHandles(y),Y.initial)],"view-layers")};T._createClass(oa,[{key:"state",get:function(){const q=
this.get("view");return this.get("view.ready")?"ready":q?"loading":"disabled"}}]);return oa}(G.EventedAccessor);D.__decorate([P.property()],t.prototype,"checkPublishStatusEnabled",void 0);D.__decorate([P.property()],t.prototype,"listItemCreatedFunction",void 0);D.__decorate([P.property({type:B})],t.prototype,"operationalItems",void 0);D.__decorate([P.property({readOnly:!0})],t.prototype,"state",null);D.__decorate([P.property()],t.prototype,"view",void 0);return t=D.__decorate([E.subclass("esri.widgets.LayerList.LayerListViewModel")],
t)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(T,D,t,G,Q,Y,P,C,l,E,H,U,B,ha,oa,O,q,n){var y;H=G.ofType({key:"type",defaultKeyValue:"button",base:B,typeMap:{button:ha,toggle:O,slider:oa}});const K=G.ofType(H);t=y=function(x){function ia(r){r=x.call(this,r)||this;r.actionsSections=new K;r.actionsOpen=!1;r.checkPublishStatusEnabled=!1;r.children=new (G.ofType(y));r.childrenSortable=!0;r.hidden=!1;r.layer=null;r.layerView=null;r.listItemCreatedFunction=null;r.open=!1;r.panel=null;r.parent=null;r.sortable=!0;r.view=null;return r}T._inheritsLoose(ia,
x);var V=ia.prototype;V.initialize=function(){this.handles.add([C.watch(()=>this.layer,r=>this._watchLayerProperties(r),C.initial),C.watch(()=>this.checkPublishStatusEnabled,r=>this._updateChildrenPublishing(r),C.initial),C.watch(()=>this.view,r=>this._updateChildrenView(r),C.initial),C.watch(()=>this.panel,r=>this._setListItemOnPanel(r),C.initial),C.watch(()=>[this.layer,this.view],()=>this._getLayerView(),C.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})};V.destroy=function(){this.view=null};V.castPanel=function(r){this.get("panel.open")&&!r.hasOwnProperty("open")&&(r.open=!0);return r?new q(r):null};V.clone=function(){return new y({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};
V._setListItemOnPanel=function(r){r&&(r.listItem=this)};V._updateChildrenPublishing=function(r){const R=this.children;R&&R.forEach(da=>da.checkPublishStatusEnabled=r)};V._updateChildrenView=function(r){const R=this.children;R&&R.forEach(da=>da.view=r)};V._addChildren=function(r){this.handles.remove("child-list-mode");this.children.removeAll();if(r){r.forEach(da=>{this.handles.add(C.watch(()=>da.listMode,()=>this._addChildren(r)),"child-list-mode")});var R=r.filter(da=>"hide"!==n.findLayerListMode(da));
this.children.addMany(this._makeChildren(R))}};V._watchSublayerChanges=function(r){r&&this.handles.add(r.on("change",()=>{this._addChildren(r)}),"layer")};V._initializeChildLayers=function(r){this._addChildren(r);this._watchSublayerChanges(r)};V._makeChildren=function(r){return r.map(R=>n.canDisplayLayer(R)?new y({layer:R,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(P.isSome).reverse()};V._watchLayerProperties=
function(r){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),r))if(this.handles.add(C.watch(()=>r.listMode,()=>this._watchLayerProperties(r)),"layer"),"hide-children"===n.findLayerListMode(r))this.children.removeAll();else{var R=n.getNormalizedChildLayerProperty(r);R&&this.handles.add(C.watch(()=>r[R],()=>{r.hasOwnProperty(R)&&this._initializeChildLayers(r[R])},C.initial),"layer")}};V._getLayerView=function(){var r=T._asyncToGenerator(function*(){const {layer:R,
view:da}=this;if(R&&da)try{const wa=yield da.whenLayerView(R);wa.layer===this.layer&&this._set("layerView",wa)}catch{}});return function(){return r.apply(this,arguments)}}();T._createClass(ia,[{key:"connectionStatus",get:function(){const {layerView:r,publishing:R}=this;if(!R&&r&&"connectionStatus"in r)return r.connectionStatus}},{key:"error",get:function(){return this.layer?.loadError}},{key:"incompatible",get:function(){const {layerView:r}=this;return r&&"spatialReferenceSupported"in r?!r.spatialReferenceSupported:
!1}},{key:"title",get:function(){const r=this.get("layer.layer");return(!r||r&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(r){this._override("title",r)}},{key:"publishing",get:function(){const {layer:r,checkPublishStatusEnabled:R}=this;return R&&r&&"publishingInfo"in r&&"publishing"===r.publishingInfo?.status}},{key:"updating",get:function(){const {layerView:r,connectionStatus:R,layer:da,publishing:wa}=this;return wa||R?!1:r?r.updating:
"loading"===da?.loadStatus||!1}},{key:"visible",get:function(){return this.layer?.visible},set:function(r){const R=this.layer;R&&(R.visible=r)}},{key:"visibleAtCurrentScale",get:function(){return!n.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return n.findLayerVisibilityMode(this.layer)}}]);return ia}(Y.IdentifiableMixin(Q.HandleOwnerMixin(t)));D.__decorate([l.property({type:K})],t.prototype,"actionsSections",void 0);D.__decorate([l.property()],
t.prototype,"actionsOpen",void 0);D.__decorate([l.property()],t.prototype,"checkPublishStatusEnabled",void 0);D.__decorate([l.property({type:G})],t.prototype,"children",void 0);D.__decorate([l.property()],t.prototype,"childrenSortable",void 0);D.__decorate([l.property({readOnly:!0})],t.prototype,"connectionStatus",null);D.__decorate([l.property({readOnly:!0})],t.prototype,"error",null);D.__decorate([l.property()],t.prototype,"hidden",void 0);D.__decorate([l.property({readOnly:!0})],t.prototype,"incompatible",
null);D.__decorate([l.property()],t.prototype,"layer",void 0);D.__decorate([l.property({readOnly:!0})],t.prototype,"layerView",void 0);D.__decorate([l.property()],t.prototype,"listItemCreatedFunction",void 0);D.__decorate([l.property()],t.prototype,"open",void 0);D.__decorate([l.property({type:q})],t.prototype,"panel",void 0);D.__decorate([E.cast("panel")],t.prototype,"castPanel",null);D.__decorate([l.property()],t.prototype,"parent",void 0);D.__decorate([l.property()],t.prototype,"sortable",void 0);
D.__decorate([l.property()],t.prototype,"title",null);D.__decorate([l.property({readOnly:!0})],t.prototype,"publishing",null);D.__decorate([l.property({readOnly:!0})],t.prototype,"updating",null);D.__decorate([l.property()],t.prototype,"view",void 0);D.__decorate([l.property()],t.prototype,"visible",null);D.__decorate([l.property({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null);D.__decorate([l.property({readOnly:!0})],t.prototype,"visibilityMode",null);return t=y=D.__decorate([U.subclass("esri.widgets.LayerList.ListItem")],
t)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(T,D,t,G,Q,Y,P){var C;G=C=function(l){function E(H){H=l.call(this,H)||this;H.displayValueEnabled=!1;H.max=1;H.min=0;H.step=.1;H.type="slider";H.value=null;return H}T._inheritsLoose(E,l);E.prototype.clone=
function(){return new C({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return E}(P);D.__decorate([t.property()],G.prototype,"displayValueEnabled",void 0);D.__decorate([t.property()],G.prototype,"max",void 0);D.__decorate([t.property()],G.prototype,"min",void 0);D.__decorate([t.property()],G.prototype,
"step",void 0);D.__decorate([t.property()],G.prototype,"value",void 0);return G=C=D.__decorate([Y.subclass("esri.support.Action.ActionSlider")],G)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(T,D,t,G,Q,Y,P,C,l,E,H,U,B,ha){Q=function(oa){function O(n,y){n=oa.call(this,n,y)||this;n._legend=null;n._handles=new G;n.content=null;n.image=null;n.listItem=null;n.open=!1;n.visible=!0;return n}D._inheritsLoose(O,oa);var q=O.prototype;q.initialize=function(){this.addHandles(Y.watch(()=>this.content,n=>this._createLegend(n),Y.initial))};q.destroy=function(){const {_legend:n}=this;n&&n.destroy();this._legend=null};q.render=function(){return ha.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
q._renderContent=function(n){const {_legend:y,disabled:K}=this;return!n||K?null:"legend"===n&&y?ha.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:y},y.render()):"string"===typeof n?ha.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:n,innerHTML:n}):B.isWidget(n)?ha.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:n},n.render()):
n instanceof HTMLElement?ha.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:n,bind:n,afterCreate:this._attachToNode}):null};q._renderContents=function(){const {content:n}=this;return Array.isArray(n)?n.map(y=>this._renderContent(y)):this._renderContent(n)};q._getLegendOptions=function(){const {listItem:n}=this;if(!n)return{};const {layer:y,view:K}=n;return y&&K?{view:K,layerInfos:[U.getLegendLayerInfo(y)]}:{}};q._createLegend=function(n){this._hasLegend(n)&&
!this._legend&&(new Promise((y,K)=>T(["../Legend"],x=>y(Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}))),K))).then(({default:y})=>{const {_handles:K,listItem:x}=this,ia=new y(this._getLegendOptions());this._legend=ia;this.notifyChange("className");this.notifyChange("title");y=Y.watch(()=>[x?.view,x?.layer,x?.layer?.source,x?.layer?.parent],()=>this._updateLegend(ia),Y.initial);K.add(y,"legends");this.scheduleRender()})};q._hasLegend=function(n){return"legend"===
n?!0:Array.isArray(n)?n.includes("legend"):!1};q._attachToNode=function(n){n.appendChild(this)};q._updateLegend=function(n){n.set(this._getLegendOptions());this.scheduleRender()};q._getWidget=function(n){return"legend"===n?this._legend:B.isWidget(n)?n:null};q._getFirstWidget=function(){const {content:n}=this;if(Array.isArray(n)){let y=null;n.some(K=>{(K=this._getWidget(K))&&(y=K);return!!K});return y}return this._getWidget(n)};D._createClass(O,[{key:"className",get:function(){const {image:n}=this,
y=this._getFirstWidget();return this._get("className")||!n&&y?y.iconClass:""},set:function(n){this._override("className",n)}},{key:"disabled",get:function(){const {listItem:n,_legend:y,content:K}=this;return n?Array.isArray(K)&&1<K.length?!1:y?!y.activeLayerInfos?.length||!n.visibleAtCurrentScale:!1:!0},set:function(n){this._overrideIfSome("disabled",n)}},{key:"title",get:function(){const n=this._getFirstWidget();return this._get("title")||n?n.label:""},set:function(n){this._override("title",n)}}]);
return O}(Q.IdentifiableMixin(H));t.__decorate([P.property()],Q.prototype,"_legend",void 0);t.__decorate([P.property()],Q.prototype,"className",null);t.__decorate([P.property()],Q.prototype,"content",void 0);t.__decorate([P.property()],Q.prototype,"disabled",null);t.__decorate([P.property()],Q.prototype,"image",void 0);t.__decorate([P.property()],Q.prototype,"listItem",void 0);t.__decorate([P.property()],Q.prototype,"title",null);t.__decorate([P.property()],Q.prototype,"open",void 0);t.__decorate([P.property()],
Q.prototype,"visible",void 0);return Q=t.__decorate([E.subclass("esri.widgets.LayerList.ListItemPanel")],Q)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(T){function D(l){if(l)return null!=l.listMode?l.listMode:void 0}function t(l){if(l)return null!=l.minScale?l.minScale:void 0}function G(l){if(l)return null!=l.maxScale?l.maxScale:void 0}function Q(l){if(l&&!("type"in l&&"wmts"===l.type)&&l.listMode!==C.hideChildren)return"sublayers"in l?"sublayers":"layers"in
l?"layers":void 0}function Y(l,E){l&&l.sort((H,U)=>{H=E.indexOf(H.uid);U=E.indexOf(U.uid);return H>U?-1:H<U?1:0})}function P(l){return!!l?.layer}const C={hide:"hide",hideChildren:"hide-children"};T.canDisplayLayer=function(l){return D(l)!==C.hide};T.canSortSublayers=function(l){l=l&&(l.get("layer.layer")||l.layer);if(!l)return!1;l=l.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof l?l:!0};T.findLayerListMode=D;T.findLayerMaxScale=G;T.findLayerMinScale=t;T.findLayerVisibilityMode=
function(l){if(!l)return"inherited";var E=l.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof E)return E?"independent":"inherited";E=l.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof E?E?"independent":"inherited":null!=l.visibilityMode?l.visibilityMode:"independent"};T.findSelectedItem=function(l,E){const H=l.layer?.uid;return H&&E.find(U=>U.layer?.uid===H)};T.getItemLayers=function(l){return(l=l?.layer)&&"layers"in l?l.layers:null};
T.getLegendLayerInfo=function(l){var E=P(l)?l:null;const H=l?.parent;return(E="map-image"===H?.type&&E.source)&&H?{layer:H,title:"",sublayerIds:[E.mapLayerId]}:{layer:l,title:""}};T.getNormalizedChildLayerProperty=Q;T.isLayerOutsideScaleRange=function(l,E){if(!l||isNaN(E))return!1;var H=t(l);l=G(l);H=!isNaN(H)&&0<H&&E>H;E=!isNaN(l)&&0<l&&E<l;return H||E};T.isSublayer=P;T.sortChildLayersToIds=function(l,E){if(l=l?.layer){var H=Q(l);H&&(l=l.get(H),Y(l,E))}};T.sortLayersToIds=Y;Object.defineProperty(T,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(T){function D(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?D(Object(c),!0).forEach(function(e){var g=c[e];e in a?Object.defineProperty(a,
e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function G(a){"@babel/helpers - typeof";G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":
typeof b};return G(a)}function Q(){Q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return Q.apply(this,arguments)}function Y(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var k=e[g];0<=b.indexOf(k)||(c[k]=a[k])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),k=0;k<g.length;k++)e=g[k],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,
e)&&(c[e]=a[e]);return c}function P(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function C(a,b,c){a.addEventListener(b,c,!Aa&&ub)}function l(a,b,c){a.removeEventListener(b,c,!Aa&&ub)}function E(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function H(a,b,c,e){if(a){c=c||document;do{if(null!=
b&&("\x3e"===b[0]?a.parentNode===c&&E(a,b):E(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function U(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(vb," ")}}function B(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,
""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function ha(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=B(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function oa(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}
function O(){var a=document.scrollingElement;return a?a:document.documentElement}function q(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==O()){var k=a.getBoundingClientRect();var m=k.top;var w=k.left;var z=k.bottom;var F=k.right;var I=k.height;var N=k.width}else w=m=0,z=window.innerHeight,F=window.innerWidth,I=window.innerHeight,N=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!Aa)){do if(g&&g.getBoundingClientRect&&("none"!==B(g,"transform")||c&&
"static"!==B(g,"position"))){z=g.getBoundingClientRect();m-=z.top+parseInt(B(g,"border-top-width"));w-=z.left+parseInt(B(g,"border-left-width"));z=m+k.height;F=w+k.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=ha(g||a))&&a.a,g=a&&a.d,a&&(m/=g,w/=e,N/=e,I/=g,z=m+I,F=w+N));return{top:m,left:w,bottom:z,right:F,width:N,height:I}}}function n(a,b,c){var e=V(a,!0);for(a=q(a)[b];e;){b=q(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===O())break;e=V(e,!1)}return!1}function y(a,
b,c,e){for(var g=0,k=0,m=a.children;k<m.length;){if("none"!==m[k].style.display&&m[k]!==p.ghost&&(e||m[k]!==p.dragged)&&H(m[k],c.draggable,a,!1)){if(g===b)return m[k];g++}k++}return null}function K(a,b){for(a=a.lastElementChild;a&&(a===p.ghost||"none"===B(a,"display")||b&&!E(a,b));)a=a.previousElementSibling;return a||null}function x(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===p.clone||b&&!E(a,b)||c++;return c}function ia(a){var b=
0,c=0,e=O();if(a){do{var g=ha(a),k=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[b,c]}function V(a,b){if(!a||!a.getBoundingClientRect)return O();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=B(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=
a.parentNode);return O()}function r(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function R(a,b){return function(){if(!Qa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Qa=setTimeout(function(){Qa=void 0},b)}}}function da(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function wa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):
c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Ha(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==B(c,"display")&&c!==p.ghost){a.push({target:c,rect:q(c)});var e=t({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=ha(c,!0);g&&(e.top-=g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){var e=a,g=e.splice;a:{var k=a;c={target:c};for(var m in k)if(k.hasOwnProperty(m))for(var w in c)if(c.hasOwnProperty(w)&&
c[w]===k[m][w]){k=Number(m);break a}k=-1}g.call(e,k,1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,k=0;a.forEach(function(m){var w=0,z=m.target,F=z.fromRect,I=q(z),N=z.prevFromRect,ka=z.prevToRect;m=m.rect;var ea=ha(z,!0);ea&&(I.top-=ea.f,I.left-=ea.e);z.toRect=I;z.thisAnimationDuration&&r(N,I)&&!r(F,I)&&(m.top-I.top)/(m.left-I.left)===(F.top-I.top)/(F.left-I.left)&&(w=Math.sqrt(Math.pow(N.top-m.top,2)+Math.pow(N.left-m.left,2))/Math.sqrt(Math.pow(N.top-ka.top,2)+Math.pow(N.left-
ka.left,2))*e.options.animation);r(I,F)||(z.prevFromRect=F,z.prevToRect=I,w||(w=e.options.animation),e.animate(z,m,I,w));w&&(g=!0,k=Math.max(k,w),clearTimeout(z.animationResetTimer),z.animationResetTimer=setTimeout(function(){z.animationTime=0;z.prevFromRect=null;z.fromRect=null;z.prevToRect=null;z.thisAnimationDuration=null},w),z.thisAnimationDuration=w)});clearTimeout(b);g?b=setTimeout(function(){"function"===typeof c&&c()},k):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&
c()},animate:function(c,e,g,k){if(k){B(c,"transition","");B(c,"transform","");var m=ha(this.el),w=(e.left-g.left)/(m&&m.a||1);e=(e.top-g.top)/(m&&m.d||1);c.animatingX=!!w;c.animatingY=!!e;B(c,"transform","translate3d("+w+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;B(c,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));B(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){B(c,"transition",
"");B(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},k)}}}}function ba(a){var b=t({putSortable:la,cloneEl:aa,targetEl:v,rootEl:Z,oldIndex:La,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Da},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,k=b.cloneEl,m=b.toEl,w=b.fromEl,z=b.oldIndex,F=b.newIndex,I=b.oldDraggableIndex,N=b.newDraggableIndex,ka=b.originalEvent,ea=b.putSortable,ma=b.extraEventProperties;if(a=a||c&&c[sa]){var X=a.options,ta="on"+e.charAt(0).toUpperCase()+e.substr(1);
!window.CustomEvent||Aa||Sa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=m||c;b.from=w||c;b.item=g||c;b.clone=k;b.oldIndex=z;b.newIndex=F;b.oldDraggableIndex=I;b.newDraggableIndex=N;b.originalEvent=ka;b.pullMode=ea?ea.lastPutMode:void 0;e=t(t({},ma),Ta.getEventProperties(e,a));for(var ua in e)b[ua]=e[ua];c&&c.dispatchEvent(b);X[ta]&&X[ta].call(a,b)}}function p(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));
this.el=a;this.options=b=Q({},b);a[sa]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,m){k.setData("Text",m.textContent)},dropBubble:!1,
dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==p.supportPointer&&"PointerEvent"in window&&!Ua,emptyInsertThreshold:5};Ta.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);xb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&
(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?C(a,"pointerdown",this._onTapStart):(C(a,"mousedown",this._onTapStart),C(a,"touchstart",this._onTapStart));this.nativeDraggable&&(C(a,"dragover",this),C(a,"dragenter",this));$a.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);Q(this,Ha())}function d(a,b,c,e,g,k,m,w){var z=a[sa],F=z.options.onMove,I;if(!window.CustomEvent||Aa||Sa){var N=document.createEvent("Event");
N.initEvent("move",!0,!0)}else N=new CustomEvent("move",{bubbles:!0,cancelable:!0});N.to=b;N.from=a;N.dragged=c;N.draggedRect=e;N.related=g||b;N.relatedRect=k||q(b);N.willInsertAfter=w;N.originalEvent=m;a.dispatchEvent(N);F&&(I=F.call(z,N,m));return I}function f(a){a.draggable=!1}function h(){kb=!1}function u(a,b,c){c=q(y(c.el,0,c.options,!0));return b?a.clientX<c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function A(a,b,c){c=q(K(c.el,c.options.draggable));
return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function J(a,b,c,e,g,k,m,w){a=e?a.clientY:a.clientX;var z=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!m)if(w&&ab<z*g)if(!Va&&(1===Wa?a>F+z*k/2:a<c-z*k/2)&&(Va=!0),Va)e=!0;else{if(1===Wa?a<F+ab:a>c-ab)return-Wa}else if(a>F+z*(1-g)/2&&a<c-z*(1-g)/2)return b=x(v)<x(b)?1:-1,b;if(e||m)if(a<F+z*k/2||a>c-z*k/2)return a>
F+z/2?1:-1;return 0}function M(a){bb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&bb.push(c)}}function S(a){return setTimeout(a,0)}function ja(){fa.forEach(function(a){clearInterval(a.pid)});fa=[]}function Ba(){}function Ea(){}var Aa=P(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Sa=P(/Edge/i),yb=P(/firefox/i),Ua=P(/safari/i)&&!P(/chrome/i)&&!P(/android/i),Xa=P(/iP(ad|od|hone)/i),zb=P(/chrome/i)&&P(/android/i),ub={capture:!1,passive:!1},vb=
/\s+/g,Qa,sa="Sortable"+(new Date).getTime(),Ma=[],lb={initializeByDefault:!0},Ta={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);Ma.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Ma.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";Ma.forEach(function(k){if(b[k.pluginName]){if(b[k.pluginName][g])b[k.pluginName][g](t({sortable:b},
c));if(b.options[k.pluginName]&&b[k.pluginName][a])b[k.pluginName][a](t({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Ma.forEach(function(k){var m=k.pluginName;if(a.options[m]||k.initializeByDefault)k=new k(a,b,a.options),k.sortable=a,k.options=a.options,a[m]=k,Q(c,k.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};Ma.forEach(function(e){"function"===
typeof e.eventProperties&&Q(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Ma.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],c))});return e}},Jb=["evt"],qa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=Y(c,Jb);Ta.pluginEvent.bind(p)(a,b,t({dragEl:v,parentEl:ca,ghostEl:L,rootEl:Z,nextEl:Ia,lastDownEl:cb,cloneEl:aa,cloneHidden:Fa,
dragStarted:Ya,putSortable:la,activeSortable:p.active,originalEvent:e,oldIndex:La,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Da,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){Fa=!0},cloneNowShown:function(){Fa=!1},dispatchSortableEvent:function(g){ba({sortable:b,name:g,originalEvent:e})}},c))},v,ca,L,Z,Ia,cb,aa,Fa,La,ra,Ra,Da,db,la,Na=!1,eb=!1,$a=[],Ja,va,mb,nb,Cb,Db,Ya,Oa,Wa,Va=!1,fb=!1,ab,na,ob=[],kb=!1,bb=[],gb="undefined"!==typeof document,Eb=Sa||Aa?"cssFloat":
"float",Ib=gb&&!zb&&!Xa&&"draggable"in document.createElement("div"),Fb=function(){if(gb){if(Aa)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wb=function(a,b){var c=B(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),g=y(a,0,b);a=y(a,1,b);var k=g&&B(g);b=a&&B(a);var m=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+q(g).width,w=b&&parseInt(b.marginLeft)+
parseInt(b.marginRight)+q(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&k["float"]&&"none"!==k["float"]?(c="left"===k["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):g&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||m>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&m+w>e)?"vertical":
"horizontal"},Kb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var k=c?b.left:b.top,m=c?b.right:b.bottom;b=c?b.width:b.height;return e===k||g===m||e+a/2===k+b/2},Lb=function(a,b){var c;$a.some(function(e){var g=e[sa].options.emptyInsertThreshold;if(g&&!K(e)){var k=q(e),m=b>=k.top-g&&b<=k.bottom+g;if(a>=k.left-g&&a<=k.right+g&&m)return c=e}});return c},xb=function(a){function b(g,k){return function(m,w,z,F){var I=m.options.group.name&&w.options.group.name&&m.options.group.name===
w.options.group.name;if(null==g&&(k||I))return!0;if(null==g||!1===g)return!1;if(k&&"clone"===g)return g;if("function"===typeof g)return b(g(m,w,z,F),k)(m,w,z,F);m=(k?m:w).options.group.name;return!0===g||"string"===typeof g&&g===m||g.join&&-1<g.indexOf(m)}}var c={},e=a.group;e&&"object"==G(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Ab=function(){!Fb&&L&&B(L,"display","none")},Bb=function(){!Fb&&L&&B(L,"display","")};gb&&!zb&&
document.addEventListener("click",function(a){if(eb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),eb=!1},!0);var Ka=function(a){if(v){a=a.touches?a.touches[0]:a;var b=Lb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[sa]._onDragOver(c)}}},Mb=function(a){v&&v.parentNode[sa]._isOutsideThisEl(a.target)};p.prototype={constructor:p,
_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Oa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,k=a.type,m=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,w=(m||a).target,z=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||w,F=e.filter;M(c);
if(!(v||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||z.isContentEditable||!this.nativeDraggable&&Ua&&w&&"SELECT"===w.tagName.toUpperCase()||(w=H(w,e.draggable,c,!1),w&&w.animated||cb===w))){La=x(w);Ra=x(w,e.draggable);if("function"===typeof F){if(F.call(this,a,w,this)){ba({sortable:b,rootEl:z,name:"filter",targetEl:w,toEl:c,fromEl:c});qa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(I){if(I=H(z,I.trim(),c,!1))return ba({sortable:b,
rootEl:I,name:"filter",targetEl:w,fromEl:c,toEl:c}),qa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!H(z,e.handle,c,!1)||this._prepareDragStart(a,m,w)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,k=e.options,m=g.ownerDocument;if(c&&!v&&c.parentNode===g){var w=q(c);Z=g;v=c;ca=v.parentNode;Ia=v.nextSibling;cb=c;db=k.group;p.dragged=v;Ja={target:v,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Ja.clientX-w.left;Db=Ja.clientY-w.top;this._lastX=(b||a).clientX;
this._lastY=(b||a).clientY;v.style["will-change"]="all";c=function(){qa("delayEnded",e,{evt:a});p.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!yb&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,b),ba({sortable:e,name:"choose",originalEvent:a}),U(v,k.chosenClass,!0))};k.ignore.split(",").forEach(function(z){oa(v,z.trim(),f)});C(m,"dragover",Ka);C(m,"mousemove",Ka);C(m,"touchmove",Ka);C(m,"mouseup",e._onDrop);C(m,"touchend",e._onDrop);C(m,"touchcancel",e._onDrop);yb&&this.nativeDraggable&&
(this.options.touchStartThreshold=4,v.draggable=!0);qa("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!b||this.nativeDraggable&&(Sa||Aa)?c():p.eventCanceled?this._onDrop():(C(m,"mouseup",e._disableDelayedDrag),C(m,"touchend",e._disableDelayedDrag),C(m,"touchcancel",e._disableDelayedDrag),C(m,"mousemove",e._delayedDragTouchMoveHandler),C(m,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&C(m,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,k.delay))}},
_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&f(v);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._disableDelayedDrag);l(a,"touchend",this._disableDelayedDrag);
l(a,"touchcancel",this._disableDelayedDrag);l(a,"mousemove",this._delayedDragTouchMoveHandler);l(a,"touchmove",this._delayedDragTouchMoveHandler);l(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):b?C(document,"touchmove",this._onTouchMove):C(document,"mousemove",this._onTouchMove):(C(v,"dragend",this),C(Z,"dragstart",this._onDragStart));
try{document.selection?S(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Na=!1;if(Z&&v){qa("dragStarted",this,{evt:b});this.nativeDraggable&&C(document,"dragover",Mb);var c=this.options;!a&&U(v,c.dragClass,!1);U(v,c.ghostClass,!0);p.active=this;a&&this._appendGhost();ba({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(va){this._lastX=va.clientX;this._lastY=va.clientY;Ab();for(var a=
document.elementFromPoint(va.clientX,va.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(va.clientX,va.clientY);if(a===b)break;b=a}v.parentNode[sa]._isOutsideThisEl(a);if(b){do{if(b[sa]){var c=void 0;if((c=b[sa]._onDragOver({clientX:va.clientX,clientY:va.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ja){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=L&&ha(L,!0),
k=L&&g&&g.a,m=L&&g&&g.d,w=Xa&&na&&ia(na);k=(b.clientX-Ja.clientX+e.x)/(k||1)+(w?w[0]-ob[0]:0)/(k||1);e=(b.clientY-Ja.clientY+e.y)/(m||1)+(w?w[1]-ob[1]:0)/(m||1);if(!p.active&&!Na){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}L&&(g?(g.e+=k-(mb||0),g.f+=e-(nb||0)):g={a:1,b:0,c:0,d:1,e:k,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),B(L,"webkitTransform",c),B(L,"mozTransform",
c),B(L,"msTransform",c),B(L,"transform",c),mb=k,nb=e,va=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!L){var a=this.options.fallbackOnBody?document.body:Z,b=q(v,!0,Xa,!0,a),c=this.options;if(Xa){for(na=a;"static"===B(na,"position")&&"none"===B(na,"transform")&&na!==document;)na=na.parentNode;na!==document.body&&na!==document.documentElement?(na===document&&(na=O()),b.top+=na.scrollTop,b.left+=na.scrollLeft):na=O();ob=ia(na)}L=v.cloneNode(!0);U(L,c.ghostClass,!1);U(L,c.fallbackClass,
!0);U(L,c.dragClass,!0);B(L,"transition","");B(L,"transform","");B(L,"box-sizing","border-box");B(L,"margin",0);B(L,"top",b.top);B(L,"left",b.left);B(L,"width",b.width);B(L,"height",b.height);B(L,"opacity","0.8");B(L,"position",Xa?"absolute":"fixed");B(L,"zIndex","100000");B(L,"pointerEvents","none");p.ghost=L;a.appendChild(L);B(L,"transform-origin",Cb/parseInt(L.style.width)*100+"% "+Db/parseInt(L.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;qa("dragStart",
this,{evt:a});p.eventCanceled?this._onDrop():(qa("setupClone",this),p.eventCanceled||(aa=wa(v),aa.removeAttribute("id"),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),U(aa,this.options.chosenClass,!1),p.clone=aa),c.cloneId=S(function(){qa("clone",c);p.eventCanceled||(c.options.removeCloneOnHide||Z.insertBefore(aa,v),c._hideClone(),ba({sortable:c,name:"clone"}))}),!b&&U(v,g.dragClass,!0),b?(eb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(l(document,"mouseup",c._onDrop),l(document,
"touchend",c._onDrop),l(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,v)),C(document,"drop",c),B(v,"transform","translateZ(0)")),Na=!0,c._dragStartId=S(c._dragStarted.bind(c,b,a)),C(document,"selectstart",c),Ya=!0,Ua&&B(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ga,hb){qa(Ga,X,t({evt:a,isOwner:ka,axis:ua?"vertical":"horizontal",revert:z,dragRect:xa,targetRect:w,canSort:ea,fromSortable:ma,target:m,completed:e,onMove:function(Gb,
Nb){return d(Z,k,v,xa,Gb,q(Gb),a,Nb)},changed:g},hb))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==ma&&ma.captureAnimationState()}function e(Ga){b("dragOverCompleted",{insertion:Ga});Ga&&(ka?N._hideClone():N._showClone(X),X!==ma&&(U(v,la?la.options.ghostClass:N.options.ghostClass,!1),U(v,F.ghostClass,!0)),la!==X&&X!==p.active?la=X:X===p.active&&la&&(la=null),ma===X&&(X._ignoreWhileAnimating=m),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=
null}),X!==ma&&(ma.animateAll(),ma._ignoreWhileAnimating=null));if(m===v&&!v.animated||m===k&&!m.animated)Oa=null;F.dragoverBubble||a.rootEl||m===document||(v.parentNode[sa]._isOutsideThisEl(a.target),!Ga&&Ka(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ta=!0}function g(){ra=x(v);Da=x(v,F.draggable);ba({sortable:X,name:"change",toEl:k,newIndex:ra,newDraggableIndex:Da,originalEvent:a})}var k=this.el,m=a.target,w,z,F=this.options,I=F.group,N=p.active,ka=db===I,ea=F.sort,ma=la||
N,X=this,ta=!1;if(!kb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();m=H(m,F.draggable,k,!0);b("dragOver");if(p.eventCanceled)return ta;if(v.contains(a.target)||m.animated&&m.animatingX&&m.animatingY||X._ignoreWhileAnimating===m)return e(!1);eb=!1;if(N&&!F.disabled&&(ka?ea||(z=ca!==Z):la===this||(this.lastPutMode=db.checkPull(this,N,v,a))&&I.checkPut(this,N,v,a))){var ua="vertical"===this._getDirection(a,m);var xa=q(v);b("dragOverValid");if(p.eventCanceled)return ta;if(z)return ca=Z,
c(),this._hideClone(),b("revert"),p.eventCanceled||(Ia?Z.insertBefore(v,Ia):Z.appendChild(v)),e(!0);I=K(k,F.draggable);if(!I||A(a,ua,this)&&!I.animated){if(I===v)return e(!1);I&&k===a.target&&(m=I);m&&(w=q(m));if(!1!==d(Z,k,v,xa,m,w,a,!!m))return c(),I&&I.nextSibling?k.insertBefore(v,I.nextSibling):k.appendChild(v),ca=k,g(),e(!0)}else if(I&&u(a,ua,this)){var ya=y(k,0,F,!0);if(ya===v)return e(!1);m=ya;w=q(m);if(!1!==d(Z,k,v,xa,m,w,a,!1))return c(),k.insertBefore(v,ya),ca=k,g(),e(!0)}else if(m.parentNode===
k){w=q(m);var W=0;W=v.parentNode!==k;var pa=!Kb(v.animated&&v.toRect||xa,m.animated&&m.toRect||w,ua);I=ua?"top":"left";var Ca=n(m,"top","top")||n(v,"top","top"),ib=Ca?Ca.scrollTop:void 0;Oa!==m&&(ya=w[I],Va=!1,fb=!pa&&F.invertSwap||W);W=J(a,m,w,ua,pa?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,fb,Oa===m);if(0!==W){pa=x(v);do{pa-=W;var za=ca.children[pa]}while(za&&("none"===B(za,"display")||za===L))}if(0===W||za===m)return e(!1);Oa=m;Wa=W;za=m.nextElementSibling;
pa=!1;pa=1===W;W=d(Z,k,v,xa,m,w,a,pa);if(!1!==W){if(1===W||-1===W)pa=1===W;kb=!0;setTimeout(h,30);c();pa&&!za?k.appendChild(v):m.parentNode.insertBefore(v,pa?za:m);Ca&&da(Ca,0,ib-Ca.scrollTop);ca=v.parentNode;void 0===ya||fb||(ab=Math.abs(ya-q(m)[I]));g();return e(!0)}}if(k.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){l(document,"mousemove",this._onTouchMove);l(document,"touchmove",this._onTouchMove);l(document,"pointermove",this._onTouchMove);l(document,
"dragover",Ka);l(document,"mousemove",Ka);l(document,"touchmove",Ka)},_offUpEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._onDrop);l(a,"touchend",this._onDrop);l(a,"pointerup",this._onDrop);l(a,"touchcancel",this._onDrop);l(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ra=x(v);Da=x(v,c.draggable);qa("drop",this,{evt:a});ca=v&&v.parentNode;ra=x(v);Da=x(v,c.draggable);if(!p.eventCanceled&&(Va=fb=Na=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),
clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(l(document,"drop",this),l(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ua&&B(document.body,"user-select",""),B(v,"transform",""),a&&(Ya&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),L&&L.parentNode&&L.parentNode.removeChild(L),(Z===ca||la&&"clone"!==la.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&l(v,"dragend",this),f(v),
v.style["will-change"]="",Ya&&!Na&&U(v,la?la.options.ghostClass:this.options.ghostClass,!1),U(v,this.options.chosenClass,!1),ba({sortable:this,name:"unchoose",toEl:ca,newIndex:null,newDraggableIndex:null,originalEvent:a}),Z!==ca?(0<=ra&&(ba({rootEl:ca,name:"add",toEl:ca,fromEl:Z,originalEvent:a}),ba({sortable:this,name:"remove",toEl:ca,originalEvent:a}),ba({rootEl:ca,name:"sort",toEl:ca,fromEl:Z,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ca,originalEvent:a})),la&&la.save()):ra!==La&&0<=
ra&&(ba({sortable:this,name:"update",toEl:ca,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ca,originalEvent:a})),p.active)))){if(null==ra||-1===ra)ra=La,Da=Ra;ba({sortable:this,name:"end",toEl:ca,originalEvent:a});this.save()}this._nulling()},_nulling:function(){qa("nulling",this);Z=v=ca=L=Ia=aa=cb=Fa=Ja=va=Ya=ra=Da=La=Ra=Oa=Wa=la=db=p.dragged=p.ghost=p.clone=p.active=null;bb.forEach(function(a){a.checked=!0});bb.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,k=this.options;e<g;e++)if(b=c[e],H(b,k.draggable,this.el,!1)){var m=a,w=m.push,z;if(!(z=b.getAttribute(k.dataIdAttr))){b=b.tagName+b.className+b.src+b.href+b.textContent;z=b.length;for(var F=0;z--;)F+=b.charCodeAt(z);z=F.toString(36)}w.call(m,
z)}return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(g,k){k=e.children[k];H(k,this.options.draggable,e,!1)&&(c[g]=k)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return H(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ta.modifyOption(this,
a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&xb(c)},destroy:function(){qa("destroy",this);var a=this.el;a[sa]=null;l(a,"mousedown",this._onTapStart);l(a,"touchstart",this._onTapStart);l(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(l(a,"dragover",this),l(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();$a.splice($a.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Fa||
(qa("hideClone",this),p.eventCanceled||(B(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Fa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Fa&&(qa("showClone",this),p.eventCanceled||(v.parentNode!=Z||this.options.group.revertClone?Ia?Z.insertBefore(aa,Ia):Z.appendChild(aa):Z.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),B(aa,"display",""),Fa=!1))}};gb&&C(document,"touchmove",function(a){(p.active||Na)&&
a.cancelable&&a.preventDefault()});p.utils={on:C,off:l,css:B,find:oa,is:function(a,b){return!!H(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:R,closest:H,toggleClass:U,clone:wa,index:x,nextTick:S,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wb,getChild:y};p.get=function(a){return a[sa]};p.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||
!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(p.utils=t(t({},p.utils),e.utils));Ta.mount(e)})};p.create=function(a,b){return new p(a,b)};p.version="1.15.0";var fa=[],Za,pb,qb=!1,rb,sb,jb,Pa,tb=R(function(a,b,c,e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,w=b.scrollSpeed,z=O(),F=!1;if(pb!==c){pb=c;ja();Za=b.scroll;var I=b.scrollFn;!0===Za&&(Za=
V(c,!0))}c=0;var N=Za;do{var ka=N,ea=q(ka),ma=ea.top,X=ea.bottom,ta=ea.left,ua=ea.right,xa=ea.width;ea=ea.height;var ya=void 0,W=void 0,pa=ka.scrollWidth,Ca=ka.scrollHeight;W=B(ka);var ib=ka.scrollLeft,za=ka.scrollTop;ka===z?(ya=xa<pa&&("auto"===W.overflowX||"scroll"===W.overflowX||"visible"===W.overflowX),W=ea<Ca&&("auto"===W.overflowY||"scroll"===W.overflowY||"visible"===W.overflowY)):(ya=xa<pa&&("auto"===W.overflowX||"scroll"===W.overflowX),W=ea<Ca&&("auto"===W.overflowY||"scroll"===W.overflowY));
ta=ya&&(Math.abs(ua-g)<=m&&ib+xa<pa)-(Math.abs(ta-g)<=m&&!!ib);ma=W&&(Math.abs(X-k)<=m&&za+ea<Ca)-(Math.abs(ma-k)<=m&&!!za);if(!fa[c])for(X=0;X<=c;X++)fa[X]||(fa[X]={});if(fa[c].vx!=ta||fa[c].vy!=ma||fa[c].el!==ka)if(fa[c].el=ka,fa[c].vx=ta,fa[c].vy=ma,clearInterval(fa[c].pid),0!=ta||0!=ma)F=!0,fa[c].pid=setInterval(function(){e&&0===this.layer&&p.active._onTouchMove(jb);var Ga=fa[this.layer].vy?fa[this.layer].vy*w:0,hb=fa[this.layer].vx?fa[this.layer].vx*w:0;"function"===typeof I&&"continue"!==I.call(p.dragged.parentNode[sa],
hb,Ga,a,jb,fa[this.layer].el)||da(fa[this.layer].el,hb,Ga)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&N!==z&&(N=V(N,!1)));qb=F}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,k=a.dispatchSortableEvent,m=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||g,m(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};
Ba.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=y(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Hb};Q(Ba,{pluginName:"revertOnSpill"});Ea.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;
a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};Q(Ea,{pluginName:"removeOnSpill"});p.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?
C(document,"pointermove",this._handleFallbackAutoScroll):b.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):(l(document,"pointermove",this._handleFallbackAutoScroll),l(document,"touchmove",this._handleFallbackAutoScroll),l(document,
"mousemove",this._handleFallbackAutoScroll));clearInterval(Pa);ja();clearTimeout(Qa);Qa=void 0},nulling:function(){jb=pb=Za=qb=Pa=rb=sb=null;fa.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,k=(b.touches?b.touches[0]:b).clientY,m=document.elementFromPoint(g,k);jb=b;if(c||this.options.forceAutoScrollFallback||Sa||Aa||Ua){tb(b,this.options,m,c);var w=V(m,!0);!qb||Pa&&g===rb&&k===sb||(Pa&&clearInterval(Pa),
Pa=setInterval(function(){var z=V(document.elementFromPoint(g,k),!0);z!==w&&(w=z,ja());tb(b,e.options,z,c)},10),rb=g,sb=k)}else this.options.bubbleScroll&&V(m,!0)!==O()?tb(b,this.options,V(m,!1),!1):ja()}};return Q(a,{pluginName:"scroll",initializeByDefault:!0})});p.mount(Ea,Ba);T.Sortable=p})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(T,
D,t,G,Q,Y,P,C,l,E,H,U,B,ha,oa,O,q,n,y,K,x,ia,V){function r(Ha){const {actionsOpen:ba,children:p}=Ha;ba&&(Ha.actionsOpen=!1);p.forEach(d=>r(d))}const R=G.ofType(O),da={exclusive:"exclusive",inherited:"inherited",independent:"independent"},wa={statusIndicators:!0,errors:!1};G=function(Ha){function ba(d,f){var h=Ha.call(this,d,f)||this;h._handles=new Y;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=P("esri-layerlist-new-ui");h._tooltipReferenceMap=new Map;h.visibleItems=
null;h.iconClass="esri-icon-layers";h.listItemCanGiveFunction=null;h.listItemCanReceiveFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.selectionEnabled=!1;h.selectedItems=new R;h.viewModel=new oa;h.visibleElements={...wa};h._onSortableSort=({to:u,from:A,item:J,newIndex:M})=>{A&&u&&(A===u?h._sortLayers(h._sortableMap.get(A.dataset.group)):h._moveLayerFromChildList({to:u,from:A,item:J,newIndex:M}))};h._sortableCanSort=(u,A)=>!(!u.el.dataset.group||!A.el.dataset.group);
h._sortableCanPull=(u,A,J)=>{const {listItemCanGiveFunction:M}=D._assertThisInitialized(h);J={selected:J["data-item"],from:A.el["data-item"],to:u.el["data-item"]};return h._sortableCanSort(u,A)&&"function"===typeof M?M.call(null,J):!0};h._sortableCanPut=(u,A,J)=>{const {listItemCanReceiveFunction:M}=D._assertThisInitialized(h);J={selected:J["data-item"],from:A.el["data-item"],to:u.el["data-item"]};return h._sortableCanSort(u,A)&&"function"===typeof M?M.call(null,J):!0};h._onSortableEnd=({oldIndex:u,
from:A,to:J,item:M})=>{A!==J&&A.insertBefore(M,A.children[u])};return h}D._inheritsLoose(ba,Ha);var p=ba.prototype;p.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.addHandles([l.on(()=>this.operationalItems,"change",()=>this._itemsChanged(d)),l.watch(()=>this.visibleElements,()=>this._itemsChanged(d)),l.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),l.initial)])};p.loadDependencies=function(){return Promise.all([new Promise((d,f)=>T(["../chunks/calcite-icon"],
d,f)),new Promise((d,f)=>T(["../chunks/calcite-tooltip"],d,f))])};p.destroy=function(){this._destroySortables();this._tooltipReferenceMap.clear();this._handles.destroy();this._handles=null};p.castVisibleElements=function(d){return{...wa,...d}};p.triggerAction=function(d,f){return this.viewModel.triggerAction(d,f)};p.render=function(){const {visibleItems:d,_newUI:f}=this;var h=this.viewModel?.state;h={["esri-layer-list--new-ui"]:f,["esri-hidden"]:"loading"===h,["esri-disabled"]:"disabled"===h};const u=
this.renderItemTooltips(),A=this.renderItems();return x.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",h)},d?.length?[u,A]:this.renderNoItems())};p.renderItemTooltip=function(d){const {_tooltipReferenceMap:f,messages:h}=this;return d?x.tsx("calcite-tooltip",{label:h.layerIncompatible,referenceElement:f.get(d.uid)},h.layerIncompatibleTooltip):null};p.renderItemTooltipNodes=function(d){const {incompatible:f,children:h}=d;return[f?this.renderItemTooltip(d):null,...(f?
[]:h?.toArray().map(u=>this.renderItemTooltipNodes(u)))]};p.renderItemTooltips=function(){return this.visibleItems.toArray().map(d=>this.renderItemTooltipNodes(d))};p.renderNoItems=function(){return x.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};p.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return x.tsx("ul",{"aria-label":h.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,
afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d?.map(u=>this.renderItem(u,null)).toArray())};p.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return x.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h.options,title:h.options},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};p.renderActionsMenu=function(d,f,h,u){var {panel:A}=d;A=A&&A.visible?this.renderPanelButton(A):null;const J=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,u):null)||A||f?x.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
A,J,d):null};p.renderChildList=function(d,f){const {selectionEnabled:h}=this,{visibilityMode:u,children:A}=d,J=this._hasChildren(d),M=!J&&h&&"group"===d.layer?.type,{exclusive:S,inherited:ja}=da,Ba={["esri-layer-list__list--exclusive"]:u===S,["esri-layer-list__list--inherited"]:u===ja,["esri-layer-list__list--independent"]:u!==ja&&u!==S};return J||M?x.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
class:this.classes("esri-layer-list__list",Ba),"aria-expanded":d.open?"true":"false",role:h?"listbox":u===S?"radiogroup":"group",hidden:d.open||M?null:!0},A?.map(Ea=>this.renderItem(Ea,d)).toArray()):null};p.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const u=this._hasChildren(d),A={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return u?x.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",
class:this.classes("esri-layer-list__child-toggle",A),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null};p.renderItemMessage=function(d){return d.error?x.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages.layerError):d.incompatible?x.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",role:"alert"},x.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>this._setTooltipReference(f,d)}),this.messages.layerIncompatible):
null};p.renderItemContent=function(d,f,h){var {id:u}=this,A=`${u}_${d.uid}`;u=`${A}_actions`;A=`${A}__list`;const {panel:J}=d,M=this._filterActions(d.actionsSections),S=this._countActions(M);return[x.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,A),this.renderLabel(d,f,h),this.renderActionsMenu(d,M,S,u)),this.renderItemMessage(d),S?this.renderActionsSections(d,M,u):null,J&&J.open&&!J.disabled?J.render():null,this.renderChildList(d,A)]};p.renderItem=
function(d,f){const {_newUI:h,id:u,selectionEnabled:A,selectedItems:J}=this,M=`${`${u}_${d.uid}`}__title`;var S=this._hasMessage(d);S={["esri-layer-list__item--has-children"]:this._hasChildren(d),["esri-layer-list__item--has-message"]:!!S,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:A};if(A){const ja={["data-layer-uid"]:d.layer?.uid,["data-sort-filter"]:(!d.sortable).toString()};return x.tsx("li",
{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":M,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":q.findSelectedItem(d,J)?"true":"false",role:"option",...ja},this.renderItemContent(d,f,M))}return x.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,
class:this.classes("esri-layer-list__item",S),"aria-labelledby":M},this.renderItemContent(d,f,M))};p.renderConnectionIcon=function(d){({connectionStatus:d}=d);return C.isSome(d)?x.tsx("calcite-icon",{icon:"connected"===d?"check-circle":"offline",scale:"s"}):null};p.renderItemStatus=function(d,f){var {visibleElements:h}=this;if(!h.statusIndicators)return null;const {connectionStatus:u,publishing:A,updating:J}=d;h=!!u;return x.tsx("span",{class:this.classes({["esri-layer-list__status-indicator"]:!0,
["esri-layer-list__publishing"]:A,["esri-layer-list__updating"]:J&&!f,["esri-layer-list__connection-status"]:h,["esri-layer-list__connection-status--connected"]:h&&"connected"===u}),key:"layer-item-status"},this.renderConnectionIcon(d))};p.renderItemTitle=function(d,f){const {messages:h}=this;if(!d)return null;const u=d.title||h.untitledLayer;d=d.visibleAtCurrentScale?u:`${u} (${h.layerInvisibleAtScale})`;return x.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},
u)};p.renderItemToggleIcon=function(d,f){const {_newUI:h}=this,{exclusive:u}=da;f=f&&f.visibilityMode;return x.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==u,["esri-layer-list__item-radio-icon"]:h&&f===u,["esri-icon-radio-checked"]:f===u&&d.visible,["esri-icon-radio-unchecked"]:f===u&&!d.visible,["esri-icon-visible"]:f!==u&&d.visible,["esri-icon-non-visible"]:f!==u&&!d.visible}),"aria-hidden":"true"})};
p.renderItemToggle=function(d,f,h){const {selectionEnabled:u,messages:A}=this,{exclusive:J}=da,M=f&&f.visibilityMode;return u?x.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":M,tabIndex:0,title:d.visible?A.hideLayer:A.showLayer,"aria-checked":d.visible?"true":"false",role:M===J?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):x.tsx("span",
{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};p.renderLabel=function(d,f,h){const {selectionEnabled:u,_newUI:A,messages:J}=this,{inherited:M,exclusive:S}=da,ja=f?.visibilityMode;var Ba=ja===S?"radio":"switch";const Ea=A?[this.renderItemTitle(d,h),this.renderItemStatus(d,f),this.renderItemToggle(d,f,h)]:[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h),this.renderItemStatus(d,f)];Ba=u?x.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},
Ea):x.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":ja,tabIndex:0,"aria-checked":d.visible?"true":"false",title:d.visible?J.hideLayer:J.showLayer,role:Ba,"aria-labelledby":h},Ea);return ja===M||d.error?x.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(d,h),this.renderItemStatus(d,f)):Ba};
p.renderPanelButton=function(d){const {className:f,open:h,title:u,image:A}=d,J=A||f?f:"esri-icon-default-action",M=this._getIconImageStyles(d),S={["esri-layer-list__item-actions-menu-item--active"]:h},ja={["esri-layer-list__item-action-image"]:!!M["background-image"],["esri-disabled-element"]:d.disabled};J&&(ja[J]=!!J);return x.tsx("div",{"aria-disabled":d.disabled.toString(),key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",
S),role:"button",tabindex:d.disabled?null:0,title:u,"aria-label":u},x.tsx("span",{class:this.classes(ja),styles:M}))};p.renderActionsSections=function(d,f,h){f=f.toArray().map((u,A)=>x.tsx("ul",{key:`${d}-action-section-${A}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,u)));return x.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};p.renderActionSection=
function(d,f){return(f&&f.toArray()).map(h=>this.renderAction({item:d,action:h}))};p.renderActionIcon=function(d){const {active:f,className:h}=d,u=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const A={["esri-layer-list__item-action-image"]:!f&&!!u["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};d&&!f&&(A[d]=!0);return x.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",A),
styles:u})};p.renderActionTitle=function(d,f){return f?null:x.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};p.renderAction=function(d){const {item:f,action:h,singleAction:u}=d,{active:A,disabled:J,title:M}=h;d={["esri-layer-list__item-actions-menu-item"]:u&&"button"===h.type,["esri-layer-list__item-action"]:A||!u&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!A&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!A&&"toggle"===h.type&&h.value,["esri-disabled-element"]:J};
const S=[this.renderActionIcon(h),this.renderActionTitle(M,u)];return u?x.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:M,"aria-label":M},S):x.tsx("li",{bind:this,"data-item":f,"data-action":h,key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:M,"aria-label":M},S)};p._setTooltipReference=function(d,
f){this._tooltipReferenceMap.set(f.uid,d);this.scheduleRender()};p._hasMessage=function(d){return!!d.error||d.incompatible};p._hasChildren=function(d){return!!d.children.length&&!this._hasMessage(d)};p._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};p._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};p._moveLayerFromChildList=function({to:d,from:f,item:h,
newIndex:u}){this.viewModel.moveListItem(h["data-item"],f["data-item"],d["data-item"],u)};p._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();f?q.sortChildLayersToIds(f,d):q.sortLayersToIds(this.view?.map?.layers,d)}};p._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:u}=this,A=h.get(f);var J=d["data-item"];J=("root"===f?!0:J.childrenSortable&&q.canSortSublayers(J))&&u;A?A.option("disabled",!J):J&&(d=V.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,
pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!J,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};p._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};p._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};p._setVisibleItems=function(d){this.visibleItems=d?.filter(f=>!f.hidden&&
(this.visibleElements.errors||!f.error))};p._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};p._focusListItem=function(d){const {_focusSortUid:f}=this;d&&f&&d["data-item"].layer?.uid===f&&(d.focus(),this._focusSortUid=null)};p._watchActionSectionChanges=function(d,f){const h="action-section"+f;this._handles.add(d.on("change",this.scheduleRender.bind(this)),h);d.forEach(u=>this._renderOnActionChanges(u,f))};p._renderOnActionChanges=function(d,f){f=
"actions"+f;"toggle"===d.type?this._handles.add(l.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible,d?.value],()=>this.scheduleRender(),l.initial),f):"slider"===d.type?this._handles.add(l.watch(()=>[d?.className,d?.id,d?.title,d?.visible,d?.value,d?.displayValueEnabled,d?.max,d?.min,d?.step],()=>this.scheduleRender(),l.initial),f):this._handles.add(l.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible],()=>this.scheduleRender(),l.initial),f)};p._renderOnItemChanges=function(d){const f=
d.uid,h="items"+f;this._handles.add([l.watch(()=>[d?.actionsOpen,d?.visible,d?.open,d?.updating,d?.connectionStatus,d?.publishing,d?.title,d?.visibleAtCurrentScale,d?.error,d?.visibilityMode,d?.panel,d?.panel?.title,d?.panel?.content,d?.panel?.className,d?.sortable,d?.childrenSortable],()=>this.scheduleRender(),l.syncAndInitial),l.watch(()=>[d?.hidden,d?.error],()=>this._setVisibleItems(this.operationalItems)),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],
h);d.children.forEach(u=>this._renderOnItemChanges(u));d.actionsSections.forEach(u=>this._watchActionSectionChanges(u,f))};p._itemsChanged=function(d){this._handles.removeAll();d.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(d);this.scheduleRender()};p._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};p._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};p._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===
d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};p._selectionKeydown=function(d){var f=Q.eventKey(d);if(["ArrowDown","ArrowUp"].includes(f)){d.stopPropagation();var h=d.currentTarget,u=h["data-item"],{_sortableMap:A,selectedItems:J}=this;if(h=A.get(h.dataset.group)){var M=q.findSelectedItem(u,J),S=h.toArray();d=S.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===
f){const ja=d+1;if(ja>=S.length)return;M?(S.splice(ja,0,S.splice(d,1)[0]),h.sort(S),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())}"ArrowUp"===f&&(f=d-1,-1>=f||(M?(S.splice(f,0,S.splice(d,1)[0]),h.sort(S),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())))}}}else this._toggleSelection(d)};p._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:h}=
f;(h=!h)&&this.operationalItems.forEach(u=>r(u));f.actionsOpen=h;d.stopPropagation()};p._triggerPanel=function(d){const f=d.currentTarget["data-panel"];d.stopPropagation();f&&!f.disabled&&(f.open=!f.open)};p._triggerAction=function(d){var f=d.currentTarget;const h=f["data-action"];f=f["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,f);d.stopPropagation()};p._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");f=f["data-item"];
h===da.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};p._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];f.open=!f.open;d.stopPropagation()};p._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;d=d.currentTarget["data-item"];const u=q.findSelectedItem(d,h),{length:A}=h,J=u&&1===A;f?u?h.remove?.(u):h.add(d):A&&!J?(h.removeAll(),h.add(d)):u?h.remove?.(u):h.add(d)};D._createClass(ba,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(d){this._overrideIfSome("label",d)}},{key:"listItemCreatedFunction",get:function(){return this.viewModel.listItemCreatedFunction},set:function(d){this.viewModel.listItemCreatedFunction=d}},{key:"operationalItems",get:function(){return this.viewModel.operationalItems},set:function(d){this.viewModel.operationalItems=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}}]);return ba}(ha);t.__decorate([E.property()],G.prototype,"visibleItems",
void 0);t.__decorate([E.property()],G.prototype,"iconClass",void 0);t.__decorate([E.property()],G.prototype,"label",null);t.__decorate([E.property()],G.prototype,"listItemCanGiveFunction",void 0);t.__decorate([E.property()],G.prototype,"listItemCanReceiveFunction",void 0);t.__decorate([E.property()],G.prototype,"listItemCreatedFunction",null);t.__decorate([E.property(),y.messageBundle("esri/widgets/LayerList/t9n/LayerList")],G.prototype,"messages",void 0);t.__decorate([E.property(),y.messageBundle("esri/t9n/common")],
G.prototype,"messagesCommon",void 0);t.__decorate([E.property()],G.prototype,"multipleSelectionEnabled",void 0);t.__decorate([E.property()],G.prototype,"operationalItems",null);t.__decorate([E.property()],G.prototype,"selectionEnabled",void 0);t.__decorate([E.property()],G.prototype,"selectedItems",void 0);t.__decorate([E.property()],G.prototype,"view",null);t.__decorate([K.vmEvent("trigger-action"),E.property({type:oa})],G.prototype,"viewModel",void 0);t.__decorate([E.property()],G.prototype,"visibleElements",
void 0);t.__decorate([H.cast("visibleElements")],G.prototype,"castVisibleElements",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleActionsOpen",null);t.__decorate([n.accessibleHandler()],G.prototype,"_triggerPanel",null);t.__decorate([n.accessibleHandler()],G.prototype,"_triggerAction",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleVisibility",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleChildrenClick",null);t.__decorate([n.accessibleHandler()],G.prototype,
"_toggleSelection",null);return G=t.__decorate([B.subclass("esri.widgets.LayerList")],G)});