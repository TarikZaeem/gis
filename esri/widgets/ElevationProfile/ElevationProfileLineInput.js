// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/handleUtils ../../core/maybe ../../core/memoize ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../layers/support/ElevationQuery ../../support/elevationInfoUtils ./ElevationProfileLine".split(" "),function(n,e,u,x,f,y,v,h,c,E,z,A,B,C){c=function(p){function k(a){a=p.call(this,
a)||this;a.type="input";a.color=new u("#00c8c8");a.viewVisualizationEnabled=!1;a.numSamplesForPreview=50;a.numSamplesPerChunk=500;a.chartFillEnabled=!1;a.chartStrokeOffsetY=-1;a._getQueryElevationDependencies=y.memoize((b,d,g,l,m)=>f.applySome(b,q=>({elevationInfo:q,visibleLayers:d,view:g,stationary:l,spatialReference:m})));return a}n._inheritsLoose(k,p);var w=k.prototype;w.queryElevation=function(){var a=n._asyncToGenerator(function*(b,{noDataValue:d,signal:g}){const l=this.queryElevationDependencies;
if(f.isNone(l))throw Error("ElevationProfileLineInput: no dependencies");const {view:m,elevationInfo:q,spatialReference:r}=l;if("on-the-ground"===q.mode&&"3d"===m.type&&r){g=yield A.GeometryDescriptor.fromGeometry(b).project(r,g);if(!g)return{geometry:b,noDataValue:d};const D=m.elevationProvider;g.coordinates.forEach(t=>{t.z=f.unwrapOr(D.getElevation(t.x,t.y,0,r,"ground"),0)});return{geometry:g.export(),noDataValue:d}}return{geometry:b,noDataValue:d}});return function(b,d){return a.apply(this,arguments)}}();
w.attach=function(a){const b=()=>this._onChange();return x.handlesGroup([p.prototype.attach.call(this,a),v.watch(()=>this.queryElevationDependencies,b),v.on(()=>a.elevationProvider,"elevation-change",b,{onListenerAdd:b,onListenerRemove:b})])};n._createClass(k,[{key:"queryElevationDependencies",get:function(){const a=this._viewModel?.view;return f.isNone(a)?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,a,a.stationary,a.spatialReference)}},{key:"available",get:function(){return!this._viewModel?.inputIsSketched}},
{key:"_elevationInfo",get:function(){return f.applySome(this._viewModel?.input,B.getGraphicEffectiveElevationInfo)}},{key:"_visibleLayers",get:function(){const a=f.applySome(this._viewModel?.view,b=>b.map?.allLayers?.filter(d=>d.visible).toArray());return f.unwrapOr(a,[])}}]);return k}(C);e.__decorate([h.property({type:u,nonNullable:!0})],c.prototype,"color",void 0);e.__decorate([h.property()],c.prototype,"viewVisualizationEnabled",void 0);e.__decorate([h.property()],c.prototype,"queryElevationDependencies",
null);e.__decorate([h.property()],c.prototype,"available",null);e.__decorate([h.property()],c.prototype,"_elevationInfo",null);e.__decorate([h.property()],c.prototype,"_visibleLayers",null);return c=e.__decorate([z.subclass("esri.widgets.ElevationProfile.ElevationProfileLineInput")],c)});