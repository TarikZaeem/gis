// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/Evented ../core/events ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ./support/componentsUtils ./support/jsxWidgetSupport ./support/symbols ./support/tests ./support/vnodeCache ./support/widgetUtils ../intl/locale ../intl/messages".split(" "),
function(p,h,C,I,d,D,J,ba,K,L,E,M,x,y,N,m,O,P,Q,R,S,T,F,G,U,v,V,W,X){function H(n,e){for(const f in e)null!=n[f]&&("object"===typeof n[f]&&"object"===typeof e[f]?H(n[f],e?.[f]):n[f]=e[f]);return n}let Y=0;const Z=S.createAdvancedProjector({postProcessProjectionOptions(n){const e=n.eventHandlerInterceptor,f=/capture$/i;n.eventHandlerInterceptor=(c,b,g,a)=>{const q=e?.(c,b,g,a),t=f.test(c);c=c.replace(f,"");if(!(c.toLowerCase()in g)||t){const u=c[2].toLowerCase()+c.slice(3),k=r=>q?.call(g,r);g.addEventListener(u,
k,t);const l=a.afterRemoved;a.afterRemoved=r=>{l?.(r);g.removeEventListener(u,k,t)}}return q}},handleInterceptedEvent(n,e,f,c){const {eventPhase:b,type:g}=c,a=b===Event.CAPTURING_PHASE;let q=`on${g}${a?"capture":""}`;e=e.properties;if(!(e&&q in e||(q=`on${g[0].toUpperCase()}${g.slice(1)}${a?"Capture":""}`,e&&q in e)))return;v.clearVNodeCache();n.scheduleRender();e[q].call(e.bind||f,c)}});let A=!1;d=function(n,e){function f(b,g){var a=n.call(this,b,g)||this;a._attached=!1;a._internalHandles=new J;
a._projector=Z;a._readyForTrueRender=!1;a.iconClass="esri-icon-checkbox-unchecked";a.key=p._assertThisInitialized(a);a._loadLocale=x.debounce(p._asyncToGenerator(function*(){if(a._messageBundleProps&&a._messageBundleProps.length){const k=yield x.eachAlways(a._messageBundleProps.map(function(){var l=p._asyncToGenerator(function*({bundlePath:r,propertyName:w}){r=yield X.fetchMessageBundle(r);a.uiStrings&&Object.keys(a.uiStrings)&&(r=H(K.clone(r),a.uiStrings));a[w]=r});return function(r){return l.apply(this,
arguments)}}()));for(const l of k)l.error&&L.getLogger(a.declaredClass).error("widget-intl:locale-error",a.declaredClass,l.error)}yield a.loadLocale()}));T.commitAssetPath();const q="esri-widget-uid-"+N.generateUUID(),t=a.render.bind(p._assertThisInitialized(a));a._trackingTarget=new R.SimpleTrackingTarget(()=>a.scheduleRender());const u=()=>{if(!a._readyForTrueRender||a.destroyed)return null;if(!a.visible)return{vnodeSelector:"div",properties:{key:q,class:"",styles:{display:"none"}},domNode:null,
children:void 0,text:void 0};const k=t();let {properties:l}=k;l||(k.properties=l={});let {key:r,styles:w}=l;r||(l.key=q);w||(l.styles=w={});w.display||(w.display="");let aa=0;k.children?.forEach(B=>{if(!F.isWidgetConstructor(B.vnodeSelector)){var {properties:z}=B;z||(B.properties=z={});z.key||(z.key=`${a.id}--${aa++}`)}});return F.processWidgets(p._assertThisInitialized(a),k)};a.render=()=>{if(A)return u();let k=v.getVNodeCache(p._assertThisInitialized(a))??null;if(k)return k;a._trackingTarget.clear();
A=!0;try{k=Q.runTracked(a._trackingTarget,u)}catch(l){throw console.error(l),l;}finally{A=!1}k&&v.setVNodeCache(p._assertThisInitialized(a),k);return k};a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));U.registerLoading(a._resourcesFetch);return a}p._inheritsLoose(f,n);var c=f.prototype;c.normalizeCtorArgs=function(b,g){b={...b};g&&(b.container=g);return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),
this._loadLocale()]).then(()=>{}).catch(x.throwIfNotAbortError)};c.loadDependencies=function(){var b=p._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.loadLocale=function(){var b=p._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.destroy=function(){this.destroyed||(E.destroyMaybe(this._trackingTarget),E.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),
this._emitter.clear(),this.render=()=>null,this._projector=null,v.deleteVNodeCache(this))};c.castContainer=function(b){return I.byId(b)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(v.deleteVNodeCache(this),this._projector.scheduleRender())};c.classes=function(...b){return V.classes.apply(this,b)};c.renderNow=function(){v.deleteVNodeCache(this);this._projector.renderNow()};c._postInitialize=function(){var b=this;if(!this.destroyed){this.scheduleRender();
this._delegatedEventNames?.length&&this._internalHandles.add(y.watch(()=>this.viewModel,(a,q)=>{q&&this._internalHandles.remove("delegated-events");a&&D.isEventTarget(a)&&this._internalHandles.add(this._delegatedEventNames.map(t=>D.on(a,t,u=>{this.emit(t,u)})),"delegated-events")},y.initial));this.postInitialize();var g=function(){var a=p._asyncToGenerator(function*(){yield b._loadLocale().catch(x.throwIfNotAbortError);b.scheduleRender()});return function(){return a.apply(this,arguments)}}();this._internalHandles.add([W.onLocaleChange(g),
y.watch(()=>this.uiStrings,g),y.when(()=>this.container,a=>{this.destroyed||this._attach(a)},{initial:!0,once:!0})])}};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){this._attached&&(this._projector.detach(this.render),this._attached=!1);b?.parentNode?.removeChild(b)};p._createClass(f,[{key:"container",set:function(b){this._get("container")||this._set("container",b)}},{key:"domNode",get:function(){return this.container},set:function(b){this.container=
b}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Y++},set:function(b){b&&this._set("id",b)}},{key:"label",get:function(){return this.declaredClass.split(".").pop()},set:function(b){this._overrideIfSome("label",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"visible",get:function(){return this._get("visible")},set:function(b){this._set("visible",b)}},{key:e,get:function(){return{projector:this._projector}}}]);
return f}(M.EsriPromiseMixin(d.EventedAccessor),(C=G.WIDGET_SYMBOL,G.WIDGET_TEST_DATA_SYMBOL));d[C]=!0;h.__decorate([m.property()],d.prototype,"_readyForTrueRender",void 0);h.__decorate([m.property({value:null})],d.prototype,"container",null);h.__decorate([O.cast("container")],d.prototype,"castContainer",null);h.__decorate([m.property()],d.prototype,"iconClass",void 0);h.__decorate([m.property()],d.prototype,"id",null);h.__decorate([m.property()],d.prototype,"label",null);h.__decorate([m.property()],
d.prototype,"renderable",null);h.__decorate([m.property()],d.prototype,"uiStrings",void 0);h.__decorate([m.property()],d.prototype,"viewModel",void 0);h.__decorate([m.property({value:!0})],d.prototype,"visible",null);h.__decorate([m.property()],d.prototype,"key",void 0);h.__decorate([m.property()],d.prototype,"children",void 0);h.__decorate([m.property()],d.prototype,"afterCreate",void 0);h.__decorate([m.property()],d.prototype,"afterUpdate",void 0);h.__decorate([m.property()],d.prototype,"afterRemoved",
void 0);return d=h.__decorate([P.subclass("esri.widgets.Widget")],d)});