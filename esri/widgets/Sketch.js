// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/ellipsoidUtils ../../geometry/projection ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/sketch/SketchLabelOptions ../../views/interactive/sketch/SketchTooltipOptions ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/interactive/snapping/snappingUtils ../../views/support/hitTestSelectUtils ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u,v,r,y,E,G,h,g,q,O,C,B,J,K,M,I,m,Q,S,W,aa,L,T){function Y(za){return"polygon"===za||"rectangle"===za||"circle"===za}function ea(za,Fa){pa("undo",za.history.undo,za.history.redo,Fa)}function la(za,Fa){pa("redo",za.history.redo,za.history.undo,Fa)}function pa(za,Fa,oa,U){if(Fa=Fa.pop()){var X=Fa.updates,Z=[];U.forEach((V,fa)=>{fa=X[fa];null!=fa&&("geometry"in fa&&d.isSome(fa.geometry)&&(Z.push({geometry:V.geometry}),V.geometry=fa.geometry),"symbol"in fa&&d.isSome(fa.symbol)&&
(Z.push({symbol:V.symbol}),V.symbol=fa.symbol),"undo"in fa&&(Z.push(fa),fa[za](V)))});oa.push({updates:Z})}}function ta(za){return{updates:za.map(Fa=>({geometry:Fa.geometry}))}}function ua(za){return"requireError"in za&&"aborted"===za.requireError}const ya=za=>Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"})),Ra={defaultZ:0},La={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};D=function(za){function Fa(U){U=za.call(this,U)||this;U._numUpdating=0;U._handles=new f;U._internalGraphicsLayer=new E({listMode:"hide",internal:!0,title:"SVM Internal"});U._operationHandle=null;U._viewHandles=new f;U.activeFillSymbol=null;U.activeLineSymbol=null;U.activeVertexSymbol=null;U.allowDeleteKey=!0;U.labelOptions=new J;U.layer=null;U.pointSymbol=new aa({style:"circle",size:6,
color:[255,255,255],outline:{color:[50,50,50],width:1}});U.polygonSymbol=new L({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});U.polylineSymbol=new T({color:[130,130,130,1],width:2});U._snappingManager=null;U.tooltipOptions=new K;U.updateGraphics=new w;U.updateOnGraphicClick=!0;U.updatePointSymbol=new aa({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});U.updatePolygonSymbol=new L({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});U.updatePolylineSymbol=
new T({color:[12,207,255],width:2});U.vertexSymbol=new aa({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});U._moduleLoaderAbortController=null;U._viewReadyAbortController=null;U._originalAutoOpenEnabled=null;U.defaultCreateOptions=Ra;U.defaultUpdateOptions=La;U.snappingOptions=new I;return U}A._inheritsLoose(Fa,za);var oa=Fa.prototype;oa.initialize=function(){this._handles.add([R.on(()=>this.view?.map?.layers,"change",U=>{U.removed.includes(this.layer)&&this.cancel()}),
R.on(()=>this.layer?.graphics,"change",U=>{if(d.isSome(this._operationHandle))for(const X of U.removed)this.updateGraphics.includes(X)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(X):this._operationHandle.cancel())}),R.watch(()=>this.layer?.elevationInfo??null,U=>{U!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=U)},R.syncAndInitial),R.watch(()=>this.view,U=>{d.destroyMaybe(this._snappingManager);U&&(this._snappingManager=
new M.SnappingManager({view:U,options:this.snappingOptions}),"2d"===U.type?new Promise((X,Z)=>c(["../../views/2d/interactive/editingTools"],X,Z)):"3d"===U.type&&(new Promise((X,Z)=>c(["../../views/3d/interactive/editingTools"],X,Z)),new Promise((X,Z)=>c(["../../views/3d/layers/GraphicsLayerView3D"],V=>X(ya(V)),Z))))},R.syncAndInitial),R.watch(()=>this.view?.spatialReference,(U,X)=>{U&&X&&!U.equals(X)&&this.cancel()})]);m.setupSnappingToggleHandles(this)};oa.destroy=function(){this.cancel();this._handles=
d.destroyMaybe(this._handles);this._viewHandles=d.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=d.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};oa.cancel=function(){this._moduleLoaderAbortController=d.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=d.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};oa.complete=function(){this._operationHandle&&this._operationHandle.complete()};
oa.delete=function(){const {state:U,updateGraphics:X}=this;if("active"===U&&X.length){const {activeTool:Z,layer:V}=this,fa=X.toArray();V.removeMany(fa);this.cancel();this._emitDeleteEvent({graphics:fa,tool:Z})}};oa.duplicate=function(){if("active"===this.state&&this.updateGraphics.length){const U=this.updateGraphics.map(X=>X.clone()).toArray();this.layer.addMany(U);this.emit("duplicate",{graphics:U,type:"duplicate"});return U}return[]};oa.create=function(){var U=A._asyncToGenerator(function*(X,Z){this.cancel();
yield this._waitViewReady();const {view:V,layer:fa}=this;if(!V||"disabled"===this.state)throw fa||this._logMissingLayer(),z.createAbortError();d.isSome(V.activeTool)&&(V.activeTool=null);if(X){O.addUniqueLayer(V,this._internalGraphicsLayer);var ha=yield this._setupCreateOperation(X,Z);d.isNone(ha)||this.destroyed?V.map.remove(this._internalGraphicsLayer):(ha.on("complete",()=>{if(ha===this._operationHandle){const ia=this.createGraphic,ja=this._operationHandle.cancelled;this._operationHandle.destroy();
this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);ha.cancelled||null==ia||fa.add(ia);this.emit("create",{graphic:ia,state:ja?"cancel":"complete",tool:X,toolEventInfo:null,type:"create"})}}),this._operationHandle=ha,V.ready&&V.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(X,Z){return U.apply(this,arguments)}}();oa.update=function(){var U=A._asyncToGenerator(function*(X,
Z){this.cancel();yield this._waitViewReady();const {layer:V,view:fa,state:ha}=this;if(!fa||"disabled"===ha)throw V||this._logMissingLayer(),z.createAbortError();d.isSome(fa.activeTool)&&(fa.activeTool=null);const ia=Array.isArray(X)?X:[X];null!=X&&ia&&ia.length?ia.some(ja=>ja.layer!==V?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):d.isNone(ja.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),
!0):!1)||(X=yield this._setupUpdateOperation(ia,Z),this.destroyed||d.isNone(X)||ua(X)||(O.addUniqueLayer(fa,this._internalGraphicsLayer),this._setUpdateOperationHandle(X,Z),this.emit("update",{graphics:ia,state:"start",aborted:!1,tool:X.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(X,Z){return U.apply(this,arguments)}}();oa._updateSpatialReference=function(){var U=A._asyncToGenerator(function*(X){const Z=this.view;
if(Z){this._beginAsyncOperation();X=Array.isArray(X)?X:[X];for(const V of X)d.isSome(V.geometry)&&"mesh"!==V.geometry.type&&!y.equals(V.geometry.spatialReference,Z.spatialReference)&&(v.canProjectWithoutEngine(V.geometry.spatialReference,Z.spatialReference)||v.isLoaded()||(yield v.load()),V.geometry=v.project(V.geometry,Z.spatialReference));this._endAsyncOperation()}else this._logMissingView()});return function(X){return U.apply(this,arguments)}}();oa.undo=function(){this.canUndo()&&this._operationHandle?.undo()};
oa.redo=function(){this.canRedo()&&this._operationHandle?.redo()};oa.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};oa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};oa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};oa._getFirstHit=function(){var U=A._asyncToGenerator(function*(X){var Z=this.view;if(!Z)return this._logMissingView(),null;if("2d"===
Z.type){const fa=[];Z.map.allLayers.forEach(ha=>{"vector-tile"!==ha.type&&"imagery"!==ha.type||fa.push(ha)});Z=yield Z.hitTest(X,{exclude:fa});return Q.findFirstGraphicHit(Z.results)}const V=[Z.map.ground];Z.map.allLayers.forEach(fa=>{"integrated-mesh"===fa.type&&V.push(fa)});X=yield Z.hitTest(X,{exclude:V});if(0<X.results.length){const fa=X.results[0];if(d.isSome(fa)&&"graphic"===fa.type&&fa.graphic&&(!X.ground.mapPoint||1>Z.map.ground.opacity||X.ground.distance-d.unwrapOr(fa.distance,0)>-Math.min(3*
X.ground.distance,"global"===Z.viewingMode?u.getReferenceEllipsoid(Z.renderCoordsHelper.spatialReference).radius/Z.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return fa}return null});return function(X){return U.apply(this,arguments)}}();oa._generateViewHandles=function(U){var X=this;return[U.on("immediate-click",function(){var Z=A._asyncToGenerator(function*(V){var fa="active"===X.state&&"create"===X._operationHandle?.type;if("disabled"!==X.state&&!fa&&X.updateOnGraphicClick){X._beginAsyncOperation();
var ha=yield V.async(()=>X._getFirstHit(S.createScreenPointFromEvent(V)));fa=null;d.isSome(ha)?(ha=ha.graphic,X.updateGraphics.includes(ha)||ha.layer===X.layer?(V.stopPropagation(),fa=ha):"2d"!==U.type||X._isComponentGraphic(ha)||"active"!==X.state||X.cancel()):"active"===X.state&&X.cancel();d.isSome(fa)&&!X.updateGraphics.includes(fa)&&(yield X.update([fa],{...X.defaultUpdateOptions,reshapeOptions:{...X.defaultUpdateOptions.reshapeOptions}}));X._endAsyncOperation()}});return function(V){return Z.apply(this,
arguments)}}(),C.ViewEventPriorities.WIDGET)]};oa._setupCreateOperation=function(){var U=A._asyncToGenerator(function*(X,Z){const V=this.view;if(!V)return this._logMissingView(),null;X=yield this._setupDrawGraphicTool(X,V,{hasZ:"3d"===V.type,...this.defaultCreateOptions,...Z});if(d.isNone(X))return null;V.tools.add(X);V.activeTool=X;return this._setupCreateOperationHandle(X)});return function(X,Z){return U.apply(this,arguments)}}();oa._setupDrawGraphicTool=function(){var U=A._asyncToGenerator(function*(X,
Z,V){if("multipoint"===X&&"3d"===Z.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!Z)return this._logMissingView(),null;const fa="rectangle"!==X,ha="rectangle"!==X;X={view:Z,mode:"rectangle"===X||"circle"===X?"hybrid":"click",...V,snapToScene:!1,geometryType:X,graphicSymbol:this._getGraphicSymbolFromTool(X),snappingManager:this._snappingManager,forceUniformSize:ha,centered:fa};return"2d"===Z.type?this._makeDrawGraphicTool2D(X):this._makeDrawGraphicTool3D(X)});
return function(X,Z,V){return U.apply(this,arguments)}}();oa._makeDrawGraphicTool2D=function(){var U=A._asyncToGenerator(function*(X){const Z=yield this._requireModule(new Promise((V,fa)=>c(["../../views/2d/interactive/editingTools"],V,fa)));return ua(Z)||this.destroyed?null:new Z.module.DrawGraphicTool2D({...X,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:Y(X.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})});
return function(X){return U.apply(this,arguments)}}();oa._makeDrawGraphicTool3D=function(){var U=A._asyncToGenerator(function*(X){const Z=yield this._requireModule(new Promise((fa,ha)=>c(["../../views/3d/interactive/editingTools"],fa,ha)));if(ua(Z)||this.destroyed)return null;const {elevationInfo:V}=this.layer;return new Z.module.DrawGraphicTool3D({...X,elevationInfo:V,snapToScene:d.isSome(V)?"absolute-height"===V.mode:!0,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})});return function(X){return U.apply(this,
arguments)}}();oa._setupCreateOperationHandle=function(U){const X=this.view;if(!X)return this._logMissingView(),null;let Z=null;const V=U.forceUniformSize,fa=U.centered,ha=[X.on("key-down",ja=>{if(ja.key===B.SKETCH_KEYS.pan)ja.stopPropagation(),ja.repeat||(U.enabled=!1);else if(ja.key===B.SKETCH_KEYS.complete)ja.stopPropagation(),U.completeCreateOperation();else if(ja.key!==B.SKETCH_KEYS.vertexAdd||ja.repeat)ja.key===B.SKETCH_KEYS.undo?(ja.stopPropagation(),ia.undo()):ja.key===B.SKETCH_KEYS.redo?
(ja.stopPropagation(),ia.redo()):ja.key!==B.SKETCH_KEYS.constraint||"rectangle"!==U.geometryType&&"circle"!==U.geometryType||ja.repeat?ja.key!==B.SKETCH_KEYS.center||ja.repeat||(U.centered=!fa,ja.stopPropagation()):(U.forceUniformSize=!V,ja.stopPropagation());else{const sa=U.drawOperation.geometryType;if("polyline"===sa||"polygon"===sa||"multipoint"===sa)ja.stopPropagation(),U.drawOperation.commitStagedVertex()}},C.ViewEventPriorities.WIDGET),X.on("key-up",ja=>{ja.key===B.SKETCH_KEYS.pan?U.enabled=
!0:ja.key!==B.SKETCH_KEYS.constraint||"rectangle"!==U.geometryType&&"circle"!==U.geometryType?ja.key===B.SKETCH_KEYS.center&&(U.centered=fa,ja.stopPropagation()):(U.forceUniformSize=V,ja.stopPropagation())},C.ViewEventPriorities.WIDGET),U.on("vertex-add",ja=>{Z=d.isNone(Z)?"start":"active";switch(ja.operation){case "apply":this.emit("create",{graphic:d.unwrap(U.graphic),state:Z,tool:this.activeTool,toolEventInfo:ja,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[d.unwrap(U.graphic)],
tool:U.geometryType});break;case "redo":this._emitRedoEvent({graphics:[d.unwrap(U.graphic)],tool:U.geometryType})}}),U.on("cursor-update",ja=>{0<U.drawOperation.numCommittedVertices&&this.emit("create",{graphic:d.unwrap(U.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:ja.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),U.on("vertex-remove",ja=>{switch(ja.operation){case "apply":this.emit("create",{graphic:d.unwrap(U.graphic),state:"active",tool:this.activeTool,
toolEventInfo:ja,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[d.unwrap(U.graphic)],tool:U.geometryType});break;case "redo":this._emitRedoEvent({graphics:[d.unwrap(U.graphic)],tool:U.geometryType})}}),U.on("complete",ja=>{this._set("createGraphic",d.unwrap(ja.graphic));Z="complete";ja.aborted?ia&&ia.cancel():ia&&ia.complete()}),R.watch(()=>this._getGraphicSymbolFromTool(U.geometryType),ja=>{U.graphicSymbol=ja})],ia=new W.CreateOperationHandle({activeComponent:U,tool:U.geometryType,
type:"create",onEnd:()=>{ha.forEach(ja=>ja.remove());ha.length=0;X.tools?.remove(U)},undo:()=>{U.canUndo&&U.undo()},redo:()=>{U.canRedo&&U.redo()},canUndo:()=>U.canUndo,canRedo:()=>U.canRedo});return ia};oa._getGraphicSymbolFromTool=function(U){switch(U){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol}};oa._setupUpdateOperation=function(){var U=A._asyncToGenerator(function*(X,
Z){const {layer:V,view:fa}=this;if(!fa)return this._logMissingView(),null;Z={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...Z,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...Z?.reshapeOptions}};var ha=Z.tool;for(var ia of X)V.remove(ia),V.add(ia);if("3d"===fa.type){if(0===X.length)return null;switch(ha){case "move":return this._setupMove3DOperation(X,Z,fa,ha);case "reshape":if(1<X.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),
null;ha=g.isSupportedGraphic(X[0]);if(ha===G.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(X[0],Z,fa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${G.isSupportedGraphicResultMessage(ha)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(X,Z,fa)}}switch(ha){case "move":return this._setupMove2DOperation(X,Z,fa);case "reshape":if(1<X.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),
null;ia=g.isSupportedGraphic(X[0]);if(ia===G.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(X,ha,Z,fa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${G.isSupportedGraphicResultMessage(ia)}).`);return null;case "transform":return 1===X.length&&(ia=d.get(X[0].geometry,"type"),"point"===ia||"multipoint"===ia)&&(ha="reshape"),this._setupTransformOrReshape2DOperation(X,ha,Z,fa)}});return function(X,Z){return U.apply(this,arguments)}}();
oa._setupMove3DOperation=function(){var U=A._asyncToGenerator(function*(X,Z,V,fa,ha=!1){var ia=this;for(var ja of X){const ka=h.isSupportedGraphic(ja);if(ka!==G.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${G.isSupportedGraphicResultMessage(ka)}).`),null}ja=yield this._requireModule(new Promise((ka,ra)=>c(["../../views/3d/interactive/editingTools"],ka,ra)));if(ua(ja))return ja;const sa=new ja.module.GraphicMoveTool({view:V,
enableZ:Z.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});V.tools.add(sa);sa.graphics.addMany(X);ha||this.updateGraphics.addMany(X);const qa=[],na=new W.UpdateOperationHandle({activeComponent:sa,tool:fa,type:"update",onEnd:()=>{qa.forEach(ka=>ka.remove());qa.length=0;V.tools?.remove(sa);sa.destroyed||sa.destroy()},undo:()=>{ea(na,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:fa})},redo:()=>{la(na,this.updateGraphics.toArray());
this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:fa})},addToSelection:ka=>{this.updateGraphics.push(ka);sa.graphics.push(ka);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[ka],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:ka=>{const ra=this.updateGraphics.indexOf(ka);na.history.undo.forEach(xa=>xa.updates.splice(ra,1));na.history.redo.forEach(xa=>xa.updates.splice(ra,1));this.updateGraphics.remove(ka);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[ka],type:"selection-change"},type:"update"});0===this.updateGraphics.length?na.complete():sa.graphics.remove(ka)},toggleTool:function(){var ka=A._asyncToGenerator(function*(){if(1===ia.updateGraphics.length&&!1!==Z.toggleToolOnClick&&"transform"===fa){var ra=ia.updateGraphics.getItemAt(0);g.isSupportedGraphic(ra)===G.SupportedGraphicResult.SUPPORTED&&(ra=yield ia._setupReshape3DOperation(ra,
Z,V,!0),ua(ra)||(na.onEnd(),na.destroy(),ia._setUpdateOperationHandle(ra,Z)))}});return function(){return ka.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(na,Z),V.on("immediate-click",ka=>this._getCommonUpdateOperationClickHandlers(na,ka,Z),C.ViewEventPriorities.WIDGET),V.on("key-down",ka=>{this._getCommonUpdateOperationKeyDownHandlers(na,ka)},C.ViewEventPriorities.WIDGET));return na});return function(X,Z,V,fa){return U.apply(this,arguments)}}();oa._setupGraphicTransform3DOperation=
function(U,X,Z,V=!1){if(1===U.length&&q.isSupportedGraphic(U[0])===G.SupportedGraphicResult.SUPPORTED){const fa=U[0],ha=fa.geometry;if(d.isSome(ha)&&("point"===ha.type||"mesh"===ha.type))return this._setupPointTransform3DOperation(fa,X,Z);if(d.isSome(ha)&&("polygon"===ha.type||"polyline"===ha.type))return this._setupPolyTransform3DOperation(fa,X,Z,V)}return this._setupMove3DOperation(U,X,Z,"transform",V)};oa._setupPointTransform3DOperation=function(){var U=A._asyncToGenerator(function*(X,Z,V){var fa=
this;const {enableRotation:ha,enableScaling:ia,enableZ:ja}=Z,sa=yield this._requireModule(new Promise((ra,xa)=>c(["../../views/3d/interactive/editingTools"],ra,xa)));if(ua(sa))return sa;const qa=new sa.module.GraphicTransformTool({graphic:X,view:V,enableRotation:ha,enableScaling:ia,enableZ:ja,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});V.tools.add(qa);this.updateGraphics.add(X);const na=[],ka=new W.UpdateOperationHandle({activeComponent:qa,tool:"transform",type:"update",
onEnd:()=>{na.forEach(ra=>ra.remove());na.length=0;V.tools?.remove(qa);qa.destroyed||qa.destroy()},undo:()=>{ea(ka,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{la(ka,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var ra=A._asyncToGenerator(function*(xa){fa.updateGraphics.add(xa);fa.emit("update",{graphics:fa.updateGraphics.toArray(),
state:"active",aborted:!1,tool:fa.activeTool,toolEventInfo:{added:[xa],removed:[],type:"selection-change"},type:"update"});xa=yield fa._setupMove3DOperation(fa.updateGraphics.toArray(),Z,V,"transform",!0);ua(xa)||(ka.onEnd(),ka.destroy(),fa._setUpdateOperationHandle(xa,Z))});return function(xa){return ra.apply(this,arguments)}}(),removeFromSelection:ra=>{this.updateGraphics.remove(ra);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[ra],type:"selection-change"},type:"update"});ka.complete()},toggleTool:()=>{}});na.push(...this._getHandlesForComponent(ka,Z),V.on("immediate-click",ra=>this._getCommonUpdateOperationClickHandlers(ka,ra,Z),C.ViewEventPriorities.WIDGET),V.on("key-down",ra=>{this._getCommonUpdateOperationKeyDownHandlers(ka,ra)},C.ViewEventPriorities.WIDGET));return ka});return function(X,Z,V){return U.apply(this,arguments)}}();oa._setupPolyTransform3DOperation=function(){var U=A._asyncToGenerator(function*(X,
Z,V,fa=!1){var ha=this;const {enableRotation:ia,enableScaling:ja,enableZ:sa,preserveAspectRatio:qa}=Z,na=yield this._requireModule(new Promise((Ca,Ia)=>c(["../../views/3d/interactive/editingTools"],Ca,Ia)));if(ua(na))return na;const ka=new na.module.ExtentTransformTool({graphic:X,view:V,enableRotation:ia,enableScaling:ja,enableZ:sa,preserveAspectRatio:qa,tooltipOptions:this.tooltipOptions});V.tools.add(ka);fa||this.updateGraphics.add(X);const ra=[],xa=new W.UpdateOperationHandle({activeComponent:ka,
tool:"transform",type:"update",onEnd:()=>{ra.forEach(Ca=>Ca.remove());ra.length=0;V.tools?.remove(ka);ka.destroyed||ka.destroy()},canUndo:()=>ka.canUndo,undo:()=>{ka.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>ka.canRedo,redo:()=>{ka.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ca=A._asyncToGenerator(function*(Ia){ha.updateGraphics.add(Ia);ha.emit("update",{graphics:ha.updateGraphics.toArray(),
state:"active",aborted:!1,tool:ha.activeTool,toolEventInfo:{added:[Ia],removed:[],type:"selection-change"},type:"update"});Ia=yield ha._setupMove3DOperation(ha.updateGraphics.toArray(),Z,V,"transform",!0);ua(Ia)||(xa.onEnd(),xa.destroy(),ha._setUpdateOperationHandle(Ia,Z))});return function(Ia){return Ca.apply(this,arguments)}}(),removeFromSelection:Ca=>{this.updateGraphics.remove(Ca);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[Ca],type:"selection-change"},type:"update"});xa.complete()},toggleTool:function(){var Ca=A._asyncToGenerator(function*(){if(1===ha.updateGraphics.length&&!1!==Z.toggleToolOnClick){var Ia=ha.updateGraphics.getItemAt(0);g.isSupportedGraphic(Ia)===G.SupportedGraphicResult.SUPPORTED&&(Ia=yield ha._setupReshape3DOperation(Ia,Z,V,!0),ua(Ia)||(xa.onEnd(),xa.destroy(),ha._setUpdateOperationHandle(Ia,Z)))}});return function(){return Ca.apply(this,arguments)}}()});ra.push(...this._getHandlesForComponent(xa,
Z),V.on("immediate-click",Ca=>this._getCommonUpdateOperationClickHandlers(xa,Ca,Z),C.ViewEventPriorities.WIDGET),V.on("key-down",Ca=>this._getCommonUpdateOperationKeyDownHandlers(xa,Ca),C.ViewEventPriorities.WIDGET),V.on("key-down",Ca=>{Ca.key!==B.SKETCH_KEYS.constraint||Ca.repeat||(ka.preserveAspectRatio=!ka.preserveAspectRatio,Ca.stopPropagation())},C.ViewEventPriorities.WIDGET),V.on("key-up",Ca=>{Ca.key===B.SKETCH_KEYS.constraint&&(ka.preserveAspectRatio=!ka.preserveAspectRatio,Ca.stopPropagation())},
C.ViewEventPriorities.WIDGET));return xa});return function(X,Z,V){return U.apply(this,arguments)}}();oa._setupMove2DOperation=function(){var U=A._asyncToGenerator(function*(X,Z,V){var fa=this;this.updateGraphics.addMany(X);yield this._updateSpatialReference(X);const ha=yield this._getGraphicMover(X,Z,V);if(ua(ha))return ha;const ia=new W.UpdateOperationHandle({activeComponent:ha,tool:"move",type:"update",onEnd:()=>{this._displayDefaultCursor();qa.forEach(na=>na.remove());sa.forEach(na=>na.remove());
qa=[];sa=[];ha.destroy();this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const na=this.updateGraphics.toArray();ea(ia,na);ia.refreshComponent();this._emitUndoEvent({graphics:na,tool:"move"})},redo:()=>{const na=this.updateGraphics.toArray();la(ia,na);ia.refreshComponent();this._emitRedoEvent({graphics:na,tool:"move"})},addToSelection:function(){var na=A._asyncToGenerator(function*(ka){yield fa._updateSpatialReference(ka);fa.updateGraphics.push(ka);ha.graphics=
fa.updateGraphics.toArray();fa.emit("update",{graphics:fa.updateGraphics.toArray(),state:"active",aborted:!1,tool:fa.activeTool,toolEventInfo:{added:[ka],removed:[],type:"selection-change"},type:"update"})});return function(ka){return na.apply(this,arguments)}}(),removeFromSelection:na=>{const ka=this.updateGraphics.indexOf(na);ia.history.undo.forEach(xa=>xa.updates.splice(ka,1));ia.history.redo.forEach(xa=>xa.updates.splice(ka,1));this.updateGraphics.remove(na);const ra=this.updateGraphics.toArray();
this.emit("update",{graphics:ra,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ia.complete():ha.graphics=ra}});let ja=!1,sa=[V.on("immediate-click",na=>this._getCommonUpdateOperationClickHandlers(ia,na,Z),C.ViewEventPriorities.WIDGET),V.on("key-down",na=>{this._getCommonUpdateOperationKeyDownHandlers(ia,na);na.key!==B.SKETCH_KEYS.constraint||na.repeat||(ja=!0,ha.enableMoveAllGraphics=!ha.enableMoveAllGraphics)},
C.ViewEventPriorities.WIDGET),V.on("key-up",na=>{na.key===B.SKETCH_KEYS.constraint&&ja&&(ja=!1,ha.enableMoveAllGraphics=!ha.enableMoveAllGraphics)},C.ViewEventPriorities.WIDGET)],qa=this._getHandlesForComponent(ia,Z);return ia});return function(X,Z,V){return U.apply(this,arguments)}}();oa._setupReshape3DOperation=function(){var U=A._asyncToGenerator(function*(X,Z,V,fa=!1){var ha=this;const ia=yield this._requireModule(new Promise((ka,ra)=>c(["../../views/3d/interactive/editingTools"],ka,ra)));if(ua(ia))return ia;
const ja=Z.reshapeOptions,sa=new ia.module.GraphicReshapeTool({view:V,graphic:X,enableZVertex:Z.enableZ&&"move"===ja?.vertexOperation,enableZShape:Z.enableZ&&"move"===ja?.shapeOperation,enableMoveGraphic:"move"===ja?.shapeOperation||"move-xy"===ja?.shapeOperation,enableMidpoints:"split"===ja?.edgeOperation,enableEdgeOffset:"offset"===ja?.edgeOperation,snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});V.tools.add(sa);fa||this.updateGraphics.add(X);
const qa=[],na=new W.UpdateOperationHandle({activeComponent:sa,tool:"reshape",type:"update",onEnd:()=>{qa.forEach(ka=>ka.remove());qa.length=0;V.tools?.remove(sa);sa.destroyed||sa.destroy()},canUndo:()=>sa.canUndo,undo:()=>{sa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>sa.canRedo,redo:()=>{sa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var ka=A._asyncToGenerator(function*(ra){ha.updateGraphics.add(ra);
ha.emit("update",{graphics:ha.updateGraphics.toArray(),state:"active",aborted:!1,tool:ha.activeTool,toolEventInfo:{added:[ra],removed:[],type:"selection-change"},type:"update"});ra=yield ha._setupMove3DOperation(ha.updateGraphics.toArray(),Z,V,"transform",!0);ua(ra)||(na.onEnd(),na.destroy(),ha._setUpdateOperationHandle(ra,Z))});return function(ra){return ka.apply(this,arguments)}}(),removeFromSelection:ka=>{this.updateGraphics.remove(ka);this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[ka],type:"selection-change"},type:"update"});na.complete()},toggleTool:function(){var ka=A._asyncToGenerator(function*(){if(!1!==Z.toggleToolOnClick){var ra=yield ha._setupGraphicTransform3DOperation(ha.updateGraphics.toArray(),Z,V,!0);ua(ra)||(na.onEnd(),na.destroy(),ha._setUpdateOperationHandle(ra,Z))}});return function(){return ka.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(na,Z),V.on("immediate-click",
ka=>this._getCommonUpdateOperationClickHandlers(na,ka,Z),C.ViewEventPriorities.WIDGET),V.on("key-down",ka=>{this._getCommonUpdateOperationKeyDownHandlers(na,ka)},C.ViewEventPriorities.WIDGET));return na});return function(X,Z,V){return U.apply(this,arguments)}}();oa._setupTransformOrReshape2DOperation=function(){var U=A._asyncToGenerator(function*(X,Z,V,fa){var ha=this;this.updateGraphics.addMany(X);yield this._updateSpatialReference(X);X="transform"===Z?yield this._getBox(X,V,fa):yield this._getReshape(X,
V,fa);if(ua(X))return X;const ia=new W.UpdateOperationHandle({activeComponent:X,type:"update",onEnd:()=>{sa.forEach(qa=>qa.remove());ja.forEach(qa=>qa.remove());sa=[];ja=[];ia.activeComponent&&!ia.activeComponent.destroyed&&ia.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{ea(ia,this.updateGraphics.toArray());ia.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ia.tool})},redo:()=>{la(ia,this.updateGraphics.toArray());
ia.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ia.tool})},addToSelection:function(){var qa=A._asyncToGenerator(function*(na){var ka=ia.activeComponent;if("reshape"===ka?.type){ka=[...ha.updateGraphics,na];ha.updateGraphics.removeAll();ka=yield ha._setupMove2DOperation(ka,V,fa);if(ua(ka))return;ia.onEnd();ia.destroy();ha._setUpdateOperationHandle(ka,V)}else ha.updateGraphics.add(na),ka.graphics=ha.updateGraphics.toArray(),ka.refresh(),ia.resetHistory();ha.emit("update",
{graphics:ha.updateGraphics.toArray(),state:"active",aborted:!1,tool:ha.activeTool,toolEventInfo:{added:[na],removed:[],type:"selection-change"},type:"update"})});return function(na){return qa.apply(this,arguments)}}(),removeFromSelection:function(){var qa=A._asyncToGenerator(function*(na){const ka=ha.updateGraphics.indexOf(na);ia.history.undo.forEach(xa=>xa.updates.splice(ka,1));ia.history.redo.forEach(xa=>xa.updates.splice(ka,1));ha.updateGraphics.remove(na);const ra=ha.updateGraphics.toArray();
if(0===ra.length)ia.complete();else{const xa=ra[0].geometry;1!==ra.length||!d.isSome(xa)||"point"!==xa.type&&"multipoint"!==xa.type?ia.activeComponent.graphics=ra:ia.toggleTool()}ha.emit("update",{graphics:ra,state:"active",aborted:!1,tool:ha.activeTool,toolEventInfo:{added:[],removed:[na],type:"selection-change"},type:"update"})});return function(na){return qa.apply(this,arguments)}}(),toggleTool:function(){var qa=A._asyncToGenerator(function*(){if(!(1<ha.updateGraphics.length)){var na=ha.updateGraphics.getItemAt(0),
ka=na.geometry;d.isSome(ka)&&("reshape"===ia.tool&&("point"===ka.type||"multipoint"===ka.type)||"transform"===ia.tool&&"extent"===ka.type)||(ka=null,"transform"===ia.tool?ka=yield ha._getReshape([na],V,fa):"reshape"===ia.tool&&(ka=yield ha._getBox([na],V,fa)),ua(ka)||(ia.activeComponent?.destroy(),ia.activeComponent=ka,ia.activeComponent&&(sa.forEach(ra=>ra.remove()),sa=ha._getHandlesForComponent(ia,V))))}});return function(){return qa.apply(this,arguments)}}()});let ja=[fa.on("immediate-click",qa=>
this._getCommonUpdateOperationClickHandlers(ia,qa,V),C.ViewEventPriorities.WIDGET),fa.on("key-down",qa=>{this._getCommonUpdateOperationKeyDownHandlers(ia,qa);qa.key===B.SKETCH_KEYS.constraint&&!qa.repeat&&ia&&(qa=ia.activeComponent)&&"box"===qa.type&&(qa.preserveAspectRatio=!qa.preserveAspectRatio)},C.ViewEventPriorities.WIDGET),fa.on("key-up",qa=>{qa.key===B.SKETCH_KEYS.constraint&&ia&&(qa=ia.activeComponent)&&"box"===qa.type&&(qa.preserveAspectRatio=!qa.preserveAspectRatio)},C.ViewEventPriorities.WIDGET)],
sa=this._getHandlesForComponent(ia,V);return ia});return function(X,Z,V,fa){return U.apply(this,arguments)}}();oa._getGraphicMover=function(){var U=A._asyncToGenerator(function*(X,Z,V){({enableMoveAllGraphics:Z}=Z);const fa=yield this._requireModule(new Promise((ha,ia)=>c(["../../views/draw/support/GraphicMover"],ja=>ha(ya(ja)),ia)));return ua(fa)?fa:new fa.module.default({enableMoveAllGraphics:Z,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:X,view:V,callbacks:{onGraphicMoveStart:({dx:ha,dy:ia,
graphic:ja})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ha,dy:ia,mover:ja,type:"move-start"},type:"update"})},onGraphicMove:({dx:ha,dy:ia,graphic:ja})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ha,dy:ia,mover:ja,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ha,dy:ia,graphic:ja})=>{this._displayPointerCursor();
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ha,dy:ia,mover:ja,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(X,Z,V){return U.apply(this,arguments)}}();oa._getBox=function(){var U=A._asyncToGenerator(function*(X,Z,V){const {enableRotation:fa,enableScaling:ha,preserveAspectRatio:ia}=Z;Z=yield this._requireModule(new Promise((ja,
sa)=>c(["../../views/draw/support/Box"],qa=>ja(ya(qa)),sa)));return ua(Z)?Z:new Z.module.default({graphics:X,enableRotation:fa,enableScaling:ha,preserveAspectRatio:ia,layer:this._internalGraphicsLayer,view:V,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onMove:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onMoveStop:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onScaleStart:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onScale:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},
type:"update"}),onScaleStop:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onRotateStart:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onRotate:ja=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"}),onRotateStop:ja=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ja},type:"update"})}})});return function(X,Z,V){return U.apply(this,arguments)}}();oa._getReshape=function(){var U=A._asyncToGenerator(function*(X,Z,V){const fa="split"===Z.reshapeOptions?.edgeOperation;Z="move"===Z.reshapeOptions?.shapeOperation;const ha=yield this._requireModule(new Promise((ia,ja)=>c(["../../views/draw/support/Reshape"],sa=>ia(ya(sa)),ja)));return ua(ha)?
ha:new ha.module.default({enableMidpoints:fa,enableMovement:Z,graphic:X[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:V,callbacks:{onReshapeStart:ia=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ia},type:"update"}),onReshape:ia=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ia},
type:"update"}),onReshapeStop:({mover:ia,type:ja})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ia,type:ja},type:"update"}),onMoveStart:({dx:ia,dy:ja,mover:sa,type:qa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ia,dy:ja,mover:sa,type:qa},type:"update"}),onMove:({dx:ia,dy:ja,mover:sa,type:qa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ia,dy:ja,mover:sa,type:qa},type:"update"}),onMoveStop:({dx:ia,dy:ja,mover:sa,type:qa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ia,dy:ja,mover:sa,type:qa},type:"update"}),onVertexAdd:({added:ia,type:ja,vertices:sa})=>{ia=ia.map(qa=>r.geometryToCoordinates(qa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{added:ia,vertices:sa,type:ja},type:"update"})},onVertexRemove:({removed:ia,type:ja,vertices:sa})=>{ia=ia.map(qa=>r.geometryToCoordinates(qa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:ia,vertices:sa,type:ja},type:"update"})}}})});return function(X,Z,V){return U.apply(this,arguments)}}();oa._getHandlesForComponent=function(U,X){const Z=U.activeComponent;if(!Z)return[];
switch(Z.type){case "graphic-mover":return[Z.on("graphic-click",({graphic:V,viewEvent:fa})=>{fa.native?.shiftKey&&(fa.stopPropagation(),U.removeFromSelection(V))}),Z.on("graphic-move-start",V=>U.addToHistory(ta(V.allGraphics)))];case "box":return[Z.on("graphic-click",V=>this._onTransformOrReshape2DGraphicClick(U,X,V)),Z.on("move-start",V=>U.addToHistory(ta(V.graphics))),Z.on("rotate-start",V=>U.addToHistory(ta(V.graphics))),Z.on("scale-start",V=>U.addToHistory(ta(V.graphics)))];case "reshape":return[Z.on("graphic-click",
V=>this._onTransformOrReshape2DGraphicClick(U,X,V)),Z.on("move-start",V=>U.addToHistory(ta([V.mover]))),Z.on("reshape-start",V=>U.addToHistory(ta([V.graphic]))),Z.on("vertex-add",V=>U.addToHistory(ta([V.oldGraphic]))),Z.on("vertex-remove",V=>U.addToHistory(ta([V.oldGraphic])))];case "move-3d":return[Z.on("graphic-move-start",V=>{U.addToHistory(ta(V.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<
V.allGraphics.length?V.allGraphics[0]:null,type:"move-start"},type:"update"})}),Z.on("graphic-move",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:V.dx,dy:V.dy,mover:0<V.allGraphics.length?V.allGraphics[0]:null,type:"move"},type:"update"})}),Z.on("graphic-move-stop",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<V.allGraphics.length?
V.allGraphics[0]:null,type:"move-stop"},type:"update"})}),Z.on("immediate-click",V=>{V.shiftKey?this._toggleSelection([V.graphic],U,X):U.toggleTool()})];case "transform-3d":return[Z.on("record-undo",({record:V})=>{U.addToHistory({updates:[V]})}),Z.on("graphic-translate-start",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,dx:V.dxScreen,dy:V.dyScreen,type:"move-start"},type:"update"})}),Z.on("graphic-translate-stop",
V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,dx:V.dxScreen,dy:V.dyScreen,type:"move-stop"},type:"update"})}),Z.on("graphic-rotate-start",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,angle:V.angle,type:"rotate-start"},type:"update"})}),Z.on("graphic-rotate-stop",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,angle:V.angle,type:"rotate-stop"},type:"update"})}),Z.on("graphic-scale-start",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,xScale:V.xScale,yScale:V.yScale,type:"scale-start"},type:"update"})}),Z.on("graphic-scale-stop",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:V.graphic,xScale:V.xScale,yScale:V.yScale,type:"scale-stop"},type:"update"})}),Z.on("graphic-translate",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,dx:V.dxScreen,dy:V.dyScreen,type:"move"},type:"update"})}),Z.on("graphic-rotate",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,angle:V.angle,
type:"rotate"},type:"update"})}),Z.on("graphic-scale",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:V.graphic,xScale:V.xScale,yScale:V.yScale,type:"scale"},type:"update"})}),Z.on("immediate-click",V=>{V.shiftKey?this._toggleSelection([V.graphic],U,X):U.toggleTool()})];case "reshape-3d":return[Z.on("reshape",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:V,type:"update"})}),Z.on("move",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:V,type:"update"})}),Z.on("vertex-add",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:V,type:"update"})}),Z.on("vertex-remove",V=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:V,type:"update"})}),
Z.on("immediate-click",V=>{V.shiftKey?this._toggleSelection([V.graphic],U,X):U.toggleTool()})]}};oa._onTransformOrReshape2DGraphicClick=function(U,X,Z){const {graphic:V,viewEvent:fa}=Z;if(fa.native?.shiftKey&&V.layer===this.layer)return fa.stopPropagation(),U.removeFromSelection(V);if(X.toggleToolOnClick)return fa.stopPropagation(),U.toggleTool()};oa._setUpdateOperationHandle=function(U,X){this._operationHandle=U;const Z=this.view?.map;this._disablePopup(X);U.on("complete",()=>{if(U===this._operationHandle){const V=
this.updateGraphics.toArray(),fa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();Z&&Z.remove(this._internalGraphicsLayer);this._restorePopup(X);this.emit("update",{graphics:V,state:"complete",aborted:U.cancelled,tool:fa,toolEventInfo:null,type:"update"})}})};oa._getCommonUpdateOperationClickHandlers=function(){var U=A._asyncToGenerator(function*(X,Z,V){const fa=
S.createScreenPointFromEvent(Z),ha=yield Z.async(()=>this._getFirstHit(fa));d.isNone(ha)?X.complete():Z.native.shiftKey&&this._toggleSelection([ha.graphic],X,V)?Z.stopPropagation():this.updateGraphics.includes(ha.graphic)?Z.stopPropagation():X.complete()});return function(X,Z,V){return U.apply(this,arguments)}}();oa._toggleSelection=function(U,X,Z){const V=!!Z.multipleSelectionEnabled;return U.some(fa=>null==fa?!1:V&&fa.layer===this.layer?(this.updateGraphics.includes(fa)?X.removeFromSelection(fa):
X.addToSelection(fa),!0):!1)};oa._getCommonUpdateOperationKeyDownHandlers=function(U,X){if(U){var Z=X.key;Z===B.SKETCH_KEYS.undo&&U.canUndo()?(X.stopPropagation(),U.undo()):Z===B.SKETCH_KEYS.redo&&U.canRedo()?(X.stopPropagation(),U.redo()):Z===B.SKETCH_KEYS.cancel?(X.stopPropagation(),U.cancel()):this.allowDeleteKey&&B.SKETCH_KEYS.delete.includes(Z)&&this._onDeleteKey(X)}};oa._onDeleteKey=function(U){if(this._operationHandle&&"update"===this._operationHandle.type){var X=this.activeComponent,Z=this.updateGraphics.toArray();
d.isNone(X)||"reshape-3d"===X.type||"reshape"===X.type&&(1!==Z.length||"point"!==d.get(Z[0].geometry,"type"))||(U.stopPropagation(),this.delete())}};oa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=d.destroyMaybe(this._internalGraphicsLayer))};oa._isComponentGraphic=function(U){const {activeComponent:X}=this;return!U||d.isNone(X)?!1:U.attributes&&U.attributes.esriSketchTool||"draw-2d"===X.type&&X.graphic===
U||("box"===X.type||"reshape"===X.type)&&X.isUIGraphic(U)};oa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};oa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};oa._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};oa._logError=function(U,X,Z){e.getLogger(this.declaredClass).error(new F(U,
X,Z))};oa._requireModule=function(){var U=A._asyncToGenerator(function*(X){const Z=new AbortController;this._moduleLoaderAbortController=Z;X=yield X;return this._moduleLoaderAbortController!==Z||Z.signal.aborted?{requireError:"aborted"}:{module:X}});return function(X){return U.apply(this,arguments)}}();oa._emitUndoEvent=function(U){this.emit("undo",{...U,type:"undo"})};oa._emitRedoEvent=function(U){this.emit("redo",{...U,type:"redo"})};oa._emitDeleteEvent=function(U){this.emit("delete",{...U,type:"delete"})};
oa.wait=function(){return R.whenOnce(()=>!this.updating)};oa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};oa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};oa._disablePopupEnabled=function(U){return"3d"!==this.view?.type||this.updateOnGraphicClick||(d.unwrap(U)?.toggleToolOnClick??!1)};oa._disablePopup=function(U){this._disablePopupEnabled(U)&&(U=this.view?.popup)&&d.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=
U.autoOpenEnabled,U.autoOpenEnabled=!1)};oa._restorePopup=function(U){this._disablePopupEnabled(U)&&(U=this.view?.popup)&&d.isSome(this._originalAutoOpenEnabled)&&(U.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};oa._waitViewReady=function(){var U=A._asyncToGenerator(function*(){const X=this.view;X?(d.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield z.whenOrAbort(R.whenOnce(()=>X?.ready),this._viewReadyAbortController.signal)):
this._logMissingView()});return function(){return U.apply(this,arguments)}}();oa._logMissingView=function(){this._logError("sketch:missing-property",Xa("view"))};oa._logMissingLayer=function(){this._logError("sketch:missing-property",Xa("layer"))};A._createClass(Fa,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view?.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating||d.isSome(this._snappingManager)&&this._snappingManager.updating}},{key:"activeTool",
get:function(){return this._operationHandle?.tool??null}},{key:"activeComponent",get:function(){return this._operationHandle?.activeComponent??null}},{key:"createGraphic",get:function(){return!d.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):d.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",get:function(){return this._get("defaultCreateOptions")},set:function(U){this._set("defaultCreateOptions",
{...Ra,...U})}},{key:"defaultUpdateOptions",get:function(){return this._get("defaultUpdateOptions")},set:function(U){this._set("defaultUpdateOptions",{...La,...U,reshapeOptions:{...La.reshapeOptions,...U?.reshapeOptions}})}},{key:"snappingOptions",set:function(U){d.isSome(this._snappingManager)&&(this._snappingManager.options=U);this._set("snappingOptions",U)}},{key:"state",get:function(){const U=!(!this.view?.ready||!this.layer),X=this._operationHandle;return U&&X?"active":U?"ready":"disabled"}},
{key:"view",get:function(){return this._get("view")},set:function(U){const X=this._get("view");if(X){const {container:Z,map:V}=X;Z&&(X.cursor=null);V&&V.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");U&&this._handles.add(R.when(()=>U.ready,Z=>{this._viewHandles.removeAll();Z&&this._viewHandles.add(this._generateViewHandles(U))},R.syncAndInitial),"view-ready");this._set("view",U)}},{key:"test",get:function(){return{operationHandle:this._operationHandle,
defaultUpdateOptions:La}}}]);return Fa}(D.EventedAccessor);k.__decorate([l.property()],D.prototype,"updating",null);k.__decorate([l.property()],D.prototype,"_operationHandle",void 0);k.__decorate([l.property({readOnly:!0})],D.prototype,"activeTool",null);k.__decorate([l.property()],D.prototype,"activeFillSymbol",void 0);k.__decorate([l.property()],D.prototype,"activeLineSymbol",void 0);k.__decorate([l.property()],D.prototype,"activeVertexSymbol",void 0);k.__decorate([l.property()],D.prototype,"allowDeleteKey",
void 0);k.__decorate([l.property({readOnly:!0})],D.prototype,"createGraphic",null);k.__decorate([l.property()],D.prototype,"defaultCreateOptions",null);k.__decorate([l.property()],D.prototype,"defaultUpdateOptions",null);k.__decorate([l.property({type:J,nonNullable:!0})],D.prototype,"labelOptions",void 0);k.__decorate([l.property()],D.prototype,"layer",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"pointSymbol",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,
"polygonSymbol",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"polylineSymbol",void 0);k.__decorate([l.property({type:I,nonNullable:!0})],D.prototype,"snappingOptions",null);k.__decorate([l.property()],D.prototype,"_snappingManager",void 0);k.__decorate([l.property({readOnly:!0})],D.prototype,"state",null);k.__decorate([l.property({type:K,nonNullable:!0})],D.prototype,"tooltipOptions",void 0);k.__decorate([l.property({readOnly:!0})],D.prototype,"updateGraphics",void 0);k.__decorate([l.property()],
D.prototype,"updateOnGraphicClick",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"updatePointSymbol",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"updatePolygonSymbol",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"updatePolylineSymbol",void 0);k.__decorate([l.property({types:N.symbolTypes})],D.prototype,"vertexSymbol",void 0);k.__decorate([l.property({value:null})],D.prototype,"view",null);D=k.__decorate([t.subclass("esri.widgets.Sketch.SketchViewModel")],
D);const Xa=za=>`Property '${za}' is missing on SketchViewModel.`;return D})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(c,A,k,N,
w,F,D,f,e,d,z,R){N=function(l){function p(t){t=l.call(this,t)||this;t.elevationInfo=null;t.graphics=new z.GraphicsCollection;t.screenSizePerspectiveEnabled=!0;t.type="graphics";t.internal=!1;return t}c._inheritsLoose(p,l);var H=p.prototype;H.destroy=function(){this.removeAll();this.graphics.destroy()};H.add=function(t){this.graphics.add(t);return this};H.addMany=function(t){this.graphics.addMany(t);return this};H.removeAll=function(){this.graphics.removeAll();return this};H.remove=function(t){this.graphics.remove(t)};
H.removeMany=function(t){this.graphics.removeMany(t)};H.on=function(t,u){return l.prototype.on.call(this,t,u)};H.graphicChanged=function(t){this.emit("graphic-update",t)};return p}(e.BlendLayer(d.ScaleRangeLayer(f)));A.__decorate([k.property({type:R})],N.prototype,"elevationInfo",void 0);A.__decorate([k.property(D.owningCollectionProperty(z.GraphicsCollection,"graphics"))],N.prototype,"graphics",void 0);A.__decorate([k.property({type:["show","hide"]})],N.prototype,"listMode",void 0);A.__decorate([k.property()],
N.prototype,"screenSizePerspectiveEnabled",void 0);A.__decorate([k.property({readOnly:!0})],N.prototype,"type",void 0);A.__decorate([k.property({constructOnly:!0})],N.prototype,"internal",void 0);return N=A.__decorate([F.subclass("esri.layers.GraphicsLayer")],N)})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(c,A){c.SupportedGraphicResult=void 0;(function(k){k[k.SUPPORTED=0]="SUPPORTED";k[k.GRAPHICS_LAYER_MISSING=1]=
"GRAPHICS_LAYER_MISSING";k[k.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";k[k.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";k[k.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";k[k.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(c.SupportedGraphicResult||(c.SupportedGraphicResult={}));c.isSupportedGraphicResultMessage=function(k){switch(k){case c.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case c.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";
case c.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case c.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case c.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe",
"../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(c,A,k,N,w){c.isSupportedGraphic=function(F){if("graphics"!==F.layer?.type)return w.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(k.isNone(F.geometry))return w.SupportedGraphicResult.GEOMETRY_MISSING;switch(F.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return w.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return w.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==
N.getGraphicEffectiveElevationMode(F)&&N.hasGraphicFeatureExpressionInfo(F)?w.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:w.SupportedGraphicResult.SUPPORTED};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(c,A,k){function N(l,p){return A.isNone(p)||!p.mode?(l?z:R).mode:p.mode}function w(l,p){return A.isSome(p)?p:l?z:R}function F(l,p){return N(A.isSome(l)?
l.hasZ:!1,p)}function D(l){const p=f(l);return F(l.geometry,p)}function f(l){return l.layer&&"elevationInfo"in l.layer?l.layer.elevationInfo:null}function e(l,p,H,t,u,v,r=null){if(!A.isNone(v)){var y=A.isSome(r)?r.mode:"absolute-height";if("on-the-ground"===y)return 0;({absoluteZ:v}=d(p,H,t,u,l,v));a:{r=A.isSome(r)&&A.isSome(r.offset)?r.offset:0;switch(y){case "absolute-height":l=v-r;break a;case "relative-to-ground":l=v-(A.unwrapOr(l.elevationProvider.getElevation(p,H,t,u,"ground"),0)+r);break a;
case "relative-to-scene":l=v-(A.unwrapOr(l.elevationProvider.getElevation(p,H,t,u,"scene"),0)+r);break a}l=void 0}return l}}function d(l,p,H,t,u,v){const r=A.isSome(v.offset)?v.offset:0;switch(v.mode){case "absolute-height":return{absoluteZ:H+r,elevation:0};case "on-the-ground":return H=A.unwrapOr(u.elevationProvider.getElevation(l,p,0,t,"ground"),0),{absoluteZ:H,elevation:H};case "relative-to-ground":return l=A.unwrapOr(u.elevationProvider.getElevation(l,p,H,t,"ground"),0),{absoluteZ:H+l+r,elevation:l};
case "relative-to-scene":return l=A.unwrapOr(u.elevationProvider.getElevation(l,p,H,t,"scene"),0),{absoluteZ:H+l+r,elevation:l}}}const z={mode:"absolute-height",offset:0},R={mode:"on-the-ground",offset:null};c.absoluteHeightElevationInfo=z;c.elevationContextAffectsAlignment=function(l,p){if(A.isNone(p))return!1;({mode:p}=p);return A.isSome(p)&&("scene"===l&&"relative-to-scene"===p||"ground"===l&&"absolute-height"!==p)};c.elevationInfoLikeEquals=function(l,p){return l===p||A.isSome(l)&&A.isSome(p)&&
l.mode===p.mode&&l.offset===p.offset};c.getConvertedElevation=function(l,p,H,t=null){return e(l,p.x,p.y,p.hasZ?p.z:0,p.spatialReference,H,t)};c.getConvertedElevationFromVector=function(l,p,H,t,u=null){return e(l,p[0],p[1],2<p.length?p[2]:0,H,t,u)};c.getEffectiveElevationInfo=w;c.getEffectiveElevationMode=N;c.getGeometryEffectiveElevationInfo=function(l,p){return w(A.isSome(l)?!!l.hasZ:!1,p)};c.getGeometryEffectiveElevationMode=F;c.getGraphicEffectiveElevationInfo=function(l){var p=f(l);l=F(l.geometry,
p);p=A.isSome(p)&&"on-the-ground"!==l?A.unwrapOr(p.offset,0)*k.getMetersPerUnit(A.unwrapOr(p.unit,"meters")):0;return{mode:l,offset:p}};c.getGraphicEffectiveElevationMode=D;c.getZForElevationMode=function(l,p,H){if(!A.isNone(H)&&H.mode){var t=l.hasZ?l.z:0,u=A.isSome(H.offset)?H.offset:0;switch(H.mode){case "absolute-height":return t-u;case "on-the-ground":return 0;case "relative-to-ground":return l=A.unwrapOr(p.elevationProvider.getElevation(l.x,l.y,t,l.spatialReference,"ground"),0)+u,t-l;case "relative-to-scene":return l=
A.unwrapOr(p.elevationProvider.getElevation(l.x,l.y,t,l.spatialReference,"scene"),0)+u,t-l}}};c.hasGraphicFeatureExpressionInfo=function(l){if("on-the-ground"===D(l))return!1;l=f(l);l=A.isSome(l)&&l.featureExpressionInfo?l.featureExpressionInfo.expression:null;return!(!l||"0"===l)};c.onTheGroundElevationInfo=R;c.zValueInAbsoluteHeightMode=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(c,A,k,N,w){function F(D){return"graphics"!==D.layer?.type?{result:w.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:A.isNone(D.geometry)?{result:w.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==N.getGraphicEffectiveElevationMode(D)&&N.hasGraphicFeatureExpressionInfo(D)?{result:w.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,
geometry:null}:"point"!==D.geometry.type&&"polyline"!==D.geometry.type&&("polygon"!==D.geometry.type||D.geometry instanceof k)?{result:w.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:w.SupportedGraphicResult.SUPPORTED,geometry:D.geometry}}c.geometryOfSupportedGraphic=function(D){return F(D).geometry};c.isSupportedGraphic=function(D){return F(D).result};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./ellipsoidUtils ./Point ./Polygon ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l){var p;w=p=function(H){function t(...v){v=H.call(this,...v)||this;v.center=null;v.geodesic=!1;v.numberOfPoints=60;v.radius=1E3;v.radiusUnit="meters";return v}c._inheritsLoose(t,H);var u=t.prototype;u.normalizeCtorArgs=function(v,r){if(!v||!v.center){if(v&&v.rings)return H.prototype.normalizeCtorArgs.call(this,v,r);v={center:v}}return{...H.prototype.normalizeCtorArgs.call(this),...v,...r}};u.initialize=function(){var v=this.center;const r=this.numberOfPoints;this.hasZ=
v?.hasZ??!1;if(0===this.rings.length&&v){var y=k.convertUnit(this.radius,this.radiusUnit,"meters"),E=v.spatialReference,G="geographic";if(E.isWebMercator)G="webMercator";else if(null!=(E.wkid&&l[E.wkid])||E.wkt&&0===E.wkt.indexOf("PROJCS"))G="projected";if(this.geodesic){let h;switch(G){case "webMercator":h=R.webMercatorToGeographic(v);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":h=
v}v=this._createGeodesicCircle(h,y,r);"webMercator"===G&&(v=R.geographicToWebMercator(v))}else{let h;"webMercator"===G||"projected"===G?h=y/this._convert2Meters(1,v.spatialReference):"geographic"===G&&(h=k.lengthToDegrees(y,"meters",f.getReferenceEllipsoid(v.spatialReference).radius));v=this._createPlanarCircle(v,h,r)}this.spatialReference=v.spatialReference;this.addRing(v.rings[0])}};u.clone=function(){const {center:v,numberOfPoints:r,radius:y,radiusUnit:E,geodesic:G}=this;return new p({center:v?.clone(),
numberOfPoints:r,radius:y,radiusUnit:E,geodesic:G})};u._createGeodesicCircle=function(v,r,y){let E=0;const G=[];for(;360>E;){const h=[0,0];z.directGeodeticSolver(h,[v.x,v.y],E,r);this.hasZ&&h.push(v.z);G.push(h);E+=360/y}G.push(G[0]);return new d(G)};u._createPlanarCircle=function(v,r,y){const E=[],G=2*Math.PI/y;for(let g=0;g<y;++g){var h=G*g;h=[v.x+Math.cos(-h)*r,v.y+Math.sin(-h)*r];this.hasZ&&h.push(v.z);E.push(h)}E.push(E[0]);return new d({spatialReference:v.spatialReference,rings:[E]})};u._convert2Meters=
function(v,r){if(r.wkid&&null!=l[r.wkid])r=l.values[l[r.wkid]];else{r=r.wkt;const y=r.lastIndexOf(",")+1,E=r.lastIndexOf("]]");r=parseFloat(r.substring(y,E))}return v*r};return t}(d);A.__decorate([N.property({type:e})],w.prototype,"center",void 0);A.__decorate([N.property()],w.prototype,"geodesic",void 0);A.__decorate([N.property()],w.prototype,"numberOfPoints",void 0);A.__decorate([N.property()],w.prototype,"radius",void 0);A.__decorate([N.property()],w.prototype,"radiusUnit",void 0);return w=p=
A.__decorate([D.subclass("esri.geometry.Circle")],w)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(c,A,k,N,w,F,D,f,e,d){function z(y){if(!y)return null;if(F.isGeographic(y)&&y.wkid){var E=w.spheroids[y.wkid];if(E)return E}return y.wkt&&((y=w.WKT_SPHEROID_REGEX.exec(y.wkt))&&2===y.length?(E=y[1].split(","),!E||
3>E.length?y=null:(y=parseFloat(E[1]),E=parseFloat(E[2]),y=isNaN(y)||isNaN(E)?null:{a:y,f:0===E?0:1/E})):y=null,y)?y:null}function R(y){y=z(y??d.WGS84);if(null!=y&&"b"in y&&"eSq"in y&&"radius"in y)return y;const E=y.a*(1-y.f);return Object.assign(y,{b:E,eSq:1-(E/y.a)**2,radius:(2*y.a+E)/3,densificationRatio:1E4/((2*y.a+E)/3)})}function l(y){return null!=y&&0>y?y+360:y}function p(y,E,G){const {a:h,eSq:g}=R(G);G=Math.sqrt(g);const q=Math.sin(E[1]*w.toRadians);E=h*E[0]*w.toRadians;G=0<g?h*(1-g)*(q/(1-
g*q*q)-1/(2*G)*Math.log((1-G*q)/(1+G*q)))*.5:h*q;y[0]=E;y[1]=G;return y}function H(y){return null!==z(y)}function t(y,E){if("polyline"!==y.type&&"polygon"!==y.type)throw new k("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:G}=y;if(!H(G))throw new k("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var h="polyline"===y.type?y.paths:y.rings;const g=[],q=[0,0],O=new r;for(const J of h){h=
[];g.push(h);h.push([J[0][0],J[0][1]]);var C=J[0][0],B=J[0][1];let K,M;for(let I=0;I<J.length-1;I++){K=J[I+1][0];M=J[I+1][1];if(C===K&&B===M)continue;const m=[C,B];v(O,[C,B],[K,M],G);const {azimuth:Q,distance:S}=O;C=S/E;if(1<C){for(B=1;B<=C-1;B++)u(q,m,Q,B*E,G),h.push(q.slice(0));u(q,m,Q,(S+Math.floor(C-1)*E)/2,G);h.push(q.slice(0))}u(q,m,Q,S,G);h.push(q.slice(0));C=q[0];B=q[1]}}return"polyline"===y.type?new D({paths:g,spatialReference:G}):new f({rings:g,spatialReference:G})}function u(y,E,G,h,g){const q=
E[0]*w.toRadians;E=E[1]*w.toRadians;G=(G??0)*w.toRadians;const {a:O,b:C,f:B}=R(g);g=Math.sin(G);G=Math.cos(G);var J=(1-B)*Math.tan(E);E=1/Math.sqrt(1+J*J);const K=J*E,M=Math.atan2(J,G);J=E*g;const I=J*J;var m=1-I,Q=m*(O*O-C*C)/(C*C);const S=1+Q/16384*(4096+Q*(-768+Q*(320-175*Q))),W=Q/1024*(256+Q*(-128+Q*(74-47*Q)));Q=h/(C*S);let aa=2*Math.PI,L,T,Y,ea;for(;1E-12<Math.abs(Q-aa);)Y=Math.cos(2*M+Q),L=Math.sin(Q),T=Math.cos(Q),ea=W*L*(Y+W/4*(T*(-1+2*Y*Y)-W/6*Y*(-3+4*L*L)*(-3+4*Y*Y))),aa=Q,Q=h/(C*S)+ea;
h=K*L-E*T*G;m=B/16*m*(4+B*(4-3*m));h=Math.atan2(K*T+E*L*G,(1-B)*Math.sqrt(I+h*h))/w.toRadians;y[0]=(q+(Math.atan2(L*g,E*T-K*L*G)-(1-m)*B*J*(Q+m*L*(Y+m*T*(-1+2*Y*Y)))))/w.toRadians;y[1]=h;return y}function v(y,E,G,h){var g=E[0]*w.toRadians;E=E[1]*w.toRadians;var q=G[0]*w.toRadians;G=G[1]*w.toRadians;const {a:O,b:C,f:B,radius:J}=R(h),K=q-g;var M=Math.atan((1-B)*Math.tan(E)),I=Math.atan((1-B)*Math.tan(G));h=Math.sin(M);M=Math.cos(M);const m=Math.sin(I);I=Math.cos(I);let Q=1E3,S=K,W,aa,L;let T,Y,ea;do{var la=
Math.sin(S);var pa=Math.cos(S);L=Math.sqrt(I*la*I*la+(M*m-h*I*pa)*(M*m-h*I*pa));if(0===L)return y.distance=0,y.azimuth=void 0,y.reverseAzimuth=void 0,y;pa=h*m+M*I*pa;T=Math.atan2(L,pa);Y=M*I*la/L;aa=1-Y*Y;la=pa-2*h*m/aa;isNaN(la)&&(la=0);ea=B/16*aa*(4+B*(4-3*aa));W=S;S=K+(1-ea)*B*Y*(T+ea*L*(la+ea*pa*(-1+2*la*la)))}while(1E-12<Math.abs(S-W)&&0<--Q);if(0===Q)return h=Math.acos(Math.sin(E)*Math.sin(G)+Math.cos(E)*Math.cos(G)*Math.cos(q-g))*J,g=q-g,y.azimuth=Math.atan2(Math.sin(g)*Math.cos(G),Math.cos(E)*
Math.sin(G)-Math.sin(E)*Math.cos(G)*Math.cos(g))/w.toRadians,y.distance=h,y.reverseAzimuth=void 0,y;g=aa*(O*O-C*C)/(C*C);E=g/1024*(256+g*(-128+g*(74-47*g)));q=Math.atan2(M*Math.sin(S),M*m*Math.cos(S)-h*I);y.azimuth=Math.atan2(I*Math.sin(S),M*m-h*I*Math.cos(S))/w.toRadians;y.distance=C*(1+g/16384*(4096+g*(-768+g*(320-175*g))))*(T-E*L*(la+E/4*(pa*(-1+2*la*la)-E/6*la*(-3+4*L*L)*(-3+4*la*la))));y.reverseAzimuth=q/w.toRadians;return y}let r=function(y=0,E,G){this.distance=y;this.azimuth=E;this.reverseAzimuth=
G};c.InverseGeodeticSolverResult=r;c.directGeodeticSolver=u;c.geodesicAreas=function(y,E="square-meters"){if(y.some(q=>!H(q.spatialReference)))throw new k("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const G=[];for(var h=0;h<y.length;h++){var g=y[h];const {radius:q,densificationRatio:O}=R(g.spatialReference);G.push(t(g,q*O))}y=[];h=[0,0];g=[0,0];for(let q=0;q<G.length;q++){const {rings:O,spatialReference:C}=G[q];let B=0;for(let J=0;J<O.length;J++){const K=
O[J];p(h,K[0],C);p(g,K[K.length-1],C);let M=g[0]*h[1]-h[0]*g[1];for(let I=0;I<K.length-1;I++)p(h,K[I+1],C),p(g,K[I],C),M+=g[0]*h[1]-h[0]*g[1];B+=M}B=N.convertUnit(B,"square-meters",E);y.push(B/-2)}return y};c.geodesicDensify=t;c.geodesicDistance=function(y,E,G="meters"){if(!y||!E)throw new k("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!y.spatialReference||!E.spatialReference)throw new k("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");
if(!F.equals(y.spatialReference,E.spatialReference))throw new k("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:h}=y;if(!H(h))throw new k("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(y.x===E.x&&y.y===E.y)return new r(0,0,0);const g=new r;v(g,[y.x,y.y],[E.x,E.y],h);g.distance=N.convertUnit(g.distance,"meters",G);g.azimuth=l(g.azimuth);g.reverseAzimuth=l(g.reverseAzimuth);return g};c.geodesicLengths=
function(y,E="meters"){if(!y)throw new k("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(y.some(g=>!H(g.spatialReference)))throw new k("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const G=[];for(let g=0;g<y.length;g++){var h=y[g];const {spatialReference:q}=h;h="polyline"===h.type?h.paths:h.rings;let O=0;for(let C=0;C<h.length;C++){const B=h[C];let J=0;for(let K=1;K<B.length;K++){const M=B[K-1][0],I=B[K][0],
m=B[K-1][1],Q=B[K][1];if(m!==Q||M!==I){const S=new r;v(S,[M,m],[I,Q],q);J+=S.distance}}O+=J}O=N.convertUnit(O,"meters",E);G.push(O)}return G};c.inverseGeodeticSolver=v;c.isSupported=H;c.pointFromDistance=function(y,E,G){if(!y||null==E||null==G)throw new k("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>G||360<G)throw new k("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");
if(!y.spatialReference)throw new k("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:h}=y;if(!H(h))throw new k("geodesic-distance:not-supported","input geometry spatial reference is not supported");const g=[0,0];u(g,[y.x,y.y],G,E,h);return new e({x:g[0],y:g[1],spatialReference:h})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(c,A,k,N,w){c.isSupportedGraphic=function(F){if("graphics"!==F.layer?.type)return w.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(k.isNone(F.geometry))return w.SupportedGraphicResult.GEOMETRY_MISSING;switch(F.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return w.SupportedGraphicResult.SUPPORTED;default:return w.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}const D=
k.isSome(F.symbol)&&"point-3d"===F.symbol.type&&F.symbol.symbolLayers;return D&&0<D.length&&D.some(f=>"object"===f.type)?"on-the-ground"!==N.getGraphicEffectiveElevationMode(F)&&N.hasGraphicFeatureExpressionInfo(F)?w.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:w.SupportedGraphicResult.SUPPORTED:w.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/support/layerUtils":function(){define(["exports","../../../core/maybe"],
function(c,A){c.addUniqueLayer=function(k,N,w){if(N&&k&&k.map){({map:k}=k);var F=k.layers.find(D=>D===N);F||k.add(N,w);F&&void 0!==w&&null!==w&&k.layers.reorder(F,w)}};c.findLayerView=function(k,N){return k.allLayerViews.find(w=>{w=w.layer;return w===N||"sublayers"in w&&A.isSome(w.sublayers)&&w.sublayers.includes(N)})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(c){c.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",
constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};c.SNAPPING_KEYS={toggle:"Control"};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,A,k,N,w,F,D){k=function(f){function e(d){d=f.call(this,d)||this;d.enabled=!1;return d}c._inheritsLoose(e,f);return e}(k);A.__decorate([N.property({type:Boolean,nonNullable:!0})],k.prototype,"enabled",void 0);return k=A.__decorate([D.subclass("esri.views.interactive.sketch.SketchLabelOptions")],k)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./SketchTooltipElevationOptions ./SketchTooltipVisibleElements".split(" "),
function(c,A,k,N,w,F,D,f,e){k=function(d){function z(R){R=d.call(this,R)||this;R.enabled=!1;R.elevation=new f.SketchTooltipElevationOptions;R.visibleElements=new e.SketchTooltipVisibleElements;R.visualVariables=null;return R}c._inheritsLoose(z,d);z.prototype.toJSON=function(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}};return z}(k);A.__decorate([N.property({type:Boolean,nonNullable:!0})],k.prototype,"enabled",void 0);A.__decorate([N.property({type:f.SketchTooltipElevationOptions,
nonNullable:!0})],k.prototype,"elevation",void 0);A.__decorate([N.property({type:e.SketchTooltipVisibleElements,nonNullable:!0})],k.prototype,"visibleElements",void 0);A.__decorate([N.property()],k.prototype,"visualVariables",void 0);return k=A.__decorate([D.subclass("esri.widgets.Sketch.SketchTooltipOptions")],k)})},"esri/views/interactive/sketch/SketchTooltipElevationOptions":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,A,k,N,w,F,D,f){c.SketchTooltipElevationOptions=function(e){function d(z){z=e.call(this,z)||this;z.mode="absolute-height";return z}A._inheritsLoose(d,e);d.prototype.toJSON=function(){return{mode:this.mode}};return d}(N);k.__decorate([w.property({type:String,nonNullable:!0})],c.SketchTooltipElevationOptions.prototype,"mode",void 0);c.SketchTooltipElevationOptions=k.__decorate([f.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],c.SketchTooltipElevationOptions);Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchTooltipVisibleElements":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,A,k,N,w,F,D,f){c.SketchTooltipVisibleElements=function(e){function d(){var z=e.apply(this,arguments)||
this;z.distance=!0;z.elevation=!0;z.size=!0;z.scale=!0;z.rotation=!0;z.orientation=!0;z.totalLength=!0;z.area=!0;z.radius=!0;z.helpMessage=!1;return z}A._inheritsLoose(d,e);d.prototype.toJSON=function(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}};return d}(N);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"distance",
void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"elevation",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"size",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"scale",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"rotation",void 0);k.__decorate([w.property({type:Boolean,
nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"orientation",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"totalLength",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"area",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,"radius",void 0);k.__decorate([w.property({type:Boolean,nonNullable:!0})],c.SketchTooltipVisibleElements.prototype,
"helpMessage",void 0);c.SketchTooltipVisibleElements=k.__decorate([f.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],c.SketchTooltipVisibleElements);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../support/elevationInfoUtils ./Settings ./SnappingDomain ./snappingFactory ./SnappingOptions ./SnappingPoint ./snappingUtils ./candidates/IntersectionSnappingCandidate ../support/viewUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u,v,r,y,E,G){function h({coordinateHelper:q,elevationInfo:O}){return q.hasZ()?p.absoluteHeightElevationInfo:O}c.SnappingManager=function(q){function O(B){B=q.call(this,B)||this;B.options=new v;B.snappingEnginesFactory=u.defaultSnappingEnginesFactory;B._engines=[];B._currentMainCandidate=null;B._currentOtherActiveCandidates=[];B._currentSnappedType=g.MAIN;return B}A._inheritsLoose(O,q);var C=O.prototype;C.initialize=function(){this.handles.add([f.watch(()=>
{const {effectiveFeatureEnabled:B,effectiveSelfEnabled:J,touchSensitivityMultiplier:K,distance:M}=this.options;return{effectiveFeatureEnabled:B,effectiveSelfEnabled:J,touchSensitivityMultiplier:K,distance:M}},()=>{this.doneSnapping();this.emit("changed")},f.sync),f.watch(()=>this.options,B=>{for(const J of this._engines)J.options=B},f.sync),f.watch(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:B,snappingEnginesFactory:J})=>
this._recreateEngines(B,J),f.syncAndInitial)])};C.destroy=function(){this._destroyEngines()};C._recreateEngines=function(B,J){this._destroyEngines();if(B){var {view:K,options:M}=this;this._engines=J(K,M)}};C._destroyEngines=function(){for(const B of this._engines)B.destroy();this._engines=[]};C.snap=function(){var B=A._asyncToGenerator(function*(J){return F.isSome(J.scenePoint)?this._snapMultiPoint(J):this._snapSinglePoint(J)});return function(J){return B.apply(this,arguments)}}();C.update=function(B){const {point:J,
context:K}=B;this._removeVisualization();const M=this._currentMainCandidate;if(F.isNone(M))return J;var I=this._selectUpdateInput(B);if(F.isNone(I))return J;({spatialReference:B}=K);var m=l.project(I,B);if(F.isNone(m))return J;({view:I}=this);const {elevationInfo:Q,visualizer:S}=K,W=[];m=r.pointToSnappingPoint(m,I,K);const aa=M.constraint.closestTo(m);if(!this._arePointsWithinScreenThreshold(m,aa,K))return this._resetSnappingState(),J;M.targetPoint=aa;W.push(...M.hints);for(const L of this._currentOtherActiveCandidates)L.targetPoint=
aa,W.push(...L.hints);F.isSome(S)&&this.handles.add(S.draw(W,{spatialReference:B,elevationInfo:h(K),view:I,selfSnappingZ:K.selfSnappingZ}),"visualization-handle");return r.snappingPointToSnappingOutput(aa,I,{z:J.z,m:J.m,spatialReference:J.spatialReference,elevationInfo:Q})};C.doneSnapping=function(){this._removeVisualization();this._resetSnappingState()};C._selectUpdateInput=function({point:B,scenePoint:J}){switch(this._currentSnappedType){case g.MAIN:return B;case g.SCENE:return J}};C._resetSnappingState=
function(){this._currentMainCandidate=null;this._currentOtherActiveCandidates=[];this._currentSnappedType=g.MAIN};C._removeVisualization=function(){this.handles.remove("visualization-handle")};C._snapSinglePoint=function(){var B=A._asyncToGenerator(function*({point:J,context:K,signal:M}){const {view:I}=this,m=r.pointToSnappingPoint(J,I,K),Q=yield this._fetchCandidates(m,t.SnappingDomain.ALL,K,M);return this._createSnapResult(m,g.MAIN,Q,I,K,{z:J.z,m:J.m,spatialReference:J.spatialReference,elevationInfo:K.elevationInfo},
M)});return function(J){return B.apply(this,arguments)}}();C._snapMultiPoint=function(){var B=A._asyncToGenerator(function*({point:J,scenePoint:K,context:M,signal:I}){const {view:m}=this,{coordinateHelper:Q,spatialReference:S}=M;yield l.initializeProjection(K.spatialReference,S);K=l.project(K,S);var W=r.pointToSnappingPoint(K,m,M);const aa=yield this._fetchCandidates(W,t.SnappingDomain.FEATURE,M,I);if(0<aa.length)return J=yield this._fetchCandidates(W,t.SnappingDomain.SELF,M,I),this._createSnapResult(W,
g.SCENE,[...aa,...J],m,M,{z:K.z,m:K.m,spatialReference:K.spatialReference,elevationInfo:M.elevationInfo},I);K=r.pointToSnappingPoint(J,m,M);W=yield this._fetchCandidates(K,t.SnappingDomain.SELF,M,I);return this._createSnapResult(K,g.MAIN,W,m,M,{z:Q.hasZ()&&J.hasZ?J.z??0:void 0,m:Q.hasM()&&J.hasM?J.m??0:void 0,spatialReference:J.spatialReference,elevationInfo:M.elevationInfo},I)});return function(J){return B.apply(this,arguments)}}();C._fetchCandidates=function(){var B=A._asyncToGenerator(function*(J,
K,M,I){return(yield Promise.all(this._engines.map(m=>m.fetchCandidates(J,K,M,I)))).flat()});return function(J,K,M,I){return B.apply(this,arguments)}}();C._createSnapResult=function(B,J,K,M,I,m,Q){return{get valid(){return!D.isAborted(Q)},apply:()=>{const {spatialReference:S}=I,{snappedPoint:W,hints:aa}=this._processCandidates(B,J,K,I);this._removeVisualization();F.isSome(I.visualizer)&&this.handles.add(I.visualizer.draw(aa,{spatialReference:S,elevationInfo:p.absoluteHeightElevationInfo,view:M,selfSnappingZ:I.selfSnappingZ}),
"visualization-handle");return r.snappingPointToSnappingOutput(W,M,m)}}};C._processCandidates=function(B,J,K,M){if(1>K.length)return this.doneSnapping(),{snappedPoint:B,hints:[]};this._currentSnappedType!==J&&this._resetSnappingState();y.sortCandidatesInPlace(B,K);const I=this._currentMainCandidate;if(F.isSome(I)){const m=this._findOldConstraintInNewCandidates(I,K);if(0<=m)if(K[m]instanceof E.IntersectionSnappingCandidate){if(this._arePointsWithinScreenThreshold(B,I.targetPoint,M))return this._updateSnappingCandidate(I,
J,K,M)}else return this._intersectWithOtherCandidates(m,K,B,J,M)}return this._intersectWithOtherCandidates(0,K,B,J,M)};C._findOldConstraintInNewCandidates=function(B,J){return B instanceof E.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(J,B.first)&&0<=this._findOldCandidateIndex(J,B.second)?0:-1:this._findOldCandidateIndex(J,B)};C._intersectWithOtherCandidates=function(B,J,K,M,I){const {coordinateHelper:m}=I,Q=J[B],S=[];for(let W=0;W<J.length;++W){if(W===B)continue;const aa=J[W];for(const L of Q.constraint.intersect(aa.constraint)){const T=
L.closestTo(Q.targetPoint);S.push([new E.IntersectionSnappingCandidate(T,Q,aa,aa.isDraped),this._squaredScreenDistance(K,T,m)])}}return 0<S.length&&(S.sort((W,aa)=>W[1]-aa[1]),S[0][1]<this._squaredPointProximityThreshold(I.pointer))?this._updateSnappingCandidate(S[0][0],M,J,I):this._updateSnappingCandidate(Q,M,J,I)};C._updateSnappingCandidate=function(B,J,K,M){this.doneSnapping();this._currentMainCandidate=B;this._currentSnappedType=J;J=this._currentMainCandidate.targetPoint;const I=[];I.push(...B.hints);
for(const m of K){if(B instanceof E.IntersectionSnappingCandidate){if(m.constraint.equals(B.first.constraint)||m.constraint.equals(B.second.constraint))continue}else if(m.constraint.equals(B.constraint))continue;K=m.constraint.closestTo(J);this._squaredScreenDistance(K,J,M.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(m.targetPoint=J,this._currentOtherActiveCandidates.push(m),I.push(...m.hints))}return{snappedPoint:J,hints:I}};C._squaredPointProximityThreshold=function(B){return"touch"===
B?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold};C._arePointsWithinScreenThreshold=function(B,J,K){return this._squaredScreenDistance(B,J,K.coordinateHelper)<this._squaredPointProximityThreshold(K.pointer)};C._squaredScreenDistance=function(B,J,K){return y.squaredScreenDistance(this._toScreen(B,K),this._toScreen(J,K))};C._toScreen=function(B,J){return G.vectorToScreenPoint(B,J.spatialReference,p.absoluteHeightElevationInfo,this.view)};C._findOldCandidateIndex=function(B,
J){let K=-1;for(let M=0;M<B.length;++M)if(J.constraint.equals(B[M].constraint)){K=M;break}return K};A._createClass(O,[{key:"updating",get:function(){return this._engines.some(B=>B.updating)}},{key:"_squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"_squaredTouchProximityThreshold",get:function(){const {distance:B,touchSensitivityMultiplier:J}=this.options,K=B*J;return K*K}},{key:"_squaredSatisfiesConstraintThreshold",get:function(){return H.defaults.satisfiesConstraintScreenThreshold*
H.defaults.satisfiesConstraintScreenThreshold}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this._engines}}}]);return O}(N.EventedMixin(w.HandleOwner));k.__decorate([e.property({constructOnly:!0})],c.SnappingManager.prototype,"view",void 0);k.__decorate([e.property()],c.SnappingManager.prototype,"options",void 0);k.__decorate([e.property({readOnly:!0})],c.SnappingManager.prototype,"updating",null);k.__decorate([e.property()],c.SnappingManager.prototype,
"snappingEnginesFactory",void 0);k.__decorate([e.property()],c.SnappingManager.prototype,"_engines",void 0);k.__decorate([e.property()],c.SnappingManager.prototype,"_squaredMouseProximityTreshold",null);k.__decorate([e.property()],c.SnappingManager.prototype,"_squaredTouchProximityThreshold",null);k.__decorate([e.property()],c.SnappingManager.prototype,"_squaredSatisfiesConstraintThreshold",null);c.SnappingManager=k.__decorate([R.subclass("esri.views.interactive.snapping.SnappingManager")],c.SnappingManager);
var g;(function(q){q[q.MAIN=0]="MAIN";q[q.SCENE=1]="SCENE"})(g||(g={}));Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,A,k,N,w,F,D){let f=function(e){function d(){var z=e.apply(this,
arguments)||this;z.enabled=!0;return z}A._inheritsLoose(d,e);return d}(w.JSONSupport);k.__decorate([F.property({type:Boolean})],f.prototype,"enabled",void 0);f=k.__decorate([D.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],f);w=function(e){function d(z){z=e.call(this,z)||this;z.lineSnapper=new f;z.parallelLineSnapper=new f;z.rightAngleSnapper=new f;z.rightAngleTriangleSnapper=new f;z.shortLineThreshold=15;z.distance=5;z.pointThreshold=1E-6;z.intersectionParallelLineThreshold=
1E-6;z.parallelLineThreshold=1E-6;z.verticalLineThreshold=.1;z.touchSensitivityMultiplier=1.5;z.pointOnLineThreshold=1E-6;z.orange=new N([255,127,0]);z.orangeTransparent=new N([255,127,0,.5]);z.lineHintWidthReference=3;z.lineHintWidthTarget=3;z.lineHintFadedExtensions=.3;z.parallelLineHintWidth=2;z.parallelLineHintLength=24;z.parallelLineHintOffset=1.5;z.rightAngleHintSize=24;z.rightAngleHintOutlineSize=1.5;z.satisfiesConstraintScreenThreshold=1;return z}A._inheritsLoose(d,e);return d}(w.JSONSupport);
k.__decorate([F.property({type:f,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"lineSnapper",void 0);k.__decorate([F.property({type:f,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"parallelLineSnapper",void 0);k.__decorate([F.property({type:f,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"rightAngleSnapper",void 0);k.__decorate([F.property({type:f,constructOnly:!0,nonNullable:!0,json:{write:!0}})],w.prototype,"rightAngleTriangleSnapper",void 0);k.__decorate([F.property({type:Number,
nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],w.prototype,"shortLineThreshold",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],w.prototype,"distance",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"pointThreshold",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"intersectionParallelLineThreshold",
void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],w.prototype,"parallelLineThreshold",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],w.prototype,"verticalLineThreshold",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"touchSensitivityMultiplier",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},
json:{write:!0}})],w.prototype,"pointOnLineThreshold",void 0);k.__decorate([F.property({type:N,nonNullable:!0})],w.prototype,"orange",void 0);k.__decorate([F.property({type:N,nonNullable:!0})],w.prototype,"orangeTransparent",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"lineHintWidthReference",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"lineHintWidthTarget",void 0);
k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],w.prototype,"lineHintFadedExtensions",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],w.prototype,"parallelLineHintWidth",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],w.prototype,"parallelLineHintLength",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],
w.prototype,"parallelLineHintOffset",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],w.prototype,"rightAngleHintSize",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],w.prototype,"rightAngleHintOutlineSize",void 0);k.__decorate([F.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],w.prototype,"satisfiesConstraintScreenThreshold",void 0);w=k.__decorate([D.subclass("esri.views.interactive.snapping.Settings.Defaults")],
w);k=new w;c.defaults=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDomain":function(){define(["exports"],function(c){c.SnappingDomain=void 0;var A=c.SnappingDomain||(c.SnappingDomain={});A[A.FEATURE=1]="FEATURE";A[A.SELF=2]="SELF";A[A.ALL=3]="ALL";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingFactory":function(){define(["exports","./FeatureSnappingEngine","./SelfSnappingEngine"],
function(c,A,k){c.defaultSnappingEnginesFactory=function(N,w){return[new k.SelfSnappingEngine({view:N,options:w}),new A.FeatureSnappingEngine({view:N,options:w,spatialReference:N.spatialReference})]};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../chunks/common ../../../layers/graphics/data/QueryEngineResult ../../../support/elevationInfoUtils ./SnappingConstraint ./SnappingDomain ./SnappingPoint ./snappingUtils ./candidates/DrapedEdgeSnappingCandidate ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u,v,r,y,E,G,h,g,q,O,C,B,J){function K({constraint:{start:S,end:W}}){const aa=t.squaredDistance(S,W);S=H.squaredDistance(S,W);return aa<v.getEpsilon()||1E-4>S/aa}function M(S,W,aa,L,T,Y,{spatialReference:ea}){W=t.copy(Q,W);W[0]+=aa;W[1]+=L;W[2]+=T;return(aa=J.vectorToScreenPoint(W,ea,y.absoluteHeightElevationInfo,Y))?g.screenDistance(aa,S):Infinity}A.FeatureSnappingEngine=function(S){function W(L){L=S.call(this,L)||this;L.options=null;L._domain=G.SnappingDomain.FEATURE;
L._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}};return L}k._inheritsLoose(W,S);var aa=W.prototype;aa.initialize=function(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),d.sync);f.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",L=>this._updateLayerView(L.layer,L.layerView)),this.view.on("layerview-destroy",
L=>this._updateLayerView(L.layer,null))])};aa._updateLayerView=function(L,T){for(const [,Y]of this.snappingSources)Y.snappingSource.layerSource.layer===L&&(Y.layerView=T)};aa.destroy=function(){this._set("options",null);for(const [,L]of this.snappingSources)L.destroy()};aa.fetchCandidates=function(){var L=k._asyncToGenerator(function*(T,Y,ea,la){if(!(Y&this._domain)||f.isNone(this.options)||!this.options.effectiveFeatureEnabled)return[];var pa=[];Y=this._computeScreenSizeDistanceParameters(T,ea);
const ta={distance:Y,mode:f.unwrap(this.view)?.type??"2d",point:T,coordinateHelper:ea.coordinateHelper,types:this._types};for(const [,{snappingSource:ua,layerView:ya}]of this.snappingSources)!ua.layerSource.enabled||f.isSome(ya)&&ya.suspended||pa.push(ua.fetchCandidates(ta,la).then(Ra=>Ra.filter(La=>!this._candidateIsExcluded(ua,La,ea.excludeFeature))));pa=(yield e.eachAlwaysValues(pa)).flat();this._addRightAngleCandidates(pa,T,Y,ea);e.throwIfAborted(la);g.sortCandidatesInPlace(T,pa);return pa});
return function(T,Y,ea,la){return L.apply(this,arguments)}}();aa._addRightAngleCandidates=function(L,T,Y,ea){var la=f.isSome(ea.vertexHandle)?ea.vertexHandle.rightEdge?.rightVertex?.pos:f.isSome(ea.editGeometryOperations)&&"polygon"===ea.editGeometryOperations.data.type?f.unwrap(ea.editGeometryOperations.data.components[0]?.getFirstVertex())?.pos:null,pa=f.isSome(ea.vertexHandle)?ea.vertexHandle.leftEdge?.leftVertex?.pos:f.isSome(ea.editGeometryOperations)?f.unwrap(ea.editGeometryOperations.data.components[0]?.getLastVertex())?.pos:
null,{view:ta}=this;la=h.anyMapPointToSnappingPoint(la,ta,ea);ea=h.anyMapPointToSnappingPoint(pa,ta,ea);pa=L.length;for(ta=0;ta<pa;ta++)this._addRightAngleCandidate(L[ta],ea,T,Y,L),this._addRightAngleCandidate(L[ta],la,T,Y,L)};aa._addRightAngleCandidate=function(L,T,Y,ea,la){var pa;(pa=f.isNone(T))||(pa=!((L instanceof O.EdgeSnappingCandidate||L instanceof q.DrapedEdgeSnappingCandidate)&&!K(L)));if(!pa){pa=L.constraint.closestTo(T);var ta=(pa[0]-Y[0])/ea.x;Y=(pa[1]-Y[1])/ea.y;var {start:ua,end:ya}=
L.constraint;1>=ta*ta+Y*Y&&(L=new B.RightAngleSnappingCandidate({targetPoint:pa,otherVertex:T,otherVertexType:B.OtherVertexType.NEXT,previousVertex:H.squaredDistance(pa,ua)>H.squaredDistance(pa,ya)?ua:ya,constraint:new E.VerticalHalfPlaneConstraint(T,pa),objectId:L.objectId,isDraped:L.isDraped}),la.push(L))}};aa._computeScreenSizeDistanceParameters=function(L,T){let Y=f.isSome(this.options)?this.options.distance*("touch"===T.pointer?this.options.touchSensitivityMultiplier:1):0;return f.isNone(this.view)?
{x:Y,y:Y,z:Y,distance:Y}:"2d"===this.view.type?(Y*=this.view.resolution,{x:Y,y:Y,z:Y,distance:Y}):this._computeScreenSizeDistanceParameters3D(L,Y,this.view,T)};aa._computeScreenSizeDistanceParameters3D=function(L,T,Y,ea){var {spatialReference:la}=ea;Y.renderCoordsHelper.toRenderCoords(L,la,m);const pa=Y.state.camera.computeScreenPixelSizeAt(m),ta=pa*Y.renderCoordsHelper.unitInMeters/Y.mapCoordsHelper.unitInMeters,ua=T*ta,ya=J.vectorToScreenPoint(L,la,y.absoluteHeightElevationInfo,Y);la=ya?M(ya,L,
ta,0,0,Y,ea):0;const Ra=ya?M(ya,L,0,ta,0,Y,ea):0;L=ya?M(ya,L,0,0,ta,Y,ea):0;return{x:0===la?0:ua/la,y:0===Ra?0:ua/Ra,z:0===L?0:ua/L,distance:pa*T}};aa._candidateIsExcluded=function(L,T,Y){if(f.isNone(Y))return!1;T=this._getCandidateObjectId(T);if(f.isNone(T))return!1;L=L.layerSource.layer;return"graphics"===L.type?Y.uid===T:Y.sourceLayer===L&&Y.attributes&&"objectIdField"in L?Y.attributes[L.objectIdField]===T:!1};aa._getCandidateObjectId=function(L){return L instanceof C.FeatureSnappingCandidate?
L.objectId:null};aa._createSourceInfo=function(L){const T=this._createFeatureSnappingSourceType(L);if(f.isNone(T))return null;if("loading"in T)return this.updatingHandles.addPromise(T.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const Y=f.isSome(this.view)?this.view.allLayerViews.find(ea=>ea.layer===L.layer):null;return new I(T.source,Y)};aa._createFeatureSnappingSourceType=function(L){switch(L.layer.type){case "feature":case "geojson":case "csv":case "oriented-imagery":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(L);
case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(L);case "map-notes":return this._createFeatureSnappingSourceMapNotesLayer(L);case "scene":case "building-scene":return this._createFeatureSnappingSourceSceneLayer(L)}return null};aa._createFeatureSnappingSourceSceneLayer=function(L){const {view:T}=this;if(f.isNone(T)||"3d"!==T.type)return null;const Y=this._getSourceModule("scene");return f.isSome(Y.module)?{source:new Y.module.SceneLayerSnappingSource({layerSource:L,view:T})}:
{loading:Y.loader}};aa._createFeatureSnappingSourceFeatureLayer=function(L){switch(L.layer.source?.type){case "feature-layer":case "oriented-imagery":var T=this._getSourceModule("featureService");return f.isSome(T.module)?{source:new T.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:L})}:{loading:T.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==L.layer.geometryType)return T=this._getSourceModule("featureCollection"),f.isSome(T.module)?
{source:new T.module.FeatureCollectionSnappingSource({layerSource:L,view:this.view})}:{loading:T.loader}}return null};aa._createFeatureSnappingSourceGraphicsLayer=function(L){const T=this._getSourceModule("graphics");return f.isSome(T.module)?{source:new T.module.GraphicsSnappingSource({getGraphicsLayers:()=>[L.layer],spatialReference:this.spatialReference,view:this.view,layerSource:L})}:{loading:T.loader}};aa._createFeatureSnappingSourceMapNotesLayer=function(L){const T=this._getSourceModule("notes");
return f.isSome(T.module)?{source:new T.module.GraphicsSnappingSource({getGraphicsLayers:()=>f.isSome(L.layer.sublayers)?L.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:L})}:{loading:T.loader}};aa._getSourceModule=function(L){const T=this._sourceModules[L];return f.isNone(T.loader)?(L=this._loadSourceModule(L).then(Y=>{T.module=Y}),T.loader=L,{module:T.module,loader:L}):{module:T.module,loader:T.loader}};aa._loadSourceModule=function(L){const T=this.updatingHandles;
switch(L){case "featureService":return T.addPromise(new Promise((Y,ea)=>c(["./featureSources/FeatureServiceSnappingSource"],Y,ea)));case "featureCollection":return T.addPromise(new Promise((Y,ea)=>c(["./featureSources/FeatureCollectionSnappingSource"],Y,ea)));case "graphics":return T.addPromise(new Promise((Y,ea)=>c(["./featureSources/GraphicsSnappingSource"],Y,ea)));case "notes":return T.addPromise(new Promise((Y,ea)=>c(["./featureSources/GraphicsSnappingSource"],Y,ea)));case "scene":return T.addPromise(new Promise((Y,
ea)=>c(["./featureSources/SceneLayerSnappingSource"],Y,ea)))}};k._createClass(W,[{key:"updating",get:function(){return D.someMap(this.snappingSources,({snappingSource:L})=>L.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){const L=this._get("snappingSources")||new Map,T=new Map;if(f.isSome(this.options)&&f.isSome(this.options.featureSources))for(const ea of this.options.featureSources.items){const la=ea.layer.uid;var Y=L.get(la);Y?(L.delete(la),T.set(la,Y)):ea.layer.loaded?
(Y=this._createSourceInfo(ea),f.isSome(Y)&&T.set(la,Y)):this.updatingHandles.addPromise(ea.layer.load())}for(const [,ea]of L)ea.destroy();return T}},{key:"_types",get:function(){return r.SnappingTypes.EDGE|r.SnappingTypes.VERTEX}}]);return W}(w.HandleOwner);N.__decorate([z.property({constructOnly:!0})],A.FeatureSnappingEngine.prototype,"spatialReference",void 0);N.__decorate([z.property({constructOnly:!0})],A.FeatureSnappingEngine.prototype,"view",void 0);N.__decorate([z.property()],A.FeatureSnappingEngine.prototype,
"options",void 0);N.__decorate([z.property({readOnly:!0})],A.FeatureSnappingEngine.prototype,"updating",null);N.__decorate([z.property({readOnly:!0})],A.FeatureSnappingEngine.prototype,"snappingSources",null);A.FeatureSnappingEngine=N.__decorate([p.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],A.FeatureSnappingEngine);let I=function(){function S(W,aa){this.snappingSource=W;this.layerView=aa;this.handles=new F;aa=this.snappingSource.layerSource.layer;"refresh"in aa&&this.handles.add(aa.on("refresh",
()=>W.refresh()));this.handles.add([d.watch(()=>W.updating,L=>W.layerSource.updating=L,d.syncAndInitial),d.watch(()=>W.availability,L=>W.layerSource.availability=L,d.syncAndInitial)])}S.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return S}();const m=u.create(),Q=u.create();Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(c,A){function k(L,T){L[0]=T[0];L[1]=T[1];return L}function N(L,
T,Y){L[0]=T;L[1]=Y;return L}function w(L,T,Y){L[0]=T[0]+Y[0];L[1]=T[1]+Y[1];return L}function F(L,T,Y){L[0]=T[0]-Y[0];L[1]=T[1]-Y[1];return L}function D(L,T,Y){L[0]=T[0]*Y[0];L[1]=T[1]*Y[1];return L}function f(L,T,Y){L[0]=T[0]/Y[0];L[1]=T[1]/Y[1];return L}function e(L,T){L[0]=Math.ceil(T[0]);L[1]=Math.ceil(T[1]);return L}function d(L,T){L[0]=Math.floor(T[0]);L[1]=Math.floor(T[1]);return L}function z(L,T,Y){L[0]=Math.min(T[0],Y[0]);L[1]=Math.min(T[1],Y[1]);return L}function R(L,T,Y){L[0]=Math.max(T[0],
Y[0]);L[1]=Math.max(T[1],Y[1]);return L}function l(L,T){L[0]=Math.round(T[0]);L[1]=Math.round(T[1]);return L}function p(L,T,Y){L[0]=T[0]*Y;L[1]=T[1]*Y;return L}function H(L,T,Y,ea){L[0]=T[0]+Y[0]*ea;L[1]=T[1]+Y[1]*ea;return L}function t(L,T){const Y=T[0]-L[0];L=T[1]-L[1];return Math.sqrt(Y*Y+L*L)}function u(L,T){const Y=T[0]-L[0];L=T[1]-L[1];return Y*Y+L*L}function v(L){const T=L[0];L=L[1];return Math.sqrt(T*T+L*L)}function r(L){const T=L[0];L=L[1];return T*T+L*L}function y(L,T){L[0]=-T[0];L[1]=-T[1];
return L}function E(L,T){L[0]=1/T[0];L[1]=1/T[1];return L}function G(L,T){var Y=T[0];const ea=T[1];Y=Y*Y+ea*ea;0<Y&&(Y=1/Math.sqrt(Y),L[0]=T[0]*Y,L[1]=T[1]*Y);return L}function h(L,T){return L[0]*T[0]+L[1]*T[1]}function g(L,T,Y){T=T[0]*Y[1]-T[1]*Y[0];L[0]=L[1]=0;L[2]=T;return L}function q(L,T,Y,ea){const la=T[0];T=T[1];L[0]=la+ea*(Y[0]-la);L[1]=T+ea*(Y[1]-T);return L}function O(L,T){T=T||1;const Y=2*A.RANDOM()*Math.PI;L[0]=Math.cos(Y)*T;L[1]=Math.sin(Y)*T;return L}function C(L,T,Y){const ea=T[0];
T=T[1];L[0]=Y[0]*ea+Y[2]*T;L[1]=Y[1]*ea+Y[3]*T;return L}function B(L,T,Y){const ea=T[0];T=T[1];L[0]=Y[0]*ea+Y[2]*T+Y[4];L[1]=Y[1]*ea+Y[3]*T+Y[5];return L}function J(L,T,Y){const ea=T[0];T=T[1];L[0]=Y[0]*ea+Y[3]*T+Y[6];L[1]=Y[1]*ea+Y[4]*T+Y[7];return L}function K(L,T,Y){const ea=T[0];T=T[1];L[0]=Y[0]*ea+Y[4]*T+Y[12];L[1]=Y[1]*ea+Y[5]*T+Y[13];return L}function M(L,T,Y,ea){const la=T[0]-Y[0];T=T[1]-Y[1];const pa=Math.sin(ea);ea=Math.cos(ea);L[0]=la*ea-T*pa+Y[0];L[1]=la*pa+T*ea+Y[1];return L}function I(L,
T){var Y=L[0];L=L[1];const ea=T[0];T=T[1];let la=Y*Y+L*L;0<la&&(la=1/Math.sqrt(la));let pa=ea*ea+T*T;0<pa&&(pa=1/Math.sqrt(pa));Y=(Y*ea+L*T)*la*pa;return 1<Y?0:-1>Y?Math.PI:Math.acos(Y)}function m(L){return"vec2("+L[0]+", "+L[1]+")"}function Q(L,T){return L[0]===T[0]&&L[1]===T[1]}function S(L,T){const Y=L[0];L=L[1];const ea=T[0];T=T[1];const la=A.getEpsilon();return Math.abs(Y-ea)<=la*Math.max(1,Math.abs(Y),Math.abs(ea))&&Math.abs(L-T)<=la*Math.max(1,Math.abs(L),Math.abs(T))}function W(L,T,Y,ea,la){let pa=
T[0]-Y[0];Y=T[1]-Y[1];la=(ea[0]*pa+ea[1]*Y)*(la-1);pa=ea[0]*la;Y=ea[1]*la;L[0]=T[0]+pa;L[1]=T[1]+Y;return L}const aa=Object.freeze(Object.defineProperty({__proto__:null,add:w,angle:I,ceil:e,copy:k,cross:g,dist:t,distance:t,div:f,divide:f,dot:h,equals:S,exactEquals:Q,floor:d,inverse:E,len:v,length:v,lerp:q,max:R,min:z,mul:D,multiply:D,negate:y,normalize:G,projectAndScale:W,random:O,rotate:M,round:l,scale:p,scaleAndAdd:H,set:N,sqrDist:u,sqrLen:r,squaredDistance:u,squaredLength:r,str:m,sub:F,subtract:F,
transformMat2:C,transformMat2d:B,transformMat3:J,transformMat4:K},Symbol.toStringTag,{value:"Module"}));c.add=w;c.angle=I;c.ceil=e;c.copy=k;c.cross=g;c.dist=t;c.distance=t;c.div=f;c.divide=f;c.dot=h;c.equals=S;c.exactEquals=Q;c.floor=d;c.inverse=E;c.len=v;c.length=v;c.lerp=q;c.max=R;c.min=z;c.mul=D;c.multiply=D;c.negate=y;c.normalize=G;c.projectAndScale=W;c.random=O;c.rotate=M;c.round=l;c.scale=p;c.scaleAndAdd=H;c.set=N;c.sqrDist=u;c.sqrLen=r;c.squaredDistance=u;c.squaredLength=r;c.str=m;c.sub=F;
c.subtract=F;c.transformMat2=C;c.transformMat2d=B;c.transformMat3=J;c.transformMat4=K;c.vec2=aa})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H){function t(y,E,G,h){const g=h.x-G.x;h=h.y-G.y;E=Math.min(1,Math.max(0,((E.x-G.x)*g+(E.y-G.y)*h)/(g*g+h*h)));y.x=G.x+g*E;y.y=G.y+h*E}function u(y,E){return y?E?4:3:E?3:2}let v=function(){function y(G,h,g){this.items=G;this.query=h;this.geometryType=g.geometryType;this.hasM=g.hasM;this.hasZ=g.hasZ;this.fieldsIndex=g.fieldsIndex;this.objectIdField=g.objectIdField;this.spatialReference=g.spatialReference;this.featureAdapter=g.featureAdapter}var E=y.prototype;E.createQueryResponseForCount=
function(){const G=new e(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return G.countDistinctValues(this.items);const {groupByFieldsForStatistics:h,having:g,outStatistics:q}=this.query;if(!h?.length)return 1;const O=new Map,C=new Map,B=new Set;for(const M of q){var {statisticType:J}=M;J="exceedslimit"!==J?M.onStatisticField:void 0;if(!C.has(J)){var K=[];for(const I of h){const m=this._getAttributeValues(G,I,O);K.push(m)}C.set(J,this._calculateUniqueValues(K,G.returnDistinctValues))}J=
C.get(J);for(const I in J){const {data:m,items:Q}=J[I];K=m.join(",");g&&!G.validateItems(Q,g)||B.add(K)}}return B.size};E.createQueryResponse=function(){var G=k._asyncToGenerator(function*(){let h;h=this.query.outStatistics?this.query.outStatistics.some(g=>"exceedslimit"===g.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const g=this.query.geometry;
f.isValid(this.query.outSR)&&!f.equals(g.spatialReference,this.query.outSR)?h.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...d.project(g,g.spatialReference,this.query.outSR)}):h.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...g})}return h});return function(){return G.apply(this,arguments)}}();E.createSnappingResponse=function(G,h){const g=this.featureAdapter,q=u(this.hasZ,this.hasM),{point:O,mode:C}=G,B="number"===typeof G.distance?G.distance:
G.distance.x,J="number"===typeof G.distance?G.distance:G.distance.y,K={candidates:[]},M="esriGeometryPolygon"===this.geometryType;h=this._getPointCreator(C,this.spatialReference,h);const I=new r(null,0),m=new r(null,0),Q={x:0,y:0,z:0};for(const ea of this.items){var S=g.getGeometry(ea);if(N.isNone(S))continue;const {coords:la,lengths:pa}=S;I.coords=la;m.coords=la;if(G.types&A.SnappingTypes.EDGE){S=0;for(var W=0;W<pa.length;W++){var aa=pa[W];for(var L=0;L<aa;L++,S+=q){var T=I;T.coordsIndex=S;if(L!==
aa-1){const ta=m;ta.coordsIndex=S+q;const ua=Q;t(Q,O,T,ta);var Y=(O.x-ua.x)/B;const ya=(O.y-ua.y)/J;Y=Y*Y+ya*ya;1>=Y&&K.candidates.push(z.makeEdgeCandidate(g.getObjectId(ea),h(ua),Math.sqrt(Y),h(T),h(ta)))}}}}if(G.types&A.SnappingTypes.VERTEX)for(S=M?la.length-q:la.length,W=0;W<S;W+=q)aa=I,aa.coordsIndex=W,L=(O.x-aa.x)/B,T=(O.y-aa.y)/J,L=L*L+T*T,1>=L&&K.candidates.push(z.makeVertexCandidate(g.getObjectId(ea),h(aa),Math.sqrt(L)))}K.candidates.sort((ea,la)=>ea.distance-la.distance);return K};E._getPointCreator=
function(G,h,g){const q=N.isSome(g)&&!f.equals(h,g)?C=>d.project(C,h,g):C=>C,{hasZ:O}=this;return"3d"===G?O?({x:C,y:B,z:J})=>q({x:C,y:B,z:J}):({x:C,y:B})=>q({x:C,y:B,z:0}):({x:C,y:B})=>q({x:C,y:B})};E.createSummaryStatisticsResponse=function(){var G=k._asyncToGenerator(function*(h){const {field:g,valueExpression:q,normalizationField:O,normalizationType:C,normalizationTotal:B,minValue:J,maxValue:K,scale:M}=h;h=this.fieldsIndex.isDateField(g);var I=yield this._getDataValues({field:g,valueExpression:q,
normalizationField:O,normalizationType:C,normalizationTotal:B,scale:M});const m=p.isNullCountSupported({normalizationType:C,normalizationField:O,minValue:J,maxValue:K}),Q=this.fieldsIndex.get(g),S={value:.5,fieldType:Q?.type};I=l.isStringField(Q)?p.calculateStringStatistics({values:I,supportsNullCount:m,percentileParams:S}):p.calculateStatistics({values:I,minValue:J,maxValue:K,useSampleStdDev:!C,supportsNullCount:m,percentileParams:S});return p.processSummaryStatisticsResult(I,h)});return function(h){return G.apply(this,
arguments)}}();E.createUniqueValuesResponse=function(){var G=k._asyncToGenerator(function*(h){const {field:g,valueExpression:q,domains:O,returnAllCodedValues:C,scale:B}=h;var J=yield this._getDataValues({field:g,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,valueExpression:q,scale:B});J=p.calculateUniqueValuesCount(J);return p.createUVResult(J,O,C,h.fieldDelimiter)});return function(h){return G.apply(this,arguments)}}();E.createClassBreaksResponse=function(){var G=k._asyncToGenerator(function*(h){const {field:g,
valueExpression:q,normalizationField:O,normalizationType:C,normalizationTotal:B,classificationMethod:J,standardDeviationInterval:K,minValue:M,maxValue:I,numClasses:m,scale:Q}=h;h=yield this._getDataValues({field:g,valueExpression:q,normalizationField:O,normalizationType:C,normalizationTotal:B,scale:Q});h=p.calculateClassBreaks(h,{field:g,normalizationField:O,normalizationType:C,normalizationTotal:B,classificationMethod:J,standardDeviationInterval:K,minValue:M,maxValue:I,numClasses:m});return p.resolveCBResult(h,
J)});return function(h){return G.apply(this,arguments)}}();E.createHistogramResponse=function(){var G=k._asyncToGenerator(function*(h){const {field:g,valueExpression:q,normalizationField:O,normalizationType:C,normalizationTotal:B,classificationMethod:J,standardDeviationInterval:K,minValue:M,maxValue:I,numBins:m,scale:Q}=h;h=yield this._getDataValues({field:g,valueExpression:q,normalizationField:O,normalizationType:C,normalizationTotal:B,scale:Q});return p.calculateHistogram(h,{field:g,normalizationField:O,
normalizationType:C,normalizationTotal:B,classificationMethod:J,standardDeviationInterval:K,minValue:M,maxValue:I,numBins:m})});return function(h){return G.apply(this,arguments)}}();E._sortFeatures=function(G,h,g){if(1<G.length&&h&&h.length)for(const q of h.reverse()){h=q.split(" ");const O=h[0],C=this.fieldsIndex.get(O);h=h[1]?"desc"===h[1].toLowerCase():!1;const B=p.getAttributeComparator(C?.type,h);G.sort((J,K)=>{J=g(J,O,C);K=g(K,O,C);return B(J,K)})}};E._createFeatureQueryResponse=function(G){const h=
this.items,{geometryType:g,hasM:q,hasZ:O,objectIdField:C,spatialReference:B}=this,{outFields:J,outSR:K,quantizationParameters:M,resultRecordCount:I,resultOffset:m,returnZ:Q,returnM:S}=G,W=null!=I?h.length>(m||0)+I:!1,aa=J&&(J.includes("*")?[...this.fieldsIndex.fields]:J.map(L=>this.fieldsIndex.get(L)));return{exceededTransferLimit:W,features:this._createFeatures(G,h),fields:aa,geometryType:g,hasM:q&&S,hasZ:O&&Q,objectIdFieldName:C,spatialReference:R.cleanFromGeometryEngine(K?K:B),transform:M&&D.toQuantizationTransform(M)||
null}};E._createFeatures=function(G,h){const g=new e(G,this.featureAdapter,this.fieldsIndex),{hasM:q,hasZ:O}=this,{orderByFields:C,quantizationParameters:B,returnGeometry:J,returnCentroid:K,maxAllowableOffset:M,resultOffset:I,resultRecordCount:m,returnZ:Q=!1,returnM:S=!1}=G,W=O&&Q,aa=q&&S;G=[];var L=0;h=[...h];this._sortFeatures(h,C,(ea,la,pa)=>g.getFieldValue(ea,la,pa));if(J||K){var T=D.toQuantizationTransform(B)??void 0;if(J&&!K)for(var Y of h)G[L++]={attributes:g.getAttributes(Y),geometry:R.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(Y),M,T,W,aa)};else if(!J&&K)for(const ea of h)G[L++]={attributes:g.getAttributes(ea),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(ea,this),T)};else for(const ea of h)G[L++]={attributes:g.getAttributes(ea),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(ea,this),T),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ea),M,T,W,aa)}}else for(T of h)(Y=g.getAttributes(T))&&
(G[L++]={attributes:Y});L=I||0;null!=m&&(G=G.slice(L,Math.min(G.length,L+m)));return G};E._createExceedsLimitQueryResponse=function(G){var h=!1;let g=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY;h=Number.POSITIVE_INFINITY;for(const O of G.outStatistics??[])if("exceedslimit"===O.statisticType){g=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;q=null!=O.maxRecordCount?O.maxRecordCount:Number.POSITIVE_INFINITY;h=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===
this.geometryType)h=this.items.length>g;else if(this.items.length>q)h=!0;else{G=u(this.hasZ,this.hasM);const O=this.featureAdapter;h=this.items.reduce((C,B)=>{B=O.getGeometry(B);return C+(N.isSome(B)&&B.coords.length||0)},0)/G>h}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(h)}}]}};E._createStatisticsQueryResponse=function(){var G=k._asyncToGenerator(function*(h){var g=
{attributes:{}};const q=[],O=new Map,C=new Map,B=new Map,J=new Map,K=new e(h,this.featureAdapter,this.fieldsIndex);var M=h.outStatistics;const {groupByFieldsForStatistics:I,having:m,orderByFields:Q}=h;h=I&&I.length;const S=!!h,W=S?I[0]:null,aa=S&&!this.fieldsIndex.get(W);for(const la of M??[]){const {outStatisticFieldName:pa,statisticType:ta}=la;M=la;var L="exceedslimit"!==ta?la.onStatisticField:void 0;const ua="percentile_disc"===ta||"percentile_cont"===ta,ya="EnvelopeAggregate"===ta||"CentroidAggregate"===
ta||"ConvexHullAggregate"===ta,Ra=S&&1===h&&(L===W||aa)&&"count"===ta;if(S){if(!B.has(L)){var T=[];for(const La of I){var Y=this._getAttributeValues(K,La,O);T.push(Y)}B.set(L,this._calculateUniqueValues(T,ya?!1:K.returnDistinctValues))}T=B.get(L);for(const La in T){const {count:Xa,data:za,items:Fa,itemPositions:oa}=T[La];Y=za.join(",");if(!m||K.validateItems(Fa,m)){const U=J.get(Y)||{attributes:{}};if(ya){U.aggregateGeometries||(U.aggregateGeometries={});const {aggregateGeometries:Z,outStatisticFieldName:V}=
yield this._getAggregateGeometry(M,Fa);U.aggregateGeometries[V]=Z}else{var ea=null;if(Ra)ea=Xa;else{const Z=this._getAttributeValues(K,L,O);ea=oa.map(V=>Z[V]);ea=ua&&"statisticParameters"in M?this._getPercentileValue(M,ea):this._getStatisticValue(M,ea,null,K.returnDistinctValues)}U.attributes[pa]=ea}let X=0;I.forEach((Z,V)=>U.attributes[this.fieldsIndex.get(Z)?Z:`EXPR_${++X}`]=za[V]);J.set(Y,U)}}}else if(ya){g.aggregateGeometries||(g.aggregateGeometries={});const {aggregateGeometries:La,outStatisticFieldName:Xa}=
yield this._getAggregateGeometry(M,this.items);g.aggregateGeometries[Xa]=La}else L=this._getAttributeValues(K,L,O),g.attributes[pa]=ua&&"statisticParameters"in M?this._getPercentileValue(M,L):this._getStatisticValue(M,L,C,K.returnDistinctValues);q.push({name:pa,alias:pa,type:"esriFieldTypeDouble"})}g=S?Array.from(J.values()):[g];this._sortFeatures(g,Q,(la,pa)=>la.attributes[pa]);return{fields:q,features:g}});return function(h){return G.apply(this,arguments)}}();E._getAggregateGeometry=function(){var G=
k._asyncToGenerator(function*(h,g){var q=yield new Promise((Q,S)=>c(["../../../geometry/geometryEngineJSON"],Q,S));const {statisticType:O,outStatisticFieldName:C}=h,{featureAdapter:B,spatialReference:J,geometryType:K,hasZ:M,hasM:I}=this;g=g.map(Q=>R.getGeometry(K,M,I,B.getGeometry(Q)));const m=q.convexHull(J,g,!0)[0];h={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===O?(q=m?F.getPolygonExtent(m):F.getGeometryExtent(q.union(J,g)),h.aggregateGeometries={...q,spatialReference:J},
h.outStatisticFieldName=C||"extent"):"CentroidAggregate"===O?(q=m?w.polygonCentroid(m):w.extentCentroid(F.getGeometryExtent(q.union(J,g))),h.aggregateGeometries={x:q[0],y:q[1],spatialReference:J},h.outStatisticFieldName=C||"centroid"):"ConvexHullAggregate"===O&&(h.aggregateGeometries=m,h.outStatisticFieldName=C||"convexHull");return h});return function(h,g){return G.apply(this,arguments)}}();E._getStatisticValue=function(G,h,g,q){const {onStatisticField:O,statisticType:C}=G;G=null;G=g?.has(O)?g.get(O):
l.isStringField(this.fieldsIndex.get(O))?p.calculateStringStatistics({values:h,returnDistinct:q}):p.calculateStatistics({values:q?[...(new Set(h))]:h,minValue:null,maxValue:null,useSampleStdDev:!0});g&&g.set(O,G);return G["var"===C?"variance":C]};E._getPercentileValue=function(G,h){const {onStatisticField:g,statisticParameters:q,statisticType:O}=G,{value:C,orderBy:B}=q;G=this.fieldsIndex.get(g);return p.calculatePercentile(h,{value:C,orderBy:B,fieldType:G?.type,isDiscrete:"percentile_disc"===O})};
E._getAttributeValues=function(G,h,g){if(g.has(h))return g.get(h);const q=this.fieldsIndex.get(h),O=this.items.map(C=>G.getFieldValue(C,h,q));g.set(h,O);return O};E._getAttributeDataValues=function(G,h){return this.items.map(g=>G.getDataValue(g,{field:h.field,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,normalizationField:h.normalizationField,normalizationType:h.normalizationType,normalizationTotal:h.normalizationTotal}))};E._getAttributeExpressionValues=function(){var G=k._asyncToGenerator(function*(h,
g,q){const {arcadeUtils:O}=yield H.loadArcade();g=O.createFunction(g);q=q&&O.getViewInfo(q);return h.getExpressionValues(this.items,g,q,O)});return function(h,g,q){return G.apply(this,arguments)}}();E._calculateUniqueValues=function(G,h){const g={},q=this.items,O=q.length;for(let C=0;C<O;C++){const B=q[C],J=[];for(const M of G)J.push(M[C]);const K=J.join(",");null==g[K]?g[K]={count:1,data:J,items:[B],itemPositions:[C]}:(h||g[K].count++,g[K].items.push(B),g[K].itemPositions.push(C))}return g};E._getDataValues=
function(){var G=k._asyncToGenerator(function*(h){const g=new e(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:q,field:O,normalizationField:C,normalizationType:B,normalizationTotal:J,scale:K}=h,M=q?{viewingMode:"map",scale:K,spatialReference:this.query.outSR||this.spatialReference}:null;return q?this._getAttributeExpressionValues(g,q,M):this._getAttributeDataValues(g,{field:O,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,normalizationField:C,normalizationType:B,
normalizationTotal:J})});return function(h){return G.apply(this,arguments)}}();k._createClass(y,[{key:"size",get:function(){return this.items.length}}]);return y}();A.SnappingTypes=void 0;(function(y){y[y.NONE=0]="NONE";y[y.EDGE=1]="EDGE";y[y.VERTEX=2]="VERTEX"})(A.SnappingTypes||(A.SnappingTypes={}));let r=function(){function y(E,G){this.coords=E;this.coordsIndex=G}k._createClass(y,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+
1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return y}();A.QueryEngineResult=v;Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(c,A,k){function N({scale:C,translate:B},J){return Math.round((J-B[0])/C[0])}function w({scale:C,translate:B},J){return Math.round((B[1]-J)/C[1])}function F(C,B,J){const K=[];let M,I,m,Q;for(let S=0;S<J.length;S++){const W=
J[S];if(0<S){if(m=N(C,W[0]),Q=w(C,W[1]),m!==M||Q!==I)K.push(B(W,m-M,Q-I)),M=m,I=Q}else M=N(C,W[0]),I=w(C,W[1]),K.push(B(W,M,I))}return 0<K.length?K:null}function D(C,B,J,K){return F(C,J?K?O:q:K?q:g,B)}function f(C,B,J,K){const M=[];J=J?K?O:q:K?q:g;for(K=0;K<B.length;K++){const I=F(C,J,B[K]);I&&3<=I.length&&M.push(I)}return M.length?M:null}function e(C,B,J,K){const M=[];J=J?K?O:q:K?q:g;for(K=0;K<B.length;K++){const I=F(C,J,B[K]);I&&2<=I.length&&M.push(I)}return M.length?M:null}function d({scale:C,
translate:B},J){return J*C[0]+B[0]}function z({scale:C,translate:B},J){return B[1]-J*C[1]}function R(C,B,J){const K=Array(J.length);if(!J.length)return K;const [M,I]=C.scale;let m=d(C,J[0][0]);C=z(C,J[0][1]);K[0]=B(J[0],m,C);for(let Q=1;Q<J.length;Q++){const S=J[Q];m+=S[0]*M;C-=S[1]*I;K[Q]=B(S,m,C)}return K}function l(C,B,J){const K=Array(J.length);for(let M=0;M<J.length;M++)K[M]=R(C,B,J[M]);return K}function p(C,B,J,K){return R(C,J?K?O:q:K?q:g,B)}function H(C,B,J,K){return l(C,J?K?O:q:K?q:g,B)}function t(C,
B,J,K){return l(C,J?K?O:q:K?q:g,B)}function u(C,B,J){let [K,M]=J[0],I=Math.min(K,B[0]),m=Math.min(M,B[1]),Q=Math.max(K,B[2]);B=Math.max(M,B[3]);for(let S=1;S<J.length;S++){const [W,aa]=J[S];K+=W;M+=aa;0>W&&(I=Math.min(I,K));0<W&&(Q=Math.max(Q,K));0>aa?m=Math.min(m,M):0<aa&&(B=Math.max(B,M))}C[0]=I;C[1]=m;C[2]=Q;C[3]=B;return C}function v(C,B){if(!B.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let J=0;J<B.length;J++)u(C,C,B[J]);return C}function r(C,
B,J,K,M){B.xmin=N(C,J.xmin);B.ymin=w(C,J.ymin);B.xmax=N(C,J.xmax);B.ymax=w(C,J.ymax);B!==J&&(K&&(B.zmin=J.zmin,B.zmax=J.zmax),M&&(B.mmin=J.mmin,B.mmax=J.mmax));return B}function y(C,B,J,K,M){B.points=D(C,J.points,K,M)??[];return B}function E(C,B,J,K,M){B.x=N(C,J.x);B.y=w(C,J.y);B!==J&&(K&&(B.z=J.z),M&&(B.m=J.m));return B}function G(C,B,J,K,M){C=f(C,J.rings,K,M);if(!C)return null;B.rings=C;return B}function h(C,B,J,K,M){C=e(C,J.paths,K,M);if(!C)return null;B.paths=C;return B}const g=(C,B,J)=>[B,J],
q=(C,B,J)=>[B,J,C[2]],O=(C,B,J)=>[B,J,C[2],C[3]];c.equals=function(C,B){if(C===B||null==C&&null==B)return!0;if(null==C||null==B)return!1;let J,K,M,I;C&&"upperLeft"===C.originPosition?(J=C.translate[0],K=C.translate[1],C=C.scale[0]):(J=A.isSome(C.extent)?C.extent.xmin:0,K=A.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);B&&"upperLeft"===B.originPosition?(M=B.translate[0],I=B.translate[1],B=B.scale[0]):(M=A.isSome(B.extent)?B.extent.xmin:0,I=A.isSome(B.extent)?B.extent.ymax:0,B=B.tolerance);return J===
M&&K===I&&C===B};c.getQuantizedBoundsCoordsArray=u;c.getQuantizedBoundsCoordsArrayArray=v;c.getQuantizedBoundsPaths=function(C){return v([0,0,0,0],C)};c.getQuantizedBoundsPoints=function(C){const B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(B,B,C)};c.getQuantizedBoundsRings=function(C){return v([0,0,0,0],C)};c.quantizeBounds=function(C,B,J){B[0]=N(C,J[0]);B[3]=w(C,J[1]);B[2]=N(C,J[2]);B[1]=w(C,J[3]);return B};c.quantizeExtent=r;c.quantizeGeometry=
function(C,B){return C&&B?k.isPoint(B)?E(C,{},B,!1,!1):k.isPolyline(B)?h(C,{},B,!1,!1):k.isPolygon(B)?G(C,{},B,!1,!1):k.isMultipoint(B)?y(C,{},B,!1,!1):k.isExtent(B)?r(C,{},B,!1,!1):null:null};c.quantizeMultipoint=y;c.quantizePaths=e;c.quantizePoint=E;c.quantizePoints=D;c.quantizePolygon=G;c.quantizePolyline=h;c.quantizeRings=f;c.quantizeX=N;c.quantizeY=w;c.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":
C.originPosition,scale:C.tolerance?[C.tolerance,C.tolerance]:[1,1],translate:A.isSome(C.extent)?[C.extent.xmin,C.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(C,B,J){return J?(B[0]=d(C,J[0]),B[1]=z(C,J[3]),B[2]=d(C,J[2]),B[3]=z(C,J[1]),B):[d(C,B[0]),z(C,B[3]),d(C,B[2]),z(C,B[1])]};c.unquantizeCoordsArray=R;c.unquantizeCoordsArrayArray=l;c.unquantizeExtent=function(C,B,J,K,M){B.xmin=d(C,J.xmin);B.ymin=z(C,J.ymin);B.xmax=d(C,J.xmax);B.ymax=z(C,J.ymax);B!==J&&(K&&(B.zmin=J.zmin,B.zmax=J.zmax),
M&&(B.mmin=J.mmin,B.mmax=J.mmax));return B};c.unquantizeMultipoint=function(C,B,J,K,M){A.isSome(J)&&(B.points=p(C,J.points,K,M));return B};c.unquantizePaths=H;c.unquantizePoint=function(C,B,J,K,M){if(A.isNone(J))return B;B.x=d(C,J.x);B.y=z(C,J.y);B!==J&&(K&&(B.z=J.z),M&&(B.m=J.m));return B};c.unquantizePoints=p;c.unquantizePolygon=function(C,B,J,K,M){A.isSome(J)&&(B.rings=t(C,J.rings,K,M));return B};c.unquantizePolyline=function(C,B,J,K,M){A.isSome(J)&&(B.paths=H(C,J.paths,K,M));return B};c.unquantizeRings=
t;c.unquantizeX=d;c.unquantizeY=z;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(c,A,k){return function(){function N(F,D,f){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=F.returnDistinctValues??!1;this.fieldsIndex=f;this.featureAdapter=D;if((D=F.outFields)&&!D.includes("*")){this.outFields=D;F=0;
for(const d of D){var e=A.getExpressionFromFieldName(d);e=(D=this.fieldsIndex.get(e))?null:A.getWhereClause(e,f);D=D?D.name:A.getAliasFromFieldName(d)||`FIELD_EXP_${F++}`;this._fieldDataCache.set(d,{alias:D,clause:e})}}}var w=N.prototype;w.countDistinctValues=function(F){if(!this.returnDistinctValues)return F.length;F.forEach(D=>this.getAttributes(D));return this._returnDistinctMap.size};w.getAttributes=function(F){F=this._processAttributesForOutFields(F);return this._processAttributesForDistinctValues(F)};
w.getFieldValue=function(F,D,f){const e=f?f.name:D;let d=null;this._fieldDataCache.has(e)?d=this._fieldDataCache.get(e)?.clause:f||(d=A.getWhereClause(D,this.fieldsIndex),this._fieldDataCache.set(e,{alias:e,clause:d}));return f?this.featureAdapter.getAttribute(F,e):d?.calculateValue(F,this.featureAdapter)};w.getDataValue=function(F,D){const f=D.normalizationType,e=D.normalizationTotal;let d=D.field&&this.getFieldValue(F,D.field,this.fieldsIndex.get(D.field));D.field2&&(d=`${k.processNullValue(d)}${D.fieldDelimiter}${k.processNullValue(this.getFieldValue(F,
D.field2,this.fieldsIndex.get(D.field2)))}`,D.field3&&(d=`${d}${D.fieldDelimiter}${k.processNullValue(this.getFieldValue(F,D.field3,this.fieldsIndex.get(D.field3)))}`));f&&Number.isFinite(d)&&(F="field"===f&&D.normalizationField?this.getFieldValue(F,D.normalizationField,this.fieldsIndex.get(D.normalizationField)):null,d=k.getNormalizedValue(d,f,F,e));return d};w.getExpressionValue=function(F,D,f,e){F={attributes:this.featureAdapter.getAttributes(F),layer:{fields:this.fieldsIndex.fields}};f=e.createExecContext(F,
f);return e.executeFunction(D,f)};w.getExpressionValues=function(F,D,f,e){const d={fields:this.fieldsIndex.fields};return F.map(z=>{z={attributes:this.featureAdapter.getAttributes(z),layer:d};z=e.createExecContext(z,f);return e.executeFunction(D,z)})};w.validateItem=function(F,D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:A.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D)?.clause?.testFeature(F,this.featureAdapter)??!1};w.validateItems=function(F,
D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:A.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D)?.clause?.testSet(F,this.featureAdapter)??!1};w._processAttributesForOutFields=function(F){const D=this.outFields;if(!D||!D.length)return this.featureAdapter.getAttributes(F);const f={};for(const e of D){const {alias:d,clause:z}=this._fieldDataCache.get(e);f[d]=z?z.calculateValue(F,this.featureAdapter):this.featureAdapter.getAttribute(F,d)}return f};w._processAttributesForDistinctValues=
function(F){if(c.isNone(F)||!this.returnDistinctValues)return F;var D=this.outFields,f=[];if(D)for(const d of D){var {alias:e}=this._fieldDataCache.get(d);f.push(F[e])}else for(e in F)f.push(F[e]);D=`${(D||["*"]).join(",")}=${f.join(",")}`;f=this._returnDistinctMap.get(D)||0;this._returnDistinctMap.set(D,++f);return 1<f?null:F};return N}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(c,A,k){function N(e,
d){return e?D.get(e,d):null}function w(e,d,z,R=!0){const l=[];for(const p of d)if("*"!==p&&!e.has(p))if(R){d=F(p);try{const H=N(d,e);if(!H)throw new A("feature-store:unsupported-query","invalid SQL expression",{where:d});if(!H.isStandardized)throw new A("feature-store:unsupported-query","expression is not standard",{clause:H});w(e,H.fieldNames,"expression contains missing fields")}catch(H){if((d=H&&H.details)&&(d.clause||d.where))throw H;d&&d.missingFields?l.push(...d.missingFields):l.push(p)}}else l.push(p);
if(l.length)throw new A("feature-store:unsupported-query",z,{missingFields:l});}function F(e){return e.split(" as ")[0]}const D=new k.WhereClauseCache(50,500),f=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));c.getAliasFromFieldName=function(e){return e.split(" as ")[1]};c.getExpressionFromFieldName=F;c.getWhereClause=N;c.hasInvalidFieldType=function(e,d){return(e=d.get(e))?!f.has(e.type):
!1};c.validateFields=w;c.validateHaving=function(e,d,z){if(!d)return!0;const R=D.get(d,e);if(!R)throw new A("feature-store:unsupported-query","invalid SQL expression",{having:d});if(!R.isAggregate)throw new A("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:d});w(e,R.fieldNames,"having contains missing fields");if(!R.getExpressions().every(l=>{const {aggregateType:p,field:H}=l,t=e.get(H)?.name;return z.some(u=>{const {onStatisticField:v,statisticType:r}=
u;return e.get(v)?.name===t&&r.toLowerCase().trim()===p})}))throw new A("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:d});return!0};c.validateWhere=function(e,d){if(!d)return!0;const z=D.get(d,e);if(!z)throw new A("feature-store:unsupported-query","invalid SQL expression",{where:d});if(!z.isStandardized)throw new A("feature-store:unsupported-query","where clause is not standard",{where:d});w(e,z.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(c,A,k){let N=function(){function w(F,D){this._cache=new A(F);this._invalidCache=new A(D)}w.prototype.get=function(F,D){const f=`${D.uid}:${F}`,e=this._cache.get(f);if(e)return e;if(void 0!==this._invalidCache.get(f))return null;try{const d=k.WhereClause.create(F,D);this._cache.put(f,d);return d}catch{return this._invalidCache.put(f,
null),null}};return w}();c.WhereClauseCache=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(c){return function(){function A(N,w){this._storage=new c.MemCacheStorage;this._storage.maxSize=N;w&&this._storage.registerRemoveFunc("",w)}var k=A.prototype;k.put=function(N,w){this._storage.put(N,w,1,1)};k.pop=function(N){return this._storage.pop(N)};k.get=function(N){return this._storage.get(N)};k.clear=function(){this._storage.clearAll()};
k.destroy=function(){this._storage.destroy()};return A}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(c,A,k,N,w,F){function D(M,I){M+="";return M.length>=I?M:Array(I-M.length+1).join("0")+M}function f(M,I,m="0",Q="0",S="0",W="0",aa="",L="0",T="0"){return"+"===aa||"-"===aa?(M=`${D(parseInt(M,10),4)}-${D(parseInt(I,10),2)}-${D(parseInt(m,10),2)}`,I="",10>parseFloat(W)&&
(I="0"),Q=`${D(parseInt(Q,10),2)}:${D(parseInt(S,10),2)}:${I+parseFloat(W).toString()}`,aa=`${aa}${D(parseInt(L,10),2)}:${D(parseInt(T,10),2)}`,new Date(M+"T"+Q+aa)):new Date(parseInt(M,10),parseInt(I,10)-1,parseInt(m,10),parseInt(Q,10),parseInt(S,10),parseFloat(W))}function e(M){let I=G.exec(M);if(null!==I){const [,m,Q,S,W,aa,L]=I;return f(m,Q,S,W,aa,L)}I=h.exec(M);if(null!==I){const [,m,Q,S,W,aa,L,T,Y,ea]=I;return f(m,Q,S,W,aa,L,T,Y,ea)}I=g.exec(M);if(null!==I){const [,m,Q,S,W,aa,L,T,Y]=I;return f(m,
Q,S,W,aa,"0",L,T,Y)}I=q.exec(M);if(null!==I){const [,m,Q,S,W,aa]=I;return f(m,Q,S,W,aa)}I=E.exec(M);if(null!==I){const [,m,Q,S]=I;return f(m,Q,S)}throw Error("SQL Invalid Timestamp");}function d(M){const I=E.exec(M);if(null===I)try{return e(M)}catch{throw Error("SQL Invalid Date");}const [,m,Q,S]=I;return new Date(parseInt(m,10),parseInt(Q,10)-1,parseInt(S,10))}function z(M){return Array.isArray(M)?M:[M]}function R(M){return null!==M?!0!==M:null}function l(M,I){return null!=M&&null!=I?!0===M&&!0===
I:!1===M||!1===I?!1:null}function p(M,I){return null!=M&&null!=I?!0===M||!0===I:!0===M||!0===I?!0:null}function H(M,I){if(null==M)return null;let m=!1;for(const Q of I)if(null==Q)m=null;else if(M===Q){m=!0;break}return m}function t(M,I,m){if(null==M)return null;let Q="",S=J.Normal;for(let W=0;W<I.length;W++){const aa=I.charAt(W);switch(S){case J.Normal:aa===m?S=J.Escaped:Q="-[]/{}()*+?.\\^$|".includes(aa)?Q+("\\"+aa):"%"===aa?Q+".*":"_"===aa?Q+".":Q+aa;break;case J.Escaped:Q="-[]/{}()*+?.\\^$|".includes(aa)?
Q+("\\"+aa):Q+aa,S=J.Normal}}return(new RegExp("^"+Q+"$","m")).test(M)}function u(M){return M instanceof Date?M.valueOf():M}function v(M,I,m){if(null==I||null==m)return null;I=u(I);m=u(m);switch(M){case "\x3c\x3e":return I!==m;case "\x3d":return I===m;case "\x3e":return I>m;case "\x3c":return I<m;case "\x3e\x3d":return I>=m;case "\x3c\x3d":return I<=m}}function r(M,I,m){if("||"===M)return w.evaluateFunction("concat",[I,m]);if(I instanceof w.SqlInterval)if(m instanceof Date)switch(M){case "+":return new Date(I.valueInMilliseconds()+
m.getTime());case "-":return I.valueInMilliseconds()-m.getTime();case "*":return I.valueInMilliseconds()*m.getTime();case "/":return I.valueInMilliseconds()/m.getTime()}else if(m instanceof w.SqlInterval)switch(M){case "+":return w.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+m.valueInMilliseconds());case "-":return w.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-m.valueInMilliseconds());case "*":return I.valueInMilliseconds()*m.valueInMilliseconds();case "/":return I.valueInMilliseconds()/
m.valueInMilliseconds()}else I=I.valueInMilliseconds();else if(m instanceof w.SqlInterval)if(I instanceof Date)switch(M){case "+":return new Date(m.valueInMilliseconds()+I.getTime());case "-":return new Date(I.getTime()-m.valueInMilliseconds());case "*":return I.getTime()*m.valueInMilliseconds();case "/":return I.getTime()/m.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(I instanceof Date&&"number"===typeof m)switch(m*=864E5,I=I.getTime(),M){case "+":return new Date(I+m);case "-":return new Date(I-
m);case "*":return new Date(I*m);case "/":return new Date(I/m)}else if(m instanceof Date&&"number"===typeof I)switch(I*=864E5,m=m.getTime(),M){case "+":return new Date(I+m);case "-":return new Date(I-m);case "*":return new Date(I*m);case "/":return new Date(I/m)}switch(M){case "+":return I+m;case "-":return I-m;case "*":return I*m;case "/":return I/m}}function y(M,I,m,Q){M=Q.getAttribute(M,I);return null!=M&&1===m[I]?new Date(M):M}const E=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,g=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,O=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function M(){}M.makeBool=function(I){return!0===I};M.featureValue=function(I,m,Q,S){return y(I,m,Q,S)};M.equalsNull=function(I){return null===I};M.applyLike=function(I,m,Q){return t(I,m,
Q)};M.ensureArray=function(I){return z(I)};M.applyIn=function(I,m){return H(I,m)};M.currentDate=function(){const I=new Date;I.setHours(0,0,0,0);return I};M.makeSqlInterval=function(I,m,Q){return w.SqlInterval.createFromValueAndQualifer(I,m,Q)};M.convertInterval=function(I){return I instanceof w.SqlInterval?I.valueInMilliseconds():I};M.currentTimestamp=function(){return new Date};M.compare=function(I,m,Q){return v(I,m,Q)};M.calculate=function(I,m,Q){return r(I,m,Q)};M.makeComparable=function(I){return u(I)};
M.evaluateFunction=function(I,m){return w.evaluateFunction(I,m)};M.lookup=function(I,m){I=m[I];return void 0===I?null:I};M.between=function(I,m){return null==I||null==m[0]||null==m[1]?null:I>=m[0]&&I<=m[1]};M.notbetween=function(I,m){return null==I||null==m[0]||null==m[1]?null:I<m[0]||I>m[1]};M.ternaryNot=function(I){return R(I)};M.ternaryAnd=function(I,m){return l(I,m)};M.ternaryOr=function(I,m){return p(I,m)};return M}(),B=function(){function M(m,Q){this.fieldsIndex=Q;this._datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=F.WhereGrammar.parse(m);const {isStandardized:S,isAggregate:W,referencedFieldNames:aa}=this._extractExpressionInfo(Q);this._referencedFieldNames=aa;this.isStandardized=S;this.isAggregate=W}M.create=function(m,Q){return new M(m,Q)};var I=M.prototype;I.testSet=function(m,Q=K){const S={};for(const W of this.fieldNames)S[W]=m.map(aa=>Q.getAttribute(aa,W));return!!this._evaluateNode(this.parseTree,{attributes:S},K)};I.calculateValue=function(m,Q=K){m=this._evaluateNode(this.parseTree,
m,Q);return m instanceof w.SqlInterval?m.valueInMilliseconds()/864E5:m};I.calculateValueCompiled=function(m,Q=K){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,Q,this._datefields);if(k("esri-csp-restrictions"))return this.calculateValue(m,Q);this._compileMe();return this.parseTree._compiledVersion(m,this.parameters,Q,this._datefields)};I.testFeature=function(m,Q=K){return!!this._evaluateNode(this.parseTree,m,Q)};I.testFeatureCompiled=function(m,Q=
K){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,Q,this._datefields);if(k("esri-csp-restrictions"))return this.testFeature(m,Q);this._compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,Q,this._datefields)};I.getFunctions=function(){const m=new Set;this._visitAll(this.parseTree,Q=>{"function"===Q.type&&m.add(Q.name.toLowerCase())});return Array.from(m)};I.getExpressions=function(){const m=new Map;this._visitAll(this.parseTree,
Q=>{if("function"===Q.type){const S=Q.name.toLowerCase();Q=Q.args.value[0];if("column-reference"===Q.type){Q=Q.column;const W=`${S}-${Q}`;m.has(W)||m.set(W,{aggregateType:S,field:Q})}}});return[...m.values()]};I.getVariables=function(){const m=new Set;this._visitAll(this.parseTree,Q=>{"parameter"===Q.type&&m.add(Q.value.toLowerCase())});return Array.from(m)};I._compileMe=function(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=
(new Function("feature","lookups","attributeAdapter","datefields",m)).bind(C)};I._extractExpressionInfo=function(m){const Q=[],S=new Set;let W=!0,aa=!0;this._visitAll(this.parseTree,L=>{switch(L.type){case "column-reference":const T=m?.get(L.column);let Y,ea;T?Y=ea=T.name??"":(ea=L.column,Y=ea.toLowerCase());T&&T.name&&("date"===T.type||"esriFieldTypeDate"===T.type)&&(this._datefields[T.name]=1);S.has(Y)||(S.add(Y),Q.push(ea));L.column=ea;break;case "function":const {name:la,args:pa}=L;L=pa.value.length;
W&&(W=w.isStandardized(la,L));aa&&(aa=N.isAggregate(la,L))}});return{referencedFieldNames:Array.from(Q),isStandardized:W,isAggregate:aa}};I._visitAll=function(m,Q){if(null!=m)switch(Q(m),m.type){case "when-clause":this._visitAll(m.operand,Q);this._visitAll(m.value,Q);break;case "case-expression":for(const S of m.clauses)this._visitAll(S,Q);"simple"===m.format&&this._visitAll(m.operand,Q);null!==m.else&&this._visitAll(m.else,Q);break;case "expression-list":for(const S of m.value)this._visitAll(S,Q);
break;case "unary-expression":this._visitAll(m.expr,Q);break;case "binary-expression":this._visitAll(m.left,Q);this._visitAll(m.right,Q);break;case "function":this._visitAll(m.args,Q)}};I.evaluateNodeToJavaScript=function(m){switch(m.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case-expression":var Q="";if("simple"===m.format){var S="this.makeComparable("+this.evaluateNodeToJavaScript(m.operand)+
")";Q="( ";for(let W=0;W<m.clauses.length;W++)Q+=" ("+S+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(m.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(m.clauses[W].value)+") : "}else for(Q="( ",S=0;S<m.clauses.length;S++)Q+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[S].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[S].value)+") : ";Q=null!==m.else?Q+this.evaluateNodeToJavaScript(m.else):Q+"null";return Q+" )";case "parameter":return"this.lookup("+
JSON.stringify(m.value.toLowerCase())+",lookups)";case "expression-list":Q="[";for(S of m.value)"["!==Q&&(Q+=","),Q+=this.evaluateNodeToJavaScript(S);return Q+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(m.expr)+")";case "binary-expression":switch(m.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+
" )";case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")";case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+
")"}throw Error("Not Supported Operator "+m.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(m.value);case "date":return"(new Date("+d(m.value).getTime().toString()+"))";case "timestamp":return"(new Date("+e(m.value).getTime().toString()+"))";case "current-time":return"date"===m.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(m.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+")"}throw Error("Unsupported sql syntax "+m.type);};I._evaluateNode=function(m,Q,S){switch(m.type){case "interval":return Q=this._evaluateNode(m.value,Q,S),w.SqlInterval.createFromValueAndQualifer(Q,m.qualifier,m.op);case "case-expression":if("simple"===m.format){var W=u(this._evaluateNode(m.operand,Q,S));for(var aa=0;aa<m.clauses.length;aa++)if(W===u(this._evaluateNode(m.clauses[aa].operand,Q,S)))return this._evaluateNode(m.clauses[aa].value,
Q,S)}else for(W=0;W<m.clauses.length;W++)if(!0===this._evaluateNode(m.clauses[W].operand,Q,S))return this._evaluateNode(m.clauses[W].value,Q,S);return null!==m.else?this._evaluateNode(m.else,Q,S):null;case "parameter":return this.parameters[m.value.toLowerCase()];case "expression-list":W=[];for(aa of m.value)W.push(this._evaluateNode(aa,Q,S));return W;case "unary-expression":return R(this._evaluateNode(m.expr,Q,S));case "binary-expression":switch(m.operator){case "AND":return l(this._evaluateNode(m.left,
Q,S),this._evaluateNode(m.right,Q,S));case "OR":return p(this._evaluateNode(m.left,Q,S),this._evaluateNode(m.right,Q,S));case "IS":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(m.left,Q,S);case "ISNOT":if("null"!==m.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(m.left,Q,S);case "IN":return W=z(this._evaluateNode(m.right,Q,S)),H(this._evaluateNode(m.left,Q,S),W);case "NOT IN":return W=z(this._evaluateNode(m.right,
Q,S)),R(H(this._evaluateNode(m.left,Q,S),W));case "BETWEEN":return W=this._evaluateNode(m.left,Q,S),m=this._evaluateNode(m.right,Q,S),null==W||null==m[0]||null==m[1]?null:W>=u(m[0])&&W<=u(m[1]);case "NOTBETWEEN":return W=this._evaluateNode(m.left,Q,S),m=this._evaluateNode(m.right,Q,S),null==W||null==m[0]||null==m[1]?null:W<u(m[0])||W>u(m[1]);case "LIKE":return t(this._evaluateNode(m.left,Q,S),this._evaluateNode(m.right,Q,S),m.escape);case "NOT LIKE":return R(t(this._evaluateNode(m.left,Q,S),this._evaluateNode(m.right,
Q,S),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return v(m.operator,this._evaluateNode(m.left,Q,S),this._evaluateNode(m.right,Q,S));case "-":case "+":case "*":case "/":case "||":return r(m.operator,this._evaluateNode(m.left,Q,S),this._evaluateNode(m.right,Q,S))}case "null":case "boolean":case "string":case "number":return m.value;case "date":return d(m.value);case "timestamp":return e(m.value);case "current-time":return Q=new Date,"date"===m.mode&&
Q.setHours(0,0,0,0),Q;case "column-reference":return y(Q,m.column,this._datefields,S);case "data-type":return m.value;case "function":return Q=this._evaluateNode(m.args,Q,S),this.isAggregate?N.aggregateFunction(m.name,Q):w.evaluateFunction(m.name,Q)}throw Error("Unsupported sql syntax "+m.type);};A._createClass(M,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,m=>{"current-time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||O.has(m.name.toLowerCase()))});return this._hasDateFunctions}}]);return M}();var J;(function(M){M[M.Normal=0]="Normal";M[M.Escaped=1]="Escaped"})(J||(J={}));const K={getAttribute(M,I){return(M&&"object"===typeof M.attributes?M.attributes:M)[I]}};c.WhereClause=B;c.defaultAttributeAdapter=K;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(c){function A(w){let F=0;for(let D=0;D<w.length;D++)F+=w[D];return F/w.length}function k(w){const F=A(w),D=w.length;let f=0;for(const e of w)f+=(e-F)**2;return 1<D?f/(D-1):0}const N={min:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:Math.min.apply(Math,w[0])},max:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:Math.max.apply(Math,w[0])},avg:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:A(w[0])},sum:{minParams:1,
maxParams:1,evaluate:w=>{if(null==w[0])w=null;else{w=w[0];let F=0;for(let D=0;D<w.length;D++)F+=w[D];w=F}return w}},stddev:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:Math.sqrt(k(w[0]))},count:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:w[0].length},var:{minParams:1,maxParams:1,evaluate:w=>null==w[0]?null:k(w[0])}};c.aggregateFunction=function(w,F){const D=N[w.toLowerCase()];if(null==D)throw Error("Function Not Recognised");if(F.length<D.minParams||F.length>D.maxParams)throw Error(`Invalid Parameter count for call to ${w.toUpperCase()}`);
return D.evaluate(F)};c.isAggregate=function(w,F){w=N[w.toLowerCase()];return null!=w&&F>=w.minParams&&F<=w.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(c,A,k,N){function w(e){e=new Date(e.getTime());e.setHours(0,0,0,0);return e}function F(e,d){if(e instanceof Date)return d?w(e):e;if("string"===typeof e||e instanceof
String)if(e=N.DateTime.fromSQL(e),e.isValid)return d?w(e.toJSDate()):e.toJSDate();throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);}let D=function(){function e(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}e._fixDefaults=function(d){if(null!==d.precision||null!==d.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};e._parseSecondsComponent=function(d,z){z.includes(".")?(z=z.split("."),d.second=parseFloat(z[0]),d.millis=
parseInt(z[1],10)):d.second=parseFloat(z)};e.createFromMilliseconds=function(d){const z=new e;z.second=d/1E3;return z};e.createFromValueAndQualifer=function(d,z,R){let l=null;const p=new e;p.op="-"===R?"-":"+";if("interval-period"===z.type){e._fixDefaults(z);R=RegExp("^[0-9]{1,}$");if("year"===z.period||"month"===z.period)throw Error("Year-Month Intervals not supported");if("second"===z.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(d))e._parseSecondsComponent(p,d);else throw Error("Illegal Interval");
else if(R.test(d))p[z.period]=parseFloat(d);else throw Error("Illegal Interval");}else{e._fixDefaults(z.start);e._fixDefaults(z.end);if("year"===z.start.period||"month"===z.start.period)throw Error("Year-Month Intervals not supported");if("year"===z.end.period||"month"===z.end.period)throw Error("Year-Month Intervals not supported");switch(z.start.period){case "day":switch(z.end.period){case "hour":l=RegExp("^[0-9]{1,} [0-9]{1,}$");if(l.test(d))p[z.start.period]=parseFloat(d.split(" ")[0]),p[z.end.period]=
parseFloat(d.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":l=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(l.test(d))p[z.start.period]=parseFloat(d.split(" ")[0]),d=d.split(" ")[1].split(":"),p.hour=parseFloat(d[0]),p.minute=parseFloat(d[1]);else throw Error("Illegal Interval");break;case "second":l=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(l.test(d))p[z.start.period]=parseFloat(d.split(" ")[0]),d=d.split(" ")[1].split(":"),p.hour=parseFloat(d[0]),
p.minute=parseFloat(d[1]),e._parseSecondsComponent(p,d[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(z.end.period){case "minute":l=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(l.test(d))p.hour=parseFloat(d.split(":")[0]),p.minute=parseFloat(d.split(":")[1]);else throw Error("Illegal Interval");break;case "second":l=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(l.test(d))d=d.split(":"),p.hour=parseFloat(d[0]),p.minute=
parseFloat(d[1]),e._parseSecondsComponent(p,d[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(z.end.period){case "second":l=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(l.test(d))d=d.split(":"),p.minute=parseFloat(d[0]),e._parseSecondsComponent(p,d[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return p};e.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return e}();const f={extract:{minParams:2,maxParams:2,evaluate:([e,d])=>{if(null==d)return null;if(d instanceof Date)switch(e.toUpperCase()){case "SECOND":return d.getSeconds();case "MINUTE":return d.getMinutes();case "HOUR":return d.getHours();case "DAY":return d.getDate();case "MONTH":return d.getMonth()+1;case "YEAR":return d.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const [d,z]=e;return null==d||null==z?null:d.toString().substring(z-1)}if(3===e.length){const [d,z,R]=e;return null==d||null==z||null==R?null:0>=R?"":d.toString().substring(z-1,z+R-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,d])=>null==e||null==d?null:d.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{var d=3===e.length,z=d?e[1]:" ";d=d?e[2]:e[1];if(null==z||null==d)return null;z=`(${k.escapeRegExpString(z)})`;switch(e[0]){case "BOTH":return d.replace(new RegExp(`^${z}*|${z}*$`,
"g"),"");case "LEADING":return d.replace(new RegExp(`^${z}*`,"g"),"");case "TRAILING":return d.replace(new RegExp(`${z}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,
maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},
sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:0<e[0]?1:0>e[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const d=e[0];e=2===e.length?10**e[1]:1;return null==d?null:Math.round(d*e)/e}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},
char_length:{minParams:1,maxParams:1,evaluate:e=>"string"===typeof e[0]||e[0]instanceof String?e[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:e=>{let d="";for(let z=0;z<e.length;z++){if(null==e[z])return null;d+=e[z].toString()}return d}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:e=>{for(const d of e)if(null!==
d)return d;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>{const d=e[0];e=e[1];return(d instanceof Date?d.valueOf():d)===(e instanceof Date?e.valueOf():e)?null:d}},cast:{minParams:2,maxParams:2,evaluate:e=>{var d=e[0];e=e[1];if(null===d)return null;switch(e.type){case "integer":d=
parseInt(d,10);if(isNaN(d))throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);return d;case "smallint":d=parseInt(d,10);if(isNaN(d))throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);if(32767<d||-32767>d)throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);return d;case "float":case "real":d=parseFloat(d);if(isNaN(d))throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);return d;case "date":return F(d,!0);case "timestamp":return F(d,!1);case "varchar":d=d.toString();if(d.length>e.size)throw new A.SqlError(A.SqlErrorCodes.CannotCastValue);
return d;default:throw new A.SqlError(A.SqlErrorCodes.InvalidDataType);}}}};c.SqlInterval=D;c.evaluateFunction=function(e,d){const z=f[e.toLowerCase()];if(null==z)throw Error("Function Not Recognised");if(d.length<z.minParams||d.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return z.evaluate(d)};c.isStandardized=function(e,d){e=f[e.toLowerCase()];return null!=e&&d>=e.minParams&&d<=e.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(c,A,k){c.SqlErrorCodes=void 0;(function(f){f.InvalidFunctionParameters="InvalidFunctionParameters";f.UnsupportedSqlFunction="UnsupportedSqlFunction";f.UnsupportedOperator="UnsupportedOperator";f.UnsupportedSyntax="UnsupportedSyntax";f.UnsupportedIsRhs="UnsupportedIsRhs";f.UnsupportedIsLhs="UnsupportedIsLhs";f.InvalidDataType="InvalidDataType";f.CannotCastValue=
"CannotCastValue";f.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const N={[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let w=function(f){function e(d,z){d=f.call(this,k.doSubstitutions(N[d],z))||this;d.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(d),
e);return d}A._inheritsLoose(e,f);return e}(A._wrapNativeSuper(Error));c.FeatureSetErrorCodes=void 0;(function(f){f.NeverReach="NeverReach";f.NotImplemented="NotImplemented";f.Cancelled="Cancelled";f.InvalidStatResponse="InvalidStatResponse";f.InvalidRequest="InvalidRequest";f.RequestFailed="RequestFailed";f.MissingFeatures="MissingFeatures";f.AggregationFieldNotFound="AggregationFieldNotFound";f.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const F=
{[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let D=function(f){function e(d,z){d=f.call(this,k.doSubstitutions(F[d],z))||this;d.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(d),e);return d}A._inheritsLoose(e,f);return e}(A._wrapNativeSuper(Error));c.FeatureSetError=D;c.FeatureSetErrorMessages=F;c.SqlError=w;c.SqlErrorMessages=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(c,A){function k(l){return l&&l.loc?`Line : ${l.loc.start?.line}, ${l.loc.start?.column}: `:""}function N(l,p){try{if(!p)return l;for(const H in p){let t=p[H];t||(t="");l=l.replace("{"+H+"}",p[H])}}catch(H){}return l}c.ExecutionErrorCodes=void 0;(function(l){l.AsyncNotEnabled="AsyncNotEnabled";l.ModulesNotSupported="ModulesNotSupported";l.CircularModules="CircularModules";l.NeverReach="NeverReach";
l.UnsupportedHashType="UnsupportedHashType";l.InvalidParameter="InvalidParameter";l.UnexpectedToken="UnexpectedToken";l.Unrecognised="Unrecognised";l.UnrecognisedType="UnrecognisedType";l.MaximumCallDepth="MaximumCallDepth";l.BooleanConditionRequired="BooleanConditionRequired";l.TypeNotAllowedInFeature="TypeNotAllowedInFeature";l.KeyMustBeString="KeyMustBeString";l.WrongNumberOfParameters="WrongNumberOfParameters";l.CallNonFunction="CallNonFunction";l.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
l.NoFunctionInDictionary="NoFunctionInDictionary";l.NoFunctionInArray="NoFunctionInArray";l.AssignModuleFunction="AssignModuleFunction";l.LogicExpressionOrAnd="LogicExpressionOrAnd";l.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";l.FuncionNotFound="FunctionNotFound";l.InvalidMemberAccessKey="InvalidMemberAccessKey";l.UnsupportedUnaryOperator="UnsupportUnaryOperator";l.InvalidIdentifier="InvalidIdentifier";l.MemberOfNull="MemberOfNull";l.UnsupportedOperator="UnsupportedOperator";l.Cancelled=
"Cancelled";l.ModuleAccessorMustBeString="ModuleAccessorMustBeString";l.ModuleExportNotFound="ModuleExportNotFound";l.Immutable="Immutable";l.OutOfBounds="OutOfBounds";l.IllegalResult="IllegalResult";l.FieldNotFound="FieldNotFound";l.PortalRequired="PortalRequired";l.LogicError="LogicError";l.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";l.KeyAccessorMustBeString="KeyAccessorMustBeString";l.WrongSpatialReference="WrongSpatialReference"})(c.ExecutionErrorCodes||(c.ExecutionErrorCodes={}));const w=
{[c.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[c.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[c.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[c.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[c.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[c.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[c.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[c.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[c.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[c.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[c.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[c.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[c.ExecutionErrorCodes.PortalRequired]:"Portal is required",[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[c.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[c.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[c.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[c.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[c.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[c.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[c.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[c.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[c.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[c.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[c.ExecutionErrorCodes.Immutable]:"Object is immutable",
[c.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[c.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[c.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[c.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[c.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[c.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[c.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[c.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",
[c.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[c.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[c.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[c.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[c.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[c.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};
let F=function(l){function p(...H){return l.call(this,...H)||this}A._inheritsLoose(p,l);return p}(A._wrapNativeSuper(Error)),D=function(l){function p(H,t){H=l.call(this,k(t)+H.message,{cause:H})||this;H.loc=null;Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(H),p);t&&t.loc&&(H.loc=t.loc);return H}A._inheritsLoose(p,l);return p}(F),f=function(l){function p(H,t,u,v){H=l.call(this,"Execution error - "+k(u)+N(w[t],v))||this;H.loc=null;H.declaredRootClass="esri.arcade.arcadeexecutionerror";
Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(H),p);u&&u.loc&&(H.loc=u.loc);return H}A._inheritsLoose(p,l);return p}(A._wrapNativeSuper(Error)),e=function(l){function p(H,t,u,v){H=l.call(this,"Compilation error - "+k(u)+N(w[t],v))||this;H.loc=null;H.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(H),p);u&&u.loc&&(H.loc=u.loc);return H}A._inheritsLoose(p,l);return p}(A._wrapNativeSuper(Error)),
d=function(l){function p(){var H=l.call(this,"Uncompilable code structures")||this;H.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(H),p);return H}A._inheritsLoose(p,l);return p}(A._wrapNativeSuper(Error));c.ModuleErrorCodes=void 0;(function(l){l.UnrecognisedUri="UnrecognisedUri";l.UnsupportedUriProtocol="UnsupportedUriProtocol"})(c.ModuleErrorCodes||(c.ModuleErrorCodes={}));const z={[c.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[c.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let R=function(l){function p(H,t){H=l.call(this,N(z[H],t))||this;H.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(A._assertThisInitialized(H),p);return H}A._inheritsLoose(p,l);return p}(A._wrapNativeSuper(Error));c.ArcadeCompilationError=e;c.ArcadeExecutionError=f;c.ArcadeUncompilableError=d;c.ErrorWithCause=F;c.ExecutionErrorMessages=w;c.LocatableArcadeExecutionError=D;c.ModuleError=
R;c.ModuleErrorMessages=z;c.doSubstitutions=N;c.ensureArcadeExecutionError=function(l,p,H){return"esri.arcade.arcadeexecutionerror"===H.declaredRootClass||"esri.arcade.arcadecompilationerror"===H.declaredRootClass?null===H.loc&&p&&p.loc?new D(H,{cause:H}):H:p&&p.loc?new D(H,{cause:H}):H};c.parsingValidationMessage=function(l,p,H){return"Parsing error - "+k(l)+N(w[p],H)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],
function(c,A){var k={};(function(w){(function(F,D){w.exports&&(w.exports=D())})(A.commonjsGlobal,function(){function F(f,e,d,z){f=Error.call(this,f);Object.setPrototypeOf&&Object.setPrototypeOf(f,F.prototype);f.expected=e;f.found=d;f.location=z;f.name="SyntaxError";return f}function D(f,e,d){d=d||" ";if(f.length>e)return f;e-=f.length;d+=d.repeat(e);return f+d.slice(0,e)}(function(f,e){function d(){this.constructor=f}d.prototype=e.prototype;f.prototype=new d})(F,Error);F.prototype.format=function(f){var e=
"Error: "+this.message;if(this.location){var d=null,z;for(z=0;z<f.length;z++)if(f[z].source===this.location.source){d=f[z].text.split(/\r\n|\n|\r/g);break}f=this.location.start;z=this.location.source+":"+f.line+":"+f.column;if(d){var R=this.location.end,l=D("",f.line.toString().length," ");d=d[f.line-1];R=(f.line===R.line?R.column:d.length+1)-f.column||1;e+="\n --\x3e "+z+"\n"+l+" |\n"+f.line+" | "+d+"\n"+l+" | "+D("",f.column-1," ")+D("",R,"^")}else e+="\n at "+z}return e};F.buildMessage=function(f,
e){function d(H){return H.charCodeAt(0).toString(16).toUpperCase()}function z(H){return H.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+d(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+d(t)})}function R(H){return H.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+d(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+d(t)})}function l(H){return p[H.type](H)}var p={literal:function(H){return'"'+z(H.text)+'"'},class:function(H){var t=H.parts.map(function(u){return Array.isArray(u)?R(u[0])+"-"+R(u[1]):R(u)});return"["+(H.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(H){return H.description}};return"Expected "+function(H){H=
H.map(l);var t,u;H.sort();if(0<H.length){for(u=t=1;t<H.length;t++)H[t-1]!==H[t]&&(H[u]=H[t],u++);H.length=u}switch(H.length){case 1:return H[0];case 2:return H[0]+" or "+H[1];default:return H.slice(0,-1).join(", ")+", or "+H[H.length-1]}}(f)+" but "+(e?'"'+z(e)+'"':"end of input")+" found."};return{SyntaxError:F,parse:function(f,e){function d(n,x){return{type:"literal",text:n,ignoreCase:x}}function z(n,x,P){return{type:"class",parts:n,inverted:x,ignoreCase:P}}function R(n){var x=Eb[n],P;if(!x){for(P=
n-1;!Eb[P];)P--;x=Eb[P];for(x={line:x.line,column:x.column};P<n;)10===f.charCodeAt(P)?(x.line++,x.column=1):x.column++,P++;Eb[n]=x}return x}function l(n,x){var P=R(n),ca=R(x);return{source:qd,start:{offset:n,line:P.line,column:P.column},end:{offset:x,line:ca.line,column:ca.column}}}function p(n){b<Ua||(b>Ua&&(Ua=b,dc=[]),dc.push(n))}function H(){var n=b;da();var x=u();x!==a?(da(),n=x):(b=n,n=a);return n}function t(){var n=b;var x=u();if(x!==a){n=[];var P=b;var ca=da();var ma=Fb();if(ma!==a){var va=
da();var wa=u();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;for(;P!==a;)n.push(P),P=b,ca=da(),ma=Fb(),ma!==a?(va=da(),wa=u(),wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)):(b=P,P=a);P={type:"expression-list"};x=[x];for(ca=0;ca<n.length;ca++)x.push(n[ca][3]);P.value=x;n=P}else b=n,n=a;return n}function u(){var n=b;var x=v();if(x!==a){n=[];var P=b;var ca=da();var ma=U();if(ma!==a){var va=da();var wa=v();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;for(;P!==a;)n.push(P),P=b,ca=da(),ma=U(),ma!==a?(va=
da(),wa=v(),wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)):(b=P,P=a);n=tb(x,n)}else b=n,n=a;return n}function v(){var n=b;var x=r();if(x!==a){n=[];var P=b;var ca=da();var ma=oa();if(ma!==a){var va=da();var wa=r();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;for(;P!==a;)n.push(P),P=b,ca=da(),ma=oa(),ma!==a?(va=da(),wa=r(),wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)):(b=P,P=a);n=tb(x,n)}else b=n,n=a;return n}function r(){var n=b;var x=Fa();if(x===a){x=b;if(33===f.charCodeAt(b)){var P=rd;b++}else P=a,0===ba&&p(sd);
if(P!==a){var ca=b;ba++;if(61===f.charCodeAt(b)){var ma=vc;b++}else ma=a,0===ba&&p(wc);ba--;ma===a?ca=void 0:(b=ca,ca=a);ca!==a?x=P=[P,ca]:(b=x,x=a)}else b=x,x=a}x!==a?(P=da(),ca=r(),ca!==a?n={type:"unary-expression",operator:"NOT",expr:ca}:(b=n,n=a)):(b=n,n=a);if(n===a){x=b;n=h();if(n!==a){da();x=[];P=b;ca=da();ma=y();if(ma!==a){var va=da();var wa=h();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;if(P!==a)for(;P!==a;)x.push(P),P=b,ca=da(),ma=y(),ma!==a?(va=da(),wa=h(),wa!==a?P=ca=[ca,ma,va,wa]:
(b=P,P=a)):(b=P,P=a);else x=a;x!==a&&(x={type:"arithmetic",tail:x});x===a&&(x=b,P=G(),P!==a?(da(),ca=Ja(),ca!==a?(da(),ca=t(),ca!==a?(da(),ma=Ka(),ma!==a?x={op:P,right:ca}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,P=G(),P!==a?(da(),ca=Ja(),ca!==a?(da(),ca=Ka(),ca!==a?x={op:P,right:{type:"expression-list",value:[]}}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,P=G(),P!==a?(da(),ca=I(),ca!==a?x={op:P,right:ca}:(b=x,x=a)):(b=x,x=a))),x===a&&(x=b,ma=Fa(),ma!==a?(da(),P=X(),P!==a?(da(),ca=
h(),ca!==a?(da(),va=oa(),va!==a?(da(),ma=h(),ma!==a?x={op:"NOT"+P,right:{type:"expression-list",value:[ca,ma]}}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,ma=X(),ma!==a?(da(),P=h(),P!==a?(da(),ca=oa(),ca!==a?(da(),va=h(),va!==a?x={op:ma,right:{type:"expression-list",value:[P,va]}}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a)),x===a&&(x=b,P=Xa(),P!==a?(da(),ca=Fa(),ca!==a?(da(),ca=h(),ca!==a?x={op:P+"NOT",right:ca}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,P=Xa(),P!==a?(da(),
ca=h(),ca!==a?x={op:P,right:ca}:(b=x,x=a)):(b=x,x=a)),x===a&&(x=b,P=E(),P!==a?(da(),ca=L(),ca!==a?(da(),ma=b,f.substr(b,6).toLowerCase()===td?(va=f.substr(b,6),b+=6):(va=a,0===ba&&p(ud)),va!==a?(va=b,ba++,wa=K(),ba--,wa===a?va=void 0:(b=va,va=a),va!==a?ma="ESCAPE":(b=ma,ma=a)):(b=ma,ma=a),ma!==a?(da(),ma=T(),ma!==a?x={op:P,right:ca,escape:ma.value}:(b=x,x=a)):(b=x,x=a)):(b=x,x=a)):(b=x,x=a),x===a&&(x=b,P=E(),P!==a?(da(),ca=L(),ca!==a?x={op:P,right:ca,escape:""}:(b=x,x=a)):(b=x,x=a))))));x===a&&(x=
null);""==x||void 0==x||null==x?x=n:(P=null,x=P="arithmetic"==x.type?tb(n,x.tail):xc(x.op,n,x.right,x.escape))}else b=x,x=a;n=x}return n}function y(){if(f.substr(b,2)===yc){var n=yc;b+=2}else n=a,0===ba&&p(vd);n===a&&(62===f.charCodeAt(b)?(n=wd,b++):(n=a,0===ba&&p(xd)),n===a&&(f.substr(b,2)===zc?(n=zc,b+=2):(n=a,0===ba&&p(yd)),n===a&&(f.substr(b,2)===Ac?(n=Ac,b+=2):(n=a,0===ba&&p(zd)),n===a&&(60===f.charCodeAt(b)?(n=Ad,b++):(n=a,0===ba&&p(Bd)),n===a&&(61===f.charCodeAt(b)?(n=vc,b++):(n=a,0===ba&&
p(wc)),n===a&&(f.substr(b,2)===Bc?(n=Bc,b+=2):(n=a,0===ba&&p(Cd))))))));return n}function E(){var n=n=b;var x=Fa();if(x!==a){var P=da();var ca=za();ca!==a?n=x=[x,P,ca]:(b=n,n=a)}else b=n,n=a;n!==a&&(n=n[0]+" "+n[2]);n===a&&(n=za());return n}function G(){var n=n=b;var x=Fa();if(x!==a){var P=da();var ca=La();ca!==a?n=x=[x,P,ca]:(b=n,n=a)}else b=n,n=a;n!==a&&(n=n[0]+" "+n[2]);n===a&&(n=La());return n}function h(){var n=b;var x=q();if(x!==a){n=[];var P=b;var ca=da();var ma=g();if(ma!==a){var va=da();
var wa=q();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;for(;P!==a;)n.push(P),P=b,ca=da(),ma=g(),ma!==a?(va=da(),wa=q(),wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)):(b=P,P=a);n=tb(x,n)}else b=n,n=a;return n}function g(){if(43===f.charCodeAt(b)){var n=ec;b++}else n=a,0===ba&&p(fc);n===a&&(45===f.charCodeAt(b)?(n=gc,b++):(n=a,0===ba&&p(hc)),n===a&&(f.substr(b,2)===Cc?(n=Cc,b+=2):(n=a,0===ba&&p(Dd))));return n}function q(){var n=b;var x=C();if(x!==a){n=[];var P=b;var ca=da();var ma=O();if(ma!==a){var va=
da();var wa=C();wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)}else b=P,P=a;for(;P!==a;)n.push(P),P=b,ca=da(),ma=O(),ma!==a?(va=da(),wa=C(),wa!==a?P=ca=[ca,ma,va,wa]:(b=P,P=a)):(b=P,P=a);n=tb(x,n)}else b=n,n=a;return n}function O(){if(42===f.charCodeAt(b)){var n=Ed;b++}else n=a,0===ba&&p(Fd);n===a&&(47===f.charCodeAt(b)?(n=Gd,b++):(n=a,0===ba&&p(Hd)));return n}function C(){var n=T();if(n===a){var x=b;var P=b;var ca=pa();if(ca!==a){var ma=ta();if(ma!==a){var va=ua();va!==a?P=parseFloat(ca+ma+va):(b=P,P=a)}else b=
P,P=a}else b=P,P=a;P===a&&(P=b,ca=pa(),ca!==a?(ma=ta(),ma!==a?P=parseFloat(ca+ma):(b=P,P=a)):(b=P,P=a),P===a&&(P=b,ca=pa(),ca!==a?(ma=ua(),ma!==a?P=parseFloat(ca+ma):(b=P,P=a)):(b=P,P=a),P===a&&(P=b,ca=pa(),ca!==a&&(ca=parseFloat(ca)),P=ca)));var wa=P;if(wa!==a){var Gb=b;ba++;var Id=J();ba--;Id===a?Gb=void 0:(b=Gb,Gb=a);Gb!==a?x={type:"number",value:wa}:(b=x,x=a)}else b=x,x=a;n=x;if(n===a){var ub=b;var db=b;if(f.substr(b,4).toLowerCase()===Jd){var Hb=f.substr(b,4);b+=4}else Hb=a,0===ba&&p(Kd);if(Hb!==
a){var vb=b;ba++;var Ld=K();ba--;Ld===a?vb=void 0:(b=vb,vb=a);vb!==a?db=Hb=[Hb,vb]:(b=db,db=a)}else b=db,db=a;var cb=db;cb!==a&&(cb={type:"boolean",value:!0});ub=cb;if(ub===a){ub=b;var eb=b;if(f.substr(b,5).toLowerCase()===Md){var Ib=f.substr(b,5);b+=5}else Ib=a,0===ba&&p(Nd);if(Ib!==a){var wb=b;ba++;var Od=K();ba--;Od===a?wb=void 0:(b=wb,wb=a);wb!==a?eb=Ib=[Ib,wb]:(b=eb,eb=a)}else b=eb,eb=a;cb=eb;cb!==a&&(cb={type:"boolean",value:!1});ub=cb}n=ub;if(n===a){var fb=b;if(f.substr(b,4).toLowerCase()===
Pd){var Jb=f.substr(b,4);b+=4}else Jb=a,0===ba&&p(Qd);if(Jb!==a){var xb=b;ba++;var Rd=K();ba--;Rd===a?xb=void 0:(b=xb,xb=a);xb!==a?fb=Jb=[Jb,xb]:(b=fb,fb=a)}else b=fb,fb=a;var ic=fb;ic!==a&&(ic={type:"null",value:null});n=ic;if(n===a){var gb=b;if(ha()!==a){da();var Dc=L();Dc!==a?gb={type:"date",value:Dc.value}:(b=gb,gb=a)}else b=gb,gb=a;n=gb;if(n===a){var hb=b;if(fa()!==a){da();var Ec=L();Ec!==a?hb={type:"timestamp",value:Ec.value}:(b=hb,hb=a)}else b=hb,hb=a;n=hb;if(n===a){var Ga=b;var jc=ia();if(jc!==
a){da();if(45===f.charCodeAt(b)){var Ya=gc;b++}else Ya=a,0===ba&&p(hc);Ya===a&&(43===f.charCodeAt(b)?(Ya=ec,b++):(Ya=a,0===ba&&p(fc)));if(Ya!==a){da();var yb=L();if(yb!==a){da();var Fc=Q();Fc!==a?Ga={type:"interval",value:yb,qualifier:Fc,op:Ya}:(b=Ga,Ga=a)}else b=Ga,Ga=a}else b=Ga,Ga=a}else b=Ga,Ga=a;Ga===a&&(Ga=b,jc=ia(),jc!==a?(da(),Ya=L(),Ya!==a?(da(),yb=Q(),yb!==a?Ga={type:"interval",value:Ya,qualifier:yb,op:""}:(b=Ga,Ga=a)):(b=Ga,Ga=a)):(b=Ga,Ga=a));n=Ga}}}}}}var Aa=n;if(Aa===a){var Na=b;var ib=
b;if(f.substr(b,7).toLowerCase()===Sd){var Gc=f.substr(b,7);b+=7}else Gc=a,0===ba&&p(Td);if(Gc!==a){var Kb=b;ba++;var Ud=K();ba--;Ud===a?Kb=void 0:(b=Kb,Kb=a);Kb!==a?ib="EXTRACT":(b=ib,ib=a)}else b=ib,ib=a;if(ib!==a){da();var Vd=Ja();if(Vd!==a){da();var Sa=ja();Sa===a&&(Sa=sa(),Sa===a&&(Sa=qa(),Sa===a&&(Sa=na(),Sa===a&&(Sa=ka(),Sa===a&&(Sa=ra())))));var Hc=Sa;if(Hc!==a){da();var Wd=Z();if(Wd!==a){da();var Ic=u();if(Ic!==a){da();var Xd=Ka();Xd!==a?Na={type:"function",name:"extract",args:{type:"expression-list",
value:[{type:"string",value:Hc},Ic]}}:(b=Na,Na=a)}else b=Na,Na=a}else b=Na,Na=a}else b=Na,Na=a}else b=Na,Na=a}else b=Na,Na=a;Aa=Na;if(Aa===a){var Oa=b;var jb=b;if(f.substr(b,9).toLowerCase()===Yd){var Jc=f.substr(b,9);b+=9}else Jc=a,0===ba&&p(Zd);if(Jc!==a){var Lb=b;ba++;var $d=K();ba--;$d===a?Lb=void 0:(b=Lb,Lb=a);Lb!==a?jb="SUBSTRING":(b=jb,jb=a)}else b=jb,jb=a;if(jb!==a){da();var ae=Ja();if(ae!==a){da();var kc=u();if(kc!==a){da();var be=Z();if(be!==a){da();var lc=u();if(lc!==a){da();var Za=b;var kb=
b;if(f.substr(b,3).toLowerCase()===ce){var Kc=f.substr(b,3);b+=3}else Kc=a,0===ba&&p(de);if(Kc!==a){var Mb=b;ba++;var ee=K();ba--;ee===a?Mb=void 0:(b=Mb,Mb=a);Mb!==a?kb="FOR":(b=kb,kb=a)}else b=kb,kb=a;var zb=kb;if(zb!==a){var fe=da();var Lc=u();if(Lc!==a){var ge=da();Za=zb=[zb,fe,Lc,ge]}else b=Za,Za=a}else b=Za,Za=a;Za===a&&(Za=null);zb=Ka();zb!==a?Oa={type:"function",name:"substring",args:{type:"expression-list",value:Za?[kc,lc,Za[2]]:[kc,lc]}}:(b=Oa,Oa=a)}else b=Oa,Oa=a}else b=Oa,Oa=a}else b=Oa,
Oa=a}else b=Oa,Oa=a}else b=Oa,Oa=a;Aa=Oa;if(Aa===a){var Da=b;var mc=V();if(mc!==a){da();var nc=Ja();if(nc!==a){da();var $a=m();$a===a&&($a=null);da();var Ab=u();if(Ab!==a){da();var oc=Z();if(oc!==a){da();var Mc=u();if(Mc!==a){da();var he=Ka();he!==a?Da={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==$a?"BOTH":$a},Ab,Mc]}}:(b=Da,Da=a)}else b=Da,Da=a}else b=Da,Da=a}else b=Da,Da=a}else b=Da,Da=a}else b=Da,Da=a;Da===a&&(Da=b,mc=V(),mc!==a?(da(),nc=Ja(),nc!==
a?(da(),$a=m(),$a===a&&($a=null),da(),Ab=u(),Ab!==a?(da(),oc=Ka(),oc!==a?Da={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==$a?"BOTH":$a},Ab]}}:(b=Da,Da=a)):(b=Da,Da=a)):(b=Da,Da=a)):(b=Da,Da=a));Aa=Da;if(Aa===a){var Pa=b;var lb=b;if(f.substr(b,8).toLowerCase()===ie){var Nc=f.substr(b,8);b+=8}else Nc=a,0===ba&&p(je);if(Nc!==a){var Nb=b;ba++;var ke=K();ba--;ke===a?Nb=void 0:(b=Nb,Nb=a);Nb!==a?lb="POSITION":(b=lb,lb=a)}else b=lb,lb=a;if(lb!==a){da();var le=
Ja();if(le!==a){da();var Oc=u();if(Oc!==a){da();var me=La();if(me!==a){da();var Pc=u();if(Pc!==a){da();var ne=Ka();ne!==a?Pa={type:"function",name:"position",args:{type:"expression-list",value:[Oc,Pc]}}:(b=Pa,Pa=a)}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a}else b=Pa,Pa=a;Aa=Pa;if(Aa===a){var Qa=b;var mb=b;if(f.substr(b,4).toLowerCase()===oe){var Qc=f.substr(b,4);b+=4}else Qc=a,0===ba&&p(pe);if(Qc!==a){var Ob=b;ba++;var qe=K();ba--;qe===a?Ob=void 0:(b=Ob,Ob=a);Ob!==a?mb="CAST":(b=
mb,mb=a)}else b=mb,mb=a;if(mb!==a){da();var re=Ja();if(re!==a){da();var Rc=u();if(Rc!==a){da();var nb=b;if(f.substr(b,2).toLowerCase()===se){var Sc=f.substr(b,2);b+=2}else Sc=a,0===ba&&p(te);if(Sc!==a){var Pb=b;ba++;var ue=K();ba--;ue===a?Pb=void 0:(b=Pb,Pb=a);Pb!==a?nb="AS":(b=nb,nb=a)}else b=nb,nb=a;var ve=nb;if(ve!==a){da();var Ba=b;var ob=b;if(f.substr(b,7).toLowerCase()===we){var Tc=f.substr(b,7);b+=7}else Tc=a,0===ba&&p(xe);if(Tc!==a){var Qb=b;ba++;var ye=K();ba--;ye===a?Qb=void 0:(b=Qb,Qb=
a);Qb!==a?ob="INTEGER":(b=ob,ob=a)}else b=ob,ob=a;var Ea=ob;Ea!==a&&(Ea={type:"data-type",value:{type:"integer"}});Ba=Ea;if(Ba===a){Ba=b;var pb=b;if(f.substr(b,8).toLowerCase()===ze){var Uc=f.substr(b,8);b+=8}else Uc=a,0===ba&&p(Ae);if(Uc!==a){var Rb=b;ba++;var Be=K();ba--;Be===a?Rb=void 0:(b=Rb,Rb=a);Rb!==a?pb="SMALLINT":(b=pb,pb=a)}else b=pb,pb=a;Ea=pb;Ea!==a&&(Ea={type:"data-type",value:{type:"smallint"}});Ba=Ea;if(Ba===a){Ba=b;var qb=b;if(f.substr(b,5).toLowerCase()===Ce){var Vc=f.substr(b,5);
b+=5}else Vc=a,0===ba&&p(De);if(Vc!==a){var Sb=b;ba++;var Ee=K();ba--;Ee===a?Sb=void 0:(b=Sb,Sb=a);Sb!==a?qb="FLOAT":(b=qb,qb=a)}else b=qb,qb=a;Ea=qb;Ea!==a&&(Ea={type:"data-type",value:{type:"float"}});Ba=Ea;if(Ba===a){Ba=b;var rb=b;if(f.substr(b,4).toLowerCase()===Fe){var Wc=f.substr(b,4);b+=4}else Wc=a,0===ba&&p(Ge);if(Wc!==a){var Tb=b;ba++;var He=K();ba--;He===a?Tb=void 0:(b=Tb,Tb=a);Tb!==a?rb="REAL":(b=rb,rb=a)}else b=rb,rb=a;Ea=rb;Ea!==a&&(Ea={type:"data-type",value:{type:"real"}});Ba=Ea;if(Ba===
a&&(Ba=b,Ea=ha(),Ea!==a&&(Ea={type:"data-type",value:{type:"date"}}),Ba=Ea,Ba===a&&(Ba=b,Ea=fa(),Ea!==a&&(Ea={type:"data-type",value:{type:"timestamp"}}),Ba=Ea,Ba===a))){Ba=b;var sb=b;if(f.substr(b,7).toLowerCase()===Ie){var Xc=f.substr(b,7);b+=7}else Xc=a,0===ba&&p(Je);if(Xc!==a){var Ub=b;ba++;var Ke=K();ba--;Ke===a?Ub=void 0:(b=Ub,Ub=a);Ub!==a?sb="VARCHAR":(b=sb,sb=a)}else b=sb,sb=a;Ea=sb;if(Ea!==a){da();var Le=Ja();if(Le!==a){da();var Yc=ya();if(Yc!==a){da();var Me=Ka();Me!==a?Ba={type:"data-type",
value:{type:"varchar",size:parseInt(Yc)}}:(b=Ba,Ba=a)}else b=Ba,Ba=a}else b=Ba,Ba=a}else b=Ba,Ba=a}}}}var Zc=Ba;if(Zc!==a){da();var Ne=Ka();Ne!==a?Qa={type:"function",name:"cast",args:{type:"expression-list",value:[Rc,Zc]}}:(b=Qa,Qa=a)}else b=Qa,Qa=a}else b=Qa,Qa=a}else b=Qa,Qa=a}else b=Qa,Qa=a}else b=Qa,Qa=a;Aa=Qa;if(Aa===a){var bb=b;var Vb;var Ta=b;Ta=Vb=B();if(Ta===a)if(Ta=b,96===f.charCodeAt(b)?(Vb=$c,b++):(Vb=a,0===ba&&p(ad)),Vb!==a){var Wb=[];if(bd.test(f.charAt(b))){var ab=f.charAt(b);b++}else ab=
a,0===ba&&p(cd);if(ab!==a)for(;ab!==a;)Wb.push(ab),bd.test(f.charAt(b))?(ab=f.charAt(b),b++):(ab=a,0===ba&&p(cd));else Wb=a;Wb!==a?(96===f.charCodeAt(b)?(ab=$c,b++):(ab=a,0===ba&&p(ad)),ab!==a?Ta=Wb.join(""):(b=Ta,Ta=a)):(b=Ta,Ta=a)}else b=Ta,Ta=a;var dd=Ta;if(dd!==a){da();var Oe=Ja();if(Oe!==a){da();var Xb=t();Xb===a&&(Xb=null);da();var Pe=Ka();Pe!==a?bb={type:"function",name:dd,args:Xb?Xb:{type:"expression-list",value:[]}}:(b=bb,bb=a)}else b=bb,bb=a}else b=bb,bb=a;Aa=bb;if(Aa===a){var Va;var Ha=
b;var pc=xa();if(pc!==a){da();var Bb=u();if(Bb!==a){da();var Cb=[];for(Va=ea();Va!==a;)Cb.push(Va),Va=ea();Va=da();var Yb=Ca();Yb!==a?Ha={type:"case-expression",format:"simple",operand:Bb,clauses:Cb,else:null}:(b=Ha,Ha=a)}else b=Ha,Ha=a}else b=Ha,Ha=a;if(Ha===a)if(Ha=b,pc=xa(),pc!==a)if(da(),Bb=u(),Bb!==a){da();Cb=[];for(Va=ea();Va!==a;)Cb.push(Va),Va=ea();Va=da();Yb=la();if(Yb!==a){da();var Qe=Ca();Qe!==a?Ha={type:"case-expression",format:"simple",operand:Bb,clauses:Cb,else:Yb.value}:(b=Ha,Ha=a)}else b=
Ha,Ha=a}else b=Ha,Ha=a;else b=Ha,Ha=a;var qc=Ha;if(qc===a){var Wa;var Ma=b;var rc=xa();if(rc!==a){da();var Db=[];for(Wa=Y();Wa!==a;)Db.push(Wa),Wa=Y();Wa=da();var Zb=Ca();Zb!==a?Ma={type:"case-expression",format:"searched",clauses:Db,else:null}:(b=Ma,Ma=a)}else b=Ma,Ma=a;if(Ma===a)if(Ma=b,rc=xa(),rc!==a){da();Db=[];for(Wa=Y();Wa!==a;)Db.push(Wa),Wa=Y();Wa=da();Zb=la();if(Zb!==a){da();var Re=Ca();Re!==a?Ma={type:"case-expression",format:"searched",clauses:Db,else:Zb.value}:(b=Ma,Ma=a)}else b=Ma,Ma=
a}else b=Ma,Ma=a;qc=Ma}Aa=qc;if(Aa===a){var $b;var ac=b;var ed=J();if(ed!==a){var fd=[];for($b=M();$b!==a;)fd.push($b),$b=M();ac=ed+fd.join("")}else b=ac,ac=a;var bc=ac;if(bc!==a){var sc=bc;bc=/^CURRENT_DATE$/i.test(sc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(sc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:sc}}Aa=bc;if(Aa===a&&(Aa=I(),Aa===a)){Aa=b;var Se=Ja();if(Se!==a){da();var tc=u();if(tc!==a){da();var Te=Ka();Te!==a?(tc.paren=!0,Aa=tc):
(b=Aa,Aa=a)}else b=Aa,Aa=a}else b=Aa,Aa=a}}}}}}}}}return Aa}function B(){var n;var x=b;var P=J();if(P!==a){x=[];for(n=K();n!==a;)x.push(n),n=K();x=P+x.join("")}else b=x,x=a;return x}function J(){if(Ue.test(f.charAt(b))){var n=f.charAt(b);b++}else n=a,0===ba&&p(Ve);return n}function K(){if(We.test(f.charAt(b))){var n=f.charAt(b);b++}else n=a,0===ba&&p(Xe);return n}function M(){if(Ye.test(f.charAt(b))){var n=f.charAt(b);b++}else n=a,0===ba&&p(Ze);return n}function I(){var n=b;if(64===f.charCodeAt(b)){var x=
$e;b++}else x=a,0===ba&&p(af);if(x!==a){var P=B();P!==a?n=x=[x,P]:(b=n,n=a)}else b=n,n=a;n!==a&&(n={type:"parameter",value:n[1]});return n}function m(){var n=b;if(f.substr(b,7).toLowerCase()===bf){var x=f.substr(b,7);b+=7}else x=a,0===ba&&p(cf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="LEADING":(b=n,n=a)}else b=n,n=a;n===a&&(n=b,f.substr(b,8).toLowerCase()===df?(x=f.substr(b,8),b+=8):(x=a,0===ba&&p(ef)),x!==a?(x=b,ba++,P=K(),ba--,P===a?x=void 0:(b=x,x=a),x!==a?n="TRAILING":
(b=n,n=a)):(b=n,n=a),n===a&&(n=b,f.substr(b,4).toLowerCase()===ff?(x=f.substr(b,4),b+=4):(x=a,0===ba&&p(gf)),x!==a?(x=b,ba++,P=K(),ba--,P===a?x=void 0:(b=x,x=a),x!==a?n="BOTH":(b=n,n=a)):(b=n,n=a)));return n}function Q(){var n=b;var x=b;var P=S();if(P!==a){da();var ca=Ja();if(ca!==a)if(da(),ca=aa(),ca!==a){da();var ma=Ka();ma!==a?x={type:"interval-period",period:P.value,precision:ca,secondary:null}:(b=x,x=a)}else b=x,x=a;else b=x,x=a}else b=x,x=a;x===a&&(x=b,P=S(),P!==a&&(P={type:"interval-period",
period:P.value,precision:null,secondary:null}),x=P);if(x!==a)if(da(),P=b,f.substr(b,2).toLowerCase()===hf?(ca=f.substr(b,2),b+=2):(ca=a,0===ba&&p(jf)),ca!==a?(ca=b,ba++,ma=K(),ba--,ma===a?ca=void 0:(b=ca,ca=a),ca!==a?P="TO":(b=P,P=a)):(b=P,P=a),P!==a){da();P=b;ca=S();ca!==a&&(ca={type:"interval-period",period:ca.value,precision:null,secondary:null});P=ca;if(P===a){P=b;ca=ra();if(ca!==a)if(da(),ca=Ja(),ca!==a)if(da(),ca=aa(),ca!==a)if(da(),ma=Fb(),ma!==a)if(da(),ma=W(),ma!==a){da();var va=Ka();va!==
a?P={type:"interval-period",period:"second",precision:ca,secondary:ma}:(b=P,P=a)}else b=P,P=a;else b=P,P=a;else b=P,P=a;else b=P,P=a;else b=P,P=a;P===a&&(P=b,ca=ra(),ca!==a?(da(),ca=Ja(),ca!==a?(da(),ca=aa(),ca!==a?(da(),ma=Ka(),ma!==a?P={type:"interval-period",period:"second",precision:ca,secondary:null}:(b=P,P=a)):(b=P,P=a)):(b=P,P=a)):(b=P,P=a),P===a&&(P=b,ca=ra(),ca!==a&&(ca={type:"interval-period",period:"second",precision:null,secondary:null}),P=ca))}P!==a?n={type:"interval-qualifier",start:x,
end:P}:(b=n,n=a)}else b=n,n=a;else b=n,n=a;n===a&&(n=b,P=S(),P!==a?(da(),x=Ja(),x!==a?(da(),x=W(),x!==a?(da(),ca=Ka(),ca!==a?n={type:"interval-period",period:P.value,precision:x,secondary:null}:(b=n,n=a)):(b=n,n=a)):(b=n,n=a)):(b=n,n=a),n===a&&(n=b,P=S(),P!==a&&(P={type:"interval-period",period:P.value,precision:null,secondary:null}),n=P,n===a&&(n=b,P=ra(),P!==a?(da(),x=Ja(),x!==a?(da(),x=aa(),x!==a?(da(),ca=Fb(),ca!==a?(da(),P=W(),P!==a?(da(),ca=Ka(),ca!==a?n={type:"interval-period",period:"second",
precision:x,secondary:P}:(b=n,n=a)):(b=n,n=a)):(b=n,n=a)):(b=n,n=a)):(b=n,n=a)):(b=n,n=a),n===a&&(n=b,P=ra(),P!==a?(da(),x=Ja(),x!==a?(da(),x=W(),x!==a?(da(),ca=Ka(),ca!==a?n={type:"interval-period",period:"second",precision:x,secondary:null}:(b=n,n=a)):(b=n,n=a)):(b=n,n=a)):(b=n,n=a),n===a&&(n=b,P=ra(),P!==a&&(P={type:"interval-period",period:"second",precision:null,secondary:null}),n=P)))));return n}function S(){var n=b;n=qa();n!==a&&(n={type:"string",value:"day"});n===a&&(n=b,n=na(),n!==a&&(n=
{type:"string",value:"hour"}),n===a&&(n=b,n=ka(),n!==a&&(n={type:"string",value:"minute"}),n===a&&(n=b,n=sa(),n!==a&&(n={type:"string",value:"month"}),n===a&&(n=b,n=ja(),n!==a&&(n={type:"string",value:"year"})))));return n}function W(){var n=ya();n!==a&&(n=parseFloat(n));return n}function aa(){var n=ya();n!==a&&(n=parseFloat(n));return n}function L(){var n=T();n===a&&(n=I());return n}function T(){var n=b;if(39===f.charCodeAt(b)){var x=gd;b++}else x=a,0===ba&&p(hd);x===a&&(f.substr(b,2)===id?(x=id,
b+=2):(x=a,0===ba&&p(kf)));if(x!==a){x=[];var P=b;f.substr(b,2)===cc?(P=cc,b+=2):(P=a,0===ba&&p(jd));P!==a&&(P="'");P===a&&(kd.test(f.charAt(b))?(P=f.charAt(b),b++):(P=a,0===ba&&p(ld)));for(;P!==a;)x.push(P),P=b,f.substr(b,2)===cc?(P=cc,b+=2):(P=a,0===ba&&p(jd)),P!==a&&(P="'"),P===a&&(kd.test(f.charAt(b))?(P=f.charAt(b),b++):(P=a,0===ba&&p(ld)));39===f.charCodeAt(b)?(P=gd,b++):(P=a,0===ba&&p(hd));P!==a?n={type:"string",value:x.join("")}:(b=n,n=a)}else b=n,n=a;return n}function Y(){var n=b;if(Ia()!==
a){da();var x=u();if(x!==a){da();var P=md();P!==a?(da(),P=u(),P!==a?n={type:"when-clause",operand:x,value:P}:(b=n,n=a)):(b=n,n=a)}else b=n,n=a}else b=n,n=a;return n}function ea(){var n=b;if(Ia()!==a){da();var x=u();if(x!==a){da();var P=md();P!==a?(da(),P=u(),P!==a?n={type:"when-clause",operand:x,value:P}:(b=n,n=a)):(b=n,n=a)}else b=n,n=a}else b=n,n=a;return n}function la(){var n=b;var x=b;if(f.substr(b,4).toLowerCase()===lf){var P=f.substr(b,4);b+=4}else P=a,0===ba&&p(mf);if(P!==a){P=b;ba++;var ca=
K();ba--;ca===a?P=void 0:(b=P,P=a);P!==a?x="ELSE":(b=x,x=a)}else b=x,x=a;x!==a?(da(),x=u(),x!==a?n={type:"else-clause",value:x}:(b=n,n=a)):(b=n,n=a);return n}function pa(){var n=ya();if(n===a){n=b;if(45===f.charCodeAt(b)){var x=gc;b++}else x=a,0===ba&&p(hc);x===a&&(43===f.charCodeAt(b)?(x=ec,b++):(x=a,0===ba&&p(fc)));if(x!==a){var P=ya();P!==a?n=x[0]+P:(b=n,n=a)}else b=n,n=a}return n}function ta(){var n=b;if(46===f.charCodeAt(b)){var x=nf;b++}else x=a,0===ba&&p(of);x!==a?(n=ya(),n===a&&(n=null),n=
"."+(null!=n?n:"")):(b=n,n=a);return n}function ua(){var n;var x=n=b;if(pf.test(f.charAt(b))){var P=f.charAt(b);b++}else P=a,0===ba&&p(qf);P!==a?(rf.test(f.charAt(b))?(x=f.charAt(b),b++):(x=a,0===ba&&p(sf)),x===a&&(x=null),x="e"+(null===x?"":x)):(b=x,x=a);x!==a?(P=ya(),P!==a?n=x+P:(b=n,n=a)):(b=n,n=a);return n}function ya(){var n=[];var x=Ra();if(x!==a)for(;x!==a;)n.push(x),x=Ra();else n=a;n!==a&&(n=n.join(""));return n}function Ra(){if(tf.test(f.charAt(b))){var n=f.charAt(b);b++}else n=a,0===ba&&
p(uf);return n}function La(){var n=b;if(f.substr(b,2).toLowerCase()===vf){var x=f.substr(b,2);b+=2}else x=a,0===ba&&p(wf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="IN":(b=n,n=a)}else b=n,n=a;return n}function Xa(){var n=b;if(f.substr(b,2).toLowerCase()===xf){var x=f.substr(b,2);b+=2}else x=a,0===ba&&p(yf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="IS":(b=n,n=a)}else b=n,n=a;return n}function za(){var n=b;if(f.substr(b,4).toLowerCase()===zf){var x=
f.substr(b,4);b+=4}else x=a,0===ba&&p(Af);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="LIKE":(b=n,n=a)}else b=n,n=a;return n}function Fa(){var n=b;if(f.substr(b,3).toLowerCase()===Bf){var x=f.substr(b,3);b+=3}else x=a,0===ba&&p(Cf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="NOT":(b=n,n=a)}else b=n,n=a;return n}function oa(){var n=b;if(f.substr(b,3).toLowerCase()===Df){var x=f.substr(b,3);b+=3}else x=a,0===ba&&p(Ef);if(x!==a){x=b;ba++;var P=K();ba--;
P===a?x=void 0:(b=x,x=a);x!==a?n="AND":(b=n,n=a)}else b=n,n=a;return n}function U(){var n=b;if(f.substr(b,2).toLowerCase()===Ff){var x=f.substr(b,2);b+=2}else x=a,0===ba&&p(Gf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="OR":(b=n,n=a)}else b=n,n=a;return n}function X(){var n=b;if(f.substr(b,7).toLowerCase()===Hf){var x=f.substr(b,7);b+=7}else x=a,0===ba&&p(If);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="BETWEEN":(b=n,n=a)}else b=n,n=a;return n}function Z(){var n=
b;if(f.substr(b,4).toLowerCase()===Jf){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(Kf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="FROM":(b=n,n=a)}else b=n,n=a;return n}function V(){var n=b;if(f.substr(b,4).toLowerCase()===Lf){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(Mf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="TRIM":(b=n,n=a)}else b=n,n=a;return n}function fa(){var n=b;if(f.substr(b,9).toLowerCase()===Nf){var x=f.substr(b,9);b+=9}else x=a,0===
ba&&p(Of);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="TIMESTAMP":(b=n,n=a)}else b=n,n=a;return n}function ha(){var n=b;if(f.substr(b,4).toLowerCase()===Pf){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(Qf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="DATE":(b=n,n=a)}else b=n,n=a;return n}function ia(){var n=b;if(f.substr(b,8).toLowerCase()===Rf){var x=f.substr(b,8);b+=8}else x=a,0===ba&&p(Sf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==
a?n="INTERVAL":(b=n,n=a)}else b=n,n=a;return n}function ja(){var n=b;if(f.substr(b,4).toLowerCase()===Tf){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(Uf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="YEAR":(b=n,n=a)}else b=n,n=a;return n}function sa(){var n=b;if(f.substr(b,5).toLowerCase()===Vf){var x=f.substr(b,5);b+=5}else x=a,0===ba&&p(Wf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="MONTH":(b=n,n=a)}else b=n,n=a;return n}function qa(){var n=b;if(f.substr(b,
3).toLowerCase()===Xf){var x=f.substr(b,3);b+=3}else x=a,0===ba&&p(Yf);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="DAY":(b=n,n=a)}else b=n,n=a;return n}function na(){var n=b;if(f.substr(b,4).toLowerCase()===Zf){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p($f);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="HOUR":(b=n,n=a)}else b=n,n=a;return n}function ka(){var n=b;if(f.substr(b,6).toLowerCase()===ag){var x=f.substr(b,6);b+=6}else x=a,0===ba&&p(bg);if(x!==
a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="MINUTE":(b=n,n=a)}else b=n,n=a;return n}function ra(){var n=b;if(f.substr(b,6).toLowerCase()===cg){var x=f.substr(b,6);b+=6}else x=a,0===ba&&p(dg);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="SECOND":(b=n,n=a)}else b=n,n=a;return n}function xa(){var n=b;if(f.substr(b,4).toLowerCase()===eg){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(fg);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="CASE":(b=n,
n=a)}else b=n,n=a;return n}function Ca(){var n=b;if(f.substr(b,3).toLowerCase()===gg){var x=f.substr(b,3);b+=3}else x=a,0===ba&&p(hg);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="END":(b=n,n=a)}else b=n,n=a;return n}function Ia(){var n=b;if(f.substr(b,4).toLowerCase()===ig){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(jg);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="WHEN":(b=n,n=a)}else b=n,n=a;return n}function md(){var n=b;if(f.substr(b,4).toLowerCase()===
kg){var x=f.substr(b,4);b+=4}else x=a,0===ba&&p(lg);if(x!==a){x=b;ba++;var P=K();ba--;P===a?x=void 0:(b=x,x=a);x!==a?n="THEN":(b=n,n=a)}else b=n,n=a;return n}function Fb(){if(44===f.charCodeAt(b)){var n=mg;b++}else n=a,0===ba&&p(ng);return n}function Ja(){if(40===f.charCodeAt(b)){var n=og;b++}else n=a,0===ba&&p(pg);return n}function Ka(){if(41===f.charCodeAt(b)){var n=qg;b++}else n=a,0===ba&&p(rg);return n}function da(){var n;var x=[];for(n=nd();n!==a;)x.push(n),n=nd();return x}function nd(){if(sg.test(f.charAt(b))){var n=
f.charAt(b);b++}else n=a,0===ba&&p(tg);return n}function xc(n,x,P,ca){n={type:"binary-expression",operator:n,left:x,right:P};void 0!==ca&&(n.escape=ca);return n}function tb(n,x){for(var P=0;P<x.length;P++)n=xc(x[P][1],n,x[P][3]);return n}e=void 0!==e?e:{};var a={},qd=e.grammarSource,od={start:H},pd=H,rd="!",vc="\x3d",yc="\x3e\x3d",wd="\x3e",zc="\x3c\x3d",Ac="\x3c\x3e",Ad="\x3c",Bc="!\x3d",ec="+",gc="-",Cc="||",Ed="*",Gd="/",$e="@",gd="'",id="N'",cc="''",nf=".",Pd="null",Jd="true",Md="false",vf="in",
xf="is",zf="like",td="escape",Bf="not",Df="and",Ff="or",Hf="between",Jf="from",ce="for",Yd="substring",Sd="extract",Lf="trim",ie="position",Nf="timestamp",Pf="date",bf="leading",df="trailing",ff="both",oe="cast",se="as",we="integer",ze="smallint",Ce="float",Fe="real",Ie="varchar",hf="to",Rf="interval",Tf="year",Vf="month",Xf="day",Zf="hour",ag="minute",cg="second",eg="case",gg="end",ig="when",kg="then",lf="else",mg=",",og="(",qg=")",$c="`",Ue=/^[A-Za-z_\x80-\uFFFF]/,We=/^[A-Za-z0-9_]/,Ye=/^[A-Za-z0-9_.\x80-\uFFFF]/,
kd=/^[^']/,tf=/^[0-9]/,pf=/^[eE]/,rf=/^[+\-]/,sg=/^[ \t\n\r]/,bd=/^[^`]/,sd=d("!",!1),wc=d("\x3d",!1),vd=d("\x3e\x3d",!1),xd=d("\x3e",!1),yd=d("\x3c\x3d",!1),zd=d("\x3c\x3e",!1),Bd=d("\x3c",!1),Cd=d("!\x3d",!1),fc=d("+",!1),hc=d("-",!1),Dd=d("||",!1),Fd=d("*",!1),Hd=d("/",!1),Ve=z([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Xe=z([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ze=z([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),af=d("@",!1),hd=d("'",!1),kf=d("N'",!1),jd=d("''",
!1),ld=z(["'"],!0,!1),of=d(".",!1),uf=z([["0","9"]],!1,!1),qf=z(["e","E"],!1,!1),sf=z(["+","-"],!1,!1),Qd=d("NULL",!0),Kd=d("TRUE",!0),Nd=d("FALSE",!0),wf=d("IN",!0),yf=d("IS",!0),Af=d("LIKE",!0),ud=d("ESCAPE",!0),Cf=d("NOT",!0),Ef=d("AND",!0),Gf=d("OR",!0),If=d("BETWEEN",!0),Kf=d("FROM",!0),de=d("FOR",!0),Zd=d("SUBSTRING",!0),Td=d("EXTRACT",!0),Mf=d("TRIM",!0),je=d("POSITION",!0),Of=d("TIMESTAMP",!0),Qf=d("DATE",!0),cf=d("LEADING",!0),ef=d("TRAILING",!0),gf=d("BOTH",!0),pe=d("CAST",!0),te=d("AS",
!0),xe=d("INTEGER",!0),Ae=d("SMALLINT",!0),De=d("FLOAT",!0),Ge=d("REAL",!0),Je=d("VARCHAR",!0),jf=d("TO",!0),Sf=d("INTERVAL",!0),Uf=d("YEAR",!0),Wf=d("MONTH",!0),Yf=d("DAY",!0),$f=d("HOUR",!0),bg=d("MINUTE",!0),dg=d("SECOND",!0),fg=d("CASE",!0),hg=d("END",!0),jg=d("WHEN",!0),lg=d("THEN",!0),mf=d("ELSE",!0),ng=d(",",!1),pg=d("(",!1),rg=d(")",!1),tg=z([" ","\t","\n","\r"],!1,!1),ad=d("`",!1),cd=z(["`"],!0,!1),b=0,Eb=[{line:1,column:1}],Ua=0,dc=[],ba=0;if("startRule"in e){if(!(e.startRule in od))throw Error("Can't start parsing from rule \""+
e.startRule+'".');pd=od[e.startRule]}var uc=pd();if(uc!==a&&b===f.length)return uc;uc!==a&&b<f.length&&p({type:"end"});throw function(n,x,P){return new F(F.buildMessage(n,x),n,x,P)}(dc,Ua<f.length?f.charAt(Ua):null,Ua<f.length?l(Ua,Ua+1):l(Ua,Ua));}}})})({get exports(){return k},set exports(w){k=w}});let N=function(){function w(){}w.parse=function(F){return k.parse(F)};return w}();c.WhereGrammar=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports",
"../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,A,k){function N(h){return null==h||"string"===typeof h&&!h?"\x3cNull\x3e":h}function w(h){const g=null!=h.minValue||null!=h.maxValue,q=!!h.sqlExpression&&h.supportsSQLExpression;return!(null!=h.normalizationField||null!=h.normalizationType)&&!g&&!q}function F(h){const {values:g,useSampleStdDev:q,supportsNullCount:O}=h;var C=Number.POSITIVE_INFINITY;let B=Number.NEGATIVE_INFINITY,J=null,K=null;var M=null;let I=
null,m=0;const Q=null==h.minValue?-Infinity:h.minValue,S=null==h.maxValue?Infinity:h.maxValue;for(const W of g)Number.isFinite(W)?W>=Q&&W<=S&&(J=null===J?W:J+W,C=Math.min(C,W),B=Math.max(B,W),m++):"string"===typeof W&&m++;if(m&&null!=J){K=J/m;M=0;for(const W of g)Number.isFinite(W)&&W>=Q&&W<=S&&(M+=(W-K)**2);I=q?1<m?M/(m-1):0:0<m?M/m:0;M=Math.sqrt(I)}else B=C=null;C={avg:K,count:m,max:B,min:C,stddev:M,sum:J,variance:I};O&&(C.nullcount=g.length-m);h.percentileParams&&(C.median=D(g,h.percentileParams));
return C}function D(h,g){const {fieldType:q,value:O,orderBy:C,isDiscrete:B}=g,J=f(q,"desc"===C);h=[...h].filter(m=>null!=m).sort((m,Q)=>J(m,Q));if(0===h.length)return null;if(0>=O)return h[0];if(1<=O)return h[h.length-1];var K=(h.length-1)*O,M=Math.floor(K);g=M+1;K%=1;M=h[M];const I=h[g];return g>=h.length||B||"string"===typeof M||"string"===typeof I?M:M*(1-K)+I*K}function f(h,g){const q=g?1:-1,O=z(g),C=d(g);if(!h||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",
...E].includes(h))return(B,J)=>"number"===typeof B&&"number"===typeof J?O(B,J):"string"===typeof B&&"string"===typeof J?C(B,J):q;if("esriFieldTypeDate"===h)return(B,J)=>{B=(new Date(B)).getTime();J=(new Date(J)).getTime();return isNaN(B)||isNaN(J)?q:O(B,J)};if(E.has(h))return(B,J)=>O(B,J);if("esriFieldTypeString"===h)return(B,J)=>C(B,J);if("esriFieldTypeGUID"===h||"esriFieldTypeGlobalID"===h){const B=d(g);return(J,K)=>B(R(J),R(K))}return g?(B,J)=>1:(B,J)=>-1}function e(h,g,q){if(q){if(null==h)return null==
g?0:1;if(null==g)return-1}else{if(null==h)return null==g?0:-1;if(null==g)return 1}return null}function d(h){return h?(g,q)=>{const O=e(g,q,!0);if(null!=O)return O;g=g.toUpperCase();q=q.toUpperCase();return g>q?-1:g<q?1:0}:(g,q)=>{const O=e(g,q,!1);if(null!=O)return O;g=g.toUpperCase();q=q.toUpperCase();return g<q?-1:g>q?1:0}}function z(h){return h?(g,q)=>{const O=e(g,q,!0);return null!=O?O:q-g}:(g,q)=>{const O=e(g,q,!1);return null!=O?O:g-q}}function R(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,
2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function l(h){return"coded-value"!==h?.type?[]:h.codedValues.map(g=>g.code)}function p(h,g){const q=t({field:g.field,normalizationType:g.normalizationType,normalizationField:g.normalizationField,classificationMethod:g.classificationMethod,standardDeviationInterval:g.standardDeviationInterval,breakCount:g.numClasses||5});h=H(h,g.minValue,g.maxValue);return k.createGenerateRendererClassBreaks({definition:q,
values:h,normalizationTotal:g.normalizationTotal})}function H(h,g,q){const O=null==g?-Infinity:g,C=null==q?Infinity:q;return h.filter(B=>Number.isFinite(B)&&B>=O&&B<=C)}function t(h){const {breakCount:g,field:q,normalizationField:O,normalizationType:C}=h,B=h.classificationMethod||"equal-interval";return new A({breakCount:g,classificationField:q,classificationMethod:B,normalizationField:"field"===C?O:void 0,normalizationType:C,standardDeviationInterval:"standard-deviation"===B?h.standardDeviationInterval||
1:void 0})}function u(h,g){const {field:q,classificationMethod:O,standardDeviationInterval:C,normalizationType:B,normalizationField:J,normalizationTotal:K,minValue:M,maxValue:I}=g,m=g.numBins||10;let Q=g=null,S=null;O&&"equal-interval"!==O||B?({classBreaks:h}=p(h,{field:q,normalizationType:B,normalizationField:J,normalizationTotal:K,classificationMethod:O,standardDeviationInterval:C,minValue:M,maxValue:I,numClasses:m}),g=h[0].minValue,Q=h[h.length-1].maxValue,S=h.map(W=>[W.minValue,W.maxValue])):
(null!=M&&null!=I?(g=M,Q=I):(h=F({values:h,minValue:M,maxValue:I,useSampleStdDev:!B,supportsNullCount:w({normalizationType:B,normalizationField:J,minValue:M,maxValue:I})}),g=h.min??null,Q=h.max??null),S=r(g??0,Q??0,m));return{min:g,max:Q,intervals:S}}function v(h,g){let q=-1;for(let O=h.length-1;0<=O;O--)if(g>=h[O][0]){q=O;break}return q}function r(h,g,q){const O=(g-h)/q,C=[];let B;for(let J=1;J<=q;J++)B=h+O,B=Number(B.toFixed(16)),C.push([h,J===q?g:B]),h=B;return C}const y=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
E=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),G="min max avg stddev count sum variance nullcount median".split(" ");c.calculateClassBreaks=p;c.calculateHistogram=function(h,g){var q=u(h,g);const O=q.intervals,C=q.min??0;q=q.max??0;const B=O.map((J,K)=>({minValue:O[K][0],maxValue:O[K][1],count:0}));for(const J of h)null!=J&&J>=C&&J<=q&&(h=v(O,J),-1<h&&B[h].count++);return{bins:B,minValue:C,maxValue:q,normalizationTotal:g.normalizationTotal}};
c.calculatePercentile=D;c.calculateStatistics=F;c.calculateStringStatistics=function(h){const g=h.returnDistinct?[...(new Set(h.values))]:h.values,q=g.filter(C=>null!=C).length,O={count:q};h.supportsNullCount&&(O.nullcount=g.length-q);h.percentileParams&&(O.median=D(g,h.percentileParams));return O};c.calculateUniqueValuesCount=function(h){const g={};for(let q of h){if(null==q||"string"===typeof q&&""===q.trim())q=null;null==g[q]?g[q]={count:1,data:q}:g[q].count++}return{count:g}};c.createClassBreaksDefinition=
t;c.createUVResult=function(h,g,q,O){h=h.count;const C=[];if(q&&g){q=[];var B=l(g[0]);for(const J of B)if(g[1]){B=l(g[1]);for(const K of B)if(g[2]){B=l(g[2]);for(const M of B)q.push(`${N(J)}${O}${N(K)}${O}${N(M)}`)}else q.push(`${N(J)}${O}${N(K)}`)}else q.push(J);for(const J of q)h.hasOwnProperty(J)||(h[J]={data:J,count:0})}for(const J in h)g=h[J],C.push({value:g.data,count:g.count,label:g.label});return{uniqueValueInfos:C}};c.getAttributeComparator=f;c.getEqualIntervalBins=r;c.getNormalizedValue=
function(h,g,q,O){let C=null;switch(g){case "log":0!==h&&(C=Math.log(h)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(O)&&0!==O&&(C=h/O*100);break;case "field":Number.isFinite(q)&&0!==q&&(C=h/q);break;case "natural-log":0<h&&(C=Math.log(h));break;case "square-root":0<h&&(C=h**.5)}return C};c.isNullCountSupported=w;c.processNullValue=N;c.processSummaryStatisticsResult=function(h,g){let q;for(q in h)G.includes(q)&&(Number.isFinite(h[q])||(h[q]=null));if(!g)return h;["avg","stddev","variance"].forEach(O=>
{null!=h[O]&&(h[O]=Math.ceil(h[O]))});return h};c.resolveCBResult=function(h,g){let q=h.classBreaks;const O=q[0].minValue,C=q[q.length-1].maxValue,B="standard-deviation"===g;q=q.map(J=>{const K=J.label;J={minValue:J.minValue,maxValue:J.maxValue,label:K};if(B&&K){const M=K.match(y)?.map(I=>+I.trim())??[];2===M.length?(J.minStdDev=M[0],J.maxStdDev=M[1],0>M[0]&&0<M[1]&&(J.hasAvg=!0)):1===M.length&&(K.includes("\x3c")?(J.minStdDev=null,J.maxStdDev=M[0]):K.includes("\x3e")&&(J.minStdDev=M[0],J.maxStdDev=
null))}return J});return{minValue:O,maxValue:C,classBreakInfos:q,normalizationTotal:h.normalizationTotal}};c.statisticTypes=G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,A,k,N,w,F,D,f,e){F=new k.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});k=new k.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});N=function(d){function z(R){R=d.call(this,R)||this;R.type="class-breaks-definition";R.breakCount=
null;R.classificationField=null;R.classificationMethod=null;R.normalizationField=null;R.normalizationType=null;return R}c._inheritsLoose(z,d);c._createClass(z,[{key:"standardDeviationInterval",set:function(R){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",R)}},{key:"definedInterval",set:function(R){"defined-interval"===this.classificationMethod&&this._set("definedInterval",R)}}]);return z}(N.JSONSupport);A.__decorate([f.enumeration({classBreaksDef:"class-breaks-definition"})],
N.prototype,"type",void 0);A.__decorate([w.property({json:{write:!0}})],N.prototype,"breakCount",void 0);A.__decorate([w.property({json:{write:!0}})],N.prototype,"classificationField",void 0);A.__decorate([w.property({type:String,json:{read:F.read,write:F.write}})],N.prototype,"classificationMethod",void 0);A.__decorate([w.property({json:{write:!0}})],N.prototype,"normalizationField",void 0);A.__decorate([w.property({json:{read:k.read,write:k.write}})],N.prototype,"normalizationType",void 0);A.__decorate([w.property({value:null,
json:{write:!0}})],N.prototype,"standardDeviationInterval",null);A.__decorate([w.property({value:null,json:{write:!0}})],N.prototype,"definedInterval",null);return N=A.__decorate([e.subclass("esri.rest.support.ClassBreaksDefinition")],N)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,A){function k(l){var p=l.definition;const {classificationMethod:H,normalizationType:t,definedInterval:u}=p;p=p.breakCount??1;const v=[];var r=l.values;if(0===
r.length)return[];r=r.sort((q,O)=>q-O);var y=r[0],E=r[r.length-1];if("equal-interval"===H)if(r.length>=p){r=(E-y)/p;l=y;for(var G=1;G<p;G++){var h=Number((y+G*r).toFixed(6));v.push({minValue:l,maxValue:h,label:N(l,h,t)});l=h}v.push({minValue:l,maxValue:E,label:N(l,E,t)})}else r.forEach(q=>{v.push({minValue:q,maxValue:q,label:N(q,q,t)})});else if("natural-breaks"===H){r=w(r);l=F(r.uniqueValues,l.valueFrequency||r.valueFrequency,p);for(G=1;G<p;G++)r.uniqueValues.length>G&&(h=Number(r.uniqueValues[l[G]].toFixed(6)),
v.push({minValue:y,maxValue:h,label:N(y,h,t)}),y=h);v.push({minValue:y,maxValue:E,label:N(y,E,t)})}else if("quantile"===H)if(r.length>=p&&y!==E){l=Math.ceil(r.length/p);G=0;for(h=1;h<p;h++){var g=l+G-1;g>r.length&&(g=r.length-1);0>g&&(g=0);v.push({minValue:y,maxValue:r[g],label:N(y,r[g],t)});y=r[g];G+=l;l=Math.ceil((r.length-G)/(p-h))}v.push({minValue:y,maxValue:E,label:N(y,E,t)})}else for(p=-1,E=0;E<r.length;E++)y=r[E],y!==p&&(p=y,v.push({minValue:p,maxValue:y,label:N(p,y,t)}),p=y);else if("standard-deviation"===
H)if(l=e(r),G=d(r,l),0===G)v.push({minValue:r[0],maxValue:r[0],label:N(r[0],r[0],t)});else{r=f(y,E,p,l,G)*G;G=0;for(h=p;1<=h;h--)g=Number((l-(h-.5)*r).toFixed(6)),v.push({minValue:y,maxValue:g,label:N(y,g,t)}),y=g,G++;h=Number((l+.5*r).toFixed(6));v.push({minValue:y,maxValue:h,label:N(y,h,t)});y=h;G++;for(g=1;g<=p;g++)h=G===2*p?E:Number((l+(g+.5)*r).toFixed(6)),v.push({minValue:y,maxValue:h,label:N(y,h,t)}),y=h,G++}else if("defined-interval"===H){if(!u)return v;p=r[0];E=r[r.length-1];r=Math.ceil((E-
p)/u);y=p;for(l=1;l<r;l++)G=Number((p+l*u).toFixed(6)),v.push({minValue:y,maxValue:G,label:N(y,G,t)}),y=G;v.push({minValue:y,maxValue:E,label:N(y,E,t)})}return v}function N(l,p,H){let t=null;return t=l===p?H&&"percent-of-total"===H?l+"%":l.toString():H&&"percent-of-total"===H?l+"% - "+p+"%":l+" - "+p}function w(l){const p=[],H=[];let t=Number.MIN_VALUE,u=1,v=-1;for(let r=0;r<l.length;r++){const y=l[r];y===t?(u++,H[v]=u):null!==y&&(p.push(y),t=y,u=1,H.push(u),v++)}return{uniqueValues:p,valueFrequency:H}}
function F(l,p,H){var t=l.length;const u=[];H>t&&(H=t);for(var v=0;v<H;v++)u.push(Math.round(v*t/H-1));u.push(t-1);v=D(u,l,p,H);t=v.mean;v=v.sdcm;var r=H,y=0,E=0;let G=0,h=0,g=!0;for(let O=0;2>O&&g;O++){0===O&&(g=!1);for(var q=0;q<r-1;q++)for(;u[q+1]+1!==u[q+2];)if(u[q+1]+=1,y=z(q,u,l,p),G=y.sbMean,y=y.sbSdcm,E=z(q+1,u,l,p),h=E.sbMean,E=E.sbSdcm,y+E<v[q]+v[q+1])v[q]=y,v[q+1]=E,t[q]=G,t[q+1]=h,g=!0;else{--u[q+1];break}for(q=r-1;0<q;q--)for(;u[q]!==u[q-1]+1;)if(--u[q],y=z(q-1,u,l,p),G=y.sbMean,y=y.sbSdcm,
E=z(q,u,l,p),h=E.sbMean,E=E.sbSdcm,y+E<v[q-1]+v[q])v[q-1]=y,v[q]=E,t[q-1]=G,t[q]=h,g=!0;else{u[q]+=1;break}}g&&(v=D(u,l,p,H));return u}function D(l,p,H,t){let u=[];var v=[],r=[];let y=0;const E=[],G=[];for(var h=0;h<t;h++){var g=z(h,l,p,H);E.push(g.sbMean);G.push(g.sbSdcm);y+=G[h]}g=y;for(h=!0;h||y<g;){h=!1;u=[];for(v=0;v<t;v++)u.push(l[v]);for(r=0;r<t;r++)for(g=l[r]+1;g<=l[r+1];g++)if(v=p[g],0<r&&g!==l[r+1]&&Math.abs(v-E[r])>Math.abs(v-E[r-1]))l[r]=g;else if(r<t-1&&l[r]!==g-1&&Math.abs(v-E[r])>Math.abs(v-
E[r+1])){l[r+1]=g-1;break}g=y;y=0;v=[];r=[];for(let q=0;q<t;q++){v.push(E[q]);r.push(G[q]);const O=z(q,l,p,H);E[q]=O.sbMean;G[q]=O.sbSdcm;y+=G[q]}}if(y>g){for(p=0;p<t;p++)l[p]=u[p],E[p]=v[p],G[p]=r[p];y=g}return{mean:E,sdcm:G}}function f(l,p,H,t,u){l=Math.max(t-l,p-t)/u/H;return 1<=l?1:.5<=l?.5:.25}function e(l){let p=0;for(let H=0;H<l.length;H++)p+=l[H];return p/=l.length}function d(l,p){let H=0;for(let t=0;t<l.length;t++){const u=l[t];H+=(u-p)*(u-p)}H/=l.length;return Math.sqrt(H)}function z(l,
p,H,t){var u=0,v=0;for(var r=p[l]+1;r<=p[l+1];r++){const y=t[r];u+=H[r]*y;v+=y}0>=v&&R.warn("Exception in Natural Breaks calculation");u/=v;v=0;for(r=p[l]+1;r<=p[l+1];r++)v+=t[r]*(H[r]-u)**2;return{sbMean:u,sbSdcm:v}}const R=A.getLogger("esri.rest.support.generateRendererUtils");c.createGenerateRendererClassBreaks=function(l){const {normalizationTotal:p}=l;return{classBreaks:k(l),normalizationTotal:p}};c.createGenerateRendererUniqueValues=function(l){l=w(l);const p=[],H=l.uniqueValues.length;for(let t=
0;t<H;t++){const u=l.uniqueValues[t];p.push({value:u,count:l.valueFrequency[t],label:u.toString()})}return{uniqueValues:p}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,
A,k,N,w,F,D){function f(t,u){if(!u)return null;if("x"in u){var v={x:0,y:0};[v.x,v.y]=t(u.x,u.y,R);null!=u.z&&(v.z=u.z);null!=u.m&&(v.m=u.m);return v}return"xmin"in u?(v={xmin:0,ymin:0,xmax:0,ymax:0},[v.xmin,v.ymin]=t(u.xmin,u.ymin,R),[v.xmax,v.ymax]=t(u.xmax,u.ymax,R),u.hasZ&&(v.zmin=u.zmin,v.zmax=u.zmax,v.hasZ=!0),u.hasM&&(v.mmin=u.mmin,v.mmax=u.mmax,v.hasM=!0),v):"rings"in u?{rings:e(u.rings,t),hasM:u.hasM,hasZ:u.hasZ}:"paths"in u?{paths:e(u.paths,t),hasM:u.hasM,hasZ:u.hasZ}:"points"in u?{points:d(u.points,
t),hasM:u.hasM,hasZ:u.hasZ}:null}function e(t,u){const v=[];for(const r of t)v.push(d(r,u));return v}function d(t,u){const v=[];for(const r of t)t=u(r[0],r[1],[0,0]),v.push(t),2<r.length&&t.push(r[2]),3<r.length&&t.push(r[3]);return v}function z(){z=A._asyncToGenerator(function*(t,u){t&&u&&(t=Array.isArray(t)?t.map(v=>k.isSome(v.geometry)?v.geometry.spatialReference:null).filter(k.isSome):[t],yield N.initializeProjection(t.map(v=>({source:v,dest:u}))))});return z.apply(this,arguments)}const R=[0,
0],l=f.bind(null,D.lngLatToXY),p=f.bind(null,D.xyToLngLat),H=new (function(){function t(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var u=t.prototype;u.push=function(){var v=A._asyncToGenerator(function*(r,y,E){if(!(r&&r.length&&y&&E)||F.equals(y,E))return r;const G={geometries:r,inSpatialReference:y,outSpatialReference:E,resolve:null};this._jobs.push(G);return new Promise(h=>{G.resolve=h;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(r,
y,E){return v.apply(this,arguments)}}();u._process=function(){this._timer=null;const v=this._jobs.shift();if(v){var {geometries:r,inSpatialReference:y,outSpatialReference:E,resolve:G}=v;D.canProject(y,E)?F.isWebMercator(E)?G(r.map(l)):G(r.map(p)):G(N.projectMany(w.jsonAdapter,r,y,E,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return t}());c.checkProjectionSupport=function(t,u){return z.apply(this,arguments)};c.project=function(t,u,v,r){if(!t)return t;v||(v=u,u=t.spatialReference);
return F.isValid(u)&&F.isValid(v)&&!F.equals(u,v)?D.canProject(u,v)?(t=F.isWebMercator(v)?l(t):p(t),t.spatialReference=v,t):N.projectMany(w.jsonAdapter,[t],u,v,null,r)[0]:t};c.projectMany=function(t,u,v){return H.push(t,u,v)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){let A=function(D,f,e){this.x=D;this.y=f;this.spatialReference=e;this.m=this.z=void 0},k=function(D,f,e,d){this.rings=D;this.spatialReference=
f;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);d&&(this.hasM=d)},N=function(D,f,e,d){this.paths=D;this.spatialReference=f;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);d&&(this.hasM=d)},w=function(D,f,e,d){this.points=D;this.spatialReference=f;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);d&&(this.hasM=d)},F=function(D,f,e,d,z){this.xmin=D;this.ymin=f;this.xmax=e;this.ymax=d;this.spatialReference=z;this.mmax=this.mmin=this.zmax=this.zmin=void 0};c.jsonAdapter={convertToGEGeometry:function(D,f){return null==
f?null:D.convertJSONToGeometry(f)},exportPoint:function(D,f,e){e=new A(D.getPointX(f),D.getPointY(f),e);const d=D.hasZ(f),z=D.hasM(f);d&&(e.z=D.getPointZ(f));z&&(e.m=D.getPointM(f));return e},exportPolygon:function(D,f,e){return new k(D.exportPaths(f),e,D.hasZ(f),D.hasM(f))},exportPolyline:function(D,f,e){return new N(D.exportPaths(f),e,D.hasZ(f),D.hasM(f))},exportMultipoint:function(D,f,e){return new w(D.exportPoints(f),e,D.hasZ(f),D.hasM(f))},exportExtent:function(D,f,e){var d=D.hasZ(f);const z=
D.hasM(f);e=new F(D.getXMin(f),D.getYMin(f),D.getXMax(f),D.getYMax(f),e);d&&(d=D.getZExtent(f),e.zmin=d.vmin,e.zmax=d.vmax);z&&(D=D.getMExtent(f),e.mmin=D.vmin,e.mmax=D.vmax);return e}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(A,k,N,w,F,D=!1){return{objectId:A,target:k,distance:N,type:"edge",start:w,end:F,draped:D}};c.makeVertexCandidate=function(A,k,N){return{objectId:A,
target:k,distance:N,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){function H(){H=k._asyncToGenerator(function*(K,M,I){const {outFields:m,orderByFields:Q,groupByFieldsForStatistics:S,outStatistics:W}=K;if(m)for(var aa=0;aa<m.length;aa++)m[aa]=m[aa].trim();if(Q)for(aa=0;aa<Q.length;aa++)Q[aa]=Q[aa].trim();if(S)for(aa=0;aa<S.length;aa++)S[aa]=S[aa].trim();if(W)for(aa=0;aa<W.length;aa++)W[aa].onStatisticField&&(W[aa].onStatisticField=W[aa].onStatisticField.trim());K.geometry&&!K.outSR&&(K.outSR=K.geometry.spatialReference);return t(K,
M,I)});return H.apply(this,arguments)}function t(K,M,I){return u.apply(this,arguments)}function u(){u=k._asyncToGenerator(function*(K,M,I){if(!K)return null;var {where:m}=K;K.where=m=m&&m.trim();if(!m||/^1 *= *1$/.test(m)||M&&M===m)K.where=null;if(!K.geometry)return K;M=yield r(K);K.distance=0;K.units=null;"esriSpatialRelEnvelopeIntersects"===K.spatialRel&&({spatialReference:m}=K.geometry,M=f.getGeometryExtent(M),M.spatialReference=m);if(M){yield p.checkProjectionSupport(M.spatialReference,I);m=M.spatialReference;
M=v(M,I)&&e.isExtent(M)?{spatialReference:m,rings:[[[M.xmin,M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]]]}:M;m=(yield d.normalizeCentralMeridian(e.fromJSON(M)))[0];if(w.isNone(m))throw g;const Q="quantizationParameters"in K&&K.quantizationParameters?.tolerance||"maxAllowableOffset"in K&&K.maxAllowableOffset||0;M=Q&&v(M,I)?{densificationStep:8*Q}:void 0;m=m.toJSON();M=yield p.project(m,m.spatialReference,I,M);if(!M)throw g;M.spatialReference=I;K.geometry=M}return K});return u.apply(this,
arguments)}function v(K,M){if(!K)return!1;const I=K.spatialReference;return(e.isExtent(K)||e.isPolygon(K)||e.isPolyline(K))&&!z.equals(I,M)&&!D.canProjectWithoutEngine(I,M)}function r(K){return y.apply(this,arguments)}function y(){y=k._asyncToGenerator(function*(K){const {distance:M,units:I}=K,m=K.geometry;if(null==M||"vertexAttributes"in m)return m;var Q=m.spatialReference;K=I?h.fromJSON(I):F.getUnitString(Q);Q=Q&&(z.isGeographic(Q)||z.isWebMercator(Q))?m:yield p.checkProjectionSupport(Q,z.WGS84).then(()=>
p.project(m,z.WGS84));return(yield E())(Q.spatialReference,Q,M,K)});return y.apply(this,arguments)}function E(){return G.apply(this,arguments)}function G(){G=k._asyncToGenerator(function*(){return(yield new Promise((K,M)=>c(["../../../geometry/geometryEngineJSON"],K,M))).geodesicBuffer});return G.apply(this,arguments)}const h=new N.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),
g=Object.freeze({}),q=new l,O=new l,C=new l,B={esriGeometryPoint:R.convertToPoint,esriGeometryPolyline:R.convertToPolyline,esriGeometryPolygon:R.convertToPolygon,esriGeometryMultipoint:R.convertToMultipoint},J=(K,M)=>"_geVersion"!==K?M:void 0;A.QUERY_ENGINE_EMPTY_RESULT=g;A.cleanFromGeometryEngine=function(K){return K&&"_geVersion"in K?JSON.parse(JSON.stringify(K,J)):K};A.getGeometry=function(K,M,I,m,Q,S,W=M,aa=I){const L=M&&W,T=I&&aa;m=w.isSome(m)?"coords"in m?m:m.geometry:null;if(w.isNone(m))return null;
if(Q)return M=R.generalizeOptimizedGeometry(O,m,M,I,K,Q,W,aa),S&&(M=R.quantizeOptimizedGeometry(C,M,L,T,K,S)),B[K]?.(M,L,T)??null;if(S)return S=R.quantizeOptimizedGeometry(C,m,M,I,K,S,W,aa),B[K]?.(S,L,T)??null;R.removeZMValues(q,m,M,I,W,aa);return B[K]?.(q,L,T)??null};A.normalizeQuery=function(K,M,I){return H.apply(this,arguments)};A.normalizeQueryLike=t;A.transformCentroid=function(K,M,I,m=K.hasZ,Q=K.hasM){if(w.isNone(M))return null;const S=K.hasZ&&m,W=K.hasM&&Q;return I?(K=R.quantizeOptimizedGeometry(C,
M,K.hasZ,K.hasM,"esriGeometryPoint",I,m,Q),R.convertToPoint(K,S,W)):R.convertToPoint(M,S,W)};Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ./SnappingPoint ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),function(c,A,k,N,w,F,D,f,
e,d){function z(I,m){let Q=[];if(p(I)){var {point:S}=I;H(m)?Q=e.intersectLineAndPoint(m.lineLike,S):t(m)?Q=e.intersectVerticalCylinderAndPoint(m.center,m.radius,S):u(m)?Q=e.intersectVerticalPlaneAndPoint(m.planeLike,S):v(m)&&(Q=R(m,I))}else if(H(I))({lineLike:S}=I),p(m)?Q=e.intersectLineAndPoint(S,m.point):H(m)?Q=e.intersectLineLike(S,m.lineLike):t(m)?Q=e.intersectLineLikeAndVerticalCylinder(S,m.center,m.radius):u(m)?Q=e.intersectVerticalPlaneAndLineLike(m.planeLike,S):v(m)&&(Q=R(m,I));else if(t(I)){const {center:W,
radius:aa}=I;if(H(m))Q=e.intersectLineLikeAndVerticalCylinder(m.lineLike,W,aa);else if(p(m))Q=e.intersectVerticalCylinderAndPoint(W,aa,m.point);else{if(u(m))return e.intersectVerticalPlaneAndVerticalCylinder(m.planeLike,W,aa).map(L=>new g(L,I,m));v(m)&&(Q=R(m,I))}}else if(u(I)){({planeLike:S}=I);if(u(m))return e.intersectVerticalPlane(S,m.planeLike).map(W=>new g(W,I,m));if(p(m))Q=e.intersectVerticalPlaneAndPoint(S,m.point);else if(H(m))Q=e.intersectVerticalPlaneAndLineLike(S,m.lineLike);else{if(t(m))return e.intersectVerticalPlaneAndVerticalCylinder(S,
m.center,m.radius).map(W=>new g(W,I,m));v(m)&&(Q=R(m,I))}}else v(I)&&(Q=R(I,m));return l(Q,I,m)}function R(I,m){const {planeLike:Q,getZ:S}=I,W=[];if(p(m))I.addIfOnTheGround(W,e.intersectVerticalPlaneAndPoint(Q,m.point));else if(H(m))I.addIfOnTheGround(W,e.intersectVerticalPlaneAndLineLike(Q,m.lineLike));else if(t(m))for(const [aa,L]of e.intersectVerticalPlaneAndVerticalCylinder(Q,m.center,m.radius))I=S(aa,L,0),k.isSome(I)&&W.push(D.fromValues(aa,L,I));else if(u(m)||v(m))for(const [aa,L]of e.intersectVerticalPlane(Q,
m.planeLike))I=k.toNullable(S(aa,L,0))??0,W.push(D.fromValues(aa,L,I));return W}function l(I,m,Q){return I.map(S=>new h(f.asSnappingPoint(S),m,Q))}function p(I){return I instanceof y}function H(I){return I instanceof E}function t(I){return I instanceof q}function u(I){return I instanceof O}function v(I){return I instanceof J}let r=function(){function I(){}I.prototype.intersect=function(m){return z(this,m)};return I}(),y=function(I){function m(S){var W=I.call(this)||this;W.point=S;return W}A._inheritsLoose(m,
I);var Q=m.prototype;Q.equals=function(S){return p(S)&&F.exactEquals(this.point,S.point)};Q.closestTo=function(){return f.cloneSnappingPoint(this.point)};return m}(r),E=function(I){function m(S,W,aa){var L=I.call(this)||this;L.start=S;L.end=W;L.type=aa;L.lineLike={start:L.start,end:L.end,type:L.type};return L}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return H(S)&&this.type===S.type&&F.exactEquals(this.start,S.start)&&F.exactEquals(this.end,S.end)};Q.closestTo=function(S){S=e.projectPointToLineLike(S,
this.lineLike);return f.asSnappingPoint(S)};return m}(r),G=function(I){function m(Q,S){return I.call(this,Q,S,d.LineType.LINE)||this}A._inheritsLoose(m,I);return m}(E),h=function(I){function m(S,W,aa){var L=I.call(this)||this;L.intersection=S;L.first=W;L.second=aa;return L}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return S instanceof m&&this.first.equals(S.first)&&this.second.equals(S.second)};Q.closestTo=function(){return f.cloneSnappingPoint(this.intersection)};return m}(r),g=
function(I){function m(S,W,aa){var L=I.call(this)||this;L.basePoint=S;L.first=W;L.second=aa;return L}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return S instanceof m&&this.first.equals(S.first)&&this.second.equals(S.second)};Q.closestTo=function(S){const W=this.basePoint;return f.asSnappingPoint(D.fromValues(W[0],W[1],S[2]))};return m}(r),q=function(I){function m(S,W){var aa=I.call(this)||this;aa.center=S;aa.radius=W;return aa}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return t(S)&&
this.center[0]===S.center[0]&&this.center[1]===S.center[1]&&this.radius===S.radius};Q.closestTo=function(S){S=e.projectPointToVerticalCylinder(S,this.center,this.radius);return f.asSnappingPoint(S)};return m}(r),O=function(I){function m(S,W,aa){var L=I.call(this)||this;L.start=S;L.end=W;L.type=aa;L.planeLike={start:S,end:W,type:aa};return L}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return u(S)&&this.type===S.type&&F.exactEquals(this.start,S.start)&&F.exactEquals(this.end,S.end)};
Q.closestTo=function(S){return f.asSnappingPoint(e.projectPointToVerticalPlane(S,this.planeLike))};Q.closestEndTo=function(S){const {start:W,end:aa}=this;return 0<Math.sign(N.dot(N.subtract(K,aa,W),N.subtract(M,S,W)))?aa:W};return m}(r),C=function(I){function m(Q,S){return I.call(this,Q,S,e.VerticalPlaneType.HALF_PLANE)||this}A._inheritsLoose(m,I);return m}(O),B=function(I){function m(Q,S){return I.call(this,Q,S,e.VerticalPlaneType.PLANE)||this}A._inheritsLoose(m,I);return m}(O),J=function(I){function m(S,
W,aa){var L=I.call(this)||this;L.start=S;L.end=W;L.getZ=aa;L.planeLike={start:S,end:W,type:e.VerticalPlaneType.HALF_PLANE};return L}A._inheritsLoose(m,I);var Q=m.prototype;Q.equals=function(S){return v(S)&&F.exactEquals(this.start,S.start)&&F.exactEquals(this.end,S.end)&&this.getZ===S.getZ};Q.closestTo=function(S){const W=e.projectPointToVerticalPlane(S,this.planeLike);W[2]=k.toNullable(this.getZ(S[0],S[1],S[2]))??0;return f.asSnappingPoint(W)};Q.addIfOnTheGround=function(S,W){for(const aa of W)W=
k.unwrapOr(this.getZ(aa[0],aa[1],aa[2]),0),Math.abs(aa[2]-W)<e.epsilon&&(aa[2]=W,S.push(aa))};return m}(r);const K=w.create(),M=w.create();c.DrapedLineConstraint=J;c.IntersectionConstraint=h;c.LineConstraint=G;c.LineLikeConstraint=E;c.PointConstraint=y;c.SnappingConstraint=r;c.VerticalCylinderConstraint=q;c.VerticalHalfPlaneConstraint=C;c.VerticalLineIntersectionConstraint=g;c.VerticalPlaneConstraint=B;c.VerticalPlaneLikeConstraint=O;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/vec2f64":function(){define(["exports"],function(c){function A(){return[0,0]}function k(t){return[t[0],t[1]]}function N(t,u){return[t,u]}function w(t){const u=[0,0],v=Math.min(2,t.length);for(let r=0;r<v;++r)u[r]=t[r];return u}function F(t,u){return new Float64Array(t,u,2)}function D(){return[0,0]}function f(){return[1,1]}function e(){return[1,0]}function d(){return[0,1]}const z=[0,0],R=[1,1],l=[1,0],p=[0,1],H=Object.freeze(Object.defineProperty({__proto__:null,ONES:R,UNIT_X:l,UNIT_Y:p,
ZEROS:z,clone:k,create:A,createView:F,fromArray:w,fromValues:N,ones:f,unitX:e,unitY:d,zeros:D},Symbol.toStringTag,{value:"Module"}));c.ONES=R;c.UNIT_X=l;c.UNIT_Y=p;c.ZEROS=z;c.clone=k;c.create=A;c.createView=F;c.fromArray=w;c.fromValues=N;c.ones=f;c.unitX=e;c.unitY=d;c.vec2f64=H;c.zeros=D})},"esri/views/interactive/snapping/SnappingPoint":function(){define(["exports","../../../core/maybe","../../../chunks/vec3f64","../../../layers/graphics/dehydratedFeatures","../../../support/elevationInfoUtils"],
function(c,A,k,N,w){function F(f,e,d){if(A.isNone(f))return null;if(A.isNone(e))return k.fromValues(f.x,f.y,f.z??0);if("2d"===e.type)return k.fromValues(f.x,f.y,0);({elevationInfo:d}=d);e=w.getConvertedElevation(e,f,d,w.absoluteHeightElevationInfo)??0;return k.fromValues(f.x,f.y,e)}const D=N.makeDehydratedPoint(0,0,0,null);c.anyMapPointToSnappingPoint=function(f,e,d){return A.isNone(f)?null:F(d.coordinateHelper.vectorToDehydratedPoint(f,D),e,d)};c.asSnappingPoint=function(f){return f};c.cloneSnappingPoint=
function(f){return k.clone(f)};c.createSnappingPoint=function(f,e,d){return k.fromValues(f,e,d)};c.pointToSnappingPoint=F;c.snappingPointToDehydratedPoint=function(f,e){return N.makeDehydratedPoint(f[0],f[1],f[2],e)};c.snappingPointToSnappingOutput=function(f,e,{z:d,m:z,spatialReference:R,elevationInfo:l}){if(null==d&&null==z)return f=N.makeDehydratedPoint(f[0],f[1],void 0,R),null!=z&&(f.m=z,f.hasM=!0),f;if(A.isNone(e)||"2d"===e.type)return f=N.makeDehydratedPoint(f[0],f[1],d,R),null!=z&&(f.m=z,f.hasM=
!0),f;e=w.getConvertedElevationFromVector(e,f,R,w.absoluteHeightElevationInfo,l)??0;f=N.makeDehydratedPoint(f[0],f[1],e,R);null!=z&&(f.m=z,f.hasM=!0);return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatures":function(){define("exports ../../core/byteSizeEstimations ../../core/has ../../core/maybe ../../core/typedArrayUtil ../../core/uid ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ../../geometry/support/typeUtils ../support/Field ./dehydratedFeatureComparison".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l){function p(t,u,v){if(N.isNone(t))return null;switch(u){case "point":return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:v};case "polyline":return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:v};case "polygon":return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:v};case "multipoint":return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:v}}}
function H(t){if(N.isNone(t))return 0;let u=32;switch(t.type){case "point":u+=42;break;case "polyline":case "polygon":var v=0;const r=2+(t.hasZ?1:0)+(t.hasM?1:0);t="polyline"===t.type?t.paths:t.rings;for(const y of t)v+=y.length;u+=8*v*r+64;u+=128*v;u=u+34+32*(t.length+1);break;case "multipoint":v=t.points.length;u+=8*v*(2+(t.hasZ?1:0)+(t.hasM?1:0))+64;u+=128*v;u=u+34+32;break;case "extent":u+=98;t.hasM&&(u+=32);t.hasZ&&(u+=32);break;case "mesh":u+=w.estimateSize(t.vertexAttributes.position),u+=w.estimateSize(t.vertexAttributes.normal),
u+=w.estimateSize(t.vertexAttributes.uv),u+=w.estimateSize(t.vertexAttributes.tangent)}return u}c.equals=l.equals;c.DehydratedFeatureClass=function(t,u,v){this.uid=t;this.geometry=u;this.attributes=v;this.visible=!0;this.centroid=this.objectId=null};c.DehydratedFeatureSetClass=function(){this.exceededTransferLimit=!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=
this.geometryType=null};c.computeAABB=function(t,u){f.empty(u);"mesh"===t.type&&(t=t.extent);switch(t.type){case "point":u[0]=u[3]=t.x;u[1]=u[4]=t.y;t.hasZ&&(u[2]=u[5]=t.z);break;case "polyline":for(var v=0;v<t.paths.length;v++)f.expandWithNestedArray(u,t.paths[v],!!t.hasZ);break;case "polygon":for(v=0;v<t.rings.length;v++)f.expandWithNestedArray(u,t.rings[v],!!t.hasZ);break;case "multipoint":f.expandWithNestedArray(u,t.points,!!t.hasZ);break;case "extent":u[0]=t.xmin,u[1]=t.ymin,u[3]=t.xmax,u[4]=
t.ymax,null!=t.zmin&&(u[2]=t.zmin),null!=t.zmax&&(u[5]=t.zmax)}};c.computeAABR=function(t,u){e.empty(u);"mesh"===t.type&&(t=t.extent);switch(t.type){case "point":u[0]=u[2]=t.x;u[1]=u[3]=t.y;break;case "polyline":for(var v=0;v<t.paths.length;v++)e.expandWithNestedArray(u,t.paths[v]);break;case "polygon":for(v=0;v<t.rings.length;v++)e.expandWithNestedArray(u,t.rings[v]);break;case "multipoint":e.expandWithNestedArray(u,t.points);break;case "extent":u[0]=t.xmin,u[1]=t.ymin,u[2]=t.xmax,u[3]=t.ymax}};
c.estimateGeometryObjectSize=H;c.estimateSize=function(t){let u;u=32+A.estimateAttributesObjectSize(t.attributes);return u=u+3+(8+H(t.geometry))};c.fromFeatureSetJSON=function(t){const u=z.featureGeometryTypeKebabDictionary.fromJSON(t.geometryType),v=D.fromJSON(t.spatialReference),r=t.transform,y=t.features.map(E=>{var G=t.objectIdFieldName;E={uid:F.generateUID(),objectId:G&&E.attributes?E.attributes[G]:null,attributes:E.attributes,geometry:p(E.geometry,u,v),visible:!0};G=E.geometry;if(N.isSome(G)&&
r)switch(G.type){case "point":E.geometry=d.unquantizePoint(r,G,G,G.hasZ,G.hasM);break;case "multipoint":E.geometry=d.unquantizeMultipoint(r,G,G,!!G.hasZ,!!G.hasM);break;case "polygon":E.geometry=d.unquantizePolygon(r,G,G,!!G.hasZ,!!G.hasM);break;case "polyline":E.geometry=d.unquantizePolyline(r,G,G,!!G.hasZ,!!G.hasM);break;case "extent":E.geometry=G;break;case "mesh":E.geometry=G}return E});return{geometryType:u,features:y,spatialReference:v,fields:t.fields?.map(E=>R.fromJSON(E))??[],objectIdFieldName:t.objectIdFieldName,
globalIdFieldName:t.globalIdFieldName,geohashFieldName:t.geohashFieldName,geometryProperties:t.geometryProperties,hasZ:t.hasZ,hasM:t.hasM,exceededTransferLimit:t.exceededTransferLimit,transform:null}};c.fromJSONGeometry=p;c.getObjectId=function(t,u){return null!=t.objectId?t.objectId:t.attributes&&u?t.attributes[u]:null};c.hasGeometry=function(t){return N.isSome(t.geometry)};c.hasVertices=function(t){if(N.isNone(t))return!1;switch(t.type){case "extent":case "point":return!0;case "polyline":for(const u of t.paths)if(0<
u.length)return!0;return!1;case "polygon":for(const u of t.rings)if(0<u.length)return!0;return!1;case "multipoint":return 0<t.points.length;case "mesh":return!t.loaded||0<t.vertexAttributes.position.length}};c.makeDehydratedPoint=function(t,u,v,r){return{x:t,y:u,z:v,hasZ:null!=v,hasM:!1,spatialReference:r,type:"point"}};c.numVertices=function(t){if(N.isNone(t))return 0;switch(t.type){case "point":return 1;case "polyline":var u=0;for(var v of t.paths)u+=v.length;return u;case "polygon":v=0;for(u of t.rings)v+=
u.length;return v;case "multipoint":return t.points.length;case "extent":return 2;case "mesh":return(t=t.vertexAttributes&&t.vertexAttributes.position)?t.length/3:0}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(c){function A(w){return 32+w.length}function k(w){if(!w)return 0;if(Array.isArray(w)){var F=w.length;if(0===F||"number"===typeof w[0])w=32+8*F;else{var D=32;for(let f=0;f<F;f++)D+=N(w[f]);w=D}return w}D=
32;for(F in w)w.hasOwnProperty(F)&&(D+=N(w[F]));return D}function N(w){switch(typeof w){case "object":return k(w);case "string":return A(w);case "number":return 16;case "boolean":return 4;default:return 8}}c.ByteSizeUnit=void 0;(function(w){w[w.KILOBYTES=1024]="KILOBYTES";w[w.MEGABYTES=1048576]="MEGABYTES";w[w.GIGABYTES=1073741824]="GIGABYTES"})(c.ByteSizeUnit||(c.ByteSizeUnit={}));c.estimateAttributesObjectSize=function(w){if(!w)return 0;let F=32;for(const D in w)if(w.hasOwnProperty(D)){const f=
w[D];switch(typeof f){case "string":F+=A(f);break;case "number":F+=16;break;case "boolean":F+=4}}return F};c.estimateFixedArraySize=function(w,F){return 32+w.length*F};c.estimateNestedObjectSize=k;c.estimateNumberByteSize=function(w){return 16};c.estimateStringByteSize=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/maybe","../../geometry/support/spatialReferenceUtils"],function(c,
A,k,N){function w(d,z){if(d===z)return!0;if(null==d||null==z||d.length!==z.length)return!1;for(let R=0;R<d.length;R++){const l=d[R],p=z[R];if(l.length!==p.length)return!1;for(let H=0;H<l.length;H++)if(l[H]!==p[H])return!1}return!0}function F(d,z){if(d===z)return!0;if(null==d||null==z||d.length!==z.length)return!1;for(let R=0;R<d.length;R++)if(!w(d[R],z[R]))return!1;return!0}function D(d,z){return d===z||k.isSome(d)&&k.isSome(z)&&N.equals(d.spatialReference,z.spatialReference)&&d.x===z.x&&d.y===z.y&&
d.z===z.z&&d.m===z.m}function f(d,z){if(d===z)return!0;if(k.isNone(d)||k.isNone(z)||d.type!==z.type)return!1;switch(d.type){case "point":return D(d,z);case "extent":return d=d.hasZ!==z.hasZ||d.hasM!==z.hasM?!1:N.equals(d.spatialReference,z.spatialReference)?d.xmin===z.xmin&&d.ymin===z.ymin&&d.zmin===z.zmin&&d.xmax===z.xmax&&d.ymax===z.ymax&&d.zmax===z.zmax:!1,d;case "polyline":return d=d.hasZ!==z.hasZ||d.hasM!==z.hasM?!1:N.equals(d.spatialReference,z.spatialReference)?F(d.paths,z.paths):!1,d;case "polygon":return d=
d.hasZ!==z.hasZ||d.hasM!==z.hasM?!1:N.equals(d.spatialReference,z.spatialReference)?F(d.rings,z.rings):!1,d;case "multipoint":return d=d.hasZ!==z.hasZ||d.hasM!==z.hasM?!1:N.equals(d.spatialReference,z.spatialReference)?w(d.points,z.points):!1,d;case "mesh":return!1}}function e(d,z){if(d===z)return!0;if(!d||!z)return!1;const R=Object.keys(d),l=Object.keys(z);if(R.length!==l.length)return!1;for(const p of R)if(d[p]!==z[p])return!1;return!0}c.equals=function(d,z){return d===z?!0:null!=d&&null!=z&&d.objectId===
z.objectId&&f(d.geometry,z.geometry)&&e(d.attributes,z.attributes)?!0:!1};c.pointEquals=D;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geometry3dUtils":function(){define("exports ../../core/mathUtils ../../chunks/vec2 ../../chunks/vec2f64 ../../chunks/vec3 ../../chunks/vec3f64 ./geometry2dUtils".split(" "),function(c,A,k,N,w,F,D){function f(h,{start:g,end:q,type:O}){h=w.sub(p,h,g);q=w.sub(H,q,g);h=w.dot(h,q)/w.dot(q,q);return w.scaleAndAdd(F.create(),g,q,O===
D.LineType.RAY?Math.max(h,0):h)}function e({start:h,end:g,type:q},O){const C=w.sub(p,O,h);g=w.sub(H,g,h);if(q===D.LineType.RAY&&-1E-6>w.dot(g,C))return w.distance(h,O);h=w.cross(t,g,C);return w.len(h)/w.len(g)}function d(h,g){const q=h.start,O=g.start;var C=g.end;const B=w.sub(p,h.end,q);C=w.sub(H,C,O);var J=w.sub(t,O,q),K=w.cross(u,B,C),M=w.dot(J,K);if(!A.floatEqualAbsolute(M,0,1E-6))return[];M=w.sqrLen(K);if(A.floatEqualAbsolute(M,0,1E-6))return[];J=w.cross(v,J,C);K=w.dot(J,K)/M;K=w.scaleAndAdd(r,
q,B,K);return h.type===D.LineType.RAY&&(h=w.sub(y,K,q),-1E-6>w.dot(B,h))||g.type===D.LineType.RAY&&(g=w.sub(y,K,O),-1E-6>w.dot(C,g))?[]:[F.clone(K)]}function z({start:h,end:g,type:q},O){const C=w.sub(p,O,h);h=w.sub(H,g,h);g=w.cross(t,h,C);if(1E-6>w.sqrLen(g)/w.sqrLen(h))switch(q){case D.LineType.LINE:return[F.clone(O)];case D.LineType.RAY:return-1E-6>w.dot(h,C)?[]:[F.clone(O)]}return[]}function R(h,g,{start:q,end:O,type:C}){w.set(h.start,q[0],q[1],g);w.set(h.end,O[0],O[1],g);h.type=l[C];return h}
c.VerticalPlaneType=void 0;(function(h){h[h.PLANE=0]="PLANE";h[h.HALF_PLANE=1]="HALF_PLANE"})(c.VerticalPlaneType||(c.VerticalPlaneType={}));const l={[c.VerticalPlaneType.PLANE]:D.LineType.LINE,[c.VerticalPlaneType.HALF_PLANE]:D.LineType.RAY},p=F.create(),H=F.create(),t=F.create(),u=F.create(),v=F.create(),r=F.create(),y=F.create(),E={start:F.create(),end:F.create(),type:D.LineType.LINE},G={start:F.create(),end:F.create(),type:D.LineType.LINE};Object.defineProperty(c,"LineType",{enumerable:!0,get:()=>
D.LineType});c.epsilon=1E-6;c.intersectLineAndPoint=z;c.intersectLineLike=d;c.intersectLineLikeAndVerticalCylinder=function({start:h,end:g,type:q},O,C){const B=[];g=w.subtract(p,g,h);var J=k.subtract(H,h,O);O=k.squaredLength(g);const K=2*k.dot(g,J);C=k.squaredLength(J)-C*C;C=K*K-4*O*C;0===C?(O=-K/(2*O),(q===D.LineType.LINE||0<=O)&&B.push(w.scaleAndAdd(F.create(),h,g,O))):0<C&&(C=Math.sqrt(C),J=(-K+C)/(2*O),(q===D.LineType.LINE||0<=J)&&B.push(w.scaleAndAdd(F.create(),h,g,J)),O=(-K-C)/(2*O),(q===D.LineType.LINE||
0<=O)&&B.push(w.scaleAndAdd(F.create(),h,g,O)));return B};c.intersectVerticalCylinderAndPoint=function(h,g,q){return A.floatEqualAbsolute(k.squaredDistance(q,h),g*g,1E-6)?[F.clone(q)]:[]};c.intersectVerticalPlane=function(h,g){h=R(E,0,h);g=R(G,0,g);g=d(h,g);h=[];for(const q of g)h.push(N.clone(q));return h};c.intersectVerticalPlaneAndLineLike=function(h,g){const q=h.start,O=k.subtract(p,h.end,q);var C=w.set(H,-O[1],O[0],0);const B=g.start,J=w.sub(t,g.end,B);var K=w.dot(J,C),M=w.set(u,q[0],q[1],0);
M=w.sub(v,M,B);C=w.dot(M,C);if(1E-6>Math.abs(K))return[];K=w.scaleAndAdd(r,B,J,C/K);return g.type===D.LineType.RAY&&(g=w.sub(y,K,B),-1E-6>w.dot(g,J))||h.type===c.VerticalPlaneType.HALF_PLANE&&(h=k.sub(y,K,q),-1E-6>k.dot(h,O))?[]:[F.clone(K)]};c.intersectVerticalPlaneAndPoint=function(h,g){return z(R(E,g[2],h),g)};c.intersectVerticalPlaneAndVerticalCylinder=function({start:h,end:g,type:q},O,C){const B=[];g=k.subtract(p,g,h);var J=k.subtract(H,h,O);O=k.squaredLength(g);const K=2*k.dot(g,J);C=k.squaredLength(J)-
C*C;C=K*K-4*O*C;0===C?(O=-K/(2*O),(q===c.VerticalPlaneType.PLANE||0<=O)&&B.push(k.scaleAndAdd(N.create(),h,g,O))):0<C&&(C=Math.sqrt(C),J=(-K+C)/(2*O),(q===c.VerticalPlaneType.PLANE||0<=J)&&B.push(k.scaleAndAdd(N.create(),h,g,J)),O=(-K-C)/(2*O),(q===c.VerticalPlaneType.PLANE||0<=O)&&B.push(k.scaleAndAdd(N.create(),h,g,O)));return B};c.pointToLineLikeDistance=e;c.pointToVerticalCylinderDistance=function(h,g,q){return k.distance(h,g)-q};c.pointToVerticalPlaneDistance=function(h,g){return e(R(E,h[2],
g),h)};c.projectPointToLineLike=f;c.projectPointToVerticalCylinder=function(h,g,q){const O=k.subtract(p,h,g);q/=k.length(O);g=k.scaleAndAdd(F.create(),g,O,q);g[2]=h[2];return g};c.projectPointToVerticalPlane=function(h,g){return f(h,R(E,h[2],g))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(c,A,k,N){function w(l,p){return l[0]*p[1]-l[1]*p[0]}
function F(l,p,H){p=k.dot(H,p)/k.squaredLength(H);return k.scale(l,H,p)}function D(l,p,H,t,u=H){k.subtract(e,t,H);k.subtract(z,p,u);F(R,z,e);return k.add(l,u,R)}function f(l,p,H,t){k.subtract(e,p,H);p=t/k.length(e);return k.scaleAndAdd(l,H,e,p)}c.LineType=void 0;(function(l){l[l.RAY=0]="RAY";l[l.LINE=1]="LINE"})(c.LineType||(c.LineType={}));const e=N.create(),d=N.create(),z=N.create(),R=N.create();c.cross=w;c.intersectCircleAndPoint=function(l,p,H){f(z,H,l,p);return A.floatEqualAbsolute(z[0],H[0])&&
A.floatEqualAbsolute(z[1],H[1])?[N.clone(H)]:[]};c.intersectLineAndPoint=function(l,p){D(z,p,l.start,l.end);return A.floatEqualAbsolute(z[0],p[0])&&A.floatEqualAbsolute(z[1],p[1])?[N.clone(p)]:[]};c.intersectLineAndRay=function(l,p){const H=l.start;var t=p.start,u=p.end;const v=k.subtract(e,l.end,H);var r=k.subtract(d,u,t);u=w(v,r);if(1E-6>=Math.abs(u))return[];t=k.subtract(z,H,t);r=w(r,t)/u;u=w(v,t)/u;if(0<=r){if(0<=u||p.type===c.LineType.LINE)return[k.scaleAndAdd(R,H,v,r)]}else if(l.type===c.LineType.LINE&&
(0<=u||p.type===c.LineType.LINE))return[k.scaleAndAdd(R,H,v,r)];return[]};c.intersectLineLikeAndCircle=function(l,p,H){const t=[],u=k.subtract(e,l.end,l.start);var v=k.subtract(d,l.start,p);p=k.squaredLength(u);const r=2*k.dot(u,v);H=k.squaredLength(v)-H*H;H=r*r-4*p*H;0===H?(p=-r/(2*p),(l.type===c.LineType.LINE||0<=p)&&t.push(k.scaleAndAdd(R,l.start,u,p))):0<H&&(H=Math.sqrt(H),v=(-r+H)/(2*p),(l.type===c.LineType.LINE||0<=v)&&t.push(k.scaleAndAdd(R,l.start,u,v)),p=(-r-H)/(2*p),(l.type===c.LineType.LINE||
0<=p)&&t.push(k.scaleAndAdd(z,l.start,u,p)));return t};c.pointToLineDistance=function(l,p,H){return Math.abs((p[0]-l[0])*(H[1]-l[1])-(p[1]-l[1])*(H[0]-l[0]))/k.distance(p,H)};c.projectPoint=F;c.projectPointToCircle=f;c.projectPointToLine=D;c.projectPointToRay=function(l,p,H,t){k.subtract(e,t,H);k.subtract(z,p,H);p=k.dot(e,z)/k.squaredLength(e);return 0<p?k.scaleAndAdd(l,H,e,p):k.copy(l,H)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/maybe ../../../core/reactiveUtils ../../../chunks/vec3 ../../../layers/graphics/dehydratedFeatures ../../input/InputManager ../keybindings ./SnappingPoint".split(" "),
function(c,A,k,N,w,F,D,f){function e(d,z){const R=d.x-z.x;d=d.y-z.y;return R*R+d*d}c.LineSegmentHintType=void 0;(function(d){d[d.TARGET=0]="TARGET";d[d.REFERENCE=1]="REFERENCE";d[d.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(c.LineSegmentHintType||(c.LineSegmentHintType={}));c.editEdgeToSnappingEdge=function(d,z,R){return{left:f.anyMapPointToSnappingPoint(d.leftVertex.pos,z,R),right:f.anyMapPointToSnappingPoint(d.rightVertex.pos,z,R)}};c.makeFilter=function(d){return d.createQuery()};c.makeSnappingQuery=
function({point:d,distance:z,types:R,coordinateHelper:{spatialReference:l}},p,H){return{point:w.makeDehydratedPoint(d[0],d[1],d[2],l.toJSON()),mode:p,distance:z,types:R,query:A.isSome(H)?H.toJSON():{where:"1\x3d1"}}};c.objectEqual=function(d,z){const R=d.length===z.length&&d[0]===z[0]&&d[1]===z[1];switch(d.length){case 2:return R;case 3:return R&&d[2]===z[2];case 4:return R&&d[2]===z[2]&&d[3]===z[3]}return!1};c.screenDistance=function(d,z){return Math.sqrt(e(d,z))};c.setupSnappingToggleHandles=function(d,
z=()=>{}){const R=k.watch(()=>({view:d.view,snappingOptions:d.snappingOptions}),({view:l,snappingOptions:p})=>{const H=F.ViewEventPriorities.TOOL;d.removeHandles("snapping-toggle");l&&A.isSome(p)&&(l=[l.on("key-down",t=>{t.key!==D.SNAPPING_KEYS.toggle||t.repeat||(p.enabledToggled=!0,z())},H),l.on("key-up",t=>{t.key===D.SNAPPING_KEYS.toggle&&(p.enabledToggled=!1,z())},H),l.on("pointer-move",t=>{t=t.native.ctrlKey;p.enabledToggled!==t&&(p.enabledToggled=t,z())},H)],d.addHandles(l,"snapping-toggle"))},
k.syncAndInitial);d.addHandles(R)};c.sortCandidatesInPlace=function(d,z){z.sort((R,l)=>{R=N.squaredDistance(R.targetPoint,d);l=N.squaredDistance(l.targetPoint,d);return R-l})};c.squaredScreenDistance=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/DrapedEdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),
function(c,A,k,N,w,F){w=function(D){function f(e){return D.call(this,{...e,isDraped:!0,constraint:new k.DrapedLineConstraint(e.edgeStart,e.edgeEnd,e.getGroundElevation)})||this}A._inheritsLoose(f,D);A._createClass(f,[{key:"hints",get:function(){return[new F.LineSnappingHint(N.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}]);return f}(w.FeatureSnappingCandidate);c.DrapedEdgeSnappingCandidate=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingDomain","./SnappingCandidate"],function(c,A,k,N){N=function(w){function F({targetPoint:D,objectId:f,constraint:e,isDraped:d}){D=w.call(this,D,e,d,k.SnappingDomain.FEATURE)||this;D.objectId=f;return D}A._inheritsLoose(F,w);return F}(N.SnappingCandidate);c.FeatureSnappingCandidate=N;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(c){c.SnappingCandidate=function(A,k,N,w){this.targetPoint=A;this.constraint=k;this.isDraped=N;this.domain=w};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),
function(c,A,k,N,w,F,D){k=function(f){function e(d,z,R,l,p=F.SnappingDomain.ALL,H=!0,t=!0){l=f.call(this,l,p)||this;l.type=d;l.lineStart=z;l.lineEnd=R;l.fadeLeft=H;l.fadeRight=t;return l}A._inheritsLoose(e,f);e.prototype.equals=function(d){return d instanceof e?this.type===d.type&&w.exactEquals(this.lineStart,d.lineStart)&&w.exactEquals(this.lineEnd,d.lineEnd)&&this.fadeLeft===d.fadeLeft&&this.fadeRight===d.fadeRight:!1};A._createClass(e,[{key:"length",get:function(){return w.distance(this.lineStart,
this.lineEnd)}}]);return e}(D.SnappingHint);c.LineSnappingHint=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(c){c.SnappingHint=function(A,k){this.isDraped=A;this.domain=k};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),
function(c,A,k,N,w,F){w=function(D){function f(e){return D.call(this,{...e,constraint:new k.LineConstraint(e.edgeStart,e.edgeEnd)})||this}A._inheritsLoose(f,D);A._createClass(f,[{key:"hints",get:function(){return[new F.LineSnappingHint(N.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}]);return f}(w.FeatureSnappingCandidate);c.EdgeSnappingCandidate=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(c,A,k,N,w,F,D){w=function(f){function e({targetPoint:d,constraint:z,previousVertex:R,otherVertex:l,otherVertexType:p,objectId:H,isDraped:t}){d=f.call(this,d,z,t,k.SnappingDomain.SELF)||this;d.previousVertex=R;d.otherVertex=l;d.otherVertexType=p;d.objectId=H;return d}A._inheritsLoose(e,f);A._createClass(e,[{key:"hints",get:function(){const d=this.previousVertex,z=this.otherVertexType===c.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,R=this.otherVertexType===c.OtherVertexType.CENTER?
this.targetPoint:this.otherVertex;return[new F.LineSnappingHint(N.LineSegmentHintType.TARGET,z,R,this.isDraped,this.domain),new F.LineSnappingHint(N.LineSegmentHintType.REFERENCE,d,z,this.isDraped,this.domain),new D.RightAngleSnappingHint(this.previousVertex,z,R,this.isDraped,this.domain)]}}]);return e}(w.SnappingCandidate);c.OtherVertexType=void 0;(function(f){f[f.NEXT=0]="NEXT";f[f.CENTER=1]="CENTER"})(c.OtherVertexType||(c.OtherVertexType={}));c.RightAngleSnappingCandidate=w;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(c,A,k,N,w,F,D){k=function(f){function e(d,z,R,l,p=F.SnappingDomain.ALL){l=f.call(this,l,p)||this;l.previousVertex=d;l.centerVertex=z;l.nextVertex=R;return l}A._inheritsLoose(e,f);e.prototype.equals=function(d){return d instanceof
e?w.exactEquals(this.previousVertex,d.previousVertex)&&w.exactEquals(this.centerVertex,d.centerVertex)&&w.exactEquals(this.nextVertex,d.nextVertex):!1};return e}(D.SnappingHint);c.RightAngleSnappingHint=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../layers/graphics/dehydratedFeatures ../../../support/elevationInfoUtils".split(" "),
function(c,A,k,N,w,F,D){function f(t,u,v,r,y=w.create()){t=u.toXYZ(t);t[2]=D.getConvertedElevationFromVector(r,t,u.spatialReference,v)||0;r.renderCoordsHelper.toRenderCoords(t,u.spatialReference,y);return y}function e(t,u,v,r,y=w.create()){t=N.copy(R,t);t[2]=D.getConvertedElevationFromVector(r,t,u,v)||0;r.renderCoordsHelper.toRenderCoords(t,u,y);return y}function d(t,u,v,r){if("2d"===r.type)return z.x=t[0],z.y=t[1],z.spatialReference=u,r.toScreen(z);e(t,u,v,r,R);r.state.camera.projectToScreen(R,H);
return A.createScreenPoint(H[0],H[1])}const z=F.makeDehydratedPoint(0,0,0,null),R=w.create(),l=A.createRenderScreenPointArray3(),p=A.createRenderScreenPointArray3(),H=A.createScreenPointArray();c.anyMapPointToRender=f;c.anyMapPointToScreenPoint=function(t,u,v,r){return d(u.toXYZ(t),u.spatialReference,v,r)};c.anyMapPointsToRenderWithEqualRelativeZ=function(t,u,v,r,y,E,G){if("absolute-height"===r.mode)f(t,v,r,y,E),f(u,v,r,y,G);else{t=v.toXYZ(t);u=v.toXYZ(u);var h=D.getConvertedElevationFromVector(y,
t,v.spatialReference,r);r=D.getConvertedElevationFromVector(y,u,v.spatialReference,r);r=(null==h?r:null==r?h:Math.min(h,r))||0;t[2]=r;u[2]=r;y.renderCoordsHelper.toRenderCoords(t,v.spatialReference,E);y.renderCoordsHelper.toRenderCoords(u,v.spatialReference,G)}};c.renderScreenSpaceTangent=function(t,u,v,r){v.projectToRenderScreen(t,l);v.projectToRenderScreen(u,p);k.subtract(r,p,l);k.normalize(r,r)};c.vectorToRender=e;c.vectorToScreenPoint=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./SnappingDomain ./snappingUtils".split(" "),function(c,
A,k,N,w,F,D,f,e,d,z,R,l,p,H){c.SelfSnappingEngine=function(t){function u(r){r=t.call(this,r)||this;r.updating=!1;r._snappers=new w;r._domain=p.SnappingDomain.SELF;return r}A._inheritsLoose(u,t);var v=u.prototype;v.initialize=function(){this._snappers.push(new z.ParallelLineSnapper(this.view,this.options),new d.LineSnapper(this.view,this.options),new R.RightAngleSnapper(this.view,this.options),new l.RightAngleTriangleSnapper(this.view,this.options))};v.fetchCandidates=function(){var r=A._asyncToGenerator(function*(y,
E,G){if(!(E&this._domain&&this.options.effectiveSelfEnabled))return[];E=[];for(const h of this._snappers.items)for(const g of h.snap(y,G))E.push(g);H.sortCandidatesInPlace(y,E);return E});return function(y,E,G){return r.apply(this,arguments)}}();A._createClass(u,[{key:"options",set:function(r){this._set("options",r);for(const y of this._snappers)y.options=r}}]);return u}(N);k.__decorate([F.property({readOnly:!0})],c.SelfSnappingEngine.prototype,"updating",void 0);k.__decorate([F.property({constructOnly:!0})],
c.SelfSnappingEngine.prototype,"view",void 0);k.__decorate([F.property()],c.SelfSnappingEngine.prototype,"options",null);c.SelfSnappingEngine=k.__decorate([e.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],c.SelfSnappingEngine);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../support/elevationInfoUtils ./SnappingAlgorithm ./SnappingPoint ./snappingUtils ./candidates/LineSnappingCandidate ../support/viewUtils ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z){w=function(R){function l(){return R.apply(this,arguments)||this}A._inheritsLoose(l,R);var p=l.prototype;p.snapNewVertex=function(H,t){var u=t.editGeometryOperations.data.components[0],v=u.edges.length;const r=[];if(1>v)return r;var {spatialReference:y}=t;y=e.vectorToScreenPoint(H,y,N.absoluteHeightElevationInfo,this.view);const {view:E}=this;v=u=u.edges[v-1];do{if(this.edgeExceedsShortLineThreshold(v,t)){const G=D.editEdgeToSnappingEdge(v,E,t);this._processCandidateProposal(G.left,
G.right,H,y,t,r)}v=v.leftVertex.leftEdge}while(v&&v!==u);return r};p.snapExistingVertex=function(H,t){const u=[],v=k.unwrap(t.vertexHandle);var r=v.component;if(2>r.edges.length)return u;const {view:y}=this;var {spatialReference:E}=t;E=e.vectorToScreenPoint(H,E,N.absoluteHeightElevationInfo,y);var G=v.leftEdge,h=v.rightEdge;G&&h&&this.edgeExceedsShortLineThreshold(G,t)&&this.edgeExceedsShortLineThreshold(h,t)&&this._processCandidateProposal(F.anyMapPointToSnappingPoint(G.leftVertex.pos,y,t),F.anyMapPointToSnappingPoint(h.rightVertex.pos,
y,t),H,E,t,u);G=r=r.edges[0];do G!==v.leftEdge&&G!==v.rightEdge&&this.edgeExceedsShortLineThreshold(G,t)&&(h=D.editEdgeToSnappingEdge(G,y,t),this._processCandidateProposal(h.left,h.right,H,E,t,u)),G=G.rightVertex.rightEdge;while(G&&G!==r);return u};p._processCandidateProposal=function(H,t,u,v,r,y){const {spatialReference:E,pointer:G}=r;u=F.asSnappingPoint(d.projectPointToLineLike(u,{start:H,end:t,type:z.LineType.LINE}));D.squaredScreenDistance(v,e.vectorToScreenPoint(u,E,N.absoluteHeightElevationInfo,
this.view))<this.squaredProximityThreshold(G)&&y.push(new f.LineSnappingCandidate({lineStart:H,lineEnd:t,targetPoint:u,isDraped:"on-the-ground"===r.elevationInfo?.mode}))};return l}(w.SnappingAlgorithm);c.LineSnapper=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../support/elevationInfoUtils ./Settings ./SnappingPoint ./snappingUtils ../support/viewUtils".split(" "),
function(c,A,k,N,w,F,D,f,e){let d=function(){function z(l,p){this.view=l;this.options=p;this.squaredShortLineThreshold=F.defaults.shortLineThreshold*F.defaults.shortLineThreshold}var R=z.prototype;R.snap=function(l,p){return k.isSome(p.vertexHandle)?"vertex"!==p.vertexHandle.type?[]:this.snapExistingVertex(l,p):this.snapNewVertex(l,p)};R.edgeExceedsShortLineThreshold=function(l,p){return this.exceedsShortLineThreshold(D.anyMapPointToSnappingPoint(l.leftVertex.pos,this.view,p),D.anyMapPointToSnappingPoint(l.rightVertex.pos,
this.view,p),p)};R.exceedsShortLineThreshold=function(l,p,{spatialReference:H}){return 0===this.squaredShortLineThreshold||f.squaredScreenDistance(e.vectorToScreenPoint(p,H,w.absoluteHeightElevationInfo,this.view),e.vectorToScreenPoint(l,H,w.absoluteHeightElevationInfo,this.view))>this.squaredShortLineThreshold};R.isVertical=function(l,p){return N.squaredDistance(l,p)<F.defaults.verticalLineThreshold};R.squaredProximityThreshold=function(l){return"touch"===l?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold};
A._createClass(z,[{key:"_squaredMouseProximityThreshold",get:function(){return this.options.distance*this.options.distance}},{key:"_squaredTouchProximityThreshold",get:function(){const {distance:l,touchSensitivityMultiplier:p}=this.options,H=l*p;return H*H}}]);return z}();c.SnappingAlgorithm=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(c,A,k,N,w,F,D){F=function(f){function e({lineStart:d,lineEnd:z,targetPoint:R,isDraped:l}){R=f.call(this,R,new k.VerticalPlaneConstraint(d,z),l,N.SnappingDomain.SELF)||this;R._referenceLineHint=new D.LineSnappingHint(w.LineSegmentHintType.REFERENCE_EXTENSION,d,z,l,R.domain);return R}A._inheritsLoose(e,f);e.prototype._lineEndClosestToTarget=function(){return this.constraint.closestEndTo(this.targetPoint)};A._createClass(e,[{key:"hints",get:function(){return[this._referenceLineHint,new D.LineSnappingHint(w.LineSegmentHintType.TARGET,
this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}}]);return e}(F.SnappingCandidate);c.LineSnappingCandidate=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3f64 ../../../support/elevationInfoUtils ./Settings ./SnappingAlgorithm ./SnappingPoint ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){e=function(t){function u(){return t.apply(this,arguments)||this}A._inheritsLoose(u,t);var v=u.prototype;v.snapNewVertex=function(r,y){var E=y.editGeometryOperations.data.components[0],G=E.edges.length,h=E.vertices.length;const g=[];if(2>G)return g;const {view:q}=this,O=l.vectorToScreenPoint(r,y.spatialReference,D.absoluteHeightElevationInfo,q);h=d.anyMapPointToSnappingPoint(E.vertices[h-1].pos,q,y);const C=d.anyMapPointToSnappingPoint(E.vertices[0].pos,q,y);G=
E=E.edges[G-1];do{if(this.edgeExceedsShortLineThreshold(G,y)){const B=z.editEdgeToSnappingEdge(G,q,y);this._checkEdgeForParallelLines(B,h,r,O,y,g);this._checkEdgeForParallelLines(B,C,r,O,y,g)}G=G.leftVertex.leftEdge}while(G&&G!==E);return g};v.snapExistingVertex=function(r,y){const E=[],G=k.unwrap(y.vertexHandle);var h=G.component;if(3>h.edges.length)return E;const {view:g}=this,q=l.vectorToScreenPoint(r,y.spatialReference,D.absoluteHeightElevationInfo,g),O=G.leftEdge,C=G.rightEdge,B=h.vertices[0],
J=d.anyMapPointToSnappingPoint(B.pos,g,y),K=h.vertices[h.vertices.length-1],M=d.anyMapPointToSnappingPoint(K.pos,g,y);let I=h=h.edges[0];do{if(I!==O&&I!==C&&this.edgeExceedsShortLineThreshold(I,y)){const m=z.editEdgeToSnappingEdge(I,g,y);O&&this._checkEdgeForParallelLines(m,d.anyMapPointToSnappingPoint(O.leftVertex.pos,g,y),r,q,y,E);C&&this._checkEdgeForParallelLines(m,d.anyMapPointToSnappingPoint(C.rightVertex.pos,g,y),r,q,y,E);G===B?this._checkEdgeForParallelLines(m,M,r,q,y,E):G===K&&this._checkEdgeForParallelLines(m,
J,r,q,y,E)}I=I.rightVertex.rightEdge}while(I&&I!==h);return E};v._checkEdgeForParallelLines=function(r,y,E,G,h,g){const q=r.left,O=r.right;p.projectPointToLine(H,y,q,O);if(!(N.squaredDistance(H,y)<f.defaults.parallelLineThreshold)){p.projectPointToLine(H,E,q,O,y);var {spatialReference:C,pointer:B}=h;E=d.asSnappingPoint(F.fromValues(H[0],H[1],E[2]));z.squaredScreenDistance(G,l.vectorToScreenPoint(E,C,D.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(B)&&!(this.isVertical(E,y)||
this.isVertical(q,O)||this._parallelToPreviousCandidate(r,g))&&g.push(new R.ParallelLineSnappingCandidate({referenceLine:r,lineStart:y,targetPoint:E,isDraped:"on-the-ground"===h.elevationInfo?.mode}))}};v._parallelToPreviousCandidate=function(r,y){const E=r.left,G=r.right;for(const h of y)if(p.projectPointToLine(H,G,h.constraint.start,h.constraint.end,E),N.squaredDistance(H,G)<f.defaults.parallelLineThreshold)return h.addReferenceLine(r),!0;return!1};return u}(e.SnappingAlgorithm);const H=w.create();
c.ParallelLineSnapper=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../SnappingConstraint ../SnappingDomain ../SnappingPoint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),function(c,A,k,N,w,F,D,f,e,d,z){e=function(R){function l({referenceLine:p,
lineStart:H,targetPoint:t,isDraped:u}){const v=N.clone(H),{left:r,right:y}=p;k.subtract(v,k.add(v,v,y),r);H=R.call(this,t,new w.VerticalPlaneConstraint(H,D.asSnappingPoint(v)),u,F.SnappingDomain.SELF)||this;H._referenceLines=[{edge:p,fadeLeft:!0,fadeRight:!0}];return H}A._inheritsLoose(l,R);l.prototype.addReferenceLine=function(p){const H={edge:p,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(t=>{k.exactEquals(p.right,t.edge.left)&&(t.fadeLeft=!1,H.fadeRight=!1);k.exactEquals(p.right,t.edge.right)&&
(t.fadeRight=!1,H.fadeRight=!1);k.exactEquals(p.left,t.edge.right)&&(t.fadeRight=!1,H.fadeLeft=!1);k.exactEquals(p.left,t.edge.left)&&(t.fadeLeft=!1,H.fadeLeft=!1)});this._referenceLines.push(H)};A._createClass(l,[{key:"hints",get:function(){return[new d.LineSnappingHint(f.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new z.ParallelSnappingHint(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(p=>new d.LineSnappingHint(f.LineSegmentHintType.REFERENCE,
p.edge.left,p.edge.right,this.isDraped,this.domain,p.fadeLeft,p.fadeRight))]}}]);return l}(e.SnappingCandidate);c.ParallelLineSnappingCandidate=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../../../../chunks/vec3 ../SnappingDomain ./SnappingHint".split(" "),function(c,A,k,N,w,F,D){k=function(f){function e(d,
z,R,l=F.SnappingDomain.ALL){R=f.call(this,R,l)||this;R.lineStart=d;R.lineEnd=z;return R}A._inheritsLoose(e,f);e.prototype.equals=function(d){return d instanceof e?w.exactEquals(this.lineStart,d.lineStart)&&w.exactEquals(this.lineEnd,d.lineEnd):!1};return e}(D.SnappingHint);c.ParallelSnappingHint=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../support/elevationInfoUtils ./SnappingAlgorithm ./SnappingConstraint ./SnappingPoint ./snappingUtils ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){e=function(u){function v(){return u.apply(this,arguments)||this}A._inheritsLoose(v,u);var r=v.prototype;r.snapNewVertex=function(y,E){var G=E.editGeometryOperations.data.components[0],h=G.vertices.length;const g=[];if(2>h)return g;var {view:q}=this;const O=p.vectorToScreenPoint(y,E.spatialReference,f.absoluteHeightElevationInfo,q);var C=G.vertices[h-1];this.edgeExceedsShortLineThreshold(C.leftEdge,E)&&(h=z.anyMapPointToSnappingPoint(C.pos,q,E),C=z.anyMapPointToSnappingPoint(C.leftEdge.leftVertex.pos,
q,E),this._checkForSnappingCandidate(g,C,h,y,O,E));h=G.vertices[0];this.edgeExceedsShortLineThreshold(h.rightEdge,E)&&(G=z.anyMapPointToSnappingPoint(h.pos,q,E),q=z.anyMapPointToSnappingPoint(h.rightEdge.rightVertex.pos,q,E),this._checkForSnappingCandidate(g,q,G,y,O,E));return g};r.snapExistingVertex=function(y,E){const G=[];var h=k.unwrap(E.vertexHandle);if(3>h.component.vertices.length)return G;var {view:g}=this;const q=p.vectorToScreenPoint(y,E.spatialReference,f.absoluteHeightElevationInfo,g);
var O=h.leftEdge;h=h.rightEdge;if(O&&O.leftVertex.leftEdge){var C=O.leftVertex.leftEdge;this.edgeExceedsShortLineThreshold(C,E)&&(O=z.anyMapPointToSnappingPoint(C.rightVertex.pos,g,E),C=z.anyMapPointToSnappingPoint(C.leftVertex.pos,g,E),this._checkForSnappingCandidate(G,C,O,y,q,E))}h&&h.rightVertex.rightEdge&&(O=h.rightVertex.rightEdge,this.edgeExceedsShortLineThreshold(O,E)&&(h=z.anyMapPointToSnappingPoint(O.leftVertex.pos,g,E),g=z.anyMapPointToSnappingPoint(O.rightVertex.pos,g,E),this._checkForSnappingCandidate(G,
g,h,y,q,E)));return G};r._checkForSnappingCandidate=function(y,E,G,h,g,q){const {spatialReference:O,pointer:C}=q;N.subtract(H,G,E);const B=F.set(t,H[1],-H[0],0),J=N.dot(B,N.subtract(H,h,G))/N.squaredLength(B);h=z.asSnappingPoint(N.scaleAndAdd(D.clone(h),G,B,J));R.squaredScreenDistance(g,p.vectorToScreenPoint(h,O,f.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(C)&&!this.isVertical(h,G)&&!this.isVertical(G,E)&&(g=F.scaleAndAdd(D.create(),G,B,Math.sign(J)),y.push(new l.RightAngleSnappingCandidate({targetPoint:h,
constraint:new d.VerticalHalfPlaneConstraint(G,z.asSnappingPoint(g)),previousVertex:E,otherVertex:G,otherVertexType:l.OtherVertexType.CENTER,isDraped:"on-the-ground"===q.elevationInfo?.mode})))};return v}(e.SnappingAlgorithm);const H=w.create(),t=D.create();c.RightAngleSnapper=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3f64 ../../../support/elevationInfoUtils ./SnappingAlgorithm ./SnappingPoint ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l){f=function(H){function t(){return H.apply(this,arguments)||this}A._inheritsLoose(t,H);var u=t.prototype;u.snapNewVertex=function(v,r){var y=r.editGeometryOperations.data.components[0];const E=[];var G=y.vertices.length;if("polygon"!==r.editGeometryOperations.data.type||2>G)return E;var {view:h}=this;G=y.vertices[G-1];y=e.anyMapPointToSnappingPoint(y.vertices[0].pos,h,r);h=e.anyMapPointToSnappingPoint(G.pos,h,r);this._processCandidateProposal(y,h,v,r,E);return E};
u.snapExistingVertex=function(v,r){const y=[];var E=k.unwrap(r.vertexHandle),G=E.component;if(2>G.edges.length||"polyline"===r.editGeometryOperations.data.type&&(0===E.index||E.index===G.vertices.length-1))return y;const {view:h}=this;G=e.anyMapPointToSnappingPoint(E.leftEdge.leftVertex.pos,h,r);E=e.anyMapPointToSnappingPoint(E.rightEdge.rightVertex.pos,h,r);this._processCandidateProposal(G,E,v,r,y);return y};u._processCandidateProposal=function(v,r,y,E,G){if(this.exceedsShortLineThreshold(v,r,E)){var h=
N.lerp(p,v,r,.5),g=.5*N.distance(v,r),q=F.create();l.projectPointToCircle(q,y,h,g);q[2]=y[2];h=e.asSnappingPoint(q);var {spatialReference:O,pointer:C}=E;y=R.vectorToScreenPoint(y,O,D.absoluteHeightElevationInfo,this.view);d.squaredScreenDistance(y,R.vectorToScreenPoint(h,O,D.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(C)&&!this.isVertical(v,h)&&!this.isVertical(h,r)&&G.push(new z.RightAngleTriangleSnappingCandidate({targetPoint:h,point1:v,point2:r,isDraped:"on-the-ground"===
E.elevationInfo?.mode}))}};return t}(f.SnappingAlgorithm);const p=w.create();c.RightAngleTriangleSnapper=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../SnappingConstraint ../SnappingDomain ../SnappingPoint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R){d=function(l){function p({targetPoint:H,point1:t,point2:u,isDraped:v}){H=l.call(this,H,new F.VerticalCylinderConstraint(f.asSnappingPoint(N.lerp(w.create(),t,u,.5)),.5*k.distance(t,u)),v,D.SnappingDomain.SELF)||this;H._p1=t;H._p2=u;return H}A._inheritsLoose(p,l);A._createClass(p,[{key:"hints",get:function(){return[new z.LineSnappingHint(e.LineSegmentHintType.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new z.LineSnappingHint(e.LineSegmentHintType.REFERENCE,
this.targetPoint,this._p2,this.isDraped,this.domain),new R.RightAngleSnappingHint(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}]);return p}(d.SnappingCandidate);c.RightAngleTriangleSnappingCandidate=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),
function(c,A,k,N,w,F,D,f,e,d){k=function(z){function R(l){l=z.call(this,l)||this;l.enabled=!1;l.enabledToggled=!1;l.selfEnabled=!0;l.featureEnabled=!0;l.featureSources=new N;l.distance=d.defaults.distance;l.touchSensitivityMultiplier=d.defaults.touchSensitivityMultiplier;return l}c._inheritsLoose(R,z);c._createClass(R,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},
{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]);return R}(k);A.__decorate([w.property()],k.prototype,"enabled",void 0);A.__decorate([w.property()],k.prototype,"enabledToggled",void 0);A.__decorate([w.property()],k.prototype,"selfEnabled",void 0);A.__decorate([w.property()],k.prototype,"featureEnabled",void 0);A.__decorate([w.property({type:N.ofType(e)})],k.prototype,"featureSources",void 0);A.__decorate([w.property()],k.prototype,"distance",void 0);
A.__decorate([w.property()],k.prototype,"touchSensitivityMultiplier",void 0);A.__decorate([w.property({readOnly:!0})],k.prototype,"effectiveEnabled",null);A.__decorate([w.property({readOnly:!0})],k.prototype,"effectiveSelfEnabled",null);A.__decorate([w.property({readOnly:!0})],k.prototype,"effectiveFeatureEnabled",null);return k=A.__decorate([f.subclass("esri.views.interactive.snapping.SnappingOptions")],k)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,A,k,N,w,F,D){k=function(f){function e(d){d=f.call(this,d)||this;d.layer=null;d.enabled=!0;d.updating=!1;d.availability=1;return d}c._inheritsLoose(e,f);return e}(k);A.__decorate([N.property({constructOnly:!0})],k.prototype,"layer",void 0);A.__decorate([N.property()],k.prototype,"enabled",void 0);A.__decorate([N.property()],k.prototype,"updating",void 0);A.__decorate([N.property()],k.prototype,"availability",void 0);return k=A.__decorate([D.subclass("esri.views.interactive.snapping.FeatureSnappingLayerSource")],
k)})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../SnappingDomain ./SnappingCandidate ../hints/IntersectionSnappingHint".split(" "),function(c,A,k,N,w,F){w=function(D){function f(e,d,z,R){e=D.call(this,e,new k.IntersectionConstraint(e,d.constraint,z.constraint),R,N.SnappingDomain.ALL)||this;e.first=d;e.second=z;return e}A._inheritsLoose(f,D);A._createClass(f,[{key:"hints",
get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new F.IntersectionSnappingHint(this.targetPoint,this.isDraped,this.domain)]}}]);return f}(w.SnappingCandidate);c.IntersectionSnappingCandidate=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3",
"../SnappingDomain","./SnappingHint"],function(c,A,k,N,w){w=function(F){function D(f,e,d=N.SnappingDomain.ALL){e=F.call(this,e,d)||this;e.intersectionPoint=f;return e}A._inheritsLoose(D,F);D.prototype.equals=function(f){return f instanceof D?k.exactEquals(this.intersectionPoint,f.intersectionPoint):!1};return D}(w.SnappingHint);c.IntersectionSnappingHint=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe"],function(c,A,k){function N(){N=A._asyncToGenerator(function*(F,D){if("2d"===F.type)return F.hitTest(D);F=yield F.hitTest(D);if(0===F.results.length)return F;const f=1.05*(k.unwrap(F.results[0].distance)??0);D=F.results.findIndex(e=>(e.distance??0)>f);-1!==D&&(F.results=F.results.slice(0,D));return F});return N.apply(this,arguments)}function w(F){return k.isSome(F)&&"graphic"===F.type}c.filterGraphicHits=function(F){return F.filter(w)};c.findFirstGraphicHit=function(F){return F.find(w)??
null};c.hitTestSelectSimilarDistance=function(F,D){return N.apply(this,arguments)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,A,k,N,w,F,D,f,e){c.OperationHandle=function(d){function z(l){l=d.call(this,l)||this;l.cancelled=!1;l.history={undo:[],redo:[]};l.type=null;return l}A._inheritsLoose(z,d);var R=z.prototype;R.addToHistory=function(l){this.history.redo=[];this.history.undo.push(l)};R.resetHistory=function(){this.history.redo=[];this.history.undo=[]};R.canUndo=function(){return 0<this.history.undo.length};R.canRedo=function(){return 0<this.history.redo.length};R.complete=function(){this._reset();this.onEnd();
this.emit("complete")};R.cancel=function(){this.cancelled=!0;this.complete()};R._reset=function(){this.activeComponent?.reset()};R.refreshComponent=function(){const l=this.activeComponent;l&&("box"!==l.type&&"reshape"!==l.type&&"graphic-mover"!==l.type||l.refresh())};A._createClass(z,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:N.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(l){this._set("undo",()=>{this.canUndo()&&l()})}},{key:"redo",set:function(l){this._set("redo",()=>{this.canRedo()&&l()})}}]);return z}(w.EventedAccessor);k.__decorate([F.property()],c.OperationHandle.prototype,"activeComponent",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"cancelled",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,
"history",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"tool",null);k.__decorate([F.property()],c.OperationHandle.prototype,"type",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"canUndo",null);k.__decorate([F.property()],c.OperationHandle.prototype,"canRedo",null);k.__decorate([F.property()],c.OperationHandle.prototype,"onEnd",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"undo",null);k.__decorate([F.property()],c.OperationHandle.prototype,"redo",
null);k.__decorate([F.property()],c.OperationHandle.prototype,"toggleTool",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"addToSelection",void 0);k.__decorate([F.property()],c.OperationHandle.prototype,"removeFromSelection",void 0);c.OperationHandle=k.__decorate([e.subclass("esri.widgets.Sketch.support.OperationHandle")],c.OperationHandle);c.CreateOperationHandle=function(d){function z(){return d.apply(this,arguments)||this}A._inheritsLoose(z,d);return z}(c.OperationHandle);k.__decorate([F.property()],
c.CreateOperationHandle.prototype,"activeComponent",void 0);c.CreateOperationHandle=k.__decorate([e.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],c.CreateOperationHandle);c.UpdateOperationHandle=function(d){function z(){return d.apply(this,arguments)||this}A._inheritsLoose(z,d);return z}(c.OperationHandle);k.__decorate([F.property()],c.UpdateOperationHandle.prototype,"activeComponent",void 0);c.UpdateOperationHandle=k.__decorate([e.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
c.UpdateOperationHandle);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SelectionToolbar":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SelectionToolbar/SelectionToolbarViewModel".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){const H={lassoTool:!0,rectangleTool:!0},t={createTool:"polygon",createOptions:{mode:"freehand"}},u={createTool:"rectangle"};f=function(v){function r(E,G){var h=v.call(this,E,G)||this;h._viewModelHandlesGroup=null;h.activeToolInfo=null;h.messages=null;h.toolConfigs=[];h.viewModel=new p;h.visibleElements={...H};h._viewModelHandlesGroup=N.handlesGroup([h.viewModel.on("selection-change",g=>h.emit("selection-change",g)),h.viewModel.on("complete",g=>{h._set("activeToolInfo",
null);h.emit("complete",g)})]);return h}A._inheritsLoose(r,v);var y=r.prototype;y.destroy=function(){this._viewModelHandlesGroup=w.removeMaybe(this._viewModelHandlesGroup)};y.loadDependencies=function(){return Promise.all([new Promise((E,G)=>c(["../../chunks/calcite-action"],E,G)),new Promise((E,G)=>c(["../../chunks/calcite-icon"],E,G))])};y.castVisibleElements=function(E){return{...H,...E}};y.activate=function(E){this.cancel();switch(E){case "lasso":this._activateTool("lasso");break;case "rectangle":this._activateTool("rectangle");
break;default:this._activateTool(E)}};y.cancel=function(){this.viewModel.cancel();this._set("activeToolInfo",null)};y.render=function(){return l.tsx("div",{"aria-label":this.label,class:this.classes("esri-selection-toolbar","esri-widget")},l.tsx("div",{class:"esri-selection-toolbar__container"},this.renderDefaultTools(),this.renderCustomTools()))};y.renderDefaultTools=function(){if("2d"===this.view?.type)return[this.renderRectangleTool(),this.renderLassoTool()]};y.renderCustomTools=function(){if(this.toolConfigs&&
this.toolConfigs.length)return this.toolConfigs.map(E=>l.tsx("calcite-action",{active:this.activeToolInfo?.toolName===E.toolName,bind:this,class:"esri-selection-toolbar__tool-button",label:E.toolName,onclick:()=>this._onCustomToolClick(E.toolName),scale:"s",text:E.toolName,title:E.toolName},l.tsx("calcite-icon",{scale:"s",icon:E.icon||"selection"})))};y.renderLassoTool=function(){const {activeToolInfo:E,messages:G,visibleElements:h}=this;if(h.lassoTool)return l.tsx("calcite-action",{active:"lasso"===
E?.toolName,bind:this,label:G.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:G.selectByLasso,title:G.selectByLasso},l.tsx("calcite-icon",{scale:"s",icon:"lasso-select"}))};y.renderRectangleTool=function(){const {activeToolInfo:E,messages:G,visibleElements:h}=this;if(h.rectangleTool)return l.tsx("calcite-action",{active:"rectangle"===E?.toolName,bind:this,label:G.selectByRectangle,onclick:this._onRectangleToolClick,scale:"s",text:G.selectByRectangle,title:G.selectByRectangle},l.tsx("calcite-icon",
{scale:"s",icon:"cursor-marquee"}))};y._onCustomToolClick=function(E){this._toggleTool(E)};y._onLassoToolClick=function(){this._toggleTool("lasso")};y._onRectangleToolClick=function(){this._toggleTool("rectangle")};y._activateTool=function(E){var G=this._getToolOptions(E);G&&(G=this.viewModel.activate(G))&&this._set("activeToolInfo",{toolName:E,operation:G})};y._toggleTool=function(E){if(this.activeToolInfo){const G=this.activeToolInfo.toolName;this.cancel();if(G===E)return}this._activateTool(E)};
y._getToolOptions=function(E){if("lasso"===E)return t;if("rectangle"===E)return u;const G=this.toolConfigs.find(O=>O.toolName===E);if(G){var {createTool:h,createOptions:g,selectionOptions:q}=G;return{createTool:h,createOptions:g,selectionOptions:q}}};A._createClass(r,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(E){this._overrideIfSome("label",E)}},{key:"layers",get:function(){return this.viewModel.layers},set:function(E){this.viewModel.layers=E}},{key:"view",get:function(){return this.viewModel.view},
set:function(E){this.viewModel.view=E}}]);return r}(d);k.__decorate([F.property({readOnly:!0})],f.prototype,"activeToolInfo",void 0);k.__decorate([F.property()],f.prototype,"label",null);k.__decorate([F.property()],f.prototype,"layers",null);k.__decorate([F.property(),R.messageBundle("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],f.prototype,"messages",void 0);k.__decorate([F.property()],f.prototype,"toolConfigs",void 0);k.__decorate([F.property()],f.prototype,"view",null);k.__decorate([F.property()],
f.prototype,"viewModel",void 0);k.__decorate([F.property()],f.prototype,"visibleElements",void 0);k.__decorate([D.cast("visibleElements")],f.prototype,"castVisibleElements",null);return f=k.__decorate([e.subclass("esri.widgets.support.SelectionToolbar")],f)})},"esri/widgets/support/SelectionToolbar/SelectionToolbarViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),
function(c,A,k,N,w,F,D,f,e,d){k=function(z){function R(p){p=z.call(this,p)||this;p._operationHandlesGroup=null;p.activeOperation=null;p.layers=null;p.selector=new d;return p}c._inheritsLoose(R,z);var l=R.prototype;l.destroy=function(){this._operationHandlesGroup=w.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};l.cancel=function(){"active"===this.state&&(this.activeOperation?.cancel(),this.activeOperation=null);this.selector.candidates=null};l.activate=function(p){const {state:H}=
this;if("disabled"!==H)return"active"===H&&this.cancel(),this.selector.candidates=this._candidates,p=this.selector.draw(p),this._operationHandlesGroup=N.handlesGroup([p.once("complete",t=>this._onOperationComplete(t)),p.on("selection-change",t=>this._onOperationSelectionChange(t))]),this.activeOperation=p};l._onOperationSelectionChange=function(p){this.emit("selection-change",p)};l._onOperationComplete=function(p){this._operationHandlesGroup=w.removeMaybe(this._operationHandlesGroup);this.activeOperation=
null;this.emit("complete",p)};c._createClass(R,[{key:"_candidates",get:function(){return this.layers?.flatMap(p=>p.graphics.toArray())??[]}},{key:"state",get:function(){return this.activeOperation?"active":this.view?.ready&&this.layers?.length?"ready":"disabled"}},{key:"view",set:function(p){this.selector.view=p;this._set("view",p)}}]);return R}(k.EventedAccessor);A.__decorate([F.property()],k.prototype,"_candidates",null);A.__decorate([F.property()],k.prototype,"activeOperation",void 0);A.__decorate([F.property()],
k.prototype,"layers",void 0);A.__decorate([F.property({readOnly:!0})],k.prototype,"selector",void 0);A.__decorate([F.property({readOnly:!0})],k.prototype,"state",null);A.__decorate([F.property()],k.prototype,"view",null);return k=A.__decorate([e.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],k)})},"esri/widgets/support/Selector2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./Selector2D/SelectionOperation2D ./Selector2D/selectorUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z){k=function(R){function l(H){H=R.call(this,H)||this;H._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};H.candidates=null;H.options=null;H.view=null;return H}c._inheritsLoose(l,R);var p=l.prototype;p.draw=function(H){const {_defaultSelectionOptions:t,candidates:u,options:v,view:r}=this;return new d({candidates:u,options:{...H,selectionOptions:{...t,...v,...H?.selectionOptions}},view:r})};p.selectionFrom=function(){var H=c._asyncToGenerator(function*(t,
u){const {_defaultSelectionOptions:v,candidates:r,options:y,view:E}=this,G=new N;yield z.updateSelection({selector:t,candidates:r,currentSelection:G,options:{...v,...y,...u},view:E});return G.toArray()});return function(t,u){return H.apply(this,arguments)}}();return l}(w.HandleOwnerMixin(k));A.__decorate([F.property()],k.prototype,"candidates",void 0);A.__decorate([F.property()],k.prototype,"options",void 0);A.__decorate([F.property({value:null})],k.prototype,"view",void 0);return k=A.__decorate([e.subclass("esri.widgets.support.Selector2D")],
k)})},"esri/widgets/support/Selector2D/SelectionOperation2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u){k=function(v){function r({candidates:E,options:G,view:h}){var g=v.call(this)||this;g._activeOptions=null;g._dashedFillSymbol=new H({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});g._dashedLineSymbol=new t({style:"dash",color:[12,207,255],width:2});g._defaultOptions={createTool:"rectangle",createOptions:void 0,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};g._completed=!1;g._handles=new F;g._sketchViewModel=new l;g._sketchGraphicsLayer=
new R({listMode:"hide",internal:!0});g._transparentPointSymbol=new u({color:[0,0,0,0],outline:{style:"none",width:0}});g.candidates=null;g.geometry=null;g.options=null;g.selection=new N;g.view=null;g.candidates=E;g.options=G;g.view=h;const {_dashedFillSymbol:q,_dashedLineSymbol:O,_sketchViewModel:C,_sketchGraphicsLayer:B,_transparentPointSymbol:J}=c._assertThisInitialized(g);C.set({layer:B,view:g.view,activePointSymbol:J,activeLineSymbol:O,activeVertexSymbol:J,activeFillSymbol:q,pointSymbol:J,polygonSymbol:q,
polylineSymbol:O,vertexSymbol:J});g._handles.add([C.on("create",K=>g._onSketchEvent(K)),C.on(["undo","redo"],K=>g._onSketchEvent(K))]);return g}c._inheritsLoose(r,v);var y=r.prototype;y.initialize=function(){this._load()};y.destroy=function(){this._handles=D.destroyMaybe(this._handles)};y.cancel=function(){return this._sketchViewModel.cancel()};y._load=function(){var E=c._asyncToGenerator(function*(){yield this.view?.whenReady();const {options:G}=this,{createTool:h,createOptions:g}=this._activeOptions=
{...this._defaultOptions,...G};this._sketchViewModel.create(h,g)});return function(){return E.apply(this,arguments)}}();y._onSketchEvent=function(E){this._processSelectionGeometry(("create"===E.type?E.graphic:E.graphics[0])?.geometry||null,"create"===E.type&&"complete"===E.state,"create"===E.type&&"cancel"===E.state)};y._processSelectionGeometry=function(E,G,h){this._set("geometry",E);if(G||h)this._completed=!0;if(h)this._onComplete([],!0);else{var {_activeOptions:g,candidates:q,selection:O,view:C}=
this;p.updateSelection({selector:E,candidates:q,currentSelection:O,options:g.selectionOptions,view:C}).then(({added:B,removed:J})=>{G?this._onComplete(this.selection.toArray(),!1):(B.length||J.length)&&this.emit("selection-change",{added:B,removed:J,type:"selection-change"})})}};y._onComplete=function(E,G){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:G,selection:E,type:"complete"})};c._createClass(r,[{key:"state",get:function(){const {_completed:E,_sketchViewModel:{state:G}}=
this;return E?"complete":"active"===G?"active":"disabled"}}]);return r}(w.EventedAccessor);A.__decorate([f.property()],k.prototype,"_completed",void 0);A.__decorate([f.property()],k.prototype,"candidates",void 0);A.__decorate([f.property({readOnly:!0})],k.prototype,"geometry",void 0);A.__decorate([f.property()],k.prototype,"options",void 0);A.__decorate([f.property({readOnly:!0})],k.prototype,"selection",void 0);A.__decorate([f.property({readOnly:!0})],k.prototype,"state",null);A.__decorate([f.property({value:null})],
k.prototype,"view",void 0);return k=A.__decorate([z.subclass("esri.widgets.support.Selector2D.SelectionOperation2D")],k)})},"esri/widgets/support/Selector2D/selectorUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers"],function(c,A,k){function N(){return w.apply(this,arguments)}function w(){w=k._asyncToGenerator(function*(){return new Promise((e,d)=>c(["../../../geometry/geometryEngineJSON"],e,d))});return w.apply(this,arguments)}function F(){return D.apply(this,
arguments)}function D(){D=k._asyncToGenerator(function*(){return N().then(({contains:e,intersects:d,overlaps:z,simplify:R})=>({contains:e,intersects:d,overlaps:z,simplify:R}))});return D.apply(this,arguments)}function f(){f=k._asyncToGenerator(function*(e){const {selector:d,candidates:z,currentSelection:R,options:l,view:p}=e;if(!(z&&z.length&&R&&p&&l))return{added:[],removed:[]};const {overlaps:H,intersects:t,contains:u}=l,{spatialReference:v}=p;if(!d)return{added:[],removed:R.removeAll()};const r=
yield F(),y=[],E=[];z.forEach(G=>{var h=G.geometry;const g=H&&!!r.overlaps(v,d,h),q=t&&!!r.intersects(v,d,h);h=u&&!!r.contains(v,d,h);const O=R.includes(G);g||q||h?!O&&y.push(G):O&&E.push(G)});R.removeMany(E);R.addMany(y);return{added:y,removed:E}});return f.apply(this,arguments)}A.getGeometryEngineOperations=F;A.importGeometryEngine=N;A.updateSelection=function(e){return f.apply(this,arguments)};Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/uid ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){const H={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};f=function(t){function u(r,y){var E=t.call;const {view:G,viewModel:h,snappingOptions:g,...q}=r;y=E.call(t,this,q,y)||this;y._layerListFilter=null;y.iconClass="esri-icon-vertex-gps";y.layerListOpen=!0;y.messages=null;y.visibleElements={...H};y._defaultViewModel=null;r?.viewModel?y.viewModel=r.viewModel:(y._defaultViewModel=new p({snappingOptions:r.snappingOptions,view:r.view}),
y.viewModel=y._defaultViewModel);return y}A._inheritsLoose(u,t);var v=u.prototype;v.destroy=function(){this._defaultViewModel=N.destroyMaybe(this._defaultViewModel)};v.loadDependencies=function(){return Promise.all([new Promise((r,y)=>c(["../../chunks/calcite-accordion"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-accordion-item"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-block"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-checkbox"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-input"],
r,y)),new Promise((r,y)=>c(["../../chunks/calcite-label"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-list"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-list-item"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-panel"],r,y)),new Promise((r,y)=>c(["../../chunks/calcite-switch"],r,y))])};v.castVisibleElements=function(r){return{...H,...r}};v.render=function(){const {label:r,visibleElements:{header:y}}=this;return l.tsx("div",{"aria-label":r,class:this.classes("esri-snapping-controls",
"esri-widget")},l.tsx("div",{class:"esri-snapping-controls__container"},y?this.renderHeaderView():this.renderContent()))};v.renderHeaderView=function(){return l.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};v.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};v.renderToggles=function(){const {visibleElements:{enabledToggle:r,selfEnabledToggle:y,featureEnabledToggle:E}}=this;return r||y||E?l.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",
key:"toggle-block",heading:"",open:!0},this.renderEnabledToggle(),l.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle())):null};v.renderEnabledToggle=function(){if(!this.visibleElements.enabledToggle)return null;const {messages:{enableSnapping:r},viewModel:{snappingOptions:{enabled:y,enabledToggled:E}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between"},r,l.tsx("calcite-switch",{checked:y,disabled:E,bind:this,
onCalciteSwitchChange:this._enableSnappingSwitchChange}))};v.renderSelfEnabledToggle=function(){if(!this.visibleElements.selfEnabledToggle)return null;const {messages:{geometryGuides:r},viewModel:{snappingOptions:{enabled:y,selfEnabled:E,enabledToggled:G}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between",key:"self-enabled-toggle"},r,l.tsx("calcite-switch",{checked:E,disabled:G||!y,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))};v.renderFeatureEnabledToggle=function(){if(!this.visibleElements.featureEnabledToggle)return null;
const {messages:{featureToFeature:r},viewModel:{snappingOptions:{enabled:y,featureEnabled:E,enabledToggled:G}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between",key:"feature-enabled-toggle"},r,l.tsx("calcite-switch",{checked:E,disabled:G||!y,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))};v.renderLayerList=function(){if(!this.visibleElements.layerList)return null;const {messages:r}=this;var y=({target:{value:E}})=>this._layerListFilter=""===E?null:new RegExp(E,
"i");y=9<this.viewModel.layerListViewModel.operationalItems.length?l.tsx("calcite-input",{class:"esri-snapping-controls__layer-list__filter",clearable:!0,placeholder:r?.searchLayers,onCalciteInputInput:y}):null;return l.tsx("calcite-block",{key:"list-block",heading:r.snappingLayers,class:"esri-snapping-controls__layer-list-block",collapsible:!0,open:this.layerListOpen,onCalciteBlockToggle:E=>this.layerListOpen=E.target.open},y,l.tsx("calcite-list",{class:"esri-snapping-controls__layer-list"},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,
N.unwrap(this._layerListFilter))))};v.renderLayerListItemCollection=function(r,y){return r.map(E=>{if(y?this._itemTitleMatchesFilter(E,y):1)return 0<E.children.length?this.renderLayerListItemGroup(E):this.renderLayerListItem(E);const G=E.children.filter(h=>this._itemTitleMatchesFilter(h,y));return 0<G.length?this.renderLayerListItemGroup(E,G):null}).toArray().filter(N.isSome)};v.renderLayerListItem=function(r){var {messages:{untitledLayer:y}}=this;y=r.title||y;const E=l.tsx("calcite-checkbox",{value:r.layer.id,
checked:r.enabled,bind:this,onCalciteCheckboxChange:G=>this._handleLayerListItemChange(G.target)});return l.tsx("calcite-list-item",{key:`${this.id}-list-item-${r.uid}`,onCalciteListItemSelect:()=>{this._handleLayerListItemChange({checked:!E.properties.checked,value:E.properties.value})}},l.tsx("calcite-label",{class:"esri-snapping-controls__layer-list__item",slot:"content-start",tabIndex:-1,layout:"inline"},l.tsx("div",{class:"esri-snapping-controls__layer-list__item__checkbox"},E),l.tsx("div",{class:"esri-snapping-controls__layer-list__item__label"},
y)))};v.renderLayerListItemGroup=function(r,y){const E=r.title||this.messages.untitledLayer,G=r.title&&""!==r.title?r.title:w.generateUID();return l.tsx("calcite-list-item",{key:G},l.tsx("calcite-accordion",{iconPosition:"start",appearance:"transparent",afterCreate:h=>{h.append(...Array.from(h.children).map(g=>{g.remove();return g}))}},l.tsx("calcite-accordion-item",{expanded:!!y,heading:E,key:r.uid},l.tsx("calcite-list",null,[...this.renderLayerListItemCollection(y??r.children)]))))};v._enableSnappingSwitchChange=
function(r){this.snappingOptions.enabled=r.target.checked};v._featureEnabledSwitchChange=function(r){this.snappingOptions.featureEnabled=r.target.checked};v._itemTitleMatchesFilter=function(r,y){return null!=y&&y.test(r.title)};v._selfEnabledSwitchChange=function(r){this.snappingOptions.selfEnabled=r.target.checked};v._handleLayerListItemChange=function(){var r=A._asyncToGenerator(function*(y){y.checked?this.viewModel.enableSnappingForLayer(y.value):this.viewModel.disableSnappingForLayer(y.value)});
return function(y){return r.apply(this,arguments)}}();A._createClass(u,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(r){this._overrideIfSome("label",r)}},{key:"snappingOptions",get:function(){return this.viewModel.snappingOptions},set:function(r){this.viewModel.snappingOptions=r}},{key:"view",get:function(){return this.viewModel.view},set:function(r){this.viewModel.view=r}},{key:"viewModel",set:function(r){if(r!==this._get("viewModel")){if(N.isNone(this._defaultViewModel)||
this._defaultViewModel!==r)this._defaultViewModel=N.destroyMaybe(this._defaultViewModel);this._set("viewModel",r)}}}]);return u}(d);k.__decorate([F.property()],f.prototype,"_layerListFilter",void 0);k.__decorate([F.property()],f.prototype,"iconClass",void 0);k.__decorate([F.property()],f.prototype,"label",null);k.__decorate([F.property()],f.prototype,"layerListOpen",void 0);k.__decorate([F.property(),R.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],f.prototype,"messages",
void 0);k.__decorate([F.property()],f.prototype,"snappingOptions",null);k.__decorate([F.property()],f.prototype,"view",null);k.__decorate([F.property()],f.prototype,"viewModel",null);k.__decorate([F.property()],f.prototype,"visibleElements",void 0);k.__decorate([D.cast("visibleElements")],f.prototype,"castVisibleElements",null);return f=k.__decorate([e.subclass("esri.widgets.support.SnappingControls")],f)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l){k=function(p){function H(u){u=p.call(this,u)||this;u.layerListViewModel=new l.SnappingLayerListViewModel;u.snappingOptions=null;u.view=null;return u}c._inheritsLoose(H,p);var t=H.prototype;t.initialize=function(){this.handles.add([F.watch(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:u,view:v})=>{u.view=v},F.initial),F.watch(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:u,sources:v})=>{u.featureSnappingSources=
v},F.initial)])};t.enableSnappingForLayer=function(u){(this._findSnappingSourceForLayer(u)??this._makeSnappingSourceForLayer(u)).enabled=!0};t.disableSnappingForLayer=function(u){if(u=this._findSnappingSourceForLayer(u))u.enabled=!1};t.updateEnabledFeatureSources=function(u){for(const v of this.snappingOptions.featureSources)R.canDisplayLayer(v.layer)&&(v.enabled=u.includes(v.layer.id))};t._findSnappingSourceForLayer=function(u){return this.snappingOptions.featureSources.find(v=>v.layer.id===u)};
t._makeSnappingSourceForLayer=function(u){var v=this.layerListViewModel.operationalItemsFlat.find(r=>r.layer.id===u)?.layer;if(!v)throw new N("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${u} because no such layer was found in the view`);v=new z({layer:v});this.snappingOptions.featureSources.add(v);return v};c._createClass(H,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return H}(w.HandleOwnerMixin(k));A.__decorate([D.property({constructOnly:!0})],
k.prototype,"layerListViewModel",void 0);A.__decorate([D.property()],k.prototype,"snappingOptions",void 0);A.__decorate([D.property()],k.prototype,"state",null);A.__decorate([D.property()],k.prototype,"view",void 0);return k=A.__decorate([d.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],k)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(c){function A(e){if(e)return null!=e.listMode?e.listMode:void 0}function k(e){if(e)return null!=
e.minScale?e.minScale:void 0}function N(e){if(e)return null!=e.maxScale?e.maxScale:void 0}function w(e){if(e&&!("type"in e&&"wmts"===e.type)&&e.listMode!==f.hideChildren)return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function F(e,d){e&&e.sort((z,R)=>{z=d.indexOf(z.uid);R=d.indexOf(R.uid);return z>R?-1:z<R?1:0})}function D(e){return!!e?.layer}const f={hide:"hide",hideChildren:"hide-children"};c.canDisplayLayer=function(e){return A(e)!==f.hide};c.canSortSublayers=function(e){e=e&&(e.get("layer.layer")||
e.layer);if(!e)return!1;e=e.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof e?e:!0};c.findLayerListMode=A;c.findLayerMaxScale=N;c.findLayerMinScale=k;c.findLayerVisibilityMode=function(e){if(!e)return"inherited";var d=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof d)return d?"independent":"inherited";d=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof d?d?"independent":"inherited":null!=e.visibilityMode?
e.visibilityMode:"independent"};c.findSelectedItem=function(e,d){const z=e.layer?.uid;return z&&d.find(R=>R.layer?.uid===z)};c.getItemLayers=function(e){return(e=e?.layer)&&"layers"in e?e.layers:null};c.getLegendLayerInfo=function(e){var d=D(e)?e:null;const z=e?.parent;return(d="map-image"===z?.type&&d.source)&&z?{layer:z,title:"",sublayerIds:[d.mapLayerId]}:{layer:e,title:""}};c.getNormalizedChildLayerProperty=w;c.isLayerOutsideScaleRange=function(e,d){if(!e||isNaN(d))return!1;var z=k(e);e=N(e);
z=!isNaN(z)&&0<z&&d>z;d=!isNaN(e)&&0<e&&d<e;return z||d};c.isSublayer=D;c.sortChildLayersToIds=function(e,d){if(e=e?.layer){var z=w(e);z&&(e=e.get(z),F(e,d))}};c.sortLayersToIds=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z){c.SnappingLayerListViewModel=function(R){function l(){var H=R.apply(this,arguments)||this;H.featureSnappingSources=new N;return H}A._inheritsLoose(l,R);var p=l.prototype;p._compileList=function(){var H=this.get("view.map.layers");H&&(H=H.filter(d.isValidSnappingLayer),this._watchLayersListMode(H),(H=this._getViewableLayers(H))&&H.length?(this._createNewItems(H),this._removeItems(H),this._sortItems(H)):this._removeAllItems())};p._createListItem=function(H){return new z.SnappingListItem({layer:H,
view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})};A._createClass(l,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(H=>H.children)}}]);return l}(e);k.__decorate([w.property()],c.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);k.__decorate([w.property()],c.SnappingLayerListViewModel.prototype,"operationalItems",void 0);c.SnappingLayerListViewModel=k.__decorate([f.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],
c.SnappingLayerListViewModel);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R){const l=k.ofType(z);k=function(p){function H(u){u=p.call(this,u)||this;u._handles=new w;u.checkPublishStatusEnabled=!1;u.listItemCreatedFunction=null;u.operationalItems=new l;u.view=null;return u}c._inheritsLoose(H,p);var t=H.prototype;t.initialize=function(){this._handles.add([F.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),F.initial),F.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")};t.destroy=
function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};t.triggerAction=function(u,v){u&&!u.disabled&&this.emit("trigger-action",{action:u,item:v})};t.moveListItem=function(u,v,r,y){const E=u?.layer;if(E){var G=this.view?.map?.layers,h=v?R.getItemLayers(v):G;G=r?R.getItemLayers(r):G;if(h&&G){var {operationalItems:g}=this;v=v?.children||g;g=r?.children||g;y=G.length-y;u.parent=r||null;v.includes(u)&&v.remove(u);h.includes(E)&&h.remove(E);g.includes(u)||g.add(u,
y);G.includes(E)||G.add(E,y)}}};t._createLayerViewHandles=function(u){const {_handles:v}=this;v.remove("layer-views");this._compileList();u&&v.add(u.on("change",()=>this._compileList()),"layer-views")};t._createMapLayerHandles=function(u){const {_handles:v}=this;v.remove("map-layers");this._compileList();u&&v.add(u.on("change",()=>this._compileList()),"map-layers")};t._createListItem=function(u){const {view:v,listItemCreatedFunction:r,checkPublishStatusEnabled:y}=this;return new z({checkPublishStatusEnabled:y,
layer:u,listItemCreatedFunction:r,view:v})};t._removeAllItems=function(){const {_handles:u,operationalItems:v}=this;v.forEach(r=>{u.remove(`${"children"}-${r.uid}`)});v.removeAll()};t._getViewableLayers=function(u){if(u)return u.filter(v=>"hide"!==R.findLayerListMode(v))};t._watchLayersListMode=function(u){const {_handles:v}=this;v.remove("layer-list-mode");u&&u.forEach(r=>{"listMode"in r&&v.add(F.watch(()=>r.listMode,()=>this._compileList()),"layer-list-mode")})};t._compileList=function(){var u=
this.get("view.map.layers");this._watchLayersListMode(u);(u=this._getViewableLayers(u))&&u.length?(this._createNewItems(u),this._removeItems(u),this._sortItems(u)):this._removeAllItems()};t._createNewItems=function(u){const {operationalItems:v}=this;u.forEach(r=>{v.find(y=>y.layer===r)||v.add(this._createListItem(r))})};t._removeItems=function(u){const {_handles:v,operationalItems:r}=this,y=[];r.forEach(E=>{E&&u&&u.includes(E.layer)||(v.remove(`${"children"}-${E.uid}`),y.push(E))});r.removeMany(y)};
t._sortItems=function(u){const {operationalItems:v}=this;v.sort((r,y)=>{r=u.indexOf(r.layer);y=u.indexOf(y.layer);return r>y?-1:r<y?1:0})};t._recompileList=function(){this._removeAllItems();this._compileList()};t._viewHandles=function(){const {_handles:u,view:v}=this;u.remove(["map-layers","layer-views","view-layers"]);this._compileList();v&&v.ready&&u.add([F.watch(()=>this.view?.map?.allLayers,r=>this._createMapLayerHandles(r),F.initial),F.watch(()=>this.view?.allLayerViews,r=>this._createLayerViewHandles(r),
F.initial)],"view-layers")};c._createClass(H,[{key:"state",get:function(){const u=this.get("view");return this.get("view.ready")?"ready":u?"loading":"disabled"}}]);return H}(N.EventedAccessor);A.__decorate([D.property()],k.prototype,"checkPublishStatusEnabled",void 0);A.__decorate([D.property()],k.prototype,"listItemCreatedFunction",void 0);A.__decorate([D.property({type:l})],k.prototype,"operationalItems",void 0);A.__decorate([D.property({readOnly:!0})],k.prototype,"state",null);A.__decorate([D.property()],
k.prototype,"view",void 0);return k=A.__decorate([d.subclass("esri.widgets.LayerList.LayerListViewModel")],k)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u,v){var r;z=N.ofType({key:"type",defaultKeyValue:"button",base:l,typeMap:{button:p,toggle:t,slider:H}});const y=N.ofType(z);k=r=function(E){function G(g){g=E.call(this,g)||this;g.actionsSections=new y;g.actionsOpen=!1;g.checkPublishStatusEnabled=!1;g.children=new (N.ofType(r));g.childrenSortable=!0;g.hidden=!1;g.layer=null;g.layerView=null;g.listItemCreatedFunction=null;g.open=!1;g.panel=null;g.parent=null;g.sortable=!0;g.view=null;return g}c._inheritsLoose(G,
E);var h=G.prototype;h.initialize=function(){this.handles.add([f.watch(()=>this.layer,g=>this._watchLayerProperties(g),f.initial),f.watch(()=>this.checkPublishStatusEnabled,g=>this._updateChildrenPublishing(g),f.initial),f.watch(()=>this.view,g=>this._updateChildrenView(g),f.initial),f.watch(()=>this.panel,g=>this._setListItemOnPanel(g),f.initial),f.watch(()=>[this.layer,this.view],()=>this._getLayerView(),f.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})};h.destroy=function(){this.view=null};h.castPanel=function(g){this.get("panel.open")&&!g.hasOwnProperty("open")&&(g.open=!0);return g?new u(g):null};h.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};
h._setListItemOnPanel=function(g){g&&(g.listItem=this)};h._updateChildrenPublishing=function(g){const q=this.children;q&&q.forEach(O=>O.checkPublishStatusEnabled=g)};h._updateChildrenView=function(g){const q=this.children;q&&q.forEach(O=>O.view=g)};h._addChildren=function(g){this.handles.remove("child-list-mode");this.children.removeAll();if(g){g.forEach(O=>{this.handles.add(f.watch(()=>O.listMode,()=>this._addChildren(g)),"child-list-mode")});var q=g.filter(O=>"hide"!==v.findLayerListMode(O));this.children.addMany(this._makeChildren(q))}};
h._watchSublayerChanges=function(g){g&&this.handles.add(g.on("change",()=>{this._addChildren(g)}),"layer")};h._initializeChildLayers=function(g){this._addChildren(g);this._watchSublayerChanges(g)};h._makeChildren=function(g){return g.map(q=>v.canDisplayLayer(q)?new r({layer:q,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(D.isSome).reverse()};h._watchLayerProperties=function(g){if(this.handles&&
(this.handles.remove("layer"),this.handles.remove("child-list-mode"),g))if(this.handles.add(f.watch(()=>g.listMode,()=>this._watchLayerProperties(g)),"layer"),"hide-children"===v.findLayerListMode(g))this.children.removeAll();else{var q=v.getNormalizedChildLayerProperty(g);q&&this.handles.add(f.watch(()=>g[q],()=>{g.hasOwnProperty(q)&&this._initializeChildLayers(g[q])},f.initial),"layer")}};h._getLayerView=function(){var g=c._asyncToGenerator(function*(){const {layer:q,view:O}=this;if(q&&O)try{const C=
yield O.whenLayerView(q);C.layer===this.layer&&this._set("layerView",C)}catch{}});return function(){return g.apply(this,arguments)}}();c._createClass(G,[{key:"connectionStatus",get:function(){const {layerView:g,publishing:q}=this;if(!q&&g&&"connectionStatus"in g)return g.connectionStatus}},{key:"error",get:function(){return this.layer?.loadError}},{key:"incompatible",get:function(){const {layerView:g}=this;return g&&"spatialReferenceSupported"in g?!g.spatialReferenceSupported:!1}},{key:"title",get:function(){const g=
this.get("layer.layer");return(!g||g&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(g){this._override("title",g)}},{key:"publishing",get:function(){const {layer:g,checkPublishStatusEnabled:q}=this;return q&&g&&"publishingInfo"in g&&"publishing"===g.publishingInfo?.status}},{key:"updating",get:function(){const {layerView:g,connectionStatus:q,layer:O,publishing:C}=this;return C||q?!1:g?g.updating:"loading"===O?.loadStatus||!1}},{key:"visible",
get:function(){return this.layer?.visible},set:function(g){const q=this.layer;q&&(q.visible=g)}},{key:"visibleAtCurrentScale",get:function(){return!v.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return v.findLayerVisibilityMode(this.layer)}}]);return G}(F.IdentifiableMixin(w.HandleOwnerMixin(k)));A.__decorate([e.property({type:y})],k.prototype,"actionsSections",void 0);A.__decorate([e.property()],k.prototype,"actionsOpen",void 0);A.__decorate([e.property()],
k.prototype,"checkPublishStatusEnabled",void 0);A.__decorate([e.property({type:N})],k.prototype,"children",void 0);A.__decorate([e.property()],k.prototype,"childrenSortable",void 0);A.__decorate([e.property({readOnly:!0})],k.prototype,"connectionStatus",null);A.__decorate([e.property({readOnly:!0})],k.prototype,"error",null);A.__decorate([e.property()],k.prototype,"hidden",void 0);A.__decorate([e.property({readOnly:!0})],k.prototype,"incompatible",null);A.__decorate([e.property()],k.prototype,"layer",
void 0);A.__decorate([e.property({readOnly:!0})],k.prototype,"layerView",void 0);A.__decorate([e.property()],k.prototype,"listItemCreatedFunction",void 0);A.__decorate([e.property()],k.prototype,"open",void 0);A.__decorate([e.property({type:u})],k.prototype,"panel",void 0);A.__decorate([d.cast("panel")],k.prototype,"castPanel",null);A.__decorate([e.property()],k.prototype,"parent",void 0);A.__decorate([e.property()],k.prototype,"sortable",void 0);A.__decorate([e.property()],k.prototype,"title",null);
A.__decorate([e.property({readOnly:!0})],k.prototype,"publishing",null);A.__decorate([e.property({readOnly:!0})],k.prototype,"updating",null);A.__decorate([e.property()],k.prototype,"view",void 0);A.__decorate([e.property()],k.prototype,"visible",null);A.__decorate([e.property({readOnly:!0})],k.prototype,"visibleAtCurrentScale",null);A.__decorate([e.property({readOnly:!0})],k.prototype,"visibilityMode",null);return k=r=A.__decorate([R.subclass("esri.widgets.LayerList.ListItem")],k)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(c,A,k,N,w,F,D){var f;N=f=function(e){function d(z){z=e.call(this,z)||this;z.displayValueEnabled=!1;z.max=1;z.min=0;z.step=.1;z.type="slider";z.value=null;return z}c._inheritsLoose(d,e);d.prototype.clone=function(){return new f({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return d}(D);A.__decorate([k.property()],
N.prototype,"displayValueEnabled",void 0);A.__decorate([k.property()],N.prototype,"max",void 0);A.__decorate([k.property()],N.prototype,"min",void 0);A.__decorate([k.property()],N.prototype,"step",void 0);A.__decorate([k.property()],N.prototype,"value",void 0);return N=f=A.__decorate([F.subclass("esri.support.Action.ActionSlider")],N)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R,l,p){w=function(H){function t(v,r){v=H.call(this,v,r)||this;v._legend=null;v._handles=new N;v.content=null;v.image=null;v.listItem=null;v.open=!1;v.visible=!0;return v}A._inheritsLoose(t,H);var u=t.prototype;u.initialize=function(){this.addHandles(F.watch(()=>this.content,v=>this._createLegend(v),F.initial))};u.destroy=function(){const {_legend:v}=this;v&&v.destroy();this._legend=null};u.render=function(){return p.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
u._renderContent=function(v){const {_legend:r,disabled:y}=this;return!v||y?null:"legend"===v&&r?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:r},r.render()):"string"===typeof v?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:v,innerHTML:v}):l.isWidget(v)?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:v},v.render()):
v instanceof HTMLElement?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:v,bind:v,afterCreate:this._attachToNode}):null};u._renderContents=function(){const {content:v}=this;return Array.isArray(v)?v.map(r=>this._renderContent(r)):this._renderContent(v)};u._getLegendOptions=function(){const {listItem:v}=this;if(!v)return{};const {layer:r,view:y}=v;return r&&y?{view:y,layerInfos:[R.getLegendLayerInfo(r)]}:{}};u._createLegend=function(v){this._hasLegend(v)&&
!this._legend&&(new Promise((r,y)=>c(["../Legend"],E=>r(Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}))),y))).then(({default:r})=>{const {_handles:y,listItem:E}=this,G=new r(this._getLegendOptions());this._legend=G;this.notifyChange("className");this.notifyChange("title");r=F.watch(()=>[E?.view,E?.layer,E?.layer?.source,E?.layer?.parent],()=>this._updateLegend(G),F.initial);y.add(r,"legends");this.scheduleRender()})};u._hasLegend=function(v){return"legend"===
v?!0:Array.isArray(v)?v.includes("legend"):!1};u._attachToNode=function(v){v.appendChild(this)};u._updateLegend=function(v){v.set(this._getLegendOptions());this.scheduleRender()};u._getWidget=function(v){return"legend"===v?this._legend:l.isWidget(v)?v:null};u._getFirstWidget=function(){const {content:v}=this;if(Array.isArray(v)){let r=null;v.some(y=>{(y=this._getWidget(y))&&(r=y);return!!y});return r}return this._getWidget(v)};A._createClass(t,[{key:"className",get:function(){const {image:v}=this,
r=this._getFirstWidget();return this._get("className")||!v&&r?r.iconClass:""},set:function(v){this._override("className",v)}},{key:"disabled",get:function(){const {listItem:v,_legend:r,content:y}=this;return v?Array.isArray(y)&&1<y.length?!1:r?!r.activeLayerInfos?.length||!v.visibleAtCurrentScale:!1:!0},set:function(v){this._overrideIfSome("disabled",v)}},{key:"title",get:function(){const v=this._getFirstWidget();return this._get("title")||v?v.label:""},set:function(v){this._override("title",v)}}]);
return t}(w.IdentifiableMixin(z));k.__decorate([D.property()],w.prototype,"_legend",void 0);k.__decorate([D.property()],w.prototype,"className",null);k.__decorate([D.property()],w.prototype,"content",void 0);k.__decorate([D.property()],w.prototype,"disabled",null);k.__decorate([D.property()],w.prototype,"image",void 0);k.__decorate([D.property()],w.prototype,"listItem",void 0);k.__decorate([D.property()],w.prototype,"title",null);k.__decorate([D.property()],w.prototype,"open",void 0);k.__decorate([D.property()],
w.prototype,"visible",void 0);return w=k.__decorate([d.subclass("esri.widgets.LayerList.ListItemPanel")],w)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],function(c,A,k){const N=D=>w(D)||F(D),w=D=>{if(!("type"in D))return!1;switch(D.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":case "map-notes":case "oriented-imagery":case "scene":case "building-scene":return!0;
default:return!1}},F=D=>{const f=k.getNormalizedChildLayerProperty(D);if(null!=f&&D.hasOwnProperty(f)&&A.isSome(D[f]))for(const e of D[f])if(N(e))return!0;return!1};c.isValidSnappingLayer=N;c.isValidSnappingLayerGroup=F;c.isValidSnappingLayerSource=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(c,A,k,N,w,F,D,f,e,d,z,R){var l;c.SnappingListItem=l=function(p){function H(u){u=p.call(this,u)||this;u.children=new N;u.parent=null;return u}A._inheritsLoose(H,p);var t=H.prototype;t._initializeChildLayers=function(u){u&&(u=u.filter(R.isValidSnappingLayer),p.prototype._initializeChildLayers.call(this,u))};t._makeChildren=function(u){return u.map(v=>z.canDisplayLayer(v)?new l({layer:v,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(w.isSome).reverse()};
A._createClass(H,[{key:"enabled",get:function(){return w.isSome(this.featureSource)?this.featureSource.enabled:!1}},{key:"featureSource",get:function(){const {layer:u,getFeatureSnappingSources:v}=this;return v().find(r=>r.layer===u)}}]);return H}(d);k.__decorate([F.property()],c.SnappingListItem.prototype,"children",void 0);k.__decorate([F.property()],c.SnappingListItem.prototype,"enabled",null);k.__decorate([F.property({constructOnly:!0})],c.SnappingListItem.prototype,"getFeatureSnappingSources",
void 0);k.__decorate([F.property()],c.SnappingListItem.prototype,"featureSource",null);k.__decorate([F.property()],c.SnappingListItem.prototype,"parent",void 0);c.SnappingListItem=l=k.__decorate([e.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],c.SnappingListItem);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/handleUtils ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Sketch/SketchViewModel ./support/SelectionToolbar ./support/SnappingControls ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(c,
A,k,N,w,F,D,f,e,d,z,R,l,p,H,t,u,v,r,y){const E={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0}};N=function(G){function h(q,O){O=G.call(this,q,O)||this;O._activeCreateOptions=null;O._menuOpen=!1;O._selectionToolbar=null;O._snappingControls=null;O._viewModelHandlesGroup=
null;O.availableCreateTools=["point","polyline","polygon","rectangle","circle"];O.creationMode="continuous";O.iconClass="esri-icon-edit";O.layout="horizontal";O.messages=null;O.visibleElements={...E};O._activateCreateTool=O._activateCreateTool.bind(A._assertThisInitialized(O));O.viewModel=q?.viewModel||new l;return O}A._inheritsLoose(h,G);var g=h.prototype;g.initialize=function(){const {layer:q,view:O}=this,C=new p({view:"2d"===O?.type?O:null,layers:q?[q]:null});this.addHandles([D.watch(()=>this.viewModel,
B=>{this._viewModelHandlesGroup=F.removeMaybe(this._viewModelHandlesGroup);B&&(this._viewModelHandlesGroup=w.handlesGroup([B.on("create",J=>{this.scheduleRender();this._onCreateOperation(J)}),B.on("update",()=>this.scheduleRender()),B.on("delete",J=>this.emit("delete",J)),B.on("undo",()=>this.scheduleRender()),B.on("redo",()=>this.scheduleRender()),D.watch(()=>B.layer,J=>{this._selectionToolbar.layers=J?[J]:null}),D.watch(()=>B.view,J=>{this._selectionToolbar.view="2d"===J?.type?J:null;this._setUpSnappingControls()}),
D.watch(()=>B.state,()=>this.notifyChange("state"))]))},D.syncAndInitial),D.when(()=>C.activeToolInfo,()=>this.viewModel.cancel()),C.on("complete",B=>this._onSelectionOperationComplete(B))]);this._selectionToolbar=C;this._setUpSnappingControls()};g.loadDependencies=function(){return Promise.all([new Promise((q,O)=>c(["../chunks/calcite-action"],q,O)),new Promise((q,O)=>c(["../chunks/calcite-icon"],q,O))])};g.destroy=function(){this._selectionToolbar.destroy();this._viewModelHandlesGroup=F.removeMaybe(this._viewModelHandlesGroup);
this._snappingControls=F.destroyMaybe(this._snappingControls)};g.castVisibleElements=function(q){q={...E,...q,createTools:{...E.createTools,...q?.createTools},selectionTools:{...E.selectionTools,...q?.selectionTools},snappingControlsElements:{...E.snappingControlsElements,...q?.snappingControlsElements}};F.isSome(this._snappingControls)&&(this._snappingControls.visibleElements=q.snappingControlsElements);return q};g.create=function(q,O){this._activeCreateOptions=O||null;this.viewModel.create(q,O)};
g.update=function(q,O){return this.viewModel.update(q,O)};g.complete=function(){this.viewModel.complete()};g.cancel=function(){this._selectionToolbar.cancel();this.viewModel.cancel()};g.undo=function(){this.viewModel.undo();this.view?.focus()};g.redo=function(){this.viewModel.redo();this.view?.focus()};g.delete=function(){this.viewModel.delete()};g.duplicate=function(){return this.viewModel.duplicate()};g.render=function(){const {label:q,layout:O,viewModel:{state:C}}=this;return r.tsx("div",{"aria-label":q,
class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===C,["esri-sketch--vertical"]:"vertical"===O})},r.tsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),r.tsx("div",{class:this.classes("esri-sketch__panel","esri-sketch__info-panel")},this.renderInfoPanelContents()))};g.renderTopPanelContents=function(){const q=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:O,visibleElements:C}=this;return[r.tsx("div",
{role:"menu",key:"selection-button-container",class:q},this.renderDefaultSelectionButton(),this.renderSelectionToolbar()),O&&O.length?r.tsx("div",{role:"menu",class:q},this.renderDrawButtons()):null,C.undoRedoMenu?r.tsx("div",{role:"menu",key:"undo-redo-menu-button-container",class:q},this.renderUndoRedoMenuButtons()):null,C.settingsMenu?r.tsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};g.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();
if(this.updateGraphics.length)return[r.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),r.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),key:"delete-button-container"},this.renderDuplicateButton(),this.renderDeleteButton())]};g.renderSettingsMenu=function(){const {settings:q}=this.messages;return[r.tsx("div",{role:"menu",class:"esri-sketch__menu-container",
key:"settings-menu-container"},r.tsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},r.tsx("span",{class:"esri-sketch__menu-title"},q)),this.renderSnappingControls())]};g.renderSnappingControls=function(){const {snappingControls:q}=this.visibleElements;if(F.isSome(this._snappingControls)&&q)return this._snappingControls.render()};g.renderFeatureCount=function(){const {layout:q,messages:O,updateGraphics:{length:C}}=this,B=y.substitute(1===C?O.featureCount:O.featuresCount,{count:C});
return r.tsx("div",{class:"esri-sketch__feature-count-badge","aria-label":B},r.tsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===q?C:B))};g.renderDuplicateButton=function(){var q=this.messages;q=1<this.updateGraphics.length?q.duplicateFeatures:q.duplicateFeature;return r.tsx("calcite-action",{bind:this,label:q,onclick:this._onDuplicateSelect,scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"copy"}))};g.renderDeleteButton=function(){var q=this.messages;q=1<this.updateGraphics.length?
q.deleteFeatures:q.deleteFeature;return r.tsx("calcite-action",{bind:this,label:q,onclick:this.delete,scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"trash"}))};g.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var q=this.messages.selectFeature;return r.tsx("calcite-action",{active:"ready"===this.state,bind:this,label:q,onclick:this._activateDefaultSelectTool,scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"cursor"}))}};g.renderSelectionToolbar=
function(){if("2d"===this.view?.type){var q=this.visibleElements.selectionTools;this._selectionToolbar.visibleElements={lassoTool:!!q["lasso-selection"],rectangleTool:!!q["rectangle-selection"]};return this._selectionToolbar.render()}};g.renderDrawButtons=function(){const q=this.visibleElements.createTools;return this.availableCreateTools.map(O=>{if("point"===O&&q.point)return this.renderPointButton();if("polyline"===O&&q.polyline)return this.renderPolylineButton();if("polygon"===O&&q.polygon)return this.renderPolygonButton();
if("rectangle"===O&&q.rectangle)return this.renderRectangleButton();if("circle"===O&&q.circle)return this.renderCircleButton()})};g.renderPointButton=function(){const q=this.messages.drawPoint;return r.tsx("calcite-action",{active:"point"===this.activeTool,bind:this,label:q,onclick:()=>this._activateCreateTool("point"),scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"pin"}))};g.renderPolygonButton=function(){const q=this.messages.drawPolygon;return r.tsx("calcite-action",{active:"polygon"===
this.activeTool,bind:this,label:q,onclick:()=>this._activateCreateTool("polygon"),scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"polygon"}))};g.renderPolylineButton=function(){const q=this.messages.drawPolyline;return r.tsx("calcite-action",{active:"polyline"===this.activeTool,bind:this,label:q,onclick:()=>this._activateCreateTool("polyline"),scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"line"}))};g.renderCircleButton=function(){const q=this.messages.drawCircle;
return r.tsx("calcite-action",{active:"circle"===this.activeTool,bind:this,label:q,onclick:()=>this._activateCreateTool("circle"),scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"circle"}))};g.renderRectangleButton=function(){const q=this.messages.drawRectangle;return r.tsx("calcite-action",{active:"rectangle"===this.activeTool,bind:this,label:q,onclick:()=>this._activateCreateTool("rectangle"),scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"rectangle"}))};g.renderUndoRedoMenuButtons=
function(){return[this.renderUndoButton(),this.renderRedoButton()]};g.renderUndoButton=function(){const q=this.messages.undo;return r.tsx("calcite-action",{disabled:!this.viewModel.canUndo(),bind:this,label:q,onclick:this.undo,scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:t.isRTL(this.container)?"redo":"undo"}))};g.renderRedoButton=function(){const q=this.messages.redo;return r.tsx("calcite-action",{disabled:!this.viewModel.canRedo(),bind:this,label:q,onclick:this.redo,scale:"s",
text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:t.isRTL(this.container)?"undo":"redo"}))};g.renderSettingsMenuButton=function(){const q=this.messages.settings;return r.tsx("calcite-action",{active:this._menuOpen,bind:this,label:q,onclick:this._toggleMenu,scale:"s",text:q,title:q},r.tsx("calcite-icon",{scale:"s",icon:"gear"}))};g._activateCreateTool=function(q){this.activeTool===q?this.cancel():(this._selectionToolbar.cancel(),this.create(q))};g._onCreateOperation=function(q){if("complete"===
q.state){var {creationMode:O}=this,{type:C}=q;if("create"===C){const {tool:B,graphic:J}=q;q=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===O?this.create(B,q):"update"===O&&this.update([J])}}};g._toggleMenu=function(){this._menuOpen=!this._menuOpen;this.scheduleRender()};g._onDuplicateSelect=function(){const q=this.duplicate(),O=this.viewModel.activeTool;"transform"!==O&&"reshape"!==O||this.update(q,{tool:O})};g._onSelectionOperationComplete=function(q){const {viewModel:{defaultUpdateOptions:O}}=
this,{selection:C}=q;!q.aborted&&C.length&&(q=O.tool,this.update(C,{...O,tool:1<C.length&&"reshape"===q?"transform":q}));this.notifyChange("state")};g._activateDefaultSelectTool=function(){this.cancel();this.view?.focus()};g._setUpSnappingControls=function(){const {snappingOptions:q,view:O}=this;this._snappingControls=F.destroyMaybe(this._snappingControls);q&&O&&(this._snappingControls=new H({snappingOptions:q,view:O,visibleElements:this.visibleElements.snappingControlsElements}))};A._createClass(h,
[{key:"activeTool",get:function(){const q=this._selectionToolbar.activeToolInfo;if(q)switch(q.toolName){case "lasso":return"lasso-selection";case "rectangle":return"rectangle-selection";case "default":return"custom-selection"}return this.viewModel.activeTool}},{key:"createGraphic",get:function(){return this.viewModel.createGraphic}},{key:"defaultCreateOptions",get:function(){return this.viewModel.defaultCreateOptions},set:function(q){this.viewModel.defaultCreateOptions=q}},{key:"defaultUpdateOptions",
get:function(){return this.viewModel.defaultUpdateOptions},set:function(q){this.viewModel.defaultUpdateOptions=q}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(q){this._overrideIfSome("label",q)}},{key:"labelOptions",get:function(){return this.viewModel.labelOptions},set:function(q){this.viewModel.labelOptions=q}},{key:"layer",get:function(){return this.viewModel.layer},set:function(q){this.viewModel.layer=q}},{key:"snappingOptions",get:function(){return this.viewModel.snappingOptions},
set:function(q){this.viewModel.snappingOptions=q}},{key:"state",get:function(){return this._selectionToolbar.activeToolInfo?"active":this.viewModel.state}},{key:"tooltipOptions",get:function(){return this.viewModel.tooltipOptions},set:function(q){this.viewModel.tooltipOptions=q}},{key:"updateGraphics",get:function(){return this.viewModel.updateGraphics}},{key:"view",get:function(){return this.viewModel.view},set:function(q){this.viewModel.view=q}},{key:"viewModel",set:function(q){const O=this._get("viewModel");
q!==O&&(O&&F.destroyMaybe(O),this._set("viewModel",q))}}]);return h}(R);k.__decorate([f.property()],N.prototype,"activeTool",null);k.__decorate([f.property({cast:G=>{if(!G||!G.length)return null;const h=new Set(["point","polyline","polygon","rectangle","circle"]);return G.filter(g=>h.has(g))}})],N.prototype,"availableCreateTools",void 0);k.__decorate([f.property({readOnly:!0})],N.prototype,"createGraphic",null);k.__decorate([f.property()],N.prototype,"creationMode",void 0);k.__decorate([f.property()],
N.prototype,"defaultCreateOptions",null);k.__decorate([f.property()],N.prototype,"defaultUpdateOptions",null);k.__decorate([f.property()],N.prototype,"iconClass",void 0);k.__decorate([f.property()],N.prototype,"label",null);k.__decorate([f.property()],N.prototype,"labelOptions",null);k.__decorate([f.property()],N.prototype,"layer",null);k.__decorate([f.property({type:["horizontal","vertical"]})],N.prototype,"layout",void 0);k.__decorate([f.property(),u.messageBundle("esri/widgets/Sketch/t9n/Sketch")],
N.prototype,"messages",void 0);k.__decorate([f.property()],N.prototype,"snappingOptions",null);k.__decorate([f.property()],N.prototype,"state",null);k.__decorate([f.property()],N.prototype,"tooltipOptions",null);k.__decorate([f.property({readOnly:!0})],N.prototype,"updateGraphics",null);k.__decorate([f.property()],N.prototype,"view",null);k.__decorate([f.property(),v.vmEvent(["create","update","undo","redo"])],N.prototype,"viewModel",null);k.__decorate([f.property()],N.prototype,"visibleElements",
void 0);k.__decorate([e.cast("visibleElements")],N.prototype,"castVisibleElements",null);return N=k.__decorate([z.subclass("esri.widgets.Sketch")],N)});