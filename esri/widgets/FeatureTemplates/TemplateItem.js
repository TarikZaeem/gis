// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(l,k,f,x,e,y,u,v,h,D,E,z,A){function B(b,c){return m.apply(this,arguments)}function m(){m=k._asyncToGenerator(function*(b,
c){var {renderer:d}=b;return d&&(c=new x({attributes:c.prototype.attributes}),d=yield d.getSymbolAsync(c))?d:C(b)});return m.apply(this,arguments)}function C(b){return n.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*(b){({geometryType:b}=b);return(b="point"===b||"multipoint"===b?yield new Promise((c,d)=>l(["../../symbols/SimpleMarkerSymbol"],a=>c(p(a)),d)):"polyline"===b?yield new Promise((c,d)=>l(["../../symbols/SimpleLineSymbol"],a=>c(p(a)),d)):"polygon"===b||"mesh"===b||"multipatch"===
b?yield new Promise((c,d)=>l(["../../symbols/SimpleFillSymbol"],a=>c(p(a)),d)):null)?new b.default:null});return n.apply(this,arguments)}const p=b=>Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));var q;e=q=function(b){function c(a){a=b.call(this,a)||this;a._activeFetchInfo={id:null,request:null};a.layer=null;a.template=null;a.thumbnail=null;return a}k._inheritsLoose(c,b);var d=c.prototype;d.initialize=function(){this.handles.add(v.watch(()=>{const {layer:a}=
this;return[a&&"renderer"in a?a.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)},v.initial))};d.clone=function(){const a=u.isSome(this.thumbnail)?this.thumbnail.cloneNode(!0):null,g=new q({layer:this.layer,template:this.template});g._set("thumbnail",a);return g};c.fetchThumbnail=function(){var a=k._asyncToGenerator(function*(g,r){const w=yield B(g,r);if(u.isNone(w))return null;const t={maxSize:36};"dictionary"===g.renderer?.type&&
(t.fieldMap=g.renderer.fieldMap??void 0,t.feature={attributes:r.prototype.attributes??{}});return yield A.renderPreviewHTML(w,t)});return function(g,r){return a.apply(this,arguments)}}();k._createClass(c,[{key:"description",get:function(){return this.template?.description},set:function(a){this.template&&(this.template.description=a)}},{key:"label",get:function(){return this.template?.name},set:function(a){this.template&&(this.template.name=a)}},{key:"id",get:function(){return`${this.label??""}\u2013${this.layer?.id}`}}]);
return c}(y.HandleOwnerMixin(e));f.__decorate([h.property()],e.prototype,"description",null);f.__decorate([h.property()],e.prototype,"label",null);f.__decorate([h.property()],e.prototype,"layer",void 0);f.__decorate([h.property()],e.prototype,"template",void 0);f.__decorate([h.property({readOnly:!0})],e.prototype,"thumbnail",void 0);f.__decorate([h.property()],e.prototype,"id",null);return e=q=f.__decorate([z.subclass("esri.widgets.FeatureTemplates.TemplateItem")],e)});