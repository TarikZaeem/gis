// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),function(q,k,p,r,w,E,J,
I,Q,N,e,d,a){w=function(h){function n(f,x){f=h.call(this,f,x)||this;f._featureElementInfo=null;f.attachmentsWidget=new I;f.headingLevel=2;f.viewModel=new N;return f}q._inheritsLoose(n,h);var t=n.prototype;t.initialize=function(){this._featureElementInfo=new e;this.addHandles([p.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),p.initial),p.watch(()=>this.viewModel,f=>this.attachmentsWidget.viewModel=f,p.initial)])};t.destroy=function(){this.attachmentsWidget.destroy();
this._featureElementInfo?.destroy()};t.render=function(){const {attachmentsWidget:f}=this;return a.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),f?.render())};t._setupFeatureElementInfo=function(){const {description:f,title:x,headingLevel:F}=this;this._featureElementInfo?.set({description:f,title:x,headingLevel:F})};q._createClass(n,[{key:"description",get:function(){return this.viewModel.description},set:function(f){this.viewModel.description=f}},{key:"displayType",
get:function(){return this.attachmentsWidget.displayType},set:function(f){this.attachmentsWidget.displayType=f}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(f){this.viewModel.graphic=f}},{key:"title",get:function(){return this.viewModel.title},set:function(f){this.viewModel.title=f}}]);return n}(Q);k.__decorate([r.property({readOnly:!0})],w.prototype,"attachmentsWidget",void 0);k.__decorate([r.property()],w.prototype,"description",null);k.__decorate([r.property()],w.prototype,
"displayType",null);k.__decorate([r.property()],w.prototype,"graphic",null);k.__decorate([r.property()],w.prototype,"headingLevel",void 0);k.__decorate([r.property()],w.prototype,"title",null);k.__decorate([r.property({type:N})],w.prototype,"viewModel",void 0);return w=k.__decorate([J.subclass("esri.widgets.Feature.FeatureAttachments")],w)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f){const x={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},F=window.CSS;N=function(G){function y(b,m){b=G.call(this,b,m)||this;b.displayType="auto";b.messages=null;b.messagesUnits=null;b.selectedFile=null;b.submitting=!1;b.viewModel=null;b.visibleElements={...x};b._supportsImageOrientation=F&&F.supports&&F.supports("image-orientation","from-image");b._addAttachmentForm=
null;b._updateAttachmentForm=null;return b}k._inheritsLoose(y,G);var c=y.prototype;c.initialize=function(){this.viewModel||(this.viewModel=new a);this.addHandles([E.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),E.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),E.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),E.initial)])};c.loadDependencies=function(){return Promise.all([new Promise((b,m)=>q(["../chunks/calcite-icon"],b,m))])};c.castVisibleElements=
function(b){return{...x,...b}};c.addAttachment=function(){const {_addAttachmentForm:b,viewModel:m}=this;this._set("submitting",!0);this._set("error",null);return m.addAttachment(b).then(v=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return v}).catch(v=>{this._set("submitting",!1);this._set("error",new r("attachments:add-attachment",this.messages.addErrorMessage,v));throw v;})};c.deleteAttachment=function(b){const {viewModel:m}=this;this._set("submitting",!0);this._set("error",
null);return m.deleteAttachment(b).then(v=>{this._set("submitting",!1);this._set("error",null);m.mode="view";return v}).catch(v=>{this._set("submitting",!1);this._set("error",new r("attachments:delete-attachment",this.messages.deleteErrorMessage,v));throw v;})};c.updateAttachment=function(){const {viewModel:b}=this,{_updateAttachmentForm:m}=this;this._set("submitting",!0);this._set("error",null);return b.updateAttachment(m).then(v=>{this._set("submitting",!1);this._set("error",null);b.mode="view";
return v}).catch(v=>{this._set("submitting",!1);this._set("error",new r("attachments:update-attachment",this.messages.updateErrorMessage,v));throw v;})};c.addFile=function(){const b=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return b};c.updateFile=function(){const {viewModel:b}=this,m=b.updateFile(this.selectedFile,this._updateAttachmentForm,b.activeFileInfo);b.mode="view";return m};c.deleteFile=function(b){b=this.viewModel.deleteFile(b||this.viewModel.activeFileInfo?.file);
this.viewModel.mode="view";return b};c.render=function(){const {submitting:b,viewModel:m}=this,{state:v}=m;return f.tsx("div",{class:this.classes("esri-attachments","esri-widget")},b?this.renderProgressBar():null,"loading"===v?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};c.renderErrorMessage=function(){const {error:b,visibleElements:m}=this;return b&&m.errorMessage?f.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},b.message):null};c.renderAttachments=
function(){const {activeFileInfo:b,mode:m,activeAttachmentInfo:v}=this.viewModel;return"add"===m?this.renderAddForm():"edit"===m?this.renderDetailsForm(v||b):this.renderAttachmentContainer()};c.renderLoading=function(){return f.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},f.tsx("div",{class:"esri-attachments__loader"}))};c.renderProgressBar=function(){return this.visibleElements.progressBar?f.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};c.renderAddForm=
function(){const {submitting:b,selectedFile:m}=this;var v=b||!m,z=this.visibleElements.cancelAddButton?f.tsx("button",{type:"button",bind:this,disabled:b,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",b&&"esri-button--disabled")},this.messages.cancel):null;v=this.visibleElements.addSubmitButton?f.tsx("button",{type:"submit",disabled:v,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",
{["esri-button--disabled"]:v})},this.messages.add):null;const C=m?f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},m.name):null;z=f.tsx("form",{bind:this,afterCreate:n.storeNode,afterRemoved:n.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},f.tsx("fieldset",{class:"esri-attachments__file-fieldset"},C,f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},m?this.messages.changeFile:this.messages.selectFile,
f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),v,z);return f.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},z)};c.renderDetailsForm=function(b){const {visibleElements:m,viewModel:v,selectedFile:z,submitting:C}=this;var {abilities:A}=v,H=C||!z;let D;if(z){var l=z.type;D=z.name;var g=z.size}else if(b&&"file"in b)l=b.file.type,D=b.file.name,g=b.file.size;else if(b&&"contentType"in b){l=b.contentType;
D=b.name;g=b.size;var u=b.url}var L=A.editing&&A.operations?.delete&&m.deleteButton?f.tsx("button",{key:"delete-button",type:"button",disabled:C,bind:this,onclick:O=>this._submitDeleteAttachment(O,b),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:C})},this.messages.delete):void 0;H=A.editing&&A.operations?.update&&m.updateButton?f.tsx("button",{disabled:H,key:"update-button",type:"submit",class:this.classes("esri-button",
"esri-button--small","esri-button--third",{["esri-button--disabled"]:H})},this.messages.update):void 0;const M=this.visibleElements.cancelUpdateButton?f.tsx("button",{disabled:C,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:C})},this.messages.cancel):void 0;A=A.editing&&A.operations?.update?f.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},
f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},D),f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;g=f.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,J.formatFileSize(this.messagesUnits,g??0)));l=f.tsx("fieldset",{key:"content-type",
class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,l));u=w.isSome(u)?f.tsx("a",{class:"esri-attachments__item-link",href:u,rel:"noreferrer",target:"_blank"},this.renderImageMask(b,400),f.tsx("div",{class:"esri-attachments__item-link-overlay"},f.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},f.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(b,400);L=f.tsx("form",{bind:this,afterCreate:n.storeNode,afterRemoved:n.discardNode,"data-node-ref":"_updateAttachmentForm",
onsubmit:O=>this._submitUpdateAttachment(O,b)},f.tsx("div",{class:"esri-attachments__metadata"},g,l),A,f.tsx("div",{class:"esri-attachments__actions"},L,M,H));return f.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},u,L)};c.renderImageMask=function(b,m){return b?"file"in b?this.renderGenericImageMask(b.file.name,b.file.type):this.renderImageMaskForAttachment(b,m):null};c.renderGenericImageMask=function(b,m){var {supportsResizeAttachments:v}=this.viewModel;m=h.getIconPath(m);
v={["esri-attachments__image--resizable"]:v};return f.tsx("div",{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},f.tsx("img",{title:b,alt:b,src:m,class:this.classes(v,"esri-attachments__image")}))};c.renderImageMaskForAttachment=function(b,m){var {supportsResizeAttachments:v}=this.viewModel;if(!b)return null;const {contentType:z,name:C,url:A}=b;if(!v||!h.isSupportedImage(z))return this.renderGenericImageMask(C,z);b=(b=this._getCSSTransform(b))?{transform:b,"image-orientation":"none"}:
{};m=`${A}${A?.includes("?")?"\x26":"?"}w=${m}`;v={["esri-attachments__image--resizable"]:v};return f.tsx("div",{class:this.classes("esri-attachments__item-mask")},f.tsx("img",{styles:b,alt:C,title:C,src:m,class:this.classes(v,"esri-attachments__image")}))};c.renderFile=function(b){const {file:m}=b;return f.tsx("li",{class:"esri-attachments__item",key:m},f.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,
onclick:()=>this._startEditFile(b),type:"button"},this.renderImageMask(b),f.tsx("label",{class:"esri-attachments__label"},f.tsx("span",{class:"esri-attachments__filename"},m.name||this.messages.noTitle),f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",n.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};c.renderAttachmentInfo=function({attachmentInfo:b,displayType:m}){const {viewModel:v,effectiveDisplayType:z}=this,{abilities:C,supportsResizeAttachments:A}=
v,{contentType:H,name:D,url:l}=b;m=this.renderImageMask(b,"list"===m?48:400);var g=C.editing?f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",n.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;g="preview"===z&&A&&h.isSupportedImage(H)?null:f.tsx("label",{class:"esri-attachments__label"},f.tsx("span",{class:"esri-attachments__filename"},D||this.messages.noTitle),g);m=[m,g];m=C.editing?f.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",
title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":b.id,onclick:()=>this._startEditAttachment(b),type:"button"},m):f.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:l??void 0,target:"_blank"},m);return f.tsx("li",{class:"esri-attachments__item",key:b},m)};c.renderAttachmentContainer=function(){const {effectiveDisplayType:b,viewModel:m,visibleElements:v}=this,{attachmentInfos:z,abilities:C,fileInfos:A}=m;var H=!!z?.length;
const D=!!A?.length,l={["esri-attachments__container--list"]:"preview"!==b,["esri-attachments__container--preview"]:"preview"===b},g=C.editing&&C.operations?.add&&v.addButton?f.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,u=H?f.tsx("ul",
{key:"attachments-list",class:"esri-attachments__items"},z.toArray().map(M=>this.renderAttachmentInfo({attachmentInfo:M,displayType:b}))):void 0,L=D?f.tsx("ul",{key:"file-list",class:"esri-attachments__items"},A.toArray().map(M=>this.renderFile(M))):void 0;H=D||H?void 0:f.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return f.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",l)},u,L,H,g)};c._modeChanged=function(){this._set("error",
null);this._set("selectedFile",null)};c._handleFileInputChange=function(b){b=(b=b.target)&&b.files&&b.files.item(0);this._set("selectedFile",b)};c._submitDeleteAttachment=function(b,m){b.preventDefault();m&&("file"in m?this.deleteFile(m.file):m&&this.deleteAttachment(m))};c._submitAddAttachment=function(b){b.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()};c._submitUpdateAttachment=function(b,m){b.preventDefault();m&&"file"in m?this.updateFile():this.updateAttachment()};
c._startEditAttachment=function(b){const {viewModel:m}=this;m.activeFileInfo=null;m.activeAttachmentInfo=b;m.mode="edit"};c._startEditFile=function(b){const {viewModel:m}=this;m.activeAttachmentInfo=null;m.activeFileInfo=b;m.mode="edit"};c._startAddAttachment=function(){this.viewModel.mode="add"};c._cancelForm=function(b){b.preventDefault();this.viewModel.mode="view"};c._getCSSTransform=function(b){({orientationInfo:b}=b);return!this._supportsImageOrientation&&b?[b.rotation?`rotate(${b.rotation}deg)`:
"",b.mirrored?"scaleX(-1)":""].join(" "):""};k._createClass(y,[{key:"abilities",get:function(){return this.viewModel.abilities},set:function(b){this.viewModel.abilities=b}},{key:"effectiveDisplayType",get:function(){const {displayType:b}=this;return b&&"auto"!==b?b:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(b){this.viewModel.graphic=b}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(b){this._overrideIfSome("label",
b)}}]);return y}(d);p.__decorate([I.property()],N.prototype,"abilities",null);p.__decorate([I.property()],N.prototype,"displayType",void 0);p.__decorate([I.property({readOnly:!0})],N.prototype,"effectiveDisplayType",null);p.__decorate([I.property()],N.prototype,"graphic",null);p.__decorate([I.property()],N.prototype,"label",null);p.__decorate([I.property(),t.messageBundle("esri/widgets/Attachments/t9n/Attachments")],N.prototype,"messages",void 0);p.__decorate([I.property(),t.messageBundle("esri/core/t9n/Units")],
N.prototype,"messagesUnits",void 0);p.__decorate([I.property({readOnly:!0})],N.prototype,"selectedFile",void 0);p.__decorate([I.property({readOnly:!0})],N.prototype,"submitting",void 0);p.__decorate([I.property({readOnly:!0})],N.prototype,"error",void 0);p.__decorate([I.property({type:a})],N.prototype,"viewModel",void 0);p.__decorate([I.property()],N.prototype,"visibleElements",void 0);p.__decorate([Q.cast("visibleElements")],N.prototype,"castVisibleElements",null);return N=p.__decorate([e.subclass("esri.widgets.Attachments")],
N)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(q,k,p,r,w,E,J,I){function Q(n,t,f){return n.units[t][f]}function N(n,t,f,x=2,F="abbr"){return`${I.formatNumber(t,{minimumFractionDigits:x,maximumFractionDigits:x,signDisplay:0<t?"never":"exceptZero"})} ${Q(n,f,F)}`}function e(n,t,f,x=2,F="abbr"){return`${I.formatNumber(t,{minimumFractionDigits:x,maximumFractionDigits:x,signDisplay:"exceptZero"})} ${Q(n,
f,F)}`}function d(n,t){const f=JSON.stringify(t);let x=a.get(f);x||(x=new Intl.NumberFormat("en-US",t),a.set(f,x));return/\-?\+?360/.test(x.format(n))?0:n}const a=new Map,h=["B","kB","MB","GB","TB"];q.formatAngleDegrees=function(n,t,f,x,F){F=w.unwrapOr(F,2);var G=p.cyclicalDegrees,y=G.normalize;a:if(n=J.convertUnit(n,t,"degrees"),f===x)f=n;else{switch(x){case "arithmetic":f=-n+90;break a;case "geographic":f=-n-90;break a}f=void 0}G=y.call(G,f,0,!0);F={style:"unit",unitDisplay:"narrow",unit:"degree",
maximumFractionDigits:F,minimumFractionDigits:F,signDisplay:0<G?"never":"exceptZero"};G=d(G,F);return I.formatNumber(G,F)};q.formatDMS=function(n,t,f=2){n=J.convertUnit(n,t,"degrees");t=n-Math.floor(n);n-=t;t*=60;let x=t-Math.floor(t);t-=x;x*=60;return`${n.toFixed()}\u00b0 ${t.toFixed()}' ${x.toFixed(f)}"`};q.formatDecimal=N;q.formatFileSize=function(n,t){let f=0===t?0:Math.floor(Math.log(t)/Math.log(k.ByteSizeUnit.KILOBYTES));f=r.clamp(f,0,h.length-1);t=I.formatNumber(t/k.ByteSizeUnit.KILOBYTES**
f,{maximumFractionDigits:2});return E.replace(n.units.bytes[h[f]],{fileSize:t})};q.formatImperialArea=function(n,t,f,x=2,F="abbr"){const G=J.preferredImperialAreaUnit(t,f);return N(n,J.convertUnit(t,f,G),G,x,F)};q.formatImperialLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredImperialLengthUnit(t,f);return N(n,J.convertUnit(t,f,G),G,x,F)};q.formatImperialRelativeLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredImperialLengthUnit(t,f);return e(n,J.convertUnit(t,f,G),G,x,F)};q.formatImperialRelativeVerticalLength=
function(n,t,f,x=2,F="abbr"){const G=J.preferredImperialVerticalLengthUnit(t,f);return e(n,J.convertUnit(t,f,G),G,x,F)};q.formatImperialVerticalLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredImperialVerticalLengthUnit(t,f);return N(n,J.convertUnit(t,f,G),G,x,F)};q.formatMetricArea=function(n,t,f,x=2,F="abbr"){const G=J.preferredMetricAreaUnit(t,f);return N(n,J.convertUnit(t,f,G),G,x,F)};q.formatMetricLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredMetricLengthUnit(t,f);return N(n,J.convertUnit(t,
f,G),G,x,F)};q.formatMetricRelativeLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredMetricLengthUnit(t,f);return e(n,J.convertUnit(t,f,G),G,x,F)};q.formatMetricRelativeVerticalLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredMetricVerticalLengthUnit(t,f);return e(n,J.convertUnit(t,f,G),G,x,F)};q.formatMetricVerticalLength=function(n,t,f,x=2,F="abbr"){const G=J.preferredMetricVerticalLengthUnit(t,f);return N(n,J.convertUnit(t,f,G),G,x,F)};q.formatRelativeAngleDegrees=function(n,t,f,x,F){f!==
x&&(n=-n);F=w.unwrapOr(F,2);f={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:F,minimumFractionDigits:F,signDisplay:"exceptZero"};n=J.convertUnit(n,t,"degrees")%360;n=d(n,f);return I.formatNumber(n,f)};q.formatRelativeDecimal=e;q.unitName=Q;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(q){function k(w){return 32+w.length}function p(w){if(!w)return 0;if(Array.isArray(w)){var E=w.length;if(0===
E||"number"===typeof w[0])w=32+8*E;else{var J=32;for(let I=0;I<E;I++)J+=r(w[I]);w=J}return w}J=32;for(E in w)w.hasOwnProperty(E)&&(J+=r(w[E]));return J}function r(w){switch(typeof w){case "object":return p(w);case "string":return k(w);case "number":return 16;case "boolean":return 4;default:return 8}}q.ByteSizeUnit=void 0;(function(w){w[w.KILOBYTES=1024]="KILOBYTES";w[w.MEGABYTES=1048576]="MEGABYTES";w[w.GIGABYTES=1073741824]="GIGABYTES"})(q.ByteSizeUnit||(q.ByteSizeUnit={}));q.estimateAttributesObjectSize=
function(w){if(!w)return 0;let E=32;for(const J in w)if(w.hasOwnProperty(J)){const I=w[J];switch(typeof I){case "string":E+=k(I);break;case "number":E+=16;break;case "boolean":E+=4}}return E};q.estimateFixedArraySize=function(w,E){return 32+w.length*E};q.estimateNestedObjectSize=p;q.estimateNumberByteSize=function(w){return 16};q.estimateStringByteSize=k;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n){const t={editing:!1,operations:{add:!0,update:!0,delete:!0}},f=w.ofType(a);r=function(x){function F(y){var c=x.call(this,y)||this;c._getAttachmentsPromise=null;c._attachmentLayer=null;c.abilities={...t};c.activeAttachmentInfo=null;c.activeFileInfo=null;c.attachmentInfos=new f;c.fileInfos=new w;c.graphic=null;c.mode="view";c.filesEnabled=!1;c.addHandles(I.watch(()=>c.graphic,()=>c._graphicChanged(),I.initial));return c}q._inheritsLoose(F,x);var G=F.prototype;
G.destroy=function(){this.graphic=this._attachmentLayer=null};G.castAbilities=function(y){return{...t,...y}};G.getAttachments=function(){var y=q._asyncToGenerator(function*(){const {_attachmentLayer:c,attachmentInfos:b}=this;if(!c||"function"!==typeof c.queryAttachments)throw new E("invalid-layer","getAttachments(): A valid layer is required.");const m=this._getObjectId();var v=new h({objectIds:[m],returnMetadata:!0});const z=[];this._getAttachmentsPromise=v=c.queryAttachments(v).then(C=>C[m]||z).catch(()=>
z);this.notifyChange("state");v=yield v;b.removeAll();v.length&&b.addMany(v);this._getAttachmentsPromise=null;this.notifyChange("state");return v});return function(){return y.apply(this,arguments)}}();G.addAttachment=function(){var y=q._asyncToGenerator(function*(c,b=this.graphic){const {_attachmentLayer:m,attachmentInfos:v,abilities:z}=this;if(!b)throw new E("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:b});if(!c)throw new E("invalid-attachment","addAttachment(): An attachment is required.",
{attachment:c});if(!z.operations?.add)throw new E("invalid-abilities","addAttachment(): add abilities are required.");if(!m||"function"!==typeof m.addAttachment)throw new E("invalid-layer","addAttachment(): A valid layer is required.");c=yield m.addAttachment(b,c).then(C=>this._queryAttachment(C.objectId,b));v.add(c);return c});return function(c){return y.apply(this,arguments)}}();G.deleteAttachment=function(){var y=q._asyncToGenerator(function*(c){const {_attachmentLayer:b,attachmentInfos:m,graphic:v,
abilities:z}=this;if(!c)throw new E("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:c});if(!z.operations?.delete)throw new E("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!b||"function"!==typeof b.deleteAttachments)throw new E("invalid-layer","deleteAttachment(): A valid layer is required.");if(!v)throw new E("invalid-graphic","deleteAttachment(): A graphic is required.");const C=yield b.deleteAttachments(v,[c.id]).then(()=>
c);m.remove(C);return C});return function(c){return y.apply(this,arguments)}}();G.updateAttachment=function(){var y=q._asyncToGenerator(function*(c,b=this.activeAttachmentInfo){const {_attachmentLayer:m,attachmentInfos:v,graphic:z,abilities:C}=this;if(!c)throw new E("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:c});if(!b)throw new E("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:b});if(!C.operations?.update)throw new E("invalid-abilities",
"updateAttachment(): Update abilities are required.");const A=v.findIndex(H=>H===b);if(!m||"function"!==typeof m.updateAttachment)throw new E("invalid-layer","updateAttachment(): A valid layer is required.");if(!z)throw new E("invalid-graphic","updateAttachment(): A graphic is required.");c=yield m.updateAttachment(z,b.id,c).then(H=>this._queryAttachment(H.objectId));v.splice(A,1,c);return c});return function(c){return y.apply(this,arguments)}}();G.commitFiles=function(){var y=q._asyncToGenerator(function*(){yield Promise.all(this.fileInfos.items.map(c=>
this.addAttachment(c.form)));this.fileInfos.removeAll();return this.getAttachments()});return function(){return y.apply(this,arguments)}}();G.addFile=function(y,c){if(!y||!c)return null;y={file:y,form:c};this.fileInfos.add(y);return y};G.updateFile=function(y,c,b=this.activeFileInfo){if(!y||!c||!b)return null;const m=this.fileInfos.findIndex(v=>b===v);-1<m&&this.fileInfos.splice(m,1,{file:y,form:c});return this.fileInfos.items[m]};G.deleteFile=function(y){const c=this.fileInfos.find(b=>b.file===y);
return c?(this.fileInfos.remove(c),c):null};G._queryAttachment=function(){var y=q._asyncToGenerator(function*(c,b){const {_attachmentLayer:m}=this;if(!c||!m?.queryAttachments)throw new E("invalid-attachment-id","Could not query attachment.");const v=this._getObjectId(b);c=new h({objectIds:[v],attachmentsWhere:`AttachmentId=${c}`,returnMetadata:!0});return m.queryAttachments(c).then(z=>z[v][0])});return function(c,b){return y.apply(this,arguments)}}();G._getObjectId=function(y=this.graphic){return y?.getObjectId()??
null};G._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};G._setAttachmentLayer=function(){var {graphic:y}=this;this._attachmentLayer=(y=n.getSourceLayer(y))?"scene"===y.type&&J.isSome(y.associatedLayer)?y.associatedLayer:y:null};q._createClass(F,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:y}=this;if(!y)return!1;y=y.layer||
y.sourceLayer;return y?.loaded&&"capabilities"in y&&y.capabilities&&"operations"in y.capabilities&&"supportsResizeAttachments"in y.capabilities.operations&&y.capabilities.operations.supportsResizeAttachments||!1}}]);return F}(r);k.__decorate([Q.property()],r.prototype,"abilities",void 0);k.__decorate([N.cast("abilities")],r.prototype,"castAbilities",null);k.__decorate([Q.property()],r.prototype,"activeAttachmentInfo",void 0);k.__decorate([Q.property()],r.prototype,"activeFileInfo",void 0);k.__decorate([Q.property({readOnly:!0,
type:f})],r.prototype,"attachmentInfos",void 0);k.__decorate([Q.property()],r.prototype,"fileInfos",void 0);k.__decorate([Q.property({type:p})],r.prototype,"graphic",void 0);k.__decorate([Q.property()],r.prototype,"mode",void 0);k.__decorate([Q.property({readOnly:!0})],r.prototype,"state",null);k.__decorate([Q.property()],r.prototype,"filesEnabled",void 0);k.__decorate([Q.property({readOnly:!0})],r.prototype,"supportsResizeAttachments",null);return r=k.__decorate([d.subclass("esri.widgets.Attachments.AttachmentsViewModel")],
r)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),function(q,k,p,r,w,E,J,I){var Q;const N={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},
4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};p=Q=function(e){function d(a){a=e.call(this,a)||this;a.contentType=null;a.exifInfo=null;a.id=null;a.globalId=null;a.keywords=null;a.name=null;a.parentGlobalId=null;a.parentObjectId=null;a.size=null;a.url=null;return a}q._inheritsLoose(d,e);d.prototype.clone=function(){return new Q({contentType:this.contentType,exifInfo:this.exifInfo,
id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};q._createClass(d,[{key:"orientationInfo",get:function(){var {exifInfo:a}=this;a=I.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:a});return N[a]||null}}]);return d}(p.JSONSupport);k.__decorate([r.property({type:String})],p.prototype,"contentType",void 0);k.__decorate([r.property()],p.prototype,"exifInfo",void 0);
k.__decorate([r.property({readOnly:!0})],p.prototype,"orientationInfo",null);k.__decorate([r.property({type:w.Integer})],p.prototype,"id",void 0);k.__decorate([r.property({type:String})],p.prototype,"globalId",void 0);k.__decorate([r.property({type:String})],p.prototype,"keywords",void 0);k.__decorate([r.property({type:String})],p.prototype,"name",void 0);k.__decorate([r.property({json:{read:!1}})],p.prototype,"parentGlobalId",void 0);k.__decorate([r.property({json:{read:!1}})],p.prototype,"parentObjectId",
void 0);k.__decorate([r.property({type:w.Integer})],p.prototype,"size",void 0);k.__decorate([r.property({json:{read:!1}})],p.prototype,"url",void 0);return p=Q=k.__decorate([J.subclass("esri.layers.support.AttachmentInfo")],p)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(q){function k(p){const {tagName:r,tags:w}=p;return w&&r?(p=w.find(E=>E.name===r))&&p.value||null:null}q.getExifValue=function(p){const {exifInfo:r,exifName:w,tagName:E}=p;return r&&w&&E?(p=r.find(J=>J.name===
w))?k({tagName:E,tags:p.tags}):null:null};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),function(q,k,
p,r,w,E,J,I,Q,N,e,d){function a(){a=k._asyncToGenerator(function*(B,K){return"function"===typeof B?B.call(null,K):B});return a.apply(this,arguments)}function h(B){return B?da.test(B):!1}function n(B,K){if(!h(K)||!B)return null;const P=K.replace(da,"").toLowerCase();let R=null;B.some(T=>T.name.toLowerCase()===P?(R=T,!0):!1);return R}function t(B,K){return(K=f(K,B))?K.name:B}function f(B,K){return B&&"function"===typeof B.getField&&K?B.getField(K)??null:null}function x({formattedAttributes:B,template:K,
fieldInfoMap:P}){return`${E.replace(E.replace(K,R=>{const T=P.get(R.toLowerCase());return`{${T&&T.fieldName||R}}`}),B).replace(aa,"")}`.trim()}function F(B,K,P=!1){const R=K[B];"string"===typeof R&&(P=(P?encodeURIComponent(R):R).replace(ca,"%27"),K[B]=P)}function G(B,K=!1){const P={...B};Object.keys(P).forEach(R=>F(R,P,K));return P}function y(B,K){return B.replace(ea,(P,R,T)=>(P=f(K,T))?`{${P.name}}`:R)}function c(B,K,P){return(B=y(B,P))?B.replace(V,(R,T,Z)=>{T=`${T||Z}`.trim();return E.replace(R,
G(K,T&&"{"!==T[0]||!1))}):B}function b(B,K){var P=K.fieldName,R=m(K.fieldInfos,P)?.clone();const T=K.preventPlacesFormatting;K=K.layer;var Z=f(K,P);R&&"date"===Z?.type&&(Z=R.format||new e,Z.dateFormat=Z.dateFormat||"short-date-short-time",Z.dateTimeFormatOptions=!K?.layer&&"feature"===K?.type&&K.datesInUnknownTimezone||K?.layer&&"map-image"===K.layer?.type&&K.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,R.format=Z);R=R&&R.format;if("string"===typeof B&&Q.isRasterPixelValueField(P)&&R)return R.formatRasterPixelValue(B);
"string"!==typeof B||!R||null!=R.dateFormat||null==R.places&&null==R.digitSeparator||(P=Number(B),isNaN(P)||(B=P));return"string"===typeof B||null==B||null==R?C(B):T?I.formatNumber(B,{...I.convertNumberFormatToIntlOptions(R),minimumFractionDigits:0,maximumFractionDigits:20}):R.format(B)}function m(B,K){if(B&&B.length&&K){var P=K.toLowerCase(),R=void 0;B.some(T=>T.fieldName&&T.fieldName.toLowerCase()===P?(R=T,!0):!1);return R}}function v({fieldName:B,graphic:K,layer:P}){if(L(B)||!P||"function"!==typeof P.getFeatureType)return null;
const {typeIdField:R}=P;return R&&B===R?(B=P.getFeatureType(K))?B.name:null:null}function z({fieldName:B,value:K,graphic:P,layer:R}){return L(B)||!R||"function"!==typeof R.getFieldDomain?null:(B=P&&R.getFieldDomain(B,{feature:P}))&&"coded-value"===B.type?B.getName(K):null}function C(B){return"string"===typeof B?B.replace(ia,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):B}function A(B){const {value:K,fieldName:P,fieldInfos:R,fieldInfoMap:T,layer:Z,graphic:fa}=B;return null==K?"":(B=z({fieldName:P,
value:K,graphic:fa,layer:Z}))||(B=v({fieldName:P,graphic:fa,layer:Z}))?B:T.get(P.toLowerCase())?b(K,{fieldInfos:R||Array.from(T.values()),fieldName:P,layer:Z}):(B=Z&&Z.fieldsIndex)&&B.isDateField(P)?J.formatDate(K,W):C(K)}function H(B,K){return D.apply(this,arguments)}function D(){D=k._asyncToGenerator(function*(B,K){const {layer:P,graphic:R,outFields:T,objectIds:Z,returnGeometry:fa,spatialReference:ha}=B;B=Z[0];if("number"!==typeof B&&"string"!==typeof B)return Y.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",
{layer:P,graphic:R,objectId:B,requiredFields:T}),null;if(!N.getEffectiveLayerCapabilities(P)?.operations?.supportsQuery)return Y.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:P,graphic:R,requiredFields:T,returnGeometry:fa}),null;B=P.createQuery();B.objectIds=Z;B.outFields=T?.length?T:[P.objectIdField];B.returnGeometry=!!fa;B.returnZ=!!fa;B.returnM=!!fa;B.outSpatialReference=ha;return(yield P.queryFeatures(B,K)).features[0]});return D.apply(this,arguments)}
function l(B){return g.apply(this,arguments)}function g(){g=k._asyncToGenerator(function*(B){if(!B.expressionInfos?.length)return!1;var K=yield d.loadArcade();({arcadeUtils:{hasGeometryFunctions:K}}=K);return K(B)});return g.apply(this,arguments)}function u(){u=k._asyncToGenerator(function*({graphic:B,popupTemplate:K,layer:P,spatialReference:R},T){if(P&&K&&("function"===typeof P.load&&(yield P.load(T)),B.attributes)){var Z=B.attributes[P.objectIdField];if(null!=Z){Z=[Z];var fa=yield K.getRequiredFields(P.fieldsIndex),
ha=Q.featureHasFields(fa,B);fa=ha?[]:fa;K=K.returnGeometry||(yield l(K));if(!ha||K)if(P=yield H({layer:P,graphic:B,outFields:fa,objectIds:Z,returnGeometry:K,spatialReference:R},T))P.geometry&&(B.geometry=P.geometry),P.attributes&&(B.attributes={...B.attributes,...P.attributes})}}});return u.apply(this,arguments)}function L(B=""){return B?B.includes("relationships/"):!1}function M({attributes:B,graphic:K,relatedInfo:P,fieldInfos:R,fieldInfoMap:T,layer:Z}){B&&K&&P&&Object.keys(K.attributes).forEach(fa=>
{var ha=(ha={layerId:P.relation.id.toString(),fieldName:fa},`${"relationships/"}${ha.layerId}/${ha.fieldName}`);B[ha]=A({fieldName:ha,fieldInfos:R,fieldInfoMap:T,layer:Z,value:K.attributes[fa],graphic:K})})}function O({attributes:B,relatedInfo:K,fieldInfoMap:P,fieldInfos:R,layer:T}){B&&K&&(K.relatedFeatures&&K.relatedFeatures&&K.relatedFeatures.forEach(Z=>M({attributes:B,graphic:Z,relatedInfo:K,fieldInfoMap:P,fieldInfos:R,layer:T})),K.relatedStatsFeatures&&K.relatedStatsFeatures&&K.relatedStatsFeatures.forEach(Z=>
M({attributes:B,graphic:Z,relatedInfo:K,fieldInfoMap:P,fieldInfos:R,layer:T})))}function U(B,K,P){return B.find(R=>R!==K&&"feature"===R.type&&R.url===K.url&&R.layerId===P.relatedTableId)}const Y=r.getLogger("esri.widgets.Feature.support.featureUtils"),aa=/href=(""|'')/gi,ea=/(\{([^\{\r\n]+)\})/g,ca=/'/g,da=/^\s*expression\//i,ia=/(\n)/gi,ja=/[\u00A0-\u9999<>&]/gim,V=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,S=/^(?:mailto:|tel:)/,W=J.convertDateFormatToIntlOptions("short-date-short-time"),ba=B=>{if(!B)return!1;
B=B.toUpperCase();return B.includes("CURRENT_TIMESTAMP")||B.includes("CURRENT_DATE")||B.includes("CURRENT_TIME")},X=({layer:B,method:K,query:P,definitionExpression:R})=>{B.capabilities?.query?.supportsCacheHint&&"attachments"!==K&&(B=w.isSome(P.where)?P.where:null,K=w.isSome(P.geometry)?P.geometry:null,ba(R)||ba(B)||"extent"===K?.type||"tile"===P.resultType||(P.cacheHint=!0))};q.applyTextFormattingHTML=C;q.createfieldInfoMap=function(B,K){const P=new Map;if(!B)return P;B.forEach(R=>{const T=t(R.fieldName,
K);R.fieldName=T;P.set(T.toLowerCase(),R)});return P};q.findRelatedLayer=function(B,K,P){return B&&K&&P?U(B.allLayers,K,P)||U(B.allTables,K,P):null};q.fixTokens=y;q.formatAttributes=function({fieldInfos:B,attributes:K,layer:P,graphic:R,fieldInfoMap:T,relatedInfos:Z}){const fa={};Z?.forEach(ha=>O({attributes:fa,relatedInfo:ha,fieldInfoMap:T,fieldInfos:B,layer:P}));K&&Object.keys(K).forEach(ha=>{fa[ha]=A({fieldName:ha,fieldInfos:B,fieldInfoMap:T,layer:P,value:K[ha],graphic:R})});return fa};q.formatEditInfo=
function(B,K){const {creatorField:P,creationDateField:R,editorField:T,editDateField:Z}=B;if(K){B=K[Z];if("number"===typeof B)return K=K[T],{type:"edit",date:J.formatDate(B,W),user:K};B=K[R];return"number"===typeof B?(K=K[P],{type:"create",date:J.formatDate(B,W),user:K}):null}};q.formatValueToFieldInfo=b;q.getAllFieldInfos=function(B){const K=[];if(!B)return K;const {fieldInfos:P,content:R}=B;P&&K.push(...P);if(!R||!Array.isArray(R))return K;R.forEach(T=>{"fields"===T.type&&(T=T&&T.fieldInfos)&&K.push(...T)});
return K};q.getFieldInfo=m;q.getFieldInfoLabel=function(B,K){return(K=n(K,B?.fieldName))?K.title||null:B?B.label||B.fieldName:null};q.getFixedFieldName=t;q.getFixedFieldNames=function(B,K){return B&&B.map(P=>t(P,K))};q.getSourceLayer=function(B){if(!w.isNone(B))return B.get("sourceLayer")||B.get("layer")};q.graphicCallback=function(B,K){return a.apply(this,arguments)};q.htmlEntities=function(B){return B.replace(ja,K=>`&#${K.charCodeAt(0)};`)};q.isExpressionField=h;q.isRelatedField=L;q.preLayerQueryCallback=
({query:B,layer:K,method:P})=>{X({layer:K,method:P,query:B,definitionExpression:`${K.definitionExpression} ${K.serviceDefinitionExpression}`})};q.preRequestCallback=({queryPayload:B,layer:K,method:P})=>{X({layer:K,method:P,query:B,definitionExpression:`${K.definitionExpression} ${K.serviceDefinitionExpression}`})};q.querySourceLayer=H;q.queryUpdatedFeature=function(B,K){return u.apply(this,arguments)};q.shouldOpenInNewTab=function(B=""){if(B)return!S.test(B.trim().toLowerCase())};q.substituteAttributes=
x;q.substituteFieldsInLinksAndAttributes=function({attributes:B,globalAttributes:K,layer:P,text:R,expressionAttributes:T,fieldInfoMap:Z}){return R?x({formattedAttributes:K,template:c(R,{...K,...T,...B},P),fieldInfoMap:Z}):""};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(q,k){q.getIconPath=function(p){const r=k.getAssetUrl("esri/themes/base/images/files/");return p?"text/plain"===
p?`${r}text-32.svg`:"application/pdf"===p?`${r}pdf-32.svg`:"text/csv"===p?`${r}csv-32.svg`:"application/gpx+xml"===p?`${r}gpx-32.svg`:"application/x-dwf"===p?`${r}cad-32.svg`:"application/postscript"===p||"application/json"===p||"text/xml"===p||"model/vrml"===p?`${r}code-32.svg`:"application/x-zip-compressed"===p||"application/x-7z-compressed"===p||"application/x-gzip"===p||"application/x-tar"===p||"application/x-gtar"===p||"application/x-bzip2"===p||"application/gzip"===p||"application/x-compress"===
p||"application/x-apple-diskimage"===p||"application/x-rar-compressed"===p||"application/zip"===p?`${r}zip-32.svg`:p.includes("image/")?`${r}image-32.svg`:p.includes("audio/")?`${r}sound-32.svg`:p.includes("video/")?`${r}video-32.svg`:p.includes("msexcel")||p.includes("ms-excel")||p.includes("spreadsheetml")?`${r}excel-32.svg`:p.includes("msword")||p.includes("ms-word")||p.includes("wordprocessingml")?`${r}word-32.svg`:p.includes("powerpoint")||p.includes("presentationml")?`${r}report-32.svg`:`${r}generic-32.svg`:
`${r}generic-32.svg`};q.isSupportedImage=function(p){p=p.toLowerCase();return"image/bmp"===p||"image/emf"===p||"image/exif"===p||"image/gif"===p||"image/x-icon"===p||"image/jpeg"===p||"image/png"===p||"image/tiff"===p||"image/x-wmf"===p};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(q,k,p,r,w,E,J){r=function(I){function Q(N){N=I.call(this,N)||this;N.description=null;N.title=null;return N}q._inheritsLoose(Q,I);return Q}(J);k.__decorate([p.property()],r.prototype,"description",void 0);k.__decorate([p.property()],r.prototype,"title",void 0);return r=k.__decorate([E.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],r)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(q,k,p,r,w,E,J,I,Q,N){r=function(e){function d(h,n){h=e.call(this,h,n)||this;h.description=null;h.headingLevel=2;h.title=null;return h}q._inheritsLoose(d,e);var a=d.prototype;a.render=function(){return N.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};a.renderTitle=function(){const {title:h}=this;return h?N.tsx(I.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},h):null};a.renderDescription=function(){const {description:h}=
this;return h?N.tsx("div",{key:"description",class:"esri-feature-element-info__description"},h):null};return d}(J);k.__decorate([p.property()],r.prototype,"description",void 0);k.__decorate([p.property()],r.prototype,"headingLevel",void 0);k.__decorate([p.property()],r.prototype,"title",void 0);return r=k.__decorate([E.subclass("esri.widgets.Feature.support.FeatureElementInfo")],r)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(q,k,p,r){const w={heading:"esri-widget__heading"};q.CSS=w;q.Heading=function({level:E,class:J,...I},Q){E=k.clamp(Math.ceil(E),1,6);return r.tsx(`h${E}`,{...I,class:p.classes(w.heading,J),role:"heading","aria-level":String(E)},Q)};q.incrementHeadingLevel=function(E,J=1){return k.clamp(Math.ceil(E+J),1,6)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e){r=function(d){function a(n,t){n=d.call(this,n,t)||this;n.viewModel=null;n._addTargetToAnchors=f=>{Array.from(f.querySelectorAll("a")).forEach(x=>{Q.shouldOpenInNewTab(x.href)&&!x.hasAttribute("target")&&x.setAttribute("target","_blank")})};return n}q._inheritsLoose(a,d);var h=a.prototype;h.renderLoading=function(){return e.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},e.tsx("div",{class:"esri-feature-content__loader"}))};h.renderCreated=function(){const n=
this.viewModel?.created;return n?n instanceof HTMLElement?e.tsx("div",{key:n,bind:n,afterCreate:this._attachToNode}):N.isWidget(n)?e.tsx("div",{key:n},!n.destroyed&&n.render()):e.tsx("div",{key:n,innerHTML:n,afterCreate:this._addTargetToAnchors}):null};h.render=function(){return e.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};h._attachToNode=function(n){n.appendChild(this)};q._createClass(a,[{key:"creator",get:function(){return this.viewModel?.creator},
set:function(n){this.viewModel&&(this.viewModel.creator=n)}},{key:"graphic",get:function(){return this.viewModel?.graphic},set:function(n){this.viewModel&&(this.viewModel.graphic=n)}}]);return a}(J);k.__decorate([p.property()],r.prototype,"creator",null);k.__decorate([p.property()],r.prototype,"graphic",null);k.__decorate([p.property({type:I})],r.prototype,"viewModel",void 0);return r=k.__decorate([E.subclass("esri.widgets.Feature.FeatureContent")],r)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e){r=function(d){function a(n){var t=d.call(this,n)||this;t._loadingPromise=null;t.created=null;t.creator=null;t.destroyer=null;t.graphic=null;t.handles.add(E.watch(()=>t.creator,f=>{t._destroyContent();t._createContent(f)},E.initial));return t}q._inheritsLoose(a,d);var h=a.prototype;h.destroy=function(){this._destroyContent()};h._destroyContent=function(){const {created:n,graphic:t,destroyer:f}=this;n&&t&&(e.graphicCallback(f,{graphic:t}).catch(()=>null),this._set("created",
null))};h._createContent=function(){var n=q._asyncToGenerator(function*(t){var f=this.graphic;f&&t&&(this._loadingPromise=t=e.graphicCallback(t,{graphic:f}).catch(()=>null),this.notifyChange("state"),f=yield t,t===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",f)))});return function(t){return n.apply(this,arguments)}}();q._createClass(a,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return a}(w.HandleOwnerMixin(r));k.__decorate([J.property({readOnly:!0})],
r.prototype,"created",void 0);k.__decorate([J.property()],r.prototype,"creator",void 0);k.__decorate([J.property()],r.prototype,"destroyer",void 0);k.__decorate([J.property({type:p})],r.prototype,"graphic",void 0);k.__decorate([J.property({readOnly:!0})],r.prototype,"state",null);return r=k.__decorate([N.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],r)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h){w=function(n){function t(x,F){x=n.call(this,x,F)||this;x._contentWidget=null;x.viewModel=new d;return x}q._inheritsLoose(t,n);var f=t.prototype;f.initialize=function(){this.addHandles(p.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),p.initial))};f.destroy=function(){this._destroyContentWidget()};f.renderLoading=function(){return h.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},h.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};f.render=function(){const {state:x}=this.viewModel;return h.tsx("div",{class:"esri-feature-expression"},"loading"===x?this.renderLoading():"disabled"===x?null:this._contentWidget?.render())};f._destroyContentWidget=function(){const {_contentWidget:x}=this;x&&(x.viewModel=null,x.destroy());this._contentWidget=null};f._setupExpressionWidget=function(){const {contentElementViewModel:x,contentElement:F}=this.viewModel,G=F?.type;this._destroyContentWidget();this._contentWidget=
x?"fields"===G?new N({viewModel:x}):"media"===G?new e({viewModel:x}):"text"===G?new Q({viewModel:x}):null:null;this.scheduleRender()};return t}(I);k.__decorate([r.property({type:d})],w.prototype,"viewModel",void 0);return w=k.__decorate([J.subclass("esri.widgets.Feature.FeatureExpression")],w)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h){w=function(n){function t(x,F){x=n.call(this,x,F)||this;x._featureElementInfo=null;x.viewModel=new Q;x.messages=null;x.messagesURIUtils=null;return x}q._inheritsLoose(t,n);var f=t.prototype;f.initialize=function(){this._featureElementInfo=new N;this.addHandles(p.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),p.initial))};f.destroy=function(){this._featureElementInfo?.destroy()};f.renderFieldInfo=function(x,F){var {attributes:G}=
this.viewModel;const y=x.fieldName,c=x.label||y;G=G?null==G[y]?"":G[y]:"";x=!(!x.format||!x.format.dateFormat);G="number"!==typeof G||x?e.autoLink(this.messagesURIUtils,G):this._forceLTR(G);x={["esri-feature-fields__field-data--date"]:x};return h.tsx("tr",{key:`fields-element-info-row-${y}-${F}`},h.tsx("th",{key:`fields-element-info-row-header-${y}-${F}`,class:"esri-feature-fields__field-header",innerHTML:c}),h.tsx("td",{key:`fields-element-info-row-data-${y}-${F}`,class:this.classes("esri-feature-fields__field-data",
x),innerHTML:G}))};f.renderFields=function(){const {formattedFieldInfos:x}=this.viewModel;return x?.length?h.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},h.tsx("tbody",null,x.map((F,G)=>this.renderFieldInfo(F,G)))):null};f.render=function(){return h.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};f._setupFeatureElementInfo=function(){const {description:x,title:F}=this;this._featureElementInfo?.set({description:x,title:F})};
f._forceLTR=function(x){return`&lrm;${x}`};q._createClass(t,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(x){this.viewModel.attributes=x}},{key:"description",get:function(){return this.viewModel.description},set:function(x){this.viewModel.description=x}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(x){this.viewModel.expressionInfos=x}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(x){this.viewModel.fieldInfos=
x}},{key:"title",get:function(){return this.viewModel.title},set:function(x){this.viewModel.title=x}}]);return t}(I);k.__decorate([r.property()],w.prototype,"attributes",null);k.__decorate([r.property()],w.prototype,"description",null);k.__decorate([r.property()],w.prototype,"expressionInfos",null);k.__decorate([r.property()],w.prototype,"fieldInfos",null);k.__decorate([r.property()],w.prototype,"title",null);k.__decorate([r.property({type:Q,nonNullable:!0})],w.prototype,"viewModel",void 0);k.__decorate([r.property(),
a.messageBundle("esri/widgets/Feature/t9n/Feature")],w.prototype,"messages",void 0);k.__decorate([r.property(),a.messageBundle("esri/widgets/support/t9n/uriUtils")],w.prototype,"messagesURIUtils",void 0);return w=k.__decorate([J.subclass("esri.widgets.Feature.FeatureFields")],w)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N){p=function(e){function d(a){a=e.call(this,a)||this;a.attributes=null;a.expressionInfos=null;a.description=null;a.fieldInfos=null;a.title=null;return a}q._inheritsLoose(d,e);q._createClass(d,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:a,fieldInfos:h}=this,n=[];h?.forEach(t=>{if(!t.hasOwnProperty("visible")||t.visible)t=t.clone(),t.label=N.getFieldInfoLabel(t,a),n.push(t)});return n}}]);return d}(p);k.__decorate([r.property()],p.prototype,"attributes",
void 0);k.__decorate([r.property({type:[I]})],p.prototype,"expressionInfos",void 0);k.__decorate([r.property()],p.prototype,"description",void 0);k.__decorate([r.property({type:[Q]})],p.prototype,"fieldInfos",void 0);k.__decorate([r.property({readOnly:!0})],p.prototype,"formattedFieldInfos",null);k.__decorate([r.property()],p.prototype,"title",void 0);return p=k.__decorate([J.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],p)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(q,k){function p(w){let E=null;r.some(J=>{J.pattern.test(w)&&(E=J);return!!E});return E}const r=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];q.autoLink=function(w,E){if("string"!==typeof E||!E)return E;const J=p(E);if(!J)return E;const I=E.match(J.pattern);
w=k.replace(k.replace(J.label,{messages:w,hierPart:I&&I[2]}),{appName:J.appName});return E.replace(J.pattern,`<a${J.target?` target="${J.target}"`:""} href="$1"${"_blank"===J.target?' rel\x3d"noreferrer"':""}>${w}</a>`)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x){E=function(F){function G(c,b){var m=F.call(this,c,b)||this;m._refreshTimer=null;m._refreshIntervalInfo=null;m._featureElementInfo=null;m.viewModel=new e;m.messages=null;m._getChartDependencies=function(){var v=q._asyncToGenerator(function*(z){const C=yield h.loadChartsModule(),{destroyed:A,viewModel:H}=q._assertThisInitialized(m);if(!A&&H&&z){var {activeMediaInfo:D}=H,l=yield m._getRendererColors(C);m._renderChart({chartDiv:z,mediaInfo:D,chartsModule:C,
colorMap:l})}});return function(z){return v.apply(this,arguments)}}();return m}q._inheritsLoose(G,F);var y=G.prototype;y.initialize=function(){this._featureElementInfo=new d;this.addHandles([r.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),r.initial),r.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),r.initial)])};y.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo?.destroy()};
y.render=function(){return f.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};y.renderMedia=function(){const {formattedMediaInfoCount:c}=this.viewModel;return c?f.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};y.renderImageMediaInfo=function(c){var {_refreshIntervalInfo:b}=this;
const {activeMediaInfoIndex:m,formattedMediaInfoCount:v}=this.viewModel,{value:z,refreshInterval:C,altText:A,title:H,type:D}=c,{sourceURL:l,linkURL:g}=z;c=a.shouldOpenInNewTab(g??void 0)?"_blank":"_self";const u="_blank"===c?"noreferrer":"";b=C?b:null;b=f.tsx("img",{alt:A||H,key:`media-${D}-${m}-${v}-${b?b.timestamp:0}`,src:(b?b.sourceURL:l)??void 0});return(c=g?f.tsx("a",{title:H,href:g,rel:u,target:c},b):null)?c:b};y.renderChartMediaInfo=function(c){const {activeMediaInfoIndex:b,formattedMediaInfoCount:m}=
this.viewModel;return f.tsx("div",{key:`media-${c.type}-${b}-${m}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};y.renderMediaInfoType=function(){const {activeMediaInfo:c}=this.viewModel;return c?"image"===c.type?this.renderImageMediaInfo(c):c.type.includes("chart")?this.renderChartMediaInfo(c):null:null};y.renderMediaInfo=function(){var {activeMediaInfo:c}=this.viewModel;if(!c)return null;const b=c.title?f.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",
innerHTML:c.title}):null;c=c.caption?f.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:c.caption}):null;return f.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},f.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),b,c)};y.renderMediaPageButton=function(c){if(2>this.viewModel.formattedMediaInfoCount)return null;const b=(c="previous"===c)?this.messages.previous:this.messages.next,m=c?this.classes("esri-feature-media__button",
"esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),v=c?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),z=c?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl",
"esri-icon-left-triangle-arrow");return f.tsx("button",{type:"button",key:c?"media-previous":"media-next",title:b,"aria-label":b,tabIndex:0,class:m,bind:this,onclick:c?this._previous:this._next},f.tsx("span",{"aria-hidden":"true",class:v}),f.tsx("span",{"aria-hidden":"true",class:z}))};y._setupFeatureElementInfo=function(){const {description:c,title:b}=this;this._featureElementInfo?.set({description:c,title:b})};y._next=function(){this.viewModel.next()};y._previous=function(){this.viewModel.previous()};
y._getRenderer=function(){const {isAggregate:c,layer:b}=this.viewModel;return c&&b?.featureReduction&&"renderer"in b.featureReduction?b.featureReduction.renderer:b?.renderer};y._getRendererColors=function(){var c=q._asyncToGenerator(function*(b){const {am4core:m}=b,v=new Map;b=this._getRenderer();if(!b)return v;const z=yield Q.getColorsFromRenderer(b);z.delete("default");if(!Array.from(z.values()).every(C=>1===C?.length))return v;v.set("default-line-value",m.color({r:50,g:50,b:50,a:1}));Array.from(z.keys()).forEach(C=>
{C&&v.set(C,m.color(z.get(C)?.[0].toCss(!0)))});return v});return function(b){return c.apply(this,arguments)}}();y._handleMediaKeyup=function(c){const b=p.eventKey(c);"ArrowLeft"===b&&(c.stopPropagation(),this.viewModel.previous());"ArrowRight"===b&&(c.stopPropagation(),this.viewModel.next())};y._renderChart=function(c){const {abilities:b}=this.viewModel,{chartsModule:m,chartDiv:v,mediaInfo:z,colorMap:C}=c,{value:A,type:H}=z,{am4core:D}=m,l=h.getColorSet(D);x.isDarkTheme()&&D.useTheme(m.am4themes_dark);
const g=window.matchMedia("(prefers-reduced-motion: reduce)");b.chartAnimation&&!g.matches?D.useTheme(m.am4themes_animated):D.unuseTheme(m.am4themes_animated);D.useTheme(function(u){u instanceof D.ColorSet&&l&&(u.list=l)});c="pie-chart"===H?this._createPieChart(c):this._createXYChart(c);v.setAttribute("aria-label",z.altText||z.title);c.data=A.series.map(u=>({tooltip:u.tooltip,value:u.value,color:C.get(u.fieldName)})).filter(u=>"pie-chart"===H?null!=u.value&&0<u.value:!0)};y._customizeChartTooltip=
function(c,b){c&&(c.label.wrap=!0,c.label.maxWidth=200,c.autoTextColor=!1,c.getFillFromObject=!1,c.label.fill=b.color("#ffffff"),c.background.fill=b.color({r:0,g:0,b:0,a:.7}))};y._createPieChart=function(c){const {chartDiv:b,chartsModule:m}=c,{am4core:v,am4charts:z}=m;c=v.create(b,z.PieChart);c.rtl=n.isRTL(this.container);const C=c.series.push(new z.PieSeries);C.labels.template.disabled=!0;C.ticks.template.disabled=!0;C.dataFields.value="value";C.dataFields.category="tooltip";this._customizeChartTooltip(C.tooltip,
v);C.slices.template.propertyFields.fill="color";C.slices.template.propertyFields.stroke="color";return c};y._getMinSeriesValue=function(c){let b=0;c.forEach(m=>b=Math.min(m.value,b));return b};y._createColumnChart=function(c,b){const {chartsModule:m,mediaInfo:v}=b;({value:b}=v);const {am4core:z,am4charts:C}=m;var A=c.xAxes.push(new C.CategoryAxis);A.dataFields.category="tooltip";A.renderer.labels.template.disabled=!0;const H=A.tooltip;this._customizeChartTooltip(H,z);H.events.on("sizechanged",()=>
{H.dy=-H.contentHeight});A=c.yAxes.push(new C.ValueAxis);const D=A.renderer.labels.template;A.renderer.minLabelPosition=.05;A.renderer.maxLabelPosition=.95;A.min=this._getMinSeriesValue(b.series);this._customizeChartTooltip(A.tooltip,z);D.wrap=!0;A=c.series.push(new C.ColumnSeries);A.dataFields.valueY="value";A.dataFields.categoryX="tooltip";A.columns.template.propertyFields.fill="color";A.columns.template.propertyFields.stroke="color";c.cursor=new C.XYCursor;15<b.series.length&&(c.scrollbarX=new z.Scrollbar)};
y._createBarChart=function(c,b){const {chartsModule:m,mediaInfo:v}=b;({value:b}=v);const {am4core:z,am4charts:C}=m;var A=c.yAxes.push(new C.CategoryAxis);A.dataFields.category="tooltip";A.renderer.inversed=!0;A.renderer.labels.template.disabled=!0;const H=A.tooltip;this._customizeChartTooltip(H,z);H.events.on("sizechanged",()=>{H.dx=H.contentWidth});A=c.xAxes.push(new C.ValueAxis);const D=A.renderer.labels.template;A.renderer.minLabelPosition=.05;A.renderer.maxLabelPosition=.95;A.min=this._getMinSeriesValue(b.series);
this._customizeChartTooltip(A.tooltip,z);D.wrap=!0;A=c.series.push(new C.ColumnSeries);A.dataFields.valueX="value";A.dataFields.categoryY="tooltip";A.columns.template.propertyFields.fill="color";A.columns.template.propertyFields.stroke="color";c.cursor=new C.XYCursor;15<b.series.length&&(c.scrollbarY=new z.Scrollbar)};y._createLineChart=function(c,b){const {chartsModule:m,mediaInfo:v,colorMap:z}=b;({value:b}=v);const {am4core:C,am4charts:A}=m;var H=c.xAxes.push(new A.CategoryAxis);H.dataFields.category=
"tooltip";H.renderer.labels.template.disabled=!0;const D=H.tooltip;this._customizeChartTooltip(D,C);D.events.on("sizechanged",()=>{D.dy=-D.contentHeight});H=c.yAxes.push(new A.ValueAxis);var l=H.renderer.labels.template;H.renderer.minLabelPosition=.05;H.renderer.maxLabelPosition=.95;H.min=this._getMinSeriesValue(b.series);this._customizeChartTooltip(H.tooltip,C);l.wrap=!0;H=c.series.push(new A.LineSeries);H.dataFields.categoryX="tooltip";H.dataFields.valueY="value";H.strokeWidth=1;if(l=z.get("default-line-value"))H.stroke=
l;H=H.bullets.push(new A.CircleBullet);H.propertyFields.fill="color";H.propertyFields.stroke="color";c.cursor=new A.XYCursor;15<b.series.length&&(c.scrollbarX=new C.Scrollbar)};y._createXYChart=function(c){const {chartDiv:b,chartsModule:m,mediaInfo:v}=c,{type:z}=v,{am4core:C,am4charts:A}=m,H=C.create(b,A.XYChart);H.rtl=n.isRTL(this.container);"column-chart"===z&&this._createColumnChart(H,c);"bar-chart"===z&&this._createBarChart(H,c);"line-chart"===z&&this._createLineChart(H,c);return H};y._clearMediaRefreshTimer=
function(){const {_refreshTimer:c}=this;c&&(clearTimeout(c),this._refreshTimer=null)};y._updateMediaInfoTimestamp=function(c){const b=Date.now();this._refreshIntervalInfo={timestamp:b,sourceURL:c&&this._getImageSource(c,b)};this.scheduleRender()};y._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:c}=this.viewModel;c&&"image"===c.type&&c.refreshInterval&&this._setRefreshTimeout(c)};y._setRefreshTimeout=function(c){const {refreshInterval:b,value:m}=c;b&&(c=6E4*
b,this._updateMediaInfoTimestamp(m.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(m.sourceURL)},c))};y._getImageSource=function(c,b){const m=c.includes("?")?"\x26":"?",[v,z=""]=c.split("#");return`${v}${m}timestamp=${b}${z?"#":""}${z}`};q._createClass(G,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(c){this.viewModel.attributes=c}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(c){this.viewModel.activeMediaInfoIndex=
c}},{key:"description",get:function(){return this.viewModel.description},set:function(c){this.viewModel.description=c}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(c){this.viewModel.fieldInfoMap=c}},{key:"layer",get:function(){return this.viewModel.layer},set:function(c){this.viewModel.layer=c}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(c){this.viewModel.mediaInfos=c}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},
set:function(c){this.viewModel.popupTemplate=c}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(c){this.viewModel.relatedInfos=c}},{key:"title",get:function(){return this.viewModel.title},set:function(c){this.viewModel.title=c}}]);return G}(N);k.__decorate([w.property()],E.prototype,"attributes",null);k.__decorate([w.property()],E.prototype,"activeMediaInfoIndex",null);k.__decorate([w.property()],E.prototype,"description",null);k.__decorate([w.property()],E.prototype,
"fieldInfoMap",null);k.__decorate([w.property()],E.prototype,"layer",null);k.__decorate([w.property()],E.prototype,"mediaInfos",null);k.__decorate([w.property()],E.prototype,"popupTemplate",null);k.__decorate([w.property()],E.prototype,"relatedInfos",null);k.__decorate([w.property()],E.prototype,"title",null);k.__decorate([w.property({type:e})],E.prototype,"viewModel",void 0);k.__decorate([w.property(),t.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,"messages",void 0);return E=k.__decorate([I.subclass("esri.widgets.Feature.FeatureMedia")],
E)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),function(q,k,p,r,w,E,J,I,Q,N,e,d){function a(c,b,m){return h.apply(this,arguments)}function h(){h=k._asyncToGenerator(function*(c,
b,m){w.getOrCreateMapValue(c,b,()=>[]).push(...m)});return h.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*(c){const b=new Map;if(!c)return b;if("visualVariables"in c&&c.visualVariables){var m=c.visualVariables.filter(z=>"color"===z.type);for(var v of m)m=((yield e.getRampStops(v))??[]).map(z=>z.color),yield a(b,v.field||v.valueExpression,m)}if("heatmap"===c.type)v=d.getHeatmapRampStops(c).map(z=>z.color),yield a(b,c.field||c.valueExpression,v);else if("pie-chart"===c.type){for(const z of c.attributes)yield a(b,
z.field||z.valueExpression,[z.color]);yield a(b,"default",[c?.othersCategory?.color,N.getColorFromSymbol(c.backgroundFillSymbol,null)])}else if("dot-density"===c.type){for(const z of c.attributes)yield a(b,z.field||z.valueExpression,[z.color]);yield a(b,"default",[c.backgroundColor])}else if("unique-value"===c.type)if("predominance"===c.authoringInfo?.type)for(const z of c.uniqueValueInfos??[])yield a(b,z.value.toString(),[N.getColorFromSymbol(z.symbol,null)]);else{v=(c.uniqueValueInfos??[]).map(D=>
N.getColorFromSymbol(D.symbol,null));const {field:z,field2:C,field3:A,valueExpression:H}=c;if(z||H)yield a(b,z||H,v);C&&(yield a(b,C,v));A&&(yield a(b,A,v))}else if("class-breaks"===c.type){v=c.classBreakInfos.map(A=>N.getColorFromSymbol(A.symbol,null));const {field:z,valueExpression:C}=c;yield a(b,z??C,v)}else"simple"===c.type&&(yield a(b,"default",[N.getColorFromSymbol(c.symbol,null)]));"defaultSymbol"in c&&c.defaultSymbol&&(yield a(b,"default",[N.getColorFromSymbol(c.defaultSymbol,null)]));b.forEach((z,
C)=>{z=p.unique(z.filter(Boolean),(A,H)=>JSON.stringify(A)===JSON.stringify(H));b.set(C,z)});return b});return n.apply(this,arguments)}function t(c){let b=c.minValue,m=c.maxValue;const v=c.isFirstBreak?"":F.gt+" ";c="percent-of-total"===c.normalizationType?F.pct:"";b=null==b?"":I.format(b);m=null==m?"":I.format(m);return v+b+c+" "+F.ld+" "+m+c}function f(c,b){return"normalizationField"in c&&c.normalizationField?{type:"normalized-field",field:c.field,normalizationField:c.normalizationField}:"field"in
c&&c.field?{type:"field",field:c.field}:"valueExpression"in c&&c.valueExpression?{type:"expression",expression:c.valueExpression,title:c.valueExpressionTitle,returnType:b}:null}const x=r.getLogger("esri.renderers.support.utils"),F={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},G={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},y={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",
day:"long-month-day-year",month:"long-month-day-year",year:"year"};r=J.convertDateFormatToIntlOptions("short-date");q.calculateDateFormatInterval=function(c){c=c.map(C=>new Date(C));const b=c.length;let m=Infinity,v=null;for(let C=0;C<b-1;C++){const A=c[C];let H=Infinity,D=null;for(let l=C+1;l<b;l++){var z=c[l];z=A.getFullYear()!==z.getFullYear()&&"year"||A.getMonth()!==z.getMonth()&&"month"||A.getDate()!==z.getDate()&&"day"||A.getHours()!==z.getHours()&&"hour"||A.getMinutes()!==z.getMinutes()&&"minute"||
A.getSeconds()!==z.getSeconds()&&"second"||"millisecond";const g=G[z];g<H&&(H=g,D=z)}H<m&&(m=H,v=D)}return v};q.createClassBreakLabel=t;q.createColorStops=function(c){const {values:b,colors:m,labelIndexes:v,isDate:z,dateFormatOptions:C}=c;return b.map((A,H)=>{var D=null;if(!v||v.includes(H)){let l;if(l=z?J.formatDate(A,C):I.format(A))D="",0===H?D=F.lt+" ":H===b.length-1&&(D=F.gt+" "),D+=l}return new Q({value:A,color:m[H],label:D})})};q.createUniqueValueLabel=function(c){const {value:b,domain:m,fieldInfo:v,
dateFormatInterval:z}=c;c=String(b);const C=m&&"codedValues"in m&&m.codedValues?m.getName(b):null;C?c=C:"number"===typeof b&&(c=v&&"date"===v.type?J.formatDate(b,z&&J.convertDateFormatToIntlOptions(y[z])):I.format(b));return c};q.getAttribute=f;q.getAttributes=function(c,b){const m=[];if("class-breaks"===c.type||"heatmap"===c.type)m.push(f(c,"number"));else if("unique-value"===c.type){var v=c.authoringInfo;if(v&&"relationship"===v.type){if(v.field1&&v.field2){var z=v.field2.field;const C=v.field2.normalizationField;
m.push(f({field:v.field1.field,normalizationField:v.field1.normalizationField}));m.push(f({field:z,normalizationField:C}))}}else z=c.uniqueValueInfos?.[0],v=null,z&&z.value&&(z=typeof c.uniqueValueInfos[0].value,"string"===z||"number"===z)&&(v=z),m.push(f(c,v)),[c.field2,c.field3].forEach(C=>C&&m.push({type:"field",field:C}))}else"attributes"in c&&c.attributes?.forEach(C=>m.push(f(C,"number")));(c=b?b(c):"visualVariables"in c?c.visualVariables:null)&&c.forEach(C=>m.push(f(C,"number")));return p.unique(m.filter(E.isSome),
(C,A)=>"field"===C.type&&"field"===A.type?C.field===A.field:"normalized-field"===C.type&&"normalized-field"===A.type?C.field===A.field&&C.normalizationField===A.normalizationField:"expression"===C.type&&"expression"===A.type?C.expression===A.expression:!1)};q.getColorsFromRenderer=function(c){return n.apply(this,arguments)};q.setLabelsForClassBreaks=function(c){const b=c.classBreakInfos,m=c.normalizationType;let v=[];if(b&&b.length)if("standard-deviation"===c.classificationMethod)x.warn("setLabelsForClassBreaks",
"cannot set labels for class breaks generated using 'standard-deviation' method.");else if(c.round){v.push(b[0].minValue);for(const z of b)v.push(z.maxValue);v=I.round(v);b.forEach((z,C)=>{z.label=t({minValue:0===C?v[0]:v[C],maxValue:v[C+1],isFirstBreak:0===C,normalizationType:m})})}else b.forEach((z,C)=>{z.label=t({minValue:z.minValue,maxValue:z.maxValue,isFirstBreak:0===C,normalizationType:m})})};q.timelineDateFormatOptions=r;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/numberUtils":function(){define(["exports",
"../../intl","../../intl/number"],function(q,k,p){function r(e,d){return e-d}function w(e,d){let a;a=Number(e.toFixed(d));a<e?e=a+1/10**d:(e=a,a-=1/10**d);a=Number(a.toFixed(d));e=Number(e.toFixed(d));return[a,e]}function E(e,d,a,h,n){e=I(e,d,a,h);d=null==e.next||e.next<=n;return(null==e.previous||e.previous<=n)&&d||e.previous+e.next<=2*n}function J(e){e=String(e);var d=e.match(Q);if(d&&d[1])return{integer:d[1].split("").length,fractional:d[3]?d[3].split("").length:0};if(e.toLowerCase().includes("e")&&
(d=e.split("e"),e=d[0],d=d[1],e&&d)){e=Number(e);d=Number(d);const a=0<d;a||(d=Math.abs(d));e=J(e);a?(e.integer+=d,e.fractional=d>e.fractional?0:e.fractional-d):(e.fractional+=d,e.integer=d>e.integer?1:e.integer-d);return e}return{integer:0,fractional:0}}function I(e,d,a,h){const n={previous:null,next:null};if(null!=a){const t=e-a;n.previous=Math.floor(Math.abs(100*(d-a-t)/t))}null!=h&&(e=h-e,n.next=Math.floor(Math.abs(100*(h-d-e)/e)));return n}const Q=/^-?(\d+)(\.(\d+))?$/i,N={maximumFractionDigits:20};
q.format=function(e){return p.formatNumber(e,N)};q.numDigits=J;q.percentChange=I;q.round=function(e,d={}){e=e.slice(0);const {tolerance:a=2,strictBounds:h=!1,indexes:n=e.map((f,x)=>x)}=d;n.sort(r);for(d=0;d<n.length;d++){const f=n[d],x=e[f],F=0===f?null:e[f-1],G=f===e.length-1?null:e[f+1],y=J(x).fractional;if(y){let c=0,b=!1;for(var t=void 0;c<=y&&!b;)t=w(x,c),t=h&&0===d?t[1]:t[0],b=E(x,t,F,G,a),c++;b&&(e[f]=t)}}return e};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a){function h(l){l=l.symbolLayers;if(!l)return null;let g=null;l.forEach(u=>{if("object"!==u.type||null==u.resource?.href)g="water"===u.type?I.unwrap(u.color):I.isSome(u.material)?I.unwrap(u.material.color):null});return g?new r(g):null}function n(l,g){if(null==g||null==l)return l;l=l.toRgba();l[3]*=g;return new r(l)}function t(l,g,u){if(l=l.symbolLayers){var L=M=>{M=I.isSome(M)?M:null;g=g??M??(null!=u?D:null);return n(g,u)};l.forEach(M=>{if("object"!==M.type||null==
M.resource?.href||g)if("water"===M.type)M.color=L(M.color);else{var O=I.isSome(M.material)?M.material.color:null;O=L(O);I.isNone(M.material)?M.material=new a.Symbol3DMaterial({color:O}):M.material.color=O;null!=u&&"outline"in M&&I.isSome(M.outline)&&I.isSome(M.outline.color)&&(M.outline.color=n(M.outline.color,u))}})}}function f(l,g){return x.apply(this,arguments)}function x(){x=p._asyncToGenerator(function*(l,g){(l=l.symbolLayers)&&(yield E.forEach(l,function(){var u=p._asyncToGenerator(function*(L){return F(L,
g)});return function(L){return u.apply(this,arguments)}}()))});return x.apply(this,arguments)}function F(l,g){return G.apply(this,arguments)}function G(){G=p._asyncToGenerator(function*(l,g){switch(l.type){case "extrude":l.size="number"===typeof g[2]?g[2]:0;break;case "icon":case "line":case "text":g=y(g);I.isSome(g)&&(l.size=g);break;case "path":const u=m(g,N.ONES,[l.width,void 0,l.height]);l.width=C(g[0],l.width,1,u);l.height=C(g[2],l.height,1,u);break;case "object":yield c(l,g)}});return G.apply(this,
arguments)}function y(l){for(const g of l)if("number"===typeof g)return g;return null}function c(l,g){return b.apply(this,arguments)}function b(){b=p._asyncToGenerator(function*(l,g){const {resourceSize:u,symbolSize:L}=yield v(l),M=m(g,u,L);l.width=C(g[0],L[0],u[0],M);l.depth=C(g[1],L[1],u[1],M);l.height=C(g[2],L[2],u[2],M)});return b.apply(this,arguments)}function m(l,g,u){for(let L=0;3>L;L++){const M=l[L];switch(M){case "symbol-value":return l=u[L],null!=l?l/g[L]:1;case "proportional":break;default:if(M&&
g[L])return M/g[L]}}return 1}function v(l){return z.apply(this,arguments)}function z(){z=p._asyncToGenerator(function*(l){const g=yield(yield new Promise((Y,aa)=>q(["./symbolLayerUtils"],Y,aa))).computeObjectLayerResourceSize(l,10),{width:u,height:L,depth:M}=l;l=[u,M,L];let O=1;for(var U=0;3>U;U++){const Y=l[U];if(null!=Y){O=Y/g[U];break}}for(U=0;3>U;U++)null==l[U]&&(l[U]=g[U]*O);return{resourceSize:g,symbolSize:l}});return z.apply(this,arguments)}function C(l,g,u,L){switch(l){case "proportional":return u*
L;case "symbol-value":return null!=g?g:u;default:return l}}function A(){A=p._asyncToGenerator(function*(l,g){if(l&&g){if(w.isSymbol3D(l))return f(l,g);if(w.isSymbol2D(l)&&(g=y(g),!I.isNone(g)))switch(l.type){case "simple-marker":l.size=g;break;case "picture-marker":const u=l.width/l.height;1<u?(l.width=g,l.height=g*u):(l.width=g*u,l.height=g);break;case "simple-line":l.width=g;break;case "text":l.font.size=g}}});return A.apply(this,arguments)}function H(){H=p._asyncToGenerator(function*(l,g){const u=
yield l.fetchSymbol(g);return u?u:l.fetchCIMSymbol(g)});return H.apply(this,arguments)}const D=new r("white");k.applyColorToSymbol=function(l,g,u){if(l&&(g||null!=u))if(g&&(g=new r(g)),w.isSymbol3D(l))t(l,g,u);else if(w.isSymbol2D(l)){if(g=g??l.color)l.color=n(g,u);null!=u&&"outline"in l&&l.outline&&l.outline.color&&(l.outline.color=n(l.outline.color,u))}};k.applyOpacityToColor=n;k.applyRotationToSymbol=function(l,g,u){l&&null!=g&&(w.isSymbol3D(l)?(l=l.symbolLayers)&&l.forEach(L=>{if(L&&"object"===
L.type)switch(u){case "tilt":L.tilt=g;break;case "roll":L.roll=g;break;default:L.heading=g}}):!w.isSymbol2D(l)||"simple-marker"!==l.type&&"picture-marker"!==l.type&&"text"!==l.type||(l.angle=g))};k.applySizesToSymbol=function(l,g){return A.apply(this,arguments)};k.fetchWebStyleSymbol=function(l,g){return H.apply(this,arguments)};k.getCSSFilterFromEffectList=function(l){if(!l)return null;l=l.effects.filter(g=>"bloom"!==g.type).map(g=>g.toJSON());return e.effectFunctionsFromJSON(l)};k.getColorFromSymbol=
function(l,g){if(!l)return null;let u=null;w.isSymbol3D(l)?u=h(l):w.isSymbol2D(l)&&(u=l.color?new r(l.color):null);return u?n(u,g):null};k.getIconHref=function(l){return I.unwrapOrThrow(l.resource).href};k.getSymbolOutlineSize=function(l){if(!l)return 0;if(w.isSymbol3D(l)){{const g=l.symbolLayers&&l.symbolLayers.length;g?(l=l.symbolLayers.getItemAt(g-1),l="outline"in l?I.get(l,"outline","size"):void 0):l=void 0}return I.isSome(l)?l:0}return Q.px2pt(d.getStroke(l)?.width)};k.isVolumetricSymbol=function(l){if(I.isNone(l)||
!("symbolLayers"in l)||I.isNone(l.symbolLayers))return!1;switch(l.type){case "point-3d":return l.symbolLayers.some(g=>"object"===g.type);case "line-3d":return l.symbolLayers.some(g=>"path"===g.type);case "polygon-3d":return l.symbolLayers.some(g=>"object"===g.type||"extrude"===g.type);default:return!1}};k.symbolHasExtrudeSymbolLayer=function(l){return I.isSome(l)&&"polygon-3d"===l.type&&l.symbolLayers.some(g=>"extrude"===g.type)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(q,k,p,r,w,E,J){function I(e){if(!e)return null;let d=null;switch(e.type){case "simple-fill":case "picture-fill":case "simple-marker":d=I(e.outline);break;case "simple-line":const a=E.pt2px(e.width);null!=e.style&&"none"!==e.style&&0!==a&&(d={color:e.color,style:N(e.style),width:a,cap:e.cap,join:"miter"===e.join?E.pt2px(e.miterLimit):e.join});break;default:d=null}return d}const Q=new w(1E3),N=(()=>{const e={};return d=>{if(e[d])return e[d];const a=d.replace(/-/g,"");return e[d]=a}})();p=new p([128,
128,128]);q.defaultThematicColor=p;q.dekebabifyLineStyle=N;q.getFill=function(e){const d=e.style;let a=null;if(e)switch(e.type){case "simple-marker":"cross"!==d&&"x"!==d&&(a=e.color);break;case "simple-fill":"solid"===d?a=e.color:"none"!==d&&(a={type:"pattern",x:0,y:0,src:k.getAssetUrl(`esri/symbols/patterns/${d}.png`),width:5,height:5});break;case "picture-fill":a={type:"pattern",src:e.url,width:E.pt2px(e.width)*e.xscale,height:E.pt2px(e.height)*e.yscale,x:E.pt2px(e.xoffset),y:E.pt2px(e.yoffset)};
break;case "text":a=e.color;break;case "cim":a=J.getCIMSymbolColor(e)}return a};q.getPatternUrlWithColor=function(e,d){const a=e+"-"+d;return void 0!==Q.get(a)?Promise.resolve(Q.get(a)):r(e,{responseType:"image"}).then(h=>{h=h.data;const n=h.naturalWidth,t=h.naturalHeight,f=document.createElement("canvas");f.width=n;f.height=t;const x=f.getContext("2d");x.fillStyle=d;x.fillRect(0,0,n,t);x.globalCompositeOperation="destination-in";x.drawImage(h,0,0);h=f.toDataURL();Q.put(a,h);return h})};q.getStroke=
I;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(q){return function(){function k(r,w){this._storage=new q.MemCacheStorage;this._storage.maxSize=r;w&&this._storage.registerRemoveFunc("",w)}var p=k.prototype;p.put=function(r,w){this._storage.put(r,w,1,1)};p.pop=function(r){return this._storage.pop(r)};p.get=function(r){return this._storage.get(r)};p.clear=function(){this._storage.clearAll()};p.destroy=function(){this._storage.destroy()};
return k}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(q,k,p){function r(d){d=p.toCIMSymbolJSON(d);if("CIMTextSymbol"===d?.type)return d.height??0;let a=0;if(d?.symbolLayers)for(const h of d.symbolLayers)p.isCIMMarker(h)&&null!=h.size&&h.size>a?a=h.size:p.isCIMStroke(h)&&null!=h.width&&h.width>a?a=h.width:p.isCIMFill(h);return a}function w(d,a,h,n){if(d)if("CIMTextSymbol"===d.type)null!=d.height&&(d.height*=a);else{if(h&&d.effects)for(const t of d.effects)I(t,
a);if(d.symbolLayers)for(const t of d.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":E(t,a,n);break;case "CIMPictureStroke":case "CIMSolidStroke":!n?.preserveOutlineWidth&&t.width&&(t.width*=a);break;case "CIMPictureFill":t.height&&(t.height*=a);t.offsetX&&(t.offsetX*=a);t.offsetY&&(t.offsetY*=a);break;case "CIMHatchFill":w(t.lineSymbol,a,!0,{...n,preserveOutlineWidth:!1}),t.offsetX&&(t.offsetX*=a),t.offsetY&&(t.offsetY*=a),t.separation&&(t.separation*=a)}}}function E(d,
a,h){if(d&&(d.markerPlacement&&J(d.markerPlacement,a),d.offsetX&&(d.offsetX*=a),d.offsetY&&(d.offsetY*=a),d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*a,y:d.anchorPoint.y*a}),d.size=null!=d.size?d.size*a:0,"CIMVectorMarker"===d.type&&d.markerGraphics))for(const n of d.markerGraphics)d.scaleSymbolsProportionally||w(n.symbol,a,!0,h)}function J(d,a){p.isCIMMarkerStrokePlacement(d)&&d.offset&&(d.offset*=a);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&
(d.customEndingOffset*=a);d.offsetAlongLine&&(d.offsetAlongLine*=a);if(d.placementTemplate&&d.placementTemplate.length){var h=d.placementTemplate.map(n=>n*a);d.placementTemplate=h}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=a);d.placementTemplate&&d.placementTemplate.length&&(h=d.placementTemplate.map(n=>n*a),d.placementTemplate=h);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=a);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&
(d.offsetAlongLine*=a);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=a);d.endPosition&&(d.endPosition*=a);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=a);d.offsetY&&(d.offsetY*=a);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&(d.offsetX*=a),d.offsetY&&(d.offsetY*=a),d.stepX&&(d.stepX*=a),d.stepY&&(d.stepY*=a)}}function I(d,a){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=a);break;
case "CIMGeometricEffectBuffer":d.size&&(d.size*=a);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=a);d.endCut&&(d.endCut*=a);d.middleCut&&(d.middleCut*=a);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=a);d.offsetAlongLine&&(d.offsetAlongLine*=a);if(d.dashTemplate&&d.dashTemplate.length){const h=d.dashTemplate.map(n=>n*a);d.dashTemplate=h}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&
(d.length*=a);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=a);d.offsetY&&(d.offsetY*=a);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=a);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=a);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&(d.fromWidth*=a);d.length&&(d.length*=a);d.toWidth&&(d.toWidth*=a);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=a),d.period&&(d.period*=a)}}function Q(d,
a){if(d){var h="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(h?.symbolLayers)for(const n of h.symbolLayers)if(!(n.colorLocked||d&&(p.isCIMStroke(n)||p.isCIMMarker(n)&&n.markerPlacement&&p.isCIMMarkerStrokePlacement(n.markerPlacement))))switch(n.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":n.tintColor&&N(a,n.tintColor);break;case "CIMVectorMarker":n.markerGraphics?.forEach(t=>{Q(t.symbol,a)});break;case "CIMSolidStroke":case "CIMSolidFill":N(a,
n.color);break;case "CIMHatchFill":Q(n.lineSymbol,a)}}}function N(d,a){for(const h of d)if(h.join(".")===a.join("."))return;d.push(a)}function e(d,a,h){if(d){var n="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===n?.type;if(n?.symbolLayers)for(const t of n.symbolLayers)if(!t.colorLocked){if(d)if(h){if({layersToColor:n}=h,(p.isCIMStroke(t)||p.isCIMMarker(t)&&t.markerPlacement&&p.isCIMMarkerStrokePlacement(t.markerPlacement))&&"fill"===n||p.isCIMFill(t)&&"outline"===n)continue}else if(p.isCIMStroke(t)||
p.isCIMMarker(t)&&t.markerPlacement&&p.isCIMMarkerStrokePlacement(t.markerPlacement))continue;n=a.toArray();switch(t.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":t.tintColor=n;break;case "CIMVectorMarker":t.markerGraphics?.forEach(f=>{e(f.symbol,a,h)});break;case "CIMSolidStroke":case "CIMSolidFill":t.color=n;break;case "CIMHatchFill":e(t.lineSymbol,a,h)}}}}q.applyCIMSymbolColor=function(d,a,h){a instanceof k||(a=new k(a));(d=p.toCIMSymbolJSON(d))&&e(d,a,h)};q.applyCIMSymbolRotation=
function(d,a,h=!1){d=p.toCIMSymbolJSON(d);h&&0!==a&&(a=360-a);if("CIMTextSymbol"===d?.type)d.angle=a;else if("CIMPointSymbol"===d?.type&&d.symbolLayers){h=a-(d.angle||0);for(const n of d.symbolLayers)if(p.isCIMMarker(n)){let t=n.rotation||0;t=n.rotateClockwise?t-h:t+h;n.rotation=t}d.angle=a}};q.getCIMSymbolColor=function(d){d=p.toCIMSymbolJSON(d);const a=[];Q(d,a);return a.length?new k(p.fromCIMColor(a[0])):null};q.getCIMSymbolRotation=function(d,a=!1){d=p.toCIMSymbolJSON(d);return"CIMTextSymbol"===
d?.type||"CIMPointSymbol"===d?.type?(d=d.angle,null!=d&&0!==d&&a?360-d:d??0):0};q.getCIMSymbolSize=r;q.getCIMSymbolType=function(d){d=p.toCIMSymbolJSON(d);if(!d)return null;switch(d.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};q.scaleCIMMarker=E;q.scaleCIMSymbol=w;q.scaleCIMSymbolTo=function(d,
a,h){if(d){var n=p.toCIMSymbolJSON(d);d=r(d);if(0===d){if(n)if("CIMTextSymbol"===n.type)n.height=a;else if(n.symbolLayers)for(const t of n.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":t.size=a;break;case "CIMPictureStroke":case "CIMSolidStroke":t.width=a}}else w(n,a/d,!1,h)}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(q,k){function p(e){let d=e.length;for(;d--;)if(!" /-,\n".includes(e.charAt(d)))return!1;
return!0}function r(e,d){const a=[];var h=0;let n=-1;do n=e.indexOf("[",h),n>=h&&(n>h&&(h=e.substr(h,n-h),a.push([h,null,p(h)])),h=n+1,n=e.indexOf("]",h),n>=h&&(n>h&&(h=e.substr(h,n-h),(h=d[h])&&a.push([null,h,!1])),h=n+1));while(-1!==n);h<e.length-1&&(e=e.substr(h),a.push([e,null,p(e)]));return a}function w(e,d,a){let h="",n=null;for(const t of d){const [f,x,F]=t;if(f)F?n=f:(n&&(h+=n,n=null),h+=f);else if(d=e.attributes[x])n&&(h+=n,n=null),h+=d}return E(h,a)}function E(e,d){"string"!==typeof e&&
(e=String(e));switch(d){case "LowerCase":return e.toLowerCase();case "Allcaps":return e.toUpperCase();default:return e}}function J(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function I(e){if(!e)return null;switch(e.type){case "CIMPolygonSymbol":if(e.symbolLayers)for(const d of e.symbolLayers)if(e=I(d),null!=e)return e;break;case "CIMTextSymbol":return I(e.symbol);case "CIMSolidFill":return e.color}}function Q(e){if(e)switch(e.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(e=
e.symbolLayers)for(const d of e)if(e=Q(d),null!=e)return e;break;case "CIMTextSymbol":return Q(e.symbol);case "CIMSolidStroke":case "CIMSolidFill":return e.color}}function N(e){if(e)switch(e.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(e.symbolLayers)for(const d of e.symbolLayers)if(e=N(d),void 0!==e)return e;break;case "CIMTextSymbol":return N(e.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return e.width}}k.adjustTextCase=E;k.analyzeTextParts=r;k.assignTextValuesFromFeature=
w;k.attributesToFields=function(e){return(e?Object.keys(e):[]).map(d=>({name:d,alias:d,type:"string"===typeof e[d]?"esriFieldTypeString":"esriFieldTypeDouble"}))};k.colorToArray=function(e){return[e.r,e.g,e.b,e.a]};k.createLabelOverrideFunction=function(e,d,a){const h=r(d,e);return n=>w(n,h,a)};k.evaluateValueOrFunction=function(e,d,a,h){return"function"===typeof e?e(d,a,h):e};k.fromCIMColor=J;k.fromCIMFontDecoration=function(e){return e.underline?"underline":e.strikethrough?"line-through":"none"};
k.fromCIMFontStyle=function(e){let d="",a="";e&&(e=e.toLowerCase(),e.includes("italic")?d="italic":e.includes("oblique")&&(d="oblique"),e.includes("bold")?a="bold":e.includes("light")&&(a="lighter"));return{style:d,weight:a}};k.fromCIMHorizontalAlignment=function(e){switch(e){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};k.fromCIMVerticalAlignment=function(e){switch(e){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";
case "Bottom":return"bottom"}};k.getFillColor=I;k.getFontStyle=function(e){if(!e)return"normal";switch(e.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};k.getFontWeight=function(e){if(!e)return"normal";switch(e.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};k.getStrokeColor=Q;k.getStrokeWidth=N;k.getTintColor=e=>e.tintColor?J(e.tintColor):{r:255,g:255,b:255,a:1};k.getValue=
(e,d=0)=>null==e||isNaN(e)?d:e;k.importGeometryEngine=function(){return new Promise((e,d)=>q(["../../geometry/geometryEngineJSON"],e,d))};k.isCIMFill=function(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)};k.isCIMMarker=function(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===
e.type};k.isCIMMarkerStrokePlacement=function(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)};k.isCIMStroke=function(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===
e.type||"CIMSolidStroke"===e.type};k.isGeometryEngineRequired=e=>{if(!e)return!1;for(const d of e)switch(d.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":case "CIMGeometricEffectDonut":return!0}return!1};k.isSVGImage=e=>e.includes("data:image/svg+xml");k.mapCIMSymbolToGeometryType=function(e){if(!e)return null;switch(e.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";
default:return null}};k.resampleHermite=function(e,d,a,h,n,t,f=!0){const x=d/n;a/=t;const F=Math.ceil(x/2),G=Math.ceil(a/2);for(let b=0;b<t;b++)for(let m=0;m<n;m++){const v=4*(m+(f?t-b-1:b)*n);var y=0;let z=0,C=0,A=0,H=0,D=0,l=0;const g=(b+.5)*a;for(let u=Math.floor(b*a);u<(b+1)*a;u++){var c=Math.abs(g-(u+.5))/G;const L=(m+.5)*x;c*=c;for(let M=Math.floor(m*x);M<(m+1)*x;M++){let O=Math.abs(L-(M+.5))/F;y=Math.sqrt(c+O*O);-1<=y&&1>=y&&(y=2*y*y*y-3*y*y+1,0<y&&(O=4*(M+u*d),l+=y*e[O+3],C+=y,255>e[O+3]&&
(y=y*e[O+3]/250),A+=y*e[O],H+=y*e[O+1],D+=y*e[O+2],z+=y))}}h[v]=A/z;h[v+1]=H/z;h[v+2]=D/z;h[v+3]=l/C}};k.toCIMSymbolJSON=function(e){return e.data?.symbol??null};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(q,k,p,r,w){function E(a,h){const n=[],t=a.length-1;5===a.length?n.push(0,2,4):n.push(0,t);return a.map((f,x)=>
n.includes(x)?w.createStopLabel(f,x,t,h):null)}function J(){J=p._asyncToGenerator(function*(a,h,n){let t=!1,f=[],x=[];if(a.stops){var F=a.stops;f=F.map(y=>y.value);(t=F.some(y=>!!y.label))&&(x=F.map(y=>y.label))}F=f[f.length-1];if(null==f[0]&&null==F)return null;const G=t?null:E(f,n??!1);return(yield Promise.all(f.map(function(){var y=p._asyncToGenerator(function*(c,b){const m="opacity"===a.type?yield I(c,a,h):(yield new Promise((v,z)=>q(["../../../renderers/visualVariables/support/visualVariableUtils"],
v,z))).getColor(a,c);return{value:c,color:m,label:t?x[b]:G?.[b]??""}});return function(c,b){return y.apply(this,arguments)}}()))).reverse()});return J.apply(this,arguments)}function I(a,h){return Q.apply(this,arguments)}function Q(){Q=p._asyncToGenerator(function*(a,h,n=d){n=new r(n);a=(yield new Promise((t,f)=>q(["../../../renderers/visualVariables/support/visualVariableUtils"],t,f))).getOpacity(h,a);null!=a&&(n.a=a);return n});return Q.apply(this,arguments)}function N(a,h){const {startIndex:n,endIndex:t,
weight:f}=e(a,h);if(n===t)return h[n].color;a=r.blendColors(h[n].color,h[t].color,f);return new r(a)}function e(a,h){let n=0,t=h.length-1;h.some((f,x)=>{if(a<f.value)return t=x,!0;n=x;return!1});return{startIndex:n,endIndex:t,weight:(a-h[n].value)/(h[t].value-h[n].value)}}const d=new r([64,64,64]);k.getColorFromPointCloudStops=N;k.getRampStops=function(a,h,n){return J.apply(this,arguments)};k.getRampStopsForPointCloud=function(a){let h=!1,n=[],t=[];n=a.map(F=>F.value);(h=a.some(F=>!!F.label))&&(t=
a.map(F=>F.label??""));const f=n[n.length-1];if(null==n[0]&&null==f)return null;const x=h?null:E(n,!1);return n.map((F,G)=>{const y=N(F,a);return{value:F,color:y,label:h?t[G]:x?.[G]??""}}).reverse()};k.getStrectchRampStops=function(a,h){let n=[];if(a&&"multipart"===a.type)a.colorRamps.reverse().forEach((t,f)=>{0===f?n.push({value:h.max,color:new r(t.toColor),label:"high"}):n.push({value:null,color:new r(t.toColor),label:""});f===a.colorRamps.length-1?n.push({value:h.min,color:new r(t.fromColor),label:"low"}):
n.push({value:null,color:new r(t.fromColor),label:""})});else{let t,f;a&&"algorithmic"===a.type?(t=a.fromColor,f=a.toColor):(t=[0,0,0,1],f=[255,255,255,1]);n=[{value:h.max,color:new r(f),label:"high"},{value:h.min,color:new r(t),label:"low"}]}return n};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(q,k,p,r,w,E,J){function I(d){return Q.apply(this,arguments)}function Q(){Q=p._asyncToGenerator(function*(d){if(!("visualVariables"in d&&d.visualVariables))return null;d=d.visualVariables.find(n=>"color"===n.type);if(!d)return null;var a=null,h=null;if(d.stops){if(1===d.stops.length)return d.stops[0].color;a=d.stops[0].value;h=d.stops[d.stops.length-1].value}a=null!=a&&null!=h?a+(h-a)/2:0;({getColor:h}=yield new Promise((n,t)=>q(["../../../renderers/visualVariables/support/visualVariableUtils"],
n,t)));return h(d,a)??null});return Q.apply(this,arguments)}function N(){N=p._asyncToGenerator(function*(d,a){const h=d.trailCap,n=d.trailWidth||1;d=a||(yield I(d))||d.color;return new J({cap:h,color:d,width:n})});return N.apply(this,arguments)}const e=w.convertDateFormatToIntlOptions("short-date");k.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];k.SPECIAL_CHARS_GREATER_THAN="\x3e";k.SPECIAL_CHARS_LESS_THAN="\x3c";k.createStopLabel=function(d,
a,h,n){let t="";0===a?t="\x3c ":a===h&&(t="\x3e ");a=null;a=n?w.formatDate(d,e):E.format(d);return t+a};k.getMedianColor=I;k.getSymbolForFlowRenderer=function(d,a){return N.apply(this,arguments)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(q,k){q.getHeatmapRampStops=function(p){if(!p.colorStops)return[];const r=[...p.colorStops].filter(E=>0<E.color?.a);
let w=r.length-1;if(r&&r[0]){const E=r[w];E&&1!==E.ratio&&(r.push(new k({ratio:1,color:E.color})),w++)}return r.map((E,J)=>{let I="";0===J?I=p.legendOptions?.minLabel||"low":J===w&&(I=p.legendOptions?.maxLabel||"high");return{color:E.color,label:I,ratio:E.ratio}}).reverse()};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d){const a={chartAnimation:!0};p=function(h){function n(f){f=h.call(this,f)||this;f.abilities={...a};f.activeMediaInfoIndex=0;f.attributes=null;f.description=null;f.fieldInfoMap=null;f.formattedAttributes=null;f.expressionAttributes=null;f.isAggregate=!1;f.layer=null;f.mediaInfos=null;f.popupTemplate=null;f.relatedInfos=null;f.title=null;return f}q._inheritsLoose(n,h);var t=n.prototype;t.castAbilities=function(f){return{...a,...f}};t.setActiveMedia=function(f){this._setContentElementMedia(f)};
t.next=function(){this._pageContentElementMedia(1)};t.previous=function(){this._pageContentElementMedia(-1)};t._setContentElementMedia=function(f){const {formattedMediaInfoCount:x}=this;this.activeMediaInfoIndex=(f+x)%x};t._pageContentElementMedia=function(f){const {activeMediaInfoIndex:x}=this;this._setContentElementMedia(x+f)};t._formatMediaInfos=function(){const {mediaInfos:f,layer:x}=this,F=this.attributes??{},G=this.formattedAttributes??{},y=this.expressionAttributes??{},c=this.fieldInfoMap??
new Map;return f?.map(b=>{b=b?.clone();if(!b)return null;b.title=e.substituteFieldsInLinksAndAttributes({attributes:F,fieldInfoMap:c,globalAttributes:G,expressionAttributes:y,layer:x,text:b.title});b.caption=e.substituteFieldsInLinksAndAttributes({attributes:F,fieldInfoMap:c,globalAttributes:G,expressionAttributes:y,layer:x,text:b.caption});b.altText=e.substituteFieldsInLinksAndAttributes({attributes:F,fieldInfoMap:c,globalAttributes:G,expressionAttributes:y,layer:x,text:b.altText});if("image"===
b.type){var {value:m}=b;this._setImageValue({value:m,formattedAttributes:G,layer:x});return b.value.sourceURL?b:void 0}return"pie-chart"===b.type||"line-chart"===b.type||"column-chart"===b.type||"bar-chart"===b.type?({value:m}=b,this._setChartValue({value:m,chartType:b.type,attributes:F,formattedAttributes:G,layer:x,expressionAttributes:y}),b):null}).filter(r.isSome)??[]};t._setImageValue=function(f){const x=this.fieldInfoMap??new Map,{value:F,formattedAttributes:G,layer:y}=f,{linkURL:c,sourceURL:b}=
F;b&&(f=e.fixTokens(b,y),F.sourceURL=e.substituteAttributes({formattedAttributes:G,template:f,fieldInfoMap:x}));c&&(f=e.fixTokens(c,y),F.linkURL=e.substituteAttributes({formattedAttributes:G,template:f,fieldInfoMap:x}))};t._setChartValue=function(f){const {value:x,attributes:F,formattedAttributes:G,chartType:y,layer:c,expressionAttributes:b}=f,{popupTemplate:m,relatedInfos:v}=this,{fields:z,normalizeField:C}=x;x.fields=e.getFixedFieldNames(z,c);C&&(x.normalizeField=e.getFixedFieldName(C,c));if(z.some(H=>
!!(null!=G[H]||e.isRelatedField(H)&&v?.size))){var A=m?.fieldInfos??[];z.forEach(H=>{e.isRelatedField(H)?x.series=[...x.series,...this._getRelatedChartInfos({fieldInfos:A,fieldName:H,formattedAttributes:G,chartType:y,value:x})]:(H=this._getChartOption({value:x,attributes:F,chartType:y,formattedAttributes:G,expressionAttributes:b,fieldName:H,fieldInfos:A}),x.series.push(H))})}};t._getRelatedChartInfos=function(f){const {fieldInfos:x,fieldName:F,formattedAttributes:G,chartType:y,value:c}=f,b=[],m=d.getRelatedFieldInfo(F);
f=m&&this.relatedInfos?.get(m.layerId.toString());if(!f)return b;const {relatedFeatures:v,relation:z}=f;if(!z||!v)return b;({cardinality:f}=z);v.forEach(C=>{const {attributes:A}=C;A&&Object.keys(A).forEach(H=>{H===m.fieldName&&b.push(this._getChartOption({value:c,attributes:A,formattedAttributes:G,fieldName:F,chartType:y,relatedFieldName:H,hasMultipleRelatedFeatures:1<v?.length,fieldInfos:x}))})});return"one-to-many"===f||"many-to-many"===f?b:[b[0]]};t._getTooltip=function({label:f,value:x,chartType:F}){return"pie-chart"===
F?`${f}`:`${f}: ${x}`};t._getChartOption=function(f){const {value:x,attributes:F,formattedAttributes:G,expressionAttributes:y,fieldName:c,relatedFieldName:b,fieldInfos:m,chartType:v,hasMultipleRelatedFeatures:z}=f;var C=this.layer,A=this.fieldInfoMap??new Map;const {normalizeField:H,tooltipField:D}=x;f=H?e.isRelatedField(H)?F[d.getRelatedFieldInfo(H).fieldName]:F[H]:null;var l=e.isExpressionField(c)&&y&&void 0!==y[c]?y[c]:b&&void 0!==F[b]?F[b]:void 0!==F[c]?F[c]:G[c];f=new N({fieldName:c,value:void 0===
l?null:l&&f?l/f:l});if(e.isRelatedField(c))return C=A.get(c.toLowerCase()),l=D&&A.get(D.toLowerCase()),A=C?.fieldName??c,l=z&&D?d.getRelatedFieldInfo(D).fieldName:l?.fieldName??D,f.tooltip=this._getTooltip({label:z&&l?F[l]:G[l]??C?.label??C?.fieldName??b,value:z&&b?F[b]:G[A],chartType:v}),f;A=e.getFieldInfo(m,c);C=e.getFixedFieldName(c,C);A=D&&void 0!==G[D]?G[D]:e.getFieldInfoLabel(A||new Q({fieldName:C}),this.popupTemplate?.expressionInfos);f.tooltip=this._getTooltip({label:A,value:G[C],chartType:v});
return f};q._createClass(n,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return n}(p);k.__decorate([w.property()],p.prototype,"abilities",void 0);k.__decorate([E.cast("abilities")],p.prototype,"castAbilities",null);k.__decorate([w.property()],p.prototype,"activeMediaInfoIndex",
void 0);k.__decorate([w.property({readOnly:!0})],p.prototype,"activeMediaInfo",null);k.__decorate([w.property()],p.prototype,"attributes",void 0);k.__decorate([w.property()],p.prototype,"description",void 0);k.__decorate([w.property()],p.prototype,"fieldInfoMap",void 0);k.__decorate([w.property()],p.prototype,"formattedAttributes",void 0);k.__decorate([w.property()],p.prototype,"expressionAttributes",void 0);k.__decorate([w.property({readOnly:!0})],p.prototype,"formattedMediaInfos",null);k.__decorate([w.property()],
p.prototype,"isAggregate",void 0);k.__decorate([w.property()],p.prototype,"layer",void 0);k.__decorate([w.property({readOnly:!0})],p.prototype,"formattedMediaInfoCount",null);k.__decorate([w.property()],p.prototype,"mediaInfos",void 0);k.__decorate([w.property()],p.prototype,"popupTemplate",void 0);k.__decorate([w.property()],p.prototype,"relatedInfos",void 0);k.__decorate([w.property()],p.prototype,"title",void 0);return p=k.__decorate([I.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
p)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x,F,G,y,c,b,m,v,z,C,A,H,D,l,g,u,L){function M(V,S){if(!S.relationships)return null;let W=null;({relationships:S}=S);S.some(ba=>ba.id===parseInt(V,10)?(W=ba,!0):!1);return W}function O({originRelationship:V,relationships:S,layerId:W}){let ba=null;S&&S.some(X=>{`${X.relatedTableId}`===W&&X.id===V?.id&&(ba=X);return!!ba});return ba}function U(V,S){S=S.toLowerCase();for(const W in V)if(W.toLowerCase()===S)return V[W];return null}function Y(V,S,W,ba){const X=
new l;X.outFields=["*"];X.relationshipId="number"===typeof S.id?S.id:parseInt(S.id,10);X.objectIds=[V.attributes[W.objectIdField]];return W.queryRelatedFeatures?.(X,ba)??Promise.resolve({})}function aa(V,S,W){let ba=0;const X=[];for(;ba<S.length;)X.push(`${V} IN (${S.slice(ba,W+ba)})`),ba+=W;return X.join(" OR ")}function ea(V,S,W,ba){return ca.apply(this,arguments)}function ca(){ca=k._asyncToGenerator(function*(V,S,W,ba){var X=W.layerId.toString();const {layerInfo:B,relation:K,relatedFields:P,outStatistics:R,
url:T,sourceSpatialReference:Z}=S;if(!B||!K)return null;X=O({originRelationship:K,relationships:B.relationships,layerId:X});if(X?.relationshipTableId&&X.keyFieldInRelationshipTable){W=(yield Y(V,X,W,ba))[V.attributes[W.objectIdField]];if(!W)return null;const fa=W.features.map(ha=>ha.attributes[B.objectIdField]);if(R?.length&&B.supportsStatistics)return S=new C,S.where=aa(B.objectIdField,fa,1E3),S.outFields=P,S.outStatistics=R,S.sourceSpatialReference=Z,S={features:Promise.resolve(W),statsFeatures:N.executeQueryJSON(T,
S)},E.eachAlways(S)}return(X=X?.keyField)?(W=J.isNumericField(da(B.fields,X)),V=U(V.attributes,K.keyField),X=W?`${X}=${V}`:`${X}='${V}'`,V=N.executeQueryJSON(T,new C({where:X,outFields:S.relatedFields,sourceSpatialReference:Z}),ba),S=S.outStatistics&&0<S.outStatistics.length&&B.supportsStatistics?N.executeQueryJSON(T,new C({where:X,outFields:S.relatedFields,outStatistics:S.outStatistics,sourceSpatialReference:Z}),ba):null,ba={features:V},S&&(ba.statsFeatures=S),E.eachAlways(ba)):null});return ca.apply(this,
arguments)}function da(V,S){if(null!=V){S=S.toLowerCase();for(const W of V)if(W&&W.name.toLowerCase()===S)return W}return null}const ia=w.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),ja=new Map;q.createRelatedInfo=function(V,S){if(V=M(V,S))return{url:`${S.url}/${V.relatedTableId}`,sourceSpatialReference:S.spatialReference,relation:V,relatedFields:[],outStatistics:[]}};q.getDestinationRelation=O;q.getRelatedFieldInfo=function(V){if(!L.isRelatedField(V))return null;const [S,W]=V.split("/").slice(1);
return{layerId:S,fieldName:W}};q.queryLayerInfos=function({relatedInfos:V,layer:S},W){const ba={};V.forEach((X,B)=>{({relation:X}=X);if(!X)throw B=new r("relation-required","A relation is required on a layer to retrieve related records."),ia.error(B),B;({relatedTableId:X}=X);if("number"!==typeof X)throw B=new r("A related table ID is required on a layer to retrieve related records."),ia.error(B),B;X=`${S.url}/${X}`;const K=ja.get(X),P=K?K:p(X,{query:{f:"json"},signal:void 0});K||ja.set(X,P);ba[B]=
P});return E.whenOrAbort(E.eachAlways(ba),W)};q.queryRelatedFeatures=function({graphic:V,relatedInfos:S,layer:W},ba){const X={};S.forEach((B,K)=>{B.layerInfo&&(X[K]=ea(V,B,W,ba))});return E.eachAlways(X)};q.setRelatedFeatures=function(V,S){if(S&&V){var {features:W,statsFeatures:ba}=V;V=W&&W.value;S.relatedFeatures=V?V.features:[];V=ba&&ba.value;S.relatedStatsFeatures=V?V.features:[]}};q.updateRelatedInfo=function({relatedInfo:V,fieldName:S,fieldInfo:W}){V.relatedFields?.push(S);W.statisticType&&(S=
new u({statisticType:W.statisticType,onStatisticField:S,outStatisticFieldName:S}),V.outStatistics?.push(S))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),function(q,k,p,r,w,E){function J(a){if(!a)return"en-us";if(N.has(a.toLowerCase()))return a.toLowerCase();a=a.split("-")[0].toLowerCase();let h=null;for(const n of N.keys())if(n.startsWith(a)){h=
n;break}return h||"en-us"}function I(){I=p._asyncToGenerator(function*(a=E.getLocale()){a=J(a);if(e&&a===d)return e;e=(new Promise((h,n)=>q(["../../chunks/index2"],h,n))).then(h=>h.index);d=a;try{const [h,n]=yield Promise.all([e,N.get(d)()]);d===a&&(h.am4core.options.defaultLocale=n.default);h.am4core.options.suppressWarnings=!0;h.am4core.options.autoDispose=!0}catch{return d=e=null}return e});return I.apply(this,arguments)}r="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var Q=[{name:"default",colors:[].concat(r.slice(30,39),r.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const N=new Map([["ar",()=>(new Promise((a,h)=>q(["../../chunks/ar"],a,h))).then(a=>a.ar)],["bg-bg",()=>(new Promise((a,
h)=>q(["../../chunks/bg_BG"],a,h))).then(a=>a.bg_BG)],["bs-ba",()=>(new Promise((a,h)=>q(["../../chunks/bs_BA"],a,h))).then(a=>a.bs_BA)],["ca-es",()=>(new Promise((a,h)=>q(["../../chunks/ca_ES"],a,h))).then(a=>a.ca_ES)],["cs-cz",()=>(new Promise((a,h)=>q(["../../chunks/cs_CZ"],a,h))).then(a=>a.cs_CZ)],["da-dk",()=>(new Promise((a,h)=>q(["../../chunks/da_DK"],a,h))).then(a=>a.da_DK)],["de-de",()=>(new Promise((a,h)=>q(["../../chunks/de_DE"],a,h))).then(a=>a.de_DE)],["de-ch",()=>(new Promise((a,h)=>
q(["../../chunks/de_CH"],a,h))).then(a=>a.de_CH)],["el-gr",()=>(new Promise((a,h)=>q(["../../chunks/el_GR"],a,h))).then(a=>a.el_GR)],["en-us",()=>(new Promise((a,h)=>q(["../../chunks/en_US"],a,h))).then(a=>a.en_US)],["en-ca",()=>(new Promise((a,h)=>q(["../../chunks/en_CA"],a,h))).then(a=>a.en_CA)],["es-es",()=>(new Promise((a,h)=>q(["../../chunks/es_ES"],a,h))).then(a=>a.es_ES)],["et-ee",()=>(new Promise((a,h)=>q(["../../chunks/et_EE"],a,h))).then(a=>a.et_EE)],["fi-fi",()=>(new Promise((a,h)=>q(["../../chunks/fi_FI"],
a,h))).then(a=>a.fi_FI)],["fr-fr",()=>(new Promise((a,h)=>q(["../../chunks/fr_FR"],a,h))).then(a=>a.fr_FR)],["he-il",()=>(new Promise((a,h)=>q(["../../chunks/he_IL"],a,h))).then(a=>a.he_IL)],["hr-hr",()=>(new Promise((a,h)=>q(["../../chunks/hr_HR"],a,h))).then(a=>a.hr_HR)],["hu-hu",()=>(new Promise((a,h)=>q(["../../chunks/hu_HU"],a,h))).then(a=>a.hu_HU)],["id-id",()=>(new Promise((a,h)=>q(["../../chunks/id_ID"],a,h))).then(a=>a.id_ID)],["it-it",()=>(new Promise((a,h)=>q(["../../chunks/it_IT"],a,h))).then(a=>
a.it_IT)],["ja-jp",()=>(new Promise((a,h)=>q(["../../chunks/ja_JP"],a,h))).then(a=>a.ja_JP)],["ko-kr",()=>(new Promise((a,h)=>q(["../../chunks/ko_KR"],a,h))).then(a=>a.ko_KR)],["lt-lt",()=>(new Promise((a,h)=>q(["../../chunks/lt_LT"],a,h))).then(a=>a.lt_LT)],["lv-lv",()=>(new Promise((a,h)=>q(["../../chunks/lv_LV"],a,h))).then(a=>a.lv_LV)],["nb-no",()=>(new Promise((a,h)=>q(["../../chunks/nb_NO"],a,h))).then(a=>a.nb_NO)],["nl-nl",()=>(new Promise((a,h)=>q(["../../chunks/nl_NL"],a,h))).then(a=>a.nl_NL)],
["pl-pl",()=>(new Promise((a,h)=>q(["../../chunks/pl_PL"],a,h))).then(a=>a.pl_PL)],["pt-br",()=>(new Promise((a,h)=>q(["../../chunks/pt_BR"],a,h))).then(a=>a.pt_BR)],["pt-pt",()=>(new Promise((a,h)=>q(["../../chunks/pt_PT"],a,h))).then(a=>a.pt_PT)],["ro-ro",()=>(new Promise((a,h)=>q(["../../chunks/ro_RO"],a,h))).then(a=>a.ro_RO)],["ru-ru",()=>(new Promise((a,h)=>q(["../../chunks/ru_RU"],a,h))).then(a=>a.ru_RU)],["sk-sk",()=>(new Promise((a,h)=>q(["../../chunks/sk_SK"],a,h))).then(a=>a.sk_SK)],["sl-sl",
()=>(new Promise((a,h)=>q(["../../chunks/sl_SL"],a,h))).then(a=>a.sl_SL)],["sr-rs",()=>(new Promise((a,h)=>q(["../../chunks/sr_RS"],a,h))).then(a=>a.sr_RS)],["sv-se",()=>(new Promise((a,h)=>q(["../../chunks/sv_SE"],a,h))).then(a=>a.sv_SE)],["th-th",()=>(new Promise((a,h)=>q(["../../chunks/th_TH"],a,h))).then(a=>a.th_TH)],["tr-tr",()=>(new Promise((a,h)=>q(["../../chunks/tr_TR"],a,h))).then(a=>a.tr_TR)],["uk-ua",()=>(new Promise((a,h)=>q(["../../chunks/uk_UA"],a,h))).then(a=>a.uk_UA)],["vi-vn",()=>
(new Promise((a,h)=>q(["../../chunks/vi_VN"],a,h))).then(a=>a.vi_VN)],["zh-cn",()=>(new Promise((a,h)=>q(["../../chunks/zh_Hans"],a,h))).then(a=>a.zh_Hans)],["zh-hk",()=>(new Promise((a,h)=>q(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)],["zh-tw",()=>(new Promise((a,h)=>q(["../../chunks/zh_Hant"],a,h))).then(a=>a.zh_Hant)]]);let e=null,d=null;k.getChartLocale=J;k.getColorSet=function(a,h="default"){const n=Q.find(t=>t.name===h);return n?n.colors.map(t=>a.color(t)):null};k.loadChartsModule=function(){return I.apply(this,
arguments)};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x,F,G,y,c,b,m){r=function(v){function z(C){var A=v.call(this,C)||this;A._abortController=null;A.expressionInfo=null;A.graphic=null;A.contentElement=null;A.contentElementViewModel=null;A.interceptor=null;A.view=null;A._cancelQuery=()=>{const {_abortController:H}=q._assertThisInitialized(A);H&&H.abort();A._abortController=null};A._createVM=()=>{var H=A.contentElement?.type;A.contentElementViewModel?.destroy();H="fields"===H?new c:"media"===H?new b:"text"===
H?new y:null;A._set("contentElementViewModel",H)};A._compile=q._asyncToGenerator(function*(){A._cancelQuery();const H=new AbortController;A._abortController=H;yield A._compileExpression();A._abortController===H&&(A._abortController=null)});A._compileThrottled=J.throttle(A._compile,1,q._assertThisInitialized(A));A._compileExpression=q._asyncToGenerator(function*(){const {expressionInfo:H,graphic:D,interceptor:l,spatialReference:g,map:u,view:L,_abortController:M}=q._assertThisInitialized(A);if(H&&D&&
g&&u){var O=yield m.loadArcadeUtils();if(M===A._abortController)if((O=yield m.createCompiledExpression({arcadeUtils:O,expressionInfo:H,graphic:D,interceptor:l,map:u,spatialReference:g,view:L}))&&"esri.arcade.Dictionary"===O.declaredClass){O=yield O.castAsJsonAsync(M?.signal);var U=O?.type;O="media"===U?f.fromJSON(O):"text"===U?F.fromJSON(O):"fields"===U?t.fromJSON(O):null;A._set("contentElement",O)}else A._set("contentElement",null)}else A._set("contentElement",null)});A.handles.add([E.watch(()=>
[A.expressionInfo,A.graphic,A.map,A.spatialReference,A.view],()=>A._compileThrottled(),E.initial),E.watch(()=>[A.contentElement],()=>A._createVM(),E.initial)]);return A}q._inheritsLoose(z,v);z.prototype.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};q._createClass(z,[{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(C){this._override("spatialReference",
C)}},{key:"state",get:function(){const {_abortController:C,contentElement:A,contentElementViewModel:H}=this;return C?"loading":A||H?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(C){this._override("map",C)}}]);return z}(w.HandleOwnerMixin(r));k.__decorate([I.property()],r.prototype,"_abortController",void 0);k.__decorate([I.property({type:G})],r.prototype,"expressionInfo",void 0);k.__decorate([I.property({type:p})],r.prototype,"graphic",void 0);k.__decorate([I.property({readOnly:!0})],
r.prototype,"contentElement",void 0);k.__decorate([I.property({readOnly:!0})],r.prototype,"contentElementViewModel",void 0);k.__decorate([I.property()],r.prototype,"interceptor",void 0);k.__decorate([I.property()],r.prototype,"spatialReference",null);k.__decorate([I.property({readOnly:!0})],r.prototype,"state",null);k.__decorate([I.property()],r.prototype,"map",null);k.__decorate([I.property()],r.prototype,"view",void 0);return r=k.__decorate([e.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],
r)})},"esri/core/throttle":function(){define(["exports"],function(q){q.throttle=function(k,p,r,w){let E=null,J=1E3;"number"===typeof p?(J=p,w=r):(E=p??null,J=r);let I=0,Q;const N=()=>{I=0;k.apply(w,Q)};p=(...e)=>{E&&E.apply(w,e);Q=e;J?I||(I=setTimeout(N,J)):N()};p.remove=()=>{I&&(clearTimeout(I),I=0)};p.forceUpdate=()=>{I&&(clearTimeout(I),N())};p.hasPendingUpdates=()=>!!I;return p};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(q,k,p,r,w,E,J){function I(F){return`<ul class="esri-widget__list">${F.map(G=>`<li>${"string"===typeof G?J.applyTextFormattingHTML(J.htmlEntities(G)):G}</li>`).join("")}</ul>`}function Q(F){return`<table class="esri-widget__table">${F.keys().map(G=>{var y=F.field(G);y="string"===typeof y?J.applyTextFormattingHTML(J.htmlEntities(y)):y;return`<tr><th>${G}</th><td>${y}</td></tr>`}).join("")}</table>`}function N({aggregatedFeatures:F,arcadeUtils:G,featureSetVars:y,context:c,viewInfo:b,map:m,graphic:v,
interceptor:z}){y.forEach(C=>{C=C.toLowerCase();var A=b.sr;const H={map:m,spatialReference:A,interceptor:z};"$map"===C&&(c.vars[C]=G.convertMapToFeatureSetCollection(H));"$layer"===C&&(c.vars[C]=G.convertFeatureLayerToFeatureSet({layer:v.sourceLayer,spatialReference:A,interceptor:z}));"$datastore"===C&&(c.vars[C]=G.convertServiceUrlToWorkspace({url:v.sourceLayer.url,spatialReference:A,interceptor:z}));if("$aggregatedfeatures"===C){A=v.layer;const {fields:D,objectIdField:l,geometryType:g,spatialReference:u,
displayField:L}=A;A=new E({fields:D,objectIdField:l,geometryType:g,spatialReference:u,displayField:L,...("feature"===A.type?{templates:A.templates,typeIdField:A.typeIdField,types:A.types}:null),source:F});c.vars[C]=G.convertFeatureLayerToFeatureSet({layer:A,spatialReference:u,interceptor:z})}})}function e(){return new Promise((F,G)=>q(["../../../support/arcadeUtils"],F,G))}function d(F){return a.apply(this,arguments)}function a(){a=p._asyncToGenerator(function*({graphic:F,view:G}){const {isAggregate:y,
layer:c}=F;if(!y||!c||"2d"!==G?.type)return[];G=yield G.whenLayerView(c);if(!("createQuery"in G&&"queryFeatures"in G))return[];const b=G.createQuery();F=F.getObjectId();b.aggregateIds=null!=F?[F]:[];({features:F}=yield G.queryFeatures(b));return F});return a.apply(this,arguments)}function h(F){return n.apply(this,arguments)}function n(){n=p._asyncToGenerator(function*({expressionInfo:F,arcadeUtils:G,interceptor:y,spatialReference:c,map:b,graphic:m,view:v}){if(!F||!F.expression)return null;const z=
G.createSyntaxTree(F.expression),C=f.filter(H=>G.hasVariable(z,H));[v]=yield Promise.all([d({graphic:m,view:v}),G.loadScriptDependencies(z,!0,C)]);const A=G.getViewInfo({spatialReference:c});c=G.createExecContext(m,A);c.interceptor=y;c.useAsync=!0;N({aggregatedFeatures:v,arcadeUtils:G,featureSetVars:C,context:c,viewInfo:A,map:b,graphic:m,interceptor:y});y=G.createFunction(z,c);return G.executeAsyncFunction(y,c).catch(H=>x.error("arcade-execution-error",{error:H,graphic:m,expressionInfo:F}))});return n.apply(this,
arguments)}function t(){t=p._asyncToGenerator(function*({expressionInfos:F,spatialReference:G,graphic:y,interceptor:c,map:b,view:m}){if(!F||!F.length)return{};const v=yield e(),z={};for(const C of F)z[`expression/${C.name}`]=h({expressionInfo:C,arcadeUtils:v,interceptor:c,spatialReference:G,map:b,graphic:y,view:m});F=yield w.eachAlways(z);G={};for(const C in F)y=F[C].value,y="string"===typeof y?J.applyTextFormattingHTML(J.htmlEntities(y)):Array.isArray(y)?I(y):"esri.arcade.Dictionary"===y?.declaredClass?
Q(y):y,G[C]=y;return G});return t.apply(this,arguments)}const f=["$datastore","$map","$layer","$aggregatedfeatures"],x=r.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");k.createCompiledExpression=h;k.createCompiledExpressions=function(F){return t.apply(this,arguments)};k.loadArcadeUtils=e;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x){const F={title:!0,description:!0};r=function(G){function y(b,m){var v=G.call(this,b,m)||this;v._featureElementInfo=null;v._relatedFeatureIntersectionObserverNode=null;v._relatedFeatureIntersectionObserver=new IntersectionObserver(([z])=>{z?.isIntersecting&&v._increaseFeaturePage()},{root:window.document});v.headingLevel=2;v.viewModel=new a;v.messages=null;v.messagesCommon=null;v.visibleElements={...F};v._increaseFeaturePage=()=>{const {state:z,showAllEnabled:C,
relatedFeatures:A,featuresPerPage:H,featurePage:D}=v.viewModel;"ready"===z&&C&&A.length>=H*D&&v.viewModel.featurePage++};return v}k._inheritsLoose(y,G);var c=y.prototype;c.initialize=function(){this._featureElementInfo=new h;this.addHandles([J.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),J.initial),J.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),
J.on(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])};c.loadDependencies=function(){return Promise.all([new Promise((b,m)=>q(["../../chunks/calcite-list"],b,m)),new Promise((b,m)=>q(["../../chunks/calcite-list-item"],b,m)),new Promise((b,m)=>q(["../../chunks/calcite-icon"],b,m)),new Promise((b,m)=>q(["../../chunks/calcite-notice"],b,m))])};c.destroy=function(){this._unobserveRelatedFeatureObserver();this._featureElementInfo=w.destroyMaybe(this._featureElementInfo)};
c.castVisibleElements=function(b){return{...F,...b}};c.renderStickyLoading=function(){return"querying"===this.viewModel.state?f.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};c.renderLoadingIcon=function(){return f.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};c.renderLoading=function(){return f.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},
this.renderLoadingIcon())};c.renderShowAllIconNode=function(){return f.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};c.renderChevronIconNode=function(){const b=n.isRTL(this.container)?"chevron-left":"chevron-right";return f.tsx("calcite-icon",{scale:"s",icon:b,slot:"content-end"})};c.renderRelatedFeature=function(b){var {itemDescriptionFieldName:m}=this.viewModel;const v=b.title;b.description=m&&b.formattedAttributes?.global[m];m="loading"===b.state;return f.tsx("calcite-list-item",
{key:b.uid,label:m?`${this.messagesCommon?.loading}\u2026`:v,description:m?"\u2026":b.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:b})},this.renderChevronIconNode())};c.renderShowAllListItem=function(){return this.displayShowAllButton?f.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};c.renderNoRelatedFeaturesMessage=
function(){return f.tsx("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},f.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};c.renderFeatureObserver=function(){return f.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};c.renderList=function(){const {relatedFeatureViewModels:b}=this.viewModel;return f.tsx("calcite-list",null,
b.toArray().map(m=>this.renderRelatedFeature(m)),this.renderShowAllListItem())};c.renderRelatedFeatures=function(){const {displayListItems:b}=this,{state:m}=this.viewModel;return f.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===m})},b?this.renderList():"ready"===m?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())};c.renderRelationshipNotFound=function(){return f.tsx("calcite-notice",
{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},f.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};c.render=function(){const {state:b}=this.viewModel;return f.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===b?this.renderLoading():"disabled"===b?this.renderRelationshipNotFound():this.renderRelatedFeatures())};c._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:b}=
this.viewModel;this.removeHandles("related-feature-viewmodels");b?.forEach(m=>{this.addHandles(J.watch(()=>[m.title,m.state],()=>this.scheduleRender(),J.initial),"related-feature-viewmodels")});this.scheduleRender()};c._setupFeatureElementInfo=function(){const {headingLevel:b,visibleElements:m}=this,v=m.description&&this.description,z=m.title&&this.title;this._featureElementInfo?.set({description:v,title:z,headingLevel:b})};c._handleRelatedFeatureObserverChange=function(){var b=k._asyncToGenerator(function*(){this._unobserveRelatedFeatureObserver();
const {state:m,showAllEnabled:v}=this.viewModel;yield E.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===m&&v&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)});return function(){return b.apply(this,arguments)}}();c._relatedFeatureIntersectionObserverCreated=function(b){this._relatedFeatureIntersectionObserverNode=b};c._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};
k._createClass(y,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:b,featureCount:m,displayCount:v}=this.viewModel;return!b&&!!m&&(m>v||0===v)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",get:function(){return this.viewModel.description},set:function(b){this.viewModel.description=b}},{key:"featureCountDescription",get:function(){const {messages:b}=this,{featureCount:m}=this.viewModel;
return x.substitute(1===m?b?.numberRecord:b?.numberRecords,{number:m})}},{key:"title",get:function(){return this.viewModel.title},set:function(b){this.viewModel.title=b}}]);return y}(d);p.__decorate([I.property()],r.prototype,"_relatedFeatureIntersectionObserverNode",void 0);p.__decorate([I.property({readOnly:!0})],r.prototype,"displayShowAllButton",null);p.__decorate([I.property({readOnly:!0})],r.prototype,"displayListItems",null);p.__decorate([I.property()],r.prototype,"description",null);p.__decorate([I.property({readOnly:!0})],
r.prototype,"featureCountDescription",null);p.__decorate([I.property()],r.prototype,"headingLevel",void 0);p.__decorate([I.property()],r.prototype,"title",null);p.__decorate([I.property({type:a})],r.prototype,"viewModel",void 0);p.__decorate([I.property(),t.messageBundle("esri/widgets/Feature/t9n/Feature")],r.prototype,"messages",void 0);p.__decorate([I.property(),t.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);p.__decorate([I.property()],r.prototype,"visibleElements",void 0);
p.__decorate([Q.cast("visibleElements")],r.prototype,"castVisibleElements",null);return r=p.__decorate([e.subclass("esri.widgets.Feature.FeatureRelationship")],r)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x){r=function(F){function G(c){var b=F.call(this,c)||this;b._queryAbortController=null;b._queryPageAbortController=null;b._queryFeatureCountAbortController=null;b.featuresPerPage=10;b.description=null;b.graphic=null;b.layer=null;b.map=null;b.orderByFields=null;b.featureCount=0;b.relationshipId=null;b.showAllEnabled=!1;b.title=null;b._cancelQuery=()=>{const {_queryAbortController:m}=q._assertThisInitialized(b);m&&m.abort();b._queryAbortController=null};b._cancelQueryFeatureCount=
()=>{const {_queryFeatureCountAbortController:m}=q._assertThisInitialized(b);m&&m.abort();b._queryFeatureCountAbortController=null};b._cancelQueryPage=()=>{const {_queryPageAbortController:m}=q._assertThisInitialized(b);m&&m.abort();b._queryPageAbortController=null};b._queryController=q._asyncToGenerator(function*(){b._cancelQuery();const m=new AbortController;b._queryAbortController=m;yield N.ignoreAbortErrors(b._query());b._queryAbortController===m&&(b._queryAbortController=null)});b._queryFeatureCountController=
q._asyncToGenerator(function*(){b._cancelQueryFeatureCount();const m=new AbortController;b._queryFeatureCountAbortController=m;yield N.ignoreAbortErrors(b._queryFeatureCount());b._queryFeatureCountAbortController===m&&(b._queryFeatureCountAbortController=null)});b._queryPageController=q._asyncToGenerator(function*(){const m=new AbortController;b._queryPageAbortController=m;yield N.ignoreAbortErrors(b._queryPage());b._queryPageAbortController===m&&(b._queryPageAbortController=null)});b._queryThrottled=
d.throttle(b._queryController,100,q._assertThisInitialized(b));b._queryFeatureCountThrottled=d.throttle(b._queryFeatureCountController,100,q._assertThisInitialized(b));b._queryPageThrottled=d.throttle(b._queryPageController,100,q._assertThisInitialized(b));b._query=q._asyncToGenerator(function*(){const {_queryAbortController:m,relatedFeatures:v}=q._assertThisInitialized(b);b._destroyRelatedFeatureViewModels();b.featurePage=1;v.removeAll();v.addMany(b._sliceFeatures(yield b._queryRelatedFeatures({signal:m?.signal})))});
b.handles.add([e.watch(()=>[b.displayCount,b.graphic,b.layer,b.map,b.orderByFieldsFixedCasing,b.relationshipId,b.featuresPerPage,b.showAllEnabled,b.canQuery,b.featureCount],()=>b._queryThrottled(),e.initial),e.watch(()=>[b.featurePage,b.showAllEnabled],()=>b._queryPageThrottled()),e.watch(()=>[b.layer,b.relationshipId,b.objectId,b.canQuery],()=>b._queryFeatureCountThrottled())]);return b}q._inheritsLoose(G,F);var y=G.prototype;y.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();
this._cancelQuery();this._cancelQueryFeatureCount();this._cancelQueryPage()};y._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(c=>!c.destroyed&&c.destroy());this.relatedFeatureViewModels.removeAll()};y._queryFeatureCount=function(){var c=q._asyncToGenerator(function*(){const {layer:b,relatedLayer:m,relationshipId:v,objectId:z,_queryFeatureCountAbortController:C,canQuery:A,supportsCacheHint:H}=this;yield b?.load();yield m?.load();if(A&&b&&m){var D=m.createQuery();
D=new f({cacheHint:H,relationshipId:v,returnGeometry:!1,objectIds:[z],where:Q.unwrapOrValue(D.where,void 0)});D=yield b.queryRelatedFeaturesCount(D,{signal:C?.signal});this._set("featureCount",D[z]||0)}else this._set("featureCount",0)});return function(){return c.apply(this,arguments)}}();y._sliceFeatures=function(c){const {showAllEnabled:b,displayCount:m}=this;return b?c:m?c.slice(0,m):[]};y._queryPage=function(){var c=q._asyncToGenerator(function*(){const {relatedFeatures:b,featurePage:m,showAllEnabled:v,
_queryPageAbortController:z}=this;!v||2>m||b.addMany(yield this._queryRelatedFeatures({signal:z?.signal}))});return function(){return c.apply(this,arguments)}}();y._queryRelatedFeatures=function(){var c=q._asyncToGenerator(function*(b){const {orderByFieldsFixedCasing:m,showAllEnabled:v,featuresPerPage:z,displayCount:C,layer:A,relationshipId:H,featurePage:D,featureCount:l,relatedLayer:g,supportsCacheHint:u}=this,{canQuery:L,objectId:M}=this;if(!L||!A||!g)return[];var O=v?((D-1)*z+l)%l:0;const U=v?
z:C;var Y=g.objectIdField;Y=[...m?.map(ca=>ca.field),Y].filter(Q.isSome);const aa=m?.map(ca=>`${ca.field} ${ca.order}`),ea=g.createQuery();O=new f({orderByFields:aa,start:O,num:U,outFields:Y,cacheHint:u,relationshipId:H,returnGeometry:!1,objectIds:[M],where:Q.unwrapOrValue(ea.where,void 0)});b=(yield A.queryRelatedFeatures(O,{signal:b?.signal}))[M]?.features||[];b.forEach(ca=>{ca.sourceLayer=g;ca.layer=g});return b});return function(b){return c.apply(this,arguments)}}();q._createClass(G,[{key:"featurePage",
get:function(){return this._get("featurePage")},set:function(c){const {featuresPerPage:b,featureCount:m}=this;this._set("featurePage",Math.min(Math.max(c,1),Math.ceil(m/b)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:c,relatedLayer:b}=this;return c&&b?.loaded?c.map(m=>{const v=m.clone();m=x.getFixedFieldName(m.field,b);v.field=m;return v}):c??[]}},{key:"supportsCacheHint",get:function(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}},{key:"canQuery",
get:function(){const c=this.layer?.capabilities?.queryRelated;return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId&&!!c?.supportsCount&&!!c?.supportsPagination}},{key:"itemDescriptionFieldName",get:function(){return this.orderByFieldsFixedCasing?.[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(c){this._set("displayCount",Math.min(Math.max(c,0),10))}},{key:"objectId",get:function(){return(this.objectIdField&&
this.graphic?.attributes?.[this.objectIdField])??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new E}},{key:"relatedLayer",get:function(){const {layer:c,map:b,relationship:m}=this;return c?.loaded&&b&&m?x.findRelatedLayer(b,c,m)??null:null}},{key:"relationship",get:function(){const {relationshipId:c,layer:b}=this;return"number"===typeof c?b?.relationships?.find(({id:m})=>m===c)??null:null}},
{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new E}},{key:"state",get:function(){const {_queryAbortController:c,_queryFeatureCountAbortController:b,_queryPageAbortController:m,canQuery:v}=this;return b?"loading":c||m?"querying":v?"ready":"disabled"}}]);return G}(w.ClonableMixin(I.IdentifiableMixin(J.HandleOwnerMixin(r))));k.__decorate([a.property()],r.prototype,"_queryAbortController",void 0);k.__decorate([a.property()],r.prototype,"_queryPageAbortController",
void 0);k.__decorate([a.property()],r.prototype,"_queryFeatureCountAbortController",void 0);k.__decorate([a.property({value:1})],r.prototype,"featurePage",null);k.__decorate([a.property()],r.prototype,"featuresPerPage",void 0);k.__decorate([a.property({readOnly:!0})],r.prototype,"orderByFieldsFixedCasing",null);k.__decorate([a.property({readOnly:!0})],r.prototype,"supportsCacheHint",null);k.__decorate([a.property({readOnly:!0})],r.prototype,"canQuery",null);k.__decorate([a.property()],r.prototype,
"description",void 0);k.__decorate([a.property({readOnly:!0})],r.prototype,"itemDescriptionFieldName",null);k.__decorate([a.property({value:3})],r.prototype,"displayCount",null);k.__decorate([a.property({type:p})],r.prototype,"graphic",void 0);k.__decorate([a.property()],r.prototype,"layer",void 0);k.__decorate([a.property()],r.prototype,"map",void 0);k.__decorate([a.property({readOnly:!0})],r.prototype,"objectId",null);k.__decorate([a.property({readOnly:!0})],r.prototype,"objectIdField",null);k.__decorate([a.property()],
r.prototype,"orderByFields",void 0);k.__decorate([a.property({readOnly:!0})],r.prototype,"relatedFeatures",null);k.__decorate([a.property({readOnly:!0})],r.prototype,"relatedLayer",null);k.__decorate([a.property({readOnly:!0})],r.prototype,"relationship",null);k.__decorate([a.property()],r.prototype,"featureCount",void 0);k.__decorate([a.property({readOnly:!0})],r.prototype,"relatedFeatureViewModels",null);k.__decorate([a.property()],r.prototype,"relationshipId",void 0);k.__decorate([a.property()],
r.prototype,"showAllEnabled",void 0);k.__decorate([a.property()],r.prototype,"state",null);k.__decorate([a.property()],r.prototype,"title",void 0);return r=k.__decorate([t.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],r)})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(q,k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x,F,G,y,c,b,m,v,z){var C;const A={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};w=C=function(H){function D(g){var u=H.call(this,g)||this;u._handles=new E;u._error=null;u._featureAbortController=null;u._graphicChangedThrottled=d.throttle(u._graphicChanged,1,q._assertThisInitialized(u));u._expressionAttributes=null;u._graphicExpressionAttributes=null;u.abilities=
{...A};u.content=null;u.contentViewModels=[];u.description=null;u.defaultPopupTemplateEnabled=!1;u.formattedAttributes=null;u.lastEditInfo=null;u.relatedInfos=new Map;u.title="";u.view=null;u._isAllowedContentType=L=>{const {abilities:M}=q._assertThisInitialized(u);return"attachments"===L.type&&!!M.attachmentsContent||"custom"===L.type&&!!M.customContent||"fields"===L.type&&!!M.fieldsContent||"media"===L.type&&!!M.mediaContent||"text"===L.type&&!!M.textContent||"expression"===L.type&&!!M.expressionContent||
"relationship"===L.type&&!!M.relationshipContent};u._handles.add(e.watch(()=>[u.graphic,u._effectivePopupTemplate,u.abilities],()=>u._graphicChangedThrottled(),e.initial));return u}q._inheritsLoose(D,H);var l=D.prototype;l.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=null;this._destroyContentViewModels();this.relatedInfos.clear()};l.castAbilities=function(g){return{...A,...g}};l.setActiveMedia=function(g,u){g=this.contentViewModels[g];
g instanceof c&&g.setActiveMedia(u)};l.nextMedia=function(g){g=this.contentViewModels[g];g instanceof c&&g.next()};l.previousMedia=function(g){g=this.contentViewModels[g];g instanceof c&&g.previous()};l.updateGeometry=function(){var g=q._asyncToGenerator(function*(){const {graphic:u,spatialReference:L,_sourceLayer:M}=this;yield M?.load();var O=M?.objectIdField;O&&u&&M&&(O=u?.attributes?.[O],null!=O&&(O=[O],!u.geometry&&(O=(yield v.querySourceLayer({layer:M,graphic:u,outFields:[],objectIds:O,returnGeometry:!0,
spatialReference:L}))?.geometry)))&&(u.geometry=O)});return function(){return g.apply(this,arguments)}}();l._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};l._graphicChanged=function(){var g=q._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:u}=this;if(u){var L=new AbortController;this._featureAbortController=L;try{yield this._queryFeature({signal:L.signal})}catch(M){N.isAbortError(M)||(this._error=
M,I.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:M,graphic:u,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===L&&(this._featureAbortController=null)}});return function(){return g.apply(this,arguments)}}();l._cancelFeatureQuery=function(){const {_featureAbortController:g}=this;g&&g.abort();this._featureAbortController=null};l._compileContentElement=function(g,u){if("attachments"===g.type)return this._compileAttachments(g,
u);if("custom"===g.type)return this._compileCustom(g,u);if("fields"===g.type)return this._compileFields(g,u);if("media"===g.type)return this._compileMedia(g,u);if("text"===g.type)return this._compileText(g,u);if("expression"===g.type)return this._compileExpression(g,u);if("relationship"===g.type)return this._compileRelationship(g,u)};l._compileContent=function(g){this._destroyContentViewModels();if(this.graphic)return Array.isArray(g)?g.filter(this._isAllowedContentType).map((u,L)=>this._compileContentElement(u,
L)).filter(Q.isSome):"string"===typeof g?this._compileText(new f({text:g}),0).text:g};l._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(g=>g&&!g.destroyed&&g.destroy());this._set("contentViewModels",[])};l._matchesFeature=function(g,u){g=g?.graphic?.getObjectId();u=u?.getObjectId();return Q.isSome(g)&&Q.isSome(u)&&g===u};l._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:g,
relatedFeatures:u,map:L}){const {view:M,spatialReference:O}=this;u?.filter(Boolean).forEach(U=>{g.find(Y=>this._matchesFeature(Y,U))||g.add(new C({abilities:{relationshipContent:!1},map:L,view:M,spatialReference:O,graphic:U}))});g.forEach(U=>{u?.find(Y=>this._matchesFeature(U,Y))||g.remove(U)})};l._setExpressionContentVM=function(g,u){const L=this.formattedAttributes,{contentElement:M,contentElementViewModel:O}=g;g=M?.type;O&&g&&("fields"===g&&(this._createFieldsFormattedAttributes({contentElement:M,
contentElementIndex:u,formattedAttributes:L}),O.set(this._createFieldsVMParams(M,u))),"media"===g&&(this._createMediaFormattedAttributes({contentElement:M,contentElementIndex:u,formattedAttributes:L}),O.set(this._createMediaVMParams(M,u))),"text"===g&&O.set(this._createTextVMParams(M)))};l._compileRelationship=function(g,u){const {displayCount:L,orderByFields:M,relationshipId:O,title:U,description:Y}=g,{_sourceLayer:aa,graphic:ea,map:ca}=this,da=new b({displayCount:L,graphic:ea,orderByFields:M,relationshipId:O,
layer:aa,map:ca,...this._compileTitleAndDesc({title:U,description:Y})});this.contentViewModels[u]=da;this._handles.add(e.on(()=>da.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(da)),"relationship-view-models");return g};l._compileExpression=function(g,u){const {expressionInfo:L}=g,{graphic:M,map:O,spatialReference:U,view:Y}=this,aa=new G({expressionInfo:L,graphic:M,interceptor:C.interceptor,map:O,spatialReference:U,view:Y});this.contentViewModels[u]=aa;this._handles.add(e.watch(()=>
aa.contentElementViewModel,()=>this._setExpressionContentVM(aa,u),e.initial),"content-view-models");return g};l._compileAttachments=function(g,u){const {graphic:L}=this,{description:M,title:O}=g;this.contentViewModels[u]=new x({graphic:L,...this._compileTitleAndDesc({title:O,description:M})});return g};l._compileCustom=function(g,u){const {graphic:L}=this,{creator:M,destroyer:O}=g;this.contentViewModels[u]=new F({graphic:L,creator:M,destroyer:O});return g};l._compileTitleAndDesc=function({title:g,
description:u}){const {_fieldInfoMap:L,_sourceLayer:M,graphic:O,formattedAttributes:U}=this,Y=O?.attributes,aa=this._expressionAttributes,ea=U.global;return{title:v.substituteFieldsInLinksAndAttributes({attributes:Y,fieldInfoMap:L,globalAttributes:ea,expressionAttributes:aa,layer:M,text:g}),description:v.substituteFieldsInLinksAndAttributes({attributes:Y,fieldInfoMap:L,globalAttributes:ea,expressionAttributes:aa,layer:M,text:u})}};l._createFieldsVMParams=function(g,u){const L=this._effectivePopupTemplate,
M=this.formattedAttributes,O={...M?.global,...M?.content[u]};u=(g?.fieldInfos||L?.fieldInfos)?.filter(({fieldName:aa})=>v.isExpressionField(aa)||v.isRelatedField(aa)||O.hasOwnProperty(aa));const {description:U,title:Y}=g;return{attributes:O,expressionInfos:L?.expressionInfos,fieldInfos:u,...this._compileTitleAndDesc({title:Y,description:U})}};l._compileFields=function(g,u){const L=g.clone();g=new y(this._createFieldsVMParams(g,u));this.contentViewModels[u]=g;L.fieldInfos=g.formattedFieldInfos.slice(0);
return L};l._createMediaVMParams=function(g,u){const {abilities:L,graphic:M,_fieldInfoMap:O,_effectivePopupTemplate:U,relatedInfos:Y,_sourceLayer:aa,_expressionAttributes:ea}=this,ca=this.formattedAttributes,da=M?.attributes??{},{description:ia,mediaInfos:ja,title:V}=g;return{abilities:{chartAnimation:L.chartAnimation},activeMediaInfoIndex:g.activeMediaInfoIndex||0,attributes:da,isAggregate:M?.isAggregate,layer:aa,fieldInfoMap:O,formattedAttributes:{...ca?.global,...ca?.content[u]},expressionAttributes:ea,
mediaInfos:ja,popupTemplate:U,relatedInfos:Y,...this._compileTitleAndDesc({title:V,description:ia})}};l._compileMedia=function(g,u){const L=g.clone();g=new c(this._createMediaVMParams(g,u));L.mediaInfos=g.formattedMediaInfos.slice(0);this.contentViewModels[u]=g;return L};l._createTextVMParams=function(g){const {graphic:u,_fieldInfoMap:L,_sourceLayer:M,_expressionAttributes:O}=this;g&&g.text&&(g.text=v.substituteFieldsInLinksAndAttributes({attributes:u?.attributes??{},fieldInfoMap:L,globalAttributes:this.formattedAttributes?.global??
{},expressionAttributes:O,layer:M,text:g.text}));return{graphic:u,creator:g.text}};l._compileText=function(g,u){g=g.clone();this.contentViewModels[u]=new F(this._createTextVMParams(g));return g};l._compileLastEditInfo=function(){const {_effectivePopupTemplate:g,_sourceLayer:u,graphic:L}=this;if(g){var {lastEditInfoEnabled:M}=g,O=u?.editFieldsInfo;if(M&&O)return v.formatEditInfo(O,L?.attributes)}};l._compileTitle=function(g){const {_fieldInfoMap:u,_sourceLayer:L,graphic:M,_expressionAttributes:O}=
this;return v.substituteFieldsInLinksAndAttributes({attributes:M?.attributes??{},fieldInfoMap:u,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:O,layer:L,text:g})};l._getTitle=function(){var g=q._asyncToGenerator(function*(){const {_effectivePopupTemplate:u,graphic:L}=this;return L?v.graphicCallback(u?.title,{graphic:L}):null});return function(){return g.apply(this,arguments)}}();l._getContent=function(){var g=q._asyncToGenerator(function*(){const {_effectivePopupTemplate:u,
graphic:L}=this;return L?v.graphicCallback(u?.content,{graphic:L}):null});return function(){return g.apply(this,arguments)}}();l._queryFeature=function(){var g=q._asyncToGenerator(function*(u){const {_featureAbortController:L,_sourceLayer:M,graphic:O,_effectivePopupTemplate:U}=this,Y=this.map,aa=this.view,ea=this.spatialReference;if(L===this._featureAbortController&&O){yield v.queryUpdatedFeature({graphic:O,popupTemplate:U,layer:M,spatialReference:ea},u);var {content:{value:ca},title:{value:da}}=
yield N.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:u}}=yield N.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(u),expressionAttributes:m.createCompiledExpressions({expressionInfos:U?.expressionInfos,spatialReference:ea,graphic:O,map:Y,interceptor:C.interceptor,view:aa})}));L===this._featureAbortController&&O&&(this._expressionAttributes=u,this._graphicExpressionAttributes={...O.attributes,...u},this._set("formattedAttributes",this._createFormattedAttributes(ca)),
this._set("title",this._compileTitle(da)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ca)||null))}});return function(u){return g.apply(this,arguments)}}();l._createMediaFormattedAttributes=function({contentElement:g,contentElementIndex:u,formattedAttributes:L}){const {_effectivePopupTemplate:M,graphic:O,relatedInfos:U,_sourceLayer:Y,_fieldInfoMap:aa,_graphicExpressionAttributes:ea}=this;L.content[u]=v.formatAttributes({fieldInfos:M?.fieldInfos,
graphic:O,attributes:{...ea,...g.attributes},layer:Y,fieldInfoMap:aa,relatedInfos:U})};l._createFieldsFormattedAttributes=function({contentElement:g,contentElementIndex:u,formattedAttributes:L}){if(g.fieldInfos){const {graphic:M,relatedInfos:O,_sourceLayer:U,_fieldInfoMap:Y,_graphicExpressionAttributes:aa}=this;L.content[u]=v.formatAttributes({fieldInfos:g.fieldInfos,graphic:M,attributes:{...aa,...g.attributes},layer:U,fieldInfoMap:Y,relatedInfos:O})}};l._createFormattedAttributes=function(g){const {_effectivePopupTemplate:u,
graphic:L,relatedInfos:M,_sourceLayer:O,_fieldInfoMap:U,_graphicExpressionAttributes:Y}=this,aa={global:v.formatAttributes({fieldInfos:u?.fieldInfos,graphic:L,attributes:Y,layer:O,fieldInfoMap:U,relatedInfos:M}),content:[]};Array.isArray(g)&&g.forEach((ea,ca)=>{"fields"===ea.type&&this._createFieldsFormattedAttributes({contentElement:ea,contentElementIndex:ca,formattedAttributes:aa});"media"===ea.type&&this._createMediaFormattedAttributes({contentElement:ea,contentElementIndex:ca,formattedAttributes:aa})});
return aa};l._checkForRelatedFeatures=function(g){const {graphic:u,_effectivePopupTemplate:L}=this;return this._queryRelatedInfos(u,v.getAllFieldInfos(L),g)};l._queryRelatedInfos=function(){var g=q._asyncToGenerator(function*(u,L,M){const {relatedInfos:O,_sourceLayer:U}=this;O.clear();const Y=Q.isSome(U?.associatedLayer)?yield U?.associatedLayer.load(M):U;if(Y&&u){var aa=L.filter(da=>da&&v.isRelatedField(da.fieldName));if(aa&&aa.length){L.forEach(da=>this._configureRelatedInfo(da,Y));var ea=yield z.queryLayerInfos({relatedInfos:O,
layer:Y},M);Object.keys(ea).forEach(da=>{const ia=O.get(da.toString());da=ea[da]?.value;ia&&da&&(ia.layerInfo=da.data)});var ca=yield z.queryRelatedFeatures({graphic:u,relatedInfos:O,layer:Y},M);Object.keys(ca).forEach(da=>{z.setRelatedFeatures(ca[da]?.value,O.get(da.toString()))})}}});return function(u,L,M){return g.apply(this,arguments)}}();l._configureRelatedInfo=function(g,u){const {relatedInfos:L}=this,M=z.getRelatedFieldInfo(g.fieldName);if(M){var {layerId:O,fieldName:U}=M;O&&(u=L.get(O.toString())||
z.createRelatedInfo(O,u))&&(z.updateRelatedInfo({relatedInfo:u,fieldName:U,fieldInfo:g}),this.relatedInfos.set(O,u))}};q._createClass(D,[{key:"_effectivePopupTemplate",get:function(){return Q.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return v.createfieldInfoMap(v.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return v.getSourceLayer(this.graphic)}},
{key:"isTable",get:function(){return this._sourceLayer?.isTable||!1}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(g){this._set("graphic",g?g.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(g){this._override("spatialReference",g)}},{key:"map",get:function(){return this.view?.map||null},set:function(g){this._override("map",g)}},{key:"waitingForContent",
get:function(){return!!this._featureAbortController}}]);return D}(J.IdentifiableMixin(w));w.interceptor=new r.FeatureSetQueryInterceptor(v.preLayerQueryCallback,v.preRequestCallback);k.__decorate([a.property()],w.prototype,"_error",void 0);k.__decorate([a.property()],w.prototype,"_featureAbortController",void 0);k.__decorate([a.property({readOnly:!0})],w.prototype,"_effectivePopupTemplate",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"_fieldInfoMap",null);k.__decorate([a.property({readOnly:!0})],
w.prototype,"_sourceLayer",null);k.__decorate([a.property()],w.prototype,"abilities",void 0);k.__decorate([h.cast("abilities")],w.prototype,"castAbilities",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"content",void 0);k.__decorate([a.property({readOnly:!0})],w.prototype,"contentViewModels",void 0);k.__decorate([a.property()],w.prototype,"description",void 0);k.__decorate([a.property({type:Boolean})],w.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([a.property({readOnly:!0})],
w.prototype,"isTable",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"state",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"formattedAttributes",void 0);k.__decorate([a.property({type:p,value:null})],w.prototype,"graphic",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"lastEditInfo",void 0);k.__decorate([a.property({readOnly:!0})],w.prototype,"relatedInfos",void 0);k.__decorate([a.property()],w.prototype,"spatialReference",null);k.__decorate([a.property({readOnly:!0})],
w.prototype,"title",void 0);k.__decorate([a.property()],w.prototype,"map",null);k.__decorate([a.property({readOnly:!0})],w.prototype,"waitingForContent",null);k.__decorate([a.property()],w.prototype,"view",void 0);return w=C=k.__decorate([t.subclass("esri.widgets.FeatureViewModel")],w)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(q){q.FeatureSetQueryInterceptor=function(k,p){this.preLayerQueryCallback=k;this.preRequestCallback=p;this.preLayerQueryCallback||
(this.preLayerQueryCallback=r=>{});this.preRequestCallback||(this.preLayerQueryCallback=r=>{})};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(q){q.CSS={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",
btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};
Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),function(q,k,p,r,w,E,J,I,Q,N,e,d){q.FeatureContentMixin=
a=>{a=function(h){function n(){var t=h.apply(this,arguments)||this;t.renderNodeContent=f=>e.isWidget(f)&&!f.destroyed?d.tsx("div",{class:N.CSS.contentNode,key:f},f.render()):f instanceof HTMLElement?d.tsx("div",{class:N.CSS.contentNode,key:f,bind:f,afterCreate:t._attachToNode}):e.hasDomNode(f)?d.tsx("div",{class:N.CSS.contentNode,key:f,bind:f.domNode,afterCreate:t._attachToNode}):null;return t}k._inheritsLoose(n,h);n.prototype._attachToNode=function(t){t.appendChild(this)};return n}(a);return a=p.__decorate([Q.subclass("esri.widgets.Feature.ContentMixin")],
a)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),function(q,
k,p,r,w,E,J,I,Q,N,e,d,a,h,n,t,f,x,F,G,y,c,b,m){var v;const z={title:!0,content:!0,lastEditedInfo:!0};r=v=function(C){function A(D,l){D=C.call(this,D,l)||this;D._contentWidgets=[];D.flowItems=null;D.headingLevel=2;D.messages=null;D.messagesCommon=null;D.messagesURIUtils=null;D.visibleElements={...z};D.viewModel=new f;return D}k._inheritsLoose(A,C);var H=A.prototype;H.initialize=function(){this.addHandles(w.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),w.initial))};H.loadDependencies=
function(){return new Promise((D,l)=>q(["../chunks/calcite-notice"],D,l))};H.destroy=function(){this._destroyContentWidgets()};H.castVisibleElements=function(D){return{...z,...D}};H.render=function(){var {state:D}=this.viewModel;D=b.tsx("div",{class:x.CSS.container,key:"container"},this.renderTitle(),"error"===D?this.renderError():"loading"===D?this.renderLoading():this.renderContentContainer());return b.tsx("div",{class:this.classes(x.CSS.base,x.CSS.esriWidget)},D)};H.setActiveMedia=function(D,l){return this.viewModel.setActiveMedia(D,
l)};H.nextMedia=function(D){return this.viewModel.nextMedia(D)};H.previousMedia=function(D){return this.viewModel.previousMedia(D)};H.renderError=function(){const {messagesCommon:D,messages:l,visibleElements:g}=this;return b.tsx("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},g.title?b.tsx("div",{key:"error-title",slot:"title"},D.errorMessage):null,b.tsx("div",{key:"error-message",slot:"message"},l.loadingError))};H.renderLoading=function(){return b.tsx("div",{key:"loading-container",
class:x.CSS.loadingSpinnerContainer},b.tsx("span",{class:this.classes(x.CSS.iconLoading,x.CSS.spinner)}))};H.renderContentContainer=function(){const {visibleElements:D}=this;return D.content?b.tsx("div",{class:x.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};H.renderTitle=function(){const {visibleElements:D,title:l}=this;return D.title?b.tsx(G.Heading,{level:this.headingLevel,class:x.CSS.title,innerHTML:l}):null};H.renderContent=function(){var D=this.viewModel.content;return D?
Array.isArray(D)?D.length?b.tsx("div",{class:x.CSS.contentNode,key:"content-content-elements"},D.map(this.renderContentElement,this)):null:"string"===typeof D?(D=this._contentWidgets[0],!D||D.destroyed?null:b.tsx("div",{class:x.CSS.contentNode,key:"content-content"},D.render())):this.renderNodeContent(D):null};H.renderContentElement=function(D,l){const {visibleElements:g}=this;if("boolean"!==typeof g.content&&!g.content?.[D.type])return null;switch(D.type){case "attachments":return this.renderAttachments(l);
case "custom":return this.renderCustom(D,l);case "fields":return this.renderFields(l);case "media":return this.renderMedia(l);case "text":return this.renderText(D,l);case "expression":return this.renderExpression(l);case "relationship":return this.renderRelationship(l);default:return null}};H.renderAttachments=function(D){const l=this._contentWidgets[D];if(!l||l.destroyed)return null;const {state:g,attachmentInfos:u}=l.viewModel;return"loading"===g||0<u.length?b.tsx("div",{key:this._buildKey("attachments-element",
D),class:this.classes(x.CSS.contentElement)},l.render()):null};H.renderRelationship=function(D){const l=this._contentWidgets[D];return l&&!l.destroyed&&this.flowItems?b.tsx("div",{key:this._buildKey("relationship-element",D),class:x.CSS.contentElement},l.render()):null};H.renderExpression=function(D){const l=this._contentWidgets[D];return!l||l.destroyed?null:b.tsx("div",{key:this._buildKey("expression-element",D),class:x.CSS.contentElement},l.render())};H.renderCustom=function(D,l){({creator:D}=D);
const g=this._contentWidgets[l];return!g||g.destroyed?null:D?b.tsx("div",{key:this._buildKey("custom-element",l),class:x.CSS.contentElement},g.render()):null};H.renderFields=function(D){const l=this._contentWidgets[D];return!l||l.destroyed?null:b.tsx("div",{key:this._buildKey("fields-element",D),class:x.CSS.contentElement},l.render())};H.renderMedia=function(D){const l=this._contentWidgets[D];return!l||l.destroyed?null:b.tsx("div",{key:this._buildKey("media-element",D),class:x.CSS.contentElement},
l.render())};H.renderLastEditInfo=function(){const {visibleElements:D,messages:l}=this;var {lastEditInfo:g}=this.viewModel;if(!g||!D.lastEditedInfo)return null;const {date:u,user:L}=g;g=m.substitute("edit"===g.type?L?l.lastEditedByUser:l.lastEdited:L?l.lastCreatedByUser:l.lastCreated,{date:u,user:L});return b.tsx("div",{key:"edit-info-element",class:this.classes(x.CSS.lastEditedInfo,x.CSS.contentElement)},g)};H.renderText=function(D,l){const g=this._contentWidgets[l];return!g||g.destroyed?null:D.text?
b.tsx("div",{key:this._buildKey("text-element",l),class:this.classes(x.CSS.contentElement,x.CSS.text)},g.render()):null};H._buildKey=function(D,...l){const g=this.get("viewModel.graphic.uid")||"0";l=l.join("-");return`${D}__${g}-${l}`};H._destroyContentWidget=function(D){D&&(D.viewModel=null,!D.destroyed&&D.destroy())};H._destroyContentWidgets=function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(D=>this._destroyContentWidget(D));this._contentWidgets=[]};H._addFeatureRelationshipHandles=
function(D){const {flowItems:l,visibleElements:g}=this;this.addHandles([w.on(()=>D,"select-record",({featureViewModel:u})=>{l&&(u.abilities={relationshipContent:!0},l.push(new v({flowItems:l,viewModel:u,visibleElements:g})))}),w.on(()=>D,"show-all-records",()=>{if(l){var {viewModel:u}=D;u.showAllEnabled=!0;u=new t({visibleElements:{title:!1,description:!1},viewModel:u});this._addFeatureRelationshipHandles(u);l.push(u)}})],"relationship-handles")};H._setupContentWidgets=function(){this._destroyContentWidgets();
const {headingLevel:D,visibleElements:l}=this;var g=this.get("viewModel.content");const {contentViewModels:u}=this.viewModel;Array.isArray(g)?g.forEach((L,M)=>{"attachments"===L.type&&(this._contentWidgets[M]=new e({displayType:L.displayType,headingLevel:l.title?D+1:D,viewModel:u[M]}));"fields"===L.type&&(this._contentWidgets[M]=new h({viewModel:u[M]}));"media"===L.type&&(this._contentWidgets[M]=new n({viewModel:u[M]}));"text"===L.type&&(this._contentWidgets[M]=new d({viewModel:u[M]}));"custom"===
L.type&&(this._contentWidgets[M]=new d({viewModel:u[M]}));"expression"===L.type&&(this._contentWidgets[M]=new a({viewModel:u[M]}));"relationship"===L.type&&(L=new t({viewModel:u[M]}),this._addFeatureRelationshipHandles(L),this._contentWidgets[M]=L)},this):(g=u[0])&&!g.destroyed&&(this._contentWidgets[0]=new d({viewModel:g}));this.scheduleRender()};k._createClass(A,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(D){this.viewModel.graphic=D}},{key:"defaultPopupTemplateEnabled",
get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(D){this.viewModel.defaultPopupTemplateEnabled=D}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(D){this._overrideIfSome("label",D)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(D){this.viewModel.spatialReference=D}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",
get:function(){return this.viewModel.map},set:function(D){this.viewModel.map=D}},{key:"view",get:function(){return this.viewModel.view},set:function(D){this.viewModel.view=D}}]);return A}(F.FeatureContentMixin(N));p.__decorate([E.property()],r.prototype,"graphic",null);p.__decorate([E.property()],r.prototype,"defaultPopupTemplateEnabled",null);p.__decorate([E.property()],r.prototype,"flowItems",void 0);p.__decorate([E.property()],r.prototype,"headingLevel",void 0);p.__decorate([E.property({readOnly:!0})],
r.prototype,"isTable",null);p.__decorate([E.property()],r.prototype,"label",null);p.__decorate([E.property(),c.messageBundle("esri/widgets/Feature/t9n/Feature")],r.prototype,"messages",void 0);p.__decorate([E.property(),c.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);p.__decorate([E.property(),c.messageBundle("esri/widgets/support/t9n/uriUtils")],r.prototype,"messagesURIUtils",void 0);p.__decorate([E.property()],r.prototype,"spatialReference",null);p.__decorate([E.property({readOnly:!0})],
r.prototype,"title",null);p.__decorate([E.property()],r.prototype,"visibleElements",void 0);p.__decorate([J.cast("visibleElements")],r.prototype,"castVisibleElements",null);p.__decorate([E.property()],r.prototype,"map",null);p.__decorate([E.property()],r.prototype,"view",null);p.__decorate([E.property({type:f})],r.prototype,"viewModel",void 0);return r=v=p.__decorate([Q.subclass("esri.widgets.Feature")],r)});