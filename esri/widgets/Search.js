// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/css":function(){define(["exports"],function(n){n.CSS={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",
input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",
warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",
menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../Widget ./searchResultRendererCSS ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h,m,d){l=function(D){function I(x,G){x=D.call(this,x,G)||this;x.messages=null;x.showMoreResultsOpen=!1;x.viewModel=null;return x}n._inheritsLoose(I,D);var O=I.prototype;O.render=function(){return m.tsx("div",{class:t.CSS.base},m.tsx("div",{key:"esri-search-renderer__container",class:this.classes(t.CSS.moreResults,{[t.CSS.showMoreResults]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};O.renderMoreResults=function(){return m.tsx("div",
{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};O.renderSearchResultName=function(){const x=this.viewModel?.selectedResult;return m.tsx("div",{key:"esri-search-renderer__result-name",class:t.CSS.moreResultsItem},x&&x.name||"")};O.renderMoreResultsLists=function(){var x=this.viewModel?.results;const {resultCount:G}=this.viewModel;if(2>G)return null;x=x.map(y=>this.renderMoreResultsList(y));return m.tsx("div",{key:"esri-search-renderer__more-results-container",
class:t.CSS.moreResultsList},x)};O.renderMoreResultsButton=function(){const {messages:x}=this,{resultCount:G}=this.viewModel;return 2>G?null:m.tsx("div",{key:"esri-search-renderer__more-results-button",class:t.CSS.moreResultsItem},m.tsx("a",{class:t.CSS.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?x.hideMoreResults:x.showMoreResults))};O.renderMoreResultsHeader=function(x,G){return m.tsx("div",{key:`esri-search-result-renderer__header-${G}`,
class:t.CSS.moreResultsListHeader},x)};O.renderMoreResultsList=function(x){var {results:G}=x,y=G.length;const L=!!y;var X=this.viewModel?.selectedResult;y=1===y&&G[0]===X;X=this._getSourceName(x.source,x.sourceIndex);X=1<this.viewModel?.results.length&&!y?this.renderMoreResultsHeader(X,x.sourceIndex):null;G=L&&G.map((da,ca)=>this.renderMoreResultsListItem(da,ca));G=L&&!y?m.tsx("ul",{key:`esri-search-result-renderer__list-${x.sourceIndex}`},G):null;return L?m.tsx("div",{key:`esri-search-result-renderer__results-${x.sourceIndex}`},
X,G):null};O.renderMoreResultsListItem=function(x,G){const y=this.get("viewModel.selectedResult");return x!==y?m.tsx("li",{key:`esri-search-result-renderer__list-item-${G}`},m.tsx("a",{class:t.CSS.anchor,href:"#",tabindex:"0",bind:this,"data-result":x,onclick:this._selectResultClick,onkeydown:this._selectResultClick},x.name)):null};O._showMoreResultsClick=function(x){x.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(x=this.get("viewModel.view.popup"))&&x.reposition()};O._selectResultClick=
function(x){x.preventDefault();x=x.currentTarget["data-result"];this.viewModel&&this.viewModel.select(x)};O._getSourceName=function(x,G){return G===w.ALL_INDEX?this.messages.all:x.name};return I}(u);a.__decorate([b.property(),h.messageBundle("esri/widgets/Search/t9n/Search")],l.prototype,"messages",void 0);a.__decorate([b.property()],l.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],l.prototype,"viewModel",void 0);a.__decorate([g.accessibleHandler()],l.prototype,"_showMoreResultsClick",
null);a.__decorate([g.accessibleHandler()],l.prototype,"_selectResultClick",null);return l=a.__decorate([z.subclass("esri.widgets.Search.SearchResultRenderer")],l)})},"esri/widgets/Search/searchResultRendererCSS":function(){define(["exports"],function(n){n.CSS={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",
moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h,m,d,D,I,O,x,G,y,L,X,da,ca,F,e,r,v,E,T,Y,W,U,A,J,H,Q,V){function C(N,Z){return N.hasOwnProperty(Z)&&null!=N[Z]&&""!==N[Z]}const K=d.getLogger("esri.widgets.Search.SearchViewModel"),R=w.ofType({key:N=>N.layer?"layer":"locator",base:T,typeMap:{layer:v,locator:E}}),ea=da.WGS84,S=/<(?:.|\s)*?>/g;u=function(N){function Z(c){c=N.call(this,c)||this;c._handles=new m;c._gotoController=null;c._searching=null;c._createdFeatureLayers=[];c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new R;c.defaultSymbols={point:new H({url:b.getAssetUrl("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new Q({color:[130,130,130,1],width:2}),polygon:new V({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=e.getDefault();c.resultCount=null;c.resultGraphicEnabled=
!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=null;c.sources=new R;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}n._inheritsLoose(Z,N);var M=Z.prototype;M.initialize=function(){var c=this;const k=function(){var q=n._asyncToGenerator(function*(){const p=yield F.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=p;c.defaultPopupTemplate=new z({title:p.searchResult,content:"{Match_addr}"})});
return function(){return q.apply(this,arguments)}}();k();this._handles.add([O.watch(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),O.initial),ca.onLocaleChange(k)])};M.destroy=function(){this._destroyFeatureLayers();this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};M.clear=function(){this.searchTerm=""};M.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",
null)};M.search=function(c,k){this.emit("search-start");this.clearGraphics();const q=this._createSuggestionForSearch(c);return this._searching=c=this.when().then(()=>this._getResultsFromSources(q,k).then(p=>{if(D.unwrap(k?.signal)?.aborted)return null;const B={activeSourceIndex:this.activeSourceIndex,searchTerm:q.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(B,p,q);p=this._getFirstResult(B.results);const P=(q.location&&p?p.name:q.text).replace(S,"");this._set("searchTerm",
P);(q.key&&"number"===typeof q.sourceIndex||q.location)&&this._set("selectedSuggestion",q);this._set("results",B.results);this._set("resultCount",B.results.reduce((aa,ba)=>aa+ba.results.length,0));this.emit("search-complete",B);return this._selectFirstResult(p).then(()=>B)})).then(p=>{this._clearSearching();return p},p=>{this._clearSearching();throw p;})};M.searchNearby=function(c){if(!this.locationEnabled){var k=new g("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});
K.error(k);return Promise.reject(k)}this._searching=k=U.getCurrentPosition().then(q=>U.positionToPoint({position:q,view:this.view},c)).then(q=>this.search(q,c));k.catch(()=>{}).then(()=>this._clearSearching());return k};M.select=function(c){this.clearGraphics();if(!c){var k=new g("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});K.error(k);return Promise.reject(k)}const {view:q}=this,p=C(c,"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),B=this.allSources.at(p);
if(!B)return k=new g("select:missing-source","Cannot select without a source.",{source:B}),K.error(k),Promise.reject(k);k=B instanceof v?this._getLayerSourcePopupTemplate(B):B.popupTemplate;const P=B.resultSymbol||this._getDefaultSymbol(c),aa=C(B,"resultGraphicEnabled")?B.resultGraphicEnabled:this.resultGraphicEnabled,ba=C(B,"autoNavigate")?B.autoNavigate:this.autoNavigate,fa=C(B,"popupEnabled")?B.popupEnabled:this.popupEnabled,ha=fa?k||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ia}=
c;if(!ia)return k=new g("select:missing-feature","Cannot select without a feature.",{feature:ia}),K.error(k),Promise.reject(k);const {attributes:oa,geometry:pa,layer:qa,sourceLayer:ra}=ia,ma=Y.getPointFromGeometry(pa);k={layerViewQuery:this._getLayerView(ia),elevationQuery:q&&D.isSome(ma)?Y.getPointWithElevation(ma,q).catch(()=>ma):Promise.resolve(ma)};return I.eachAlways(k).then(ja=>{const ka=ja.layerViewQuery.value,sa=ja.elevationQuery.value;P instanceof J&&(P.text=c.name);ja=q&&ba?c.target||c.extent:
null;return(D.isSome(ja)?this._goToSearchResult(ja):Promise.resolve()).then(()=>{const la=ka?ia:new f({geometry:pa,symbol:P,attributes:oa,layer:qa,sourceLayer:ra,popupTemplate:ha});var na=fa&&this.view?.popup;(na=na&&la.getEffectivePopupTemplate(na.defaultPopupTemplateEnabled))&&q.popup.open({features:[la],location:sa});ka&&r.highlightsSupported(ka)&&!na&&this._highlightFeature({graphic:la,layerView:ka});!ka&&aa&&q&&q.graphics.push(la);this._setResultFloor(c);this._set("selectedResult",c);this._set("resultGraphic",
la);this.emit("select-result",{result:c,source:B,sourceIndex:p});return c})})};M.suggest=function(c,k,q){const p=c||this.searchTerm;this.emit("suggest-start",{searchTerm:p});return this._suggestTimer(k,q).then(()=>this._suggestImmediate(p,q).then(B=>{this._set("suggestions",B.results);this._set("suggestionCount",B.results.reduce((P,aa)=>P+aa.results.length,0));this.emit("suggest-complete",B);return B}))};M.when=function(){var c=n._asyncToGenerator(function*(){yield O.whenOnce(()=>!this.updating)});
return function(){return c.apply(this,arguments)}}();M._update=function(){var c=n._asyncToGenerator(function*(){const {portal:k,view:q}=this;if(this.includeDefaultSources){const p=this._updatingPromise=I.eachAlways([k?.load(),q?.when()]);if(this.destroyed)return;yield p;if(p!==this._updatingPromise)return}yield O.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();this._updatingPromise=null});return function(){return c.apply(this,arguments)}}();M._clearSearching=function(){this._searching=
null};M._convertHelperServices=function(){const c=this.portal?.helperServices?.geocode;return c?c.map(k=>{if(!1!==k.placefinding){var q=l.apiKey&&W.isArcGISWorldGeocoder(k.url)?{url:W.meteredArcGISLocatorUrl}:null;k=E.fromJSON({...k,...q});q=k.url;(W.isArcGISWorldGeocoder(q)||W.isProxiedArcGISWorldGeocoder(q)||W.isMeteredArcGISWorldGeocoder(q))&&k.set({singleLineFieldName:"SingleLine",outFields:k.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:k.placeholder||this.messages.placeholder,
defaultZoomScale:"number"===typeof k.defaultZoomScale?k.defaultZoomScale:2500});if(k.singleLineFieldName)return k}}).filter(Boolean):[]};M._destroyFeatureLayers=function(){this._createdFeatureLayers.forEach(c=>c?.destroy());this._createdFeatureLayers=[]};M._getLayerSources=function(c,k){const q=this.view?.map;return c.map(p=>{const B=q.findLayerById(p.id);if(B){p=this._getLayerJSON(p);var P=v.fromJSON(p);P.placeholder=k;this._getLayer(B,p).then(aa=>{P.layer=aa});return P}}).filter(Boolean).toArray()};
M._getTableSources=function(c,k){const q=this.view?.map;return c.map(p=>{const B=q.findTableById(p.id);if(B){p=this._getLayerJSON(p);var P=v.fromJSON(p);P.placeholder=k;this._getLayer(B,p).then(aa=>{P.layer=aa});return P}}).filter(Boolean).toArray()};M._convertApplicationProperties=function(){var c=this.view?.map?.applicationProperties?.viewing?.search;if(!c)return[];const {enabled:k,hintText:q,layers:p,tables:B}=c;if(!k)return[];c=this._getLayerSources(p,q);const P=this._getTableSources(B,q);return[...c,
...P]};M._getSubLayer=function(){var c=n._asyncToGenerator(function*(k,q){yield k.load();if(!k.allSublayers)throw Error();k=k.allSublayers.find(p=>p.id===q.subLayer);if(!k)throw Error();k=yield k.createFeatureLayer();this._createdFeatureLayers.push(k);return k});return function(k,q){return c.apply(this,arguments)}}();M._getBuildingSubLayer=function(){var c=n._asyncToGenerator(function*(k,q){yield k.load();k=k.allSublayers.find(p=>p.id===q.subLayer);if("building-component"!==k?.type)throw Error();
yield k.load();if(null==k.associatedLayer)throw Error();yield k.associatedLayer.load();return k});return function(k,q){return c.apply(this,arguments)}}();M._getLayer=function(c,k){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,k).catch(()=>{const q=new g("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});K.error(q);return null}):"building-scene"===
c.type?this._getBuildingSubLayer(c,k):Promise.resolve(null)};M._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};M._updateDefaultSources=function(){const {defaultSources:c,includeDefaultSources:k}=this;this._destroyFeatureLayers();c.removeAll();k&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};M._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};M._clear=function(){this._abortGoTo();this._set("resultCount",
null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};M._closePopup=function(){const c=this.view?.popup,{resultGraphic:k}=this;if(c&&k){var {selectedFeature:q}=c;q&&q===k&&c.close()}};M._suggestTimer=function(c,k){return I.after(null!=c?c:this.suggestionDelay,null,k&&k.signal)};M._createLocationForSearch=function(c){return c instanceof f?Y.getPointFromGeometry(c.geometry):
c instanceof X?c:Array.isArray(c)&&2===c.length?new X({longitude:c[0],latitude:c[1]}):null};M._createSuggestionForSearch=function(c){if(c&&C(c,"key")&&C(c,"text")&&C(c,"sourceIndex"))return c;const k=this._createLocationForSearch(c),q="string"===typeof c?c:this.searchTerm,{selectedSuggestion:p,selectedResult:B}=this,P=(c=!c&&p&&B)&&p.location;return c&&p.key===B.key&&p.sourceIndex===B.sourceIndex||P?p:{location:D.unwrap(k),text:k?"":q,sourceIndex:null,key:null}};M._getFirstResult=function(c){let k=
null;c&&c.some(q=>{({results:q}=q);q=q[0];const p=!!q;p&&(k=q);return p});return k};M._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):Promise.resolve(null)};M._suggestImmediate=function(c,k){return this.when().then(()=>this._getSuggestionsFromSources(c,k)).then(q=>{if(D.unwrap(k?.signal)?.aborted)return null;const p={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(p,q);return p})};M._formatSourceResponse=
function(c,k,q){const p=k&&k.value||[];k=k&&k.error;const B=this.allSources.at(q);k?(c.errors.push({sourceIndex:q,source:B,error:k}),K.error(k),c.numErrors++):(c.results.push({sourceIndex:q,source:B,results:p}),c.numResults+=p.length)};M._formatResponse=function(c,k,q){if(k)if(-1===c.activeSourceIndex){const p=q&&C(q,"sourceIndex")&&-1!==q.sourceIndex?q.sourceIndex:void 0;k.forEach((B,P)=>{this._formatSourceResponse(c,B,void 0!==p?p:P)})}else this._formatSourceResponse(c,k[0],c.activeSourceIndex)};
M._getResultsFromSources=function(c,k){var {allSources:q}=this;const p=!c.location&&C(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,B=[];if(!q.length)return q=new g("search:no-sources-defined","At least one source is required.",{allSources:q}),K.error(q),Promise.reject(q);-1===p?q.forEach((P,aa)=>{B.push(this._getResultsFromSource(c,aa,k))}):B.push(this._getResultsFromSource(c,p,k));return I.eachAlways(B)};M._getSuggestionsFromSources=function(c,k){const {allSources:q,activeSourceIndex:p}=
this,B=[];if(!q.length){const P=new g("suggest:no-sources-defined","At least one source is required.",{allSources:q});K.error(P);return Promise.reject(P)}-1===p?q.forEach((P,aa)=>{B.push(this._getSuggestionsFromSource(c,aa,k))}):B.push(this._getSuggestionsFromSource(c,p,k));return I.eachAlways(B)};M._getResultsFromSource=function(c,k,q){const p=this.allSources.at(k),{location:B=null}=c,P=this.view?.spatialReference||ea,aa=C(p,"maxResults")?p.maxResults:this.maxResults,ba=p instanceof v&&C(p,"exactMatch")?
p.exactMatch:!1,{view:fa}=this;return p.getResults({view:fa,sourceIndex:k,location:B,suggestResult:c,spatialReference:P,exactMatch:ba,maxResults:aa},q)};M._getSuggestionsFromSource=function(c,k,q){const p=this.allSources.at(k);var B=C(p,"suggestionsEnabled")?p.suggestionsEnabled:this.suggestionsEnabled,P=c.length,aa=C(p,"minSuggestCharacters")?p.minSuggestCharacters:this.minSuggestCharacters;if(B&&c.trim()&&P>=aa){B=this.view?.spatialReference||ea;P=C(p,"maxSuggestions")?p.maxSuggestions:this.maxSuggestions;
({view:aa}=this);const ba=p instanceof v&&C(p,"exactMatch")?p.exactMatch:!1;return p.getSuggestions({view:aa,sourceIndex:k,suggestTerm:c,spatialReference:B,maxSuggestions:P,exactMatch:ba},q)}return Promise.resolve(null)};M._getLayerSourcePopupTemplate=function(c){const {layer:k}=c;if(k)return C(c,"popupTemplate")?c.popupTemplate:k.popupTemplate};M._getSourceIndexOfResult=function(c){let k=null;this.results.some(q=>q.results.some(p=>p===c?(k=q.sourceIndex,!0):!1));return k};M._goToSearchResult=function(){var c=
n._asyncToGenerator(function*(k){const q=!!k;this._abortGoTo();const p=new AbortController;this._gotoController=p;yield this.callGoTo({target:{target:k},options:{animate:q,signal:p.signal}});this._gotoController=null});return function(k){return c.apply(this,arguments)}}();M._getDefaultSymbol=function(c){const {defaultSymbols:k}=this;c=c.feature?.geometry;if(D.isNone(c))return null;switch(c.type){case "point":case "multipoint":return k.point;case "polyline":return k.polyline;case "extent":case "polygon":return k.polygon;
default:return null}};M._removeHighlight=function(){this._handles.remove("highlight")};M._getLayerView=function(){var c=n._asyncToGenerator(function*(k){const {view:q}=this;if(!k||!q||"building-component"===k.layer.type||"subtype-sublayer"===k.layer.type)return null;({layer:k}=k);yield q.when();return q.whenLayerView(k)});return function(k){return c.apply(this,arguments)}}();M._highlightFeature=function(c){const {graphic:k,layerView:q}=c,{attributes:p,layer:B}=k;({objectIdField:c}=B);c=q.highlight(p&&
p[c]||k);this._handles.add(c,"highlight")};M._setResultFloor=function(c){const {view:k}=this;var q=c.feature?.attributes;(c=c.feature?.sourceLayer)&&"floorInfo"in c&&c?.floorInfo?.floorField&&q&&(q=q[c.floorInfo.floorField],k?.emit("select-result-floor",q))};n._createClass(Z,[{key:"activeSource",get:function(){return this.allSources.at(this.activeSourceIndex)??null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){this._overrideIfSome("activeSourceIndex",
c)}},{key:"allPlaceholder",get:function(){return this.messages?.allPlaceholder},set:function(c){this._overrideIfSome("allPlaceholder",c)}},{key:"allSources",get:function(){const {sources:c,defaultSources:k,includeDefaultSources:q}=this,p="function"===typeof q?q.call(null,{sources:c,defaultSources:k}):q?k.concat(c):c,B=this._get("allSources")||new R;B.removeAll();B.addMany(p.filter(Boolean));return B}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||U.supported()},set:function(c){if(void 0===
c)this._clearOverride("locationEnabled");else{var k=U.supported();if(c&&!k){const q=new g("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(q)}this._override("locationEnabled",!!c&&k)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:k,allPlaceholder:q}=this;if(-1===k)return q;const p=c.at(k);return p?p.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",
c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return Z}(A.GoToMixin(h.EventedMixin(t)));u.ALL_INDEX=-1;a.__decorate([x.property()],u.prototype,"_searching",void 0);a.__decorate([x.property()],u.prototype,
"_updatingPromise",void 0);a.__decorate([x.property({readOnly:!0,value:null})],u.prototype,"activeSource",null);a.__decorate([x.property()],u.prototype,"activeSourceIndex",null);a.__decorate([x.property()],u.prototype,"allPlaceholder",null);a.__decorate([x.property({readOnly:!0})],u.prototype,"allSources",null);a.__decorate([x.property()],u.prototype,"autoNavigate",void 0);a.__decorate([x.property()],u.prototype,"autoSelect",void 0);a.__decorate([x.property()],u.prototype,"defaultPopupTemplate",void 0);
a.__decorate([x.property({readOnly:!0})],u.prototype,"defaultSources",void 0);a.__decorate([x.property()],u.prototype,"defaultSymbols",void 0);a.__decorate([x.property()],u.prototype,"includeDefaultSources",void 0);a.__decorate([x.property()],u.prototype,"locationEnabled",null);a.__decorate([x.property()],u.prototype,"maxInputLength",void 0);a.__decorate([x.property()],u.prototype,"maxResults",void 0);a.__decorate([x.property()],u.prototype,"maxSuggestions",void 0);a.__decorate([x.property()],u.prototype,
"messages",void 0);a.__decorate([x.property()],u.prototype,"minSuggestCharacters",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"placeholder",null);a.__decorate([x.property()],u.prototype,"popupEnabled",void 0);a.__decorate([x.property({type:z})],u.prototype,"popupTemplate",void 0);a.__decorate([x.property({type:e})],u.prototype,"portal",void 0);a.__decorate([x.property()],u.prototype,"resultCount",void 0);a.__decorate([x.property()],u.prototype,"resultGraphicEnabled",void 0);a.__decorate([x.property({readOnly:!0})],
u.prototype,"resultGraphic",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"results",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"selectedSuggestion",void 0);a.__decorate([x.property()],u.prototype,"searchAllEnabled",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"selectedResult",void 0);a.__decorate([x.property()],u.prototype,"searchTerm",null);a.__decorate([x.property({type:R})],u.prototype,"sources",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,
"state",null);a.__decorate([x.property()],u.prototype,"suggestionDelay",void 0);a.__decorate([x.property()],u.prototype,"suggestionCount",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"suggestions",void 0);a.__decorate([x.property()],u.prototype,"suggestionsEnabled",void 0);a.__decorate([x.property({readOnly:!0})],u.prototype,"updating",null);a.__decorate([x.property()],u.prototype,"view",void 0);a.__decorate([x.property()],u.prototype,"clear",null);return u=a.__decorate([L.subclass("esri.widgets.Search.SearchViewModel")],
u)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(n,a){n.extractSafeScaleBounds=function(b){b=b.effectiveScaleRange;return{minScale:b?.minScale??0,maxScale:b?.maxScale??0}};n.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};n.isScaleRangeActive=function(b,l){return a.isSome(b)&&0<b||a.isSome(l)&&0<l};n.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};n.scaleBoundsPredicate=function(b,l,f){return a.isNone(b)||
b>f&&(0===l||b<l)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(n,a,b,l,f,z,u,t){var w;f=w=function(g){function h(d){var D=g.call(this,d)||this;D.displayField=
null;D.exactMatch=null;D.orderByFields=null;D.searchFields=null;D.searchTemplate=null;D.suggestionTemplate=null;D.getResults=(I,O)=>t.getResults({source:n._assertThisInitialized(D),...I},O);D.getSuggestions=(I,O)=>t.getSuggestions({source:n._assertThisInitialized(D),...I},O);return D}n._inheritsLoose(h,g);var m=h.prototype;m.clone=function(){return new w({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,
outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,
zoomScale:this.zoomScale})};m._getFirstStringField=function(){return this.layer.fieldsIndex.fields.find(d=>"string"===d.type)?.name??""};m._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};m._getSearchFieldsString=function(){const {layer:d,searchFields:D}=this;return d.loaded?`: ${(D||[this._getDisplayField()]).map(I=>{const O=d.getField(I);return O&&O.alias||I}).join(", ")}`:""};m._getLayerTitle=function(){var {layer:d}=this;if(d&&({title:d}=
d,d))return`${d}${this._getSearchFieldsString()}`};n._createClass(h,[{key:"layer",set:function(d){this._set("layer",d);d&&d.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()??""},set:function(d){this._overrideIfSome("name",d)}}]);return h}(u);a.__decorate([l.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],f.prototype,"displayField",void 0);a.__decorate([l.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],
f.prototype,"exactMatch",void 0);a.__decorate([l.property({value:null})],f.prototype,"layer",null);a.__decorate([l.property()],f.prototype,"name",null);a.__decorate([l.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);a.__decorate([l.property()],f.prototype,"searchFields",void 0);a.__decorate([l.property()],f.prototype,"searchTemplate",void 0);a.__decorate([l.property()],f.prototype,"suggestionTemplate",void 0);return f=w=a.__decorate([z.subclass("esri.widgets.Search.LayerSearchSource")],
f)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),function(n,a,b,l,f,z,u,t){b=function(w){function g(h){h=w.call(this,h)||this;h.autoNavigate=null;h.filter=null;h.getResults=null;h.getSuggestions=null;h.maxResults=null;
h.maxSuggestions=null;h.minSuggestCharacters=null;h.outFields=null;h.placeholder="";h.popupEnabled=null;h.popupTemplate=null;h.prefix="";h.resultGraphicEnabled=null;h.resultSymbol=null;h.suggestionsEnabled=null;h.suffix="";h.withinViewEnabled=!1;h.zoomScale=null;return h}n._inheritsLoose(g,w);return g}(b.IdentifiableMixin(l.JSONSupport));a.__decorate([f.property()],b.prototype,"autoNavigate",void 0);a.__decorate([f.property()],b.prototype,"filter",void 0);a.__decorate([f.property()],b.prototype,"getResults",
void 0);a.__decorate([f.property()],b.prototype,"getSuggestions",void 0);a.__decorate([f.property()],b.prototype,"maxResults",void 0);a.__decorate([f.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([f.property()],b.prototype,"outFields",void 0);a.__decorate([f.property()],b.prototype,"placeholder",void 0);a.__decorate([f.property()],b.prototype,"popupEnabled",void 0);a.__decorate([f.property()],b.prototype,"popupTemplate",
void 0);a.__decorate([f.property()],b.prototype,"prefix",void 0);a.__decorate([f.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([f.property()],b.prototype,"resultSymbol",void 0);a.__decorate([f.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property()],b.prototype,"suffix",void 0);a.__decorate([f.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([f.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([t.subclass("esri.widgets.Search.SearchSource")],
b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ../../../rest/support/FullTextSearch ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),function(n,a,b,l,f,z,u,t,w,g,h,m,d){function D(A,J){const {filter:H,withinViewEnabled:Q}=A;A=J&&J.extent;return H&&H.geometry||
(Q&&A?A:void 0)}function I(A){return O.apply(this,arguments)}function O(){O=a._asyncToGenerator(function*(A){A&&(yield A.load())});return O.apply(this,arguments)}function x(A,J){return(A=A?.indexes)&&J?.length?A.filter(H=>"FullText"===H.indexType).some(H=>{const Q=H.fields?.split(",").map(V=>V.trim().toLowerCase())||[];return J.every(V=>Q.includes(V.toLowerCase()))}):!1}function G({text:A,searchFields:J}){return A.trim().split(" ").filter(H=>!!H.trim()).map(H=>new g({onFields:J,searchTerm:H,searchType:"prefix"}))}
function y(A){return A?.fieldsIndex?.fields?.find(J=>"string"===J.type)?.name??""}function L(A,J){return A&&J?.length?J.every(H=>!!A.getField(H)):!1}function X(A,J,H){let Q=null;({codedValues:A}=A);A&&A.some(V=>{var C=V.name;C=H?C:C.toLowerCase();return(H?J:J.toLowerCase())===C?(Q=V.code.toString(),!0):!1});return Q}function da(A,J){return(J=J&&J.where)?`(${A}) AND (${J})`:A}function ca({currentTerm:A,field:J,filter:H,exactMatch:Q,url:V,type:C}){var K=J.type;J=J.name;if("string"===K||"date"===K||
"global-id"===K){if(K=V=Y.test(V))a:{for(K=0;K<A.length;K++)if(255<A.charCodeAt(K)){K=!0;break a}K=!1}K=K?"N":"";if(Q&&"search"===C)return da(`${J} = ${K}'${A}'`,H);if(V)return da(`${J} LIKE ${K}${`'${A}%'`}`,H);Q=`LOWER(${J})`;A=A.toLowerCase();return da(`${Q} LIKE ${K}${`'${A}%'`}`,H)}return"oid"===K||"small-integer"===K||"integer"===K||"single"===K||"double"===K?(A=Number(A),isNaN(A)?null:da(`${J} = ${A}`,H)):da(`${J} = ${A}`,H)}function F({searchTerm:A,layer:J,searchFields:H,filter:Q,exactMatch:V,
query:C,type:K}){const {definitionExpression:R,url:ea}=J;let S="";!C.fullText&&A&&H&&H.forEach(N=>{var Z=J.getField(N);N=((N="function"===typeof J.getFieldDomain&&J.getFieldDomain(N))&&"coded-value"===N.type?X(N,A,V):null)||A||null;null!==N&&(Z=ca({currentTerm:N,field:Z,filter:Q,exactMatch:V,url:ea,type:K}))&&(S+=S?` OR (${Z})`:`(${Z})`)});return R&&S?`(${R}) AND (${S})`:R||S}function e(A,J){let H=null;({codedValues:A}=A);A&&A.length&&A.some(Q=>Q.code===J?(H=Q.name,!0):!1);return H}function r(A,J){return A[Object.keys(A).find(H=>
H.toLowerCase()===J.toLowerCase())]}function v(A,J,H){const Q=A.sourceLayer,{attributes:V}=A;A="function"===typeof Q.getFieldDomain&&Q.getFieldDomain(H);return J?m.substitute(J,V):H&&V?(J=Q.getField(H),H=r(V,H),null==H?"":A&&"coded-value"===A.type?e(A,H):"date"===J?.type?d.formatDate(new Date(H)):"number"===typeof H?H.toString():"string"!==typeof H?"":H.trim()):""}function E(A,J,H,Q){return A.features.map(V=>{var C=V.sourceLayer,{attributes:K}=V;({objectIdField:C}=C);K=K[C];return{text:v(V,J.suggestionTemplate,
Q),key:K,sourceIndex:H}})}function T(A,J,H,Q,V,C,K){return A.features.map(R=>{const ea=R.clone();var S=R.sourceLayer;S=(S=S&&S.objectIdField)&&R.attributes[S];const N=v(R,H.searchTemplate,V);var Z=h.createExtentFromGeometry(ea.geometry,J,C);Z="number"===typeof K?h.scaleExtent(f.clone(Z),J,K):Z;R=R.clone();u.isSome(Z)&&(R.geometry=w.fromExtent(Z));return{extent:Z,target:R,feature:ea,key:S,name:N,sourceIndex:Q}})}const Y=/https?:\/\/services.*\.arcgis\.com/i,W=/(?:\{([^}]+)\})/g,U=z.getLogger("esri.widgets.Search.support.layerSearchUtils");
n.createFullTextSearchInfos=G;n.getResults=function(A,J){const {exactMatch:H=!1,location:Q,maxResults:V,spatialReference:C,source:K,sourceIndex:R,suggestResult:ea,view:S}=A,{layer:N,filter:Z,zoomScale:M}=K,c=S&&S.scale,k=D(K,S),q=J&&J.signal;return I(N).then(()=>{const p=N.popupTemplate;return p?p.getRequiredFields(N.fieldsIndex):null}).then(p=>{const {objectIdField:B,returnZ:P}=N,aa=K.displayField||K.layer.displayField||y(K.layer);if(!N.getField(aa))throw U.error("invalid-field: displayField is invalid."),
new l("getResults():invalid-field","displayField is invalid.");p=p&&p.length?p:[aa];var ba=K.outFields||p;p=ba&&ba.includes("*");ba.includes(B)||p||ba.push(B);N.floorInfo?.floorField&&ba.push(N.floorInfo.floorField);if(!p&&!L(N,ba))throw U.error("invalid-field: outField is invalid."),new l("getResults():invalid-field","outField is invalid.");p=N.createQuery();var {orderByFields:fa}=K;fa&&(p.orderByFields=fa);C&&(p.outSpatialReference=C,fa=1/t.getMetersPerUnitForSR(C))&&(p.maxAllowableOffset=fa);fa=
"mesh"===N.geometryType||"multipatch"===N.geometryType;p.returnZ=N.capabilities?.data?.supportsZ&&!fa&&!1!==P;p.returnGeometry=!0;p.multipatchOption=fa?"xyFootprint":null;ba&&(p.outFields=ba);if(Q)p.geometry=Q;else if(ea.key)p.objectIds=[ea.key];else{ba=K.searchFields||[aa];if(!L(N,ba))throw U.error("invalid-field: search field is invalid."),new l("getResults():invalid-field","search field is invalid.");(N?.capabilities?.query?.supportsPagination??!1)&&(p.num=V);k&&(p.geometry=k);if(!ea.text.trim())return[];
fa=ea.text;const {prefix:ha="",suffix:ia=""}=K,oa=`${ha}${fa}${ia}`.replace(/'/g,"''");(N?.capabilities?.query?.supportsFullTextSearch??!1)&&x(N,ba)&&!H&&fa&&(p.fullText=G({text:fa,searchFields:ba}));ba=F({searchTerm:oa,layer:N,searchFields:ba,filter:Z,exactMatch:H,query:p,type:"search"});p.where=ba;if(!p.fullText&&!p.where)return[]}return N.queryFeatures(p,{signal:q}).then(ha=>T(ha,S,K,R,aa,c,M))})};n.getSuggestions=function(A,J){const {source:H,spatialReference:Q,view:V,suggestTerm:C,maxSuggestions:K,
sourceIndex:R,exactMatch:ea}=A,{layer:S,filter:N}=H,Z=J&&J.signal,M=D(H,V);return I(S).then(()=>{if(!(S?.capabilities?.query?.supportsPagination??!1))return[];const c=H.displayField||H.layer.displayField||y(H.layer);var k=H.searchFields||[c];const q=[];H.suggestionTemplate?H.suggestionTemplate.replace(W,(fa,ha)=>{q.push(ha);return fa}):q.push(c);var p=q&&q.includes("*");q.includes(S.objectIdField)||p||q.push(S.objectIdField);var B=!!S.getField(c);p=p||L(S,q);const P=L(S,k);if(!B)throw U.error("invalid-field: displayField is invalid."),
new l("getSuggestions():invalid-field","displayField is invalid.");if(!p)throw U.error("invalid-field: outField is invalid."),new l("getSuggestions():invalid-field","outField is invalid.");if(!P)throw U.error("invalid-field: search field is invalid."),new l("getSuggestions():invalid-field","search field is invalid.");B=S.createQuery();({orderByFields:p}=H);p&&(B.orderByFields=p);B.outSpatialReference=Q;B.returnGeometry=!1;B.num=K;B.outFields=q;M&&(B.geometry=M);if(!C.trim())return[];const {prefix:aa=
"",suffix:ba=""}=H;p=`${aa}${C}${ba}`.replace(/'/g,"''");(S?.capabilities?.query?.supportsFullTextSearch??!1)&&x(S,k)&&!ea&&C&&(B.fullText=G({text:C,searchFields:k}));k=F({searchTerm:p,layer:S,searchFields:k,filter:N,exactMatch:ea,query:B,type:"suggest"});B.where=k;return B.fullText||B.where?S.queryFeatures(B,{signal:Z}).then(fa=>E(fa,H,R,c)):[]})};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),
function(n,a,b,l,f,z,u){function t(g,h,m){const d=g.hasZ?g.z:void 0;return h&&h.map?(m?z.getExtentForScale(h,m):h.extent).clone().centerAt(g).set({zmax:d,zmin:d}):new u({xmin:g.x-.25,ymin:g.y-.25,xmax:g.x+.25,ymax:g.y+.25,spatialReference:g.spatialReference,zmin:d,zmax:d})}const w=l.getLogger("esri.widgets.Search.support.geometryUtils");n.createExtentFromGeometry=function(g,h,m){if(f.isNone(g))return null;if("extent"===g.type)return g;if("multipoint"===g.type||"polygon"===g.type||"polyline"===g.type)return g.extent;
if("point"===g.type)return t(g,h,m)};n.getPointFromGeometry=function(g){if(f.isNone(g))return null;switch(g.type){case "point":return g;case "extent":return g.center;case "polygon":return g.centroid;case "multipoint":return g.getPoint(0);case "polyline":return g.getPoint(0,0)}return null};n.getPointWithElevation=function(g,h){if(!h)return w.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!g)return w.error("missing-parameter: point is missing."),
Promise.reject(new b("searchgeometryutils:missing-parameter","point is missing."));if(g.hasZ||"2d"===h.type)return Promise.resolve(g);const m=h?.map?.ground;return m&&m.layers.length?m.queryElevation(g,{cache:h.basemapTerrain?.elevationQueryCache}).then(d=>d.geometry):Promise.resolve(g)};n.scaleExtent=function(g,h,m){return f.isNone(g)||f.isNone(h)?null:t(g.center,h,m)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/scaleUtils":function(){define(["exports",
"../../core/unitUtils"],function(n,a){function b(l,f){f=a.getMetersPerUnitForSR(f);return l/(f*a.inchesPerMeter*96)}n.getExtentForScale=function(l,f){const z=l.extent;l=l.width-(l.padding?l.padding.left+l.padding.right:0);f=b(f,z.spatialReference);return z.clone().expand(f*l/z.width)};n.getResolutionForScale=b;n.getResolutionInMetersForScale=function(l){return l/(96*a.inchesPerMeter)};n.getScale=function(l,f){f=f||l.extent;l=l.width;const z=a.getMetersPerUnitForSR(f&&f.spatialReference);return f&&
l?f.width/l*z*a.inchesPerMeter*96:0};n.getScaleForResolution=function(l,f){f=a.getMetersPerUnitForSR(f);return l*f*a.inchesPerMeter*96};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/locatorUtils".split(" "),
function(n,a,b,l,f,z,u,t){var w;f=w=function(g){function h(m){var d=g.call(this,m)||this;d.apiKey=null;d.categories=null;d.countryCode=null;d.defaultZoomScale=null;d.localSearchDisabled=!1;d.locationType=null;d.name="";d.placeholder="";d.searchTemplate="";d.singleLineFieldName=null;d.suggestionsEnabled=null;d.url=null;d.zoomScale=null;d.getResults=(D,I)=>t.getResults({source:n._assertThisInitialized(d),...D},I);d.getSuggestions=(D,I)=>t.getSuggestions({source:n._assertThisInitialized(d),...D},I);
return d}n._inheritsLoose(h,g);h.prototype.clone=function(){return new w({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?b.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return h}(u);a.__decorate([l.property()],f.prototype,"apiKey",void 0);a.__decorate([l.property()],f.prototype,"categories",void 0);a.__decorate([l.property()],f.prototype,"countryCode",void 0);a.__decorate([l.property({json:{write:!0}})],
f.prototype,"defaultZoomScale",void 0);a.__decorate([l.property()],f.prototype,"localSearchDisabled",void 0);a.__decorate([l.property()],f.prototype,"locationType",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"name",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"placeholder",void 0);a.__decorate([l.property()],f.prototype,"searchTemplate",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"singleLineFieldName",void 0);a.__decorate([l.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],f.prototype,"suggestionsEnabled",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"url",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"zoomScale",void 0);return f=w=a.__decorate([z.subclass("esri.widgets.Search.LocatorSearchSource")],f)})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h){function m(G,y){if(y.localSearchDisabled)return null;y=G?.scale;return"number"===typeof y&&3E5>=y?G.get("extent.center"):null}function d(G,y){const {source:L,spatialReference:X,location:da,sourceIndex:ca,view:F}=G,{apiKey:e,url:r,zoomScale:v,defaultZoomScale:E}=L,T=F&&F.scale;G=y&&y.signal;y=new w;y.location=da;e&&(y.apiKey=e);X&&(y.outSpatialReference=X);return z.locationToAddress(r,y,{signal:G}).then(Y=>x([Y],{sourceIndex:ca,scale:T,view:F,zoomScale:v,defaultZoomScale:E})).catch(()=>
[])}function D(G,y){const {filter:L,withinViewEnabled:X}=G;G=y&&y.extent;return(y=h.createExtentFromGeometry(L&&L.geometry,y,y&&y.scale))||(X&&G?G:void 0)}function I(G,y){const {source:L,suggestResult:X,spatialReference:da,view:ca,maxResults:F,sourceIndex:e}=G,r=L&&L.zoomScale,v=L&&L.defaultZoomScale;if(!X.text.trim())return Promise.resolve(null);G=`${!X.key&&L.prefix?L.prefix:""}${X.text}${!X.key&&L.suffix?L.suffix:""}`;const E=new t,{apiKey:T,url:Y}=L,W=ca&&ca.scale;var U=D(L,ca);y=y&&y.signal;
T&&(E.apiKey=T);if(!Y)return Promise.resolve(null);L.categories&&(E.categories=L.categories);L.locationType&&(E.locationType=L.locationType);da&&(E.outSpatialReference=da);const A=m(ca,L);A&&(E.location=A);E.maxLocations=F;U&&(E.searchExtent=b.unwrap(U));L.countryCode&&(E.countryCode=L.countryCode);({key:U}=X);const J=`${U}`;U&&(E.magicKey=J);E.address={};E.address[L.singleLineFieldName||"Single Line Input"]=G;L.outFields&&(E.outFields=L.outFields);return f.addressToLocations(Y,E,{signal:y}).then(H=>
x(H,{key:J,scale:W,sourceIndex:e,view:ca,zoomScale:r,defaultZoomScale:v}))}function O(G,y){return G.map(L=>({text:L.text,key:L.magicKey,sourceIndex:y}))}function x(G,y){return G.filter(Boolean).map(L=>{const {key:X,scale:da,sourceIndex:ca,view:F,zoomScale:e,defaultZoomScale:r}=y,{attributes:v,extent:E,location:T,address:Y}=L;L=new a({geometry:T,attributes:v});var W=E||T,U=h.createExtentFromGeometry(W,F,da);W="number"===typeof e?h.scaleExtent(U,F,e):"number"===typeof r&&"point"===W.type?h.scaleExtent(U,
F,r):U;U=T?`${T.x},${T.y}`:"";U=Y||U;const A=L.clone();b.isSome(W)&&(A.geometry=l.fromExtent(W));return{extent:W,feature:L,target:A,key:X,name:U,sourceIndex:ca}})}n.getLocation=m;n.getResults=function(G,y){return G.location?d(G,y):I(G,y)};n.getSuggestions=function(G,y){const {source:L,spatialReference:X,view:da,suggestTerm:ca,maxSuggestions:F,sourceIndex:e}=G;G=new g;const {apiKey:r,url:v}=L,E=D(L,da);y=y&&y.signal;if(!v)return Promise.resolve(null);r&&(G.apiKey=r);L.categories&&(G.categories=L.categories);
X&&(G.outSpatialReference=X);const T=m(da,L);T&&(G.location=T);if(!ca.trim())return Promise.resolve(null);const {prefix:Y="",suffix:W=""}=L;G.text=`${Y}${ca}${W}`;E&&(G.searchExtent=b.unwrap(E));G.maxSuggestions=F;L.countryCode&&(G.countryCode=L.countryCode);return u.suggestLocations(v,G,{signal:y}).then(U=>O(U,e))};n.isArcGISWorldGeocoder=function(G){return G?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(G):!1};n.isMeteredArcGISWorldGeocoder=function(G){return G?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(G):
!1};n.isProxiedArcGISWorldGeocoder=function(G){return G?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(G):!1};n.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),
function(n,a,b,l,f,z,u){function t(){t=a._asyncToGenerator(function*(g,h,m){h=u.from(h);g=l.parseUrl(g);const {address:d,...D}=h.toJSON();h=l.encode({...g.query,...d,...D,f:"json"});m=l.asValidOptions(h,m);return b(`${g.path}/findAddressCandidates`,m).then(w)});return t.apply(this,arguments)}function w({data:g}){if(!g)return[];const {candidates:h,spatialReference:m}=g;return h?h.map(d=>{if(d){var {extent:D,location:I}=d,O=D?f.isValidExtent(D):!0;if(f.isValidLocation(I)&&O)return D&&(D.spatialReference=
m),I&&(I.spatialReference=m),z.fromJSON(d)}}):[]}n.addressToLocations=function(g,h,m){return t.apply(this,arguments)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/locator/utils":function(){define(["exports"],function(n){n.isValidExtent=function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};n.isValidLocation=function(a){return!!a&&"number"===typeof a.x&&"number"===typeof a.y};Object.defineProperty(n,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),function(n,a,b,l,f,z,u,t,w){b=function(g){function h(m){m=g.call(this,m)||this;m.address=null;m.attributes=null;
m.extent=null;m.location=null;m.score=null;return m}n._inheritsLoose(h,g);return h}(b.JSONSupport);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([l.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([l.property({type:t,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([l.property({type:w,json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([l.property({type:Number,json:{write:!0}})],b.prototype,
"score",void 0);return b=a.__decorate([u.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h,m){b=function(d){function D(I){I=d.call(this,I)||this;I.address=null;I.apiKey=null;I.categories=null;I.countryCode=null;I.forStorage=null;I.location=null;I.locationType=null;I.magicKey=null;I.maxLocations=null;I.outFields=null;I.outSpatialReference=null;I.searchExtent=null;return I}n._inheritsLoose(D,d);return D}(l.JSONSupport);a.__decorate([f.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([f.property(w.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:d=>d?d.split(","):null},write:{target:"category",writer:(d,D)=>{D.category=d?d.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(d,D)=>{D.location=d?d.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([f.property({type:[String],json:{write:{writer:(d,D)=>{D.outFields=d?d.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([f.property({type:h,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:m,json:{write:{writer:(d,D)=>{d=d?d.shiftCentralMeridian():null;D.searchExtent=d}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([t.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(n){n.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(n,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(n,a,b,l,f,z){function u(){u=a._asyncToGenerator(function*(w,g,h){g=z.from(g);w=l.parseUrl(w);g={...g.toJSON(),f:"json"};g=l.encode({...w.query,...g});h=l.asValidOptions(g,h);return b(`${w.path}/reverseGeocode`,h).then(t)});return u.apply(this,arguments)}
function t({data:w}){if(w){var {address:g,location:h}=w;return f.fromJSON({address:g&&g.Match_addr||"",attributes:g||{},location:h,score:100})}}n.locationToAddress=function(w,g,h){return u.apply(this,arguments)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h){b=function(m){function d(D){D=m.call(this,D)||this;D.apiKey=null;D.location=null;D.locationType=null;D.outSpatialReference=null;return D}n._inheritsLoose(d,m);return d}(l.JSONSupport);a.__decorate([f.property(w.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(m,d)=>{m=m?m.clone().normalize():null;d.location="undefined"!==typeof m?m:null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([f.property({type:h,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([t.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(n,a,b,
l,f,z){function u(){u=a._asyncToGenerator(function*(w,g,h){w=l.parseUrl(w);g=z.from(g);g={...g.toJSON(),f:"json"};g=l.encode({...w.query,...g});h=l.asValidOptions(g,h);return b(`${w.path}/suggest`,h).then(t)});return u.apply(this,arguments)}function t(w){({data:w}=w);if(!w)return[];({suggestions:w}=w);return w?w.map(g=>new f(g)):[]}n.suggestLocations=function(w,g,h){return u.apply(this,arguments)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,z,u){b=function(t){function w(g){g=t.call(this,g)||this;g.isCollection=null;g.magicKey=null;g.text=null;return g}n._inheritsLoose(w,t);return w}(b.JSONSupport);a.__decorate([l.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([u.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(n,a,b,l,f,z,u,t,w,g,h,m){b=function(d){function D(I){I=d.call(this,
I)||this;I.apiKey=null;I.categories=null;I.countryCode=null;I.location=null;I.maxSuggestions=null;I.outSpatialReference=null;I.searchExtent=null;I.text=null;return I}n._inheritsLoose(D,d);return D}(l.JSONSupport);a.__decorate([f.property(w.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:d=>d?d.split(","):null},write:{target:"category",writer:(d,D)=>{D.category=d?d.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(d,D)=>{D.location=d?d.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property({type:h,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:m,json:{write:{writer:(d,D)=>{d=d?d.shiftCentralMeridian():
null;D.searchExtent=JSON.stringify(d)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([t.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=z.ensureType(b);return b})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../kernel ../../core/arrayUtils ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(n,a,b,l,f,z,u,t,w,g,h,m,d,D,I,O,x,G,y,L,X,da,ca,F,e,r,v,E,T,Y,W,U){function A({longitude:C,latitude:K,altitude:R}){return new z({longitude:C,latitude:K,z:R||void 0,spatialReference:{wkid:4326}})}function J(C,K,R){if(!K)return Promise.resolve(C);const ea=K.spatialReference;return ea.isWGS84?Promise.resolve(C):ea.isWebMercator?Promise.resolve(u.geographicToWebMercator(C)):H(R).then(S=>{if(!S)throw new b("geometry-service:missing-url","Geometry service URL is missing");const N=new U({geometries:[C],
outSpatialReference:ea});return v.project(S,N,R).then(Z=>Z[0])})}function H(C){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);const K=t.getDefault();return K.load(C).catch(()=>{}).then(()=>K.get("helperServices.geometry.url"))}const Q=f.getLogger("esri.widgets.support.geolocationUtils"),V={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};n.getCurrentPosition=function(C){C||(C=V);return new Promise((K,R)=>{setTimeout(()=>R(new b("geolocation:timeout","getting the current geolocation position timed out")),
15E3);navigator.geolocation.getCurrentPosition(K,R,C)})};n.positionToPoint=function(C,K){const {position:R,view:ea}=C;C=R&&R.coords||{};C={accuracy:C.accuracy,altitude:C.altitude,altitudeAccuracy:C.altitudeAccuracy,heading:C.heading,latitude:C.latitude,longitude:C.longitude,speed:C.speed};C=(R?{coords:C,timestamp:R.timestamp}:R)?.coords;if(!C)throw new b("geometry-service:no-coords","Geolocation has no coordinates");C=A(C);return J(C,ea,K)};n.supported=function(){var C=l("esri-geolocation");C||Q.warn("geolocation-unsupported",
"Geolocation unsupported.");C&&((C=window.isSecureContext)||Q.warn("insecure-context","Geolocation requires a secure origin."));return C};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(n,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n.conversionTypeKebabDict=a;n.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,
UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,
UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,
UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",
UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/generalize":function(){define(["exports","../../core/jsonMap",
"../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});n.generalizeToRESTParameters=function(f){const {geometries:z,deviationUnit:u,maxDeviation:t}=f.toJSON();f={maxDeviation:t};z&&z.length&&(f.geometries=JSON.stringify({geometryType:b.getJsonType(z[0]),geometries:z}),f.sr=JSON.stringify(z[0].spatialReference));
l.write(u,f,"deviationUnit");return f};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,z,u,t,w){b=function(g){function h(m){m=
g.call(this,m)||this;m.deviationUnit=null;m.geometries=null;m.maxDeviation=null;return m}n._inheritsLoose(h,g);return h}(b.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(h=>w.fromJSON(h)).filter(l.isSome):null},write:{writer:(g,h)=>{h.geometries=g?.map(m=>m.toJSON())??null}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxDeviation",
void 0);b=a.__decorate([t.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});n.lengthsToRESTParameters=function(l){const {polylines:f,lengthUnit:z,geodesic:u,calculationType:t}=l.toJSON(),w={};w.polylines=JSON.stringify(f);l=l.polylines[0].spatialReference;w.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON());z&&(w.lengthUnit=
z);u&&(w.geodesic=u);t&&(w.calculationType=b.toJSON(t));return w};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,l,f,z,u,t,w,g){b=function(h){function m(d){d=h.call(this,d)||this;d.calculationType=null;d.geodesic=null;d.lengthUnit=null;d.polylines=null;return d}n._inheritsLoose(m,h);return m}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([f.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([f.property({type:[g],
json:{read:{reader:h=>h?h.map(m=>w.fromJSON(m)):null},write:{writer:(h,m)=>{m.polylines=h.map(d=>d.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([t.subclass("esri.rest.support.LengthsParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),
f=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});n.offsetToRESTParameters=function(z){const {geometries:u,bevelRatio:t,offsetDistance:w,offsetHow:g,offsetUnit:h}=z.toJSON();z={bevelRatio:t,offsetDistance:w};u&&u.length&&(z.geometries=JSON.stringify({geometryType:b.getJsonType(u[0]),geometries:u}),z.sr=JSON.stringify(u[0].spatialReference));g&&(z.offsetHow=l.toJSON(g));h&&(z.offsetUnit=f.toJSON(h));return z};Object.defineProperty(n,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,z,u,t,w){b=function(g){function h(m){m=g.call(this,m)||this;m.bevelRatio=null;m.geometries=
null;m.offsetDistance=null;m.offsetHow=null;m.offsetUnit=null;return m}n._inheritsLoose(h,g);return h}(b.JSONSupport);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(h=>w.fromJSON(h)).filter(l.isSome):null},write:{writer:(g,h)=>{h.geometries=g?.map(m=>m.toJSON())??null}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"offsetDistance",void 0);
a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([t.subclass("esri.rest.support.OffsetParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(n,a,b,l,f,z,u,t){function w(){w=a._asyncToGenerator(function*(h,m,d){m=g(m);h=z.parseUrl(h);const D={...h.query,f:"json",...m.toJSON()},I=m.outSpatialReference,O=f.getJsonType(m.geometries[0]);m=z.asValidOptions(D,d);return b(h.path+"/project",m).then(({data:{geometries:x}})=>u.decodeGeometries(x,O,I))});return w.apply(this,arguments)}const g=l.ensureType(t);n.project=function(h,m,d){return w.apply(this,arguments)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,l,f,z,u,t){b=function(w){function g(h){h=w.call(this,h)||this;h.geometries=[];h.outSpatialReference=null;h.transformation=null;h.transformForward=null;return h}n._inheritsLoose(g,w);g.prototype.toJSON=function(){const h=this.geometries.map(D=>D.toJSON()),m=this.geometries[0],d={};d.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());d.inSR=m.spatialReference.wkid||JSON.stringify(m.spatialReference.toJSON());d.geometries=JSON.stringify({geometryType:t.getJsonType(m),
geometries:h});this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(d.transformForward=this.transformForward);return d};return g}(b.JSONSupport);a.__decorate([l.property()],b.prototype,"geometries",void 0);a.__decorate([l.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([l.property()],b.prototype,"transformation",void 0);a.__decorate([l.property()],b.prototype,"transformForward",
void 0);return b=a.__decorate([u.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",
esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});n.relationToRESTParameters=function(f){const {geometries1:z,geometries2:u,relation:t,relationParameter:w}=f.toJSON();f={};if(z&&z.length){f.geometries1=JSON.stringify({geometryType:b.getJsonType(z[0]),geometries:z});const g=z[0].spatialReference;f.sr=g.wkid?g.wkid:
JSON.stringify(g)}u&&0<u.length&&(f.geometries2=JSON.stringify({geometryType:b.getJsonType(u[0]),geometries:u}));t&&(f.relation=l.toJSON(t));w&&(f.relationParam=w);return f};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,l,f,z,u,t,w){b=function(g){function h(m){m=g.call(this,m)||this;m.geometries1=null;m.geometries2=null;m.relation=null;m.relationParameter=null;return m}n._inheritsLoose(h,g);return h}(b.JSONSupport);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(h=>w.fromJSON(h)).filter(l.isSome):null},write:{writer:(g,h)=>{h.geometries1=g?.map(m=>m.toJSON())??null}}}})],b.prototype,"geometries1",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(h=>w.fromJSON(h)).filter(l.isSome):
null},write:{writer:(g,h)=>{h.geometries2=g?.map(m=>m.toJSON())??null}}}})],b.prototype,"geometries2",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([t.subclass("esri.rest.support.RelationParameters")],b);b.from=z.ensureType(b);return b})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=
new a.JSONMap({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});n.trimExtendToRESTParameters=function(l){const {extendHow:f,polylines:z,trimExtendTo:u}=l.toJSON();l={};l.extendHow=b.toJSON(f);z&&z.length&&(l.polylines=JSON.stringify(z),l.sr=JSON.stringify(z[0].spatialReference));u&&(l.trimExtendTo=JSON.stringify(u));return l};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,l,f,z,u,t,w,g){b=function(h){function m(d){d=h.call(this,d)||this;d.extendHow="default-curve-extension";d.polylines=null;d.trimExtendTo=null;return d}n._inheritsLoose(m,h);return m}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([f.property({type:[g],json:{read:{reader:h=>h?h.map(m=>w.fromJSON(m)):null},write:{writer:(h,m)=>{m.polylines=h.map(d=>d.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([f.property({json:{read:{reader:h=>
h?w.fromJSON(h):null},write:{writer:(h,m)=>{m.trimExtendTo=h.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([t.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=z.ensureType(b);return b})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,z,u,t){n.GoToMixin=w=>{w=function(g){function h(...m){m=g.call(this,...m)||this;m.goToOverride=null;m.view=null;return m}a._inheritsLoose(h,g);h.prototype.callGoTo=function(m){const {view:d}=this;l.assertIsSome(d);return this.goToOverride?this.goToOverride(d,m):d.goTo(m.target,m.options)};return h}(w);b.__decorate([f.property()],w.prototype,"goToOverride",void 0);b.__decorate([f.property()],w.prototype,"view",void 0);return w=b.__decorate([t.subclass("esri.widgets.support.GoTo")],
w)};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/reactiveUtils ../core/string ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/accessorSupport/decorators/subclass ./Widget ./Search/css ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(n,
a,b,l,f,z,u,t,w,g,h,m,d,D,I,O,x,G,y,L){const X=/<[a-z/][\s\S]*>/i;b=function(da){function ca(e,r){var v=da.call(this,e,r)||this;v._activeMenuItemIndex=-1;v._handles=new f;v._inputNode=null;v._menuItemCount=0;v._sourceMenuButtonNode=null;v._sourceListNode=null;v._suggestionListNode=null;v._searchResultRenderer=new D;v._locateFailed=null;v._container=null;v.activeMenu="none";v.disabled=!1;v.iconClass=d.CSS.widgetIcon;v.messages=null;v.messagesCommon=null;v.viewModel=new I;v._clearActiveMenu=()=>{v.activeMenu=
"none"};v._removeActiveMenu=E=>{(E=E.relatedTarget)&&v._container?.contains(E)||v._clearActiveMenu()};v.addHandles([z.watch(()=>v.searchTerm,E=>{(E&&"warning"===v.activeMenu||!E&&!v.get("viewModel.selectedSuggestion.location"))&&v._clearActiveMenu()}),z.on(()=>v.viewModel?.allSources,"change",()=>v._watchSourceChanges()),z.watch(()=>v.activeMenu,()=>v._resetActiveMenuItemIndex(),z.initial),z.watch(()=>v.viewModel?.defaultPopupTemplate,E=>{E&&(E.content=v._renderSearchResultsContent.bind(n._assertThisInitialized(v)))},
z.initial)]);return v}n._inheritsLoose(ca,da);var F=ca.prototype;F.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};F.clear=function(){this.viewModel.clear()};F.focus=function(){this._inputNode?.focus();this.emit("search-focus")};F.blur=function(){this._inputNode?.blur();this.emit("search-blur")};F.search=
function(e){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const r=new AbortController,{signal:v}=r;this._searchController=r;return this.viewModel.search(e,{signal:v}).catch(E=>{if(this._searchController===r)return this._clearActiveMenu(),this._searchController=null,E}).then(E=>{if(this._searchController===r)return this.activeMenu=E.numResults?"none":"warning",this._searchController=null,E})};F.suggest=function(e){this._cancelSuggest();const r=new AbortController,{signal:v}=r;
this._suggestController=r;return this.viewModel.suggest(e,null,{signal:v}).then(E=>{if(this._suggestController===r)return this._suggestController=null,E.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),E}).catch(()=>{if(this._suggestController===r)return this._suggestController=null})};F.render=function(){const {state:e}=this.viewModel;return y.tsx("div",{class:this.classes(d.CSS.base,{[d.CSS.disabled]:"disabled"===e,[d.CSS.esriWidgetDisabled]:this.disabled})},"loading"===e?this.renderLoader():
this.renderContainer())};F.renderSubmitButton=function(){const {messages:e,disabled:r}=this;return y.tsx("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:r,class:this.classes(d.CSS.submitButton,d.CSS.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},y.tsx("span",{"aria-hidden":"true",class:d.CSS.searchIcon}))};F.renderWarningMenu=function(){return y.tsx("div",{key:"esri-search__error-menu",class:this.classes(d.CSS.menu,
d.CSS.warningMenu)},y.tsx("div",{class:d.CSS.warningMenuBody},this.renderWarning()))};F.renderSourceMenuButton=function(){const {messages:e,activeMenu:r,sourceMenuId:v,sourceMenuButtonId:E,disabled:T}=this,{activeSourceIndex:Y,allSources:W}=this.viewModel;return 1<W.length?y.tsx("button",{id:E,key:"esri-search__source-menu-button",bind:this,disabled:T,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===r).toString(),"aria-controls":v,class:this.classes(d.CSS.sourcesButton,
d.CSS.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:O.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},y.tsx("span",{"aria-hidden":"true",class:d.CSS.dropdownIcon}),y.tsx("span",{"aria-hidden":"true",class:d.CSS.dropupIcon}),y.tsx("span",{class:d.CSS.sourceName},this._getSourceName(Y))):null};F.renderSourcesList=function(){const {allSources:e,searchAllEnabled:r}=this.viewModel,{_activeMenuItemIndex:v,activeMenu:E,sourceMenuId:T,
sourceMenuButtonId:Y}=this,W="source"===E&&-1<v?this._buildId("source-item",v):null;return 1<e.length?y.tsx("ul",{"aria-activedescendant":W,"aria-labelledby":Y,id:T,role:"menu",bind:this,afterCreate:O.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:d.CSS.menuList,tabIndex:-1},r?this.renderSource(I.ALL_INDEX):null,e.map((U,A)=>this.renderSource(A)).toArray()):null};F.renderSourcesMenu=function(){const {allSources:e}=this.viewModel;
return 1<e.length?y.tsx("div",{key:"esri-search__source-menu",class:this.classes(d.CSS.menu,d.CSS.sourcesMenu)},this.renderSourcesList()):null};F.renderLoader=function(){const {messages:e,messagesCommon:r,disabled:v}=this;return y.tsx("div",{class:d.CSS.loader,key:"base-loader",tabIndex:v?-1:null},y.tsx("span",{"aria-hidden":"true",class:d.CSS.loaderAnimation}),y.tsx("span",{class:d.CSS.fallbackText},e.searchButtonTitle),y.tsx("span",{class:d.CSS.loaderText},r.loading))};F.renderContainer=function(){const {allSources:e,
state:r}=this.viewModel,{activeMenu:v}=this;return y.tsx("div",{tabIndex:-1,afterCreate:E=>{this._container=E;E.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:E=>{E.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({[d.CSS.hasMultipleSources]:1<e.length,[d.CSS.isLoading]:"loading"===r,[d.CSS.isSearching]:"searching"===r,[d.CSS.showWarning]:"warning"===v,[d.CSS.showSources]:"source"===v,[d.CSS.showSuggestions]:"suggestion"===v},d.CSS.container),key:"base-container"},
this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};F.renderClearButton=function(){return this.searchTerm?y.tsx("button",{bind:this,disabled:this.disabled,class:this.classes(d.CSS.clearButton,d.CSS.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},y.tsx("span",{"aria-hidden":"true",class:d.CSS.clearIcon})):
null};F.renderLocationGroup=function(){const {messages:e,locationEnabled:r,displayedSearchTerm:v}=this,E="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return r&&!v?y.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(d.CSS.menuList,d.CSS.suggestionList,d.CSS.suggestionListCurrentLocation)},y.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===
this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(d.CSS.menuItem,E?d.CSS.menuItemFocus:null)},y.tsx("span",{"aria-hidden":"true",class:d.CSS.locate})," ",e.useCurrentLocation)):null};F.renderInput=function(){const {activeMenu:e,locationEnabled:r,displayedSearchTerm:v,messages:E,suggestionsMenuId:T,inputId:Y,_activeMenuItemIndex:W,disabled:U}=this,{maxInputLength:A,placeholder:J,searchTerm:H,suggestionCount:Q}=this.viewModel,V=!!(r&&!v||Q),C="suggestion"===
e&&-1<W?this._buildId("suggestion-item",W):null;return y.tsx("input",{"aria-activedescendant":C,"aria-autocomplete":"list","aria-expanded":(V&&"suggestion"===e).toString(),"aria-controls":V?T:null,"aria-haspopup":"listbox","aria-label":E.searchButtonTitle,bind:this,disabled:U,placeholder:J,maxlength:A,autocomplete:"off",type:"text",class:this.classes(d.CSS.esriInput,d.CSS.input),value:H,id:Y,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:O.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:H?"":J})};F.renderForm=function(){return y.tsx("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:d.CSS.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())};F.renderSuggestList=function(e){const {sourceIndex:r}=e,v=e.results;return e.results.length?y.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${r}`,class:this.classes(d.CSS.menuList,
d.CSS.suggestionList)},v.map(E=>this.renderSuggestion(E,this._menuItemCount++))):null};F.renderSuggestionsGroup=function(){const {suggestions:e}=this.viewModel;return e?e.map(r=>[this.renderSuggestionHeader(r),this.renderSuggestList(r)]):null};F.renderSuggestionsMenu=function(){const {displayedSearchTerm:e,locationEnabled:r,suggestionsMenuId:v,inputId:E}=this,{suggestionCount:T}=this.viewModel;this._menuItemCount=0;return r&&!e||T?y.tsx("div",{id:v,key:"esri-search__suggestions-menu",class:this.classes(d.CSS.menu,
d.CSS.suggestionsMenu),role:"listbox","aria-labelledby":E,bind:this,afterCreate:O.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};F.renderInputContainer=function(){return y.tsx("div",{key:"esri-search__input-container",class:d.CSS.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};F.renderSuggestionHeader=function(e){const {allSources:r,activeSourceIndex:v}=this.viewModel,{sourceIndex:E}=e,T=1<
r.length&&v===I.ALL_INDEX;return e.results.length&&T?y.tsx("div",{key:`esri-search__suggestion-header-${E}`,class:d.CSS.menuHeader},this._getSourceName(E)):null};F.renderSuggestion=function(e,r){const {_activeMenuItemIndex:v,messages:E}=this;var {searchTerm:T}=this.viewModel;if(T){var {text:Y}=e;Y=Y||E.untitledResult;const W=[];if(X.test(Y))W.push(y.tsx("div",{innerHTML:Y}));else{Y=this._splitResult(Y,T);const U=T.toLowerCase();Y.forEach((A,J)=>{A&&A.length&&(A.toLowerCase()===U?W.push(y.tsx("strong",
{key:J},A)):W.push(A))})}T="suggestion"===this.activeMenu&&v===r;return y.tsx("li",{bind:this,id:this._buildId("suggestion-item",r),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===r).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${r}`,"data-suggestion":e,role:"option",class:this.classes(d.CSS.menuItem,T?d.CSS.menuItemFocus:null)},W)}};F.renderSource=function(e){const {activeSourceIndex:r,searchAllEnabled:v}=this.viewModel,E={[d.CSS.menuItemActive]:e===
r,[d.CSS.menuItemFocus]:"source"===this.activeMenu&&e===(v?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return y.tsx("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",v?e+1:e),"aria-checked":(e===r).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(d.CSS.source,d.CSS.menuItem,E)},this._getSourceName(e))};F.renderNoResultsWarning=function(e){const {messages:r}=this;e=e?L.substitute(r.noResultsFoundForValue,
{value:`"${e}"`}):r.noResultsFound;return y.tsx("div",{key:"esri-search__no_results"},y.tsx("div",{class:d.CSS.warningMenuHeader},r.noResults),y.tsx("div",{class:d.CSS.warningMenuText},e))};F.renderEmptySearchWarning=function(){const {messages:e}=this;return y.tsx("div",{key:"esri-search__empty-search"},y.tsx("span",{"aria-hidden":"true",class:d.CSS.noticeIcon}),y.tsx("span",{class:d.CSS.noValueText},e.emptyValue))};F.renderLocateWarning=function(){const {messages:e}=this;return y.tsx("div",{key:"esri-search__locate-error"},
y.tsx("span",{"aria-hidden":"true",class:d.CSS.noticeIcon}),y.tsx("span",{class:d.CSS.noValueText},e.locateError))};F.renderWarning=function(){const {displayedSearchTerm:e,_locateFailed:r}=this,{viewModel:v}=this;return r?this.renderLocateWarning():v.selectedSuggestion?.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()};F._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};F._buildId=function(e,r){return`${this.id}-${e}${void 0===r?"":`-${r}`}`};F._watchSourceChanges=
function(){const {_handles:e,viewModel:{allSources:r}}=this;e.remove("sources");r.forEach(v=>e.add(z.watch(()=>v.name,()=>this.scheduleRender()),"sources"))};F._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};F._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();"source"===this.activeMenu&&this._sourceListNode?.focus()};F._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};
F._handleSearchButtonClick=function(){this.search()};F._handleSuggestionClick=function(e){if(e=e.currentTarget["data-suggestion"])this._focus(),this.search(e)};F._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};F._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const e=new AbortController,{signal:r}=e;this._searchController=e;this.viewModel.searchNearby({signal:r}).then(v=>{this.activeMenu=v.numResults?"none":"warning"}).catch(()=>
{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};F._handleSourceClick=function(e){this._setSourceFromMenuItem(e.currentTarget)};F._setSourceFromMenuItem=function(e){e&&(this.viewModel.activeSourceIndex=e["data-source-index"],this._clearActiveMenu(),this._sourceMenuButtonNode?.focus())};F._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};F._cancelSearch=function(){this._searchController&&(this._searchController.abort(),
this._searchController=null);this._locateFailed=!1};F._handleInputKeyup=function(e){var r=l.eventKey(e);if(!e.ctrlKey&&!e.metaKey&&"Copy"!==r&&"ArrowLeft"!==r&&"ArrowRight"!==r&&"Shift"!==r)if("Tab"===r||"Escape"===r||e.shiftKey&&"Tab"===r)this._cancelSuggest(),"Escape"===r&&this._clearActiveMenu();else{var v="Home"===r||"End"===r||"ArrowUp"===r||"ArrowDown"===r;if("Enter"===r&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var E=this._suggestionListNode?.getElementsByTagName("li");if(E?.length){"suggestion"!==
this.activeMenu&&this._openSuggestionMenu();if(v){e.preventDefault();this._cancelSuggest();this._handleItemNavigation(r,E,this._suggestionListNode);return}e=E[this._activeMenuItemIndex];if("Enter"===r&&e){(r=e["data-suggestion"])?(this._focus(),this.search(r)):e["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};F._handleItemNavigation=function(e,r,v){const E=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0);"End"===e&&
(this._activeMenuItemIndex=r.length-1);"ArrowUp"===e&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?r.length-1:this._activeMenuItemIndex-1);"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===r.length-1?0:this._activeMenuItemIndex+1);E!==this._activeMenuItemIndex&&O.keepMenuItemWithinView(r[this._activeMenuItemIndex],v)};F._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};F._openSuggestionMenu=function(){this.activeMenu=
"suggestion"};F._handleInputPaste=function(e){e=e.target;this.viewModel.searchTerm!==e.value&&(this.viewModel.searchTerm=e.value);this.viewModel.searchTerm&&this.suggest()};F._handleSourceMenuKeydown=function(e){const r=l.eventKey(e);O.isActivationKey(r)?(e.preventDefault(),e=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(e)):"ArrowUp"!==r&&"ArrowDown"!==r&&"End"!==r&&"Home"!==r||e.preventDefault()};F._handleSourceMenuKeyup=function(e){const r=
l.eventKey(e),v="ArrowUp"===r||"ArrowDown"===r||"End"===r||"Home"===r;v&&e.preventDefault();"Escape"===r?(this._clearActiveMenu(),this._sourceMenuButtonNode?.focus()):(e=this._sourceListNode?.getElementsByTagName("li"))&&0!==e.length&&v&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(r,e,this._sourceListNode.parentElement))};F._focus=function(e){this.focus();e&&(this.activeMenu=e)};F._formSubmit=function(e){e.preventDefault();-1===this._activeMenuItemIndex&&this.search()};
F._getSourceName=function(e){const {messages:r}=this;var {allSources:v}=this.viewModel;v=v.getItemAt(e);return e===I.ALL_INDEX?r.all:v?v.name||r.untitledSource:r.untitledSource};F._splitResult=function(e,r){r=u.escapeRegExpString(r);return e.replace(new RegExp(`(^|)(${r})(|$)`,"ig"),"$1|$2|$3").split("|")};F._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};n._createClass(ca,
[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}},{key:"activeSource",get:function(){return this.viewModel.activeSource}},{key:"activeSourceIndex",get:function(){return this.viewModel.activeSourceIndex},
set:function(e){this.viewModel.activeSourceIndex=e}},{key:"allPlaceholder",get:function(){return this.viewModel.allPlaceholder},set:function(e){this.viewModel.allPlaceholder=e}},{key:"allSources",get:function(){return this.viewModel.allSources}},{key:"autoNavigate",get:function(){return this.viewModel.autoNavigate},set:function(e){this.viewModel.autoNavigate=e}},{key:"autoSelect",get:function(){return this.viewModel.autoSelect},set:function(e){this.viewModel.autoSelect=e}},{key:"defaultSources",get:function(){return this.viewModel.defaultSources}},
{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"includeDefaultSources",get:function(){return this.viewModel.includeDefaultSources},set:function(e){this.viewModel.includeDefaultSources=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"locationEnabled",get:function(){return this.viewModel.locationEnabled},set:function(e){this.viewModel.locationEnabled=
e}},{key:"maxResults",get:function(){return this.viewModel.maxResults},set:function(e){this.viewModel.maxResults=e}},{key:"maxSuggestions",get:function(){return this.viewModel.maxSuggestions},set:function(e){this.viewModel.maxSuggestions=e}},{key:"minSuggestCharacters",get:function(){return this.viewModel.minSuggestCharacters},set:function(e){this.viewModel.minSuggestCharacters=e}},{key:"popupEnabled",get:function(){return this.viewModel.popupEnabled},set:function(e){this.viewModel.popupEnabled=e}},
{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(e){this.viewModel.popupTemplate=e}},{key:"portal",get:function(){return this.viewModel.portal},set:function(e){this.viewModel.portal=e}},{key:"resultGraphic",get:function(){return this.viewModel.resultGraphic},set:function(e){this.viewModel.resultGraphic=e}},{key:"resultGraphicEnabled",get:function(){return this.viewModel.resultGraphicEnabled},set:function(e){this.viewModel.resultGraphicEnabled=e}},{key:"results",
get:function(){return this.viewModel.results}},{key:"searchAllEnabled",get:function(){return this.viewModel.searchAllEnabled},set:function(e){this.viewModel.searchAllEnabled=e}},{key:"searchTerm",get:function(){return this.viewModel.searchTerm},set:function(e){this.viewModel.searchTerm=e}},{key:"selectedResult",get:function(){return this.viewModel.selectedResult}},{key:"sources",get:function(){return this.viewModel.sources},set:function(e){this.viewModel.sources=e}},{key:"suggestions",get:function(){return this.viewModel.suggestions}},
{key:"suggestionsEnabled",get:function(){return this.viewModel.suggestionsEnabled},set:function(e){this.viewModel.suggestionsEnabled=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}}]);return ca}(m);a.__decorate([t.property()],b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([t.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"inputId",null);a.__decorate([t.property({readOnly:!0})],b.prototype,
"suggestionsMenuId",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([t.property()],b.prototype,"activeMenu",void 0);a.__decorate([t.property({readOnly:!0})],b.prototype,"activeSource",null);a.__decorate([t.property()],b.prototype,"activeSourceIndex",null);a.__decorate([t.property()],b.prototype,"allPlaceholder",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"allSources",
null);a.__decorate([t.property()],b.prototype,"autoNavigate",null);a.__decorate([t.property()],b.prototype,"autoSelect",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"defaultSources",null);a.__decorate([t.property()],b.prototype,"disabled",void 0);a.__decorate([t.property()],b.prototype,"goToOverride",null);a.__decorate([t.property()],b.prototype,"iconClass",void 0);a.__decorate([t.property()],b.prototype,"includeDefaultSources",null);a.__decorate([t.property()],b.prototype,"label",null);
a.__decorate([t.property()],b.prototype,"locationEnabled",null);a.__decorate([t.property()],b.prototype,"maxResults",null);a.__decorate([t.property()],b.prototype,"maxSuggestions",null);a.__decorate([t.property(),x.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([t.property(),x.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);a.__decorate([t.property()],b.prototype,"minSuggestCharacters",null);a.__decorate([t.property()],b.prototype,
"popupEnabled",null);a.__decorate([t.property()],b.prototype,"popupTemplate",null);a.__decorate([t.property()],b.prototype,"portal",null);a.__decorate([t.property()],b.prototype,"resultGraphic",null);a.__decorate([t.property()],b.prototype,"resultGraphicEnabled",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"results",null);a.__decorate([t.property()],b.prototype,"searchAllEnabled",null);a.__decorate([t.property()],b.prototype,"searchTerm",null);a.__decorate([t.property({readOnly:!0})],
b.prototype,"selectedResult",null);a.__decorate([t.property()],b.prototype,"sources",null);a.__decorate([t.property({readOnly:!0})],b.prototype,"suggestions",null);a.__decorate([t.property()],b.prototype,"suggestionsEnabled",null);a.__decorate([t.property()],b.prototype,"view",null);a.__decorate([G.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),t.property({type:I})],b.prototype,"viewModel",void 0);return b=a.__decorate([h.subclass("esri.widgets.Search")],
b)});