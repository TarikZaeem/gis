// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../Graphic ../../core/maybe ../../geometry/Extent ../../geometry/Mesh ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/axisAngleDegrees ../../geometry/support/MeshTransform ./FeatureSet".split(" "),function(k,p,l,q,m,r,t,u,v,w){function x(a){return({attributes:b})=>{if(!b)return{};if(!a)return b;for(const c in b)a.has(c)||delete b[c];return b}}function y(a,b,c,e,d){b=d.get(a.attributes[b]);if(null==b||b.status===f.FAILED||null==b.url)return null;d=z(a,
c,e);const h=q.fromJSON(a.geometry);h.spatialReference=c;a=A(a.attributes,e,b.projectVertices);return b.status===f.PENDING?m.createIncomplete(d,{extent:h,transform:a}):m.createWithExternalSource(d,[{name:b.name,source:b.url}],{extent:h,transform:a})}function z({attributes:a},b,{transformFieldRoles:c}){return new r({x:a[c.originX],y:a[c.originY],z:a[c.originZ],spatialReference:b})}function A(a,{transformFieldRoles:b},c){return new v({translation:[a[b.translationX],-a[b.translationZ],a[b.translationY]],
rotation:u.fromAxisAndAngle([a[b.rotationX],a[b.rotationZ],a[b.rotationY]],a[b.rotationDeg]),scale:[a[b.scaleX],a[b.scaleY],a[b.scaleZ]],geographic:c})}function B(a,b){a=new Map;for(const c of b){b=c.parentGlobalId;if(null==b)continue;const e=c.assetName,d=c.assetURL,h=c.conversionStatus;let g=a.get(b);if(null==g)switch(g={name:e,status:f.FAILED,url:d,projectVertices:c.flags.includes("PROJECT_VERTICES")},a.set(b,g),h){case "COMPLETED":case "SUBMITTED":g.status=f.COMPLETED;break;case "INPROGRESS":g.status=
f.PENDING;break;default:g.status=f.FAILED}else console.warn(`Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ${c.assetName}`)}return a}var f;(function(a){a[a.FAILED=0]="FAILED";a[a.PENDING=1]="PENDING";a[a.COMPLETED=2]="COMPLETED"})(f||(f={}));k.meshFeatureSetFromJSON=function(a,b,c){var e=c.features;c.features=[];delete c.geometryType;const d=w.fromJSON(c);d.geometryType="mesh";if(!c.assetMaps)return d;const h=B(b,c.assetMaps),g=d.spatialReference??t.WGS84;c=
c.globalIdFieldName;({outFields:a}=a);a=l.isSome(a)&&0<a.length?x(a.includes("*")?null:new Set(a)):()=>({});for(const n of e)e=y(n,c,g,b,h),l.isSome(e)&&d.features.push(new p({geometry:e,attributes:a(n)}));return d};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});