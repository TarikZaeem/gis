// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../kernel ../../../request ../../../core/urlUtils ../../operations/urlUtils ../support/AttachmentInfo".split(" "),function(f,p,q,m,r,t,u){function v(a){a=a.toJSON();a.attachmentTypes&&(a.attachmentTypes=a.attachmentTypes.join(","));a.keywords&&(a.keywords=a.keywords.join(","));a.globalIds&&(a.globalIds=a.globalIds.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.size&&(a.size=a.size.join(","));return a}function g(){g=p._asyncToGenerator(function*(a,
b,c){const {objectIds:e}=b;b=[];for(const d of e)b.push(m(a.path+"/"+d+"/attachments",c));return Promise.all(b).then(d=>e.map((h,k)=>({parentObjectId:h,attachmentInfos:d[k].data.attachmentInfos})))});return g.apply(this,arguments)}f.executeAttachmentQuery=function(a,b,c){b={query:t.mapParameters({...a.query,f:"json",...v(b)})};c&&(b={...c,...b,query:{...c.query,...b.query}});return m(a.path+"/queryAttachments",b).then(e=>e.data.attachmentGroups)};f.fetchAttachments=function(a,b,c){return g.apply(this,
arguments)};f.processAttachmentQueryResult=function(a,b){const c={};for(const e of b){const {parentObjectId:d,parentGlobalId:h,attachmentInfos:k}=e;for(const n of k){({id:b}=n);b=r.addProxy(q.addTokenParameter(`${a.path}/${d}/attachments/${b}`));const l=u.fromJSON(n);l.set({url:b,parentObjectId:d,parentGlobalId:h});c[d]?c[d].push(l):c[d]=[l]}}return c};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});