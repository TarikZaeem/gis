// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.26/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageDistanceResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),function(g,h,S,m,k,p,f,J,K,L,M,N,O,P,Q,E){function F(b){const a=b?.time;if(a&&(null!=a.start||null!=
a.end)){const c=[];null!=a.start&&c.push(a.start);null==a.end||c.includes(a.end)||c.push(a.end);b.time=c.join(",")}}function G(b,a,c){return r.apply(this,arguments)}function r(){r=h._asyncToGenerator(function*(b,a,c){b=f.parseUrl(b);var d=yield p.normalizeCentralMeridian(a.geometry?[a.geometry]:[]);a=a.toJSON();F(a);d=d&&d[0];k.isSome(d)&&(a.geometry=d.toJSON());b=f.encode({...b.query,f:"json",...a});return f.asValidOptions(b,c)});return r.apply(this,arguments)}function t(){t=h._asyncToGenerator(function*(b,
a,c){var d=a.toJSON();k.isSome(d.angleName)&&(d.angleName=d.angleName.join(","));k.isSome(a.point)&&a.point.spatialReference?.imageCoordinateSystem&&(d.point.spatialReference=n(a.point.spatialReference));k.isSome(a.spatialReference)&&a.spatialReference.imageCoordinateSystem&&(d.spatialReference=H(a.spatialReference));b=f.parseUrl(b);d=f.encode({...b.query,f:"json",...d});c=f.asValidOptions(d,c);({data:c}=yield m(`${b.path}/computeAngles`,c));c.spatialReference=c.spatialReference?null!=c.spatialReference.geodataXform?
new E({wkid:0,imageCoordinateSystem:c.spatialReference}):E.fromJSON(c.spatialReference):null;"NaN"===c.north&&(c.north=null);"NaN"===c.up&&(c.up=null);return new J(c)});return t.apply(this,arguments)}function u(){u=h._asyncToGenerator(function*(b,a,c){var d=a.toJSON();({geometries:a}=a);if(a)for(let e=0;e<a.length;e++)a[e].spatialReference?.imageCoordinateSystem&&(d.geometries.geometries[e].spatialReference=n(a[e].spatialReference));b=f.parseUrl(b);d=f.encode({...b.query,f:"json",...d});c=f.asValidOptions(d,
c);({data:c}=yield m(`${b.path}/computePixelLocation`,c));return O.fromJSON(c)});return u.apply(this,arguments)}function v(){v=h._asyncToGenerator(function*(b,a,c){a=yield G(b,a,c);b=f.parseUrl(b);({data:b}=yield m(`${b.path}/computeStatisticsHistograms`,a));({statistics:a}=b);a?.length&&a.forEach(d=>{d.avg=d.mean;d.stddev=d.standardDeviation});return{statistics:a,histograms:b.histograms}});return v.apply(this,arguments)}function w(){w=h._asyncToGenerator(function*(b,a,c){a=yield G(b,a,c);b=f.parseUrl(b);
({data:b}=yield m(`${b.path}/computeHistograms`,a));return{histograms:b.histograms}});return w.apply(this,arguments)}function x(){x=h._asyncToGenerator(function*(b,a,c){var d=a.toJSON();F(d);d.outFields?.length&&(d.outFields=d.outFields.join(","));a=(yield p.normalizeCentralMeridian(a.geometry))?.[0];k.isSome(a)&&(d.geometry=a.toJSON());b=f.parseUrl(b);d=f.encode({...b.query,f:"json",...d});c=f.asValidOptions(d,c);({data:c}=yield m(`${b.path}/getSamples`,c));c=c?.samples?.map(e=>{const l="NaN"===
e.value||""===e.value?null:e.value.split(" ").map(R=>Number(R));return{...e,pixelValue:l}});return Q.fromJSON({samples:c})});return x.apply(this,arguments)}function y(){y=h._asyncToGenerator(function*(b,a,c){const d=f.parseUrl(b);return p.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(e=>{var l=a.toJSON();e=e&&e[0];k.isSome(e)&&(l.geometry=JSON.stringify(e.toJSON()));l=f.encode({...d.query,f:"json",...l});l=f.asValidOptions(l,c);return m(d.path+"/identify",l)}).then(e=>N.fromJSON(e.data))});
return y.apply(this,arguments)}function z(){z=h._asyncToGenerator(function*(b,a,c){b=yield q(b,a,[a.fromGeometry,a.toGeometry],c);return M.fromJSON(b)});return z.apply(this,arguments)}function A(){A=h._asyncToGenerator(function*(b,a,c){b=yield q(b,a,[a.geometry],c);return K.fromJSON(b)});return A.apply(this,arguments)}function B(){B=h._asyncToGenerator(function*(b,a,c){b=yield q(b,a,[a.geometry],c);return P.fromJSON(b)});return B.apply(this,arguments)}function C(){C=h._asyncToGenerator(function*(b,
a,c){b=yield q(b,a,[a.fromGeometry,a.toGeometry],c);return L.fromJSON(b)});return C.apply(this,arguments)}function q(b,a,c,d){return D.apply(this,arguments)}function D(){D=h._asyncToGenerator(function*(b,a,c,d){b=f.parseUrl(b);c=yield p.normalizeCentralMeridian(c);a=a.toJSON();k.isSome(c[0])&&(a.fromGeometry=JSON.stringify(I(c[0])));k.isSome(c[1])&&(a.toGeometry=JSON.stringify(I(c[1])));a=f.encode({...b.query,f:"json",...a});d=f.asValidOptions(a,d);({data:d}=yield m(b.path+"/measure",d));return d});
return D.apply(this,arguments)}function I(b){const a=b.toJSON();b.spatialReference?.imageCoordinateSystem&&(a.spatialReference=n(b.spatialReference));return a}function n(b){const {imageCoordinateSystem:a}=b;if(a){const {id:c,referenceServiceName:d}=a;return null!=c?d?{icsid:c,icsns:d}:{icsid:c}:{ics:a}}return b.toJSON()}function H(b,a){b=n(b);const {icsid:c,icsns:d,wkid:e}=b;return null!=c?null==d||a?.toLowerCase().includes("/"+d.toLowerCase()+"/")?`0:${c}`:JSON.stringify(b):e?e.toString():JSON.stringify(b)}
g.computeAngles=function(b,a,c){return t.apply(this,arguments)};g.computeHistograms=function(b,a,c){return w.apply(this,arguments)};g.computePixelSpaceLocations=function(b,a,c){return u.apply(this,arguments)};g.computeStatisticsHistograms=function(b,a,c){return v.apply(this,arguments)};g.getImageSpatialReferenceJSON=n;g.getImageSpatialReferenceQueryParameter=H;g.getSamples=function(b,a,c){return x.apply(this,arguments)};g.identify=function(b,a,c){return y.apply(this,arguments)};g.measureAreaAndPerimeter=
function(b,a,c){return A.apply(this,arguments)};g.measureDistanceAndAngle=function(b,a,c){return C.apply(this,arguments)};g.measureHeight=function(b,a,c){return z.apply(this,arguments)};g.measurePointOrCentroid=function(b,a,c){return B.apply(this,arguments)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});